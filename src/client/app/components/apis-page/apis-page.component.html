<div class="apis-container">
  <h2>CATCH APIs</h2>

  <h3>Access Methods</h3>

  <p>
    This is the frontend interface of the CATCH tool. The tool itself primarily consists in the
    publicly available APIs that you can access directly through
    <a href="http://catch.astro.umd.edu/catch/docs"> this swagger interface</a> or via scripts as
    demonstrated at <a href="https://github.com/dwd-umd/catch-demo-scripts">this github repo</a>.
  </p>

  <h3>Overview of API Call</h3>

  <p>
    Querying an astronomical object for CATCH data involves several steps. First, ensure that you
    submit a precise name of the target comet/asteroid. We provide a route to which you can submit
    the 'name' query parameter, e.g. '65P':
  </p>

  <p>
    <code>https://catch.astro.umd.edu/catch/query/name?name=65P</code>
  </p>
  <p>
    and get back possible matches. Second, submit such a verified name to the query parameter
    'target' as follows:
  </p>

  <p>
    <code>http://catch.astro.umd.edu/catch/query/moving?target=65P</code>
  </p>

  <p>
    This will return a job_id parameter and information on the availability of the data for that
    target. If the target has been searched for previously then it will be cached and the property
    'queued' will be false. If 'queued=false' then the job_id can be passed straight onto the
    'caught' route which retrieves the cached data for that job_id:
  </p>
  <p>
    <code> https://catch.astro.umd.edu/catch/caught/&#123;job_id&#125;</code>
  </p>

  <p>
    If data has not been cached (or if you request a recomputation of the data via the
    '/query/moving' route) then a lengthy query will have been launched and the property
    'queued=true' will have been returned. In this case, you'll need to wait until the data is ready
    to retrieve it via the '/caught/&#123;job_id&#125;' route.
  </p>

  <p>
    The time required to prepare the data varies from object to object and typically takes between
    5-30 seconds. To know exactly when the route is ready, you can subscribe to
    <i>Server Sent Events</i> generated by the route
  </p>

  <p>
    <code>
      https://catch.astro.umd.edu/catch/stream;
    </code>
  </p>

  <p>
    which will emit the job_id you received from the '/query/moving' route when the data is ready.
    At that point you can submit the job_id to the '/caught/&#123;job_id&#125;' route and expect to
    receive the freshly (re-)computed data for your target.
  </p>

  <p>
    At the moment, if the results array in the body returned from the '/caught/&#123;job_id&#125;'
    route is empty then that means that EITHER the name of the target does not exists or has not
    been recognized OR that no precoveries have been found for that target. We will soon update the
    API to distinguish between these two cases.
  </p>
</div>
