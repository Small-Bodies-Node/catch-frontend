/* You can add global styles to this file, and also import other style files */

@use '@angular/material' as mat;
@use 'sass:map';

/* Modern CSS reset / normalization */
*, *::before, *::after { box-sizing: border-box; }

html, body { height: 100%; }

/* Remove UA 8px body margin and set good defaults */
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--mat-sys-color-on-surface, rgba(0,0,0,0.87));
  background: var(--mat-sys-color-surface, #ffffff);
}

img, picture, video, canvas, svg { display: block; max-width: 100%; }

/* Form elements inherit typography */
input, button, textarea, select { font: inherit; }

/* Links: neutral by default; components style focus/hover */
a { color: inherit; text-decoration: none; }

// Material 3 theming
@include mat.core();

// Custom M3 palettes (approximate values). Tweak freely.
$my-palettes: (
  primary: (
    0: #000000,
    10: #001a33,
    20: #003366,
    25: #003f80,
    30: #004c99,
    35: #0a59ad,
    40: #1565c0, // primary tone used in light theme
    50: #1e88e5,
    60: #42a5f5,
    70: #64b5f6,
    80: #90caf9,
    90: #bbdefb,
    95: #e3f2fd,
    98: #f4f9ff,
    99: #fafcff,
    100: #ffffff,
  ),
  secondary: (
    0: #000000,
    10: #332200,
    20: #664400,
    25: #805300,
    30: #996300,
    35: #b37700,
    40: #ffb300, // gold accent
    50: #ffc107,
    60: #ffca28,
    70: #ffd54f,
    80: #ffe082,
    90: #ffecb3,
    95: #fff3d3,
    98: #fff8e6,
    99: #fffcf2,
    100: #ffffff,
  ),
  tertiary: (
    0: #000000,
    10: #002019,
    20: #004d40,
    25: #00584d,
    30: #00695c,
    35: #007a6a,
    40: #00897b,
    50: #26a69a,
    60: #4db6ac,
    70: #80cbc4,
    80: #b2dfdb,
    90: #e0f2f1,
    95: #eff9f8,
    98: #f6fdfc,
    99: #fbfefd,
    100: #ffffff,
  ),
  neutral: (
    0: #000000,
    10: #1a1a1a,
    20: #333333,
    25: #3d3d3d,
    30: #4d4d4d,
    35: #5c5c5c,
    40: #666666,
    50: #808080,
    60: #999999,
    70: #b3b3b3,
    80: #cccccc,
    90: #e6e6e6,
    95: #f2f2f2,
    98: #fafafa,
    99: #fdfdfd,
    100: #ffffff,
  ),
  'neutral-variant': (
    0: #000000,
    10: #1f1a13,
    20: #3b342d,
    25: #463f37,
    30: #564e46,
    35: #615850,
    40: #726960,
    50: #8e857b,
    60: #aaa097,
    70: #c7bdb3,
    80: #e3d9cf,
    90: #f1e6dc,
    95: #f8efe6,
    98: #fcf7f1,
    99: #fefbf7,
    100: #ffffff,
  ),
  error: (
    0: #000000,
    10: #410002,
    20: #690005,
    25: #7e0008,
    30: #93000a,
    35: #a30f12,
    40: #ba1a1a,
    50: #de3730,
    60: #ff5449,
    70: #ff897d,
    80: #ffb4ab,
    90: #ffdad6,
    95: #ffeceb,
    98: #fff8f7,
    99: #fffbff,
    100: #ffffff,
  ),
);

// Build valid M3 palette objects by merging the tone map with the rest palettes
$rest-palettes: (
  secondary: map.get($my-palettes, secondary),
  neutral: map.get($my-palettes, neutral),
  'neutral-variant': map.get($my-palettes, 'neutral-variant'),
  error: map.get($my-palettes, error),
);

// Primary is blue; tertiary accent uses our gold (from secondary)
$primary-palette: map.merge(map.get($my-palettes, primary), $rest-palettes);
$tertiary-palette: map.merge(map.get($my-palettes, secondary), $rest-palettes);

// Brand theme using the custom palettes (M3 expects primary/tertiary tone maps)
$brand-theme: mat.define-theme((
  color: (
    theme-type: light,
    use-system-variables: true,
    primary: $primary-palette,
    // Use gold as the tertiary accent in M3
    tertiary: $tertiary-palette,
  ),
));

// Apply theme to all Angular Material components
@include mat.all-component-themes($brand-theme);

/* Toolbar global overrides to ensure primary background */
mat-toolbar.app-toolbar,
mat-toolbar.app-toolbar .mat-toolbar-row,
mat-toolbar.app-toolbar .mat-toolbar-single-row {
  background-color: var(--mat-sys-color-primary, #1e88e5) !important;
  color: var(--mat-sys-color-on-primary, #ffffff) !important;
}

mat-toolbar.app-toolbar .mdc-button__label,
mat-toolbar.app-toolbar .mat-icon,
mat-toolbar.app-toolbar .mat-mdc-button,
mat-toolbar.app-toolbar .mat-mdc-icon-button {
  color: inherit !important;
}

/* Active link underline in gold (tertiary) */
mat-toolbar.app-toolbar .top-nav a.active {
  border-bottom: 2px solid var(--mat-sys-color-tertiary, #ffb300);
  border-radius: 0;
}

/* Solid background for user dropdown menu */
.mat-mdc-menu-panel {
  background-color: var(--mat-sys-color-surface, #ffffff) !important;
  color: var(--mat-sys-color-on-surface, rgba(0,0,0,0.87)) !important;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1) !important;
}
