(self.webpackChunkcatch_frontend=self.webpackChunkcatch_frontend||[]).push([[629],{9629:(bl,y,Q)=>{"use strict";Q.r(y),Q.d(y,{DataModule:()=>Ar});var K=Q(6895),m=Q(8252),v=Q(6529),b=Q(9102),h=Q(4650),e=Q(655);const n=["plot"],r=["*"];class o{static setModuleName(ur){o.moduleName=ur}static getModuleName(){return o.moduleName}static setPlotly(ur){if("object"==typeof ur&&"function"!=typeof ur.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");o.plotly=ur}static insert(ur){return-1===o.instances.indexOf(ur)&&o.instances.push(ur),ur}static remove(ur){const Tt=o.instances.indexOf(ur);Tt>=0&&(o.instances.splice(Tt,1),o.plotly.purge(ur))}getInstanceByDivId(ur){for(const Tt of o.instances)if(Tt&&Tt.id===ur)return Tt}getPlotly(){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(typeof o.plotly>"u")throw new Error("ViaCDN"===o.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return o.plotly}waitFor(ur){return new Promise(Tt=>{const Qt=()=>{ur()?Tt():setTimeout(Qt,10)};Qt()})}newPlot(ur,Tt,Qt,Er,zr){return(0,e.mG)(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),zr){const an={data:Tt,layout:Qt,config:Er,frames:zr};return this._getPlotly().newPlot(ur,an).then(()=>o.insert(ur))}return this._getPlotly().newPlot(ur,Tt,Qt,Er).then(()=>o.insert(ur))})}plot(ur,Tt,Qt,Er,zr){if(zr){const an={data:Tt,layout:Qt,config:Er,frames:zr};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(ur,an):this._getPlotly().newPlot(ur,an)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(ur,Tt,Qt,Er):this._getPlotly().newPlot(ur,Tt,Qt,Er)}update(ur,Tt,Qt,Er,zr){if(zr){const an={data:Tt,layout:Qt,config:Er,frames:zr};return this._getPlotly().react(ur,an)}return this._getPlotly().react(ur,Tt,Qt,Er)}resize(ur){return this._getPlotly().Plots.resize(ur)}}o.\u0275fac=function(ur){return new(ur||o)},o.instances=[],o.plotly=void 0,o.moduleName=void 0,o.\u0275prov=h.Yz7({factory:function(){return new o},token:o,providedIn:"root"});let t=(()=>{class zt{constructor(Tt,Qt,Er){this.plotly=Tt,this.iterableDiffers=Qt,this.keyValueDiffers=Er,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new h.vpe,this.update=new h.vpe,this.purge=new h.vpe,this.error=new h.vpe,this.afterExport=new h.vpe,this.afterPlot=new h.vpe,this.animated=new h.vpe,this.animatingFrame=new h.vpe,this.animationInterrupted=new h.vpe,this.autoSize=new h.vpe,this.beforeExport=new h.vpe,this.buttonClicked=new h.vpe,this.click=new h.vpe,this.plotlyClick=new h.vpe,this.clickAnnotation=new h.vpe,this.deselect=new h.vpe,this.doubleClick=new h.vpe,this.framework=new h.vpe,this.hover=new h.vpe,this.legendClick=new h.vpe,this.legendDoubleClick=new h.vpe,this.react=new h.vpe,this.relayout=new h.vpe,this.restyle=new h.vpe,this.redraw=new h.vpe,this.selected=new h.vpe,this.selecting=new h.vpe,this.sliderChange=new h.vpe,this.sliderEnd=new h.vpe,this.sliderStart=new h.vpe,this.transitioning=new h.vpe,this.transitionInterrupted=new h.vpe,this.unhover=new h.vpe,this.relayouting=new h.vpe,this.treemapclick=new h.vpe,this.sunburstclick=new h.vpe,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const Tt=this.createFigure();this.initialized.emit(Tt)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const Tt=this.createFigure();this.purge.emit(Tt),o.remove(this.plotlyInstance)}ngOnChanges(Tt){let Qt=!1;const Er=Tt.revision;Er&&!Er.isFirstChange()&&(Qt=!0);const zr=Tt.debug;zr&&!zr.isFirstChange()&&(Qt=!0),Qt&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let Tt=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(Tt=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(Tt=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),Tt&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let Tt=[this.defaultClassName];return Array.isArray(this.className)?Tt=Tt.concat(this.className):this.className&&Tt.push(this.className),Tt.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(Tt=>{this.plotlyInstance=Tt,this.getWindow().gd=this.debug?Tt:void 0,this.eventNames.forEach(Qt=>{const Er=`plotly_${Qt.toLowerCase()}`;Tt.on(Er,zr=>this[Qt].emit(zr))}),Tt.on("plotly_click",Qt=>{this.click.emit(Qt),this.plotlyClick.emit(Qt)}),this.updateWindowResizeHandler()},Tt=>{console.error("Error while plotting:",Tt),this.error.emit(Tt)})}createFigure(){const Tt=this.plotlyInstance;return{data:Tt.data,layout:Tt.layout,frames:Tt._transitionData?Tt._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const Qt=new Error("Plotly component wasn't initialized");throw this.error.emit(Qt),Qt}const Tt=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,Tt,this.config,this.frames).then(()=>{const Qt=this.createFigure();this.update.emit(Qt)},Qt=>{console.error("Error while updating plot:",Qt),this.error.emit(Qt)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(Tt,Qt){const Er=Object.assign({},Qt,{uid:""});return JSON.stringify(Er)}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(o),h.Y36(h.ZZ4),h.Y36(h.aQg))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["plotly-plot"]],viewQuery:function(Tt,Qt){if(1&Tt&&h.Gf(n,7),2&Tt){let Er;h.iGM(Er=h.CRH())&&(Qt.plotEl=Er.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[h._Bn([o]),h.TTD],ngContentSelectors:r,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(Tt,Qt){1&Tt&&(h.F$t(),h.TgZ(0,"div",0,1),h.Hsn(2),h.qZA()),2&Tt&&(h.Q6J("ngClass",Qt.getClassName())("ngStyle",Qt.style),h.uIk("id",Qt.divId))},dependencies:[K.mk,K.PC],encapsulation:2}),zt})(),d=(()=>{class zt{constructor(){}}return zt.\u0275fac=function(Tt){return new(Tt||zt)},zt.\u0275mod=h.oAB({type:zt}),zt.\u0275inj=h.cJS({providers:[o],imports:[K.ez]}),zt})(),a=(()=>{class zt{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");o.setPlotly(zt.plotlyjs)}isValid(){return void 0!==zt.plotlyjs&&("function"==typeof zt.plotlyjs.plot||"function"==typeof zt.plotlyjs.newPlot)}}return zt.\u0275fac=function(Tt){return new(Tt||zt)},zt.\u0275mod=h.oAB({type:zt}),zt.\u0275inj=h.cJS({providers:[o],imports:[K.ez,d,d]}),zt.plotlyjs={},zt})();var c=Q(6306),l=Q(9653),p=Q(727),g=Q(9841),u=Q(4004),x=Q(1884),f=Q(7979),T=Q(7467),_=Q(1444),k=Q(2421),w=Q(6308),C=Q(7155);const A={airmass:{description:"Observation airmass",fractionSize:1,label:"Airmass"},archive_url:{description:"Full frame image from data archive",label:"Archive URL"},cutout_url:{description:"Cutout image around target ephemeris",label:"Cutout URL"},date:{description:"ASK MSK",label:"Date"},ddec:{description:"Declination rate of change: dDec/dt (arcsec/hr)",fractionSize:2,label:"d[Dec]/dt"},dec:{description:"Object Declination (deg)",fractionSize:4,label:"Dec"},delta:{description:"Observer-target distance (au)",fractionSize:3,label:"\u0394"},designation:{description:"Object designation",label:"Designation"},dra:{description:"Right Ascension rate of change: dRA/dt cos(Dec) (arcsec/hr)",fractionSize:2,label:"d[RA]/dt"},drh:{description:"ASK MSK",fractionSize:2,label:"drh"},elong:{description:"ASK MSK",fractionSize:2,label:"elong"},exposure:{description:"Exposure time",fractionSize:0,label:"Exp"},filter:{description:"Filter name",label:"Filter"},instrument:{description:"NEAT instrument name",label:"Instrument"},jd:{description:"Julian Date",label:"JD"},maglimit:{description:"ASK MSK",label:"magLimit"},mjd_start:{description:"ASK MSK",label:"MJD Start"},mjd_stop:{description:"ASK MSK",label:"MJD STOP"},phase:{description:"Sun-observer-target angle (deg)",fractionSize:1,label:"Phase"},preview_url:{description:"Preview cutout image around target ephemeris in a web image format",label:"Preview URL"},product_id:{description:"Unique NEAT product ID",label:"Product ID"},ra:{description:"Object Right Ascension (deg)",fractionSize:4,label:"RA"},rdot:{description:"Heliocentric radial velocity (km/s)",fractionSize:1,label:"d[rh]/dt"},rh:{description:"Heliocentric distance (au)",fractionSize:3,label:"rh"},sangle:{description:"Position angle of projected target-Sun vector, east of Celestial north (deg)",fractionSize:0,label:"PA(\u2299)"},seeing:{description:"ASK MSK",fractionSize:0,label:"Seeing"},selong:{description:"Solar elongation (deg)",fractionSize:0,label:"E(\u2299)"},source:{description:"ASK MSK",label:"Source"},source_name:{description:"ASK MSK",label:"Source Name"},tmtp:{description:"Time to nearest perihelion based on osculating orbital elements (days)",fractionSize:1,label:"T-T\u209a"},true_anomaly:{description:"True anomaly based on osculating orbital elements (deg)",fractionSize:1,label:"\u03bd"},unc_a:{description:"Error ellipse semi-major axis (arcsec)",fractionSize:2,label:"\u03c3(a)"},unc_b:{description:"Error ellipse semi-minor axis (arcsec)",fractionSize:2,label:"\u03c3(b)"},unc_theta:{description:"Error ellipse position angle (deg)",fractionSize:0,label:"\u03c3(\u03b8)"},vangle:{description:"Position angle of projected target velocity   vector, east of Celestial north (deg)",fractionSize:0,label:"PA(v)"},vmag:{description:"Predicted V-band brightness (mag); For comet ephemerides from JPL, this value is T-mag, if available, otherwise N-mag",fractionSize:1,label:"V"}};var O=Q(5430),P=Q(3192),S=Q(7445),D=Q(2339);const z=(0,l.P1)(zt=>zt.tableCheckbox,zt=>(console.log("Date 1",new Date),zt.tableCheckboxState));var N=Q(4859),V=Q(6709),X=Q(7392),J=Q(1572),G=Q(266);const Z=["checkboxesContainer"];function re(zt,ur){1&zt&&(h.ynx(0),h.TgZ(1,"div",2),h._UZ(2,"mat-spinner"),h.qZA(),h.BQk())}function j(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"div",10)(1,"button",11)(2,"mat-icon"),h._uU(3,"info"),h.qZA()(),h.TgZ(4,"mat-checkbox",12),h.NdJ("change",function(Er){const an=h.CHM(Tt).$implicit,Kr=h.oxw(3);return h.KtG(Kr.updateColState(Er,an))}),h._uU(5),h.qZA()()}if(2&zt){const Tt=ur.$implicit,Qt=h.oxw(3);h.xp6(1),h.Q6J("matTooltip",Qt.labels&&Qt.labels[Tt]&&(null==Qt.labels[Tt]?null:Qt.labels[Tt].description)||""),h.xp6(3),h.Q6J("checked",Qt.colState[Tt]),h.xp6(1),h.hij(" ",Qt.labels&&Qt.labels[Tt]&&(null==Qt.labels[Tt]?null:Qt.labels[Tt].label)||""," ")}}const B=function(zt,ur,Tt,Qt){return{"checkboxes-container-x2-col":zt,"checkboxes-container-x3-col":ur,"checkboxes-container-x4-col":Tt,"checkboxes-container-x5-col":Qt}};function H(zt,ur){if(1&zt){const Tt=h.EpF();h.ynx(0),h.TgZ(1,"div",3)(2,"div",4,5),h.YNc(4,j,6,3,"div",6),h.qZA(),h.TgZ(5,"div",7)(6,"div",8)(7,"button",9),h.NdJ("click",function(){h.CHM(Tt);const Er=h.oxw(2);return h.KtG(Er.selectAll())}),h._uU(8," SELECT ALL "),h.qZA()(),h.TgZ(9,"div",8)(10,"button",9),h.NdJ("click",function(){h.CHM(Tt);const Er=h.oxw(2);return h.KtG(Er.resetAll())}),h._uU(11," RESET "),h.qZA()()()(),h.BQk()}if(2&zt){const Tt=ur.ngIf,Qt=h.oxw(2);h.xp6(2),h.Q6J("ngClass",h.l5B(2,B,Tt>300,Tt>450,Tt>600,Tt>750)),h.xp6(2),h.Q6J("ngForOf",Qt.allColNames)}}function ee(zt,ur){if(1&zt&&(h.ynx(0),h.YNc(1,H,12,7,"ng-container",1),h.ALo(2,"async"),h.BQk()),2&zt){const Tt=h.oxw();h.xp6(1),h.Q6J("ngIf",h.lcZ(2,1,Tt.containerWidth$))}}let U=(()=>{class zt{constructor(Tt){this.$store=Tt,this.subscriptions=new p.w0,this.colState={...P.D},this.labels=A,this.isSpinner=!0,this.allColNames=Object.keys(P.D).filter(Qt=>!["preview_url"].includes(Qt)),this.subscriptions.add(this.$store.select(z).subscribe(Qt=>{this.colState={...Qt},setTimeout(()=>{this.isSpinner=!1},1e3)})),this.containerWidth$=(0,S.F)(50).pipe((0,u.U)(Qt=>{const Er=this.checkboxesContainer?this.checkboxesContainer.nativeElement.offsetWidth:100;return console.log(">>>>",Er),Er}),(0,x.x)())}ngOnInit(){}ngOnDestroy(){}updateColState(Tt,Qt){this.colState={...this.colState,[Qt]:Tt.checked},this.$store.dispatch(new D.n({newTableCheckboxState:{...this.colState}}))}selectAll(){const Tt={...this.colState};Object.keys(Tt).forEach(Qt=>{Tt[Qt]=!0}),this.isSpinner=!0,setTimeout(()=>{this.$store.dispatch(new D.n({newTableCheckboxState:{...Tt}}))},1e3)}resetAll(){this.isSpinner=!0,setTimeout(()=>{this.$store.dispatch(new D.n({newTableCheckboxState:P.D}))},1e3)}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(l.yh))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-table-checkboxes"]],viewQuery:function(Tt,Qt){if(1&Tt&&h.Gf(Z,5),2&Tt){let Er;h.iGM(Er=h.CRH())&&(Qt.checkboxesContainer=Er.first)}},decls:3,vars:2,consts:[[1,"checkboxes-container3"],[4,"ngIf"],[1,"spinner-wrapper"],[1,"checkboxes-container2"],[1,"checkboxes-container",3,"ngClass"],["checkboxesContainer",""],["class","button-wrapper",4,"ngFor","ngForOf"],[1,"utility-buttons-wrapper"],[1,"utility-button"],["mat-raised-button","","color","accent",3,"click"],[1,"button-wrapper"],["mat-icon-button","",3,"matTooltip"],["color","accent",1,"example-margin",3,"checked","change"]],template:function(Tt,Qt){1&Tt&&(h.TgZ(0,"div",0),h.YNc(1,re,3,0,"ng-container",1),h.YNc(2,ee,3,3,"ng-container",1),h.qZA()),2&Tt&&(h.xp6(1),h.Q6J("ngIf",Qt.isSpinner),h.xp6(1),h.Q6J("ngIf",!!Qt.allColNames&&!!Qt.labels&&!!Qt.colState))},dependencies:[K.mk,K.sg,K.O5,N.lW,V.oG,X.Hw,J.Ou,G.gM,K.Ov],styles:[".checkboxes-container3[_ngcontent-%COMP%]{box-sizing:border-box;display:block;justify-content:center;overflow-x:hidden;position:relative;width:500px;height:80vh;max-width:80vw;max-height:80vh}.checkboxes-container3[_ngcontent-%COMP%]   .spinner-wrapper[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.checkboxes-container3[_ngcontent-%COMP%]   .checkboxes-container2[_ngcontent-%COMP%]{width:100%;height:100%}.checkboxes-container3[_ngcontent-%COMP%]   .checkboxes-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr}.checkboxes-container3[_ngcontent-%COMP%]   .checkboxes-container[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.checkboxes-container3[_ngcontent-%COMP%]   .checkboxes-container[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transform:translateY(-4px)}.checkboxes-container3[_ngcontent-%COMP%]   .checkboxes-container-x2-col[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.checkboxes-container3[_ngcontent-%COMP%]   .checkboxes-container-x3-col[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.checkboxes-container3[_ngcontent-%COMP%]   .checkboxes-container-x4-col[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.checkboxes-container3[_ngcontent-%COMP%]   .checkboxes-container-x5-col[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}.checkboxes-container3[_ngcontent-%COMP%]   .checkboxes-container-x6-col[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}.utility-buttons-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;align-items:center;justify-content:center}.utility-buttons-wrapper[_ngcontent-%COMP%]   .utility-button[_ngcontent-%COMP%]{margin:10px 0;width:100%;flex:1 0px 100px}.utility-buttons-wrapper[_ngcontent-%COMP%]   .utility-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),zt})();var $=Q(5412),q=Q(1135),te=Q(8979);function se(zt,ur){1&zt&&h._UZ(0,"div",4)}const ie=function(zt){return{sizeDeterminer:!0,hideDisplayBar:zt}};function ue(zt,ur){if(1&zt&&(h.ynx(0),h._UZ(1,"plotly-plot",2),h.YNc(2,se,1,0,"div",3),h.BQk()),2&zt){const Tt=ur.ngIf;h.xp6(1),h.Q6J("ngClass",h.VKq(5,ie,Tt.isMiniMode))("data",Tt.data)("layout",Tt.layout)("config",Tt.config),h.xp6(1),h.Q6J("ngIf",Tt.isMiniMode)}}let le=(()=>{class zt{constructor(Tt){this.store$=Tt,this.inputPlotlyParams=void 0,this.inputPlotlyParam$=new q.X(this.inputPlotlyParams),this.setPlotlySettings()}ngOnInit(){}ngOnChanges(Tt){!Tt.inputPlotlyParams||!Tt.inputPlotlyParams.currentValue||this.inputPlotlyParam$.next(this.inputPlotlyParams)}setPlotlySettings(){this.plotlySetting$=(0,g.a)([this.inputPlotlyParam$,this.store$.select(te.qO),this.store$.select(f.tm)]).pipe((0,u.U)(([Tt,Qt,Er])=>{if(!Tt||!Er)return;const zr=!!Qt.includes("LIGHT"),{xDataKey:an,isMiniMode:Kr}=Tt,sn="ra"===an?"dec":void 0,gn=sn?"scatter":"histogram",zn=Er.map(Ur=>Ur[an]),Vr=sn?Er.map(Ur=>Ur[sn]):void 0,Qr=(Er.map(Ur=>Ur.jd).map(Ur=>"Date: "+(zt=>new Date(864e5*(zt-2440587.5)).toUTCString())(Ur||-1)),Kr?"":this.breakUpText(sn?`${an.toUpperCase()} vs ${sn.toUpperCase()}`:A[an]?.description||"")),Jr=Kr?"":an,Nn=Kr?"":sn||"Frequency",Hn="scatter"===gn&&Vr?[0,Math.ceil(Math.max.apply(null,Vr.filter(Ur=>"number"==typeof Ur)))]:void 0,Mn=Kr?"":"outside",Un=Kr?"":"outside",di=this.getPlotSize(),rr=zr?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.7)",Rt="white",gr=zr?"rgba(0,0,0,0.2)":"rgba(255,255,255,0.2)";return{isMiniMode:!!Kr,config:{displaylogo:!1,responsive:!0,displayModeBar:"hover"},data:[{x:zn,y:Vr||void 0,type:gn,marker:{color:zr?"rgba(black,0.5)":Kr?"rgba(53,119,203,1.0)":"rgba(53,119,203,0.8)",size:Kr?3:18,line:{color:"rgba(103,169,253,1.0)",width:1}},mode:"markers"}],layout:{title:Qr,titlefont:{size:18,color:rr},width:Kr?30:di.width,height:Kr?30:di.height,margin:Kr?{l:0,r:0,b:0,t:0}:{l:50,r:25,b:50,t:100},plot_bgcolor:gr,paper_bgcolor:gr,xaxis:{title:Jr,titlefont:{family:"Courier New, monospace",size:18,color:rr},autorange:"reversed",showgrid:!Kr,gridcolor:Rt,gridwidth:1,zeroline:!Kr,zerolinecolor:Rt,zerolinewidth:1,ticks:Mn,tick0:0,ticklen:8,tickwidth:1,tickcolor:Rt,tickfont:{size:14,color:rr},showline:!Kr,linecolor:Rt,linewidth:1},yaxis:{title:Nn,titlefont:{family:"Courier New, monospace",size:18,color:rr},autorange:!0,range:Hn,showgrid:!Kr,zeroline:!Kr,ticks:Un,tick0:0,dtick:void 0,ticklen:8,tickwidth:1,tickcolor:Rt,tickfont:{size:14,color:rr},showline:!Kr,linecolor:Rt,linewidth:1,gridcolor:Rt,gridwidth:1,zerolinecolor:Rt,zerolinewidth:1}}}}))}breakUpText(Tt,Qt="<br>",Er=20){return Tt.split(/\s+/).reduce((an,Kr)=>an.length?an.reduce((gn,zn)=>zn===Qt?[]:[...gn,zn],[]).join(" ").length>Er?[...an,Qt,Kr]:[...an,Kr]:[Kr],[]).join(" ")}getPlotSize(){return{width:.65*window.innerWidth,height:.65*window.innerHeight}}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(l.yh))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-plotly-graph"]],inputs:{inputPlotlyParams:"inputPlotlyParams"},features:[h.TTD],decls:3,vars:3,consts:[["id","suburban-expander"],[4,"ngIf"],[3,"ngClass","data","layout","config"],["class","miniModeCovering",4,"ngIf"],[1,"miniModeCovering"]],template:function(Tt,Qt){1&Tt&&(h.TgZ(0,"div",0),h.YNc(1,ue,3,7,"ng-container",1),h.ALo(2,"async"),h.qZA()),2&Tt&&(h.xp6(1),h.Q6J("ngIf",h.lcZ(2,1,Qt.plotlySetting$)))},dependencies:[K.mk,K.O5,t,K.Ov]}),zt})(),de=(()=>{class zt{constructor(Tt){this.inputPlotlyParams=Tt}ngOnInit(){}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36($.WI))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-plotly-graph-wrapper"]],decls:1,vars:1,consts:[[3,"inputPlotlyParams"]],template:function(Tt,Qt){1&Tt&&h._UZ(0,"app-plotly-graph",0),2&Tt&&h.Q6J("inputPlotlyParams",Qt.inputPlotlyParams)},dependencies:[le]}),zt})();var be=Q(2216);const _e=["tableContainerDiv"];function xe(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"th",12)(1,"div",13)(2,"mat-checkbox",14),h.NdJ("change",function(){h.CHM(Tt);const Er=h.oxw(2);return h.KtG(Er.selectAllDownloadRowCheckbox())}),h.qZA()()()}if(2&zt){const Tt=h.oxw(2);h.xp6(2),h.Q6J("checked",Tt.isSelectAllDownloadRowCheckboxChecked)}}const Ee=function(zt){return{"highlighted-sticky-cell":zt}};function he(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"td",15)(1,"div",13)(2,"mat-checkbox",16),h.NdJ("change",function(Er){const an=h.CHM(Tt).$implicit,Kr=h.oxw(2);return h.KtG(Kr.updateDownloadRowCheckbox(an,Er))}),h.qZA()()()}if(2&zt){const Tt=ur.$implicit,Qt=h.oxw(2);h.Q6J("ngClass",h.VKq(2,Ee,Qt.isRowSelected(Tt))),h.xp6(2),h.Q6J("checked",Qt.isRowChecked(Tt))}}function me(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"th",12)(1,"div",17)(2,"button",18),h.NdJ("click",function(Er){h.CHM(Tt);const zr=h.oxw(2);return h.KtG(zr.openSettingsDialog(Er))}),h._UZ(3,"fa-icon",19),h.qZA()()()}2&zt&&(h.xp6(3),h.Q6J("fixedWidth",!0))}function Se(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"td",20),h.NdJ("click",function(){const zr=h.CHM(Tt).index,an=h.oxw(2);return h.KtG(an.selectRowDatum(zr))}),h.TgZ(1,"div",17),h._UZ(2,"img",21),h.qZA()()}if(2&zt){const Tt=ur.$implicit,Qt=h.oxw(2);h.Q6J("ngClass",h.VKq(2,Ee,Qt.isRowSelected(Tt))),h.xp6(2),h.Q6J("src",Qt.getThumbnailUrl(Tt.preview_url),h.LSH)}}function Me(zt,ur){1&zt&&(h.TgZ(0,"th",22)(1,"div",23),h._uU(2),h.qZA()()),2&zt&&(h.xp6(2),h.hij(" ","SOURCE"," "))}function Ie(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"td",20),h.NdJ("click",function(){const zr=h.CHM(Tt).index,an=h.oxw(2);return h.KtG(an.selectRowDatum(zr))}),h.TgZ(1,"div",23),h._uU(2),h.qZA()()}if(2&zt){const Tt=ur.$implicit,Qt=h.oxw(2);h.Q6J("ngClass",h.VKq(2,Ee,Qt.isRowSelected(Tt))),h.xp6(2),h.hij(" ",Qt.getSourceName(Tt.source_name)," ")}}const Fe=function(zt){return{xDataKey:zt,isMiniMode:!0}};function Ne(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"div",32),h.NdJ("click",function(Er){h.CHM(Tt);const zr=h.oxw(3).$implicit,an=h.oxw(2);return h.KtG(an.onClickPlotly(Er,zr))}),h._UZ(1,"div",33)(2,"app-plotly-graph",34),h.qZA()}if(2&zt){const Tt=h.oxw(3).$implicit;h.xp6(2),h.Q6J("inputPlotlyParams",h.VKq(1,Fe,Tt))}}function De(zt,ur){if(1&zt&&(h.ynx(0),h.YNc(1,Ne,3,3,"div",31),h.BQk()),2&zt){const Tt=ur.$implicit,Qt=h.oxw(2).$implicit;h.xp6(1),h.Q6J("ngIf",Tt===Qt)}}const $e=function(){return["ra","delta","rh","phase","tmtp","trueanomaly"]};function Re(zt,ur){if(1&zt&&(h.TgZ(0,"th",27)(1,"div",28)(2,"div",29),h._uU(3),h.qZA(),h.YNc(4,De,2,1,"ng-container",30),h.qZA()()),2&zt){const Tt=h.oxw().$implicit,Qt=h.oxw(2);h.Q6J("matTooltip",Qt.apiDataLabels[Tt]&&Qt.apiDataLabels[Tt].description||""),h.xp6(3),h.hij(" ",Qt.apiDataLabels[Tt]&&Qt.apiDataLabels[Tt].label," "),h.xp6(1),h.Q6J("ngForOf",h.DdM(3,$e))}}const ze=function(zt){return{"highlighted-non-sticky-cell":zt}};function Ue(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"td",35),h.NdJ("click",function(){const zr=h.CHM(Tt).index,an=h.oxw(3);return h.KtG(an.selectRowDatum(zr))}),h.TgZ(1,"div",28),h._uU(2),h.qZA()()}if(2&zt){const Tt=ur.$implicit,Qt=h.oxw().$implicit,Er=h.oxw(2);h.Q6J("ngClass",h.VKq(3,ze,Er.isRowSelected(Tt)))("matTooltip",Tt[Qt]||""),h.xp6(2),h.hij(" ",Er.formatCellEntry(Tt[Qt],Er.apiDataLabels[Qt])," ")}}function je(zt,ur){if(1&zt&&(h.ynx(0,24),h.YNc(1,Re,5,4,"th",25),h.YNc(2,Ue,3,5,"td",26),h.BQk()),2&zt){const Tt=ur.$implicit;h.Q6J("sticky",!1)("matColumnDef",Tt)}}function rt(zt,ur){1&zt&&h._UZ(0,"tr",36)}function ut(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"tr",37),h.NdJ("keydown",function(Er){h.CHM(Tt);const zr=h.oxw(2);return h.KtG(zr.keyPress(Er))}),h.qZA()}}function gt(zt,ur){if(1&zt&&(h.TgZ(0,"table",3),h.ynx(1,4),h.YNc(2,xe,3,1,"th",5),h.YNc(3,he,3,4,"td",6),h.BQk(),h.ynx(4,4),h.YNc(5,me,4,1,"th",5),h.YNc(6,Se,3,4,"td",7),h.BQk(),h.ynx(7,4),h.YNc(8,Me,3,1,"th",8),h.YNc(9,Ie,3,4,"td",7),h.BQk(),h.YNc(10,je,3,2,"ng-container",9),h.TgZ(11,"tbody"),h.YNc(12,rt,1,0,"tr",10),h.YNc(13,ut,1,0,"tr",11),h.qZA()()),2&zt){const Tt=h.oxw();h.Q6J("dataSource",Tt.tableData),h.xp6(1),h.Q6J("matColumnDef","download_checkboxes")("sticky",Tt.isFirstFewColsSticky()),h.xp6(3),h.Q6J("matColumnDef","preview_url")("sticky",Tt.isFirstFewColsSticky()),h.xp6(3),h.Q6J("matColumnDef","source_name")("sticky",Tt.isFirstFewColsSticky()),h.xp6(3),h.Q6J("ngForOf",Tt.shownCols),h.xp6(2),h.Q6J("matHeaderRowDef",Tt.getAllCols())("matHeaderRowDefSticky",!0),h.xp6(1),h.Q6J("matRowDefColumns",Tt.getAllCols())}}let At=(()=>{class zt{constructor(Tt,Qt){this.store$=Tt,this.dialog=Qt,this.isScrolling=!0,this.subscriptions=new p.w0,this.colState={...P.D},this.shownCols=Object.keys(P.D).filter(Er=>P.D[Er]),this.isSelectAllDownloadRowCheckboxChecked=!1,this.apiDataLabels=A,this.downloadRowState={},this.subscriptions.add(this.store$.select(f.tm).subscribe(Er=>{this.apiData=Er,this.tableData=new C.by(this.apiData),this.sort&&(this.tableData.sort=this.sort)})),this.subscriptions.add(this.store$.select(f.ee).subscribe(Er=>{this.apiSelectedDatum=Er;const zr=this.getSortedApiData();if(!zr||!Er)return;const an=zr.map(Kr=>Kr.product_id).indexOf(Er.product_id);if(this.isScrolling&&this.tableRows&&this.tableContainerDiv){const Kr=this.tableRows.get(1)?.nativeElement.offsetHeight,sn=this.tableContainerDiv.nativeElement.clientHeight;Kr&&sn&&this.tableContainerDiv.nativeElement.scroll({top:an*Kr-.4*sn,behavior:"smooth"})}})),this.subscriptions.add(this.store$.select(z).subscribe(Er=>{this.colState=Er,this.shownCols=Object.keys(this.colState).filter(zr=>this.colState[zr])})),this.subscriptions.add(this.store$.select(f.GB).subscribe(Er=>{this.downloadRowState=Er}))}ngOnInit(){}ngAfterViewInit(){this.sort&&this.tableData?this.tableData.sort=this.sort:console.error("Sorting is not working!")}ngOnDestroy(){this.subscriptions.unsubscribe()}onTableClick(){}getSortedApiData(){if(!this.tableData||!this.tableData.sort)return;const Tt=[...this.tableData.data];return this.tableData.sortData(Tt,this.tableData.sort)}getAllCols(){return this.shownCols?["download_checkboxes","preview_url","source_name",...this.shownCols]:[]}selectAllDownloadRowCheckbox(){if(!this.apiData)return;this.isSelectAllDownloadRowCheckboxChecked=!this.isSelectAllDownloadRowCheckboxChecked;const Tt={...this.downloadRowState};Object.keys(Tt).forEach((Qt,Er)=>{Tt[Qt]=this.isSelectAllDownloadRowCheckboxChecked}),this.store$.dispatch(new T.yx({newDownloadRowState:Tt}))}updateDownloadRowCheckbox(Tt,Qt){const Er=Tt.product_id,zr={...this.downloadRowState};zr[Er]=!zr[Er],this.store$.dispatch(new T.yx({newDownloadRowState:zr}))}getThumbnailUrl(Tt){return Tt||"assets/images/pngs/sbn_logo_v0.png"}getSourceName(Tt){const Qt={"NEAT Palomar Tricam":"NEAT (PT)","NEAT Maui GEODSS":"NEAT (MG)","PanSTARRS 1 DR2":"PanSTARRS","Catalina Sky Survey, Mt. Lemmon":"Catalina (ML)","Catalina Sky Survey, Mt. Bigelow":"Catalina (MB)"};return Qt.hasOwnProperty(Tt)?Qt[Tt]:Tt}formatCellEntry(Tt,Qt){return Tt?"number"==typeof Tt?Tt.toFixed(Qt.fractionSize):(Tt.length>23&&(Tt=Tt.substring(0,3)+"..."+Tt.slice(-3)),Tt):"N/A"}selectRowDatum(Tt){this.isScrolling=!1,setTimeout(()=>this.isScrolling=!0,300);const Qt=this.getSortedApiData();Qt&&this.store$.dispatch(new T.fC({apiDatum:Qt[Tt]}))}isRowSelected(Tt){return Tt.product_id===this.apiSelectedDatum?.product_id}openSettingsDialog(Tt){Tt.stopPropagation(),this.dialog.open(U)}onClickPlotly(Tt,Qt){Tt.stopPropagation(),this.dialog.open(de,{data:{xDataKey:Qt}})}isRowChecked(Tt){return this.downloadRowState[Tt.product_id]}keyPress(Tt){Tt.preventDefault();const Qt=Tt.key,Er="ArrowDown"===Qt,zr="ArrowUp"===Qt,an=this.getSortedApiData(),Kr=this.apiSelectedDatum;if(Kr&&an&&(zr||Er)){const sn=an.map(Vr=>Vr.product_id).indexOf(Kr.product_id);let gn=zr?sn-1:sn+1;gn<0&&(gn=0),gn>=an.length&&(gn=an.length-1),this.store$.dispatch(new T.fC({apiDatum:an[gn]}))}}isFirstFewColsSticky(){return!0}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(l.yh),h.Y36($.uw))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-table"]],viewQuery:function(Tt,Qt){if(1&Tt&&(h.Gf(w.YE,5),h.Gf(_e,5),h.Gf(O.q,5)),2&Tt){let Er;h.iGM(Er=h.CRH())&&(Qt.sort=Er.first),h.iGM(Er=h.CRH())&&(Qt.tableContainerDiv=Er.first),h.iGM(Er=h.CRH())&&(Qt.tableRows=Er)}},decls:3,vars:1,consts:[["tabindex","0",1,"table-container","mat-elevation-z8",3,"click"],["tableContainerDiv",""],["mat-table","","matSort","","class","data-table",3,"dataSource",4,"ngIf"],["mat-table","","matSort","",1,"data-table",3,"dataSource"],[3,"matColumnDef","sticky"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-cell","",3,"ngClass","click",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],[3,"sticky","matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","tabindex","0",3,"keydown",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[1,"checkbox-wrapper","cell-container"],["color","accent","matTooltip","Select/deselect all for download",3,"checked","change"],["mat-cell","",3,"ngClass"],["color","accent",3,"checked","change"],[1,"thumbnail-wrapper","cell-container"],["mat-button","",3,"click"],["icon","cog",3,"fixedWidth"],["mat-cell","",3,"ngClass","click"],[3,"src"],["mat-header-cell","","mat-sort-header",""],[1,"source-name-wrapper","cell-container"],[3,"sticky","matColumnDef"],["mat-header-cell","","mat-sort-header","",3,"matTooltip",4,"matHeaderCellDef"],["mat-cell","",3,"ngClass","matTooltip","click",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",3,"matTooltip"],[1,"looped-cell","cell-container"],[1,"text-wrapper"],[4,"ngFor","ngForOf"],["class","graph-wrapper",3,"click",4,"ngIf"],[1,"graph-wrapper",3,"click"],[1,"graph-wrapper-cover"],[3,"inputPlotlyParams"],["mat-cell","",3,"ngClass","matTooltip","click"],["mat-header-row",""],["mat-row","","tabindex","0",3,"keydown"]],template:function(Tt,Qt){1&Tt&&(h.TgZ(0,"div",0,1),h.NdJ("click",function(){return Qt.onTableClick()}),h.YNc(2,gt,14,11,"table",2),h.qZA()),2&Tt&&(h.xp6(2),h.Q6J("ngIf",Qt.tableData))},dependencies:[K.mk,K.sg,K.O5,N.lW,V.oG,w.YE,w.nU,C.BZ,C.fO,C.as,C.w1,C.Dz,C.nj,C.ge,C.ev,C.XQ,C.Gk,G.gM,be.BN,O.q,le],styles:[".table-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;cursor:pointer}.table-container[_ngcontent-%COMP%]   .mat-tooltip-trigger[_ngcontent-%COMP%]{touch-action:auto!important}.table-container[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]   .cell-container[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]   .cell-container[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .cell-container[_ngcontent-%COMP%]{padding:5px;white-space:nowrap}.table-container[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:18px}.table-container[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]{padding-left:0;display:flex;justify-content:center;align-items:center}.table-container[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .thumbnail-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:100%}.table-container[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.table-container[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%]{margin-right:5px}.table-container[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]   .graph-wrapper[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]   .graph-wrapper[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]   .graph-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.table-container[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]   .graph-wrapper[_ngcontent-%COMP%]   .graph-wrapper-cover[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]   .graph-wrapper[_ngcontent-%COMP%]   .graph-wrapper-cover[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]   .looped-cell[_ngcontent-%COMP%]   .graph-wrapper[_ngcontent-%COMP%]   .graph-wrapper-cover[_ngcontent-%COMP%]{position:absolute;top:0px;bottom:0px;left:0px;right:0px;z-index:1}.mat-table-sticky[_ngcontent-%COMP%]{opacity:1}.mat-table-sticky-border-elem-left[_ngcontent-%COMP%]{border-right:1px solid rgba(255,255,255,.1)}"]}),zt})();var _t=Q(469);const it=["imageWheelContainer"];function et(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"div",4),h.NdJ("click",function(){const zr=h.CHM(Tt).$implicit,an=h.oxw(2);return h.KtG(an.setSelectedDatum(zr))}),h.qZA()}if(2&zt){const Tt=ur.$implicit,Qt=h.oxw(2);h.Q6J("ngStyle",Qt.getStyleObject(Tt))("ngClass",Qt.isImageSelected(Tt)?"add-border":"")}}function wt(zt,ur){if(1&zt&&(h.ynx(0),h.YNc(1,et,1,2,"div",3),h.BQk()),2&zt){const Tt=h.oxw();h.xp6(1),h.Q6J("ngForOf",Tt.apiData)}}const Gt="assets/images/pngs/sbn_logo_v0.png";let Kt=(()=>{class zt{constructor(Tt){this.store$=Tt,this.subscriptions=new p.w0,this.height=100,this.width=100,this.imageWheelMarginRightPxl=5,this.subscriptions.add(this.store$.select(f.tm).subscribe(Qt=>{this.apiData=Qt})),this.subscriptions.add(this.store$.select(f.ee).subscribe(Qt=>{if(this.apiSelectedDatum=Qt,!this.apiData||!Qt)return;const Er=this.apiData.map(zr=>zr.product_id).indexOf(Qt.product_id);this.imageWheelContainerDiv&&this.imageWheelContainerDiv.nativeElement.scrollTo({top:0,left:Er*(this.width+this.imageWheelMarginRightPxl),behavior:"smooth"})})),this.subscriptions.add((0,S.F)(1e3).pipe((0,u.U)(Qt=>({height:this.imageWheelContainerDiv?this.imageWheelContainerDiv.nativeElement.clientHeight:100})),(0,x.x)()).subscribe(({height:Qt})=>{this.width=Qt,this.height=Qt}))}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}getImageUrls(){return this.apiData?this.apiData.map(Qt=>Qt.preview_url||Gt):[]}getStyleObject(Tt){return{backgroundImage:`url('${Tt.preview_url||Gt}')`,width:this.width+"px",marginRight:this.imageWheelMarginRightPxl+"px"}}isImageSelected(Tt){return!(!Tt||!this.apiSelectedDatum)&&Tt.product_id===this.apiSelectedDatum.product_id}setSelectedDatum(Tt){this.store$.dispatch(new T.fC({apiDatum:Tt}))}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(l.yh))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-image-wheel"]],viewQuery:function(Tt,Qt){if(1&Tt&&h.Gf(it,5),2&Tt){let Er;h.iGM(Er=h.CRH())&&(Qt.imageWheelContainerDiv=Er.first)}},decls:3,vars:1,consts:[[1,"image-wheel-container"],["imageWheelContainer",""],[4,"ngIf"],["class","image-wheel-image",3,"ngStyle","ngClass","click",4,"ngFor","ngForOf"],[1,"image-wheel-image",3,"ngStyle","ngClass","click"]],template:function(Tt,Qt){1&Tt&&(h.TgZ(0,"div",0,1),h.YNc(2,wt,2,1,"ng-container",2),h.qZA()),2&Tt&&(h.xp6(2),h.Q6J("ngIf",Qt.apiData))},dependencies:[K.mk,K.sg,K.O5,K.PC],styles:[".image-wheel-container[_ngcontent-%COMP%]{height:100%;vertical-align:0px;overflow-x:scroll;overflow-y:hidden;white-space:nowrap;position:relative}.image-wheel-container[_ngcontent-%COMP%]   .image-wheel-image[_ngcontent-%COMP%]{background-color:#ffffff1a;height:100%;width:200px;display:inline-block;background-size:contain;background-repeat:no-repeat;background-position:center center;box-sizing:border-box}.image-wheel-container[_ngcontent-%COMP%]   .add-border[_ngcontent-%COMP%]{border:5px green solid}"]}),zt})();const cr=["carouselContainer"],ar=["mainImage"],hr=function(){return["view","zoom","scale","color","region"]},Xt=function(zt,ur){return{menuBar:zt,alerts:ur}};function He(zt,ur){if(1&zt){const Tt=h.EpF();h.ynx(0),h.TgZ(1,"lib-ngx-js9",11),h.NdJ("fitsLoadStatus",function(Er){h.CHM(Tt);const zr=h.oxw(2);return h.KtG(zr.onFitsLoadStatusUpdate(Er))}),h.qZA(),h.BQk()}if(2&zt){const Tt=h.oxw(2);h.xp6(1),h.Q6J("width",Tt.width)("height",Tt.height)("siteTheme","DARK-THEME")("fitsUrl",Tt.fitsUrl)("globalOpts",h.WLB(6,Xt,h.DdM(5,hr),!1))}}function Je(zt,ur){if(1&zt&&h._UZ(0,"img",12),2&zt){const Tt=h.oxw(2);h.Q6J("src",Tt.chooseImage(),h.LSH)}}function pe(zt,ur){1&zt&&(h.TgZ(0,"mat-icon"),h._uU(1),h.qZA()),2&zt&&(h.xp6(1),h.Oqu("image"))}function we(zt,ur){1&zt&&(h.TgZ(0,"span",13),h._uU(1),h.qZA()),2&zt&&(h.xp6(1),h.Oqu("FITS"))}const Be=function(zt){return{border:zt}},We=function(zt){return{"raise-button":zt}};function Ke(zt,ur){if(1&zt){const Tt=h.EpF();h.TgZ(0,"div",4,5),h.YNc(2,He,2,9,"ng-container",6),h.YNc(3,Je,1,1,"ng-template",null,7,h.W1O),h.TgZ(5,"button",8),h.NdJ("click",function(){h.CHM(Tt);const Er=h.oxw();return h.KtG(Er.toggleFits())}),h.YNc(6,pe,2,1,"mat-icon",9),h.YNc(7,we,2,1,"span",10),h.qZA()()}if(2&zt){const Tt=h.MAs(4),Qt=h.oxw();h.Q6J("ngStyle",h.VKq(7,Be,(Qt.isFitsLoaded?"3":"0")+"px solid red")),h.xp6(2),h.Q6J("ngIf",Qt.isFits)("ngIfElse",Tt),h.xp6(3),h.Q6J("disabled",Qt.isFitsButtonDisabled())("ngClass",h.VKq(9,We,Qt.isButtonRaised)),h.xp6(1),h.Q6J("ngIf",!!Qt.isFits),h.xp6(1),h.Q6J("ngIf",!Qt.isFits)}}let ft=(()=>{class zt{constructor(Tt){this.store$=Tt,this.subscriptions=new p.w0,this.isButtonRaised=!1,this.isFits=!1,this.fitsUrl="",this.width=0,this.height=0,this.isFitsLoaded=!1,this.apiDataWithProblematicFitsUrls=[],this.subscriptions.add(this.store$.select(f.tm).subscribe(Qt=>{this.apiData=Qt})),this.subscriptions.add(this.store$.select(f.ee).subscribe(Qt=>{this.isFits=!1,this.isButtonRaised=!1,this.apiSelectedDatum=Qt,this.fitsUrl=this.apiSelectedDatum?.cutout_url||""})),this.subscriptions.add((0,S.F)(1e3).pipe((0,u.U)(Qt=>({width:this.mainImageDiv?this.mainImageDiv.nativeElement.clientWidth:100,height:this.mainImageDiv?this.mainImageDiv.nativeElement.clientHeight:100})),(0,x.x)()).subscribe(({width:Qt,height:Er})=>{this.width=Qt,this.height=Er}))}ngOnChanges(){}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}chooseImage(){return this.apiSelectedDatum?.preview_url||"assets/images/pngs/sbn_logo_v0.png"}toggleFits(){this.isFits=!this.isFits,this.isFits||(this.isButtonRaised=!1)}onFitsLoadStatusUpdate(Tt){if("error"===Tt){this.isFits=!1,this.isButtonRaised=!1;const Qt=this.apiSelectedDatum?.product_id;Qt&&this.apiDataWithProblematicFitsUrls.push(Qt)}else this.isButtonRaised="success"===Tt}isFitsButtonDisabled(){return!this.fitsUrl||this.apiDataWithProblematicFitsUrls.includes(this.apiSelectedDatum?.product_id||"")}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(l.yh))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-carousel"]],viewQuery:function(Tt,Qt){if(1&Tt&&(h.Gf(cr,5),h.Gf(ar,5)),2&Tt){let Er;h.iGM(Er=h.CRH())&&(Qt.carouselContainerDiv=Er.first),h.iGM(Er=h.CRH())&&(Qt.mainImageDiv=Er.first)}},features:[h.TTD],decls:5,vars:1,consts:[[1,"carousel-container","mat-elevation-z8"],["carouselContainer",""],["class","main-image",3,"ngStyle",4,"ngIf"],[1,"image-wheel-wrapper"],[1,"main-image",3,"ngStyle"],["mainImage",""],[4,"ngIf","ngIfElse"],["elseBlockShow",""],["mat-fab","",3,"disabled","ngClass","click"],[4,"ngIf"],["style","font-weight: bold",4,"ngIf"],[3,"width","height","siteTheme","fitsUrl","globalOpts","fitsLoadStatus"],["alt","",3,"src"],[2,"font-weight","bold"]],template:function(Tt,Qt){1&Tt&&(h.TgZ(0,"div",0,1),h.YNc(2,Ke,8,11,"div",2),h.TgZ(3,"div",3),h._UZ(4,"app-image-wheel"),h.qZA()()),2&Tt&&(h.xp6(2),h.Q6J("ngIf",Qt.apiData))},dependencies:[K.mk,K.O5,K.PC,N.lW,X.Hw,_t.Y,Kt],styles:[".carousel-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#424242}.carousel-container[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{position:relative;width:100%;height:70%;padding-top:5px;box-sizing:border-box}.carousel-container[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.carousel-container[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;z-index:9999;transition:transform ease-in-out .5s}.carousel-container[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   .raise-button[_ngcontent-%COMP%]{border:3px solid rgba(255,255,255,.3);transform:translateY(-30px)}.carousel-container[_ngcontent-%COMP%]   .image-wheel-wrapper[_ngcontent-%COMP%]{height:30%;padding-top:5px;box-sizing:border-box}"]}),zt})();var ct=Q(5861),St=Q(5698),Ft=Q(4327),at=Q(6586),mt=Q(5650),qt=Q(9526);function Et(zt,ur){1&zt&&(h.ynx(0),h.TgZ(1,"mat-icon"),h._uU(2,"download"),h.qZA(),h.BQk())}function Dt(zt,ur){1&zt&&(h.ynx(0),h._UZ(1,"mat-spinner",7),h.BQk())}let Le=(()=>{class zt{constructor(Tt,Qt){this.route=Tt,this.store$=Qt,this.target="",this.subscriptions=new p.w0,this.apiDataLabels=A,this.isDownloadButtonShown=!0,this.subscriptions.add((0,g.a)([this.store$.select(f.sZ).pipe((0,St.q)(1)),this.store$.select(f.tm).pipe((0,St.q)(1)),this.store$.select(f.GB),this.store$.select(f.cJ)]).subscribe(([Er,zr,an,Kr])=>{if(!Er.query)return;const{target:sn}=Er.query;this.target=sn,this.queryStatus=Er,this.dataDownloadRowState=an,this.apiData=zr,this.jobId=Kr,this.dataLink=qt.ny+"/caught/"+Kr,this.apiData&&this.dataDownloadRowState&&(!this.dataDownloadRowState||(this.apiDataForDownload=this.apiData.filter(Qr=>!!this.dataDownloadRowState&&this.dataDownloadRowState[Qr.product_id]),this.jpgUrlsForDownload=this.apiDataForDownload.map(Qr=>Qr.preview_url||Qr.thumbnail_url||"").filter(Boolean),this.fitsUrlsForDownload=this.apiDataForDownload.map(Qr=>Qr.cutout_url||"").filter(Boolean)))}))}ngOnInit(){}downloadData(){var Tt=this;return(0,ct.Z)(function*(){if(!Tt.jpgUrlsForDownload||!Tt.apiDataForDownload||!Tt.queryStatus?.query?.target)return;Tt.isDownloadButtonShown=!1;const Qt=Tt.queryStatus.query.target,Er=Tt.apiDataForDownload.map(Qr=>{const Jr=Qr.preview_url||Qr.thumbnail_url||"";if(!Jr)return null;const{product_id:Nn}=Qr;return{url:Jr,product_id:Nn}}).filter(Boolean),zr=Tt.apiDataForDownload.map(Qr=>{const Jr=Qr.cutout_url||"";if(!Jr)return;const{product_id:Nn}=Qr;return{url:Jr,product_id:Nn}}).filter(Boolean),an=yield Promise.all(Er.map(function(){var Qr=(0,ct.Z)(function*({url:Jr,product_id:Nn}){return{url:Jr,product_id:Nn,blob:yield fetch(Jr).then(Hn=>Hn.blob())}});return function(Jr){return Qr.apply(this,arguments)}}())),Kr=yield Promise.all(zr.map(function(){var Qr=(0,ct.Z)(function*({url:Jr,product_id:Nn}){return{url:Jr,product_id:Nn,blob:yield fetch(Jr).then(Hn=>Hn.blob())}});return function(Jr){return Qr.apply(this,arguments)}}())),sn=an.map(({blob:Qr,product_id:Jr,url:Nn},Hn)=>({file:new File([Qr],Tt.jpgUrlsForDownload[Hn]),product_id:Jr,url:Nn})),gn=Kr.map(({blob:Qr,product_id:Jr,url:Nn},Hn)=>({file:new File([Qr],Tt.fitsUrlsForDownload[Hn]),product_id:Jr,url:Nn})),zn=new mt;zn.file(`${Qt}_data.json`,JSON.stringify(Tt.apiDataForDownload,null,2));try{const Qr=(0,at.parse)(Tt.apiDataForDownload);zn.file(`${Qt}_data.csv`,Qr)}catch(Qr){console.log(Qr)}const Vr=zn.folder("jpgs"),_n=zn.folder("fits");console.log("&&&&",sn),sn.map(({file:Qr,product_id:Jr})=>{Vr?.file(Jr+".jpg",Qr,{base64:!0})}),gn.map(({file:Qr,product_id:Jr})=>{_n?.file(Jr+".fit",Qr,{base64:!0})}),zn.generateAsync({type:"blob"}).then(Qr=>{(0,Ft.saveAs)(Qr,`catch-data-${Qt}.zip`),Tt.isDownloadButtonShown=!0})})()}isDownloadButtonDisabled(){}getJobId(){return this.jobId?this.jobId.substring(0,8).toUpperCase():""}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(m.gz),h.Y36(l.yh))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-title"]],decls:13,vars:8,consts:[[1,"title-bar-container"],[1,"title"],[1,"jobid"],[3,"href"],[1,"download-button-wrapper"],["mat-button","","matTooltip","Download Selected Data",1,"download-button",3,"disabled","click"],[4,"ngIf"],[2,"zoom","0.2"]],template:function(Tt,Qt){1&Tt&&(h.TgZ(0,"div",0)(1,"div",1),h._uU(2),h.TgZ(3,"span"),h._uU(4),h.qZA()(),h.TgZ(5,"div",2),h._uU(6),h.TgZ(7,"a",3),h._uU(8),h.qZA(),h.TgZ(9,"div",4)(10,"button",5),h.NdJ("click",function(){return Qt.downloadData()}),h.YNc(11,Et,3,0,"ng-container",6),h.YNc(12,Dt,2,0,"ng-container",6),h.qZA()()()()),2&Tt&&(h.xp6(2),h.hij(" ","TARGET: "," \xa0 "),h.xp6(2),h.hij(" ",(Qt.target?Qt.target:"")+" "," "),h.xp6(2),h.hij(" "," JOB: "," \xa0 "),h.xp6(1),h.Q6J("href",Qt.dataLink,h.LSH),h.xp6(1),h.hij(" "," "+Qt.getJobId()," "),h.xp6(2),h.Q6J("disabled",Qt.isDownloadButtonDisabled()),h.xp6(1),h.Q6J("ngIf",!!Qt.isDownloadButtonShown),h.xp6(1),h.Q6J("ngIf",!Qt.isDownloadButtonShown))},dependencies:[K.O5,N.lW,X.Hw,J.Ou,G.gM],styles:[".title-bar-container[_ngcontent-%COMP%]{position:absolute;top:0px;bottom:0px;left:0px;right:0px;display:flex;align-items:center;justify-content:center}.title-bar-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}.title-bar-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .title-bar-container[_ngcontent-%COMP%]   .jobid[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:24px}.title-bar-container[_ngcontent-%COMP%]   .download-button-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),zt})();const Xe=function(zt){return{maxHeight:zt}};function ot(zt,ur){if(1&zt&&(h.ynx(0),h.TgZ(1,"div",2)(2,"div",3),h._UZ(3,"app-title"),h.qZA(),h.TgZ(4,"div",4),h._UZ(5,"app-table"),h.qZA(),h.TgZ(6,"div",5),h._UZ(7,"app-carousel"),h.qZA()(),h.BQk()),2&zt){const Tt=h.oxw();h.xp6(1),h.Q6J("ngStyle",h.VKq(1,Xe,Tt.maxHeight))}}function dt(zt,ur){}let Lt=(()=>{class zt{constructor(Tt,Qt,Er){this.route=Tt,this.router=Qt,this.store$=Er,this.apiStatus={code:"unknown",message:"",query:void 0},this.isDataReady=!1,this.maxHeight=`calc(100vh - ${_.O}px)`,this.subscriptions=new p.w0,this.subscriptions.add((0,g.a)([this.store$.select(f.tm),this.store$.select(f.sZ),this.route.queryParams.pipe((0,u.U)(zr=>{const an=(this.target=zr.target)||"",Kr="true"===zr.cached||!1,sn="true"===zr.uncertainty_ellipse||!1,gn=+(zr.padding||0)||0;let zn=zr.sources||[];return Array.isArray(zn)||(zn=[zn]),zn.length||(zn=[...Object.keys(k.s)]),{sources:zn,isCached:Kr,isUncertaintyEllipse:sn,padding:gn,target:an}}))]).pipe((0,x.x)(),(0,u.U)(([zr,an,Kr])=>({apiData:zr,apiStatus:an,params:Kr}))).subscribe(({apiStatus:zr,params:an})=>{const{target:Kr,isCached:sn,isUncertaintyEllipse:gn,padding:zn,sources:Vr}=an;Kr?(this.apiStatus=zr,this.isDataReady="found"===zr.code,"unknown"===zr.code&&(this.store$.dispatch(new T.mU({code:"searching",message:"Begin searching....",query:{target:Kr,isCached:sn,isUncertaintyEllipse:gn,padding:zn,sources:Vr}})),this.store$.dispatch(new T.UB({target:Kr,isCached:sn,isUncertaintyEllipse:gn,padding:zn,sources:Vr})))):this.router.navigate([""],{})}))}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}_displayData(Tt){return JSON.stringify(Tt,null,2)}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(m.gz),h.Y36(m.F0),h.Y36(l.yh))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-mobile-view"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["dataNotReady",""],[1,"mobile-container",3,"ngStyle"],[1,"title-wrapper","mat-elevation-z8"],[1,"table-wrapper"],[1,"carousel-wrapper"]],template:function(Tt,Qt){if(1&Tt&&(h.YNc(0,ot,8,3,"ng-container",0),h.YNc(1,dt,0,0,"ng-template",null,1,h.W1O)),2&Tt){const Er=h.MAs(2);h.Q6J("ngIf",Qt.isDataReady)("ngIfElse",Er)}},dependencies:[K.O5,K.PC,At,ft,Le],styles:['.mobile-container[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px;box-sizing:border-box;overflow:scroll;display:grid;grid-template-rows:auto auto auto;grid-template-columns:minmax(0,1fr);grid-gap:15px;grid-template-areas:"title" "table" "carousel"}.mobile-container[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]{background-color:#424242;grid-area:title;display:flex;justify-content:center;align-items:center;font-size:32px;font-weight:700;min-height:100px}.mobile-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{grid-area:table;max-height:60vh}.mobile-container[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]{grid-area:carousel}']}),zt})();const Ut=function(zt){return{maxHeight:zt}};function $t(zt,ur){if(1&zt&&(h.ynx(0),h.TgZ(1,"div",2)(2,"div",3),h._UZ(3,"app-title"),h.qZA(),h.TgZ(4,"div",4),h._UZ(5,"app-table"),h.qZA(),h.TgZ(6,"div",5),h._UZ(7,"app-carousel"),h.qZA()(),h.BQk()),2&zt){const Tt=h.oxw();h.xp6(1),h.Q6J("ngStyle",h.VKq(1,Ut,Tt.maxHeight))}}function Wt(zt,ur){1&zt&&h._UZ(0,"div",6)}let wr=(()=>{class zt{constructor(Tt,Qt,Er){this.route=Tt,this.router=Qt,this.store$=Er,this.apiStatus={code:"unknown",message:"",query:void 0},this.isDataReady=!1,this.maxHeight=`calc(100vh - ${_.O}px)`,this.subscriptions=new p.w0,this.subscriptions.add((0,g.a)([this.store$.select(f.tm),this.store$.select(f.sZ),this.route.queryParams.pipe((0,u.U)(zr=>{const an=(this.target=zr.target)||"",Kr="true"===zr.cached||!1,sn="true"===zr.uncertainty_ellipse||!1,gn=+(zr.padding||0)||0;let zn=zr.sources||[];return Array.isArray(zn)||(zn=[zn]),zn.length||(zn=[...Object.keys(k.s)]),console.log(">>> ",zn,Kr,sn,gn,an),{sources:zn,isCached:Kr,isUncertaintyEllipse:sn,padding:gn,target:an}}))]).pipe((0,x.x)(),(0,u.U)(([zr,an,Kr])=>({apiData:zr,apiStatus:an,params:Kr}))).subscribe(({apiStatus:zr,params:an})=>{const{target:Kr,isCached:sn,isUncertaintyEllipse:gn,padding:zn,sources:Vr}=an;Kr?(this.apiStatus=zr,this.isDataReady="found"===zr.code,"unknown"===zr.code&&(this.store$.dispatch(new T.mU({code:"searching",message:"Begin searching....",query:{target:Kr,isCached:sn,isUncertaintyEllipse:gn,padding:zn,sources:Vr}})),this.store$.dispatch(new T.UB({target:Kr,isCached:sn,isUncertaintyEllipse:gn,padding:zn,sources:Vr})))):this.router.navigate([""],{})}))}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}_displayData(Tt){return JSON.stringify(Tt,null,2)}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(m.gz),h.Y36(m.F0),h.Y36(l.yh))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-desktop-view"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["dataNotReady",""],[1,"desktop-container",3,"ngStyle"],[1,"title-wrapper","mat-elevation-z8"],[1,"table-wrapper"],[1,"carousel-wrapper"],[1,"no-data"]],template:function(Tt,Qt){if(1&Tt&&(h.YNc(0,$t,8,3,"ng-container",0),h.YNc(1,Wt,1,0,"ng-template",null,1,h.W1O)),2&Tt){const Er=h.MAs(2);h.Q6J("ngIf",Qt.isDataReady)("ngIfElse",Er)}},dependencies:[K.O5,K.PC,At,ft,Le],styles:['.desktop-container[_ngcontent-%COMP%]{width:100%;height:100%;padding:30px;box-sizing:border-box;display:grid;grid-template-rows:minmax(0,1fr) minmax(0,7fr);grid-template-columns:minmax(0,1fr) minmax(0,350px);grid-gap:15px;grid-template-areas:"title title" "table carousel"}.desktop-container[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]{position:relative;background-color:#424242;grid-area:title;font-size:32px;font-weight:700}.desktop-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{grid-area:table}.desktop-container[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]{grid-area:carousel}']}),zt})();function Rr(zt,ur){1&zt&&(h.ynx(0),h._UZ(1,"app-desktop-view"),h.BQk())}function br(zt,ur){1&zt&&(h.ynx(0),h._UZ(1,"app-desktop-view"),h.BQk())}function nr(zt,ur){1&zt&&(h.ynx(0),h._UZ(1,"app-mobile-view"),h.BQk())}let lr=(()=>{class zt{constructor(Tt){this.store$=Tt,this.device="desktop",Tt.select(c.J).subscribe(Er=>{this.device=Er,console.log(">>>",Er)})}ngOnInit(){}}return zt.\u0275fac=function(Tt){return new(Tt||zt)(h.Y36(l.yh))},zt.\u0275cmp=h.Xpm({type:zt,selectors:[["app-data"]],decls:3,vars:3,consts:[[4,"ngIf"]],template:function(Tt,Qt){1&Tt&&(h.YNc(0,Rr,2,0,"ng-container",0),h.YNc(1,br,2,0,"ng-container",0),h.YNc(2,nr,2,0,"ng-container",0)),2&Tt&&(h.Q6J("ngIf","desktop"===Qt.device),h.xp6(1),h.Q6J("ngIf","tablet"===Qt.device),h.xp6(1),h.Q6J("ngIf","mobile"===Qt.device))},dependencies:[K.O5,Lt,wr]}),zt})();var sr=Q(3503);a.plotlyjs=b;const _r=[{path:"",component:lr}];let Ar=(()=>{class zt{}return zt.\u0275fac=function(Tt){return new(Tt||zt)},zt.\u0275mod=h.oAB({type:zt}),zt.\u0275inj=h.cJS({imports:[K.ez,m.Bz.forChild(_r),sr.m,v.PC,a]}),zt})()},4327:function(bl,y){var m;void 0!==(m=function(){"use strict";function b(t,d,a){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){o(i.response,d,a)},i.onerror=function(){console.error("could not download file")},i.send()}function h(t){var d=new XMLHttpRequest;d.open("HEAD",t,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function e(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(d)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,r=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(t,d,a){var i=n.URL||n.webkitURL,s=document.createElement("a");s.download=d=d||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?e(s):h(s.href)?b(t,d,a):e(s,s.target="_blank")):(s.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){e(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,d,a){if(d=d||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function v(t,d){return typeof d>"u"?d={autoBom:!1}:"object"!=typeof d&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),d);else if(h(t))b(t,d,a);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){e(i)})}}:function(t,d,a,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return b(t,d,a);var s="application/octet-stream"===t.type,c=/constructor/i.test(n.HTMLElement)||n.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&c||r)&&typeof FileReader<"u"){var p=new FileReader;p.onloadend=function(){var x=p.result;x=l?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=x:location=x,i=null},p.readAsDataURL(t)}else{var g=n.URL||n.webkitURL,u=g.createObjectURL(t);i?i.location=u:location.href=u,i=null,setTimeout(function(){g.revokeObjectURL(u)},4e4)}});n.saveAs=o.saveAs=o,bl.exports=o}.apply(y,[]))&&(bl.exports=m)},6586:function(bl,y){!function(Q){"use strict";function m(){}function v(){v.init.call(this)}function b(ke){return void 0===ke._maxListeners?v.defaultMaxListeners:ke._maxListeners}function h(ke,ye,Ce){if(ye)ke.call(Ce);else for(var lt=ke.length,Bt=c(ke,lt),pr=0;pr<lt;++pr)Bt[pr].call(Ce)}function e(ke,ye,Ce,lt){if(ye)ke.call(Ce,lt);else for(var Bt=ke.length,pr=c(ke,Bt),Tr=0;Tr<Bt;++Tr)pr[Tr].call(Ce,lt)}function n(ke,ye,Ce,lt,Bt){if(ye)ke.call(Ce,lt,Bt);else for(var pr=ke.length,Tr=c(ke,pr),hn=0;hn<pr;++hn)Tr[hn].call(Ce,lt,Bt)}function r(ke,ye,Ce,lt,Bt,pr){if(ye)ke.call(Ce,lt,Bt,pr);else for(var Tr=ke.length,hn=c(ke,Tr),Bn=0;Bn<Tr;++Bn)hn[Bn].call(Ce,lt,Bt,pr)}function o(ke,ye,Ce,lt){if(ye)ke.apply(Ce,lt);else for(var Bt=ke.length,pr=c(ke,Bt),Tr=0;Tr<Bt;++Tr)pr[Tr].apply(Ce,lt)}function t(ke,ye,Ce,lt){var Bt,pr,Tr;if("function"!=typeof Ce)throw new TypeError('"listener" argument must be a function');if((pr=ke._events)?(pr.newListener&&(ke.emit("newListener",ye,Ce.listener?Ce.listener:Ce),pr=ke._events),Tr=pr[ye]):(pr=ke._events=new m,ke._eventsCount=0),Tr){if("function"==typeof Tr?Tr=pr[ye]=lt?[Ce,Tr]:[Tr,Ce]:lt?Tr.unshift(Ce):Tr.push(Ce),!Tr.warned&&(Bt=b(ke))&&Bt>0&&Tr.length>Bt){Tr.warned=!0;var hn=new Error("Possible EventEmitter memory leak detected. "+Tr.length+" "+ye+" listeners added. Use emitter.setMaxListeners() to increase limit");hn.name="MaxListenersExceededWarning",hn.emitter=ke,hn.type=ye,hn.count=Tr.length,function d(ke){"function"==typeof console.warn?console.warn(ke):console.log(ke)}(hn)}}else Tr=pr[ye]=Ce,++ke._eventsCount;return ke}function a(ke,ye,Ce){var lt=!1;function Bt(){ke.removeListener(ye,Bt),lt||(lt=!0,Ce.apply(ke,arguments))}return Bt.listener=Ce,Bt}function i(ke){var ye=this._events;if(ye){var Ce=ye[ke];if("function"==typeof Ce)return 1;if(Ce)return Ce.length}return 0}function c(ke,ye){for(var Ce=new Array(ye);ye--;)Ce[ye]=ke[ye];return Ce}m.prototype=Object.create(null),v.EventEmitter=v,v.usingDomains=!1,v.prototype.domain=void 0,v.prototype._events=void 0,v.prototype._maxListeners=void 0,v.defaultMaxListeners=10,v.init=function(){this.domain=null,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new m,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},v.prototype.setMaxListeners=function(ye){if("number"!=typeof ye||ye<0||isNaN(ye))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=ye,this},v.prototype.getMaxListeners=function(){return b(this)},v.prototype.emit=function(ye){var Ce,lt,Bt,pr,Tr,hn,Bn,bi="error"===ye;if(hn=this._events)bi=bi&&null==hn.error;else if(!bi)return!1;if(Bn=this.domain,bi){if(Ce=arguments[1],!Bn){if(Ce instanceof Error)throw Ce;var Si=new Error('Uncaught, unspecified "error" event. ('+Ce+")");throw Si.context=Ce,Si}return Ce||(Ce=new Error('Uncaught, unspecified "error" event')),Ce.domainEmitter=this,Ce.domain=Bn,Ce.domainThrown=!1,Bn.emit("error",Ce),!1}if(!(lt=hn[ye]))return!1;var Ui="function"==typeof lt;switch(Bt=arguments.length){case 1:h(lt,Ui,this);break;case 2:e(lt,Ui,this,arguments[1]);break;case 3:n(lt,Ui,this,arguments[1],arguments[2]);break;case 4:r(lt,Ui,this,arguments[1],arguments[2],arguments[3]);break;default:for(pr=new Array(Bt-1),Tr=1;Tr<Bt;Tr++)pr[Tr-1]=arguments[Tr];o(lt,Ui,this,pr)}return!0},v.prototype.on=v.prototype.addListener=function(ye,Ce){return t(this,ye,Ce,!1)},v.prototype.prependListener=function(ye,Ce){return t(this,ye,Ce,!0)},v.prototype.once=function(ye,Ce){if("function"!=typeof Ce)throw new TypeError('"listener" argument must be a function');return this.on(ye,a(this,ye,Ce)),this},v.prototype.prependOnceListener=function(ye,Ce){if("function"!=typeof Ce)throw new TypeError('"listener" argument must be a function');return this.prependListener(ye,a(this,ye,Ce)),this},v.prototype.removeListener=function(ye,Ce){var lt,Bt,pr,Tr,hn;if("function"!=typeof Ce)throw new TypeError('"listener" argument must be a function');if(!(Bt=this._events))return this;if(!(lt=Bt[ye]))return this;if(lt===Ce||lt.listener&&lt.listener===Ce)0==--this._eventsCount?this._events=new m:(delete Bt[ye],Bt.removeListener&&this.emit("removeListener",ye,lt.listener||Ce));else if("function"!=typeof lt){for(pr=-1,Tr=lt.length;Tr-- >0;)if(lt[Tr]===Ce||lt[Tr].listener&&lt[Tr].listener===Ce){hn=lt[Tr].listener,pr=Tr;break}if(pr<0)return this;if(1===lt.length){if(lt[0]=void 0,0==--this._eventsCount)return this._events=new m,this;delete Bt[ye]}else!function s(ke,ye){for(var Ce=ye,lt=Ce+1,Bt=ke.length;lt<Bt;Ce+=1,lt+=1)ke[Ce]=ke[lt];ke.pop()}(lt,pr);Bt.removeListener&&this.emit("removeListener",ye,hn||Ce)}return this},v.prototype.removeAllListeners=function(ye){var Ce,lt;if(!(lt=this._events))return this;if(!lt.removeListener)return 0===arguments.length?(this._events=new m,this._eventsCount=0):lt[ye]&&(0==--this._eventsCount?this._events=new m:delete lt[ye]),this;if(0===arguments.length){for(var Tr,Bt=Object.keys(lt),pr=0;pr<Bt.length;++pr)"removeListener"!==(Tr=Bt[pr])&&this.removeAllListeners(Tr);return this.removeAllListeners("removeListener"),this._events=new m,this._eventsCount=0,this}if("function"==typeof(Ce=lt[ye]))this.removeListener(ye,Ce);else if(Ce)do{this.removeListener(ye,Ce[Ce.length-1])}while(Ce[0]);return this},v.prototype.listeners=function(ye){var Ce,Bt=this._events;return Bt&&(Ce=Bt[ye])?"function"==typeof Ce?[Ce.listener||Ce]:function l(ke){for(var ye=new Array(ke.length),Ce=0;Ce<ye.length;++Ce)ye[Ce]=ke[Ce].listener||ke[Ce];return ye}(Ce):[]},v.listenerCount=function(ke,ye){return"function"==typeof ke.listenerCount?ke.listenerCount(ye):i.call(ke,ye)},v.prototype.listenerCount=i,v.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var p=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},g=[],u=[],x=typeof Uint8Array<"u"?Uint8Array:Array,f=!1;function T(){f=!0;for(var ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ye=0,Ce=ke.length;ye<Ce;++ye)g[ye]=ke[ye],u[ke.charCodeAt(ye)]=ye;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63}function k(ke){return g[ke>>18&63]+g[ke>>12&63]+g[ke>>6&63]+g[63&ke]}function w(ke,ye,Ce){for(var Bt=[],pr=ye;pr<Ce;pr+=3)Bt.push(k((ke[pr]<<16)+(ke[pr+1]<<8)+ke[pr+2]));return Bt.join("")}function A(ke,ye,Ce,lt,Bt){var pr,Tr,hn=8*Bt-lt-1,Bn=(1<<hn)-1,bi=Bn>>1,Si=-7,Ui=Ce?Bt-1:0,eo=Ce?-1:1,La=ke[ye+Ui];for(Ui+=eo,pr=La&(1<<-Si)-1,La>>=-Si,Si+=hn;Si>0;pr=256*pr+ke[ye+Ui],Ui+=eo,Si-=8);for(Tr=pr&(1<<-Si)-1,pr>>=-Si,Si+=lt;Si>0;Tr=256*Tr+ke[ye+Ui],Ui+=eo,Si-=8);if(0===pr)pr=1-bi;else{if(pr===Bn)return Tr?NaN:1/0*(La?-1:1);Tr+=Math.pow(2,lt),pr-=bi}return(La?-1:1)*Tr*Math.pow(2,pr-lt)}function O(ke,ye,Ce,lt,Bt,pr){var Tr,hn,Bn,bi=8*pr-Bt-1,Si=(1<<bi)-1,Ui=Si>>1,eo=23===Bt?Math.pow(2,-24)-Math.pow(2,-77):0,La=lt?0:pr-1,Ds=lt?1:-1,Us=ye<0||0===ye&&1/ye<0?1:0;for(ye=Math.abs(ye),isNaN(ye)||ye===1/0?(hn=isNaN(ye)?1:0,Tr=Si):(Tr=Math.floor(Math.log(ye)/Math.LN2),ye*(Bn=Math.pow(2,-Tr))<1&&(Tr--,Bn*=2),(ye+=Tr+Ui>=1?eo/Bn:eo*Math.pow(2,1-Ui))*Bn>=2&&(Tr++,Bn/=2),Tr+Ui>=Si?(hn=0,Tr=Si):Tr+Ui>=1?(hn=(ye*Bn-1)*Math.pow(2,Bt),Tr+=Ui):(hn=ye*Math.pow(2,Ui-1)*Math.pow(2,Bt),Tr=0));Bt>=8;ke[Ce+La]=255&hn,La+=Ds,hn/=256,Bt-=8);for(Tr=Tr<<Bt|hn,bi+=Bt;bi>0;ke[Ce+La]=255&Tr,La+=Ds,Tr/=256,bi-=8);ke[Ce+La-Ds]|=128*Us}var P={}.toString,S=Array.isArray||function(ke){return"[object Array]"==P.call(ke)};function D(){return N.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function z(ke,ye){if(D()<ye)throw new RangeError("Invalid typed array length");return N.TYPED_ARRAY_SUPPORT?(ke=new Uint8Array(ye)).__proto__=N.prototype:(null===ke&&(ke=new N(ye)),ke.length=ye),ke}function N(ke,ye,Ce){if(!(N.TYPED_ARRAY_SUPPORT||this instanceof N))return new N(ke,ye,Ce);if("number"==typeof ke){if("string"==typeof ye)throw new Error("If encoding is specified then the first argument must be a string");return G(this,ke)}return V(this,ke,ye,Ce)}function V(ke,ye,Ce,lt){if("number"==typeof ye)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&ye instanceof ArrayBuffer?function j(ke,ye,Ce,lt){if(Ce<0||ye.byteLength<Ce)throw new RangeError("'offset' is out of bounds");if(ye.byteLength<Ce+(lt||0))throw new RangeError("'length' is out of bounds");return ye=void 0===Ce&&void 0===lt?new Uint8Array(ye):void 0===lt?new Uint8Array(ye,Ce):new Uint8Array(ye,Ce,lt),N.TYPED_ARRAY_SUPPORT?(ke=ye).__proto__=N.prototype:ke=re(ke,ye),ke}(ke,ye,Ce,lt):"string"==typeof ye?function Z(ke,ye,Ce){if(("string"!=typeof Ce||""===Ce)&&(Ce="utf8"),!N.isEncoding(Ce))throw new TypeError('"encoding" must be a valid string encoding');var lt=0|U(ye,Ce),Bt=(ke=z(ke,lt)).write(ye,Ce);return Bt!==lt&&(ke=ke.slice(0,Bt)),ke}(ke,ye,Ce):function B(ke,ye){if(ee(ye)){var Ce=0|H(ye.length);return 0===(ke=z(ke,Ce)).length||ye.copy(ke,0,0,Ce),ke}if(ye){if(typeof ArrayBuffer<"u"&&ye.buffer instanceof ArrayBuffer||"length"in ye)return"number"!=typeof ye.length||function Gt(ke){return ke!=ke}(ye.length)?z(ke,0):re(ke,ye);if("Buffer"===ye.type&&S(ye.data))return re(ke,ye.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(ke,ye)}function X(ke){if("number"!=typeof ke)throw new TypeError('"size" argument must be a number');if(ke<0)throw new RangeError('"size" argument must not be negative')}function G(ke,ye){if(X(ye),ke=z(ke,ye<0?0:0|H(ye)),!N.TYPED_ARRAY_SUPPORT)for(var Ce=0;Ce<ye;++Ce)ke[Ce]=0;return ke}function re(ke,ye){var Ce=ye.length<0?0:0|H(ye.length);ke=z(ke,Ce);for(var lt=0;lt<Ce;lt+=1)ke[lt]=255&ye[lt];return ke}function H(ke){if(ke>=D())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+D().toString(16)+" bytes");return 0|ke}function ee(ke){return!(null==ke||!ke._isBuffer)}function U(ke,ye){if(ee(ke))return ke.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(ke)||ke instanceof ArrayBuffer))return ke.byteLength;"string"!=typeof ke&&(ke=""+ke);var Ce=ke.length;if(0===Ce)return 0;for(var lt=!1;;)switch(ye){case"ascii":case"latin1":case"binary":return Ce;case"utf8":case"utf-8":case void 0:return At(ke).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Ce;case"hex":return Ce>>>1;case"base64":return et(ke).length;default:if(lt)return At(ke).length;ye=(""+ye).toLowerCase(),lt=!0}}function $(ke,ye,Ce){var lt=!1;if((void 0===ye||ye<0)&&(ye=0),ye>this.length||((void 0===Ce||Ce>this.length)&&(Ce=this.length),Ce<=0)||(Ce>>>=0)<=(ye>>>=0))return"";for(ke||(ke="utf8");;)switch(ke){case"hex":return Me(this,ye,Ce);case"utf8":case"utf-8":return xe(this,ye,Ce);case"ascii":return me(this,ye,Ce);case"latin1":case"binary":return Se(this,ye,Ce);case"base64":return _e(this,ye,Ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,ye,Ce);default:if(lt)throw new TypeError("Unknown encoding: "+ke);ke=(ke+"").toLowerCase(),lt=!0}}function q(ke,ye,Ce){var lt=ke[ye];ke[ye]=ke[Ce],ke[Ce]=lt}function te(ke,ye,Ce,lt,Bt){if(0===ke.length)return-1;if("string"==typeof Ce?(lt=Ce,Ce=0):Ce>2147483647?Ce=2147483647:Ce<-2147483648&&(Ce=-2147483648),Ce=+Ce,isNaN(Ce)&&(Ce=Bt?0:ke.length-1),Ce<0&&(Ce=ke.length+Ce),Ce>=ke.length){if(Bt)return-1;Ce=ke.length-1}else if(Ce<0){if(!Bt)return-1;Ce=0}if("string"==typeof ye&&(ye=N.from(ye,lt)),ee(ye))return 0===ye.length?-1:ne(ke,ye,Ce,lt,Bt);if("number"==typeof ye)return ye&=255,N.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?Bt?Uint8Array.prototype.indexOf.call(ke,ye,Ce):Uint8Array.prototype.lastIndexOf.call(ke,ye,Ce):ne(ke,[ye],Ce,lt,Bt);throw new TypeError("val must be string, number or Buffer")}function ne(ke,ye,Ce,lt,Bt){var bi,pr=1,Tr=ke.length,hn=ye.length;if(void 0!==lt&&("ucs2"===(lt=String(lt).toLowerCase())||"ucs-2"===lt||"utf16le"===lt||"utf-16le"===lt)){if(ke.length<2||ye.length<2)return-1;pr=2,Tr/=2,hn/=2,Ce/=2}function Bn(La,Ds){return 1===pr?La[Ds]:La.readUInt16BE(Ds*pr)}if(Bt){var Si=-1;for(bi=Ce;bi<Tr;bi++)if(Bn(ke,bi)===Bn(ye,-1===Si?0:bi-Si)){if(-1===Si&&(Si=bi),bi-Si+1===hn)return Si*pr}else-1!==Si&&(bi-=bi-Si),Si=-1}else for(Ce+hn>Tr&&(Ce=Tr-hn),bi=Ce;bi>=0;bi--){for(var Ui=!0,eo=0;eo<hn;eo++)if(Bn(ke,bi+eo)!==Bn(ye,eo)){Ui=!1;break}if(Ui)return bi}return-1}function se(ke,ye,Ce,lt){Ce=Number(Ce)||0;var Bt=ke.length-Ce;lt?(lt=Number(lt))>Bt&&(lt=Bt):lt=Bt;var pr=ye.length;if(pr%2!=0)throw new TypeError("Invalid hex string");lt>pr/2&&(lt=pr/2);for(var Tr=0;Tr<lt;++Tr){var hn=parseInt(ye.substr(2*Tr,2),16);if(isNaN(hn))return Tr;ke[Ce+Tr]=hn}return Tr}function ie(ke,ye,Ce,lt){return wt(At(ye,ke.length-Ce),ke,Ce,lt)}function ue(ke,ye,Ce,lt){return wt(function _t(ke){for(var ye=[],Ce=0;Ce<ke.length;++Ce)ye.push(255&ke.charCodeAt(Ce));return ye}(ye),ke,Ce,lt)}function le(ke,ye,Ce,lt){return ue(ke,ye,Ce,lt)}function de(ke,ye,Ce,lt){return wt(et(ye),ke,Ce,lt)}function be(ke,ye,Ce,lt){return wt(function it(ke,ye){for(var Ce,lt,pr=[],Tr=0;Tr<ke.length&&!((ye-=2)<0);++Tr)lt=(Ce=ke.charCodeAt(Tr))>>8,pr.push(Ce%256),pr.push(lt);return pr}(ye,ke.length-Ce),ke,Ce,lt)}function _e(ke,ye,Ce){return function C(ke){f||T();for(var ye,Ce=ke.length,lt=Ce%3,Bt="",pr=[],hn=0,Bn=Ce-lt;hn<Bn;hn+=16383)pr.push(w(ke,hn,hn+16383>Bn?Bn:hn+16383));return 1===lt?(Bt+=g[(ye=ke[Ce-1])>>2],Bt+=g[ye<<4&63],Bt+="=="):2===lt&&(Bt+=g[(ye=(ke[Ce-2]<<8)+ke[Ce-1])>>10],Bt+=g[ye>>4&63],Bt+=g[ye<<2&63],Bt+="="),pr.push(Bt),pr.join("")}(0===ye&&Ce===ke.length?ke:ke.slice(ye,Ce))}function xe(ke,ye,Ce){Ce=Math.min(ke.length,Ce);for(var lt=[],Bt=ye;Bt<Ce;){var Bn,bi,Si,Ui,pr=ke[Bt],Tr=null,hn=pr>239?4:pr>223?3:pr>191?2:1;if(Bt+hn<=Ce)switch(hn){case 1:pr<128&&(Tr=pr);break;case 2:128==(192&(Bn=ke[Bt+1]))&&(Ui=(31&pr)<<6|63&Bn)>127&&(Tr=Ui);break;case 3:bi=ke[Bt+2],128==(192&(Bn=ke[Bt+1]))&&128==(192&bi)&&(Ui=(15&pr)<<12|(63&Bn)<<6|63&bi)>2047&&(Ui<55296||Ui>57343)&&(Tr=Ui);break;case 4:bi=ke[Bt+2],Si=ke[Bt+3],128==(192&(Bn=ke[Bt+1]))&&128==(192&bi)&&128==(192&Si)&&(Ui=(15&pr)<<18|(63&Bn)<<12|(63&bi)<<6|63&Si)>65535&&Ui<1114112&&(Tr=Ui)}null===Tr?(Tr=65533,hn=1):Tr>65535&&(lt.push((Tr-=65536)>>>10&1023|55296),Tr=56320|1023&Tr),lt.push(Tr),Bt+=hn}return function he(ke){var ye=ke.length;if(ye<=4096)return String.fromCharCode.apply(String,ke);for(var Ce="",lt=0;lt<ye;)Ce+=String.fromCharCode.apply(String,ke.slice(lt,lt+=4096));return Ce}(lt)}N.TYPED_ARRAY_SUPPORT=void 0===p.TYPED_ARRAY_SUPPORT||p.TYPED_ARRAY_SUPPORT,N.poolSize=8192,N._augment=function(ke){return ke.__proto__=N.prototype,ke},N.from=function(ke,ye,Ce){return V(null,ke,ye,Ce)},N.TYPED_ARRAY_SUPPORT&&(N.prototype.__proto__=Uint8Array.prototype,N.__proto__=Uint8Array),N.alloc=function(ke,ye,Ce){return function J(ke,ye,Ce,lt){return X(ye),ye<=0?z(ke,ye):void 0!==Ce?"string"==typeof lt?z(ke,ye).fill(Ce,lt):z(ke,ye).fill(Ce):z(ke,ye)}(null,ke,ye,Ce)},N.allocUnsafe=function(ke){return G(null,ke)},N.allocUnsafeSlow=function(ke){return G(null,ke)},N.isBuffer=Kt,N.compare=function(ye,Ce){if(!ee(ye)||!ee(Ce))throw new TypeError("Arguments must be Buffers");if(ye===Ce)return 0;for(var lt=ye.length,Bt=Ce.length,pr=0,Tr=Math.min(lt,Bt);pr<Tr;++pr)if(ye[pr]!==Ce[pr]){lt=ye[pr],Bt=Ce[pr];break}return lt<Bt?-1:Bt<lt?1:0},N.isEncoding=function(ye){switch(String(ye).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},N.concat=function(ye,Ce){if(!S(ye))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ye.length)return N.alloc(0);var lt;if(void 0===Ce)for(Ce=0,lt=0;lt<ye.length;++lt)Ce+=ye[lt].length;var Bt=N.allocUnsafe(Ce),pr=0;for(lt=0;lt<ye.length;++lt){var Tr=ye[lt];if(!ee(Tr))throw new TypeError('"list" argument must be an Array of Buffers');Tr.copy(Bt,pr),pr+=Tr.length}return Bt},N.byteLength=U,N.prototype._isBuffer=!0,N.prototype.swap16=function(){var ye=this.length;if(ye%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Ce=0;Ce<ye;Ce+=2)q(this,Ce,Ce+1);return this},N.prototype.swap32=function(){var ye=this.length;if(ye%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Ce=0;Ce<ye;Ce+=4)q(this,Ce,Ce+3),q(this,Ce+1,Ce+2);return this},N.prototype.swap64=function(){var ye=this.length;if(ye%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Ce=0;Ce<ye;Ce+=8)q(this,Ce,Ce+7),q(this,Ce+1,Ce+6),q(this,Ce+2,Ce+5),q(this,Ce+3,Ce+4);return this},N.prototype.toString=function(){var ye=0|this.length;return 0===ye?"":0===arguments.length?xe(this,0,ye):$.apply(this,arguments)},N.prototype.equals=function(ye){if(!ee(ye))throw new TypeError("Argument must be a Buffer");return this===ye||0===N.compare(this,ye)},N.prototype.inspect=function(){var ye="";return this.length>0&&(ye=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(ye+=" ... ")),"<Buffer "+ye+">"},N.prototype.compare=function(ye,Ce,lt,Bt,pr){if(!ee(ye))throw new TypeError("Argument must be a Buffer");if(void 0===Ce&&(Ce=0),void 0===lt&&(lt=ye?ye.length:0),void 0===Bt&&(Bt=0),void 0===pr&&(pr=this.length),Ce<0||lt>ye.length||Bt<0||pr>this.length)throw new RangeError("out of range index");if(Bt>=pr&&Ce>=lt)return 0;if(Bt>=pr)return-1;if(Ce>=lt)return 1;if(this===ye)return 0;for(var Tr=(pr>>>=0)-(Bt>>>=0),hn=(lt>>>=0)-(Ce>>>=0),Bn=Math.min(Tr,hn),bi=this.slice(Bt,pr),Si=ye.slice(Ce,lt),Ui=0;Ui<Bn;++Ui)if(bi[Ui]!==Si[Ui]){Tr=bi[Ui],hn=Si[Ui];break}return Tr<hn?-1:hn<Tr?1:0},N.prototype.includes=function(ye,Ce,lt){return-1!==this.indexOf(ye,Ce,lt)},N.prototype.indexOf=function(ye,Ce,lt){return te(this,ye,Ce,lt,!0)},N.prototype.lastIndexOf=function(ye,Ce,lt){return te(this,ye,Ce,lt,!1)},N.prototype.write=function(ye,Ce,lt,Bt){if(void 0===Ce)Bt="utf8",lt=this.length,Ce=0;else if(void 0===lt&&"string"==typeof Ce)Bt=Ce,lt=this.length,Ce=0;else{if(!isFinite(Ce))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Ce|=0,isFinite(lt)?(lt|=0,void 0===Bt&&(Bt="utf8")):(Bt=lt,lt=void 0)}var pr=this.length-Ce;if((void 0===lt||lt>pr)&&(lt=pr),ye.length>0&&(lt<0||Ce<0)||Ce>this.length)throw new RangeError("Attempt to write outside buffer bounds");Bt||(Bt="utf8");for(var Tr=!1;;)switch(Bt){case"hex":return se(this,ye,Ce,lt);case"utf8":case"utf-8":return ie(this,ye,Ce,lt);case"ascii":return ue(this,ye,Ce,lt);case"latin1":case"binary":return le(this,ye,Ce,lt);case"base64":return de(this,ye,Ce,lt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,ye,Ce,lt);default:if(Tr)throw new TypeError("Unknown encoding: "+Bt);Bt=(""+Bt).toLowerCase(),Tr=!0}},N.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function me(ke,ye,Ce){var lt="";Ce=Math.min(ke.length,Ce);for(var Bt=ye;Bt<Ce;++Bt)lt+=String.fromCharCode(127&ke[Bt]);return lt}function Se(ke,ye,Ce){var lt="";Ce=Math.min(ke.length,Ce);for(var Bt=ye;Bt<Ce;++Bt)lt+=String.fromCharCode(ke[Bt]);return lt}function Me(ke,ye,Ce){var lt=ke.length;(!ye||ye<0)&&(ye=0),(!Ce||Ce<0||Ce>lt)&&(Ce=lt);for(var Bt="",pr=ye;pr<Ce;++pr)Bt+=gt(ke[pr]);return Bt}function Ie(ke,ye,Ce){for(var lt=ke.slice(ye,Ce),Bt="",pr=0;pr<lt.length;pr+=2)Bt+=String.fromCharCode(lt[pr]+256*lt[pr+1]);return Bt}function Fe(ke,ye,Ce){if(ke%1!=0||ke<0)throw new RangeError("offset is not uint");if(ke+ye>Ce)throw new RangeError("Trying to access beyond buffer length")}function Ne(ke,ye,Ce,lt,Bt,pr){if(!ee(ke))throw new TypeError('"buffer" argument must be a Buffer instance');if(ye>Bt||ye<pr)throw new RangeError('"value" argument is out of bounds');if(Ce+lt>ke.length)throw new RangeError("Index out of range")}function De(ke,ye,Ce,lt){ye<0&&(ye=65535+ye+1);for(var Bt=0,pr=Math.min(ke.length-Ce,2);Bt<pr;++Bt)ke[Ce+Bt]=(ye&255<<8*(lt?Bt:1-Bt))>>>8*(lt?Bt:1-Bt)}function $e(ke,ye,Ce,lt){ye<0&&(ye=4294967295+ye+1);for(var Bt=0,pr=Math.min(ke.length-Ce,4);Bt<pr;++Bt)ke[Ce+Bt]=ye>>>8*(lt?Bt:3-Bt)&255}function Re(ke,ye,Ce,lt,Bt,pr){if(Ce+lt>ke.length)throw new RangeError("Index out of range");if(Ce<0)throw new RangeError("Index out of range")}function ze(ke,ye,Ce,lt,Bt){return Bt||Re(ke,0,Ce,4),O(ke,ye,Ce,lt,23,4),Ce+4}function Ue(ke,ye,Ce,lt,Bt){return Bt||Re(ke,0,Ce,8),O(ke,ye,Ce,lt,52,8),Ce+8}N.prototype.slice=function(ye,Ce){var Bt,lt=this.length;if((ye=~~ye)<0?(ye+=lt)<0&&(ye=0):ye>lt&&(ye=lt),(Ce=void 0===Ce?lt:~~Ce)<0?(Ce+=lt)<0&&(Ce=0):Ce>lt&&(Ce=lt),Ce<ye&&(Ce=ye),N.TYPED_ARRAY_SUPPORT)(Bt=this.subarray(ye,Ce)).__proto__=N.prototype;else{var pr=Ce-ye;Bt=new N(pr,void 0);for(var Tr=0;Tr<pr;++Tr)Bt[Tr]=this[Tr+ye]}return Bt},N.prototype.readUIntLE=function(ye,Ce,lt){ye|=0,Ce|=0,lt||Fe(ye,Ce,this.length);for(var Bt=this[ye],pr=1,Tr=0;++Tr<Ce&&(pr*=256);)Bt+=this[ye+Tr]*pr;return Bt},N.prototype.readUIntBE=function(ye,Ce,lt){ye|=0,Ce|=0,lt||Fe(ye,Ce,this.length);for(var Bt=this[ye+--Ce],pr=1;Ce>0&&(pr*=256);)Bt+=this[ye+--Ce]*pr;return Bt},N.prototype.readUInt8=function(ye,Ce){return Ce||Fe(ye,1,this.length),this[ye]},N.prototype.readUInt16LE=function(ye,Ce){return Ce||Fe(ye,2,this.length),this[ye]|this[ye+1]<<8},N.prototype.readUInt16BE=function(ye,Ce){return Ce||Fe(ye,2,this.length),this[ye]<<8|this[ye+1]},N.prototype.readUInt32LE=function(ye,Ce){return Ce||Fe(ye,4,this.length),(this[ye]|this[ye+1]<<8|this[ye+2]<<16)+16777216*this[ye+3]},N.prototype.readUInt32BE=function(ye,Ce){return Ce||Fe(ye,4,this.length),16777216*this[ye]+(this[ye+1]<<16|this[ye+2]<<8|this[ye+3])},N.prototype.readIntLE=function(ye,Ce,lt){ye|=0,Ce|=0,lt||Fe(ye,Ce,this.length);for(var Bt=this[ye],pr=1,Tr=0;++Tr<Ce&&(pr*=256);)Bt+=this[ye+Tr]*pr;return Bt>=(pr*=128)&&(Bt-=Math.pow(2,8*Ce)),Bt},N.prototype.readIntBE=function(ye,Ce,lt){ye|=0,Ce|=0,lt||Fe(ye,Ce,this.length);for(var Bt=Ce,pr=1,Tr=this[ye+--Bt];Bt>0&&(pr*=256);)Tr+=this[ye+--Bt]*pr;return Tr>=(pr*=128)&&(Tr-=Math.pow(2,8*Ce)),Tr},N.prototype.readInt8=function(ye,Ce){return Ce||Fe(ye,1,this.length),128&this[ye]?-1*(255-this[ye]+1):this[ye]},N.prototype.readInt16LE=function(ye,Ce){Ce||Fe(ye,2,this.length);var lt=this[ye]|this[ye+1]<<8;return 32768&lt?4294901760|lt:lt},N.prototype.readInt16BE=function(ye,Ce){Ce||Fe(ye,2,this.length);var lt=this[ye+1]|this[ye]<<8;return 32768&lt?4294901760|lt:lt},N.prototype.readInt32LE=function(ye,Ce){return Ce||Fe(ye,4,this.length),this[ye]|this[ye+1]<<8|this[ye+2]<<16|this[ye+3]<<24},N.prototype.readInt32BE=function(ye,Ce){return Ce||Fe(ye,4,this.length),this[ye]<<24|this[ye+1]<<16|this[ye+2]<<8|this[ye+3]},N.prototype.readFloatLE=function(ye,Ce){return Ce||Fe(ye,4,this.length),A(this,ye,!0,23,4)},N.prototype.readFloatBE=function(ye,Ce){return Ce||Fe(ye,4,this.length),A(this,ye,!1,23,4)},N.prototype.readDoubleLE=function(ye,Ce){return Ce||Fe(ye,8,this.length),A(this,ye,!0,52,8)},N.prototype.readDoubleBE=function(ye,Ce){return Ce||Fe(ye,8,this.length),A(this,ye,!1,52,8)},N.prototype.writeUIntLE=function(ye,Ce,lt,Bt){ye=+ye,Ce|=0,lt|=0,Bt||Ne(this,ye,Ce,lt,Math.pow(2,8*lt)-1,0);var Tr=1,hn=0;for(this[Ce]=255&ye;++hn<lt&&(Tr*=256);)this[Ce+hn]=ye/Tr&255;return Ce+lt},N.prototype.writeUIntBE=function(ye,Ce,lt,Bt){ye=+ye,Ce|=0,lt|=0,Bt||Ne(this,ye,Ce,lt,Math.pow(2,8*lt)-1,0);var Tr=lt-1,hn=1;for(this[Ce+Tr]=255&ye;--Tr>=0&&(hn*=256);)this[Ce+Tr]=ye/hn&255;return Ce+lt},N.prototype.writeUInt8=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,1,255,0),N.TYPED_ARRAY_SUPPORT||(ye=Math.floor(ye)),this[Ce]=255&ye,Ce+1},N.prototype.writeUInt16LE=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,2,65535,0),N.TYPED_ARRAY_SUPPORT?(this[Ce]=255&ye,this[Ce+1]=ye>>>8):De(this,ye,Ce,!0),Ce+2},N.prototype.writeUInt16BE=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,2,65535,0),N.TYPED_ARRAY_SUPPORT?(this[Ce]=ye>>>8,this[Ce+1]=255&ye):De(this,ye,Ce,!1),Ce+2},N.prototype.writeUInt32LE=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,4,4294967295,0),N.TYPED_ARRAY_SUPPORT?(this[Ce+3]=ye>>>24,this[Ce+2]=ye>>>16,this[Ce+1]=ye>>>8,this[Ce]=255&ye):$e(this,ye,Ce,!0),Ce+4},N.prototype.writeUInt32BE=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,4,4294967295,0),N.TYPED_ARRAY_SUPPORT?(this[Ce]=ye>>>24,this[Ce+1]=ye>>>16,this[Ce+2]=ye>>>8,this[Ce+3]=255&ye):$e(this,ye,Ce,!1),Ce+4},N.prototype.writeIntLE=function(ye,Ce,lt,Bt){if(ye=+ye,Ce|=0,!Bt){var pr=Math.pow(2,8*lt-1);Ne(this,ye,Ce,lt,pr-1,-pr)}var Tr=0,hn=1,Bn=0;for(this[Ce]=255&ye;++Tr<lt&&(hn*=256);)ye<0&&0===Bn&&0!==this[Ce+Tr-1]&&(Bn=1),this[Ce+Tr]=(ye/hn>>0)-Bn&255;return Ce+lt},N.prototype.writeIntBE=function(ye,Ce,lt,Bt){if(ye=+ye,Ce|=0,!Bt){var pr=Math.pow(2,8*lt-1);Ne(this,ye,Ce,lt,pr-1,-pr)}var Tr=lt-1,hn=1,Bn=0;for(this[Ce+Tr]=255&ye;--Tr>=0&&(hn*=256);)ye<0&&0===Bn&&0!==this[Ce+Tr+1]&&(Bn=1),this[Ce+Tr]=(ye/hn>>0)-Bn&255;return Ce+lt},N.prototype.writeInt8=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,1,127,-128),N.TYPED_ARRAY_SUPPORT||(ye=Math.floor(ye)),ye<0&&(ye=255+ye+1),this[Ce]=255&ye,Ce+1},N.prototype.writeInt16LE=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,2,32767,-32768),N.TYPED_ARRAY_SUPPORT?(this[Ce]=255&ye,this[Ce+1]=ye>>>8):De(this,ye,Ce,!0),Ce+2},N.prototype.writeInt16BE=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,2,32767,-32768),N.TYPED_ARRAY_SUPPORT?(this[Ce]=ye>>>8,this[Ce+1]=255&ye):De(this,ye,Ce,!1),Ce+2},N.prototype.writeInt32LE=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,4,2147483647,-2147483648),N.TYPED_ARRAY_SUPPORT?(this[Ce]=255&ye,this[Ce+1]=ye>>>8,this[Ce+2]=ye>>>16,this[Ce+3]=ye>>>24):$e(this,ye,Ce,!0),Ce+4},N.prototype.writeInt32BE=function(ye,Ce,lt){return ye=+ye,Ce|=0,lt||Ne(this,ye,Ce,4,2147483647,-2147483648),ye<0&&(ye=4294967295+ye+1),N.TYPED_ARRAY_SUPPORT?(this[Ce]=ye>>>24,this[Ce+1]=ye>>>16,this[Ce+2]=ye>>>8,this[Ce+3]=255&ye):$e(this,ye,Ce,!1),Ce+4},N.prototype.writeFloatLE=function(ye,Ce,lt){return ze(this,ye,Ce,!0,lt)},N.prototype.writeFloatBE=function(ye,Ce,lt){return ze(this,ye,Ce,!1,lt)},N.prototype.writeDoubleLE=function(ye,Ce,lt){return Ue(this,ye,Ce,!0,lt)},N.prototype.writeDoubleBE=function(ye,Ce,lt){return Ue(this,ye,Ce,!1,lt)},N.prototype.copy=function(ye,Ce,lt,Bt){if(lt||(lt=0),!Bt&&0!==Bt&&(Bt=this.length),Ce>=ye.length&&(Ce=ye.length),Ce||(Ce=0),Bt>0&&Bt<lt&&(Bt=lt),Bt===lt||0===ye.length||0===this.length)return 0;if(Ce<0)throw new RangeError("targetStart out of bounds");if(lt<0||lt>=this.length)throw new RangeError("sourceStart out of bounds");if(Bt<0)throw new RangeError("sourceEnd out of bounds");Bt>this.length&&(Bt=this.length),ye.length-Ce<Bt-lt&&(Bt=ye.length-Ce+lt);var Tr,pr=Bt-lt;if(this===ye&&lt<Ce&&Ce<Bt)for(Tr=pr-1;Tr>=0;--Tr)ye[Tr+Ce]=this[Tr+lt];else if(pr<1e3||!N.TYPED_ARRAY_SUPPORT)for(Tr=0;Tr<pr;++Tr)ye[Tr+Ce]=this[Tr+lt];else Uint8Array.prototype.set.call(ye,this.subarray(lt,lt+pr),Ce);return pr},N.prototype.fill=function(ye,Ce,lt,Bt){if("string"==typeof ye){if("string"==typeof Ce?(Bt=Ce,Ce=0,lt=this.length):"string"==typeof lt&&(Bt=lt,lt=this.length),1===ye.length){var pr=ye.charCodeAt(0);pr<256&&(ye=pr)}if(void 0!==Bt&&"string"!=typeof Bt)throw new TypeError("encoding must be a string");if("string"==typeof Bt&&!N.isEncoding(Bt))throw new TypeError("Unknown encoding: "+Bt)}else"number"==typeof ye&&(ye&=255);if(Ce<0||this.length<Ce||this.length<lt)throw new RangeError("Out of range index");if(lt<=Ce)return this;var Tr;if(Ce>>>=0,lt=void 0===lt?this.length:lt>>>0,ye||(ye=0),"number"==typeof ye)for(Tr=Ce;Tr<lt;++Tr)this[Tr]=ye;else{var hn=ee(ye)?ye:At(new N(ye,Bt).toString()),Bn=hn.length;for(Tr=0;Tr<lt-Ce;++Tr)this[Tr+Ce]=hn[Tr%Bn]}return this};var je=/[^+\/0-9A-Za-z-_]/g;function gt(ke){return ke<16?"0"+ke.toString(16):ke.toString(16)}function At(ke,ye){ye=ye||1/0;for(var Ce,lt=ke.length,Bt=null,pr=[],Tr=0;Tr<lt;++Tr){if((Ce=ke.charCodeAt(Tr))>55295&&Ce<57344){if(!Bt){if(Ce>56319){(ye-=3)>-1&&pr.push(239,191,189);continue}if(Tr+1===lt){(ye-=3)>-1&&pr.push(239,191,189);continue}Bt=Ce;continue}if(Ce<56320){(ye-=3)>-1&&pr.push(239,191,189),Bt=Ce;continue}Ce=65536+(Bt-55296<<10|Ce-56320)}else Bt&&(ye-=3)>-1&&pr.push(239,191,189);if(Bt=null,Ce<128){if((ye-=1)<0)break;pr.push(Ce)}else if(Ce<2048){if((ye-=2)<0)break;pr.push(Ce>>6|192,63&Ce|128)}else if(Ce<65536){if((ye-=3)<0)break;pr.push(Ce>>12|224,Ce>>6&63|128,63&Ce|128)}else{if(!(Ce<1114112))throw new Error("Invalid code point");if((ye-=4)<0)break;pr.push(Ce>>18|240,Ce>>12&63|128,Ce>>6&63|128,63&Ce|128)}}return pr}function et(ke){return function _(ke){f||T();var ye,Ce,lt,Bt,pr,Tr,hn=ke.length;if(hn%4>0)throw new Error("Invalid string. Length must be a multiple of 4");Tr=new x(3*hn/4-(pr="="===ke[hn-2]?2:"="===ke[hn-1]?1:0)),lt=pr>0?hn-4:hn;var Bn=0;for(ye=0,Ce=0;ye<lt;ye+=4,Ce+=3)Bt=u[ke.charCodeAt(ye)]<<18|u[ke.charCodeAt(ye+1)]<<12|u[ke.charCodeAt(ye+2)]<<6|u[ke.charCodeAt(ye+3)],Tr[Bn++]=Bt>>16&255,Tr[Bn++]=Bt>>8&255,Tr[Bn++]=255&Bt;return 2===pr?(Bt=u[ke.charCodeAt(ye)]<<2|u[ke.charCodeAt(ye+1)]>>4,Tr[Bn++]=255&Bt):1===pr&&(Bt=u[ke.charCodeAt(ye)]<<10|u[ke.charCodeAt(ye+1)]<<4|u[ke.charCodeAt(ye+2)]>>2,Tr[Bn++]=Bt>>8&255,Tr[Bn++]=255&Bt),Tr}(function rt(ke){if((ke=function ut(ke){return ke.trim?ke.trim():ke.replace(/^\s+|\s+$/g,"")}(ke).replace(je,"")).length<2)return"";for(;ke.length%4!=0;)ke+="=";return ke}(ke))}function wt(ke,ye,Ce,lt){for(var Bt=0;Bt<lt&&!(Bt+Ce>=ye.length||Bt>=ke.length);++Bt)ye[Bt+Ce]=ke[Bt];return Bt}function Kt(ke){return null!=ke&&(!!ke._isBuffer||cr(ke)||function ar(ke){return"function"==typeof ke.readFloatLE&&"function"==typeof ke.slice&&cr(ke.slice(0,0))}(ke))}function cr(ke){return!!ke.constructor&&"function"==typeof ke.constructor.isBuffer&&ke.constructor.isBuffer(ke)}function hr(){throw new Error("setTimeout has not been defined")}function Xt(){throw new Error("clearTimeout has not been defined")}var He=hr,Je=Xt;function pe(ke){if(He===setTimeout)return setTimeout(ke,0);if((He===hr||!He)&&setTimeout)return He=setTimeout,setTimeout(ke,0);try{return He(ke,0)}catch{try{return He.call(null,ke,0)}catch{return He.call(this,ke,0)}}}"function"==typeof p.setTimeout&&(He=setTimeout),"function"==typeof p.clearTimeout&&(Je=clearTimeout);var Ke,Be=[],We=!1,Ye=-1;function ft(){!We||!Ke||(We=!1,Ke.length?Be=Ke.concat(Be):Ye=-1,Be.length&&ct())}function ct(){if(!We){var ke=pe(ft);We=!0;for(var ye=Be.length;ye;){for(Ke=Be,Be=[];++Ye<ye;)Ke&&Ke[Ye].run();Ye=-1,ye=Be.length}Ke=null,We=!1,function we(ke){if(Je===clearTimeout)return clearTimeout(ke);if((Je===Xt||!Je)&&clearTimeout)return Je=clearTimeout,clearTimeout(ke);try{return Je(ke)}catch{try{return Je.call(null,ke)}catch{return Je.call(this,ke)}}}(ke)}}function St(ke){var ye=new Array(arguments.length-1);if(arguments.length>1)for(var Ce=1;Ce<arguments.length;Ce++)ye[Ce-1]=arguments[Ce];Be.push(new Ft(ke,ye)),1===Be.length&&!We&&pe(ct)}function Ft(ke,ye){this.fun=ke,this.array=ye}Ft.prototype.run=function(){this.fun.apply(null,this.array)};var Et="function"==typeof Object.create?function(ye,Ce){ye.super_=Ce,ye.prototype=Object.create(Ce.prototype,{constructor:{value:ye,enumerable:!1,writable:!0,configurable:!0}})}:function(ye,Ce){ye.super_=Ce;var lt=function(){};lt.prototype=Ce.prototype,ye.prototype=new lt,ye.prototype.constructor=ye},Dt=/%[sdj%]/g;function Le(ke){if(!Qt(ke)){for(var ye=[],Ce=0;Ce<arguments.length;Ce++)ye.push(Ut(arguments[Ce]));return ye.join(" ")}Ce=1;for(var lt=arguments,Bt=lt.length,pr=String(ke).replace(Dt,function(hn){if("%%"===hn)return"%";if(Ce>=Bt)return hn;switch(hn){case"%s":return String(lt[Ce++]);case"%d":return Number(lt[Ce++]);case"%j":try{return JSON.stringify(lt[Ce++])}catch{return"[Circular]"}default:return hn}}),Tr=lt[Ce];Ce<Bt;Tr=lt[++Ce])ur(Tr)||!an(Tr)?pr+=" "+Tr:pr+=" "+Ut(Tr);return pr}function Xe(ke,ye){if(Er(p.process))return function(){return Xe(ke,ye).apply(this,arguments)};var Ce=!1;return function lt(){return Ce||(console.error(ye),Ce=!0),ke.apply(this,arguments)}}var dt,ot={};function Ut(ke,ye){var Ce={seen:[],stylize:Wt};return arguments.length>=3&&(Ce.depth=arguments[2]),arguments.length>=4&&(Ce.colors=arguments[3]),zt(ye)?Ce.showHidden=ye:ye&&Vr(Ce,ye),Er(Ce.showHidden)&&(Ce.showHidden=!1),Er(Ce.depth)&&(Ce.depth=2),Er(Ce.colors)&&(Ce.colors=!1),Er(Ce.customInspect)&&(Ce.customInspect=!0),Ce.colors&&(Ce.stylize=$t),Rr(Ce,ke,Ce.depth)}function $t(ke,ye){var Ce=Ut.styles[ye];return Ce?"\x1b["+Ut.colors[Ce][0]+"m"+ke+"\x1b["+Ut.colors[Ce][1]+"m":ke}function Wt(ke,ye){return ke}function Rr(ke,ye,Ce){if(ke.customInspect&&ye&&gn(ye.inspect)&&ye.inspect!==Ut&&(!ye.constructor||ye.constructor.prototype!==ye)){var lt=ye.inspect(Ce,ke);return Qt(lt)||(lt=Rr(ke,lt,Ce)),lt}var Bt=function br(ke,ye){if(Er(ye))return ke.stylize("undefined","undefined");if(Qt(ye)){var Ce="'"+JSON.stringify(ye).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ke.stylize(Ce,"string")}return function Tt(ke){return"number"==typeof ke}(ye)?ke.stylize(""+ye,"number"):zt(ye)?ke.stylize(""+ye,"boolean"):ur(ye)?ke.stylize("null","null"):void 0}(ke,ye);if(Bt)return Bt;var pr=Object.keys(ye),Tr=function wr(ke){var ye={};return ke.forEach(function(Ce,lt){ye[Ce]=!0}),ye}(pr);if(ke.showHidden&&(pr=Object.getOwnPropertyNames(ye)),sn(ye)&&(pr.indexOf("message")>=0||pr.indexOf("description")>=0))return nr(ye);if(0===pr.length){if(gn(ye))return ke.stylize("[Function"+(ye.name?": "+ye.name:"")+"]","special");if(zr(ye))return ke.stylize(RegExp.prototype.toString.call(ye),"regexp");if(Kr(ye))return ke.stylize(Date.prototype.toString.call(ye),"date");if(sn(ye))return nr(ye)}var eo,Bn="",bi=!1,Si=["{","}"];return function Ar(ke){return Array.isArray(ke)}(ye)&&(bi=!0,Si=["[","]"]),gn(ye)&&(Bn=" [Function"+(ye.name?": "+ye.name:"")+"]"),zr(ye)&&(Bn=" "+RegExp.prototype.toString.call(ye)),Kr(ye)&&(Bn=" "+Date.prototype.toUTCString.call(ye)),sn(ye)&&(Bn=" "+nr(ye)),0!==pr.length||bi&&0!=ye.length?Ce<0?zr(ye)?ke.stylize(RegExp.prototype.toString.call(ye),"regexp"):ke.stylize("[Object]","special"):(ke.seen.push(ye),eo=bi?function lr(ke,ye,Ce,lt,Bt){for(var pr=[],Tr=0,hn=ye.length;Tr<hn;++Tr)_n(ye,String(Tr))?pr.push(sr(ke,ye,Ce,lt,String(Tr),!0)):pr.push("");return Bt.forEach(function(Bn){Bn.match(/^\d+$/)||pr.push(sr(ke,ye,Ce,lt,Bn,!0))}),pr}(ke,ye,Ce,Tr,pr):pr.map(function(La){return sr(ke,ye,Ce,Tr,La,bi)}),ke.seen.pop(),function _r(ke,ye,Ce){return ke.reduce(function(Bt,pr){return pr.indexOf("\n"),Bt+pr.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Ce[0]+(""===ye?"":ye+"\n ")+" "+ke.join(",\n  ")+" "+Ce[1]:Ce[0]+ye+" "+ke.join(", ")+" "+Ce[1]}(eo,Bn,Si)):Si[0]+Bn+Si[1]}function nr(ke){return"["+Error.prototype.toString.call(ke)+"]"}function sr(ke,ye,Ce,lt,Bt,pr){var Tr,hn,Bn;if((Bn=Object.getOwnPropertyDescriptor(ye,Bt)||{value:ye[Bt]}).get?hn=ke.stylize(Bn.set?"[Getter/Setter]":"[Getter]","special"):Bn.set&&(hn=ke.stylize("[Setter]","special")),_n(lt,Bt)||(Tr="["+Bt+"]"),hn||(ke.seen.indexOf(Bn.value)<0?(hn=ur(Ce)?Rr(ke,Bn.value,null):Rr(ke,Bn.value,Ce-1)).indexOf("\n")>-1&&(hn=pr?hn.split("\n").map(function(bi){return"  "+bi}).join("\n").substr(2):"\n"+hn.split("\n").map(function(bi){return"   "+bi}).join("\n")):hn=ke.stylize("[Circular]","special")),Er(Tr)){if(pr&&Bt.match(/^\d+$/))return hn;(Tr=JSON.stringify(""+Bt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Tr=Tr.substr(1,Tr.length-2),Tr=ke.stylize(Tr,"name")):(Tr=Tr.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Tr=ke.stylize(Tr,"string"))}return Tr+": "+hn}function zt(ke){return"boolean"==typeof ke}function ur(ke){return null===ke}function Qt(ke){return"string"==typeof ke}function Er(ke){return void 0===ke}function zr(ke){return an(ke)&&"[object RegExp]"===zn(ke)}function an(ke){return"object"==typeof ke&&null!==ke}function Kr(ke){return an(ke)&&"[object Date]"===zn(ke)}function sn(ke){return an(ke)&&("[object Error]"===zn(ke)||ke instanceof Error)}function gn(ke){return"function"==typeof ke}function zn(ke){return Object.prototype.toString.call(ke)}function Vr(ke,ye){if(!ye||!an(ye))return ke;for(var Ce=Object.keys(ye),lt=Ce.length;lt--;)ke[Ce[lt]]=ye[Ce[lt]];return ke}function _n(ke,ye){return Object.prototype.hasOwnProperty.call(ke,ye)}function Qr(){this.head=null,this.tail=null,this.length=0}Ut.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Ut.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Qr.prototype.push=function(ke){var ye={data:ke,next:null};this.length>0?this.tail.next=ye:this.head=ye,this.tail=ye,++this.length},Qr.prototype.unshift=function(ke){var ye={data:ke,next:this.head};0===this.length&&(this.tail=ye),this.head=ye,++this.length},Qr.prototype.shift=function(){if(0!==this.length){var ke=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,ke}},Qr.prototype.clear=function(){this.head=this.tail=null,this.length=0},Qr.prototype.join=function(ke){if(0===this.length)return"";for(var ye=this.head,Ce=""+ye.data;ye=ye.next;)Ce+=ke+ye.data;return Ce},Qr.prototype.concat=function(ke){if(0===this.length)return N.alloc(0);if(1===this.length)return this.head.data;for(var ye=N.allocUnsafe(ke>>>0),Ce=this.head,lt=0;Ce;)Ce.data.copy(ye,lt),lt+=Ce.data.length,Ce=Ce.next;return ye};var Jr=N.isEncoding||function(ke){switch(ke&&ke.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Hn(ke){switch(this.encoding=(ke||"utf8").toLowerCase().replace(/[-_]/,""),function Nn(ke){if(ke&&!Jr(ke))throw new Error("Unknown encoding: "+ke)}(ke),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Un;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=di;break;default:return void(this.write=Mn)}this.charBuffer=new N(6),this.charReceived=0,this.charLength=0}function Mn(ke){return ke.toString(this.encoding)}function Un(ke){this.charReceived=ke.length%2,this.charLength=this.charReceived?2:0}function di(ke){this.charReceived=ke.length%3,this.charLength=this.charReceived?3:0}Hn.prototype.write=function(ke){for(var ye="";this.charLength;){var Ce=ke.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:ke.length;if(ke.copy(this.charBuffer,this.charReceived,0,Ce),this.charReceived+=Ce,this.charReceived<this.charLength)return"";if(ke=ke.slice(Ce,ke.length),!((Bt=(ye=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(ye.length-1))>=55296&&Bt<=56319)){if(this.charReceived=this.charLength=0,0===ke.length)return ye;break}this.charLength+=this.surrogateSize,ye=""}this.detectIncompleteChar(ke);var Bt,lt=ke.length;if(this.charLength&&(ke.copy(this.charBuffer,0,ke.length-this.charReceived,lt),lt-=this.charReceived),(Bt=(ye+=ke.toString(this.encoding,0,lt)).charCodeAt(lt=ye.length-1))>=55296&&Bt<=56319){var pr=this.surrogateSize;return this.charLength+=pr,this.charReceived+=pr,this.charBuffer.copy(this.charBuffer,pr,0,pr),ke.copy(this.charBuffer,0,0,pr),ye.substring(0,lt)}return ye},Hn.prototype.detectIncompleteChar=function(ke){for(var ye=ke.length>=3?3:ke.length;ye>0;ye--){var Ce=ke[ke.length-ye];if(1==ye&&Ce>>5==6){this.charLength=2;break}if(ye<=2&&Ce>>4==14){this.charLength=3;break}if(ye<=3&&Ce>>3==30){this.charLength=4;break}}this.charReceived=ye},Hn.prototype.end=function(ke){var ye="";if(ke&&ke.length&&(ye=this.write(ke)),this.charReceived){var Bt=this.encoding;ye+=this.charBuffer.slice(0,this.charReceived).toString(Bt)}return ye},xr.ReadableState=gr;var rr=function Lt(ke){if(Er(dt)&&(dt=""),ke=ke.toUpperCase(),!ot[ke])if(new RegExp("\\b"+ke+"\\b","i").test(dt)){ot[ke]=function(){var Ce=Le.apply(null,arguments);console.error("%s %d: %s",ke,0,Ce)}}else ot[ke]=function(){};return ot[ke]}("stream");function gr(ke,ye){this.objectMode=!!(ke=ke||{}).objectMode,ye instanceof ho&&(this.objectMode=this.objectMode||!!ke.readableObjectMode);var Ce=ke.highWaterMark;this.highWaterMark=Ce||0===Ce?Ce:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=new Qr,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=ke.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ke.encoding&&(this.decoder=new Hn(ke.encoding),this.encoding=ke.encoding)}function xr(ke){if(!(this instanceof xr))return new xr(ke);this._readableState=new gr(ke,this),this.readable=!0,ke&&"function"==typeof ke.read&&(this._read=ke.read),v.call(this)}function Zr(ke,ye,Ce,lt,Bt){var pr=function Or(ke,ye){var Ce=null;return!Kt(ye)&&"string"!=typeof ye&&null!=ye&&!ke.objectMode&&(Ce=new TypeError("Invalid non-string/buffer chunk")),Ce}(ye,Ce);if(pr)ke.emit("error",pr);else if(null===Ce)ye.reading=!1,function Dr(ke,ye){if(!ye.ended){if(ye.decoder){var Ce=ye.decoder.end();Ce&&Ce.length&&(ye.buffer.push(Ce),ye.length+=ye.objectMode?1:Ce.length)}ye.ended=!0,Nr(ke)}}(ke,ye);else if(ye.objectMode||Ce&&Ce.length>0)if(ye.ended&&!Bt){var Tr=new Error("stream.push() after EOF");ke.emit("error",Tr)}else if(ye.endEmitted&&Bt){var hn=new Error("stream.unshift() after end event");ke.emit("error",hn)}else{var Bn;ye.decoder&&!Bt&&!lt&&(Ce=ye.decoder.write(Ce),Bn=!ye.objectMode&&0===Ce.length),Bt||(ye.reading=!1),Bn||(ye.flowing&&0===ye.length&&!ye.sync?(ke.emit("data",Ce),ke.read(0)):(ye.length+=ye.objectMode?1:Ce.length,Bt?ye.buffer.unshift(Ce):ye.buffer.push(Ce),ye.needReadable&&Nr(ke))),function rn(ke,ye){ye.readingMore||(ye.readingMore=!0,St(pn,ke,ye))}(ke,ye)}else Bt||(ye.reading=!1);return function Ur(ke){return!ke.ended&&(ke.needReadable||ke.length<ke.highWaterMark||0===ke.length)}(ye)}Et(xr,v),xr.prototype.push=function(ke,ye){var Ce=this._readableState;return!Ce.objectMode&&"string"==typeof ke&&(ye=ye||Ce.defaultEncoding)!==Ce.encoding&&(ke=N.from(ke,ye),ye=""),Zr(this,Ce,ke,ye,!1)},xr.prototype.unshift=function(ke){return Zr(this,this._readableState,ke,"",!0)},xr.prototype.isPaused=function(){return!1===this._readableState.flowing},xr.prototype.setEncoding=function(ke){return this._readableState.decoder=new Hn(ke),this._readableState.encoding=ke,this};function Cr(ke,ye){return ke<=0||0===ye.length&&ye.ended?0:ye.objectMode?1:ke!=ke?ye.flowing&&ye.length?ye.buffer.head.data.length:ye.length:(ke>ye.highWaterMark&&(ye.highWaterMark=function Br(ke){return ke>=8388608?ke=8388608:(ke--,ke|=ke>>>1,ke|=ke>>>2,ke|=ke>>>4,ke|=ke>>>8,ke|=ke>>>16,ke++),ke}(ke)),ke<=ye.length?ke:ye.ended?ye.length:(ye.needReadable=!0,0))}function Nr(ke){var ye=ke._readableState;ye.needReadable=!1,ye.emittedReadable||(rr("emitReadable",ye.flowing),ye.emittedReadable=!0,ye.sync?St(nn,ke):nn(ke))}function nn(ke){rr("emit readable"),ke.emit("readable"),Fn(ke)}function pn(ke,ye){for(var Ce=ye.length;!ye.reading&&!ye.flowing&&!ye.ended&&ye.length<ye.highWaterMark&&(rr("maybeReadMore read 0"),ke.read(0),Ce!==ye.length);)Ce=ye.length;ye.readingMore=!1}function Sn(ke){rr("readable nexttick read 0"),ke.read(0)}function Ln(ke,ye){ye.reading||(rr("resume read 0"),ke.read(0)),ye.resumeScheduled=!1,ye.awaitDrain=0,ke.emit("resume"),Fn(ke),ye.flowing&&!ye.reading&&ke.read(0)}function Fn(ke){var ye=ke._readableState;for(rr("flow",ye.flowing);ye.flowing&&null!==ke.read(););}function qn(ke,ye){return 0===ye.length?null:(ye.objectMode?Ce=ye.buffer.shift():!ke||ke>=ye.length?(Ce=ye.decoder?ye.buffer.join(""):1===ye.buffer.length?ye.buffer.head.data:ye.buffer.concat(ye.length),ye.buffer.clear()):Ce=function ni(ke,ye,Ce){var lt;return ke<ye.head.data.length?(lt=ye.head.data.slice(0,ke),ye.head.data=ye.head.data.slice(ke)):lt=ke===ye.head.data.length?ye.shift():Ce?function zi(ke,ye){var Ce=ye.head,lt=1,Bt=Ce.data;for(ke-=Bt.length;Ce=Ce.next;){var pr=Ce.data,Tr=ke>pr.length?pr.length:ke;if(Bt+=Tr===pr.length?pr:pr.slice(0,ke),0==(ke-=Tr)){Tr===pr.length?(++lt,ye.head=Ce.next?Ce.next:ye.tail=null):(ye.head=Ce,Ce.data=pr.slice(Tr));break}++lt}return ye.length-=lt,Bt}(ke,ye):function Di(ke,ye){var Ce=N.allocUnsafe(ke),lt=ye.head,Bt=1;for(lt.data.copy(Ce),ke-=lt.data.length;lt=lt.next;){var pr=lt.data,Tr=ke>pr.length?pr.length:ke;if(pr.copy(Ce,Ce.length-ke,0,Tr),0==(ke-=Tr)){Tr===pr.length?(++Bt,ye.head=lt.next?lt.next:ye.tail=null):(ye.head=lt,lt.data=pr.slice(Tr));break}++Bt}return ye.length-=Bt,Ce}(ke,ye),lt}(ke,ye.buffer,ye.decoder),Ce);var Ce}function Dn(ke){var ye=ke._readableState;if(ye.length>0)throw new Error('"endReadable()" called on non-empty stream');ye.endEmitted||(ye.ended=!0,St(si,ye,ke))}function si(ke,ye){!ke.endEmitted&&0===ke.length&&(ke.endEmitted=!0,ye.readable=!1,ye.emit("end"))}function Wi(ke,ye){for(var Ce=0,lt=ke.length;Ce<lt;Ce++)if(ke[Ce]===ye)return Ce;return-1}function ka(){}function Va(ke,ye,Ce){this.chunk=ke,this.encoding=ye,this.callback=Ce,this.next=null}function ao(ke,ye){Object.defineProperty(this,"buffer",{get:Xe(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),this.objectMode=!!(ke=ke||{}).objectMode,ye instanceof ho&&(this.objectMode=this.objectMode||!!ke.writableObjectMode);var Ce=ke.highWaterMark;this.highWaterMark=Ce||0===Ce?Ce:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.decodeStrings=!(!1===ke.decodeStrings),this.defaultEncoding=ke.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(pr){!function Ao(ke,ye){var Ce=ke._writableState,lt=Ce.sync,Bt=Ce.writecb;if(function fo(ke){ke.writing=!1,ke.writecb=null,ke.length-=ke.writelen,ke.writelen=0}(Ce),ye)!function Ia(ke,ye,Ce,lt,Bt){--ye.pendingcb,Ce?St(Bt,lt):Bt(lt),ke._writableState.errorEmitted=!0,ke.emit("error",lt)}(ke,Ce,lt,ye,Bt);else{var pr=to(Ce);!pr&&!Ce.corked&&!Ce.bufferProcessing&&Ce.bufferedRequest&&_a(ke,Ce),lt?St(Mo,ke,Ce,pr,Bt):Mo(ke,Ce,pr,Bt)}}(ye,pr)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ys(this)}function Bi(ke){if(!(this instanceof Bi||this instanceof ho))return new Bi(ke);this._writableState=new ao(ke,this),this.writable=!0,ke&&("function"==typeof ke.write&&(this._write=ke.write),"function"==typeof ke.writev&&(this._writev=ke.writev)),v.call(this)}function _o(ke,ye,Ce,lt,Bt){Ce=function Ji(ke,ye,Ce){return!ke.objectMode&&!1!==ke.decodeStrings&&"string"==typeof ye&&(ye=N.from(ye,Ce)),ye}(ye,Ce,lt),N.isBuffer(Ce)&&(lt="buffer");var pr=ye.objectMode?1:Ce.length;ye.length+=pr;var Tr=ye.length<ye.highWaterMark;if(Tr||(ye.needDrain=!0),ye.writing||ye.corked){var hn=ye.lastBufferedRequest;ye.lastBufferedRequest=new Va(Ce,lt,Bt),hn?hn.next=ye.lastBufferedRequest:ye.bufferedRequest=ye.lastBufferedRequest,ye.bufferedRequestCount+=1}else uo(ke,ye,!1,pr,Ce,lt,Bt);return Tr}function uo(ke,ye,Ce,lt,Bt,pr,Tr){ye.writelen=lt,ye.writecb=Tr,ye.writing=!0,ye.sync=!0,Ce?ke._writev(Bt,ye.onwrite):ke._write(Bt,pr,ye.onwrite),ye.sync=!1}function Mo(ke,ye,Ce,lt){Ce||function Ja(ke,ye){0===ye.length&&ye.needDrain&&(ye.needDrain=!1,ke.emit("drain"))}(ke,ye),ye.pendingcb--,lt(),Ls(ke,ye)}function _a(ke,ye){ye.bufferProcessing=!0;var Ce=ye.bufferedRequest;if(ke._writev&&Ce&&Ce.next){var Bt=new Array(ye.bufferedRequestCount),pr=ye.corkedRequestsFree;pr.entry=Ce;for(var Tr=0;Ce;)Bt[Tr]=Ce,Ce=Ce.next,Tr+=1;uo(ke,ye,!0,ye.length,Bt,"",pr.finish),ye.pendingcb++,ye.lastBufferedRequest=null,pr.next?(ye.corkedRequestsFree=pr.next,pr.next=null):ye.corkedRequestsFree=new ys(ye)}else{for(;Ce;){var hn=Ce.chunk;if(uo(ke,ye,!1,ye.objectMode?1:hn.length,hn,Ce.encoding,Ce.callback),Ce=Ce.next,ye.writing)break}null===Ce&&(ye.lastBufferedRequest=null)}ye.bufferedRequestCount=0,ye.bufferedRequest=Ce,ye.bufferProcessing=!1}function to(ke){return ke.ending&&0===ke.length&&null===ke.bufferedRequest&&!ke.finished&&!ke.writing}function Ts(ke,ye){ye.prefinished||(ye.prefinished=!0,ke.emit("prefinish"))}function Ls(ke,ye){var Ce=to(ye);return Ce&&(0===ye.pendingcb?(Ts(ke,ye),ye.finished=!0,ke.emit("finish")):Ts(ke,ye)),Ce}function ys(ke){var ye=this;this.next=null,this.entry=null,this.finish=function(Ce){var lt=ye.entry;for(ye.entry=null;lt;){var Bt=lt.callback;ke.pendingcb--,Bt(Ce),lt=lt.next}ke.corkedRequestsFree?ke.corkedRequestsFree.next=ye:ke.corkedRequestsFree=ye}}xr.prototype.read=function(ke){rr("read",ke),ke=parseInt(ke,10);var ye=this._readableState,Ce=ke;if(0!==ke&&(ye.emittedReadable=!1),0===ke&&ye.needReadable&&(ye.length>=ye.highWaterMark||ye.ended))return rr("read: emitReadable",ye.length,ye.ended),0===ye.length&&ye.ended?Dn(this):Nr(this),null;if(0===(ke=Cr(ke,ye))&&ye.ended)return 0===ye.length&&Dn(this),null;var Bt,lt=ye.needReadable;return rr("need readable",lt),(0===ye.length||ye.length-ke<ye.highWaterMark)&&rr("length less than watermark",lt=!0),ye.ended||ye.reading?rr("reading or ended",lt=!1):lt&&(rr("do read"),ye.reading=!0,ye.sync=!0,0===ye.length&&(ye.needReadable=!0),this._read(ye.highWaterMark),ye.sync=!1,ye.reading||(ke=Cr(Ce,ye))),null===(Bt=ke>0?qn(ke,ye):null)?(ye.needReadable=!0,ke=0):ye.length-=ke,0===ye.length&&(ye.ended||(ye.needReadable=!0),Ce!==ke&&ye.ended&&Dn(this)),null!==Bt&&this.emit("data",Bt),Bt},xr.prototype._read=function(ke){this.emit("error",new Error("not implemented"))},xr.prototype.pipe=function(ke,ye){var Ce=this,lt=this._readableState;switch(lt.pipesCount){case 0:lt.pipes=ke;break;case 1:lt.pipes=[lt.pipes,ke];break;default:lt.pipes.push(ke)}lt.pipesCount+=1,rr("pipe count=%d opts=%j",lt.pipesCount,ye);var pr=ye&&!1===ye.end?Si:hn;function Tr(_l){rr("onunpipe"),_l===Ce&&Si()}function hn(){rr("onend"),ke.end()}lt.endEmitted?St(pr):Ce.once("end",pr),ke.on("unpipe",Tr);var Bn=function dn(ke){return function(){var ye=ke._readableState;rr("pipeOnDrain",ye.awaitDrain),ye.awaitDrain&&ye.awaitDrain--,0===ye.awaitDrain&&ke.listeners("data").length&&(ye.flowing=!0,Fn(ke))}}(Ce);ke.on("drain",Bn);var bi=!1;function Si(){rr("cleanup"),ke.removeListener("close",Ds),ke.removeListener("finish",Us),ke.removeListener("drain",Bn),ke.removeListener("error",La),ke.removeListener("unpipe",Tr),Ce.removeListener("end",hn),Ce.removeListener("end",Si),Ce.removeListener("data",eo),bi=!0,lt.awaitDrain&&(!ke._writableState||ke._writableState.needDrain)&&Bn()}var Ui=!1;function eo(_l){rr("ondata"),Ui=!1,!1===ke.write(_l)&&!Ui&&((1===lt.pipesCount&&lt.pipes===ke||lt.pipesCount>1&&-1!==Wi(lt.pipes,ke))&&!bi&&(rr("false write response, pause",Ce._readableState.awaitDrain),Ce._readableState.awaitDrain++,Ui=!0),Ce.pause())}function La(_l){rr("onerror",_l),es(),ke.removeListener("error",La),0===function Rt(ke,ye){return ke.listeners(ye).length}(ke,"error")&&ke.emit("error",_l)}function Ds(){ke.removeListener("finish",Us),es()}function Us(){rr("onfinish"),ke.removeListener("close",Ds),es()}function es(){rr("unpipe"),Ce.unpipe(ke)}return Ce.on("data",eo),function Sr(ke,ye,Ce){if("function"==typeof ke.prependListener)return ke.prependListener(ye,Ce);ke._events&&ke._events[ye]?Array.isArray(ke._events[ye])?ke._events[ye].unshift(Ce):ke._events[ye]=[Ce,ke._events[ye]]:ke.on(ye,Ce)}(ke,"error",La),ke.once("close",Ds),ke.once("finish",Us),ke.emit("pipe",Ce),lt.flowing||(rr("pipe resume"),Ce.resume()),ke},xr.prototype.unpipe=function(ke){var ye=this._readableState;if(0===ye.pipesCount)return this;if(1===ye.pipesCount)return ke&&ke!==ye.pipes||(ke||(ke=ye.pipes),ye.pipes=null,ye.pipesCount=0,ye.flowing=!1,ke&&ke.emit("unpipe",this)),this;if(!ke){var Ce=ye.pipes,lt=ye.pipesCount;ye.pipes=null,ye.pipesCount=0,ye.flowing=!1;for(var Bt=0;Bt<lt;Bt++)Ce[Bt].emit("unpipe",this);return this}var pr=Wi(ye.pipes,ke);return-1===pr||(ye.pipes.splice(pr,1),ye.pipesCount-=1,1===ye.pipesCount&&(ye.pipes=ye.pipes[0]),ke.emit("unpipe",this)),this},xr.prototype.addListener=xr.prototype.on=function(ke,ye){var Ce=v.prototype.on.call(this,ke,ye);if("data"===ke)!1!==this._readableState.flowing&&this.resume();else if("readable"===ke){var lt=this._readableState;!lt.endEmitted&&!lt.readableListening&&(lt.readableListening=lt.needReadable=!0,lt.emittedReadable=!1,lt.reading?lt.length&&Nr(this):St(Sn,this))}return Ce},xr.prototype.resume=function(){var ke=this._readableState;return ke.flowing||(rr("resume"),ke.flowing=!0,function En(ke,ye){ye.resumeScheduled||(ye.resumeScheduled=!0,St(Ln,ke,ye))}(this,ke)),this},xr.prototype.pause=function(){return rr("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(rr("pause"),this._readableState.flowing=!1,this.emit("pause")),this},xr.prototype.wrap=function(ke){var ye=this._readableState,Ce=!1,lt=this;for(var Bt in ke.on("end",function(){if(rr("wrapped end"),ye.decoder&&!ye.ended){var Tr=ye.decoder.end();Tr&&Tr.length&&lt.push(Tr)}lt.push(null)}),ke.on("data",function(Tr){rr("wrapped data"),ye.decoder&&(Tr=ye.decoder.write(Tr)),ye.objectMode&&null==Tr||!(ye.objectMode||Tr&&Tr.length)||lt.push(Tr)||(Ce=!0,ke.pause())}),ke)void 0===this[Bt]&&"function"==typeof ke[Bt]&&(this[Bt]=function(Tr){return function(){return ke[Tr].apply(ke,arguments)}}(Bt));return function ai(ke,ye){for(var Ce=0,lt=ke.length;Ce<lt;Ce++)ye(ke[Ce],Ce)}(["error","close","destroy","pause","resume"],function(Tr){ke.on(Tr,lt.emit.bind(lt,Tr))}),lt._read=function(Tr){rr("wrapped _read",Tr),Ce&&(Ce=!1,ke.resume())},lt},xr._fromList=qn,Bi.WritableState=ao,Et(Bi,v),ao.prototype.getBuffer=function(){for(var ye=this.bufferedRequest,Ce=[];ye;)Ce.push(ye),ye=ye.next;return Ce},Bi.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Bi.prototype.write=function(ke,ye,Ce){var lt=this._writableState,Bt=!1;return"function"==typeof ye&&(Ce=ye,ye=null),N.isBuffer(ke)?ye="buffer":ye||(ye=lt.defaultEncoding),"function"!=typeof Ce&&(Ce=ka),lt.ended?function ra(ke,ye){var Ce=new Error("write after end");ke.emit("error",Ce),St(ye,Ce)}(this,Ce):function co(ke,ye,Ce,lt){var Bt=!0,pr=!1;return null===Ce?pr=new TypeError("May not write null values to stream"):!N.isBuffer(Ce)&&"string"!=typeof Ce&&void 0!==Ce&&!ye.objectMode&&(pr=new TypeError("Invalid non-string/buffer chunk")),pr&&(ke.emit("error",pr),St(lt,pr),Bt=!1),Bt}(this,lt,ke,Ce)&&(lt.pendingcb++,Bt=_o(this,lt,ke,ye,Ce)),Bt},Bi.prototype.cork=function(){this._writableState.corked++},Bi.prototype.uncork=function(){var ke=this._writableState;ke.corked&&(ke.corked--,!ke.writing&&!ke.corked&&!ke.finished&&!ke.bufferProcessing&&ke.bufferedRequest&&_a(this,ke))},Bi.prototype.setDefaultEncoding=function(ye){if("string"==typeof ye&&(ye=ye.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ye+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+ye);return this._writableState.defaultEncoding=ye,this},Bi.prototype._write=function(ke,ye,Ce){Ce(new Error("not implemented"))},Bi.prototype._writev=null,Bi.prototype.end=function(ke,ye,Ce){var lt=this._writableState;"function"==typeof ke?(Ce=ke,ke=null,ye=null):"function"==typeof ye&&(Ce=ye,ye=null),null!=ke&&this.write(ke,ye),lt.corked&&(lt.corked=1,this.uncork()),!lt.ending&&!lt.finished&&function na(ke,ye,Ce){ye.ending=!0,Ls(ke,ye),Ce&&(ye.finished?St(Ce):ke.once("finish",Ce)),ye.ended=!0,ke.writable=!1}(this,lt,Ce)},Et(ho,xr);for(var as=Object.keys(Bi.prototype),ks=0;ks<as.length;ks++){var As=as[ks];ho.prototype[As]||(ho.prototype[As]=Bi.prototype[As])}function ho(ke){if(!(this instanceof ho))return new ho(ke);xr.call(this,ke),Bi.call(this,ke),ke&&!1===ke.readable&&(this.readable=!1),ke&&!1===ke.writable&&(this.writable=!1),this.allowHalfOpen=!0,ke&&!1===ke.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",Fs)}function Fs(){this.allowHalfOpen||this._writableState.ended||St(jo,this)}function jo(ke){ke.end()}function Uo(ke){this.afterTransform=function(ye,Ce){return function ns(ke,ye,Ce){var lt=ke._transformState;lt.transforming=!1;var Bt=lt.writecb;if(!Bt)return ke.emit("error",new Error("no writecb in Transform class"));lt.writechunk=null,lt.writecb=null,null!=Ce&&ke.push(Ce),Bt(ye);var pr=ke._readableState;pr.reading=!1,(pr.needReadable||pr.length<pr.highWaterMark)&&ke._read(pr.highWaterMark)}(ke,ye,Ce)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Ka(ke){if(!(this instanceof Ka))return new Ka(ke);ho.call(this,ke),this._transformState=new Uo(this);var ye=this;this._readableState.needReadable=!0,this._readableState.sync=!1,ke&&("function"==typeof ke.transform&&(this._transform=ke.transform),"function"==typeof ke.flush&&(this._flush=ke.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(Ce){Zo(ye,Ce)}):Zo(ye)})}function Zo(ke,ye){if(ye)return ke.emit("error",ye);var lt=ke._transformState;if(ke._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(lt.transforming)throw new Error("Calling transform done when still transforming");return ke.push(null)}function Vo(ke){if(!(this instanceof Vo))return new Vo(ke);Ka.call(this,ke)}function wa(){v.call(this)}function So(ke){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ye){return typeof ye}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye})(ke)}function ro(ke,ye){if(!(ke instanceof ye))throw new TypeError("Cannot call a class as a function")}function Xo(ke,ye){for(var Ce=0;Ce<ye.length;Ce++){var lt=ye[Ce];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(ke,lt.key,lt)}}function os(ke,ye,Ce){return ye&&Xo(ke.prototype,ye),Ce&&Xo(ke,Ce),ke}function wo(ke,ye,Ce){return ye in ke?Object.defineProperty(ke,ye,{value:Ce,enumerable:!0,configurable:!0,writable:!0}):ke[ye]=Ce,ke}function ta(ke){for(var ye=1;ye<arguments.length;ye++){var Ce=null!=arguments[ye]?arguments[ye]:{},lt=Object.keys(Ce);"function"==typeof Object.getOwnPropertySymbols&&(lt=lt.concat(Object.getOwnPropertySymbols(Ce).filter(function(Bt){return Object.getOwnPropertyDescriptor(Ce,Bt).enumerable}))),lt.forEach(function(Bt){wo(ke,Bt,Ce[Bt])})}return ke}function qe(ke,ye){if("function"!=typeof ye&&null!==ye)throw new TypeError("Super expression must either be null or a function");ke.prototype=Object.create(ye&&ye.prototype,{constructor:{value:ke,writable:!0,configurable:!0}}),ye&&nt(ke,ye)}function Ze(ke){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(Ce){return Ce.__proto__||Object.getPrototypeOf(Ce)})(ke)}function nt(ke,ye){return(nt=Object.setPrototypeOf||function(lt,Bt){return lt.__proto__=Bt,lt})(ke,ye)}function xt(ke,ye){return!ye||"object"!=typeof ye&&"function"!=typeof ye?function ht(ke){if(void 0===ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke}(ke):ye}function yt(ke){return function or(ke){if(Array.isArray(ke))return ke}(ke)||er(ke)||function kr(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ot(ke){return function ir(ke){if(Array.isArray(ke)){for(var ye=0,Ce=new Array(ke.length);ye<ke.length;ye++)Ce[ye]=ke[ye];return Ce}}(ke)||er(ke)||function dr(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function er(ke){if(Symbol.iterator in Object(ke)||"[object Arguments]"===Object.prototype.toString.call(ke))return Array.from(ke)}Et(Ka,ho),Ka.prototype.push=function(ke,ye){return this._transformState.needTransform=!1,ho.prototype.push.call(this,ke,ye)},Ka.prototype._transform=function(ke,ye,Ce){throw new Error("Not implemented")},Ka.prototype._write=function(ke,ye,Ce){var lt=this._transformState;if(lt.writecb=Ce,lt.writechunk=ke,lt.writeencoding=ye,!lt.transforming){var Bt=this._readableState;(lt.needTransform||Bt.needReadable||Bt.length<Bt.highWaterMark)&&this._read(Bt.highWaterMark)}},Ka.prototype._read=function(ke){var ye=this._transformState;null!==ye.writechunk&&ye.writecb&&!ye.transforming?(ye.transforming=!0,this._transform(ye.writechunk,ye.writeencoding,ye.afterTransform)):ye.needTransform=!0},Et(Vo,Ka),Vo.prototype._transform=function(ke,ye,Ce){Ce(null,ke)},Et(wa,v),wa.Readable=xr,wa.Writable=Bi,wa.Duplex=ho,wa.Transform=Ka,wa.PassThrough=Vo,wa.Stream=wa,wa.prototype.pipe=function(ke,ye){var Ce=this;function lt(Si){ke.writable&&!1===ke.write(Si)&&Ce.pause&&Ce.pause()}function Bt(){Ce.readable&&Ce.resume&&Ce.resume()}Ce.on("data",lt),ke.on("drain",Bt),!ke._isStdio&&(!ye||!1!==ye.end)&&(Ce.on("end",Tr),Ce.on("close",hn));var pr=!1;function Tr(){pr||(pr=!0,ke.end())}function hn(){pr||(pr=!0,"function"==typeof ke.destroy&&ke.destroy())}function Bn(Si){if(bi(),0===v.listenerCount(this,"error"))throw Si}function bi(){Ce.removeListener("data",lt),ke.removeListener("drain",Bt),Ce.removeListener("end",Tr),Ce.removeListener("close",hn),Ce.removeListener("error",Bn),ke.removeListener("error",Bn),Ce.removeListener("end",bi),Ce.removeListener("close",bi),ke.removeListener("close",bi)}return Ce.on("error",Bn),ke.on("error",Bn),Ce.on("end",bi),Ce.on("close",bi),ke.on("close",bi),ke.emit("pipe",Ce),ke};var Ea_EOL="\n",ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Aa="__lodash_hash_undefined__",po="[object Function]",go="[object GeneratorFunction]",vo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zi=/^\w*$/,vt=/^\./,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zt=/\\(\\)?/g,yr=/^\[object .+?Constructor\]$/,Xr="object"==typeof self&&self&&self.Object===Object&&self,ln="object"==typeof ca&&ca&&ca.Object===Object&&ca||Xr||Function("return this")();var ke,An=Array.prototype,In=Function.prototype,xn=Object.prototype,Pn=ln["__core-js_shared__"],Wn=(ke=/[^.]+$/.exec(Pn&&Pn.keys&&Pn.keys.IE_PROTO||""))?"Symbol(src)_1."+ke:"",$n=In.toString,fi=xn.hasOwnProperty,un=xn.toString,hi=RegExp("^"+$n.call(fi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vn=ln.Symbol,Xn=An.splice,ui=Bs(ln,"Map"),Ci=Bs(Object,"create"),Gi=Vn?Vn.prototype:void 0,Rn=Gi?Gi.toString:void 0;function Hi(ke){var ye=-1,Ce=ke?ke.length:0;for(this.clear();++ye<Ce;){var lt=ke[ye];this.set(lt[0],lt[1])}}function oi(ke){var ye=-1,Ce=ke?ke.length:0;for(this.clear();++ye<Ce;){var lt=ke[ye];this.set(lt[0],lt[1])}}function ki(ke){var ye=-1,Ce=ke?ke.length:0;for(this.clear();++ye<Ce;){var lt=ke[ye];this.set(lt[0],lt[1])}}function oa(ke,ye){for(var Ce=ke.length;Ce--;)if(Hs(ke[Ce][0],ye))return Ce;return-1}function To(ke,ye){for(var Ce=0,lt=(ye=function qa(ke,ye){if(ls(ke))return!1;var Ce=typeof ke;return!("number"!=Ce&&"symbol"!=Ce&&"boolean"!=Ce&&null!=ke&&!Ms(ke))||Zi.test(ke)||!vo.test(ke)||null!=ye&&ke in Object(ye)}(ye,ke)?[ye]:function xs(ke){return ls(ke)?ke:ps(ke)}(ye)).length;null!=ke&&Ce<lt;)ke=ke[yi(ye[Ce++])];return Ce&&Ce==lt?ke:void 0}function pa(ke){return!(!$o(ke)||function Ga(ke){return!!Wn&&Wn in ke}(ke))&&(function Ho(ke){var ye=$o(ke)?un.call(ke):"";return ye==po||ye==go}(ke)||function vn(ke){var ye=!1;if(null!=ke&&"function"!=typeof ke.toString)try{ye=!!(ke+"")}catch{}return ye}(ke)?hi:yr).test(function Pi(ke){if(null!=ke){try{return $n.call(ke)}catch{}try{return ke+""}catch{}}return""}(ke))}function Ko(ke,ye){var Ce=ke.__data__;return function Vs(ke){var ye=typeof ke;return"string"==ye||"number"==ye||"symbol"==ye||"boolean"==ye?"__proto__"!==ke:null===ke}(ye)?Ce["string"==typeof ye?"string":"hash"]:Ce.map}function Bs(ke,ye){var Ce=function bn(ke,ye){return ke?.[ye]}(ke,ye);return pa(Ce)?Ce:void 0}Hi.prototype.clear=function qi(){this.__data__=Ci?Ci(null):{}},Hi.prototype.delete=function Ti(ke){return this.has(ke)&&delete this.__data__[ke]},Hi.prototype.get=function Xi(ke){var ye=this.__data__;if(Ci){var Ce=ye[ke];return Ce===Aa?void 0:Ce}return fi.call(ye,ke)?ye[ke]:void 0},Hi.prototype.has=function Ni(ke){var ye=this.__data__;return Ci?void 0!==ye[ke]:fi.call(ye,ke)},Hi.prototype.set=function fa(ke,ye){return this.__data__[ke]=Ci&&void 0===ye?Aa:ye,this},oi.prototype.clear=function ia(){this.__data__=[]},oi.prototype.delete=function $a(ke){var ye=this.__data__,Ce=oa(ye,ke);return!(Ce<0||(Ce==ye.length-1?ye.pop():Xn.call(ye,Ce,1),0))},oi.prototype.get=function ss(ke){var ye=this.__data__,Ce=oa(ye,ke);return Ce<0?void 0:ye[Ce][1]},oi.prototype.has=function Jo(ke){return oa(this.__data__,ke)>-1},oi.prototype.set=function Eo(ke,ye){var Ce=this.__data__,lt=oa(Ce,ke);return lt<0?Ce.push([ke,ye]):Ce[lt][1]=ye,this},ki.prototype.clear=function Ma(){this.__data__={hash:new Hi,map:new(ui||oi),string:new Hi}},ki.prototype.delete=function Co(ke){return Ko(this,ke).delete(ke)},ki.prototype.get=function aa(ke){return Ko(this,ke).get(ke)},ki.prototype.has=function za(ke){return Ko(this,ke).has(ke)},ki.prototype.set=function no(ke,ye){return Ko(this,ke).set(ke,ye),this};var ps=Ps(function(ke){ke=function sa(ke){return null==ke?"":function yo(ke){if("string"==typeof ke)return ke;if(Ms(ke))return Rn?Rn.call(ke):"";var ye=ke+"";return"0"==ye&&1/ke==-1/0?"-0":ye}(ke)}(ke);var ye=[];return vt.test(ke)&&ye.push(""),ke.replace(jt,function(Ce,lt,Bt,pr){ye.push(Bt?pr.replace(Zt,"$1"):lt||Ce)}),ye});function yi(ke){if("string"==typeof ke||Ms(ke))return ke;var ye=ke+"";return"0"==ye&&1/ke==-Infinity?"-0":ye}function Ps(ke,ye){if("function"!=typeof ke||ye&&"function"!=typeof ye)throw new TypeError("Expected a function");var Ce=function(){var lt=arguments,Bt=ye?ye.apply(this,lt):lt[0],pr=Ce.cache;if(pr.has(Bt))return pr.get(Bt);var Tr=ke.apply(this,lt);return Ce.cache=pr.set(Bt,Tr),Tr};return Ce.cache=new(Ps.Cache||ki),Ce}function Hs(ke,ye){return ke===ye||ke!=ke&&ye!=ye}Ps.Cache=ki;var ls=Array.isArray;function $o(ke){var ye=typeof ke;return!!ke&&("object"==ye||"function"==ye)}function Ms(ke){return"symbol"==typeof ke||function nl(ke){return!!ke&&"object"==typeof ke}(ke)&&"[object Symbol]"==un.call(ke)}var ds=function da(ke,ye,Ce){var lt=null==ke?void 0:To(ke,ye);return void 0===lt?Ce:lt};var qo_getProp=function bs(ke,ye,Ce){return void 0===ke[ye]?Ce:ke[ye]},qo_setProp=function Ra(ke,ye,Ce){var lt=Array.isArray(ye)?ye:ye.split("."),Bt=yt(lt),pr=Bt[0],Tr=Bt.slice(1);return ta({},ke,wo({},pr,lt.length>1?Ra(ke[pr]||{},Tr,Ce):Ce))},qo_unsetProp=function _s(ke,ye){var Ce=Array.isArray(ye)?ye:ye.split("."),lt=yt(Ce),Bt=lt[0],pr=lt.slice(1);return"object"!==So(ke[Bt])?ke:1===Ce.length?Object.keys(ke).filter(function(Tr){return Tr!==Bt}).reduce(function(Tr,hn){return Object.assign(Tr,wo({},hn,ke[hn]))},{}):Object.keys(ke).reduce(function(Tr,hn){return ta({},Tr,wo({},hn,hn!==Bt?ke[hn]:_s(ke[Bt],pr)))},{})},qo_fastJoin=function Os(ke,ye){var Ce=!0;return ke.reduce(function(lt,Bt){return null==Bt&&(Bt=""),Ce?(Ce=!1,"".concat(Bt)):"".concat(lt).concat(ye).concat(Bt)},"")},qo_flattenReducer=function Ns(ke,ye){try{return ke.push.apply(ke,Ot(ye)),ke}catch{return ke.concat(ye)}},gs=qo_getProp,Ws=qo_fastJoin,ul=qo_flattenReducer,qs=function(){function ke(ye){ro(this,ke),this.opts=this.preprocessOpts(ye)}return os(ke,[{key:"preprocessOpts",value:function(Ce){var lt=Object.assign({},Ce);return lt.transforms=Array.isArray(lt.transforms)?lt.transforms:lt.transforms?[lt.transforms]:[],lt.delimiter=lt.delimiter||",",lt.eol=lt.eol||Ea_EOL,lt.quote="string"==typeof lt.quote?lt.quote:'"',lt.escapedQuote="string"==typeof lt.escapedQuote?lt.escapedQuote:"".concat(lt.quote).concat(lt.quote),lt.header=!1!==lt.header,lt.includeEmptyRows=lt.includeEmptyRows||!1,lt.withBOM=lt.withBOM||!1,lt}},{key:"preprocessFieldsInfo",value:function(Ce){var lt=this;return Ce.map(function(Bt){if("string"==typeof Bt)return{label:Bt,value:Bt.includes(".")||Bt.includes("[")?function(Bn){return ds(Bn,Bt,lt.opts.defaultValue)}:function(Bn){return gs(Bn,Bt,lt.opts.defaultValue)}};if("object"===So(Bt)){var pr="default"in Bt?Bt.default:lt.opts.defaultValue;if("string"==typeof Bt.value)return{label:Bt.label||Bt.value,value:Bt.value.includes(".")||Bt.value.includes("[")?function(Bn){return ds(Bn,Bt.value,pr)}:function(Bn){return gs(Bn,Bt.value,pr)}};if("function"==typeof Bt.value){var Tr=Bt.label||Bt.value.name||"",hn={label:Tr,default:pr};return{label:Tr,value:function(bi){return Bt.value(bi,hn)??pr}}}}throw new Error("Invalid field info option. "+JSON.stringify(Bt))})}},{key:"getHeader",value:function(){var Ce=this;return Ws(this.opts.fields.map(function(lt){return Ce.processValue(lt.label)}),this.opts.delimiter)}},{key:"preprocessRow",value:function(Ce){return this.opts.transforms.reduce(function(lt,Bt){return lt.map(function(pr){return Bt(pr)}).reduce(ul,[])},[Ce])}},{key:"processRow",value:function(Ce){var lt=this;if(Ce){var Bt=this.opts.fields.map(function(pr){return lt.processCell(Ce,pr)});if(this.opts.includeEmptyRows||!Bt.every(function(pr){return void 0===pr}))return Ws(Bt,this.opts.delimiter)}}},{key:"processCell",value:function(Ce,lt){return this.processValue(lt.value(Ce))}},{key:"processValue",value:function(Ce){if(null!=Ce){var lt=So(Ce);if("boolean"!==lt&&"number"!==lt&&"string"!==lt){if(void 0===(Ce=JSON.stringify(Ce)))return;'"'===Ce[0]&&(Ce=Ce.replace(/^"(.+)"$/,"$1"))}return"string"==typeof Ce&&(this.opts.excelStrings?(Ce.includes(this.opts.quote)&&(Ce=Ce.replace(new RegExp(this.opts.quote,"g"),"".concat(this.opts.escapedQuote).concat(this.opts.escapedQuote))),Ce='"=""'.concat(Ce,'"""')):(Ce.includes(this.opts.quote)&&(Ce=Ce.replace(new RegExp(this.opts.quote,"g"),this.opts.escapedQuote)),Ce="".concat(this.opts.quote).concat(Ce).concat(this.opts.quote))),Ce}}}]),ke}(),js=qo_fastJoin,xo=qo_flattenReducer,il=function(ke){function ye(Ce){var lt;return ro(this,ye),(lt=xt(this,Ze(ye).call(this,Ce))).opts.fields&&(lt.opts.fields=lt.preprocessFieldsInfo(lt.opts.fields)),lt}return qe(ye,ke),os(ye,[{key:"parse",value:function(lt){var Bt=this.preprocessData(lt);this.opts.fields||(this.opts.fields=Bt.reduce(function(Bn,bi){return Object.keys(bi).forEach(function(Si){Bn.includes(Si)||Bn.push(Si)}),Bn},[]),this.opts.fields=this.preprocessFieldsInfo(this.opts.fields));var pr=this.opts.header?this.getHeader():"",Tr=this.processData(Bt);return(this.opts.withBOM?"\ufeff":"")+pr+(pr&&Tr?this.opts.eol:"")+Tr}},{key:"preprocessData",value:function(lt){var Bt=this,pr=Array.isArray(lt)?lt:[lt];if(!this.opts.fields&&(0===pr.length||"object"!==So(pr[0])))throw new Error('Data should not be empty or the "fields" option should be included');return 0===this.opts.transforms.length?pr:pr.map(function(Tr){return Bt.preprocessRow(Tr)}).reduce(xo,[])}},{key:"processData",value:function(lt){var Bt=this;return js(lt.map(function(pr){return Bt.processRow(pr)}).filter(function(pr){return pr}),this.opts.eol)}}]),ye}(qs),ce={},L=ce.LEFT_BRACE=1,R=ce.RIGHT_BRACE=2,F=ce.LEFT_BRACKET=3,Y=ce.RIGHT_BRACKET=4,ae=ce.COLON=5,fe=ce.COMMA=6,ve=ce.TRUE=7,Ae=ce.FALSE=8,Pe=ce.NULL=9,Ge=ce.STRING=10,Qe=ce.NUMBER=11,st=ce.START=17,Mt=ce.STOP=18,It=ce.TRUE1=33,Ct=ce.TRUE2=34,Pt=ce.TRUE3=35,kt=ce.FALSE1=49,Vt=ce.FALSE2=50,Nt=ce.FALSE3=51,Yt=ce.FALSE4=52,fr=ce.NULL1=65,Mr=ce.NULL2=66,jr=ce.NULL3=67,Fr=ce.NUMBER1=81,fn=ce.NUMBER3=83,on=ce.STRING1=97,wn=ce.STRING2=98,yn=ce.STRING3=99,Jn=ce.STRING4=100,ii=ce.STRING5=101,xi=ce.STRING6=102,en=ce.VALUE=113,On=ce.KEY=114,ti=ce.OBJECT=129,Qn=ce.ARRAY=130,pi="\\".charCodeAt(0),wi="/".charCodeAt(0),ji="\b".charCodeAt(0),li="\f".charCodeAt(0),Oi="\n".charCodeAt(0),Li="\r".charCodeAt(0),Yi="\t".charCodeAt(0),Ei=65536;function Fi(){this.tState=st,this.value=void 0,this.string=void 0,this.stringBuffer=N.alloc?N.alloc(Ei):new N(Ei),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=en,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new N(2),3:new N(3),4:new N(4)},this.offset=-1}Fi.toknam=function(ke){for(var ye=Object.keys(ce),Ce=0,lt=ye.length;Ce<lt;Ce++){var Bt=ye[Ce];if(ce[Bt]===ke)return Bt}return ke&&"0x"+ke.toString(16)};var Vi=Fi.prototype;Vi.onError=function(ke){throw ke},Vi.charError=function(ke,ye){this.tState=Mt,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(ke[ye]))+" at position "+ye+" in state "+Fi.toknam(this.tState)))},Vi.appendStringChar=function(ke){this.stringBufferOffset>=Ei&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=ke},Vi.appendStringBuf=function(ke,ye,Ce){var lt=ke.length;"number"==typeof ye&&(lt="number"==typeof Ce?Ce<0?ke.length-ye+Ce:Ce-ye:ke.length-ye),lt<0&&(lt=0),this.stringBufferOffset+lt>Ei&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),ke.copy(this.stringBuffer,this.stringBufferOffset,ye,Ce),this.stringBufferOffset+=lt},Vi.write=function(ke){"string"==typeof ke&&(ke=new N(ke));for(var ye,Ce=0,lt=ke.length;Ce<lt;Ce++)if(this.tState===st){if(ye=ke[Ce],this.offset++,123===ye)this.onToken(L,"{");else if(125===ye)this.onToken(R,"}");else if(91===ye)this.onToken(F,"[");else if(93===ye)this.onToken(Y,"]");else if(58===ye)this.onToken(ae,":");else if(44===ye)this.onToken(fe,",");else if(116===ye)this.tState=It;else if(102===ye)this.tState=kt;else if(110===ye)this.tState=fr;else if(34===ye)this.string="",this.stringBufferOffset=0,this.tState=on;else if(45===ye)this.string="-",this.tState=Fr;else if(ye>=48&&ye<64)this.string=String.fromCharCode(ye),this.tState=fn;else if(32!==ye&&9!==ye&&10!==ye&&13!==ye)return this.charError(ke,Ce)}else if(this.tState===on)if(ye=ke[Ce],this.bytes_remaining>0){for(var Bt=0;Bt<this.bytes_remaining;Bt++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+Bt]=ke[Bt];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,Ce=Ce+Bt-1}else if(0===this.bytes_remaining&&ye>=128){if(ye<=193||ye>244)return this.onError(new Error("Invalid UTF-8 character at position "+Ce+" in state "+Fi.toknam(this.tState)));if(ye>=194&&ye<=223&&(this.bytes_in_sequence=2),ye>=224&&ye<=239&&(this.bytes_in_sequence=3),ye>=240&&ye<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+Ce>ke.length){for(var pr=0;pr<=ke.length-1-Ce;pr++)this.temp_buffs[this.bytes_in_sequence][pr]=ke[Ce+pr];this.bytes_remaining=Ce+this.bytes_in_sequence-ke.length,Ce=ke.length-1}else this.appendStringBuf(ke,Ce,Ce+this.bytes_in_sequence),Ce=Ce+this.bytes_in_sequence-1}else if(34===ye)this.tState=st,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(Ge,this.string),this.offset+=N.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===ye)this.tState=wn;else{if(!(ye>=32))return this.charError(ke,Ce);this.appendStringChar(ye)}else if(this.tState===wn)if(34===(ye=ke[Ce]))this.appendStringChar(ye),this.tState=on;else if(92===ye)this.appendStringChar(pi),this.tState=on;else if(47===ye)this.appendStringChar(wi),this.tState=on;else if(98===ye)this.appendStringChar(ji),this.tState=on;else if(102===ye)this.appendStringChar(li),this.tState=on;else if(110===ye)this.appendStringChar(Oi),this.tState=on;else if(114===ye)this.appendStringChar(Li),this.tState=on;else if(116===ye)this.appendStringChar(Yi),this.tState=on;else{if(117!==ye)return this.charError(ke,Ce);this.unicode="",this.tState=yn}else if(this.tState===yn||this.tState===Jn||this.tState===ii||this.tState===xi){if(!((ye=ke[Ce])>=48&&ye<64||ye>64&&ye<=70||ye>96&&ye<=102))return this.charError(ke,Ce);if(this.unicode+=String.fromCharCode(ye),this.tState++===xi){var Tr=parseInt(this.unicode,16);this.unicode=void 0,void 0!==this.highSurrogate&&Tr>=56320&&Tr<57344?(this.appendStringBuf(new N(String.fromCharCode(this.highSurrogate,Tr))),this.highSurrogate=void 0):void 0===this.highSurrogate&&Tr>=55296&&Tr<56320?this.highSurrogate=Tr:(void 0!==this.highSurrogate&&(this.appendStringBuf(new N(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new N(String.fromCharCode(Tr)))),this.tState=on}}else if(this.tState===Fr||this.tState===fn)switch(ye=ke[Ce],ye){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(ye),this.tState=fn;break;default:this.tState=st;var hn=Number(this.string);if(isNaN(hn))return this.charError(ke,Ce);this.string.match(/[0-9]+/)==this.string&&hn.toString()!=this.string?this.onToken(Ge,this.string):this.onToken(Qe,hn),this.offset+=this.string.length-1,this.string=void 0,Ce--}else if(this.tState===It){if(114!==ke[Ce])return this.charError(ke,Ce);this.tState=Ct}else if(this.tState===Ct){if(117!==ke[Ce])return this.charError(ke,Ce);this.tState=Pt}else if(this.tState===Pt){if(101!==ke[Ce])return this.charError(ke,Ce);this.tState=st,this.onToken(ve,!0),this.offset+=3}else if(this.tState===kt){if(97!==ke[Ce])return this.charError(ke,Ce);this.tState=Vt}else if(this.tState===Vt){if(108!==ke[Ce])return this.charError(ke,Ce);this.tState=Nt}else if(this.tState===Nt){if(115!==ke[Ce])return this.charError(ke,Ce);this.tState=Yt}else if(this.tState===Yt){if(101!==ke[Ce])return this.charError(ke,Ce);this.tState=st,this.onToken(Ae,!1),this.offset+=4}else if(this.tState===fr){if(117!==ke[Ce])return this.charError(ke,Ce);this.tState=Mr}else if(this.tState===Mr){if(108!==ke[Ce])return this.charError(ke,Ce);this.tState=jr}else if(this.tState===jr){if(108!==ke[Ce])return this.charError(ke,Ce);this.tState=st,this.onToken(Pe,null),this.offset+=3}},Vi.onToken=function(ke,ye){},Vi.parseError=function(ke,ye){this.tState=Mt,this.onError(new Error("Unexpected "+Fi.toknam(ke)+(ye?"("+JSON.stringify(ye)+")":"")+" in state "+Fi.toknam(this.state)))},Vi.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},Vi.pop=function(){var ke=this.value,ye=this.stack.pop();this.value=ye.value,this.key=ye.key,this.mode=ye.mode,this.emit(ke),this.mode||(this.state=en)},Vi.emit=function(ke){this.mode&&(this.state=fe),this.onValue(ke)},Vi.onValue=function(ke){},Vi.onToken=function(ke,ye){if(this.state===en)if(ke===Ge||ke===Qe||ke===ve||ke===Ae||ke===Pe)this.value&&(this.value[this.key]=ye),this.emit(ye);else if(ke===L)this.push(),this.value=this.value?this.value[this.key]={}:{},this.key=void 0,this.state=On,this.mode=ti;else if(ke===F)this.push(),this.value=this.value?this.value[this.key]=[]:[],this.key=0,this.mode=Qn,this.state=en;else if(ke===R){if(this.mode!==ti)return this.parseError(ke,ye);this.pop()}else{if(ke!==Y)return this.parseError(ke,ye);if(this.mode!==Qn)return this.parseError(ke,ye);this.pop()}else if(this.state===On)if(ke===Ge)this.key=ye,this.state=ae;else{if(ke!==R)return this.parseError(ke,ye);this.pop()}else if(this.state===ae){if(ke!==ae)return this.parseError(ke,ye);this.state=en}else{if(this.state!==fe)return this.parseError(ke,ye);if(ke===fe)this.mode===Qn?(this.key++,this.state=en):this.mode===ti&&(this.state=On);else{if(!(ke===Y&&this.mode===Qn||ke===R&&this.mode===ti))return this.parseError(ke,ye);this.pop()}}},Fi.C=ce;var ya=Fi,ba=function(ke){function ye(Ce,lt){var Bt;return ro(this,ye),Bt=xt(this,Ze(ye).call(this,lt)),Object.getOwnPropertyNames(qs.prototype).forEach(function(pr){return Bt[pr]=qs.prototype[pr]}),Bt.opts=Bt.preprocessOpts(Ce),Bt._data="",Bt._hasWritten=!1,Bt._readableState.objectMode?Bt.initObjectModeParse():Bt.opts.ndjson?Bt.initNDJSONParse():Bt.initJSONParser(),Bt.opts.withBOM&&Bt.push("\ufeff"),Bt.opts.fields&&(Bt.opts.fields=Bt.preprocessFieldsInfo(Bt.opts.fields),Bt.pushHeader()),Bt}return qe(ye,ke),os(ye,[{key:"initObjectModeParse",value:function(){var lt=this;this.parser={write:function(pr){lt.pushLine(pr)},getPendingData:function(){}}}},{key:"initNDJSONParse",value:function(){var lt=this;this.parser={_data:"",write:function(pr){this._data+=pr.toString();var Tr=this._data.split("\n").map(function(Bn){return Bn.trim()}).filter(function(Bn){return""!==Bn}),hn=!1;Tr.forEach(function(Bn,bi){try{lt.pushLine(JSON.parse(Bn))}catch(Si){bi===Tr.length-1?hn=!0:(Si.message="Invalid JSON (".concat(Bn,")"),lt.emit("error",Si))}}),this._data=hn?this._data.slice(this._data.lastIndexOf("\n")):""},getPendingData:function(){return this._data}}}},{key:"initJSONParser",value:function(){var lt=this;this.parser=new ya,this.parser.onValue=function(Bt){this.stack.length===this.depthToEmit&&lt.pushLine(Bt)},this.parser._onToken=this.parser.onToken,this.parser.onToken=function(Bt,pr){lt.parser._onToken(Bt,pr),0===this.stack.length&&!lt.opts.fields&&this.mode!==ya.C.ARRAY&&this.mode!==ya.C.OBJECT&&this.onError(new Error('Data should not be empty or the "fields" option should be included')),1===this.stack.length&&(void 0===this.depthToEmit&&(this.depthToEmit=this.mode===ya.C.ARRAY?1:0),0!==this.depthToEmit&&1===this.stack.length&&(this.value=void 0))},this.parser.getPendingData=function(){return this.value},this.parser.onError=function(Bt){Bt.message.includes("Unexpected")&&(Bt.message="Invalid JSON (".concat(Bt.message,")")),lt.emit("error",Bt)}}},{key:"_transform",value:function(lt,Bt,pr){this.parser.write(lt),pr()}},{key:"_flush",value:function(lt){this.parser.getPendingData()&&lt(new Error("Invalid data received from stdin",this.parser.getPendingData())),lt()}},{key:"pushHeader",value:function(){if(this.opts.header){var lt=this.getHeader();this.emit("header",lt),this.push(lt),this._hasWritten=!0}}},{key:"pushLine",value:function(lt){var Bt=this,pr=this.preprocessRow(lt);this._hasWritten||(this.opts.fields=this.opts.fields||this.preprocessFieldsInfo(Object.keys(pr[0])),this.pushHeader()),pr.forEach(function(Tr){var hn=Bt.processRow(Tr,Bt.opts);void 0!==hn&&(Bt.emit("line",hn),Bt.push(Bt._hasWritten?Bt.opts.eol+hn:hn),Bt._hasWritten=!0)})}}]),ye}(wa.Transform),Fa=wa.Transform,Sa=qo_fastJoin,Lo=function(){function ke(ye,Ce){ro(this,ke),this.input=new Fa(Ce),this.input._read=function(){},this.transform=new ba(ye,Ce),this.processor=this.input.pipe(this.transform)}return os(ke,[{key:"fromInput",value:function(Ce){if(this._input)throw new Error("Async parser already has an input.");return this._input=Ce,this.input=this._input.pipe(this.processor),this}},{key:"throughTransform",value:function(Ce){if(this._output)throw new Error("Can't add transforms once an output has been added.");return this.processor=this.processor.pipe(Ce),this}},{key:"toOutput",value:function(Ce){if(this._output)throw new Error("Async parser already has an output.");return this._output=Ce,this.processor=this.processor.pipe(Ce),this}},{key:"promise",value:function(){var Ce=this,lt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise(function(Bt,pr){if(lt){var Tr=[];Ce.processor.on("data",function(hn){return Tr.push(hn.toString())}).on("finish",function(){return Bt(Sa(Tr,""))}).on("error",function(hn){return pr(hn)})}else Ce.processor.on("finish",function(){return Bt()}).on("error",function(hn){return pr(hn)})})}}]),ke}(),Qa=Lo;var Gs=qo_setProp,hl=qo_unsetProp,Zs=qo_flattenReducer;function Ys(ke,ye){return Object.keys(ke).reduce(function(Ce,lt){var Bt=ye?"".concat(ye,".").concat(lt):lt,pr=ke[lt];return"object"===So(pr)&&null!==pr&&!Array.isArray(pr)&&"[object Function]"!==Object.prototype.toString.call(pr.toJSON)&&Object.keys(pr).length?Ce=Ce.concat(Ys(pr,Bt)):Array.isArray(pr)&&(Ce.push(Bt),Ce=Ce.concat(pr.map(function(Tr){return Ys(Tr,Bt)}).reduce(Zs,[]).filter(function(Tr,hn,Bn){return Bn.indexOf(Tr)!==hn}))),Ce},[])}var al=wa.Readable,cs=il,Ca=ba,Fo=function(ye,Ce){return new il(Ce).parse(ye)},Bo=function(ye,Ce,lt){try{ye instanceof al||(lt=Object.assign({},lt,{objectMode:!0}));var Bt=new Qa(Ce,lt),pr=Bt.promise();return Array.isArray(ye)?(ye.forEach(function(Tr){return Bt.input.push(Tr)}),Bt.input.push(null)):ye instanceof al?Bt.fromInput(ye):(Bt.input.push(ye),Bt.input.push(null)),pr}catch(Tr){return Promise.reject(Tr)}},pl={flatten:function Qo(){var ke=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ye=ke.objects,Ce=void 0===ye||ye,lt=ke.arrays,Bt=void 0!==lt&&lt,pr=ke.separator,Tr=void 0===pr?".":pr;function hn(Bn,bi,Si){return Object.keys(Bn).forEach(function(Ui){var eo=Si?"".concat(Si).concat(Tr).concat(Ui):Ui,La=Bn[Ui];Ce&&"object"===So(La)&&null!==La&&!Array.isArray(La)&&"[object Function]"!==Object.prototype.toString.call(La.toJSON)&&Object.keys(La).length||Bt&&Array.isArray(La)?hn(La,bi,eo):bi[eo]=La}),bi}return function(Bn){return hn(Bn,{})}},unwind:function Po(){var ke=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ye=ke.paths,Ce=void 0===ye?void 0:ye,lt=ke.blankOut,Bt=void 0!==lt&&lt;function pr(Tr,hn){return Tr.map(function(Bn){var bi=ds(Bn,hn);return Array.isArray(bi)?bi.length?bi.map(function(Si,Ui){return Gs(Bt&&Ui>0?{}:Bn,hn,Si)}):hl(Bn,hn):Bn}).reduce(Zs,[])}return Ce=Array.isArray(Ce)?Ce:Ce?[Ce]:void 0,function(Tr){return(Ce||Ys(Tr)).reduce(pr,[Tr])}}},nc={Parser:cs,AsyncParser:Qa,Transform:Ca,parse:Fo,parseAsync:Bo,transforms:pl};Q.AsyncParser=Qa,Q.Parser=cs,Q.Transform=Ca,Q.default=nc,Q.parse=Fo,Q.parseAsync=Bo,Q.transforms=pl,Object.defineProperty(Q,"__esModule",{value:!0})}(y)},5650:bl=>{bl.exports=function y(Q,K,m){function v(e,n){if(!K[e]){if(!Q[e]){if(b)return b(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var t=K[e]={exports:{}};Q[e][0].call(t.exports,function(d){return v(Q[e][1][d]||d)},t,t.exports,y,Q,K,m)}return K[e].exports}for(var b=void 0,h=0;h<m.length;h++)v(m[h]);return v}({1:[function(y,Q,K){"use strict";var m=y("./utils"),v=y("./support"),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";K.encode=function(h){for(var e,n,r,t,d,a,i=[],s=0,c=h.length,l=c,p="string"!==m.getTypeOf(h);s<h.length;)l=c-s,r=p?(e=h[s++],n=s<c?h[s++]:0,s<c?h[s++]:0):(e=h.charCodeAt(s++),n=s<c?h.charCodeAt(s++):0,s<c?h.charCodeAt(s++):0),t=(3&e)<<4|n>>4,d=1<l?(15&n)<<2|r>>6:64,a=2<l?63&r:64,i.push(b.charAt(e>>2)+b.charAt(t)+b.charAt(d)+b.charAt(a));return i.join("")},K.decode=function(h){var e,n,r,o,t,d,a=0,i=0,s="data:";if(h.substr(0,s.length)===s)throw new Error("Invalid base64 input, it looks like a data url.");var c,l=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===b.charAt(64)&&l--,h.charAt(h.length-2)===b.charAt(64)&&l--,l%1!=0)throw new Error("Invalid base64 input, bad content length.");for(c=v.uint8array?new Uint8Array(0|l):new Array(0|l);a<h.length;)e=b.indexOf(h.charAt(a++))<<2|(o=b.indexOf(h.charAt(a++)))>>4,n=(15&o)<<4|(t=b.indexOf(h.charAt(a++)))>>2,r=(3&t)<<6|(d=b.indexOf(h.charAt(a++))),c[i++]=e,64!==t&&(c[i++]=n),64!==d&&(c[i++]=r);return c}},{"./support":30,"./utils":32}],2:[function(y,Q,K){"use strict";var m=y("./external"),v=y("./stream/DataWorker"),b=y("./stream/Crc32Probe"),h=y("./stream/DataLengthProbe");function e(n,r,o,t,d){this.compressedSize=n,this.uncompressedSize=r,this.crc32=o,this.compression=t,this.compressedContent=d}e.prototype={getContentWorker:function(){var n=new v(m.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),r=this;return n.on("end",function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),n},getCompressedWorker:function(){return new v(m.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},e.createWorkerFrom=function(n,r,o){return n.pipe(new b).pipe(new h("uncompressedSize")).pipe(r.compressWorker(o)).pipe(new h("compressedSize")).withStreamInfo("compression",r)},Q.exports=e},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(y,Q,K){"use strict";var m=y("./stream/GenericWorker");K.STORE={magic:"\0\0",compressWorker:function(){return new m("STORE compression")},uncompressWorker:function(){return new m("STORE decompression")}},K.DEFLATE=y("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(y,Q,K){"use strict";var m=y("./utils"),v=function(){for(var b,h=[],e=0;e<256;e++){b=e;for(var n=0;n<8;n++)b=1&b?3988292384^b>>>1:b>>>1;h[e]=b}return h}();Q.exports=function(b,h){return void 0!==b&&b.length?"string"!==m.getTypeOf(b)?function(e,n,r,o){var t=v,d=0+r;e^=-1;for(var a=0;a<d;a++)e=e>>>8^t[255&(e^n[a])];return-1^e}(0|h,b,b.length):function(e,n,r,o){var t=v,d=0+r;e^=-1;for(var a=0;a<d;a++)e=e>>>8^t[255&(e^n.charCodeAt(a))];return-1^e}(0|h,b,b.length):0}},{"./utils":32}],5:[function(y,Q,K){"use strict";K.base64=!1,K.binary=!1,K.dir=!1,K.createFolders=!0,K.date=null,K.compression=null,K.compressionOptions=null,K.comment=null,K.unixPermissions=null,K.dosPermissions=null},{}],6:[function(y,Q,K){"use strict";var m;m=typeof Promise<"u"?Promise:y("lie"),Q.exports={Promise:m}},{lie:37}],7:[function(y,Q,K){"use strict";var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",v=y("pako"),b=y("./utils"),h=y("./stream/GenericWorker"),e=m?"uint8array":"array";function n(r,o){h.call(this,"FlateWorker/"+r),this._pako=null,this._pakoAction=r,this._pakoOptions=o,this.meta={}}K.magic="\b\0",b.inherits(n,h),n.prototype.processChunk=function(r){this.meta=r.meta,null===this._pako&&this._createPako(),this._pako.push(b.transformTo(e,r.data),!1)},n.prototype.flush=function(){h.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},n.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},n.prototype._createPako=function(){this._pako=new v[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var r=this;this._pako.onData=function(o){r.push({data:o,meta:r.meta})}},K.compressWorker=function(r){return new n("Deflate",r)},K.uncompressWorker=function(){return new n("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(y,Q,K){"use strict";function m(t,d){var a,i="";for(a=0;a<d;a++)i+=String.fromCharCode(255&t),t>>>=8;return i}function v(t,d,a,i,s,c){var l,p,g=t.file,u=t.compression,x=c!==e.utf8encode,f=b.transformTo("string",c(g.name)),T=b.transformTo("string",e.utf8encode(g.name)),_=g.comment,k=b.transformTo("string",c(_)),w=b.transformTo("string",e.utf8encode(_)),C=T.length!==g.name.length,A=w.length!==_.length,O="",P="",S="",E=g.dir,D=g.date,z={crc32:0,compressedSize:0,uncompressedSize:0};d&&!a||(z.crc32=t.crc32,z.compressedSize=t.compressedSize,z.uncompressedSize=t.uncompressedSize);var N=0;d&&(N|=8),x||!C&&!A||(N|=2048);var G,re,V=0,X=0;E&&(V|=16),"UNIX"===s?(X=798,V|=(re=G=g.unixPermissions,G||(re=E?16893:33204),(65535&re)<<16)):(X=20,V|=function(G){return 63&(G||0)}(g.dosPermissions)),l=D.getUTCHours(),l<<=6,l|=D.getUTCMinutes(),l<<=5,l|=D.getUTCSeconds()/2,p=D.getUTCFullYear()-1980,p<<=4,p|=D.getUTCMonth()+1,p<<=5,p|=D.getUTCDate(),C&&(P=m(1,1)+m(n(f),4)+T,O+="up"+m(P.length,2)+P),A&&(S=m(1,1)+m(n(k),4)+w,O+="uc"+m(S.length,2)+S);var J="";return J+="\n\0",J+=m(N,2),J+=u.magic,J+=m(l,2),J+=m(p,2),J+=m(z.crc32,4),J+=m(z.compressedSize,4),J+=m(z.uncompressedSize,4),J+=m(f.length,2),J+=m(O.length,2),{fileRecord:r.LOCAL_FILE_HEADER+J+f+O,dirRecord:r.CENTRAL_FILE_HEADER+m(X,2)+J+m(k.length,2)+"\0\0\0\0"+m(V,4)+m(i,4)+f+O+k}}var b=y("../utils"),h=y("../stream/GenericWorker"),e=y("../utf8"),n=y("../crc32"),r=y("../signature");function o(t,d,a,i){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=a,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}b.inherits(o,h),o.prototype.push=function(t){var d=t.meta.percent||0,a=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,h.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:a?(d+100*(a-i-1))/a:100}}))},o.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var d=this.streamFiles&&!t.file.dir;if(d){var a=v(t,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0},o.prototype.closedSource=function(t){this.accumulate=!1;var i,d=this.streamFiles&&!t.file.dir,a=v(t,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),d)this.push({data:(i=t,r.DATA_DESCRIPTOR+m(i.crc32,4)+m(i.compressedSize,4)+m(i.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},o.prototype.flush=function(){for(var t=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var s,c,l,u,i=(s=this.dirRecords.length,c=this.bytesWritten-t,l=t,u=b.transformTo("string",(0,this.encodeFileName)(this.zipComment)),r.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(s,2)+m(s,2)+m(c,4)+m(l,4)+m(u.length,2)+u);this.push({data:i,meta:{percent:100}})},o.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},o.prototype.registerPrevious=function(t){this._sources.push(t);var d=this;return t.on("data",function(a){d.processChunk(a)}),t.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),t.on("error",function(a){d.error(a)}),this},o.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},o.prototype.error=function(t){var d=this._sources;if(!h.prototype.error.call(this,t))return!1;for(var a=0;a<d.length;a++)try{d[a].error(t)}catch{}return!0},o.prototype.lock=function(){h.prototype.lock.call(this);for(var t=this._sources,d=0;d<t.length;d++)t[d].lock()},Q.exports=o},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(y,Q,K){"use strict";var m=y("../compressions"),v=y("./ZipFileWorker");K.generateWorker=function(b,h,e){var n=new v(h.streamFiles,e,h.platform,h.encodeFileName),r=0;try{b.forEach(function(o,t){r++;var d=function(c,l){var p=c||l,g=m[p];if(!g)throw new Error(p+" is not a valid compression method !");return g}(t.options.compression,h.compression),i=t.dir,s=t.date;t._compressWorker(d,t.options.compressionOptions||h.compressionOptions||{}).withStreamInfo("file",{name:o,dir:i,date:s,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(n)}),n.entriesCount=r}catch(o){n.error(o)}return n}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(y,Q,K){"use strict";function m(){if(!(this instanceof m))return new m;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var v=new m;for(var b in this)"function"!=typeof this[b]&&(v[b]=this[b]);return v}}(m.prototype=y("./object")).loadAsync=y("./load"),m.support=y("./support"),m.defaults=y("./defaults"),m.version="3.10.1",m.loadAsync=function(v,b){return(new m).loadAsync(v,b)},m.external=y("./external"),Q.exports=m},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(y,Q,K){"use strict";var m=y("./utils"),v=y("./external"),b=y("./utf8"),h=y("./zipEntries"),e=y("./stream/Crc32Probe"),n=y("./nodejsUtils");function r(o){return new v.Promise(function(t,d){var a=o.decompressed.getContentWorker().pipe(new e);a.on("error",function(i){d(i)}).on("end",function(){a.streamInfo.crc32!==o.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}Q.exports=function(o,t){var d=this;return t=m.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:b.utf8decode}),n.isNode&&n.isStream(o)?v.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):m.prepareContent("the loaded zip file",o,!0,t.optimizedBinaryString,t.base64).then(function(a){var i=new h(t);return i.load(a),i}).then(function(a){var i=[v.Promise.resolve(a)],s=a.files;if(t.checkCRC32)for(var c=0;c<s.length;c++)i.push(r(s[c]));return v.Promise.all(i)}).then(function(a){for(var i=a.shift(),s=i.files,c=0;c<s.length;c++){var l=s[c],p=l.fileNameStr,g=m.resolve(l.fileNameStr);d.file(g,l.decompressed,{binary:!0,optimizedBinaryString:!0,date:l.date,dir:l.dir,comment:l.fileCommentStr.length?l.fileCommentStr:null,unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions,createFolders:t.createFolders}),l.dir||(d.file(g).unsafeOriginalName=p)}return i.zipComment.length&&(d.comment=i.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(y,Q,K){"use strict";var m=y("../utils"),v=y("../stream/GenericWorker");function b(h,e){v.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(e)}m.inherits(b,v),b.prototype._bindStream=function(h){var e=this;(this._stream=h).pause(),h.on("data",function(n){e.push({data:n,meta:{percent:0}})}).on("error",function(n){e.isPaused?this.generatedError=n:e.error(n)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},b.prototype.pause=function(){return!!v.prototype.pause.call(this)&&(this._stream.pause(),!0)},b.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Q.exports=b},{"../stream/GenericWorker":28,"../utils":32}],13:[function(y,Q,K){"use strict";var m=y("readable-stream").Readable;function v(b,h,e){m.call(this,h),this._helper=b;var n=this;b.on("data",function(r,o){n.push(r)||n._helper.pause(),e&&e(o)}).on("error",function(r){n.emit("error",r)}).on("end",function(){n.push(null)})}y("../utils").inherits(v,m),v.prototype._read=function(){this._helper.resume()},Q.exports=v},{"../utils":32,"readable-stream":16}],14:[function(y,Q,K){"use strict";Q.exports={isNode:typeof Buffer<"u",newBufferFrom:function(m,v){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(m,v);if("number"==typeof m)throw new Error('The "data" argument must not be a number');return new Buffer(m,v)},allocBuffer:function(m){if(Buffer.alloc)return Buffer.alloc(m);var v=new Buffer(m);return v.fill(0),v},isBuffer:function(m){return Buffer.isBuffer(m)},isStream:function(m){return m&&"function"==typeof m.on&&"function"==typeof m.pause&&"function"==typeof m.resume}}},{}],15:[function(y,Q,K){"use strict";function m(g,u,x){var f,T=b.getTypeOf(u),_=b.extend(x||{},n);_.date=_.date||new Date,null!==_.compression&&(_.compression=_.compression.toUpperCase()),"string"==typeof _.unixPermissions&&(_.unixPermissions=parseInt(_.unixPermissions,8)),_.unixPermissions&&16384&_.unixPermissions&&(_.dir=!0),_.dosPermissions&&16&_.dosPermissions&&(_.dir=!0),_.dir&&(g=s(g)),_.createFolders&&(f=i(g))&&c.call(this,f,!0),x&&void 0!==x.binary||(_.binary=!("string"===T&&!1===_.binary&&!1===_.base64)),(u instanceof r&&0===u.uncompressedSize||_.dir||!u||0===u.length)&&(_.base64=!1,_.binary=!0,u="",_.compression="STORE",T="string");var w;w=u instanceof r||u instanceof h?u:d.isNode&&d.isStream(u)?new a(g,u):b.prepareContent(g,u,_.binary,_.optimizedBinaryString,_.base64);var C=new o(g,w,_);this.files[g]=C}var v=y("./utf8"),b=y("./utils"),h=y("./stream/GenericWorker"),e=y("./stream/StreamHelper"),n=y("./defaults"),r=y("./compressedObject"),o=y("./zipObject"),t=y("./generate"),d=y("./nodejsUtils"),a=y("./nodejs/NodejsStreamInputAdapter"),i=function(g){"/"===g.slice(-1)&&(g=g.substring(0,g.length-1));var u=g.lastIndexOf("/");return 0<u?g.substring(0,u):""},s=function(g){return"/"!==g.slice(-1)&&(g+="/"),g},c=function(g,u){return u=void 0!==u?u:n.createFolders,g=s(g),this.files[g]||m.call(this,g,null,{dir:!0,createFolders:u}),this.files[g]};function l(g){return"[object RegExp]"===Object.prototype.toString.call(g)}var p={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(g){var u,x,f;for(u in this.files)f=this.files[u],(x=u.slice(this.root.length,u.length))&&u.slice(0,this.root.length)===this.root&&g(x,f)},filter:function(g){var u=[];return this.forEach(function(x,f){g(x,f)&&u.push(f)}),u},file:function(g,u,x){if(1!==arguments.length)return m.call(this,g=this.root+g,u,x),this;if(l(g)){var f=g;return this.filter(function(_,k){return!k.dir&&f.test(_)})}var T=this.files[this.root+g];return T&&!T.dir?T:null},folder:function(g){if(!g)return this;if(l(g))return this.filter(function(T,_){return _.dir&&g.test(T)});var x=c.call(this,this.root+g),f=this.clone();return f.root=x.name,f},remove:function(g){var u=this.files[g=this.root+g];if(u||("/"!==g.slice(-1)&&(g+="/"),u=this.files[g]),u&&!u.dir)delete this.files[g];else for(var x=this.filter(function(T,_){return _.name.slice(0,g.length)===g}),f=0;f<x.length;f++)delete this.files[x[f].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(g){var u,x={};try{if((x=b.extend(g||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:v.utf8encode})).type=x.type.toLowerCase(),x.compression=x.compression.toUpperCase(),"binarystring"===x.type&&(x.type="string"),!x.type)throw new Error("No output type specified.");b.checkSupport(x.type),"darwin"!==x.platform&&"freebsd"!==x.platform&&"linux"!==x.platform&&"sunos"!==x.platform||(x.platform="UNIX"),"win32"===x.platform&&(x.platform="DOS"),u=t.generateWorker(this,x,x.comment||this.comment||"")}catch(T){(u=new h("error")).error(T)}return new e(u,x.type||"string",x.mimeType)},generateAsync:function(g,u){return this.generateInternalStream(g).accumulate(u)},generateNodeStream:function(g,u){return(g=g||{}).type||(g.type="nodebuffer"),this.generateInternalStream(g).toNodejsStream(u)}};Q.exports=p},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(y,Q,K){"use strict";Q.exports=y("stream")},{stream:void 0}],17:[function(y,Q,K){"use strict";var m=y("./DataReader");function v(b){m.call(this,b);for(var h=0;h<this.data.length;h++)b[h]=255&b[h]}y("../utils").inherits(v,m),v.prototype.byteAt=function(b){return this.data[this.zero+b]},v.prototype.lastIndexOfSignature=function(b){for(var h=b.charCodeAt(0),e=b.charCodeAt(1),n=b.charCodeAt(2),r=b.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===h&&this.data[o+1]===e&&this.data[o+2]===n&&this.data[o+3]===r)return o-this.zero;return-1},v.prototype.readAndCheckSignature=function(b){var h=b.charCodeAt(0),e=b.charCodeAt(1),n=b.charCodeAt(2),r=b.charCodeAt(3),o=this.readData(4);return h===o[0]&&e===o[1]&&n===o[2]&&r===o[3]},v.prototype.readData=function(b){if(this.checkOffset(b),0===b)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,h},Q.exports=v},{"../utils":32,"./DataReader":18}],18:[function(y,Q,K){"use strict";var m=y("../utils");function v(b){this.data=b,this.length=b.length,this.index=0,this.zero=0}v.prototype={checkOffset:function(b){this.checkIndex(this.index+b)},checkIndex:function(b){if(this.length<this.zero+b||b<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?")},setIndex:function(b){this.checkIndex(b),this.index=b},skip:function(b){this.setIndex(this.index+b)},byteAt:function(){},readInt:function(b){var h,e=0;for(this.checkOffset(b),h=this.index+b-1;h>=this.index;h--)e=(e<<8)+this.byteAt(h);return this.index+=b,e},readString:function(b){return m.transformTo("string",this.readData(b))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var b=this.readInt(4);return new Date(Date.UTC(1980+(b>>25&127),(b>>21&15)-1,b>>16&31,b>>11&31,b>>5&63,(31&b)<<1))}},Q.exports=v},{"../utils":32}],19:[function(y,Q,K){"use strict";var m=y("./Uint8ArrayReader");function v(b){m.call(this,b)}y("../utils").inherits(v,m),v.prototype.readData=function(b){this.checkOffset(b);var h=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,h},Q.exports=v},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(y,Q,K){"use strict";var m=y("./DataReader");function v(b){m.call(this,b)}y("../utils").inherits(v,m),v.prototype.byteAt=function(b){return this.data.charCodeAt(this.zero+b)},v.prototype.lastIndexOfSignature=function(b){return this.data.lastIndexOf(b)-this.zero},v.prototype.readAndCheckSignature=function(b){return b===this.readData(4)},v.prototype.readData=function(b){this.checkOffset(b);var h=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,h},Q.exports=v},{"../utils":32,"./DataReader":18}],21:[function(y,Q,K){"use strict";var m=y("./ArrayReader");function v(b){m.call(this,b)}y("../utils").inherits(v,m),v.prototype.readData=function(b){if(this.checkOffset(b),0===b)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+b);return this.index+=b,h},Q.exports=v},{"../utils":32,"./ArrayReader":17}],22:[function(y,Q,K){"use strict";var m=y("../utils"),v=y("../support"),b=y("./ArrayReader"),h=y("./StringReader"),e=y("./NodeBufferReader"),n=y("./Uint8ArrayReader");Q.exports=function(r){var o=m.getTypeOf(r);return m.checkSupport(o),"string"!==o||v.uint8array?"nodebuffer"===o?new e(r):v.uint8array?new n(m.transformTo("uint8array",r)):new b(m.transformTo("array",r)):new h(r)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(y,Q,K){"use strict";K.LOCAL_FILE_HEADER="PK\x03\x04",K.CENTRAL_FILE_HEADER="PK\x01\x02",K.CENTRAL_DIRECTORY_END="PK\x05\x06",K.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",K.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",K.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(y,Q,K){"use strict";var m=y("./GenericWorker"),v=y("../utils");function b(h){m.call(this,"ConvertWorker to "+h),this.destType=h}v.inherits(b,m),b.prototype.processChunk=function(h){this.push({data:v.transformTo(this.destType,h.data),meta:h.meta})},Q.exports=b},{"../utils":32,"./GenericWorker":28}],25:[function(y,Q,K){"use strict";var m=y("./GenericWorker"),v=y("../crc32");function b(){m.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}y("../utils").inherits(b,m),b.prototype.processChunk=function(h){this.streamInfo.crc32=v(h.data,this.streamInfo.crc32||0),this.push(h)},Q.exports=b},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(y,Q,K){"use strict";var m=y("../utils"),v=y("./GenericWorker");function b(h){v.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}m.inherits(b,v),b.prototype.processChunk=function(h){h&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+h.data.length),v.prototype.processChunk.call(this,h)},Q.exports=b},{"../utils":32,"./GenericWorker":28}],27:[function(y,Q,K){"use strict";var m=y("../utils"),v=y("./GenericWorker");function b(h){v.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(n){e.dataIsReady=!0,e.data=n,e.max=n&&n.length||0,e.type=m.getTypeOf(n),e.isPaused||e._tickAndRepeat()},function(n){e.error(n)})}m.inherits(b,v),b.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this.data=null},b.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,m.delay(this._tickAndRepeat,[],this)),!0)},b.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(m.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},b.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,e);break;case"uint8array":h=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":h=this.data.slice(this.index,e)}return this.index=e,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},Q.exports=b},{"../utils":32,"./GenericWorker":28}],28:[function(y,Q,K){"use strict";function m(v){this.name=v||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}m.prototype={push:function(v){this.emit("data",v)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(v){this.emit("error",v)}return!0},error:function(v){return!this.isFinished&&(this.isPaused?this.generatedError=v:(this.isFinished=!0,this.emit("error",v),this.previous&&this.previous.error(v),this.cleanUp()),!0)},on:function(v,b){return this._listeners[v].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(v,b){if(this._listeners[v])for(var h=0;h<this._listeners[v].length;h++)this._listeners[v][h].call(this,b)},pipe:function(v){return v.registerPrevious(this)},registerPrevious:function(v){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=v.streamInfo,this.mergeStreamInfo(),this.previous=v;var b=this;return v.on("data",function(h){b.processChunk(h)}),v.on("end",function(){b.end()}),v.on("error",function(h){b.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var v=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),v=!0),this.previous&&this.previous.resume(),!v},flush:function(){},processChunk:function(v){this.push(v)},withStreamInfo:function(v,b){return this.extraStreamInfo[v]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var v in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,v)&&(this.streamInfo[v]=this.extraStreamInfo[v])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var v="Worker "+this.name;return this.previous?this.previous+" -> "+v:v}},Q.exports=m},{}],29:[function(y,Q,K){"use strict";var m=y("../utils"),v=y("./ConvertWorker"),b=y("./GenericWorker"),h=y("../base64"),e=y("../support"),n=y("../external"),r=null;if(e.nodestream)try{r=y("../nodejs/NodejsStreamOutputAdapter")}catch{}function t(d,a,i){var s=a;switch(a){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=a,this._mimeType=i,m.checkSupport(s),this._worker=d.pipe(new v(s)),d.lock()}catch(c){this._worker=new b("error"),this._worker.error(c)}}t.prototype={accumulate:function(d){return function o(d,a){return new n.Promise(function(i,s){var c=[],l=d._internalType,p=d._outputType,g=d._mimeType;d.on("data",function(u,x){c.push(u),a&&a(x)}).on("error",function(u){c=[],s(u)}).on("end",function(){try{var u=function(x,f,T){switch(x){case"blob":return m.newBlob(m.transformTo("arraybuffer",f),T);case"base64":return h.encode(f);default:return m.transformTo(x,f)}}(p,function(x,f){var T,_=0,k=null,w=0;for(T=0;T<f.length;T++)w+=f[T].length;switch(x){case"string":return f.join("");case"array":return Array.prototype.concat.apply([],f);case"uint8array":for(k=new Uint8Array(w),T=0;T<f.length;T++)k.set(f[T],_),_+=f[T].length;return k;case"nodebuffer":return Buffer.concat(f);default:throw new Error("concat : unsupported type '"+x+"'")}}(l,c),g);i(u)}catch(x){s(x)}c=[]}).resume()})}(this,d)},on:function(d,a){var i=this;return this._worker.on(d,"data"===d?function(s){a.call(i,s.data,s.meta)}:function(){m.delay(a,arguments,i)}),this},resume:function(){return m.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(m.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new r(this,{objectMode:"nodebuffer"!==this._outputType},d)}},Q.exports=t},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(y,Q,K){"use strict";if(K.base64=!0,K.array=!0,K.string=!0,K.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",K.nodebuffer=typeof Buffer<"u",K.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")K.blob=!1;else{var m=new ArrayBuffer(0);try{K.blob=0===new Blob([m],{type:"application/zip"}).size}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);v.append(m),K.blob=0===v.getBlob("application/zip").size}catch{K.blob=!1}}}try{K.nodestream=!!y("readable-stream").Readable}catch{K.nodestream=!1}},{"readable-stream":16}],31:[function(y,Q,K){"use strict";for(var m=y("./utils"),v=y("./support"),b=y("./nodejsUtils"),h=y("./stream/GenericWorker"),e=new Array(256),n=0;n<256;n++)e[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function r(){h.call(this,"utf-8 decode"),this.leftOver=null}function o(){h.call(this,"utf-8 encode")}e[254]=e[254]=1,K.utf8encode=function(t){return v.nodebuffer?b.newBufferFrom(t,"utf-8"):function(d){var a,i,s,c,l,p=d.length,g=0;for(c=0;c<p;c++)55296==(64512&(i=d.charCodeAt(c)))&&c+1<p&&56320==(64512&(s=d.charCodeAt(c+1)))&&(i=65536+(i-55296<<10)+(s-56320),c++),g+=i<128?1:i<2048?2:i<65536?3:4;for(a=v.uint8array?new Uint8Array(g):new Array(g),c=l=0;l<g;c++)55296==(64512&(i=d.charCodeAt(c)))&&c+1<p&&56320==(64512&(s=d.charCodeAt(c+1)))&&(i=65536+(i-55296<<10)+(s-56320),c++),i<128?a[l++]=i:(i<2048?a[l++]=192|i>>>6:(i<65536?a[l++]=224|i>>>12:(a[l++]=240|i>>>18,a[l++]=128|i>>>12&63),a[l++]=128|i>>>6&63),a[l++]=128|63&i);return a}(t)},K.utf8decode=function(t){return v.nodebuffer?m.transformTo("nodebuffer",t).toString("utf-8"):function(d){var a,i,s,c,l=d.length,p=new Array(2*l);for(a=i=0;a<l;)if((s=d[a++])<128)p[i++]=s;else if(4<(c=e[s]))p[i++]=65533,a+=c-1;else{for(s&=2===c?31:3===c?15:7;1<c&&a<l;)s=s<<6|63&d[a++],c--;1<c?p[i++]=65533:s<65536?p[i++]=s:(p[i++]=55296|(s-=65536)>>10&1023,p[i++]=56320|1023&s)}return p.length!==i&&(p.subarray?p=p.subarray(0,i):p.length=i),m.applyFromCharCode(p)}(t=m.transformTo(v.uint8array?"uint8array":"array",t))},m.inherits(r,h),r.prototype.processChunk=function(t){var d=m.transformTo(v.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(v.uint8array){var a=d;(d=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),d.set(a,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var i=function(c,l){var p;for((l=l||c.length)>c.length&&(l=c.length),p=l-1;0<=p&&128==(192&c[p]);)p--;return p<0||0===p?l:p+e[c[p]]>l?p:l}(d),s=d;i!==d.length&&(v.uint8array?(s=d.subarray(0,i),this.leftOver=d.subarray(i,d.length)):(s=d.slice(0,i),this.leftOver=d.slice(i,d.length))),this.push({data:K.utf8decode(s),meta:t.meta})},r.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:K.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},K.Utf8DecodeWorker=r,m.inherits(o,h),o.prototype.processChunk=function(t){this.push({data:K.utf8encode(t.data),meta:t.meta})},K.Utf8EncodeWorker=o},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(y,Q,K){"use strict";var m=y("./support"),v=y("./base64"),b=y("./nodejsUtils"),h=y("./external");function e(a){return a}function n(a,i){for(var s=0;s<a.length;++s)i[s]=255&a.charCodeAt(s);return i}y("setimmediate"),K.newBlob=function(a,i){K.checkSupport("blob");try{return new Blob([a],{type:i})}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return s.append(a),s.getBlob(i)}catch{throw new Error("Bug : can't construct the Blob.")}}};var r={stringifyByChunk:function(a,i,s){var c=[],l=0,p=a.length;if(p<=s)return String.fromCharCode.apply(null,a);for(;l<p;)c.push(String.fromCharCode.apply(null,"array"===i||"nodebuffer"===i?a.slice(l,Math.min(l+s,p)):a.subarray(l,Math.min(l+s,p)))),l+=s;return c.join("")},stringifyByChar:function(a){for(var i="",s=0;s<a.length;s++)i+=String.fromCharCode(a[s]);return i},applyCanBeUsed:{uint8array:function(){try{return m.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return m.nodebuffer&&1===String.fromCharCode.apply(null,b.allocBuffer(1)).length}catch{return!1}}()}};function o(a){var i=65536,s=K.getTypeOf(a),c=!0;if("uint8array"===s?c=r.applyCanBeUsed.uint8array:"nodebuffer"===s&&(c=r.applyCanBeUsed.nodebuffer),c)for(;1<i;)try{return r.stringifyByChunk(a,s,i)}catch{i=Math.floor(i/2)}return r.stringifyByChar(a)}function t(a,i){for(var s=0;s<a.length;s++)i[s]=a[s];return i}K.applyFromCharCode=o;var d={};d.string={string:e,array:function(a){return n(a,new Array(a.length))},arraybuffer:function(a){return d.string.uint8array(a).buffer},uint8array:function(a){return n(a,new Uint8Array(a.length))},nodebuffer:function(a){return n(a,b.allocBuffer(a.length))}},d.array={string:o,array:e,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return b.newBufferFrom(a)}},d.arraybuffer={string:function(a){return o(new Uint8Array(a))},array:function(a){return t(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:e,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return b.newBufferFrom(new Uint8Array(a))}},d.uint8array={string:o,array:function(a){return t(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:e,nodebuffer:function(a){return b.newBufferFrom(a)}},d.nodebuffer={string:o,array:function(a){return t(a,new Array(a.length))},arraybuffer:function(a){return d.nodebuffer.uint8array(a).buffer},uint8array:function(a){return t(a,new Uint8Array(a.length))},nodebuffer:e},K.transformTo=function(a,i){if(i=i||"",!a)return i;K.checkSupport(a);var s=K.getTypeOf(i);return d[s][a](i)},K.resolve=function(a){for(var i=a.split("/"),s=[],c=0;c<i.length;c++){var l=i[c];"."===l||""===l&&0!==c&&c!==i.length-1||(".."===l?s.pop():s.push(l))}return s.join("/")},K.getTypeOf=function(a){return"string"==typeof a?"string":"[object Array]"===Object.prototype.toString.call(a)?"array":m.nodebuffer&&b.isBuffer(a)?"nodebuffer":m.uint8array&&a instanceof Uint8Array?"uint8array":m.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},K.checkSupport=function(a){if(!m[a.toLowerCase()])throw new Error(a+" is not supported by this platform")},K.MAX_VALUE_16BITS=65535,K.MAX_VALUE_32BITS=-1,K.pretty=function(a){var i,s,c="";for(s=0;s<(a||"").length;s++)c+="\\x"+((i=a.charCodeAt(s))<16?"0":"")+i.toString(16).toUpperCase();return c},K.delay=function(a,i,s){setImmediate(function(){a.apply(s||null,i||[])})},K.inherits=function(a,i){function s(){}s.prototype=i.prototype,a.prototype=new s},K.extend=function(){var a,i,s={};for(a=0;a<arguments.length;a++)for(i in arguments[a])Object.prototype.hasOwnProperty.call(arguments[a],i)&&void 0===s[i]&&(s[i]=arguments[a][i]);return s},K.prepareContent=function(a,i,s,c,l){return h.Promise.resolve(i).then(function(p){return m.blob&&(p instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(p)))&&typeof FileReader<"u"?new h.Promise(function(g,u){var x=new FileReader;x.onload=function(f){g(f.target.result)},x.onerror=function(f){u(f.target.error)},x.readAsArrayBuffer(p)}):p}).then(function(p){var u,g=K.getTypeOf(p);return g?("arraybuffer"===g?p=K.transformTo("uint8array",p):"string"===g&&(l?p=v.decode(p):s&&!0!==c&&(p=n(u=p,m.uint8array?new Uint8Array(u.length):new Array(u.length)))),p):h.Promise.reject(new Error("Can't read the data of '"+a+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(y,Q,K){"use strict";var m=y("./reader/readerFor"),v=y("./utils"),b=y("./signature"),h=y("./zipEntry"),e=y("./support");function n(r){this.files=[],this.loadOptions=r}n.prototype={checkSignature:function(r){if(!this.reader.readAndCheckSignature(r)){this.reader.index-=4;var o=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+v.pretty(o)+", expected "+v.pretty(r)+")")}},isSignature:function(r,o){var t=this.reader.index;this.reader.setIndex(r);var d=this.reader.readString(4)===o;return this.reader.setIndex(t),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var r=this.reader.readData(this.zipCommentLength),t=v.transformTo(e.uint8array?"uint8array":"array",r);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var r,o,t,d=this.zip64EndOfCentralSize-44;0<d;)r=this.reader.readInt(2),o=this.reader.readInt(4),t=this.reader.readData(o),this.zip64ExtensibleData[r]={id:r,length:o,value:t}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var r,o;for(r=0;r<this.files.length;r++)this.reader.setIndex((o=this.files[r]).localHeaderOffset),this.checkSignature(b.LOCAL_FILE_HEADER),o.readLocalPart(this.reader),o.handleUTF8(),o.processAttributes()},readCentralDir:function(){var r;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(b.CENTRAL_FILE_HEADER);)(r=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(r);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var r=this.reader.lastIndexOfSignature(b.CENTRAL_DIRECTORY_END);if(r<0)throw this.isSignature(0,b.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(r);var o=r;if(this.checkSignature(b.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===v.MAX_VALUE_16BITS||this.diskWithCentralDirStart===v.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===v.MAX_VALUE_16BITS||this.centralDirRecords===v.MAX_VALUE_16BITS||this.centralDirSize===v.MAX_VALUE_32BITS||this.centralDirOffset===v.MAX_VALUE_32BITS){if(this.zip64=!0,(r=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(r),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,b.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var t=this.centralDirOffset+this.centralDirSize;this.zip64&&(t+=20,t+=12+this.zip64EndOfCentralSize);var d=o-t;if(0<d)this.isSignature(o,b.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(r){this.reader=m(r)},load:function(r){this.prepareReader(r),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Q.exports=n},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(y,Q,K){"use strict";var m=y("./reader/readerFor"),v=y("./utils"),b=y("./compressedObject"),h=y("./crc32"),e=y("./utf8"),n=y("./compressions"),r=y("./support");function o(t,d){this.options=t,this.loadOptions=d}o.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var d,a;if(t.skip(22),this.fileNameLength=t.readInt(2),a=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(a),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(d=function(i){for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&n[s].magic===i)return n[s];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+v.pretty(this.compressionMethod)+" unknown (inner file : "+v.transformTo("string",this.fileName)+")");this.decompressed=new b(this.compressedSize,this.uncompressedSize,this.crc32,d,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var d=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(d),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=m(this.extraFields[1].value);this.uncompressedSize===v.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===v.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===v.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===v.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var d,a,i,s=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<s;)d=t.readInt(2),a=t.readInt(2),i=t.readData(a),this.extraFields[d]={id:d,length:a,value:i};t.setIndex(s)},handleUTF8:function(){var t=r.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=e.utf8decode(this.fileName),this.fileCommentStr=e.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(null!==d)this.fileNameStr=d;else{var a=v.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(a)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var s=v.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var d=m(t.value);return 1!==d.readInt(1)||h(this.fileName)!==d.readInt(4)?null:e.utf8decode(d.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var d=m(t.value);return 1!==d.readInt(1)||h(this.fileComment)!==d.readInt(4)?null:e.utf8decode(d.readData(t.length-5))}return null}},Q.exports=o},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(y,Q,K){"use strict";function m(d,a,i){this.name=d,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=a,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var v=y("./stream/StreamHelper"),b=y("./stream/DataWorker"),h=y("./utf8"),e=y("./compressedObject"),n=y("./stream/GenericWorker");m.prototype={internalStream:function(d){var a=null,i="string";try{if(!d)throw new Error("No output type specified.");var s="string"===(i=d.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),a=this._decompressWorker();var c=!this._dataBinary;c&&!s&&(a=a.pipe(new h.Utf8EncodeWorker)),!c&&s&&(a=a.pipe(new h.Utf8DecodeWorker))}catch(l){(a=new n("error")).error(l)}return new v(a,i,"")},async:function(d,a){return this.internalStream(d).accumulate(a)},nodeStream:function(d,a){return this.internalStream(d||"nodebuffer").toNodejsStream(a)},_compressWorker:function(d,a){if(this._data instanceof e&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new h.Utf8EncodeWorker)),e.createWorkerFrom(i,d,a)},_decompressWorker:function(){return this._data instanceof e?this._data.getContentWorker():this._data instanceof n?this._data:new b(this._data)}};for(var r=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],o=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},t=0;t<r.length;t++)m.prototype[r[t]]=o;Q.exports=m},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(y,Q,K){(function(m){"use strict";var v,b,h=m.MutationObserver||m.WebKitMutationObserver;if(h){var e=0,n=new h(d),r=m.document.createTextNode("");n.observe(r,{characterData:!0}),v=function(){r.data=e=++e%2}}else if(m.setImmediate||void 0===m.MessageChannel)v="document"in m&&"onreadystatechange"in m.document.createElement("script")?function(){var a=m.document.createElement("script");a.onreadystatechange=function(){d(),a.onreadystatechange=null,a.parentNode.removeChild(a),a=null},m.document.documentElement.appendChild(a)}:function(){setTimeout(d,0)};else{var o=new m.MessageChannel;o.port1.onmessage=d,v=function(){o.port2.postMessage(0)}}var t=[];function d(){var a,i;b=!0;for(var s=t.length;s;){for(i=t,t=[],a=-1;++a<s;)i[a]();s=t.length}b=!1}Q.exports=function(a){1!==t.push(a)||b||v()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(y,Q,K){"use strict";var m=y("immediate");function v(){}var b={},h=["REJECTED"],e=["FULFILLED"],n=["PENDING"];function r(s){if("function"!=typeof s)throw new TypeError("resolver must be a function");this.state=n,this.queue=[],this.outcome=void 0,s!==v&&a(this,s)}function o(s,c,l){this.promise=s,"function"==typeof c&&(this.onFulfilled=c,this.callFulfilled=this.otherCallFulfilled),"function"==typeof l&&(this.onRejected=l,this.callRejected=this.otherCallRejected)}function t(s,c,l){m(function(){var p;try{p=c(l)}catch(g){return b.reject(s,g)}p===s?b.reject(s,new TypeError("Cannot resolve promise with itself")):b.resolve(s,p)})}function d(s){var c=s&&s.then;if(s&&("object"==typeof s||"function"==typeof s)&&"function"==typeof c)return function(){c.apply(s,arguments)}}function a(s,c){var l=!1;function p(x){l||(l=!0,b.reject(s,x))}function g(x){l||(l=!0,b.resolve(s,x))}var u=i(function(){c(g,p)});"error"===u.status&&p(u.value)}function i(s,c){var l={};try{l.value=s(c),l.status="success"}catch(p){l.status="error",l.value=p}return l}(Q.exports=r).prototype.finally=function(s){if("function"!=typeof s)return this;var c=this.constructor;return this.then(function(l){return c.resolve(s()).then(function(){return l})},function(l){return c.resolve(s()).then(function(){throw l})})},r.prototype.catch=function(s){return this.then(null,s)},r.prototype.then=function(s,c){if("function"!=typeof s&&this.state===e||"function"!=typeof c&&this.state===h)return this;var l=new this.constructor(v);return this.state!==n?t(l,this.state===e?s:c,this.outcome):this.queue.push(new o(l,s,c)),l},o.prototype.callFulfilled=function(s){b.resolve(this.promise,s)},o.prototype.otherCallFulfilled=function(s){t(this.promise,this.onFulfilled,s)},o.prototype.callRejected=function(s){b.reject(this.promise,s)},o.prototype.otherCallRejected=function(s){t(this.promise,this.onRejected,s)},b.resolve=function(s,c){var l=i(d,c);if("error"===l.status)return b.reject(s,l.value);var p=l.value;if(p)a(s,p);else{s.state=e,s.outcome=c;for(var g=-1,u=s.queue.length;++g<u;)s.queue[g].callFulfilled(c)}return s},b.reject=function(s,c){s.state=h,s.outcome=c;for(var l=-1,p=s.queue.length;++l<p;)s.queue[l].callRejected(c);return s},r.resolve=function(s){return s instanceof this?s:b.resolve(new this(v),s)},r.reject=function(s){var c=new this(v);return b.reject(c,s)},r.all=function(s){var c=this;if("[object Array]"!==Object.prototype.toString.call(s))return this.reject(new TypeError("must be an array"));var l=s.length,p=!1;if(!l)return this.resolve([]);for(var g=new Array(l),u=0,x=-1,f=new this(v);++x<l;)T(s[x],x);return f;function T(_,k){c.resolve(_).then(function(w){g[k]=w,++u!==l||p||(p=!0,b.resolve(f,g))},function(w){p||(p=!0,b.reject(f,w))})}},r.race=function(s){if("[object Array]"!==Object.prototype.toString.call(s))return this.reject(new TypeError("must be an array"));var l=s.length,p=!1;if(!l)return this.resolve([]);for(var g=-1,u=new this(v);++g<l;)this.resolve(s[g]).then(function(f){p||(p=!0,b.resolve(u,f))},function(f){p||(p=!0,b.reject(u,f))});return u}},{immediate:36}],38:[function(y,Q,K){"use strict";var m={};(0,y("./lib/utils/common").assign)(m,y("./lib/deflate"),y("./lib/inflate"),y("./lib/zlib/constants")),Q.exports=m},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(y,Q,K){"use strict";var m=y("./zlib/deflate"),v=y("./utils/common"),b=y("./utils/strings"),h=y("./zlib/messages"),e=y("./zlib/zstream"),n=Object.prototype.toString;function a(s){if(!(this instanceof a))return new a(s);this.options=v.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},s||{});var c=this.options;c.raw&&0<c.windowBits?c.windowBits=-c.windowBits:c.gzip&&0<c.windowBits&&c.windowBits<16&&(c.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new e,this.strm.avail_out=0;var l=m.deflateInit2(this.strm,c.level,c.method,c.windowBits,c.memLevel,c.strategy);if(0!==l)throw new Error(h[l]);if(c.header&&m.deflateSetHeader(this.strm,c.header),c.dictionary){var p;if(p="string"==typeof c.dictionary?b.string2buf(c.dictionary):"[object ArrayBuffer]"===n.call(c.dictionary)?new Uint8Array(c.dictionary):c.dictionary,0!==(l=m.deflateSetDictionary(this.strm,p)))throw new Error(h[l]);this._dict_set=!0}}function i(s,c){var l=new a(c);if(l.push(s,!0),l.err)throw l.msg||h[l.err];return l.result}a.prototype.push=function(s,c){var l,p,g=this.strm,u=this.options.chunkSize;if(this.ended)return!1;p=c===~~c?c:!0===c?4:0,g.input="string"==typeof s?b.string2buf(s):"[object ArrayBuffer]"===n.call(s)?new Uint8Array(s):s,g.next_in=0,g.avail_in=g.input.length;do{if(0===g.avail_out&&(g.output=new v.Buf8(u),g.next_out=0,g.avail_out=u),1!==(l=m.deflate(g,p))&&0!==l)return this.onEnd(l),!(this.ended=!0);0!==g.avail_out&&(0!==g.avail_in||4!==p&&2!==p)||this.onData("string"===this.options.to?b.buf2binstring(v.shrinkBuf(g.output,g.next_out)):v.shrinkBuf(g.output,g.next_out))}while((0<g.avail_in||0===g.avail_out)&&1!==l);return 4===p?(l=m.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,0===l):2!==p||(this.onEnd(0),!(g.avail_out=0))},a.prototype.onData=function(s){this.chunks.push(s)},a.prototype.onEnd=function(s){0===s&&(this.result="string"===this.options.to?this.chunks.join(""):v.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},K.Deflate=a,K.deflate=i,K.deflateRaw=function(s,c){return(c=c||{}).raw=!0,i(s,c)},K.gzip=function(s,c){return(c=c||{}).gzip=!0,i(s,c)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(y,Q,K){"use strict";var m=y("./zlib/inflate"),v=y("./utils/common"),b=y("./utils/strings"),h=y("./zlib/constants"),e=y("./zlib/messages"),n=y("./zlib/zstream"),r=y("./zlib/gzheader"),o=Object.prototype.toString;function t(a){if(!(this instanceof t))return new t(a);this.options=v.assign({chunkSize:16384,windowBits:0,to:""},a||{});var i=this.options;i.raw&&0<=i.windowBits&&i.windowBits<16&&(i.windowBits=-i.windowBits,0===i.windowBits&&(i.windowBits=-15)),!(0<=i.windowBits&&i.windowBits<16)||a&&a.windowBits||(i.windowBits+=32),15<i.windowBits&&i.windowBits<48&&0==(15&i.windowBits)&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var s=m.inflateInit2(this.strm,i.windowBits);if(s!==h.Z_OK)throw new Error(e[s]);this.header=new r,m.inflateGetHeader(this.strm,this.header)}function d(a,i){var s=new t(i);if(s.push(a,!0),s.err)throw s.msg||e[s.err];return s.result}t.prototype.push=function(a,i){var s,c,l,p,g,u,x=this.strm,f=this.options.chunkSize,T=this.options.dictionary,_=!1;if(this.ended)return!1;c=i===~~i?i:!0===i?h.Z_FINISH:h.Z_NO_FLUSH,x.input="string"==typeof a?b.binstring2buf(a):"[object ArrayBuffer]"===o.call(a)?new Uint8Array(a):a,x.next_in=0,x.avail_in=x.input.length;do{if(0===x.avail_out&&(x.output=new v.Buf8(f),x.next_out=0,x.avail_out=f),(s=m.inflate(x,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&T&&(u="string"==typeof T?b.string2buf(T):"[object ArrayBuffer]"===o.call(T)?new Uint8Array(T):T,s=m.inflateSetDictionary(this.strm,u)),s===h.Z_BUF_ERROR&&!0===_&&(s=h.Z_OK,_=!1),s!==h.Z_STREAM_END&&s!==h.Z_OK)return this.onEnd(s),!(this.ended=!0);x.next_out&&(0!==x.avail_out&&s!==h.Z_STREAM_END&&(0!==x.avail_in||c!==h.Z_FINISH&&c!==h.Z_SYNC_FLUSH)||("string"===this.options.to?(l=b.utf8border(x.output,x.next_out),p=x.next_out-l,g=b.buf2string(x.output,l),x.next_out=p,x.avail_out=f-p,p&&v.arraySet(x.output,x.output,l,p,0),this.onData(g)):this.onData(v.shrinkBuf(x.output,x.next_out)))),0===x.avail_in&&0===x.avail_out&&(_=!0)}while((0<x.avail_in||0===x.avail_out)&&s!==h.Z_STREAM_END);return s===h.Z_STREAM_END&&(c=h.Z_FINISH),c===h.Z_FINISH?(s=m.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===h.Z_OK):c!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(x.avail_out=0))},t.prototype.onData=function(a){this.chunks.push(a)},t.prototype.onEnd=function(a){a===h.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):v.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},K.Inflate=t,K.inflate=d,K.inflateRaw=function(a,i){return(i=i||{}).raw=!0,d(a,i)},K.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(y,Q,K){"use strict";var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";K.assign=function(h){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(h[r]=n[r])}}return h},K.shrinkBuf=function(h,e){return h.length===e?h:h.subarray?h.subarray(0,e):(h.length=e,h)};var v={arraySet:function(h,e,n,r,o){if(e.subarray&&h.subarray)h.set(e.subarray(n,n+r),o);else for(var t=0;t<r;t++)h[o+t]=e[n+t]},flattenChunks:function(h){var e,n,r,o,t,d;for(e=r=0,n=h.length;e<n;e++)r+=h[e].length;for(d=new Uint8Array(r),e=o=0,n=h.length;e<n;e++)d.set(t=h[e],o),o+=t.length;return d}},b={arraySet:function(h,e,n,r,o){for(var t=0;t<r;t++)h[o+t]=e[n+t]},flattenChunks:function(h){return[].concat.apply([],h)}};K.setTyped=function(h){h?(K.Buf8=Uint8Array,K.Buf16=Uint16Array,K.Buf32=Int32Array,K.assign(K,v)):(K.Buf8=Array,K.Buf16=Array,K.Buf32=Array,K.assign(K,b))},K.setTyped(m)},{}],42:[function(y,Q,K){"use strict";var m=y("./common"),v=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch{v=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b=!1}for(var h=new m.Buf8(256),e=0;e<256;e++)h[e]=252<=e?6:248<=e?5:240<=e?4:224<=e?3:192<=e?2:1;function n(r,o){if(o<65537&&(r.subarray&&b||!r.subarray&&v))return String.fromCharCode.apply(null,m.shrinkBuf(r,o));for(var t="",d=0;d<o;d++)t+=String.fromCharCode(r[d]);return t}h[254]=h[254]=1,K.string2buf=function(r){var o,t,d,a,i,s=r.length,c=0;for(a=0;a<s;a++)55296==(64512&(t=r.charCodeAt(a)))&&a+1<s&&56320==(64512&(d=r.charCodeAt(a+1)))&&(t=65536+(t-55296<<10)+(d-56320),a++),c+=t<128?1:t<2048?2:t<65536?3:4;for(o=new m.Buf8(c),a=i=0;i<c;a++)55296==(64512&(t=r.charCodeAt(a)))&&a+1<s&&56320==(64512&(d=r.charCodeAt(a+1)))&&(t=65536+(t-55296<<10)+(d-56320),a++),t<128?o[i++]=t:(t<2048?o[i++]=192|t>>>6:(t<65536?o[i++]=224|t>>>12:(o[i++]=240|t>>>18,o[i++]=128|t>>>12&63),o[i++]=128|t>>>6&63),o[i++]=128|63&t);return o},K.buf2binstring=function(r){return n(r,r.length)},K.binstring2buf=function(r){for(var o=new m.Buf8(r.length),t=0,d=o.length;t<d;t++)o[t]=r.charCodeAt(t);return o},K.buf2string=function(r,o){var t,d,a,i,s=o||r.length,c=new Array(2*s);for(t=d=0;t<s;)if((a=r[t++])<128)c[d++]=a;else if(4<(i=h[a]))c[d++]=65533,t+=i-1;else{for(a&=2===i?31:3===i?15:7;1<i&&t<s;)a=a<<6|63&r[t++],i--;1<i?c[d++]=65533:a<65536?c[d++]=a:(c[d++]=55296|(a-=65536)>>10&1023,c[d++]=56320|1023&a)}return n(c,d)},K.utf8border=function(r,o){var t;for((o=o||r.length)>r.length&&(o=r.length),t=o-1;0<=t&&128==(192&r[t]);)t--;return t<0||0===t?o:t+h[r[t]]>o?t:o}},{"./common":41}],43:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h){for(var e=65535&m|0,n=m>>>16&65535|0,r=0;0!==b;){for(b-=r=2e3<b?2e3:b;n=n+(e=e+v[h++]|0)|0,--r;);e%=65521,n%=65521}return e|n<<16|0}},{}],44:[function(y,Q,K){"use strict";Q.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(y,Q,K){"use strict";var m=function(){for(var v,b=[],h=0;h<256;h++){v=h;for(var e=0;e<8;e++)v=1&v?3988292384^v>>>1:v>>>1;b[h]=v}return b}();Q.exports=function(v,b,h,e){var n=m,r=e+h;v^=-1;for(var o=e;o<r;o++)v=v>>>8^n[255&(v^b[o])];return-1^v}},{}],46:[function(y,Q,K){"use strict";var m,v=y("../utils/common"),b=y("./trees"),h=y("./adler32"),e=y("./crc32"),n=y("./messages"),d=-2,_=258,k=262,C=113;function E(q,te){return q.msg=n[te],te}function D(q){return(q<<1)-(4<q?9:0)}function z(q){for(var te=q.length;0<=--te;)q[te]=0}function N(q){var te=q.state,ne=te.pending;ne>q.avail_out&&(ne=q.avail_out),0!==ne&&(v.arraySet(q.output,te.pending_buf,te.pending_out,ne,q.next_out),q.next_out+=ne,te.pending_out+=ne,q.total_out+=ne,q.avail_out-=ne,te.pending-=ne,0===te.pending&&(te.pending_out=0))}function V(q,te){b._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,te),q.block_start=q.strstart,N(q.strm)}function X(q,te){q.pending_buf[q.pending++]=te}function J(q,te){q.pending_buf[q.pending++]=te>>>8&255,q.pending_buf[q.pending++]=255&te}function G(q,te){var ne,se,ie=q.max_chain_length,ue=q.strstart,le=q.prev_length,de=q.nice_match,be=q.strstart>q.w_size-k?q.strstart-(q.w_size-k):0,_e=q.window,xe=q.w_mask,Ee=q.prev,he=q.strstart+_,me=_e[ue+le-1],Se=_e[ue+le];q.prev_length>=q.good_match&&(ie>>=2),de>q.lookahead&&(de=q.lookahead);do{if(_e[(ne=te)+le]===Se&&_e[ne+le-1]===me&&_e[ne]===_e[ue]&&_e[++ne]===_e[ue+1]){ue+=2,ne++;do{}while(_e[++ue]===_e[++ne]&&_e[++ue]===_e[++ne]&&_e[++ue]===_e[++ne]&&_e[++ue]===_e[++ne]&&_e[++ue]===_e[++ne]&&_e[++ue]===_e[++ne]&&_e[++ue]===_e[++ne]&&_e[++ue]===_e[++ne]&&ue<he);if(se=_-(he-ue),ue=he-_,le<se){if(q.match_start=te,de<=(le=se))break;me=_e[ue+le-1],Se=_e[ue+le]}}}while((te=Ee[te&xe])>be&&0!=--ie);return le<=q.lookahead?le:q.lookahead}function Z(q){var te,ne,se,ie,ue,le,de,be,_e,xe,Ee=q.w_size;do{if(ie=q.window_size-q.lookahead-q.strstart,q.strstart>=Ee+(Ee-k)){for(v.arraySet(q.window,q.window,Ee,Ee,0),q.match_start-=Ee,q.strstart-=Ee,q.block_start-=Ee,te=ne=q.hash_size;se=q.head[--te],q.head[te]=Ee<=se?se-Ee:0,--ne;);for(te=ne=Ee;se=q.prev[--te],q.prev[te]=Ee<=se?se-Ee:0,--ne;);ie+=Ee}if(0===q.strm.avail_in)break;if(de=q.window,be=q.strstart+q.lookahead,xe=void 0,(_e=ie)<(xe=(le=q.strm).avail_in)&&(xe=_e),ne=0===xe?0:(le.avail_in-=xe,v.arraySet(de,le.input,le.next_in,xe,be),1===le.state.wrap?le.adler=h(le.adler,de,xe,be):2===le.state.wrap&&(le.adler=e(le.adler,de,xe,be)),le.next_in+=xe,le.total_in+=xe,xe),q.lookahead+=ne,q.lookahead+q.insert>=3)for(q.ins_h=q.window[ue=q.strstart-q.insert],q.ins_h=(q.ins_h<<q.hash_shift^q.window[ue+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[ue+3-1])&q.hash_mask,q.prev[ue&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=ue,ue++,q.insert--,!(q.lookahead+q.insert<3)););}while(q.lookahead<k&&0!==q.strm.avail_in)}function re(q,te){for(var ne,se;;){if(q.lookahead<k){if(Z(q),q.lookahead<k&&0===te)return 1;if(0===q.lookahead)break}if(ne=0,q.lookahead>=3&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,ne=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),0!==ne&&q.strstart-ne<=q.w_size-k&&(q.match_length=G(q,ne)),q.match_length>=3)if(se=b._tr_tally(q,q.strstart-q.match_start,q.match_length-3),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=3){for(q.match_length--;q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,ne=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart,0!=--q.match_length;);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else se=b._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(se&&(V(q,!1),0===q.strm.avail_out))return 1}return q.insert=q.strstart<2?q.strstart:2,4===te?(V(q,!0),0===q.strm.avail_out?3:4):q.last_lit&&(V(q,!1),0===q.strm.avail_out)?1:2}function j(q,te){for(var ne,se,ie;;){if(q.lookahead<k){if(Z(q),q.lookahead<k&&0===te)return 1;if(0===q.lookahead)break}if(ne=0,q.lookahead>=3&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,ne=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=2,0!==ne&&q.prev_length<q.max_lazy_match&&q.strstart-ne<=q.w_size-k&&(q.match_length=G(q,ne),q.match_length<=5&&(1===q.strategy||3===q.match_length&&4096<q.strstart-q.match_start)&&(q.match_length=2)),q.prev_length>=3&&q.match_length<=q.prev_length){for(ie=q.strstart+q.lookahead-3,se=b._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-3),q.lookahead-=q.prev_length-1,q.prev_length-=2;++q.strstart<=ie&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+3-1])&q.hash_mask,ne=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),0!=--q.prev_length;);if(q.match_available=0,q.match_length=2,q.strstart++,se&&(V(q,!1),0===q.strm.avail_out))return 1}else if(q.match_available){if((se=b._tr_tally(q,0,q.window[q.strstart-1]))&&V(q,!1),q.strstart++,q.lookahead--,0===q.strm.avail_out)return 1}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(se=b._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<2?q.strstart:2,4===te?(V(q,!0),0===q.strm.avail_out?3:4):q.last_lit&&(V(q,!1),0===q.strm.avail_out)?1:2}function B(q,te,ne,se,ie){this.good_length=q,this.max_lazy=te,this.nice_length=ne,this.max_chain=se,this.func=ie}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new v.Buf16(1146),this.dyn_dtree=new v.Buf16(122),this.bl_tree=new v.Buf16(78),z(this.dyn_ltree),z(this.dyn_dtree),z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new v.Buf16(16),this.heap=new v.Buf16(573),z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new v.Buf16(573),z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ee(q){var te;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=2,(te=q.state).pending=0,te.pending_out=0,te.wrap<0&&(te.wrap=-te.wrap),te.status=te.wrap?42:C,q.adler=2===te.wrap?0:1,te.last_flush=0,b._tr_init(te),0):E(q,d)}function U(q){var ne,te=ee(q);return 0===te&&((ne=q.state).window_size=2*ne.w_size,z(ne.head),ne.max_lazy_match=m[ne.level].max_lazy,ne.good_match=m[ne.level].good_length,ne.nice_match=m[ne.level].nice_length,ne.max_chain_length=m[ne.level].max_chain,ne.strstart=0,ne.block_start=0,ne.lookahead=0,ne.insert=0,ne.match_length=ne.prev_length=2,ne.match_available=0,ne.ins_h=0),te}function $(q,te,ne,se,ie,ue){if(!q)return d;var le=1;if(-1===te&&(te=6),se<0?(le=0,se=-se):15<se&&(le=2,se-=16),ie<1||9<ie||8!==ne||se<8||15<se||te<0||9<te||ue<0||4<ue)return E(q,d);8===se&&(se=9);var de=new H;return(q.state=de).strm=q,de.wrap=le,de.gzhead=null,de.w_bits=se,de.w_size=1<<de.w_bits,de.w_mask=de.w_size-1,de.hash_bits=ie+7,de.hash_size=1<<de.hash_bits,de.hash_mask=de.hash_size-1,de.hash_shift=~~((de.hash_bits+3-1)/3),de.window=new v.Buf8(2*de.w_size),de.head=new v.Buf16(de.hash_size),de.prev=new v.Buf16(de.w_size),de.lit_bufsize=1<<ie+6,de.pending_buf_size=4*de.lit_bufsize,de.pending_buf=new v.Buf8(de.pending_buf_size),de.d_buf=1*de.lit_bufsize,de.l_buf=3*de.lit_bufsize,de.level=te,de.strategy=ue,de.method=ne,U(q)}m=[new B(0,0,0,0,function(q,te){var ne=65535;for(ne>q.pending_buf_size-5&&(ne=q.pending_buf_size-5);;){if(q.lookahead<=1){if(Z(q),0===q.lookahead&&0===te)return 1;if(0===q.lookahead)break}q.strstart+=q.lookahead,q.lookahead=0;var se=q.block_start+ne;if((0===q.strstart||q.strstart>=se)&&(q.lookahead=q.strstart-se,q.strstart=se,V(q,!1),0===q.strm.avail_out)||q.strstart-q.block_start>=q.w_size-k&&(V(q,!1),0===q.strm.avail_out))return 1}return q.insert=0,4===te?(V(q,!0),0===q.strm.avail_out?3:4):(q.strstart>q.block_start&&V(q,!1),1)}),new B(4,4,8,4,re),new B(4,5,16,8,re),new B(4,6,32,32,re),new B(4,4,16,16,j),new B(8,16,32,32,j),new B(8,16,128,128,j),new B(8,32,128,256,j),new B(32,128,258,1024,j),new B(32,258,258,4096,j)],K.deflateInit=function(q,te){return $(q,te,8,15,8,0)},K.deflateInit2=$,K.deflateReset=U,K.deflateResetKeep=ee,K.deflateSetHeader=function(q,te){return q&&q.state?2!==q.state.wrap?d:(q.state.gzhead=te,0):d},K.deflate=function(q,te){var ne,se,ie,ue;if(!q||!q.state||5<te||te<0)return q?E(q,d):d;if(se=q.state,!q.output||!q.input&&0!==q.avail_in||666===se.status&&4!==te)return E(q,0===q.avail_out?-5:d);if(se.strm=q,ne=se.last_flush,se.last_flush=te,42===se.status)if(2===se.wrap)q.adler=0,X(se,31),X(se,139),X(se,8),se.gzhead?(X(se,(se.gzhead.text?1:0)+(se.gzhead.hcrc?2:0)+(se.gzhead.extra?4:0)+(se.gzhead.name?8:0)+(se.gzhead.comment?16:0)),X(se,255&se.gzhead.time),X(se,se.gzhead.time>>8&255),X(se,se.gzhead.time>>16&255),X(se,se.gzhead.time>>24&255),X(se,9===se.level?2:2<=se.strategy||se.level<2?4:0),X(se,255&se.gzhead.os),se.gzhead.extra&&se.gzhead.extra.length&&(X(se,255&se.gzhead.extra.length),X(se,se.gzhead.extra.length>>8&255)),se.gzhead.hcrc&&(q.adler=e(q.adler,se.pending_buf,se.pending,0)),se.gzindex=0,se.status=69):(X(se,0),X(se,0),X(se,0),X(se,0),X(se,0),X(se,9===se.level?2:2<=se.strategy||se.level<2?4:0),X(se,3),se.status=C);else{var le=8+(se.w_bits-8<<4)<<8;le|=(2<=se.strategy||se.level<2?0:se.level<6?1:6===se.level?2:3)<<6,0!==se.strstart&&(le|=32),le+=31-le%31,se.status=C,J(se,le),0!==se.strstart&&(J(se,q.adler>>>16),J(se,65535&q.adler)),q.adler=1}if(69===se.status)if(se.gzhead.extra){for(ie=se.pending;se.gzindex<(65535&se.gzhead.extra.length)&&(se.pending!==se.pending_buf_size||(se.gzhead.hcrc&&se.pending>ie&&(q.adler=e(q.adler,se.pending_buf,se.pending-ie,ie)),N(q),ie=se.pending,se.pending!==se.pending_buf_size));)X(se,255&se.gzhead.extra[se.gzindex]),se.gzindex++;se.gzhead.hcrc&&se.pending>ie&&(q.adler=e(q.adler,se.pending_buf,se.pending-ie,ie)),se.gzindex===se.gzhead.extra.length&&(se.gzindex=0,se.status=73)}else se.status=73;if(73===se.status)if(se.gzhead.name){ie=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ie&&(q.adler=e(q.adler,se.pending_buf,se.pending-ie,ie)),N(q),ie=se.pending,se.pending===se.pending_buf_size)){ue=1;break}ue=se.gzindex<se.gzhead.name.length?255&se.gzhead.name.charCodeAt(se.gzindex++):0,X(se,ue)}while(0!==ue);se.gzhead.hcrc&&se.pending>ie&&(q.adler=e(q.adler,se.pending_buf,se.pending-ie,ie)),0===ue&&(se.gzindex=0,se.status=91)}else se.status=91;if(91===se.status)if(se.gzhead.comment){ie=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ie&&(q.adler=e(q.adler,se.pending_buf,se.pending-ie,ie)),N(q),ie=se.pending,se.pending===se.pending_buf_size)){ue=1;break}ue=se.gzindex<se.gzhead.comment.length?255&se.gzhead.comment.charCodeAt(se.gzindex++):0,X(se,ue)}while(0!==ue);se.gzhead.hcrc&&se.pending>ie&&(q.adler=e(q.adler,se.pending_buf,se.pending-ie,ie)),0===ue&&(se.status=103)}else se.status=103;if(103===se.status&&(se.gzhead.hcrc?(se.pending+2>se.pending_buf_size&&N(q),se.pending+2<=se.pending_buf_size&&(X(se,255&q.adler),X(se,q.adler>>8&255),q.adler=0,se.status=C)):se.status=C),0!==se.pending){if(N(q),0===q.avail_out)return se.last_flush=-1,0}else if(0===q.avail_in&&D(te)<=D(ne)&&4!==te)return E(q,-5);if(666===se.status&&0!==q.avail_in)return E(q,-5);if(0!==q.avail_in||0!==se.lookahead||0!==te&&666!==se.status){var de=2===se.strategy?function(be,_e){for(var xe;;){if(0===be.lookahead&&(Z(be),0===be.lookahead)){if(0===_e)return 1;break}if(be.match_length=0,xe=b._tr_tally(be,0,be.window[be.strstart]),be.lookahead--,be.strstart++,xe&&(V(be,!1),0===be.strm.avail_out))return 1}return be.insert=0,4===_e?(V(be,!0),0===be.strm.avail_out?3:4):be.last_lit&&(V(be,!1),0===be.strm.avail_out)?1:2}(se,te):3===se.strategy?function(be,_e){for(var xe,Ee,he,me,Se=be.window;;){if(be.lookahead<=_){if(Z(be),be.lookahead<=_&&0===_e)return 1;if(0===be.lookahead)break}if(be.match_length=0,be.lookahead>=3&&0<be.strstart&&(Ee=Se[he=be.strstart-1])===Se[++he]&&Ee===Se[++he]&&Ee===Se[++he]){me=be.strstart+_;do{}while(Ee===Se[++he]&&Ee===Se[++he]&&Ee===Se[++he]&&Ee===Se[++he]&&Ee===Se[++he]&&Ee===Se[++he]&&Ee===Se[++he]&&Ee===Se[++he]&&he<me);be.match_length=_-(me-he),be.match_length>be.lookahead&&(be.match_length=be.lookahead)}if(be.match_length>=3?(xe=b._tr_tally(be,1,be.match_length-3),be.lookahead-=be.match_length,be.strstart+=be.match_length,be.match_length=0):(xe=b._tr_tally(be,0,be.window[be.strstart]),be.lookahead--,be.strstart++),xe&&(V(be,!1),0===be.strm.avail_out))return 1}return be.insert=0,4===_e?(V(be,!0),0===be.strm.avail_out?3:4):be.last_lit&&(V(be,!1),0===be.strm.avail_out)?1:2}(se,te):m[se.level].func(se,te);if(3!==de&&4!==de||(se.status=666),1===de||3===de)return 0===q.avail_out&&(se.last_flush=-1),0;if(2===de&&(1===te?b._tr_align(se):5!==te&&(b._tr_stored_block(se,0,0,!1),3===te&&(z(se.head),0===se.lookahead&&(se.strstart=0,se.block_start=0,se.insert=0))),N(q),0===q.avail_out))return se.last_flush=-1,0}return 4!==te?0:se.wrap<=0?1:(2===se.wrap?(X(se,255&q.adler),X(se,q.adler>>8&255),X(se,q.adler>>16&255),X(se,q.adler>>24&255),X(se,255&q.total_in),X(se,q.total_in>>8&255),X(se,q.total_in>>16&255),X(se,q.total_in>>24&255)):(J(se,q.adler>>>16),J(se,65535&q.adler)),N(q),0<se.wrap&&(se.wrap=-se.wrap),0!==se.pending?0:1)},K.deflateEnd=function(q){var te;return q&&q.state?42!==(te=q.state.status)&&69!==te&&73!==te&&91!==te&&103!==te&&te!==C&&666!==te?E(q,d):(q.state=null,te===C?E(q,-3):0):d},K.deflateSetDictionary=function(q,te){var ne,se,ie,ue,le,de,be,_e,xe=te.length;if(!q||!q.state||2===(ue=(ne=q.state).wrap)||1===ue&&42!==ne.status||ne.lookahead)return d;for(1===ue&&(q.adler=h(q.adler,te,xe,0)),ne.wrap=0,xe>=ne.w_size&&(0===ue&&(z(ne.head),ne.strstart=0,ne.block_start=0,ne.insert=0),_e=new v.Buf8(ne.w_size),v.arraySet(_e,te,xe-ne.w_size,ne.w_size,0),te=_e,xe=ne.w_size),le=q.avail_in,de=q.next_in,be=q.input,q.avail_in=xe,q.next_in=0,q.input=te,Z(ne);ne.lookahead>=3;){for(se=ne.strstart,ie=ne.lookahead-2;ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[se+3-1])&ne.hash_mask,ne.prev[se&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=se,se++,--ie;);ne.strstart=se,ne.lookahead=2,Z(ne)}return ne.strstart+=ne.lookahead,ne.block_start=ne.strstart,ne.insert=ne.lookahead,ne.lookahead=0,ne.match_length=ne.prev_length=2,ne.match_available=0,q.next_in=de,q.input=be,q.avail_in=le,ne.wrap=ue,0},K.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(y,Q,K){"use strict";Q.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(y,Q,K){"use strict";Q.exports=function(m,v){var b,h,e,n,r,o,t,d,a,i,s,c,l,p,g,u,x,f,T,_,k,w,C,A,O;A=m.input,e=(h=m.next_in)+(m.avail_in-5),O=m.output,r=(n=m.next_out)-(v-m.avail_out),o=n+(m.avail_out-257),t=(b=m.state).dmax,d=b.wsize,a=b.whave,i=b.wnext,s=b.window,c=b.hold,l=b.bits,p=b.lencode,g=b.distcode,u=(1<<b.lenbits)-1,x=(1<<b.distbits)-1;e:do{l<15&&(c+=A[h++]<<l,c+=A[h++]<<(l+=8),l+=8),f=p[c&u];t:for(;;){if(c>>>=T=f>>>24,l-=T,0==(T=f>>>16&255))O[n++]=65535&f;else{if(!(16&T)){if(0==(64&T)){f=p[(65535&f)+(c&(1<<T)-1)];continue t}if(32&T){b.mode=12;break e}m.msg="invalid literal/length code",b.mode=30;break e}_=65535&f,(T&=15)&&(l<T&&(c+=A[h++]<<l,l+=8),_+=c&(1<<T)-1,c>>>=T,l-=T),l<15&&(c+=A[h++]<<l,c+=A[h++]<<(l+=8),l+=8),f=g[c&x];r:for(;;){if(c>>>=T=f>>>24,l-=T,!(16&(T=f>>>16&255))){if(0==(64&T)){f=g[(65535&f)+(c&(1<<T)-1)];continue r}m.msg="invalid distance code",b.mode=30;break e}if(k=65535&f,l<(T&=15)&&(c+=A[h++]<<l,(l+=8)<T&&(c+=A[h++]<<l,l+=8)),t<(k+=c&(1<<T)-1)){m.msg="invalid distance too far back",b.mode=30;break e}if(c>>>=T,l-=T,(T=n-r)<k){if(a<(T=k-T)&&b.sane){m.msg="invalid distance too far back",b.mode=30;break e}if(C=s,(w=0)===i){if(w+=d-T,T<_){for(_-=T;O[n++]=s[w++],--T;);w=n-k,C=O}}else if(i<T){if(w+=d+i-T,(T-=i)<_){for(_-=T;O[n++]=s[w++],--T;);if(w=0,i<_){for(_-=T=i;O[n++]=s[w++],--T;);w=n-k,C=O}}}else if(w+=i-T,T<_){for(_-=T;O[n++]=s[w++],--T;);w=n-k,C=O}for(;2<_;)O[n++]=C[w++],O[n++]=C[w++],O[n++]=C[w++],_-=3;_&&(O[n++]=C[w++],1<_&&(O[n++]=C[w++]))}else{for(w=n-k;O[n++]=O[w++],O[n++]=O[w++],O[n++]=O[w++],2<(_-=3););_&&(O[n++]=O[w++],1<_&&(O[n++]=O[w++]))}break}}break}}while(h<e&&n<o);h-=_=l>>3,c&=(1<<(l-=_<<3))-1,m.next_in=h,m.next_out=n,m.avail_in=h<e?e-h+5:5-(h-e),m.avail_out=n<o?o-n+257:257-(n-o),b.hold=c,b.bits=l}},{}],49:[function(y,Q,K){"use strict";var m=y("../utils/common"),v=y("./adler32"),b=y("./crc32"),h=y("./inffast"),e=y("./inftrees"),t=-2;function s(w){return(w>>>24&255)+(w>>>8&65280)+((65280&w)<<8)+((255&w)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(w){var C;return w&&w.state?(w.total_in=w.total_out=(C=w.state).total=0,w.msg="",C.wrap&&(w.adler=1&C.wrap),C.mode=1,C.last=0,C.havedict=0,C.dmax=32768,C.head=null,C.hold=0,C.bits=0,C.lencode=C.lendyn=new m.Buf32(852),C.distcode=C.distdyn=new m.Buf32(592),C.sane=1,C.back=-1,0):t}function p(w){var C;return w&&w.state?((C=w.state).wsize=0,C.whave=0,C.wnext=0,l(w)):t}function g(w,C){var A,O;return w&&w.state?(O=w.state,C<0?(A=0,C=-C):(A=1+(C>>4),C<48&&(C&=15)),C&&(C<8||15<C)?t:(null!==O.window&&O.wbits!==C&&(O.window=null),O.wrap=A,O.wbits=C,p(w))):t}function u(w,C){var A,O;return w?(O=new c,(w.state=O).window=null,0!==(A=g(w,C))&&(w.state=null),A):t}var x,f,T=!0;function _(w){if(T){var C;for(x=new m.Buf32(512),f=new m.Buf32(32),C=0;C<144;)w.lens[C++]=8;for(;C<256;)w.lens[C++]=9;for(;C<280;)w.lens[C++]=7;for(;C<288;)w.lens[C++]=8;for(e(1,w.lens,0,288,x,0,w.work,{bits:9}),C=0;C<32;)w.lens[C++]=5;e(2,w.lens,0,32,f,0,w.work,{bits:5}),T=!1}w.lencode=x,w.lenbits=9,w.distcode=f,w.distbits=5}function k(w,C,A,O){var P,S=w.state;return null===S.window&&(S.wsize=1<<S.wbits,S.wnext=0,S.whave=0,S.window=new m.Buf8(S.wsize)),O>=S.wsize?(m.arraySet(S.window,C,A-S.wsize,S.wsize,0),S.wnext=0,S.whave=S.wsize):(O<(P=S.wsize-S.wnext)&&(P=O),m.arraySet(S.window,C,A-O,P,S.wnext),(O-=P)?(m.arraySet(S.window,C,A-O,O,0),S.wnext=O,S.whave=S.wsize):(S.wnext+=P,S.wnext===S.wsize&&(S.wnext=0),S.whave<S.wsize&&(S.whave+=P))),0}K.inflateReset=p,K.inflateReset2=g,K.inflateResetKeep=l,K.inflateInit=function(w){return u(w,15)},K.inflateInit2=u,K.inflate=function(w,C){var A,O,P,S,E,D,z,N,V,X,J,G,Z,re,j,B,H,ee,U,$,q,te,ne,se,ie=0,ue=new m.Buf8(4),le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!w||!w.state||!w.output||!w.input&&0!==w.avail_in)return t;12===(A=w.state).mode&&(A.mode=13),E=w.next_out,P=w.output,S=w.next_in,O=w.input,N=A.hold,V=A.bits,X=D=w.avail_in,J=z=w.avail_out,te=0;e:for(;;)switch(A.mode){case 1:if(0===A.wrap){A.mode=13;break}for(;V<16;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if(2&A.wrap&&35615===N){ue[A.check=0]=255&N,ue[1]=N>>>8&255,A.check=b(A.check,ue,2,0),V=N=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&N)<<8)+(N>>8))%31){w.msg="incorrect header check",A.mode=30;break}if(8!=(15&N)){w.msg="unknown compression method",A.mode=30;break}if(V-=4,q=8+(15&(N>>>=4)),0===A.wbits)A.wbits=q;else if(q>A.wbits){w.msg="invalid window size",A.mode=30;break}A.dmax=1<<q,w.adler=A.check=1,A.mode=512&N?10:12,V=N=0;break;case 2:for(;V<16;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if(A.flags=N,8!=(255&A.flags)){w.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){w.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=N>>8&1),512&A.flags&&(ue[0]=255&N,ue[1]=N>>>8&255,A.check=b(A.check,ue,2,0)),V=N=0,A.mode=3;case 3:for(;V<32;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}A.head&&(A.head.time=N),512&A.flags&&(ue[0]=255&N,ue[1]=N>>>8&255,ue[2]=N>>>16&255,ue[3]=N>>>24&255,A.check=b(A.check,ue,4,0)),V=N=0,A.mode=4;case 4:for(;V<16;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}A.head&&(A.head.xflags=255&N,A.head.os=N>>8),512&A.flags&&(ue[0]=255&N,ue[1]=N>>>8&255,A.check=b(A.check,ue,2,0)),V=N=0,A.mode=5;case 5:if(1024&A.flags){for(;V<16;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}A.length=N,A.head&&(A.head.extra_len=N),512&A.flags&&(ue[0]=255&N,ue[1]=N>>>8&255,A.check=b(A.check,ue,2,0)),V=N=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(D<(G=A.length)&&(G=D),G&&(A.head&&(q=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),m.arraySet(A.head.extra,O,S,G,q)),512&A.flags&&(A.check=b(A.check,O,G,S)),D-=G,S+=G,A.length-=G),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(0===D)break e;for(G=0;q=O[S+G++],A.head&&q&&A.length<65536&&(A.head.name+=String.fromCharCode(q)),q&&G<D;);if(512&A.flags&&(A.check=b(A.check,O,G,S)),D-=G,S+=G,q)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(0===D)break e;for(G=0;q=O[S+G++],A.head&&q&&A.length<65536&&(A.head.comment+=String.fromCharCode(q)),q&&G<D;);if(512&A.flags&&(A.check=b(A.check,O,G,S)),D-=G,S+=G,q)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;V<16;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if(N!==(65535&A.check)){w.msg="header crc mismatch",A.mode=30;break}V=N=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),w.adler=A.check=0,A.mode=12;break;case 10:for(;V<32;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}w.adler=A.check=s(N),V=N=0,A.mode=11;case 11:if(0===A.havedict)return w.next_out=E,w.avail_out=z,w.next_in=S,w.avail_in=D,A.hold=N,A.bits=V,2;w.adler=A.check=1,A.mode=12;case 12:if(5===C||6===C)break e;case 13:if(A.last){N>>>=7&V,V-=7&V,A.mode=27;break}for(;V<3;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}switch(A.last=1&N,V-=1,3&(N>>>=1)){case 0:A.mode=14;break;case 1:if(_(A),A.mode=20,6!==C)break;N>>>=2,V-=2;break e;case 2:A.mode=17;break;case 3:w.msg="invalid block type",A.mode=30}N>>>=2,V-=2;break;case 14:for(N>>>=7&V,V-=7&V;V<32;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if((65535&N)!=(N>>>16^65535)){w.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&N,V=N=0,A.mode=15,6===C)break e;case 15:A.mode=16;case 16:if(G=A.length){if(D<G&&(G=D),z<G&&(G=z),0===G)break e;m.arraySet(P,O,S,G,E),D-=G,S+=G,z-=G,E+=G,A.length-=G;break}A.mode=12;break;case 17:for(;V<14;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if(A.nlen=257+(31&N),V-=5,A.ndist=1+(31&(N>>>=5)),V-=5,A.ncode=4+(15&(N>>>=5)),N>>>=4,V-=4,286<A.nlen||30<A.ndist){w.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;V<3;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}A.lens[le[A.have++]]=7&N,N>>>=3,V-=3}for(;A.have<19;)A.lens[le[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,te=e(0,A.lens,0,19,A.lencode,0,A.work,ne={bits:A.lenbits}),A.lenbits=ne.bits,te){w.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;B=(ie=A.lencode[N&(1<<A.lenbits)-1])>>>16&255,H=65535&ie,!((j=ie>>>24)<=V);){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if(H<16)N>>>=j,V-=j,A.lens[A.have++]=H;else{if(16===H){for(se=j+2;V<se;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if(N>>>=j,V-=j,0===A.have){w.msg="invalid bit length repeat",A.mode=30;break}q=A.lens[A.have-1],G=3+(3&N),N>>>=2,V-=2}else if(17===H){for(se=j+3;V<se;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}V-=j,q=0,G=3+(7&(N>>>=j)),N>>>=3,V-=3}else{for(se=j+7;V<se;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}V-=j,q=0,G=11+(127&(N>>>=j)),N>>>=7,V-=7}if(A.have+G>A.nlen+A.ndist){w.msg="invalid bit length repeat",A.mode=30;break}for(;G--;)A.lens[A.have++]=q}}if(30===A.mode)break;if(0===A.lens[256]){w.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,te=e(1,A.lens,0,A.nlen,A.lencode,0,A.work,ne={bits:A.lenbits}),A.lenbits=ne.bits,te){w.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,te=e(2,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,ne={bits:A.distbits}),A.distbits=ne.bits,te){w.msg="invalid distances set",A.mode=30;break}if(A.mode=20,6===C)break e;case 20:A.mode=21;case 21:if(6<=D&&258<=z){w.next_out=E,w.avail_out=z,w.next_in=S,w.avail_in=D,A.hold=N,A.bits=V,h(w,J),E=w.next_out,P=w.output,z=w.avail_out,S=w.next_in,O=w.input,D=w.avail_in,N=A.hold,V=A.bits,12===A.mode&&(A.back=-1);break}for(A.back=0;B=(ie=A.lencode[N&(1<<A.lenbits)-1])>>>16&255,H=65535&ie,!((j=ie>>>24)<=V);){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if(B&&0==(240&B)){for(ee=j,U=B,$=H;B=(ie=A.lencode[$+((N&(1<<ee+U)-1)>>ee)])>>>16&255,H=65535&ie,!(ee+(j=ie>>>24)<=V);){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}N>>>=ee,V-=ee,A.back+=ee}if(N>>>=j,V-=j,A.back+=j,A.length=H,0===B){A.mode=26;break}if(32&B){A.back=-1,A.mode=12;break}if(64&B){w.msg="invalid literal/length code",A.mode=30;break}A.extra=15&B,A.mode=22;case 22:if(A.extra){for(se=A.extra;V<se;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}A.length+=N&(1<<A.extra)-1,N>>>=A.extra,V-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;B=(ie=A.distcode[N&(1<<A.distbits)-1])>>>16&255,H=65535&ie,!((j=ie>>>24)<=V);){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if(0==(240&B)){for(ee=j,U=B,$=H;B=(ie=A.distcode[$+((N&(1<<ee+U)-1)>>ee)])>>>16&255,H=65535&ie,!(ee+(j=ie>>>24)<=V);){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}N>>>=ee,V-=ee,A.back+=ee}if(N>>>=j,V-=j,A.back+=j,64&B){w.msg="invalid distance code",A.mode=30;break}A.offset=H,A.extra=15&B,A.mode=24;case 24:if(A.extra){for(se=A.extra;V<se;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}A.offset+=N&(1<<A.extra)-1,N>>>=A.extra,V-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){w.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(0===z)break e;if(A.offset>(G=J-z)){if((G=A.offset-G)>A.whave&&A.sane){w.msg="invalid distance too far back",A.mode=30;break}Z=G>A.wnext?A.wsize-(G-=A.wnext):A.wnext-G,G>A.length&&(G=A.length),re=A.window}else re=P,Z=E-A.offset,G=A.length;for(z<G&&(G=z),z-=G,A.length-=G;P[E++]=re[Z++],--G;);0===A.length&&(A.mode=21);break;case 26:if(0===z)break e;P[E++]=A.length,z--,A.mode=21;break;case 27:if(A.wrap){for(;V<32;){if(0===D)break e;D--,N|=O[S++]<<V,V+=8}if(w.total_out+=J-=z,A.total+=J,J&&(w.adler=A.check=A.flags?b(A.check,P,J,E-J):v(A.check,P,J,E-J)),J=z,(A.flags?N:s(N))!==A.check){w.msg="incorrect data check",A.mode=30;break}V=N=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;V<32;){if(0===D)break e;D--,N+=O[S++]<<V,V+=8}if(N!==(4294967295&A.total)){w.msg="incorrect length check",A.mode=30;break}V=N=0}A.mode=29;case 29:te=1;break e;case 30:te=-3;break e;case 31:return-4;default:return t}return w.next_out=E,w.avail_out=z,w.next_in=S,w.avail_in=D,A.hold=N,A.bits=V,(A.wsize||J!==w.avail_out&&A.mode<30&&(A.mode<27||4!==C))&&k(w,w.output,w.next_out,J-w.avail_out)?(A.mode=31,-4):(J-=w.avail_out,w.total_in+=X-=w.avail_in,w.total_out+=J,A.total+=J,A.wrap&&J&&(w.adler=A.check=A.flags?b(A.check,P,J,w.next_out-J):v(A.check,P,J,w.next_out-J)),w.data_type=A.bits+(A.last?64:0)+(12===A.mode?128:0)+(20===A.mode||15===A.mode?256:0),(0==X&&0===J||4===C)&&0===te&&(te=-5),te)},K.inflateEnd=function(w){if(!w||!w.state)return t;var C=w.state;return C.window&&(C.window=null),w.state=null,0},K.inflateGetHeader=function(w,C){var A;return w&&w.state?0==(2&(A=w.state).wrap)?t:((A.head=C).done=!1,0):t},K.inflateSetDictionary=function(w,C){var A,O=C.length;return w&&w.state?0!==(A=w.state).wrap&&11!==A.mode?t:11===A.mode&&v(1,C,O,0)!==A.check?-3:k(w,C,O,O)?(A.mode=31,-4):(A.havedict=1,0):t},K.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(y,Q,K){"use strict";var m=y("../utils/common"),v=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],b=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Q.exports=function(n,r,o,t,d,a,i,s){var c,l,p,g,u,x,f,T,_,k=s.bits,w=0,C=0,A=0,O=0,P=0,S=0,E=0,D=0,z=0,N=0,V=null,X=0,J=new m.Buf16(16),G=new m.Buf16(16),Z=null,re=0;for(w=0;w<=15;w++)J[w]=0;for(C=0;C<t;C++)J[r[o+C]]++;for(P=k,O=15;1<=O&&0===J[O];O--);if(O<P&&(P=O),0===O)return d[a++]=20971520,d[a++]=20971520,s.bits=1,0;for(A=1;A<O&&0===J[A];A++);for(P<A&&(P=A),w=D=1;w<=15;w++)if(D<<=1,(D-=J[w])<0)return-1;if(0<D&&(0===n||1!==O))return-1;for(G[1]=0,w=1;w<15;w++)G[w+1]=G[w]+J[w];for(C=0;C<t;C++)0!==r[o+C]&&(i[G[r[o+C]]++]=C);if(x=0===n?(V=Z=i,19):1===n?(V=v,X-=257,Z=b,re-=257,256):(V=h,Z=e,-1),w=A,u=a,E=C=N=0,p=-1,g=(z=1<<(S=P))-1,1===n&&852<z||2===n&&592<z)return 1;for(;;){for(f=w-E,_=i[C]<x?(T=0,i[C]):i[C]>x?(T=Z[re+i[C]],V[X+i[C]]):(T=96,0),c=1<<w-E,A=l=1<<S;d[u+(N>>E)+(l-=c)]=f<<24|T<<16|_|0,0!==l;);for(c=1<<w-1;N&c;)c>>=1;if(0!==c?(N&=c-1,N+=c):N=0,C++,0==--J[w]){if(w===O)break;w=r[o+i[C]]}if(P<w&&(N&g)!==p){for(0===E&&(E=P),u+=A,D=1<<(S=w-E);S+E<O&&!((D-=J[S+E])<=0);)S++,D<<=1;if(z+=1<<S,1===n&&852<z||2===n&&592<z)return 1;d[p=N&g]=P<<24|S<<16|u-a|0}}return 0!==N&&(d[u+N]=w-E<<24|64<<16|0),s.bits=P,0}},{"../utils/common":41}],51:[function(y,Q,K){"use strict";Q.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(y,Q,K){"use strict";var m=y("../utils/common");function h(ie){for(var ue=ie.length;0<=--ue;)ie[ue]=0}var r=256,o=286,t=30,i=15,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],f=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(576);h(k);var w=new Array(60);h(w);var C=new Array(512);h(C);var A=new Array(256);h(A);var O=new Array(29);h(O);var P,S,E,D=new Array(t);function z(ie,ue,le,de,be){this.static_tree=ie,this.extra_bits=ue,this.extra_base=le,this.elems=de,this.max_length=be,this.has_stree=ie&&ie.length}function N(ie,ue){this.dyn_tree=ie,this.max_code=0,this.stat_desc=ue}function V(ie){return ie<256?C[ie]:C[256+(ie>>>7)]}function X(ie,ue){ie.pending_buf[ie.pending++]=255&ue,ie.pending_buf[ie.pending++]=ue>>>8&255}function J(ie,ue,le){ie.bi_valid>16-le?(ie.bi_buf|=ue<<ie.bi_valid&65535,X(ie,ie.bi_buf),ie.bi_buf=ue>>16-ie.bi_valid,ie.bi_valid+=le-16):(ie.bi_buf|=ue<<ie.bi_valid&65535,ie.bi_valid+=le)}function G(ie,ue,le){J(ie,le[2*ue],le[2*ue+1])}function Z(ie,ue){for(var le=0;le|=1&ie,ie>>>=1,le<<=1,0<--ue;);return le>>>1}function re(ie,ue,le){var de,be,_e=new Array(16),xe=0;for(de=1;de<=i;de++)_e[de]=xe=xe+le[de-1]<<1;for(be=0;be<=ue;be++){var Ee=ie[2*be+1];0!==Ee&&(ie[2*be]=Z(_e[Ee]++,Ee))}}function j(ie){var ue;for(ue=0;ue<o;ue++)ie.dyn_ltree[2*ue]=0;for(ue=0;ue<t;ue++)ie.dyn_dtree[2*ue]=0;for(ue=0;ue<19;ue++)ie.bl_tree[2*ue]=0;ie.dyn_ltree[512]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function B(ie){8<ie.bi_valid?X(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function H(ie,ue,le,de){var be=2*ue,_e=2*le;return ie[be]<ie[_e]||ie[be]===ie[_e]&&de[ue]<=de[le]}function ee(ie,ue,le){for(var de=ie.heap[le],be=le<<1;be<=ie.heap_len&&(be<ie.heap_len&&H(ue,ie.heap[be+1],ie.heap[be],ie.depth)&&be++,!H(ue,de,ie.heap[be],ie.depth));)ie.heap[le]=ie.heap[be],le=be,be<<=1;ie.heap[le]=de}function U(ie,ue,le){var de,be,_e,xe,Ee=0;if(0!==ie.last_lit)for(;de=ie.pending_buf[ie.d_buf+2*Ee]<<8|ie.pending_buf[ie.d_buf+2*Ee+1],be=ie.pending_buf[ie.l_buf+Ee],Ee++,0===de?G(ie,be,ue):(G(ie,(_e=A[be])+r+1,ue),0!==(xe=x[_e])&&J(ie,be-=O[_e],xe),G(ie,_e=V(--de),le),0!==(xe=f[_e])&&J(ie,de-=D[_e],xe)),Ee<ie.last_lit;);G(ie,256,ue)}function $(ie,ue){var le,de,be,_e=ue.dyn_tree,xe=ue.stat_desc.static_tree,Ee=ue.stat_desc.has_stree,he=ue.stat_desc.elems,me=-1;for(ie.heap_len=0,ie.heap_max=573,le=0;le<he;le++)0!==_e[2*le]?(ie.heap[++ie.heap_len]=me=le,ie.depth[le]=0):_e[2*le+1]=0;for(;ie.heap_len<2;)_e[2*(be=ie.heap[++ie.heap_len]=me<2?++me:0)]=1,ie.depth[be]=0,ie.opt_len--,Ee&&(ie.static_len-=xe[2*be+1]);for(ue.max_code=me,le=ie.heap_len>>1;1<=le;le--)ee(ie,_e,le);for(be=he;le=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],ee(ie,_e,1),de=ie.heap[1],ie.heap[--ie.heap_max]=le,ie.heap[--ie.heap_max]=de,_e[2*be]=_e[2*le]+_e[2*de],ie.depth[be]=(ie.depth[le]>=ie.depth[de]?ie.depth[le]:ie.depth[de])+1,_e[2*le+1]=_e[2*de+1]=be,ie.heap[1]=be++,ee(ie,_e,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],function(Se,Me){var Ie,Fe,Ne,De,$e,Re,ze=Me.dyn_tree,Ue=Me.max_code,je=Me.stat_desc.static_tree,rt=Me.stat_desc.has_stree,ut=Me.stat_desc.extra_bits,gt=Me.stat_desc.extra_base,At=Me.stat_desc.max_length,_t=0;for(De=0;De<=i;De++)Se.bl_count[De]=0;for(ze[2*Se.heap[Se.heap_max]+1]=0,Ie=Se.heap_max+1;Ie<573;Ie++)At<(De=ze[2*ze[2*(Fe=Se.heap[Ie])+1]+1]+1)&&(De=At,_t++),ze[2*Fe+1]=De,Ue<Fe||(Se.bl_count[De]++,$e=0,gt<=Fe&&($e=ut[Fe-gt]),Se.opt_len+=(Re=ze[2*Fe])*(De+$e),rt&&(Se.static_len+=Re*(je[2*Fe+1]+$e)));if(0!==_t){do{for(De=At-1;0===Se.bl_count[De];)De--;Se.bl_count[De]--,Se.bl_count[De+1]+=2,Se.bl_count[At]--,_t-=2}while(0<_t);for(De=At;0!==De;De--)for(Fe=Se.bl_count[De];0!==Fe;)Ue<(Ne=Se.heap[--Ie])||(ze[2*Ne+1]!==De&&(Se.opt_len+=(De-ze[2*Ne+1])*ze[2*Ne],ze[2*Ne+1]=De),Fe--)}}(ie,ue),re(_e,me,ie.bl_count)}function q(ie,ue,le){var de,be,_e=-1,xe=ue[1],Ee=0,he=7,me=4;for(0===xe&&(he=138,me=3),ue[2*(le+1)+1]=65535,de=0;de<=le;de++)be=xe,xe=ue[2*(de+1)+1],++Ee<he&&be===xe||(Ee<me?ie.bl_tree[2*be]+=Ee:0!==be?(be!==_e&&ie.bl_tree[2*be]++,ie.bl_tree[32]++):Ee<=10?ie.bl_tree[34]++:ie.bl_tree[36]++,_e=be,me=(Ee=0)===xe?(he=138,3):be===xe?(he=6,3):(he=7,4))}function te(ie,ue,le){var de,be,_e=-1,xe=ue[1],Ee=0,he=7,me=4;for(0===xe&&(he=138,me=3),de=0;de<=le;de++)if(be=xe,xe=ue[2*(de+1)+1],!(++Ee<he&&be===xe)){if(Ee<me)for(;G(ie,be,ie.bl_tree),0!=--Ee;);else 0!==be?(be!==_e&&(G(ie,be,ie.bl_tree),Ee--),G(ie,16,ie.bl_tree),J(ie,Ee-3,2)):Ee<=10?(G(ie,17,ie.bl_tree),J(ie,Ee-3,3)):(G(ie,18,ie.bl_tree),J(ie,Ee-11,7));_e=be,me=(Ee=0)===xe?(he=138,3):be===xe?(he=6,3):(he=7,4)}}h(D);var ne=!1;function se(ie,ue,le,de){var be,_e,xe;J(ie,0+(de?1:0),3),_e=ue,xe=le,B(be=ie),X(be,xe),X(be,~xe),m.arraySet(be.pending_buf,be.window,_e,xe,be.pending),be.pending+=xe}K._tr_init=function(ie){ne||(function(){var ue,le,de,be,_e,xe=new Array(16);for(be=de=0;be<28;be++)for(O[be]=de,ue=0;ue<1<<x[be];ue++)A[de++]=be;for(A[de-1]=be,be=_e=0;be<16;be++)for(D[be]=_e,ue=0;ue<1<<f[be];ue++)C[_e++]=be;for(_e>>=7;be<t;be++)for(D[be]=_e<<7,ue=0;ue<1<<f[be]-7;ue++)C[256+_e++]=be;for(le=0;le<=i;le++)xe[le]=0;for(ue=0;ue<=143;)k[2*ue+1]=8,ue++,xe[8]++;for(;ue<=255;)k[2*ue+1]=9,ue++,xe[9]++;for(;ue<=279;)k[2*ue+1]=7,ue++,xe[7]++;for(;ue<=287;)k[2*ue+1]=8,ue++,xe[8]++;for(re(k,287,xe),ue=0;ue<t;ue++)w[2*ue+1]=5,w[2*ue]=Z(ue,5);P=new z(k,x,257,o,i),S=new z(w,f,0,t,i),E=new z(new Array(0),T,0,19,7)}(),ne=!0),ie.l_desc=new N(ie.dyn_ltree,P),ie.d_desc=new N(ie.dyn_dtree,S),ie.bl_desc=new N(ie.bl_tree,E),ie.bi_buf=0,ie.bi_valid=0,j(ie)},K._tr_stored_block=se,K._tr_flush_block=function(ie,ue,le,de){var be,_e,xe=0;0<ie.level?(2===ie.strm.data_type&&(ie.strm.data_type=function(Ee){var he,me=4093624447;for(he=0;he<=31;he++,me>>>=1)if(1&me&&0!==Ee.dyn_ltree[2*he])return 0;if(0!==Ee.dyn_ltree[18]||0!==Ee.dyn_ltree[20]||0!==Ee.dyn_ltree[26])return 1;for(he=32;he<r;he++)if(0!==Ee.dyn_ltree[2*he])return 1;return 0}(ie)),$(ie,ie.l_desc),$(ie,ie.d_desc),xe=function(Ee){var he;for(q(Ee,Ee.dyn_ltree,Ee.l_desc.max_code),q(Ee,Ee.dyn_dtree,Ee.d_desc.max_code),$(Ee,Ee.bl_desc),he=18;3<=he&&0===Ee.bl_tree[2*_[he]+1];he--);return Ee.opt_len+=3*(he+1)+5+5+4,he}(ie),(_e=ie.static_len+3+7>>>3)<=(be=ie.opt_len+3+7>>>3)&&(be=_e)):be=_e=le+5,le+4<=be&&-1!==ue?se(ie,ue,le,de):4===ie.strategy||_e===be?(J(ie,2+(de?1:0),3),U(ie,k,w)):(J(ie,4+(de?1:0),3),function(Ee,he,me,Se){var Me;for(J(Ee,he-257,5),J(Ee,me-1,5),J(Ee,Se-4,4),Me=0;Me<Se;Me++)J(Ee,Ee.bl_tree[2*_[Me]+1],3);te(Ee,Ee.dyn_ltree,he-1),te(Ee,Ee.dyn_dtree,me-1)}(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,xe+1),U(ie,ie.dyn_ltree,ie.dyn_dtree)),j(ie),de&&B(ie)},K._tr_tally=function(ie,ue,le){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=ue>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&ue,ie.pending_buf[ie.l_buf+ie.last_lit]=255&le,ie.last_lit++,0===ue?ie.dyn_ltree[2*le]++:(ie.matches++,ue--,ie.dyn_ltree[2*(A[le]+r+1)]++,ie.dyn_dtree[2*V(ue)]++),ie.last_lit===ie.lit_bufsize-1},K._tr_align=function(ie){var ue;J(ie,2,3),G(ie,256,k),16===(ue=ie).bi_valid?(X(ue,ue.bi_buf),ue.bi_buf=0,ue.bi_valid=0):8<=ue.bi_valid&&(ue.pending_buf[ue.pending++]=255&ue.bi_buf,ue.bi_buf>>=8,ue.bi_valid-=8)}},{"../utils/common":41}],53:[function(y,Q,K){"use strict";Q.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(y,Q,K){(function(m){!function(v,b){"use strict";if(!v.setImmediate){var h,e,n,r,o=1,t={},d=!1,a=v.document,i=Object.getPrototypeOf&&Object.getPrototypeOf(v);i=i&&i.setTimeout?i:v,h="[object process]"==={}.toString.call(v.process)?function(p){process.nextTick(function(){c(p)})}:function(){if(v.postMessage&&!v.importScripts){var p=!0,g=v.onmessage;return v.onmessage=function(){p=!1},v.postMessage("","*"),v.onmessage=g,p}}()?(r="setImmediate$"+Math.random()+"$",v.addEventListener?v.addEventListener("message",l,!1):v.attachEvent("onmessage",l),function(p){v.postMessage(r+p,"*")}):v.MessageChannel?((n=new MessageChannel).port1.onmessage=function(p){c(p.data)},function(p){n.port2.postMessage(p)}):a&&"onreadystatechange"in a.createElement("script")?(e=a.documentElement,function(p){var g=a.createElement("script");g.onreadystatechange=function(){c(p),g.onreadystatechange=null,e.removeChild(g),g=null},e.appendChild(g)}):function(p){setTimeout(c,0,p)},i.setImmediate=function(p){"function"!=typeof p&&(p=new Function(""+p));for(var g=new Array(arguments.length-1),u=0;u<g.length;u++)g[u]=arguments[u+1];return t[o]={callback:p,args:g},h(o),o++},i.clearImmediate=s}function s(p){delete t[p]}function c(p){if(d)setTimeout(c,0,p);else{var g=t[p];if(g){d=!0;try{!function(u){var x=u.callback,f=u.args;switch(f.length){case 0:x();break;case 1:x(f[0]);break;case 2:x(f[0],f[1]);break;case 3:x(f[0],f[1],f[2]);break;default:x.apply(undefined,f)}}(g)}finally{s(p),d=!1}}}}function l(p){p.source===v&&"string"==typeof p.data&&0===p.data.indexOf(r)&&c(+p.data.slice(r.length))}}(typeof self>"u"?void 0===m?this:m:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)},9102:bl=>{bl.exports=function y(Q,K,m){function v(e,n){if(!K[e]){if(!Q[e]){if(b)return b(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var t=K[e]={exports:{}};Q[e][0].call(t.exports,function(d){return v(Q[e][1][d]||d)},t,t.exports,y,Q,K,m)}return K[e].exports}for(var b=void 0,h=0;h<m.length;h++)v(m[h]);return v}({1:[function(y,Q,K){"use strict";var m=y("../src/lib"),v={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var b in v){var h=b.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");m.addStyleRule(h,v[b])}},{"../src/lib":515}],2:[function(y,Q,K){"use strict";Q.exports=y("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/box")},{"../src/traces/box":688}],6:[function(y,Q,K){"use strict";Q.exports=y("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(y,Q,K){"use strict";Q.exports=y("../src/core")},{"../src/core":493}],15:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(y,Q,K){"use strict";Q.exports=y("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(y,Q,K){"use strict";Q.exports=y("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/image")},{"../src/traces/image":861}],27:[function(y,Q,K){"use strict";var m=y("./core");m.register([y("./bar"),y("./box"),y("./heatmap"),y("./histogram"),y("./histogram2d"),y("./histogram2dcontour"),y("./contour"),y("./scatterternary"),y("./violin"),y("./funnel"),y("./waterfall"),y("./image"),y("./pie"),y("./sunburst"),y("./treemap"),y("./icicle"),y("./funnelarea"),y("./scatter3d"),y("./surface"),y("./isosurface"),y("./volume"),y("./mesh3d"),y("./cone"),y("./streamtube"),y("./scattergeo"),y("./choropleth"),y("./scattergl"),y("./splom"),y("./pointcloud"),y("./heatmapgl"),y("./parcoords"),y("./parcats"),y("./scattermapbox"),y("./choroplethmapbox"),y("./densitymapbox"),y("./sankey"),y("./indicator"),y("./table"),y("./carpet"),y("./scattercarpet"),y("./contourcarpet"),y("./ohlc"),y("./candlestick"),y("./scatterpolar"),y("./scatterpolargl"),y("./barpolar"),y("./scattersmith"),y("./aggregate"),y("./filter"),y("./groupby"),y("./sort"),y("./calendars")]),Q.exports=m},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(y,Q,K){"use strict";Q.exports=y("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/table")},{"../src/traces/table":1082}],52:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(y,Q,K){"use strict";Q.exports=y("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(y,Q,K){var m,v;m=this,v=function(m,v,b,h,e){"use strict";function n(te){return te.target.depth}function r(te,ne){return te.sourceLinks.length?te.depth:ne-1}function o(te){return function(){return te}}e=e&&e.hasOwnProperty("default")?e.default:e;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(te){return typeof te}:function(te){return te&&"function"==typeof Symbol&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te};function d(te,ne){return i(te.source,ne.source)||te.index-ne.index}function a(te,ne){return i(te.target,ne.target)||te.index-ne.index}function i(te,ne){return te.partOfCycle===ne.partOfCycle?te.y0-ne.y0:"top"===te.circularLinkType||"bottom"===ne.circularLinkType?-1:1}function s(te){return te.value}function c(te){return(te.y0+te.y1)/2}function l(te){return c(te.source)}function p(te){return c(te.target)}function g(te){return te.index}function u(te){return te.nodes}function x(te){return te.links}function f(te,ne){var se=te.get(ne);if(!se)throw new Error("missing: "+ne);return se}function T(te,ne){return ne(te)}function _(te,ne,se){var ie=0;if(null===se){for(var ue=[],le=0;le<te.links.length;le++){var de=te.links[le],be=de.source.index,_e=de.target.index;ue[be]||(ue[be]=[]),ue[_e]||(ue[_e]=[]),-1===ue[be].indexOf(_e)&&ue[be].push(_e)}var xe=e(ue);xe.sort(function(me,Se){return me.length-Se.length});var Ee={};for(le=0;le<xe.length;le++){var he=xe[le].slice(-2);Ee[he[0]]||(Ee[he[0]]={}),Ee[he[0]][he[1]]=!0}te.links.forEach(function(me){var Se=me.target.index,Me=me.source.index;Se===Me||Ee[Me]&&Ee[Me][Se]?(me.circular=!0,me.circularLinkID=ie,ie+=1):me.circular=!1})}else te.links.forEach(function(me){me.source[se]<me.target[se]?me.circular=!1:(me.circular=!0,me.circularLinkID=ie,ie+=1)})}function k(te,ne){var se=0,ie=0;te.links.forEach(function(ue){ue.circular&&(ue.circularLinkType=ue.source.circularLinkType||ue.target.circularLinkType?ue.source.circularLinkType?ue.source.circularLinkType:ue.target.circularLinkType:se<ie?"top":"bottom","top"==ue.circularLinkType?se+=1:ie+=1,te.nodes.forEach(function(le){T(le,ne)!=T(ue.source,ne)&&T(le,ne)!=T(ue.target,ne)||(le.circularLinkType=ue.circularLinkType)}))}),te.links.forEach(function(ue){ue.circular&&(ue.source.circularLinkType==ue.target.circularLinkType&&(ue.circularLinkType=ue.source.circularLinkType),$(ue,ne)&&(ue.circularLinkType=ue.source.circularLinkType))})}function w(te){var ne=Math.abs(te.y1-te.y0),se=Math.abs(te.target.x0-te.source.x1);return Math.atan(se/ne)}function C(te,ne){var se=0;te.sourceLinks.forEach(function(ue){se=ue.circular&&!$(ue,ne)?se+1:se});var ie=0;return te.targetLinks.forEach(function(ue){ie=ue.circular&&!$(ue,ne)?ie+1:ie}),se+ie}function A(te){var se=0;te.source.sourceLinks.forEach(function(le){se=le.circular?se+1:se});var ue=0;return te.target.targetLinks.forEach(function(le){ue=le.circular?ue+1:ue}),!(se>1||ue>1)}function O(te,ne,se){return te.sort(S),te.forEach(function(ie,ue){var le,de,be=0;if($(ie,se)&&A(ie))ie.circularPathData.verticalBuffer=be+ie.width/2;else{for(var _e=0;_e<ue;_e++)if(!((le=te[ue]).source.column<(de=te[_e]).target.column||le.target.column>de.source.column)){var xe=te[_e].circularPathData.verticalBuffer+te[_e].width/2+ne;be=xe>be?xe:be}ie.circularPathData.verticalBuffer=be+ie.width/2}}),te}function P(te,ne,se,ie){var ue=v.min(te.links,function(le){return le.source.y0});te.links.forEach(function(le){le.circular&&(le.circularPathData={})}),O(te.links.filter(function(le){return"top"==le.circularLinkType}),ne,ie),O(te.links.filter(function(le){return"bottom"==le.circularLinkType}),ne,ie),te.links.forEach(function(le){if(le.circular){if(le.circularPathData.arcRadius=le.width+10,le.circularPathData.leftNodeBuffer=5,le.circularPathData.rightNodeBuffer=5,le.circularPathData.sourceWidth=le.source.x1-le.source.x0,le.circularPathData.sourceX=le.source.x0+le.circularPathData.sourceWidth,le.circularPathData.targetX=le.target.x0,le.circularPathData.sourceY=le.y0,le.circularPathData.targetY=le.y1,$(le,ie)&&A(le))le.circularPathData.leftSmallArcRadius=10+le.width/2,le.circularPathData.leftLargeArcRadius=10+le.width/2,le.circularPathData.rightSmallArcRadius=10+le.width/2,le.circularPathData.rightLargeArcRadius=10+le.width/2,"bottom"==le.circularLinkType?(le.circularPathData.verticalFullExtent=le.source.y1+25+le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.rightLargeArcRadius):(le.circularPathData.verticalFullExtent=le.source.y0-25-le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.rightLargeArcRadius);else{var de=le.source.column,be=le.circularLinkType,_e=te.links.filter(function(he){return he.source.column==de&&he.circularLinkType==be});_e.sort("bottom"==le.circularLinkType?D:E);var xe=0;_e.forEach(function(he,me){he.circularLinkID==le.circularLinkID&&(le.circularPathData.leftSmallArcRadius=10+le.width/2+xe,le.circularPathData.leftLargeArcRadius=10+le.width/2+me*ne+xe),xe+=he.width}),de=le.target.column,(_e=te.links.filter(function(he){return he.target.column==de&&he.circularLinkType==be})).sort("bottom"==le.circularLinkType?N:z),xe=0,_e.forEach(function(he,me){he.circularLinkID==le.circularLinkID&&(le.circularPathData.rightSmallArcRadius=10+le.width/2+xe,le.circularPathData.rightLargeArcRadius=10+le.width/2+me*ne+xe),xe+=he.width}),"bottom"==le.circularLinkType?(le.circularPathData.verticalFullExtent=Math.max(se,le.source.y1,le.target.y1)+25+le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.rightLargeArcRadius):(le.circularPathData.verticalFullExtent=ue-25-le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.rightLargeArcRadius)}le.circularPathData.leftInnerExtent=le.circularPathData.sourceX+le.circularPathData.leftNodeBuffer,le.circularPathData.rightInnerExtent=le.circularPathData.targetX-le.circularPathData.rightNodeBuffer,le.circularPathData.leftFullExtent=le.circularPathData.sourceX+le.circularPathData.leftLargeArcRadius+le.circularPathData.leftNodeBuffer,le.circularPathData.rightFullExtent=le.circularPathData.targetX-le.circularPathData.rightLargeArcRadius-le.circularPathData.rightNodeBuffer}if(le.circular)le.path="top"==(he=le).circularLinkType?"M"+he.circularPathData.sourceX+" "+he.circularPathData.sourceY+" L"+he.circularPathData.leftInnerExtent+" "+he.circularPathData.sourceY+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftSmallArcRadius+" 0 0 0 "+he.circularPathData.leftFullExtent+" "+(he.circularPathData.sourceY-he.circularPathData.leftSmallArcRadius)+" L"+he.circularPathData.leftFullExtent+" "+he.circularPathData.verticalLeftInnerExtent+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftLargeArcRadius+" 0 0 0 "+he.circularPathData.leftInnerExtent+" "+he.circularPathData.verticalFullExtent+" L"+he.circularPathData.rightInnerExtent+" "+he.circularPathData.verticalFullExtent+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightLargeArcRadius+" 0 0 0 "+he.circularPathData.rightFullExtent+" "+he.circularPathData.verticalRightInnerExtent+" L"+he.circularPathData.rightFullExtent+" "+(he.circularPathData.targetY-he.circularPathData.rightSmallArcRadius)+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightSmallArcRadius+" 0 0 0 "+he.circularPathData.rightInnerExtent+" "+he.circularPathData.targetY+" L"+he.circularPathData.targetX+" "+he.circularPathData.targetY:"M"+he.circularPathData.sourceX+" "+he.circularPathData.sourceY+" L"+he.circularPathData.leftInnerExtent+" "+he.circularPathData.sourceY+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftSmallArcRadius+" 0 0 1 "+he.circularPathData.leftFullExtent+" "+(he.circularPathData.sourceY+he.circularPathData.leftSmallArcRadius)+" L"+he.circularPathData.leftFullExtent+" "+he.circularPathData.verticalLeftInnerExtent+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftLargeArcRadius+" 0 0 1 "+he.circularPathData.leftInnerExtent+" "+he.circularPathData.verticalFullExtent+" L"+he.circularPathData.rightInnerExtent+" "+he.circularPathData.verticalFullExtent+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightLargeArcRadius+" 0 0 1 "+he.circularPathData.rightFullExtent+" "+he.circularPathData.verticalRightInnerExtent+" L"+he.circularPathData.rightFullExtent+" "+(he.circularPathData.targetY+he.circularPathData.rightSmallArcRadius)+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightSmallArcRadius+" 0 0 1 "+he.circularPathData.rightInnerExtent+" "+he.circularPathData.targetY+" L"+he.circularPathData.targetX+" "+he.circularPathData.targetY;else{var Ee=h.linkHorizontal().source(function(he){return[he.source.x0+(he.source.x1-he.source.x0),he.y0]}).target(function(he){return[he.target.x0,he.y1]});le.path=Ee(le)}var he})}function S(te,ne){return V(te)==V(ne)?"bottom"==te.circularLinkType?D(te,ne):E(te,ne):V(ne)-V(te)}function E(te,ne){return te.y0-ne.y0}function D(te,ne){return ne.y0-te.y0}function z(te,ne){return te.y1-ne.y1}function N(te,ne){return ne.y1-te.y1}function V(te){return te.target.column-te.source.column}function X(te){return te.target.x0-te.source.x1}function J(te,ne){var se=w(te),ie=X(ne)/Math.tan(se);return"up"==U(te)?te.y1+ie:te.y1-ie}function G(te,ne){var se=w(te),ie=X(ne)/Math.tan(se);return"up"==U(te)?te.y1-ie:te.y1+ie}function Z(te,ne,se,ie){te.links.forEach(function(ue){if(!ue.circular&&ue.target.column-ue.source.column>1){var le=ue.source.column+1,de=ue.target.column-1,be=1,_e=de-le+1;for(be=1;le<=de;le++,be++)te.nodes.forEach(function(xe){if(xe.column==le){var Ee,he=be/(_e+1),me=Math.pow(1-he,3),Se=3*he*Math.pow(1-he,2),Me=3*Math.pow(he,2)*(1-he),Ie=Math.pow(he,3),Fe=me*ue.y0+Se*ue.y0+Me*ue.y1+Ie*ue.y1,Ne=Fe-ue.width/2,De=Fe+ue.width/2;Ne>xe.y0&&Ne<xe.y1?(Ee=xe.y1-Ne+10,xe=j(xe,Ee="bottom"==xe.circularLinkType?Ee:-Ee,ne,se),te.nodes.forEach(function($e){T($e,ie)!=T(xe,ie)&&$e.column==xe.column&&re(xe,$e)&&j($e,Ee,ne,se)})):(De>xe.y0&&De<xe.y1||Ne<xe.y0&&De>xe.y1)&&(xe=j(xe,Ee=De-xe.y0+10,ne,se),te.nodes.forEach(function($e){T($e,ie)!=T(xe,ie)&&$e.column==xe.column&&$e.y0<xe.y1&&$e.y1>xe.y1&&j($e,Ee,ne,se)}))}})}})}function re(te,ne){return te.y0>ne.y0&&te.y0<ne.y1||te.y1>ne.y0&&te.y1<ne.y1||te.y0<ne.y0&&te.y1>ne.y1}function j(te,ne,se,ie){return te.y0+ne>=se&&te.y1+ne<=ie&&(te.y0=te.y0+ne,te.y1=te.y1+ne,te.targetLinks.forEach(function(ue){ue.y1=ue.y1+ne}),te.sourceLinks.forEach(function(ue){ue.y0=ue.y0+ne})),te}function B(te,ne,se,ie){te.nodes.forEach(function(ue){ie&&ue.y+(ue.y1-ue.y0)>ne&&(ue.y=ue.y-(ue.y+(ue.y1-ue.y0)-ne));var le=te.links.filter(function(_e){return T(_e.source,se)==T(ue,se)}),de=le.length;de>1&&le.sort(function(_e,xe){if(!_e.circular&&!xe.circular){if(_e.target.column==xe.target.column||!ee(_e,xe))return _e.y1-xe.y1;if(_e.target.column>xe.target.column){var Ee=G(xe,_e);return _e.y1-Ee}if(xe.target.column>_e.target.column)return G(_e,xe)-xe.y1}return _e.circular&&!xe.circular?"top"==_e.circularLinkType?-1:1:xe.circular&&!_e.circular?"top"==xe.circularLinkType?1:-1:_e.circular&&xe.circular?_e.circularLinkType===xe.circularLinkType&&"top"==_e.circularLinkType?_e.target.column===xe.target.column?_e.target.y1-xe.target.y1:xe.target.column-_e.target.column:_e.circularLinkType===xe.circularLinkType&&"bottom"==_e.circularLinkType?_e.target.column===xe.target.column?xe.target.y1-_e.target.y1:_e.target.column-xe.target.column:"top"==_e.circularLinkType?-1:1:void 0});var be=ue.y0;le.forEach(function(_e){_e.y0=be+_e.width/2,be+=_e.width}),le.forEach(function(_e,xe){if("bottom"==_e.circularLinkType){for(var Ee=xe+1,he=0;Ee<de;Ee++)he+=le[Ee].width;_e.y0=ue.y1-he-_e.width/2}})})}function H(te,ne,se){te.nodes.forEach(function(ie){var ue=te.links.filter(function(be){return T(be.target,se)==T(ie,se)}),le=ue.length;le>1&&ue.sort(function(be,_e){if(!be.circular&&!_e.circular){if(be.source.column==_e.source.column||!ee(be,_e))return be.y0-_e.y0;if(_e.source.column<be.source.column){var xe=J(_e,be);return be.y0-xe}if(be.source.column<_e.source.column)return J(be,_e)-_e.y0}return be.circular&&!_e.circular?"top"==be.circularLinkType?-1:1:_e.circular&&!be.circular?"top"==_e.circularLinkType?1:-1:be.circular&&_e.circular?be.circularLinkType===_e.circularLinkType&&"top"==be.circularLinkType?be.source.column===_e.source.column?be.source.y1-_e.source.y1:be.source.column-_e.source.column:be.circularLinkType===_e.circularLinkType&&"bottom"==be.circularLinkType?be.source.column===_e.source.column?be.source.y1-_e.source.y1:_e.source.column-be.source.column:"top"==be.circularLinkType?-1:1:void 0});var de=ie.y0;ue.forEach(function(be){be.y1=de+be.width/2,de+=be.width}),ue.forEach(function(be,_e){if("bottom"==be.circularLinkType){for(var xe=_e+1,Ee=0;xe<le;xe++)Ee+=ue[xe].width;be.y1=ie.y1-Ee-be.width/2}})})}function ee(te,ne){return U(te)==U(ne)}function U(te){return te.y0-te.y1>0?"up":"down"}function $(te,ne){return T(te.source,ne)==T(te.target,ne)}function q(te,ne,se){var ie=te.nodes,ue=te.links,le=!1,de=!1;if(ue.forEach(function(xe){"top"==xe.circularLinkType?le=!0:"bottom"==xe.circularLinkType&&(de=!0)}),0==le||0==de){var be=v.min(ie,function(xe){return xe.y0}),_e=(se-ne)/(v.max(ie,function(xe){return xe.y1})-be);ie.forEach(function(xe){var Ee=(xe.y1-xe.y0)*_e;xe.y0=(xe.y0-be)*_e,xe.y1=xe.y0+Ee}),ue.forEach(function(xe){xe.y0=(xe.y0-be)*_e,xe.y1=(xe.y1-be)*_e,xe.width=xe.width*_e})}}m.sankeyCircular=function(){var te,ne,se=0,ie=0,ue=1,le=1,de=24,be=g,_e=r,xe=u,Ee=x,he=32,me=2,Se=null;function Me(){var Re={nodes:xe.apply(null,arguments),links:Ee.apply(null,arguments)};Ie(Re),_(Re,0,Se),Fe(Re),Ne(Re),k(Re,be),De(Re,he,be),$e(Re);for(var ze=4,Ue=0;Ue<ze;Ue++)B(Re,le,be),H(Re,0,be),Z(Re,ie,le,be),B(Re,le,be),H(Re,0,be);return q(Re,ie,le),P(Re,me,le,be),Re}function Ie(Re){Re.nodes.forEach(function(Ue,je){Ue.index=je,Ue.sourceLinks=[],Ue.targetLinks=[]});var ze=b.map(Re.nodes,be);return Re.links.forEach(function(Ue,je){Ue.index=je;var rt=Ue.source,ut=Ue.target;"object"!==(void 0===rt?"undefined":t(rt))&&(rt=Ue.source=f(ze,rt)),"object"!==(void 0===ut?"undefined":t(ut))&&(ut=Ue.target=f(ze,ut)),rt.sourceLinks.push(Ue),ut.targetLinks.push(Ue)}),Re}function Fe(Re){Re.nodes.forEach(function(ze){ze.partOfCycle=!1,ze.value=Math.max(v.sum(ze.sourceLinks,s),v.sum(ze.targetLinks,s)),ze.sourceLinks.forEach(function(Ue){Ue.circular&&(ze.partOfCycle=!0,ze.circularLinkType=Ue.circularLinkType)}),ze.targetLinks.forEach(function(Ue){Ue.circular&&(ze.partOfCycle=!0,ze.circularLinkType=Ue.circularLinkType)})})}function Ne(Re){var ze,Ue,je;for(ze=Re.nodes,Ue=[],je=0;ze.length;++je,ze=Ue,Ue=[])ze.forEach(function(rt){rt.depth=je,rt.sourceLinks.forEach(function(ut){Ue.indexOf(ut.target)<0&&!ut.circular&&Ue.push(ut.target)})});for(ze=Re.nodes,Ue=[],je=0;ze.length;++je,ze=Ue,Ue=[])ze.forEach(function(rt){rt.height=je,rt.targetLinks.forEach(function(ut){Ue.indexOf(ut.source)<0&&!ut.circular&&Ue.push(ut.source)})});Re.nodes.forEach(function(rt){rt.column=Math.floor(_e.call(null,rt,je))})}function De(Re,ze,Ue){var je=b.nest().key(function(_t){return _t.column}).sortKeys(v.ascending).entries(Re.nodes).map(function(_t){return _t.values});(function(_t){if(ne){var it=1/0;je.forEach(function(Kt){var cr=le*ne/(Kt.length+1);it=cr<it?cr:it}),te=it}var et=v.min(je,function(Kt){return(le-ie-(Kt.length-1)*te)/v.sum(Kt,s)});et*=.3,Re.links.forEach(function(Kt){Kt.width=Kt.value*et});var Kt,cr,ar,hr,Xt,He,wt=(cr=0,ar=0,hr=0,Xt=0,He=v.max((Kt=Re).nodes,function(Je){return Je.column}),Kt.links.forEach(function(Je){Je.circular&&("top"==Je.circularLinkType?cr+=Je.width:ar+=Je.width,0==Je.target.column&&(Xt+=Je.width),Je.source.column==He&&(hr+=Je.width))}),{top:cr=cr>0?cr+25+10:cr,bottom:ar=ar>0?ar+25+10:ar,left:Xt=Xt>0?Xt+25+10:Xt,right:hr=hr>0?hr+25+10:hr}),Gt=function(Kt,cr){var ar=v.max(Kt.nodes,function(pe){return pe.column}),hr=ue-se,Xt=le-ie,He=hr/(hr+cr.right+cr.left),Je=Xt/(Xt+cr.top+cr.bottom);return se=se*He+cr.left,ue=0==cr.right?ue:ue*He,ie=ie*Je+cr.top,le*=Je,Kt.nodes.forEach(function(pe){pe.x0=se+pe.column*((ue-se-de)/ar),pe.x1=pe.x0+de}),Je}(Re,wt);et*=Gt,Re.links.forEach(function(Kt){Kt.width=Kt.value*et}),je.forEach(function(Kt){var cr=Kt.length;Kt.forEach(function(ar,hr){ar.depth==je.length-1&&1==cr||0==ar.depth&&1==cr?(ar.y0=le/2-ar.value*et,ar.y1=ar.y0+ar.value*et):ar.partOfCycle?0==C(ar,_t)?(ar.y0=le/2+hr,ar.y1=ar.y0+ar.value*et):"top"==ar.circularLinkType?(ar.y0=ie+hr,ar.y1=ar.y0+ar.value*et):(ar.y0=le-ar.value*et-hr,ar.y1=ar.y0+ar.value*et):0==wt.top||0==wt.bottom?(ar.y0=(le-ie)/cr*hr,ar.y1=ar.y0+ar.value*et):(ar.y0=(le-ie)/2-cr/2+hr,ar.y1=ar.y0+ar.value*et)})})})(Ue),At();for(var rt=1,ut=ze;ut>0;--ut)gt(rt*=.99,Ue),At();function gt(_t,it){var et=je.length;je.forEach(function(wt){var Gt=wt.length,Kt=wt[0].depth;wt.forEach(function(cr){var ar;if((cr.sourceLinks.length||cr.targetLinks.length)&&!(cr.partOfCycle&&C(cr,it)>0))if(0==Kt&&1==Gt)cr.y0=le/2-(ar=cr.y1-cr.y0)/2,cr.y1=le/2+ar/2;else if(Kt==et-1&&1==Gt)cr.y0=le/2-(ar=cr.y1-cr.y0)/2,cr.y1=le/2+ar/2;else{var hr=v.mean(cr.sourceLinks,p),Xt=v.mean(cr.targetLinks,l),He=((hr&&Xt?(hr+Xt)/2:hr||Xt)-c(cr))*_t;cr.y0+=He,cr.y1+=He}})})}function At(){je.forEach(function(_t){var it,et,wt,Gt=ie,Kt=_t.length;for(_t.sort(i),wt=0;wt<Kt;++wt)(et=Gt-(it=_t[wt]).y0)>0&&(it.y0+=et,it.y1+=et),Gt=it.y1+te;if((et=Gt-te-le)>0)for(Gt=it.y0-=et,it.y1-=et,wt=Kt-2;wt>=0;--wt)(et=(it=_t[wt]).y1+te-Gt)>0&&(it.y0-=et,it.y1-=et),Gt=it.y0})}}function $e(Re){Re.nodes.forEach(function(ze){ze.sourceLinks.sort(a),ze.targetLinks.sort(d)}),Re.nodes.forEach(function(ze){var Ue=ze.y0,je=Ue,rt=ze.y1,ut=rt;ze.sourceLinks.forEach(function(gt){gt.circular?(gt.y0=rt-gt.width/2,rt-=gt.width):(gt.y0=Ue+gt.width/2,Ue+=gt.width)}),ze.targetLinks.forEach(function(gt){gt.circular?(gt.y1=ut-gt.width/2,ut-=gt.width):(gt.y1=je+gt.width/2,je+=gt.width)})})}return Me.nodeId=function(Re){return arguments.length?(be="function"==typeof Re?Re:o(Re),Me):be},Me.nodeAlign=function(Re){return arguments.length?(_e="function"==typeof Re?Re:o(Re),Me):_e},Me.nodeWidth=function(Re){return arguments.length?(de=+Re,Me):de},Me.nodePadding=function(Re){return arguments.length?(te=+Re,Me):te},Me.nodes=function(Re){return arguments.length?(xe="function"==typeof Re?Re:o(Re),Me):xe},Me.links=function(Re){return arguments.length?(Ee="function"==typeof Re?Re:o(Re),Me):Ee},Me.size=function(Re){return arguments.length?(se=ie=0,ue=+Re[0],le=+Re[1],Me):[ue-se,le-ie]},Me.extent=function(Re){return arguments.length?(se=+Re[0][0],ue=+Re[1][0],ie=+Re[0][1],le=+Re[1][1],Me):[[se,ie],[ue,le]]},Me.iterations=function(Re){return arguments.length?(he=+Re,Me):he},Me.circularLinkGap=function(Re){return arguments.length?(me=+Re,Me):me},Me.nodePaddingRatio=function(Re){return arguments.length?(ne=+Re,Me):ne},Me.sortNodes=function(Re){return arguments.length?(Se=Re,Me):Se},Me.update=function(Re){return k(Re,be),$e(Re),Re.links.forEach(function(ze){ze.circular&&(ze.circularLinkType=ze.y0+ze.y1<le?"top":"bottom",ze.source.circularLinkType=ze.circularLinkType,ze.target.circularLinkType=ze.circularLinkType)}),B(Re,le,be,!1),H(Re,0,be),P(Re,me,le,be),Re},Me},m.sankeyCenter=function(te){return te.targetLinks.length?te.depth:te.sourceLinks.length?v.min(te.sourceLinks,n)-1:0},m.sankeyLeft=function(te){return te.depth},m.sankeyRight=function(te,ne){return ne-1-te.height},m.sankeyJustify=r,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,y("d3-array"),y("d3-collection"),y("d3-shape"),y("elementary-circuits-directed-graph")):v(m.d3=m.d3||{},m.d3,m.d3,m.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(y,Q,K){var m,v;m=this,v=function(m,v,b,h){"use strict";function e(T){return T.target.depth}function n(T,_){return T.sourceLinks.length?T.depth:_-1}function r(T){return function(){return T}}function o(T,_){return d(T.source,_.source)||T.index-_.index}function t(T,_){return d(T.target,_.target)||T.index-_.index}function d(T,_){return T.y0-_.y0}function a(T){return T.value}function i(T){return(T.y0+T.y1)/2}function s(T){return i(T.source)*T.value}function c(T){return i(T.target)*T.value}function l(T){return T.index}function p(T){return T.nodes}function g(T){return T.links}function u(T,_){var k=T.get(_);if(!k)throw new Error("missing: "+_);return k}function x(T){return[T.source.x1,T.y0]}function f(T){return[T.target.x0,T.y1]}m.sankey=function(){var T=0,_=0,k=1,w=1,C=24,A=8,O=l,P=n,S=p,E=g,D=32;function z(){var Z={nodes:S.apply(null,arguments),links:E.apply(null,arguments)};return N(Z),V(Z),X(Z),J(Z),G(Z),Z}function N(Z){Z.nodes.forEach(function(j,B){j.index=B,j.sourceLinks=[],j.targetLinks=[]});var re=b.map(Z.nodes,O);Z.links.forEach(function(j,B){j.index=B;var H=j.source,ee=j.target;"object"!=typeof H&&(H=j.source=u(re,H)),"object"!=typeof ee&&(ee=j.target=u(re,ee)),H.sourceLinks.push(j),ee.targetLinks.push(j)})}function V(Z){Z.nodes.forEach(function(re){re.value=Math.max(v.sum(re.sourceLinks,a),v.sum(re.targetLinks,a))})}function X(Z){var re,j,B;for(re=Z.nodes,j=[],B=0;re.length;++B,re=j,j=[])re.forEach(function(ee){ee.depth=B,ee.sourceLinks.forEach(function(U){j.indexOf(U.target)<0&&j.push(U.target)})});for(re=Z.nodes,j=[],B=0;re.length;++B,re=j,j=[])re.forEach(function(ee){ee.height=B,ee.targetLinks.forEach(function(U){j.indexOf(U.source)<0&&j.push(U.source)})});var H=(k-T-C)/(B-1);Z.nodes.forEach(function(ee){ee.x1=(ee.x0=T+Math.max(0,Math.min(B-1,Math.floor(P.call(null,ee,B))))*H)+C})}function J(Z){var re=b.nest().key(function($){return $.x0}).sortKeys(v.ascending).entries(Z.nodes).map(function($){return $.values});(function(){var $=v.max(re,function(ne){return ne.length}),q=2/3*(w-_)/($-1);A>q&&(A=q);var te=v.min(re,function(ne){return(w-_-(ne.length-1)*A)/v.sum(ne,a)});re.forEach(function(ne){ne.forEach(function(se,ie){se.y1=(se.y0=ie)+se.value*te})}),Z.links.forEach(function(ne){ne.width=ne.value*te})})(),U();for(var j=1,B=D;B>0;--B)ee(j*=.99),U(),H(j),U();function H($){re.forEach(function(q){q.forEach(function(te){if(te.targetLinks.length){var ne=(v.sum(te.targetLinks,s)/v.sum(te.targetLinks,a)-i(te))*$;te.y0+=ne,te.y1+=ne}})})}function ee($){re.slice().reverse().forEach(function(q){q.forEach(function(te){if(te.sourceLinks.length){var ne=(v.sum(te.sourceLinks,c)/v.sum(te.sourceLinks,a)-i(te))*$;te.y0+=ne,te.y1+=ne}})})}function U(){re.forEach(function($){var q,te,ne,se=_,ie=$.length;for($.sort(d),ne=0;ne<ie;++ne)(te=se-(q=$[ne]).y0)>0&&(q.y0+=te,q.y1+=te),se=q.y1+A;if((te=se-A-w)>0)for(se=q.y0-=te,q.y1-=te,ne=ie-2;ne>=0;--ne)(te=(q=$[ne]).y1+A-se)>0&&(q.y0-=te,q.y1-=te),se=q.y0})}}function G(Z){Z.nodes.forEach(function(re){re.sourceLinks.sort(t),re.targetLinks.sort(o)}),Z.nodes.forEach(function(re){var j=re.y0,B=j;re.sourceLinks.forEach(function(H){H.y0=j+H.width/2,j+=H.width}),re.targetLinks.forEach(function(H){H.y1=B+H.width/2,B+=H.width})})}return z.update=function(Z){return G(Z),Z},z.nodeId=function(Z){return arguments.length?(O="function"==typeof Z?Z:r(Z),z):O},z.nodeAlign=function(Z){return arguments.length?(P="function"==typeof Z?Z:r(Z),z):P},z.nodeWidth=function(Z){return arguments.length?(C=+Z,z):C},z.nodePadding=function(Z){return arguments.length?(A=+Z,z):A},z.nodes=function(Z){return arguments.length?(S="function"==typeof Z?Z:r(Z),z):S},z.links=function(Z){return arguments.length?(E="function"==typeof Z?Z:r(Z),z):E},z.size=function(Z){return arguments.length?(T=_=0,k=+Z[0],w=+Z[1],z):[k-T,w-_]},z.extent=function(Z){return arguments.length?(T=+Z[0][0],k=+Z[1][0],_=+Z[0][1],w=+Z[1][1],z):[[T,_],[k,w]]},z.iterations=function(Z){return arguments.length?(D=+Z,z):D},z},m.sankeyCenter=function(T){return T.targetLinks.length?T.depth:T.sourceLinks.length?v.min(T.sourceLinks,e)-1:0},m.sankeyLeft=function(T){return T.depth},m.sankeyRight=function(T,_){return _-1-T.height},m.sankeyJustify=n,m.sankeyLinkHorizontal=function(){return h.linkHorizontal().source(x).target(f)},Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,y("d3-array"),y("d3-collection"),y("d3-shape")):v(m.d3=m.d3||{},m.d3,m.d3,m.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(y,Q,K){(function(){var m={version:"3.8.0"},v=[].slice,b=function(ce){return v.call(ce)},h=self.document;function e(ce){return ce&&(ce.ownerDocument||ce.document||ce).documentElement}function n(ce){return ce&&(ce.ownerDocument&&ce.ownerDocument.defaultView||ce.document&&ce||ce.defaultView)}if(h)try{b(h.documentElement.childNodes)}catch{b=function(L){for(var R=L.length,F=new Array(R);R--;)F[R]=L[R];return F}}if(Date.now||(Date.now=function(){return+new Date}),h)try{h.createElement("DIV").style.setProperty("opacity",0,"")}catch{var r=this.Element.prototype,o=r.setAttribute,t=r.setAttributeNS,d=this.CSSStyleDeclaration.prototype,a=d.setProperty;r.setAttribute=function(L,R){o.call(this,L,R+"")},r.setAttributeNS=function(L,R,F){t.call(this,L,R,F+"")},d.setProperty=function(L,R,F){a.call(this,L,R+"",F)}}function i(ce,L){return ce<L?-1:ce>L?1:ce>=L?0:NaN}function s(ce){return null===ce?NaN:+ce}function c(ce){return!isNaN(ce)}function l(ce){return{left:function(L,R,F,Y){for(arguments.length<3&&(F=0),arguments.length<4&&(Y=L.length);F<Y;){var ae=F+Y>>>1;ce(L[ae],R)<0?F=ae+1:Y=ae}return F},right:function(L,R,F,Y){for(arguments.length<3&&(F=0),arguments.length<4&&(Y=L.length);F<Y;){var ae=F+Y>>>1;ce(L[ae],R)>0?Y=ae:F=ae+1}return F}}}m.ascending=i,m.descending=function(ce,L){return L<ce?-1:L>ce?1:L>=ce?0:NaN},m.min=function(ce,L){var R,F,Y=-1,ae=ce.length;if(1===arguments.length){for(;++Y<ae;)if(null!=(F=ce[Y])&&F>=F){R=F;break}for(;++Y<ae;)null!=(F=ce[Y])&&R>F&&(R=F)}else{for(;++Y<ae;)if(null!=(F=L.call(ce,ce[Y],Y))&&F>=F){R=F;break}for(;++Y<ae;)null!=(F=L.call(ce,ce[Y],Y))&&R>F&&(R=F)}return R},m.max=function(ce,L){var R,F,Y=-1,ae=ce.length;if(1===arguments.length){for(;++Y<ae;)if(null!=(F=ce[Y])&&F>=F){R=F;break}for(;++Y<ae;)null!=(F=ce[Y])&&F>R&&(R=F)}else{for(;++Y<ae;)if(null!=(F=L.call(ce,ce[Y],Y))&&F>=F){R=F;break}for(;++Y<ae;)null!=(F=L.call(ce,ce[Y],Y))&&F>R&&(R=F)}return R},m.extent=function(ce,L){var R,F,Y,ae=-1,fe=ce.length;if(1===arguments.length){for(;++ae<fe;)if(null!=(F=ce[ae])&&F>=F){R=Y=F;break}for(;++ae<fe;)null!=(F=ce[ae])&&(R>F&&(R=F),Y<F&&(Y=F))}else{for(;++ae<fe;)if(null!=(F=L.call(ce,ce[ae],ae))&&F>=F){R=Y=F;break}for(;++ae<fe;)null!=(F=L.call(ce,ce[ae],ae))&&(R>F&&(R=F),Y<F&&(Y=F))}return[R,Y]},m.sum=function(ce,L){var R,F=0,Y=ce.length,ae=-1;if(1===arguments.length)for(;++ae<Y;)c(R=+ce[ae])&&(F+=R);else for(;++ae<Y;)c(R=+L.call(ce,ce[ae],ae))&&(F+=R);return F},m.mean=function(ce,L){var R,F=0,Y=ce.length,ae=-1,fe=Y;if(1===arguments.length)for(;++ae<Y;)c(R=s(ce[ae]))?F+=R:--fe;else for(;++ae<Y;)c(R=s(L.call(ce,ce[ae],ae)))?F+=R:--fe;if(fe)return F/fe},m.quantile=function(ce,L){var R=(ce.length-1)*L+1,F=Math.floor(R),Y=+ce[F-1],ae=R-F;return ae?Y+ae*(ce[F]-Y):Y},m.median=function(ce,L){var R,F=[],Y=ce.length,ae=-1;if(1===arguments.length)for(;++ae<Y;)c(R=s(ce[ae]))&&F.push(R);else for(;++ae<Y;)c(R=s(L.call(ce,ce[ae],ae)))&&F.push(R);if(F.length)return m.quantile(F.sort(i),.5)},m.variance=function(ce,L){var R,F,Y=ce.length,ae=0,fe=0,ve=-1,Ae=0;if(1===arguments.length)for(;++ve<Y;)c(R=s(ce[ve]))&&(fe+=(F=R-ae)*(R-(ae+=F/++Ae)));else for(;++ve<Y;)c(R=s(L.call(ce,ce[ve],ve)))&&(fe+=(F=R-ae)*(R-(ae+=F/++Ae)));if(Ae>1)return fe/(Ae-1)},m.deviation=function(){var ce=m.variance.apply(this,arguments);return ce&&Math.sqrt(ce)};var p=l(i);function g(ce){return ce.length}m.bisectLeft=p.left,m.bisect=m.bisectRight=p.right,m.bisector=function(ce){return l(1===ce.length?function(L,R){return i(ce(L),R)}:ce)},m.shuffle=function(ce,L,R){(ae=arguments.length)<3&&(R=ce.length,ae<2&&(L=0));for(var F,Y,ae=R-L;ae;)Y=Math.random()*ae--|0,F=ce[ae+L],ce[ae+L]=ce[Y+L],ce[Y+L]=F;return ce},m.permute=function(ce,L){for(var R=L.length,F=new Array(R);R--;)F[R]=ce[L[R]];return F},m.pairs=function(ce){for(var L=0,R=ce.length-1,F=ce[0],Y=new Array(R<0?0:R);L<R;)Y[L]=[F,F=ce[++L]];return Y},m.transpose=function(ce){if(!(Y=ce.length))return[];for(var L=-1,R=m.min(ce,g),F=new Array(R);++L<R;)for(var Y,ae=-1,fe=F[L]=new Array(Y);++ae<Y;)fe[ae]=ce[ae][L];return F},m.zip=function(){return m.transpose(arguments)},m.keys=function(ce){var L=[];for(var R in ce)L.push(R);return L},m.values=function(ce){var L=[];for(var R in ce)L.push(ce[R]);return L},m.entries=function(ce){var L=[];for(var R in ce)L.push({key:R,value:ce[R]});return L},m.merge=function(ce){for(var L,R,F,Y=ce.length,ae=-1,fe=0;++ae<Y;)fe+=ce[ae].length;for(R=new Array(fe);--Y>=0;)for(L=(F=ce[Y]).length;--L>=0;)R[--fe]=F[L];return R};var u=Math.abs;function x(ce){for(var L=1;ce*L%1;)L*=10;return L}function f(ce,L){for(var R in L)Object.defineProperty(ce.prototype,R,{value:L[R],enumerable:!1})}function T(){this._=Object.create(null)}function _(ce){return"__proto__"==(ce+="")||"\0"===ce[0]?"\0"+ce:ce}function k(ce){return"\0"===(ce+="")[0]?ce.slice(1):ce}function w(ce){return _(ce)in this._}function C(ce){return(ce=_(ce))in this._&&delete this._[ce]}function A(){var ce=[];for(var L in this._)ce.push(k(L));return ce}function O(){var ce=0;for(var L in this._)++ce;return ce}function P(){for(var ce in this._)return!1;return!0}function S(){this._=Object.create(null)}function E(ce){return ce}function D(ce,L,R){return function(){var F=R.apply(L,arguments);return F===L?ce:F}}function z(ce,L){if(L in ce)return L;L=L.charAt(0).toUpperCase()+L.slice(1);for(var R=0,F=N.length;R<F;++R){var Y=N[R]+L;if(Y in ce)return Y}}m.range=function(ce,L,R){if(arguments.length<3&&(R=1,arguments.length<2&&(L=ce,ce=0)),(L-ce)/R==1/0)throw new Error("infinite range");var F,Y=[],ae=x(u(R)),fe=-1;if(ce*=ae,L*=ae,(R*=ae)<0)for(;(F=ce+R*++fe)>L;)Y.push(F/ae);else for(;(F=ce+R*++fe)<L;)Y.push(F/ae);return Y},m.map=function(ce,L){var R=new T;if(ce instanceof T)ce.forEach(function(ve,Ae){R.set(ve,Ae)});else if(Array.isArray(ce)){var F,Y=-1,ae=ce.length;if(1===arguments.length)for(;++Y<ae;)R.set(Y,ce[Y]);else for(;++Y<ae;)R.set(L.call(ce,F=ce[Y],Y),F)}else for(var fe in ce)R.set(fe,ce[fe]);return R},f(T,{has:w,get:function(ce){return this._[_(ce)]},set:function(ce,L){return this._[_(ce)]=L},remove:C,keys:A,values:function(){var ce=[];for(var L in this._)ce.push(this._[L]);return ce},entries:function(){var ce=[];for(var L in this._)ce.push({key:k(L),value:this._[L]});return ce},size:O,empty:P,forEach:function(ce){for(var L in this._)ce.call(this,k(L),this._[L])}}),m.nest=function(){var ce,L,R={},F=[],Y=[];function ae(fe,ve,Ae){if(Ae>=F.length)return L?L.call(R,ve):ce?ve.sort(ce):ve;for(var Pe,Ge,Qe,st,Mt=-1,It=ve.length,Ct=F[Ae++],Pt=new T;++Mt<It;)(st=Pt.get(Pe=Ct(Ge=ve[Mt])))?st.push(Ge):Pt.set(Pe,[Ge]);return fe?(Ge=fe(),Qe=function(kt,Vt){Ge.set(kt,ae(fe,Vt,Ae))}):(Ge={},Qe=function(kt,Vt){Ge[kt]=ae(fe,Vt,Ae)}),Pt.forEach(Qe),Ge}return R.map=function(fe,ve){return ae(ve,fe,0)},R.entries=function(fe){return function ve(Ae,Pe){if(Pe>=F.length)return Ae;var Ge=[],Qe=Y[Pe++];return Ae.forEach(function(st,Mt){Ge.push({key:st,values:ve(Mt,Pe)})}),Qe?Ge.sort(function(st,Mt){return Qe(st.key,Mt.key)}):Ge}(ae(m.map,fe,0),0)},R.key=function(fe){return F.push(fe),R},R.sortKeys=function(fe){return Y[F.length-1]=fe,R},R.sortValues=function(fe){return ce=fe,R},R.rollup=function(fe){return L=fe,R},R},m.set=function(ce){var L=new S;if(ce)for(var R=0,F=ce.length;R<F;++R)L.add(ce[R]);return L},f(S,{has:w,add:function(ce){return this._[_(ce+="")]=!0,ce},remove:C,values:A,size:O,empty:P,forEach:function(ce){for(var L in this._)ce.call(this,k(L))}}),m.behavior={},m.rebind=function(ce,L){for(var R,F=1,Y=arguments.length;++F<Y;)ce[R=arguments[F]]=D(ce,L,L[R]);return ce};var N=["webkit","ms","moz","Moz","o","O"];function V(){}function X(){}function J(ce){var L=[],R=new T;function F(){for(var Y,ae=L,fe=-1,ve=ae.length;++fe<ve;)(Y=ae[fe].on)&&Y.apply(this,arguments);return ce}return F.on=function(Y,ae){var fe,ve=R.get(Y);return arguments.length<2?ve&&ve.on:(ve&&(ve.on=null,L=L.slice(0,fe=L.indexOf(ve)).concat(L.slice(fe+1)),R.remove(Y)),ae&&L.push(R.set(Y,{on:ae})),ce)},F}function G(){m.event.preventDefault()}function Z(){for(var ce,L=m.event;ce=L.sourceEvent;)L=ce;return L}function re(ce){for(var L=new X,R=0,F=arguments.length;++R<F;)L[arguments[R]]=J(L);return L.of=function(Y,ae){return function(fe){try{var ve=fe.sourceEvent=m.event;fe.target=ce,m.event=fe,L[fe.type].apply(Y,ae)}finally{m.event=ve}}},L}m.dispatch=function(){for(var ce=new X,L=-1,R=arguments.length;++L<R;)ce[arguments[L]]=J(ce);return ce},X.prototype.on=function(ce,L){var R=ce.indexOf("."),F="";if(R>=0&&(F=ce.slice(R+1),ce=ce.slice(0,R)),ce)return arguments.length<2?this[ce].on(F):this[ce].on(F,L);if(2===arguments.length){if(null==L)for(ce in this)this.hasOwnProperty(ce)&&this[ce].on(F,null);return this}},m.event=null,m.requote=function(ce){return ce.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,B={}.__proto__?function(ce,L){ce.__proto__=L}:function(ce,L){for(var R in L)ce[R]=L[R]};function H(ce){return B(ce,q),ce}var ee=function(ce,L){return L.querySelector(ce)},U=function(ce,L){return L.querySelectorAll(ce)},$=function(ce,L){var R=ce.matches||ce[z(ce,"matchesSelector")];return($=function(F,Y){return R.call(F,Y)})(ce,L)};"function"==typeof Sizzle&&(ee=function(ce,L){return Sizzle(ce,L)[0]||null},U=Sizzle,$=Sizzle.matchesSelector),m.selection=function(){return m.select(h.documentElement)};var q=m.selection.prototype=[];function te(ce){return"function"==typeof ce?ce:function(){return ee(ce,this)}}function ne(ce){return"function"==typeof ce?ce:function(){return U(ce,this)}}q.select=function(ce){var L,R,F,Y,ae=[];ce=te(ce);for(var fe=-1,ve=this.length;++fe<ve;){ae.push(L=[]),L.parentNode=(F=this[fe]).parentNode;for(var Ae=-1,Pe=F.length;++Ae<Pe;)(Y=F[Ae])?(L.push(R=ce.call(Y,Y.__data__,Ae,fe)),R&&"__data__"in Y&&(R.__data__=Y.__data__)):L.push(null)}return H(ae)},q.selectAll=function(ce){var L,R,F=[];ce=ne(ce);for(var Y=-1,ae=this.length;++Y<ae;)for(var fe=this[Y],ve=-1,Ae=fe.length;++ve<Ae;)(R=fe[ve])&&(F.push(L=b(ce.call(R,R.__data__,ve,Y))),L.parentNode=R);return H(F)};var se="http://www.w3.org/1999/xhtml",ie={svg:"http://www.w3.org/2000/svg",xhtml:se,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ue(ce,L){return ce=m.ns.qualify(ce),null==L?ce.local?function(){this.removeAttributeNS(ce.space,ce.local)}:function(){this.removeAttribute(ce)}:"function"==typeof L?ce.local?function(){var R=L.apply(this,arguments);null==R?this.removeAttributeNS(ce.space,ce.local):this.setAttributeNS(ce.space,ce.local,R)}:function(){var R=L.apply(this,arguments);null==R?this.removeAttribute(ce):this.setAttribute(ce,R)}:ce.local?function(){this.setAttributeNS(ce.space,ce.local,L)}:function(){this.setAttribute(ce,L)}}function le(ce){return ce.trim().replace(/\s+/g," ")}function de(ce){return new RegExp("(?:^|\\s+)"+m.requote(ce)+"(?:\\s+|$)","g")}function be(ce){return(ce+"").trim().split(/^|\s+/)}function _e(ce,L){var R=(ce=be(ce).map(xe)).length;return"function"==typeof L?function(){for(var F=-1,Y=L.apply(this,arguments);++F<R;)ce[F](this,Y)}:function(){for(var F=-1;++F<R;)ce[F](this,L)}}function xe(ce){var L=de(ce);return function(R,F){if(Y=R.classList)return F?Y.add(ce):Y.remove(ce);var Y=R.getAttribute("class")||"";F?(L.lastIndex=0,L.test(Y)||R.setAttribute("class",le(Y+" "+ce))):R.setAttribute("class",le(Y.replace(L," ")))}}function Ee(ce,L,R){return null==L?function(){this.style.removeProperty(ce)}:"function"==typeof L?function(){var F=L.apply(this,arguments);null==F?this.style.removeProperty(ce):this.style.setProperty(ce,F,R)}:function(){this.style.setProperty(ce,L,R)}}function he(ce,L){return null==L?function(){delete this[ce]}:"function"==typeof L?function(){var R=L.apply(this,arguments);null==R?delete this[ce]:this[ce]=R}:function(){this[ce]=L}}function me(ce){return"function"==typeof ce?ce:(ce=m.ns.qualify(ce)).local?function(){return this.ownerDocument.createElementNS(ce.space,ce.local)}:function(){var L=this.ownerDocument,R=this.namespaceURI;return R===se&&L.documentElement.namespaceURI===se?L.createElement(ce):L.createElementNS(R,ce)}}function Se(){var ce=this.parentNode;ce&&ce.removeChild(this)}function Me(ce){return{__data__:ce}}function Ie(ce){return function(){return $(this,ce)}}function Fe(ce){return arguments.length||(ce=i),function(L,R){return L&&R?ce(L.__data__,R.__data__):!L-!R}}function Ne(ce,L){for(var R=0,F=ce.length;R<F;R++)for(var Y,ae=ce[R],fe=0,ve=ae.length;fe<ve;fe++)(Y=ae[fe])&&L(Y,fe,R);return ce}function De(ce){return B(ce,$e),ce}m.ns={prefix:ie,qualify:function(ce){var L=ce.indexOf(":"),R=ce;return L>=0&&"xmlns"!==(R=ce.slice(0,L))&&(ce=ce.slice(L+1)),ie.hasOwnProperty(R)?{space:ie[R],local:ce}:ce}},q.attr=function(ce,L){if(arguments.length<2){if("string"==typeof ce){var R=this.node();return(ce=m.ns.qualify(ce)).local?R.getAttributeNS(ce.space,ce.local):R.getAttribute(ce)}for(L in ce)this.each(ue(L,ce[L]));return this}return this.each(ue(ce,L))},q.classed=function(ce,L){if(arguments.length<2){if("string"==typeof ce){var R=this.node(),F=(ce=be(ce)).length,Y=-1;if(L=R.classList){for(;++Y<F;)if(!L.contains(ce[Y]))return!1}else for(L=R.getAttribute("class");++Y<F;)if(!de(ce[Y]).test(L))return!1;return!0}for(L in ce)this.each(_e(L,ce[L]));return this}return this.each(_e(ce,L))},q.style=function(ce,L,R){var F=arguments.length;if(F<3){if("string"!=typeof ce){for(R in F<2&&(L=""),ce)this.each(Ee(R,ce[R],L));return this}if(F<2){var Y=this.node();return n(Y).getComputedStyle(Y,null).getPropertyValue(ce)}R=""}return this.each(Ee(ce,L,R))},q.property=function(ce,L){if(arguments.length<2){if("string"==typeof ce)return this.node()[ce];for(L in ce)this.each(he(L,ce[L]));return this}return this.each(he(ce,L))},q.text=function(ce){return arguments.length?this.each("function"==typeof ce?function(){var L=ce.apply(this,arguments);this.textContent=L??""}:null==ce?function(){this.textContent=""}:function(){this.textContent=ce}):this.node().textContent},q.html=function(ce){return arguments.length?this.each("function"==typeof ce?function(){var L=ce.apply(this,arguments);this.innerHTML=L??""}:null==ce?function(){this.innerHTML=""}:function(){this.innerHTML=ce}):this.node().innerHTML},q.append=function(ce){return ce=me(ce),this.select(function(){return this.appendChild(ce.apply(this,arguments))})},q.insert=function(ce,L){return ce=me(ce),L=te(L),this.select(function(){return this.insertBefore(ce.apply(this,arguments),L.apply(this,arguments)||null)})},q.remove=function(){return this.each(Se)},q.data=function(ce,L){var R,F,Y=-1,ae=this.length;if(!arguments.length){for(ce=new Array(ae=(R=this[0]).length);++Y<ae;)(F=R[Y])&&(ce[Y]=F.__data__);return ce}function fe(Ge,Qe){var st,Mt,It,Ct=Ge.length,Pt=Qe.length,kt=Math.min(Ct,Pt),Vt=new Array(Pt),Nt=new Array(Pt),Yt=new Array(Ct);if(L){var fr,Mr=new T,jr=new Array(Ct);for(st=-1;++st<Ct;)(Mt=Ge[st])&&(Mr.has(fr=L.call(Mt,Mt.__data__,st))?Yt[st]=Mt:Mr.set(fr,Mt),jr[st]=fr);for(st=-1;++st<Pt;)(Mt=Mr.get(fr=L.call(Qe,It=Qe[st],st)))?!0!==Mt&&(Vt[st]=Mt,Mt.__data__=It):Nt[st]=Me(It),Mr.set(fr,!0);for(st=-1;++st<Ct;)st in jr&&!0!==Mr.get(jr[st])&&(Yt[st]=Ge[st])}else{for(st=-1;++st<kt;)It=Qe[st],(Mt=Ge[st])?(Mt.__data__=It,Vt[st]=Mt):Nt[st]=Me(It);for(;st<Pt;++st)Nt[st]=Me(Qe[st]);for(;st<Ct;++st)Yt[st]=Ge[st]}Nt.update=Vt,Nt.parentNode=Vt.parentNode=Yt.parentNode=Ge.parentNode,ve.push(Nt),Ae.push(Vt),Pe.push(Yt)}var ve=De([]),Ae=H([]),Pe=H([]);if("function"==typeof ce)for(;++Y<ae;)fe(R=this[Y],ce.call(R,R.parentNode.__data__,Y));else for(;++Y<ae;)fe(R=this[Y],ce);return Ae.enter=function(){return ve},Ae.exit=function(){return Pe},Ae},q.datum=function(ce){return arguments.length?this.property("__data__",ce):this.property("__data__")},q.filter=function(ce){var L,R,F,Y=[];"function"!=typeof ce&&(ce=Ie(ce));for(var ae=0,fe=this.length;ae<fe;ae++){Y.push(L=[]),L.parentNode=(R=this[ae]).parentNode;for(var ve=0,Ae=R.length;ve<Ae;ve++)(F=R[ve])&&ce.call(F,F.__data__,ve,ae)&&L.push(F)}return H(Y)},q.order=function(){for(var ce=-1,L=this.length;++ce<L;)for(var R,F=this[ce],Y=F.length-1,ae=F[Y];--Y>=0;)(R=F[Y])&&(ae&&ae!==R.nextSibling&&ae.parentNode.insertBefore(R,ae),ae=R);return this},q.sort=function(ce){ce=Fe.apply(this,arguments);for(var L=-1,R=this.length;++L<R;)this[L].sort(ce);return this.order()},q.each=function(ce){return Ne(this,function(L,R,F){ce.call(L,L.__data__,R,F)})},q.call=function(ce){var L=b(arguments);return ce.apply(L[0]=this,L),this},q.empty=function(){return!this.node()},q.node=function(){for(var ce=0,L=this.length;ce<L;ce++)for(var R=this[ce],F=0,Y=R.length;F<Y;F++){var ae=R[F];if(ae)return ae}return null},q.size=function(){var ce=0;return Ne(this,function(){++ce}),ce};var $e=[];function Re(ce){var L,R;return function(F,Y,ae){var fe,ve=ce[ae].update,Ae=ve.length;for(ae!=R&&(R=ae,L=0),Y>=L&&(L=Y+1);!(fe=ve[L])&&++L<Ae;);return fe}}function ze(ce,L,R){var F="__on"+ce,Y=ce.indexOf("."),ae=je;Y>0&&(ce=ce.slice(0,Y));var fe=Ue.get(ce);function ve(){var Ae=this[F];Ae&&(this.removeEventListener(ce,Ae,Ae.$),delete this[F])}return fe&&(ce=fe,ae=rt),Y?L?function(){var Ae=ae(L,b(arguments));ve.call(this),this.addEventListener(ce,this[F]=Ae,Ae.$=R),Ae._=L}:ve:L?V:function(){var Ae,Pe=new RegExp("^__on([^.]+)"+m.requote(ce)+"$");for(var Ge in this)if(Ae=Ge.match(Pe)){var Qe=this[Ge];this.removeEventListener(Ae[1],Qe,Qe.$),delete this[Ge]}}}m.selection.enter=De,m.selection.enter.prototype=$e,$e.append=q.append,$e.empty=q.empty,$e.node=q.node,$e.call=q.call,$e.size=q.size,$e.select=function(ce){for(var L,R,F,Y,ae,fe=[],ve=-1,Ae=this.length;++ve<Ae;){F=(Y=this[ve]).update,fe.push(L=[]),L.parentNode=Y.parentNode;for(var Pe=-1,Ge=Y.length;++Pe<Ge;)(ae=Y[Pe])?(L.push(F[Pe]=R=ce.call(Y.parentNode,ae.__data__,Pe,ve)),R.__data__=ae.__data__):L.push(null)}return H(fe)},$e.insert=function(ce,L){return arguments.length<2&&(L=Re(this)),q.insert.call(this,ce,L)},m.select=function(ce){var L;return"string"==typeof ce?(L=[ee(ce,h)]).parentNode=h.documentElement:(L=[ce]).parentNode=e(ce),H([L])},m.selectAll=function(ce){var L;return"string"==typeof ce?(L=b(U(ce,h))).parentNode=h.documentElement:(L=b(ce)).parentNode=null,H([L])},q.on=function(ce,L,R){var F=arguments.length;if(F<3){if("string"!=typeof ce){for(R in F<2&&(L=!1),ce)this.each(ze(R,ce[R],L));return this}if(F<2)return(F=this.node()["__on"+ce])&&F._;R=!1}return this.each(ze(ce,L,R))};var Ue=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});function je(ce,L){return function(R){var F=m.event;m.event=R,L[0]=this.__data__;try{ce.apply(this,L)}finally{m.event=F}}}function rt(ce,L){var R=je(ce,L);return function(F){var Y=F.relatedTarget;Y&&(Y===this||8&Y.compareDocumentPosition(this))||R.call(this,F)}}h&&Ue.forEach(function(ce){"on"+ce in h&&Ue.remove(ce)});var ut,gt=0;function At(ce){var L=".dragsuppress-"+ ++gt,R="click"+L,F=m.select(n(ce)).on("touchmove"+L,G).on("dragstart"+L,G).on("selectstart"+L,G);if(null==ut&&(ut=!("onselectstart"in ce)&&z(ce.style,"userSelect")),ut){var Y=e(ce).style,ae=Y[ut];Y[ut]="none"}return function(fe){if(F.on(L,null),ut&&(Y[ut]=ae),fe){var ve=function(){F.on(R,null)};F.on(R,function(){G(),ve()},!0),setTimeout(ve,0)}}}m.mouse=function(ce){return it(ce,Z())};var _t=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function it(ce,L){L.changedTouches&&(L=L.changedTouches[0]);var R=ce.ownerSVGElement||ce;if(R.createSVGPoint){var F=R.createSVGPoint();if(_t<0){var Y=n(ce);if(Y.scrollX||Y.scrollY){var ae=(R=m.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_t=!(ae.f||ae.e),R.remove()}}return _t?(F.x=L.pageX,F.y=L.pageY):(F.x=L.clientX,F.y=L.clientY),[(F=F.matrixTransform(ce.getScreenCTM().inverse())).x,F.y]}var fe=ce.getBoundingClientRect();return[L.clientX-fe.left-ce.clientLeft,L.clientY-fe.top-ce.clientTop]}function et(){return m.event.changedTouches[0].identifier}m.touch=function(ce,L,R){if(arguments.length<3&&(R=L,L=Z().changedTouches),L)for(var F,Y=0,ae=L.length;Y<ae;++Y)if((F=L[Y]).identifier===R)return it(ce,F)},m.behavior.drag=function(){var ce=re(Y,"drag","dragstart","dragend"),L=null,R=ae(V,m.mouse,n,"mousemove","mouseup"),F=ae(et,m.touch,E,"touchmove","touchend");function Y(){this.on("mousedown.drag",R).on("touchstart.drag",F)}function ae(fe,ve,Ae,Pe,Ge){return function(){var Qe,st=this,Mt=m.event.target.correspondingElement||m.event.target,It=st.parentNode,Ct=ce.of(st,arguments),Pt=0,kt=fe(),Vt=".drag"+(null==kt?"":"-"+kt),Nt=m.select(Ae(Mt)).on(Pe+Vt,Mr).on(Ge+Vt,jr),Yt=At(Mt),fr=ve(It,kt);function Mr(){var Fr,fn,on=ve(It,kt);on&&(Pt|=(Fr=on[0]-fr[0])|(fn=on[1]-fr[1]),fr=on,Ct({type:"drag",x:on[0]+Qe[0],y:on[1]+Qe[1],dx:Fr,dy:fn}))}function jr(){ve(It,kt)&&(Nt.on(Pe+Vt,null).on(Ge+Vt,null),Yt(Pt),Ct({type:"dragend"}))}Qe=L?[(Qe=L.apply(st,arguments)).x-fr[0],Qe.y-fr[1]]:[0,0],Ct({type:"dragstart"})}}return Y.origin=function(fe){return arguments.length?(L=fe,Y):L},m.rebind(Y,ce,"on")},m.touches=function(ce,L){return arguments.length<2&&(L=Z().touches),L?b(L).map(function(R){var F=it(ce,R);return F.identifier=R.identifier,F}):[]};var wt=1e-6,Gt=Math.PI,Kt=2*Gt,cr=Kt-wt,ar=Gt/2,hr=Gt/180,Xt=180/Gt;function He(ce){return ce>1?ar:ce<-1?-ar:Math.asin(ce)}function Je(ce){return((ce=Math.exp(ce))+1/ce)/2}var pe=Math.SQRT2;m.interpolateZoom=function(ce,L){var R,F,Y=ce[0],ae=ce[1],fe=ce[2],Pe=L[2],Ge=L[0]-Y,Qe=L[1]-ae,st=Ge*Ge+Qe*Qe;if(st<1e-12)F=Math.log(Pe/fe)/pe,R=function(Vt){return[Y+Vt*Ge,ae+Vt*Qe,fe*Math.exp(pe*Vt*F)]};else{var Mt=Math.sqrt(st),It=(Pe*Pe-fe*fe+4*st)/(2*fe*2*Mt),Ct=(Pe*Pe-fe*fe-4*st)/(2*Pe*2*Mt),Pt=Math.log(Math.sqrt(It*It+1)-It),kt=Math.log(Math.sqrt(Ct*Ct+1)-Ct);F=(kt-Pt)/pe,R=function(Vt){var Nt,jr,Yt=Vt*F,fr=Je(Pt),Mr=fe/(2*Mt)*(fr*(Nt=pe*Yt+Pt,((Nt=Math.exp(2*Nt))-1)/(Nt+1))-(jr=Pt,((jr=Math.exp(jr))-1/jr)/2));return[Y+Mr*Ge,ae+Mr*Qe,fe*fr/Je(pe*Yt+Pt)]}}return R.duration=1e3*F,R},m.behavior.zoom=function(){var ce,L,R,F,Y,ae,fe,ve,Ae,Pe={x:0,y:0,k:1},Ge=[960,500],Qe=We,st=250,Mt=0,It="mousedown.zoom",Ct="mousemove.zoom",Pt="mouseup.zoom",kt="touchstart.zoom",Vt=re(Nt,"zoomstart","zoom","zoomend");function Nt(en){en.on(It,yn).on(Be+".zoom",ii).on("dblclick.zoom",xi).on(kt,Jn)}function Yt(en){return[(en[0]-Pe.x)/Pe.k,(en[1]-Pe.y)/Pe.k]}function fr(en){Pe.k=Math.max(Qe[0],Math.min(Qe[1],en))}function Mr(en,On){var ti;Pe.x+=en[0]-(On=[(ti=On)[0]*Pe.k+Pe.x,ti[1]*Pe.k+Pe.y])[0],Pe.y+=en[1]-On[1]}function jr(en,On,ti,Qn){en.__chart__={x:Pe.x,y:Pe.y,k:Pe.k},fr(Math.pow(2,Qn)),Mr(L=On,ti),en=m.select(en),st>0&&(en=en.transition().duration(st)),en.call(Nt.event)}function Fr(){fe&&fe.domain(ae.range().map(function(en){return(en-Pe.x)/Pe.k}).map(ae.invert)),Ae&&Ae.domain(ve.range().map(function(en){return(en-Pe.y)/Pe.k}).map(ve.invert))}function fn(en){Mt++||en({type:"zoomstart"})}function on(en){Fr(),en({type:"zoom",scale:Pe.k,translate:[Pe.x,Pe.y]})}function wn(en){--Mt||(en({type:"zoomend"}),L=null)}function yn(){var en=this,On=Vt.of(en,arguments),ti=0,Qn=m.select(n(en)).on(Ct,ji).on(Pt,li),pi=Yt(m.mouse(en)),wi=At(en);function ji(){ti=1,Mr(m.mouse(en),pi),on(On)}function li(){Qn.on(Ct,null).on(Pt,null),wi(ti),wn(On)}Ms.call(en),fn(On)}function Jn(){var en,On=this,ti=Vt.of(On,arguments),Qn={},pi=0,wi=".zoom-"+m.event.changedTouches[0].identifier,ji="touchmove"+wi,li="touchend"+wi,Oi=[],Li=m.select(On),Yi=At(On);function Ei(){var ja=m.touches(On);return en=Pe.k,ja.forEach(function(Ua){Ua.identifier in Qn&&(Qn[Ua.identifier]=Yt(Ua))}),ja}function Fi(){var ja=m.event.target;m.select(ja).on(ji,Vi).on(li,ya),Oi.push(ja);for(var Ua=m.event.changedTouches,ba=0,Fa=Ua.length;ba<Fa;++ba)Qn[Ua[ba].identifier]=null;var Sa=Ei(),Lo=Date.now();if(1===Sa.length){if(Lo-Y<500){var Qa=Sa[0];jr(On,Qa,Qn[Qa.identifier],Math.floor(Math.log(Pe.k)/Math.LN2)+1),G()}Y=Lo}else if(Sa.length>1){var Qo=Sa[1],Is=(Qa=Sa[0])[0]-Qo[0],Gs=Qa[1]-Qo[1];pi=Is*Is+Gs*Gs}}function Vi(){var ja,Ua,ba,Fa,Sa=m.touches(On);Ms.call(On);for(var Lo=0,Qa=Sa.length;Lo<Qa;++Lo,Fa=null)if(Fa=Qn[(ba=Sa[Lo]).identifier]){if(Ua)break;ja=ba,Ua=Fa}if(Fa){var Qo=(Qo=ba[0]-ja[0])*Qo+(Qo=ba[1]-ja[1])*Qo,Is=pi&&Math.sqrt(Qo/pi);ja=[(ja[0]+ba[0])/2,(ja[1]+ba[1])/2],Ua=[(Ua[0]+Fa[0])/2,(Ua[1]+Fa[1])/2],fr(Is*en)}Y=null,Mr(ja,Ua),on(ti)}function ya(){if(m.event.touches.length){for(var ja=m.event.changedTouches,Ua=0,ba=ja.length;Ua<ba;++Ua)delete Qn[ja[Ua].identifier];for(var Fa in Qn)return void Ei()}m.selectAll(Oi).on(wi,null),Li.on(It,yn).on(kt,Jn),Yi(),wn(ti)}Fi(),fn(ti),Li.on(It,null).on(kt,Fi)}function ii(){var en=Vt.of(this,arguments);F?clearTimeout(F):(Ms.call(this),ce=Yt(L=R||m.mouse(this)),fn(en)),F=setTimeout(function(){F=null,wn(en)},50),G(),fr(Math.pow(2,.002*we())*Pe.k),Mr(L,ce),on(en)}function xi(){var en=m.mouse(this),On=Math.log(Pe.k)/Math.LN2;jr(this,en,Yt(en),m.event.shiftKey?Math.ceil(On)-1:Math.floor(On)+1)}return Be||(Be="onwheel"in h?(we=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in h?(we=function(){return m.event.wheelDelta},"mousewheel"):(we=function(){return-m.event.detail},"MozMousePixelScroll")),Nt.event=function(en){en.each(function(){var On=Vt.of(this,arguments),ti=Pe;ds?m.select(this).transition().each("start.zoom",function(){Pe=this.__chart__||{x:0,y:0,k:1},fn(On)}).tween("zoom:zoom",function(){var Qn=Ge[0],wi=L?L[0]:Qn/2,ji=L?L[1]:Ge[1]/2,li=m.interpolateZoom([(wi-Pe.x)/Pe.k,(ji-Pe.y)/Pe.k,Qn/Pe.k],[(wi-ti.x)/ti.k,(ji-ti.y)/ti.k,Qn/ti.k]);return function(Oi){var Li=li(Oi),Yi=Qn/Li[2];this.__chart__=Pe={x:wi-Li[0]*Yi,y:ji-Li[1]*Yi,k:Yi},on(On)}}).each("interrupt.zoom",function(){wn(On)}).each("end.zoom",function(){wn(On)}):(this.__chart__=Pe,fn(On),on(On),wn(On))})},Nt.translate=function(en){return arguments.length?(Pe={x:+en[0],y:+en[1],k:Pe.k},Fr(),Nt):[Pe.x,Pe.y]},Nt.scale=function(en){return arguments.length?(Pe={x:Pe.x,y:Pe.y,k:null},fr(+en),Fr(),Nt):Pe.k},Nt.scaleExtent=function(en){return arguments.length?(Qe=null==en?We:[+en[0],+en[1]],Nt):Qe},Nt.center=function(en){return arguments.length?(R=en&&[+en[0],+en[1]],Nt):R},Nt.size=function(en){return arguments.length?(Ge=en&&[+en[0],+en[1]],Nt):Ge},Nt.duration=function(en){return arguments.length?(st=+en,Nt):st},Nt.x=function(en){return arguments.length?(fe=en,ae=en.copy(),Pe={x:0,y:0,k:1},Nt):fe},Nt.y=function(en){return arguments.length?(Ae=en,ve=en.copy(),Pe={x:0,y:0,k:1},Nt):Ae},m.rebind(Nt,Vt,"on")};var we,Be,We=[0,1/0];function Ke(){}function Ye(ce,L,R){return this instanceof Ye?(this.h=+ce,this.s=+L,void(this.l=+R)):arguments.length<2?ce instanceof Ye?new Ye(ce.h,ce.s,ce.l):Rr(""+ce,br,Ye):new Ye(ce,L,R)}m.color=Ke,Ke.prototype.toString=function(){return this.rgb()+""},m.hsl=Ye;var ft=Ye.prototype=new Ke;function ct(ce,L,R){var F,Y;function ae(fe){return Math.round(255*((ve=fe)>360?ve-=360:ve<0&&(ve+=360),ve<60?F+(Y-F)*ve/60:ve<180?Y:ve<240?F+(Y-F)*(240-ve)/60:F));var ve}return ce=isNaN(ce)?0:(ce%=360)<0?ce+360:ce,L=isNaN(L)||L<0?0:L>1?1:L,F=2*(R=R<0?0:R>1?1:R)-(Y=R<=.5?R*(1+L):R+L-R*L),new Lt(ae(ce+120),ae(ce),ae(ce-120))}function St(ce,L,R){return this instanceof St?(this.h=+ce,this.c=+L,void(this.l=+R)):arguments.length<2?ce instanceof St?new St(ce.h,ce.c,ce.l):Le(ce instanceof mt?ce.l:(ce=nr((ce=m.rgb(ce)).r,ce.g,ce.b)).l,ce.a,ce.b):new St(ce,L,R)}ft.brighter=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Ye(this.h,this.s,this.l/ce)},ft.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Ye(this.h,this.s,ce*this.l)},ft.rgb=function(){return ct(this.h,this.s,this.l)},m.hcl=St;var Ft=St.prototype=new Ke;function at(ce,L,R){return isNaN(ce)&&(ce=0),isNaN(L)&&(L=0),new mt(R,Math.cos(ce*=hr)*L,Math.sin(ce)*L)}function mt(ce,L,R){return this instanceof mt?(this.l=+ce,this.a=+L,void(this.b=+R)):arguments.length<2?ce instanceof mt?new mt(ce.l,ce.a,ce.b):ce instanceof St?at(ce.h,ce.c,ce.l):nr((ce=Lt(ce)).r,ce.g,ce.b):new mt(ce,L,R)}Ft.brighter=function(ce){return new St(this.h,this.c,Math.min(100,this.l+qt*(arguments.length?ce:1)))},Ft.darker=function(ce){return new St(this.h,this.c,Math.max(0,this.l-qt*(arguments.length?ce:1)))},Ft.rgb=function(){return at(this.h,this.c,this.l).rgb()},m.lab=mt;var qt=18,Et=mt.prototype=new Ke;function Dt(ce,L,R){var F=(ce+16)/116,Y=F+L/500,ae=F-R/200;return new Lt(dt(3.2404542*(Y=.95047*Xe(Y))-1.5371385*(F=1*Xe(F))-.4985314*(ae=1.08883*Xe(ae))),dt(-.969266*Y+1.8760108*F+.041556*ae),dt(.0556434*Y-.2040259*F+1.0572252*ae))}function Le(ce,L,R){return ce>0?new St(Math.atan2(R,L)*Xt,Math.sqrt(L*L+R*R),ce):new St(NaN,NaN,ce)}function Xe(ce){return ce>.206893034?ce*ce*ce:(ce-4/29)/7.787037}function ot(ce){return ce>.008856?Math.pow(ce,1/3):7.787037*ce+4/29}function dt(ce){return Math.round(255*(ce<=.00304?12.92*ce:1.055*Math.pow(ce,1/2.4)-.055))}function Lt(ce,L,R){return this instanceof Lt?(this.r=~~ce,this.g=~~L,void(this.b=~~R)):arguments.length<2?ce instanceof Lt?new Lt(ce.r,ce.g,ce.b):Rr(""+ce,Lt,ct):new Lt(ce,L,R)}function Ut(ce){return new Lt(ce>>16,ce>>8&255,255&ce)}function $t(ce){return Ut(ce)+""}Et.brighter=function(ce){return new mt(Math.min(100,this.l+qt*(arguments.length?ce:1)),this.a,this.b)},Et.darker=function(ce){return new mt(Math.max(0,this.l-qt*(arguments.length?ce:1)),this.a,this.b)},Et.rgb=function(){return Dt(this.l,this.a,this.b)},m.rgb=Lt;var Wt=Lt.prototype=new Ke;function wr(ce){return ce<16?"0"+Math.max(0,ce).toString(16):Math.min(255,ce).toString(16)}function Rr(ce,L,R){var F,Y,ae,fe=0,ve=0,Ae=0;if(F=/([a-z]+)\((.*)\)/.exec(ce=ce.toLowerCase()))switch(Y=F[2].split(","),F[1]){case"hsl":return R(parseFloat(Y[0]),parseFloat(Y[1])/100,parseFloat(Y[2])/100);case"rgb":return L(sr(Y[0]),sr(Y[1]),sr(Y[2]))}return(ae=_r.get(ce))?L(ae.r,ae.g,ae.b):(null==ce||"#"!==ce.charAt(0)||isNaN(ae=parseInt(ce.slice(1),16))||(4===ce.length?(fe=(3840&ae)>>4,fe|=fe>>4,ve=240&ae,ve|=ve>>4,Ae=15&ae,Ae|=Ae<<4):7===ce.length&&(fe=(16711680&ae)>>16,ve=(65280&ae)>>8,Ae=255&ae)),L(fe,ve,Ae))}function br(ce,L,R){var F,Y,ae=Math.min(ce/=255,L/=255,R/=255),fe=Math.max(ce,L,R),ve=fe-ae,Ae=(fe+ae)/2;return ve?(Y=Ae<.5?ve/(fe+ae):ve/(2-fe-ae),F=ce==fe?(L-R)/ve+(L<R?6:0):L==fe?(R-ce)/ve+2:(ce-L)/ve+4,F*=60):(F=NaN,Y=Ae>0&&Ae<1?0:F),new Ye(F,Y,Ae)}function nr(ce,L,R){var F=ot((.4124564*(ce=lr(ce))+.3575761*(L=lr(L))+.1804375*(R=lr(R)))/.95047),Y=ot((.2126729*ce+.7151522*L+.072175*R)/1);return mt(116*Y-16,500*(F-Y),200*(Y-ot((.0193339*ce+.119192*L+.9503041*R)/1.08883)))}function lr(ce){return(ce/=255)<=.04045?ce/12.92:Math.pow((ce+.055)/1.055,2.4)}function sr(ce){var L=parseFloat(ce);return"%"===ce.charAt(ce.length-1)?Math.round(2.55*L):L}Wt.brighter=function(ce){ce=Math.pow(.7,arguments.length?ce:1);var L=this.r,R=this.g,F=this.b,Y=30;return L||R||F?(L&&L<Y&&(L=Y),R&&R<Y&&(R=Y),F&&F<Y&&(F=Y),new Lt(Math.min(255,L/ce),Math.min(255,R/ce),Math.min(255,F/ce))):new Lt(Y,Y,Y)},Wt.darker=function(ce){return new Lt((ce=Math.pow(.7,arguments.length?ce:1))*this.r,ce*this.g,ce*this.b)},Wt.hsl=function(){return br(this.r,this.g,this.b)},Wt.toString=function(){return"#"+wr(this.r)+wr(this.g)+wr(this.b)};var _r=m.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Ar(ce){return"function"==typeof ce?ce:function(){return ce}}function zt(ce){return function(L,R,F){return 2===arguments.length&&"function"==typeof R&&(F=R,R=null),ur(L,R,ce,F)}}function ur(ce,L,R,F){var Ge,Y={},ae=m.dispatch("beforesend","progress","load","error"),fe={},ve=new XMLHttpRequest,Ae=null;function Pe(){var Ge,st,Mt,Qe=ve.status;if(!Qe&&((Mt=(st=ve).responseType)&&"text"!==Mt?st.response:st.responseText)||Qe>=200&&Qe<300||304===Qe){try{Ge=R.call(Y,ve)}catch(st){return void ae.error.call(Y,st)}ae.load.call(Y,Ge)}else ae.error.call(Y,ve)}return self.XDomainRequest&&!("withCredentials"in ve)&&/^(http(s)?:)?\/\//.test(ce)&&(ve=new XDomainRequest),"onload"in ve?ve.onload=ve.onerror=Pe:ve.onreadystatechange=function(){ve.readyState>3&&Pe()},ve.onprogress=function(Ge){var Qe=m.event;m.event=Ge;try{ae.progress.call(Y,ve)}finally{m.event=Qe}},Y.header=function(Ge,Qe){return Ge=(Ge+"").toLowerCase(),arguments.length<2?fe[Ge]:(null==Qe?delete fe[Ge]:fe[Ge]=Qe+"",Y)},Y.mimeType=function(Ge){return arguments.length?(L=null==Ge?null:Ge+"",Y):L},Y.responseType=function(Ge){return arguments.length?(Ae=Ge,Y):Ae},Y.response=function(Ge){return R=Ge,Y},["get","post"].forEach(function(Ge){Y[Ge]=function(){return Y.send.apply(Y,[Ge].concat(b(arguments)))}}),Y.send=function(Ge,Qe,st){if(2===arguments.length&&"function"==typeof Qe&&(st=Qe,Qe=null),ve.open(Ge,ce,!0),null==L||"accept"in fe||(fe.accept=L+",*/*"),ve.setRequestHeader)for(var Mt in fe)ve.setRequestHeader(Mt,fe[Mt]);return null!=L&&ve.overrideMimeType&&ve.overrideMimeType(L),null!=Ae&&(ve.responseType=Ae),null!=st&&Y.on("error",st).on("load",function(It){st(null,It)}),ae.beforesend.call(Y,ve),ve.send(Qe??null),Y},Y.abort=function(){return ve.abort(),Y},m.rebind(Y,ae,"on"),null==F?Y:Y.get(1===(Ge=F).length?function(Qe,st){Ge(null==Qe?st:null)}:Ge)}_r.forEach(function(ce,L){_r.set(ce,Ut(L))}),m.functor=Ar,m.xhr=zt(E),m.dsv=function(ce,L){var R=new RegExp('["'+ce+"\n]"),F=ce.charCodeAt(0);function Y(Pe,Ge,Qe){arguments.length<3&&(Qe=Ge,Ge=null);var st=ur(Pe,L,null==Ge?ae:fe(Ge),Qe);return st.row=function(Mt){return arguments.length?st.response(null==(Ge=Mt)?ae:fe(Mt)):Ge},st}function ae(Pe){return Y.parse(Pe.responseText)}function fe(Pe){return function(Ge){return Y.parse(Ge.responseText,Pe)}}function ve(Pe){return Pe.map(Ae).join(ce)}function Ae(Pe){return R.test(Pe)?'"'+Pe.replace(/\"/g,'""')+'"':Pe}return Y.parse=function(Pe,Ge){var Qe;return Y.parseRows(Pe,function(st,Mt){if(Qe)return Qe(st,Mt-1);var It=function(Ct){for(var Pt={},kt=st.length,Vt=0;Vt<kt;++Vt)Pt[st[Vt]]=Ct[Vt];return Pt};Qe=Ge?function(Ct,Pt){return Ge(It(Ct),Pt)}:It})},Y.parseRows=function(Pe,Ge){var Qe,st,Mt={},It={},Ct=[],Pt=Pe.length,kt=0,Vt=0;function Nt(){if(kt>=Pt)return It;if(st)return st=!1,Mt;var fr=kt;if(34===Pe.charCodeAt(fr)){for(var Mr=fr;Mr++<Pt;)if(34===Pe.charCodeAt(Mr)){if(34!==Pe.charCodeAt(Mr+1))break;++Mr}return kt=Mr+2,13===(jr=Pe.charCodeAt(Mr+1))?(st=!0,10===Pe.charCodeAt(Mr+2)&&++kt):10===jr&&(st=!0),Pe.slice(fr+1,Mr).replace(/""/g,'"')}for(;kt<Pt;){var jr,Fr=1;if(10===(jr=Pe.charCodeAt(kt++)))st=!0;else if(13===jr)st=!0,10===Pe.charCodeAt(kt)&&(++kt,++Fr);else if(jr!==F)continue;return Pe.slice(fr,kt-Fr)}return Pe.slice(fr)}for(;(Qe=Nt())!==It;){for(var Yt=[];Qe!==Mt&&Qe!==It;)Yt.push(Qe),Qe=Nt();Ge&&null==(Yt=Ge(Yt,Vt++))||Ct.push(Yt)}return Ct},Y.format=function(Pe){if(Array.isArray(Pe[0]))return Y.formatRows(Pe);var Ge=new S,Qe=[];return Pe.forEach(function(st){for(var Mt in st)Ge.has(Mt)||Qe.push(Ge.add(Mt))}),[Qe.map(Ae).join(ce)].concat(Pe.map(function(st){return Qe.map(function(Mt){return Ae(st[Mt])}).join(ce)})).join("\n")},Y.formatRows=function(Pe){return Pe.map(ve).join("\n")},Y},m.csv=m.dsv(",","text/csv"),m.tsv=m.dsv("\t","text/tab-separated-values");var Tt,Qt,Er,zr,an=this[z(this,"requestAnimationFrame")]||function(ce){setTimeout(ce,17)};function Kr(ce,L,R){var F=arguments.length;F<2&&(L=0),F<3&&(R=Date.now());var ae={c:ce,t:R+L,n:null};return Qt?Qt.n=ae:Tt=ae,Qt=ae,Er||(zr=clearTimeout(zr),Er=1,an(sn)),ae}function sn(){var ce=gn(),L=zn()-ce;L>24?(isFinite(L)&&(clearTimeout(zr),zr=setTimeout(sn,L)),Er=0):(Er=1,an(sn))}function gn(){for(var ce=Date.now(),L=Tt;L;)ce>=L.t&&L.c(ce-L.t)&&(L.c=null),L=L.n;return ce}function zn(){for(var ce,L=Tt,R=1/0;L;)L.c?(L.t<R&&(R=L.t),L=(ce=L).n):L=ce?ce.n=L.n:Tt=L.n;return Qt=ce,R}function Vr(ce){return ce[0]}function _n(ce){return ce[1]}function Qr(ce){for(var L,R,F,Y=ce.length,ae=[0,1],fe=2,ve=2;ve<Y;ve++){for(;fe>1&&((R=ce[ae[fe-1]])[0]-(L=ce[ae[fe-2]])[0])*((F=ce[ve])[1]-L[1])-(R[1]-L[1])*(F[0]-L[0])<=0;)--fe;ae[fe++]=ve}return ae.slice(0,fe)}function Jr(ce,L){return ce[0]-L[0]||ce[1]-L[1]}m.timer=function(){Kr.apply(this,arguments)},m.timer.flush=function(){gn(),zn()},m.round=function(ce,L){return L?Math.round(ce*(L=Math.pow(10,L)))/L:Math.round(ce)},m.geom={},m.geom.hull=function(ce){var L=Vr,R=_n;if(arguments.length)return F(ce);function F(Y){if(Y.length<3)return[];var ae,fe=Ar(L),ve=Ar(R),Ae=Y.length,Pe=[],Ge=[];for(ae=0;ae<Ae;ae++)Pe.push([+fe.call(this,Y[ae],ae),+ve.call(this,Y[ae],ae),ae]);for(Pe.sort(Jr),ae=0;ae<Ae;ae++)Ge.push([Pe[ae][0],-Pe[ae][1]]);var Qe=Qr(Pe),st=Qr(Ge),Mt=st[0]===Qe[0],It=st[st.length-1]===Qe[Qe.length-1],Ct=[];for(ae=Qe.length-1;ae>=0;--ae)Ct.push(Y[Pe[Qe[ae]][2]]);for(ae=+Mt;ae<st.length-It;++ae)Ct.push(Y[Pe[st[ae]][2]]);return Ct}return F.x=function(Y){return arguments.length?(L=Y,F):L},F.y=function(Y){return arguments.length?(R=Y,F):R},F},m.geom.polygon=function(ce){return B(ce,Nn),ce};var Nn=m.geom.polygon.prototype=[];function Hn(ce,L,R){return(R[0]-L[0])*(ce[1]-L[1])<(R[1]-L[1])*(ce[0]-L[0])}function Mn(ce,L,R,F){var Y=ce[0],ae=R[0],fe=L[0]-Y,ve=F[0]-ae,Ae=ce[1],Pe=R[1],Ge=L[1]-Ae,Qe=F[1]-Pe,st=(ve*(Ae-Pe)-Qe*(Y-ae))/(Qe*fe-ve*Ge);return[Y+st*fe,Ae+st*Ge]}function Un(ce){var L=ce[0],R=ce[ce.length-1];return!(L[0]-R[0]||L[1]-R[1])}Nn.area=function(){for(var ce,L=-1,R=this.length,F=this[R-1],Y=0;++L<R;)Y+=(ce=F)[1]*(F=this[L])[0]-ce[0]*F[1];return.5*Y},Nn.centroid=function(ce){var L,R,F=-1,Y=this.length,ae=0,fe=0,ve=this[Y-1];for(arguments.length||(ce=-1/(6*this.area()));++F<Y;)ae+=((L=ve)[0]+(ve=this[F])[0])*(R=L[0]*ve[1]-ve[0]*L[1]),fe+=(L[1]+ve[1])*R;return[ae*ce,fe*ce]},Nn.clip=function(ce){for(var L,R,F,Y,ae,fe,ve=Un(ce),Ae=-1,Pe=this.length-Un(this),Ge=this[Pe-1];++Ae<Pe;){for(L=ce.slice(),ce.length=0,Y=this[Ae],ae=L[(F=L.length-ve)-1],R=-1;++R<F;)Hn(fe=L[R],Ge,Y)?(Hn(ae,Ge,Y)||ce.push(Mn(ae,fe,Ge,Y)),ce.push(fe)):Hn(ae,Ge,Y)&&ce.push(Mn(ae,fe,Ge,Y)),ae=fe;ve&&ce.push(ce[0]),Ge=Y}return ce};var di,rr,Sr,Rt,gr,xr=[],Zr=[];function Ur(){Dn(this),this.edge=this.site=this.circle=null}function Yr(ce){var L=xr.pop()||new Ur;return L.site=ce,L}function Br(ce){Sn(ce),Sr.remove(ce),xr.push(ce),Dn(ce)}function Cr(ce){var L=ce.circle,R=L.x,F=L.cy,Y={x:R,y:F},ae=ce.P,fe=ce.N,ve=[ce];Br(ce);for(var Ae=ae;Ae.circle&&u(R-Ae.circle.x)<wt&&u(F-Ae.circle.cy)<wt;)ae=Ae.P,ve.unshift(Ae),Br(Ae),Ae=ae;ve.unshift(Ae),Sn(Ae);for(var Pe=fe;Pe.circle&&u(R-Pe.circle.x)<wt&&u(F-Pe.circle.cy)<wt;)fe=Pe.N,ve.push(Pe),Br(Pe),Pe=fe;ve.push(Pe),Sn(Pe);var Ge,Qe=ve.length;for(Ge=1;Ge<Qe;++Ge)ni((Pe=ve[Ge]).edge,(Ae=ve[Ge-1]).site,Pe.site,Y);(Pe=ve[Qe-1]).edge=Fn((Ae=ve[0]).site,Pe.site,null,Y),dn(Ae),dn(Pe)}function Or(ce){for(var L,R,F,Y,ae=ce.x,fe=ce.y,ve=Sr._;ve;)if((F=Dr(ve,fe)-ae)>wt)ve=ve.L;else{if(!((Y=ae-Nr(ve,fe))>wt)){F>-wt?(L=ve.P,R=ve):Y>-wt?(L=ve,R=ve.N):L=R=ve;break}if(!ve.R){L=ve;break}ve=ve.R}var Ae=Yr(ce);if(Sr.insert(L,Ae),L||R){if(L===R)return Sn(L),R=Yr(L.site),Sr.insert(Ae,R),Ae.edge=R.edge=Fn(L.site,Ae.site),dn(L),void dn(R);if(R){Sn(L),Sn(R);var Pe=L.site,Ge=Pe.x,Qe=Pe.y,st=ce.x-Ge,Mt=ce.y-Qe,It=R.site,Ct=It.x-Ge,Pt=It.y-Qe,kt=2*(st*Pt-Mt*Ct),Vt=st*st+Mt*Mt,Nt=Ct*Ct+Pt*Pt,Yt={x:(Pt*Vt-Mt*Nt)/kt+Ge,y:(st*Nt-Ct*Vt)/kt+Qe};ni(R.edge,Pe,It,Yt),Ae.edge=Fn(Pe,ce,null,Yt),R.edge=Fn(ce,It,null,Yt),dn(L),dn(R)}else Ae.edge=Fn(L.site,Ae.site)}}function Dr(ce,L){var R=ce.site,F=R.x,Y=R.y,ae=Y-L;if(!ae)return F;var fe=ce.P;if(!fe)return-1/0;var ve=(R=fe.site).x,Ae=R.y,Pe=Ae-L;if(!Pe)return ve;var Ge=ve-F,Qe=1/ae-1/Pe,st=Ge/Pe;return Qe?(-st+Math.sqrt(st*st-2*Qe*(Ge*Ge/(-2*Pe)-Ae+Pe/2+Y-ae/2)))/Qe+F:(F+ve)/2}function Nr(ce,L){var R=ce.N;if(R)return Dr(R,L);var F=ce.site;return F.y===L?F.x:1/0}function nn(ce){this.site=ce,this.edges=[]}function rn(ce,L){return L.angle-ce.angle}function pn(){Dn(this),this.x=this.y=this.arc=this.site=this.cy=null}function dn(ce){var L=ce.P,R=ce.N;if(L&&R){var F=L.site,Y=ce.site,ae=R.site;if(F!==ae){var fe=Y.x,ve=Y.y,Ae=F.x-fe,Pe=F.y-ve,Ge=ae.x-fe,Qe=2*(Ae*(Pt=ae.y-ve)-Pe*Ge);if(!(Qe>=-1e-12)){var st=Ae*Ae+Pe*Pe,Mt=Ge*Ge+Pt*Pt,It=(Pt*st-Pe*Mt)/Qe,Ct=(Ae*Mt-Ge*st)/Qe,Pt=Ct+ve,kt=Zr.pop()||new pn;kt.arc=ce,kt.site=Y,kt.x=It+fe,kt.y=Pt+Math.sqrt(It*It+Ct*Ct),kt.cy=Pt,ce.circle=kt;for(var Vt=null,Nt=gr._;Nt;)if(kt.y<Nt.y||kt.y===Nt.y&&kt.x<=Nt.x){if(!Nt.L){Vt=Nt.P;break}Nt=Nt.L}else{if(!Nt.R){Vt=Nt;break}Nt=Nt.R}gr.insert(Vt,kt),Vt||(Rt=kt)}}}}function Sn(ce){var L=ce.circle;L&&(L.P||(Rt=L.N),gr.remove(L),Zr.push(L),Dn(L),ce.circle=null)}function En(ce,L){var R=ce.b;if(R)return!0;var F,Y,ae=ce.a,fe=L[0][0],ve=L[1][0],Ae=L[0][1],Pe=L[1][1],Ge=ce.l,Qe=ce.r,st=Ge.x,Mt=Ge.y,It=Qe.x,Ct=Qe.y,Pt=(st+It)/2;if(Ct===Mt){if(Pt<fe||Pt>=ve)return;if(st>It){if(ae){if(ae.y>=Pe)return}else ae={x:Pt,y:Ae};R={x:Pt,y:Pe}}else{if(ae){if(ae.y<Ae)return}else ae={x:Pt,y:Pe};R={x:Pt,y:Ae}}}else if(Y=(Mt+Ct)/2-(F=(st-It)/(Ct-Mt))*Pt,F<-1||F>1)if(st>It){if(ae){if(ae.y>=Pe)return}else ae={x:(Ae-Y)/F,y:Ae};R={x:(Pe-Y)/F,y:Pe}}else{if(ae){if(ae.y<Ae)return}else ae={x:(Pe-Y)/F,y:Pe};R={x:(Ae-Y)/F,y:Ae}}else if(Mt<Ct){if(ae){if(ae.x>=ve)return}else ae={x:fe,y:F*fe+Y};R={x:ve,y:F*ve+Y}}else{if(ae){if(ae.x<fe)return}else ae={x:ve,y:F*ve+Y};R={x:fe,y:F*fe+Y}}return ce.a=ae,ce.b=R,!0}function Ln(ce,L){this.l=ce,this.r=L,this.a=this.b=null}function Fn(ce,L,R,F){var Y=new Ln(ce,L);return di.push(Y),R&&ni(Y,ce,L,R),F&&ni(Y,L,ce,F),rr[ce.i].edges.push(new zi(Y,ce,L)),rr[L.i].edges.push(new zi(Y,L,ce)),Y}function qn(ce,L,R){var F=new Ln(ce,null);return F.a=L,F.b=R,di.push(F),F}function ni(ce,L,R,F){ce.a||ce.b?ce.l===R?ce.b=F:ce.a=F:(ce.a=F,ce.l=L,ce.r=R)}function zi(ce,L,R){var F=ce.a,Y=ce.b;this.edge=ce,this.site=L,this.angle=R?Math.atan2(R.y-L.y,R.x-L.x):ce.l===L?Math.atan2(Y.x-F.x,F.y-Y.y):Math.atan2(F.x-Y.x,Y.y-F.y)}function Di(){this._=null}function Dn(ce){ce.U=ce.C=ce.L=ce.R=ce.P=ce.N=null}function si(ce,L){var R=L,F=L.R,Y=R.U;Y?Y.L===R?Y.L=F:Y.R=F:ce._=F,F.U=Y,R.U=F,R.R=F.L,R.R&&(R.R.U=R),F.L=R}function ai(ce,L){var R=L,F=L.L,Y=R.U;Y?Y.L===R?Y.L=F:Y.R=F:ce._=F,F.U=Y,R.U=F,R.L=F.R,R.L&&(R.L.U=R),F.R=R}function Wi(ce){for(;ce.L;)ce=ce.L;return ce}function ka(ce,L){var R,F,Y,ae=ce.sort(Va).pop();for(di=[],rr=new Array(ce.length),Sr=new Di,gr=new Di;;)if(Y=Rt,ae&&(!Y||ae.y<Y.y||ae.y===Y.y&&ae.x<Y.x))ae.x===R&&ae.y===F||(rr[ae.i]=new nn(ae),Or(ae),R=ae.x,F=ae.y),ae=ce.pop();else{if(!Y)break;Cr(Y.arc)}L&&(function(ve){for(var Ae,Pe,Ge,Qe,st,Mt=di,It=(Pe=ve[0][0],Ge=ve[0][1],Qe=ve[1][0],st=ve[1][1],function(Pt){var kt,Vt=Pt.a,Nt=Pt.b,Yt=Vt.x,fr=Vt.y,Mr=0,jr=1,Fr=Nt.x-Yt,fn=Nt.y-fr;if(kt=Pe-Yt,Fr||!(kt>0)){if(kt/=Fr,Fr<0){if(kt<Mr)return;kt<jr&&(jr=kt)}else if(Fr>0){if(kt>jr)return;kt>Mr&&(Mr=kt)}if(kt=Qe-Yt,Fr||!(kt<0)){if(kt/=Fr,Fr<0){if(kt>jr)return;kt>Mr&&(Mr=kt)}else if(Fr>0){if(kt<Mr)return;kt<jr&&(jr=kt)}if(kt=Ge-fr,fn||!(kt>0)){if(kt/=fn,fn<0){if(kt<Mr)return;kt<jr&&(jr=kt)}else if(fn>0){if(kt>jr)return;kt>Mr&&(Mr=kt)}if(kt=st-fr,fn||!(kt<0)){if(kt/=fn,fn<0){if(kt>jr)return;kt>Mr&&(Mr=kt)}else if(fn>0){if(kt<Mr)return;kt<jr&&(jr=kt)}return Mr>0&&(Pt.a={x:Yt+Mr*Fr,y:fr+Mr*fn}),jr<1&&(Pt.b={x:Yt+jr*Fr,y:fr+jr*fn}),Pt}}}}}),Ct=Mt.length;Ct--;)(!En(Ae=Mt[Ct],ve)||!It(Ae)||u(Ae.a.x-Ae.b.x)<wt&&u(Ae.a.y-Ae.b.y)<wt)&&(Ae.a=Ae.b=null,Mt.splice(Ct,1))}(L),function(ve){for(var Ae,Pe,Ge,Qe,st,Mt,It,Ct,Pt,kt,Vt=ve[0][0],Nt=ve[1][0],Yt=ve[0][1],fr=ve[1][1],Mr=rr,jr=Mr.length;jr--;)if((st=Mr[jr])&&st.prepare())for(Ct=(It=st.edges).length,Mt=0;Mt<Ct;)Ge=(kt=It[Mt].end()).x,Qe=kt.y,Ae=(Pt=It[++Mt%Ct].start()).x,Pe=Pt.y,(u(Ge-Ae)>wt||u(Qe-Pe)>wt)&&(It.splice(Mt,0,new zi(qn(st.site,kt,u(Ge-Vt)<wt&&fr-Qe>wt?{x:Vt,y:u(Ae-Vt)<wt?Pe:fr}:u(Qe-fr)<wt&&Nt-Ge>wt?{x:u(Pe-fr)<wt?Ae:Nt,y:fr}:u(Ge-Nt)<wt&&Qe-Yt>wt?{x:Nt,y:u(Ae-Nt)<wt?Pe:Yt}:u(Qe-Yt)<wt&&Ge-Vt>wt?{x:u(Pe-Yt)<wt?Ae:Vt,y:Yt}:null),st.site,null)),++Ct)}(L));var fe={cells:rr,edges:di};return Sr=gr=di=rr=null,fe}function Va(ce,L){return L.y-ce.y||L.x-ce.x}nn.prototype.prepare=function(){for(var ce,L=this.edges,R=L.length;R--;)(ce=L[R].edge).b&&ce.a||L.splice(R,1);return L.sort(rn),L.length},zi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Di.prototype={insert:function(ce,L){var R,F,Y;if(ce){if(L.P=ce,L.N=ce.N,ce.N&&(ce.N.P=L),ce.N=L,ce.R){for(ce=ce.R;ce.L;)ce=ce.L;ce.L=L}else ce.R=L;R=ce}else this._?(ce=Wi(this._),L.P=null,L.N=ce,ce.P=ce.L=L,R=ce):(L.P=L.N=null,this._=L,R=null);for(L.L=L.R=null,L.U=R,L.C=!0,ce=L;R&&R.C;)R===(F=R.U).L?(Y=F.R)&&Y.C?(R.C=Y.C=!1,F.C=!0,ce=F):(ce===R.R&&(si(this,R),R=(ce=R).U),R.C=!1,F.C=!0,ai(this,F)):(Y=F.L)&&Y.C?(R.C=Y.C=!1,F.C=!0,ce=F):(ce===R.L&&(ai(this,R),R=(ce=R).U),R.C=!1,F.C=!0,si(this,F)),R=ce.U;this._.C=!1},remove:function(ce){ce.N&&(ce.N.P=ce.P),ce.P&&(ce.P.N=ce.N),ce.N=ce.P=null;var L,R,F,Y=ce.U,ae=ce.L,fe=ce.R;if(R=ae?fe?Wi(fe):ae:fe,Y?Y.L===ce?Y.L=R:Y.R=R:this._=R,ae&&fe?(F=R.C,R.C=ce.C,R.L=ae,ae.U=R,R!==fe?(Y=R.U,R.U=ce.U,Y.L=ce=R.R,R.R=fe,fe.U=R):(R.U=Y,Y=R,ce=R.R)):(F=ce.C,ce=R),ce&&(ce.U=Y),!F)if(ce&&ce.C)ce.C=!1;else{do{if(ce===this._)break;if(ce===Y.L){if((L=Y.R).C&&(L.C=!1,Y.C=!0,si(this,Y),L=Y.R),L.L&&L.L.C||L.R&&L.R.C){L.R&&L.R.C||(L.L.C=!1,L.C=!0,ai(this,L),L=Y.R),L.C=Y.C,Y.C=L.R.C=!1,si(this,Y),ce=this._;break}}else if((L=Y.L).C&&(L.C=!1,Y.C=!0,ai(this,Y),L=Y.L),L.L&&L.L.C||L.R&&L.R.C){L.L&&L.L.C||(L.R.C=!1,L.C=!0,si(this,L),L=Y.L),L.C=Y.C,Y.C=L.L.C=!1,ai(this,Y),ce=this._;break}L.C=!0,ce=Y,Y=Y.U}while(!ce.C);ce&&(ce.C=!1)}}},m.geom.voronoi=function(ce){var L=Vr,R=_n,F=L,Y=R,ae=ao;if(ce)return fe(ce);function fe(Ae){var Pe=new Array(Ae.length),Ge=ae[0][0],Qe=ae[0][1],st=ae[1][0],Mt=ae[1][1];return ka(ve(Ae),ae).cells.forEach(function(It,Ct){var Pt=It.edges,kt=It.site;(Pe[Ct]=Pt.length?Pt.map(function(Vt){var Nt=Vt.start();return[Nt.x,Nt.y]}):kt.x>=Ge&&kt.x<=st&&kt.y>=Qe&&kt.y<=Mt?[[Ge,Mt],[st,Mt],[st,Qe],[Ge,Qe]]:[]).point=Ae[Ct]}),Pe}function ve(Ae){return Ae.map(function(Pe,Ge){return{x:Math.round(F(Pe,Ge)/wt)*wt,y:Math.round(Y(Pe,Ge)/wt)*wt,i:Ge}})}return fe.links=function(Ae){return ka(ve(Ae)).edges.filter(function(Pe){return Pe.l&&Pe.r}).map(function(Pe){return{source:Ae[Pe.l.i],target:Ae[Pe.r.i]}})},fe.triangles=function(Ae){var Pe=[];return ka(ve(Ae)).cells.forEach(function(Ge,Qe){for(var st,Mt,It,Ct,Pt=Ge.site,kt=Ge.edges.sort(rn),Vt=-1,Nt=kt.length,Yt=kt[Nt-1].edge,fr=Yt.l===Pt?Yt.r:Yt.l;++Vt<Nt;)st=fr,fr=(Yt=kt[Vt].edge).l===Pt?Yt.r:Yt.l,Qe<st.i&&Qe<fr.i&&((Mt=Pt).x-(Ct=fr).x)*((It=st).y-Mt.y)-(Mt.x-It.x)*(Ct.y-Mt.y)<0&&Pe.push([Ae[Qe],Ae[st.i],Ae[fr.i]])}),Pe},fe.x=function(Ae){return arguments.length?(F=Ar(L=Ae),fe):L},fe.y=function(Ae){return arguments.length?(Y=Ar(R=Ae),fe):R},fe.clipExtent=function(Ae){return arguments.length?(ae=Ae??ao,fe):ae===ao?null:ae},fe.size=function(Ae){return arguments.length?fe.clipExtent(Ae&&[[0,0],Ae]):ae===ao?null:ae&&ae[1]},fe};var ao=[[-1e6,-1e6],[1e6,1e6]];function Bi(ce){return ce.x}function ra(ce){return ce.y}function co(ce,L,R,F,Y,ae){if(!ce(L,R,F,Y,ae)){var fe=.5*(R+Y),ve=.5*(F+ae),Ae=L.nodes;Ae[0]&&co(ce,Ae[0],R,F,fe,ve),Ae[1]&&co(ce,Ae[1],fe,F,Y,ve),Ae[2]&&co(ce,Ae[2],R,ve,fe,ae),Ae[3]&&co(ce,Ae[3],fe,ve,Y,ae)}}function Ji(ce,L,R,F,Y,ae,fe){var ve,Ae=1/0;return function Pe(Ge,Qe,st,Mt,It){if(!(Qe>ae||st>fe||Mt<F||It<Y)){if(Ct=Ge.point){var Ct,Pt=L-Ge.x,kt=R-Ge.y,Vt=Pt*Pt+kt*kt;if(Vt<Ae){var Nt=Math.sqrt(Ae=Vt);F=L-Nt,Y=R-Nt,ae=L+Nt,fe=R+Nt,ve=Ct}}for(var Yt=Ge.nodes,fr=.5*(Qe+Mt),Mr=.5*(st+It),jr=(R>=Mr)<<1|L>=fr,Fr=jr+4;jr<Fr;++jr)if(Ge=Yt[3&jr])switch(3&jr){case 0:Pe(Ge,Qe,st,fr,Mr);break;case 1:Pe(Ge,fr,st,Mt,Mr);break;case 2:Pe(Ge,Qe,Mr,fr,It);break;case 3:Pe(Ge,fr,Mr,Mt,It)}}}(ce,F,Y,ae,fe),ve}function _o(ce,L){ce=m.rgb(ce),L=m.rgb(L);var R=ce.r,F=ce.g,Y=ce.b,ae=L.r-R,fe=L.g-F,ve=L.b-Y;return function(Ae){return"#"+wr(Math.round(R+ae*Ae))+wr(Math.round(F+fe*Ae))+wr(Math.round(Y+ve*Ae))}}function uo(ce,L){var R,F={},Y={};for(R in ce)R in L?F[R]=Ja(ce[R],L[R]):Y[R]=ce[R];for(R in L)R in ce||(Y[R]=L[R]);return function(ae){for(R in F)Y[R]=F[R](ae);return Y}}function Ia(ce,L){return ce=+ce,L=+L,function(R){return ce*(1-R)+L*R}}function fo(ce,L){var R,F,Y,ae=Ao.lastIndex=Mo.lastIndex=0,fe=-1,ve=[],Ae=[];for(ce+="",L+="";(R=Ao.exec(ce))&&(F=Mo.exec(L));)(Y=F.index)>ae&&(Y=L.slice(ae,Y),ve[fe]?ve[fe]+=Y:ve[++fe]=Y),(R=R[0])===(F=F[0])?ve[fe]?ve[fe]+=F:ve[++fe]=F:(ve[++fe]=null,Ae.push({i:fe,x:Ia(R,F)})),ae=Mo.lastIndex;return ae<L.length&&(Y=L.slice(ae),ve[fe]?ve[fe]+=Y:ve[++fe]=Y),ve.length<2?Ae[0]?(L=Ae[0].x,function(Pe){return L(Pe)+""}):function(){return L}:(L=Ae.length,function(Pe){for(var Ge,Qe=0;Qe<L;++Qe)ve[(Ge=Ae[Qe]).i]=Ge.x(Pe);return ve.join("")})}m.geom.delaunay=function(ce){return m.geom.voronoi().triangles(ce)},m.geom.quadtree=function(ce,L,R,F,Y){var ae,fe=Vr,ve=_n;if(ae=arguments.length)return fe=Bi,ve=ra,3===ae&&(Y=R,F=L,R=L=0),Ae(ce);function Ae(Pe){var Ge,Qe,st,Mt,It,Ct,Pt,kt,Vt,Nt=Ar(fe),Yt=Ar(ve);if(null!=L)Ct=L,Pt=R,kt=F,Vt=Y;else if(kt=Vt=-(Ct=Pt=1/0),Qe=[],st=[],It=Pe.length,ae)for(Mt=0;Mt<It;++Mt)(Ge=Pe[Mt]).x<Ct&&(Ct=Ge.x),Ge.y<Pt&&(Pt=Ge.y),Ge.x>kt&&(kt=Ge.x),Ge.y>Vt&&(Vt=Ge.y),Qe.push(Ge.x),st.push(Ge.y);else for(Mt=0;Mt<It;++Mt){var fr=+Nt(Ge=Pe[Mt],Mt),Mr=+Yt(Ge,Mt);fr<Ct&&(Ct=fr),Mr<Pt&&(Pt=Mr),fr>kt&&(kt=fr),Mr>Vt&&(Vt=Mr),Qe.push(fr),st.push(Mr)}var jr=kt-Ct,Fr=Vt-Pt;function fn(yn,Jn,ii,xi,en,On,ti,Qn){if(!isNaN(ii)&&!isNaN(xi))if(yn.leaf){var pi=yn.x,wi=yn.y;if(null!=pi)if(u(pi-ii)+u(wi-xi)<.01)on(yn,Jn,ii,xi,en,On,ti,Qn);else{var ji=yn.point;yn.x=yn.y=yn.point=null,on(yn,ji,pi,wi,en,On,ti,Qn),on(yn,Jn,ii,xi,en,On,ti,Qn)}else yn.x=ii,yn.y=xi,yn.point=Jn}else on(yn,Jn,ii,xi,en,On,ti,Qn)}function on(yn,Jn,ii,xi,en,On,ti,Qn){var pi=.5*(en+ti),wi=.5*(On+Qn),ji=ii>=pi,li=xi>=wi,Oi=li<<1|ji;yn.leaf=!1,ji?en=pi:ti=pi,li?On=wi:Qn=wi,fn(yn=yn.nodes[Oi]||(yn.nodes[Oi]={leaf:!0,nodes:[],point:null,x:null,y:null}),Jn,ii,xi,en,On,ti,Qn)}jr>Fr?Vt=Pt+jr:kt=Ct+Fr;var wn={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(yn){fn(wn,yn,+Nt(yn,++Mt),+Yt(yn,Mt),Ct,Pt,kt,Vt)},visit:function(yn){co(yn,wn,Ct,Pt,kt,Vt)},find:function(yn){return Ji(wn,yn[0],yn[1],Ct,Pt,kt,Vt)}};if(Mt=-1,null==L){for(;++Mt<It;)fn(wn,Pe[Mt],Qe[Mt],st[Mt],Ct,Pt,kt,Vt);--Mt}else Pe.forEach(wn.add);return Qe=st=Pe=Ge=null,wn}return Ae.x=function(Pe){return arguments.length?(fe=Pe,Ae):fe},Ae.y=function(Pe){return arguments.length?(ve=Pe,Ae):ve},Ae.extent=function(Pe){return arguments.length?(null==Pe?L=R=F=Y=null:(L=+Pe[0][0],R=+Pe[0][1],F=+Pe[1][0],Y=+Pe[1][1]),Ae):null==L?null:[[L,R],[F,Y]]},Ae.size=function(Pe){return arguments.length?(null==Pe?L=R=F=Y=null:(L=R=0,F=+Pe[0],Y=+Pe[1]),Ae):null==L?null:[F-L,Y-R]},Ae},m.interpolateRgb=_o,m.interpolateObject=uo,m.interpolateNumber=Ia,m.interpolateString=fo;var Ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mo=new RegExp(Ao.source,"g");function Ja(ce,L){for(var R,F=m.interpolators.length;--F>=0&&!(R=m.interpolators[F](ce,L)););return R}function _a(ce,L){var R,F=[],Y=[],ae=ce.length,fe=L.length,ve=Math.min(ce.length,L.length);for(R=0;R<ve;++R)F.push(Ja(ce[R],L[R]));for(;R<ae;++R)Y[R]=ce[R];for(;R<fe;++R)Y[R]=L[R];return function(Ae){for(R=0;R<ve;++R)Y[R]=F[R](Ae);return Y}}m.interpolate=Ja,m.interpolators=[function(ce,L){var R=typeof L;return("string"===R?_r.has(L.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(L)?_o:fo:L instanceof Ke?_o:Array.isArray(L)?_a:"object"===R&&isNaN(L)?uo:Ia)(ce,L)}],m.interpolateArray=_a;var to=function(){return E},Ts=m.map({linear:to,poly:function(ce){return function(L){return Math.pow(L,ce)}},quad:function(){return ks},cubic:function(){return As},sin:function(){return Fs},exp:function(){return jo},circle:function(){return Uo},elastic:function(ce,L){var R;return arguments.length<2&&(L=.45),arguments.length?R=L/Kt*Math.asin(1/ce):(ce=1,R=L/4),function(F){return 1+ce*Math.pow(2,-10*F)*Math.sin((F-R)*Kt/L)}},back:function(ce){return ce||(ce=1.70158),function(L){return L*L*((ce+1)*L-ce)}},bounce:function(){return ns}}),Ls=m.map({in:E,out:ys,"in-out":as,"out-in":function(ce){return as(ys(ce))}});function na(ce){return function(L){return L<=0?0:L>=1?1:ce(L)}}function ys(ce){return function(L){return 1-ce(1-L)}}function as(ce){return function(L){return.5*(L<.5?ce(2*L):2-ce(2-2*L))}}function ks(ce){return ce*ce}function As(ce){return ce*ce*ce}function ho(ce){if(ce<=0)return 0;if(ce>=1)return 1;var L=ce*ce,R=L*ce;return 4*(ce<.5?R:3*(ce-L)+R-.75)}function Fs(ce){return 1-Math.cos(ce*ar)}function jo(ce){return Math.pow(2,10*(ce-1))}function Uo(ce){return 1-Math.sqrt(1-ce*ce)}function ns(ce){return ce<1/2.75?7.5625*ce*ce:ce<2/2.75?7.5625*(ce-=1.5/2.75)*ce+.75:ce<2.5/2.75?7.5625*(ce-=2.25/2.75)*ce+.9375:7.5625*(ce-=2.625/2.75)*ce+.984375}function Ka(ce,L){return L-=ce,function(R){return Math.round(ce+L*R)}}function Zo(ce){var L,R,F,Y=[ce.a,ce.b],ae=[ce.c,ce.d],fe=wa(Y),ve=Vo(Y,ae),Ae=wa(((L=ae)[0]+=(F=-ve)*(R=Y)[0],L[1]+=F*R[1],L))||0;Y[0]*ae[1]<ae[0]*Y[1]&&(Y[0]*=-1,Y[1]*=-1,fe*=-1,ve*=-1),this.rotate=(fe?Math.atan2(Y[1],Y[0]):Math.atan2(-ae[0],ae[1]))*Xt,this.translate=[ce.e,ce.f],this.scale=[fe,Ae],this.skew=Ae?Math.atan2(ve,Ae)*Xt:0}function Vo(ce,L){return ce[0]*L[0]+ce[1]*L[1]}function wa(ce){var L=Math.sqrt(Vo(ce,ce));return L&&(ce[0]/=L,ce[1]/=L),L}m.ease=function(ce){var L=ce.indexOf("-"),R=L>=0?ce.slice(0,L):ce,F=L>=0?ce.slice(L+1):"in";return R=Ts.get(R)||to,na((F=Ls.get(F)||E)(R.apply(null,v.call(arguments,1))))},m.interpolateHcl=function(ce,L){ce=m.hcl(ce),L=m.hcl(L);var R=ce.h,F=ce.c,Y=ce.l,ae=L.h-R,fe=L.c-F,ve=L.l-Y;return isNaN(fe)&&(fe=0,F=isNaN(F)?L.c:F),isNaN(ae)?(ae=0,R=isNaN(R)?L.h:R):ae>180?ae-=360:ae<-180&&(ae+=360),function(Ae){return at(R+ae*Ae,F+fe*Ae,Y+ve*Ae)+""}},m.interpolateHsl=function(ce,L){ce=m.hsl(ce),L=m.hsl(L);var R=ce.h,F=ce.s,Y=ce.l,ae=L.h-R,fe=L.s-F,ve=L.l-Y;return isNaN(fe)&&(fe=0,F=isNaN(F)?L.s:F),isNaN(ae)?(ae=0,R=isNaN(R)?L.h:R):ae>180?ae-=360:ae<-180&&(ae+=360),function(Ae){return ct(R+ae*Ae,F+fe*Ae,Y+ve*Ae)+""}},m.interpolateLab=function(ce,L){ce=m.lab(ce),L=m.lab(L);var R=ce.l,F=ce.a,Y=ce.b,ae=L.l-R,fe=L.a-F,ve=L.b-Y;return function(Ae){return Dt(R+ae*Ae,F+fe*Ae,Y+ve*Ae)+""}},m.interpolateRound=Ka,m.transform=function(ce){var L=h.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(R){if(null!=R){L.setAttribute("transform",R);var F=L.transform.baseVal.consolidate()}return new Zo(F?F.matrix:So)})(ce)},Zo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var So={a:1,b:0,c:0,d:1,e:0,f:0};function ro(ce){return ce.length?ce.pop()+",":""}function Xo(ce,L){var Y,ae,fe,R=[],F=[];return ce=m.transform(ce),L=m.transform(L),function(Y,ae,fe,ve){if(Y[0]!==ae[0]||Y[1]!==ae[1]){var Ae=fe.push("translate(",null,",",null,")");ve.push({i:Ae-4,x:Ia(Y[0],ae[0])},{i:Ae-2,x:Ia(Y[1],ae[1])})}else(ae[0]||ae[1])&&fe.push("translate("+ae+")")}(ce.translate,L.translate,R,F),fe=R,(Y=ce.rotate)!==(ae=L.rotate)?(Y-ae>180?ae+=360:ae-Y>180&&(Y+=360),F.push({i:fe.push(ro(fe)+"rotate(",null,")")-2,x:Ia(Y,ae)})):ae&&fe.push(ro(fe)+"rotate("+ae+")"),function(Y,ae,fe,ve){Y!==ae?ve.push({i:fe.push(ro(fe)+"skewX(",null,")")-2,x:Ia(Y,ae)}):ae&&fe.push(ro(fe)+"skewX("+ae+")")}(ce.skew,L.skew,R,F),function(Y,ae,fe,ve){if(Y[0]!==ae[0]||Y[1]!==ae[1]){var Ae=fe.push(ro(fe)+"scale(",null,",",null,")");ve.push({i:Ae-4,x:Ia(Y[0],ae[0])},{i:Ae-2,x:Ia(Y[1],ae[1])})}else 1===ae[0]&&1===ae[1]||fe.push(ro(fe)+"scale("+ae+")")}(ce.scale,L.scale,R,F),ce=L=null,function(Y){for(var ae,fe=-1,ve=F.length;++fe<ve;)R[(ae=F[fe]).i]=ae.x(Y);return R.join("")}}function os(ce,L){return L=(L-=ce=+ce)||1/L,function(R){return(R-ce)/L}}function wo(ce,L){return L=(L-=ce=+ce)||1/L,function(R){return Math.max(0,Math.min(1,(R-ce)/L))}}function ta(ce){for(var L=ce.source,R=ce.target,F=function(fe,ve){if(fe===ve)return fe;for(var Ae=qe(fe),Pe=qe(ve),Ge=Ae.pop(),Qe=Pe.pop(),st=null;Ge===Qe;)st=Ge,Ge=Ae.pop(),Qe=Pe.pop();return st}(L,R),Y=[L];L!==F;)Y.push(L=L.parent);for(var ae=Y.length;R!==F;)Y.splice(ae,0,R),R=R.parent;return Y}function qe(ce){for(var L=[],R=ce.parent;null!=R;)L.push(ce),ce=R,R=R.parent;return L.push(ce),L}function Ze(ce){ce.fixed|=2}function nt(ce){ce.fixed&=-7}function ht(ce){ce.fixed|=4,ce.px=ce.x,ce.py=ce.y}function xt(ce){ce.fixed&=-5}m.interpolateTransform=Xo,m.layout={},m.layout.bundle=function(){return function(ce){for(var L=[],R=-1,F=ce.length;++R<F;)L.push(ta(ce[R]));return L}},m.layout.chord=function(){var ce,L,R,F,Y,ae,fe,ve={},Ae=0;function Pe(){var Qe,st,Mt,It,Ct,Pt={},kt=[],Vt=m.range(F),Nt=[];for(ce=[],L=[],Qe=0,It=-1;++It<F;){for(st=0,Ct=-1;++Ct<F;)st+=R[It][Ct];kt.push(st),Nt.push(m.range(F)),Qe+=st}for(Y&&Vt.sort(function(wn,yn){return Y(kt[wn],kt[yn])}),ae&&Nt.forEach(function(wn,yn){wn.sort(function(Jn,ii){return ae(R[yn][Jn],R[yn][ii])})}),Qe=(Kt-Ae*F)/Qe,st=0,It=-1;++It<F;){for(Mt=st,Ct=-1;++Ct<F;){var Yt=Vt[It],fr=Nt[Yt][Ct],Mr=R[Yt][fr],jr=st,Fr=st+=Mr*Qe;Pt[Yt+"-"+fr]={index:Yt,subindex:fr,startAngle:jr,endAngle:Fr,value:Mr}}L[Yt]={index:Yt,startAngle:Mt,endAngle:st,value:kt[Yt]},st+=Ae}for(It=-1;++It<F;)for(Ct=It-1;++Ct<F;){var fn=Pt[It+"-"+Ct],on=Pt[Ct+"-"+It];(fn.value||on.value)&&ce.push(fn.value<on.value?{source:on,target:fn}:{source:fn,target:on})}fe&&Ge()}function Ge(){ce.sort(function(Qe,st){return fe((Qe.source.value+Qe.target.value)/2,(st.source.value+st.target.value)/2)})}return ve.matrix=function(Qe){return arguments.length?(F=(R=Qe)&&R.length,ce=L=null,ve):R},ve.padding=function(Qe){return arguments.length?(Ae=Qe,ce=L=null,ve):Ae},ve.sortGroups=function(Qe){return arguments.length?(Y=Qe,ce=L=null,ve):Y},ve.sortSubgroups=function(Qe){return arguments.length?(ae=Qe,ce=null,ve):ae},ve.sortChords=function(Qe){return arguments.length?(fe=Qe,ce&&Ge(),ve):fe},ve.chords=function(){return ce||Pe(),ce},ve.groups=function(){return L||Pe(),L},ve},m.layout.force=function(){var ce,L,R,F,Y,ae,fe={},ve=m.dispatch("start","tick","end"),Ae=[1,1],Pe=.9,Ge=yt,Qe=Ot,st=-30,Mt=ir,It=.1,Ct=.64,Pt=[],kt=[];function Vt(Yt){return function(fr,Mr,jr,Fr){if(fr.point!==Yt){var fn=fr.cx-Yt.x,on=fr.cy-Yt.y,wn=Fr-Mr,yn=fn*fn+on*on;if(wn*wn/Ct<yn){if(yn<Mt){var Jn=fr.charge/yn;Yt.px-=fn*Jn,Yt.py-=on*Jn}return!0}fr.point&&yn&&yn<Mt&&(Yt.px-=fn*(Jn=fr.pointCharge/yn),Yt.py-=on*Jn)}return!fr.charge}}function Nt(Yt){Yt.px=m.event.x,Yt.py=m.event.y,fe.resume()}return fe.tick=function(){if((R*=.99)<.005)return ce=null,ve.end({type:"end",alpha:R=0}),!0;var Yt,fr,Mr,jr,Fr,fn,on,wn,yn,Jn=Pt.length,ii=kt.length;for(fr=0;fr<ii;++fr)jr=(Mr=kt[fr]).source,(fn=(wn=(Fr=Mr.target).x-jr.x)*wn+(yn=Fr.y-jr.y)*yn)&&(wn*=fn=R*Y[fr]*((fn=Math.sqrt(fn))-F[fr])/fn,yn*=fn,Fr.x-=wn*(on=jr.weight+Fr.weight?jr.weight/(jr.weight+Fr.weight):.5),Fr.y-=yn*on,jr.x+=wn*(on=1-on),jr.y+=yn*on);if((on=R*It)&&(wn=Ae[0]/2,yn=Ae[1]/2,fr=-1,on))for(;++fr<Jn;)(Mr=Pt[fr]).x+=(wn-Mr.x)*on,Mr.y+=(yn-Mr.y)*on;if(st)for(function xi(en,On,ti){var Qn=0,pi=0;if(en.charge=0,!en.leaf)for(var wi,ji=en.nodes,li=ji.length,Oi=-1;++Oi<li;)null!=(wi=ji[Oi])&&(xi(wi,On,ti),en.charge+=wi.charge,Qn+=wi.charge*wi.cx,pi+=wi.charge*wi.cy);if(en.point){en.leaf||(en.point.x+=Math.random()-.5,en.point.y+=Math.random()-.5);var Li=On*ti[en.point.index];en.charge+=en.pointCharge=Li,Qn+=Li*en.point.x,pi+=Li*en.point.y}en.cx=Qn/en.charge,en.cy=pi/en.charge}(Yt=m.geom.quadtree(Pt),R,ae),fr=-1;++fr<Jn;)(Mr=Pt[fr]).fixed||Yt.visit(Vt(Mr));for(fr=-1;++fr<Jn;)(Mr=Pt[fr]).fixed?(Mr.x=Mr.px,Mr.y=Mr.py):(Mr.x-=(Mr.px-(Mr.px=Mr.x))*Pe,Mr.y-=(Mr.py-(Mr.py=Mr.y))*Pe);ve.tick({type:"tick",alpha:R})},fe.nodes=function(Yt){return arguments.length?(Pt=Yt,fe):Pt},fe.links=function(Yt){return arguments.length?(kt=Yt,fe):kt},fe.size=function(Yt){return arguments.length?(Ae=Yt,fe):Ae},fe.linkDistance=function(Yt){return arguments.length?(Ge="function"==typeof Yt?Yt:+Yt,fe):Ge},fe.distance=fe.linkDistance,fe.linkStrength=function(Yt){return arguments.length?(Qe="function"==typeof Yt?Yt:+Yt,fe):Qe},fe.friction=function(Yt){return arguments.length?(Pe=+Yt,fe):Pe},fe.charge=function(Yt){return arguments.length?(st="function"==typeof Yt?Yt:+Yt,fe):st},fe.chargeDistance=function(Yt){return arguments.length?(Mt=Yt*Yt,fe):Math.sqrt(Mt)},fe.gravity=function(Yt){return arguments.length?(It=+Yt,fe):It},fe.theta=function(Yt){return arguments.length?(Ct=Yt*Yt,fe):Math.sqrt(Ct)},fe.alpha=function(Yt){return arguments.length?(Yt=+Yt,R?Yt>0?R=Yt:(ce.c=null,ce.t=NaN,ce=null,ve.end({type:"end",alpha:R=0})):Yt>0&&(ve.start({type:"start",alpha:R=Yt}),ce=Kr(fe.tick)),fe):R},fe.start=function(){var Yt,fr,Mr,jr=Pt.length,Fr=kt.length,fn=Ae[0],on=Ae[1];for(Yt=0;Yt<jr;++Yt)(Mr=Pt[Yt]).index=Yt,Mr.weight=0;for(Yt=0;Yt<Fr;++Yt)"number"==typeof(Mr=kt[Yt]).source&&(Mr.source=Pt[Mr.source]),"number"==typeof Mr.target&&(Mr.target=Pt[Mr.target]),++Mr.source.weight,++Mr.target.weight;for(Yt=0;Yt<jr;++Yt)Mr=Pt[Yt],isNaN(Mr.x)&&(Mr.x=wn("x",fn)),isNaN(Mr.y)&&(Mr.y=wn("y",on)),isNaN(Mr.px)&&(Mr.px=Mr.x),isNaN(Mr.py)&&(Mr.py=Mr.y);if(F=[],"function"==typeof Ge)for(Yt=0;Yt<Fr;++Yt)F[Yt]=+Ge.call(this,kt[Yt],Yt);else for(Yt=0;Yt<Fr;++Yt)F[Yt]=Ge;if(Y=[],"function"==typeof Qe)for(Yt=0;Yt<Fr;++Yt)Y[Yt]=+Qe.call(this,kt[Yt],Yt);else for(Yt=0;Yt<Fr;++Yt)Y[Yt]=Qe;if(ae=[],"function"==typeof st)for(Yt=0;Yt<jr;++Yt)ae[Yt]=+st.call(this,Pt[Yt],Yt);else for(Yt=0;Yt<jr;++Yt)ae[Yt]=st;function wn(yn,Jn){if(!fr){for(fr=new Array(jr),On=0;On<jr;++On)fr[On]=[];for(On=0;On<Fr;++On){var ii=kt[On];fr[ii.source.index].push(ii.target),fr[ii.target.index].push(ii.source)}}for(var xi,en=fr[Yt],On=-1,ti=en.length;++On<ti;)if(!isNaN(xi=en[On][yn]))return xi;return Math.random()*Jn}return fe.resume()},fe.resume=function(){return fe.alpha(.1)},fe.stop=function(){return fe.alpha(0)},fe.drag=function(){if(L||(L=m.behavior.drag().origin(E).on("dragstart.force",Ze).on("drag.force",Nt).on("dragend.force",nt)),!arguments.length)return L;this.on("mouseover.force",ht).on("mouseout.force",xt).call(L)},m.rebind(fe,ve,"on")};var yt=20,Ot=1,ir=1/0;function or(ce,L){return m.rebind(ce,L,"sort","children","value"),ce.nodes=ce,ce.links=Wr,ce}function er(ce,L){for(var R=[ce];null!=(ce=R.pop());)if(L(ce),(Y=ce.children)&&(F=Y.length))for(var F,Y;--F>=0;)R.push(Y[F])}function dr(ce,L){for(var R=[ce],F=[];null!=(ce=R.pop());)if(F.push(ce),(ae=ce.children)&&(Y=ae.length))for(var Y,ae,fe=-1;++fe<Y;)R.push(ae[fe]);for(;null!=(ce=F.pop());)L(ce)}function kr(ce){return ce.children}function Lr(ce){return ce.value}function Ir(ce,L){return L.value-ce.value}function Wr(ce){return m.merge(ce.map(function(L){return(L.children||[]).map(function(R){return{source:L,target:R}})}))}m.layout.hierarchy=function(){var ce=Ir,L=kr,R=Lr;function F(Y){var ae,fe=[Y],ve=[];for(Y.depth=0;null!=(ae=fe.pop());)if(ve.push(ae),(Pe=L.call(F,ae,ae.depth))&&(Ae=Pe.length)){for(var Ae,Pe,Ge;--Ae>=0;)fe.push(Ge=Pe[Ae]),Ge.parent=ae,Ge.depth=ae.depth+1;R&&(ae.value=0),ae.children=Pe}else R&&(ae.value=+R.call(F,ae,ae.depth)||0),delete ae.children;return dr(Y,function(Qe){var st,Mt;ce&&(st=Qe.children)&&st.sort(ce),R&&(Mt=Qe.parent)&&(Mt.value+=Qe.value)}),ve}return F.sort=function(Y){return arguments.length?(ce=Y,F):ce},F.children=function(Y){return arguments.length?(L=Y,F):L},F.value=function(Y){return arguments.length?(R=Y,F):R},F.revalue=function(Y){return R&&(er(Y,function(ae){ae.children&&(ae.value=0)}),dr(Y,function(ae){var fe;ae.children||(ae.value=+R.call(F,ae,ae.depth)||0),(fe=ae.parent)&&(fe.value+=ae.value)})),Y},F},m.layout.partition=function(){var ce=m.layout.hierarchy(),L=[1,1];function R(F,Y){var ae=ce.call(this,F,Y);return function fe(ve,Ae,Pe,Ge){var Qe=ve.children;if(ve.x=Ae,ve.y=ve.depth*Ge,ve.dx=Pe,ve.dy=Ge,Qe&&(st=Qe.length)){var st,Mt,It,Ct=-1;for(Pe=ve.value?Pe/ve.value:0;++Ct<st;)fe(Mt=Qe[Ct],Ae,It=Mt.value*Pe,Ge),Ae+=It}}(ae[0],0,L[0],L[1]/function fe(ve){var Ae=ve.children,Pe=0;if(Ae&&(Ge=Ae.length))for(var Ge,Qe=-1;++Qe<Ge;)Pe=Math.max(Pe,fe(Ae[Qe]));return 1+Pe}(ae[0])),ae}return R.size=function(F){return arguments.length?(L=F,R):L},or(R,ce)},m.layout.pie=function(){var ce=Number,L=mn,R=0,F=Kt,Y=0;function ae(fe){var ve,Ae=fe.length,Pe=fe.map(function(Vt,Nt){return+ce.call(ae,Vt,Nt)}),Ge=+("function"==typeof R?R.apply(this,arguments):R),Qe=("function"==typeof F?F.apply(this,arguments):F)-Ge,st=Math.min(Math.abs(Qe)/Ae,+("function"==typeof Y?Y.apply(this,arguments):Y)),Mt=st*(Qe<0?-1:1),It=m.sum(Pe),Ct=It?(Qe-Ae*Mt)/It:0,Pt=m.range(Ae),kt=[];return null!=L&&Pt.sort(L===mn?function(Vt,Nt){return Pe[Nt]-Pe[Vt]}:function(Vt,Nt){return L(fe[Vt],fe[Nt])}),Pt.forEach(function(Vt){kt[Vt]={data:fe[Vt],value:ve=Pe[Vt],startAngle:Ge,endAngle:Ge+=ve*Ct+Mt,padAngle:st}}),kt}return ae.value=function(fe){return arguments.length?(ce=fe,ae):ce},ae.sort=function(fe){return arguments.length?(L=fe,ae):L},ae.startAngle=function(fe){return arguments.length?(R=fe,ae):R},ae.endAngle=function(fe){return arguments.length?(F=fe,ae):F},ae.padAngle=function(fe){return arguments.length?(Y=fe,ae):Y},ae};var mn={};function Tn(ce){return ce.x}function jn(ce){return ce.y}function Gn(ce,L,R){ce.y0=L,ce.y=R}m.layout.stack=function(){var ce=E,L=Mi,R=Ri,F=Gn,Y=Tn,ae=jn;function fe(ve,Ae){if(!(st=ve.length))return ve;var Pe=ve.map(function(Vt,Nt){return ce.call(fe,Vt,Nt)}),Ge=Pe.map(function(Vt){return Vt.map(function(Nt,Yt){return[Y.call(fe,Nt,Yt),ae.call(fe,Nt,Yt)]})}),Qe=L.call(fe,Ge,Ae);Pe=m.permute(Pe,Qe),Ge=m.permute(Ge,Qe);var st,Mt,It,Ct,Pt=R.call(fe,Ge,Ae),kt=Pe[0].length;for(It=0;It<kt;++It)for(F.call(fe,Pe[0][It],Ct=Pt[It],Ge[0][It][1]),Mt=1;Mt<st;++Mt)F.call(fe,Pe[Mt][It],Ct+=Ge[Mt-1][It][1],Ge[Mt][It][1]);return ve}return fe.values=function(ve){return arguments.length?(ce=ve,fe):ce},fe.order=function(ve){return arguments.length?(L="function"==typeof ve?ve:ei.get(ve)||Mi,fe):L},fe.offset=function(ve){return arguments.length?(R="function"==typeof ve?ve:Yn.get(ve)||Ri,fe):R},fe.x=function(ve){return arguments.length?(Y=ve,fe):Y},fe.y=function(ve){return arguments.length?(ae=ve,fe):ae},fe.out=function(ve){return arguments.length?(F=ve,fe):F},fe};var ei=m.map({"inside-out":function(ce){var L,R,F=ce.length,Y=ce.map(Qi),ae=ce.map(Ki),fe=m.range(F).sort(function(Qe,st){return Y[Qe]-Y[st]}),ve=0,Ae=0,Pe=[],Ge=[];for(L=0;L<F;++L)R=fe[L],ve<Ae?(ve+=ae[R],Pe.push(R)):(Ae+=ae[R],Ge.push(R));return Ge.reverse().concat(Pe)},reverse:function(ce){return m.range(ce.length).reverse()},default:Mi}),Yn=m.map({silhouette:function(ce){var L,R,F,Y=ce.length,ae=ce[0].length,fe=[],ve=0,Ae=[];for(R=0;R<ae;++R){for(L=0,F=0;L<Y;L++)F+=ce[L][R][1];F>ve&&(ve=F),fe.push(F)}for(R=0;R<ae;++R)Ae[R]=(ve-fe[R])/2;return Ae},wiggle:function(ce){var L,R,F,Y,ae,fe,ve,Ae,Pe,Ge=ce.length,Qe=ce[0],st=Qe.length,Mt=[];for(Mt[0]=Ae=Pe=0,R=1;R<st;++R){for(L=0,Y=0;L<Ge;++L)Y+=ce[L][R][1];for(L=0,ae=0,ve=Qe[R][0]-Qe[R-1][0];L<Ge;++L){for(F=0,fe=(ce[L][R][1]-ce[L][R-1][1])/(2*ve);F<L;++F)fe+=(ce[F][R][1]-ce[F][R-1][1])/ve;ae+=fe*ce[L][R][1]}Mt[R]=Ae-=Y?ae/Y*ve:0,Ae<Pe&&(Pe=Ae)}for(R=0;R<st;++R)Mt[R]-=Pe;return Mt},expand:function(ce){var L,R,F,Y=ce.length,ae=ce[0].length,fe=1/Y,ve=[];for(R=0;R<ae;++R){for(L=0,F=0;L<Y;L++)F+=ce[L][R][1];if(F)for(L=0;L<Y;L++)ce[L][R][1]/=F;else for(L=0;L<Y;L++)ce[L][R][1]=fe}for(R=0;R<ae;++R)ve[R]=0;return ve},zero:Ri});function Mi(ce){return m.range(ce.length)}function Ri(ce){for(var L=-1,R=ce[0].length,F=[];++L<R;)F[L]=0;return F}function Qi(ce){for(var L,R=1,F=0,Y=ce[0][1],ae=ce.length;R<ae;++R)(L=ce[R][1])>Y&&(F=R,Y=L);return F}function Ki(ce){return ce.reduce(ea,0)}function ea(ce,L){return ce+L[1]}function Da(ce,L){return Ea(ce,Math.ceil(Math.log(L.length)/Math.LN2+1))}function Ea(ce,L){for(var R=-1,F=+ce[0],Y=(ce[1]-F)/L,ae=[];++R<=L;)ae[R]=Y*R+F;return ae}function ca(ce){return[m.min(ce),m.max(ce)]}function ma(ce,L){return ce.value-L.value}function Aa(ce,L){var R=ce._pack_next;ce._pack_next=L,L._pack_prev=ce,L._pack_next=R,R._pack_prev=L}function Ha(ce,L){ce._pack_next=L,L._pack_prev=ce}function po(ce,L){var R=L.x-ce.x,F=L.y-ce.y,Y=ce.r+L.r;return.999*Y*Y>R*R+F*F}function go(ce){if((L=ce.children)&&(Ae=L.length)){var L,R,F,Y,ae,fe,ve,Ae,Pe=1/0,Ge=-1/0,Qe=1/0,st=-1/0;if(L.forEach(mo),(R=L[0]).x=-R.r,R.y=0,Nt(R),Ae>1&&((F=L[1]).x=F.r,F.y=0,Nt(F),Ae>2))for(Zi(R,F,Y=L[2]),Nt(Y),Aa(R,Y),R._pack_prev=Y,Aa(Y,F),F=R._pack_next,ae=3;ae<Ae;ae++){Zi(R,F,Y=L[ae]);var Mt=0,It=1,Ct=1;for(fe=F._pack_next;fe!==F;fe=fe._pack_next,It++)if(po(fe,Y)){Mt=1;break}if(1==Mt)for(ve=R._pack_prev;ve!==fe._pack_prev&&!po(ve,Y);ve=ve._pack_prev,Ct++);Mt?(It<Ct||It==Ct&&F.r<R.r?Ha(R,F=fe):Ha(R=ve,F),ae--):(Aa(R,Y),F=Y,Nt(Y))}var Pt=(Pe+Ge)/2,kt=(Qe+st)/2,Vt=0;for(ae=0;ae<Ae;ae++)(Y=L[ae]).x-=Pt,Y.y-=kt,Vt=Math.max(Vt,Y.r+Math.sqrt(Y.x*Y.x+Y.y*Y.y));ce.r=Vt,L.forEach(vo)}function Nt(Yt){Pe=Math.min(Yt.x-Yt.r,Pe),Ge=Math.max(Yt.x+Yt.r,Ge),Qe=Math.min(Yt.y-Yt.r,Qe),st=Math.max(Yt.y+Yt.r,st)}}function mo(ce){ce._pack_next=ce._pack_prev=ce}function vo(ce){delete ce._pack_next,delete ce._pack_prev}function Zi(ce,L,R){var F=ce.r+R.r,Y=L.x-ce.x,ae=L.y-ce.y;if(F&&(Y||ae)){var fe=L.r+R.r,ve=Y*Y+ae*ae,Ae=.5+((F*=F)-(fe*=fe))/(2*ve),Pe=Math.sqrt(Math.max(0,2*fe*(F+ve)-(F-=ve)*F-fe*fe))/(2*ve);R.x=ce.x+Ae*Y+Pe*ae,R.y=ce.y+Ae*ae-Pe*Y}else R.x=ce.x+F,R.y=ce.y}function vt(ce,L){return ce.parent==L.parent?1:2}function jt(ce){var L=ce.children;return L.length?L[0]:ce.t}function vr(ce){var L,R=ce.children;return(L=R.length)?R[L-1]:ce.t}function Zt(ce,L,R){var F=R/(L.i-ce.i);L.c-=F,L.s+=R,ce.c+=F,L.z+=R,L.m+=R}function yr(ce,L,R){return ce.a.parent===L.parent?ce.a:R}function Hr(ce){return{x:ce.x,y:ce.y,dx:ce.dx,dy:ce.dy}}function Xr(ce,L){var R=ce.x+L[3],F=ce.y+L[0],Y=ce.dx-L[1]-L[3],ae=ce.dy-L[0]-L[2];return Y<0&&(R+=Y/2,Y=0),ae<0&&(F+=ae/2,ae=0),{x:R,y:F,dx:Y,dy:ae}}function ln(ce){var L=ce[0],R=ce[ce.length-1];return L<R?[L,R]:[R,L]}function bn(ce){return ce.rangeExtent?ce.rangeExtent():ln(ce.range())}function vn(ce,L,R,F){var Y=R(ce[0],ce[1]),ae=F(L[0],L[1]);return function(fe){return ae(Y(fe))}}function An(ce,L){var R,F=0,Y=ce.length-1,ae=ce[F],fe=ce[Y];return fe<ae&&(R=F,F=Y,Y=R,R=ae,ae=fe,fe=R),ce[F]=L.floor(ae),ce[Y]=L.ceil(fe),ce}function In(ce){return ce?{floor:function(L){return Math.floor(L/ce)*ce},ceil:function(L){return Math.ceil(L/ce)*ce}}:xn}m.layout.histogram=function(){var ce=!0,L=Number,R=ca,F=Da;function Y(ae,fe){for(var ve,Ae,Pe=[],Ge=ae.map(L,this),Qe=R.call(this,Ge,fe),st=F.call(this,Qe,Ge,fe),Mt=(fe=-1,Ge.length),It=st.length-1,Ct=ce?1:1/Mt;++fe<It;)(ve=Pe[fe]=[]).dx=st[fe+1]-(ve.x=st[fe]),ve.y=0;if(It>0)for(fe=-1;++fe<Mt;)(Ae=Ge[fe])>=Qe[0]&&Ae<=Qe[1]&&((ve=Pe[m.bisect(st,Ae,1,It)-1]).y+=Ct,ve.push(ae[fe]));return Pe}return Y.value=function(ae){return arguments.length?(L=ae,Y):L},Y.range=function(ae){return arguments.length?(R=Ar(ae),Y):R},Y.bins=function(ae){return arguments.length?(F="number"==typeof ae?function(fe){return Ea(fe,ae)}:Ar(ae),Y):F},Y.frequency=function(ae){return arguments.length?(ce=!!ae,Y):ce},Y},m.layout.pack=function(){var ce,L=m.layout.hierarchy().sort(ma),R=0,F=[1,1];function Y(ae,fe){var ve=L.call(this,ae,fe),Ae=ve[0],Pe=F[0],Ge=F[1],Qe=null==ce?Math.sqrt:"function"==typeof ce?ce:function(){return ce};if(Ae.x=Ae.y=0,dr(Ae,function(Mt){Mt.r=+Qe(Mt.value)}),dr(Ae,go),R){var st=R*(ce?1:Math.max(2*Ae.r/Pe,2*Ae.r/Ge))/2;dr(Ae,function(Mt){Mt.r+=st}),dr(Ae,go),dr(Ae,function(Mt){Mt.r-=st})}return function Mt(It,Ct,Pt,kt){var Vt=It.children;if(It.x=Ct+=kt*It.x,It.y=Pt+=kt*It.y,It.r*=kt,Vt)for(var Nt=-1,Yt=Vt.length;++Nt<Yt;)Mt(Vt[Nt],Ct,Pt,kt)}(Ae,Pe/2,Ge/2,ce?1:1/Math.max(2*Ae.r/Pe,2*Ae.r/Ge)),ve}return Y.size=function(ae){return arguments.length?(F=ae,Y):F},Y.radius=function(ae){return arguments.length?(ce=null==ae||"function"==typeof ae?ae:+ae,Y):ce},Y.padding=function(ae){return arguments.length?(R=+ae,Y):R},or(Y,L)},m.layout.tree=function(){var ce=m.layout.hierarchy().sort(null).value(null),L=vt,R=[1,1],F=null;function Y(Ae,Pe){var Ge=ce.call(this,Ae,Pe),Qe=Ge[0],st=function(Nt){for(var Yt,fr={A:null,children:[Nt]},Mr=[fr];null!=(Yt=Mr.pop());)for(var jr,Fr=Yt.children,fn=0,on=Fr.length;fn<on;++fn)Mr.push((Fr[fn]=jr={_:Fr[fn],parent:Yt,children:(jr=Fr[fn].children)&&jr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:fn}).a=jr);return fr.children[0]}(Qe);if(dr(st,ae),st.parent.m=-st.z,er(st,fe),F)er(Qe,ve);else{var Mt=Qe,It=Qe,Ct=Qe;er(Qe,function(Nt){Nt.x<Mt.x&&(Mt=Nt),Nt.x>It.x&&(It=Nt),Nt.depth>Ct.depth&&(Ct=Nt)});var Pt=L(Mt,It)/2-Mt.x,kt=R[0]/(It.x+L(It,Mt)/2+Pt),Vt=R[1]/(Ct.depth||1);er(Qe,function(Nt){Nt.x=(Nt.x+Pt)*kt,Nt.y=Nt.depth*Vt})}return Ge}function ae(Ae){var Pe=Ae.children,Ge=Ae.parent.children,Qe=Ae.i?Ge[Ae.i-1]:null;if(Pe.length){!function(Mt){for(var It,Ct=0,Pt=0,kt=Mt.children,Vt=kt.length;--Vt>=0;)(It=kt[Vt]).z+=Ct,It.m+=Ct,Ct+=It.s+(Pt+=It.c)}(Ae);var st=(Pe[0].z+Pe[Pe.length-1].z)/2;Qe?(Ae.z=Qe.z+L(Ae._,Qe._),Ae.m=Ae.z-st):Ae.z=st}else Qe&&(Ae.z=Qe.z+L(Ae._,Qe._));Ae.parent.A=function(Mt,It,Ct){if(It){for(var Pt,kt=Mt,Vt=Mt,Nt=It,Yt=kt.parent.children[0],fr=kt.m,Mr=Vt.m,jr=Nt.m,Fr=Yt.m;Nt=vr(Nt),kt=jt(kt),Nt&&kt;)Yt=jt(Yt),(Vt=vr(Vt)).a=Mt,(Pt=Nt.z+jr-kt.z-fr+L(Nt._,kt._))>0&&(Zt(yr(Nt,Mt,Ct),Mt,Pt),fr+=Pt,Mr+=Pt),jr+=Nt.m,fr+=kt.m,Fr+=Yt.m,Mr+=Vt.m;Nt&&!vr(Vt)&&(Vt.t=Nt,Vt.m+=jr-Mr),kt&&!jt(Yt)&&(Yt.t=kt,Yt.m+=fr-Fr,Ct=Mt)}return Ct}(Ae,Qe,Ae.parent.A||Ge[0])}function fe(Ae){Ae._.x=Ae.z+Ae.parent.m,Ae.m+=Ae.parent.m}function ve(Ae){Ae.x*=R[0],Ae.y=Ae.depth*R[1]}return Y.separation=function(Ae){return arguments.length?(L=Ae,Y):L},Y.size=function(Ae){return arguments.length?(F=null==(R=Ae)?ve:null,Y):F?null:R},Y.nodeSize=function(Ae){return arguments.length?(F=null==(R=Ae)?null:ve,Y):F?R:null},or(Y,ce)},m.layout.cluster=function(){var ce=m.layout.hierarchy().sort(null).value(null),L=vt,R=[1,1],F=!1;function Y(ae,fe){var ve,Ae=ce.call(this,ae,fe),Pe=Ae[0],Ge=0;dr(Pe,function(Ct){var kt,Pt=Ct.children;Pt&&Pt.length?(Ct.x=(kt=Pt).reduce(function(Vt,Nt){return Vt+Nt.x},0)/kt.length,Ct.y=function(kt){return 1+m.max(kt,function(Vt){return Vt.y})}(Pt)):(Ct.x=ve?Ge+=L(Ct,ve):0,Ct.y=0,ve=Ct)});var Qe=function Ct(Pt){var kt=Pt.children;return kt&&kt.length?Ct(kt[0]):Pt}(Pe),st=function Ct(Pt){var kt,Vt=Pt.children;return Vt&&(kt=Vt.length)?Ct(Vt[kt-1]):Pt}(Pe),Mt=Qe.x-L(Qe,st)/2,It=st.x+L(st,Qe)/2;return dr(Pe,F?function(Ct){Ct.x=(Ct.x-Pe.x)*R[0],Ct.y=(Pe.y-Ct.y)*R[1]}:function(Ct){Ct.x=(Ct.x-Mt)/(It-Mt)*R[0],Ct.y=(1-(Pe.y?Ct.y/Pe.y:1))*R[1]}),Ae}return Y.separation=function(ae){return arguments.length?(L=ae,Y):L},Y.size=function(ae){return arguments.length?(F=null==(R=ae),Y):F?null:R},Y.nodeSize=function(ae){return arguments.length?(F=null!=(R=ae),Y):F?R:null},or(Y,ce)},m.layout.treemap=function(){var ce,L=m.layout.hierarchy(),R=Math.round,F=[1,1],Y=null,ae=Hr,fe=!1,ve="squarify",Ae=.5*(1+Math.sqrt(5));function Pe(Ct,Pt){for(var kt,Vt,Nt=-1,Yt=Ct.length;++Nt<Yt;)Vt=(kt=Ct[Nt]).value*(Pt<0?0:Pt),kt.area=isNaN(Vt)||Vt<=0?0:Vt}function Ge(Ct){var Pt=Ct.children;if(Pt&&Pt.length){var kt,Vt,Nt,Yt=ae(Ct),fr=[],Mr=Pt.slice(),jr=1/0,Fr="slice"===ve?Yt.dx:"dice"===ve?Yt.dy:"slice-dice"===ve?1&Ct.depth?Yt.dy:Yt.dx:Math.min(Yt.dx,Yt.dy);for(Pe(Mr,Yt.dx*Yt.dy/Ct.value),fr.area=0;(Nt=Mr.length)>0;)fr.push(kt=Mr[Nt-1]),fr.area+=kt.area,"squarify"!==ve||(Vt=st(fr,Fr))<=jr?(Mr.pop(),jr=Vt):(fr.area-=fr.pop().area,Mt(fr,Fr,Yt,!1),Fr=Math.min(Yt.dx,Yt.dy),fr.length=fr.area=0,jr=1/0);fr.length&&(Mt(fr,Fr,Yt,!0),fr.length=fr.area=0),Pt.forEach(Ge)}}function Qe(Ct){var Pt=Ct.children;if(Pt&&Pt.length){var kt,Vt=ae(Ct),Nt=Pt.slice(),Yt=[];for(Pe(Nt,Vt.dx*Vt.dy/Ct.value),Yt.area=0;kt=Nt.pop();)Yt.push(kt),Yt.area+=kt.area,null!=kt.z&&(Mt(Yt,kt.z?Vt.dx:Vt.dy,Vt,!Nt.length),Yt.length=Yt.area=0);Pt.forEach(Qe)}}function st(Ct,Pt){for(var kt,Vt=Ct.area,Nt=0,Yt=1/0,fr=-1,Mr=Ct.length;++fr<Mr;)(kt=Ct[fr].area)&&(kt<Yt&&(Yt=kt),kt>Nt&&(Nt=kt));return Pt*=Pt,(Vt*=Vt)?Math.max(Pt*Nt*Ae/Vt,Vt/(Pt*Yt*Ae)):1/0}function Mt(Ct,Pt,kt,Vt){var Nt,Yt=-1,fr=Ct.length,Mr=kt.x,jr=kt.y,Fr=Pt?R(Ct.area/Pt):0;if(Pt==kt.dx){for((Vt||Fr>kt.dy)&&(Fr=kt.dy);++Yt<fr;)(Nt=Ct[Yt]).x=Mr,Nt.y=jr,Nt.dy=Fr,Mr+=Nt.dx=Math.min(kt.x+kt.dx-Mr,Fr?R(Nt.area/Fr):0);Nt.z=!0,Nt.dx+=kt.x+kt.dx-Mr,kt.y+=Fr,kt.dy-=Fr}else{for((Vt||Fr>kt.dx)&&(Fr=kt.dx);++Yt<fr;)(Nt=Ct[Yt]).x=Mr,Nt.y=jr,Nt.dx=Fr,jr+=Nt.dy=Math.min(kt.y+kt.dy-jr,Fr?R(Nt.area/Fr):0);Nt.z=!1,Nt.dy+=kt.y+kt.dy-jr,kt.x+=Fr,kt.dx-=Fr}}function It(Ct){var Pt=ce||L(Ct),kt=Pt[0];return kt.x=kt.y=0,kt.value?(kt.dx=F[0],kt.dy=F[1]):kt.dx=kt.dy=0,ce&&L.revalue(kt),Pe([kt],kt.dx*kt.dy/kt.value),(ce?Qe:Ge)(kt),fe&&(ce=Pt),Pt}return It.size=function(Ct){return arguments.length?(F=Ct,It):F},It.padding=function(Ct){if(!arguments.length)return Y;function Pt(Nt){var Yt=Ct.call(It,Nt,Nt.depth);return null==Yt?Hr(Nt):Xr(Nt,"number"==typeof Yt?[Yt,Yt,Yt,Yt]:Yt)}function kt(Nt){return Xr(Nt,Ct)}var Vt;return ae=null==(Y=Ct)?Hr:"function"==(Vt=typeof Ct)?Pt:("number"===Vt&&(Ct=[Ct,Ct,Ct,Ct]),kt),It},It.round=function(Ct){return arguments.length?(R=Ct?Math.round:Number,It):R!=Number},It.sticky=function(Ct){return arguments.length?(fe=Ct,ce=null,It):fe},It.ratio=function(Ct){return arguments.length?(Ae=Ct,It):Ae},It.mode=function(Ct){return arguments.length?(ve=Ct+"",It):ve},or(It,L)},m.random={normal:function(ce,L){var R=arguments.length;return R<2&&(L=1),R<1&&(ce=0),function(){var F,Y,ae;do{ae=(F=2*Math.random()-1)*F+(Y=2*Math.random()-1)*Y}while(!ae||ae>1);return ce+L*F*Math.sqrt(-2*Math.log(ae)/ae)}},logNormal:function(){var ce=m.random.normal.apply(m,arguments);return function(){return Math.exp(ce())}},bates:function(ce){var L=m.random.irwinHall(ce);return function(){return L()/ce}},irwinHall:function(ce){return function(){for(var L=0,R=0;R<ce;R++)L+=Math.random();return L}}},m.scale={};var xn={floor:E,ceil:E};function Pn(ce,L,R,F){var Y=[],ae=[],fe=0,ve=Math.min(ce.length,L.length)-1;for(ce[ve]<ce[0]&&(ce=ce.slice().reverse(),L=L.slice().reverse());++fe<=ve;)Y.push(R(ce[fe-1],ce[fe])),ae.push(F(L[fe-1],L[fe]));return function(Ae){var Pe=m.bisect(ce,Ae,1,ve)-1;return ae[Pe](Y[Pe](Ae))}}function Wn(ce,L){return m.rebind(ce,L,"range","rangeRound","interpolate","clamp")}function $n(ce,L){return An(ce,In(fi(ce,L)[2])),An(ce,In(fi(ce,L)[2])),ce}function fi(ce,L){null==L&&(L=10);var R=ln(ce),F=R[1]-R[0],Y=Math.pow(10,Math.floor(Math.log(F/L)/Math.LN10)),ae=L/F*Y;return ae<=.15?Y*=10:ae<=.35?Y*=5:ae<=.75&&(Y*=2),R[0]=Math.ceil(R[0]/Y)*Y,R[1]=Math.floor(R[1]/Y)*Y+.5*Y,R[2]=Y,R}function un(ce,L){return m.range.apply(m,fi(ce,L))}m.scale.linear=function(){return function ce(L,R,F,Y){var ae,fe;function ve(){var Pe=Math.min(L.length,R.length)>2?Pn:vn,Ge=Y?wo:os;return ae=Pe(L,R,Ge,F),fe=Pe(R,L,Ge,Ja),Ae}function Ae(Pe){return ae(Pe)}return Ae.invert=function(Pe){return fe(Pe)},Ae.domain=function(Pe){return arguments.length?(L=Pe.map(Number),ve()):L},Ae.range=function(Pe){return arguments.length?(R=Pe,ve()):R},Ae.rangeRound=function(Pe){return Ae.range(Pe).interpolate(Ka)},Ae.clamp=function(Pe){return arguments.length?(Y=Pe,ve()):Y},Ae.interpolate=function(Pe){return arguments.length?(F=Pe,ve()):F},Ae.ticks=function(Pe){return un(L,Pe)},Ae.tickFormat=function(Pe,Ge){return d3_scale_linearTickFormat(L,Pe,Ge)},Ae.nice=function(Pe){return $n(L,Pe),ve()},Ae.copy=function(){return ce(L,R,F,Y)},ve()}([0,1],[0,1],Ja,!1)},m.scale.log=function(){return function ce(L,R,F,Y){function ae(Ae){return(F?Math.log(Ae<0?0:Ae):-Math.log(Ae>0?0:-Ae))/Math.log(R)}function fe(Ae){return F?Math.pow(R,Ae):-Math.pow(R,-Ae)}function ve(Ae){return L(ae(Ae))}return ve.invert=function(Ae){return fe(L.invert(Ae))},ve.domain=function(Ae){return arguments.length?(F=Ae[0]>=0,L.domain((Y=Ae.map(Number)).map(ae)),ve):Y},ve.base=function(Ae){return arguments.length?(R=+Ae,L.domain(Y.map(ae)),ve):R},ve.nice=function(){var Ae=An(Y.map(ae),F?Math:hi);return L.domain(Ae),Y=Ae.map(fe),ve},ve.ticks=function(){var Ae=ln(Y),Pe=[],Ge=Ae[0],Qe=Ae[1],st=Math.floor(ae(Ge)),Mt=Math.ceil(ae(Qe)),It=R%1?2:R;if(isFinite(Mt-st)){if(F){for(;st<Mt;st++)for(var Ct=1;Ct<It;Ct++)Pe.push(fe(st)*Ct);Pe.push(fe(st))}else for(Pe.push(fe(st));st++<Mt;)for(Ct=It-1;Ct>0;Ct--)Pe.push(fe(st)*Ct);for(st=0;Pe[st]<Ge;st++);for(Mt=Pe.length;Pe[Mt-1]>Qe;Mt--);Pe=Pe.slice(st,Mt)}return Pe},ve.copy=function(){return ce(L.copy(),R,F,Y)},Wn(ve,L)}(m.scale.linear().domain([0,1]),10,!0,[1,10])};var hi={floor:function(ce){return-Math.ceil(-ce)},ceil:function(ce){return-Math.floor(-ce)}};function Vn(ce){return function(L){return L<0?-Math.pow(-L,ce):Math.pow(L,ce)}}m.scale.pow=function(){return function ce(L,R,F){var Y=Vn(R),ae=Vn(1/R);function fe(ve){return L(Y(ve))}return fe.invert=function(ve){return ae(L.invert(ve))},fe.domain=function(ve){return arguments.length?(L.domain((F=ve.map(Number)).map(Y)),fe):F},fe.ticks=function(ve){return un(F,ve)},fe.tickFormat=function(ve,Ae){return d3_scale_linearTickFormat(F,ve,Ae)},fe.nice=function(ve){return fe.domain($n(F,ve))},fe.exponent=function(ve){return arguments.length?(Y=Vn(R=ve),ae=Vn(1/R),L.domain(F.map(Y)),fe):R},fe.copy=function(){return ce(L.copy(),R,F)},Wn(fe,L)}(m.scale.linear(),1,[0,1])},m.scale.sqrt=function(){return m.scale.pow().exponent(.5)},m.scale.ordinal=function(){return function ce(L,R){var F,Y,ae;function fe(Ae){return Y[((F.get(Ae)||("range"===R.t?F.set(Ae,L.push(Ae)):NaN))-1)%Y.length]}function ve(Ae,Pe){return m.range(L.length).map(function(Ge){return Ae+Pe*Ge})}return fe.domain=function(Ae){if(!arguments.length)return L;L=[],F=new T;for(var Pe,Ge=-1,Qe=Ae.length;++Ge<Qe;)F.has(Pe=Ae[Ge])||F.set(Pe,L.push(Pe));return fe[R.t].apply(fe,R.a)},fe.range=function(Ae){return arguments.length?(Y=Ae,ae=0,R={t:"range",a:arguments},fe):Y},fe.rangePoints=function(Ae,Pe){arguments.length<2&&(Pe=0);var Ge=Ae[0],Qe=Ae[1],st=L.length<2?(Ge=(Ge+Qe)/2,0):(Qe-Ge)/(L.length-1+Pe);return Y=ve(Ge+st*Pe/2,st),ae=0,R={t:"rangePoints",a:arguments},fe},fe.rangeRoundPoints=function(Ae,Pe){arguments.length<2&&(Pe=0);var Ge=Ae[0],Qe=Ae[1],st=L.length<2?(Ge=Qe=Math.round((Ge+Qe)/2),0):(Qe-Ge)/(L.length-1+Pe)|0;return Y=ve(Ge+Math.round(st*Pe/2+(Qe-Ge-(L.length-1+Pe)*st)/2),st),ae=0,R={t:"rangeRoundPoints",a:arguments},fe},fe.rangeBands=function(Ae,Pe,Ge){arguments.length<2&&(Pe=0),arguments.length<3&&(Ge=Pe);var Qe=Ae[1]<Ae[0],st=Ae[Qe-0],It=(Ae[1-Qe]-st)/(L.length-Pe+2*Ge);return Y=ve(st+It*Ge,It),Qe&&Y.reverse(),ae=It*(1-Pe),R={t:"rangeBands",a:arguments},fe},fe.rangeRoundBands=function(Ae,Pe,Ge){arguments.length<2&&(Pe=0),arguments.length<3&&(Ge=Pe);var Qe=Ae[1]<Ae[0],st=Ae[Qe-0],Mt=Ae[1-Qe],It=Math.floor((Mt-st)/(L.length-Pe+2*Ge));return Y=ve(st+Math.round((Mt-st-(L.length-Pe)*It)/2),It),Qe&&Y.reverse(),ae=Math.round(It*(1-Pe)),R={t:"rangeRoundBands",a:arguments},fe},fe.rangeBand=function(){return ae},fe.rangeExtent=function(){return ln(R.a[0])},fe.copy=function(){return ce(L,R)},fe.domain(L)}([],{t:"range",a:[[]]})},m.scale.category10=function(){return m.scale.ordinal().range(Xn)},m.scale.category20=function(){return m.scale.ordinal().range(ui)},m.scale.category20b=function(){return m.scale.ordinal().range(Ci)},m.scale.category20c=function(){return m.scale.ordinal().range(Gi)};var Xn=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map($t),ui=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map($t),Ci=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map($t),Gi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map($t);function Rn(){return 0}m.scale.quantile=function(){return function ce(L,R){var F;function Y(){var fe=0,ve=R.length;for(F=[];++fe<ve;)F[fe-1]=m.quantile(L,fe/ve);return ae}function ae(fe){if(!isNaN(fe=+fe))return R[m.bisect(F,fe)]}return ae.domain=function(fe){return arguments.length?(L=fe.map(s).filter(c).sort(i),Y()):L},ae.range=function(fe){return arguments.length?(R=fe,Y()):R},ae.quantiles=function(){return F},ae.invertExtent=function(fe){return(fe=R.indexOf(fe))<0?[NaN,NaN]:[fe>0?F[fe-1]:L[0],fe<F.length?F[fe]:L[L.length-1]]},ae.copy=function(){return ce(L,R)},Y()}([],[])},m.scale.quantize=function(){return function ce(L,R,F){var Y,ae;function fe(Ae){return F[Math.max(0,Math.min(ae,Math.floor(Y*(Ae-L))))]}function ve(){return Y=F.length/(R-L),ae=F.length-1,fe}return fe.domain=function(Ae){return arguments.length?(L=+Ae[0],R=+Ae[Ae.length-1],ve()):[L,R]},fe.range=function(Ae){return arguments.length?(F=Ae,ve()):F},fe.invertExtent=function(Ae){return[Ae=(Ae=F.indexOf(Ae))<0?NaN:Ae/Y+L,Ae+1/Y]},fe.copy=function(){return ce(L,R,F)},ve()}(0,1,[0,1])},m.scale.threshold=function(){return function ce(L,R){function F(Y){if(Y<=Y)return R[m.bisect(L,Y)]}return F.domain=function(Y){return arguments.length?(L=Y,F):L},F.range=function(Y){return arguments.length?(R=Y,F):R},F.invertExtent=function(Y){return Y=R.indexOf(Y),[L[Y-1],L[Y]]},F.copy=function(){return ce(L,R)},F}([.5],[0,1])},m.scale.identity=function(){return function ce(L){function R(F){return+F}return R.invert=R,R.domain=R.range=function(F){return arguments.length?(L=F.map(R),R):L},R.ticks=function(F){return un(L,F)},R.tickFormat=function(F,Y){return d3_scale_linearTickFormat(L,F,Y)},R.copy=function(){return ce(L)},R}([0,1])},m.svg={},m.svg.arc=function(){var ce=qi,L=Ti,R=Rn,F=Hi,Y=Xi,ae=Ni,fe=fa;function ve(){var Pe=Math.max(0,+ce.apply(this,arguments)),Ge=Math.max(0,+L.apply(this,arguments)),Qe=Y.apply(this,arguments)-ar,st=ae.apply(this,arguments)-ar,Mt=Math.abs(st-Qe),It=Qe>st?0:1;if(Ge<Pe&&(Ct=Ge,Ge=Pe,Pe=Ct),Mt>=cr)return Ae(Ge,It)+(Pe?Ae(Pe,1-It):"")+"Z";var Ct,Pt,kt,Vt,Nt,Yt,fr,Mr,jr,Fr,fn,on,wn=0,yn=0,Jn=[];if((Vt=(+fe.apply(this,arguments)||0)/2)&&(kt=F===Hi?Math.sqrt(Pe*Pe+Ge*Ge):+F.apply(this,arguments),It||(yn*=-1),Ge&&(yn=He(kt/Ge*Math.sin(Vt))),Pe&&(wn=He(kt/Pe*Math.sin(Vt)))),Ge){Nt=Ge*Math.cos(Qe+yn),Yt=Ge*Math.sin(Qe+yn),fr=Ge*Math.cos(st-yn),Mr=Ge*Math.sin(st-yn);var ii=Math.abs(st-Qe-2*yn)<=Gt?0:1;if(yn&&oi(Nt,Yt,fr,Mr)===It^ii){var xi=(Qe+st)/2;Nt=Ge*Math.cos(xi),Yt=Ge*Math.sin(xi),fr=Mr=null}}else Nt=Yt=0;if(Pe){jr=Pe*Math.cos(st-wn),Fr=Pe*Math.sin(st-wn),fn=Pe*Math.cos(Qe+wn),on=Pe*Math.sin(Qe+wn);var en=Math.abs(Qe-st+2*wn)<=Gt?0:1;if(wn&&oi(jr,Fr,fn,on)===1-It^en){var On=(Qe+st)/2;jr=Pe*Math.cos(On),Fr=Pe*Math.sin(On),fn=on=null}}else jr=Fr=0;if(Mt>wt&&(Ct=Math.min(Math.abs(Ge-Pe)/2,+R.apply(this,arguments)))>.001){Pt=Pe<Ge^It?0:1;var ti=Ct,Qn=Ct;if(Mt<Gt){var pi=null==fn?[jr,Fr]:null==fr?[Nt,Yt]:Mn([Nt,Yt],[fn,on],[fr,Mr],[jr,Fr]),wi=Nt-pi[0],ji=Yt-pi[1],li=fr-pi[0],Oi=Mr-pi[1],Li=1/Math.sin(Math.acos((wi*li+ji*Oi)/(Math.sqrt(wi*wi+ji*ji)*Math.sqrt(li*li+Oi*Oi)))/2),Yi=Math.sqrt(pi[0]*pi[0]+pi[1]*pi[1]);Qn=Math.min(Ct,(Pe-Yi)/(Li-1)),ti=Math.min(Ct,(Ge-Yi)/(Li+1))}if(null!=fr){var Ei=ia(null==fn?[jr,Fr]:[fn,on],[Nt,Yt],Ge,ti,It),Fi=ia([fr,Mr],[jr,Fr],Ge,ti,It);Ct===ti?Jn.push("M",Ei[0],"A",ti,",",ti," 0 0,",Pt," ",Ei[1],"A",Ge,",",Ge," 0 ",1-It^oi(Ei[1][0],Ei[1][1],Fi[1][0],Fi[1][1]),",",It," ",Fi[1],"A",ti,",",ti," 0 0,",Pt," ",Fi[0]):Jn.push("M",Ei[0],"A",ti,",",ti," 0 1,",Pt," ",Fi[0])}else Jn.push("M",Nt,",",Yt);if(null!=fn){var Vi=ia([Nt,Yt],[fn,on],Pe,-Qn,It),ya=ia([jr,Fr],null==fr?[Nt,Yt]:[fr,Mr],Pe,-Qn,It);Ct===Qn?Jn.push("L",ya[0],"A",Qn,",",Qn," 0 0,",Pt," ",ya[1],"A",Pe,",",Pe," 0 ",It^oi(ya[1][0],ya[1][1],Vi[1][0],Vi[1][1]),",",1-It," ",Vi[1],"A",Qn,",",Qn," 0 0,",Pt," ",Vi[0]):Jn.push("L",ya[0],"A",Qn,",",Qn," 0 0,",Pt," ",Vi[0])}else Jn.push("L",jr,",",Fr)}else Jn.push("M",Nt,",",Yt),null!=fr&&Jn.push("A",Ge,",",Ge," 0 ",ii,",",It," ",fr,",",Mr),Jn.push("L",jr,",",Fr),null!=fn&&Jn.push("A",Pe,",",Pe," 0 ",en,",",1-It," ",fn,",",on);return Jn.push("Z"),Jn.join("")}function Ae(Pe,Ge){return"M0,"+Pe+"A"+Pe+","+Pe+" 0 1,"+Ge+" 0,"+-Pe+"A"+Pe+","+Pe+" 0 1,"+Ge+" 0,"+Pe}return ve.innerRadius=function(Pe){return arguments.length?(ce=Ar(Pe),ve):ce},ve.outerRadius=function(Pe){return arguments.length?(L=Ar(Pe),ve):L},ve.cornerRadius=function(Pe){return arguments.length?(R=Ar(Pe),ve):R},ve.padRadius=function(Pe){return arguments.length?(F=Pe==Hi?Hi:Ar(Pe),ve):F},ve.startAngle=function(Pe){return arguments.length?(Y=Ar(Pe),ve):Y},ve.endAngle=function(Pe){return arguments.length?(ae=Ar(Pe),ve):ae},ve.padAngle=function(Pe){return arguments.length?(fe=Ar(Pe),ve):fe},ve.centroid=function(){var Pe=(+ce.apply(this,arguments)+ +L.apply(this,arguments))/2,Ge=(+Y.apply(this,arguments)+ +ae.apply(this,arguments))/2-ar;return[Math.cos(Ge)*Pe,Math.sin(Ge)*Pe]},ve};var Hi="auto";function qi(ce){return ce.innerRadius}function Ti(ce){return ce.outerRadius}function Xi(ce){return ce.startAngle}function Ni(ce){return ce.endAngle}function fa(ce){return ce&&ce.padAngle}function oi(ce,L,R,F){return(ce-R)*L-(L-F)*ce>0?0:1}function ia(ce,L,R,F,Y){var ae=ce[0]-L[0],fe=ce[1]-L[1],ve=(Y?F:-F)/Math.sqrt(ae*ae+fe*fe),Ae=ve*fe,Pe=-ve*ae,Ge=ce[0]+Ae,Qe=ce[1]+Pe,st=L[0]+Ae,Mt=L[1]+Pe,It=(Ge+st)/2,Ct=(Qe+Mt)/2,Pt=st-Ge,kt=Mt-Qe,Vt=Pt*Pt+kt*kt,Nt=R-F,Yt=Ge*Mt-st*Qe,fr=(kt<0?-1:1)*Math.sqrt(Math.max(0,Nt*Nt*Vt-Yt*Yt)),Mr=(Yt*kt-Pt*fr)/Vt,jr=(-Yt*Pt-kt*fr)/Vt,Fr=(Yt*kt+Pt*fr)/Vt,fn=(-Yt*Pt+kt*fr)/Vt,on=Mr-It,wn=jr-Ct,yn=Fr-It,Jn=fn-Ct;return on*on+wn*wn>yn*yn+Jn*Jn&&(Mr=Fr,jr=fn),[[Mr-Ae,jr-Pe],[Mr*R/Nt,jr*R/Nt]]}function $a(){return!0}function ss(ce){var L=Vr,R=_n,F=$a,Y=Eo,ae=Y.key,fe=.7;function ve(Ae){var Pe,Ge=[],Qe=[],st=-1,Mt=Ae.length,It=Ar(L),Ct=Ar(R);function Pt(){Ge.push("M",Y(ce(Qe),fe))}for(;++st<Mt;)F.call(this,Pe=Ae[st],st)?Qe.push([+It.call(this,Pe,st),+Ct.call(this,Pe,st)]):Qe.length&&(Pt(),Qe=[]);return Qe.length&&Pt(),Ge.length?Ge.join(""):null}return ve.x=function(Ae){return arguments.length?(L=Ae,ve):L},ve.y=function(Ae){return arguments.length?(R=Ae,ve):R},ve.defined=function(Ae){return arguments.length?(F=Ae,ve):F},ve.interpolate=function(Ae){return arguments.length?(ae="function"==typeof Ae?Y=Ae:(Y=Jo.get(Ae)||Eo).key,ve):ae},ve.tension=function(Ae){return arguments.length?(fe=Ae,ve):fe},ve}m.svg.line=function(){return ss(E)};var Jo=m.map({linear:Eo,"linear-closed":ki,step:function(ce){for(var L=0,R=ce.length,F=ce[0],Y=[F[0],",",F[1]];++L<R;)Y.push("H",(F[0]+(F=ce[L])[0])/2,"V",F[1]);return R>1&&Y.push("H",F[0]),Y.join("")},"step-before":Ma,"step-after":Co,basis:no,"basis-open":function(ce){if(ce.length<4)return Eo(ce);for(var L,R=[],F=-1,Y=ce.length,ae=[0],fe=[0];++F<3;)ae.push((L=ce[F])[0]),fe.push(L[1]);for(R.push(oa(yo,ae)+","+oa(yo,fe)),--F;++F<Y;)L=ce[F],ae.shift(),ae.push(L[0]),fe.shift(),fe.push(L[1]),xs(R,ae,fe);return R.join("")},"basis-closed":function(ce){for(var L,R,F=-1,Y=ce.length,ae=Y+4,fe=[],ve=[];++F<4;)fe.push((R=ce[F%Y])[0]),ve.push(R[1]);for(L=[oa(yo,fe),",",oa(yo,ve)],--F;++F<ae;)R=ce[F%Y],fe.shift(),fe.push(R[0]),ve.shift(),ve.push(R[1]),xs(L,fe,ve);return L.join("")},bundle:function(ce,L){var R=ce.length-1;if(R)for(var F,Y,ae=ce[0][0],fe=ce[0][1],ve=ce[R][0]-ae,Ae=ce[R][1]-fe,Pe=-1;++Pe<=R;)(F=ce[Pe])[0]=L*F[0]+(1-L)*(ae+(Y=Pe/R)*ve),F[1]=L*F[1]+(1-L)*(fe+Y*Ae);return no(ce)},cardinal:function(ce,L){return ce.length<3?Eo(ce):ce[0]+aa(ce,za(ce,L))},"cardinal-open":function(ce,L){return ce.length<4?Eo(ce):ce[1]+aa(ce.slice(1,-1),za(ce,L))},"cardinal-closed":function(ce,L){return ce.length<3?ki(ce):ce[0]+aa((ce.push(ce[0]),ce),za([ce[ce.length-2]].concat(ce,[ce[1]]),L))},monotone:function(ce){return ce.length<3?Eo(ce):ce[0]+aa(ce,function(L){for(var R,F,Y,ae,fe=[],ve=function(Ge){for(var Qe=0,st=Ge.length-1,Mt=[],It=Ge[0],Ct=Ge[1],Pt=Mt[0]=Ko(It,Ct);++Qe<st;)Mt[Qe]=(Pt+(Pt=Ko(It=Ct,Ct=Ge[Qe+1])))/2;return Mt[Qe]=Pt,Mt}(L),Ae=-1,Pe=L.length-1;++Ae<Pe;)R=Ko(L[Ae],L[Ae+1]),u(R)<wt?ve[Ae]=ve[Ae+1]=0:(ae=(F=ve[Ae]/R)*F+(Y=ve[Ae+1]/R)*Y)>9&&(ae=3*R/Math.sqrt(ae),ve[Ae]=ae*F,ve[Ae+1]=ae*Y);for(Ae=-1;++Ae<=Pe;)ae=(L[Math.min(Pe,Ae+1)][0]-L[Math.max(0,Ae-1)][0])/(6*(1+ve[Ae]*ve[Ae])),fe.push([ae||0,ve[Ae]*ae||0]);return fe}(ce))}});function Eo(ce){return ce.length>1?ce.join("L"):ce+"Z"}function ki(ce){return ce.join("L")+"Z"}function Ma(ce){for(var L=0,R=ce.length,F=ce[0],Y=[F[0],",",F[1]];++L<R;)Y.push("V",(F=ce[L])[1],"H",F[0]);return Y.join("")}function Co(ce){for(var L=0,R=ce.length,F=ce[0],Y=[F[0],",",F[1]];++L<R;)Y.push("H",(F=ce[L])[0],"V",F[1]);return Y.join("")}function aa(ce,L){if(L.length<1||ce.length!=L.length&&ce.length!=L.length+2)return Eo(ce);var R=ce.length!=L.length,F="",Y=ce[0],ae=ce[1],fe=L[0],ve=fe,Ae=1;if(R&&(F+="Q"+(ae[0]-2*fe[0]/3)+","+(ae[1]-2*fe[1]/3)+","+ae[0]+","+ae[1],Y=ce[1],Ae=2),L.length>1){ae=ce[Ae],Ae++,F+="C"+(Y[0]+fe[0])+","+(Y[1]+fe[1])+","+(ae[0]-(ve=L[1])[0])+","+(ae[1]-ve[1])+","+ae[0]+","+ae[1];for(var Pe=2;Pe<L.length;Pe++,Ae++)F+="S"+((ae=ce[Ae])[0]-(ve=L[Pe])[0])+","+(ae[1]-ve[1])+","+ae[0]+","+ae[1]}if(R){var Ge=ce[Ae];F+="Q"+(ae[0]+2*ve[0]/3)+","+(ae[1]+2*ve[1]/3)+","+Ge[0]+","+Ge[1]}return F}function za(ce,L){for(var R,F=[],Y=(1-L)/2,ae=ce[0],fe=ce[1],ve=1,Ae=ce.length;++ve<Ae;)R=ae,ae=fe,F.push([Y*((fe=ce[ve])[0]-R[0]),Y*(fe[1]-R[1])]);return F}function no(ce){if(ce.length<3)return Eo(ce);var L=1,R=ce.length,F=ce[0],Y=F[0],ae=F[1],fe=[Y,Y,Y,(F=ce[1])[0]],ve=[ae,ae,ae,F[1]],Ae=[Y,",",ae,"L",oa(yo,fe),",",oa(yo,ve)];for(ce.push(ce[R-1]);++L<=R;)F=ce[L],fe.shift(),fe.push(F[0]),ve.shift(),ve.push(F[1]),xs(Ae,fe,ve);return ce.pop(),Ae.push("L",F),Ae.join("")}function oa(ce,L){return ce[0]*L[0]+ce[1]*L[1]+ce[2]*L[2]+ce[3]*L[3]}Jo.forEach(function(ce,L){L.key=ce,L.closed=/-closed$/.test(ce)});var To=[0,2/3,1/3,0],pa=[0,1/3,2/3,0],yo=[0,1/6,2/3,1/6];function xs(ce,L,R){ce.push("C",oa(To,L),",",oa(To,R),",",oa(pa,L),",",oa(pa,R),",",oa(yo,L),",",oa(yo,R))}function Ko(ce,L){return(L[1]-ce[1])/(L[0]-ce[0])}function Bs(ce){for(var L,R,F,Y=-1,ae=ce.length;++Y<ae;)R=(L=ce[Y])[0],F=L[1]-ar,L[0]=R*Math.cos(F),L[1]=R*Math.sin(F);return ce}function qa(ce){var L=Vr,R=Vr,F=0,Y=_n,ae=$a,fe=Eo,ve=fe.key,Ae=fe,Pe="L",Ge=.7;function Qe(st){var Mt,It,Ct,Pt=[],kt=[],Vt=[],Nt=-1,Yt=st.length,fr=Ar(L),Mr=Ar(F),jr=L===R?function(){return It}:Ar(R),Fr=F===Y?function(){return Ct}:Ar(Y);function fn(){Pt.push("M",fe(ce(Vt),Ge),Pe,Ae(ce(kt.reverse()),Ge),"Z")}for(;++Nt<Yt;)ae.call(this,Mt=st[Nt],Nt)?(kt.push([It=+fr.call(this,Mt,Nt),Ct=+Mr.call(this,Mt,Nt)]),Vt.push([+jr.call(this,Mt,Nt),+Fr.call(this,Mt,Nt)])):kt.length&&(fn(),kt=[],Vt=[]);return kt.length&&fn(),Pt.length?Pt.join(""):null}return Qe.x=function(st){return arguments.length?(L=R=st,Qe):R},Qe.x0=function(st){return arguments.length?(L=st,Qe):L},Qe.x1=function(st){return arguments.length?(R=st,Qe):R},Qe.y=function(st){return arguments.length?(F=Y=st,Qe):Y},Qe.y0=function(st){return arguments.length?(F=st,Qe):F},Qe.y1=function(st){return arguments.length?(Y=st,Qe):Y},Qe.defined=function(st){return arguments.length?(ae=st,Qe):ae},Qe.interpolate=function(st){return arguments.length?(ve="function"==typeof st?fe=st:(fe=Jo.get(st)||Eo).key,Ae=fe.reverse||fe,Pe=fe.closed?"M":"L",Qe):ve},Qe.tension=function(st){return arguments.length?(Ge=st,Qe):Ge},Qe}function Vs(ce){return ce.source}function Ga(ce){return ce.target}function ps(ce){return ce.radius}function yi(ce){return[ce.x,ce.y]}function Pi(ce){return function(){var L=ce.apply(this,arguments),R=L[0],F=L[1]-ar;return[R*Math.cos(F),R*Math.sin(F)]}}function Ps(){return 64}function Hs(){return"circle"}function ls(ce){var L=Math.sqrt(ce/Gt);return"M0,"+L+"A"+L+","+L+" 0 1,1 0,"+-L+"A"+L+","+L+" 0 1,1 0,"+L+"Z"}m.svg.line.radial=function(){var ce=ss(Bs);return ce.radius=ce.x,delete ce.x,ce.angle=ce.y,delete ce.y,ce},Ma.reverse=Co,Co.reverse=Ma,m.svg.area=function(){return qa(E)},m.svg.area.radial=function(){var ce=qa(Bs);return ce.radius=ce.x,delete ce.x,ce.innerRadius=ce.x0,delete ce.x0,ce.outerRadius=ce.x1,delete ce.x1,ce.angle=ce.y,delete ce.y,ce.startAngle=ce.y0,delete ce.y0,ce.endAngle=ce.y1,delete ce.y1,ce},m.svg.chord=function(){var ce=Vs,L=Ga,R=ps,F=Xi,Y=Ni;function ae(Pe,Ge){var Qe,st,Mt=fe(this,ce,Pe,Ge),It=fe(this,L,Pe,Ge);return"M"+Mt.p0+ve(Mt.r,Mt.p1,Mt.a1-Mt.a0)+((Qe=Mt).a0==(st=It).a0&&Qe.a1==st.a1?Ae(0,0,0,Mt.p0):Ae(0,0,0,It.p0)+ve(It.r,It.p1,It.a1-It.a0)+Ae(0,0,0,Mt.p0))+"Z"}function fe(Pe,Ge,Qe,st){var Mt=Ge.call(Pe,Qe,st),It=R.call(Pe,Mt,st),Ct=F.call(Pe,Mt,st)-ar,Pt=Y.call(Pe,Mt,st)-ar;return{r:It,a0:Ct,a1:Pt,p0:[It*Math.cos(Ct),It*Math.sin(Ct)],p1:[It*Math.cos(Pt),It*Math.sin(Pt)]}}function ve(Pe,Ge,Qe){return"A"+Pe+","+Pe+" 0 "+ +(Qe>Gt)+",1 "+Ge}function Ae(Pe,Ge,Qe,st){return"Q 0,0 "+st}return ae.radius=function(Pe){return arguments.length?(R=Ar(Pe),ae):R},ae.source=function(Pe){return arguments.length?(ce=Ar(Pe),ae):ce},ae.target=function(Pe){return arguments.length?(L=Ar(Pe),ae):L},ae.startAngle=function(Pe){return arguments.length?(F=Ar(Pe),ae):F},ae.endAngle=function(Pe){return arguments.length?(Y=Ar(Pe),ae):Y},ae},m.svg.diagonal=function(){var ce=Vs,L=Ga,R=yi;function F(Y,ae){var fe=ce.call(this,Y,ae),ve=L.call(this,Y,ae),Ae=(fe.y+ve.y)/2,Pe=[fe,{x:fe.x,y:Ae},{x:ve.x,y:Ae},ve];return"M"+(Pe=Pe.map(R))[0]+"C"+Pe[1]+" "+Pe[2]+" "+Pe[3]}return F.source=function(Y){return arguments.length?(ce=Ar(Y),F):ce},F.target=function(Y){return arguments.length?(L=Ar(Y),F):L},F.projection=function(Y){return arguments.length?(R=Y,F):R},F},m.svg.diagonal.radial=function(){var ce=m.svg.diagonal(),L=yi,R=ce.projection;return ce.projection=function(F){return arguments.length?R(Pi(L=F)):L},ce},m.svg.symbol=function(){var ce=Hs,L=Ps;function R(F,Y){return(Ho.get(ce.call(this,F,Y))||ls)(L.call(this,F,Y))}return R.type=function(F){return arguments.length?(ce=Ar(F),R):ce},R.size=function(F){return arguments.length?(L=Ar(F),R):L},R};var Ho=m.map({circle:ls,cross:function(ce){var L=Math.sqrt(ce/5)/2;return"M"+-3*L+","+-L+"H"+-L+"V"+-3*L+"H"+L+"V"+-L+"H"+3*L+"V"+L+"H"+L+"V"+3*L+"H"+-L+"V"+L+"H"+-3*L+"Z"},diamond:function(ce){var L=Math.sqrt(ce/(2*nl)),R=L*nl;return"M0,"+-L+"L"+R+",0 0,"+L+" "+-R+",0Z"},square:function(ce){var L=Math.sqrt(ce)/2;return"M"+-L+","+-L+"L"+L+","+-L+" "+L+","+L+" "+-L+","+L+"Z"},"triangle-down":function(ce){var L=Math.sqrt(ce/$o),R=L*$o/2;return"M0,"+R+"L"+L+","+-R+" "+-L+","+-R+"Z"},"triangle-up":function(ce){var L=Math.sqrt(ce/$o),R=L*$o/2;return"M0,"+-R+"L"+L+","+R+" "+-L+","+R+"Z"}});m.svg.symbolTypes=Ho.keys();var $o=Math.sqrt(3),nl=Math.tan(30*hr);q.transition=function(ce){for(var L,R,F=ds||++_s,Y=qo(ce),ae=[],fe=bs||{time:Date.now(),ease:ho,delay:0,duration:250},ve=-1,Ae=this.length;++ve<Ae;){ae.push(L=[]);for(var Pe=this[ve],Ge=-1,Qe=Pe.length;++Ge<Qe;)(R=Pe[Ge])&&gs(R,Ge,Y,F,fe),L.push(R)}return da(ae,Y,F)},q.interrupt=function(ce){return this.each(null==ce?Ms:sa(qo(ce)))};var Ms=sa(qo());function sa(ce){return function(){var L,R,F;(L=this[ce])&&(F=L[R=L.active])&&(F.timer.c=null,F.timer.t=NaN,--L.count?delete L[R]:delete this[ce],L.active+=.5,F.event&&F.event.interrupt.call(this,this.__data__,F.index))}}function da(ce,L,R){return B(ce,Ra),ce.namespace=L,ce.id=R,ce}var ds,bs,Ra=[],_s=0;function Ns(ce,L,R,F){var Y=ce.id,ae=ce.namespace;return Ne(ce,"function"==typeof R?function(fe,ve,Ae){fe[ae][Y].tween.set(L,F(R.call(fe,fe.__data__,ve,Ae)))}:(R=F(R),function(fe){fe[ae][Y].tween.set(L,R)}))}function Os(ce){return null==ce&&(ce=""),function(){this.textContent=ce}}function qo(ce){return null==ce?"__transition__":"__transition_"+ce+"__"}function gs(ce,L,R,F,Y){var ae,fe,ve,Ae,Pe,Ge=ce[R]||(ce[R]={active:0,count:0}),Qe=Ge[F];function st(It){var Ct=Ge.active,Pt=Ge[Ct];for(var kt in Pt&&(Pt.timer.c=null,Pt.timer.t=NaN,--Ge.count,delete Ge[Ct],Pt.event&&Pt.event.interrupt.call(ce,ce.__data__,Pt.index)),Ge)if(+kt<F){var Vt=Ge[kt];Vt.timer.c=null,Vt.timer.t=NaN,--Ge.count,delete Ge[kt]}fe.c=Mt,Kr(function(){return fe.c&&Mt(It||1)&&(fe.c=null,fe.t=NaN),1},0,ae),Ge.active=F,Qe.event&&Qe.event.start.call(ce,ce.__data__,L),Pe=[],Qe.tween.forEach(function(Nt,Yt){(Yt=Yt.call(ce,ce.__data__,L))&&Pe.push(Yt)}),Ae=Qe.ease,ve=Qe.duration}function Mt(It){for(var Ct=It/ve,Pt=Ae(Ct),kt=Pe.length;kt>0;)Pe[--kt].call(ce,Pt);if(Ct>=1)return Qe.event&&Qe.event.end.call(ce,ce.__data__,L),--Ge.count?delete Ge[F]:delete ce[R],1}Qe||(fe=Kr(function(It){var Ct=Qe.delay;if(fe.t=Ct+ae,Ct<=It)return st(It-Ct);fe.c=st},0,ae=Y.time),Qe=Ge[F]={tween:new T,time:ae,timer:fe,delay:Y.delay,duration:Y.duration,ease:Y.ease,index:L},Y=null,++Ge.count)}Ra.call=q.call,Ra.empty=q.empty,Ra.node=q.node,Ra.size=q.size,m.transition=function(ce,L){return ce&&ce.transition?ds?ce.transition(L):ce:m.selection().transition(ce)},m.transition.prototype=Ra,Ra.select=function(ce){var L,R,F,Y=this.id,ae=this.namespace,fe=[];ce=te(ce);for(var ve=-1,Ae=this.length;++ve<Ae;){fe.push(L=[]);for(var Pe=this[ve],Ge=-1,Qe=Pe.length;++Ge<Qe;)(F=Pe[Ge])&&(R=ce.call(F,F.__data__,Ge,ve))?("__data__"in F&&(R.__data__=F.__data__),gs(R,Ge,ae,Y,F[ae][Y]),L.push(R)):L.push(null)}return da(fe,ae,Y)},Ra.selectAll=function(ce){var L,R,F,Y,ae,fe=this.id,ve=this.namespace,Ae=[];ce=ne(ce);for(var Pe=-1,Ge=this.length;++Pe<Ge;)for(var Qe=this[Pe],st=-1,Mt=Qe.length;++st<Mt;)if(F=Qe[st]){ae=F[ve][fe],R=ce.call(F,F.__data__,st,Pe),Ae.push(L=[]);for(var It=-1,Ct=R.length;++It<Ct;)(Y=R[It])&&gs(Y,It,ve,fe,ae),L.push(Y)}return da(Ae,ve,fe)},Ra.filter=function(ce){var L,R,F=[];"function"!=typeof ce&&(ce=Ie(ce));for(var Y=0,ae=this.length;Y<ae;Y++){F.push(L=[]);for(var fe,ve=0,Ae=(fe=this[Y]).length;ve<Ae;ve++)(R=fe[ve])&&ce.call(R,R.__data__,ve,Y)&&L.push(R)}return da(F,this.namespace,this.id)},Ra.tween=function(ce,L){var R=this.id,F=this.namespace;return arguments.length<2?this.node()[F][R].tween.get(ce):Ne(this,null==L?function(Y){Y[F][R].tween.remove(ce)}:function(Y){Y[F][R].tween.set(ce,L)})},Ra.attr=function(ce,L){if(arguments.length<2){for(L in ce)this.attr(L,ce[L]);return this}var R="transform"==ce?Xo:Ja,F=m.ns.qualify(ce);function Y(){this.removeAttribute(F)}function ae(){this.removeAttributeNS(F.space,F.local)}function fe(Ae){return null==Ae?Y:(Ae+="",function(){var Pe,Ge=this.getAttribute(F);return Ge!==Ae&&(Pe=R(Ge,Ae),function(Qe){this.setAttribute(F,Pe(Qe))})})}function ve(Ae){return null==Ae?ae:(Ae+="",function(){var Pe,Ge=this.getAttributeNS(F.space,F.local);return Ge!==Ae&&(Pe=R(Ge,Ae),function(Qe){this.setAttributeNS(F.space,F.local,Pe(Qe))})})}return Ns(this,"attr."+ce,L,F.local?ve:fe)},Ra.attrTween=function(ce,L){var R=m.ns.qualify(ce);return this.tween("attr."+ce,R.local?function(F,Y){var ae=L.call(this,F,Y,this.getAttributeNS(R.space,R.local));return ae&&function(fe){this.setAttributeNS(R.space,R.local,ae(fe))}}:function(F,Y){var ae=L.call(this,F,Y,this.getAttribute(R));return ae&&function(fe){this.setAttribute(R,ae(fe))}})},Ra.style=function(ce,L,R){var F=arguments.length;if(F<3){if("string"!=typeof ce){for(R in F<2&&(L=""),ce)this.style(R,ce[R],L);return this}R=""}function Y(){this.style.removeProperty(ce)}function ae(fe){return null==fe?Y:(fe+="",function(){var ve,Ae=n(this).getComputedStyle(this,null).getPropertyValue(ce);return Ae!==fe&&(ve=Ja(Ae,fe),function(Pe){this.style.setProperty(ce,ve(Pe),R)})})}return Ns(this,"style."+ce,L,ae)},Ra.styleTween=function(ce,L,R){function F(Y,ae){var fe=L.call(this,Y,ae,n(this).getComputedStyle(this,null).getPropertyValue(ce));return fe&&function(ve){this.style.setProperty(ce,fe(ve),R)}}return arguments.length<3&&(R=""),this.tween("style."+ce,F)},Ra.text=function(ce){return Ns(this,"text",ce,Os)},Ra.remove=function(){var ce=this.namespace;return this.each("end.transition",function(){var L;this[ce].count<2&&(L=this.parentNode)&&L.removeChild(this)})},Ra.ease=function(ce){var L=this.id,R=this.namespace;return arguments.length<1?this.node()[R][L].ease:("function"!=typeof ce&&(ce=m.ease.apply(m,arguments)),Ne(this,function(F){F[R][L].ease=ce}))},Ra.delay=function(ce){var L=this.id,R=this.namespace;return arguments.length<1?this.node()[R][L].delay:Ne(this,"function"==typeof ce?function(F,Y,ae){F[R][L].delay=+ce.call(F,F.__data__,Y,ae)}:(ce=+ce,function(F){F[R][L].delay=ce}))},Ra.duration=function(ce){var L=this.id,R=this.namespace;return arguments.length<1?this.node()[R][L].duration:Ne(this,"function"==typeof ce?function(F,Y,ae){F[R][L].duration=Math.max(1,ce.call(F,F.__data__,Y,ae))}:(ce=Math.max(1,ce),function(F){F[R][L].duration=ce}))},Ra.each=function(ce,L){var R=this.id,F=this.namespace;if(arguments.length<2){var Y=bs,ae=ds;try{ds=R,Ne(this,function(fe,ve,Ae){bs=fe[F][R],ce.call(fe,fe.__data__,ve,Ae)})}finally{bs=Y,ds=ae}}else Ne(this,function(fe){var ve=fe[F][R];(ve.event||(ve.event=m.dispatch("start","end","interrupt"))).on(ce,L)});return this},Ra.transition=function(){for(var ce,L,R,F=this.id,Y=++_s,ae=this.namespace,fe=[],ve=0,Ae=this.length;ve<Ae;ve++){fe.push(ce=[]);for(var Pe,Ge=0,Qe=(Pe=this[ve]).length;Ge<Qe;Ge++)(L=Pe[Ge])&&gs(L,Ge,ae,Y,{time:(R=L[ae][F]).time,ease:R.ease,delay:R.delay+R.duration,duration:R.duration}),ce.push(L)}return da(fe,ae,Y)},m.svg.axis=function(){var ce,L=m.scale.linear(),R=Ws,F=6,Y=6,ae=3,fe=[10],ve=null;function Ae(Pe){Pe.each(function(){var Ge,Qe=m.select(this),st=this.__chart__||L,Mt=this.__chart__=L.copy(),It=ve??(Mt.ticks?Mt.ticks.apply(Mt,fe):Mt.domain()),Ct=ce??(Mt.tickFormat?Mt.tickFormat.apply(Mt,fe):E),Pt=Qe.selectAll(".tick").data(It,Mt),kt=Pt.enter().insert("g",".domain").attr("class","tick").style("opacity",wt),Vt=m.transition(Pt.exit()).style("opacity",wt).remove(),Nt=m.transition(Pt.order()).style("opacity",1),Yt=Math.max(F,0)+ae,fr=bn(Mt),Mr=Qe.selectAll(".domain").data([0]),jr=(Mr.enter().append("path").attr("class","domain"),m.transition(Mr));kt.append("line"),kt.append("text");var Fr,fn,on,wn,yn=kt.select("line"),Jn=Nt.select("line"),ii=Pt.select("text").text(Ct),xi=kt.select("text"),en=Nt.select("text"),On="top"===R||"left"===R?-1:1;if("bottom"===R||"top"===R?(Ge=Ss,Fr="x",on="y",fn="x2",wn="y2",ii.attr("dy",On<0?"0em":".71em").style("text-anchor","middle"),jr.attr("d","M"+fr[0]+","+On*Y+"V0H"+fr[1]+"V"+On*Y)):(Ge=qs,Fr="y",on="x",fn="y2",wn="x2",ii.attr("dy",".32em").style("text-anchor",On<0?"end":"start"),jr.attr("d","M"+On*Y+","+fr[0]+"H0V"+fr[1]+"H"+On*Y)),yn.attr(wn,On*F),xi.attr(on,On*Yt),Jn.attr(fn,0).attr(wn,On*F),en.attr(Fr,0).attr(on,On*Yt),Mt.rangeBand){var ti=Mt,Qn=ti.rangeBand()/2;st=Mt=function(pi){return ti(pi)+Qn}}else st.rangeBand?st=Mt:Vt.call(Ge,Mt,st);kt.call(Ge,st,Mt),Nt.call(Ge,Mt,Mt)})}return Ae.scale=function(Pe){return arguments.length?(L=Pe,Ae):L},Ae.orient=function(Pe){return arguments.length?(R=Pe in ul?Pe+"":Ws,Ae):R},Ae.ticks=function(){return arguments.length?(fe=b(arguments),Ae):fe},Ae.tickValues=function(Pe){return arguments.length?(ve=Pe,Ae):ve},Ae.tickFormat=function(Pe){return arguments.length?(ce=Pe,Ae):ce},Ae.tickSize=function(Pe){var Ge=arguments.length;return Ge?(F=+Pe,Y=+arguments[Ge-1],Ae):F},Ae.innerTickSize=function(Pe){return arguments.length?(F=+Pe,Ae):F},Ae.outerTickSize=function(Pe){return arguments.length?(Y=+Pe,Ae):Y},Ae.tickPadding=function(Pe){return arguments.length?(ae=+Pe,Ae):ae},Ae.tickSubdivide=function(){return arguments.length&&Ae},Ae};var Ws="bottom",ul={top:1,right:1,bottom:1,left:1};function Ss(ce,L,R){ce.attr("transform",function(F){var Y=L(F);return"translate("+(isFinite(Y)?Y:R(F))+",0)"})}function qs(ce,L,R){ce.attr("transform",function(F){var Y=L(F);return"translate(0,"+(isFinite(Y)?Y:R(F))+")"})}m.svg.brush=function(){var ce,L,R=re(Ge,"brushstart","brush","brushend"),F=null,Y=null,ae=[0,0],fe=[0,0],ve=!0,Ae=!0,Pe=xo[0];function Ge(Ct){Ct.each(function(){var Pt=m.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",It).on("touchstart.brush",It),kt=Pt.selectAll(".background").data([0]);kt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Pt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Vt=Pt.selectAll(".resize").data(Pe,E);Vt.exit().remove(),Vt.enter().append("g").attr("class",function(Mr){return"resize "+Mr}).style("cursor",function(Mr){return js[Mr]}).append("rect").attr("x",function(Mr){return/[ew]$/.test(Mr)?-3:null}).attr("y",function(Mr){return/^[ns]/.test(Mr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Vt.style("display",Ge.empty()?"none":null);var Nt,Yt=m.transition(Pt),fr=m.transition(kt);F&&(Nt=bn(F),fr.attr("x",Nt[0]).attr("width",Nt[1]-Nt[0]),st(Yt)),Y&&(Nt=bn(Y),fr.attr("y",Nt[0]).attr("height",Nt[1]-Nt[0]),Mt(Yt)),Qe(Yt)})}function Qe(Ct){Ct.selectAll(".resize").attr("transform",function(Pt){return"translate("+ae[+/e$/.test(Pt)]+","+fe[+/^s/.test(Pt)]+")"})}function st(Ct){Ct.select(".extent").attr("x",ae[0]),Ct.selectAll(".extent,.n>rect,.s>rect").attr("width",ae[1]-ae[0])}function Mt(Ct){Ct.select(".extent").attr("y",fe[0]),Ct.selectAll(".extent,.e>rect,.w>rect").attr("height",fe[1]-fe[0])}function It(){var Ct,Pt,kt=this,Vt=m.select(m.event.target),Nt=R.of(kt,arguments),Yt=m.select(kt),fr=Vt.datum(),Mr=!/^(n|s)$/.test(fr)&&F,jr=!/^(e|w)$/.test(fr)&&Y,Fr=Vt.classed("extent"),fn=At(kt),on=m.mouse(kt),wn=m.select(n(kt)).on("keydown.brush",ii).on("keyup.brush",xi);if(m.event.changedTouches?wn.on("touchmove.brush",en).on("touchend.brush",ti):wn.on("mousemove.brush",en).on("mouseup.brush",ti),Yt.interrupt().selectAll("*").interrupt(),Fr)on[0]=ae[0]-on[0],on[1]=fe[0]-on[1];else if(fr){var yn=+/w$/.test(fr),Jn=+/^n/.test(fr);Pt=[ae[1-yn]-on[0],fe[1-Jn]-on[1]],on[0]=ae[yn],on[1]=fe[Jn]}else m.event.altKey&&(Ct=on.slice());function ii(){32==m.event.keyCode&&(Fr||(Ct=null,on[0]-=ae[1],on[1]-=fe[1],Fr=2),G())}function xi(){32==m.event.keyCode&&2==Fr&&(on[0]+=ae[1],on[1]+=fe[1],Fr=0,G())}function en(){var Qn=m.mouse(kt),pi=!1;Pt&&(Qn[0]+=Pt[0],Qn[1]+=Pt[1]),Fr||(m.event.altKey?(Ct||(Ct=[(ae[0]+ae[1])/2,(fe[0]+fe[1])/2]),on[0]=ae[+(Qn[0]<Ct[0])],on[1]=fe[+(Qn[1]<Ct[1])]):Ct=null),Mr&&On(Qn,F,0)&&(st(Yt),pi=!0),jr&&On(Qn,Y,1)&&(Mt(Yt),pi=!0),pi&&(Qe(Yt),Nt({type:"brush",mode:Fr?"move":"resize"}))}function On(Qn,pi,wi){var ji,li,Oi=bn(pi),Li=Oi[0],Yi=Oi[1],Ei=on[wi],Fi=wi?fe:ae,Vi=Fi[1]-Fi[0];if(Fr&&(Li-=Ei,Yi-=Vi+Ei),ji=(wi?Ae:ve)?Math.max(Li,Math.min(Yi,Qn[wi])):Qn[wi],Fr?li=(ji+=Ei)+Vi:(Ct&&(Ei=Math.max(Li,Math.min(Yi,2*Ct[wi]-ji))),Ei<ji?(li=ji,ji=Ei):li=Ei),Fi[0]!=ji||Fi[1]!=li)return wi?L=null:ce=null,Fi[0]=ji,Fi[1]=li,!0}function ti(){en(),Yt.style("pointer-events","all").selectAll(".resize").style("display",Ge.empty()?"none":null),m.select("body").style("cursor",null),wn.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),fn(),Nt({type:"brushend"})}Yt.style("pointer-events","none").selectAll(".resize").style("display",null),m.select("body").style("cursor",Vt.style("cursor")),Nt({type:"brushstart"}),en()}return Ge.event=function(Ct){Ct.each(function(){var Pt=R.of(this,arguments),kt={x:ae,y:fe,i:ce,j:L},Vt=this.__chart__||kt;this.__chart__=kt,ds?m.select(this).transition().each("start.brush",function(){ce=Vt.i,L=Vt.j,ae=Vt.x,fe=Vt.y,Pt({type:"brushstart"})}).tween("brush:brush",function(){var Nt=_a(ae,kt.x),Yt=_a(fe,kt.y);return ce=L=null,function(fr){ae=kt.x=Nt(fr),fe=kt.y=Yt(fr),Pt({type:"brush",mode:"resize"})}}).each("end.brush",function(){ce=kt.i,L=kt.j,Pt({type:"brush",mode:"resize"}),Pt({type:"brushend"})}):(Pt({type:"brushstart"}),Pt({type:"brush",mode:"resize"}),Pt({type:"brushend"}))})},Ge.x=function(Ct){return arguments.length?(Pe=xo[!(F=Ct)<<1|!Y],Ge):F},Ge.y=function(Ct){return arguments.length?(Pe=xo[!F<<1|!(Y=Ct)],Ge):Y},Ge.clamp=function(Ct){return arguments.length?(F&&Y?(ve=!!Ct[0],Ae=!!Ct[1]):F?ve=!!Ct:Y&&(Ae=!!Ct),Ge):F&&Y?[ve,Ae]:F?ve:Y?Ae:null},Ge.extent=function(Ct){var Pt,kt,Vt,Nt,Yt;return arguments.length?(F&&(Pt=Ct[0],kt=Ct[1],Y&&(Pt=Pt[0],kt=kt[0]),ce=[Pt,kt],F.invert&&(Pt=F(Pt),kt=F(kt)),kt<Pt&&(Yt=Pt,Pt=kt,kt=Yt),Pt==ae[0]&&kt==ae[1]||(ae=[Pt,kt])),Y&&(Vt=Ct[0],Nt=Ct[1],F&&(Vt=Vt[1],Nt=Nt[1]),L=[Vt,Nt],Y.invert&&(Vt=Y(Vt),Nt=Y(Nt)),Nt<Vt&&(Yt=Vt,Vt=Nt,Nt=Yt),Vt==fe[0]&&Nt==fe[1]||(fe=[Vt,Nt])),Ge):(F&&(ce?(Pt=ce[0],kt=ce[1]):(Pt=ae[0],kt=ae[1],F.invert&&(Pt=F.invert(Pt),kt=F.invert(kt)),kt<Pt&&(Yt=Pt,Pt=kt,kt=Yt))),Y&&(L?(Vt=L[0],Nt=L[1]):(Vt=fe[0],Nt=fe[1],Y.invert&&(Vt=Y.invert(Vt),Nt=Y.invert(Nt)),Nt<Vt&&(Yt=Vt,Vt=Nt,Nt=Yt))),F&&Y?[[Pt,Vt],[kt,Nt]]:F?[Pt,kt]:Y&&[Vt,Nt])},Ge.clear=function(){return Ge.empty()||(ae=[0,0],fe=[0,0],ce=L=null),Ge},Ge.empty=function(){return!!F&&ae[0]==ae[1]||!!Y&&fe[0]==fe[1]},m.rebind(Ge,R,"on")};var js={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},xo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function fl(ce){return JSON.parse(ce.responseText)}function il(ce){var L=h.createRange();return L.selectNode(h.body),L.createContextualFragment(ce.responseText)}m.text=zt(function(ce){return ce.responseText}),m.json=function(ce,L){return ur(ce,"application/json",fl,L)},m.html=function(ce,L){return ur(ce,"text/html",il,L)},m.xml=zt(function(ce){return ce.responseXML}),"object"==typeof Q&&Q.exports?Q.exports=m:this.d3=m}).apply(self)},{}],59:[function(y,Q,K){"use strict";Q.exports=y("./quad")},{"./quad":60}],60:[function(y,Q,K){"use strict";var m=y("binary-search-bounds"),v=y("clamp"),b=y("parse-rect"),h=y("array-bounds"),e=y("pick-by-alias"),n=y("defined"),r=y("flatten-vertex-data"),o=y("is-obj"),t=y("dtype"),d=y("math-log2");function a(i,s){for(var c=s[0],l=s[1],p=1/(s[2]-c),g=1/(s[3]-l),u=new Array(i.length),x=0,f=i.length/2;x<f;x++)u[2*x]=v((i[2*x]-c)*p,0,1),u[2*x+1]=v((i[2*x+1]-l)*g,0,1);return u}Q.exports=function(i,s){s||(s={}),i=r(i,"float64"),s=e(s,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=n(s.maxDepth,255),l=n(s.bounds,h(i,2));l[0]===l[2]&&l[2]++,l[1]===l[3]&&l[3]++;var p,g=a(i,l),u=i.length>>>1;s.dtype||(s.dtype="array"),"string"==typeof s.dtype?p=new(t(s.dtype))(u):s.dtype&&(p=s.dtype,Array.isArray(p)&&(p.length=u));for(var x=0;x<u;++x)p[x]=x;var f=[],T=[],_=[],k=[];!function z(N,V,X,J,G,Z){if(!J.length)return null;var re=f[G]||(f[G]=[]),j=_[G]||(_[G]=[]),B=T[G]||(T[G]=[]),H=re.length;if(++G>c||Z>1073741824){for(var ee=0;ee<J.length;ee++)re.push(J[ee]),j.push(Z),B.push(null,null,null,null);return H}if(re.push(J[0]),j.push(Z),J.length<=1)return B.push(null,null,null,null),H;for(var U=.5*X,$=N+U,q=V+U,te=[],ne=[],se=[],ie=[],ue=1,le=J.length;ue<le;ue++){var de=J[ue],_e=g[2*de+1];g[2*de]<$?_e<q?te.push(de):ne.push(de):_e<q?se.push(de):ie.push(de)}return B.push(z(N,V,U,te,G,Z<<=2),z(N,q,U,ne,G,Z+1),z($,V,U,se,G,Z+2),z($,q,U,ie,G,Z+3)),H}(0,0,1,p,0,1);for(var w=0,C=0;C<f.length;C++){var A=f[C];if(p.set)p.set(A,w);else for(var O=0,P=A.length;O<P;O++)p[O+w]=A[O];var S=w+f[C].length;k[C]=[w,S],w=S}return p.range=function(){for(var z,N=[],V=arguments.length;V--;)N[V]=arguments[V];if(o(N[N.length-1])){var X=N.pop();N.length||null==X.x&&null==X.l&&null==X.left||(N=[X],z={}),z=e(X,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};N.length||(N=l);var ne,J=b.apply(void 0,N),G=[Math.min(J.x,J.x+J.width),Math.min(J.y,J.y+J.height),Math.max(J.x,J.x+J.width),Math.max(J.y,J.y+J.height)],Z=G[0],re=G[1],j=G[2],B=G[3],H=a([Z,re,j,B],l),ee=H[0],U=H[1],$=H[2],q=H[3],te=n(z.level,f.length);if(null!=z.d&&("number"==typeof z.d?ne=[z.d,z.d]:z.d.length&&(ne=z.d),te=Math.min(Math.max(Math.ceil(-d(Math.abs(ne[0])/(l[2]-l[0]))),Math.ceil(-d(Math.abs(ne[1])/(l[3]-l[1])))),te)),te=Math.min(te,f.length),z.lod)return E(ee,U,$,q,te);var se=[];function ie(le,de,be,_e,xe,Ee){if(null!==xe&&null!==Ee&&!(ee>le+be||U>de+be||$<le||q<de||_e>=te||xe===Ee)){var he=f[_e];void 0===Ee&&(Ee=he.length);for(var me=xe;me<Ee;me++){var Se=he[me],Me=i[2*Se],Ie=i[2*Se+1];Me>=Z&&Me<=j&&Ie>=re&&Ie<=B&&se.push(Se)}var Fe=T[_e],Ne=Fe[4*xe+0],De=Fe[4*xe+1],$e=Fe[4*xe+2],Re=Fe[4*xe+3],ze=ue(Fe,xe+1),Ue=.5*be,je=_e+1;ie(le,de,Ue,je,Ne,De||$e||Re||ze),ie(le,de+Ue,Ue,je,De,$e||Re||ze),ie(le+Ue,de,Ue,je,$e,Re||ze),ie(le+Ue,de+Ue,Ue,je,Re,ze)}}function ue(le,de){for(var be=null,_e=0;null===be;)if(be=le[4*de+_e],++_e>le.length)return null;return be}return ie(0,0,1,0,0,1),se},p;function E(z,N,V,X,J){for(var G=[],Z=0;Z<J;Z++){var re=_[Z],j=k[Z][0],B=D(z,N,Z),H=D(V,X,Z),ee=m.ge(re,B),U=m.gt(re,H,ee,re.length-1);G[Z]=[ee+j,U+j]}return G}function D(z,N,V){for(var X=1,J=.5,G=.5,Z=.5,re=0;re<V;re++)X<<=2,X+=z<J?N<G?0:1:N<G?2:3,Z*=.5,J+=z<J?-Z:Z,G+=N<G?-Z:Z;return X}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(y,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var m=y("@turf/meta");function v(e){var n=0;if(e&&e.length>0){n+=Math.abs(b(e[0]));for(var r=1;r<e.length;r++)n-=Math.abs(b(e[r]))}return n}function b(e){var n,r,o,t,d,a,i=0,s=e.length;if(s>2){for(a=0;a<s;a++)a===s-2?(o=s-2,t=s-1,d=0):a===s-1?(o=s-1,t=0,d=1):(o=a,t=a+1,d=a+2),n=e[o],r=e[t],i+=(h(e[d][0])-h(n[0]))*Math.sin(h(r[1]));i=6378137*i*6378137/2}return i}function h(e){return e*Math.PI/180}K.default=function(e){return m.geomReduce(e,function(n,r){return n+function(o){var t,d=0;switch(o.type){case"Polygon":return v(o.coordinates);case"MultiPolygon":for(t=0;t<o.coordinates.length;t++)d+=v(o.coordinates[t]);return d;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(r)},0)}},{"@turf/meta":63}],62:[function(y,Q,K){"use strict";function m(s,c,l){void 0===l&&(l={});var p={type:"Feature"};return(0===l.id||l.id)&&(p.id=l.id),l.bbox&&(p.bbox=l.bbox),p.properties=c||{},p.geometry=s,p}function v(s,c,l){if(void 0===l&&(l={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(s[0])||!i(s[1]))throw new Error("coordinates must contain numbers");return m({type:"Point",coordinates:s},c,l)}function b(s,c,l){void 0===l&&(l={});for(var p=0,g=s;p<g.length;p++){var u=g[p];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<u[u.length-1].length;x++)if(u[u.length-1][x]!==u[0][x])throw new Error("First and last Position are not equivalent.")}return m({type:"Polygon",coordinates:s},c,l)}function h(s,c,l){if(void 0===l&&(l={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:s},c,l)}function e(s,c){void 0===c&&(c={});var l={type:"FeatureCollection"};return c.id&&(l.id=c.id),c.bbox&&(l.bbox=c.bbox),l.features=s,l}function n(s,c,l){return void 0===l&&(l={}),m({type:"MultiLineString",coordinates:s},c,l)}function r(s,c,l){return void 0===l&&(l={}),m({type:"MultiPoint",coordinates:s},c,l)}function o(s,c,l){return void 0===l&&(l={}),m({type:"MultiPolygon",coordinates:s},c,l)}function t(s,c){void 0===c&&(c="kilometers");var l=K.factors[c];if(!l)throw new Error(c+" units is invalid");return s*l}function d(s,c){void 0===c&&(c="kilometers");var l=K.factors[c];if(!l)throw new Error(c+" units is invalid");return s/l}function a(s){return s%(2*Math.PI)*180/Math.PI}function i(s){return!isNaN(s)&&null!==s&&!Array.isArray(s)}Object.defineProperty(K,"__esModule",{value:!0}),K.earthRadius=6371008.8,K.factors={centimeters:100*K.earthRadius,centimetres:100*K.earthRadius,degrees:K.earthRadius/111325,feet:3.28084*K.earthRadius,inches:39.37*K.earthRadius,kilometers:K.earthRadius/1e3,kilometres:K.earthRadius/1e3,meters:K.earthRadius,metres:K.earthRadius,miles:K.earthRadius/1609.344,millimeters:1e3*K.earthRadius,millimetres:1e3*K.earthRadius,nauticalmiles:K.earthRadius/1852,radians:1,yards:1.0936*K.earthRadius},K.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/K.earthRadius,yards:1.0936133},K.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},K.feature=m,K.geometry=function(s,c,l){switch(void 0===l&&(l={}),s){case"Point":return v(c).geometry;case"LineString":return h(c).geometry;case"Polygon":return b(c).geometry;case"MultiPoint":return r(c).geometry;case"MultiLineString":return n(c).geometry;case"MultiPolygon":return o(c).geometry;default:throw new Error(s+" is invalid")}},K.point=v,K.points=function(s,c,l){return void 0===l&&(l={}),e(s.map(function(p){return v(p,c)}),l)},K.polygon=b,K.polygons=function(s,c,l){return void 0===l&&(l={}),e(s.map(function(p){return b(p,c)}),l)},K.lineString=h,K.lineStrings=function(s,c,l){return void 0===l&&(l={}),e(s.map(function(p){return h(p,c)}),l)},K.featureCollection=e,K.multiLineString=n,K.multiPoint=r,K.multiPolygon=o,K.geometryCollection=function(s,c,l){return void 0===l&&(l={}),m({type:"GeometryCollection",geometries:s},c,l)},K.round=function(s,c){if(void 0===c&&(c=0),c&&!(c>=0))throw new Error("precision must be a positive number");var l=Math.pow(10,c||0);return Math.round(s*l)/l},K.radiansToLength=t,K.lengthToRadians=d,K.lengthToDegrees=function(s,c){return a(d(s,c))},K.bearingToAzimuth=function(s){var c=s%360;return c<0&&(c+=360),c},K.radiansToDegrees=a,K.degreesToRadians=function(s){return s%360*Math.PI/180},K.convertLength=function(s,c,l){if(void 0===c&&(c="kilometers"),void 0===l&&(l="kilometers"),!(s>=0))throw new Error("length must be a positive number");return t(d(s,c),l)},K.convertArea=function(s,c,l){if(void 0===c&&(c="meters"),void 0===l&&(l="kilometers"),!(s>=0))throw new Error("area must be a positive number");var p=K.areaFactors[c];if(!p)throw new Error("invalid original units");var g=K.areaFactors[l];if(!g)throw new Error("invalid final units");return s/p*g},K.isNumber=i,K.isObject=function(s){return!!s&&s.constructor===Object},K.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(4!==s.length&&6!==s.length)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(c){if(!i(c))throw new Error("bbox must only contain numbers")})},K.validateId=function(s){if(!s)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof s))throw new Error("id must be a number or a string")}},{}],63:[function(y,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var m=y("@turf/helpers");function v(t,d,a){if(null!==t)for(var i,s,c,l,p,g,u,x,f=0,T=0,_=t.type,k="FeatureCollection"===_,w="Feature"===_,C=k?t.features.length:1,A=0;A<C;A++){p=(x=!!(u=k?t.features[A].geometry:w?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var O=0;O<p;O++){var P=0,S=0;if(null!==(l=x?u.geometries[O]:u)){g=l.coordinates;var E=l.type;switch(f=!a||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===d(g,T,A,P,S))return!1;T++,P++;break;case"LineString":case"MultiPoint":for(i=0;i<g.length;i++){if(!1===d(g[i],T,A,P,S))return!1;T++,"MultiPoint"===E&&P++}"LineString"===E&&P++;break;case"Polygon":case"MultiLineString":for(i=0;i<g.length;i++){for(s=0;s<g[i].length-f;s++){if(!1===d(g[i][s],T,A,P,S))return!1;T++}"MultiLineString"===E&&P++,"Polygon"===E&&S++}"Polygon"===E&&P++;break;case"MultiPolygon":for(i=0;i<g.length;i++){for(S=0,s=0;s<g[i].length;s++){for(c=0;c<g[i][s].length-f;c++){if(!1===d(g[i][s][c],T,A,P,S))return!1;T++}S++}P++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(!1===v(l.geometries[i],d,a))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(t,d){var a;switch(t.type){case"FeatureCollection":for(a=0;a<t.features.length&&!1!==d(t.features[a].properties,a);a++);break;case"Feature":d(t.properties,0)}}function h(t,d){if("Feature"===t.type)d(t,0);else if("FeatureCollection"===t.type)for(var a=0;a<t.features.length&&!1!==d(t.features[a],a);a++);}function e(t,d){var a,i,s,c,l,p,g,u,x,f,T=0,_="FeatureCollection"===t.type,k="Feature"===t.type,w=_?t.features.length:1;for(a=0;a<w;a++){for(u=_?t.features[a].properties:k?t.properties:{},x=_?t.features[a].bbox:k?t.bbox:void 0,f=_?t.features[a].id:k?t.id:void 0,l=(g=!!(p=_?t.features[a].geometry:k?t.geometry:t)&&"GeometryCollection"===p.type)?p.geometries.length:1,s=0;s<l;s++)if(null!==(c=g?p.geometries[s]:p))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===d(c,T,u,x,f))return!1;break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(!1===d(c.geometries[i],T,u,x,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===d(null,T,u,x,f))return!1;T++}}function n(t,d){e(t,function(a,i,s,c,l){var p,g=null===a?null:a.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return!1!==d(m.feature(a,s,{bbox:c,id:l}),i,0)&&void 0}switch(g){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon"}for(var u=0;u<a.coordinates.length;u++)if(!1===d(m.feature({type:p,coordinates:a.coordinates[u]},s),i,u))return!1})}function r(t,d){n(t,function(a,i,s){var c=0;if(a.geometry){var l=a.geometry.type;if("Point"!==l&&"MultiPoint"!==l){var p,g=0,u=0,x=0;return!1!==v(a,function(f,T,_,k,w){if(void 0===p||i>g||k>u||w>x)return p=f,g=i,u=k,x=w,void(c=0);var C=m.lineString([p,f],a.properties);if(!1===d(C,i,s,w,c))return!1;c++,p=f})&&void 0}}})}function o(t,d){if(!t)throw new Error("geojson is required");n(t,function(a,i,s){if(null!==a.geometry){var l=a.geometry.coordinates;switch(a.geometry.type){case"LineString":if(!1===d(a,i,s,0,0))return!1;break;case"Polygon":for(var p=0;p<l.length;p++)if(!1===d(m.lineString(l[p],a.properties),i,s,p))return!1}}})}K.coordEach=v,K.coordReduce=function(t,d,a,i){var s=a;return v(t,function(c,l,p,g,u){s=0===l&&void 0===a?c:d(s,c,l,p,g,u)},i),s},K.propEach=b,K.propReduce=function(t,d,a){var i=a;return b(t,function(s,c){i=0===c&&void 0===a?s:d(i,s,c)}),i},K.featureEach=h,K.featureReduce=function(t,d,a){var i=a;return h(t,function(s,c){i=0===c&&void 0===a?s:d(i,s,c)}),i},K.coordAll=function(t){var d=[];return v(t,function(a){d.push(a)}),d},K.geomEach=e,K.geomReduce=function(t,d,a){var i=a;return e(t,function(s,c,l,p,g){i=0===c&&void 0===a?s:d(i,s,c,l,p,g)}),i},K.flattenEach=n,K.flattenReduce=function(t,d,a){var i=a;return n(t,function(s,c,l){i=0===c&&0===l&&void 0===a?s:d(i,s,c,l)}),i},K.segmentEach=r,K.segmentReduce=function(t,d,a){var i=a,s=!1;return r(t,function(c,l,p,g,u){i=!1===s&&void 0===a?c:d(i,c,l,p,g,u),s=!0}),i},K.lineEach=o,K.lineReduce=function(t,d,a){var i=a;return o(t,function(s,c,l,p){i=0===c&&void 0===a?s:d(i,s,c,l,p)}),i},K.findSegment=function(t,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var a,i=d.featureIndex||0,s=d.multiFeatureIndex||0,c=d.geometryIndex||0,l=d.segmentIndex||0,p=d.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),p=p||t.features[i].properties,a=t.features[i].geometry;break;case"Feature":p=p||t.properties,a=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=t;break;default:throw new Error("geojson is invalid")}if(null===a)return null;var g=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return l<0&&(l=g.length+l-1),m.lineString([g[l],g[l+1]],p,d);case"Polygon":return c<0&&(c=g.length+c),l<0&&(l=g[c].length+l-1),m.lineString([g[c][l],g[c][l+1]],p,d);case"MultiLineString":return s<0&&(s=g.length+s),l<0&&(l=g[s].length+l-1),m.lineString([g[s][l],g[s][l+1]],p,d);case"MultiPolygon":return s<0&&(s=g.length+s),c<0&&(c=g[s].length+c),l<0&&(l=g[s][c].length-l-1),m.lineString([g[s][c][l],g[s][c][l+1]],p,d)}throw new Error("geojson is invalid")},K.findPoint=function(t,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var a,i=d.featureIndex||0,s=d.multiFeatureIndex||0,c=d.geometryIndex||0,l=d.coordIndex||0,p=d.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),p=p||t.features[i].properties,a=t.features[i].geometry;break;case"Feature":p=p||t.properties,a=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=t;break;default:throw new Error("geojson is invalid")}if(null===a)return null;var g=a.coordinates;switch(a.type){case"Point":return m.point(g,p,d);case"MultiPoint":return s<0&&(s=g.length+s),m.point(g[s],p,d);case"LineString":return l<0&&(l=g.length+l),m.point(g[l],p,d);case"Polygon":return c<0&&(c=g.length+c),l<0&&(l=g[c].length+l),m.point(g[c][l],p,d);case"MultiLineString":return s<0&&(s=g.length+s),l<0&&(l=g[s].length+l),m.point(g[s][l],p,d);case"MultiPolygon":return s<0&&(s=g.length+s),c<0&&(c=g[s].length+c),l<0&&(l=g[s][c].length-l),m.point(g[s][c][l],p,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(y,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var m=y("@turf/meta");function v(b){var h=[1/0,1/0,-1/0,-1/0];return m.coordEach(b,function(e){h[0]>e[0]&&(h[0]=e[0]),h[1]>e[1]&&(h[1]=e[1]),h[2]<e[0]&&(h[2]=e[0]),h[3]<e[1]&&(h[3]=e[1])}),h}v.default=v,K.default=v},{"@turf/meta":66}],65:[function(y,Q,K){arguments[4][62][0].apply(K,arguments)},{dup:62}],66:[function(y,Q,K){arguments[4][63][0].apply(K,arguments)},{"@turf/helpers":65,dup:63}],67:[function(y,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var m=y("@turf/meta"),v=y("@turf/helpers");K.default=function(b,h){void 0===h&&(h={});var e=0,n=0,r=0;return m.coordEach(b,function(o){e+=o[0],n+=o[1],r++}),v.point([e/r,n/r],h.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(y,Q,K){"use strict";function m(s,c,l){void 0===l&&(l={});var p={type:"Feature"};return(0===l.id||l.id)&&(p.id=l.id),l.bbox&&(p.bbox=l.bbox),p.properties=c||{},p.geometry=s,p}function v(s,c,l){return void 0===l&&(l={}),m({type:"Point",coordinates:s},c,l)}function b(s,c,l){void 0===l&&(l={});for(var p=0,g=s;p<g.length;p++){var u=g[p];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<u[u.length-1].length;x++)if(u[u.length-1][x]!==u[0][x])throw new Error("First and last Position are not equivalent.")}return m({type:"Polygon",coordinates:s},c,l)}function h(s,c,l){if(void 0===l&&(l={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:s},c,l)}function e(s,c){void 0===c&&(c={});var l={type:"FeatureCollection"};return c.id&&(l.id=c.id),c.bbox&&(l.bbox=c.bbox),l.features=s,l}function n(s,c,l){return void 0===l&&(l={}),m({type:"MultiLineString",coordinates:s},c,l)}function r(s,c,l){return void 0===l&&(l={}),m({type:"MultiPoint",coordinates:s},c,l)}function o(s,c,l){return void 0===l&&(l={}),m({type:"MultiPolygon",coordinates:s},c,l)}function t(s,c){void 0===c&&(c="kilometers");var l=K.factors[c];if(!l)throw new Error(c+" units is invalid");return s*l}function d(s,c){void 0===c&&(c="kilometers");var l=K.factors[c];if(!l)throw new Error(c+" units is invalid");return s/l}function a(s){return s%(2*Math.PI)*180/Math.PI}function i(s){return!isNaN(s)&&null!==s&&!Array.isArray(s)&&!/^\s*$/.test(s)}Object.defineProperty(K,"__esModule",{value:!0}),K.earthRadius=6371008.8,K.factors={centimeters:100*K.earthRadius,centimetres:100*K.earthRadius,degrees:K.earthRadius/111325,feet:3.28084*K.earthRadius,inches:39.37*K.earthRadius,kilometers:K.earthRadius/1e3,kilometres:K.earthRadius/1e3,meters:K.earthRadius,metres:K.earthRadius,miles:K.earthRadius/1609.344,millimeters:1e3*K.earthRadius,millimetres:1e3*K.earthRadius,nauticalmiles:K.earthRadius/1852,radians:1,yards:K.earthRadius/1.0936},K.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/K.earthRadius,yards:1/1.0936},K.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},K.feature=m,K.geometry=function(s,c,l){switch(void 0===l&&(l={}),s){case"Point":return v(c).geometry;case"LineString":return h(c).geometry;case"Polygon":return b(c).geometry;case"MultiPoint":return r(c).geometry;case"MultiLineString":return n(c).geometry;case"MultiPolygon":return o(c).geometry;default:throw new Error(s+" is invalid")}},K.point=v,K.points=function(s,c,l){return void 0===l&&(l={}),e(s.map(function(p){return v(p,c)}),l)},K.polygon=b,K.polygons=function(s,c,l){return void 0===l&&(l={}),e(s.map(function(p){return b(p,c)}),l)},K.lineString=h,K.lineStrings=function(s,c,l){return void 0===l&&(l={}),e(s.map(function(p){return h(p,c)}),l)},K.featureCollection=e,K.multiLineString=n,K.multiPoint=r,K.multiPolygon=o,K.geometryCollection=function(s,c,l){return void 0===l&&(l={}),m({type:"GeometryCollection",geometries:s},c,l)},K.round=function(s,c){if(void 0===c&&(c=0),c&&!(c>=0))throw new Error("precision must be a positive number");var l=Math.pow(10,c||0);return Math.round(s*l)/l},K.radiansToLength=t,K.lengthToRadians=d,K.lengthToDegrees=function(s,c){return a(d(s,c))},K.bearingToAzimuth=function(s){var c=s%360;return c<0&&(c+=360),c},K.radiansToDegrees=a,K.degreesToRadians=function(s){return s%360*Math.PI/180},K.convertLength=function(s,c,l){if(void 0===c&&(c="kilometers"),void 0===l&&(l="kilometers"),!(s>=0))throw new Error("length must be a positive number");return t(d(s,c),l)},K.convertArea=function(s,c,l){if(void 0===c&&(c="meters"),void 0===l&&(l="kilometers"),!(s>=0))throw new Error("area must be a positive number");var p=K.areaFactors[c];if(!p)throw new Error("invalid original units");var g=K.areaFactors[l];if(!g)throw new Error("invalid final units");return s/p*g},K.isNumber=i,K.isObject=function(s){return!!s&&s.constructor===Object},K.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(4!==s.length&&6!==s.length)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(c){if(!i(c))throw new Error("bbox must only contain numbers")})},K.validateId=function(s){if(!s)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof s))throw new Error("id must be a number or a string")},K.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},K.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},K.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},K.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},K.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},K.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},K.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(y,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var m=y("@turf/helpers");function v(t,d,a){if(null!==t)for(var i,s,c,l,p,g,u,x,f=0,T=0,_=t.type,k="FeatureCollection"===_,w="Feature"===_,C=k?t.features.length:1,A=0;A<C;A++){p=(x=!!(u=k?t.features[A].geometry:w?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var O=0;O<p;O++){var P=0,S=0;if(null!==(l=x?u.geometries[O]:u)){g=l.coordinates;var E=l.type;switch(f=!a||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===d(g,T,A,P,S))return!1;T++,P++;break;case"LineString":case"MultiPoint":for(i=0;i<g.length;i++){if(!1===d(g[i],T,A,P,S))return!1;T++,"MultiPoint"===E&&P++}"LineString"===E&&P++;break;case"Polygon":case"MultiLineString":for(i=0;i<g.length;i++){for(s=0;s<g[i].length-f;s++){if(!1===d(g[i][s],T,A,P,S))return!1;T++}"MultiLineString"===E&&P++,"Polygon"===E&&S++}"Polygon"===E&&P++;break;case"MultiPolygon":for(i=0;i<g.length;i++){for(S=0,s=0;s<g[i].length;s++){for(c=0;c<g[i][s].length-f;c++){if(!1===d(g[i][s][c],T,A,P,S))return!1;T++}S++}P++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(!1===v(l.geometries[i],d,a))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(t,d){var a;switch(t.type){case"FeatureCollection":for(a=0;a<t.features.length&&!1!==d(t.features[a].properties,a);a++);break;case"Feature":d(t.properties,0)}}function h(t,d){if("Feature"===t.type)d(t,0);else if("FeatureCollection"===t.type)for(var a=0;a<t.features.length&&!1!==d(t.features[a],a);a++);}function e(t,d){var a,i,s,c,l,p,g,u,x,f,T=0,_="FeatureCollection"===t.type,k="Feature"===t.type,w=_?t.features.length:1;for(a=0;a<w;a++){for(u=_?t.features[a].properties:k?t.properties:{},x=_?t.features[a].bbox:k?t.bbox:void 0,f=_?t.features[a].id:k?t.id:void 0,l=(g=!!(p=_?t.features[a].geometry:k?t.geometry:t)&&"GeometryCollection"===p.type)?p.geometries.length:1,s=0;s<l;s++)if(null!==(c=g?p.geometries[s]:p))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===d(c,T,u,x,f))return!1;break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(!1===d(c.geometries[i],T,u,x,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===d(null,T,u,x,f))return!1;T++}}function n(t,d){e(t,function(a,i,s,c,l){var p,g=null===a?null:a.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return!1!==d(m.feature(a,s,{bbox:c,id:l}),i,0)&&void 0}switch(g){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon"}for(var u=0;u<a.coordinates.length;u++)if(!1===d(m.feature({type:p,coordinates:a.coordinates[u]},s),i,u))return!1})}function r(t,d){n(t,function(a,i,s){var c=0;if(a.geometry){var l=a.geometry.type;if("Point"!==l&&"MultiPoint"!==l){var p,g=0,u=0,x=0;return!1!==v(a,function(f,T,_,k,w){if(void 0===p||i>g||k>u||w>x)return p=f,g=i,u=k,x=w,void(c=0);var C=m.lineString([p,f],a.properties);if(!1===d(C,i,s,w,c))return!1;c++,p=f})&&void 0}}})}function o(t,d){if(!t)throw new Error("geojson is required");n(t,function(a,i,s){if(null!==a.geometry){var l=a.geometry.coordinates;switch(a.geometry.type){case"LineString":if(!1===d(a,i,s,0,0))return!1;break;case"Polygon":for(var p=0;p<l.length;p++)if(!1===d(m.lineString(l[p],a.properties),i,s,p))return!1}}})}K.coordEach=v,K.coordReduce=function(t,d,a,i){var s=a;return v(t,function(c,l,p,g,u){s=0===l&&void 0===a?c:d(s,c,l,p,g,u)},i),s},K.propEach=b,K.propReduce=function(t,d,a){var i=a;return b(t,function(s,c){i=0===c&&void 0===a?s:d(i,s,c)}),i},K.featureEach=h,K.featureReduce=function(t,d,a){var i=a;return h(t,function(s,c){i=0===c&&void 0===a?s:d(i,s,c)}),i},K.coordAll=function(t){var d=[];return v(t,function(a){d.push(a)}),d},K.geomEach=e,K.geomReduce=function(t,d,a){var i=a;return e(t,function(s,c,l,p,g){i=0===c&&void 0===a?s:d(i,s,c,l,p,g)}),i},K.flattenEach=n,K.flattenReduce=function(t,d,a){var i=a;return n(t,function(s,c,l){i=0===c&&0===l&&void 0===a?s:d(i,s,c,l)}),i},K.segmentEach=r,K.segmentReduce=function(t,d,a){var i=a,s=!1;return r(t,function(c,l,p,g,u){i=!1===s&&void 0===a?c:d(i,c,l,p,g,u),s=!0}),i},K.lineEach=o,K.lineReduce=function(t,d,a){var i=a;return o(t,function(s,c,l,p){i=0===c&&void 0===a?s:d(i,s,c,l,p)}),i},K.findSegment=function(t,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var a,i=d.featureIndex||0,s=d.multiFeatureIndex||0,c=d.geometryIndex||0,l=d.segmentIndex||0,p=d.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),p=p||t.features[i].properties,a=t.features[i].geometry;break;case"Feature":p=p||t.properties,a=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=t;break;default:throw new Error("geojson is invalid")}if(null===a)return null;var g=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return l<0&&(l=g.length+l-1),m.lineString([g[l],g[l+1]],p,d);case"Polygon":return c<0&&(c=g.length+c),l<0&&(l=g[c].length+l-1),m.lineString([g[c][l],g[c][l+1]],p,d);case"MultiLineString":return s<0&&(s=g.length+s),l<0&&(l=g[s].length+l-1),m.lineString([g[s][l],g[s][l+1]],p,d);case"MultiPolygon":return s<0&&(s=g.length+s),c<0&&(c=g[s].length+c),l<0&&(l=g[s][c].length-l-1),m.lineString([g[s][c][l],g[s][c][l+1]],p,d)}throw new Error("geojson is invalid")},K.findPoint=function(t,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var a,i=d.featureIndex||0,s=d.multiFeatureIndex||0,c=d.geometryIndex||0,l=d.coordIndex||0,p=d.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),p=p||t.features[i].properties,a=t.features[i].geometry;break;case"Feature":p=p||t.properties,a=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=t;break;default:throw new Error("geojson is invalid")}if(null===a)return null;var g=a.coordinates;switch(a.type){case"Point":return m.point(g,p,d);case"MultiPoint":return s<0&&(s=g.length+s),m.point(g[s],p,d);case"LineString":return l<0&&(l=g.length+l),m.point(g[l],p,d);case"Polygon":return c<0&&(c=g.length+c),l<0&&(l=g[c].length+l),m.point(g[c][l],p,d);case"MultiLineString":return s<0&&(s=g.length+s),l<0&&(l=g[s].length+l),m.point(g[s][l],p,d);case"MultiPolygon":return s<0&&(s=g.length+s),c<0&&(c=g[s].length+c),l<0&&(l=g[s][c].length-l),m.point(g[s][c][l],p,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(y,Q,K){Q.exports=function(m){var v=0,b=0,h=0,e=0;return m.map(function(n){var r=(n=n.slice())[0],o=r.toUpperCase();if(r!=o)switch(n[0]=o,r){case"a":n[6]+=h,n[7]+=e;break;case"v":n[1]+=e;break;case"h":n[1]+=h;break;default:for(var t=1;t<n.length;)n[t++]+=h,n[t++]+=e}switch(o){case"Z":h=v,e=b;break;case"H":h=n[1];break;case"V":e=n[1];break;case"M":h=v=n[1],e=b=n[2];break;default:h=n[n.length-2],e=n[n.length-1]}return n})}},{}],71:[function(y,Q,K){"use strict";Q.exports=function(m,v){if(!m||null==m.length)throw Error("Argument should be an array");v=null==v?1:Math.floor(v);for(var b=Array(2*v),h=0;h<v;h++){for(var e=-1/0,n=1/0,r=h,o=m.length;r<o;r+=v)m[r]>e&&(e=m[r]),m[r]<n&&(n=m[r]);b[h]=n,b[v+h]=e}return b}},{}],72:[function(y,Q,K){"use strict";Q.exports=function(m,v,b){if("function"==typeof Array.prototype.findIndex)return m.findIndex(v,b);if("function"!=typeof v)throw new TypeError("predicate must be a function");var h=Object(m),e=h.length;if(0===e)return-1;for(var n=0;n<e;n++)if(v.call(b,h[n],n,h))return n;return-1}},{}],73:[function(y,Q,K){"use strict";var m=y("array-bounds");Q.exports=function(v,b,h){if(!v||null==v.length)throw Error("Argument should be an array");null==b&&(b=1),null==h&&(h=m(v,b));for(var e=0;e<b;e++){var n=h[b+e],r=h[e],o=e,t=v.length;if(n===1/0&&r===-1/0)for(o=e;o<t;o+=b)v[o]=v[o]===n?1:v[o]===r?0:.5;else if(n===1/0)for(o=e;o<t;o+=b)v[o]=v[o]===n?1:0;else if(r===-1/0)for(o=e;o<t;o+=b)v[o]=v[o]===r?0:1;else{var d=n-r;for(o=e;o<t;o+=b)isNaN(v[o])||(v[o]=0===d?.5:(v[o]-r)/d)}}return v}},{"array-bounds":71}],74:[function(y,Q,K){Q.exports=function(m,v){var b="number"==typeof m,h="number"==typeof v;b&&!h?(v=m,m=0):b||h||(m=0,v=0);var e=(v|=0)-(m|=0);if(e<0)throw new Error("array length must be positive");for(var n=new Array(e),r=0,o=m;r<e;r++,o++)n[r]=o;return n}},{}],75:[function(y,Q,K){(function(m){(function(){"use strict";var v=y("object-assign");function b(k,w){if(k===w)return 0;for(var C=k.length,A=w.length,O=0,P=Math.min(C,A);O<P;++O)if(k[O]!==w[O]){C=k[O],A=w[O];break}return C<A?-1:A<C?1:0}function h(k){return m.Buffer&&"function"==typeof m.Buffer.isBuffer?m.Buffer.isBuffer(k):!(null==k||!k._isBuffer)}var e=y("util/"),n=Object.prototype.hasOwnProperty,r=Array.prototype.slice,o="foo"===function(){}.name;function t(k){return Object.prototype.toString.call(k)}function d(k){return!h(k)&&"function"==typeof m.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(k):!!k&&(k instanceof DataView||!!(k.buffer&&k.buffer instanceof ArrayBuffer)))}var a=Q.exports=g,i=/\s*function\s+([^\(\s]*)\s*/;function s(k){if(e.isFunction(k)){if(o)return k.name;var w=k.toString().match(i);return w&&w[1]}}function c(k,w){return"string"==typeof k?k.length<w?k:k.slice(0,w):k}function l(k){if(o||!e.isFunction(k))return e.inspect(k);var w=s(k);return"[Function"+(w?": "+w:"")+"]"}function p(k,w,C,A,O){throw new a.AssertionError({message:C,actual:k,expected:w,operator:A,stackStartFunction:O})}function g(k,w){k||p(k,!0,w,"==",a.ok)}function u(k,w,C,A){if(k===w)return!0;if(h(k)&&h(w))return 0===b(k,w);if(e.isDate(k)&&e.isDate(w))return k.getTime()===w.getTime();if(e.isRegExp(k)&&e.isRegExp(w))return k.source===w.source&&k.global===w.global&&k.multiline===w.multiline&&k.lastIndex===w.lastIndex&&k.ignoreCase===w.ignoreCase;if(null!==k&&"object"==typeof k||null!==w&&"object"==typeof w){if(d(k)&&d(w)&&t(k)===t(w)&&!(k instanceof Float32Array||k instanceof Float64Array))return 0===b(new Uint8Array(k.buffer),new Uint8Array(w.buffer));if(h(k)!==h(w))return!1;var O=(A=A||{actual:[],expected:[]}).actual.indexOf(k);return-1!==O&&O===A.expected.indexOf(w)||(A.actual.push(k),A.expected.push(w),function(P,S,E,D){if(null==P||null==S)return!1;if(e.isPrimitive(P)||e.isPrimitive(S))return P===S;if(E&&Object.getPrototypeOf(P)!==Object.getPrototypeOf(S))return!1;var z=x(P),N=x(S);if(z&&!N||!z&&N)return!1;if(z)return u(P=r.call(P),S=r.call(S),E);var V,X,J=_(P),G=_(S);if(J.length!==G.length)return!1;for(J.sort(),G.sort(),X=J.length-1;X>=0;X--)if(J[X]!==G[X])return!1;for(X=J.length-1;X>=0;X--)if(!u(P[V=J[X]],S[V],E,D))return!1;return!0}(k,w,C,A))}return C?k===w:k==w}function x(k){return"[object Arguments]"==Object.prototype.toString.call(k)}function f(k,w){if(!k||!w)return!1;if("[object RegExp]"==Object.prototype.toString.call(w))return w.test(k);try{if(k instanceof w)return!0}catch{}return!Error.isPrototypeOf(w)&&!0===w.call({},k)}function T(k,w,C,A){var O;if("function"!=typeof w)throw new TypeError('"block" argument must be a function');"string"==typeof C&&(A=C,C=null),O=function(E){var D;try{E()}catch(z){D=z}return D}(w),A=(C&&C.name?" ("+C.name+").":".")+(A?" "+A:"."),k&&!O&&p(O,C,"Missing expected exception"+A);var P="string"==typeof A,S=!k&&O&&!C;if((!k&&e.isError(O)&&P&&f(O,C)||S)&&p(O,C,"Got unwanted exception"+A),k&&O&&C&&!f(O,C)||!k&&O)throw O}a.AssertionError=function(k){this.name="AssertionError",this.actual=k.actual,this.expected=k.expected,this.operator=k.operator,k.message?(this.message=k.message,this.generatedMessage=!1):(this.message=c(l(this.actual),128)+" "+this.operator+" "+c(l(this.expected),128),this.generatedMessage=!0);var w=k.stackStartFunction||p;if(Error.captureStackTrace)Error.captureStackTrace(this,w);else{var C=new Error;if(C.stack){var A=C.stack,O=s(w),P=A.indexOf("\n"+O);if(P>=0){var S=A.indexOf("\n",P+1);A=A.substring(S+1)}this.stack=A}}},e.inherits(a.AssertionError,Error),a.fail=p,a.ok=g,a.equal=function(k,w,C){k!=w&&p(k,w,C,"==",a.equal)},a.notEqual=function(k,w,C){k==w&&p(k,w,C,"!=",a.notEqual)},a.deepEqual=function(k,w,C){u(k,w,!1)||p(k,w,C,"deepEqual",a.deepEqual)},a.deepStrictEqual=function(k,w,C){u(k,w,!0)||p(k,w,C,"deepStrictEqual",a.deepStrictEqual)},a.notDeepEqual=function(k,w,C){u(k,w,!1)&&p(k,w,C,"notDeepEqual",a.notDeepEqual)},a.notDeepStrictEqual=function k(w,C,A){u(w,C,!0)&&p(w,C,A,"notDeepStrictEqual",k)},a.strictEqual=function(k,w,C){k!==w&&p(k,w,C,"===",a.strictEqual)},a.notStrictEqual=function(k,w,C){k===w&&p(k,w,C,"!==",a.notStrictEqual)},a.throws=function(k,w,C){T(!0,k,w,C)},a.doesNotThrow=function(k,w,C){T(!1,k,w,C)},a.ifError=function(k){if(k)throw k},a.strict=v(function k(w,C){w||p(w,!0,C,"==",k)},a,{equal:a.strictEqual,deepEqual:a.deepStrictEqual,notEqual:a.notStrictEqual,notDeepEqual:a.notDeepStrictEqual}),a.strict.strict=a.strict;var _=Object.keys||function(k){var w=[];for(var C in k)n.call(k,C)&&w.push(C);return w}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(y,Q,K){Q.exports="function"==typeof Object.create?function(m,v){m.super_=v,m.prototype=Object.create(v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})}:function(m,v){m.super_=v;var b=function(){};b.prototype=v.prototype,m.prototype=new b,m.prototype.constructor=m}},{}],77:[function(y,Q,K){Q.exports=function(m){return m&&"object"==typeof m&&"function"==typeof m.copy&&"function"==typeof m.fill&&"function"==typeof m.readUInt8}},{}],78:[function(y,Q,K){(function(m,v){(function(){var b=/%[sdj%]/g;K.format=function(P){if(!p(P)){for(var S=[],E=0;E<arguments.length;E++)S.push(n(arguments[E]));return S.join(" ")}E=1;for(var D=arguments,z=D.length,N=String(P).replace(b,function(X){if("%%"===X)return"%";if(E>=z)return X;switch(X){case"%s":return String(D[E++]);case"%d":return Number(D[E++]);case"%j":try{return JSON.stringify(D[E++])}catch{return"[Circular]"}default:return X}}),V=D[E];E<z;V=D[++E])c(V)||!x(V)?N+=" "+V:N+=" "+n(V);return N},K.deprecate=function(P,S){if(g(v.process))return function(){return K.deprecate(P,S).apply(this,arguments)};if(!0===m.noDeprecation)return P;var E=!1;return function(){if(!E){if(m.throwDeprecation)throw new Error(S);m.traceDeprecation?console.trace(S):console.error(S),E=!0}return P.apply(this,arguments)}};var h,e={};function n(P,S){var E={seen:[],stylize:o};return arguments.length>=3&&(E.depth=arguments[2]),arguments.length>=4&&(E.colors=arguments[3]),s(S)?E.showHidden=S:S&&K._extend(E,S),g(E.showHidden)&&(E.showHidden=!1),g(E.depth)&&(E.depth=2),g(E.colors)&&(E.colors=!1),g(E.customInspect)&&(E.customInspect=!0),E.colors&&(E.stylize=r),t(E,P,E.depth)}function r(P,S){var E=n.styles[S];return E?"\x1b["+n.colors[E][0]+"m"+P+"\x1b["+n.colors[E][1]+"m":P}function o(P,S){return P}function t(P,S,E){if(P.customInspect&&S&&_(S.inspect)&&S.inspect!==K.inspect&&(!S.constructor||S.constructor.prototype!==S)){var D=S.inspect(E,P);return p(D)||(D=t(P,D,E)),D}var z=function(j,B){if(g(B))return j.stylize("undefined","undefined");if(p(B)){var H="'"+JSON.stringify(B).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return j.stylize(H,"string")}return l(B)?j.stylize(""+B,"number"):s(B)?j.stylize(""+B,"boolean"):c(B)?j.stylize("null","null"):void 0}(P,S);if(z)return z;var B,N=Object.keys(S),V=(B={},N.forEach(function(H,ee){B[H]=!0}),B);if(P.showHidden&&(N=Object.getOwnPropertyNames(S)),T(S)&&(N.indexOf("message")>=0||N.indexOf("description")>=0))return d(S);if(0===N.length){if(_(S))return P.stylize("[Function"+(S.name?": "+S.name:"")+"]","special");if(u(S))return P.stylize(RegExp.prototype.toString.call(S),"regexp");if(f(S))return P.stylize(Date.prototype.toString.call(S),"date");if(T(S))return d(S)}var J,G="",Z=!1,re=["{","}"];return i(S)&&(Z=!0,re=["[","]"]),_(S)&&(G=" [Function"+(S.name?": "+S.name:"")+"]"),u(S)&&(G=" "+RegExp.prototype.toString.call(S)),f(S)&&(G=" "+Date.prototype.toUTCString.call(S)),T(S)&&(G=" "+d(S)),0!==N.length||Z&&0!=S.length?E<0?u(S)?P.stylize(RegExp.prototype.toString.call(S),"regexp"):P.stylize("[Object]","special"):(P.seen.push(S),J=Z?function(j,B,H,ee,U){for(var $=[],q=0,te=B.length;q<te;++q)O(B,String(q))?$.push(a(j,B,H,ee,String(q),!0)):$.push("");return U.forEach(function(ne){ne.match(/^\d+$/)||$.push(a(j,B,H,ee,ne,!0))}),$}(P,S,E,V,N):N.map(function(j){return a(P,S,E,V,j,Z)}),P.seen.pop(),function(j,B,H){return j.reduce(function(ee,U){return U.indexOf("\n"),ee+U.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?H[0]+(""===B?"":B+"\n ")+" "+j.join(",\n  ")+" "+H[1]:H[0]+B+" "+j.join(", ")+" "+H[1]}(J,G,re)):re[0]+G+re[1]}function d(P){return"["+Error.prototype.toString.call(P)+"]"}function a(P,S,E,D,z,N){var V,X,J;if((J=Object.getOwnPropertyDescriptor(S,z)||{value:S[z]}).get?X=P.stylize(J.set?"[Getter/Setter]":"[Getter]","special"):J.set&&(X=P.stylize("[Setter]","special")),O(D,z)||(V="["+z+"]"),X||(P.seen.indexOf(J.value)<0?(X=c(E)?t(P,J.value,null):t(P,J.value,E-1)).indexOf("\n")>-1&&(X=N?X.split("\n").map(function(G){return"  "+G}).join("\n").substr(2):"\n"+X.split("\n").map(function(G){return"   "+G}).join("\n")):X=P.stylize("[Circular]","special")),g(V)){if(N&&z.match(/^\d+$/))return X;(V=JSON.stringify(""+z)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(V=V.substr(1,V.length-2),V=P.stylize(V,"name")):(V=V.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),V=P.stylize(V,"string"))}return V+": "+X}function i(P){return Array.isArray(P)}function s(P){return"boolean"==typeof P}function c(P){return null===P}function l(P){return"number"==typeof P}function p(P){return"string"==typeof P}function g(P){return void 0===P}function u(P){return x(P)&&"[object RegExp]"===k(P)}function x(P){return"object"==typeof P&&null!==P}function f(P){return x(P)&&"[object Date]"===k(P)}function T(P){return x(P)&&("[object Error]"===k(P)||P instanceof Error)}function _(P){return"function"==typeof P}function k(P){return Object.prototype.toString.call(P)}function w(P){return P<10?"0"+P.toString(10):P.toString(10)}K.debuglog=function(P){if(g(h)&&(h=m.env.NODE_DEBUG||""),P=P.toUpperCase(),!e[P])if(new RegExp("\\b"+P+"\\b","i").test(h)){var S=m.pid;e[P]=function(){var E=K.format.apply(K,arguments);console.error("%s %d: %s",P,S,E)}}else e[P]=function(){};return e[P]},K.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},K.isArray=i,K.isBoolean=s,K.isNull=c,K.isNullOrUndefined=function(P){return null==P},K.isNumber=l,K.isString=p,K.isSymbol=function(P){return"symbol"==typeof P},K.isUndefined=g,K.isRegExp=u,K.isObject=x,K.isDate=f,K.isError=T,K.isFunction=_,K.isPrimitive=function(P){return null===P||"boolean"==typeof P||"number"==typeof P||"string"==typeof P||"symbol"==typeof P||void 0===P},K.isBuffer=y("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var P=new Date,S=[w(P.getHours()),w(P.getMinutes()),w(P.getSeconds())].join(":");return[P.getDate(),C[P.getMonth()],S].join(" ")}function O(P,S){return Object.prototype.hasOwnProperty.call(P,S)}K.log=function(){console.log("%s - %s",A(),K.format.apply(K,arguments))},K.inherits=y("inherits"),K._extend=function(P,S){if(!S||!x(S))return P;for(var E=Object.keys(S),D=E.length;D--;)P[E[D]]=S[E[D]];return P}}).call(this)}).call(this,y("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(y,Q,K){"use strict";K.byteLength=function(t){var d=r(t),i=d[1];return 3*(d[0]+i)/4-i},K.toByteArray=function(t){var d,a,f,i=r(t),s=i[0],c=i[1],l=new b(3*(s+(f=c))/4-f),p=0,g=c>0?s-4:s;for(a=0;a<g;a+=4)d=v[t.charCodeAt(a)]<<18|v[t.charCodeAt(a+1)]<<12|v[t.charCodeAt(a+2)]<<6|v[t.charCodeAt(a+3)],l[p++]=d>>16&255,l[p++]=d>>8&255,l[p++]=255&d;return 2===c&&(d=v[t.charCodeAt(a)]<<2|v[t.charCodeAt(a+1)]>>4,l[p++]=255&d),1===c&&(d=v[t.charCodeAt(a)]<<10|v[t.charCodeAt(a+1)]<<4|v[t.charCodeAt(a+2)]>>2,l[p++]=d>>8&255,l[p++]=255&d),l},K.fromByteArray=function(t){for(var d,a=t.length,i=a%3,s=[],c=0,l=a-i;c<l;c+=16383)s.push(o(t,c,c+16383>l?l:c+16383));return 1===i?s.push(m[(d=t[a-1])>>2]+m[d<<4&63]+"=="):2===i&&s.push(m[(d=(t[a-2]<<8)+t[a-1])>>10]+m[d>>4&63]+m[d<<2&63]+"="),s.join("")};for(var m=[],v=[],b=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=h.length;e<n;++e)m[e]=h[e],v[h.charCodeAt(e)]=e;function r(t){var d=t.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=t.indexOf("=");return-1===a&&(a=d),[a,a===d?0:4-a%4]}function o(t,d,a){for(var s,c=[],l=d;l<a;l+=3)c.push(m[(s=(t[l]<<16&16711680)+(t[l+1]<<8&65280)+(255&t[l+2]))>>18&63]+m[s>>12&63]+m[s>>6&63]+m[63&s]);return c.join("")}v["-".charCodeAt(0)]=62,v["_".charCodeAt(0)]=63},{}],80:[function(y,Q,K){"use strict";function m(r,o,t,d,a){for(var i=a+1;d<=a;){var s=d+a>>>1,c=r[s];(void 0!==t?t(c,o):c-o)>=0?(i=s,a=s-1):d=s+1}return i}function v(r,o,t,d,a){for(var i=a+1;d<=a;){var s=d+a>>>1,c=r[s];(void 0!==t?t(c,o):c-o)>0?(i=s,a=s-1):d=s+1}return i}function b(r,o,t,d,a){for(var i=d-1;d<=a;){var s=d+a>>>1,c=r[s];(void 0!==t?t(c,o):c-o)<0?(i=s,d=s+1):a=s-1}return i}function h(r,o,t,d,a){for(var i=d-1;d<=a;){var s=d+a>>>1,c=r[s];(void 0!==t?t(c,o):c-o)<=0?(i=s,d=s+1):a=s-1}return i}function e(r,o,t,d,a){for(;d<=a;){var i=d+a>>>1,s=r[i],c=void 0!==t?t(s,o):s-o;if(0===c)return i;c<=0?d=i+1:a=i-1}return-1}function n(r,o,t,d,a,i){return"function"==typeof t?i(r,o,t,void 0===d?0:0|d,void 0===a?r.length-1:0|a):i(r,o,void 0,void 0===t?0:0|t,void 0===d?r.length-1:0|d)}Q.exports={ge:function(r,o,t,d,a){return n(r,o,t,d,a,m)},gt:function(r,o,t,d,a){return n(r,o,t,d,a,v)},lt:function(r,o,t,d,a){return n(r,o,t,d,a,b)},le:function(r,o,t,d,a){return n(r,o,t,d,a,h)},eq:function(r,o,t,d,a){return n(r,o,t,d,a,e)}}},{}],81:[function(y,Q,K){"use strict";function m(b){var h=32;return(b&=-b)&&h--,65535&b&&(h-=16),16711935&b&&(h-=8),252645135&b&&(h-=4),858993459&b&&(h-=2),1431655765&b&&(h-=1),h}K.INT_BITS=32,K.INT_MAX=2147483647,K.INT_MIN=-1<<31,K.sign=function(b){return(b>0)-(b<0)},K.abs=function(b){var h=b>>31;return(b^h)-h},K.min=function(b,h){return h^(b^h)&-(b<h)},K.max=function(b,h){return b^(b^h)&-(b<h)},K.isPow2=function(b){return!(b&b-1||!b)},K.log2=function(b){var h,e;return h=(b>65535)<<4,h|=e=((b>>>=h)>255)<<3,h|=e=((b>>>=e)>15)<<2,(h|=e=((b>>>=e)>3)<<1)|(b>>>=e)>>1},K.log10=function(b){return b>=1e9?9:b>=1e8?8:b>=1e7?7:b>=1e6?6:b>=1e5?5:b>=1e4?4:b>=1e3?3:b>=100?2:b>=10?1:0},K.popCount=function(b){return 16843009*((b=(858993459&(b-=b>>>1&1431655765))+(b>>>2&858993459))+(b>>>4)&252645135)>>>24},K.countTrailingZeros=m,K.nextPow2=function(b){return b+=0===b,--b,b|=b>>>1,b|=b>>>2,b|=b>>>4,1+((b|=b>>>8)|b>>>16)},K.prevPow2=function(b){return b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,(b|=b>>>16)-(b>>>1)},K.parity=function(b){return b^=b>>>16,b^=b>>>8,b^=b>>>4,27030>>>(b&=15)&1};var v=new Array(256);(function(b){for(var h=0;h<256;++h){var e=h,n=h,r=7;for(e>>>=1;e;e>>>=1)n<<=1,n|=1&e,--r;b[h]=n<<r&255}})(v),K.reverse=function(b){return v[255&b]<<24|v[b>>>8&255]<<16|v[b>>>16&255]<<8|v[b>>>24&255]},K.interleave2=function(b,h){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b&=65535)|b<<8))|b<<4))|b<<2))|b<<1))|(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h&=65535)|h<<8))|h<<4))|h<<2))|h<<1))<<1},K.deinterleave2=function(b,h){return(b=65535&((b=16711935&((b=252645135&((b=858993459&((b=b>>>h&1431655765)|b>>>1))|b>>>2))|b>>>4))|b>>>16))<<16>>16},K.interleave3=function(b,h,e){return b=1227133513&((b=3272356035&((b=251719695&((b=4278190335&((b&=1023)|b<<16))|b<<8))|b<<4))|b<<2),(b|=(h=1227133513&((h=3272356035&((h=251719695&((h=4278190335&((h&=1023)|h<<16))|h<<8))|h<<4))|h<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},K.deinterleave3=function(b,h){return(b=1023&((b=4278190335&((b=251719695&((b=3272356035&((b=b>>>h&1227133513)|b>>>2))|b>>>4))|b>>>8))|b>>>16))<<22>>22},K.nextCombination=function(b){var h=b|b-1;return h+1|(~h&-~h)-1>>>m(b)+1}},{}],82:[function(y,Q,K){"use strict";var m=y("clamp");Q.exports=function(e,n){n||(n={});var r,o,t,d,a,i,c,p,g,u=n.cutoff??.25,x=n.radius??8,f=n.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");r=n.width,o=n.height,d=e,i=n.stride?n.stride:Math.floor(e.length/r/o)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(d=(c=e).getContext("2d").getImageData(0,0,r=c.width,o=c.height).data,i=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(d=e.getImageData(0,0,r=(c=e.canvas).width,o=c.height).data,i=4):window.ImageData&&e instanceof window.ImageData&&(r=e.width,o=e.height,d=e.data,i=4);if(t=Math.max(r,o),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(a=d,d=Array(r*o),p=0,g=a.length;p<g;p++)d[p]=a[p*i+f]/255;else if(1!==i)throw Error("Raw data can have only 1 value per pixel");var T=Array(r*o),_=Array(r*o),k=Array(t),w=Array(t),C=Array(t+1),A=Array(t);for(p=0,g=r*o;p<g;p++){var O=d[p];T[p]=1===O?0:0===O?v:Math.pow(Math.max(0,.5-O),2),_[p]=1===O?v:0===O?0:Math.pow(Math.max(0,O-.5),2)}b(T,r,o,k,w,A,C),b(_,r,o,k,w,A,C);var P=window.Float32Array?new Float32Array(r*o):new Array(r*o);for(p=0,g=r*o;p<g;p++)P[p]=m(1-((T[p]-_[p])/x+u),0,1);return P};var v=1e20;function b(e,n,r,o,t,d,a){for(var i=0;i<n;i++){for(var s=0;s<r;s++)o[s]=e[s*n+i];for(h(o,t,d,a,r),s=0;s<r;s++)e[s*n+i]=t[s]}for(s=0;s<r;s++){for(i=0;i<n;i++)o[i]=e[s*n+i];for(h(o,t,d,a,n),i=0;i<n;i++)e[s*n+i]=Math.sqrt(t[i])}}function h(e,n,r,o,t){r[0]=0,o[0]=-v,o[1]=+v;for(var d=1,a=0;d<t;d++){for(var i=(e[d]+d*d-(e[r[a]]+r[a]*r[a]))/(2*d-2*r[a]);i<=o[a];)a--,i=(e[d]+d*d-(e[r[a]]+r[a]*r[a]))/(2*d-2*r[a]);r[++a]=d,o[a]=i,o[a+1]=+v}for(d=0,a=0;d<t;d++){for(;o[a+1]<d;)a++;n[d]=(d-r[a])*(d-r[a])+e[r[a]]}}},{clamp:86}],83:[function(y,Q,K){},{}],84:[function(y,Q,K){"use strict";var m,v="object"==typeof Reflect?Reflect:null,b=v&&"function"==typeof v.apply?v.apply:function(l,p,g){return Function.prototype.apply.call(l,p,g)};m=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)};var h=Number.isNaN||function(l){return l!=l};function e(){e.init.call(this)}Q.exports=e,Q.exports.once=function(l,p){return new Promise(function(g,u){function x(){void 0!==f&&l.removeListener("error",f),g([].slice.call(arguments))}var f;"error"!==p&&(f=function(T){l.removeListener(p,x),u(T)},l.once("error",f)),l.once(p,x)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var n=10;function r(l){if("function"!=typeof l)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof l)}function o(l){return void 0===l._maxListeners?e.defaultMaxListeners:l._maxListeners}function t(l,p,g,u){var x,f,T;if(r(g),void 0===(f=l._events)?(f=l._events=Object.create(null),l._eventsCount=0):(void 0!==f.newListener&&(l.emit("newListener",p,g.listener?g.listener:g),f=l._events),T=f[p]),void 0===T)T=f[p]=g,++l._eventsCount;else if("function"==typeof T?T=f[p]=u?[g,T]:[T,g]:u?T.unshift(g):T.push(g),(x=o(l))>0&&T.length>x&&!T.warned){T.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=l,k.type=p,k.count=T.length,console&&console.warn&&console.warn(k)}return l}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(l,p,g){var u={fired:!1,wrapFn:void 0,target:l,type:p,listener:g},x=d.bind(u);return x.listener=g,u.wrapFn=x,x}function i(l,p,g){var u=l._events;if(void 0===u)return[];var x=u[p];return void 0===x?[]:"function"==typeof x?g?[x.listener||x]:[x]:g?function(f){for(var T=new Array(f.length),_=0;_<T.length;++_)T[_]=f[_].listener||f[_];return T}(x):c(x,x.length)}function s(l){var p=this._events;if(void 0!==p){var g=p[l];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function c(l,p){for(var g=new Array(p),u=0;u<p;++u)g[u]=l[u];return g}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(l){if("number"!=typeof l||l<0||h(l))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+l+".");n=l}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(l){if("number"!=typeof l||l<0||h(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this},e.prototype.getMaxListeners=function(){return o(this)},e.prototype.emit=function(l){for(var p=[],g=1;g<arguments.length;g++)p.push(arguments[g]);var u="error"===l,x=this._events;if(void 0!==x)u=u&&void 0===x.error;else if(!u)return!1;if(u){var f;if(p.length>0&&(f=p[0]),f instanceof Error)throw f;var T=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw T.context=f,T}var _=x[l];if(void 0===_)return!1;if("function"==typeof _)b(_,this,p);else{var k=_.length,w=c(_,k);for(g=0;g<k;++g)b(w[g],this,p)}return!0},e.prototype.on=e.prototype.addListener=function(l,p){return t(this,l,p,!1)},e.prototype.prependListener=function(l,p){return t(this,l,p,!0)},e.prototype.once=function(l,p){return r(p),this.on(l,a(this,l,p)),this},e.prototype.prependOnceListener=function(l,p){return r(p),this.prependListener(l,a(this,l,p)),this},e.prototype.off=e.prototype.removeListener=function(l,p){var g,u,x,f,T;if(r(p),void 0===(u=this._events))return this;if(void 0===(g=u[l]))return this;if(g===p||g.listener===p)0==--this._eventsCount?this._events=Object.create(null):(delete u[l],u.removeListener&&this.emit("removeListener",l,g.listener||p));else if("function"!=typeof g){for(x=-1,f=g.length-1;f>=0;f--)if(g[f]===p||g[f].listener===p){T=g[f].listener,x=f;break}if(x<0)return this;0===x?g.shift():function(_,k){for(;k+1<_.length;k++)_[k]=_[k+1];_.pop()}(g,x),1===g.length&&(u[l]=g[0]),void 0!==u.removeListener&&this.emit("removeListener",l,T||p)}return this},e.prototype.removeAllListeners=function(l){var p,g,u;if(void 0===(g=this._events))return this;if(void 0===g.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==g[l]&&(0==--this._eventsCount?this._events=Object.create(null):delete g[l]),this;if(0===arguments.length){var x,f=Object.keys(g);for(u=0;u<f.length;++u)"removeListener"!==(x=f[u])&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(p=g[l]))this.removeListener(l,p);else if(void 0!==p)for(u=p.length-1;u>=0;u--)this.removeListener(l,p[u]);return this},e.prototype.listeners=function(l){return i(this,l,!0)},e.prototype.rawListeners=function(l){return i(this,l,!1)},e.listenerCount=function(l,p){return"function"==typeof l.listenerCount?l.listenerCount(p):s.call(l,p)},e.prototype.listenerCount=s,e.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},{}],85:[function(y,Q,K){(function(m){(function(){"use strict";var v=y("base64-js"),b=y("ieee754");function h(j){if(j>2147483647)throw new RangeError('The value "'+j+'" is invalid for option "size"');var B=new Uint8Array(j);return B.__proto__=e.prototype,B}function e(j,B,H){if("number"==typeof j){if("string"==typeof B)throw new TypeError('The "string" argument must be of type string. Received type number');return o(j)}return n(j,B,H)}function n(j,B,H){if("string"==typeof j)return function($,q){if("string"==typeof q&&""!==q||(q="utf8"),!e.isEncoding(q))throw new TypeError("Unknown encoding: "+q);var te=0|a($,q),ne=h(te),se=ne.write($,q);return se!==te&&(ne=ne.slice(0,se)),ne}(j,B);if(ArrayBuffer.isView(j))return t(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(Z(j,ArrayBuffer)||j&&Z(j.buffer,ArrayBuffer))return function($,q,te){if(q<0||$.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<q+(te||0))throw new RangeError('"length" is outside of buffer bounds');var ne;return(ne=void 0===q&&void 0===te?new Uint8Array($):void 0===te?new Uint8Array($,q):new Uint8Array($,q,te)).__proto__=e.prototype,ne}(j,B,H);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=j.valueOf&&j.valueOf();if(null!=ee&&ee!==j)return e.from(ee,B,H);var U=function($){if(e.isBuffer($)){var q=0|d($.length),te=h(q);return 0===te.length||$.copy(te,0,0,q),te}return void 0!==$.length?"number"!=typeof $.length||re($.length)?h(0):t($):"Buffer"===$.type&&Array.isArray($.data)?t($.data):void 0}(j);if(U)return U;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return e.from(j[Symbol.toPrimitive]("string"),B,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function r(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function o(j){return r(j),h(j<0?0:0|d(j))}function t(j){for(var B=j.length<0?0:0|d(j.length),H=h(B),ee=0;ee<B;ee+=1)H[ee]=255&j[ee];return H}function d(j){if(j>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|j}function a(j,B){if(e.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||Z(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var H=j.length,ee=arguments.length>2&&!0===arguments[2];if(!ee&&0===H)return 0;for(var U=!1;;)switch(B){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return X(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return J(j).length;default:if(U)return ee?-1:X(j).length;B=(""+B).toLowerCase(),U=!0}}function i(j,B,H){var ee=!1;if((void 0===B||B<0)&&(B=0),B>this.length||((void 0===H||H>this.length)&&(H=this.length),H<=0)||(H>>>=0)<=(B>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return A(this,B,H);case"utf8":case"utf-8":return k(this,B,H);case"ascii":return w(this,B,H);case"latin1":case"binary":return C(this,B,H);case"base64":return _(this,B,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,B,H);default:if(ee)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),ee=!0}}function s(j,B,H){var ee=j[B];j[B]=j[H],j[H]=ee}function c(j,B,H,ee,U){if(0===j.length)return-1;if("string"==typeof H?(ee=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),re(H=+H)&&(H=U?0:j.length-1),H<0&&(H=j.length+H),H>=j.length){if(U)return-1;H=j.length-1}else if(H<0){if(!U)return-1;H=0}if("string"==typeof B&&(B=e.from(B,ee)),e.isBuffer(B))return 0===B.length?-1:l(j,B,H,ee,U);if("number"==typeof B)return B&=255,"function"==typeof Uint8Array.prototype.indexOf?U?Uint8Array.prototype.indexOf.call(j,B,H):Uint8Array.prototype.lastIndexOf.call(j,B,H):l(j,[B],H,ee,U);throw new TypeError("val must be string, number or Buffer")}function l(j,B,H,ee,U){var $,q=1,te=j.length,ne=B.length;if(void 0!==ee&&("ucs2"===(ee=String(ee).toLowerCase())||"ucs-2"===ee||"utf16le"===ee||"utf-16le"===ee)){if(j.length<2||B.length<2)return-1;q=2,te/=2,ne/=2,H/=2}function se(de,be){return 1===q?de[be]:de.readUInt16BE(be*q)}if(U){var ie=-1;for($=H;$<te;$++)if(se(j,$)===se(B,-1===ie?0:$-ie)){if(-1===ie&&(ie=$),$-ie+1===ne)return ie*q}else-1!==ie&&($-=$-ie),ie=-1}else for(H+ne>te&&(H=te-ne),$=H;$>=0;$--){for(var ue=!0,le=0;le<ne;le++)if(se(j,$+le)!==se(B,le)){ue=!1;break}if(ue)return $}return-1}function p(j,B,H,ee){H=Number(H)||0;var U=j.length-H;ee?(ee=Number(ee))>U&&(ee=U):ee=U;var $=B.length;ee>$/2&&(ee=$/2);for(var q=0;q<ee;++q){var te=parseInt(B.substr(2*q,2),16);if(re(te))return q;j[H+q]=te}return q}function g(j,B,H,ee){return G(X(B,j.length-H),j,H,ee)}function u(j,B,H,ee){return G(function(U){for(var $=[],q=0;q<U.length;++q)$.push(255&U.charCodeAt(q));return $}(B),j,H,ee)}function x(j,B,H,ee){return u(j,B,H,ee)}function f(j,B,H,ee){return G(J(B),j,H,ee)}function T(j,B,H,ee){return G(function(U,$){for(var q,te,se=[],ie=0;ie<U.length&&!(($-=2)<0);++ie)te=(q=U.charCodeAt(ie))>>8,se.push(q%256),se.push(te);return se}(B,j.length-H),j,H,ee)}function _(j,B,H){return v.fromByteArray(0===B&&H===j.length?j:j.slice(B,H))}function k(j,B,H){H=Math.min(j.length,H);for(var ee=[],U=B;U<H;){var $,q,te,ne,se=j[U],ie=null,ue=se>239?4:se>223?3:se>191?2:1;if(U+ue<=H)switch(ue){case 1:se<128&&(ie=se);break;case 2:128==(192&($=j[U+1]))&&(ne=(31&se)<<6|63&$)>127&&(ie=ne);break;case 3:q=j[U+2],128==(192&($=j[U+1]))&&128==(192&q)&&(ne=(15&se)<<12|(63&$)<<6|63&q)>2047&&(ne<55296||ne>57343)&&(ie=ne);break;case 4:q=j[U+2],te=j[U+3],128==(192&($=j[U+1]))&&128==(192&q)&&128==(192&te)&&(ne=(15&se)<<18|(63&$)<<12|(63&q)<<6|63&te)>65535&&ne<1114112&&(ie=ne)}null===ie?(ie=65533,ue=1):ie>65535&&(ee.push((ie-=65536)>>>10&1023|55296),ie=56320|1023&ie),ee.push(ie),U+=ue}return function(le){var de=le.length;if(de<=4096)return String.fromCharCode.apply(String,le);for(var be="",_e=0;_e<de;)be+=String.fromCharCode.apply(String,le.slice(_e,_e+=4096));return be}(ee)}function w(j,B,H){var ee="";H=Math.min(j.length,H);for(var U=B;U<H;++U)ee+=String.fromCharCode(127&j[U]);return ee}function C(j,B,H){var ee="";H=Math.min(j.length,H);for(var U=B;U<H;++U)ee+=String.fromCharCode(j[U]);return ee}function A(j,B,H){var ee=j.length;(!B||B<0)&&(B=0),(!H||H<0||H>ee)&&(H=ee);for(var U="",$=B;$<H;++$)U+=V(j[$]);return U}function O(j,B,H){for(var ee=j.slice(B,H),U="",$=0;$<ee.length;$+=2)U+=String.fromCharCode(ee[$]+256*ee[$+1]);return U}function P(j,B,H){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+B>H)throw new RangeError("Trying to access beyond buffer length")}function S(j,B,H,ee,U,$){if(!e.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>U||B<$)throw new RangeError('"value" argument is out of bounds');if(H+ee>j.length)throw new RangeError("Index out of range")}function E(j,B,H,ee,U,$){if(H+ee>j.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function D(j,B,H,ee,U){return B=+B,H>>>=0,U||E(j,0,H,4),b.write(j,B,H,ee,23,4),H+4}function z(j,B,H,ee,U){return B=+B,H>>>=0,U||E(j,0,H,8),b.write(j,B,H,ee,52,8),H+8}K.Buffer=e,K.SlowBuffer=function(j){return+j!=j&&(j=0),e.alloc(+j)},K.INSPECT_MAX_BYTES=50,K.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(j,B,H){return n(j,B,H)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(j,B,H){return U=B,$=H,r(ee=j),ee<=0?h(ee):void 0!==U?"string"==typeof $?h(ee).fill(U,$):h(ee).fill(U):h(ee);var ee,U,$},e.allocUnsafe=function(j){return o(j)},e.allocUnsafeSlow=function(j){return o(j)},e.isBuffer=function(j){return null!=j&&!0===j._isBuffer&&j!==e.prototype},e.compare=function(j,B){if(Z(j,Uint8Array)&&(j=e.from(j,j.offset,j.byteLength)),Z(B,Uint8Array)&&(B=e.from(B,B.offset,B.byteLength)),!e.isBuffer(j)||!e.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===B)return 0;for(var H=j.length,ee=B.length,U=0,$=Math.min(H,ee);U<$;++U)if(j[U]!==B[U]){H=j[U],ee=B[U];break}return H<ee?-1:ee<H?1:0},e.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(j,B){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(0===j.length)return e.alloc(0);var H;if(void 0===B)for(B=0,H=0;H<j.length;++H)B+=j[H].length;var ee=e.allocUnsafe(B),U=0;for(H=0;H<j.length;++H){var $=j[H];if(Z($,Uint8Array)&&($=e.from($)),!e.isBuffer($))throw new TypeError('"list" argument must be an Array of Buffers');$.copy(ee,U),U+=$.length}return ee},e.byteLength=a,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<j;B+=2)s(this,B,B+1);return this},e.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<j;B+=4)s(this,B,B+3),s(this,B+1,B+2);return this},e.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<j;B+=8)s(this,B,B+7),s(this,B+1,B+6),s(this,B+2,B+5),s(this,B+3,B+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var j=this.length;return 0===j?"":0===arguments.length?k(this,0,j):i.apply(this,arguments)},e.prototype.equals=function(j){if(!e.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||0===e.compare(this,j)},e.prototype.inspect=function(){var j="",B=K.INSPECT_MAX_BYTES;return j=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(j+=" ... "),"<Buffer "+j+">"},e.prototype.compare=function(j,B,H,ee,U){if(Z(j,Uint8Array)&&(j=e.from(j,j.offset,j.byteLength)),!e.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(void 0===B&&(B=0),void 0===H&&(H=j?j.length:0),void 0===ee&&(ee=0),void 0===U&&(U=this.length),B<0||H>j.length||ee<0||U>this.length)throw new RangeError("out of range index");if(ee>=U&&B>=H)return 0;if(ee>=U)return-1;if(B>=H)return 1;if(this===j)return 0;for(var $=(U>>>=0)-(ee>>>=0),q=(H>>>=0)-(B>>>=0),te=Math.min($,q),ne=this.slice(ee,U),se=j.slice(B,H),ie=0;ie<te;++ie)if(ne[ie]!==se[ie]){$=ne[ie],q=se[ie];break}return $<q?-1:q<$?1:0},e.prototype.includes=function(j,B,H){return-1!==this.indexOf(j,B,H)},e.prototype.indexOf=function(j,B,H){return c(this,j,B,H,!0)},e.prototype.lastIndexOf=function(j,B,H){return c(this,j,B,H,!1)},e.prototype.write=function(j,B,H,ee){if(void 0===B)ee="utf8",H=this.length,B=0;else if(void 0===H&&"string"==typeof B)ee=B,H=this.length,B=0;else{if(!isFinite(B))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");B>>>=0,isFinite(H)?(H>>>=0,void 0===ee&&(ee="utf8")):(ee=H,H=void 0)}var U=this.length-B;if((void 0===H||H>U)&&(H=U),j.length>0&&(H<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var $=!1;;)switch(ee){case"hex":return p(this,j,B,H);case"utf8":case"utf-8":return g(this,j,B,H);case"ascii":return u(this,j,B,H);case"latin1":case"binary":return x(this,j,B,H);case"base64":return f(this,j,B,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,j,B,H);default:if($)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),$=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(j,B){var H=this.length;(j=~~j)<0?(j+=H)<0&&(j=0):j>H&&(j=H),(B=void 0===B?H:~~B)<0?(B+=H)<0&&(B=0):B>H&&(B=H),B<j&&(B=j);var ee=this.subarray(j,B);return ee.__proto__=e.prototype,ee},e.prototype.readUIntLE=function(j,B,H){j>>>=0,B>>>=0,H||P(j,B,this.length);for(var ee=this[j],U=1,$=0;++$<B&&(U*=256);)ee+=this[j+$]*U;return ee},e.prototype.readUIntBE=function(j,B,H){j>>>=0,B>>>=0,H||P(j,B,this.length);for(var ee=this[j+--B],U=1;B>0&&(U*=256);)ee+=this[j+--B]*U;return ee},e.prototype.readUInt8=function(j,B){return j>>>=0,B||P(j,1,this.length),this[j]},e.prototype.readUInt16LE=function(j,B){return j>>>=0,B||P(j,2,this.length),this[j]|this[j+1]<<8},e.prototype.readUInt16BE=function(j,B){return j>>>=0,B||P(j,2,this.length),this[j]<<8|this[j+1]},e.prototype.readUInt32LE=function(j,B){return j>>>=0,B||P(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},e.prototype.readUInt32BE=function(j,B){return j>>>=0,B||P(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},e.prototype.readIntLE=function(j,B,H){j>>>=0,B>>>=0,H||P(j,B,this.length);for(var ee=this[j],U=1,$=0;++$<B&&(U*=256);)ee+=this[j+$]*U;return ee>=(U*=128)&&(ee-=Math.pow(2,8*B)),ee},e.prototype.readIntBE=function(j,B,H){j>>>=0,B>>>=0,H||P(j,B,this.length);for(var ee=B,U=1,$=this[j+--ee];ee>0&&(U*=256);)$+=this[j+--ee]*U;return $>=(U*=128)&&($-=Math.pow(2,8*B)),$},e.prototype.readInt8=function(j,B){return j>>>=0,B||P(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},e.prototype.readInt16LE=function(j,B){j>>>=0,B||P(j,2,this.length);var H=this[j]|this[j+1]<<8;return 32768&H?4294901760|H:H},e.prototype.readInt16BE=function(j,B){j>>>=0,B||P(j,2,this.length);var H=this[j+1]|this[j]<<8;return 32768&H?4294901760|H:H},e.prototype.readInt32LE=function(j,B){return j>>>=0,B||P(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},e.prototype.readInt32BE=function(j,B){return j>>>=0,B||P(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},e.prototype.readFloatLE=function(j,B){return j>>>=0,B||P(j,4,this.length),b.read(this,j,!0,23,4)},e.prototype.readFloatBE=function(j,B){return j>>>=0,B||P(j,4,this.length),b.read(this,j,!1,23,4)},e.prototype.readDoubleLE=function(j,B){return j>>>=0,B||P(j,8,this.length),b.read(this,j,!0,52,8)},e.prototype.readDoubleBE=function(j,B){return j>>>=0,B||P(j,8,this.length),b.read(this,j,!1,52,8)},e.prototype.writeUIntLE=function(j,B,H,ee){j=+j,B>>>=0,H>>>=0,ee||S(this,j,B,H,Math.pow(2,8*H)-1,0);var U=1,$=0;for(this[B]=255&j;++$<H&&(U*=256);)this[B+$]=j/U&255;return B+H},e.prototype.writeUIntBE=function(j,B,H,ee){j=+j,B>>>=0,H>>>=0,ee||S(this,j,B,H,Math.pow(2,8*H)-1,0);var U=H-1,$=1;for(this[B+U]=255&j;--U>=0&&($*=256);)this[B+U]=j/$&255;return B+H},e.prototype.writeUInt8=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,1,255,0),this[B]=255&j,B+1},e.prototype.writeUInt16LE=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,2,65535,0),this[B]=255&j,this[B+1]=j>>>8,B+2},e.prototype.writeUInt16BE=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,2,65535,0),this[B]=j>>>8,this[B+1]=255&j,B+2},e.prototype.writeUInt32LE=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,4,4294967295,0),this[B+3]=j>>>24,this[B+2]=j>>>16,this[B+1]=j>>>8,this[B]=255&j,B+4},e.prototype.writeUInt32BE=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,4,4294967295,0),this[B]=j>>>24,this[B+1]=j>>>16,this[B+2]=j>>>8,this[B+3]=255&j,B+4},e.prototype.writeIntLE=function(j,B,H,ee){if(j=+j,B>>>=0,!ee){var U=Math.pow(2,8*H-1);S(this,j,B,H,U-1,-U)}var $=0,q=1,te=0;for(this[B]=255&j;++$<H&&(q*=256);)j<0&&0===te&&0!==this[B+$-1]&&(te=1),this[B+$]=(j/q>>0)-te&255;return B+H},e.prototype.writeIntBE=function(j,B,H,ee){if(j=+j,B>>>=0,!ee){var U=Math.pow(2,8*H-1);S(this,j,B,H,U-1,-U)}var $=H-1,q=1,te=0;for(this[B+$]=255&j;--$>=0&&(q*=256);)j<0&&0===te&&0!==this[B+$+1]&&(te=1),this[B+$]=(j/q>>0)-te&255;return B+H},e.prototype.writeInt8=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,1,127,-128),j<0&&(j=255+j+1),this[B]=255&j,B+1},e.prototype.writeInt16LE=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,2,32767,-32768),this[B]=255&j,this[B+1]=j>>>8,B+2},e.prototype.writeInt16BE=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,2,32767,-32768),this[B]=j>>>8,this[B+1]=255&j,B+2},e.prototype.writeInt32LE=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,4,2147483647,-2147483648),this[B]=255&j,this[B+1]=j>>>8,this[B+2]=j>>>16,this[B+3]=j>>>24,B+4},e.prototype.writeInt32BE=function(j,B,H){return j=+j,B>>>=0,H||S(this,j,B,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[B]=j>>>24,this[B+1]=j>>>16,this[B+2]=j>>>8,this[B+3]=255&j,B+4},e.prototype.writeFloatLE=function(j,B,H){return D(this,j,B,!0,H)},e.prototype.writeFloatBE=function(j,B,H){return D(this,j,B,!1,H)},e.prototype.writeDoubleLE=function(j,B,H){return z(this,j,B,!0,H)},e.prototype.writeDoubleBE=function(j,B,H){return z(this,j,B,!1,H)},e.prototype.copy=function(j,B,H,ee){if(!e.isBuffer(j))throw new TypeError("argument should be a Buffer");if(H||(H=0),ee||0===ee||(ee=this.length),B>=j.length&&(B=j.length),B||(B=0),ee>0&&ee<H&&(ee=H),ee===H||0===j.length||0===this.length)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),j.length-B<ee-H&&(ee=j.length-B+H);var U=ee-H;if(this===j&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(B,H,ee);else if(this===j&&H<B&&B<ee)for(var $=U-1;$>=0;--$)j[$+B]=this[$+H];else Uint8Array.prototype.set.call(j,this.subarray(H,ee),B);return U},e.prototype.fill=function(j,B,H,ee){if("string"==typeof j){if("string"==typeof B?(ee=B,B=0,H=this.length):"string"==typeof H&&(ee=H,H=this.length),void 0!==ee&&"string"!=typeof ee)throw new TypeError("encoding must be a string");if("string"==typeof ee&&!e.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(1===j.length){var U=j.charCodeAt(0);("utf8"===ee&&U<128||"latin1"===ee)&&(j=U)}}else"number"==typeof j&&(j&=255);if(B<0||this.length<B||this.length<H)throw new RangeError("Out of range index");if(H<=B)return this;var $;if(B>>>=0,H=void 0===H?this.length:H>>>0,j||(j=0),"number"==typeof j)for($=B;$<H;++$)this[$]=j;else{var q=e.isBuffer(j)?j:e.from(j,ee),te=q.length;if(0===te)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for($=0;$<H-B;++$)this[$+B]=q[$%te]}return this};var N=/[^+/0-9A-Za-z-_]/g;function V(j){return j<16?"0"+j.toString(16):j.toString(16)}function X(j,B){var H;B=B||1/0;for(var ee=j.length,U=null,$=[],q=0;q<ee;++q){if((H=j.charCodeAt(q))>55295&&H<57344){if(!U){if(H>56319){(B-=3)>-1&&$.push(239,191,189);continue}if(q+1===ee){(B-=3)>-1&&$.push(239,191,189);continue}U=H;continue}if(H<56320){(B-=3)>-1&&$.push(239,191,189),U=H;continue}H=65536+(U-55296<<10|H-56320)}else U&&(B-=3)>-1&&$.push(239,191,189);if(U=null,H<128){if((B-=1)<0)break;$.push(H)}else if(H<2048){if((B-=2)<0)break;$.push(H>>6|192,63&H|128)}else if(H<65536){if((B-=3)<0)break;$.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;$.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return $}function J(j){return v.toByteArray(function(B){if((B=(B=B.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(j))}function G(j,B,H,ee){for(var U=0;U<ee&&!(U+H>=B.length||U>=j.length);++U)B[U+H]=j[U];return U}function Z(j,B){return j instanceof B||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===B.name}function re(j){return j!=j}}).call(this)}).call(this,y("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(y,Q,K){Q.exports=function(m,v,b){return v<b?m<v?v:m>b?b:m:m<b?b:m>v?v:m}},{}],87:[function(y,Q,K){"use strict";var m=y("clamp");function v(b,h){null==h&&(h=!0);var e=b[0],n=b[1],r=b[2],o=b[3];return null==o&&(o=h?1:255),h&&(e*=255,n*=255,r*=255,o*=255),16777216*(e=255&m(e,0,255))+((n=255&m(n,0,255))<<16)+((r=255&m(r,0,255))<<8)+(255&m(o,0,255))}Q.exports=v,Q.exports.to=v,Q.exports.from=function(b,h){var e=(b=+b)>>>24,n=(16711680&b)>>>16,r=(65280&b)>>>8,o=255&b;return!1===h?[e,n,r,o]:[e/255,n/255,r/255,o/255]}},{clamp:86}],88:[function(y,Q,K){"use strict";Q.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(y,Q,K){"use strict";var m=y("color-rgba"),v=y("clamp"),b=y("dtype");Q.exports=function(h,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var o,n=new(b(e))(4),r="uint8"!==e&&"uint8_clamped"!==e;return h.length&&"string"!=typeof h||((h=m(h))[0]/=255,h[1]/=255,h[2]/=255),(o=h)instanceof Uint8Array||o instanceof Uint8ClampedArray||Array.isArray(o)&&(o[0]>1||0===o[0])&&(o[1]>1||0===o[1])&&(o[2]>1||0===o[2])&&(!o[3]||o[3]>1)?(n[0]=h[0],n[1]=h[1],n[2]=h[2],n[3]=null!=h[3]?h[3]:255,r&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(r?(n[0]=h[0],n[1]=h[1],n[2]=h[2],n[3]=null!=h[3]?h[3]:1):(n[0]=v(Math.floor(255*h[0]),0,255),n[1]=v(Math.floor(255*h[1]),0,255),n[2]=v(Math.floor(255*h[2]),0,255),n[3]=null==h[3]?255:v(Math.floor(255*h[3]),0,255)),n)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(y,Q,K){(function(m){(function(){"use strict";var v=y("color-name"),b=y("is-plain-obj"),h=y("defined");Q.exports=function(n){var r,o,t=[],d=1;if("string"==typeof n)if(v[n])t=v[n].slice(),o="rgb";else if("transparent"===n)d=0,o="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var a=(c=n.slice(1)).length;d=1,a<=4?(t=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],4===a&&(d=parseInt(c[3]+c[3],16)/255)):(t=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],8===a&&(d=parseInt(c[6]+c[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),o="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var i=r[1],s="rgb"===i,c=i.replace(/a$/,"");o=c,a="cmyk"===c?4:"gray"===c?1:3,t=r[2].trim().split(/\s*,\s*/).map(function(p,g){if(/%$/.test(p))return g===a?parseFloat(p)/100:"rgb"===c?255*parseFloat(p)/100:parseFloat(p);if("h"===c[g]){if(/deg$/.test(p))return parseFloat(p);if(void 0!==e[p])return e[p]}return parseFloat(p)}),i===c&&t.push(1),d=s||void 0===t[a]?1:t[a],t=t.slice(0,a)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),o=n.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(n))if(b(n)){var l=h(n.r,n.red,n.R,null);null!==l?(o="rgb",t=[l,h(n.g,n.green,n.G),h(n.b,n.blue,n.B)]):(o="hsl",t=[h(n.h,n.hue,n.H),h(n.s,n.saturation,n.S),h(n.l,n.lightness,n.L,n.b,n.brightness)]),d=h(n.a,n.alpha,n.opacity,1),null!=n.opacity&&(d/=100)}else(Array.isArray(n)||m.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(t=[n[0],n[1],n[2]],o="rgb",d=4===n.length?n[3]:1);else o="rgb",t=[n>>>16,(65280&n)>>>8,255&n];return{space:o,values:t,alpha:d}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(y,Q,K){"use strict";var m=y("color-parse"),v=y("color-space/hsl"),b=y("clamp");Q.exports=function(h){var e,n=m(h);return n.space?((e=Array(3))[0]=b(n.values[0],0,255),e[1]=b(n.values[1],0,255),e[2]=b(n.values[2],0,255),"h"===n.space[0]&&(e=v.rgb(e)),e.push(b(n.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(y,Q,K){"use strict";var m=y("./rgb");Q.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(v){var b,h,e,n,r,o=v[0]/360,t=v[1]/100,d=v[2]/100;if(0===t)return[r=255*d,r,r];b=2*d-(h=d<.5?d*(1+t):d+t-d*t),n=[0,0,0];for(var a=0;a<3;a++)(e=o+1/3*-(a-1))<0?e++:e>1&&e--,n[a]=255*(r=6*e<1?b+6*(h-b)*e:2*e<1?h:3*e<2?b+(h-b)*(2/3-e)*6:b);return n}},m.hsl=function(v){var b,h,e=v[0]/255,n=v[1]/255,r=v[2]/255,o=Math.min(e,n,r),t=Math.max(e,n,r),d=t-o;return t===o?b=0:e===t?b=(n-r)/d:n===t?b=2+(r-e)/d:r===t&&(b=4+(e-n)/d),(b=Math.min(60*b,360))<0&&(b+=360),h=(o+t)/2,[b,100*(t===o?0:h<=.5?d/(t+o):d/(2-t-o)),100*h]}},{"./rgb":93}],93:[function(y,Q,K){"use strict";Q.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(y,Q,K){Q.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(y,Q,K){Q.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(y,Q,K){Q.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(y,Q,K){Q.exports=["normal","italic","oblique"]},{}],98:[function(y,Q,K){Q.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(y,Q,K){"use strict";Q.exports={parse:y("./parse"),stringify:y("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(y,Q,K){"use strict";var m=y("css-font-size-keywords");Q.exports={isSize:function(v){return/^[\d\.]/.test(v)||-1!==v.indexOf("/")||-1!==m.indexOf(v)}}},{"css-font-size-keywords":95}],101:[function(y,Q,K){"use strict";var m=y("unquote"),v=y("css-global-keywords"),b=y("css-system-font-keywords"),h=y("css-font-weight-keywords"),e=y("css-font-style-keywords"),n=y("css-font-stretch-keywords"),r=y("string-split-by"),o=y("./lib/util").isSize;Q.exports=d;var t=d.cache={};function d(i){if("string"!=typeof i)throw new Error("Font argument must be a string.");if(t[i])return t[i];if(""===i)throw new Error("Cannot parse an empty string.");if(-1!==b.indexOf(i))return t[i]={system:i};for(var s,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},l=r(i,/\s+/);s=l.shift();){if(-1!==v.indexOf(s))return["style","variant","weight","stretch"].forEach(function(g){c[g]=s}),t[i]=c;if(-1===e.indexOf(s))if("normal"!==s&&"small-caps"!==s)if(-1===n.indexOf(s)){if(-1===h.indexOf(s)){if(o(s)){var p=r(s,"/");if(c.size=p[0],null!=p[1]?c.lineHeight=a(p[1]):"/"===l[0]&&(l.shift(),c.lineHeight=a(l.shift())),!l.length)throw new Error("Missing required font-family.");return c.family=r(l.join(" "),/\s*,\s*/).map(m),t[i]=c}throw new Error("Unknown or unsupported font token: "+s)}c.weight=s}else c.stretch=s;else c.variant=s;else c.style=s}throw new Error("Missing required font-size.")}function a(i){var s=parseFloat(i);return s.toString()===i?s:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(y,Q,K){"use strict";var m=y("pick-by-alias"),v=y("./lib/util").isSize,b=s(y("css-global-keywords")),h=s(y("css-system-font-keywords")),e=s(y("css-font-weight-keywords")),n=s(y("css-font-style-keywords")),r=s(y("css-font-stretch-keywords")),o={normal:1,"small-caps":1},t={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},a="serif";function i(c,l){if(c&&!l[c]&&!b[c])throw Error("Unknown keyword `"+c+"`");return c}function s(c){for(var l={},p=0;p<c.length;p++)l[c[p]]=1;return l}Q.exports=function(c){if((c=m(c,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return c.system&&i(c.system,h),c.system;if(i(c.style,n),i(c.variant,o),i(c.weight,e),i(c.stretch,r),null==c.size&&(c.size="1rem"),"number"==typeof c.size&&(c.size+="px"),!v)throw Error("Bad size value `"+c.size+"`");c.family||(c.family=a),Array.isArray(c.family)&&(c.family.length||(c.family=[a]),c.family=c.family.map(function(p){return t[p]?p:'"'+p+'"'}).join(", "));var l=[];return l.push(c.style),c.variant!==c.style&&l.push(c.variant),c.weight!==c.variant&&c.weight!==c.style&&l.push(c.weight),c.stretch!==c.weight&&c.stretch!==c.variant&&c.stretch!==c.style&&l.push(c.stretch),l.push(c.size+(null==c.lineHeight||"normal"===c.lineHeight||c.lineHeight+""=="1"?"":"/"+c.lineHeight)),l.push(c.family),l.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(y,Q,K){Q.exports=["inherit","initial","unset"]},{}],104:[function(y,Q,K){Q.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(y,Q,K){"use strict";var m,v=y("type/value/is"),b=y("type/value/ensure"),h=y("type/plain-function/ensure"),e=y("es5-ext/object/copy"),n=y("es5-ext/object/normalize-options"),r=y("es5-ext/object/map"),o=Function.prototype.bind,t=Object.defineProperty,d=Object.prototype.hasOwnProperty;m=function(a,i,s){var c,l=b(i)&&h(i.value);return delete(c=e(i)).writable,delete c.value,c.get=function(){return!s.overwriteDefinition&&d.call(this,a)?l:(i.value=o.call(l,s.resolveContext?s.resolveContext(this):this),t(this,a,i),this[a])},c},Q.exports=function(a){var i=n(arguments[1]);return v(i.resolveContext)&&h(i.resolveContext),r(a,function(s,c){return m(c,s,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(y,Q,K){"use strict";var m=y("type/value/is"),v=y("type/plain-function/is"),b=y("es5-ext/object/assign"),h=y("es5-ext/object/normalize-options"),e=y("es5-ext/string/#/contains");(Q.exports=function(n,r){var o,t,d,a,i;return arguments.length<2||"string"!=typeof n?(a=r,r=n,n=null):a=arguments[2],m(n)?(o=e.call(n,"c"),t=e.call(n,"e"),d=e.call(n,"w")):(o=d=!0,t=!1),i={value:r,configurable:o,enumerable:t,writable:d},a?b(h(a),i):i}).gs=function(n,r,o){var t,d,a,i;return"string"!=typeof n?(a=o,o=r,r=n,n=null):a=arguments[3],m(r)?v(r)?m(o)?v(o)||(a=o,o=void 0):o=void 0:(a=r,r=o=void 0):r=void 0,m(n)?(t=e.call(n,"c"),d=e.call(n,"e")):(t=!0,d=!1),i={get:r,set:o,configurable:t,enumerable:d},a?b(h(a),i):i}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(y,Q,K){var v;v=function(m){"use strict";function v(P,S){return P<S?-1:P>S?1:P>=S?0:NaN}function b(P){var S;return 1===P.length&&(S=P,P=function(E,D){return v(S(E),D)}),{left:function(E,D,z,N){for(null==z&&(z=0),null==N&&(N=E.length);z<N;){var V=z+N>>>1;P(E[V],D)<0?z=V+1:N=V}return z},right:function(E,D,z,N){for(null==z&&(z=0),null==N&&(N=E.length);z<N;){var V=z+N>>>1;P(E[V],D)>0?N=V:z=V+1}return z}}}var h=b(v),e=h.right,n=h.left;function r(P,S){return[P,S]}function o(P){return null===P?NaN:+P}function t(P,S){var E,D,z=P.length,N=0,V=-1,X=0,J=0;if(null==S)for(;++V<z;)isNaN(E=o(P[V]))||(J+=(D=E-X)*(E-(X+=D/++N)));else for(;++V<z;)isNaN(E=o(S(P[V],V,P)))||(J+=(D=E-X)*(E-(X+=D/++N)));if(N>1)return J/(N-1)}function d(P,S){var E=t(P,S);return E&&Math.sqrt(E)}function a(P,S){var E,D,z,N=P.length,V=-1;if(null==S){for(;++V<N;)if(null!=(E=P[V])&&E>=E)for(D=z=E;++V<N;)null!=(E=P[V])&&(D>E&&(D=E),z<E&&(z=E))}else for(;++V<N;)if(null!=(E=S(P[V],V,P))&&E>=E)for(D=z=E;++V<N;)null!=(E=S(P[V],V,P))&&(D>E&&(D=E),z<E&&(z=E));return[D,z]}var i=Array.prototype,s=i.slice,c=i.map;function l(P){return function(){return P}}function p(P){return P}function g(P,S,E){P=+P,S=+S,E=(z=arguments.length)<2?(S=P,P=0,1):z<3?1:+E;for(var D=-1,z=0|Math.max(0,Math.ceil((S-P)/E)),N=new Array(z);++D<z;)N[D]=P+D*E;return N}var u=Math.sqrt(50),x=Math.sqrt(10),f=Math.sqrt(2);function T(P,S,E){var D=(S-P)/Math.max(0,E),z=Math.floor(Math.log(D)/Math.LN10),N=D/Math.pow(10,z);return z>=0?(N>=u?10:N>=x?5:N>=f?2:1)*Math.pow(10,z):-Math.pow(10,-z)/(N>=u?10:N>=x?5:N>=f?2:1)}function _(P,S,E){var D=Math.abs(S-P)/Math.max(0,E),z=Math.pow(10,Math.floor(Math.log(D)/Math.LN10)),N=D/z;return N>=u?z*=10:N>=x?z*=5:N>=f&&(z*=2),S<P?-z:z}function k(P){return Math.ceil(Math.log(P.length)/Math.LN2)+1}function w(P,S,E){if(null==E&&(E=o),D=P.length){if((S=+S)<=0||D<2)return+E(P[0],0,P);if(S>=1)return+E(P[D-1],D-1,P);var D,z=(D-1)*S,N=Math.floor(z),V=+E(P[N],N,P);return V+(+E(P[N+1],N+1,P)-V)*(z-N)}}function C(P,S){var E,D,z=P.length,N=-1;if(null==S){for(;++N<z;)if(null!=(E=P[N])&&E>=E)for(D=E;++N<z;)null!=(E=P[N])&&D>E&&(D=E)}else for(;++N<z;)if(null!=(E=S(P[N],N,P))&&E>=E)for(D=E;++N<z;)null!=(E=S(P[N],N,P))&&D>E&&(D=E);return D}function A(P){if(!(z=P.length))return[];for(var S=-1,E=C(P,O),D=new Array(E);++S<E;)for(var z,N=-1,V=D[S]=new Array(z);++N<z;)V[N]=P[N][S];return D}function O(P){return P.length}m.bisect=e,m.bisectRight=e,m.bisectLeft=n,m.ascending=v,m.bisector=b,m.cross=function(P,S,E){var D,z,N,V,X=P.length,J=S.length,G=new Array(X*J);for(null==E&&(E=r),D=N=0;D<X;++D)for(V=P[D],z=0;z<J;++z,++N)G[N]=E(V,S[z]);return G},m.descending=function(P,S){return S<P?-1:S>P?1:S>=P?0:NaN},m.deviation=d,m.extent=a,m.histogram=function(){var P=p,S=a,E=k;function D(z){var N,V,X=z.length,J=new Array(X);for(N=0;N<X;++N)J[N]=P(z[N],N,z);var G=S(J),Z=G[0],re=G[1],j=E(J,Z,re);Array.isArray(j)||(j=_(Z,re,j),j=g(Math.ceil(Z/j)*j,re,j));for(var B=j.length;j[0]<=Z;)j.shift(),--B;for(;j[B-1]>re;)j.pop(),--B;var H,ee=new Array(B+1);for(N=0;N<=B;++N)(H=ee[N]=[]).x0=N>0?j[N-1]:Z,H.x1=N<B?j[N]:re;for(N=0;N<X;++N)Z<=(V=J[N])&&V<=re&&ee[e(j,V,0,B)].push(z[N]);return ee}return D.value=function(z){return arguments.length?(P="function"==typeof z?z:l(z),D):P},D.domain=function(z){return arguments.length?(S="function"==typeof z?z:l([z[0],z[1]]),D):S},D.thresholds=function(z){return arguments.length?(E="function"==typeof z?z:Array.isArray(z)?l(s.call(z)):l(z),D):E},D},m.thresholdFreedmanDiaconis=function(P,S,E){return P=c.call(P,o).sort(v),Math.ceil((E-S)/(2*(w(P,.75)-w(P,.25))*Math.pow(P.length,-1/3)))},m.thresholdScott=function(P,S,E){return Math.ceil((E-S)/(3.5*d(P)*Math.pow(P.length,-1/3)))},m.thresholdSturges=k,m.max=function(P,S){var E,D,z=P.length,N=-1;if(null==S){for(;++N<z;)if(null!=(E=P[N])&&E>=E)for(D=E;++N<z;)null!=(E=P[N])&&E>D&&(D=E)}else for(;++N<z;)if(null!=(E=S(P[N],N,P))&&E>=E)for(D=E;++N<z;)null!=(E=S(P[N],N,P))&&E>D&&(D=E);return D},m.mean=function(P,S){var E,D=P.length,z=D,N=-1,V=0;if(null==S)for(;++N<D;)isNaN(E=o(P[N]))?--z:V+=E;else for(;++N<D;)isNaN(E=o(S(P[N],N,P)))?--z:V+=E;if(z)return V/z},m.median=function(P,S){var E,D=P.length,z=-1,N=[];if(null==S)for(;++z<D;)isNaN(E=o(P[z]))||N.push(E);else for(;++z<D;)isNaN(E=o(S(P[z],z,P)))||N.push(E);return w(N.sort(v),.5)},m.merge=function(P){for(var S,E,D,z=P.length,N=-1,V=0;++N<z;)V+=P[N].length;for(E=new Array(V);--z>=0;)for(S=(D=P[z]).length;--S>=0;)E[--V]=D[S];return E},m.min=C,m.pairs=function(P,S){null==S&&(S=r);for(var E=0,D=P.length-1,z=P[0],N=new Array(D<0?0:D);E<D;)N[E]=S(z,z=P[++E]);return N},m.permute=function(P,S){for(var E=S.length,D=new Array(E);E--;)D[E]=P[S[E]];return D},m.quantile=w,m.range=g,m.scan=function(P,S){if(E=P.length){var E,D,z=0,N=0,V=P[N];for(null==S&&(S=v);++z<E;)(S(D=P[z],V)<0||0!==S(V,V))&&(V=D,N=z);return 0===S(V,V)?N:void 0}},m.shuffle=function(P,S,E){for(var D,z,N=(E??P.length)-(S=null==S?0:+S);N;)z=Math.random()*N--|0,D=P[N+S],P[N+S]=P[z+S],P[z+S]=D;return P},m.sum=function(P,S){var E,D=P.length,z=-1,N=0;if(null==S)for(;++z<D;)(E=+P[z])&&(N+=E);else for(;++z<D;)(E=+S(P[z],z,P))&&(N+=E);return N},m.ticks=function(P,S,E){var D,z,N,V,X=-1;if(E=+E,(P=+P)==(S=+S)&&E>0)return[P];if((D=S<P)&&(z=P,P=S,S=z),0===(V=T(P,S,E))||!isFinite(V))return[];if(V>0)for(P=Math.ceil(P/V),S=Math.floor(S/V),N=new Array(z=Math.ceil(S-P+1));++X<z;)N[X]=(P+X)*V;else for(P=Math.floor(P*V),S=Math.ceil(S*V),N=new Array(z=Math.ceil(P-S+1));++X<z;)N[X]=(P-X)/V;return D&&N.reverse(),N},m.tickIncrement=T,m.tickStep=_,m.transpose=A,m.variance=t,m.zip=function(){return A(arguments)},Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:this.d3=this.d3||{})},{}],108:[function(y,Q,K){var v;v=function(m){"use strict";function v(){}function b(a,i){var s=new v;if(a instanceof v)a.each(function(u,x){s.set(x,u)});else if(Array.isArray(a)){var c,l=-1,p=a.length;if(null==i)for(;++l<p;)s.set(l,a[l]);else for(;++l<p;)s.set(i(c=a[l],l,a),c)}else if(a)for(var g in a)s.set(g,a[g]);return s}function h(){return{}}function e(a,i,s){a[i]=s}function n(){return b()}function r(a,i,s){a.set(i,s)}function o(){}v.prototype=b.prototype={constructor:v,has:function(a){return"$"+a in this},get:function(a){return this["$"+a]},set:function(a,i){return this["$"+a]=i,this},remove:function(a){var i="$"+a;return i in this&&delete this[i]},clear:function(){for(var a in this)"$"===a[0]&&delete this[a]},keys:function(){var a=[];for(var i in this)"$"===i[0]&&a.push(i.slice(1));return a},values:function(){var a=[];for(var i in this)"$"===i[0]&&a.push(this[i]);return a},entries:function(){var a=[];for(var i in this)"$"===i[0]&&a.push({key:i.slice(1),value:this[i]});return a},size:function(){var a=0;for(var i in this)"$"===i[0]&&++a;return a},empty:function(){for(var a in this)if("$"===a[0])return!1;return!0},each:function(a){for(var i in this)"$"===i[0]&&a(this[i],i.slice(1),this)}};var t=b.prototype;function d(a,i){var s=new o;if(a instanceof o)a.each(function(p){s.add(p)});else if(a){var c=-1,l=a.length;if(null==i)for(;++c<l;)s.add(a[c]);else for(;++c<l;)s.add(i(a[c],c,a))}return s}o.prototype=d.prototype={constructor:o,has:t.has,add:function(a){return this["$"+(a+="")]=a,this},remove:t.remove,clear:t.clear,values:t.keys,size:t.size,empty:t.empty,each:t.each},m.nest=function(){var a,i,s,c=[],l=[];function p(g,u,x,f){if(u>=c.length)return null!=a&&g.sort(a),null!=i?i(g):g;for(var T,_,k,w=-1,C=g.length,A=c[u++],O=b(),P=x();++w<C;)(k=O.get(T=A(_=g[w])+""))?k.push(_):O.set(T,[_]);return O.each(function(S,E){f(P,E,p(S,u,x,f))}),P}return s={object:function(g){return p(g,0,h,e)},map:function(g){return p(g,0,n,r)},entries:function(g){return function u(x,f){if(++f>c.length)return x;var T,_=l[f-1];return null!=i&&f>=c.length?T=x.entries():(T=[],x.each(function(k,w){T.push({key:w,values:u(k,f)})})),null!=_?T.sort(function(k,w){return _(k.key,w.key)}):T}(p(g,0,n,r),0)},key:function(g){return c.push(g),s},sortKeys:function(g){return l[c.length-1]=g,s},sortValues:function(g){return a=g,s},rollup:function(g){return i=g,s}}},m.set=d,m.map=b,m.keys=function(a){var i=[];for(var s in a)i.push(s);return i},m.values=function(a){var i=[];for(var s in a)i.push(a[s]);return i},m.entries=function(a){var i=[];for(var s in a)i.push({key:s,value:a[s]});return i},Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:this.d3=this.d3||{})},{}],109:[function(y,Q,K){var m,v;m=this,v=function(m){"use strict";function v(he,me,Se){he.prototype=me.prototype=Se,Se.constructor=he}function b(he,me){var Se=Object.create(he.prototype);for(var Me in me)Se[Me]=me[Me];return Se}function h(){}var e="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,t=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),d=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),a=new RegExp("^rgba\\("+[e,e,e,n]+"\\)$"),i=new RegExp("^rgba\\("+[r,r,r,n]+"\\)$"),s=new RegExp("^hsl\\("+[n,r,r]+"\\)$"),c=new RegExp("^hsla\\("+[n,r,r,n]+"\\)$"),l={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function p(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function u(he){var me,Se;return he=(he+"").trim().toLowerCase(),(me=o.exec(he))?(Se=me[1].length,me=parseInt(me[1],16),6===Se?x(me):3===Se?new k(me>>8&15|me>>4&240,me>>4&15|240&me,(15&me)<<4|15&me,1):8===Se?f(me>>24&255,me>>16&255,me>>8&255,(255&me)/255):4===Se?f(me>>12&15|me>>8&240,me>>8&15|me>>4&240,me>>4&15|240&me,((15&me)<<4|15&me)/255):null):(me=t.exec(he))?new k(me[1],me[2],me[3],1):(me=d.exec(he))?new k(255*me[1]/100,255*me[2]/100,255*me[3]/100,1):(me=a.exec(he))?f(me[1],me[2],me[3],me[4]):(me=i.exec(he))?f(255*me[1]/100,255*me[2]/100,255*me[3]/100,me[4]):(me=s.exec(he))?O(me[1],me[2]/100,me[3]/100,1):(me=c.exec(he))?O(me[1],me[2]/100,me[3]/100,me[4]):l.hasOwnProperty(he)?x(l[he]):"transparent"===he?new k(NaN,NaN,NaN,0):null}function x(he){return new k(he>>16&255,he>>8&255,255&he,1)}function f(he,me,Se,Me){return Me<=0&&(he=me=Se=NaN),new k(he,me,Se,Me)}function T(he){return he instanceof h||(he=u(he)),he?new k((he=he.rgb()).r,he.g,he.b,he.opacity):new k}function _(he,me,Se,Me){return 1===arguments.length?T(he):new k(he,me,Se,Me??1)}function k(he,me,Se,Me){this.r=+he,this.g=+me,this.b=+Se,this.opacity=+Me}function w(){return"#"+A(this.r)+A(this.g)+A(this.b)}function C(){var he=this.opacity;return(1===(he=isNaN(he)?1:Math.max(0,Math.min(1,he)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===he?")":", "+he+")")}function A(he){return((he=Math.max(0,Math.min(255,Math.round(he)||0)))<16?"0":"")+he.toString(16)}function O(he,me,Se,Me){return Me<=0?he=me=Se=NaN:Se<=0||Se>=1?he=me=NaN:me<=0&&(he=NaN),new E(he,me,Se,Me)}function P(he){if(he instanceof E)return new E(he.h,he.s,he.l,he.opacity);if(he instanceof h||(he=u(he)),!he)return new E;if(he instanceof E)return he;var me=(he=he.rgb()).r/255,Se=he.g/255,Me=he.b/255,Ie=Math.min(me,Se,Me),Fe=Math.max(me,Se,Me),Ne=NaN,De=Fe-Ie,$e=(Fe+Ie)/2;return De?(Ne=me===Fe?(Se-Me)/De+6*(Se<Me):Se===Fe?(Me-me)/De+2:(me-Se)/De+4,De/=$e<.5?Fe+Ie:2-Fe-Ie,Ne*=60):De=$e>0&&$e<1?0:Ne,new E(Ne,De,$e,he.opacity)}function S(he,me,Se,Me){return 1===arguments.length?P(he):new E(he,me,Se,Me??1)}function E(he,me,Se,Me){this.h=+he,this.s=+me,this.l=+Se,this.opacity=+Me}function D(he,me,Se){return 255*(he<60?me+(Se-me)*he/60:he<180?Se:he<240?me+(Se-me)*(240-he)/60:me)}v(h,u,{copy:function(he){return Object.assign(new this.constructor,this,he)},displayable:function(){return this.rgb().displayable()},hex:p,formatHex:p,formatHsl:function(){return P(this).formatHsl()},formatRgb:g,toString:g}),v(k,_,b(h,{brighter:function(he){return he=null==he?1/.7:Math.pow(1/.7,he),new k(this.r*he,this.g*he,this.b*he,this.opacity)},darker:function(he){return he=null==he?.7:Math.pow(.7,he),new k(this.r*he,this.g*he,this.b*he,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:w,formatHex:w,formatRgb:C,toString:C})),v(E,S,b(h,{brighter:function(he){return he=null==he?1/.7:Math.pow(1/.7,he),new E(this.h,this.s,this.l*he,this.opacity)},darker:function(he){return he=null==he?.7:Math.pow(.7,he),new E(this.h,this.s,this.l*he,this.opacity)},rgb:function(){var he=this.h%360+360*(this.h<0),me=isNaN(he)||isNaN(this.s)?0:this.s,Se=this.l,Me=Se+(Se<.5?Se:1-Se)*me,Ie=2*Se-Me;return new k(D(he>=240?he-240:he+120,Ie,Me),D(he,Ie,Me),D(he<120?he+240:he-120,Ie,Me),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var he=this.opacity;return(1===(he=isNaN(he)?1:Math.max(0,Math.min(1,he)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===he?")":", "+he+")")}}));var z=Math.PI/180,N=180/Math.PI,V=6/29,X=3*V*V;function J(he){if(he instanceof Z)return new Z(he.l,he.a,he.b,he.opacity);if(he instanceof $)return q(he);he instanceof k||(he=T(he));var me,Se,Me=H(he.r),Ie=H(he.g),Fe=H(he.b),Ne=re((.2225045*Me+.7168786*Ie+.0606169*Fe)/1);return Me===Ie&&Ie===Fe?me=Se=Ne:(me=re((.4360747*Me+.3850649*Ie+.1430804*Fe)/.96422),Se=re((.0139322*Me+.0971045*Ie+.7141733*Fe)/.82521)),new Z(116*Ne-16,500*(me-Ne),200*(Ne-Se),he.opacity)}function G(he,me,Se,Me){return 1===arguments.length?J(he):new Z(he,me,Se,Me??1)}function Z(he,me,Se,Me){this.l=+he,this.a=+me,this.b=+Se,this.opacity=+Me}function re(he){return he>.008856451679035631?Math.pow(he,1/3):he/X+4/29}function j(he){return he>V?he*he*he:X*(he-4/29)}function B(he){return 255*(he<=.0031308?12.92*he:1.055*Math.pow(he,1/2.4)-.055)}function H(he){return(he/=255)<=.04045?he/12.92:Math.pow((he+.055)/1.055,2.4)}function ee(he){if(he instanceof $)return new $(he.h,he.c,he.l,he.opacity);if(he instanceof Z||(he=J(he)),0===he.a&&0===he.b)return new $(NaN,0<he.l&&he.l<100?0:NaN,he.l,he.opacity);var me=Math.atan2(he.b,he.a)*N;return new $(me<0?me+360:me,Math.sqrt(he.a*he.a+he.b*he.b),he.l,he.opacity)}function U(he,me,Se,Me){return 1===arguments.length?ee(he):new $(he,me,Se,Me??1)}function $(he,me,Se,Me){this.h=+he,this.c=+me,this.l=+Se,this.opacity=+Me}function q(he){if(isNaN(he.h))return new Z(he.l,0,0,he.opacity);var me=he.h*z;return new Z(he.l,Math.cos(me)*he.c,Math.sin(me)*he.c,he.opacity)}v(Z,G,b(h,{brighter:function(he){return new Z(this.l+18*(he??1),this.a,this.b,this.opacity)},darker:function(he){return new Z(this.l-18*(he??1),this.a,this.b,this.opacity)},rgb:function(){var he=(this.l+16)/116,me=isNaN(this.a)?he:he+this.a/500,Se=isNaN(this.b)?he:he-this.b/200;return new k(B(3.1338561*(me=.96422*j(me))-1.6168667*(he=1*j(he))-.4906146*(Se=.82521*j(Se))),B(-.9787684*me+1.9161415*he+.033454*Se),B(.0719453*me-.2289914*he+1.4052427*Se),this.opacity)}})),v($,U,b(h,{brighter:function(he){return new $(this.h,this.c,this.l+18*(he??1),this.opacity)},darker:function(he){return new $(this.h,this.c,this.l-18*(he??1),this.opacity)},rgb:function(){return q(this).rgb()}}));var ne=1.78277,se=-.29227,ie=-.90649,ue=1.97294,le=ue*ie,de=ue*ne,be=ne*se- -.14861*ie;function _e(he){if(he instanceof Ee)return new Ee(he.h,he.s,he.l,he.opacity);he instanceof k||(he=T(he));var Se=he.g/255,Me=he.b/255,Ie=(be*Me+le*(he.r/255)-de*Se)/(be+le-de),Fe=Me-Ie,Ne=(ue*(Se-Ie)-se*Fe)/ie,De=Math.sqrt(Ne*Ne+Fe*Fe)/(ue*Ie*(1-Ie)),$e=De?Math.atan2(Ne,Fe)*N-120:NaN;return new Ee($e<0?$e+360:$e,De,Ie,he.opacity)}function xe(he,me,Se,Me){return 1===arguments.length?_e(he):new Ee(he,me,Se,Me??1)}function Ee(he,me,Se,Me){this.h=+he,this.s=+me,this.l=+Se,this.opacity=+Me}v(Ee,xe,b(h,{brighter:function(he){return he=null==he?1/.7:Math.pow(1/.7,he),new Ee(this.h,this.s,this.l*he,this.opacity)},darker:function(he){return he=null==he?.7:Math.pow(.7,he),new Ee(this.h,this.s,this.l*he,this.opacity)},rgb:function(){var he=isNaN(this.h)?0:(this.h+120)*z,me=+this.l,Se=isNaN(this.s)?0:this.s*me*(1-me),Me=Math.cos(he),Ie=Math.sin(he);return new k(255*(me+Se*(-.14861*Me+ne*Ie)),255*(me+Se*(se*Me+ie*Ie)),255*(me+Se*(ue*Me)),this.opacity)}})),m.color=u,m.cubehelix=xe,m.gray=function(he,me){return new Z(he,0,0,me??1)},m.hcl=U,m.hsl=S,m.lab=G,m.lch=function(he,me,Se,Me){return 1===arguments.length?ee(he):new $(Se,me,he,Me??1)},m.rgb=_,Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:(m=m||self).d3=m.d3||{})},{}],110:[function(y,Q,K){var m,v;m=this,v=function(m){"use strict";var v={value:function(){}};function b(){for(var o,t=0,d=arguments.length,a={};t<d;++t){if(!(o=arguments[t]+"")||o in a||/[\s.]/.test(o))throw new Error("illegal type: "+o);a[o]=[]}return new h(a)}function h(o){this._=o}function e(o,t){return o.trim().split(/^|\s+/).map(function(d){var a="",i=d.indexOf(".");if(i>=0&&(a=d.slice(i+1),d=d.slice(0,i)),d&&!t.hasOwnProperty(d))throw new Error("unknown type: "+d);return{type:d,name:a}})}function n(o,t){for(var d,a=0,i=o.length;a<i;++a)if((d=o[a]).name===t)return d.value}function r(o,t,d){for(var a=0,i=o.length;a<i;++a)if(o[a].name===t){o[a]=v,o=o.slice(0,a).concat(o.slice(a+1));break}return null!=d&&o.push({name:t,value:d}),o}h.prototype=b.prototype={constructor:h,on:function(o,t){var d,a=this._,i=e(o+"",a),s=-1,c=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<c;)if(d=(o=i[s]).type)a[d]=r(a[d],o.name,t);else if(null==t)for(d in a)a[d]=r(a[d],o.name,null);return this}for(;++s<c;)if((d=(o=i[s]).type)&&(d=n(a[d],o.name)))return d},copy:function(){var o={},t=this._;for(var d in t)o[d]=t[d].slice();return new h(o)},call:function(o,t){if((d=arguments.length-2)>0)for(var d,a,i=new Array(d),s=0;s<d;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(s=0,d=(a=this._[o]).length;s<d;++s)a[s].value.apply(t,i)},apply:function(o,t,d){if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(var a=this._[o],i=0,s=a.length;i<s;++i)a[i].value.apply(t,d)}},m.dispatch=b,Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:(m=m||self).d3=m.d3||{})},{}],111:[function(y,Q,K){var m,v;m=this,v=function(m,v,b,h,e){"use strict";function n(l){return function(){return l}}function r(){return 1e-6*(Math.random()-.5)}function o(l){return l.x+l.vx}function t(l){return l.y+l.vy}function d(l){return l.index}function a(l,p){var g=l.get(p);if(!g)throw new Error("missing: "+p);return g}function i(l){return l.x}function s(l){return l.y}var c=Math.PI*(3-Math.sqrt(5));m.forceCenter=function(l,p){var g;function u(){var x,f,T=g.length,_=0,k=0;for(x=0;x<T;++x)_+=(f=g[x]).x,k+=f.y;for(_=_/T-l,k=k/T-p,x=0;x<T;++x)(f=g[x]).x-=_,f.y-=k}return null==l&&(l=0),null==p&&(p=0),u.initialize=function(x){g=x},u.x=function(x){return arguments.length?(l=+x,u):l},u.y=function(x){return arguments.length?(p=+x,u):p},u},m.forceCollide=function(l){var p,g,u=1,x=1;function f(){for(var k,w,C,A,O,P,S,E=p.length,D=0;D<x;++D)for(w=v.quadtree(p,o,t).visitAfter(T),k=0;k<E;++k)S=(P=g[(C=p[k]).index])*P,A=C.x+C.vx,O=C.y+C.vy,w.visit(z);function z(N,V,X,J,G){var Z=N.data,re=N.r,j=P+re;if(!Z)return V>A+j||J<A-j||X>O+j||G<O-j;if(Z.index>C.index){var B=A-Z.x-Z.vx,H=O-Z.y-Z.vy,ee=B*B+H*H;ee<j*j&&(0===B&&(ee+=(B=r())*B),0===H&&(ee+=(H=r())*H),ee=(j-(ee=Math.sqrt(ee)))/ee*u,C.vx+=(B*=ee)*(j=(re*=re)/(S+re)),C.vy+=(H*=ee)*j,Z.vx-=B*(j=1-j),Z.vy-=H*j)}}}function T(k){if(k.data)return k.r=g[k.data.index];for(var w=k.r=0;w<4;++w)k[w]&&k[w].r>k.r&&(k.r=k[w].r)}function _(){if(p){var k,w,C=p.length;for(g=new Array(C),k=0;k<C;++k)g[(w=p[k]).index]=+l(w,k,p)}}return"function"!=typeof l&&(l=n(null==l?1:+l)),f.initialize=function(k){p=k,_()},f.iterations=function(k){return arguments.length?(x=+k,f):x},f.strength=function(k){return arguments.length?(u=+k,f):u},f.radius=function(k){return arguments.length?(l="function"==typeof k?k:n(+k),_(),f):l},f},m.forceLink=function(l){var p,g,u,x,f,T=d,_=function(S){return 1/Math.min(x[S.source.index],x[S.target.index])},k=n(30),w=1;function C(S){for(var E=0,D=l.length;E<w;++E)for(var z,N,V,X,J,G,Z,re=0;re<D;++re)N=(z=l[re]).source,X=(V=z.target).x+V.vx-N.x-N.vx||r(),J=V.y+V.vy-N.y-N.vy||r(),X*=G=((G=Math.sqrt(X*X+J*J))-g[re])/G*S*p[re],J*=G,V.vx-=X*(Z=f[re]),V.vy-=J*Z,N.vx+=X*(Z=1-Z),N.vy+=J*Z}function A(){if(u){var S,E,D=u.length,z=l.length,N=b.map(u,T);for(S=0,x=new Array(D);S<z;++S)(E=l[S]).index=S,"object"!=typeof E.source&&(E.source=a(N,E.source)),"object"!=typeof E.target&&(E.target=a(N,E.target)),x[E.source.index]=(x[E.source.index]||0)+1,x[E.target.index]=(x[E.target.index]||0)+1;for(S=0,f=new Array(z);S<z;++S)f[S]=x[(E=l[S]).source.index]/(x[E.source.index]+x[E.target.index]);p=new Array(z),O(),g=new Array(z),P()}}function O(){if(u)for(var S=0,E=l.length;S<E;++S)p[S]=+_(l[S],S,l)}function P(){if(u)for(var S=0,E=l.length;S<E;++S)g[S]=+k(l[S],S,l)}return null==l&&(l=[]),C.initialize=function(S){u=S,A()},C.links=function(S){return arguments.length?(l=S,A(),C):l},C.id=function(S){return arguments.length?(T=S,C):T},C.iterations=function(S){return arguments.length?(w=+S,C):w},C.strength=function(S){return arguments.length?(_="function"==typeof S?S:n(+S),O(),C):_},C.distance=function(S){return arguments.length?(k="function"==typeof S?S:n(+S),P(),C):k},C},m.forceManyBody=function(){var l,p,g,u,x=n(-30),f=1,T=1/0,_=.81;function k(O){var P,S=l.length,E=v.quadtree(l,i,s).visitAfter(C);for(g=O,P=0;P<S;++P)p=l[P],E.visit(A)}function w(){if(l){var O,P,S=l.length;for(u=new Array(S),O=0;O<S;++O)u[(P=l[O]).index]=+x(P,O,l)}}function C(O){var P,S,E,D,z,N=0,V=0;if(O.length){for(E=D=z=0;z<4;++z)(P=O[z])&&(S=Math.abs(P.value))&&(N+=P.value,V+=S,E+=S*P.x,D+=S*P.y);O.x=E/V,O.y=D/V}else{(P=O).x=P.data.x,P.y=P.data.y;do{N+=u[P.data.index]}while(P=P.next)}O.value=N}function A(O,P,S,E){if(!O.value)return!0;var D=O.x-p.x,z=O.y-p.y,N=E-P,V=D*D+z*z;if(N*N/_<V)return V<T&&(0===D&&(V+=(D=r())*D),0===z&&(V+=(z=r())*z),V<f&&(V=Math.sqrt(f*V)),p.vx+=D*O.value*g/V,p.vy+=z*O.value*g/V),!0;if(!(O.length||V>=T)){(O.data!==p||O.next)&&(0===D&&(V+=(D=r())*D),0===z&&(V+=(z=r())*z),V<f&&(V=Math.sqrt(f*V)));do{O.data!==p&&(p.vx+=D*(N=u[O.data.index]*g/V),p.vy+=z*N)}while(O=O.next)}}return k.initialize=function(O){l=O,w()},k.strength=function(O){return arguments.length?(x="function"==typeof O?O:n(+O),w(),k):x},k.distanceMin=function(O){return arguments.length?(f=O*O,k):Math.sqrt(f)},k.distanceMax=function(O){return arguments.length?(T=O*O,k):Math.sqrt(T)},k.theta=function(O){return arguments.length?(_=O*O,k):Math.sqrt(_)},k},m.forceRadial=function(l,p,g){var u,x,f,T=n(.1);function _(w){for(var C=0,A=u.length;C<A;++C){var O=u[C],P=O.x-p||1e-6,S=O.y-g||1e-6,E=Math.sqrt(P*P+S*S),D=(f[C]-E)*x[C]*w/E;O.vx+=P*D,O.vy+=S*D}}function k(){if(u){var w,C=u.length;for(x=new Array(C),f=new Array(C),w=0;w<C;++w)f[w]=+l(u[w],w,u),x[w]=isNaN(f[w])?0:+T(u[w],w,u)}}return"function"!=typeof l&&(l=n(+l)),null==p&&(p=0),null==g&&(g=0),_.initialize=function(w){u=w,k()},_.strength=function(w){return arguments.length?(T="function"==typeof w?w:n(+w),k(),_):T},_.radius=function(w){return arguments.length?(l="function"==typeof w?w:n(+w),k(),_):l},_.x=function(w){return arguments.length?(p=+w,_):p},_.y=function(w){return arguments.length?(g=+w,_):g},_},m.forceSimulation=function(l){var p,g=1,u=.001,x=1-Math.pow(u,1/300),f=0,T=.6,_=b.map(),k=e.timer(C),w=h.dispatch("tick","end");function C(){A(),w.call("tick",p),g<u&&(k.stop(),w.call("end",p))}function A(S){var E,D,z=l.length;void 0===S&&(S=1);for(var N=0;N<S;++N)for(g+=(f-g)*x,_.each(function(V){V(g)}),E=0;E<z;++E)null==(D=l[E]).fx?D.x+=D.vx*=T:(D.x=D.fx,D.vx=0),null==D.fy?D.y+=D.vy*=T:(D.y=D.fy,D.vy=0);return p}function O(){for(var S,E=0,D=l.length;E<D;++E){if((S=l[E]).index=E,null!=S.fx&&(S.x=S.fx),null!=S.fy&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var z=10*Math.sqrt(E),N=E*c;S.x=z*Math.cos(N),S.y=z*Math.sin(N)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function P(S){return S.initialize&&S.initialize(l),S}return null==l&&(l=[]),O(),p={tick:A,restart:function(){return k.restart(C),p},stop:function(){return k.stop(),p},nodes:function(S){return arguments.length?(l=S,O(),_.each(P),p):l},alpha:function(S){return arguments.length?(g=+S,p):g},alphaMin:function(S){return arguments.length?(u=+S,p):u},alphaDecay:function(S){return arguments.length?(x=+S,p):+x},alphaTarget:function(S){return arguments.length?(f=+S,p):f},velocityDecay:function(S){return arguments.length?(T=1-S,p):1-T},force:function(S,E){return arguments.length>1?(null==E?_.remove(S):_.set(S,P(E)),p):_.get(S)},find:function(S,E,D){var z,N,V,X,J,G=0,Z=l.length;for(null==D?D=1/0:D*=D,G=0;G<Z;++G)(V=(z=S-(X=l[G]).x)*z+(N=E-X.y)*N)<D&&(J=X,D=V);return J},on:function(S,E){return arguments.length>1?(w.on(S,E),p):w.on(S)}}},m.forceX=function(l){var p,g,u,x=n(.1);function f(_){for(var k,w=0,C=p.length;w<C;++w)(k=p[w]).vx+=(u[w]-k.x)*g[w]*_}function T(){if(p){var _,k=p.length;for(g=new Array(k),u=new Array(k),_=0;_<k;++_)g[_]=isNaN(u[_]=+l(p[_],_,p))?0:+x(p[_],_,p)}}return"function"!=typeof l&&(l=n(null==l?0:+l)),f.initialize=function(_){p=_,T()},f.strength=function(_){return arguments.length?(x="function"==typeof _?_:n(+_),T(),f):x},f.x=function(_){return arguments.length?(l="function"==typeof _?_:n(+_),T(),f):l},f},m.forceY=function(l){var p,g,u,x=n(.1);function f(_){for(var k,w=0,C=p.length;w<C;++w)(k=p[w]).vy+=(u[w]-k.y)*g[w]*_}function T(){if(p){var _,k=p.length;for(g=new Array(k),u=new Array(k),_=0;_<k;++_)g[_]=isNaN(u[_]=+l(p[_],_,p))?0:+x(p[_],_,p)}}return"function"!=typeof l&&(l=n(null==l?0:+l)),f.initialize=function(_){p=_,T()},f.strength=function(_){return arguments.length?(x="function"==typeof _?_:n(+_),T(),f):x},f.y=function(_){return arguments.length?(l="function"==typeof _?_:n(+_),T(),f):l},f},Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,y("d3-quadtree"),y("d3-collection"),y("d3-dispatch"),y("d3-timer")):v(m.d3=m.d3||{},m.d3,m.d3,m.d3,m.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(y,Q,K){var m,v;m=this,v=function(m){"use strict";function v(p,g){if((u=(p=g?p.toExponential(g-1):p.toExponential()).indexOf("e"))<0)return null;var u,x=p.slice(0,u);return[x.length>1?x[0]+x.slice(2):x,+p.slice(u+1)]}function b(p){return(p=v(Math.abs(p)))?p[1]:NaN}var h,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(p){if(!(g=e.exec(p)))throw new Error("invalid format: "+p);var g;return new r({fill:g[1],align:g[2],sign:g[3],symbol:g[4],zero:g[5],width:g[6],comma:g[7],precision:g[8]&&g[8].slice(1),trim:g[9],type:g[10]})}function r(p){this.fill=void 0===p.fill?" ":p.fill+"",this.align=void 0===p.align?">":p.align+"",this.sign=void 0===p.sign?"-":p.sign+"",this.symbol=void 0===p.symbol?"":p.symbol+"",this.zero=!!p.zero,this.width=void 0===p.width?void 0:+p.width,this.comma=!!p.comma,this.precision=void 0===p.precision?void 0:+p.precision,this.trim=!!p.trim,this.type=void 0===p.type?"":p.type+""}function o(p,g){var u=v(p,g);if(!u)return p+"";var x=u[0],f=u[1];return f<0?"0."+new Array(-f).join("0")+x:x.length>f+1?x.slice(0,f+1)+"."+x.slice(f+1):x+new Array(f-x.length+2).join("0")}n.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var t={"%":function(p,g){return(100*p).toFixed(g)},b:function(p){return Math.round(p).toString(2)},c:function(p){return p+""},d:function(p){return Math.abs(p=Math.round(p))>=1e21?p.toLocaleString("en").replace(/,/g,""):p.toString(10)},e:function(p,g){return p.toExponential(g)},f:function(p,g){return p.toFixed(g)},g:function(p,g){return p.toPrecision(g)},o:function(p){return Math.round(p).toString(8)},p:function(p,g){return o(100*p,g)},r:o,s:function(p,g){var u=v(p,g);if(!u)return p+"";var x=u[0],f=u[1],T=f-(h=3*Math.max(-8,Math.min(8,Math.floor(f/3))))+1,_=x.length;return T===_?x:T>_?x+new Array(T-_+1).join("0"):T>0?x.slice(0,T)+"."+x.slice(T):"0."+new Array(1-T).join("0")+v(p,Math.max(0,g+T-1))[0]},X:function(p){return Math.round(p).toString(16).toUpperCase()},x:function(p){return Math.round(p).toString(16)}};function d(p){return p}var a,i=Array.prototype.map,s=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function c(p){var g,u,P,x=void 0===p.grouping||void 0===p.thousands?d:(g=i.call(p.grouping,Number),u=p.thousands+"",function(P,S){for(var E=P.length,D=[],z=0,N=g[0],V=0;E>0&&N>0&&(V+N+1>S&&(N=Math.max(1,S-V)),D.push(P.substring(E-=N,E+N)),!((V+=N+1)>S));)N=g[z=(z+1)%g.length];return D.reverse().join(u)}),f=void 0===p.currency?"":p.currency[0]+"",T=void 0===p.currency?"":p.currency[1]+"",_=void 0===p.decimal?".":p.decimal+"",k=void 0===p.numerals?d:(P=i.call(p.numerals,String),function(S){return S.replace(/[0-9]/g,function(E){return P[+E]})}),w=void 0===p.percent?"%":p.percent+"",C=void 0===p.minus?"-":p.minus+"",A=void 0===p.nan?"NaN":p.nan+"";function O(P){var S=(P=n(P)).fill,E=P.align,D=P.sign,z=P.symbol,N=P.zero,V=P.width,X=P.comma,J=P.precision,G=P.trim,Z=P.type;"n"===Z?(X=!0,Z="g"):t[Z]||(void 0===J&&(J=12),G=!0,Z="g"),(N||"0"===S&&"="===E)&&(N=!0,S="0",E="=");var re="$"===z?f:"#"===z&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",j="$"===z?T:/[%p]/.test(Z)?w:"",B=t[Z],H=/[defgprs%]/.test(Z);function ee(U){var $,q,te,ne=re,se=j;if("c"===Z)se=B(U)+se,U="";else{var ie=(U=+U)<0||1/U<0;if(U=isNaN(U)?A:B(Math.abs(U),J),G&&(U=function(de){e:for(var be,_e=de.length,xe=1,Ee=-1;xe<_e;++xe)switch(de[xe]){case".":Ee=be=xe;break;case"0":0===Ee&&(Ee=xe),be=xe;break;default:if(!+de[xe])break e;Ee>0&&(Ee=0)}return Ee>0?de.slice(0,Ee)+de.slice(be+1):de}(U)),ie&&0==+U&&"+"!==D&&(ie=!1),ne=(ie?"("===D?D:C:"-"===D||"("===D?"":D)+ne,se=("s"===Z?s[8+h/3]:"")+se+(ie&&"("===D?")":""),H)for($=-1,q=U.length;++$<q;)if(48>(te=U.charCodeAt($))||te>57){se=(46===te?_+U.slice($+1):U.slice($))+se,U=U.slice(0,$);break}}X&&!N&&(U=x(U,1/0));var ue=ne.length+U.length+se.length,le=ue<V?new Array(V-ue+1).join(S):"";switch(X&&N&&(U=x(le+U,le.length?V-se.length:1/0),le=""),E){case"<":U=ne+U+se+le;break;case"=":U=ne+le+U+se;break;case"^":U=le.slice(0,ue=le.length>>1)+ne+U+se+le.slice(ue);break;default:U=le+ne+U+se}return k(U)}return J=void 0===J?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,J)):Math.max(0,Math.min(20,J)),ee.toString=function(){return P+""},ee}return{format:O,formatPrefix:function(P,S){var E=O(((P=n(P)).type="f",P)),D=3*Math.max(-8,Math.min(8,Math.floor(b(S)/3))),z=Math.pow(10,-D),N=s[8+D/3];return function(V){return E(z*V)+N}}}}function l(p){return a=c(p),m.format=a.format,m.formatPrefix=a.formatPrefix,a}l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),m.FormatSpecifier=r,m.formatDefaultLocale=l,m.formatLocale=c,m.formatSpecifier=n,m.precisionFixed=function(p){return Math.max(0,-b(Math.abs(p)))},m.precisionPrefix=function(p,g){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(b(g)/3)))-b(Math.abs(p)))},m.precisionRound=function(p,g){return p=Math.abs(p),g=Math.abs(g)-p,Math.max(0,b(g)-b(p))+1},Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:(m=typeof globalThis<"u"?globalThis:m||self).d3=m.d3||{})},{}],113:[function(y,Q,K){var m,v;m=this,v=function(m,v,b){"use strict";var h=Math.abs,e=Math.atan,n=Math.atan2,r=Math.cos,o=Math.exp,t=Math.floor,d=Math.log,a=Math.max,i=Math.min,s=Math.pow,c=Math.round,l=Math.sign||function(qe){return qe>0?1:qe<0?-1:0},p=Math.sin,g=Math.tan,u=1e-6,x=Math.PI,f=x/2,T=x/4,_=Math.SQRT1_2,k=E(2),w=E(x),C=2*x,A=180/x,O=x/180;function P(qe){return qe>1?f:qe<-1?-f:Math.asin(qe)}function S(qe){return qe>1?0:qe<-1?x:Math.acos(qe)}function E(qe){return qe>0?Math.sqrt(qe):0}function D(qe){return(o(qe)-o(-qe))/2}function z(qe){return(o(qe)+o(-qe))/2}function N(qe){var Ze=g(qe/2),nt=2*d(r(qe/2))/(Ze*Ze);function ht(xt,yt){var Ot=r(xt),ir=r(yt),or=p(yt),er=ir*Ot,dr=-((1-er?d((1+er)/2)/(1-er):-.5)+nt/(1+er));return[dr*ir*p(xt),dr*or]}return ht.invert=function(xt,yt){var Ot,ir=E(xt*xt+yt*yt),or=-qe/2,er=50;if(!ir)return[0,0];do{var dr=or/2,kr=r(dr),Lr=p(dr),Ir=Lr/kr,Wr=-d(h(kr));or-=Ot=(2/Ir*Wr-nt*Ir-ir)/(-Wr/(Lr*Lr)+1-nt/(2*kr*kr))*(kr<0?.7:1)}while(h(Ot)>u&&--er>0);var mn=p(or);return[n(xt*mn,ir*r(or)),P(yt*mn/ir)]},ht}function V(qe,Ze){var xt,nt=r(Ze),ht=(xt=S(nt*r(qe/=2)))?xt/Math.sin(xt):1;return[2*nt*p(qe)*ht,p(Ze)*ht]}function X(qe){var Ze=p(qe),nt=r(qe),ht=qe>=0?1:-1,xt=g(ht*qe),yt=(1+Ze-nt)/2;function Ot(ir,or){var er=r(or),dr=r(ir/=2);return[(1+er)*p(ir),(ht*or>-n(dr,xt)-.001?0:10*-ht)+yt+p(or)*nt-(1+er)*Ze*dr]}return Ot.invert=function(ir,or){var er=0,dr=0,kr=50;do{var Lr=r(er),Ir=p(er),Wr=r(dr),mn=p(dr),Tn=1+Wr,jn=Tn*Ir-ir,Gn=yt+mn*nt-Tn*Ze*Lr-or,ei=Tn*Lr/2,Yn=-Ir*mn,Mi=Ze*Tn*Ir/2,Ri=nt*Wr+Ze*Lr*mn,Qi=Yn*Mi-Ri*ei,Ki=(Gn*Yn-jn*Ri)/Qi/2,ea=(jn*Mi-Gn*ei)/Qi;h(ea)>2&&(ea/=2),er-=Ki,dr-=ea}while((h(Ki)>u||h(ea)>u)&&--kr>0);return ht*dr>-n(r(er),xt)-.001?[2*er,dr]:null},Ot}function J(qe,Ze){var nt=g(Ze/2),ht=E(1-nt*nt),xt=1+ht*r(qe/=2),yt=p(qe)*ht/xt,Ot=nt/xt,ir=yt*yt,or=Ot*Ot;return[4/3*yt*(3+ir-3*or),4/3*Ot*(3+3*ir-or)]}V.invert=function(qe,Ze){if(!(qe*qe+4*Ze*Ze>x*x+u)){var nt=qe,ht=Ze,xt=25;do{var yt,Ot=p(nt),ir=p(nt/2),or=r(nt/2),er=p(ht),dr=r(ht),kr=p(2*ht),Lr=er*er,Ir=dr*dr,Wr=ir*ir,mn=1-Ir*or*or,Tn=mn?S(dr*or)*E(yt=1/mn):yt=0,jn=2*Tn*dr*ir-qe,Gn=Tn*er-Ze,ei=yt*(Ir*Wr+Tn*dr*or*Lr),Yn=yt*(.5*Ot*kr-2*Tn*er*ir),Mi=.25*yt*(kr*ir-Tn*er*Ir*Ot),Ri=yt*(Lr*or+Tn*Wr*dr),Qi=Yn*Mi-Ri*ei;if(!Qi)break;var Ki=(Gn*Yn-jn*Ri)/Qi,ea=(jn*Mi-Gn*ei)/Qi;nt-=Ki,ht-=ea}while((h(Ki)>u||h(ea)>u)&&--xt>0);return[nt,ht]}},J.invert=function(qe,Ze){if(Ze*=3/8,!(qe*=3/8)&&h(Ze)>1)return null;var er,nt=1+qe*qe+Ze*Ze,ht=E((nt-E(nt*nt-4*Ze*Ze))/2),xt=P(ht)/3,yt=ht?(er=h(Ze/ht),d(er+E(er*er-1))/3):function(er){return d(er+E(er*er+1))}(h(qe))/3,Ot=r(xt),ir=z(yt),or=ir*ir-Ot*Ot;return[2*l(qe)*n(D(yt)*Ot,.25-or),2*l(Ze)*n(ir*p(xt),.25+or)]};var G=E(8),Z=d(1+k);function re(qe,Ze){var nt=h(Ze);return nt<T?[qe,d(g(T+Ze/2))]:[qe*r(nt)*(2*k-1/p(nt)),l(Ze)*(2*k*(nt-T)-d(g(nt/2)))]}function j(qe){var Ze=2*x/qe;function nt(ht,xt){var yt=v.geoAzimuthalEquidistantRaw(ht,xt);if(h(ht)>f){var Ot=n(yt[1],yt[0]),ir=E(yt[0]*yt[0]+yt[1]*yt[1]),or=Ze*c((Ot-f)/Ze)+f,er=n(p(Ot-=or),2-r(Ot));Ot=or+P(x/ir*p(er))-er,yt[0]=ir*r(Ot),yt[1]=ir*p(Ot)}return yt}return nt.invert=function(ht,xt){var yt=E(ht*ht+xt*xt);if(yt>f){var Ot=n(xt,ht),ir=Ze*c((Ot-f)/Ze)+f,or=Ot>ir?-1:1,er=yt*r(ir-Ot),dr=1/g(or*S((er-x)/E(x*(x-2*er)+yt*yt)));Ot=ir+2*e((dr+or*E(dr*dr-3))/3),ht=yt*r(Ot),xt=yt*p(Ot)}return v.geoAzimuthalEquidistantRaw.invert(ht,xt)},nt}function B(qe,Ze){if(arguments.length<2&&(Ze=qe),1===Ze)return v.geoAzimuthalEqualAreaRaw;if(Ze===1/0)return H;function nt(ht,xt){var yt=v.geoAzimuthalEqualAreaRaw(ht/Ze,xt);return yt[0]*=qe,yt}return nt.invert=function(ht,xt){var yt=v.geoAzimuthalEqualAreaRaw.invert(ht/qe,xt);return yt[0]*=Ze,yt},nt}function H(qe,Ze){return[qe*r(Ze)/r(Ze/=2),2*p(Ze)]}function ee(qe,Ze,nt){var ht,xt,yt,Ot=100;nt=void 0===nt?0:+nt,Ze=+Ze;do{(xt=qe(nt))===(yt=qe(nt+u))&&(yt=xt+u),nt-=ht=-1*u*(xt-Ze)/(xt-yt)}while(Ot-- >0&&h(ht)>u);return Ot<0?NaN:nt}function U(qe,Ze,nt){return void 0===Ze&&(Ze=40),void 0===nt&&(nt=1e-12),function(ht,xt,yt,Ot){var ir,or,er;yt=void 0===yt?0:+yt,Ot=void 0===Ot?0:+Ot;for(var dr=0;dr<Ze;dr++){var kr=qe(yt,Ot),Lr=kr[0]-ht,Ir=kr[1]-xt;if(h(Lr)<nt&&h(Ir)<nt)break;var Wr=Lr*Lr+Ir*Ir;if(Wr>ir)yt-=or/=2,Ot-=er/=2;else{ir=Wr;var mn=(yt>0?-1:1)*nt,Tn=(Ot>0?-1:1)*nt,jn=qe(yt+mn,Ot),Gn=qe(yt,Ot+Tn),ei=(jn[0]-kr[0])/mn,Yn=(jn[1]-kr[1])/mn,Mi=(Gn[0]-kr[0])/Tn,Ri=(Gn[1]-kr[1])/Tn,Qi=Ri*ei-Yn*Mi,Ki=(h(Qi)<.5?.5:1)/Qi;if(yt+=or=(Ir*Mi-Lr*Ri)*Ki,Ot+=er=(Lr*Yn-Ir*ei)*Ki,h(or)<nt&&h(er)<nt)break}}return[yt,Ot]}}function $(){var qe=B(1.68,2);function Ze(nt,ht){if(nt+ht<-1.4){var xt=(nt-ht+1.6)*(nt+ht+1.4)/8;nt+=xt,ht-=.8*xt*p(ht+x/2)}var yt=qe(nt,ht),Ot=(1-r(nt*ht))/12;return yt[1]<0&&(yt[0]*=1+Ot),yt[1]>0&&(yt[1]*=1+Ot/1.5*yt[0]*yt[0]),yt}return Ze.invert=U(Ze),Ze}function q(qe,Ze){var nt,ht=qe*p(Ze),xt=30;do{Ze-=nt=(Ze+p(Ze)-ht)/(1+r(Ze))}while(h(nt)>u&&--xt>0);return Ze/2}function te(qe,Ze,nt){function ht(xt,yt){return[qe*xt*r(yt=q(nt,yt)),Ze*p(yt)]}return ht.invert=function(xt,yt){return yt=P(yt/Ze),[xt/(qe*r(yt)),P((2*yt+p(2*yt))/nt)]},ht}re.invert=function(qe,Ze){if((ht=h(Ze))<Z)return[qe,2*e(o(Ze))-f];var nt,ht,xt=T,yt=25;do{var Ot=r(xt/2),ir=g(xt/2);xt-=nt=(G*(xt-T)-d(ir)-ht)/(G-Ot*Ot/(2*ir))}while(h(nt)>1e-12&&--yt>0);return[qe/(r(xt)*(G-1/p(xt))),l(Ze)*xt]},H.invert=function(qe,Ze){var nt=2*P(Ze/2);return[qe*r(nt/2)/r(nt),nt]};var ne=te(k/f,k,x),se=2.00276;function ue(qe,Ze){var nt=q(x,Ze);return[se*qe/(1/r(Ze)+1.11072/r(nt)),(Ze+k*p(nt))/se]}function le(qe){var Ze=0,nt=v.geoProjectionMutator(qe),ht=nt(Ze);return ht.parallel=function(xt){return arguments.length?nt(Ze=xt*O):Ze*A},ht}function de(qe,Ze){return[qe*r(Ze),Ze]}function be(qe){if(!qe)return de;var Ze=1/g(qe);function nt(ht,xt){var yt=Ze+qe-xt,Ot=yt&&ht*r(xt)/yt;return[yt*p(Ot),Ze-yt*r(Ot)]}return nt.invert=function(ht,xt){var yt=E(ht*ht+(xt=Ze-xt)*xt),Ot=Ze+qe-yt;return[yt/r(Ot)*n(ht,xt),Ot]},nt}function _e(qe){function Ze(nt,ht){var xt=f-ht,yt=xt&&nt*qe*p(xt)/xt;return[xt*p(yt)/qe,f-xt*r(yt)]}return Ze.invert=function(nt,ht){var xt=nt*qe,yt=f-ht,Ot=E(xt*xt+yt*yt),ir=n(xt,yt);return[(Ot?Ot/p(Ot):1)*ir/qe,f-Ot]},Ze}ue.invert=function(qe,Ze){var nt,ht,xt=se*Ze,yt=Ze<0?-T:T,Ot=25;do{ht=xt-k*p(yt),yt-=nt=(p(2*yt)+2*yt-x*p(ht))/(2*r(2*yt)+2+x*r(ht)*k*r(yt))}while(h(nt)>u&&--Ot>0);return ht=xt-k*p(yt),[qe*(1/r(ht)+1.11072/r(yt))/se,ht]},de.invert=function(qe,Ze){return[qe/r(Ze),Ze]};var xe=te(1,4/x,x);function Ee(qe,Ze,nt,ht,xt,yt){var Ot,ir=r(yt);if(h(qe)>1||h(yt)>1)Ot=S(nt*xt+Ze*ht*ir);else{var or=p(qe/2),er=p(yt/2);Ot=2*P(E(or*or+Ze*ht*er*er))}return h(Ot)>u?[Ot,n(ht*p(yt),Ze*xt-nt*ht*ir)]:[0,0]}function he(qe,Ze,nt){return S((qe*qe+Ze*Ze-nt*nt)/(2*qe*Ze))}function me(qe){return qe-2*x*t((qe+x)/(2*x))}function Se(qe,Ze,nt){for(var ht,xt=[[qe[0],qe[1],p(qe[1]),r(qe[1])],[Ze[0],Ze[1],p(Ze[1]),r(Ze[1])],[nt[0],nt[1],p(nt[1]),r(nt[1])]],yt=xt[2],Ot=0;Ot<3;++Ot,yt=ht)yt.v=Ee((ht=xt[Ot])[1]-yt[1],yt[3],yt[2],ht[3],ht[2],ht[0]-yt[0]),yt.point=[0,0];var ir=he(xt[0].v[0],xt[2].v[0],xt[1].v[0]),or=he(xt[0].v[0],xt[1].v[0],xt[2].v[0]),er=x-ir;xt[2].point[1]=0,xt[0].point[0]=-(xt[1].point[0]=xt[0].v[0]/2);var dr=[xt[2].point[0]=xt[0].point[0]+xt[2].v[0]*r(ir),2*(xt[0].point[1]=xt[1].point[1]=xt[2].v[0]*p(ir))];return function(kr,Lr){var Ir,Wr=p(Lr),mn=r(Lr),Tn=new Array(3);for(Ir=0;Ir<3;++Ir){var jn=xt[Ir];if(Tn[Ir]=Ee(Lr-jn[1],jn[3],jn[2],mn,Wr,kr-jn[0]),!Tn[Ir][0])return jn.point;Tn[Ir][1]=me(Tn[Ir][1]-jn.v[1])}var Gn=dr.slice();for(Ir=0;Ir<3;++Ir){var Yn=he(xt[Ir].v[0],Tn[Ir][0],Tn[2==Ir?0:Ir+1][0]);Tn[Ir][1]<0&&(Yn=-Yn),Ir?1==Ir?(Gn[0]-=Tn[Ir][0]*r(Yn=or-Yn),Gn[1]-=Tn[Ir][0]*p(Yn)):(Gn[0]+=Tn[Ir][0]*r(Yn=er-Yn),Gn[1]+=Tn[Ir][0]*p(Yn)):(Gn[0]+=Tn[Ir][0]*r(Yn),Gn[1]-=Tn[Ir][0]*p(Yn))}return Gn[0]/=3,Gn[1]/=3,Gn}}function Me(qe){return qe[0]*=O,qe[1]*=O,qe}function Ie(qe,Ze,nt){var ht=v.geoCentroid({type:"MultiPoint",coordinates:[qe,Ze,nt]}),xt=[-ht[0],-ht[1]],yt=v.geoRotation(xt),Ot=Se(Me(yt(qe)),Me(yt(Ze)),Me(yt(nt)));Ot.invert=U(Ot);var ir=v.geoProjection(Ot).rotate(xt),or=ir.center;return delete ir.rotate,ir.center=function(er){return arguments.length?or(yt(er)):yt.invert(or())},ir.clipAngle(90)}function Fe(qe,Ze){var nt=E(1-p(Ze));return[2/w*qe*nt,w*(1-nt)]}function Ne(qe){var Ze=g(qe);function nt(ht,xt){return[ht,(ht?ht/p(ht):1)*(p(xt)*r(ht)-Ze*r(xt))]}return nt.invert=Ze?function(ht,xt){ht&&(xt*=p(ht)/ht);var yt=r(ht);return[ht,2*n(E(yt*yt+Ze*Ze-xt*xt)-yt,Ze-xt)]}:function(ht,xt){return[ht,P(ht?xt*g(ht)/ht:xt)]},nt}Fe.invert=function(qe,Ze){var nt=(nt=Ze/w-1)*nt;return[nt>0?qe*E(x/nt)/2:0,P(1-nt)]};var De=E(3);function $e(qe,Ze){return[De*qe*(2*r(2*Ze/3)-1)/w,De*w*p(Ze/3)]}function Re(qe){var Ze=r(qe);function nt(ht,xt){return[ht*Ze,p(xt)/Ze]}return nt.invert=function(ht,xt){return[ht/Ze,P(xt*Ze)]},nt}function ze(qe){var Ze=r(qe);function nt(ht,xt){return[ht*Ze,(1+Ze)*g(xt/2)]}return nt.invert=function(ht,xt){return[ht/Ze,2*e(xt/(1+Ze))]},nt}function Ue(qe,Ze){var nt=E(8/(3*x));return[nt*qe*(1-h(Ze)/x),nt*Ze]}function je(qe,Ze){var nt=E(4-3*p(h(Ze)));return[2/E(6*x)*qe*nt,l(Ze)*E(2*x/3)*(2-nt)]}function rt(qe,Ze){var nt=E(x*(4+x));return[2/nt*qe*(1+E(1-4*Ze*Ze/(x*x))),4/nt*Ze]}function ut(qe,Ze){var nt=(2+f)*p(Ze);Ze/=2;for(var ht=0,xt=1/0;ht<10&&h(xt)>u;ht++){var yt=r(Ze);Ze-=xt=(Ze+p(Ze)*(yt+2)-nt)/(2*yt*(1+yt))}return[2/E(x*(4+x))*qe*(1+r(Ze)),2*E(x/(4+x))*p(Ze)]}function gt(qe,Ze){return[qe*(1+r(Ze))/E(2+x),2*Ze/E(2+x)]}function At(qe,Ze){for(var nt=(1+f)*p(Ze),ht=0,xt=1/0;ht<10&&h(xt)>u;ht++)Ze-=xt=(Ze+p(Ze)-nt)/(1+r(Ze));return nt=E(2+x),[qe*(1+r(Ze))/nt,2*Ze/nt]}$e.invert=function(qe,Ze){var nt=3*P(Ze/(De*w));return[w*qe/(De*(2*r(2*nt/3)-1)),nt]},Ue.invert=function(qe,Ze){var nt=E(8/(3*x)),ht=Ze/nt;return[qe/(nt*(1-h(ht)/x)),ht]},je.invert=function(qe,Ze){var nt=2-h(Ze)/E(2*x/3);return[qe*E(6*x)/(2*nt),l(Ze)*P((4-nt*nt)/3)]},rt.invert=function(qe,Ze){var nt=E(x*(4+x))/2;return[qe*nt/(1+E(1-Ze*Ze*(4+x)/(4*x))),Ze*nt/2]},ut.invert=function(qe,Ze){var nt=Ze*E((4+x)/x)/2,ht=P(nt),xt=r(ht);return[qe/(2/E(x*(4+x))*(1+xt)),P((ht+nt*(xt+2))/(2+f))]},gt.invert=function(qe,Ze){var nt=E(2+x),ht=Ze*nt/2;return[nt*qe/(1+r(ht)),ht]},At.invert=function(qe,Ze){var nt=1+f,ht=E(nt/2);return[2*qe*ht/(1+r(Ze*=ht)),P((Ze+p(Ze))/nt)]};var _t=3+2*k;function it(qe,Ze){var nt=p(qe/=2),ht=r(qe),xt=E(r(Ze)),yt=r(Ze/=2),Ot=p(Ze)/(yt+k*ht*xt),ir=E(2/(1+Ot*Ot)),or=E((k*yt+(ht+nt)*xt)/(k*yt+(ht-nt)*xt));return[_t*(ir*(or-1/or)-2*d(or)),_t*(ir*Ot*(or+1/or)-2*e(Ot))]}it.invert=function(qe,Ze){if(!(nt=J.invert(qe/1.2,1.065*Ze)))return null;var nt,ht=nt[0],xt=nt[1],yt=20;qe/=_t,Ze/=_t;do{var Ot=ht/2,ir=xt/2,or=p(Ot),er=r(Ot),dr=p(ir),kr=r(ir),Lr=r(xt),Ir=E(Lr),Wr=dr/(kr+k*er*Ir),mn=Wr*Wr,Tn=E(2/(1+mn)),jn=(k*kr+(er+or)*Ir)/(k*kr+(er-or)*Ir),Gn=E(jn),ei=Gn-1/Gn,Yn=Gn+1/Gn,Mi=Tn*ei-2*d(Gn)-qe,Ri=Tn*Wr*Yn-2*e(Wr)-Ze,Qi=dr&&_*Ir*or*mn/dr,Ki=(k*er*kr+Ir)/(2*(kr+k*er*Ir)*(kr+k*er*Ir)*Ir),ea=-.5*Wr*Tn*Tn*Tn,Da=ea*Qi,Ea=ea*Ki,ca=(ca=2*kr+k*Ir*(er-or))*ca*Gn,ma=(k*er*kr*Ir+Lr)/ca,Aa=-k*or*dr/(Ir*ca),Ha=ei*Da-2*ma/Gn+Tn*(ma+ma/jn),po=ei*Ea-2*Aa/Gn+Tn*(Aa+Aa/jn),go=Wr*Yn*Da-2*Qi/(1+mn)+Tn*Yn*Qi+Tn*Wr*(ma-ma/jn),mo=Wr*Yn*Ea-2*Ki/(1+mn)+Tn*Yn*Ki+Tn*Wr*(Aa-Aa/jn),vo=po*go-mo*Ha;if(!vo)break;var Zi=(Ri*po-Mi*mo)/vo,vt=(Mi*go-Ri*Ha)/vo;ht-=Zi,xt=a(-f,i(f,xt-vt))}while((h(Zi)>u||h(vt)>u)&&--yt>0);return h(h(xt)-f)<u?[0,xt]:yt&&[ht,xt]};var et=r(35*O);function wt(qe,Ze){var nt=g(Ze/2);return[qe*et*E(1-nt*nt),(1+et)*nt]}function Gt(qe,Ze){var nt=Ze/2,ht=r(nt);return[2*qe/w*r(Ze)*ht*ht,w*g(nt)]}function Kt(qe){var Ze=1-qe,nt=xt(x,0)[0]-xt(-x,0)[0],ht=E(2*(xt(0,f)[1]-xt(0,-f)[1])/nt);function xt(ir,or){var er=r(or),dr=p(or);return[er/(Ze+qe*er)*ir,Ze*or+qe*dr]}function yt(ir,or){var er=xt(ir,or);return[er[0]*ht,er[1]/ht]}function Ot(ir){return yt(0,ir)[1]}return yt.invert=function(ir,or){var er=ee(Ot,or);return[ir/ht*(qe+Ze/r(er)),er]},yt}function cr(qe){return[qe[0]/2,P(g(qe[1]/2*O))*A]}function ar(qe){return[2*qe[0],2*e(p(qe[1]*O))*A]}function hr(qe,Ze){var nt=2*x/Ze,ht=qe*qe;function xt(yt,Ot){var ir=v.geoAzimuthalEquidistantRaw(yt,Ot),or=ir[0],er=ir[1],dr=or*or+er*er;if(dr>ht){var kr=E(dr),Lr=n(er,or),Ir=nt*c(Lr/nt),Wr=Lr-Ir,mn=qe*r(Wr),Tn=(qe*p(Wr)-Wr*p(mn))/(f-mn),jn=Xt(Wr,Tn),Gn=(x-qe)/He(jn,mn,x);or=kr;var ei,Yn=50;do{or-=ei=(qe+He(jn,mn,or)*Gn-kr)/(jn(or)*Gn)}while(h(ei)>u&&--Yn>0);er=Wr*p(or),or<f&&(er-=Tn*(or-f));var Mi=p(Ir),Ri=r(Ir);ir[0]=or*Ri-er*Mi,ir[1]=or*Mi+er*Ri}return ir}return xt.invert=function(yt,Ot){var ir=yt*yt+Ot*Ot;if(ir>ht){var or=E(ir),er=n(Ot,yt),dr=nt*c(er/nt),kr=er-dr;yt=or*r(kr),Ot=or*p(kr);for(var Lr=yt-f,Ir=p(yt),Wr=Ot/Ir,mn=yt<f?1/0:0,Tn=10;;){var jn=qe*p(Wr),Gn=qe*r(Wr),ei=p(Gn),Yn=f-Gn,Mi=(jn-Wr*ei)/Yn,Ri=Xt(Wr,Mi);if(h(mn)<1e-12||!--Tn)break;Wr-=mn=(Wr*Ir-Mi*Lr-Ot)/(Ir-2*Lr*(Yn*(Gn+Wr*jn*r(Gn)-ei)-jn*(jn-Wr*ei))/(Yn*Yn))}yt=(or=qe+He(Ri,Gn,yt)*(x-qe)/He(Ri,Gn,x))*r(er=dr+Wr),Ot=or*p(er)}return v.geoAzimuthalEquidistantRaw.invert(yt,Ot)},xt}function Xt(qe,Ze){return function(nt){var ht=qe*r(nt);return nt<f&&(ht-=Ze),E(1+ht*ht)}}function He(qe,Ze,nt){for(var ht=(nt-Ze)/50,xt=qe(Ze)+qe(nt),yt=1,Ot=Ze;yt<50;++yt)xt+=2*qe(Ot+=ht);return.5*xt*ht}function Je(qe,Ze,nt,ht,xt,yt,Ot,ir){function or(er,dr){if(!dr)return[qe*er/x,0];var kr=dr*dr,Lr=qe+kr*(Ze+kr*(nt+kr*ht)),Ir=dr*(xt-1+kr*(yt-ir+kr*Ot)),Wr=(Lr*Lr+Ir*Ir)/(2*Ir),mn=er*P(Lr/Wr)/x;return[Wr*p(mn),dr*(1+kr*ir)+Wr*(1-r(mn))]}return arguments.length<8&&(ir=0),or.invert=function(er,dr){var kr,Lr,Ir=x*er/qe,Wr=dr,mn=50;do{var Tn=Wr*Wr,jn=qe+Tn*(Ze+Tn*(nt+Tn*ht)),Gn=Wr*(xt-1+Tn*(yt-ir+Tn*Ot)),ei=jn*jn+Gn*Gn,Yn=2*Gn,Mi=ei/Yn,Ri=Mi*Mi,Qi=P(jn/Mi)/x,Ki=Ir*Qi,ea=jn*jn,Da=(2*Ze+Tn*(4*nt+6*Tn*ht))*Wr,Ea=xt+Tn*(3*yt+5*Tn*Ot),ca=(2*(jn*Da+Gn*(Ea-1))*Yn-ei*(2*(Ea-1)))/(Yn*Yn),ma=r(Ki),Aa=p(Ki),Ha=Mi*ma,po=Mi*Aa,go=Ir/x*(1/E(1-ea/Ri))*(Da*Mi-jn*ca)/Ri,mo=po-er,vo=Wr*(1+Tn*ir)+Mi-Ha-dr,Zi=ca*Aa+Ha*go,vt=Ha*Qi,jt=1+ca-(ca*ma-po*go),vr=po*Qi,Zt=Zi*vr-jt*vt;if(!Zt)break;Ir-=kr=(vo*Zi-mo*jt)/Zt,Wr-=Lr=(mo*vr-vo*vt)/Zt}while((h(kr)>u||h(Lr)>u)&&--mn>0);return[Ir,Wr]},or}wt.invert=function(qe,Ze){var nt=Ze/(1+et);return[qe&&qe/(et*E(1-nt*nt)),2*e(nt)]},Gt.invert=function(qe,Ze){var nt=e(Ze/w),ht=r(nt),xt=2*nt;return[qe*w/2/(r(xt)*ht*ht),xt]};var pe=Je(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),we=Je(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Be=Je(5/6*x,-.62636,-.0344,0,1.3493,-.05524,0,.045);function We(qe,Ze){var nt=qe*qe,ht=Ze*Ze;return[qe*(1-.162388*ht)*(.87-952426e-9*nt*nt),Ze*(1+ht/12)]}We.invert=function(qe,Ze){var nt,ht=qe,xt=Ze,yt=50;do{var Ot=xt*xt;xt-=nt=(xt*(1+Ot/12)-Ze)/(1+Ot/4)}while(h(nt)>u&&--yt>0);yt=50,qe/=1-.162388*Ot;do{var ir=(ir=ht*ht)*ir;ht-=nt=(ht*(.87-952426e-9*ir)-qe)/(.87-.00476213*ir)}while(h(nt)>u&&--yt>0);return[ht,xt]};var Ke=Je(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ye(qe){var Ze=qe(f,0)[0]-qe(-f,0)[0];function nt(ht,xt){var yt=ht>0?-.5:.5,Ot=qe(ht+yt*x,xt);return Ot[0]-=yt*Ze,Ot}return qe.invert&&(nt.invert=function(ht,xt){var yt=ht>0?-.5:.5,Ot=qe.invert(ht+yt*Ze,xt),ir=Ot[0]-yt*x;return ir<-x?ir+=2*x:ir>x&&(ir-=2*x),Ot[0]=ir,Ot}),nt}function ft(qe,Ze){var nt=l(qe),ht=l(Ze),xt=r(Ze),yt=r(qe)*xt,Ot=p(qe)*xt,ir=p(ht*Ze);qe=h(n(Ot,ir)),Ze=P(yt),h(qe-f)>u&&(qe%=f);var or=function(er,dr){if(dr===f)return[0,0];var kr,Lr,Ir=p(dr),Wr=Ir*Ir,mn=Wr*Wr,Tn=1+mn,jn=1+3*mn,Gn=1-mn,ei=P(1/E(Tn)),Yn=Gn+Wr*Tn*ei,Mi=(1-Ir)/Yn,Ri=E(Mi),Qi=Mi*Tn,Ki=E(Qi),ea=Ri*Gn;if(0===er)return[0,-(ea+Wr*Ki)];var Da,Ea=r(dr),ca=1/Ea,ma=2*Ir*Ea,Aa=(-Yn*Ea-(-3*Wr+ei*jn)*ma*(1-Ir))/(Yn*Yn),Ha=-ca*ma,po=-ca*(Wr*Tn*Aa+Mi*jn*ma),go=-2*ca*(Gn*(.5*Aa/Ri)-2*Wr*Ri*ma),mo=4*er/x;if(er>.222*x||dr<x/4&&er>.175*x){if(kr=(ea+Wr*E(Qi*(1+mn)-ea*ea))/(1+mn),er>x/4)return[kr,kr];var vo=kr,Zi=.5*kr;kr=.5*(Zi+vo),Lr=50;do{var jt=kr*(go+Ha*E(Qi-kr*kr))+po*P(kr/Ki)-mo;if(!jt)break;jt<0?Zi=kr:vo=kr,kr=.5*(Zi+vo)}while(h(vo-Zi)>u&&--Lr>0)}else{kr=u,Lr=25;do{var vr=kr*kr,Zt=E(Qi-vr),yr=go+Ha*Zt,Hr=kr*yr+po*P(kr/Ki)-mo;kr-=Da=Zt?Hr/(yr+(po-Ha*vr)/Zt):0}while(h(Da)>u&&--Lr>0)}return[kr,-ea-Wr*E(Qi-kr*kr)]}(qe>x/4?f-qe:qe,Ze);return qe>x/4&&(ir=or[0],or[0]=-or[1],or[1]=-ir),or[0]*=nt,or[1]*=-ht,or}function ct(qe,Ze){var nt,ht,xt,yt,Ot,ir;if(Ze<u)return[(yt=p(qe))-(nt=Ze*(qe-yt*(ht=r(qe)))/4)*ht,ht+nt*yt,1-Ze*yt*yt/2,qe-nt];if(Ze>=1-u)return nt=(1-Ze)/4,xt=1/(ht=z(qe)),[(yt=((ir=o(2*(ir=qe)))-1)/(ir+1))+nt*((Ot=ht*D(qe))-qe)/(ht*ht),xt-nt*yt*xt*(Ot-qe),xt+nt*yt*xt*(Ot+qe),2*e(o(qe))-f+nt*(Ot-qe)/ht];var or=[1,0,0,0,0,0,0,0,0],er=[E(Ze),0,0,0,0,0,0,0,0],dr=0;for(ht=E(1-Ze),Ot=1;h(er[dr]/or[dr])>u&&dr<8;)nt=or[dr++],er[dr]=(nt-ht)/2,or[dr]=(nt+ht)/2,ht=E(nt*ht),Ot*=2;xt=Ot*or[dr]*qe;do{xt=(P(yt=er[dr]*p(ht=xt)/or[dr])+xt)/2}while(--dr);return[p(xt),yt=r(xt),yt/r(xt-ht),xt]}function St(qe,Ze){if(!Ze)return qe;if(1===Ze)return d(g(qe/2+T));for(var nt=1,ht=E(1-Ze),xt=E(Ze),yt=0;h(xt)>u;yt++){if(qe%x){var Ot=e(ht*g(qe)/nt);Ot<0&&(Ot+=x),qe+=Ot+~~(qe/x)*x}else qe+=qe;xt=(nt+ht)/2,ht=E(nt*ht),xt=((nt=xt)-ht)/2}return qe/(s(2,yt)*nt)}function Ft(qe,Ze){var er,dr,kr,Lr,Ir,nt=(k-1)/(k+1),ht=E(1-nt*nt),xt=St(f,ht*ht),yt=d(g(x/4+h(Ze)/2)),Ot=o(-1*yt)/E(nt),ir=(er=Ot*r(-1*qe),Lr=(dr=Ot*p(-1*qe))+1,[.5*((er>=0?f:-f)-n(Ir=1-(kr=er*er)-dr*dr,2*er)),-.25*d(Ir*Ir+4*kr)+.5*d(Lr*Lr+kr)]),or=function(er,dr,kr){var Lr=h(er),Ir=D(h(dr));if(Lr){var Wr=1/p(Lr),mn=1/(g(Lr)*g(Lr)),Tn=-(mn+kr*(Ir*Ir*Wr*Wr)-1+kr),jn=(-Tn+E(Tn*Tn-(kr-1)*mn*4))/2;return[St(e(1/E(jn)),kr)*l(er),St(e(E((jn/mn-1)/kr)),1-kr)*l(dr)]}return[0,St(e(Ir),1-kr)*l(dr)]}(ir[0],ir[1],ht*ht);return[-or[1],(Ze>=0?1:-1)*(.5*xt-or[0])]}function at(qe){var Ze=p(qe),nt=r(qe),ht=mt(qe);function xt(yt,Ot){var ir=ht(yt,Ot);yt=ir[0];var or=p(Ot=ir[1]),er=r(Ot),dr=r(yt),kr=S(Ze*or+nt*er*dr),Lr=p(kr),Ir=h(Lr)>u?kr/Lr:1;return[Ir*nt*p(yt),(h(yt)>f?Ir:-Ir)*(Ze*er-nt*or*dr)]}return ht.invert=mt(-qe),xt.invert=function(yt,Ot){var ir=E(yt*yt+Ot*Ot),or=-p(ir),er=r(ir),dr=ir*er,kr=-Ot*or,Lr=ir*Ze,Ir=E(dr*dr+kr*kr-Lr*Lr),Wr=n(dr*Lr+kr*Ir,kr*Lr-dr*Ir),mn=(ir>f?-1:1)*n(yt*or,ir*r(Wr)*er+Ot*p(Wr)*or);return ht.invert(mn,Wr)},xt}function mt(qe){var Ze=p(qe),nt=r(qe);return function(ht,xt){var yt=r(xt),Ot=r(ht)*yt,ir=p(ht)*yt,or=p(xt);return[n(ir,Ot*nt-or*Ze),P(or*nt+Ot*Ze)]}}ft.invert=function(qe,Ze){h(qe)>1&&(qe=2*l(qe)-qe),h(Ze)>1&&(Ze=2*l(Ze)-Ze);var nt=l(qe),ht=l(Ze),xt=-nt*qe,yt=-ht*Ze,Ot=yt/xt<1,ir=function(kr,Lr){for(var Ir=0,Wr=1,mn=.5,Tn=50;;){var jn=mn*mn,Gn=E(mn),ei=P(1/E(1+jn)),Yn=1-jn+mn*(1+jn)*ei,Mi=(1-Gn)/Yn,Ri=E(Mi),Qi=Mi*(1+jn),Ki=Ri*(1-jn),ea=E(Qi-kr*kr),Da=Lr+Ki+mn*ea;if(h(Wr-Ir)<1e-12||0==--Tn||0===Da)break;Da>0?Ir=mn:Wr=mn,mn=.5*(Ir+Wr)}if(!Tn)return null;var Ea=P(Gn),ca=r(Ea),ma=1/ca,Aa=2*Gn*ca,Ha=(-Yn*ca-(-3*mn+ei*(1+3*jn))*Aa*(1-Gn))/(Yn*Yn);return[x/4*(kr*(-2*ma*(.5*Ha/Ri*(1-jn)-2*mn*Ri*Aa)+-ma*Aa*ea)+-ma*(mn*(1+jn)*Ha+Mi*(1+3*jn)*Aa)*P(kr/E(Qi))),Ea]}(Ot?yt:xt,Ot?xt:yt),or=ir[0],er=ir[1],dr=r(er);return Ot&&(or=-f-or),[nt*(n(p(or)*dr,-p(er))+x),ht*P(r(or)*dr)]},Ft.invert=function(qe,Ze){var nt,ht,xt,yt,Ot,ir,Ir,Wr,mn,or=(k-1)/(k+1),er=E(1-or*or),kr=(ht=-qe,xt=er*er,(nt=.5*St(f,er*er)-Ze)?(yt=ct(nt,xt),ht?(ir=(Ot=ct(ht,1-xt))[1]*Ot[1]+xt*yt[0]*yt[0]*Ot[0]*Ot[0],[[yt[0]*Ot[2]/ir,yt[1]*yt[2]*Ot[0]*Ot[1]/ir],[yt[1]*Ot[1]/ir,-yt[0]*yt[2]*Ot[0]*Ot[2]/ir],[yt[2]*Ot[1]*Ot[2]/ir,-xt*yt[0]*yt[1]*Ot[0]/ir]]):[[yt[0],0],[yt[1],0],[yt[2],0]]):[[0,(Ot=ct(ht,1-xt))[0]/Ot[1]],[1/Ot[1],0],[Ot[2]/Ot[1],0]]),Lr=[((Ir=kr[0])[0]*(Wr=kr[1])[0]+Ir[1]*Wr[1])/(mn=Wr[0]*Wr[0]+Wr[1]*Wr[1]),(Ir[1]*Wr[0]-Ir[0]*Wr[1])/mn];return[n(Lr[1],Lr[0])/-1,2*e(o(-.5*d(or*Lr[0]*Lr[0]+or*Lr[1]*Lr[1])))-f]};var qt=P(1-1/3)*A,Et=Re(0);function Dt(qe){var Ze=qt*O,nt=Fe(x,Ze)[0]-Fe(-x,Ze)[0],ht=Et(0,Ze)[1],xt=Fe(0,Ze)[1],yt=w-xt,Ot=C/qe,ir=4/C,or=ht+yt*yt*4/C;function er(dr,kr){var Lr,Ir=h(kr);if(Ir>Ze){var Wr=i(qe-1,a(0,t((dr+x)/Ot)));(Lr=Fe(dr+=x*(qe-1)/qe-Wr*Ot,Ir))[0]=Lr[0]*C/nt-C*(qe-1)/(2*qe)+Wr*C/qe,Lr[1]=ht+4*(Lr[1]-xt)*yt/C,kr<0&&(Lr[1]=-Lr[1])}else Lr=Et(dr,kr);return Lr[0]*=ir,Lr[1]/=or,Lr}return er.invert=function(dr,kr){dr/=ir;var Lr=h(kr*=or);if(Lr>ht){var Ir=i(qe-1,a(0,t((dr+x)/Ot))),Wr=Fe.invert(dr=(dr+x*(qe-1)/qe-Ir*Ot)*nt/C,.25*(Lr-ht)*C/yt+xt);return Wr[0]-=x*(qe-1)/qe-Ir*Ot,kr<0&&(Wr[1]=-Wr[1]),Wr}return Et.invert(dr,kr)},er}function Le(qe,Ze){return[qe,1&Ze?90-u:qt]}function Xe(qe,Ze){return[qe,1&Ze?-90+u:-qt]}function ot(qe){return[qe[0]*(1-u),qe[1]]}function dt(qe){var Ze,nt=1+qe,ht=P(p(1/nt)),xt=2*E(x/(Ze=x+4*ht*nt)),yt=.5*xt*(nt+E(qe*(2+qe))),Ot=qe*qe,ir=nt*nt;function or(er,dr){var kr,Lr,Ir=1-p(dr);if(Ir&&Ir<2){var Wr,mn=f-dr,Tn=25;do{var jn=p(mn),Gn=r(mn),ei=ht+n(jn,nt-Gn),Yn=1+ir-2*nt*Gn;mn-=Wr=(mn-Ot*ht-nt*jn+Yn*ei-.5*Ir*Ze)/(2*nt*jn*ei)}while(h(Wr)>1e-12&&--Tn>0);kr=xt*E(Yn),Lr=er*ei/x}else kr=xt*(qe+Ir),Lr=er*ht/x;return[kr*p(Lr),yt-kr*r(Lr)]}return or.invert=function(er,dr){var kr=er*er+(dr-=yt)*dr,Lr=(1+ir-kr/(xt*xt))/(2*nt),Ir=S(Lr),Wr=p(Ir),mn=ht+n(Wr,nt-Lr);return[P(er/E(kr))*x/mn,P(1-2*(Ir-Ot*ht-nt*Wr+(1+ir-2*nt*Lr)*mn)/Ze)]},or}function Lt(qe,Ze){return Ze>-.7109889596207567?((qe=ne(qe,Ze))[1]+=.0528035274542,qe):de(qe,Ze)}function Ut(qe,Ze){return h(Ze)>.7109889596207567?((qe=ne(qe,Ze))[1]-=Ze>0?.0528035274542:-.0528035274542,qe):de(qe,Ze)}function $t(qe,Ze,nt,ht){var xt=E(4*x/(2*nt+(1+qe-Ze/2)*p(2*nt)+(qe+Ze)/2*p(4*nt)+Ze/2*p(6*nt))),yt=E(ht*p(nt)*E((1+qe*r(2*nt)+Ze*r(4*nt))/(1+qe+Ze))),Ot=nt*or(1);function ir(kr){return E(1+qe*r(2*kr)+Ze*r(4*kr))}function or(kr){var Lr=kr*nt;return(2*Lr+(1+qe-Ze/2)*p(2*Lr)+(qe+Ze)/2*p(4*Lr)+Ze/2*p(6*Lr))/nt}function er(kr){return ir(kr)*p(kr)}var dr=function(kr,Lr){var Ir=nt*ee(or,Ot*p(Lr)/nt,Lr/x);isNaN(Ir)&&(Ir=nt*l(Lr));var Wr=xt*ir(Ir);return[Wr*yt*kr/x*r(Ir),Wr/yt*p(Ir)]};return dr.invert=function(kr,Lr){var Ir=ee(er,Lr*yt/xt);return[kr*x/(r(Ir)*xt*yt*ir(Ir)),P(nt*or(Ir/nt)/Ot)]},0===nt&&(xt=E(ht/x),(dr=function(kr,Lr){return[kr*xt,p(Lr)/xt]}).invert=function(kr,Lr){return[kr/xt,P(Lr*xt)]}),dr}function wr(qe,Ze,nt){function ht(Ir){return qe+(1-qe)*s(1-s(Ir,Ze),1/Ze)}function xt(Ir){return function Wt(qe,Ze,nt,ht,xt){void 0===ht&&(ht=1e-8),void 0===xt&&(xt=20);var yt=qe(Ze),Ot=qe(.5*(Ze+nt)),ir=qe(nt);return function or(er,dr,kr,Lr,Ir,Wr,mn,Tn,jn,Gn,ei){if(ei.nanEncountered)return NaN;var Yn,Mi,Ri,Qi,Ki,ea,Da,Ea,ca,ma;if(Mi=er(dr+.25*(Yn=kr-dr)),Ri=er(kr-.25*Yn),isNaN(Mi))ei.nanEncountered=!0;else{if(!isNaN(Ri))return ma=((ea=(Qi=Yn*(Lr+4*Mi+Ir)/12)+(Ki=Yn*(Ir+4*Ri+Wr)/12))-mn)/15,Gn>jn?(ei.maxDepthCount++,ea+ma):Math.abs(ma)<Tn?ea+ma:(Ea=or(er,dr,Da=dr+.5*Yn,Lr,Mi,Ir,Qi,.5*Tn,jn,Gn+1,ei),isNaN(Ea)?(ei.nanEncountered=!0,NaN):(ca=or(er,Da,kr,Ir,Ri,Wr,Ki,.5*Tn,jn,Gn+1,ei),isNaN(ca)?(ei.nanEncountered=!0,NaN):Ea+ca));ei.nanEncountered=!0}}(qe,Ze,nt,yt,Ot,ir,(yt+4*Ot+ir)*(nt-Ze)/6,ht,xt,1,{maxDepthCount:0,nanEncountered:!1})}(ht,0,Ir,1e-4)}for(var yt=1/xt(1),ir=(1+1e-8)*yt,or=[],er=0;er<=1e3;er++)or.push(xt(er/1e3)*ir);function dr(Ir){var Wr=0,mn=1e3,Tn=500;do{or[Tn]>Ir?mn=Tn:Wr=Tn,Tn=Wr+mn>>1}while(Tn>Wr);var jn=or[Tn+1]-or[Tn];return jn&&(jn=(Ir-or[Tn+1])/jn),(Tn+1+jn)/1e3}var kr=2*dr(1)/x*yt/nt,Lr=function(Ir,Wr){var mn=dr(h(p(Wr))),Tn=ht(mn)*Ir;return mn/=kr,[Tn,Wr>=0?mn:-mn]};return Lr.invert=function(Ir,Wr){var mn;return h(Wr*=kr)<1&&(mn=l(Wr)*P(xt(h(Wr))*yt)),[Ir/ht(h(Wr)),mn]},Lr}function Rr(qe,Ze){return h(qe[0]-Ze[0])<u&&h(qe[1]-Ze[1])<u}function br(qe,Ze){for(var nt,ht,xt,yt=-1,Ot=qe.length,ir=qe[0],or=[];++yt<Ot;){ht=((nt=qe[yt])[0]-ir[0])/Ze,xt=(nt[1]-ir[1])/Ze;for(var er=0;er<Ze;++er)or.push([ir[0]+er*ht,ir[1]+er*xt]);ir=nt}return or.push(nt),or}function nr(qe){var Ze,nt,xt,yt,ir,or=[],er=qe[0].length;for(ir=0;ir<er;++ir)nt=(Ze=qe[0][ir])[0][0],or.push(br([[nt+u,Ze[0][1]+u],[nt+u,(xt=Ze[1][1])-u],[(yt=Ze[2][0])-u,xt-u],[yt-u,Ze[2][1]+u]],30));for(ir=qe[1].length-1;ir>=0;--ir)nt=(Ze=qe[1][ir])[0][0],or.push(br([[(yt=Ze[2][0])-u,Ze[2][1]-u],[yt-u,(xt=Ze[1][1])+u],[nt+u,xt+u],[nt+u,Ze[0][1]-u]],30));return{type:"Polygon",coordinates:[b.merge(or)]}}function lr(qe,Ze,nt){var ht,xt;function yt(or,er){for(var dr=er<0?-1:1,kr=Ze[+(er<0)],Lr=0,Ir=kr.length-1;Lr<Ir&&or>kr[Lr][2][0];++Lr);var Wr=qe(or-kr[Lr][1][0],er);return Wr[0]+=qe(kr[Lr][1][0],dr*er>dr*kr[Lr][0][1]?kr[Lr][0][1]:er)[0],Wr}nt?yt.invert=nt(yt):qe.invert&&(yt.invert=function(or,er){for(var dr=xt[+(er<0)],kr=Ze[+(er<0)],Lr=0,Ir=dr.length;Lr<Ir;++Lr){var Wr=dr[Lr];if(Wr[0][0]<=or&&or<Wr[1][0]&&Wr[0][1]<=er&&er<Wr[1][1]){var mn=qe.invert(or-qe(kr[Lr][1][0],0)[0],er);return mn[0]+=kr[Lr][1][0],Rr(yt(mn[0],mn[1]),[or,er])?mn:null}}});var Ot=v.geoProjection(yt),ir=Ot.stream;return Ot.stream=function(or){var er=Ot.rotate(),dr=ir(or),kr=(Ot.rotate([0,0]),ir(or));return Ot.rotate(er),dr.sphere=function(){v.geoStream(ht,kr)},dr},Ot.lobes=function(or){return arguments.length?(ht=nr(or),Ze=or.map(function(er){return er.map(function(dr){return[[dr[0][0]*O,dr[0][1]*O],[dr[1][0]*O,dr[1][1]*O],[dr[2][0]*O,dr[2][1]*O]]})}),xt=Ze.map(function(er){return er.map(function(dr){var kr,Lr=qe(dr[0][0],dr[0][1])[0],Ir=qe(dr[2][0],dr[2][1])[0],Wr=qe(dr[1][0],dr[0][1])[1],mn=qe(dr[1][0],dr[1][1])[1];return Wr>mn&&(kr=Wr,Wr=mn,mn=kr),[[Lr,Wr],[Ir,mn]]})}),Ot):Ze.map(function(er){return er.map(function(dr){return[[dr[0][0]*A,dr[0][1]*A],[dr[1][0]*A,dr[1][1]*A],[dr[2][0]*A,dr[2][1]*A]]})})},null!=Ze&&Ot.lobes(Ze),Ot}Lt.invert=function(qe,Ze){return Ze>-.7109889596207567?ne.invert(qe,Ze-.0528035274542):de.invert(qe,Ze)},Ut.invert=function(qe,Ze){return h(Ze)>.7109889596207567?ne.invert(qe,Ze+(Ze>0?.0528035274542:-.0528035274542)):de.invert(qe,Ze)};var sr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],_r=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Ar=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],zt=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],ur=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Tt=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Qt(qe,Ze){return[3/C*qe*E(x*x/3-Ze*Ze),Ze]}function Er(qe){function Ze(nt,ht){if(h(h(ht)-f)<u)return[0,ht<0?-2:2];var xt=p(ht),yt=s((1+xt)/(1-xt),qe/2),Ot=.5*(yt+1/yt)+r(nt*=qe);return[2*p(nt)/Ot,(yt-1/yt)/Ot]}return Ze.invert=function(nt,ht){var xt=h(ht);if(h(xt-2)<u)return nt?null:[0,l(ht)*f];if(xt>2)return null;var yt=(nt/=2)*nt,Ot=(ht/=2)*ht,ir=2*ht/(1+yt+Ot);return ir=s((1+ir)/(1-ir),1/qe),[n(2*nt,1-yt-Ot)/qe,P((ir-1)/(ir+1))]},Ze}Qt.invert=function(qe,Ze){return[C/3*qe/E(x*x/3-Ze*Ze),Ze]};var zr=x/k;function an(qe,Ze){return[qe*(1+E(r(Ze)))/2,Ze/(r(Ze/2)*r(qe/6))]}function Kr(qe,Ze){var nt=qe*qe,ht=Ze*Ze;return[qe*(.975534+ht*(-.0143059*nt-.119161+-.0547009*ht)),Ze*(1.00384+nt*(.0802894+-.02855*ht+199025e-9*nt)+ht*(.0998909+-.0491032*ht))]}function sn(qe,Ze){return[p(qe)/r(Ze),g(Ze)*r(qe)]}function gn(qe){var Ze=r(qe),nt=g(T+qe/2);function ht(xt,yt){var Ot=yt-qe,ir=h(Ot)<u?xt*Ze:h(ir=T+yt/2)<u||h(h(ir)-f)<u?0:xt*Ot/d(g(ir)/nt);return[ir,Ot]}return ht.invert=function(xt,yt){var Ot,ir=yt+qe;return[h(yt)<u?xt/Ze:h(Ot=T+ir/2)<u||h(h(Ot)-f)<u?0:xt*d(g(Ot)/nt)/yt,ir]},ht}function zn(qe,Ze){return[qe,1.25*d(g(T+.4*Ze))]}function Vr(qe){var Ze=qe.length-1;function nt(ht,xt){for(var yt,Ot=r(xt),ir=2/(1+Ot*r(ht)),or=ir*Ot*p(ht),er=ir*p(xt),dr=Ze,kr=qe[dr],Lr=kr[0],Ir=kr[1];--dr>=0;)Lr=(kr=qe[dr])[0]+or*(yt=Lr)-er*Ir,Ir=kr[1]+or*Ir+er*yt;return[Lr=or*(yt=Lr)-er*Ir,Ir=or*Ir+er*yt]}return nt.invert=function(ht,xt){var yt=20,Ot=ht,ir=xt;do{for(var or,er=Ze,dr=qe[er],kr=dr[0],Lr=dr[1],Ir=0,Wr=0;--er>=0;)Ir=kr+Ot*(or=Ir)-ir*Wr,Wr=Lr+Ot*Wr+ir*or,kr=(dr=qe[er])[0]+Ot*(or=kr)-ir*Lr,Lr=dr[1]+Ot*Lr+ir*or;var mn,Tn,jn=(Ir=kr+Ot*(or=Ir)-ir*Wr)*Ir+(Wr=Lr+Ot*Wr+ir*or)*Wr;Ot-=mn=((kr=Ot*(or=kr)-ir*Lr-ht)*Ir+(Lr=Ot*Lr+ir*or-xt)*Wr)/jn,ir-=Tn=(Lr*Ir-kr*Wr)/jn}while(h(mn)+h(Tn)>1e-12&&--yt>0);if(yt){var Gn=E(Ot*Ot+ir*ir),ei=2*e(.5*Gn),Yn=p(ei);return[n(Ot*Yn,Gn*r(ei)),Gn?P(ir*Yn/Gn):0]}},nt}an.invert=function(qe,Ze){var nt=h(qe),ht=h(Ze),xt=u,yt=f;ht<zr?yt*=ht/zr:xt+=6*S(zr/ht);for(var Ot=0;Ot<25;Ot++){var ir=p(yt),or=E(r(yt)),er=p(yt/2),dr=r(yt/2),kr=p(xt/6),Lr=r(xt/6),Ir=.5*xt*(1+or)-nt,Wr=yt/(dr*Lr)-ht,mn=or?-.25*xt*ir/or:0,Tn=.5*(1+or),jn=(1+.5*yt*er/dr)/(dr*Lr),Gn=yt/dr*(kr/6)/(Lr*Lr),ei=mn*Gn-jn*Tn,Yn=(Ir*Gn-Wr*Tn)/ei,Mi=(Wr*mn-Ir*jn)/ei;if(yt-=Yn,xt-=Mi,h(Yn)<u&&h(Mi)<u)break}return[qe<0?-xt:xt,Ze<0?-yt:yt]},Kr.invert=function(qe,Ze){var nt=l(qe)*x,ht=Ze/2,xt=50;do{var yt=nt*nt,Ot=ht*ht,ir=nt*ht,or=nt*(.975534+Ot*(-.0143059*yt-.119161+-.0547009*Ot))-qe,er=ht*(1.00384+yt*(.0802894+-.02855*Ot+199025e-9*yt)+Ot*(.0998909+-.0491032*Ot))-Ze,dr=.975534-Ot*(.119161+3*yt*.0143059+.0547009*Ot),kr=-ir*(.238322+.2188036*Ot+.0286118*yt),Lr=ir*(.1605788+7961e-7*yt+-.0571*Ot),Ir=1.00384+yt*(.0802894+199025e-9*yt)+Ot*(3*(.0998909-.02855*yt)-.245516*Ot),Wr=kr*Lr-Ir*dr,mn=(er*kr-or*Ir)/Wr,Tn=(or*Lr-er*dr)/Wr;nt-=mn,ht-=Tn}while((h(mn)>u||h(Tn)>u)&&--xt>0);return xt&&[nt,ht]},sn.invert=function(qe,Ze){var nt=qe*qe,ht=Ze*Ze+1,xt=nt+ht,yt=qe?_*E((xt-E(xt*xt-4*nt))/nt):1/E(ht);return[P(qe*yt),l(Ze)*S(yt)]},zn.invert=function(qe,Ze){return[qe,2.5*e(o(.8*Ze))-.625*x]};var _n=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Qr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Jr=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Nn=[[.9245,0],[0,0],[.01943,0]],Hn=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Mn(qe,Ze){var nt=v.geoProjection(Vr(qe)).rotate(Ze).clipAngle(90),ht=v.geoRotation(Ze),xt=nt.center;return delete nt.rotate,nt.center=function(yt){return arguments.length?xt(ht(yt)):ht.invert(xt())},nt}var Un=E(6),di=E(7);function rr(qe,Ze){var nt=P(7*p(Ze)/(3*Un));return[Un*qe*(2*r(2*nt/3)-1)/di,9*p(nt/3)/di]}function Sr(qe,Ze){for(var nt,ht=(1+_)*p(Ze),xt=Ze,yt=0;yt<25&&(xt-=nt=(p(xt/2)+p(xt)-ht)/(.5*r(xt/2)+r(xt)),!(h(nt)<u));yt++);return[qe*(1+2*r(xt)/r(xt/2))/(3*k),2*E(3)*p(xt/2)/E(2+k)]}function Rt(qe,Ze){for(var nt,ht=E(6/(4+x)),xt=(1+x/4)*p(Ze),yt=Ze/2,Ot=0;Ot<25&&(yt-=nt=(yt/2+p(yt)-xt)/(.5+r(yt)),!(h(nt)<u));Ot++);return[ht*(.5+r(yt))*qe/1.5,ht*yt]}function gr(qe,Ze){var nt=Ze*Ze,ht=nt*nt,xt=nt*ht;return[qe*(.84719-.13063*nt+xt*xt*(.05494*nt-.04515-.02326*ht+.00331*xt)),Ze*(1.01183+ht*ht*(.01926*nt-.02625-.00396*ht))]}function xr(qe,Ze){return[qe*(1+r(Ze))/2,2*(Ze-g(Ze/2))]}rr.invert=function(qe,Ze){var nt=3*P(Ze*di/9);return[qe*di/(Un*(2*r(2*nt/3)-1)),P(3*p(nt)*Un/7)]},Sr.invert=function(qe,Ze){var nt=Ze*E(2+k)/(2*E(3)),ht=2*P(nt);return[3*k*qe/(1+2*r(ht)/r(ht/2)),P((nt+p(ht))/(1+_))]},Rt.invert=function(qe,Ze){var nt=E(6/(4+x)),ht=Ze/nt;return h(h(ht)-f)<u&&(ht=ht<0?-f:f),[1.5*qe/(nt*(.5+r(ht))),P((ht/2+p(ht))/(1+x/4))]},gr.invert=function(qe,Ze){var nt,ht,xt,yt,Ot=Ze,ir=25;do{Ot-=nt=(Ot*(1.01183+(xt=(ht=Ot*Ot)*ht)*xt*(.01926*ht-.02625-.00396*xt))-Ze)/(1.01183+xt*xt*(.21186*ht-.23625+-.05148*xt))}while(h(nt)>1e-12&&--ir>0);return[qe/(.84719-.13063*(ht=Ot*Ot)+(yt=ht*(xt=ht*ht))*yt*(.05494*ht-.04515-.02326*xt+.00331*yt)),Ot]},xr.invert=function(qe,Ze){for(var nt=Ze/2,ht=0,xt=1/0;ht<10&&h(xt)>u;++ht){var yt=r(Ze/2);Ze-=xt=(Ze-g(Ze/2)-nt)/(1-.5/(yt*yt))}return[2*qe/(1+r(Ze)),Ze]};var Zr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ur(qe,Ze){var nt=p(Ze),ht=r(Ze),xt=l(qe);if(0===qe||h(Ze)===f)return[0,Ze];if(0===Ze)return[qe,0];if(h(qe)===f)return[qe*ht,f*nt];var yt=x/(2*qe)-2*qe/x,Ot=2*Ze/x,ir=(1-Ot*Ot)/(nt-Ot),or=yt*yt,er=ir*ir,dr=1+or/er,kr=1+er/or,Lr=(yt*nt/ir-yt/2)/dr,Ir=(er*nt/or+ir/2)/kr,Wr=Ir*Ir-(er*nt*nt/or+ir*nt-1)/kr;return[f*(Lr+E(Lr*Lr+ht*ht/dr)*xt),f*(Ir+E(Wr<0?0:Wr)*l(-Ze*yt)*xt)]}function Yr(qe,Ze){var nt=Ze*Ze;return[qe,Ze*(1.0148+nt*nt*(.23185+nt*(.02406*nt-.14499)))]}function Br(qe,Ze){if(h(Ze)<u)return[qe,0];var nt=g(Ze),ht=qe*p(Ze);return[p(ht)/nt,Ze+(1-r(ht))/nt]}function Or(qe,Ze){return[qe[0]*Ze[0]+qe[1]*Ze[3],qe[0]*Ze[1]+qe[1]*Ze[4],qe[0]*Ze[2]+qe[1]*Ze[5]+qe[2],qe[3]*Ze[0]+qe[4]*Ze[3],qe[3]*Ze[1]+qe[4]*Ze[4],qe[3]*Ze[2]+qe[4]*Ze[5]+qe[5]]}function Dr(qe,Ze){return[qe[0]-Ze[0],qe[1]-Ze[1]]}function Nr(qe){return E(qe[0]*qe[0]+qe[1]*qe[1])}function nn(qe,Ze,nt){function ht(Ot,ir){var or,er=Ze(Ot,ir),dr=er.project([Ot*A,ir*A]);return(or=er.transform)?[or[0]*dr[0]+or[1]*dr[1]+or[2],-(or[3]*dr[0]+or[4]*dr[1]+or[5])]:(dr[1]=-dr[1],dr)}(function Ot(ir,or){if(ir.edges=function(Wr){for(var mn=Wr.length,Tn=[],jn=Wr[mn-1],Gn=0;Gn<mn;++Gn)Tn.push([jn,jn=Wr[Gn]]);return Tn}(ir.face),or.face){var er=ir.shared=function(Wr,mn){for(var Tn,jn,Gn=Wr.length,ei=null,Yn=0;Yn<Gn;++Yn){Tn=Wr[Yn];for(var Mi=mn.length;--Mi>=0;)if(Tn[0]===(jn=mn[Mi])[0]&&Tn[1]===jn[1]){if(ei)return[ei,Tn];ei=Tn}}}(ir.face,or.face),dr=function Cr(qe,Ze){var Ot,ir,nt=Dr(qe[1],qe[0]),ht=Dr(Ze[1],Ze[0]),xt=n((Ot=nt)[0]*(ir=ht)[1]-Ot[1]*ir[0],Ot[0]*ir[0]+Ot[1]*ir[1]),yt=Nr(nt)/Nr(ht);return Or([1,0,qe[0][0],0,1,qe[0][1]],Or([yt,0,0,0,yt,0],Or([r(xt),p(xt),0,-p(xt),r(xt),0],[1,0,-Ze[0][0],0,1,-Ze[0][1]])))}(er.map(or.project),er.map(ir.project));ir.transform=or.transform?Or(or.transform,dr):dr;for(var kr=or.edges,Lr=0,Ir=kr.length;Lr<Ir;++Lr)rn(er[0],kr[Lr][1])&&rn(er[1],kr[Lr][0])&&(kr[Lr]=ir),rn(er[0],kr[Lr][0])&&rn(er[1],kr[Lr][1])&&(kr[Lr]=ir);for(Lr=0,Ir=(kr=ir.edges).length;Lr<Ir;++Lr)rn(er[0],kr[Lr][0])&&rn(er[1],kr[Lr][1])&&(kr[Lr]=or),rn(er[0],kr[Lr][1])&&rn(er[1],kr[Lr][0])&&(kr[Lr]=or)}else ir.transform=or.transform;return ir.children&&ir.children.forEach(function(Wr){Ot(Wr,ir)}),ir})(qe,{transform:null}),pn(qe)&&(ht.invert=function(Ot,ir){var or=function er(dr,kr){var ei,Yn,Lr=dr.project.invert,Ir=dr.transform,Wr=kr;if(Ir&&(Wr=[(Ir=[(Yn=1/((ei=Ir)[0]*ei[4]-ei[1]*ei[3]))*ei[4],-Yn*ei[1],Yn*(ei[1]*ei[5]-ei[2]*ei[4]),-Yn*ei[3],Yn*ei[0],Yn*(ei[2]*ei[3]-ei[0]*ei[5])])[0]*Wr[0]+Ir[1]*Wr[1]+Ir[2],Ir[3]*Wr[0]+Ir[4]*Wr[1]+Ir[5]]),Lr&&dr===function(ei){return Ze(ei[0]*O,ei[1]*O)}(mn=Lr(Wr)))return mn;for(var mn,Tn=dr.children,jn=0,Gn=Tn&&Tn.length;jn<Gn;++jn)if(mn=er(Tn[jn],kr))return mn}(qe,[Ot,-ir]);return or&&(or[0]*=O,or[1]*=O,or)});var xt=v.geoProjection(ht),yt=xt.stream;return xt.stream=function(Ot){var ir=xt.rotate(),or=yt(Ot),er=(xt.rotate([0,0]),yt(Ot));return xt.rotate(ir),or.sphere=function(){er.polygonStart(),er.lineStart(),function dr(kr,Lr,Ir){var Wr,mn,Tn=Lr.edges,jn=Tn.length,Gn={type:"MultiPoint",coordinates:Lr.face},ei=Lr.face.filter(function(Da){return 90!==h(Da[1])}),Yn=v.geoBounds({type:"MultiPoint",coordinates:ei}),Mi=!1,Ri=-1,Qi=Yn[1][0]-Yn[0][0],Ki=180===Qi||360===Qi?[(Yn[0][0]+Yn[1][0])/2,(Yn[0][1]+Yn[1][1])/2]:v.geoCentroid(Gn);if(Ir)for(;++Ri<jn&&Tn[Ri]!==Ir;);++Ri;for(var ea=0;ea<jn;++ea)mn=Tn[(ea+Ri)%jn],Array.isArray(mn)?(Mi||(kr.point((Wr=v.geoInterpolate(mn[0],Ki)(u))[0],Wr[1]),Mi=!0),kr.point((Wr=v.geoInterpolate(mn[1],Ki)(u))[0],Wr[1])):(Mi=!1,mn!==Ir&&dr(kr,mn,Lr))}(er,qe),er.lineEnd(),er.polygonEnd()},or},xt.angle(null==nt?-30:nt*A)}function rn(qe,Ze){return qe&&Ze&&qe[0]===Ze[0]&&qe[1]===Ze[1]}function pn(qe){return qe.project.invert||qe.children&&qe.children.some(pn)}Ur.invert=function(qe,Ze){var nt=(qe/=f)*qe,ht=nt+(Ze/=f)*Ze,xt=x*x;return[qe?(ht-1+E((1-ht)*(1-ht)+4*nt))/(2*qe)*f:0,ee(function(yt){return ht*(x*p(yt)-2*yt)*x+4*yt*yt*(Ze-p(yt))+2*x*yt-xt*Ze},0)]},Yr.invert=function(qe,Ze){Ze>1.790857183?Ze=1.790857183:Ze<-1.790857183&&(Ze=-1.790857183);var nt,ht=Ze;do{var xt=ht*ht;ht-=nt=(ht*(1.0148+xt*xt*(.23185+xt*(.02406*xt-.14499)))-Ze)/(1.0148+xt*xt*(5*.23185+xt*(.21654*xt-1.01493)))}while(h(nt)>u);return[qe,ht]},Br.invert=function(qe,Ze){if(h(Ze)<u)return[qe,0];var nt,ht=qe*qe+Ze*Ze,xt=.5*Ze,yt=10;do{var Ot=g(xt),ir=1/r(xt),or=ht-2*Ze*xt+xt*xt;xt-=nt=(Ot*or+2*(xt-Ze))/(2+or*ir*ir+2*(xt-Ze)*Ot)}while(h(nt)>u&&--yt>0);return Ot=g(xt),[(h(Ze)<h(xt+1/Ot)?P(qe*Ot):l(Ze)*l(qe)*(S(h(qe*Ot))+f))/p(xt),xt]};var dn=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Sn=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(qe){return qe.map(function(Ze){return dn[Ze]})}),En=2/E(3);function Ln(qe,Ze){var nt=Fe(qe,Ze);return[nt[0]*En,nt[1]]}function Fn(qe,Ze){for(var nt=0,ht=qe.length,xt=0;nt<ht;++nt)xt+=qe[nt]*Ze[nt];return xt}function qn(qe){return[n(qe[1],qe[0])*A,P(a(-1,i(1,qe[2])))*A]}function ni(qe){var Ze=qe[0]*O,nt=qe[1]*O,ht=r(nt);return[ht*r(Ze),ht*p(Ze),p(nt)]}function zi(){}function Di(qe,Ze){return{type:"FeatureCollection",features:qe.features.map(function(nt){return Dn(nt,Ze)})}}function Dn(qe,Ze){return{type:"Feature",id:qe.id,properties:qe.properties,geometry:si(qe.geometry,Ze)}}function si(qe,Ze){if(!qe)return null;if("GeometryCollection"===qe.type)return xt=Ze,{type:"GeometryCollection",geometries:qe.geometries.map(function(yt){return si(yt,xt)})};var xt,nt;switch(qe.type){case"Point":case"MultiPoint":nt=ka;break;case"LineString":case"MultiLineString":nt=Va;break;case"Polygon":case"MultiPolygon":case"Sphere":nt=ao;break;default:return null}return v.geoStream(qe,Ze(nt)),nt.result()}Ln.invert=function(qe,Ze){return Fe.invert(qe/En,Ze)};var ai=[],Wi=[],ka={point:function(qe,Ze){ai.push([qe,Ze])},result:function(){var qe=ai.length?ai.length<2?{type:"Point",coordinates:ai[0]}:{type:"MultiPoint",coordinates:ai}:null;return ai=[],qe}},Va={lineStart:zi,point:function(qe,Ze){ai.push([qe,Ze])},lineEnd:function(){ai.length&&(Wi.push(ai),ai=[])},result:function(){var qe=Wi.length?Wi.length<2?{type:"LineString",coordinates:Wi[0]}:{type:"MultiLineString",coordinates:Wi}:null;return Wi=[],qe}},ao={polygonStart:zi,lineStart:zi,point:function(qe,Ze){ai.push([qe,Ze])},lineEnd:function(){var qe=ai.length;if(qe){do{ai.push(ai[0].slice())}while(++qe<4);Wi.push(ai),ai=[]}},polygonEnd:zi,result:function(){if(!Wi.length)return null;var qe=[],Ze=[];return Wi.forEach(function(nt){!function(ht){if((xt=ht.length)<4)return!1;for(var xt,yt=0,Ot=ht[xt-1][1]*ht[0][0]-ht[xt-1][0]*ht[0][1];++yt<xt;)Ot+=ht[yt-1][1]*ht[yt][0]-ht[yt-1][0]*ht[yt][1];return Ot<=0}(nt)?Ze.push(nt):qe.push([nt])}),Ze.forEach(function(nt){var ht=nt[0];qe.some(function(xt){if(function(yt,Ot){for(var ir=Ot[0],or=Ot[1],er=!1,dr=0,kr=yt.length,Lr=kr-1;dr<kr;Lr=dr++){var Ir=yt[dr],Wr=Ir[0],mn=Ir[1],Tn=yt[Lr],Gn=Tn[1];mn>or^Gn>or&&ir<(Tn[0]-Wr)*(or-mn)/(Gn-mn)+Wr&&(er=!er)}return er}(xt[0],ht))return xt.push(nt),!0})||qe.push([nt])}),Wi=[],qe.length?qe.length>1?{type:"MultiPolygon",coordinates:qe}:{type:"Polygon",coordinates:qe[0]}:null}};function Bi(qe){var Ze=qe(f,0)[0]-qe(-f,0)[0];function nt(ht,xt){var yt=h(ht)<f,Ot=qe(yt?ht:ht>0?ht-x:ht+x,xt),ir=(Ot[0]-Ot[1])*_,or=(Ot[0]+Ot[1])*_;if(yt)return[ir,or];var er=Ze*_,dr=ir>0^or>0?-1:1;return[dr*ir-l(or)*er,dr*or-l(ir)*er]}return qe.invert&&(nt.invert=function(ht,xt){var yt=(ht+xt)*_,Ot=(xt-ht)*_,ir=h(yt)<.5*Ze&&h(Ot)<.5*Ze;if(!ir){var or=Ze*_,er=yt>0^Ot>0?-1:1,dr=-er*ht+(Ot>0?1:-1)*or,kr=-er*xt+(yt>0?1:-1)*or;yt=(-dr-kr)*_,Ot=(dr-kr)*_}var Lr=qe.invert(yt,Ot);return ir||(Lr[0]+=yt>0?x:-x),Lr}),v.geoProjection(nt).rotate([-90,-90,45]).clipAngle(179.999)}function ra(){return Bi(Ft).scale(111.48)}function co(qe){var Ze=p(qe);function nt(ht,xt){var yt=Ze?g(ht*Ze/2)/Ze:ht/2;if(!xt)return[2*yt,-qe];var Ot=2*e(yt*p(xt)),ir=1/g(xt);return[p(Ot)*ir,xt+(1-r(Ot))*ir-qe]}return nt.invert=function(ht,xt){if(h(xt+=qe)<u)return[Ze?2*e(Ze*ht/2)/Ze:ht,0];var yt,Ot=ht*ht+xt*xt,ir=0,or=10;do{var er=g(ir),dr=1/r(ir),kr=Ot-2*xt*ir+ir*ir;ir-=yt=(er*kr+2*(ir-xt))/(2+kr*dr*dr+2*(ir-xt)*er)}while(h(yt)>u&&--or>0);var Lr=ht*(er=g(ir)),Ir=g(h(xt)<h(ir+1/er)?.5*P(Lr):.5*S(Lr)+x/4)/p(ir);return[Ze?2*e(Ze*Ir)/Ze:2*Ir,ir]},nt}var Ji=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function _o(qe,Ze){var nt,ht=i(18,36*h(Ze)/x),xt=t(ht),yt=ht-xt,Ot=(nt=Ji[xt])[0],ir=nt[1],or=(nt=Ji[++xt])[0],er=nt[1],dr=(nt=Ji[i(19,++xt)])[0],kr=nt[1];return[qe*(or+yt*(dr-Ot)/2+yt*yt*(dr-2*or+Ot)/2),(Ze>0?f:-f)*(er+yt*(kr-ir)/2+yt*yt*(kr-2*er+ir)/2)]}function uo(qe,Ze){var nt=function(Ot){function ir(or,er){var dr=r(er),kr=(Ot-1)/(Ot-dr*r(or));return[kr*dr*p(or),kr*p(er)]}return ir.invert=function(or,er){var dr=or*or+er*er,kr=E(dr),Lr=(Ot-E(1-dr*(Ot+1)/(Ot-1)))/((Ot-1)/kr+kr/(Ot-1));return[n(or*Lr,kr*E(1-Lr*Lr)),kr?P(er*Lr/kr):0]},ir}(qe);if(!Ze)return nt;var ht=r(Ze),xt=p(Ze);function yt(Ot,ir){var or=nt(Ot,ir),er=or[1],dr=er*xt/(qe-1)+ht;return[or[0]*ht/dr,er/dr]}return yt.invert=function(Ot,ir){var or=(qe-1)/(qe-1-ir*xt);return nt.invert(or*Ot,or*ir*ht)},yt}Ji.forEach(function(qe){qe[1]*=1.0144}),_o.invert=function(qe,Ze){var nt=Ze/f,ht=90*nt,xt=i(18,h(ht/5)),yt=a(0,t(xt));do{var Ot=Ji[yt][1],ir=Ji[yt+1][1],or=Ji[i(19,yt+2)][1],er=or-Ot,dr=or-2*ir+Ot,kr=2*(h(nt)-ir)/er,Lr=dr/er,Ir=kr*(1-Lr*kr*(1-2*Lr*kr));if(Ir>=0||1===yt){ht=(Ze>=0?5:-5)*(Ir+xt);var Wr,mn=50;do{Ir=(xt=i(18,h(ht)/5))-(yt=t(xt)),Ot=Ji[yt][1],ir=Ji[yt+1][1],or=Ji[i(19,yt+2)][1],ht-=(Wr=(Ze>=0?f:-f)*(ir+Ir*(or-Ot)/2+Ir*Ir*(or-2*ir+Ot)/2)-Ze)*A}while(h(Wr)>1e-12&&--mn>0);break}}while(--yt>=0);var Tn=Ji[yt][0],jn=Ji[yt+1][0],Gn=Ji[i(19,yt+2)][0];return[qe/(jn+Ir*(Gn-Tn)/2+Ir*Ir*(Gn-2*jn+Tn)/2),ht*O]};var Ia=-179.9999,fo=179.9999,Ao=-89.9999;function Mo(qe){return qe.length>0}function Ja(qe){return-90===qe||90===qe?[0,qe]:[-180,(Ze=qe,Math.floor(1e4*Ze)/1e4)];var Ze}function _a(qe){var Ze=qe[0],nt=qe[1],ht=!1;return Ze<=Ia?(Ze=-180,ht=!0):Ze>=fo&&(Ze=180,ht=!0),nt<=Ao?(nt=-90,ht=!0):nt>=89.9999&&(nt=90,ht=!0),ht?[Ze,nt]:qe}function to(qe){return qe.map(_a)}function Ts(qe,Ze,nt){for(var ht=0,xt=qe.length;ht<xt;++ht){var yt=qe[ht].slice();nt.push({index:-1,polygon:Ze,ring:yt});for(var Ot=0,ir=yt.length;Ot<ir;++Ot){var or=yt[Ot],er=or[0],dr=or[1];if(er<=Ia||er>=fo||dr<=Ao||dr>=89.9999){yt[Ot]=_a(or);for(var kr=Ot+1;kr<ir;++kr){var Lr=yt[kr],Ir=Lr[0],Wr=Lr[1];if(Ir>Ia&&Ir<fo&&Wr>Ao&&Wr<89.9999)break}if(kr===Ot+1)continue;if(Ot){var mn={index:-1,polygon:Ze,ring:yt.slice(0,Ot+1)};mn.ring[mn.ring.length-1]=Ja(dr),nt[nt.length-1]=mn}else nt.pop();if(kr>=ir)break;nt.push({index:-1,polygon:Ze,ring:yt=yt.slice(kr-1)}),yt[0]=Ja(yt[0][1]),Ot=-1,ir=yt.length}}}}function Ls(qe){var Ze,nt,ht,xt,yt,Ot,ir=qe.length,or={},er={};for(Ze=0;Ze<ir;++Ze)(ht=(nt=qe[Ze]).ring[0])[0]!==(yt=nt.ring[nt.ring.length-1])[0]||ht[1]!==yt[1]?(nt.index=Ze,or[ht]=er[yt]=nt):(nt.polygon.push(nt.ring),qe[Ze]=null);for(Ze=0;Ze<ir;++Ze)if(nt=qe[Ze]){if(xt=er[ht=nt.ring[0]],Ot=or[yt=nt.ring[nt.ring.length-1]],delete or[ht],delete er[yt],ht[0]===yt[0]&&ht[1]===yt[1]){nt.polygon.push(nt.ring);continue}xt?(delete er[ht],delete or[xt.ring[0]],xt.ring.pop(),qe[xt.index]=null,nt={index:-1,polygon:xt.polygon,ring:xt.ring.concat(nt.ring)},xt===Ot?nt.polygon.push(nt.ring):(nt.index=ir++,qe.push(or[nt.ring[0]]=er[nt.ring[nt.ring.length-1]]=nt))):Ot?(delete or[yt],delete er[Ot.ring[Ot.ring.length-1]],nt.ring.pop(),nt={index:ir++,polygon:Ot.polygon,ring:nt.ring.concat(Ot.ring)},qe[Ot.index]=null,qe.push(or[nt.ring[0]]=er[nt.ring[nt.ring.length-1]]=nt)):(nt.ring.push(nt.ring[0]),nt.polygon.push(nt.ring))}}function na(qe){var Ze={type:"Feature",geometry:ys(qe.geometry)};return null!=qe.id&&(Ze.id=qe.id),null!=qe.bbox&&(Ze.bbox=qe.bbox),null!=qe.properties&&(Ze.properties=qe.properties),Ze}function ys(qe){if(null==qe)return qe;var Ze,nt,ht,xt;switch(qe.type){case"GeometryCollection":Ze={type:"GeometryCollection",geometries:qe.geometries.map(ys)};break;case"Point":Ze={type:"Point",coordinates:_a(qe.coordinates)};break;case"MultiPoint":case"LineString":Ze={type:qe.type,coordinates:to(qe.coordinates)};break;case"MultiLineString":Ze={type:"MultiLineString",coordinates:qe.coordinates.map(to)};break;case"Polygon":var yt=[];Ts(qe.coordinates,yt,nt=[]),Ls(nt),Ze={type:"Polygon",coordinates:yt};break;case"MultiPolygon":nt=[],ht=-1,xt=qe.coordinates.length;for(var Ot=new Array(xt);++ht<xt;)Ts(qe.coordinates[ht],Ot[ht]=[],nt);Ls(nt),Ze={type:"MultiPolygon",coordinates:Ot.filter(Mo)};break;default:return qe}return null!=qe.bbox&&(Ze.bbox=qe.bbox),Ze}function as(qe,Ze){var nt=g(Ze/2),ht=p(T*nt);return[qe*(.74482-.34588*ht*ht),1.70711*nt]}function ks(qe,Ze,nt){var ht=v.geoInterpolate(Ze,nt),xt=ht(.5),yt=v.geoRotation([-xt[0],-xt[1]])(Ze),Ot=ht.distance/2,ir=-P(p(yt[1]*O)/p(Ot)),or=[-xt[0],-xt[1],-(yt[0]>0?x-ir:ir)*A],er=v.geoProjection(qe(Ot)).rotate(or),dr=v.geoRotation(or),kr=er.center;return delete er.rotate,er.center=function(Lr){return arguments.length?kr(dr(Lr)):dr.invert(kr())},er.clipAngle(90)}function As(qe){var Ze=r(qe);function nt(ht,xt){var yt=v.geoGnomonicRaw(ht,xt);return yt[0]*=Ze,yt}return nt.invert=function(ht,xt){return v.geoGnomonicRaw.invert(ht/Ze,xt)},nt}function ho(qe,Ze){return ks(As,qe,Ze)}function Fs(qe){if(!(qe*=2))return v.geoAzimuthalEquidistantRaw;var Ze=-qe/2,nt=-Ze,ht=qe*qe,xt=g(nt),yt=.5/p(nt);function Ot(ir,or){var er=S(r(or)*r(ir-Ze)),dr=S(r(or)*r(ir-nt));return[((er*=er)-(dr*=dr))/(2*qe),(or<0?-1:1)*E(4*ht*dr-(ht-er+dr)*(ht-er+dr))/(2*qe)]}return Ot.invert=function(ir,or){var er,dr,kr=or*or,Lr=r(E(kr+(er=ir+Ze)*er)),Ir=r(E(kr+(er=ir+nt)*er));return[n(dr=Lr-Ir,er=(Lr+Ir)*xt),(or<0?-1:1)*S(E(er*er+dr*dr)*yt)]},Ot}function jo(qe,Ze){return ks(Fs,qe,Ze)}function Uo(qe,Ze){if(h(Ze)<u)return[qe,0];var nt=h(Ze/f),ht=P(nt);if(h(qe)<u||h(h(Ze)-f)<u)return[0,l(Ze)*x*g(ht/2)];var xt=r(ht),yt=h(x/qe-qe/x)/2,Ot=yt*yt,ir=xt/(nt+xt-1),or=ir*(2/nt-1),er=or*or,dr=er+Ot,kr=ir-er,Lr=Ot+ir;return[l(qe)*x*(yt*kr+E(Ot*kr*kr-dr*(ir*ir-er)))/dr,l(Ze)*x*(or*Lr-yt*E((Ot+1)*dr-Lr*Lr))/dr]}function ns(qe,Ze){if(h(Ze)<u)return[qe,0];var nt=h(Ze/f),ht=P(nt);if(h(qe)<u||h(h(Ze)-f)<u)return[0,l(Ze)*x*g(ht/2)];var xt=r(ht),yt=h(x/qe-qe/x)/2,Ot=yt*yt,ir=xt*(E(1+Ot)-yt*xt)/(1+Ot*nt*nt);return[l(qe)*x*ir,l(Ze)*x*E(1-ir*(2*yt+ir))]}function Ka(qe,Ze){if(h(Ze)<u)return[qe,0];var nt=Ze/f,ht=P(nt);if(h(qe)<u||h(h(Ze)-f)<u)return[0,x*g(ht/2)];var xt=(x/qe-qe/x)/2,yt=nt/(1+r(ht));return[x*(l(qe)*E(xt*xt+1-yt*yt)-xt),x*yt]}function Zo(qe,Ze){if(!Ze)return[qe,0];var nt=h(Ze);if(!qe||nt===f)return[0,Ze];var ht=nt/f,xt=ht*ht,yt=(8*ht-xt*(xt+2)-5)/(2*xt*(ht-1)),Ot=yt*yt,ir=ht*yt,or=xt+Ot+2*ir,er=ht+3*yt,dr=qe/f,kr=dr+1/dr,Lr=l(h(qe)-f)*E(kr*kr-4),Ir=Lr*Lr,Wr=(Lr*(or+Ot-1)+2*E(or*(xt+Ot*Ir-1)+(1-xt)*(xt*(er*er+4*Ot)+12*ir*Ot+4*Ot*Ot)))/(4*or+Ir);return[l(qe)*f*Wr,l(Ze)*f*E(1+Lr*h(Wr)-Wr*Wr)]}function Vo(qe,Ze,nt,ht){var xt=x/3;qe=a(qe,u),Ze=a(Ze,u),qe=i(qe,f),Ze=i(Ze,x-u),nt=a(nt,0),nt=i(nt,100-u);var yt=(ht=a(ht,u))/100,Ot=S((nt/100+1)*r(xt))/xt,ir=p(qe)/p(Ot*f),or=Ze/x,er=E(yt*p(qe/2)/p(Ze/2));return function(dr,kr,Lr,Ir,Wr){function mn(Tn,jn){var Gn=Lr*p(Ir*jn),ei=E(1-Gn*Gn),Yn=E(2/(1+ei*r(Tn*=Wr)));return[dr*ei*Yn*p(Tn),kr*Gn*Yn]}return mn.invert=function(Tn,jn){var Gn=Tn/dr,ei=jn/kr,Yn=E(Gn*Gn+ei*ei),Mi=2*P(Yn/2);return[n(Tn*g(Mi),dr*Yn)/Wr,Yn&&P(jn*p(Mi)/(kr*Lr*Yn))/Ir]},mn}(er/E(or*ir*Ot),1/(er*E(or*ir*Ot)),ir,Ot,or)}function wa(){var qe=65*O,Ze=60*O,nt=20,ht=200,xt=v.geoProjectionMutator(Vo),yt=xt(qe,Ze,nt,ht);return yt.poleline=function(Ot){return arguments.length?xt(qe=+Ot*O,Ze,nt,ht):qe*A},yt.parallels=function(Ot){return arguments.length?xt(qe,Ze=+Ot*O,nt,ht):Ze*A},yt.inflation=function(Ot){return arguments.length?xt(qe,Ze,nt=+Ot,ht):nt},yt.ratio=function(Ot){return arguments.length?xt(qe,Ze,nt,ht=+Ot):ht},yt.scale(163.775)}as.invert=function(qe,Ze){var nt=Ze/1.70711,ht=p(T*nt);return[qe/(.74482-.34588*ht*ht),2*e(nt)]},Uo.invert=function(qe,Ze){if(h(Ze)<u)return[qe,0];if(h(qe)<u)return[0,f*p(2*e(Ze/x))];var nt=(qe/=x)*qe,ht=(Ze/=x)*Ze,xt=nt+ht,yt=xt*xt,Ot=-h(Ze)*(1+xt),ir=Ot-2*ht+nt,or=-2*Ot+1+2*ht+yt,er=ht/or+(2*ir*ir*ir/(or*or*or)-9*Ot*ir/(or*or))/27,dr=(Ot-ir*ir/(3*or))/or,kr=2*E(-dr/3),Lr=S(3*er/(dr*kr))/3;return[x*(xt-1+E(1+2*(nt-ht)+yt))/(2*qe),l(Ze)*x*(-kr*r(Lr+x/3)-ir/(3*or))]},ns.invert=function(qe,Ze){if(!qe)return[0,f*p(2*e(Ze/x))];var nt=h(qe/x),ht=(1-nt*nt-(Ze/=x)*Ze)/(2*nt),xt=E(ht*ht+1);return[l(qe)*x*(xt-ht),l(Ze)*f*p(2*n(E((1-2*ht*nt)*(ht+xt)-nt),E(xt+ht+nt)))]},Ka.invert=function(qe,Ze){if(!Ze)return[qe,0];var nt=Ze/x,ht=(x*x*(1-nt*nt)-qe*qe)/(2*x*qe);return[qe?x*(l(qe)*E(ht*ht+1)-ht):0,f*p(2*e(nt))]},Zo.invert=function(qe,Ze){var nt;if(!qe||!Ze)return[qe,Ze];Ze/=x;var ht=l(qe)*qe/f,xt=(ht*ht-1+4*Ze*Ze)/h(ht),yt=xt*xt,Ot=2*Ze,ir=50;do{var or=Ot*Ot,er=(8*Ot-or*(or+2)-5)/(2*or*(Ot-1)),dr=(3*Ot-or*Ot-10)/(2*or*Ot),kr=er*er,Lr=Ot*er,Ir=Ot+er,Wr=Ir*Ir,mn=Ot+3*er,Tn=-2*Ir*(4*Lr*kr+(1-4*or+3*or*or)*(1+dr)+kr*(14*or-6-yt+(8*or-8-2*yt)*dr)+Lr*(12*or-8+(10*or-10-yt)*dr)),jn=E(Wr*(or+kr*yt-1)+(1-or)*(or*(mn*mn+4*kr)+kr*(12*Lr+4*kr)));Ot-=nt=(xt*(Wr+kr-1)+2*jn-ht*(4*Wr+yt))/(xt*(2*er*dr+2*Ir*(1+dr))+Tn/jn-8*Ir*(xt*(-1+kr+Wr)+2*jn)*(1+dr)/(yt+4*Wr))}while(nt>u&&--ir>0);return[l(qe)*(E(xt*xt+4)+xt)*x/4,f*Ot]};var So=4*x+3*E(3),ro=2*E(2*x*E(3)/So),Xo=te(ro*E(3)/x,ro,So/6);function os(qe,Ze){return[qe*E(1-3*Ze*Ze/(x*x)),Ze]}function wo(qe,Ze){var nt=r(Ze),ht=r(qe)*nt,xt=1-ht,yt=r(qe=n(p(qe)*nt,-p(Ze))),Ot=p(qe);return[Ot*(nt=E(1-ht*ht))-yt*xt,-yt*nt-Ot*xt]}function ta(qe,Ze){var nt=V(qe,Ze);return[(nt[0]+qe/f)/2,(nt[1]+Ze)/2]}os.invert=function(qe,Ze){return[qe/E(1-3*Ze*Ze/(x*x)),Ze]},wo.invert=function(qe,Ze){var nt=(qe*qe+Ze*Ze)/-2,ht=E(-nt*(2+nt)),xt=Ze*nt+qe*ht,yt=qe*nt-Ze*ht,Ot=E(yt*yt+xt*xt);return[n(ht*xt,Ot*(1+nt)),Ot?-P(ht*yt/Ot):0]},ta.invert=function(qe,Ze){var nt=qe,ht=Ze,xt=25;do{var yt,Ot=r(ht),ir=p(ht),or=p(2*ht),er=ir*ir,dr=Ot*Ot,kr=p(nt),Lr=r(nt/2),Ir=p(nt/2),Wr=Ir*Ir,mn=1-dr*Lr*Lr,Tn=mn?S(Ot*Lr)*E(yt=1/mn):yt=0,jn=.5*(2*Tn*Ot*Ir+nt/f)-qe,Gn=.5*(Tn*ir+ht)-Ze,ei=.5*yt*(dr*Wr+Tn*Ot*Lr*er)+.5/f,Yn=yt*(kr*or/4-Tn*ir*Ir),Mi=.125*yt*(or*Ir-Tn*ir*dr*kr),Ri=.5*yt*(er*Lr+Tn*Wr*Ot)+.5,Qi=Yn*Mi-Ri*ei,Ki=(Gn*Yn-jn*Ri)/Qi,ea=(jn*Mi-Gn*ei)/Qi;nt-=Ki,ht-=ea}while((h(Ki)>u||h(ea)>u)&&--xt>0);return[nt,ht]},m.geoNaturalEarth=v.geoNaturalEarth1,m.geoNaturalEarthRaw=v.geoNaturalEarth1Raw,m.geoAiry=function(){var qe=f,Ze=v.geoProjectionMutator(N),nt=Ze(qe);return nt.radius=function(ht){return arguments.length?Ze(qe=ht*O):qe*A},nt.scale(179.976).clipAngle(147)},m.geoAiryRaw=N,m.geoAitoff=function(){return v.geoProjection(V).scale(152.63)},m.geoAitoffRaw=V,m.geoArmadillo=function(){var qe=20*O,Ze=qe>=0?1:-1,nt=g(Ze*qe),ht=v.geoProjectionMutator(X),xt=ht(qe),yt=xt.stream;return xt.parallel=function(Ot){return arguments.length?(nt=g((Ze=(qe=Ot*O)>=0?1:-1)*qe),ht(qe)):qe*A},xt.stream=function(Ot){var ir=xt.rotate(),or=yt(Ot),er=(xt.rotate([0,0]),yt(Ot)),dr=xt.precision();return xt.rotate(ir),or.sphere=function(){er.polygonStart(),er.lineStart();for(var kr=-180*Ze;Ze*kr<180;kr+=90*Ze)er.point(kr,90*Ze);if(qe)for(;Ze*(kr-=3*Ze*dr)>=-180;)er.point(kr,Ze*-n(r(kr*O/2),nt)*A);er.lineEnd(),er.polygonEnd()},or},xt.scale(218.695).center([0,28.0974])},m.geoArmadilloRaw=X,m.geoAugust=function(){return v.geoProjection(J).scale(66.1603)},m.geoAugustRaw=J,m.geoBaker=function(){return v.geoProjection(re).scale(112.314)},m.geoBakerRaw=re,m.geoBerghaus=function(){var qe=5,Ze=v.geoProjectionMutator(j),nt=Ze(qe),ht=nt.stream,xt=-r(.01*O),yt=p(.01*O);return nt.lobes=function(Ot){return arguments.length?Ze(qe=+Ot):qe},nt.stream=function(Ot){var ir=nt.rotate(),or=ht(Ot),er=(nt.rotate([0,0]),ht(Ot));return nt.rotate(ir),or.sphere=function(){er.polygonStart(),er.lineStart();for(var dr=0,kr=360/qe,Lr=2*x/qe,Ir=90-180/qe,Wr=f;dr<qe;++dr,Ir-=kr,Wr-=Lr)er.point(n(yt*r(Wr),xt)*A,P(yt*p(Wr))*A),Ir<-90?(er.point(-90,-180-Ir-.01),er.point(-90,-180-Ir+.01)):(er.point(90,Ir+.01),er.point(90,Ir-.01));er.lineEnd(),er.polygonEnd()},or},nt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},m.geoBerghausRaw=j,m.geoBertin1953=function(){return v.geoProjection($()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},m.geoBertin1953Raw=$,m.geoBoggs=function(){return v.geoProjection(ue).scale(160.857)},m.geoBoggsRaw=ue,m.geoBonne=function(){return le(be).scale(123.082).center([0,26.1441]).parallel(45)},m.geoBonneRaw=be,m.geoBottomley=function(){var qe=.5,Ze=v.geoProjectionMutator(_e),nt=Ze(qe);return nt.fraction=function(ht){return arguments.length?Ze(qe=+ht):qe},nt.scale(158.837)},m.geoBottomleyRaw=_e,m.geoBromley=function(){return v.geoProjection(xe).scale(152.63)},m.geoBromleyRaw=xe,m.geoChamberlin=Ie,m.geoChamberlinRaw=Se,m.geoChamberlinAfrica=function(){return Ie([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},m.geoCollignon=function(){return v.geoProjection(Fe).scale(95.6464).center([0,30])},m.geoCollignonRaw=Fe,m.geoCraig=function(){return le(Ne).scale(249.828).clipAngle(90)},m.geoCraigRaw=Ne,m.geoCraster=function(){return v.geoProjection($e).scale(156.19)},m.geoCrasterRaw=$e,m.geoCylindricalEqualArea=function(){return le(Re).parallel(38.58).scale(195.044)},m.geoCylindricalEqualAreaRaw=Re,m.geoCylindricalStereographic=function(){return le(ze).scale(124.75)},m.geoCylindricalStereographicRaw=ze,m.geoEckert1=function(){return v.geoProjection(Ue).scale(165.664)},m.geoEckert1Raw=Ue,m.geoEckert2=function(){return v.geoProjection(je).scale(165.664)},m.geoEckert2Raw=je,m.geoEckert3=function(){return v.geoProjection(rt).scale(180.739)},m.geoEckert3Raw=rt,m.geoEckert4=function(){return v.geoProjection(ut).scale(180.739)},m.geoEckert4Raw=ut,m.geoEckert5=function(){return v.geoProjection(gt).scale(173.044)},m.geoEckert5Raw=gt,m.geoEckert6=function(){return v.geoProjection(At).scale(173.044)},m.geoEckert6Raw=At,m.geoEisenlohr=function(){return v.geoProjection(it).scale(62.5271)},m.geoEisenlohrRaw=it,m.geoFahey=function(){return v.geoProjection(wt).scale(137.152)},m.geoFaheyRaw=wt,m.geoFoucaut=function(){return v.geoProjection(Gt).scale(135.264)},m.geoFoucautRaw=Gt,m.geoFoucautSinusoidal=function(){var qe=.5,Ze=v.geoProjectionMutator(Kt),nt=Ze(qe);return nt.alpha=function(ht){return arguments.length?Ze(qe=+ht):qe},nt.scale(168.725)},m.geoFoucautSinusoidalRaw=Kt,m.geoGilbert=function(qe){null==qe&&(qe=v.geoOrthographic);var Ze=qe(),nt=v.geoEquirectangular().scale(A).precision(0).clipAngle(null).translate([0,0]);function ht(yt){return Ze(cr(yt))}function xt(yt){ht[yt]=function(){return arguments.length?(Ze[yt].apply(Ze,arguments),ht):Ze[yt]()}}return Ze.invert&&(ht.invert=function(yt){return ar(Ze.invert(yt))}),ht.stream=function(yt){var Ot=Ze.stream(yt),ir=nt.stream({point:function(or,er){Ot.point(or/2,P(g(-er/2*O))*A)},lineStart:function(){Ot.lineStart()},lineEnd:function(){Ot.lineEnd()},polygonStart:function(){Ot.polygonStart()},polygonEnd:function(){Ot.polygonEnd()}});return ir.sphere=Ot.sphere,ir},ht.rotate=function(yt){return arguments.length?(nt.rotate(yt),ht):nt.rotate()},ht.center=function(yt){return arguments.length?(Ze.center(cr(yt)),ht):ar(Ze.center())},xt("angle"),xt("clipAngle"),xt("clipExtent"),xt("fitExtent"),xt("fitHeight"),xt("fitSize"),xt("fitWidth"),xt("scale"),xt("translate"),xt("precision"),ht.scale(249.5)},m.geoGingery=function(){var qe=6,Ze=30*O,nt=r(Ze),ht=p(Ze),xt=v.geoProjectionMutator(hr),yt=xt(Ze,qe),Ot=yt.stream,ir=-r(.01*O),or=p(.01*O);return yt.radius=function(er){return arguments.length?(nt=r(Ze=er*O),ht=p(Ze),xt(Ze,qe)):Ze*A},yt.lobes=function(er){return arguments.length?xt(Ze,qe=+er):qe},yt.stream=function(er){var dr=yt.rotate(),kr=Ot(er),Lr=(yt.rotate([0,0]),Ot(er));return yt.rotate(dr),kr.sphere=function(){Lr.polygonStart(),Lr.lineStart();for(var Ir=0,Wr=2*x/qe,mn=0;Ir<qe;++Ir,mn-=Wr)Lr.point(n(or*r(mn),ir)*A,P(or*p(mn))*A),Lr.point(n(ht*r(mn-Wr/2),nt)*A,P(ht*p(mn-Wr/2))*A);Lr.lineEnd(),Lr.polygonEnd()},kr},yt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},m.geoGingeryRaw=hr,m.geoGinzburg4=function(){return v.geoProjection(pe).scale(149.995)},m.geoGinzburg4Raw=pe,m.geoGinzburg5=function(){return v.geoProjection(we).scale(153.93)},m.geoGinzburg5Raw=we,m.geoGinzburg6=function(){return v.geoProjection(Be).scale(130.945)},m.geoGinzburg6Raw=Be,m.geoGinzburg8=function(){return v.geoProjection(We).scale(131.747)},m.geoGinzburg8Raw=We,m.geoGinzburg9=function(){return v.geoProjection(Ke).scale(131.087)},m.geoGinzburg9Raw=Ke,m.geoGringorten=function(){return v.geoProjection(Ye(ft)).scale(239.75)},m.geoGringortenRaw=ft,m.geoGuyou=function(){return v.geoProjection(Ye(Ft)).scale(151.496)},m.geoGuyouRaw=Ft,m.geoHammer=function(){var qe=2,Ze=v.geoProjectionMutator(B),nt=Ze(qe);return nt.coefficient=function(ht){return arguments.length?Ze(qe=+ht):qe},nt.scale(169.529)},m.geoHammerRaw=B,m.geoHammerRetroazimuthal=function(){var qe=0,Ze=v.geoProjectionMutator(at),nt=Ze(qe),ht=nt.rotate,xt=nt.stream,yt=v.geoCircle();return nt.parallel=function(Ot){if(!arguments.length)return qe*A;var ir=nt.rotate();return Ze(qe=Ot*O).rotate(ir)},nt.rotate=function(Ot){return arguments.length?(ht.call(nt,[Ot[0],Ot[1]-qe*A]),yt.center([-Ot[0],-Ot[1]]),nt):((Ot=ht.call(nt))[1]+=qe*A,Ot)},nt.stream=function(Ot){return(Ot=xt(Ot)).sphere=function(){Ot.polygonStart();var ir,or=yt.radius(89.99)().coordinates[0],er=or.length-1,dr=-1;for(Ot.lineStart();++dr<er;)Ot.point((ir=or[dr])[0],ir[1]);for(Ot.lineEnd(),er=(or=yt.radius(90.01)().coordinates[0]).length-1,Ot.lineStart();--dr>=0;)Ot.point((ir=or[dr])[0],ir[1]);Ot.lineEnd(),Ot.polygonEnd()},Ot},nt.scale(79.4187).parallel(45).clipAngle(179.999)},m.geoHammerRetroazimuthalRaw=at,m.geoHealpix=function(){var qe=4,Ze=v.geoProjectionMutator(Dt),nt=Ze(qe),ht=nt.stream;return nt.lobes=function(xt){return arguments.length?Ze(qe=+xt):qe},nt.stream=function(xt){var yt=nt.rotate(),Ot=ht(xt),ir=(nt.rotate([0,0]),ht(xt));return nt.rotate(yt),Ot.sphere=function(){var or,er;v.geoStream((er=[].concat(b.range(-180,180+(or=180/qe)/2,or).map(Le),b.range(180,-180-or/2,-or).map(Xe)),{type:"Polygon",coordinates:[180===or?er.map(ot):er]}),ir)},Ot},nt.scale(239.75)},m.geoHealpixRaw=Dt,m.geoHill=function(){var qe=1,Ze=v.geoProjectionMutator(dt),nt=Ze(qe);return nt.ratio=function(ht){return arguments.length?Ze(qe=+ht):qe},nt.scale(167.774).center([0,18.67])},m.geoHillRaw=dt,m.geoHomolosine=function(){return v.geoProjection(Ut).scale(152.63)},m.geoHomolosineRaw=Ut,m.geoHufnagel=function(){var qe=1,Ze=0,nt=45*O,ht=2,xt=v.geoProjectionMutator($t),yt=xt(qe,Ze,nt,ht);return yt.a=function(Ot){return arguments.length?xt(qe=+Ot,Ze,nt,ht):qe},yt.b=function(Ot){return arguments.length?xt(qe,Ze=+Ot,nt,ht):Ze},yt.psiMax=function(Ot){return arguments.length?xt(qe,Ze,nt=+Ot*O,ht):nt*A},yt.ratio=function(Ot){return arguments.length?xt(qe,Ze,nt,ht=+Ot):ht},yt.scale(180.739)},m.geoHufnagelRaw=$t,m.geoHyperelliptical=function(){var qe=0,Ze=2.5,nt=1.183136,ht=v.geoProjectionMutator(wr),xt=ht(qe,Ze,nt);return xt.alpha=function(yt){return arguments.length?ht(qe=+yt,Ze,nt):qe},xt.k=function(yt){return arguments.length?ht(qe,Ze=+yt,nt):Ze},xt.gamma=function(yt){return arguments.length?ht(qe,Ze,nt=+yt):nt},xt.scale(152.63)},m.geoHyperellipticalRaw=wr,m.geoInterrupt=lr,m.geoInterruptedBoggs=function(){return lr(ue,sr).scale(160.857)},m.geoInterruptedHomolosine=function(){return lr(Ut,_r).scale(152.63)},m.geoInterruptedMollweide=function(){return lr(ne,Ar).scale(169.529)},m.geoInterruptedMollweideHemispheres=function(){return lr(ne,zt).scale(169.529).rotate([20,0])},m.geoInterruptedSinuMollweide=function(){return lr(Lt,ur,U).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},m.geoInterruptedSinusoidal=function(){return lr(de,Tt).scale(152.63).rotate([-20,0])},m.geoKavrayskiy7=function(){return v.geoProjection(Qt).scale(158.837)},m.geoKavrayskiy7Raw=Qt,m.geoLagrange=function(){var qe=.5,Ze=v.geoProjectionMutator(Er),nt=Ze(qe);return nt.spacing=function(ht){return arguments.length?Ze(qe=+ht):qe},nt.scale(124.75)},m.geoLagrangeRaw=Er,m.geoLarrivee=function(){return v.geoProjection(an).scale(97.2672)},m.geoLarriveeRaw=an,m.geoLaskowski=function(){return v.geoProjection(Kr).scale(139.98)},m.geoLaskowskiRaw=Kr,m.geoLittrow=function(){return v.geoProjection(sn).scale(144.049).clipAngle(89.999)},m.geoLittrowRaw=sn,m.geoLoximuthal=function(){return le(gn).parallel(40).scale(158.837)},m.geoLoximuthalRaw=gn,m.geoMiller=function(){return v.geoProjection(zn).scale(108.318)},m.geoMillerRaw=zn,m.geoModifiedStereographic=Mn,m.geoModifiedStereographicRaw=Vr,m.geoModifiedStereographicAlaska=function(){return Mn(_n,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},m.geoModifiedStereographicGs48=function(){return Mn(Qr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},m.geoModifiedStereographicGs50=function(){return Mn(Jr,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},m.geoModifiedStereographicMiller=function(){return Mn(Nn,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},m.geoModifiedStereographicLee=function(){return Mn(Hn,[165,10]).scale(250).clipAngle(130).center([-165,-10])},m.geoMollweide=function(){return v.geoProjection(ne).scale(169.529)},m.geoMollweideRaw=ne,m.geoMtFlatPolarParabolic=function(){return v.geoProjection(rr).scale(164.859)},m.geoMtFlatPolarParabolicRaw=rr,m.geoMtFlatPolarQuartic=function(){return v.geoProjection(Sr).scale(188.209)},m.geoMtFlatPolarQuarticRaw=Sr,m.geoMtFlatPolarSinusoidal=function(){return v.geoProjection(Rt).scale(166.518)},m.geoMtFlatPolarSinusoidalRaw=Rt,m.geoNaturalEarth2=function(){return v.geoProjection(gr).scale(175.295)},m.geoNaturalEarth2Raw=gr,m.geoNellHammer=function(){return v.geoProjection(xr).scale(152.63)},m.geoNellHammerRaw=xr,m.geoInterruptedQuarticAuthalic=function(){return lr(B(1/0),Zr).rotate([20,0]).scale(152.63)},m.geoNicolosi=function(){return v.geoProjection(Ur).scale(127.267)},m.geoNicolosiRaw=Ur,m.geoPatterson=function(){return v.geoProjection(Yr).scale(139.319)},m.geoPattersonRaw=Yr,m.geoPolyconic=function(){return v.geoProjection(Br).scale(103.74)},m.geoPolyconicRaw=Br,m.geoPolyhedral=nn,m.geoPolyhedralButterfly=function(qe){qe=qe||function(nt){var ht=v.geoCentroid({type:"MultiPoint",coordinates:nt});return v.geoGnomonic().scale(1).translate([0,0]).rotate([-ht[0],-ht[1]])};var Ze=Sn.map(function(nt){return{face:nt,project:qe(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,ht){var xt=Ze[nt];xt&&(xt.children||(xt.children=[])).push(Ze[ht])}),nn(Ze[0],function(nt,ht){return Ze[nt<-x/2?ht<0?6:4:nt<0?ht<0?2:0:nt<x/2?ht<0?3:1:ht<0?7:5]}).angle(-30).scale(101.858).center([0,45])},m.geoPolyhedralCollignon=function(qe){qe=qe||function(nt){var ht=v.geoCentroid({type:"MultiPoint",coordinates:nt});return v.geoProjection(Ln).translate([0,0]).scale(1).rotate(ht[1]>0?[-ht[0],0]:[180-ht[0],180])};var Ze=Sn.map(function(nt){return{face:nt,project:qe(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,ht){var xt=Ze[nt];xt&&(xt.children||(xt.children=[])).push(Ze[ht])}),nn(Ze[0],function(nt,ht){return Ze[nt<-x/2?ht<0?6:4:nt<0?ht<0?2:0:nt<x/2?ht<0?3:1:ht<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},m.geoPolyhedralWaterman=function(qe){qe=qe||function(yt){var Ot=6===yt.length?v.geoCentroid({type:"MultiPoint",coordinates:yt}):yt[0];return v.geoGnomonic().scale(1).translate([0,0]).rotate([-Ot[0],-Ot[1]])};var Ze=Sn.map(function(yt){for(var Ot,ir=yt.map(ni),or=ir.length,er=ir[or-1],dr=[],kr=0;kr<or;++kr)dr.push(qn([.9486832980505138*er[0]+.31622776601683794*(Ot=ir[kr])[0],.9486832980505138*er[1]+.31622776601683794*Ot[1],.9486832980505138*er[2]+.31622776601683794*Ot[2]]),qn([.9486832980505138*Ot[0]+.31622776601683794*er[0],.9486832980505138*Ot[1]+.31622776601683794*er[1],.9486832980505138*Ot[2]+.31622776601683794*er[2]])),er=Ot;return dr}),nt=[],ht=[-1,0,0,1,0,1,4,5];Ze.forEach(function(yt,Ot){for(var ir,or,er=Sn[Ot],dr=er.length,kr=nt[Ot]=[],Lr=0;Lr<dr;++Lr)Ze.push([er[Lr],yt[(2*Lr+2)%(2*dr)],yt[(2*Lr+1)%(2*dr)]]),ht.push(Ot),kr.push((ir=ni(yt[(2*Lr+2)%(2*dr)]),or=ni(yt[(2*Lr+1)%(2*dr)]),[ir[1]*or[2]-ir[2]*or[1],ir[2]*or[0]-ir[0]*or[2],ir[0]*or[1]-ir[1]*or[0]]))});var xt=Ze.map(function(yt){return{project:qe(yt),face:yt}});return ht.forEach(function(yt,Ot){var ir=xt[yt];ir&&(ir.children||(ir.children=[])).push(xt[Ot])}),nn(xt[0],function(yt,Ot){var ir=r(Ot),or=[ir*r(yt),ir*p(yt),p(Ot)],er=yt<-x/2?Ot<0?6:4:yt<0?Ot<0?2:0:yt<x/2?Ot<0?3:1:Ot<0?7:5,dr=nt[er];return xt[Fn(dr[0],or)<0?8+3*er:Fn(dr[1],or)<0?8+3*er+1:Fn(dr[2],or)<0?8+3*er+2:er]}).angle(-30).scale(110.625).center([0,45])},m.geoProject=function(qe,Ze){var nt,ht=Ze.stream;if(!ht)throw new Error("invalid projection");switch(qe&&qe.type){case"Feature":nt=Dn;break;case"FeatureCollection":nt=Di;break;default:nt=si}return nt(qe,ht)},m.geoGringortenQuincuncial=function(){return Bi(ft).scale(176.423)},m.geoPeirceQuincuncial=ra,m.geoPierceQuincuncial=ra,m.geoQuantize=function(qe,Ze){if(!(0<=(Ze=+Ze)&&Ze<=20))throw new Error("invalid digits");function nt(er){var dr=er.length,kr=2,Lr=new Array(dr);for(Lr[0]=+er[0].toFixed(Ze),Lr[1]=+er[1].toFixed(Ze);kr<dr;)Lr[kr]=er[kr],++kr;return Lr}function ht(er){return er.map(nt)}function xt(er){for(var dr=nt(er[0]),kr=[dr],Lr=1;Lr<er.length;Lr++){var Ir=nt(er[Lr]);(Ir.length>2||Ir[0]!=dr[0]||Ir[1]!=dr[1])&&(kr.push(Ir),dr=Ir)}return 1===kr.length&&er.length>1&&kr.push(nt(er[er.length-1])),kr}function yt(er){return er.map(xt)}function Ot(er){if(null==er)return er;var dr;switch(er.type){case"GeometryCollection":dr={type:"GeometryCollection",geometries:er.geometries.map(Ot)};break;case"Point":dr={type:"Point",coordinates:nt(er.coordinates)};break;case"MultiPoint":dr={type:er.type,coordinates:ht(er.coordinates)};break;case"LineString":dr={type:er.type,coordinates:xt(er.coordinates)};break;case"MultiLineString":case"Polygon":dr={type:er.type,coordinates:yt(er.coordinates)};break;case"MultiPolygon":dr={type:"MultiPolygon",coordinates:er.coordinates.map(yt)};break;default:return er}return null!=er.bbox&&(dr.bbox=er.bbox),dr}function ir(er){var dr={type:"Feature",properties:er.properties,geometry:Ot(er.geometry)};return null!=er.id&&(dr.id=er.id),null!=er.bbox&&(dr.bbox=er.bbox),dr}if(null!=qe)switch(qe.type){case"Feature":return ir(qe);case"FeatureCollection":var or={type:"FeatureCollection",features:qe.features.map(ir)};return null!=qe.bbox&&(or.bbox=qe.bbox),or;default:return Ot(qe)}return qe},m.geoQuincuncial=Bi,m.geoRectangularPolyconic=function(){return le(co).scale(131.215)},m.geoRectangularPolyconicRaw=co,m.geoRobinson=function(){return v.geoProjection(_o).scale(152.63)},m.geoRobinsonRaw=_o,m.geoSatellite=function(){var qe=2,Ze=0,nt=v.geoProjectionMutator(uo),ht=nt(qe,Ze);return ht.distance=function(xt){return arguments.length?nt(qe=+xt,Ze):qe},ht.tilt=function(xt){return arguments.length?nt(qe,Ze=xt*O):Ze*A},ht.scale(432.147).clipAngle(S(1/qe)*A-1e-6)},m.geoSatelliteRaw=uo,m.geoSinuMollweide=function(){return v.geoProjection(Lt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},m.geoSinuMollweideRaw=Lt,m.geoSinusoidal=function(){return v.geoProjection(de).scale(152.63)},m.geoSinusoidalRaw=de,m.geoStitch=function(qe){if(null==qe)return qe;switch(qe.type){case"Feature":return na(qe);case"FeatureCollection":var Ze={type:"FeatureCollection",features:qe.features.map(na)};return null!=qe.bbox&&(Ze.bbox=qe.bbox),Ze;default:return ys(qe)}},m.geoTimes=function(){return v.geoProjection(as).scale(146.153)},m.geoTimesRaw=as,m.geoTwoPointAzimuthal=ho,m.geoTwoPointAzimuthalRaw=As,m.geoTwoPointAzimuthalUsa=function(){return ho([-158,21.5],[-77,39]).clipAngle(60).scale(400)},m.geoTwoPointEquidistant=jo,m.geoTwoPointEquidistantRaw=Fs,m.geoTwoPointEquidistantUsa=function(){return jo([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},m.geoVanDerGrinten=function(){return v.geoProjection(Uo).scale(79.4183)},m.geoVanDerGrintenRaw=Uo,m.geoVanDerGrinten2=function(){return v.geoProjection(ns).scale(79.4183)},m.geoVanDerGrinten2Raw=ns,m.geoVanDerGrinten3=function(){return v.geoProjection(Ka).scale(79.4183)},m.geoVanDerGrinten3Raw=Ka,m.geoVanDerGrinten4=function(){return v.geoProjection(Zo).scale(127.16)},m.geoVanDerGrinten4Raw=Zo,m.geoWagner=wa,m.geoWagner7=function(){return wa().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},m.geoWagnerRaw=Vo,m.geoWagner4=function(){return v.geoProjection(Xo).scale(176.84)},m.geoWagner4Raw=Xo,m.geoWagner6=function(){return v.geoProjection(os).scale(152.63)},m.geoWagner6Raw=os,m.geoWiechel=function(){return v.geoProjection(wo).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},m.geoWiechelRaw=wo,m.geoWinkel3=function(){return v.geoProjection(ta).scale(158.837)},m.geoWinkel3Raw=ta,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,y("d3-geo"),y("d3-array")):v(m.d3=m.d3||{},m.d3,m.d3)},{"d3-array":107,"d3-geo":114}],114:[function(y,Q,K){var m,v;m=this,v=function(m,v){"use strict";function b(){return new h}function h(){this.reset()}h.prototype={constructor:h,reset:function(){this.s=this.t=0},add:function(vt){n(e,vt,this.t),n(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new h;function n(vt,jt,vr){var Zt=vt.s=jt+vr,yr=Zt-jt;vt.t=jt-(Zt-yr)+(vr-yr)}var r=1e-6,o=Math.PI,t=o/2,d=o/4,a=2*o,i=180/o,s=o/180,c=Math.abs,l=Math.atan,p=Math.atan2,g=Math.cos,u=Math.ceil,x=Math.exp,f=Math.log,T=Math.pow,_=Math.sin,k=Math.sign||function(vt){return vt>0?1:vt<0?-1:0},w=Math.sqrt,C=Math.tan;function A(vt){return vt>1?0:vt<-1?o:Math.acos(vt)}function O(vt){return vt>1?t:vt<-1?-t:Math.asin(vt)}function P(vt){return(vt=_(vt/2))*vt}function S(){}function E(vt,jt){vt&&z.hasOwnProperty(vt.type)&&z[vt.type](vt,jt)}var D={Feature:function(vt,jt){E(vt.geometry,jt)},FeatureCollection:function(vt,jt){for(var vr=vt.features,Zt=-1,yr=vr.length;++Zt<yr;)E(vr[Zt].geometry,jt)}},z={Sphere:function(vt,jt){jt.sphere()},Point:function(vt,jt){jt.point((vt=vt.coordinates)[0],vt[1],vt[2])},MultiPoint:function(vt,jt){for(var vr=vt.coordinates,Zt=-1,yr=vr.length;++Zt<yr;)jt.point((vt=vr[Zt])[0],vt[1],vt[2])},LineString:function(vt,jt){N(vt.coordinates,jt,0)},MultiLineString:function(vt,jt){for(var vr=vt.coordinates,Zt=-1,yr=vr.length;++Zt<yr;)N(vr[Zt],jt,0)},Polygon:function(vt,jt){V(vt.coordinates,jt)},MultiPolygon:function(vt,jt){for(var vr=vt.coordinates,Zt=-1,yr=vr.length;++Zt<yr;)V(vr[Zt],jt)},GeometryCollection:function(vt,jt){for(var vr=vt.geometries,Zt=-1,yr=vr.length;++Zt<yr;)E(vr[Zt],jt)}};function N(vt,jt,vr){var Zt,yr=-1,Hr=vt.length-vr;for(jt.lineStart();++yr<Hr;)jt.point((Zt=vt[yr])[0],Zt[1],Zt[2]);jt.lineEnd()}function V(vt,jt){var vr=-1,Zt=vt.length;for(jt.polygonStart();++vr<Zt;)N(vt[vr],jt,1);jt.polygonEnd()}function X(vt,jt){vt&&D.hasOwnProperty(vt.type)?D[vt.type](vt,jt):E(vt,jt)}var J,G,Z,re,j,B=b(),H=b(),ee={point:S,lineStart:S,lineEnd:S,polygonStart:function(){B.reset(),ee.lineStart=U,ee.lineEnd=$},polygonEnd:function(){var vt=+B;H.add(vt<0?a+vt:vt),this.lineStart=this.lineEnd=this.point=S},sphere:function(){H.add(a)}};function U(){ee.point=q}function $(){te(J,G)}function q(vt,jt){ee.point=te,J=vt,G=jt,Z=vt*=s,re=g(jt=(jt*=s)/2+d),j=_(jt)}function te(vt,jt){var vr=(vt*=s)-Z,Zt=vr>=0?1:-1,yr=Zt*vr,Hr=g(jt=(jt*=s)/2+d),Xr=_(jt),ln=j*Xr,bn=re*Hr+ln*g(yr),vn=ln*Zt*_(yr);B.add(p(vn,bn)),Z=vt,re=Hr,j=Xr}function ne(vt){return[p(vt[1],vt[0]),O(vt[2])]}function se(vt){var jt=vt[0],vr=vt[1],Zt=g(vr);return[Zt*g(jt),Zt*_(jt),_(vr)]}function ie(vt,jt){return vt[0]*jt[0]+vt[1]*jt[1]+vt[2]*jt[2]}function ue(vt,jt){return[vt[1]*jt[2]-vt[2]*jt[1],vt[2]*jt[0]-vt[0]*jt[2],vt[0]*jt[1]-vt[1]*jt[0]]}function le(vt,jt){vt[0]+=jt[0],vt[1]+=jt[1],vt[2]+=jt[2]}function de(vt,jt){return[vt[0]*jt,vt[1]*jt,vt[2]*jt]}function be(vt){var jt=w(vt[0]*vt[0]+vt[1]*vt[1]+vt[2]*vt[2]);vt[0]/=jt,vt[1]/=jt,vt[2]/=jt}var _e,xe,Ee,he,me,Se,Me,Ie,Fe,Ne,De,$e,Re,ze,Ue,je,rt,ut,gt,At,_t,it,et,wt,Gt,Kt,cr=b(),ar={point:hr,lineStart:He,lineEnd:Je,polygonStart:function(){ar.point=pe,ar.lineStart=we,ar.lineEnd=Be,cr.reset(),ee.polygonStart()},polygonEnd:function(){ee.polygonEnd(),ar.point=hr,ar.lineStart=He,ar.lineEnd=Je,B<0?(_e=-(Ee=180),xe=-(he=90)):cr>r?he=90:cr<-r&&(xe=-90),Ne[0]=_e,Ne[1]=Ee},sphere:function(){_e=-(Ee=180),xe=-(he=90)}};function hr(vt,jt){Fe.push(Ne=[_e=vt,Ee=vt]),jt<xe&&(xe=jt),jt>he&&(he=jt)}function Xt(vt,jt){var vr=se([vt*s,jt*s]);if(Ie){var Zt=ue(Ie,vr),yr=ue([Zt[1],-Zt[0],0],Zt);be(yr),yr=ne(yr);var Hr,Xr=vt-me,ln=Xr>0?1:-1,bn=yr[0]*i*ln,vn=c(Xr)>180;vn^(ln*me<bn&&bn<ln*vt)?(Hr=yr[1]*i)>he&&(he=Hr):vn^(ln*me<(bn=(bn+360)%360-180)&&bn<ln*vt)?(Hr=-yr[1]*i)<xe&&(xe=Hr):(jt<xe&&(xe=jt),jt>he&&(he=jt)),vn?vt<me?We(_e,vt)>We(_e,Ee)&&(Ee=vt):We(vt,Ee)>We(_e,Ee)&&(_e=vt):Ee>=_e?(vt<_e&&(_e=vt),vt>Ee&&(Ee=vt)):vt>me?We(_e,vt)>We(_e,Ee)&&(Ee=vt):We(vt,Ee)>We(_e,Ee)&&(_e=vt)}else Fe.push(Ne=[_e=vt,Ee=vt]);jt<xe&&(xe=jt),jt>he&&(he=jt),Ie=vr,me=vt}function He(){ar.point=Xt}function Je(){Ne[0]=_e,Ne[1]=Ee,ar.point=hr,Ie=null}function pe(vt,jt){if(Ie){var vr=vt-me;cr.add(c(vr)>180?vr+(vr>0?360:-360):vr)}else Se=vt,Me=jt;ee.point(vt,jt),Xt(vt,jt)}function we(){ee.lineStart()}function Be(){pe(Se,Me),ee.lineEnd(),c(cr)>r&&(_e=-(Ee=180)),Ne[0]=_e,Ne[1]=Ee,Ie=null}function We(vt,jt){return(jt-=vt)<0?jt+360:jt}function Ke(vt,jt){return vt[0]-jt[0]}function Ye(vt,jt){return vt[0]<=vt[1]?vt[0]<=jt&&jt<=vt[1]:jt<vt[0]||vt[1]<jt}var ft={sphere:S,point:ct,lineStart:Ft,lineEnd:qt,polygonStart:function(){ft.lineStart=Et,ft.lineEnd=Dt},polygonEnd:function(){ft.lineStart=Ft,ft.lineEnd=qt}};function ct(vt,jt){vt*=s;var vr=g(jt*=s);St(vr*g(vt),vr*_(vt),_(jt))}function St(vt,jt,vr){++De,Re+=(vt-Re)/De,ze+=(jt-ze)/De,Ue+=(vr-Ue)/De}function Ft(){ft.point=at}function at(vt,jt){vt*=s;var vr=g(jt*=s);wt=vr*g(vt),Gt=vr*_(vt),Kt=_(jt),ft.point=mt,St(wt,Gt,Kt)}function mt(vt,jt){vt*=s;var vr=g(jt*=s),Zt=vr*g(vt),yr=vr*_(vt),Hr=_(jt),Xr=p(w((Xr=Gt*Hr-Kt*yr)*Xr+(Xr=Kt*Zt-wt*Hr)*Xr+(Xr=wt*yr-Gt*Zt)*Xr),wt*Zt+Gt*yr+Kt*Hr);$e+=Xr,je+=Xr*(wt+(wt=Zt)),rt+=Xr*(Gt+(Gt=yr)),ut+=Xr*(Kt+(Kt=Hr)),St(wt,Gt,Kt)}function qt(){ft.point=ct}function Et(){ft.point=Le}function Dt(){Xe(it,et),ft.point=ct}function Le(vt,jt){it=vt,et=jt,vt*=s,jt*=s,ft.point=Xe;var vr=g(jt);wt=vr*g(vt),Gt=vr*_(vt),Kt=_(jt),St(wt,Gt,Kt)}function Xe(vt,jt){vt*=s;var vr=g(jt*=s),Zt=vr*g(vt),yr=vr*_(vt),Hr=_(jt),Xr=Gt*Hr-Kt*yr,ln=Kt*Zt-wt*Hr,bn=wt*yr-Gt*Zt,vn=w(Xr*Xr+ln*ln+bn*bn),An=O(vn),In=vn&&-An/vn;gt+=In*Xr,At+=In*ln,_t+=In*bn,$e+=An,je+=An*(wt+(wt=Zt)),rt+=An*(Gt+(Gt=yr)),ut+=An*(Kt+(Kt=Hr)),St(wt,Gt,Kt)}function ot(vt){return function(){return vt}}function dt(vt,jt){function vr(Zt,yr){return Zt=vt(Zt,yr),jt(Zt[0],Zt[1])}return vt.invert&&jt.invert&&(vr.invert=function(Zt,yr){return(Zt=jt.invert(Zt,yr))&&vt.invert(Zt[0],Zt[1])}),vr}function Lt(vt,jt){return[c(vt)>o?vt+Math.round(-vt/a)*a:vt,jt]}function Ut(vt,jt,vr){return(vt%=a)?jt||vr?dt(Wt(vt),wr(jt,vr)):Wt(vt):jt||vr?wr(jt,vr):Lt}function $t(vt){return function(jt,vr){return[(jt+=vt)>o?jt-a:jt<-o?jt+a:jt,vr]}}function Wt(vt){var jt=$t(vt);return jt.invert=$t(-vt),jt}function wr(vt,jt){var vr=g(vt),Zt=_(vt),yr=g(jt),Hr=_(jt);function Xr(ln,bn){var vn=g(bn),An=g(ln)*vn,In=_(ln)*vn,xn=_(bn),Pn=xn*vr+An*Zt;return[p(In*yr-Pn*Hr,An*vr-xn*Zt),O(Pn*yr+In*Hr)]}return Xr.invert=function(ln,bn){var vn=g(bn),An=g(ln)*vn,In=_(ln)*vn,xn=_(bn),Pn=xn*yr-In*Hr;return[p(In*yr+xn*Hr,An*vr+Pn*Zt),O(Pn*vr-An*Zt)]},Xr}function Rr(vt){function jt(vr){return(vr=vt(vr[0]*s,vr[1]*s))[0]*=i,vr[1]*=i,vr}return vt=Ut(vt[0]*s,vt[1]*s,vt.length>2?vt[2]*s:0),jt.invert=function(vr){return(vr=vt.invert(vr[0]*s,vr[1]*s))[0]*=i,vr[1]*=i,vr},jt}function br(vt,jt,vr,Zt,yr,Hr){if(vr){var Xr=g(jt),ln=_(jt),bn=Zt*vr;null==yr?(yr=jt+Zt*a,Hr=jt-bn/2):(yr=nr(Xr,yr),Hr=nr(Xr,Hr),(Zt>0?yr<Hr:yr>Hr)&&(yr+=Zt*a));for(var vn,An=yr;Zt>0?An>Hr:An<Hr;An-=bn)vn=ne([Xr,-ln*g(An),-ln*_(An)]),vt.point(vn[0],vn[1])}}function nr(vt,jt){(jt=se(jt))[0]-=vt,be(jt);var vr=A(-jt[1]);return((-jt[2]<0?-vr:vr)+a-r)%a}function lr(){var vt,jt=[];return{point:function(vr,Zt,yr){vt.push([vr,Zt,yr])},lineStart:function(){jt.push(vt=[])},lineEnd:S,rejoin:function(){jt.length>1&&jt.push(jt.pop().concat(jt.shift()))},result:function(){var vr=jt;return jt=[],vt=null,vr}}}function sr(vt,jt){return c(vt[0]-jt[0])<r&&c(vt[1]-jt[1])<r}function _r(vt,jt,vr,Zt){this.x=vt,this.z=jt,this.o=vr,this.e=Zt,this.v=!1,this.n=this.p=null}function Ar(vt,jt,vr,Zt,yr){var Hr,Xr,ln=[],bn=[];if(vt.forEach(function(Wn){if(!(($n=Wn.length-1)<=0)){var $n,fi,un=Wn[0],hi=Wn[$n];if(sr(un,hi)){if(!un[2]&&!hi[2]){for(yr.lineStart(),Hr=0;Hr<$n;++Hr)yr.point((un=Wn[Hr])[0],un[1]);return void yr.lineEnd()}hi[0]+=2*r}ln.push(fi=new _r(un,Wn,null,!0)),bn.push(fi.o=new _r(un,null,fi,!1)),ln.push(fi=new _r(hi,Wn,null,!1)),bn.push(fi.o=new _r(hi,null,fi,!0))}}),ln.length){for(bn.sort(jt),zt(ln),zt(bn),Hr=0,Xr=bn.length;Hr<Xr;++Hr)bn[Hr].e=vr=!vr;for(var vn,An,In=ln[0];;){for(var xn=In,Pn=!0;xn.v;)if((xn=xn.n)===In)return;vn=xn.z,yr.lineStart();do{if(xn.v=xn.o.v=!0,xn.e){if(Pn)for(Hr=0,Xr=vn.length;Hr<Xr;++Hr)yr.point((An=vn[Hr])[0],An[1]);else Zt(xn.x,xn.n.x,1,yr);xn=xn.n}else{if(Pn)for(Hr=(vn=xn.p.z).length-1;Hr>=0;--Hr)yr.point((An=vn[Hr])[0],An[1]);else Zt(xn.x,xn.p.x,-1,yr);xn=xn.p}vn=(xn=xn.o).z,Pn=!Pn}while(!xn.v);yr.lineEnd()}}}function zt(vt){if(jt=vt.length){for(var jt,vr,Zt=0,yr=vt[0];++Zt<jt;)yr.n=vr=vt[Zt],vr.p=yr,yr=vr;yr.n=vr=vt[0],vr.p=yr}}Lt.invert=Lt;var ur=b();function Tt(vt){return c(vt[0])<=o?vt[0]:k(vt[0])*((c(vt[0])+o)%a-o)}function Qt(vt,jt){var vr=Tt(jt),Zt=jt[1],yr=_(Zt),Hr=[_(vr),-g(vr),0],Xr=0,ln=0;ur.reset(),1===yr?Zt=t+r:-1===yr&&(Zt=-t-r);for(var bn=0,vn=vt.length;bn<vn;++bn)if(In=(An=vt[bn]).length)for(var An,In,xn=An[In-1],Pn=Tt(xn),Wn=xn[1]/2+d,$n=_(Wn),fi=g(Wn),un=0;un<In;++un,Pn=Vn,$n=ui,fi=Ci,xn=hi){var hi=An[un],Vn=Tt(hi),Xn=hi[1]/2+d,ui=_(Xn),Ci=g(Xn),Gi=Vn-Pn,Rn=Gi>=0?1:-1,Hi=Rn*Gi,qi=Hi>o,Ti=$n*ui;if(ur.add(p(Ti*Rn*_(Hi),fi*Ci+Ti*g(Hi))),Xr+=qi?Gi+Rn*a:Gi,qi^Pn>=vr^Vn>=vr){var Xi=ue(se(xn),se(hi));be(Xi);var Ni=ue(Hr,Xi);be(Ni);var fa=(qi^Gi>=0?-1:1)*O(Ni[2]);(Zt>fa||Zt===fa&&(Xi[0]||Xi[1]))&&(ln+=qi^Gi>=0?1:-1)}}return(Xr<-r||Xr<r&&ur<-r)^1&ln}function Er(vt,jt,vr,Zt){return function(yr){var Hr,Xr,ln,bn=jt(yr),vn=lr(),An=jt(vn),In=!1,xn={point:Pn,lineStart:$n,lineEnd:fi,polygonStart:function(){xn.point=un,xn.lineStart=hi,xn.lineEnd=Vn,Xr=[],Hr=[]},polygonEnd:function(){xn.point=Pn,xn.lineStart=$n,xn.lineEnd=fi,Xr=v.merge(Xr);var Xn=Qt(Hr,Zt);Xr.length?(In||(yr.polygonStart(),In=!0),Ar(Xr,an,Xn,vr,yr)):Xn&&(In||(yr.polygonStart(),In=!0),yr.lineStart(),vr(null,null,1,yr),yr.lineEnd()),In&&(yr.polygonEnd(),In=!1),Xr=Hr=null},sphere:function(){yr.polygonStart(),yr.lineStart(),vr(null,null,1,yr),yr.lineEnd(),yr.polygonEnd()}};function Pn(Xn,ui){vt(Xn,ui)&&yr.point(Xn,ui)}function Wn(Xn,ui){bn.point(Xn,ui)}function $n(){xn.point=Wn,bn.lineStart()}function fi(){xn.point=Pn,bn.lineEnd()}function un(Xn,ui){ln.push([Xn,ui]),An.point(Xn,ui)}function hi(){An.lineStart(),ln=[]}function Vn(){un(ln[0][0],ln[0][1]),An.lineEnd();var Xn,ui,Ci,Gi,Rn=An.clean(),Hi=vn.result(),qi=Hi.length;if(ln.pop(),Hr.push(ln),ln=null,qi)if(1&Rn){if((ui=(Ci=Hi[0]).length-1)>0){for(In||(yr.polygonStart(),In=!0),yr.lineStart(),Xn=0;Xn<ui;++Xn)yr.point((Gi=Ci[Xn])[0],Gi[1]);yr.lineEnd()}}else qi>1&&2&Rn&&Hi.push(Hi.pop().concat(Hi.shift())),Xr.push(Hi.filter(zr))}return xn}}function zr(vt){return vt.length>1}function an(vt,jt){return((vt=vt.x)[0]<0?vt[1]-t-r:t-vt[1])-((jt=jt.x)[0]<0?jt[1]-t-r:t-jt[1])}var Kr=Er(function(){return!0},function(vt){var jt,vr=NaN,Zt=NaN,yr=NaN;return{lineStart:function(){vt.lineStart(),jt=1},point:function(Hr,Xr){var vn,An,In,xn,Pn,Wn,$n,ln=Hr>0?o:-o,bn=c(Hr-vr);c(bn-o)<r?(vt.point(vr,Zt=(Zt+Xr)/2>0?t:-t),vt.point(yr,Zt),vt.lineEnd(),vt.lineStart(),vt.point(ln,Zt),vt.point(Hr,Zt),jt=0):yr!==ln&&bn>=o&&(c(vr-yr)<r&&(vr-=yr*r),c(Hr-ln)<r&&(Hr-=ln*r),An=Zt,xn=Xr,$n=_((vn=vr)-(In=Hr)),Zt=c($n)>r?l((_(An)*(Wn=g(xn))*_(In)-_(xn)*(Pn=g(An))*_(vn))/(Pn*Wn*$n)):(An+xn)/2,vt.point(yr,Zt),vt.lineEnd(),vt.lineStart(),vt.point(ln,Zt),jt=0),vt.point(vr=Hr,Zt=Xr),yr=ln},lineEnd:function(){vt.lineEnd(),vr=Zt=NaN},clean:function(){return 2-jt}}},function(vt,jt,vr,Zt){var yr;if(null==vt)Zt.point(-o,yr=vr*t),Zt.point(0,yr),Zt.point(o,yr),Zt.point(o,0),Zt.point(o,-yr),Zt.point(0,-yr),Zt.point(-o,-yr),Zt.point(-o,0),Zt.point(-o,yr);else if(c(vt[0]-jt[0])>r){var Hr=vt[0]<jt[0]?o:-o;Zt.point(-Hr,yr=vr*Hr/2),Zt.point(0,yr),Zt.point(Hr,yr)}else Zt.point(jt[0],jt[1])},[-o,-t]);function sn(vt){var jt=g(vt),vr=6*s,Zt=jt>0,yr=c(jt)>r;function Hr(bn,vn){return g(bn)*g(vn)>jt}function Xr(bn,vn,An){var In=[1,0,0],xn=ue(se(bn),se(vn)),Pn=ie(xn,xn),Wn=xn[0],$n=Pn-Wn*Wn;if(!$n)return!An&&bn;var fi=jt*Pn/$n,un=-jt*Wn/$n,hi=ue(In,xn),Vn=de(In,fi);le(Vn,de(xn,un));var Xn=hi,ui=ie(Vn,Xn),Ci=ie(Xn,Xn),Gi=ui*ui-Ci*(ie(Vn,Vn)-1);if(!(Gi<0)){var Rn=w(Gi),Hi=de(Xn,(-ui-Rn)/Ci);if(le(Hi,Vn),Hi=ne(Hi),!An)return Hi;var qi,Ti=bn[0],Xi=vn[0],Ni=bn[1],fa=vn[1];Xi<Ti&&(qi=Ti,Ti=Xi,Xi=qi);var oi=Xi-Ti,ia=c(oi-o)<r;if(!ia&&fa<Ni&&(qi=Ni,Ni=fa,fa=qi),ia||oi<r?ia?Ni+fa>0^Hi[1]<(c(Hi[0]-Ti)<r?Ni:fa):Ni<=Hi[1]&&Hi[1]<=fa:oi>o^(Ti<=Hi[0]&&Hi[0]<=Xi)){var $a=de(Xn,(-ui+Rn)/Ci);return le($a,Vn),[Hi,ne($a)]}}}function ln(bn,vn){var An=Zt?vt:o-vt,In=0;return bn<-An?In|=1:bn>An&&(In|=2),vn<-An?In|=4:vn>An&&(In|=8),In}return Er(Hr,function(bn){var vn,An,In,xn,Pn;return{lineStart:function(){xn=In=!1,Pn=1},point:function(Wn,$n){var fi,un=[Wn,$n],hi=Hr(Wn,$n),Vn=Zt?hi?0:ln(Wn,$n):hi?ln(Wn+(Wn<0?o:-o),$n):0;if(!vn&&(xn=In=hi)&&bn.lineStart(),hi!==In&&(!(fi=Xr(vn,un))||sr(vn,fi)||sr(un,fi))&&(un[2]=1),hi!==In)Pn=0,hi?(bn.lineStart(),fi=Xr(un,vn),bn.point(fi[0],fi[1])):(fi=Xr(vn,un),bn.point(fi[0],fi[1],2),bn.lineEnd()),vn=fi;else if(yr&&vn&&Zt^hi){var Xn;Vn&An||!(Xn=Xr(un,vn,!0))||(Pn=0,Zt?(bn.lineStart(),bn.point(Xn[0][0],Xn[0][1]),bn.point(Xn[1][0],Xn[1][1]),bn.lineEnd()):(bn.point(Xn[1][0],Xn[1][1]),bn.lineEnd(),bn.lineStart(),bn.point(Xn[0][0],Xn[0][1],3)))}!hi||vn&&sr(vn,un)||bn.point(un[0],un[1]),vn=un,In=hi,An=Vn},lineEnd:function(){In&&bn.lineEnd(),vn=null},clean:function(){return Pn|(xn&&In)<<1}}},function(bn,vn,An,In){br(In,vt,vr,An,bn,vn)},Zt?[0,-vt]:[-o,vt-o])}function gn(vt,jt,vr,Zt){function yr(vn,An){return vt<=vn&&vn<=vr&&jt<=An&&An<=Zt}function Hr(vn,An,In,xn){var Pn=0,Wn=0;if(null==vn||(Pn=Xr(vn,In))!==(Wn=Xr(An,In))||bn(vn,An)<0^In>0)do{xn.point(0===Pn||3===Pn?vt:vr,Pn>1?Zt:jt)}while((Pn=(Pn+In+4)%4)!==Wn);else xn.point(An[0],An[1])}function Xr(vn,An){return c(vn[0]-vt)<r?An>0?0:3:c(vn[0]-vr)<r?An>0?2:1:c(vn[1]-jt)<r?An>0?1:0:An>0?3:2}function ln(vn,An){return bn(vn.x,An.x)}function bn(vn,An){var In=Xr(vn,1),xn=Xr(An,1);return In!==xn?In-xn:0===In?An[1]-vn[1]:1===In?vn[0]-An[0]:2===In?vn[1]-An[1]:An[0]-vn[0]}return function(vn){var An,In,xn,Pn,Wn,$n,fi,un,hi,Vn,Xn,ui=vn,Ci=lr(),Gi={point:Rn,lineStart:function(){Gi.point=Hi,In&&In.push(xn=[]),Vn=!0,hi=!1,fi=un=NaN},lineEnd:function(){An&&(Hi(Pn,Wn),$n&&hi&&Ci.rejoin(),An.push(Ci.result())),Gi.point=Rn,hi&&ui.lineEnd()},polygonStart:function(){ui=Ci,An=[],In=[],Xn=!0},polygonEnd:function(){var qi=function(){for(var Ni=0,fa=0,oi=In.length;fa<oi;++fa)for(var ia,$a,ss=In[fa],Jo=1,Eo=ss.length,ki=ss[0],Ma=ki[0],Co=ki[1];Jo<Eo;++Jo)ia=Ma,$a=Co,Ma=(ki=ss[Jo])[0],Co=ki[1],$a<=Zt?Co>Zt&&(Ma-ia)*(Zt-$a)>(Co-$a)*(vt-ia)&&++Ni:Co<=Zt&&(Ma-ia)*(Zt-$a)<(Co-$a)*(vt-ia)&&--Ni;return Ni}(),Ti=Xn&&qi,Xi=(An=v.merge(An)).length;(Ti||Xi)&&(vn.polygonStart(),Ti&&(vn.lineStart(),Hr(null,null,1,vn),vn.lineEnd()),Xi&&Ar(An,ln,qi,Hr,vn),vn.polygonEnd()),ui=vn,An=In=xn=null}};function Rn(qi,Ti){yr(qi,Ti)&&ui.point(qi,Ti)}function Hi(qi,Ti){var Xi=yr(qi,Ti);if(In&&xn.push([qi,Ti]),Vn)Pn=qi,Wn=Ti,$n=Xi,Vn=!1,Xi&&(ui.lineStart(),ui.point(qi,Ti));else if(Xi&&hi)ui.point(qi,Ti);else{var Ni=[fi=Math.max(-1e9,Math.min(1e9,fi)),un=Math.max(-1e9,Math.min(1e9,un))],fa=[qi=Math.max(-1e9,Math.min(1e9,qi)),Ti=Math.max(-1e9,Math.min(1e9,Ti))];!function(oi,ia,$a,ss,Jo,Eo){var ki,Ma=oi[0],Co=oi[1],aa=0,za=1,no=ia[0]-Ma,oa=ia[1]-Co;if(ki=$a-Ma,no||!(ki>0)){if(ki/=no,no<0){if(ki<aa)return;ki<za&&(za=ki)}else if(no>0){if(ki>za)return;ki>aa&&(aa=ki)}if(ki=Jo-Ma,no||!(ki<0)){if(ki/=no,no<0){if(ki>za)return;ki>aa&&(aa=ki)}else if(no>0){if(ki<aa)return;ki<za&&(za=ki)}if(ki=ss-Co,oa||!(ki>0)){if(ki/=oa,oa<0){if(ki<aa)return;ki<za&&(za=ki)}else if(oa>0){if(ki>za)return;ki>aa&&(aa=ki)}if(ki=Eo-Co,oa||!(ki<0)){if(ki/=oa,oa<0){if(ki>za)return;ki>aa&&(aa=ki)}else if(oa>0){if(ki<aa)return;ki<za&&(za=ki)}return aa>0&&(oi[0]=Ma+aa*no,oi[1]=Co+aa*oa),za<1&&(ia[0]=Ma+za*no,ia[1]=Co+za*oa),!0}}}}}(Ni,fa,vt,jt,vr,Zt)?Xi&&(ui.lineStart(),ui.point(qi,Ti),Xn=!1):(hi||(ui.lineStart(),ui.point(Ni[0],Ni[1])),ui.point(fa[0],fa[1]),Xi||ui.lineEnd(),Xn=!1)}fi=qi,un=Ti,hi=Xi}return Gi}}var zn,Vr,_n,Qr=b(),Jr={sphere:S,point:S,lineStart:function(){Jr.point=Hn,Jr.lineEnd=Nn},lineEnd:S,polygonStart:S,polygonEnd:S};function Nn(){Jr.point=Jr.lineEnd=S}function Hn(vt,jt){zn=vt*=s,Vr=_(jt*=s),_n=g(jt),Jr.point=Mn}function Mn(vt,jt){vt*=s;var vr=_(jt*=s),Zt=g(jt),yr=c(vt-zn),Hr=g(yr),Xr=Zt*_(yr),ln=_n*vr-Vr*Zt*Hr,bn=Vr*vr+_n*Zt*Hr;Qr.add(p(w(Xr*Xr+ln*ln),bn)),zn=vt,Vr=vr,_n=Zt}function Un(vt){return Qr.reset(),X(vt,Jr),+Qr}var di=[null,null],rr={type:"LineString",coordinates:di};function Sr(vt,jt){return di[0]=vt,di[1]=jt,Un(rr)}var Rt={Feature:function(vt,jt){return xr(vt.geometry,jt)},FeatureCollection:function(vt,jt){for(var vr=vt.features,Zt=-1,yr=vr.length;++Zt<yr;)if(xr(vr[Zt].geometry,jt))return!0;return!1}},gr={Sphere:function(){return!0},Point:function(vt,jt){return Zr(vt.coordinates,jt)},MultiPoint:function(vt,jt){for(var vr=vt.coordinates,Zt=-1,yr=vr.length;++Zt<yr;)if(Zr(vr[Zt],jt))return!0;return!1},LineString:function(vt,jt){return Ur(vt.coordinates,jt)},MultiLineString:function(vt,jt){for(var vr=vt.coordinates,Zt=-1,yr=vr.length;++Zt<yr;)if(Ur(vr[Zt],jt))return!0;return!1},Polygon:function(vt,jt){return Yr(vt.coordinates,jt)},MultiPolygon:function(vt,jt){for(var vr=vt.coordinates,Zt=-1,yr=vr.length;++Zt<yr;)if(Yr(vr[Zt],jt))return!0;return!1},GeometryCollection:function(vt,jt){for(var vr=vt.geometries,Zt=-1,yr=vr.length;++Zt<yr;)if(xr(vr[Zt],jt))return!0;return!1}};function xr(vt,jt){return!(!vt||!gr.hasOwnProperty(vt.type))&&gr[vt.type](vt,jt)}function Zr(vt,jt){return 0===Sr(vt,jt)}function Ur(vt,jt){for(var vr,Zt,yr,Hr=0,Xr=vt.length;Hr<Xr;Hr++){if(0===(Zt=Sr(vt[Hr],jt))||Hr>0&&(yr=Sr(vt[Hr],vt[Hr-1]))>0&&vr<=yr&&Zt<=yr&&(vr+Zt-yr)*(1-Math.pow((vr-Zt)/yr,2))<1e-12*yr)return!0;vr=Zt}return!1}function Yr(vt,jt){return!!Qt(vt.map(Br),Cr(jt))}function Br(vt){return(vt=vt.map(Cr)).pop(),vt}function Cr(vt){return[vt[0]*s,vt[1]*s]}function Or(vt,jt,vr){var Zt=v.range(vt,jt-r,vr).concat(jt);return function(yr){return Zt.map(function(Hr){return[yr,Hr]})}}function Dr(vt,jt,vr){var Zt=v.range(vt,jt-r,vr).concat(jt);return function(yr){return Zt.map(function(Hr){return[Hr,yr]})}}function Nr(){var vt,jt,vr,Zt,yr,Hr,Xr,ln,bn,vn,An,In,xn=10,Pn=xn,Wn=90,$n=360,fi=2.5;function un(){return{type:"MultiLineString",coordinates:hi()}}function hi(){return v.range(u(Zt/Wn)*Wn,vr,Wn).map(An).concat(v.range(u(ln/$n)*$n,Xr,$n).map(In)).concat(v.range(u(jt/xn)*xn,vt,xn).filter(function(Vn){return c(Vn%Wn)>r}).map(bn)).concat(v.range(u(Hr/Pn)*Pn,yr,Pn).filter(function(Vn){return c(Vn%$n)>r}).map(vn))}return un.lines=function(){return hi().map(function(Vn){return{type:"LineString",coordinates:Vn}})},un.outline=function(){return{type:"Polygon",coordinates:[An(Zt).concat(In(Xr).slice(1),An(vr).reverse().slice(1),In(ln).reverse().slice(1))]}},un.extent=function(Vn){return arguments.length?un.extentMajor(Vn).extentMinor(Vn):un.extentMinor()},un.extentMajor=function(Vn){return arguments.length?(ln=+Vn[0][1],Xr=+Vn[1][1],(Zt=+Vn[0][0])>(vr=+Vn[1][0])&&(Vn=Zt,Zt=vr,vr=Vn),ln>Xr&&(Vn=ln,ln=Xr,Xr=Vn),un.precision(fi)):[[Zt,ln],[vr,Xr]]},un.extentMinor=function(Vn){return arguments.length?(Hr=+Vn[0][1],yr=+Vn[1][1],(jt=+Vn[0][0])>(vt=+Vn[1][0])&&(Vn=jt,jt=vt,vt=Vn),Hr>yr&&(Vn=Hr,Hr=yr,yr=Vn),un.precision(fi)):[[jt,Hr],[vt,yr]]},un.step=function(Vn){return arguments.length?un.stepMajor(Vn).stepMinor(Vn):un.stepMinor()},un.stepMajor=function(Vn){return arguments.length?(Wn=+Vn[0],$n=+Vn[1],un):[Wn,$n]},un.stepMinor=function(Vn){return arguments.length?(xn=+Vn[0],Pn=+Vn[1],un):[xn,Pn]},un.precision=function(Vn){return arguments.length?(fi=+Vn,bn=Or(Hr,yr,90),vn=Dr(jt,vt,fi),An=Or(ln,Xr,90),In=Dr(Zt,vr,fi),un):fi},un.extentMajor([[-180,-90+r],[180,90-r]]).extentMinor([[-180,-80-r],[180,80+r]])}function nn(vt){return vt}var rn,pn,dn,Sn,En=b(),Ln=b(),Fn={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Fn.lineStart=qn,Fn.lineEnd=Di},polygonEnd:function(){Fn.lineStart=Fn.lineEnd=Fn.point=S,En.add(c(Ln)),Ln.reset()},result:function(){var vt=En/2;return En.reset(),vt}};function qn(){Fn.point=ni}function ni(vt,jt){Fn.point=zi,rn=dn=vt,pn=Sn=jt}function zi(vt,jt){Ln.add(Sn*vt-dn*jt),dn=vt,Sn=jt}function Di(){zi(rn,pn)}var Va,ao,Bi,ra,Dn=1/0,si=Dn,ai=-Dn,Wi=ai,ka={point:function(vt,jt){vt<Dn&&(Dn=vt),vt>ai&&(ai=vt),jt<si&&(si=jt),jt>Wi&&(Wi=jt)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var vt=[[Dn,si],[ai,Wi]];return ai=Wi=-(si=Dn=1/0),vt}},co=0,Ji=0,_o=0,uo=0,Ia=0,fo=0,Ao=0,Mo=0,Ja=0,_a={point:to,lineStart:Ts,lineEnd:ys,polygonStart:function(){_a.lineStart=as,_a.lineEnd=ks},polygonEnd:function(){_a.point=to,_a.lineStart=Ts,_a.lineEnd=ys},result:function(){var vt=Ja?[Ao/Ja,Mo/Ja]:fo?[uo/fo,Ia/fo]:_o?[co/_o,Ji/_o]:[NaN,NaN];return co=Ji=_o=uo=Ia=fo=Ao=Mo=Ja=0,vt}};function to(vt,jt){co+=vt,Ji+=jt,++_o}function Ts(){_a.point=Ls}function Ls(vt,jt){_a.point=na,to(Bi=vt,ra=jt)}function na(vt,jt){var vr=vt-Bi,Zt=jt-ra,yr=w(vr*vr+Zt*Zt);uo+=yr*(Bi+vt)/2,Ia+=yr*(ra+jt)/2,fo+=yr,to(Bi=vt,ra=jt)}function ys(){_a.point=to}function as(){_a.point=As}function ks(){ho(Va,ao)}function As(vt,jt){_a.point=ho,to(Va=Bi=vt,ao=ra=jt)}function ho(vt,jt){var vr=vt-Bi,Zt=jt-ra,yr=w(vr*vr+Zt*Zt);uo+=yr*(Bi+vt)/2,Ia+=yr*(ra+jt)/2,fo+=yr,Ao+=(yr=ra*vt-Bi*jt)*(Bi+vt),Mo+=yr*(ra+jt),Ja+=3*yr,to(Bi=vt,ra=jt)}function Fs(vt){this._context=vt}Fs.prototype={_radius:4.5,pointRadius:function(vt){return this._radius=vt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(vt,jt){switch(this._point){case 0:this._context.moveTo(vt,jt),this._point=1;break;case 1:this._context.lineTo(vt,jt);break;default:this._context.moveTo(vt+this._radius,jt),this._context.arc(vt,jt,this._radius,0,a)}},result:S};var jo,Uo,ns,Ka,Zo,Vo=b(),wa={point:S,lineStart:function(){wa.point=So},lineEnd:function(){jo&&ro(Uo,ns),wa.point=S},polygonStart:function(){jo=!0},polygonEnd:function(){jo=null},result:function(){var vt=+Vo;return Vo.reset(),vt}};function So(vt,jt){wa.point=ro,Uo=Ka=vt,ns=Zo=jt}function ro(vt,jt){Vo.add(w((Ka-=vt)*Ka+(Zo-=jt)*Zo)),Ka=vt,Zo=jt}function Xo(){this._string=[]}function os(vt){return"m0,"+vt+"a"+vt+","+vt+" 0 1,1 0,"+-2*vt+"a"+vt+","+vt+" 0 1,1 0,"+2*vt+"z"}function wo(vt){return function(jt){var vr=new ta;for(var Zt in vt)vr[Zt]=vt[Zt];return vr.stream=jt,vr}}function ta(){}function qe(vt,jt,vr){var Zt=vt.clipExtent&&vt.clipExtent();return vt.scale(150).translate([0,0]),null!=Zt&&vt.clipExtent(null),X(vr,vt.stream(ka)),jt(ka.result()),null!=Zt&&vt.clipExtent(Zt),vt}function Ze(vt,jt,vr){return qe(vt,function(Zt){var yr=jt[1][0]-jt[0][0],Hr=jt[1][1]-jt[0][1],Xr=Math.min(yr/(Zt[1][0]-Zt[0][0]),Hr/(Zt[1][1]-Zt[0][1])),ln=+jt[0][0]+(yr-Xr*(Zt[1][0]+Zt[0][0]))/2,bn=+jt[0][1]+(Hr-Xr*(Zt[1][1]+Zt[0][1]))/2;vt.scale(150*Xr).translate([ln,bn])},vr)}function nt(vt,jt,vr){return Ze(vt,[[0,0],jt],vr)}function ht(vt,jt,vr){return qe(vt,function(Zt){var yr=+jt,Hr=yr/(Zt[1][0]-Zt[0][0]),Xr=(yr-Hr*(Zt[1][0]+Zt[0][0]))/2,ln=-Hr*Zt[0][1];vt.scale(150*Hr).translate([Xr,ln])},vr)}function xt(vt,jt,vr){return qe(vt,function(Zt){var yr=+jt,Hr=yr/(Zt[1][1]-Zt[0][1]),Xr=-Hr*Zt[0][0],ln=(yr-Hr*(Zt[1][1]+Zt[0][1]))/2;vt.scale(150*Hr).translate([Xr,ln])},vr)}Xo.prototype={_radius:4.5,_circle:os(4.5),pointRadius:function(vt){return(vt=+vt)!==this._radius&&(this._radius=vt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(vt,jt){switch(this._point){case 0:this._string.push("M",vt,",",jt),this._point=1;break;case 1:this._string.push("L",vt,",",jt);break;default:null==this._circle&&(this._circle=os(this._radius)),this._string.push("M",vt,",",jt,this._circle)}},result:function(){if(this._string.length){var vt=this._string.join("");return this._string=[],vt}return null}},ta.prototype={constructor:ta,point:function(vt,jt){this.stream.point(vt,jt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var yt=g(30*s);function Ot(vt,jt){return+jt?function(vr,Zt){function yr(Hr,Xr,ln,bn,vn,An,In,xn,Pn,Wn,$n,fi,un,hi){var Vn=In-Hr,Xn=xn-Xr,ui=Vn*Vn+Xn*Xn;if(ui>4*Zt&&un--){var Ci=bn+Wn,Gi=vn+$n,Rn=An+fi,Hi=w(Ci*Ci+Gi*Gi+Rn*Rn),qi=O(Rn/=Hi),Ti=c(c(Rn)-1)<r||c(ln-Pn)<r?(ln+Pn)/2:p(Gi,Ci),Xi=vr(Ti,qi),Ni=Xi[0],fa=Xi[1],oi=Ni-Hr,ia=fa-Xr,$a=Xn*oi-Vn*ia;($a*$a/ui>Zt||c((Vn*oi+Xn*ia)/ui-.5)>.3||bn*Wn+vn*$n+An*fi<yt)&&(yr(Hr,Xr,ln,bn,vn,An,Ni,fa,Ti,Ci/=Hi,Gi/=Hi,Rn,un,hi),hi.point(Ni,fa),yr(Ni,fa,Ti,Ci,Gi,Rn,In,xn,Pn,Wn,$n,fi,un,hi))}}return function(Hr){var Xr,ln,bn,vn,An,In,xn,Pn,Wn,$n,fi,un,hi={point:Vn,lineStart:Xn,lineEnd:Ci,polygonStart:function(){Hr.polygonStart(),hi.lineStart=Gi},polygonEnd:function(){Hr.polygonEnd(),hi.lineStart=Xn}};function Vn(qi,Ti){qi=vr(qi,Ti),Hr.point(qi[0],qi[1])}function Xn(){Pn=NaN,hi.point=ui,Hr.lineStart()}function ui(qi,Ti){var Xi=se([qi,Ti]),Ni=vr(qi,Ti);yr(Pn,Wn,xn,$n,fi,un,Pn=Ni[0],Wn=Ni[1],xn=qi,$n=Xi[0],fi=Xi[1],un=Xi[2],16,Hr),Hr.point(Pn,Wn)}function Ci(){hi.point=Vn,Hr.lineEnd()}function Gi(){Xn(),hi.point=Rn,hi.lineEnd=Hi}function Rn(qi,Ti){ui(Xr=qi,Ti),ln=Pn,bn=Wn,vn=$n,An=fi,In=un,hi.point=ui}function Hi(){yr(Pn,Wn,xn,$n,fi,un,ln,bn,Xr,vn,An,In,16,Hr),hi.lineEnd=Ci,Ci()}return hi}}(vt,jt):(vr=vt,wo({point:function(Zt,yr){Zt=vr(Zt,yr),this.stream.point(Zt[0],Zt[1])}}));var vr}var ir=wo({point:function(vt,jt){this.stream.point(vt*s,jt*s)}});function or(vt,jt,vr,Zt,yr){function Hr(Xr,ln){return[jt+vt*(Xr*=Zt),vr-vt*(ln*=yr)]}return Hr.invert=function(Xr,ln){return[(Xr-jt)/vt*Zt,(vr-ln)/vt*yr]},Hr}function er(vt,jt,vr,Zt,yr,Hr){var Xr=g(Hr),ln=_(Hr),bn=Xr*vt,vn=ln*vt,An=Xr/vt,In=ln/vt,xn=(ln*vr-Xr*jt)/vt,Pn=(ln*jt+Xr*vr)/vt;function Wn($n,fi){return[bn*($n*=Zt)-vn*(fi*=yr)+jt,vr-vn*$n-bn*fi]}return Wn.invert=function($n,fi){return[Zt*(An*$n-In*fi+xn),yr*(Pn-In*$n-An*fi)]},Wn}function dr(vt){return kr(function(){return vt})()}function kr(vt){var jt,vr,Zt,yr,Hr,Xr,ln,bn,vn,An,In=150,xn=480,Pn=250,Wn=0,$n=0,fi=0,un=0,hi=0,Vn=0,Xn=1,ui=1,Ci=null,Gi=Kr,Rn=null,Hi=nn,qi=.5;function Ti(oi){return bn(oi[0]*s,oi[1]*s)}function Xi(oi){return(oi=bn.invert(oi[0],oi[1]))&&[oi[0]*i,oi[1]*i]}function Ni(){var oi=er(In,0,0,Xn,ui,Vn).apply(null,jt(Wn,$n)),ia=(Vn?er:or)(In,xn-oi[0],Pn-oi[1],Xn,ui,Vn);return vr=Ut(fi,un,hi),ln=dt(jt,ia),bn=dt(vr,ln),Xr=Ot(ln,qi),fa()}function fa(){return vn=An=null,Ti}return Ti.stream=function(oi){return vn&&An===oi?vn:vn=ir((ia=vr,wo({point:function($a,ss){var Jo=ia($a,ss);return this.stream.point(Jo[0],Jo[1])}}))(Gi(Xr(Hi(An=oi)))));var ia},Ti.preclip=function(oi){return arguments.length?(Gi=oi,Ci=void 0,fa()):Gi},Ti.postclip=function(oi){return arguments.length?(Hi=oi,Rn=Zt=yr=Hr=null,fa()):Hi},Ti.clipAngle=function(oi){return arguments.length?(Gi=+oi?sn(Ci=oi*s):(Ci=null,Kr),fa()):Ci*i},Ti.clipExtent=function(oi){return arguments.length?(Hi=null==oi?(Rn=Zt=yr=Hr=null,nn):gn(Rn=+oi[0][0],Zt=+oi[0][1],yr=+oi[1][0],Hr=+oi[1][1]),fa()):null==Rn?null:[[Rn,Zt],[yr,Hr]]},Ti.scale=function(oi){return arguments.length?(In=+oi,Ni()):In},Ti.translate=function(oi){return arguments.length?(xn=+oi[0],Pn=+oi[1],Ni()):[xn,Pn]},Ti.center=function(oi){return arguments.length?(Wn=oi[0]%360*s,$n=oi[1]%360*s,Ni()):[Wn*i,$n*i]},Ti.rotate=function(oi){return arguments.length?(fi=oi[0]%360*s,un=oi[1]%360*s,hi=oi.length>2?oi[2]%360*s:0,Ni()):[fi*i,un*i,hi*i]},Ti.angle=function(oi){return arguments.length?(Vn=oi%360*s,Ni()):Vn*i},Ti.reflectX=function(oi){return arguments.length?(Xn=oi?-1:1,Ni()):Xn<0},Ti.reflectY=function(oi){return arguments.length?(ui=oi?-1:1,Ni()):ui<0},Ti.precision=function(oi){return arguments.length?(Xr=Ot(ln,qi=oi*oi),fa()):w(qi)},Ti.fitExtent=function(oi,ia){return Ze(Ti,oi,ia)},Ti.fitSize=function(oi,ia){return nt(Ti,oi,ia)},Ti.fitWidth=function(oi,ia){return ht(Ti,oi,ia)},Ti.fitHeight=function(oi,ia){return xt(Ti,oi,ia)},function(){return jt=vt.apply(this,arguments),Ti.invert=jt.invert&&Xi,Ni()}}function Lr(vt){var jt=0,vr=o/3,Zt=kr(vt),yr=Zt(jt,vr);return yr.parallels=function(Hr){return arguments.length?Zt(jt=Hr[0]*s,vr=Hr[1]*s):[jt*i,vr*i]},yr}function Ir(vt,jt){var vr=_(vt),Zt=(vr+_(jt))/2;if(c(Zt)<r)return function(ln){var bn=g(ln);function vn(An,In){return[An*bn,_(In)/bn]}return vn.invert=function(An,In){return[An/bn,O(In*bn)]},vn}(vt);var yr=1+vr*(2*Zt-vr),Hr=w(yr)/Zt;function Xr(ln,bn){var vn=w(yr-2*Zt*_(bn))/Zt;return[vn*_(ln*=Zt),Hr-vn*g(ln)]}return Xr.invert=function(ln,bn){var vn=Hr-bn,An=p(ln,c(vn))*k(vn);return vn*Zt<0&&(An-=o*k(ln)*k(vn)),[An/Zt,O((yr-(ln*ln+vn*vn)*Zt*Zt)/(2*Zt))]},Xr}function Wr(){return Lr(Ir).scale(155.424).center([0,33.6442])}function mn(){return Wr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Tn(vt){return function(jt,vr){var Zt=g(jt),yr=g(vr),Hr=vt(Zt*yr);return[Hr*yr*_(jt),Hr*_(vr)]}}function jn(vt){return function(jt,vr){var Zt=w(jt*jt+vr*vr),yr=vt(Zt),Hr=_(yr),Xr=g(yr);return[p(jt*Hr,Zt*Xr),O(Zt&&vr*Hr/Zt)]}}var Gn=Tn(function(vt){return w(2/(1+vt))});Gn.invert=jn(function(vt){return 2*O(vt/2)});var ei=Tn(function(vt){return(vt=A(vt))&&vt/_(vt)});function Yn(vt,jt){return[vt,f(C((t+jt)/2))]}function Mi(vt){var jt,vr,Zt,yr=dr(vt),Hr=yr.center,Xr=yr.scale,ln=yr.translate,bn=yr.clipExtent,vn=null;function An(){var In=o*Xr(),xn=yr(Rr(yr.rotate()).invert([0,0]));return bn(null==vn?[[xn[0]-In,xn[1]-In],[xn[0]+In,xn[1]+In]]:vt===Yn?[[Math.max(xn[0]-In,vn),jt],[Math.min(xn[0]+In,vr),Zt]]:[[vn,Math.max(xn[1]-In,jt)],[vr,Math.min(xn[1]+In,Zt)]])}return yr.scale=function(In){return arguments.length?(Xr(In),An()):Xr()},yr.translate=function(In){return arguments.length?(ln(In),An()):ln()},yr.center=function(In){return arguments.length?(Hr(In),An()):Hr()},yr.clipExtent=function(In){return arguments.length?(null==In?vn=jt=vr=Zt=null:(vn=+In[0][0],jt=+In[0][1],vr=+In[1][0],Zt=+In[1][1]),An()):null==vn?null:[[vn,jt],[vr,Zt]]},An()}function Ri(vt){return C((t+vt)/2)}function Qi(vt,jt){var vr=g(vt),Zt=vt===jt?_(vt):f(vr/g(jt))/f(Ri(jt)/Ri(vt)),yr=vr*T(Ri(vt),Zt)/Zt;if(!Zt)return Yn;function Hr(Xr,ln){yr>0?ln<-t+r&&(ln=-t+r):ln>t-r&&(ln=t-r);var bn=yr/T(Ri(ln),Zt);return[bn*_(Zt*Xr),yr-bn*g(Zt*Xr)]}return Hr.invert=function(Xr,ln){var bn=yr-ln,vn=k(Zt)*w(Xr*Xr+bn*bn),An=p(Xr,c(bn))*k(bn);return bn*Zt<0&&(An-=o*k(Xr)*k(bn)),[An/Zt,2*l(T(yr/vn,1/Zt))-t]},Hr}function Ki(vt,jt){return[vt,jt]}function ea(vt,jt){var vr=g(vt),Zt=vt===jt?_(vt):(vr-g(jt))/(jt-vt),yr=vr/Zt+vt;if(c(Zt)<r)return Ki;function Hr(Xr,ln){var bn=yr-ln,vn=Zt*Xr;return[bn*_(vn),yr-bn*g(vn)]}return Hr.invert=function(Xr,ln){var bn=yr-ln,vn=p(Xr,c(bn))*k(bn);return bn*Zt<0&&(vn-=o*k(Xr)*k(bn)),[vn/Zt,yr-k(Zt)*w(Xr*Xr+bn*bn)]},Hr}ei.invert=jn(function(vt){return vt}),Yn.invert=function(vt,jt){return[vt,2*l(x(jt))-t]},Ki.invert=Ki;var Da=1.340264,Ea=-.081106,ca=893e-6,ma=.003796,Aa=w(3)/2;function Ha(vt,jt){var vr=O(Aa*_(jt)),Zt=vr*vr,yr=Zt*Zt*Zt;return[vt*g(vr)/(Aa*(Da+3*Ea*Zt+yr*(7*ca+9*ma*Zt))),vr*(Da+Ea*Zt+yr*(ca+ma*Zt))]}function po(vt,jt){var vr=g(jt),Zt=g(vt)*vr;return[vr*_(vt)/Zt,_(jt)/Zt]}function go(vt,jt){var vr=jt*jt,Zt=vr*vr;return[vt*(.8707-.131979*vr+Zt*(Zt*(.003971*vr-.001529*Zt)-.013791)),jt*(1.007226+vr*(.015085+Zt*(.028874*vr-.044475-.005916*Zt)))]}function mo(vt,jt){return[g(jt)*_(vt),_(jt)]}function vo(vt,jt){var vr=g(jt),Zt=1+g(vt)*vr;return[vr*_(vt)/Zt,_(jt)/Zt]}function Zi(vt,jt){return[f(C((t+jt)/2)),-vt]}Ha.invert=function(vt,jt){for(var vr,Zt=jt,yr=Zt*Zt,Hr=yr*yr*yr,Xr=0;Xr<12&&(Hr=(yr=(Zt-=vr=(Zt*(Da+Ea*yr+Hr*(ca+ma*yr))-jt)/(Da+3*Ea*yr+Hr*(7*ca+9*ma*yr)))*Zt)*yr*yr,!(c(vr)<1e-12));++Xr);return[Aa*vt*(Da+3*Ea*yr+Hr*(7*ca+9*ma*yr))/g(Zt),O(_(Zt)/Aa)]},po.invert=jn(l),go.invert=function(vt,jt){var vr,Zt=jt,yr=25;do{var Hr=Zt*Zt,Xr=Hr*Hr;Zt-=vr=(Zt*(1.007226+Hr*(.015085+Xr*(.028874*Hr-.044475-.005916*Xr)))-jt)/(1.007226+Hr*(.045255+Xr*(.259866*Hr-.311325-.005916*11*Xr)))}while(c(vr)>r&&--yr>0);return[vt/(.8707+(Hr=Zt*Zt)*(Hr*(Hr*Hr*Hr*(.003971-.001529*Hr)-.013791)-.131979)),Zt]},mo.invert=jn(O),vo.invert=jn(function(vt){return 2*l(vt)}),Zi.invert=function(vt,jt){return[-jt,2*l(x(vt))-t]},m.geoAlbers=mn,m.geoAlbersUsa=function(){var vt,jt,vr,Zt,yr,Hr,Xr=mn(),ln=Wr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),bn=Wr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),vn={point:function(xn,Pn){Hr=[xn,Pn]}};function An(xn){var Pn=xn[0],Wn=xn[1];return Hr=null,vr.point(Pn,Wn),Hr||(Zt.point(Pn,Wn),Hr)||(yr.point(Pn,Wn),Hr)}function In(){return vt=jt=null,An}return An.invert=function(xn){var Pn=Xr.scale(),Wn=Xr.translate(),$n=(xn[0]-Wn[0])/Pn,fi=(xn[1]-Wn[1])/Pn;return(fi>=.12&&fi<.234&&$n>=-.425&&$n<-.214?ln:fi>=.166&&fi<.234&&$n>=-.214&&$n<-.115?bn:Xr).invert(xn)},An.stream=function(xn){return vt&&jt===xn?vt:(Pn=[Xr.stream(jt=xn),ln.stream(xn),bn.stream(xn)],Wn=Pn.length,vt={point:function($n,fi){for(var un=-1;++un<Wn;)Pn[un].point($n,fi)},sphere:function(){for(var $n=-1;++$n<Wn;)Pn[$n].sphere()},lineStart:function(){for(var $n=-1;++$n<Wn;)Pn[$n].lineStart()},lineEnd:function(){for(var $n=-1;++$n<Wn;)Pn[$n].lineEnd()},polygonStart:function(){for(var $n=-1;++$n<Wn;)Pn[$n].polygonStart()},polygonEnd:function(){for(var $n=-1;++$n<Wn;)Pn[$n].polygonEnd()}});var Pn,Wn},An.precision=function(xn){return arguments.length?(Xr.precision(xn),ln.precision(xn),bn.precision(xn),In()):Xr.precision()},An.scale=function(xn){return arguments.length?(Xr.scale(xn),ln.scale(.35*xn),bn.scale(xn),An.translate(Xr.translate())):Xr.scale()},An.translate=function(xn){if(!arguments.length)return Xr.translate();var Pn=Xr.scale(),Wn=+xn[0],$n=+xn[1];return vr=Xr.translate(xn).clipExtent([[Wn-.455*Pn,$n-.238*Pn],[Wn+.455*Pn,$n+.238*Pn]]).stream(vn),Zt=ln.translate([Wn-.307*Pn,$n+.201*Pn]).clipExtent([[Wn-.425*Pn+r,$n+.12*Pn+r],[Wn-.214*Pn-r,$n+.234*Pn-r]]).stream(vn),yr=bn.translate([Wn-.205*Pn,$n+.212*Pn]).clipExtent([[Wn-.214*Pn+r,$n+.166*Pn+r],[Wn-.115*Pn-r,$n+.234*Pn-r]]).stream(vn),In()},An.fitExtent=function(xn,Pn){return Ze(An,xn,Pn)},An.fitSize=function(xn,Pn){return nt(An,xn,Pn)},An.fitWidth=function(xn,Pn){return ht(An,xn,Pn)},An.fitHeight=function(xn,Pn){return xt(An,xn,Pn)},An.scale(1070)},m.geoArea=function(vt){return H.reset(),X(vt,ee),2*H},m.geoAzimuthalEqualArea=function(){return dr(Gn).scale(124.75).clipAngle(179.999)},m.geoAzimuthalEqualAreaRaw=Gn,m.geoAzimuthalEquidistant=function(){return dr(ei).scale(79.4188).clipAngle(179.999)},m.geoAzimuthalEquidistantRaw=ei,m.geoBounds=function(vt){var jt,vr,Zt,yr,Hr,Xr,ln;if(he=Ee=-(_e=xe=1/0),Fe=[],X(vt,ar),vr=Fe.length){for(Fe.sort(Ke),jt=1,Hr=[Zt=Fe[0]];jt<vr;++jt)Ye(Zt,(yr=Fe[jt])[0])||Ye(Zt,yr[1])?(We(Zt[0],yr[1])>We(Zt[0],Zt[1])&&(Zt[1]=yr[1]),We(yr[0],Zt[1])>We(Zt[0],Zt[1])&&(Zt[0]=yr[0])):Hr.push(Zt=yr);for(Xr=-1/0,jt=0,Zt=Hr[vr=Hr.length-1];jt<=vr;Zt=yr,++jt)(ln=We(Zt[1],(yr=Hr[jt])[0]))>Xr&&(Xr=ln,_e=yr[0],Ee=Zt[1])}return Fe=Ne=null,_e===1/0||xe===1/0?[[NaN,NaN],[NaN,NaN]]:[[_e,xe],[Ee,he]]},m.geoCentroid=function(vt){De=$e=Re=ze=Ue=je=rt=ut=gt=At=_t=0,X(vt,ft);var jt=gt,vr=At,Zt=_t,yr=jt*jt+vr*vr+Zt*Zt;return yr<1e-12&&(jt=je,vr=rt,Zt=ut,$e<r&&(jt=Re,vr=ze,Zt=Ue),(yr=jt*jt+vr*vr+Zt*Zt)<1e-12)?[NaN,NaN]:[p(vr,jt)*i,O(Zt/w(yr))*i]},m.geoCircle=function(){var vt,jt,vr=ot([0,0]),Zt=ot(90),yr=ot(6),Hr={point:function(ln,bn){vt.push(ln=jt(ln,bn)),ln[0]*=i,ln[1]*=i}};function Xr(){var ln=vr.apply(this,arguments),bn=Zt.apply(this,arguments)*s,vn=yr.apply(this,arguments)*s;return vt=[],jt=Ut(-ln[0]*s,-ln[1]*s,0).invert,br(Hr,bn,vn,1),ln={type:"Polygon",coordinates:[vt]},vt=jt=null,ln}return Xr.center=function(ln){return arguments.length?(vr="function"==typeof ln?ln:ot([+ln[0],+ln[1]]),Xr):vr},Xr.radius=function(ln){return arguments.length?(Zt="function"==typeof ln?ln:ot(+ln),Xr):Zt},Xr.precision=function(ln){return arguments.length?(yr="function"==typeof ln?ln:ot(+ln),Xr):yr},Xr},m.geoClipAntimeridian=Kr,m.geoClipCircle=sn,m.geoClipExtent=function(){var vt,jt,vr,Zt=0,yr=0,Hr=960,Xr=500;return vr={stream:function(ln){return vt&&jt===ln?vt:vt=gn(Zt,yr,Hr,Xr)(jt=ln)},extent:function(ln){return arguments.length?(Zt=+ln[0][0],yr=+ln[0][1],Hr=+ln[1][0],Xr=+ln[1][1],vt=jt=null,vr):[[Zt,yr],[Hr,Xr]]}}},m.geoClipRectangle=gn,m.geoConicConformal=function(){return Lr(Qi).scale(109.5).parallels([30,30])},m.geoConicConformalRaw=Qi,m.geoConicEqualArea=Wr,m.geoConicEqualAreaRaw=Ir,m.geoConicEquidistant=function(){return Lr(ea).scale(131.154).center([0,13.9389])},m.geoConicEquidistantRaw=ea,m.geoContains=function(vt,jt){return(vt&&Rt.hasOwnProperty(vt.type)?Rt[vt.type]:xr)(vt,jt)},m.geoDistance=Sr,m.geoEqualEarth=function(){return dr(Ha).scale(177.158)},m.geoEqualEarthRaw=Ha,m.geoEquirectangular=function(){return dr(Ki).scale(152.63)},m.geoEquirectangularRaw=Ki,m.geoGnomonic=function(){return dr(po).scale(144.049).clipAngle(60)},m.geoGnomonicRaw=po,m.geoGraticule=Nr,m.geoGraticule10=function(){return Nr()()},m.geoIdentity=function(){var vt,jt,vr,Zt,yr,Hr,Xr,ln=1,bn=0,vn=0,An=1,In=1,xn=0,Pn=null,Wn=1,$n=1,fi=wo({point:function(Xn,ui){var Ci=Vn([Xn,ui]);this.stream.point(Ci[0],Ci[1])}}),un=nn;function hi(){return Wn=ln*An,$n=ln*In,Hr=Xr=null,Vn}function Vn(Xn){var ui=Xn[0]*Wn,Ci=Xn[1]*$n;if(xn){var Gi=Ci*vt-ui*jt;ui=ui*vt+Ci*jt,Ci=Gi}return[ui+bn,Ci+vn]}return Vn.invert=function(Xn){var ui=Xn[0]-bn,Ci=Xn[1]-vn;if(xn){var Gi=Ci*vt+ui*jt;ui=ui*vt-Ci*jt,Ci=Gi}return[ui/Wn,Ci/$n]},Vn.stream=function(Xn){return Hr&&Xr===Xn?Hr:Hr=fi(un(Xr=Xn))},Vn.postclip=function(Xn){return arguments.length?(un=Xn,Pn=vr=Zt=yr=null,hi()):un},Vn.clipExtent=function(Xn){return arguments.length?(un=null==Xn?(Pn=vr=Zt=yr=null,nn):gn(Pn=+Xn[0][0],vr=+Xn[0][1],Zt=+Xn[1][0],yr=+Xn[1][1]),hi()):null==Pn?null:[[Pn,vr],[Zt,yr]]},Vn.scale=function(Xn){return arguments.length?(ln=+Xn,hi()):ln},Vn.translate=function(Xn){return arguments.length?(bn=+Xn[0],vn=+Xn[1],hi()):[bn,vn]},Vn.angle=function(Xn){return arguments.length?(jt=_(xn=Xn%360*s),vt=g(xn),hi()):xn*i},Vn.reflectX=function(Xn){return arguments.length?(An=Xn?-1:1,hi()):An<0},Vn.reflectY=function(Xn){return arguments.length?(In=Xn?-1:1,hi()):In<0},Vn.fitExtent=function(Xn,ui){return Ze(Vn,Xn,ui)},Vn.fitSize=function(Xn,ui){return nt(Vn,Xn,ui)},Vn.fitWidth=function(Xn,ui){return ht(Vn,Xn,ui)},Vn.fitHeight=function(Xn,ui){return xt(Vn,Xn,ui)},Vn},m.geoInterpolate=function(vt,jt){var vr=vt[0]*s,Zt=vt[1]*s,yr=jt[0]*s,Hr=jt[1]*s,Xr=g(Zt),ln=_(Zt),bn=g(Hr),vn=_(Hr),An=Xr*g(vr),In=Xr*_(vr),xn=bn*g(yr),Pn=bn*_(yr),Wn=2*O(w(P(Hr-Zt)+Xr*bn*P(yr-vr))),$n=_(Wn),fi=Wn?function(un){var hi=_(un*=Wn)/$n,Vn=_(Wn-un)/$n,Xn=Vn*An+hi*xn,ui=Vn*In+hi*Pn,Ci=Vn*ln+hi*vn;return[p(ui,Xn)*i,p(Ci,w(Xn*Xn+ui*ui))*i]}:function(){return[vr*i,Zt*i]};return fi.distance=Wn,fi},m.geoLength=Un,m.geoMercator=function(){return Mi(Yn).scale(961/a)},m.geoMercatorRaw=Yn,m.geoNaturalEarth1=function(){return dr(go).scale(175.295)},m.geoNaturalEarth1Raw=go,m.geoOrthographic=function(){return dr(mo).scale(249.5).clipAngle(90+r)},m.geoOrthographicRaw=mo,m.geoPath=function(vt,jt){var vr,Zt,yr=4.5;function Hr(Xr){return Xr&&("function"==typeof yr&&Zt.pointRadius(+yr.apply(this,arguments)),X(Xr,vr(Zt))),Zt.result()}return Hr.area=function(Xr){return X(Xr,vr(Fn)),Fn.result()},Hr.measure=function(Xr){return X(Xr,vr(wa)),wa.result()},Hr.bounds=function(Xr){return X(Xr,vr(ka)),ka.result()},Hr.centroid=function(Xr){return X(Xr,vr(_a)),_a.result()},Hr.projection=function(Xr){return arguments.length?(vr=null==Xr?(vt=null,nn):(vt=Xr).stream,Hr):vt},Hr.context=function(Xr){return arguments.length?(Zt=null==Xr?(jt=null,new Xo):new Fs(jt=Xr),"function"!=typeof yr&&Zt.pointRadius(yr),Hr):jt},Hr.pointRadius=function(Xr){return arguments.length?(yr="function"==typeof Xr?Xr:(Zt.pointRadius(+Xr),+Xr),Hr):yr},Hr.projection(vt).context(jt)},m.geoProjection=dr,m.geoProjectionMutator=kr,m.geoRotation=Rr,m.geoStereographic=function(){return dr(vo).scale(250).clipAngle(142)},m.geoStereographicRaw=vo,m.geoStream=X,m.geoTransform=function(vt){return{stream:wo(vt)}},m.geoTransverseMercator=function(){var vt=Mi(Zi),jt=vt.center,vr=vt.rotate;return vt.center=function(Zt){return arguments.length?jt([-Zt[1],Zt[0]]):[(Zt=jt())[1],-Zt[0]]},vt.rotate=function(Zt){return arguments.length?vr([Zt[0],Zt[1],Zt.length>2?Zt[2]+90:90]):[(Zt=vr())[0],Zt[1],Zt[2]-90]},vr([0,0,90]).scale(159.155)},m.geoTransverseMercatorRaw=Zi,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,y("d3-array")):v((m=m||self).d3=m.d3||{},m.d3)},{"d3-array":107}],115:[function(y,Q,K){var m,v;m=this,v=function(m){"use strict";function v(ie,ue){return ie.parent===ue.parent?1:2}function b(ie,ue){return ie+ue.x}function h(ie,ue){return Math.max(ie,ue.y)}function e(ie){var ue=0,le=ie.children,de=le&&le.length;if(de)for(;--de>=0;)ue+=le[de].value;else ue=1;ie.value=ue}function n(ie,ue){var le,de,be,_e,xe,Ee=new d(ie),he=+ie.value&&(Ee.value=ie.value),me=[Ee];for(null==ue&&(ue=r);le=me.pop();)if(he&&(le.value=+le.data.value),(be=ue(le.data))&&(xe=be.length))for(le.children=new Array(xe),_e=xe-1;_e>=0;--_e)me.push(de=le.children[_e]=new d(be[_e])),de.parent=le,de.depth=le.depth+1;return Ee.eachBefore(t)}function r(ie){return ie.children}function o(ie){ie.data=ie.data.data}function t(ie){var ue=0;do{ie.height=ue}while((ie=ie.parent)&&ie.height<++ue)}function d(ie){this.data=ie,this.depth=this.height=0,this.parent=null}d.prototype=n.prototype={constructor:d,count:function(){return this.eachAfter(e)},each:function(ie){var ue,le,de,be,_e=this,xe=[_e];do{for(ue=xe.reverse(),xe=[];_e=ue.pop();)if(ie(_e),le=_e.children)for(de=0,be=le.length;de<be;++de)xe.push(le[de])}while(xe.length);return this},eachAfter:function(ie){for(var ue,le,de,be=this,_e=[be],xe=[];be=_e.pop();)if(xe.push(be),ue=be.children)for(le=0,de=ue.length;le<de;++le)_e.push(ue[le]);for(;be=xe.pop();)ie(be);return this},eachBefore:function(ie){for(var ue,le,de=this,be=[de];de=be.pop();)if(ie(de),ue=de.children)for(le=ue.length-1;le>=0;--le)be.push(ue[le]);return this},sum:function(ie){return this.eachAfter(function(ue){for(var le=+ie(ue.data)||0,de=ue.children,be=de&&de.length;--be>=0;)le+=de[be].value;ue.value=le})},sort:function(ie){return this.eachBefore(function(ue){ue.children&&ue.children.sort(ie)})},path:function(ie){for(var ue=this,le=function(_e,xe){if(_e===xe)return _e;var Ee=_e.ancestors(),he=xe.ancestors(),me=null;for(_e=Ee.pop(),xe=he.pop();_e===xe;)me=_e,_e=Ee.pop(),xe=he.pop();return me}(ue,ie),de=[ue];ue!==le;)de.push(ue=ue.parent);for(var be=de.length;ie!==le;)de.splice(be,0,ie),ie=ie.parent;return de},ancestors:function(){for(var ie=this,ue=[ie];ie=ie.parent;)ue.push(ie);return ue},descendants:function(){var ie=[];return this.each(function(ue){ie.push(ue)}),ie},leaves:function(){var ie=[];return this.eachBefore(function(ue){ue.children||ie.push(ue)}),ie},links:function(){var ie=this,ue=[];return ie.each(function(le){le!==ie&&ue.push({source:le.parent,target:le})}),ue},copy:function(){return n(this).eachBefore(o)}};var a=Array.prototype.slice;function i(ie){for(var ue,le,de=0,be=(ie=function(xe){for(var Ee,he,me=xe.length;me;)he=Math.random()*me--|0,Ee=xe[me],xe[me]=xe[he],xe[he]=Ee;return xe}(a.call(ie))).length,_e=[];de<be;)ue=ie[de],le&&l(le,ue)?++de:(le=g(_e=s(_e,ue)),de=0);return le}function s(ie,ue){var le,de;if(p(ue,ie))return[ue];for(le=0;le<ie.length;++le)if(c(ue,ie[le])&&p(u(ie[le],ue),ie))return[ie[le],ue];for(le=0;le<ie.length-1;++le)for(de=le+1;de<ie.length;++de)if(c(u(ie[le],ie[de]),ue)&&c(u(ie[le],ue),ie[de])&&c(u(ie[de],ue),ie[le])&&p(x(ie[le],ie[de],ue),ie))return[ie[le],ie[de],ue];throw new Error}function c(ie,ue){var le=ie.r-ue.r,de=ue.x-ie.x,be=ue.y-ie.y;return le<0||le*le<de*de+be*be}function l(ie,ue){var le=ie.r-ue.r+1e-6,de=ue.x-ie.x,be=ue.y-ie.y;return le>0&&le*le>de*de+be*be}function p(ie,ue){for(var le=0;le<ue.length;++le)if(!l(ie,ue[le]))return!1;return!0}function g(ie){switch(ie.length){case 1:return{x:(ue=ie[0]).x,y:ue.y,r:ue.r};case 2:return u(ie[0],ie[1]);case 3:return x(ie[0],ie[1],ie[2])}var ue}function u(ie,ue){var le=ie.x,de=ie.y,be=ie.r,_e=ue.x,xe=ue.y,Ee=ue.r,he=_e-le,me=xe-de,Se=Ee-be,Me=Math.sqrt(he*he+me*me);return{x:(le+_e+he/Me*Se)/2,y:(de+xe+me/Me*Se)/2,r:(Me+be+Ee)/2}}function x(ie,ue,le){var de=ie.x,be=ie.y,_e=ie.r,xe=ue.x,Ee=ue.y,he=ue.r,me=le.x,Se=le.y,Me=le.r,Ie=de-xe,Fe=de-me,Ne=be-Ee,De=be-Se,$e=he-_e,Re=Me-_e,ze=de*de+be*be-_e*_e,Ue=ze-xe*xe-Ee*Ee+he*he,je=ze-me*me-Se*Se+Me*Me,rt=Fe*Ne-Ie*De,ut=(Ne*je-De*Ue)/(2*rt)-de,gt=(De*$e-Ne*Re)/rt,At=(Fe*Ue-Ie*je)/(2*rt)-be,_t=(Ie*Re-Fe*$e)/rt,it=gt*gt+_t*_t-1,et=2*(_e+ut*gt+At*_t),wt=ut*ut+At*At-_e*_e,Gt=-(it?(et+Math.sqrt(et*et-4*it*wt))/(2*it):wt/et);return{x:de+ut+gt*Gt,y:be+At+_t*Gt,r:Gt}}function f(ie,ue,le){var de,be,_e,xe,Ee=ie.x-ue.x,he=ie.y-ue.y,me=Ee*Ee+he*he;me?(be=ue.r+le.r,xe=ie.r+le.r,(be*=be)>(xe*=xe)?(de=(me+xe-be)/(2*me),_e=Math.sqrt(Math.max(0,xe/me-de*de)),le.x=ie.x-de*Ee-_e*he,le.y=ie.y-de*he+_e*Ee):(de=(me+be-xe)/(2*me),_e=Math.sqrt(Math.max(0,be/me-de*de)),le.x=ue.x+de*Ee-_e*he,le.y=ue.y+de*he+_e*Ee)):(le.x=ue.x+le.r,le.y=ue.y)}function T(ie,ue){var le=ie.r+ue.r-1e-6,de=ue.x-ie.x,be=ue.y-ie.y;return le>0&&le*le>de*de+be*be}function _(ie){var ue=ie._,le=ie.next._,de=ue.r+le.r,be=(ue.x*le.r+le.x*ue.r)/de,_e=(ue.y*le.r+le.y*ue.r)/de;return be*be+_e*_e}function k(ie){this._=ie,this.next=null,this.previous=null}function w(ie){if(!(be=ie.length))return 0;var ue,le,de,be,_e,xe,Ee,he,me,Se,Me;if((ue=ie[0]).x=0,ue.y=0,!(be>1))return ue.r;if(ue.x=-(le=ie[1]).r,le.x=ue.r,le.y=0,!(be>2))return ue.r+le.r;f(le,ue,de=ie[2]),ue=new k(ue),le=new k(le),de=new k(de),ue.next=de.previous=le,le.next=ue.previous=de,de.next=le.previous=ue;e:for(Ee=3;Ee<be;++Ee){f(ue._,le._,de=ie[Ee]),de=new k(de),he=le.next,me=ue.previous,Se=le._.r,Me=ue._.r;do{if(Se<=Me){if(T(he._,de._)){ue.next=le=he,le.previous=ue,--Ee;continue e}Se+=he._.r,he=he.next}else{if(T(me._,de._)){(ue=me).next=le,le.previous=ue,--Ee;continue e}Me+=me._.r,me=me.previous}}while(he!==me.next);for(de.previous=ue,de.next=le,ue.next=le.previous=le=de,_e=_(ue);(de=de.next)!==le;)(xe=_(de))<_e&&(ue=de,_e=xe);le=ue.next}for(ue=[le._],de=le;(de=de.next)!==le;)ue.push(de._);for(de=i(ue),Ee=0;Ee<be;++Ee)(ue=ie[Ee]).x-=de.x,ue.y-=de.y;return de.r}function C(ie){return null==ie?null:A(ie)}function A(ie){if("function"!=typeof ie)throw new Error;return ie}function O(){return 0}function P(ie){return function(){return ie}}function S(ie){return Math.sqrt(ie.value)}function E(ie){return function(ue){ue.children||(ue.r=Math.max(0,+ie(ue)||0))}}function D(ie,ue){return function(le){if(de=le.children){var de,be,_e,xe=de.length,Ee=ie(le)*ue||0;if(Ee)for(be=0;be<xe;++be)de[be].r+=Ee;if(_e=w(de),Ee)for(be=0;be<xe;++be)de[be].r-=Ee;le.r=_e+Ee}}}function z(ie){return function(ue){var le=ue.parent;ue.r*=ie,le&&(ue.x=le.x+ie*ue.x,ue.y=le.y+ie*ue.y)}}function N(ie){ie.x0=Math.round(ie.x0),ie.y0=Math.round(ie.y0),ie.x1=Math.round(ie.x1),ie.y1=Math.round(ie.y1)}function V(ie,ue,le,de,be){for(var _e,xe=ie.children,Ee=-1,he=xe.length,me=ie.value&&(de-ue)/ie.value;++Ee<he;)(_e=xe[Ee]).y0=le,_e.y1=be,_e.x0=ue,_e.x1=ue+=_e.value*me}var X={depth:-1},J={};function G(ie){return ie.id}function Z(ie){return ie.parentId}function re(ie,ue){return ie.parent===ue.parent?1:2}function j(ie){var ue=ie.children;return ue?ue[0]:ie.t}function B(ie){var ue=ie.children;return ue?ue[ue.length-1]:ie.t}function H(ie,ue,le){var de=le/(ue.i-ie.i);ue.c-=de,ue.s+=le,ie.c+=de,ue.z+=le,ue.m+=le}function ee(ie,ue,le){return ie.a.parent===ue.parent?ie.a:le}function U(ie,ue){this._=ie,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ue}function $(ie,ue,le,de,be){for(var _e,xe=ie.children,Ee=-1,he=xe.length,me=ie.value&&(be-le)/ie.value;++Ee<he;)(_e=xe[Ee]).x0=ue,_e.x1=de,_e.y0=le,_e.y1=le+=_e.value*me}U.prototype=Object.create(d.prototype);var q=(1+Math.sqrt(5))/2;function te(ie,ue,le,de,be,_e){for(var xe,Ee,he,me,Se,Me,Ie,Fe,Ne,De,$e,Re=[],ze=ue.children,Ue=0,je=0,rt=ze.length,ut=ue.value;Ue<rt;){he=be-le,me=_e-de;do{Se=ze[je++].value}while(!Se&&je<rt);for(Me=Ie=Se,$e=Se*Se*(De=Math.max(me/he,he/me)/(ut*ie)),Ne=Math.max(Ie/$e,$e/Me);je<rt;++je){if(Se+=Ee=ze[je].value,Ee<Me&&(Me=Ee),Ee>Ie&&(Ie=Ee),$e=Se*Se*De,(Fe=Math.max(Ie/$e,$e/Me))>Ne){Se-=Ee;break}Ne=Fe}Re.push(xe={value:Se,dice:he<me,children:ze.slice(Ue,je)}),xe.dice?V(xe,le,de,be,ut?de+=me*Se/ut:_e):$(xe,le,de,ut?le+=he*Se/ut:be,_e),ut-=Se,Ue=je}return Re}var ne=function ie(ue){function le(de,be,_e,xe,Ee){te(ue,de,be,_e,xe,Ee)}return le.ratio=function(de){return ie((de=+de)>1?de:1)},le}(q),se=function ie(ue){function le(de,be,_e,xe,Ee){if((he=de._squarify)&&he.ratio===ue)for(var he,me,Se,Me,Ie,Fe=-1,Ne=he.length,De=de.value;++Fe<Ne;){for(Se=(me=he[Fe]).children,Me=me.value=0,Ie=Se.length;Me<Ie;++Me)me.value+=Se[Me].value;me.dice?V(me,be,_e,xe,_e+=(Ee-_e)*me.value/De):$(me,be,_e,be+=(xe-be)*me.value/De,Ee),De-=me.value}else de._squarify=he=te(ue,de,be,_e,xe,Ee),he.ratio=ue}return le.ratio=function(de){return ie((de=+de)>1?de:1)},le}(q);m.cluster=function(){var ie=v,ue=1,le=1,de=!1;function be(_e){var xe,Ee=0;_e.eachAfter(function(Ie){var Ne,Fe=Ie.children;Fe?(Ie.x=(Ne=Fe).reduce(b,0)/Ne.length,Ie.y=function(Ne){return 1+Ne.reduce(h,0)}(Fe)):(Ie.x=xe?Ee+=ie(Ie,xe):0,Ie.y=0,xe=Ie)});var he=function(Ie){for(var Fe;Fe=Ie.children;)Ie=Fe[0];return Ie}(_e),me=function(Ie){for(var Fe;Fe=Ie.children;)Ie=Fe[Fe.length-1];return Ie}(_e),Se=he.x-ie(he,me)/2,Me=me.x+ie(me,he)/2;return _e.eachAfter(de?function(Ie){Ie.x=(Ie.x-_e.x)*ue,Ie.y=(_e.y-Ie.y)*le}:function(Ie){Ie.x=(Ie.x-Se)/(Me-Se)*ue,Ie.y=(1-(_e.y?Ie.y/_e.y:1))*le})}return be.separation=function(_e){return arguments.length?(ie=_e,be):ie},be.size=function(_e){return arguments.length?(de=!1,ue=+_e[0],le=+_e[1],be):de?null:[ue,le]},be.nodeSize=function(_e){return arguments.length?(de=!0,ue=+_e[0],le=+_e[1],be):de?[ue,le]:null},be},m.hierarchy=n,m.pack=function(){var ie=null,ue=1,le=1,de=O;function be(_e){return _e.x=ue/2,_e.y=le/2,ie?_e.eachBefore(E(ie)).eachAfter(D(de,.5)).eachBefore(z(1)):_e.eachBefore(E(S)).eachAfter(D(O,1)).eachAfter(D(de,_e.r/Math.min(ue,le))).eachBefore(z(Math.min(ue,le)/(2*_e.r))),_e}return be.radius=function(_e){return arguments.length?(ie=C(_e),be):ie},be.size=function(_e){return arguments.length?(ue=+_e[0],le=+_e[1],be):[ue,le]},be.padding=function(_e){return arguments.length?(de="function"==typeof _e?_e:P(+_e),be):de},be},m.packEnclose=i,m.packSiblings=function(ie){return w(ie),ie},m.partition=function(){var ie=1,ue=1,le=0,de=!1;function be(_e){var Ee,he,xe=_e.height+1;return _e.x0=_e.y0=le,_e.x1=ie,_e.y1=ue/xe,_e.eachBefore((Ee=ue,he=xe,function(me){me.children&&V(me,me.x0,Ee*(me.depth+1)/he,me.x1,Ee*(me.depth+2)/he);var Se=me.x0,Me=me.y0,Ie=me.x1-le,Fe=me.y1-le;Ie<Se&&(Se=Ie=(Se+Ie)/2),Fe<Me&&(Me=Fe=(Me+Fe)/2),me.x0=Se,me.y0=Me,me.x1=Ie,me.y1=Fe})),de&&_e.eachBefore(N),_e}return be.round=function(_e){return arguments.length?(de=!!_e,be):de},be.size=function(_e){return arguments.length?(ie=+_e[0],ue=+_e[1],be):[ie,ue]},be.padding=function(_e){return arguments.length?(le=+_e,be):le},be},m.stratify=function(){var ie=G,ue=Z;function le(de){var be,_e,xe,Ee,he,me,Se,Me=de.length,Ie=new Array(Me),Fe={};for(_e=0;_e<Me;++_e)he=Ie[_e]=new d(be=de[_e]),null!=(me=ie(be,_e,de))&&(me+="")&&(Fe[Se="$"+(he.id=me)]=Se in Fe?J:he);for(_e=0;_e<Me;++_e)if(he=Ie[_e],null!=(me=ue(de[_e],_e,de))&&(me+="")){if(!(Ee=Fe["$"+me]))throw new Error("missing: "+me);if(Ee===J)throw new Error("ambiguous: "+me);Ee.children?Ee.children.push(he):Ee.children=[he],he.parent=Ee}else{if(xe)throw new Error("multiple roots");xe=he}if(!xe)throw new Error("no root");if(xe.parent=X,xe.eachBefore(function(Ne){Ne.depth=Ne.parent.depth+1,--Me}).eachBefore(t),xe.parent=null,Me>0)throw new Error("cycle");return xe}return le.id=function(de){return arguments.length?(ie=A(de),le):ie},le.parentId=function(de){return arguments.length?(ue=A(de),le):ue},le},m.tree=function(){var ie=re,ue=1,le=1,de=null;function be(he){var me=function(Re){for(var ze,Ue,je,rt,ut,gt=new U(Re,0),At=[gt];ze=At.pop();)if(je=ze._.children)for(ze.children=new Array(ut=je.length),rt=ut-1;rt>=0;--rt)At.push(Ue=ze.children[rt]=new U(je[rt],rt)),Ue.parent=ze;return(gt.parent=new U(null,0)).children=[gt],gt}(he);if(me.eachAfter(_e),me.parent.m=-me.z,me.eachBefore(xe),de)he.eachBefore(Ee);else{var Se=he,Me=he,Ie=he;he.eachBefore(function(Re){Re.x<Se.x&&(Se=Re),Re.x>Me.x&&(Me=Re),Re.depth>Ie.depth&&(Ie=Re)});var Fe=Se===Me?1:ie(Se,Me)/2,Ne=Fe-Se.x,De=ue/(Me.x+Fe+Ne),$e=le/(Ie.depth||1);he.eachBefore(function(Re){Re.x=(Re.x+Ne)*De,Re.y=Re.depth*$e})}return he}function _e(he){var me=he.children,Se=he.parent.children,Me=he.i?Se[he.i-1]:null;if(me){!function(Fe){for(var Ne,De=0,$e=0,Re=Fe.children,ze=Re.length;--ze>=0;)(Ne=Re[ze]).z+=De,Ne.m+=De,De+=Ne.s+($e+=Ne.c)}(he);var Ie=(me[0].z+me[me.length-1].z)/2;Me?(he.z=Me.z+ie(he._,Me._),he.m=he.z-Ie):he.z=Ie}else Me&&(he.z=Me.z+ie(he._,Me._));he.parent.A=function(Fe,Ne,De){if(Ne){for(var $e,Re=Fe,ze=Fe,Ue=Ne,je=Re.parent.children[0],rt=Re.m,ut=ze.m,gt=Ue.m,At=je.m;Ue=B(Ue),Re=j(Re),Ue&&Re;)je=j(je),(ze=B(ze)).a=Fe,($e=Ue.z+gt-Re.z-rt+ie(Ue._,Re._))>0&&(H(ee(Ue,Fe,De),Fe,$e),rt+=$e,ut+=$e),gt+=Ue.m,rt+=Re.m,At+=je.m,ut+=ze.m;Ue&&!B(ze)&&(ze.t=Ue,ze.m+=gt-ut),Re&&!j(je)&&(je.t=Re,je.m+=rt-At,De=Fe)}return De}(he,Me,he.parent.A||Se[0])}function xe(he){he._.x=he.z+he.parent.m,he.m+=he.parent.m}function Ee(he){he.x*=ue,he.y=he.depth*le}return be.separation=function(he){return arguments.length?(ie=he,be):ie},be.size=function(he){return arguments.length?(de=!1,ue=+he[0],le=+he[1],be):de?null:[ue,le]},be.nodeSize=function(he){return arguments.length?(de=!0,ue=+he[0],le=+he[1],be):de?[ue,le]:null},be},m.treemap=function(){var ie=ne,ue=!1,le=1,de=1,be=[0],_e=O,xe=O,Ee=O,he=O,me=O;function Se(Ie){return Ie.x0=Ie.y0=0,Ie.x1=le,Ie.y1=de,Ie.eachBefore(Me),be=[0],ue&&Ie.eachBefore(N),Ie}function Me(Ie){var Fe=be[Ie.depth],Ne=Ie.x0+Fe,De=Ie.y0+Fe,$e=Ie.x1-Fe,Re=Ie.y1-Fe;$e<Ne&&(Ne=$e=(Ne+$e)/2),Re<De&&(De=Re=(De+Re)/2),Ie.x0=Ne,Ie.y0=De,Ie.x1=$e,Ie.y1=Re,Ie.children&&(Fe=be[Ie.depth+1]=_e(Ie)/2,Ne+=me(Ie)-Fe,De+=xe(Ie)-Fe,($e-=Ee(Ie)-Fe)<Ne&&(Ne=$e=(Ne+$e)/2),(Re-=he(Ie)-Fe)<De&&(De=Re=(De+Re)/2),ie(Ie,Ne,De,$e,Re))}return Se.round=function(Ie){return arguments.length?(ue=!!Ie,Se):ue},Se.size=function(Ie){return arguments.length?(le=+Ie[0],de=+Ie[1],Se):[le,de]},Se.tile=function(Ie){return arguments.length?(ie=A(Ie),Se):ie},Se.padding=function(Ie){return arguments.length?Se.paddingInner(Ie).paddingOuter(Ie):Se.paddingInner()},Se.paddingInner=function(Ie){return arguments.length?(_e="function"==typeof Ie?Ie:P(+Ie),Se):_e},Se.paddingOuter=function(Ie){return arguments.length?Se.paddingTop(Ie).paddingRight(Ie).paddingBottom(Ie).paddingLeft(Ie):Se.paddingTop()},Se.paddingTop=function(Ie){return arguments.length?(xe="function"==typeof Ie?Ie:P(+Ie),Se):xe},Se.paddingRight=function(Ie){return arguments.length?(Ee="function"==typeof Ie?Ie:P(+Ie),Se):Ee},Se.paddingBottom=function(Ie){return arguments.length?(he="function"==typeof Ie?Ie:P(+Ie),Se):he},Se.paddingLeft=function(Ie){return arguments.length?(me="function"==typeof Ie?Ie:P(+Ie),Se):me},Se},m.treemapBinary=function(ie,ue,le,de,be){var _e,xe,Ee=ie.children,he=Ee.length,me=new Array(he+1);for(me[0]=xe=_e=0;_e<he;++_e)me[_e+1]=xe+=Ee[_e].value;!function Se(Me,Ie,Fe,Ne,De,$e,Re){if(Me>=Ie-1){var ze=Ee[Me];return ze.x0=Ne,ze.y0=De,ze.x1=$e,void(ze.y1=Re)}for(var Ue=me[Me],je=Fe/2+Ue,rt=Me+1,ut=Ie-1;rt<ut;){var gt=rt+ut>>>1;me[gt]<je?rt=gt+1:ut=gt}je-me[rt-1]<me[rt]-je&&Me+1<rt&&--rt;var At=me[rt]-Ue,_t=Fe-At;if($e-Ne>Re-De){var it=(Ne*_t+$e*At)/Fe;Se(Me,rt,At,Ne,De,it,Re),Se(rt,Ie,_t,it,De,$e,Re)}else{var et=(De*_t+Re*At)/Fe;Se(Me,rt,At,Ne,De,$e,et),Se(rt,Ie,_t,Ne,et,$e,Re)}}(0,he,ie.value,ue,le,de,be)},m.treemapDice=V,m.treemapResquarify=se,m.treemapSlice=$,m.treemapSliceDice=function(ie,ue,le,de,be){(1&ie.depth?$:V)(ie,ue,le,de,be)},m.treemapSquarify=ne,Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:(m=m||self).d3=m.d3||{})},{}],116:[function(y,Q,K){var m,v;m=this,v=function(m,v){"use strict";function b(q,te,ne,se,ie){var ue=q*q,le=ue*q;return((1-3*q+3*ue-le)*te+(4-6*ue+3*le)*ne+(1+3*q+3*ue-3*le)*se+le*ie)/6}function h(q){var te=q.length-1;return function(ne){var se=ne<=0?ne=0:ne>=1?(ne=1,te-1):Math.floor(ne*te),ie=q[se],ue=q[se+1];return b((ne-se/te)*te,se>0?q[se-1]:2*ie-ue,ie,ue,se<te-1?q[se+2]:2*ue-ie)}}function e(q){var te=q.length;return function(ne){var se=Math.floor(((ne%=1)<0?++ne:ne)*te);return b((ne-se/te)*te,q[(se+te-1)%te],q[se%te],q[(se+1)%te],q[(se+2)%te])}}function n(q){return function(){return q}}function r(q,te){return function(ne){return q+ne*te}}function o(q,te){var ne=te-q;return ne?r(q,ne>180||ne<-180?ne-360*Math.round(ne/360):ne):n(isNaN(q)?te:q)}function d(q,te){var ne=te-q;return ne?r(q,ne):n(isNaN(q)?te:q)}var a=function q(te){var ne=function t(q){return 1==(q=+q)?d:function(te,ne){return ne-te?(se=te,ie=ne,ue=q,se=Math.pow(se,ue),ie=Math.pow(ie,ue)-se,ue=1/ue,function(le){return Math.pow(se+le*ie,ue)}):n(isNaN(te)?ne:te);var se,ie,ue}}(te);function se(ie,ue){var le=ne((ie=v.rgb(ie)).r,(ue=v.rgb(ue)).r),de=ne(ie.g,ue.g),be=ne(ie.b,ue.b),_e=d(ie.opacity,ue.opacity);return function(xe){return ie.r=le(xe),ie.g=de(xe),ie.b=be(xe),ie.opacity=_e(xe),ie+""}}return se.gamma=q,se}(1);function i(q){return function(te){var ne,se,ie=te.length,ue=new Array(ie),le=new Array(ie),de=new Array(ie);for(ne=0;ne<ie;++ne)se=v.rgb(te[ne]),ue[ne]=se.r||0,le[ne]=se.g||0,de[ne]=se.b||0;return ue=q(ue),le=q(le),de=q(de),se.opacity=1,function(be){return se.r=ue(be),se.g=le(be),se.b=de(be),se+""}}}var s=i(h),c=i(e);function l(q,te){te||(te=[]);var ne,se=q?Math.min(te.length,q.length):0,ie=te.slice();return function(ue){for(ne=0;ne<se;++ne)ie[ne]=q[ne]*(1-ue)+te[ne]*ue;return ie}}function p(q){return ArrayBuffer.isView(q)&&!(q instanceof DataView)}function g(q,te){var ne,se=te?te.length:0,ie=q?Math.min(se,q.length):0,ue=new Array(ie),le=new Array(se);for(ne=0;ne<ie;++ne)ue[ne]=w(q[ne],te[ne]);for(;ne<se;++ne)le[ne]=te[ne];return function(de){for(ne=0;ne<ie;++ne)le[ne]=ue[ne](de);return le}}function u(q,te){var ne=new Date;return q=+q,te=+te,function(se){return ne.setTime(q*(1-se)+te*se),ne}}function x(q,te){return q=+q,te=+te,function(ne){return q*(1-ne)+te*ne}}function f(q,te){var ne,se={},ie={};for(ne in null!==q&&"object"==typeof q||(q={}),null!==te&&"object"==typeof te||(te={}),te)ne in q?se[ne]=w(q[ne],te[ne]):ie[ne]=te[ne];return function(ue){for(ne in se)ie[ne]=se[ne](ue);return ie}}var T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(T.source,"g");function k(q,te){var ne,se,ie,_e,ue=T.lastIndex=_.lastIndex=0,le=-1,de=[],be=[];for(q+="",te+="";(ne=T.exec(q))&&(se=_.exec(te));)(ie=se.index)>ue&&(ie=te.slice(ue,ie),de[le]?de[le]+=ie:de[++le]=ie),(ne=ne[0])===(se=se[0])?de[le]?de[le]+=se:de[++le]=se:(de[++le]=null,be.push({i:le,x:x(ne,se)})),ue=_.lastIndex;return ue<te.length&&(ie=te.slice(ue),de[le]?de[le]+=ie:de[++le]=ie),de.length<2?be[0]?(_e=be[0].x,function(xe){return _e(xe)+""}):function(_e){return function(){return _e}}(te):(te=be.length,function(_e){for(var xe,Ee=0;Ee<te;++Ee)de[(xe=be[Ee]).i]=xe.x(_e);return de.join("")})}function w(q,te){var ne,se=typeof te;return null==te||"boolean"===se?n(te):("number"===se?x:"string"===se?(ne=v.color(te))?(te=ne,a):k:te instanceof v.color?a:te instanceof Date?u:p(te)?l:Array.isArray(te)?g:"function"!=typeof te.valueOf&&"function"!=typeof te.toString||isNaN(te)?f:x)(q,te)}var C,A,O,P,S=180/Math.PI,E={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function D(q,te,ne,se,ie,ue){var le,de,be;return(le=Math.sqrt(q*q+te*te))&&(q/=le,te/=le),(be=q*ne+te*se)&&(ne-=q*be,se-=te*be),(de=Math.sqrt(ne*ne+se*se))&&(ne/=de,se/=de,be/=de),q*se<te*ne&&(q=-q,te=-te,be=-be,le=-le),{translateX:ie,translateY:ue,rotate:Math.atan2(te,q)*S,skewX:Math.atan(be)*S,scaleX:le,scaleY:de}}function z(q,te,ne,se){function ie(ue){return ue.length?ue.pop()+" ":""}return function(ue,le){var _e,xe,Ee,de=[],be=[];return ue=q(ue),le=q(le),function(_e,xe,Ee,he,me,Se){if(_e!==Ee||xe!==he){var Me=me.push("translate(",null,te,null,ne);Se.push({i:Me-4,x:x(_e,Ee)},{i:Me-2,x:x(xe,he)})}else(Ee||he)&&me.push("translate("+Ee+te+he+ne)}(ue.translateX,ue.translateY,le.translateX,le.translateY,de,be),Ee=de,(_e=ue.rotate)!==(xe=le.rotate)?(_e-xe>180?xe+=360:xe-_e>180&&(_e+=360),be.push({i:Ee.push(ie(Ee)+"rotate(",null,se)-2,x:x(_e,xe)})):xe&&Ee.push(ie(Ee)+"rotate("+xe+se),function(_e,xe,Ee,he){_e!==xe?he.push({i:Ee.push(ie(Ee)+"skewX(",null,se)-2,x:x(_e,xe)}):xe&&Ee.push(ie(Ee)+"skewX("+xe+se)}(ue.skewX,le.skewX,de,be),function(_e,xe,Ee,he,me,Se){if(_e!==Ee||xe!==he){var Me=me.push(ie(me)+"scale(",null,",",null,")");Se.push({i:Me-4,x:x(_e,Ee)},{i:Me-2,x:x(xe,he)})}else 1===Ee&&1===he||me.push(ie(me)+"scale("+Ee+","+he+")")}(ue.scaleX,ue.scaleY,le.scaleX,le.scaleY,de,be),ue=le=null,function(_e){for(var xe,Ee=-1,he=be.length;++Ee<he;)de[(xe=be[Ee]).i]=xe.x(_e);return de.join("")}}}var N=z(function(q){return"none"===q?E:(C||(C=document.createElement("DIV"),A=document.documentElement,O=document.defaultView),C.style.transform=q,q=O.getComputedStyle(A.appendChild(C),null).getPropertyValue("transform"),A.removeChild(C),D(+(q=q.slice(7,-1).split(","))[0],+q[1],+q[2],+q[3],+q[4],+q[5]))},"px, ","px)","deg)"),V=z(function(q){return null==q?E:(P||(P=document.createElementNS("http://www.w3.org/2000/svg","g")),P.setAttribute("transform",q),(q=P.transform.baseVal.consolidate())?D((q=q.matrix).a,q.b,q.c,q.d,q.e,q.f):E)},", ",")",")"),X=Math.SQRT2;function J(q){return((q=Math.exp(q))+1/q)/2}function G(q){return function(te,ne){var se=q((te=v.hsl(te)).h,(ne=v.hsl(ne)).h),ie=d(te.s,ne.s),ue=d(te.l,ne.l),le=d(te.opacity,ne.opacity);return function(de){return te.h=se(de),te.s=ie(de),te.l=ue(de),te.opacity=le(de),te+""}}}var Z=G(o),re=G(d);function j(q){return function(te,ne){var se=q((te=v.hcl(te)).h,(ne=v.hcl(ne)).h),ie=d(te.c,ne.c),ue=d(te.l,ne.l),le=d(te.opacity,ne.opacity);return function(de){return te.h=se(de),te.c=ie(de),te.l=ue(de),te.opacity=le(de),te+""}}}var B=j(o),H=j(d);function ee(q){return function te(ne){function se(ie,ue){var le=q((ie=v.cubehelix(ie)).h,(ue=v.cubehelix(ue)).h),de=d(ie.s,ue.s),be=d(ie.l,ue.l),_e=d(ie.opacity,ue.opacity);return function(xe){return ie.h=le(xe),ie.s=de(xe),ie.l=be(Math.pow(xe,ne)),ie.opacity=_e(xe),ie+""}}return ne=+ne,se.gamma=te,se}(1)}var U=ee(o),$=ee(d);m.interpolate=w,m.interpolateArray=function(q,te){return(p(te)?l:g)(q,te)},m.interpolateBasis=h,m.interpolateBasisClosed=e,m.interpolateCubehelix=U,m.interpolateCubehelixLong=$,m.interpolateDate=u,m.interpolateDiscrete=function(q){var te=q.length;return function(ne){return q[Math.max(0,Math.min(te-1,Math.floor(ne*te)))]}},m.interpolateHcl=B,m.interpolateHclLong=H,m.interpolateHsl=Z,m.interpolateHslLong=re,m.interpolateHue=function(q,te){var ne=o(+q,+te);return function(se){var ie=ne(se);return ie-360*Math.floor(ie/360)}},m.interpolateLab=function(q,te){var ne=d((q=v.lab(q)).l,(te=v.lab(te)).l),se=d(q.a,te.a),ie=d(q.b,te.b),ue=d(q.opacity,te.opacity);return function(le){return q.l=ne(le),q.a=se(le),q.b=ie(le),q.opacity=ue(le),q+""}},m.interpolateNumber=x,m.interpolateNumberArray=l,m.interpolateObject=f,m.interpolateRgb=a,m.interpolateRgbBasis=s,m.interpolateRgbBasisClosed=c,m.interpolateRound=function(q,te){return q=+q,te=+te,function(ne){return Math.round(q*(1-ne)+te*ne)}},m.interpolateString=k,m.interpolateTransformCss=N,m.interpolateTransformSvg=V,m.interpolateZoom=function(q,te){var ne,se,ie=q[0],ue=q[1],le=q[2],_e=te[2],xe=te[0]-ie,Ee=te[1]-ue,he=xe*xe+Ee*Ee;if(he<1e-12)se=Math.log(_e/le)/X,ne=function(Ne){return[ie+Ne*xe,ue+Ne*Ee,le*Math.exp(X*Ne*se)]};else{var me=Math.sqrt(he),Se=(_e*_e-le*le+4*he)/(2*le*2*me),Me=(_e*_e-le*le-4*he)/(2*_e*2*me),Ie=Math.log(Math.sqrt(Se*Se+1)-Se),Fe=Math.log(Math.sqrt(Me*Me+1)-Me);se=(Fe-Ie)/X,ne=function(Ne){var De,Ue,$e=Ne*se,Re=J(Ie),ze=le/(2*me)*(Re*(De=X*$e+Ie,((De=Math.exp(2*De))-1)/(De+1))-(Ue=Ie,((Ue=Math.exp(Ue))-1/Ue)/2));return[ie+ze*xe,ue+ze*Ee,le*Re/J(X*$e+Ie)]}}return ne.duration=1e3*se,ne},m.piecewise=function(q,te){for(var ne=0,se=te.length-1,ie=te[0],ue=new Array(se<0?0:se);ne<se;)ue[ne]=q(ie,ie=te[++ne]);return function(le){var de=Math.max(0,Math.min(se-1,Math.floor(le*=se)));return ue[de](le-de)}},m.quantize=function(q,te){for(var ne=new Array(te),se=0;se<te;++se)ne[se]=q(se/(te-1));return ne},Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,y("d3-color")):v((m=m||self).d3=m.d3||{},m.d3)},{"d3-color":109}],117:[function(y,Q,K){var m,v;m=this,v=function(m){"use strict";var v=Math.PI,b=2*v,h=b-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new e}e.prototype=n.prototype={constructor:e,moveTo:function(r,o){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+o)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,o){this._+="L"+(this._x1=+r)+","+(this._y1=+o)},quadraticCurveTo:function(r,o,t,d){this._+="Q"+ +r+","+ +o+","+(this._x1=+t)+","+(this._y1=+d)},bezierCurveTo:function(r,o,t,d,a,i){this._+="C"+ +r+","+ +o+","+ +t+","+ +d+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(r,o,t,d,a){var i=this._x1,s=this._y1,c=(t=+t)-(r=+r),l=(d=+d)-(o=+o),p=i-r,g=s-o,u=p*p+g*g;if((a=+a)<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=r)+","+(this._y1=o);else if(u>1e-6)if(Math.abs(g*c-l*p)>1e-6&&a){var x=t-i,f=d-s,T=c*c+l*l,_=x*x+f*f,k=Math.sqrt(T),w=Math.sqrt(u),C=a*Math.tan((v-Math.acos((T+u-_)/(2*k*w)))/2),A=C/w,O=C/k;Math.abs(A-1)>1e-6&&(this._+="L"+(r+A*p)+","+(o+A*g)),this._+="A"+a+","+a+",0,0,"+ +(g*x>p*f)+","+(this._x1=r+O*c)+","+(this._y1=o+O*l)}else this._+="L"+(this._x1=r)+","+(this._y1=o)},arc:function(r,o,t,d,a,i){r=+r,o=+o,i=!!i;var s=(t=+t)*Math.cos(d),c=t*Math.sin(d),l=r+s,p=o+c,g=1^i,u=i?d-a:a-d;if(t<0)throw new Error("negative radius: "+t);null===this._x1?this._+="M"+l+","+p:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-p)>1e-6)&&(this._+="L"+l+","+p),t&&(u<0&&(u=u%b+b),u>h?this._+="A"+t+","+t+",0,1,"+g+","+(r-s)+","+(o-c)+"A"+t+","+t+",0,1,"+g+","+(this._x1=l)+","+(this._y1=p):u>1e-6&&(this._+="A"+t+","+t+",0,"+ +(u>=v)+","+g+","+(this._x1=r+t*Math.cos(a))+","+(this._y1=o+t*Math.sin(a))))},rect:function(r,o,t,d){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+o)+"h"+ +t+"v"+ +d+"h"+-t+"Z"},toString:function(){return this._}},m.path=n,Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:(m=m||self).d3=m.d3||{})},{}],118:[function(y,Q,K){var m,v;m=this,v=function(m){"use strict";function v(d,a,i,s){if(isNaN(a)||isNaN(i))return d;var c,l,p,g,u,x,f,T,_,k=d._root,w={data:s},C=d._x0,A=d._y0,O=d._x1,P=d._y1;if(!k)return d._root=w,d;for(;k.length;)if((x=a>=(l=(C+O)/2))?C=l:O=l,(f=i>=(p=(A+P)/2))?A=p:P=p,c=k,!(k=k[T=f<<1|x]))return c[T]=w,d;if(g=+d._x.call(null,k.data),u=+d._y.call(null,k.data),a===g&&i===u)return w.next=k,c?c[T]=w:d._root=w,d;do{c=c?c[T]=new Array(4):d._root=new Array(4),(x=a>=(l=(C+O)/2))?C=l:O=l,(f=i>=(p=(A+P)/2))?A=p:P=p}while((T=f<<1|x)==(_=(u>=p)<<1|g>=l));return c[_]=k,c[T]=w,d}function b(d,a,i,s,c){this.node=d,this.x0=a,this.y0=i,this.x1=s,this.y1=c}function h(d){return d[0]}function e(d){return d[1]}function n(d,a,i){var s=new r(a??h,i??e,NaN,NaN,NaN,NaN);return null==d?s:s.addAll(d)}function r(d,a,i,s,c,l){this._x=d,this._y=a,this._x0=i,this._y0=s,this._x1=c,this._y1=l,this._root=void 0}function o(d){for(var a={data:d.data},i=a;d=d.next;)i=i.next={data:d.data};return a}var t=n.prototype=r.prototype;t.copy=function(){var d,a,i=new r(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root;if(!s)return i;if(!s.length)return i._root=o(s),i;for(d=[{source:s,target:i._root=new Array(4)}];s=d.pop();)for(var c=0;c<4;++c)(a=s.source[c])&&(a.length?d.push({source:a,target:s.target[c]=new Array(4)}):s.target[c]=o(a));return i},t.add=function(d){var a=+this._x.call(null,d),i=+this._y.call(null,d);return v(this.cover(a,i),a,i,d)},t.addAll=function(d){var a,i,s,c,l=d.length,p=new Array(l),g=new Array(l),u=1/0,x=1/0,f=-1/0,T=-1/0;for(i=0;i<l;++i)isNaN(s=+this._x.call(null,a=d[i]))||isNaN(c=+this._y.call(null,a))||(p[i]=s,g[i]=c,s<u&&(u=s),s>f&&(f=s),c<x&&(x=c),c>T&&(T=c));if(u>f||x>T)return this;for(this.cover(u,x).cover(f,T),i=0;i<l;++i)v(this,p[i],g[i],d[i]);return this},t.cover=function(d,a){if(isNaN(d=+d)||isNaN(a=+a))return this;var i=this._x0,s=this._y0,c=this._x1,l=this._y1;if(isNaN(i))c=(i=Math.floor(d))+1,l=(s=Math.floor(a))+1;else{for(var p,g,u=c-i,x=this._root;i>d||d>=c||s>a||a>=l;)switch(g=(a<s)<<1|d<i,(p=new Array(4))[g]=x,x=p,u*=2,g){case 0:c=i+u,l=s+u;break;case 1:i=c-u,l=s+u;break;case 2:c=i+u,s=l-u;break;case 3:i=c-u,s=l-u}this._root&&this._root.length&&(this._root=x)}return this._x0=i,this._y0=s,this._x1=c,this._y1=l,this},t.data=function(){var d=[];return this.visit(function(a){if(!a.length)do{d.push(a.data)}while(a=a.next)}),d},t.extent=function(d){return arguments.length?this.cover(+d[0][0],+d[0][1]).cover(+d[1][0],+d[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},t.find=function(d,a,i){var s,c,l,p,g,u,x,f=this._x0,T=this._y0,_=this._x1,k=this._y1,w=[],C=this._root;for(C&&w.push(new b(C,f,T,_,k)),null==i?i=1/0:(f=d-i,T=a-i,_=d+i,k=a+i,i*=i);u=w.pop();)if(!(!(C=u.node)||(c=u.x0)>_||(l=u.y0)>k||(p=u.x1)<f||(g=u.y1)<T))if(C.length){var A=(c+p)/2,O=(l+g)/2;w.push(new b(C[3],A,O,p,g),new b(C[2],c,O,A,g),new b(C[1],A,l,p,O),new b(C[0],c,l,A,O)),(x=(a>=O)<<1|d>=A)&&(u=w[w.length-1],w[w.length-1]=w[w.length-1-x],w[w.length-1-x]=u)}else{var P=d-+this._x.call(null,C.data),S=a-+this._y.call(null,C.data),E=P*P+S*S;if(E<i){var D=Math.sqrt(i=E);f=d-D,T=a-D,_=d+D,k=a+D,s=C.data}}return s},t.remove=function(d){if(isNaN(l=+this._x.call(null,d))||isNaN(p=+this._y.call(null,d)))return this;var a,i,s,c,l,p,g,u,x,f,T,_,k=this._root,w=this._x0,C=this._y0,A=this._x1,O=this._y1;if(!k)return this;if(k.length)for(;;){if((x=l>=(g=(w+A)/2))?w=g:A=g,(f=p>=(u=(C+O)/2))?C=u:O=u,a=k,!(k=k[T=f<<1|x]))return this;if(!k.length)break;(a[T+1&3]||a[T+2&3]||a[T+3&3])&&(i=a,_=T)}for(;k.data!==d;)if(s=k,!(k=k.next))return this;return(c=k.next)&&delete k.next,s?(c?s.next=c:delete s.next,this):a?(c?a[T]=c:delete a[T],(k=a[0]||a[1]||a[2]||a[3])&&k===(a[3]||a[2]||a[1]||a[0])&&!k.length&&(i?i[_]=k:this._root=k),this):(this._root=c,this)},t.removeAll=function(d){for(var a=0,i=d.length;a<i;++a)this.remove(d[a]);return this},t.root=function(){return this._root},t.size=function(){var d=0;return this.visit(function(a){if(!a.length)do{++d}while(a=a.next)}),d},t.visit=function(d){var a,i,s,c,l,p,g=[],u=this._root;for(u&&g.push(new b(u,this._x0,this._y0,this._x1,this._y1));a=g.pop();)if(!d(u=a.node,s=a.x0,c=a.y0,l=a.x1,p=a.y1)&&u.length){var x=(s+l)/2,f=(c+p)/2;(i=u[3])&&g.push(new b(i,x,f,l,p)),(i=u[2])&&g.push(new b(i,s,f,x,p)),(i=u[1])&&g.push(new b(i,x,c,l,f)),(i=u[0])&&g.push(new b(i,s,c,x,f))}return this},t.visitAfter=function(d){var a,i=[],s=[];for(this._root&&i.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));a=i.pop();){var c=a.node;if(c.length){var l,p=a.x0,g=a.y0,u=a.x1,x=a.y1,f=(p+u)/2,T=(g+x)/2;(l=c[0])&&i.push(new b(l,p,g,f,T)),(l=c[1])&&i.push(new b(l,f,g,u,T)),(l=c[2])&&i.push(new b(l,p,T,f,x)),(l=c[3])&&i.push(new b(l,f,T,u,x))}s.push(a)}for(;a=s.pop();)d(a.node,a.x0,a.y0,a.x1,a.y1);return this},t.x=function(d){return arguments.length?(this._x=d,this):this._x},t.y=function(d){return arguments.length?(this._y=d,this):this._y},m.quadtree=n,Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:(m=m||self).d3=m.d3||{})},{}],119:[function(y,Q,K){var m,v;m=this,v=function(m,v){"use strict";function b(Le){return function(){return Le}}var h=Math.abs,e=Math.atan2,n=Math.cos,r=Math.max,o=Math.min,t=Math.sin,d=Math.sqrt,a=Math.PI,i=a/2,s=2*a;function c(Le){return Le>1?0:Le<-1?a:Math.acos(Le)}function l(Le){return Le>=1?i:Le<=-1?-i:Math.asin(Le)}function p(Le){return Le.innerRadius}function g(Le){return Le.outerRadius}function u(Le){return Le.startAngle}function x(Le){return Le.endAngle}function f(Le){return Le&&Le.padAngle}function T(Le,Xe,ot,dt,Lt,Ut,$t,Wt){var wr=ot-Le,Rr=dt-Xe,br=$t-Lt,nr=Wt-Ut,lr=nr*wr-br*Rr;if(!(lr*lr<1e-12))return[Le+(lr=(br*(Xe-Ut)-nr*(Le-Lt))/lr)*wr,Xe+lr*Rr]}function _(Le,Xe,ot,dt,Lt,Ut,$t){var Wt=Le-ot,wr=Xe-dt,Rr=($t?Ut:-Ut)/d(Wt*Wt+wr*wr),br=Rr*wr,nr=-Rr*Wt,lr=Le+br,sr=Xe+nr,_r=ot+br,Ar=dt+nr,zt=(lr+_r)/2,ur=(sr+Ar)/2,Tt=_r-lr,Qt=Ar-sr,Er=Tt*Tt+Qt*Qt,zr=Lt-Ut,an=lr*Ar-_r*sr,Kr=(Qt<0?-1:1)*d(r(0,zr*zr*Er-an*an)),sn=(an*Qt-Tt*Kr)/Er,gn=(-an*Tt-Qt*Kr)/Er,zn=(an*Qt+Tt*Kr)/Er,Vr=(-an*Tt+Qt*Kr)/Er,_n=sn-zt,Qr=gn-ur,Jr=zn-zt,Nn=Vr-ur;return _n*_n+Qr*Qr>Jr*Jr+Nn*Nn&&(sn=zn,gn=Vr),{cx:sn,cy:gn,x01:-br,y01:-nr,x11:sn*(Lt/zr-1),y11:gn*(Lt/zr-1)}}function k(Le){this._context=Le}function w(Le){return new k(Le)}function C(Le){return Le[0]}function A(Le){return Le[1]}function O(){var Le=C,Xe=A,ot=b(!0),dt=null,Lt=w,Ut=null;function $t(Wt){var wr,Rr,br,nr=Wt.length,lr=!1;for(null==dt&&(Ut=Lt(br=v.path())),wr=0;wr<=nr;++wr)!(wr<nr&&ot(Rr=Wt[wr],wr,Wt))===lr&&((lr=!lr)?Ut.lineStart():Ut.lineEnd()),lr&&Ut.point(+Le(Rr,wr,Wt),+Xe(Rr,wr,Wt));if(br)return Ut=null,br+""||null}return $t.x=function(Wt){return arguments.length?(Le="function"==typeof Wt?Wt:b(+Wt),$t):Le},$t.y=function(Wt){return arguments.length?(Xe="function"==typeof Wt?Wt:b(+Wt),$t):Xe},$t.defined=function(Wt){return arguments.length?(ot="function"==typeof Wt?Wt:b(!!Wt),$t):ot},$t.curve=function(Wt){return arguments.length?(Lt=Wt,null!=dt&&(Ut=Lt(dt)),$t):Lt},$t.context=function(Wt){return arguments.length?(null==Wt?dt=Ut=null:Ut=Lt(dt=Wt),$t):dt},$t}function P(){var Le=C,Xe=null,ot=b(0),dt=A,Lt=b(!0),Ut=null,$t=w,Wt=null;function wr(br){var nr,lr,sr,_r,Ar,zt=br.length,ur=!1,Tt=new Array(zt),Qt=new Array(zt);for(null==Ut&&(Wt=$t(Ar=v.path())),nr=0;nr<=zt;++nr){if(!(nr<zt&&Lt(_r=br[nr],nr,br))===ur)if(ur=!ur)lr=nr,Wt.areaStart(),Wt.lineStart();else{for(Wt.lineEnd(),Wt.lineStart(),sr=nr-1;sr>=lr;--sr)Wt.point(Tt[sr],Qt[sr]);Wt.lineEnd(),Wt.areaEnd()}ur&&(Tt[nr]=+Le(_r,nr,br),Qt[nr]=+ot(_r,nr,br),Wt.point(Xe?+Xe(_r,nr,br):Tt[nr],dt?+dt(_r,nr,br):Qt[nr]))}if(Ar)return Wt=null,Ar+""||null}function Rr(){return O().defined(Lt).curve($t).context(Ut)}return wr.x=function(br){return arguments.length?(Le="function"==typeof br?br:b(+br),Xe=null,wr):Le},wr.x0=function(br){return arguments.length?(Le="function"==typeof br?br:b(+br),wr):Le},wr.x1=function(br){return arguments.length?(Xe=null==br?null:"function"==typeof br?br:b(+br),wr):Xe},wr.y=function(br){return arguments.length?(ot="function"==typeof br?br:b(+br),dt=null,wr):ot},wr.y0=function(br){return arguments.length?(ot="function"==typeof br?br:b(+br),wr):ot},wr.y1=function(br){return arguments.length?(dt=null==br?null:"function"==typeof br?br:b(+br),wr):dt},wr.lineX0=wr.lineY0=function(){return Rr().x(Le).y(ot)},wr.lineY1=function(){return Rr().x(Le).y(dt)},wr.lineX1=function(){return Rr().x(Xe).y(ot)},wr.defined=function(br){return arguments.length?(Lt="function"==typeof br?br:b(!!br),wr):Lt},wr.curve=function(br){return arguments.length?($t=br,null!=Ut&&(Wt=$t(Ut)),wr):$t},wr.context=function(br){return arguments.length?(null==br?Ut=Wt=null:Wt=$t(Ut=br),wr):Ut},wr}function S(Le,Xe){return Xe<Le?-1:Xe>Le?1:Xe>=Le?0:NaN}function E(Le){return Le}k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Le,Xe){switch(Le=+Le,Xe=+Xe,this._point){case 0:this._point=1,this._line?this._context.lineTo(Le,Xe):this._context.moveTo(Le,Xe);break;case 1:this._point=2;default:this._context.lineTo(Le,Xe)}}};var D=N(w);function z(Le){this._curve=Le}function N(Le){function Xe(ot){return new z(Le(ot))}return Xe._curve=Le,Xe}function V(Le){var Xe=Le.curve;return Le.angle=Le.x,delete Le.x,Le.radius=Le.y,delete Le.y,Le.curve=function(ot){return arguments.length?Xe(N(ot)):Xe()._curve},Le}function X(){return V(O().curve(D))}function J(){var Le=P().curve(D),Xe=Le.curve,ot=Le.lineX0,dt=Le.lineX1,Lt=Le.lineY0,Ut=Le.lineY1;return Le.angle=Le.x,delete Le.x,Le.startAngle=Le.x0,delete Le.x0,Le.endAngle=Le.x1,delete Le.x1,Le.radius=Le.y,delete Le.y,Le.innerRadius=Le.y0,delete Le.y0,Le.outerRadius=Le.y1,delete Le.y1,Le.lineStartAngle=function(){return V(ot())},delete Le.lineX0,Le.lineEndAngle=function(){return V(dt())},delete Le.lineX1,Le.lineInnerRadius=function(){return V(Lt())},delete Le.lineY0,Le.lineOuterRadius=function(){return V(Ut())},delete Le.lineY1,Le.curve=function($t){return arguments.length?Xe(N($t)):Xe()._curve},Le}function G(Le,Xe){return[(Xe=+Xe)*Math.cos(Le-=Math.PI/2),Xe*Math.sin(Le)]}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Le,Xe){this._curve.point(Xe*Math.sin(Le),Xe*-Math.cos(Le))}};var Z=Array.prototype.slice;function re(Le){return Le.source}function j(Le){return Le.target}function B(Le){var Xe=re,ot=j,dt=C,Lt=A,Ut=null;function $t(){var Wt,wr=Z.call(arguments),Rr=Xe.apply(this,wr),br=ot.apply(this,wr);if(Ut||(Ut=Wt=v.path()),Le(Ut,+dt.apply(this,(wr[0]=Rr,wr)),+Lt.apply(this,wr),+dt.apply(this,(wr[0]=br,wr)),+Lt.apply(this,wr)),Wt)return Ut=null,Wt+""||null}return $t.source=function(Wt){return arguments.length?(Xe=Wt,$t):Xe},$t.target=function(Wt){return arguments.length?(ot=Wt,$t):ot},$t.x=function(Wt){return arguments.length?(dt="function"==typeof Wt?Wt:b(+Wt),$t):dt},$t.y=function(Wt){return arguments.length?(Lt="function"==typeof Wt?Wt:b(+Wt),$t):Lt},$t.context=function(Wt){return arguments.length?(Ut=Wt??null,$t):Ut},$t}function H(Le,Xe,ot,dt,Lt){Le.moveTo(Xe,ot),Le.bezierCurveTo(Xe=(Xe+dt)/2,ot,Xe,Lt,dt,Lt)}function ee(Le,Xe,ot,dt,Lt){Le.moveTo(Xe,ot),Le.bezierCurveTo(Xe,ot=(ot+Lt)/2,dt,ot,dt,Lt)}function U(Le,Xe,ot,dt,Lt){var Ut=G(Xe,ot),$t=G(Xe,ot=(ot+Lt)/2),Wt=G(dt,ot),wr=G(dt,Lt);Le.moveTo(Ut[0],Ut[1]),Le.bezierCurveTo($t[0],$t[1],Wt[0],Wt[1],wr[0],wr[1])}var $={draw:function(Le,Xe){var ot=Math.sqrt(Xe/a);Le.moveTo(ot,0),Le.arc(0,0,ot,0,s)}},q={draw:function(Le,Xe){var ot=Math.sqrt(Xe/5)/2;Le.moveTo(-3*ot,-ot),Le.lineTo(-ot,-ot),Le.lineTo(-ot,-3*ot),Le.lineTo(ot,-3*ot),Le.lineTo(ot,-ot),Le.lineTo(3*ot,-ot),Le.lineTo(3*ot,ot),Le.lineTo(ot,ot),Le.lineTo(ot,3*ot),Le.lineTo(-ot,3*ot),Le.lineTo(-ot,ot),Le.lineTo(-3*ot,ot),Le.closePath()}},te=Math.sqrt(1/3),ne=2*te,se={draw:function(Le,Xe){var ot=Math.sqrt(Xe/ne),dt=ot*te;Le.moveTo(0,-ot),Le.lineTo(dt,0),Le.lineTo(0,ot),Le.lineTo(-dt,0),Le.closePath()}},ie=Math.sin(a/10)/Math.sin(7*a/10),ue=Math.sin(s/10)*ie,le=-Math.cos(s/10)*ie,de={draw:function(Le,Xe){var ot=Math.sqrt(.8908130915292852*Xe),dt=ue*ot,Lt=le*ot;Le.moveTo(0,-ot),Le.lineTo(dt,Lt);for(var Ut=1;Ut<5;++Ut){var $t=s*Ut/5,Wt=Math.cos($t),wr=Math.sin($t);Le.lineTo(wr*ot,-Wt*ot),Le.lineTo(Wt*dt-wr*Lt,wr*dt+Wt*Lt)}Le.closePath()}},be={draw:function(Le,Xe){var ot=Math.sqrt(Xe),dt=-ot/2;Le.rect(dt,dt,ot,ot)}},_e=Math.sqrt(3),xe={draw:function(Le,Xe){var ot=-Math.sqrt(Xe/(3*_e));Le.moveTo(0,2*ot),Le.lineTo(-_e*ot,-ot),Le.lineTo(_e*ot,-ot),Le.closePath()}},Ee=-.5,he=Math.sqrt(3)/2,me=1/Math.sqrt(12),Se=3*(me/2+1),Me={draw:function(Le,Xe){var ot=Math.sqrt(Xe/Se),dt=ot/2,Lt=ot*me,Ut=dt,$t=ot*me+ot,Wt=-Ut,wr=$t;Le.moveTo(dt,Lt),Le.lineTo(Ut,$t),Le.lineTo(Wt,wr),Le.lineTo(Ee*dt-he*Lt,he*dt+Ee*Lt),Le.lineTo(Ee*Ut-he*$t,he*Ut+Ee*$t),Le.lineTo(Ee*Wt-he*wr,he*Wt+Ee*wr),Le.lineTo(Ee*dt+he*Lt,Ee*Lt-he*dt),Le.lineTo(Ee*Ut+he*$t,Ee*$t-he*Ut),Le.lineTo(Ee*Wt+he*wr,Ee*wr-he*Wt),Le.closePath()}},Ie=[$,q,se,be,de,xe,Me];function Fe(){}function Ne(Le,Xe,ot){Le._context.bezierCurveTo((2*Le._x0+Le._x1)/3,(2*Le._y0+Le._y1)/3,(Le._x0+2*Le._x1)/3,(Le._y0+2*Le._y1)/3,(Le._x0+4*Le._x1+Xe)/6,(Le._y0+4*Le._y1+ot)/6)}function De(Le){this._context=Le}function $e(Le){this._context=Le}function Re(Le){this._context=Le}function ze(Le,Xe){this._basis=new De(Le),this._beta=Xe}De.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ne(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Le,Xe){switch(Le=+Le,Xe=+Xe,this._point){case 0:this._point=1,this._line?this._context.lineTo(Le,Xe):this._context.moveTo(Le,Xe);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ne(this,Le,Xe)}this._x0=this._x1,this._x1=Le,this._y0=this._y1,this._y1=Xe}},$e.prototype={areaStart:Fe,areaEnd:Fe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Le,Xe){switch(Le=+Le,Xe=+Xe,this._point){case 0:this._point=1,this._x2=Le,this._y2=Xe;break;case 1:this._point=2,this._x3=Le,this._y3=Xe;break;case 2:this._point=3,this._x4=Le,this._y4=Xe,this._context.moveTo((this._x0+4*this._x1+Le)/6,(this._y0+4*this._y1+Xe)/6);break;default:Ne(this,Le,Xe)}this._x0=this._x1,this._x1=Le,this._y0=this._y1,this._y1=Xe}},Re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Le,Xe){switch(Le=+Le,Xe=+Xe,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var ot=(this._x0+4*this._x1+Le)/6,dt=(this._y0+4*this._y1+Xe)/6;this._line?this._context.lineTo(ot,dt):this._context.moveTo(ot,dt);break;case 3:this._point=4;default:Ne(this,Le,Xe)}this._x0=this._x1,this._x1=Le,this._y0=this._y1,this._y1=Xe}},ze.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Le=this._x,Xe=this._y,ot=Le.length-1;if(ot>0)for(var dt,Lt=Le[0],Ut=Xe[0],$t=Le[ot]-Lt,Wt=Xe[ot]-Ut,wr=-1;++wr<=ot;)this._basis.point(this._beta*Le[wr]+(1-this._beta)*(Lt+(dt=wr/ot)*$t),this._beta*Xe[wr]+(1-this._beta)*(Ut+dt*Wt));this._x=this._y=null,this._basis.lineEnd()},point:function(Le,Xe){this._x.push(+Le),this._y.push(+Xe)}};var Ue=function Le(Xe){function ot(dt){return 1===Xe?new De(dt):new ze(dt,Xe)}return ot.beta=function(dt){return Le(+dt)},ot}(.85);function je(Le,Xe,ot){Le._context.bezierCurveTo(Le._x1+Le._k*(Le._x2-Le._x0),Le._y1+Le._k*(Le._y2-Le._y0),Le._x2+Le._k*(Le._x1-Xe),Le._y2+Le._k*(Le._y1-ot),Le._x2,Le._y2)}function rt(Le,Xe){this._context=Le,this._k=(1-Xe)/6}rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:je(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Le,Xe){switch(Le=+Le,Xe=+Xe,this._point){case 0:this._point=1,this._line?this._context.lineTo(Le,Xe):this._context.moveTo(Le,Xe);break;case 1:this._point=2,this._x1=Le,this._y1=Xe;break;case 2:this._point=3;default:je(this,Le,Xe)}this._x0=this._x1,this._x1=this._x2,this._x2=Le,this._y0=this._y1,this._y1=this._y2,this._y2=Xe}};var ut=function Le(Xe){function ot(dt){return new rt(dt,Xe)}return ot.tension=function(dt){return Le(+dt)},ot}(0);function gt(Le,Xe){this._context=Le,this._k=(1-Xe)/6}gt.prototype={areaStart:Fe,areaEnd:Fe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Le,Xe){switch(Le=+Le,Xe=+Xe,this._point){case 0:this._point=1,this._x3=Le,this._y3=Xe;break;case 1:this._point=2,this._context.moveTo(this._x4=Le,this._y4=Xe);break;case 2:this._point=3,this._x5=Le,this._y5=Xe;break;default:je(this,Le,Xe)}this._x0=this._x1,this._x1=this._x2,this._x2=Le,this._y0=this._y1,this._y1=this._y2,this._y2=Xe}};var At=function Le(Xe){function ot(dt){return new gt(dt,Xe)}return ot.tension=function(dt){return Le(+dt)},ot}(0);function _t(Le,Xe){this._context=Le,this._k=(1-Xe)/6}_t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Le,Xe){switch(Le=+Le,Xe=+Xe,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:je(this,Le,Xe)}this._x0=this._x1,this._x1=this._x2,this._x2=Le,this._y0=this._y1,this._y1=this._y2,this._y2=Xe}};var it=function Le(Xe){function ot(dt){return new _t(dt,Xe)}return ot.tension=function(dt){return Le(+dt)},ot}(0);function et(Le,Xe,ot){var dt=Le._x1,Lt=Le._y1,Ut=Le._x2,$t=Le._y2;if(Le._l01_a>1e-12){var Wt=2*Le._l01_2a+3*Le._l01_a*Le._l12_a+Le._l12_2a,wr=3*Le._l01_a*(Le._l01_a+Le._l12_a);dt=(dt*Wt-Le._x0*Le._l12_2a+Le._x2*Le._l01_2a)/wr,Lt=(Lt*Wt-Le._y0*Le._l12_2a+Le._y2*Le._l01_2a)/wr}if(Le._l23_a>1e-12){var Rr=2*Le._l23_2a+3*Le._l23_a*Le._l12_a+Le._l12_2a,br=3*Le._l23_a*(Le._l23_a+Le._l12_a);Ut=(Ut*Rr+Le._x1*Le._l23_2a-Xe*Le._l12_2a)/br,$t=($t*Rr+Le._y1*Le._l23_2a-ot*Le._l12_2a)/br}Le._context.bezierCurveTo(dt,Lt,Ut,$t,Le._x2,Le._y2)}function wt(Le,Xe){this._context=Le,this._alpha=Xe}wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Le,Xe){if(Le=+Le,Xe=+Xe,this._point){var ot=this._x2-Le,dt=this._y2-Xe;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ot*ot+dt*dt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Le,Xe):this._context.moveTo(Le,Xe);break;case 1:this._point=2;break;case 2:this._point=3;default:et(this,Le,Xe)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Le,this._y0=this._y1,this._y1=this._y2,this._y2=Xe}};var Gt=function Le(Xe){function ot(dt){return Xe?new wt(dt,Xe):new rt(dt,0)}return ot.alpha=function(dt){return Le(+dt)},ot}(.5);function Kt(Le,Xe){this._context=Le,this._alpha=Xe}Kt.prototype={areaStart:Fe,areaEnd:Fe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Le,Xe){if(Le=+Le,Xe=+Xe,this._point){var ot=this._x2-Le,dt=this._y2-Xe;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ot*ot+dt*dt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Le,this._y3=Xe;break;case 1:this._point=2,this._context.moveTo(this._x4=Le,this._y4=Xe);break;case 2:this._point=3,this._x5=Le,this._y5=Xe;break;default:et(this,Le,Xe)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Le,this._y0=this._y1,this._y1=this._y2,this._y2=Xe}};var cr=function Le(Xe){function ot(dt){return Xe?new Kt(dt,Xe):new gt(dt,0)}return ot.alpha=function(dt){return Le(+dt)},ot}(.5);function ar(Le,Xe){this._context=Le,this._alpha=Xe}ar.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Le,Xe){if(Le=+Le,Xe=+Xe,this._point){var ot=this._x2-Le,dt=this._y2-Xe;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ot*ot+dt*dt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:et(this,Le,Xe)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Le,this._y0=this._y1,this._y1=this._y2,this._y2=Xe}};var hr=function Le(Xe){function ot(dt){return Xe?new ar(dt,Xe):new _t(dt,0)}return ot.alpha=function(dt){return Le(+dt)},ot}(.5);function Xt(Le){this._context=Le}function He(Le){return Le<0?-1:1}function Je(Le,Xe,ot){var dt=Le._x1-Le._x0,Lt=Xe-Le._x1,Ut=(Le._y1-Le._y0)/(dt||Lt<0&&-0),$t=(ot-Le._y1)/(Lt||dt<0&&-0),Wt=(Ut*Lt+$t*dt)/(dt+Lt);return(He(Ut)+He($t))*Math.min(Math.abs(Ut),Math.abs($t),.5*Math.abs(Wt))||0}function pe(Le,Xe){var ot=Le._x1-Le._x0;return ot?(3*(Le._y1-Le._y0)/ot-Xe)/2:Xe}function we(Le,Xe,ot){var dt=Le._x0,Ut=Le._x1,$t=Le._y1,Wt=(Ut-dt)/3;Le._context.bezierCurveTo(dt+Wt,Le._y0+Wt*Xe,Ut-Wt,$t-Wt*ot,Ut,$t)}function Be(Le){this._context=Le}function We(Le){this._context=new Ke(Le)}function Ke(Le){this._context=Le}function Ye(Le){this._context=Le}function ft(Le){var Xe,ot,dt=Le.length-1,Lt=new Array(dt),Ut=new Array(dt),$t=new Array(dt);for(Lt[0]=0,Ut[0]=2,$t[0]=Le[0]+2*Le[1],Xe=1;Xe<dt-1;++Xe)Lt[Xe]=1,Ut[Xe]=4,$t[Xe]=4*Le[Xe]+2*Le[Xe+1];for(Lt[dt-1]=2,Ut[dt-1]=7,$t[dt-1]=8*Le[dt-1]+Le[dt],Xe=1;Xe<dt;++Xe)Ut[Xe]-=ot=Lt[Xe]/Ut[Xe-1],$t[Xe]-=ot*$t[Xe-1];for(Lt[dt-1]=$t[dt-1]/Ut[dt-1],Xe=dt-2;Xe>=0;--Xe)Lt[Xe]=($t[Xe]-Lt[Xe+1])/Ut[Xe];for(Ut[dt-1]=(Le[dt]+Lt[dt-1])/2,Xe=0;Xe<dt-1;++Xe)Ut[Xe]=2*Le[Xe+1]-Lt[Xe+1];return[Lt,Ut]}function ct(Le,Xe){this._context=Le,this._t=Xe}function St(Le,Xe){if((Lt=Le.length)>1)for(var ot,dt,Lt,Ut=1,$t=Le[Xe[0]],Wt=$t.length;Ut<Lt;++Ut)for(dt=$t,$t=Le[Xe[Ut]],ot=0;ot<Wt;++ot)$t[ot][1]+=$t[ot][0]=isNaN(dt[ot][1])?dt[ot][0]:dt[ot][1]}function Ft(Le){for(var Xe=Le.length,ot=new Array(Xe);--Xe>=0;)ot[Xe]=Xe;return ot}function at(Le,Xe){return Le[Xe]}function mt(Le){var Xe=Le.map(qt);return Ft(Le).sort(function(ot,dt){return Xe[ot]-Xe[dt]})}function qt(Le){for(var Xe,ot=-1,dt=0,Lt=Le.length,Ut=-1/0;++ot<Lt;)(Xe=+Le[ot][1])>Ut&&(Ut=Xe,dt=ot);return dt}function Et(Le){var Xe=Le.map(Dt);return Ft(Le).sort(function(ot,dt){return Xe[ot]-Xe[dt]})}function Dt(Le){for(var Xe,ot=0,dt=-1,Lt=Le.length;++dt<Lt;)(Xe=+Le[dt][1])&&(ot+=Xe);return ot}Xt.prototype={areaStart:Fe,areaEnd:Fe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Le,Xe){Le=+Le,Xe=+Xe,this._point?this._context.lineTo(Le,Xe):(this._point=1,this._context.moveTo(Le,Xe))}},Be.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:we(this,this._t0,pe(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Le,Xe){var ot=NaN;if(Xe=+Xe,(Le=+Le)!==this._x1||Xe!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Le,Xe):this._context.moveTo(Le,Xe);break;case 1:this._point=2;break;case 2:this._point=3,we(this,pe(this,ot=Je(this,Le,Xe)),ot);break;default:we(this,this._t0,ot=Je(this,Le,Xe))}this._x0=this._x1,this._x1=Le,this._y0=this._y1,this._y1=Xe,this._t0=ot}}},(We.prototype=Object.create(Be.prototype)).point=function(Le,Xe){Be.prototype.point.call(this,Xe,Le)},Ke.prototype={moveTo:function(Le,Xe){this._context.moveTo(Xe,Le)},closePath:function(){this._context.closePath()},lineTo:function(Le,Xe){this._context.lineTo(Xe,Le)},bezierCurveTo:function(Le,Xe,ot,dt,Lt,Ut){this._context.bezierCurveTo(Xe,Le,dt,ot,Ut,Lt)}},Ye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Le=this._x,Xe=this._y,ot=Le.length;if(ot)if(this._line?this._context.lineTo(Le[0],Xe[0]):this._context.moveTo(Le[0],Xe[0]),2===ot)this._context.lineTo(Le[1],Xe[1]);else for(var dt=ft(Le),Lt=ft(Xe),Ut=0,$t=1;$t<ot;++Ut,++$t)this._context.bezierCurveTo(dt[0][Ut],Lt[0][Ut],dt[1][Ut],Lt[1][Ut],Le[$t],Xe[$t]);(this._line||0!==this._line&&1===ot)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Le,Xe){this._x.push(+Le),this._y.push(+Xe)}},ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Le,Xe){switch(Le=+Le,Xe=+Xe,this._point){case 0:this._point=1,this._line?this._context.lineTo(Le,Xe):this._context.moveTo(Le,Xe);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,Xe),this._context.lineTo(Le,Xe);else{var ot=this._x*(1-this._t)+Le*this._t;this._context.lineTo(ot,this._y),this._context.lineTo(ot,Xe)}}this._x=Le,this._y=Xe}},m.arc=function(){var Le=p,Xe=g,ot=b(0),dt=null,Lt=u,Ut=x,$t=f,Wt=null;function wr(){var Rr,br,nr=+Le.apply(this,arguments),lr=+Xe.apply(this,arguments),sr=Lt.apply(this,arguments)-i,_r=Ut.apply(this,arguments)-i,Ar=h(_r-sr),zt=_r>sr;if(Wt||(Wt=Rr=v.path()),lr<nr&&(br=lr,lr=nr,nr=br),lr>1e-12)if(Ar>s-1e-12)Wt.moveTo(lr*n(sr),lr*t(sr)),Wt.arc(0,0,lr,sr,_r,!zt),nr>1e-12&&(Wt.moveTo(nr*n(_r),nr*t(_r)),Wt.arc(0,0,nr,_r,sr,zt));else{var ur,Tt,Qt=sr,Er=_r,zr=sr,an=_r,Kr=Ar,sn=Ar,gn=$t.apply(this,arguments)/2,zn=gn>1e-12&&(dt?+dt.apply(this,arguments):d(nr*nr+lr*lr)),Vr=o(h(lr-nr)/2,+ot.apply(this,arguments)),_n=Vr,Qr=Vr;if(zn>1e-12){var Jr=l(zn/nr*t(gn)),Nn=l(zn/lr*t(gn));(Kr-=2*Jr)>1e-12?(zr+=Jr*=zt?1:-1,an-=Jr):(Kr=0,zr=an=(sr+_r)/2),(sn-=2*Nn)>1e-12?(Qt+=Nn*=zt?1:-1,Er-=Nn):(sn=0,Qt=Er=(sr+_r)/2)}var Hn=lr*n(Qt),Mn=lr*t(Qt),Un=nr*n(an),di=nr*t(an);if(Vr>1e-12){var rr,Sr=lr*n(Er),Rt=lr*t(Er),gr=nr*n(zr),xr=nr*t(zr);if(Ar<a&&(rr=T(Hn,Mn,gr,xr,Sr,Rt,Un,di))){var Zr=Hn-rr[0],Ur=Mn-rr[1],Yr=Sr-rr[0],Br=Rt-rr[1],Cr=1/t(c((Zr*Yr+Ur*Br)/(d(Zr*Zr+Ur*Ur)*d(Yr*Yr+Br*Br)))/2),Or=d(rr[0]*rr[0]+rr[1]*rr[1]);_n=o(Vr,(nr-Or)/(Cr-1)),Qr=o(Vr,(lr-Or)/(Cr+1))}}sn>1e-12?Qr>1e-12?(ur=_(gr,xr,Hn,Mn,lr,Qr,zt),Tt=_(Sr,Rt,Un,di,lr,Qr,zt),Wt.moveTo(ur.cx+ur.x01,ur.cy+ur.y01),Qr<Vr?Wt.arc(ur.cx,ur.cy,Qr,e(ur.y01,ur.x01),e(Tt.y01,Tt.x01),!zt):(Wt.arc(ur.cx,ur.cy,Qr,e(ur.y01,ur.x01),e(ur.y11,ur.x11),!zt),Wt.arc(0,0,lr,e(ur.cy+ur.y11,ur.cx+ur.x11),e(Tt.cy+Tt.y11,Tt.cx+Tt.x11),!zt),Wt.arc(Tt.cx,Tt.cy,Qr,e(Tt.y11,Tt.x11),e(Tt.y01,Tt.x01),!zt))):(Wt.moveTo(Hn,Mn),Wt.arc(0,0,lr,Qt,Er,!zt)):Wt.moveTo(Hn,Mn),nr>1e-12&&Kr>1e-12?_n>1e-12?(ur=_(Un,di,Sr,Rt,nr,-_n,zt),Tt=_(Hn,Mn,gr,xr,nr,-_n,zt),Wt.lineTo(ur.cx+ur.x01,ur.cy+ur.y01),_n<Vr?Wt.arc(ur.cx,ur.cy,_n,e(ur.y01,ur.x01),e(Tt.y01,Tt.x01),!zt):(Wt.arc(ur.cx,ur.cy,_n,e(ur.y01,ur.x01),e(ur.y11,ur.x11),!zt),Wt.arc(0,0,nr,e(ur.cy+ur.y11,ur.cx+ur.x11),e(Tt.cy+Tt.y11,Tt.cx+Tt.x11),zt),Wt.arc(Tt.cx,Tt.cy,_n,e(Tt.y11,Tt.x11),e(Tt.y01,Tt.x01),!zt))):Wt.arc(0,0,nr,an,zr,zt):Wt.lineTo(Un,di)}else Wt.moveTo(0,0);if(Wt.closePath(),Rr)return Wt=null,Rr+""||null}return wr.centroid=function(){var Rr=(+Le.apply(this,arguments)+ +Xe.apply(this,arguments))/2,br=(+Lt.apply(this,arguments)+ +Ut.apply(this,arguments))/2-a/2;return[n(br)*Rr,t(br)*Rr]},wr.innerRadius=function(Rr){return arguments.length?(Le="function"==typeof Rr?Rr:b(+Rr),wr):Le},wr.outerRadius=function(Rr){return arguments.length?(Xe="function"==typeof Rr?Rr:b(+Rr),wr):Xe},wr.cornerRadius=function(Rr){return arguments.length?(ot="function"==typeof Rr?Rr:b(+Rr),wr):ot},wr.padRadius=function(Rr){return arguments.length?(dt=null==Rr?null:"function"==typeof Rr?Rr:b(+Rr),wr):dt},wr.startAngle=function(Rr){return arguments.length?(Lt="function"==typeof Rr?Rr:b(+Rr),wr):Lt},wr.endAngle=function(Rr){return arguments.length?(Ut="function"==typeof Rr?Rr:b(+Rr),wr):Ut},wr.padAngle=function(Rr){return arguments.length?($t="function"==typeof Rr?Rr:b(+Rr),wr):$t},wr.context=function(Rr){return arguments.length?(Wt=Rr??null,wr):Wt},wr},m.area=P,m.areaRadial=J,m.curveBasis=function(Le){return new De(Le)},m.curveBasisClosed=function(Le){return new $e(Le)},m.curveBasisOpen=function(Le){return new Re(Le)},m.curveBundle=Ue,m.curveCardinal=ut,m.curveCardinalClosed=At,m.curveCardinalOpen=it,m.curveCatmullRom=Gt,m.curveCatmullRomClosed=cr,m.curveCatmullRomOpen=hr,m.curveLinear=w,m.curveLinearClosed=function(Le){return new Xt(Le)},m.curveMonotoneX=function(Le){return new Be(Le)},m.curveMonotoneY=function(Le){return new We(Le)},m.curveNatural=function(Le){return new Ye(Le)},m.curveStep=function(Le){return new ct(Le,.5)},m.curveStepAfter=function(Le){return new ct(Le,1)},m.curveStepBefore=function(Le){return new ct(Le,0)},m.line=O,m.lineRadial=X,m.linkHorizontal=function(){return B(H)},m.linkRadial=function(){var Le=B(U);return Le.angle=Le.x,delete Le.x,Le.radius=Le.y,delete Le.y,Le},m.linkVertical=function(){return B(ee)},m.pie=function(){var Le=E,Xe=S,ot=null,dt=b(0),Lt=b(s),Ut=b(0);function $t(Wt){var wr,Rr,br,nr,lr,sr=Wt.length,_r=0,Ar=new Array(sr),zt=new Array(sr),ur=+dt.apply(this,arguments),Tt=Math.min(s,Math.max(-s,Lt.apply(this,arguments)-ur)),Qt=Math.min(Math.abs(Tt)/sr,Ut.apply(this,arguments)),Er=Qt*(Tt<0?-1:1);for(wr=0;wr<sr;++wr)(lr=zt[Ar[wr]=wr]=+Le(Wt[wr],wr,Wt))>0&&(_r+=lr);for(null!=Xe?Ar.sort(function(zr,an){return Xe(zt[zr],zt[an])}):null!=ot&&Ar.sort(function(zr,an){return ot(Wt[zr],Wt[an])}),wr=0,br=_r?(Tt-sr*Er)/_r:0;wr<sr;++wr,ur=nr)nr=ur+((lr=zt[Rr=Ar[wr]])>0?lr*br:0)+Er,zt[Rr]={data:Wt[Rr],index:wr,value:lr,startAngle:ur,endAngle:nr,padAngle:Qt};return zt}return $t.value=function(Wt){return arguments.length?(Le="function"==typeof Wt?Wt:b(+Wt),$t):Le},$t.sortValues=function(Wt){return arguments.length?(Xe=Wt,ot=null,$t):Xe},$t.sort=function(Wt){return arguments.length?(ot=Wt,Xe=null,$t):ot},$t.startAngle=function(Wt){return arguments.length?(dt="function"==typeof Wt?Wt:b(+Wt),$t):dt},$t.endAngle=function(Wt){return arguments.length?(Lt="function"==typeof Wt?Wt:b(+Wt),$t):Lt},$t.padAngle=function(Wt){return arguments.length?(Ut="function"==typeof Wt?Wt:b(+Wt),$t):Ut},$t},m.pointRadial=G,m.radialArea=J,m.radialLine=X,m.stack=function(){var Le=b([]),Xe=Ft,ot=St,dt=at;function Lt(Ut){var $t,Wt,wr=Le.apply(this,arguments),Rr=Ut.length,br=wr.length,nr=new Array(br);for($t=0;$t<br;++$t){for(var lr,sr=wr[$t],_r=nr[$t]=new Array(Rr),Ar=0;Ar<Rr;++Ar)_r[Ar]=lr=[0,+dt(Ut[Ar],sr,Ar,Ut)],lr.data=Ut[Ar];_r.key=sr}for($t=0,Wt=Xe(nr);$t<br;++$t)nr[Wt[$t]].index=$t;return ot(nr,Wt),nr}return Lt.keys=function(Ut){return arguments.length?(Le="function"==typeof Ut?Ut:b(Z.call(Ut)),Lt):Le},Lt.value=function(Ut){return arguments.length?(dt="function"==typeof Ut?Ut:b(+Ut),Lt):dt},Lt.order=function(Ut){return arguments.length?(Xe=null==Ut?Ft:"function"==typeof Ut?Ut:b(Z.call(Ut)),Lt):Xe},Lt.offset=function(Ut){return arguments.length?(ot=Ut??St,Lt):ot},Lt},m.stackOffsetDiverging=function(Le,Xe){if((Wt=Le.length)>0)for(var ot,dt,Lt,Ut,$t,Wt,wr=0,Rr=Le[Xe[0]].length;wr<Rr;++wr)for(Ut=$t=0,ot=0;ot<Wt;++ot)(Lt=(dt=Le[Xe[ot]][wr])[1]-dt[0])>0?(dt[0]=Ut,dt[1]=Ut+=Lt):Lt<0?(dt[1]=$t,dt[0]=$t+=Lt):(dt[0]=0,dt[1]=Lt)},m.stackOffsetExpand=function(Le,Xe){if((dt=Le.length)>0){for(var ot,dt,Lt,Ut=0,$t=Le[0].length;Ut<$t;++Ut){for(Lt=ot=0;ot<dt;++ot)Lt+=Le[ot][Ut][1]||0;if(Lt)for(ot=0;ot<dt;++ot)Le[ot][Ut][1]/=Lt}St(Le,Xe)}},m.stackOffsetNone=St,m.stackOffsetSilhouette=function(Le,Xe){if((ot=Le.length)>0){for(var ot,dt=0,Lt=Le[Xe[0]],Ut=Lt.length;dt<Ut;++dt){for(var $t=0,Wt=0;$t<ot;++$t)Wt+=Le[$t][dt][1]||0;Lt[dt][1]+=Lt[dt][0]=-Wt/2}St(Le,Xe)}},m.stackOffsetWiggle=function(Le,Xe){if((Lt=Le.length)>0&&(dt=(ot=Le[Xe[0]]).length)>0){for(var ot,dt,Lt,Ut=0,$t=1;$t<dt;++$t){for(var Wt=0,wr=0,Rr=0;Wt<Lt;++Wt){for(var br=Le[Xe[Wt]],nr=br[$t][1]||0,lr=(nr-(br[$t-1][1]||0))/2,sr=0;sr<Wt;++sr){var _r=Le[Xe[sr]];lr+=(_r[$t][1]||0)-(_r[$t-1][1]||0)}wr+=nr,Rr+=lr*nr}ot[$t-1][1]+=ot[$t-1][0]=Ut,wr&&(Ut-=Rr/wr)}ot[$t-1][1]+=ot[$t-1][0]=Ut,St(Le,Xe)}},m.stackOrderAppearance=mt,m.stackOrderAscending=Et,m.stackOrderDescending=function(Le){return Et(Le).reverse()},m.stackOrderInsideOut=function(Le){var Xe,ot,dt=Le.length,Lt=Le.map(Dt),Ut=mt(Le),$t=0,Wt=0,wr=[],Rr=[];for(Xe=0;Xe<dt;++Xe)ot=Ut[Xe],$t<Wt?($t+=Lt[ot],wr.push(ot)):(Wt+=Lt[ot],Rr.push(ot));return Rr.reverse().concat(wr)},m.stackOrderNone=Ft,m.stackOrderReverse=function(Le){return Ft(Le).reverse()},m.symbol=function(){var Le=b($),Xe=b(64),ot=null;function dt(){var Lt;if(ot||(ot=Lt=v.path()),Le.apply(this,arguments).draw(ot,+Xe.apply(this,arguments)),Lt)return ot=null,Lt+""||null}return dt.type=function(Lt){return arguments.length?(Le="function"==typeof Lt?Lt:b(Lt),dt):Le},dt.size=function(Lt){return arguments.length?(Xe="function"==typeof Lt?Lt:b(+Lt),dt):Xe},dt.context=function(Lt){return arguments.length?(ot=Lt??null,dt):ot},dt},m.symbolCircle=$,m.symbolCross=q,m.symbolDiamond=se,m.symbolSquare=be,m.symbolStar=de,m.symbolTriangle=xe,m.symbolWye=Me,m.symbols=Ie,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,y("d3-path")):v((m=m||self).d3=m.d3||{},m.d3)},{"d3-path":117}],120:[function(y,Q,K){var m,v;m=this,v=function(m,v){"use strict";function b(it){if(0<=it.y&&it.y<100){var et=new Date(-1,it.m,it.d,it.H,it.M,it.S,it.L);return et.setFullYear(it.y),et}return new Date(it.y,it.m,it.d,it.H,it.M,it.S,it.L)}function h(it){if(0<=it.y&&it.y<100){var et=new Date(Date.UTC(-1,it.m,it.d,it.H,it.M,it.S,it.L));return et.setUTCFullYear(it.y),et}return new Date(Date.UTC(it.y,it.m,it.d,it.H,it.M,it.S,it.L))}function e(it,et,wt){return{y:it,m:et,d:wt,H:0,M:0,S:0,L:0}}function n(it){var et=it.dateTime,wt=it.date,Gt=it.time,Kt=it.periods,cr=it.days,ar=it.shortDays,hr=it.months,Xt=it.shortMonths,He=c(Kt),Je=l(Kt),pe=c(cr),we=l(cr),Be=c(ar),We=l(ar),Ke=c(hr),Ye=l(hr),ft=c(Xt),ct=l(Xt),St={a:function(Dt){return ar[Dt.getDay()]},A:function(Dt){return cr[Dt.getDay()]},b:function(Dt){return Xt[Dt.getMonth()]},B:function(Dt){return hr[Dt.getMonth()]},c:null,d:J,e:J,f:B,H:G,I:Z,j:re,L:j,m:H,M:ee,p:function(Dt){return Kt[+(Dt.getHours()>=12)]},q:function(Dt){return 1+~~(Dt.getMonth()/3)},Q:rt,s:ut,S:U,u:$,U:q,V:te,w:ne,W:se,x:null,X:null,y:ie,Y:ue,Z:le,"%":je},Ft={a:function(Dt){return ar[Dt.getUTCDay()]},A:function(Dt){return cr[Dt.getUTCDay()]},b:function(Dt){return Xt[Dt.getUTCMonth()]},B:function(Dt){return hr[Dt.getUTCMonth()]},c:null,d:de,e:de,f:he,H:be,I:_e,j:xe,L:Ee,m:me,M:Se,p:function(Dt){return Kt[+(Dt.getUTCHours()>=12)]},q:function(Dt){return 1+~~(Dt.getUTCMonth()/3)},Q:rt,s:ut,S:Me,u:Ie,U:Fe,V:Ne,w:De,W:$e,x:null,X:null,y:Re,Y:ze,Z:Ue,"%":je},at={a:function(Dt,Le,Xe){var ot=Be.exec(Le.slice(Xe));return ot?(Dt.w=We[ot[0].toLowerCase()],Xe+ot[0].length):-1},A:function(Dt,Le,Xe){var ot=pe.exec(Le.slice(Xe));return ot?(Dt.w=we[ot[0].toLowerCase()],Xe+ot[0].length):-1},b:function(Dt,Le,Xe){var ot=ft.exec(Le.slice(Xe));return ot?(Dt.m=ct[ot[0].toLowerCase()],Xe+ot[0].length):-1},B:function(Dt,Le,Xe){var ot=Ke.exec(Le.slice(Xe));return ot?(Dt.m=Ye[ot[0].toLowerCase()],Xe+ot[0].length):-1},c:function(Dt,Le,Xe){return Et(Dt,et,Le,Xe)},d:A,e:A,f:z,H:P,I:P,j:O,L:D,m:C,M:S,p:function(Dt,Le,Xe){var ot=He.exec(Le.slice(Xe));return ot?(Dt.p=Je[ot[0].toLowerCase()],Xe+ot[0].length):-1},q:w,Q:V,s:X,S:E,u:g,U:u,V:x,w:p,W:f,x:function(Dt,Le,Xe){return Et(Dt,wt,Le,Xe)},X:function(Dt,Le,Xe){return Et(Dt,Gt,Le,Xe)},y:_,Y:T,Z:k,"%":N};function mt(Dt,Le){return function(Xe){var ot,dt,Lt,Ut=[],$t=-1,Wt=0,wr=Dt.length;for(Xe instanceof Date||(Xe=new Date(+Xe));++$t<wr;)37===Dt.charCodeAt($t)&&(Ut.push(Dt.slice(Wt,$t)),null!=(dt=o[ot=Dt.charAt(++$t)])?ot=Dt.charAt(++$t):dt="e"===ot?" ":"0",(Lt=Le[ot])&&(ot=Lt(Xe,dt)),Ut.push(ot),Wt=$t+1);return Ut.push(Dt.slice(Wt,$t)),Ut.join("")}}function qt(Dt,Le){return function(Xe){var ot,dt,Lt=e(1900,void 0,1);if(Et(Lt,Dt,Xe+="",0)!=Xe.length)return null;if("Q"in Lt)return new Date(Lt.Q);if("s"in Lt)return new Date(1e3*Lt.s+("L"in Lt?Lt.L:0));if(Le&&!("Z"in Lt)&&(Lt.Z=0),"p"in Lt&&(Lt.H=Lt.H%12+12*Lt.p),void 0===Lt.m&&(Lt.m="q"in Lt?Lt.q:0),"V"in Lt){if(Lt.V<1||Lt.V>53)return null;"w"in Lt||(Lt.w=1),"Z"in Lt?(dt=(ot=h(e(Lt.y,0,1))).getUTCDay(),ot=dt>4||0===dt?v.utcMonday.ceil(ot):v.utcMonday(ot),ot=v.utcDay.offset(ot,7*(Lt.V-1)),Lt.y=ot.getUTCFullYear(),Lt.m=ot.getUTCMonth(),Lt.d=ot.getUTCDate()+(Lt.w+6)%7):(dt=(ot=b(e(Lt.y,0,1))).getDay(),ot=dt>4||0===dt?v.timeMonday.ceil(ot):v.timeMonday(ot),ot=v.timeDay.offset(ot,7*(Lt.V-1)),Lt.y=ot.getFullYear(),Lt.m=ot.getMonth(),Lt.d=ot.getDate()+(Lt.w+6)%7)}else("W"in Lt||"U"in Lt)&&("w"in Lt||(Lt.w="u"in Lt?Lt.u%7:"W"in Lt?1:0),dt="Z"in Lt?h(e(Lt.y,0,1)).getUTCDay():b(e(Lt.y,0,1)).getDay(),Lt.m=0,Lt.d="W"in Lt?(Lt.w+6)%7+7*Lt.W-(dt+5)%7:Lt.w+7*Lt.U-(dt+6)%7);return"Z"in Lt?(Lt.H+=Lt.Z/100|0,Lt.M+=Lt.Z%100,h(Lt)):b(Lt)}}function Et(Dt,Le,Xe,ot){for(var dt,Lt,Ut=0,$t=Le.length,Wt=Xe.length;Ut<$t;){if(ot>=Wt)return-1;if(37===(dt=Le.charCodeAt(Ut++))){if(dt=Le.charAt(Ut++),!(Lt=at[dt in o?Le.charAt(Ut++):dt])||(ot=Lt(Dt,Xe,ot))<0)return-1}else if(dt!=Xe.charCodeAt(ot++))return-1}return ot}return St.x=mt(wt,St),St.X=mt(Gt,St),St.c=mt(et,St),Ft.x=mt(wt,Ft),Ft.X=mt(Gt,Ft),Ft.c=mt(et,Ft),{format:function(Dt){var Le=mt(Dt+="",St);return Le.toString=function(){return Dt},Le},parse:function(Dt){var Le=qt(Dt+="",!1);return Le.toString=function(){return Dt},Le},utcFormat:function(Dt){var Le=mt(Dt+="",Ft);return Le.toString=function(){return Dt},Le},utcParse:function(Dt){var Le=qt(Dt+="",!0);return Le.toString=function(){return Dt},Le}}}var r,o={"-":"",_:" ",0:"0"},t=/^\s*\d+/,d=/^%/,a=/[\\^$*+?|[\]().{}]/g;function i(it,et,wt){var Gt=it<0?"-":"",Kt=(Gt?-it:it)+"",cr=Kt.length;return Gt+(cr<wt?new Array(wt-cr+1).join(et)+Kt:Kt)}function s(it){return it.replace(a,"\\$&")}function c(it){return new RegExp("^(?:"+it.map(s).join("|")+")","i")}function l(it){for(var et={},wt=-1,Gt=it.length;++wt<Gt;)et[it[wt].toLowerCase()]=wt;return et}function p(it,et,wt){var Gt=t.exec(et.slice(wt,wt+1));return Gt?(it.w=+Gt[0],wt+Gt[0].length):-1}function g(it,et,wt){var Gt=t.exec(et.slice(wt,wt+1));return Gt?(it.u=+Gt[0],wt+Gt[0].length):-1}function u(it,et,wt){var Gt=t.exec(et.slice(wt,wt+2));return Gt?(it.U=+Gt[0],wt+Gt[0].length):-1}function x(it,et,wt){var Gt=t.exec(et.slice(wt,wt+2));return Gt?(it.V=+Gt[0],wt+Gt[0].length):-1}function f(it,et,wt){var Gt=t.exec(et.slice(wt,wt+2));return Gt?(it.W=+Gt[0],wt+Gt[0].length):-1}function T(it,et,wt){var Gt=t.exec(et.slice(wt,wt+4));return Gt?(it.y=+Gt[0],wt+Gt[0].length):-1}function _(it,et,wt){var Gt=t.exec(et.slice(wt,wt+2));return Gt?(it.y=+Gt[0]+(+Gt[0]>68?1900:2e3),wt+Gt[0].length):-1}function k(it,et,wt){var Gt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(et.slice(wt,wt+6));return Gt?(it.Z=Gt[1]?0:-(Gt[2]+(Gt[3]||"00")),wt+Gt[0].length):-1}function w(it,et,wt){var Gt=t.exec(et.slice(wt,wt+1));return Gt?(it.q=3*Gt[0]-3,wt+Gt[0].length):-1}function C(it,et,wt){var Gt=t.exec(et.slice(wt,wt+2));return Gt?(it.m=Gt[0]-1,wt+Gt[0].length):-1}function A(it,et,wt){var Gt=t.exec(et.slice(wt,wt+2));return Gt?(it.d=+Gt[0],wt+Gt[0].length):-1}function O(it,et,wt){var Gt=t.exec(et.slice(wt,wt+3));return Gt?(it.m=0,it.d=+Gt[0],wt+Gt[0].length):-1}function P(it,et,wt){var Gt=t.exec(et.slice(wt,wt+2));return Gt?(it.H=+Gt[0],wt+Gt[0].length):-1}function S(it,et,wt){var Gt=t.exec(et.slice(wt,wt+2));return Gt?(it.M=+Gt[0],wt+Gt[0].length):-1}function E(it,et,wt){var Gt=t.exec(et.slice(wt,wt+2));return Gt?(it.S=+Gt[0],wt+Gt[0].length):-1}function D(it,et,wt){var Gt=t.exec(et.slice(wt,wt+3));return Gt?(it.L=+Gt[0],wt+Gt[0].length):-1}function z(it,et,wt){var Gt=t.exec(et.slice(wt,wt+6));return Gt?(it.L=Math.floor(Gt[0]/1e3),wt+Gt[0].length):-1}function N(it,et,wt){var Gt=d.exec(et.slice(wt,wt+1));return Gt?wt+Gt[0].length:-1}function V(it,et,wt){var Gt=t.exec(et.slice(wt));return Gt?(it.Q=+Gt[0],wt+Gt[0].length):-1}function X(it,et,wt){var Gt=t.exec(et.slice(wt));return Gt?(it.s=+Gt[0],wt+Gt[0].length):-1}function J(it,et){return i(it.getDate(),et,2)}function G(it,et){return i(it.getHours(),et,2)}function Z(it,et){return i(it.getHours()%12||12,et,2)}function re(it,et){return i(1+v.timeDay.count(v.timeYear(it),it),et,3)}function j(it,et){return i(it.getMilliseconds(),et,3)}function B(it,et){return j(it,et)+"000"}function H(it,et){return i(it.getMonth()+1,et,2)}function ee(it,et){return i(it.getMinutes(),et,2)}function U(it,et){return i(it.getSeconds(),et,2)}function $(it){var et=it.getDay();return 0===et?7:et}function q(it,et){return i(v.timeSunday.count(v.timeYear(it)-1,it),et,2)}function te(it,et){var wt=it.getDay();return it=wt>=4||0===wt?v.timeThursday(it):v.timeThursday.ceil(it),i(v.timeThursday.count(v.timeYear(it),it)+(4===v.timeYear(it).getDay()),et,2)}function ne(it){return it.getDay()}function se(it,et){return i(v.timeMonday.count(v.timeYear(it)-1,it),et,2)}function ie(it,et){return i(it.getFullYear()%100,et,2)}function ue(it,et){return i(it.getFullYear()%1e4,et,4)}function le(it){var et=it.getTimezoneOffset();return(et>0?"-":(et*=-1,"+"))+i(et/60|0,"0",2)+i(et%60,"0",2)}function de(it,et){return i(it.getUTCDate(),et,2)}function be(it,et){return i(it.getUTCHours(),et,2)}function _e(it,et){return i(it.getUTCHours()%12||12,et,2)}function xe(it,et){return i(1+v.utcDay.count(v.utcYear(it),it),et,3)}function Ee(it,et){return i(it.getUTCMilliseconds(),et,3)}function he(it,et){return Ee(it,et)+"000"}function me(it,et){return i(it.getUTCMonth()+1,et,2)}function Se(it,et){return i(it.getUTCMinutes(),et,2)}function Me(it,et){return i(it.getUTCSeconds(),et,2)}function Ie(it){var et=it.getUTCDay();return 0===et?7:et}function Fe(it,et){return i(v.utcSunday.count(v.utcYear(it)-1,it),et,2)}function Ne(it,et){var wt=it.getUTCDay();return it=wt>=4||0===wt?v.utcThursday(it):v.utcThursday.ceil(it),i(v.utcThursday.count(v.utcYear(it),it)+(4===v.utcYear(it).getUTCDay()),et,2)}function De(it){return it.getUTCDay()}function $e(it,et){return i(v.utcMonday.count(v.utcYear(it)-1,it),et,2)}function Re(it,et){return i(it.getUTCFullYear()%100,et,2)}function ze(it,et){return i(it.getUTCFullYear()%1e4,et,4)}function Ue(){return"+0000"}function je(){return"%"}function rt(it){return+it}function ut(it){return Math.floor(+it/1e3)}function gt(it){return r=n(it),m.timeFormat=r.format,m.timeParse=r.parse,m.utcFormat=r.utcFormat,m.utcParse=r.utcParse,r}gt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var At=Date.prototype.toISOString?function(it){return it.toISOString()}:m.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),_t=+new Date("2000-01-01T00:00:00.000Z")?function(it){var et=new Date(it);return isNaN(et)?null:et}:m.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");m.isoFormat=At,m.isoParse=_t,m.timeFormatDefaultLocale=gt,m.timeFormatLocale=n,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,y("d3-time")):v((m=m||self).d3=m.d3||{},m.d3)},{"d3-time":121}],121:[function(y,Q,K){var m,v;m=this,v=function(m){"use strict";var v=new Date,b=new Date;function h(me,Se,Me,Ie){function Fe(Ne){return me(Ne=0===arguments.length?new Date:new Date(+Ne)),Ne}return Fe.floor=function(Ne){return me(Ne=new Date(+Ne)),Ne},Fe.ceil=function(Ne){return me(Ne=new Date(Ne-1)),Se(Ne,1),me(Ne),Ne},Fe.round=function(Ne){var De=Fe(Ne),$e=Fe.ceil(Ne);return Ne-De<$e-Ne?De:$e},Fe.offset=function(Ne,De){return Se(Ne=new Date(+Ne),null==De?1:Math.floor(De)),Ne},Fe.range=function(Ne,De,$e){var Re,ze=[];if(Ne=Fe.ceil(Ne),$e=null==$e?1:Math.floor($e),!(Ne<De&&$e>0))return ze;do{ze.push(Re=new Date(+Ne)),Se(Ne,$e),me(Ne)}while(Re<Ne&&Ne<De);return ze},Fe.filter=function(Ne){return h(function(De){if(De>=De)for(;me(De),!Ne(De);)De.setTime(De-1)},function(De,$e){if(De>=De)if($e<0)for(;++$e<=0;)for(;Se(De,-1),!Ne(De););else for(;--$e>=0;)for(;Se(De,1),!Ne(De););})},Me&&(Fe.count=function(Ne,De){return v.setTime(+Ne),b.setTime(+De),me(v),me(b),Math.floor(Me(v,b))},Fe.every=function(Ne){return Ne=Math.floor(Ne),isFinite(Ne)&&Ne>0?Ne>1?Fe.filter(Ie?function(De){return Ie(De)%Ne==0}:function(De){return Fe.count(0,De)%Ne==0}):Fe:null}),Fe}var e=h(function(){},function(me,Se){me.setTime(+me+Se)},function(me,Se){return Se-me});e.every=function(me){return me=Math.floor(me),isFinite(me)&&me>0?me>1?h(function(Se){Se.setTime(Math.floor(Se/me)*me)},function(Se,Me){Se.setTime(+Se+Me*me)},function(Se,Me){return(Me-Se)/me}):e:null};var n=e.range,r=h(function(me){me.setTime(me-me.getMilliseconds())},function(me,Se){me.setTime(+me+1e3*Se)},function(me,Se){return(Se-me)/1e3},function(me){return me.getUTCSeconds()}),o=r.range,t=h(function(me){me.setTime(me-me.getMilliseconds()-1e3*me.getSeconds())},function(me,Se){me.setTime(+me+6e4*Se)},function(me,Se){return(Se-me)/6e4},function(me){return me.getMinutes()}),d=t.range,a=h(function(me){me.setTime(me-me.getMilliseconds()-1e3*me.getSeconds()-6e4*me.getMinutes())},function(me,Se){me.setTime(+me+36e5*Se)},function(me,Se){return(Se-me)/36e5},function(me){return me.getHours()}),i=a.range,s=h(function(me){me.setHours(0,0,0,0)},function(me,Se){me.setDate(me.getDate()+Se)},function(me,Se){return(Se-me-6e4*(Se.getTimezoneOffset()-me.getTimezoneOffset()))/864e5},function(me){return me.getDate()-1}),c=s.range;function l(me){return h(function(Se){Se.setDate(Se.getDate()-(Se.getDay()+7-me)%7),Se.setHours(0,0,0,0)},function(Se,Me){Se.setDate(Se.getDate()+7*Me)},function(Se,Me){return(Me-Se-6e4*(Me.getTimezoneOffset()-Se.getTimezoneOffset()))/6048e5})}var p=l(0),g=l(1),u=l(2),x=l(3),f=l(4),T=l(5),_=l(6),k=p.range,w=g.range,C=u.range,A=x.range,O=f.range,P=T.range,S=_.range,E=h(function(me){me.setDate(1),me.setHours(0,0,0,0)},function(me,Se){me.setMonth(me.getMonth()+Se)},function(me,Se){return Se.getMonth()-me.getMonth()+12*(Se.getFullYear()-me.getFullYear())},function(me){return me.getMonth()}),D=E.range,z=h(function(me){me.setMonth(0,1),me.setHours(0,0,0,0)},function(me,Se){me.setFullYear(me.getFullYear()+Se)},function(me,Se){return Se.getFullYear()-me.getFullYear()},function(me){return me.getFullYear()});z.every=function(me){return isFinite(me=Math.floor(me))&&me>0?h(function(Se){Se.setFullYear(Math.floor(Se.getFullYear()/me)*me),Se.setMonth(0,1),Se.setHours(0,0,0,0)},function(Se,Me){Se.setFullYear(Se.getFullYear()+Me*me)}):null};var N=z.range,V=h(function(me){me.setUTCSeconds(0,0)},function(me,Se){me.setTime(+me+6e4*Se)},function(me,Se){return(Se-me)/6e4},function(me){return me.getUTCMinutes()}),X=V.range,J=h(function(me){me.setUTCMinutes(0,0,0)},function(me,Se){me.setTime(+me+36e5*Se)},function(me,Se){return(Se-me)/36e5},function(me){return me.getUTCHours()}),G=J.range,Z=h(function(me){me.setUTCHours(0,0,0,0)},function(me,Se){me.setUTCDate(me.getUTCDate()+Se)},function(me,Se){return(Se-me)/864e5},function(me){return me.getUTCDate()-1}),re=Z.range;function j(me){return h(function(Se){Se.setUTCDate(Se.getUTCDate()-(Se.getUTCDay()+7-me)%7),Se.setUTCHours(0,0,0,0)},function(Se,Me){Se.setUTCDate(Se.getUTCDate()+7*Me)},function(Se,Me){return(Me-Se)/6048e5})}var B=j(0),H=j(1),ee=j(2),U=j(3),$=j(4),q=j(5),te=j(6),ne=B.range,se=H.range,ie=ee.range,ue=U.range,le=$.range,de=q.range,be=te.range,_e=h(function(me){me.setUTCDate(1),me.setUTCHours(0,0,0,0)},function(me,Se){me.setUTCMonth(me.getUTCMonth()+Se)},function(me,Se){return Se.getUTCMonth()-me.getUTCMonth()+12*(Se.getUTCFullYear()-me.getUTCFullYear())},function(me){return me.getUTCMonth()}),xe=_e.range,Ee=h(function(me){me.setUTCMonth(0,1),me.setUTCHours(0,0,0,0)},function(me,Se){me.setUTCFullYear(me.getUTCFullYear()+Se)},function(me,Se){return Se.getUTCFullYear()-me.getUTCFullYear()},function(me){return me.getUTCFullYear()});Ee.every=function(me){return isFinite(me=Math.floor(me))&&me>0?h(function(Se){Se.setUTCFullYear(Math.floor(Se.getUTCFullYear()/me)*me),Se.setUTCMonth(0,1),Se.setUTCHours(0,0,0,0)},function(Se,Me){Se.setUTCFullYear(Se.getUTCFullYear()+Me*me)}):null};var he=Ee.range;m.timeDay=s,m.timeDays=c,m.timeFriday=T,m.timeFridays=P,m.timeHour=a,m.timeHours=i,m.timeInterval=h,m.timeMillisecond=e,m.timeMilliseconds=n,m.timeMinute=t,m.timeMinutes=d,m.timeMonday=g,m.timeMondays=w,m.timeMonth=E,m.timeMonths=D,m.timeSaturday=_,m.timeSaturdays=S,m.timeSecond=r,m.timeSeconds=o,m.timeSunday=p,m.timeSundays=k,m.timeThursday=f,m.timeThursdays=O,m.timeTuesday=u,m.timeTuesdays=C,m.timeWednesday=x,m.timeWednesdays=A,m.timeWeek=p,m.timeWeeks=k,m.timeYear=z,m.timeYears=N,m.utcDay=Z,m.utcDays=re,m.utcFriday=q,m.utcFridays=de,m.utcHour=J,m.utcHours=G,m.utcMillisecond=e,m.utcMilliseconds=n,m.utcMinute=V,m.utcMinutes=X,m.utcMonday=H,m.utcMondays=se,m.utcMonth=_e,m.utcMonths=xe,m.utcSaturday=te,m.utcSaturdays=be,m.utcSecond=r,m.utcSeconds=o,m.utcSunday=B,m.utcSundays=ne,m.utcThursday=$,m.utcThursdays=le,m.utcTuesday=ee,m.utcTuesdays=ie,m.utcWednesday=U,m.utcWednesdays=ue,m.utcWeek=B,m.utcWeeks=ne,m.utcYear=Ee,m.utcYears=he,Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:(m=m||self).d3=m.d3||{})},{}],122:[function(y,Q,K){arguments[4][121][0].apply(K,arguments)},{dup:121}],123:[function(y,Q,K){var m,v;m=this,v=function(m){"use strict";var v,b,h=0,e=0,n=0,r=0,o=0,t=0,d="object"==typeof performance&&performance.now?performance:Date,a="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function i(){return o||(a(s),o=d.now()+t)}function s(){o=0}function c(){this._call=this._time=this._next=null}function l(f,T,_){var k=new c;return k.restart(f,T,_),k}function p(){i(),++h;for(var f,T=v;T;)(f=o-T._time)>=0&&T._call.call(null,f),T=T._next;--h}function g(){o=(r=d.now())+t,h=e=0;try{p()}finally{h=0,function(){for(var f,T,_=v,k=1/0;_;)_._call?(k>_._time&&(k=_._time),f=_,_=_._next):(T=_._next,_._next=null,_=f?f._next=T:v=T);b=f,x(k)}(),o=0}}function u(){var f=d.now(),T=f-r;T>1e3&&(t-=T,r=f)}function x(f){h||(e&&(e=clearTimeout(e)),f-o>24?(f<1/0&&(e=setTimeout(g,f-d.now()-t)),n&&(n=clearInterval(n))):(n||(r=d.now(),n=setInterval(u,1e3)),h=1,a(g)))}c.prototype=l.prototype={constructor:c,restart:function(f,T,_){if("function"!=typeof f)throw new TypeError("callback is not a function");_=(null==_?i():+_)+(null==T?0:+T),this._next||b===this||(b?b._next=this:v=this,b=this),this._call=f,this._time=_,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}},m.interval=function(f,T,_){var k=new c,w=T;return null==T?(k.restart(f,T,_),k):(T=+T,_=null==_?i():+_,k.restart(function C(A){A+=w,k.restart(C,w+=T,_),f(A)},T,_),k)},m.now=i,m.timeout=function(f,T,_){var k=new c;return k.restart(function(w){k.stop(),f(w+T)},T=null==T?0:+T,_),k},m.timer=l,m.timerFlush=p,Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:(m=m||self).d3=m.d3||{})},{}],124:[function(y,Q,K){Q.exports=function(){for(var m=0;m<arguments.length;m++)if(void 0!==arguments[m])return arguments[m]}},{}],125:[function(y,Q,K){"use strict";Q.exports=b;var m=(b.canvas=document.createElement("canvas")).getContext("2d"),v=h([32,126]);function b(e,n){Array.isArray(e)&&(e=e.join(", "));var r,o={},t=16,d=.05;n&&(2===n.length&&"number"==typeof n[0]?r=h(n):Array.isArray(n)?r=n:(n.o?r=h(n.o):n.pairs&&(r=n.pairs),n.fontSize&&(t=n.fontSize),null!=n.threshold&&(d=n.threshold))),r||(r=v),m.font=t+"px "+e;for(var a=0;a<r.length;a++){var i=r[a],s=m.measureText(i[0]).width+m.measureText(i[1]).width,c=m.measureText(i).width;Math.abs(s-c)>t*d&&(o[i]=(c-s)/t*1e3)}return o}function h(e){for(var n=[],r=e[0];r<=e[1];r++)for(var o=String.fromCharCode(r),t=e[0];t<e[1];t++){var d=o+String.fromCharCode(t);n.push(d)}return n}b.createPairs=h,b.ascii=v},{}],126:[function(y,Q,K){var m=y("abs-svg-path"),v=y("normalize-svg-path"),b={M:"moveTo",C:"bezierCurveTo"};Q.exports=function(h,e){h.beginPath(),v(m(e)).forEach(function(n){var r=n[0],o=n.slice(1);h[b[r]].apply(h,o)}),h.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(y,Q,K){Q.exports=function(m){switch(m){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(y,Q,K){"use strict";Q.exports=function(m,v){switch(void 0===v&&(v=0),typeof m){case"number":if(m>0)return function(b,h){var e,n;for(e=new Array(b),n=0;n<b;++n)e[n]=h;return e}(0|m,v);break;case"object":if("number"==typeof m.length)return function b(h,e,n){var r=0|h[n];if(r<=0)return[];var o,t=new Array(r);if(n===h.length-1)for(o=0;o<r;++o)t[o]=e;else for(o=0;o<r;++o)t[o]=b(h,e,n+1);return t}(m,v,0)}return[]}},{}],129:[function(y,Q,K){"use strict";function m(O,P,S){S=S||2;var E,D,z,N,V,X,J,G=P&&P.length,Z=G?P[0]*S:O.length,re=v(O,0,Z,S,!0),j=[];if(!re||re.next===re.prev)return j;if(G&&(re=function(H,ee,U,$){var q,te,ie,ue=[];for(q=0,te=ee.length;q<te;q++)(ie=v(H,ee[q]*$,q<te-1?ee[q+1]*$:H.length,$,!1))===ie.next&&(ie.steiner=!0),ue.push(s(ie));for(ue.sort(t),q=0;q<ue.length;q++)d(ue[q],U),U=b(U,U.next);return U}(O,P,re,S)),O.length>80*S){E=z=O[0],D=N=O[1];for(var B=S;B<Z;B+=S)(V=O[B])<E&&(E=V),(X=O[B+1])<D&&(D=X),V>z&&(z=V),X>N&&(N=X);J=0!==(J=Math.max(z-E,N-D))?1/J:0}return h(re,j,S,E,D,J),j}function v(O,P,S,E,D){var z,N;if(D===A(O,P,S,E)>0)for(z=P;z<S;z+=E)N=k(z,O[z],O[z+1],N);else for(z=S-E;z>=P;z-=E)N=k(z,O[z],O[z+1],N);return N&&g(N,N.next)&&(w(N),N=N.next),N}function b(O,P){if(!O)return O;P||(P=O);var S,E=O;do{if(S=!1,E.steiner||!g(E,E.next)&&0!==p(E.prev,E,E.next))E=E.next;else{if(w(E),(E=P=E.prev)===E.next)break;S=!0}}while(S||E!==P);return P}function h(O,P,S,E,D,z,N){if(O){!N&&z&&function(G,Z,re,j){var B=G;do{null===B.z&&(B.z=i(B.x,B.y,Z,re,j)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next}while(B!==G);B.prevZ.nextZ=null,B.prevZ=null,function(H){var ee,U,$,q,te,ne,se,ie,ue=1;do{for(U=H,H=null,te=null,ne=0;U;){for(ne++,$=U,se=0,ee=0;ee<ue&&(se++,$=$.nextZ);ee++);for(ie=ue;se>0||ie>0&&$;)0!==se&&(0===ie||!$||U.z<=$.z)?(q=U,U=U.nextZ,se--):(q=$,$=$.nextZ,ie--),te?te.nextZ=q:H=q,q.prevZ=te,te=q;U=$}te.nextZ=null,ue*=2}while(ne>1)}(B)}(O,E,D,z);for(var V,X,J=O;O.prev!==O.next;)if(V=O.prev,X=O.next,z?n(O,E,D,z):e(O))P.push(V.i/S),P.push(O.i/S),P.push(X.i/S),w(O),O=X.next,J=X.next;else if((O=X)===J){N?1===N?h(O=r(b(O),P,S),P,S,E,D,z,2):2===N&&o(O,P,S,E,D,z):h(b(O),P,S,E,D,z,1);break}}}function e(O){var P=O.prev,S=O,E=O.next;if(p(P,S,E)>=0)return!1;for(var D=O.next.next;D!==O.prev;){if(c(P.x,P.y,S.x,S.y,E.x,E.y,D.x,D.y)&&p(D.prev,D,D.next)>=0)return!1;D=D.next}return!0}function n(O,P,S,E){var D=O.prev,z=O,N=O.next;if(p(D,z,N)>=0)return!1;for(var J=D.x>z.x?D.x>N.x?D.x:N.x:z.x>N.x?z.x:N.x,G=D.y>z.y?D.y>N.y?D.y:N.y:z.y>N.y?z.y:N.y,Z=i(D.x<z.x?D.x<N.x?D.x:N.x:z.x<N.x?z.x:N.x,D.y<z.y?D.y<N.y?D.y:N.y:z.y<N.y?z.y:N.y,P,S,E),re=i(J,G,P,S,E),j=O.prevZ,B=O.nextZ;j&&j.z>=Z&&B&&B.z<=re;){if(j!==O.prev&&j!==O.next&&c(D.x,D.y,z.x,z.y,N.x,N.y,j.x,j.y)&&p(j.prev,j,j.next)>=0||(j=j.prevZ,B!==O.prev&&B!==O.next&&c(D.x,D.y,z.x,z.y,N.x,N.y,B.x,B.y)&&p(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;j&&j.z>=Z;){if(j!==O.prev&&j!==O.next&&c(D.x,D.y,z.x,z.y,N.x,N.y,j.x,j.y)&&p(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;B&&B.z<=re;){if(B!==O.prev&&B!==O.next&&c(D.x,D.y,z.x,z.y,N.x,N.y,B.x,B.y)&&p(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function r(O,P,S){var E=O;do{var D=E.prev,z=E.next.next;!g(D,z)&&u(D,E,E.next,z)&&T(D,z)&&T(z,D)&&(P.push(D.i/S),P.push(E.i/S),P.push(z.i/S),w(E),w(E.next),E=O=z),E=E.next}while(E!==O);return b(E)}function o(O,P,S,E,D,z){var N=O;do{for(var V=N.next.next;V!==N.prev;){if(N.i!==V.i&&l(N,V)){var X=_(N,V);return N=b(N,N.next),X=b(X,X.next),h(N,P,S,E,D,z),void h(X,P,S,E,D,z)}V=V.next}N=N.next}while(N!==O)}function t(O,P){return O.x-P.x}function d(O,P){if(P=function(E,D){var z,N=D,V=E.x,X=E.y,J=-1/0;do{if(X<=N.y&&X>=N.next.y&&N.next.y!==N.y){var G=N.x+(X-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(G<=V&&G>J){if(J=G,G===V){if(X===N.y)return N;if(X===N.next.y)return N.next}z=N.x<N.next.x?N:N.next}}N=N.next}while(N!==D);if(!z)return null;if(V===J)return z;var Z,re=z,j=z.x,B=z.y,H=1/0;N=z;do{V>=N.x&&N.x>=j&&V!==N.x&&c(X<B?V:J,X,j,B,X<B?J:V,X,N.x,N.y)&&(Z=Math.abs(X-N.y)/(V-N.x),T(N,E)&&(Z<H||Z===H&&(N.x>z.x||N.x===z.x&&a(z,N)))&&(z=N,H=Z)),N=N.next}while(N!==re);return z}(O,P)){var S=_(P,O);b(P,P.next),b(S,S.next)}}function a(O,P){return p(O.prev,O,P.prev)<0&&p(P.next,O,O.next)<0}function i(O,P,S,E,D){return(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-S)*D)|O<<8))|O<<4))|O<<2))|O<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=32767*(P-E)*D)|P<<8))|P<<4))|P<<2))|P<<1))<<1}function s(O){var P=O,S=O;do{(P.x<S.x||P.x===S.x&&P.y<S.y)&&(S=P),P=P.next}while(P!==O);return S}function c(O,P,S,E,D,z,N,V){return(D-N)*(P-V)-(O-N)*(z-V)>=0&&(O-N)*(E-V)-(S-N)*(P-V)>=0&&(S-N)*(z-V)-(D-N)*(E-V)>=0}function l(O,P){return O.next.i!==P.i&&O.prev.i!==P.i&&!function(S,E){var D=S;do{if(D.i!==S.i&&D.next.i!==S.i&&D.i!==E.i&&D.next.i!==E.i&&u(D,D.next,S,E))return!0;D=D.next}while(D!==S);return!1}(O,P)&&(T(O,P)&&T(P,O)&&function(S,E){var D=S,z=!1,N=(S.x+E.x)/2,V=(S.y+E.y)/2;do{D.y>V!=D.next.y>V&&D.next.y!==D.y&&N<(D.next.x-D.x)*(V-D.y)/(D.next.y-D.y)+D.x&&(z=!z),D=D.next}while(D!==S);return z}(O,P)&&(p(O.prev,O,P.prev)||p(O,P.prev,P))||g(O,P)&&p(O.prev,O,O.next)>0&&p(P.prev,P,P.next)>0)}function p(O,P,S){return(P.y-O.y)*(S.x-P.x)-(P.x-O.x)*(S.y-P.y)}function g(O,P){return O.x===P.x&&O.y===P.y}function u(O,P,S,E){var D=f(p(O,P,S)),z=f(p(O,P,E)),N=f(p(S,E,O)),V=f(p(S,E,P));return D!==z&&N!==V||!(0!==D||!x(O,S,P))||!(0!==z||!x(O,E,P))||!(0!==N||!x(S,O,E))||!(0!==V||!x(S,P,E))}function x(O,P,S){return P.x<=Math.max(O.x,S.x)&&P.x>=Math.min(O.x,S.x)&&P.y<=Math.max(O.y,S.y)&&P.y>=Math.min(O.y,S.y)}function f(O){return O>0?1:O<0?-1:0}function T(O,P){return p(O.prev,O,O.next)<0?p(O,P,O.next)>=0&&p(O,O.prev,P)>=0:p(O,P,O.prev)<0||p(O,O.next,P)<0}function _(O,P){var S=new C(O.i,O.x,O.y),E=new C(P.i,P.x,P.y),D=O.next,z=P.prev;return O.next=P,P.prev=O,S.next=D,D.prev=S,E.next=S,S.prev=E,z.next=E,E.prev=z,E}function k(O,P,S,E){var D=new C(O,P,S);return E?(D.next=E.next,D.prev=E,E.next.prev=D,E.next=D):(D.prev=D,D.next=D),D}function w(O){O.next.prev=O.prev,O.prev.next=O.next,O.prevZ&&(O.prevZ.nextZ=O.nextZ),O.nextZ&&(O.nextZ.prevZ=O.prevZ)}function C(O,P,S){this.i=O,this.x=P,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(O,P,S,E){for(var D=0,z=P,N=S-E;z<S;z+=E)D+=(O[N]-O[z])*(O[z+1]+O[N+1]),N=z;return D}Q.exports=m,Q.exports.default=m,m.deviation=function(O,P,S,E){var D=P&&P.length,N=Math.abs(A(O,0,D?P[0]*S:O.length,S));if(D)for(var V=0,X=P.length;V<X;V++)N-=Math.abs(A(O,P[V]*S,V<X-1?P[V+1]*S:O.length,S));var Z=0;for(V=0;V<E.length;V+=3){var re=E[V]*S,j=E[V+1]*S,B=E[V+2]*S;Z+=Math.abs((O[re]-O[B])*(O[j+1]-O[re+1])-(O[re]-O[j])*(O[B+1]-O[re+1]))}return 0===N&&0===Z?0:Math.abs((Z-N)/N)},m.flatten=function(O){for(var P=O[0][0].length,S={vertices:[],holes:[],dimensions:P},E=0,D=0;D<O.length;D++){for(var z=0;z<O[D].length;z++)for(var N=0;N<P;N++)S.vertices.push(O[D][z][N]);D>0&&S.holes.push(E+=O[D-1].length)}return S}},{}],130:[function(y,Q,K){var m=y("strongly-connected-components");Q.exports=function(v,b){var h,e=[],n=[],r=[],o={},t=[];function d(u){var x,f,T=!1;for(n.push(u),r[u]=!0,x=0;x<t[u].length;x++)(f=t[u][x])===h?(a(h,n),T=!0):r[f]||(T=d(f));if(T)!function k(w){r[w]=!1,o.hasOwnProperty(w)&&Object.keys(o[w]).forEach(function(C){delete o[w][C],r[C]&&k(C)})}(u);else for(x=0;x<t[u].length;x++){var _=o[f=t[u][x]];_||(o[f]=_={}),_[f]=!0}return n.pop(),T}function a(u,x){var f=[].concat(x).concat(u);b?b(d):e.push(f)}function i(u){!function(C){for(var A=0;A<v.length;A++)A<C&&(v[A]=[]),v[A]=v[A].filter(function(O){return O>=C})}(u);for(var x,f=m(v).components.filter(function(C){return C.length>1}),T=1/0,_=0;_<f.length;_++)for(var k=0;k<f[_].length;k++)f[_][k]<T&&(T=f[_][k],x=_);var w=f[x];return!!w&&{leastVertex:T,adjList:v.map(function(C,A){return-1===w.indexOf(A)?[]:C.filter(function(O){return-1!==w.indexOf(O)})})}}h=0;for(var s=v.length;h<s;){var c=i(h);if(h=c.leastVertex,t=c.adjList){for(var l=0;l<t.length;l++)for(var p=0;p<t[l].length;p++){var g=t[l][p];r[+g]=!1,o[g]={}}d(h),h+=1}else h=s}return b?void 0:e}},{"strongly-connected-components":307}],131:[function(y,Q,K){"use strict";var m=y("../../object/valid-value");Q.exports=function(){return m(this).length=0,this}},{"../../object/valid-value":162}],132:[function(y,Q,K){"use strict";Q.exports=y("./is-implemented")()?Array.from:y("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(y,Q,K){"use strict";Q.exports=function(){var m,v,b=Array.from;return"function"==typeof b&&(v=b(m=["raz","dwa"]),Boolean(v&&v!==m&&"dwa"===v[1]))}},{}],134:[function(y,Q,K){"use strict";var m=y("es6-symbol").iterator,v=y("../../function/is-arguments"),b=y("../../function/is-function"),h=y("../../number/to-pos-integer"),e=y("../../object/valid-callable"),n=y("../../object/valid-value"),r=y("../../object/is-value"),o=y("../../string/is-string"),t=Array.isArray,d=Function.prototype.call,a={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;Q.exports=function(s){var c,l,p,g,u,x,f,T,_,k,w=arguments[1],C=arguments[2];if(s=Object(n(s)),r(w)&&e(w),this&&this!==Array&&b(this))c=this;else{if(!w){if(v(s))return 1!==(u=s.length)?Array.apply(null,s):((g=new Array(1))[0]=s[0],g);if(t(s)){for(g=new Array(u=s.length),l=0;l<u;++l)g[l]=s[l];return g}}g=[]}if(!t(s))if(void 0!==(_=s[m])){for(f=e(_).call(s),c&&(g=new c),T=f.next(),l=0;!T.done;)k=w?d.call(w,C,T.value,l):T.value,c?(a.value=k,i(g,l,a)):g[l]=k,T=f.next(),++l;u=l}else if(o(s)){for(u=s.length,c&&(g=new c),l=0,p=0;l<u;++l)k=s[l],l+1<u&&(x=k.charCodeAt(0))>=55296&&x<=56319&&(k+=s[++l]),k=w?d.call(w,C,k,p):k,c?(a.value=k,i(g,p,a)):g[p]=k,++p;u=p}if(void 0===u)for(u=h(s.length),c&&(g=new c(u)),l=0;l<u;++l)k=w?d.call(w,C,s[l],l):s[l],c?(a.value=k,i(g,l,a)):g[l]=k;return c&&(a.value=null,g.length=u),g}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(y,Q,K){"use strict";var m=Object.prototype.toString,v=m.call(function(){return arguments}());Q.exports=function(b){return m.call(b)===v}},{}],136:[function(y,Q,K){"use strict";var m=Object.prototype.toString,v=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);Q.exports=function(b){return"function"==typeof b&&v(m.call(b))}},{}],137:[function(y,Q,K){"use strict";Q.exports=function(){}},{}],138:[function(y,Q,K){"use strict";Q.exports=y("./is-implemented")()?Math.sign:y("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(y,Q,K){"use strict";Q.exports=function(){var m=Math.sign;return"function"==typeof m&&1===m(10)&&-1===m(-20)}},{}],140:[function(y,Q,K){"use strict";Q.exports=function(m){return m=Number(m),isNaN(m)||0===m?m:m>0?1:-1}},{}],141:[function(y,Q,K){"use strict";var m=y("../math/sign"),v=Math.abs,b=Math.floor;Q.exports=function(h){return isNaN(h)?0:0!==(h=Number(h))&&isFinite(h)?m(h)*b(v(h)):h}},{"../math/sign":138}],142:[function(y,Q,K){"use strict";var m=y("./to-integer"),v=Math.max;Q.exports=function(b){return v(0,m(b))}},{"./to-integer":141}],143:[function(y,Q,K){"use strict";var m=y("./valid-callable"),v=y("./valid-value"),b=Function.prototype.bind,h=Function.prototype.call,e=Object.keys,n=Object.prototype.propertyIsEnumerable;Q.exports=function(r,o){return function(t,d){var a,i=arguments[2],s=arguments[3];return t=Object(v(t)),m(d),a=e(t),s&&a.sort("function"==typeof s?b.call(s,t):void 0),"function"!=typeof r&&(r=a[r]),h.call(r,a,function(c,l){return n.call(t,c)?h.call(d,i,t[c],c,t,l):o})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(y,Q,K){"use strict";Q.exports=y("./is-implemented")()?Object.assign:y("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(y,Q,K){"use strict";Q.exports=function(){var m,v=Object.assign;return"function"==typeof v&&(v(m={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),m.foo+m.bar+m.trzy==="razdwatrzy")}},{}],146:[function(y,Q,K){"use strict";var m=y("../keys"),v=y("../valid-value"),b=Math.max;Q.exports=function(h,e){var n,r,o,t=b(arguments.length,2);for(h=Object(v(h)),o=function(d){try{h[d]=e[d]}catch(a){n||(n=a)}},r=1;r<t;++r)m(e=arguments[r]).forEach(o);if(void 0!==n)throw n;return h}},{"../keys":152,"../valid-value":162}],147:[function(y,Q,K){"use strict";var m=y("../array/from"),v=y("./assign"),b=y("./valid-value");Q.exports=function(h){var e=Object(b(h)),n=arguments[1],r=Object(arguments[2]);if(e!==h&&!n)return e;var o={};return n?m(n,function(t){(r.ensure||t in h)&&(o[t]=h[t])}):v(o,h),o}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(y,Q,K){"use strict";var m,v,b,h,e=Object.create;y("./set-prototype-of/is-implemented")()||(m=y("./set-prototype-of/shim")),Q.exports=m?1!==m.level?e:(v={},b={},h={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(n){b[n]="__proto__"!==n?h:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(v,b),Object.defineProperty(m,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:v}),function(n,r){return e(null===n?v:n,r)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(y,Q,K){"use strict";Q.exports=y("./_iterate")("forEach")},{"./_iterate":143}],150:[function(y,Q,K){"use strict";var m=y("./is-value"),v={function:!0,object:!0};Q.exports=function(b){return m(b)&&v[typeof b]||!1}},{"./is-value":151}],151:[function(y,Q,K){"use strict";var m=y("../function/noop")();Q.exports=function(v){return v!==m&&null!==v}},{"../function/noop":137}],152:[function(y,Q,K){"use strict";Q.exports=y("./is-implemented")()?Object.keys:y("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(y,Q,K){"use strict";Q.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(y,Q,K){"use strict";var m=y("../is-value"),v=Object.keys;Q.exports=function(b){return v(m(b)?Object(b):b)}},{"../is-value":151}],155:[function(y,Q,K){"use strict";var m=y("./valid-callable"),v=y("./for-each"),b=Function.prototype.call;Q.exports=function(h,e){var n={},r=arguments[2];return m(e),v(h,function(o,t,d,a){n[t]=b.call(e,r,o,t,d,a)}),n}},{"./for-each":149,"./valid-callable":160}],156:[function(y,Q,K){"use strict";var m=y("./is-value"),v=Array.prototype.forEach,b=Object.create,h=function(e,n){var r;for(r in e)n[r]=e[r]};Q.exports=function(e){var n=b(null);return v.call(arguments,function(r){m(r)&&h(Object(r),n)}),n}},{"./is-value":151}],157:[function(y,Q,K){"use strict";Q.exports=y("./is-implemented")()?Object.setPrototypeOf:y("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(y,Q,K){"use strict";var m=Object.create,v=Object.getPrototypeOf,b={};Q.exports=function(){var h=Object.setPrototypeOf;return"function"==typeof h&&v(h((arguments[0]||m)(null),b))===b}},{}],159:[function(y,Q,K){"use strict";var m,r,o,t,v=y("../is-object"),b=y("../valid-value"),h=Object.prototype.isPrototypeOf,e=Object.defineProperty,n={configurable:!0,enumerable:!1,writable:!0,value:void 0};m=function(r,o){if(b(r),null===o||v(o))return r;throw new TypeError("Prototype must be null or an object")},Q.exports=(r=function(){var r,o=Object.create(null),t={},d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(d){try{(r=d.set).call(o,t)}catch{}if(Object.getPrototypeOf(o)===t)return{set:r,level:2}}return o.__proto__=t,Object.getPrototypeOf(o)===t?{level:2}:((o={}).__proto__=t,Object.getPrototypeOf(o)===t&&{level:1})}(),r?(2===r.level?r.set?(t=r.set,o=function(d,a){return t.call(m(d,a),a),d}):o=function(d,a){return m(d,a).__proto__=a,d}:o=function d(a,i){var s;return m(a,i),(s=h.call(d.nullPolyfill,a))&&delete d.nullPolyfill.__proto__,null===i&&(i=d.nullPolyfill),a.__proto__=i,s&&e(d.nullPolyfill,"__proto__",n),a},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:r.level})):null),y("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(y,Q,K){"use strict";Q.exports=function(m){if("function"!=typeof m)throw new TypeError(m+" is not a function");return m}},{}],161:[function(y,Q,K){"use strict";var m=y("./is-object");Q.exports=function(v){if(!m(v))throw new TypeError(v+" is not an Object");return v}},{"./is-object":150}],162:[function(y,Q,K){"use strict";var m=y("./is-value");Q.exports=function(v){if(!m(v))throw new TypeError("Cannot use null or undefined");return v}},{"./is-value":151}],163:[function(y,Q,K){"use strict";Q.exports=y("./is-implemented")()?String.prototype.contains:y("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(y,Q,K){"use strict";var m="razdwatrzy";Q.exports=function(){return"function"==typeof m.contains&&!0===m.contains("dwa")&&!1===m.contains("foo")}},{}],165:[function(y,Q,K){"use strict";var m=String.prototype.indexOf;Q.exports=function(v){return m.call(this,v,arguments[1])>-1}},{}],166:[function(y,Q,K){"use strict";var m=Object.prototype.toString,v=m.call("");Q.exports=function(b){return"string"==typeof b||b&&"object"==typeof b&&(b instanceof String||m.call(b)===v)||!1}},{}],167:[function(y,Q,K){"use strict";var m=Object.create(null),v=Math.random;Q.exports=function(){var b;do{b=v().toString(36).slice(2)}while(m[b]);return b}},{}],168:[function(y,Q,K){"use strict";var m,v=y("es5-ext/object/set-prototype-of"),b=y("es5-ext/string/#/contains"),h=y("d"),e=y("es6-symbol"),n=y("./"),r=Object.defineProperty;m=Q.exports=function(o,t){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");n.call(this,o),t=t?b.call(t,"key+value")?"key+value":b.call(t,"key")?"key":"value":"value",r(this,"__kind__",h("",t))},v&&v(m,n),delete m.prototype.constructor,m.prototype=Object.create(n.prototype,{_resolve:h(function(o){return"value"===this.__kind__?this.__list__[o]:"key+value"===this.__kind__?[o,this.__list__[o]]:o})}),r(m.prototype,e.toStringTag,h("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(y,Q,K){"use strict";var m=y("es5-ext/function/is-arguments"),v=y("es5-ext/object/valid-callable"),b=y("es5-ext/string/is-string"),h=y("./get"),e=Array.isArray,n=Function.prototype.call,r=Array.prototype.some;Q.exports=function(o,t){var d,a,i,s,c,l,p,g,u=arguments[2];if(e(o)||m(o)?d="array":b(o)?d="string":o=h(o),v(t),i=function(){s=!0},"array"!==d)if("string"!==d)for(a=o.next();!a.done;){if(n.call(t,u,a.value,i),s)return;a=o.next()}else for(l=o.length,c=0;c<l&&(p=o[c],c+1<l&&(g=p.charCodeAt(0))>=55296&&g<=56319&&(p+=o[++c]),n.call(t,u,p,i),!s);++c);else r.call(o,function(x){return n.call(t,u,x,i),s})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(y,Q,K){"use strict";var m=y("es5-ext/function/is-arguments"),v=y("es5-ext/string/is-string"),b=y("./array"),h=y("./string"),e=y("./valid-iterable"),n=y("es6-symbol").iterator;Q.exports=function(r){return"function"==typeof e(r)[n]?r[n]():m(r)?new b(r):v(r)?new h(r):new b(r)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(y,Q,K){"use strict";var m,v=y("es5-ext/array/#/clear"),b=y("es5-ext/object/assign"),h=y("es5-ext/object/valid-callable"),e=y("es5-ext/object/valid-value"),n=y("d"),r=y("d/auto-bind"),o=y("es6-symbol"),t=Object.defineProperty,d=Object.defineProperties;Q.exports=m=function(a,i){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");d(this,{__list__:n("w",e(a)),__context__:n("w",i),__nextIndex__:n("w",0)}),i&&(h(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete m.prototype.constructor,d(m.prototype,b({_next:n(function(){var a;if(this.__list__)return this.__redo__&&void 0!==(a=this.__redo__.shift())?a:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:n(function(){return this._createResult(this._next())}),_createResult:n(function(a){return void 0===a?{done:!0,value:void 0}:{done:!1,value:this._resolve(a)}}),_resolve:n(function(a){return this.__list__[a]}),_unBind:n(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:n(function(){return"[object "+(this[o.toStringTag]||"Object")+"]"})},r({_onAdd:n(function(a){a>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(i,s){i>=a&&(this.__redo__[s]=++i)},this),this.__redo__.push(a)):t(this,"__redo__",n("c",[a])))}),_onDelete:n(function(a){var i;a>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(a))&&this.__redo__.splice(i,1),this.__redo__.forEach(function(s,c){s>a&&(this.__redo__[c]=--s)},this)))}),_onClear:n(function(){this.__redo__&&v.call(this.__redo__),this.__nextIndex__=0})}))),t(m.prototype,o.iterator,n(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(y,Q,K){"use strict";var m=y("es5-ext/function/is-arguments"),v=y("es5-ext/object/is-value"),b=y("es5-ext/string/is-string"),h=y("es6-symbol").iterator,e=Array.isArray;Q.exports=function(n){return!(!v(n)||!e(n)&&!b(n)&&!m(n)&&"function"!=typeof n[h])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(y,Q,K){"use strict";var m,v=y("es5-ext/object/set-prototype-of"),b=y("d"),h=y("es6-symbol"),e=y("./"),n=Object.defineProperty;m=Q.exports=function(r){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");r=String(r),e.call(this,r),n(this,"__length__",b("",r.length))},v&&v(m,e),delete m.prototype.constructor,m.prototype=Object.create(e.prototype,{_next:b(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:b(function(r){var o,t=this.__list__[r];return this.__nextIndex__===this.__length__?t:(o=t.charCodeAt(0))>=55296&&o<=56319?t+this.__list__[this.__nextIndex__++]:t})}),n(m.prototype,h.toStringTag,b("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(y,Q,K){"use strict";var m=y("./is-iterable");Q.exports=function(v){if(!m(v))throw new TypeError(v+" is not iterable");return v}},{"./is-iterable":172}],175:[function(y,Q,K){"use strict";Q.exports=y("./is-implemented")()?y("ext/global-this").Symbol:y("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(y,Q,K){"use strict";var m=y("ext/global-this"),v={object:!0,symbol:!0};Q.exports=function(){var b,h=m.Symbol;if("function"!=typeof h)return!1;b=h("test symbol");try{String(b)}catch{return!1}return!!v[typeof h.iterator]&&!!v[typeof h.toPrimitive]&&!!v[typeof h.toStringTag]}},{"ext/global-this":188}],177:[function(y,Q,K){"use strict";Q.exports=function(m){return!!m&&("symbol"==typeof m||!!m.constructor&&"Symbol"===m.constructor.name&&"Symbol"===m[m.constructor.toStringTag])}},{}],178:[function(y,Q,K){"use strict";var m=y("d"),b=Object.defineProperty,h=Object.prototype,e=(0,Object.create)(null);Q.exports=function(n){for(var r,o,t=0;e[n+(t||"")];)++t;return e[n+=t||""]=!0,b(h,r="@@"+n,m.gs(null,function(d){o||(o=!0,b(this,r,m(d)),o=!1)})),r}},{d:106}],179:[function(y,Q,K){"use strict";var m=y("d"),v=y("ext/global-this").Symbol;Q.exports=function(b){return Object.defineProperties(b,{hasInstance:m("",v&&v.hasInstance||b("hasInstance")),isConcatSpreadable:m("",v&&v.isConcatSpreadable||b("isConcatSpreadable")),iterator:m("",v&&v.iterator||b("iterator")),match:m("",v&&v.match||b("match")),replace:m("",v&&v.replace||b("replace")),search:m("",v&&v.search||b("search")),species:m("",v&&v.species||b("species")),split:m("",v&&v.split||b("split")),toPrimitive:m("",v&&v.toPrimitive||b("toPrimitive")),toStringTag:m("",v&&v.toStringTag||b("toStringTag")),unscopables:m("",v&&v.unscopables||b("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(y,Q,K){"use strict";var m=y("d"),v=y("../../../validate-symbol"),b=Object.create(null);Q.exports=function(h){return Object.defineProperties(h,{for:m(function(e){return b[e]?b[e]:b[e]=h(String(e))}),keyFor:m(function(e){var n;for(n in v(e),b)if(b[n]===e)return n})})}},{"../../../validate-symbol":182,d:106}],181:[function(y,Q,K){"use strict";var m,v,b,h=y("d"),e=y("./validate-symbol"),n=y("ext/global-this").Symbol,r=y("./lib/private/generate-name"),o=y("./lib/private/setup/standard-symbols"),t=y("./lib/private/setup/symbol-registry"),d=Object.create,a=Object.defineProperties,i=Object.defineProperty;if("function"==typeof n)try{String(n()),b=!0}catch{}else n=null;v=function(s){if(this instanceof v)throw new TypeError("Symbol is not a constructor");return m(s)},Q.exports=m=function s(c){var l;if(this instanceof s)throw new TypeError("Symbol is not a constructor");return b?n(c):(l=d(v.prototype),c=void 0===c?"":String(c),a(l,{__description__:h("",c),__name__:h("",r(c))}))},o(m),t(m),a(v.prototype,{constructor:h(m),toString:h("",function(){return this.__name__})}),a(m.prototype,{toString:h(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:h(function(){return e(this)})}),i(m.prototype,m.toPrimitive,h("",function(){var s=e(this);return"symbol"==typeof s?s:s.toString()})),i(m.prototype,m.toStringTag,h("c","Symbol")),i(v.prototype,m.toStringTag,h("c",m.prototype[m.toStringTag])),i(v.prototype,m.toPrimitive,h("c",m.prototype[m.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(y,Q,K){"use strict";var m=y("./is-symbol");Q.exports=function(v){if(!m(v))throw new TypeError(v+" is not a symbol");return v}},{"./is-symbol":177}],183:[function(y,Q,K){"use strict";Q.exports=y("./is-implemented")()?WeakMap:y("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(y,Q,K){"use strict";Q.exports=function(){var m,v;if("function"!=typeof WeakMap)return!1;try{m=new WeakMap([[v={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(m)&&"function"==typeof m.set&&m.set({},1)===m&&"function"==typeof m.delete&&"function"==typeof m.has&&"one"===m.get(v)}},{}],185:[function(y,Q,K){"use strict";Q.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(y,Q,K){"use strict";var m,v=y("es5-ext/object/is-value"),b=y("es5-ext/object/set-prototype-of"),h=y("es5-ext/object/valid-object"),e=y("es5-ext/object/valid-value"),n=y("es5-ext/string/random-uniq"),r=y("d"),o=y("es6-iterator/get"),t=y("es6-iterator/for-of"),d=y("es6-symbol").toStringTag,a=y("./is-native-implemented"),i=Array.isArray,s=Object.defineProperty,c=Object.prototype.hasOwnProperty,l=Object.getPrototypeOf;Q.exports=m=function(){var p,g=arguments[0];if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");return p=a&&b&&WeakMap!==m?b(new WeakMap,l(this)):this,v(g)&&(i(g)||(g=o(g))),s(p,"__weakMapData__",r("c","$weakMap$"+n())),g&&t(g,function(u){e(u),p.set(u[0],u[1])}),p},a&&(b&&b(m,WeakMap),m.prototype=Object.create(WeakMap.prototype,{constructor:r(m)})),Object.defineProperties(m.prototype,{delete:r(function(p){return!!c.call(h(p),this.__weakMapData__)&&(delete p[this.__weakMapData__],!0)}),get:r(function(p){if(c.call(h(p),this.__weakMapData__))return p[this.__weakMapData__]}),has:r(function(p){return c.call(h(p),this.__weakMapData__)}),set:r(function(p,g){return s(h(p),this.__weakMapData__,r("c",g)),this}),toString:r(function(){return"[object WeakMap]"})}),s(m.prototype,d,r("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(y,Q,K){var m=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};Q.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return m()}try{return __global__||m()}finally{delete Object.prototype.__global__}}()},{}],188:[function(y,Q,K){"use strict";Q.exports=y("./is-implemented")()?globalThis:y("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(y,Q,K){"use strict";Q.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(y,Q,K){"use strict";var m=y("is-string-blank");Q.exports=function(v){var b=typeof v;if("string"===b){var h=v;if(0==(v=+v)&&m(h))return!1}else if("number"!==b)return!1;return v-v<1}},{"is-string-blank":237}],191:[function(y,Q,K){var m=y("dtype");Q.exports=function(v,b,h){if(!v)throw new TypeError("must specify data as first parameter");if(h=0|+(h||0),Array.isArray(v)&&v[0]&&"number"==typeof v[0][0]){var e,n,r,o,t=v[0].length,d=v.length*t;b&&"string"!=typeof b||(b=new(m(b||"float32"))(d+h));var a=b.length-h;if(d!==a)throw new Error("source length "+d+" ("+t+"x"+v.length+") does not match destination length "+a);for(e=0,r=h;e<v.length;e++)for(n=0;n<t;n++)b[r++]=null===v[e][n]?NaN:v[e][n]}else if(b&&"string"!=typeof b)b.set(v,h);else{var i=m(b||"float32");if(Array.isArray(v)||"array"===b)for(e=0,r=h,o=(b=new i(v.length+h)).length;r<o;r++,e++)b[r]=null===v[e]?NaN:v[e];else 0===h?b=new i(v):(b=new i(v.length+h)).set(v,h)}return b}},{dtype:127}],192:[function(y,Q,K){"use strict";var m=y("css-font/stringify"),v=[32,126];Q.exports=function(b){var h=(b=b||{}).shape?b.shape:b.canvas?[b.canvas.width,b.canvas.height]:[512,512],e=b.canvas||document.createElement("canvas"),n=b.font,r="number"==typeof b.step?[b.step,b.step]:b.step||[32,32],o=b.chars||v;if(n&&"string"!=typeof n&&(n=m(n)),Array.isArray(o)){if(2===o.length&&"number"==typeof o[0]&&"number"==typeof o[1]){for(var t=[],d=o[0],a=0;d<=o[1];d++)t[a++]=String.fromCharCode(d);o=t}}else o=String(o).split("");h=h.slice(),e.width=h[0],e.height=h[1];var i=e.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,e.width,e.height),i.font=n,i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff";var s=r[0]/2,c=r[1]/2;for(d=0;d<o.length;d++)i.fillText(o[d],s,c),(s+=r[0])>h[0]-r[0]/2&&(s=r[0]/2,c+=r[1]);return e}},{"css-font/stringify":102}],193:[function(y,Q,K){"use strict";function m(e,n){n||(n={}),("string"==typeof e||Array.isArray(e))&&(n.family=e);var r=Array.isArray(n.family)?n.family.join(", "):n.family;if(!r)throw Error("`family` must be defined");var o=n.size||n.fontSize||n.em||48,d=(e=[n.style||n.fontStyle||"",n.weight||n.fontWeight||"",o].join(" ")+"px "+r,n.origin||"top");if(m.cache[r]&&o<=m.cache[r].em)return v(m.cache[r],d);var a=n.canvas||m.canvas,i=a.getContext("2d"),s={upper:void 0!==n.upper?n.upper:"H",lower:void 0!==n.lower?n.lower:"x",descent:void 0!==n.descent?n.descent:"p",ascent:void 0!==n.ascent?n.ascent:"h",tittle:void 0!==n.tittle?n.tittle:"i",overshoot:void 0!==n.overshoot?n.overshoot:"O"},c=Math.ceil(1.5*o);a.height=c,a.width=.5*c,i.font=e;var l={top:0};i.clearRect(0,0,c,c),i.textBaseline="top",i.fillStyle="black",i.fillText("H",0,0);var p=b(i.getImageData(0,0,c,c));i.clearRect(0,0,c,c),i.textBaseline="bottom",i.fillText("H",0,c);var g=b(i.getImageData(0,0,c,c));l.lineHeight=l.bottom=c-g+p,i.clearRect(0,0,c,c),i.textBaseline="alphabetic",i.fillText("H",0,c);var u=c-b(i.getImageData(0,0,c,c))-1+p;l.baseline=l.alphabetic=u,i.clearRect(0,0,c,c),i.textBaseline="middle",i.fillText("H",0,.5*c);var x=b(i.getImageData(0,0,c,c));l.median=l.middle=c-x-1+p-.5*c,i.clearRect(0,0,c,c),i.textBaseline="hanging",i.fillText("H",0,.5*c);var f=b(i.getImageData(0,0,c,c));l.hanging=c-f-1+p-.5*c,i.clearRect(0,0,c,c),i.textBaseline="ideographic",i.fillText("H",0,c);var T=b(i.getImageData(0,0,c,c));if(l.ideographic=c-T-1+p,s.upper&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(s.upper,0,0),l.upper=b(i.getImageData(0,0,c,c)),l.capHeight=l.baseline-l.upper),s.lower&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(s.lower,0,0),l.lower=b(i.getImageData(0,0,c,c)),l.xHeight=l.baseline-l.lower),s.tittle&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(s.tittle,0,0),l.tittle=b(i.getImageData(0,0,c,c))),s.ascent&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(s.ascent,0,0),l.ascent=b(i.getImageData(0,0,c,c))),s.descent&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(s.descent,0,0),l.descent=h(i.getImageData(0,0,c,c))),s.overshoot){i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(s.overshoot,0,0);var _=h(i.getImageData(0,0,c,c));l.overshoot=_-u}for(var k in l)l[k]/=o;return l.em=o,m.cache[r]=l,v(l,d)}function v(e,n){var r={};for(var o in"string"==typeof n&&(n=e[n]),e)"em"!==o&&(r[o]=e[o]-n);return r}function b(e){for(var n=e.height,r=e.data,o=3;o<r.length;o+=4)if(0!==r[o])return Math.floor(.25*(o-3)/n)}function h(e){for(var n=e.height,r=e.data,o=r.length-1;o>0;o-=4)if(0!==r[o])return Math.floor(.25*(o-3)/n)}Q.exports=m,m.canvas=document.createElement("canvas"),m.cache={}},{}],194:[function(y,Q,K){Q.exports=function(m,v){if("string"!=typeof m)throw new TypeError("must specify type string");if(v=v||{},typeof document>"u"&&!v.canvas)return null;var b=v.canvas||document.createElement("canvas");"number"==typeof v.width&&(b.width=v.width),"number"==typeof v.height&&(b.height=v.height);var h,e=v;try{var n=[m];0===m.indexOf("webgl")&&n.push("experimental-"+m);for(var r=0;r<n.length;r++)if(h=b.getContext(n[r],e))return h}catch{h=null}return h||null}},{}],195:[function(y,Q,K){Q.exports=function(m,v){var b=v[0],h=v[1],e=v[2],n=v[3],r=v[4],o=v[5],t=v[6],d=v[7],a=v[8],i=v[9],s=v[10],c=v[11],l=v[12],p=v[13],g=v[14],u=v[15];return m[0]=o*(s*u-c*g)-i*(t*u-d*g)+p*(t*c-d*s),m[1]=-(h*(s*u-c*g)-i*(e*u-n*g)+p*(e*c-n*s)),m[2]=h*(t*u-d*g)-o*(e*u-n*g)+p*(e*d-n*t),m[3]=-(h*(t*c-d*s)-o*(e*c-n*s)+i*(e*d-n*t)),m[4]=-(r*(s*u-c*g)-a*(t*u-d*g)+l*(t*c-d*s)),m[5]=b*(s*u-c*g)-a*(e*u-n*g)+l*(e*c-n*s),m[6]=-(b*(t*u-d*g)-r*(e*u-n*g)+l*(e*d-n*t)),m[7]=b*(t*c-d*s)-r*(e*c-n*s)+a*(e*d-n*t),m[8]=r*(i*u-c*p)-a*(o*u-d*p)+l*(o*c-d*i),m[9]=-(b*(i*u-c*p)-a*(h*u-n*p)+l*(h*c-n*i)),m[10]=b*(o*u-d*p)-r*(h*u-n*p)+l*(h*d-n*o),m[11]=-(b*(o*c-d*i)-r*(h*c-n*i)+a*(h*d-n*o)),m[12]=-(r*(i*g-s*p)-a*(o*g-t*p)+l*(o*s-t*i)),m[13]=b*(i*g-s*p)-a*(h*g-e*p)+l*(h*s-e*i),m[14]=-(b*(o*g-t*p)-r*(h*g-e*p)+l*(h*t-e*o)),m[15]=b*(o*s-t*i)-r*(h*s-e*i)+a*(h*t-e*o),m}},{}],196:[function(y,Q,K){Q.exports=function(m){var v=new Float32Array(16);return v[0]=m[0],v[1]=m[1],v[2]=m[2],v[3]=m[3],v[4]=m[4],v[5]=m[5],v[6]=m[6],v[7]=m[7],v[8]=m[8],v[9]=m[9],v[10]=m[10],v[11]=m[11],v[12]=m[12],v[13]=m[13],v[14]=m[14],v[15]=m[15],v}},{}],197:[function(y,Q,K){Q.exports=function(m,v){return m[0]=v[0],m[1]=v[1],m[2]=v[2],m[3]=v[3],m[4]=v[4],m[5]=v[5],m[6]=v[6],m[7]=v[7],m[8]=v[8],m[9]=v[9],m[10]=v[10],m[11]=v[11],m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15],m}},{}],198:[function(y,Q,K){Q.exports=function(){var m=new Float32Array(16);return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],199:[function(y,Q,K){Q.exports=function(m){var v=m[0],b=m[1],h=m[2],e=m[3],n=m[4],r=m[5],o=m[6],t=m[7],d=m[8],a=m[9],i=m[10],s=m[11],c=m[12],l=m[13],p=m[14],g=m[15];return(v*r-b*n)*(i*g-s*p)-(v*o-h*n)*(a*g-s*l)+(v*t-e*n)*(a*p-i*l)+(b*o-h*r)*(d*g-s*c)-(b*t-e*r)*(d*p-i*c)+(h*t-e*o)*(d*l-a*c)}},{}],200:[function(y,Q,K){Q.exports=function(m,v){var b=v[0],h=v[1],e=v[2],n=v[3],r=b+b,o=h+h,t=e+e,d=b*r,a=h*r,i=h*o,s=e*r,c=e*o,l=e*t,p=n*r,g=n*o,u=n*t;return m[0]=1-i-l,m[1]=a+u,m[2]=s-g,m[3]=0,m[4]=a-u,m[5]=1-d-l,m[6]=c+p,m[7]=0,m[8]=s+g,m[9]=c-p,m[10]=1-d-i,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],201:[function(y,Q,K){Q.exports=function(m,v,b){var h,e,n,r=b[0],o=b[1],t=b[2],d=Math.sqrt(r*r+o*o+t*t);return Math.abs(d)<1e-6?null:(r*=d=1/d,o*=d,t*=d,h=Math.sin(v),e=Math.cos(v),m[0]=r*r*(n=1-e)+e,m[1]=o*r*n+t*h,m[2]=t*r*n-o*h,m[3]=0,m[4]=r*o*n-t*h,m[5]=o*o*n+e,m[6]=t*o*n+r*h,m[7]=0,m[8]=r*t*n+o*h,m[9]=o*t*n-r*h,m[10]=t*t*n+e,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m)}},{}],202:[function(y,Q,K){Q.exports=function(m,v,b){var h=v[0],e=v[1],n=v[2],r=v[3],o=h+h,t=e+e,d=n+n,a=h*o,i=h*t,s=h*d,c=e*t,l=e*d,p=n*d,g=r*o,u=r*t,x=r*d;return m[0]=1-(c+p),m[1]=i+x,m[2]=s-u,m[3]=0,m[4]=i-x,m[5]=1-(a+p),m[6]=l+g,m[7]=0,m[8]=s+u,m[9]=l-g,m[10]=1-(a+c),m[11]=0,m[12]=b[0],m[13]=b[1],m[14]=b[2],m[15]=1,m}},{}],203:[function(y,Q,K){Q.exports=function(m,v){return m[0]=v[0],m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=v[1],m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=v[2],m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],204:[function(y,Q,K){Q.exports=function(m,v){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=v[0],m[13]=v[1],m[14]=v[2],m[15]=1,m}},{}],205:[function(y,Q,K){Q.exports=function(m,v){var b=Math.sin(v),h=Math.cos(v);return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=h,m[6]=b,m[7]=0,m[8]=0,m[9]=-b,m[10]=h,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],206:[function(y,Q,K){Q.exports=function(m,v){var b=Math.sin(v),h=Math.cos(v);return m[0]=h,m[1]=0,m[2]=-b,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=b,m[9]=0,m[10]=h,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],207:[function(y,Q,K){Q.exports=function(m,v){var b=Math.sin(v),h=Math.cos(v);return m[0]=h,m[1]=b,m[2]=0,m[3]=0,m[4]=-b,m[5]=h,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],208:[function(y,Q,K){Q.exports=function(m,v,b,h,e,n,r){var o=1/(b-v),t=1/(e-h),d=1/(n-r);return m[0]=2*n*o,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=2*n*t,m[6]=0,m[7]=0,m[8]=(b+v)*o,m[9]=(e+h)*t,m[10]=(r+n)*d,m[11]=-1,m[12]=0,m[13]=0,m[14]=r*n*2*d,m[15]=0,m}},{}],209:[function(y,Q,K){Q.exports=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],210:[function(y,Q,K){Q.exports={create:y("./create"),clone:y("./clone"),copy:y("./copy"),identity:y("./identity"),transpose:y("./transpose"),invert:y("./invert"),adjoint:y("./adjoint"),determinant:y("./determinant"),multiply:y("./multiply"),translate:y("./translate"),scale:y("./scale"),rotate:y("./rotate"),rotateX:y("./rotateX"),rotateY:y("./rotateY"),rotateZ:y("./rotateZ"),fromRotation:y("./fromRotation"),fromRotationTranslation:y("./fromRotationTranslation"),fromScaling:y("./fromScaling"),fromTranslation:y("./fromTranslation"),fromXRotation:y("./fromXRotation"),fromYRotation:y("./fromYRotation"),fromZRotation:y("./fromZRotation"),fromQuat:y("./fromQuat"),frustum:y("./frustum"),perspective:y("./perspective"),perspectiveFromFieldOfView:y("./perspectiveFromFieldOfView"),ortho:y("./ortho"),lookAt:y("./lookAt"),str:y("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(y,Q,K){Q.exports=function(m,v){var b=v[0],h=v[1],e=v[2],n=v[3],r=v[4],o=v[5],t=v[6],d=v[7],a=v[8],i=v[9],s=v[10],c=v[11],l=v[12],p=v[13],g=v[14],u=v[15],x=b*o-h*r,f=b*t-e*r,T=b*d-n*r,_=h*t-e*o,k=h*d-n*o,w=e*d-n*t,C=a*p-i*l,A=a*g-s*l,O=a*u-c*l,P=i*g-s*p,S=i*u-c*p,E=s*u-c*g,D=x*E-f*S+T*P+_*O-k*A+w*C;return D?(m[0]=(o*E-t*S+d*P)*(D=1/D),m[1]=(e*S-h*E-n*P)*D,m[2]=(p*w-g*k+u*_)*D,m[3]=(s*k-i*w-c*_)*D,m[4]=(t*O-r*E-d*A)*D,m[5]=(b*E-e*O+n*A)*D,m[6]=(g*T-l*w-u*f)*D,m[7]=(a*w-s*T+c*f)*D,m[8]=(r*S-o*O+d*C)*D,m[9]=(h*O-b*S-n*C)*D,m[10]=(l*k-p*T+u*x)*D,m[11]=(i*T-a*k-c*x)*D,m[12]=(o*A-r*P-t*C)*D,m[13]=(b*P-h*A+e*C)*D,m[14]=(p*f-l*_-g*x)*D,m[15]=(a*_-i*f+s*x)*D,m):null}},{}],212:[function(y,Q,K){var m=y("./identity");Q.exports=function(v,b,h,e){var n,r,o,t,d,a,i,s,c,l,p=b[0],g=b[1],u=b[2],x=e[0],f=e[1],T=e[2],_=h[0],k=h[1],w=h[2];return Math.abs(p-_)<1e-6&&Math.abs(g-k)<1e-6&&Math.abs(u-w)<1e-6?m(v):(i=p-_,s=g-k,c=u-w,n=f*(c*=l=1/Math.sqrt(i*i+s*s+c*c))-T*(s*=l),r=T*(i*=l)-x*c,o=x*s-f*i,(l=Math.sqrt(n*n+r*r+o*o))?(n*=l=1/l,r*=l,o*=l):(n=0,r=0,o=0),t=s*o-c*r,d=c*n-i*o,a=i*r-s*n,(l=Math.sqrt(t*t+d*d+a*a))?(t*=l=1/l,d*=l,a*=l):(t=0,d=0,a=0),v[0]=n,v[1]=t,v[2]=i,v[3]=0,v[4]=r,v[5]=d,v[6]=s,v[7]=0,v[8]=o,v[9]=a,v[10]=c,v[11]=0,v[12]=-(n*p+r*g+o*u),v[13]=-(t*p+d*g+a*u),v[14]=-(i*p+s*g+c*u),v[15]=1,v)}},{"./identity":209}],213:[function(y,Q,K){Q.exports=function(m,v,b){var h=v[0],e=v[1],n=v[2],r=v[3],o=v[4],t=v[5],d=v[6],a=v[7],i=v[8],s=v[9],c=v[10],l=v[11],p=v[12],g=v[13],u=v[14],x=v[15],f=b[0],T=b[1],_=b[2],k=b[3];return m[0]=f*h+T*o+_*i+k*p,m[1]=f*e+T*t+_*s+k*g,m[2]=f*n+T*d+_*c+k*u,m[3]=f*r+T*a+_*l+k*x,m[4]=(f=b[4])*h+(T=b[5])*o+(_=b[6])*i+(k=b[7])*p,m[5]=f*e+T*t+_*s+k*g,m[6]=f*n+T*d+_*c+k*u,m[7]=f*r+T*a+_*l+k*x,m[8]=(f=b[8])*h+(T=b[9])*o+(_=b[10])*i+(k=b[11])*p,m[9]=f*e+T*t+_*s+k*g,m[10]=f*n+T*d+_*c+k*u,m[11]=f*r+T*a+_*l+k*x,m[12]=(f=b[12])*h+(T=b[13])*o+(_=b[14])*i+(k=b[15])*p,m[13]=f*e+T*t+_*s+k*g,m[14]=f*n+T*d+_*c+k*u,m[15]=f*r+T*a+_*l+k*x,m}},{}],214:[function(y,Q,K){Q.exports=function(m,v,b,h,e,n,r){var o=1/(v-b),t=1/(h-e),d=1/(n-r);return m[0]=-2*o,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=-2*t,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=2*d,m[11]=0,m[12]=(v+b)*o,m[13]=(e+h)*t,m[14]=(r+n)*d,m[15]=1,m}},{}],215:[function(y,Q,K){Q.exports=function(m,v,b,h,e){var n=1/Math.tan(v/2),r=1/(h-e);return m[0]=n/b,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=n,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=(e+h)*r,m[11]=-1,m[12]=0,m[13]=0,m[14]=2*e*h*r,m[15]=0,m}},{}],216:[function(y,Q,K){Q.exports=function(m,v,b,h){var e=Math.tan(v.upDegrees*Math.PI/180),n=Math.tan(v.downDegrees*Math.PI/180),r=Math.tan(v.leftDegrees*Math.PI/180),o=Math.tan(v.rightDegrees*Math.PI/180),t=2/(r+o),d=2/(e+n);return m[0]=t,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=d,m[6]=0,m[7]=0,m[8]=-(r-o)*t*.5,m[9]=(e-n)*d*.5,m[10]=h/(b-h),m[11]=-1,m[12]=0,m[13]=0,m[14]=h*b/(b-h),m[15]=0,m}},{}],217:[function(y,Q,K){Q.exports=function(m,v,b,h){var e,n,r,o,t,d,a,i,s,c,l,p,g,u,x,f,T,_,k,w,C,A,O,P,S=h[0],E=h[1],D=h[2],z=Math.sqrt(S*S+E*E+D*D);return Math.abs(z)<1e-6?null:(S*=z=1/z,E*=z,D*=z,e=Math.sin(b),n=Math.cos(b),t=v[1],d=v[2],a=v[3],s=v[5],c=v[6],l=v[7],g=v[9],u=v[10],x=v[11],k=S*E*(r=1-n)-D*e,w=E*E*r+n,C=D*E*r+S*e,A=S*D*r+E*e,O=E*D*r-S*e,P=D*D*r+n,m[0]=(o=v[0])*(f=S*S*r+n)+(i=v[4])*(T=E*S*r+D*e)+(p=v[8])*(_=D*S*r-E*e),m[1]=t*f+s*T+g*_,m[2]=d*f+c*T+u*_,m[3]=a*f+l*T+x*_,m[4]=o*k+i*w+p*C,m[5]=t*k+s*w+g*C,m[6]=d*k+c*w+u*C,m[7]=a*k+l*w+x*C,m[8]=o*A+i*O+p*P,m[9]=t*A+s*O+g*P,m[10]=d*A+c*O+u*P,m[11]=a*A+l*O+x*P,v!==m&&(m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15]),m)}},{}],218:[function(y,Q,K){Q.exports=function(m,v,b){var h=Math.sin(b),e=Math.cos(b),n=v[4],r=v[5],o=v[6],t=v[7],d=v[8],a=v[9],i=v[10],s=v[11];return v!==m&&(m[0]=v[0],m[1]=v[1],m[2]=v[2],m[3]=v[3],m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15]),m[4]=n*e+d*h,m[5]=r*e+a*h,m[6]=o*e+i*h,m[7]=t*e+s*h,m[8]=d*e-n*h,m[9]=a*e-r*h,m[10]=i*e-o*h,m[11]=s*e-t*h,m}},{}],219:[function(y,Q,K){Q.exports=function(m,v,b){var h=Math.sin(b),e=Math.cos(b),n=v[0],r=v[1],o=v[2],t=v[3],d=v[8],a=v[9],i=v[10],s=v[11];return v!==m&&(m[4]=v[4],m[5]=v[5],m[6]=v[6],m[7]=v[7],m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15]),m[0]=n*e-d*h,m[1]=r*e-a*h,m[2]=o*e-i*h,m[3]=t*e-s*h,m[8]=n*h+d*e,m[9]=r*h+a*e,m[10]=o*h+i*e,m[11]=t*h+s*e,m}},{}],220:[function(y,Q,K){Q.exports=function(m,v,b){var h=Math.sin(b),e=Math.cos(b),n=v[0],r=v[1],o=v[2],t=v[3],d=v[4],a=v[5],i=v[6],s=v[7];return v!==m&&(m[8]=v[8],m[9]=v[9],m[10]=v[10],m[11]=v[11],m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15]),m[0]=n*e+d*h,m[1]=r*e+a*h,m[2]=o*e+i*h,m[3]=t*e+s*h,m[4]=d*e-n*h,m[5]=a*e-r*h,m[6]=i*e-o*h,m[7]=s*e-t*h,m}},{}],221:[function(y,Q,K){Q.exports=function(m,v,b){var h=b[0],e=b[1],n=b[2];return m[0]=v[0]*h,m[1]=v[1]*h,m[2]=v[2]*h,m[3]=v[3]*h,m[4]=v[4]*e,m[5]=v[5]*e,m[6]=v[6]*e,m[7]=v[7]*e,m[8]=v[8]*n,m[9]=v[9]*n,m[10]=v[10]*n,m[11]=v[11]*n,m[12]=v[12],m[13]=v[13],m[14]=v[14],m[15]=v[15],m}},{}],222:[function(y,Q,K){Q.exports=function(m){return"mat4("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+", "+m[9]+", "+m[10]+", "+m[11]+", "+m[12]+", "+m[13]+", "+m[14]+", "+m[15]+")"}},{}],223:[function(y,Q,K){Q.exports=function(m,v,b){var h,e,n,r,o,t,d,a,i,s,c,l,p=b[0],g=b[1],u=b[2];return v===m?(m[12]=v[0]*p+v[4]*g+v[8]*u+v[12],m[13]=v[1]*p+v[5]*g+v[9]*u+v[13],m[14]=v[2]*p+v[6]*g+v[10]*u+v[14],m[15]=v[3]*p+v[7]*g+v[11]*u+v[15]):(e=v[1],n=v[2],r=v[3],o=v[4],t=v[5],d=v[6],a=v[7],i=v[8],s=v[9],c=v[10],l=v[11],m[0]=h=v[0],m[1]=e,m[2]=n,m[3]=r,m[4]=o,m[5]=t,m[6]=d,m[7]=a,m[8]=i,m[9]=s,m[10]=c,m[11]=l,m[12]=h*p+o*g+i*u+v[12],m[13]=e*p+t*g+s*u+v[13],m[14]=n*p+d*g+c*u+v[14],m[15]=r*p+a*g+l*u+v[15]),m}},{}],224:[function(y,Q,K){Q.exports=function(m,v){if(m===v){var b=v[1],h=v[2],e=v[3],n=v[6],r=v[7],o=v[11];m[1]=v[4],m[2]=v[8],m[3]=v[12],m[4]=b,m[6]=v[9],m[7]=v[13],m[8]=h,m[9]=n,m[11]=v[14],m[12]=e,m[13]=r,m[14]=o}else m[0]=v[0],m[1]=v[4],m[2]=v[8],m[3]=v[12],m[4]=v[1],m[5]=v[5],m[6]=v[9],m[7]=v[13],m[8]=v[2],m[9]=v[6],m[10]=v[10],m[11]=v[14],m[12]=v[3],m[13]=v[7],m[14]=v[11],m[15]=v[15];return m}},{}],225:[function(y,Q,K){"use strict";var m=y("css-font"),v=y("pick-by-alias"),b=y("regl"),h=y("gl-util/context"),e=y("es6-weak-map"),n=y("color-normalize"),r=y("font-atlas"),o=y("typedarray-pool"),t=y("parse-rect"),d=y("is-plain-obj"),a=y("parse-unit"),i=y("to-px"),s=y("detect-kerning"),c=y("object-assign"),l=y("font-measure"),p=y("flatten-vertex-data"),g=y("bit-twiddle").nextPow2,u=new e,x=!1;if(document.body){var f=document.body.appendChild(document.createElement("div"));f.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(f).fontStretch&&(x=!0),document.body.removeChild(f)}var T=function(_){var k;this.gl="function"==typeof(k=_)&&k._gl&&k.prop&&k.texture&&k.buffer?(_={regl:_}).regl._gl:h(_),this.shader=u.get(this.gl),this.regl=this.shader?this.shader.regl:_.regl||b({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),u.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(_)?_:{})};T.prototype.createShader=function(){var _=this.regl,k=_({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:_.prop("count"),offset:_.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:_.this("sizeBuffer")},width:{offset:0,stride:8,buffer:_.this("sizeBuffer")},char:_.this("charBuffer"),position:_.this("position")},uniforms:{atlasSize:function(w,C){return[C.atlas.width,C.atlas.height]},atlasDim:function(w,C){return[C.atlas.cols,C.atlas.rows]},atlas:function(w,C){return C.atlas.texture},charStep:function(w,C){return C.atlas.step},em:function(w,C){return C.atlas.em},color:_.prop("color"),opacity:_.prop("opacity"),viewport:_.this("viewportArray"),scale:_.this("scale"),align:_.prop("align"),baseline:_.prop("baseline"),translate:_.this("translate"),positionOffset:_.prop("positionOffset")},primitive:"points",viewport:_.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:_,draw:k,atlas:{}}},T.prototype.update=function(_){var k=this;if("string"==typeof _)_={text:_};else if(!_)return;null!=(_=v(_,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(_.opacity)?_.opacity.map(function(me){return parseFloat(me)}):parseFloat(_.opacity)),null!=_.viewport&&(this.viewport=t(_.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=_.kerning&&(this.kerning=_.kerning),null!=_.offset&&("number"==typeof _.offset&&(_.offset=[_.offset,0]),this.positionOffset=p(_.offset)),_.direction&&(this.direction=_.direction),_.range&&(this.range=_.range,this.scale=[1/(_.range[2]-_.range[0]),1/(_.range[3]-_.range[1])],this.translate=[-_.range[0],-_.range[1]]),_.scale&&(this.scale=_.scale),_.translate&&(this.translate=_.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||_.font||(_.font=T.baseFontSize+"px sans-serif");var w,C=!1,A=!1;if(_.font&&(Array.isArray(_.font)?_.font:[_.font]).forEach(function(me,Se){if("string"==typeof me)try{me=m.parse(me)}catch{me=m.parse(T.baseFontSize+"px "+me)}else me=m.parse(m.stringify(me));var Me=m.stringify({size:T.baseFontSize,family:me.family,stretch:x?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style}),Ie=a(me.size),Fe=Math.round(Ie[0]*i(Ie[1]));if(Fe!==k.fontSize[Se]&&(A=!0,k.fontSize[Se]=Fe),!(k.font[Se]&&Me==k.font[Se].baseString||(C=!0,k.font[Se]=T.fonts[Me],k.font[Se]))){var Ne=me.family.join(", "),De=[me.style];me.style!=me.variant&&De.push(me.variant),me.variant!=me.weight&&De.push(me.weight),x&&me.weight!=me.stretch&&De.push(me.stretch),k.font[Se]={baseString:Me,family:Ne,weight:me.weight,stretch:me.stretch,style:me.style,variant:me.variant,width:{},kerning:{},metrics:l(Ne,{origin:"top",fontSize:T.baseFontSize,fontStyle:De.join(" ")})},T.fonts[Me]=k.font[Se]}}),(C||A)&&this.font.forEach(function(me,Se){var Me=m.stringify({size:k.fontSize[Se],family:me.family,stretch:x?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style});k.fontAtlas[Se]=k.shader.atlas[Me],k.fontAtlas[Se]||(k.shader.atlas[Me]=k.fontAtlas[Se]={fontString:Me,step:2*Math.ceil(k.fontSize[Se]*me.metrics.bottom*.5),em:k.fontSize[Se],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:k.regl.texture()}),null==_.text&&(_.text=k.text)}),"string"==typeof _.text&&_.position&&_.position.length>2){for(var O=Array(.5*_.position.length),P=0;P<O.length;P++)O[P]=_.text;_.text=O}if(null!=_.text||C){if(this.textOffsets=[0],Array.isArray(_.text)){this.count=_.text[0].length,this.counts=[this.count];for(var S=1;S<_.text.length;S++)this.textOffsets[S]=this.textOffsets[S-1]+_.text[S-1].length,this.count+=_.text[S].length,this.counts.push(_.text[S].length);this.text=_.text.join("")}else this.text=_.text,this.count=this.text.length,this.counts=[this.count];w=[],this.font.forEach(function(me,Se){T.atlasContext.font=me.baseString;for(var Me=k.fontAtlas[Se],Ie=0;Ie<k.text.length;Ie++){var Fe=k.text.charAt(Ie);if(null==Me.ids[Fe]&&(Me.ids[Fe]=Me.chars.length,Me.chars.push(Fe),w.push(Fe)),null==me.width[Fe]&&(me.width[Fe]=T.atlasContext.measureText(Fe).width/T.baseFontSize,k.kerning)){var Ne=[];for(var De in me.width)Ne.push(De+Fe,Fe+De);c(me.kerning,s(me.family,{pairs:Ne}))}}})}if(_.position)if(_.position.length>2){for(var E=!_.position[0].length,D=o.mallocFloat(2*this.count),z=0,N=0;z<this.counts.length;z++){var V=this.counts[z];if(E)for(var X=0;X<V;X++)D[N++]=_.position[2*z],D[N++]=_.position[2*z+1];else for(var J=0;J<V;J++)D[N++]=_.position[z][0],D[N++]=_.position[z][1]}this.position.call?this.position({type:"float",data:D}):this.position=this.regl.buffer({type:"float",data:D}),o.freeFloat(D)}else this.position.destroy&&this.position.destroy(),this.position={constant:_.position};if(_.text||C){var G=o.mallocUint8(this.count),Z=o.mallocFloat(2*this.count);this.textWidth=[];for(var re=0,j=0;re<this.counts.length;re++){for(var B=this.counts[re],H=this.font[re]||this.font[0],ee=this.fontAtlas[re]||this.fontAtlas[0],U=0;U<B;U++){var $=this.text.charAt(j),q=this.text.charAt(j-1);if(G[j]=ee.ids[$],Z[2*j]=H.width[$],U){var se=Z[2*j-1]+.5*Z[2*j-2]+.5*Z[2*j];if(this.kerning){var ie=H.kerning[q+$];ie&&(se+=.001*ie)}Z[2*j+1]=se}else Z[2*j+1]=.5*Z[2*j];j++}this.textWidth.push(Z.length?.5*Z[2*j-2]+Z[2*j-1]:0)}_.align||(_.align=this.align),this.charBuffer({data:G,type:"uint8",usage:"stream"}),this.sizeBuffer({data:Z,type:"float",usage:"stream"}),o.freeUint8(G),o.freeFloat(Z),w.length&&this.font.forEach(function(me,Se){var Me=k.fontAtlas[Se],Ie=Me.step,Fe=Math.floor(T.maxAtlasSize/Ie),Ne=Math.min(Fe,Me.chars.length),De=Math.ceil(Me.chars.length/Ne),$e=g(Ne*Ie),Re=g(De*Ie);Me.width=$e,Me.height=Re,Me.rows=De,Me.cols=Ne,Me.em&&Me.texture({data:r({canvas:T.atlasCanvas,font:Me.fontString,chars:Me.chars,shape:[$e,Re],step:[Ie,Ie]})})})}if(_.align&&(this.align=_.align,this.alignOffset=this.textWidth.map(function(me,Se){var Me=Array.isArray(k.align)?k.align.length>1?k.align[Se]:k.align[0]:k.align;if("number"==typeof Me)return Me;switch(Me){case"right":case"end":return-me;case"center":case"centre":case"middle":return.5*-me}return 0})),null==this.baseline&&null==_.baseline&&(_.baseline=0),null!=_.baseline&&(this.baseline=_.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(me,Se){var Me=(k.font[Se]||k.font[0]).metrics,Ie=0;return-1*((Ie+=.5*Me.bottom)+("number"==typeof me?me-Me.baseline:-Me[me]))})),null!=_.color)if(_.color||(_.color="transparent"),"string"!=typeof _.color&&isNaN(_.color)){var ue;if("number"==typeof _.color[0]&&_.color.length>this.counts.length){var le=_.color.length;ue=o.mallocUint8(le);for(var de=(_.color.subarray||_.color.slice).bind(_.color),be=0;be<le;be+=4)ue.set(n(de(be,be+4),"uint8"),be)}else{var _e=_.color.length;ue=o.mallocUint8(4*_e);for(var xe=0;xe<_e;xe++)ue.set(n(_.color[xe]||0,"uint8"),4*xe)}this.color=ue}else this.color=n(_.color,"uint8");if(_.position||_.text||_.color||_.baseline||_.align||_.font||_.offset||_.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Ee=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Ee);for(var he=0;he<this.batch.length;he++)this.batch[he]={count:this.counts.length>1?this.counts[he]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[he]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*he,4*he+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[he]:this.opacity,baseline:null!=this.baselineOffset[he]?this.baselineOffset[he]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[he]?this.alignOffset[he]:this.alignOffset[0]:0,atlas:this.fontAtlas[he]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*he,2*he+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},T.prototype.destroy=function(){},T.prototype.kerning=!0,T.prototype.position={constant:new Float32Array(2)},T.prototype.translate=null,T.prototype.scale=null,T.prototype.font=null,T.prototype.text="",T.prototype.positionOffset=[0,0],T.prototype.opacity=1,T.prototype.color=new Uint8Array([0,0,0,255]),T.prototype.alignOffset=[0,0],T.maxAtlasSize=1024,T.atlasCanvas=document.createElement("canvas"),T.atlasContext=T.atlasCanvas.getContext("2d",{alpha:!1}),T.baseFontSize=64,T.fonts={},Q.exports=T},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(y,Q,K){(function(m){(function(){"use strict";var v=y("pick-by-alias");function b(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*m.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*m.innerHeight);else{var r=n.container.getBoundingClientRect();n.canvas.width=n.width||r.right-r.left,n.canvas.height=n.height||r.bottom-r.top}}function h(n){return"function"==typeof n.getContext&&"width"in n&&"height"in n}function e(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}Q.exports=function(n){var r,t;if(n?"string"==typeof n&&(n={container:n}):n={},(n=h(n)||"string"==typeof(r=n).nodeName&&"function"==typeof r.appendChild&&"function"==typeof r.getBoundingClientRect?{container:n}:"function"==typeof(t=n).drawArrays||"function"==typeof t.drawElements?{gl:n}:v(n,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(n.pixelRatio=m.pixelRatio||1),n.gl)return n.gl;if(n.canvas&&(n.container=n.canvas.parentNode),n.container){if("string"==typeof n.container){var o=document.querySelector(n.container);if(!o)throw Error("Element "+n.container+" is not found");n.container=o}h(n.container)?(n.canvas=n.container,n.container=n.canvas.parentNode):n.canvas||(n.canvas=e(),n.container.appendChild(n.canvas),b(n))}else if(!n.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");n.container=document.body||document.documentElement,n.canvas=e(),n.container.appendChild(n.canvas),b(n)}return n.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{n.gl=n.canvas.getContext(t,n.attrs)}catch{}return n.gl}),n.gl}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(y,Q,K){Q.exports=function(m){"string"==typeof m&&(m=[m]);for(var v=[].slice.call(arguments,1),b=[],h=0;h<m.length-1;h++)b.push(m[h],v[h]||"");return b.push(m[h]),b.join("")}},{}],228:[function(y,Q,K){(function(m){(function(){"use strict";var v,b=y("is-browser");v="function"==typeof m.matchMedia?!m.matchMedia("(hover: none)").matches:b,Q.exports=v}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(y,Q,K){"use strict";var m=y("is-browser");Q.exports=m&&function(){var v=!1;try{var b=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",null,b),window.removeEventListener("test",null,b)}catch{v=!1}return v}()},{"is-browser":232}],230:[function(y,Q,K){K.read=function(m,v,b,h,e){var n,r,o=8*e-h-1,t=(1<<o)-1,d=t>>1,a=-7,i=b?e-1:0,s=b?-1:1,c=m[v+i];for(i+=s,n=c&(1<<-a)-1,c>>=-a,a+=o;a>0;n=256*n+m[v+i],i+=s,a-=8);for(r=n&(1<<-a)-1,n>>=-a,a+=h;a>0;r=256*r+m[v+i],i+=s,a-=8);if(0===n)n=1-d;else{if(n===t)return r?NaN:1/0*(c?-1:1);r+=Math.pow(2,h),n-=d}return(c?-1:1)*r*Math.pow(2,n-h)},K.write=function(m,v,b,h,e,n){var r,o,t,d=8*n-e-1,a=(1<<d)-1,i=a>>1,s=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,c=h?0:n-1,l=h?1:-1,p=v<0||0===v&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(o=isNaN(v)?1:0,r=a):(r=Math.floor(Math.log(v)/Math.LN2),v*(t=Math.pow(2,-r))<1&&(r--,t*=2),(v+=r+i>=1?s/t:s*Math.pow(2,1-i))*t>=2&&(r++,t/=2),r+i>=a?(o=0,r=a):r+i>=1?(o=(v*t-1)*Math.pow(2,e),r+=i):(o=v*Math.pow(2,i-1)*Math.pow(2,e),r=0));e>=8;m[b+c]=255&o,c+=l,o/=256,e-=8);for(r=r<<e|o,d+=e;d>0;m[b+c]=255&r,c+=l,r/=256,d-=8);m[b+c-l]|=128*p}},{}],231:[function(y,Q,K){Q.exports="function"==typeof Object.create?function(m,v){v&&(m.super_=v,m.prototype=Object.create(v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}))}:function(m,v){if(v){m.super_=v;var b=function(){};b.prototype=v.prototype,m.prototype=new b,m.prototype.constructor=m}}},{}],232:[function(y,Q,K){Q.exports=!0},{}],233:[function(y,Q,K){"use strict";Q.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(y,Q,K){"use strict";Q.exports=b,Q.exports.isMobile=b,Q.exports.default=b;var m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,v=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function b(h){h||(h={});var e=h.ua;if(e||typeof navigator>"u"||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var n=h.tablet?v.test(e):m.test(e);return!n&&h.tablet&&h.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(n=!0),n}},{}],235:[function(y,Q,K){"use strict";Q.exports=function(m){var v=typeof m;return null!==m&&("object"===v||"function"===v)}},{}],236:[function(y,Q,K){"use strict";var m=Object.prototype.toString;Q.exports=function(v){var b;return"[object Object]"===m.call(v)&&(null===(b=Object.getPrototypeOf(v))||b===Object.getPrototypeOf({}))}},{}],237:[function(y,Q,K){"use strict";Q.exports=function(m){for(var v,b=m.length,h=0;h<b;h++)if(((v=m.charCodeAt(h))<9||v>13)&&32!==v&&133!==v&&160!==v&&5760!==v&&6158!==v&&(v<8192||v>8205)&&8232!==v&&8233!==v&&8239!==v&&8287!==v&&8288!==v&&12288!==v&&65279!==v)return!1;return!0}},{}],238:[function(y,Q,K){"use strict";Q.exports=function(m){return"string"==typeof m&&(m=m.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(m)&&/[\dz]$/i.test(m)&&m.length>4))}},{}],239:[function(y,Q,K){var m,v;m=this,v=function(){"use strict";var m,v,b;function h(e,n){if(m)if(v){var r="var sharedChunk = {}; ("+m+")(sharedChunk); ("+v+")(sharedChunk);",o={};m(o),(b=n(o)).workerUrl=window.URL.createObjectURL(new Blob([r],{type:"text/javascript"}))}else v=n;else m=n}return h(0,function(e){function n(M,I){return M(I={exports:{}},I.exports),I.exports}var r=o;function o(M,I,W,oe){this.cx=3*M,this.bx=3*(W-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*I,this.by=3*(oe-I)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=oe,this.p2x=W,this.p2y=oe}o.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},o.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},o.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},o.prototype.solveCurveX=function(M,I){var W,oe,ge,Te,Oe;for(void 0===I&&(I=1e-6),ge=M,Oe=0;Oe<8;Oe++){if(Te=this.sampleCurveX(ge)-M,Math.abs(Te)<I)return ge;var Ve=this.sampleCurveDerivativeX(ge);if(Math.abs(Ve)<1e-6)break;ge-=Te/Ve}if((ge=M)<(W=0))return W;if(ge>(oe=1))return oe;for(;W<oe;){if(Te=this.sampleCurveX(ge),Math.abs(Te-M)<I)return ge;M>Te?W=ge:oe=ge,ge=.5*(oe-W)+W}return ge},o.prototype.solve=function(M,I){return this.sampleCurveY(this.solveCurveX(M,I))};var t=d;function d(M,I){this.x=M,this.y=I}function a(M,I,W,oe){var ge=new r(M,I,W,oe);return function(Te){return ge.solve(Te)}}d.prototype={clone:function(){return new d(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,I){return this.clone()._rotateAround(M,I)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var I=M.x-this.x,W=M.y-this.y;return I*I+W*W},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,I){return Math.atan2(this.x*I-this.y*M,this.x*M+this.y*I)},_matMult:function(M){var W=M[2]*this.x+M[3]*this.y;return this.x=M[0]*this.x+M[1]*this.y,this.y=W,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var I=Math.cos(M),W=Math.sin(M),ge=W*this.x+I*this.y;return this.x=I*this.x-W*this.y,this.y=ge,this},_rotateAround:function(M,I){var W=Math.cos(M),oe=Math.sin(M),Te=I.y+oe*(this.x-I.x)+W*(this.y-I.y);return this.x=I.x+W*(this.x-I.x)-oe*(this.y-I.y),this.y=Te,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(M){return M instanceof d?M:Array.isArray(M)?new d(M[0],M[1]):M};var i=a(.25,.1,.25,1);function s(M,I,W){return Math.min(W,Math.max(I,M))}function c(M,I,W){var oe=W-I,ge=((M-I)%oe+oe)%oe+I;return ge===I?W:ge}function l(M){for(var I=[],W=arguments.length-1;W-- >0;)I[W]=arguments[W+1];for(var oe=0,ge=I;oe<ge.length;oe+=1){var Te=ge[oe];for(var Oe in Te)M[Oe]=Te[Oe]}return M}var p=1;function g(){return p++}function u(){return function M(I){return I?(I^16*Math.random()>>I/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function x(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function f(M,I){M.forEach(function(W){I[W]&&(I[W]=I[W].bind(I))})}function T(M,I){return-1!==M.indexOf(I,M.length-I.length)}function _(M,I,W){var oe={};for(var ge in M)oe[ge]=I.call(W||this,M[ge],ge,M);return oe}function k(M,I,W){var oe={};for(var ge in M)I.call(W||this,M[ge],ge,M)&&(oe[ge]=M[ge]);return oe}function w(M){return Array.isArray(M)?M.map(w):"object"==typeof M&&M?_(M,w):M}var C={};function A(M){C[M]||(typeof console<"u"&&console.warn(M),C[M]=!0)}function O(M,I,W){return(W.y-M.y)*(I.x-M.x)>(I.y-M.y)*(W.x-M.x)}function P(M){for(var I=0,W=0,oe=M.length,ge=oe-1,Te=void 0,Oe=void 0;W<oe;ge=W++)I+=((Oe=M[ge]).x-(Te=M[W]).x)*(Te.y+Oe.y);return I}function S(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function E(M){var I={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(oe,ge,Te,Oe){var Ve=Te||Oe;return I[ge]=!Ve||Ve.toLowerCase(),""}),I["max-age"]){var W=parseInt(I["max-age"],10);isNaN(W)?delete I["max-age"]:I["max-age"]=W}return I}var D=null;function z(M){if(null==D){var I=M.navigator?M.navigator.userAgent:null;D=!!M.safari||!(!I||!(/\b(iPad|iPhone|iPod)\b/.test(I)||I.match("Safari")&&!I.match("Chrome")))}return D}function N(M){try{var I=self[M];return I.setItem("_mapbox_test_",1),I.removeItem("_mapbox_test_"),!0}catch{return!1}}var V,X,J,G,Z=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),re=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,j=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,B={now:Z,frame:function(M){var I=re(M);return{cancel:function(){return j(I)}}},getImageData:function(M,I){void 0===I&&(I=0);var W=self.document.createElement("canvas"),oe=W.getContext("2d");if(!oe)throw new Error("failed to create canvas 2d context");return W.width=M.width,W.height=M.height,oe.drawImage(M,0,0,M.width,M.height),oe.getImageData(-I,-I,M.width+2*I,M.height+2*I)},resolveURL:function(M){return V||(V=self.document.createElement("a")),V.href=M,V.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==X&&(X=self.matchMedia("(prefers-reduced-motion: reduce)")),X.matches)}},H={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ee={supported:!1,testSupport:function(M){U||!G||($?q(M):J=M)}},U=!1,$=!1;function q(M){var I=M.createTexture();M.bindTexture(M.TEXTURE_2D,I);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,G),M.isContextLost())return;ee.supported=!0}catch{}M.deleteTexture(I),U=!0}self.document&&((G=self.document.createElement("img")).onload=function(){J&&q(J),J=null,$=!0},G.onerror=function(){U=!0,J=null},G.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var te="01",ne=function(M,I){this._transformRequestFn=M,this._customAccessToken=I,this._createSkuToken()};function se(M){return 0===M.indexOf("mapbox:")}ne.prototype._createSkuToken=function(){var M=function(){for(var I="",W=0;W<10;W++)I+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",te,I].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ne.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ne.prototype.transformRequest=function(M,I){return this._transformRequestFn&&this._transformRequestFn(M,I)||{url:M}},ne.prototype.normalizeStyleURL=function(M,I){if(!se(M))return M;var W=de(M);return W.path="/styles/v1"+W.path,this._makeAPIURL(W,this._customAccessToken||I)},ne.prototype.normalizeGlyphsURL=function(M,I){if(!se(M))return M;var W=de(M);return W.path="/fonts/v1"+W.path,this._makeAPIURL(W,this._customAccessToken||I)},ne.prototype.normalizeSourceURL=function(M,I){if(!se(M))return M;var W=de(M);return W.path="/v4/"+W.authority+".json",W.params.push("secure"),this._makeAPIURL(W,this._customAccessToken||I)},ne.prototype.normalizeSpriteURL=function(M,I,W,oe){var ge=de(M);return se(M)?(ge.path="/styles/v1"+ge.path+"/sprite"+I+W,this._makeAPIURL(ge,this._customAccessToken||oe)):(ge.path+=""+I+W,be(ge))},ne.prototype.normalizeTileURL=function(M,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!se(M))return M;var W=de(M);W.path=W.path.replace(/(\.(png|jpg)\d*)(?=$)/,(B.devicePixelRatio>=2||512===I?"@2x":"")+(ee.supported?".webp":"$1")),W.path=W.path.replace(/^.+\/v4\//,"/"),W.path="/v4"+W.path;var Te=this._customAccessToken||function(Oe){for(var Ve=0,tt=Oe;Ve<tt.length;Ve+=1){var pt=tt[Ve].match(/^access_token=(.*)$/);if(pt)return pt[1]}return null}(W.params)||H.ACCESS_TOKEN;return H.REQUIRE_ACCESS_TOKEN&&Te&&this._skuToken&&W.params.push("sku="+this._skuToken),this._makeAPIURL(W,Te)},ne.prototype.canonicalizeTileURL=function(M,I){var W=de(M);if(!W.path.match(/(^\/v4\/)/)||!W.path.match(/\.[\w]+$/))return M;var oe="mapbox://tiles/";oe+=W.path.replace("/v4/","");var ge=W.params;return I&&(ge=ge.filter(function(Te){return!Te.match(/^access_token=/)})),ge.length&&(oe+="?"+ge.join("&")),oe},ne.prototype.canonicalizeTileset=function(M,I){for(var W=!!I&&se(I),oe=[],ge=0,Te=M.tiles||[];ge<Te.length;ge+=1){var Oe=Te[ge];ue(Oe)?oe.push(this.canonicalizeTileURL(Oe,W)):oe.push(Oe)}return oe},ne.prototype._makeAPIURL=function(M,I){var W="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",oe=de(H.API_URL);if(M.protocol=oe.protocol,M.authority=oe.authority,"/"!==oe.path&&(M.path=""+oe.path+M.path),!H.REQUIRE_ACCESS_TOKEN)return be(M);if(!(I=I||H.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+W);if("s"===I[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+W);return M.params=M.params.filter(function(ge){return-1===ge.indexOf("access_token")}),M.params.push("access_token="+I),be(M)};var ie=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ue(M){return ie.test(M)}var le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function de(M){var I=M.match(le);if(!I)throw new Error("Unable to parse URL object");return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}function be(M){var I=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+I}function _e(M){if(!M)return null;var W=M.split(".");if(!W||3!==W.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(W[1]).split("").map(function(oe){return"%"+("00"+oe.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var xe=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};xe.prototype.getStorageKey=function(M){var oe,W=_e(H.ACCESS_TOKEN);return oe=W&&W.u?self.btoa(encodeURIComponent(W.u).replace(/%([0-9A-F]{2})/g,function(ge,Te){return String.fromCharCode(Number("0x"+Te))})):H.ACCESS_TOKEN||"",M?"mapbox.eventData."+M+":"+oe:"mapbox.eventData:"+oe},xe.prototype.fetchEventData=function(){var M=N("localStorage"),I=this.getStorageKey(),W=this.getStorageKey("uuid");if(M)try{var oe=self.localStorage.getItem(I);oe&&(this.eventData=JSON.parse(oe));var ge=self.localStorage.getItem(W);ge&&(this.anonId=ge)}catch{A("Unable to read from LocalStorage")}},xe.prototype.saveEventData=function(){var M=N("localStorage"),I=this.getStorageKey(),W=this.getStorageKey("uuid");if(M)try{self.localStorage.setItem(W,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(I,JSON.stringify(this.eventData))}catch{A("Unable to write to LocalStorage")}},xe.prototype.processRequests=function(M){},xe.prototype.postEvent=function(M,I,W,oe){var ge=this;if(H.EVENTS_URL){var Te=de(H.EVENTS_URL);Te.params.push("access_token="+(oe||H.ACCESS_TOKEN||""));var Oe={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:te,userId:this.anonId},Ve=I?l(Oe,I):Oe,tt={url:be(Te),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ve])};this.pendingRequest=Gt(tt,function(pt){ge.pendingRequest=null,W(pt),ge.saveEventData(),ge.processRequests(oe)})}},xe.prototype.queueRequest=function(M,I){this.queue.push(M),this.processRequests(I)};var Ee,he,me=function(M){function I(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.postMapLoadEvent=function(W,oe,ge,Te){this.skuToken=ge,(H.EVENTS_URL&&Te||H.ACCESS_TOKEN&&Array.isArray(W)&&W.some(function(Oe){return se(Oe)||ue(Oe)}))&&this.queueRequest({id:oe,timestamp:Date.now()},Te)},I.prototype.processRequests=function(W){var oe=this;if(!this.pendingRequest&&0!==this.queue.length){var ge=this.queue.shift(),Te=ge.id,Oe=ge.timestamp;Te&&this.success[Te]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=u()),this.postEvent(Oe,{skuToken:this.skuToken},function(Ve){Ve||Te&&(oe.success[Te]=!0)},W))}},I}(xe),Se=new(function(M){function I(W){M.call(this,"appUserTurnstile"),this._customAccessToken=W}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.postTurnstileEvent=function(W,oe){H.EVENTS_URL&&H.ACCESS_TOKEN&&Array.isArray(W)&&W.some(function(ge){return se(ge)||ue(ge)})&&this.queueRequest(Date.now(),oe)},I.prototype.processRequests=function(W){var oe=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var ge=_e(H.ACCESS_TOKEN),Te=ge?ge.u:H.ACCESS_TOKEN,Oe=Te!==this.eventData.tokenU;x(this.anonId)||(this.anonId=u(),Oe=!0);var Ve=this.queue.shift();if(this.eventData.lastSuccess){var tt=new Date(this.eventData.lastSuccess),pt=new Date(Ve),bt=(Ve-this.eventData.lastSuccess)/864e5;Oe=Oe||bt>=1||bt<-1||tt.getDate()!==pt.getDate()}else Oe=!0;if(!Oe)return this.processRequests();this.postEvent(Ve,{"enabled.telemetry":!1},function(Ht){Ht||(oe.eventData.lastSuccess=Ve,oe.eventData.tokenU=Te)},W)}},I}(xe)),Me=Se.postTurnstileEvent.bind(Se),Ie=new me,Fe=Ie.postMapLoadEvent.bind(Ie),Ne=500,De=50;function $e(){self.caches&&!Ee&&(Ee=self.caches.open("mapbox-tiles"))}function ze(M){var I=M.indexOf("?");return I<0?M:M.slice(0,I)}var je,rt=1/0;function ut(){return null==je&&(je=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),je}var gt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(gt);var At=function(M){function I(W,oe,ge){401===oe&&ue(ge)&&(W+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,W),this.status=oe,this.url=ge,this.name=this.constructor.name,this.message=W}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},I}(Error),_t=S()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function it(M,I){var W,oe=new self.AbortController,ge=new self.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:_t(),signal:oe.signal}),Te=!1,Oe=!1,Ve=(W=ge.url).indexOf("sku=")>0&&ue(W);"json"===M.type&&ge.headers.set("Accept","application/json");var tt=function(bt,Ht,tr){if(!Oe){if(bt&&"SecurityError"!==bt.message&&A(bt),Ht&&tr)return pt(Ht);var Jt=Date.now();self.fetch(ge).then(function(mr){if(mr.ok){var Pr=Ve?mr.clone():null;return pt(mr,Pr,Jt)}return I(new At(mr.statusText,mr.status,M.url))}).catch(function(mr){20!==mr.code&&I(new Error(mr.message))})}},pt=function(bt,Ht,tr){("arrayBuffer"===M.type?bt.arrayBuffer():"json"===M.type?bt.json():bt.text()).then(function(Jt){Oe||(Ht&&tr&&function Re(M,I,W){if($e(),Ee){var oe={status:I.status,statusText:I.statusText,headers:new self.Headers};I.headers.forEach(function(Te,Oe){return oe.headers.set(Oe,Te)});var ge=E(I.headers.get("Cache-Control")||"");ge["no-store"]||(ge["max-age"]&&oe.headers.set("Expires",new Date(W+1e3*ge["max-age"]).toUTCString()),new Date(oe.headers.get("Expires")).getTime()-W<42e4||function(Te,Oe){if(void 0===he)try{new Response(new ReadableStream),he=!0}catch{he=!1}he?Oe(Te.body):Te.blob().then(Oe)}(I,function(Te){var Oe=new self.Response(Te,oe);$e(),Ee&&Ee.then(function(Ve){return Ve.put(ze(M.url),Oe)}).catch(function(Ve){return A(Ve.message)})}))}}(ge,Ht,tr),Te=!0,I(null,Jt,bt.headers.get("Cache-Control"),bt.headers.get("Expires")))}).catch(function(Jt){Oe||I(new Error(Jt.message))})};return Ve?function Ue(M,I){if($e(),!Ee)return I(null);var W=ze(M.url);Ee.then(function(oe){oe.match(W).then(function(ge){var Te=function(Oe){if(!Oe)return!1;var Ve=new Date(Oe.headers.get("Expires")||0),tt=E(Oe.headers.get("Cache-Control")||"");return Ve>Date.now()&&!tt["no-cache"]}(ge);oe.delete(W),Te&&oe.put(W,ge.clone()),I(null,ge,Te)}).catch(I)}).catch(I)}(ge,tt):tt(null,null),{cancel:function(){Oe=!0,Te||oe.abort()}}}var Kt,cr,et=function(M,I){if(!(/^file:/.test(W=M.url)||/^file:/.test(_t())&&!/^\w+:/.test(W))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return it(M,I);if(S()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,I,void 0,!0)}var W;return function(oe,ge){var Te=new self.XMLHttpRequest;for(var Oe in Te.open(oe.method||"GET",oe.url,!0),"arrayBuffer"===oe.type&&(Te.responseType="arraybuffer"),oe.headers)Te.setRequestHeader(Oe,oe.headers[Oe]);return"json"===oe.type&&(Te.responseType="text",Te.setRequestHeader("Accept","application/json")),Te.withCredentials="include"===oe.credentials,Te.onerror=function(){ge(new Error(Te.statusText))},Te.onload=function(){if((Te.status>=200&&Te.status<300||0===Te.status)&&null!==Te.response){var Ve=Te.response;if("json"===oe.type)try{Ve=JSON.parse(Te.response)}catch(tt){return ge(tt)}ge(null,Ve,Te.getResponseHeader("Cache-Control"),Te.getResponseHeader("Expires"))}else ge(new At(Te.statusText,Te.status,oe.url))},Te.send(oe.body),{cancel:function(){return Te.abort()}}}(M,I)},wt=function(M,I){return et(l(M,{type:"arrayBuffer"}),I)},Gt=function(M,I){return et(l(M,{method:"POST"}),I)};Kt=[],cr=0;var ar=function(M,I){if(ee.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),cr>=H.MAX_PARALLEL_IMAGE_REQUESTS){var W={requestParameters:M,callback:I,cancelled:!1,cancel:function(){this.cancelled=!0}};return Kt.push(W),W}cr++;var oe=!1,ge=function(){if(!oe)for(oe=!0,cr--;Kt.length&&cr<H.MAX_PARALLEL_IMAGE_REQUESTS;){var Oe=Kt.shift();Oe.cancelled||(Oe.cancel=ar(Oe.requestParameters,Oe.callback).cancel)}},Te=wt(M,function(Oe,Ve,tt,pt){var Ht,tr;ge(),Oe?I(Oe):Ve&&(ut()?(Ht=I,tr=new self.Blob([new Uint8Array(Ve)],{type:"image/png"}),self.createImageBitmap(tr).then(function(Jt){Ht(null,Jt)}).catch(function(Jt){Ht(new Error("Could not load image because of "+Jt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(bt,Ht,tr,Jt){var mr=new self.Image,Pr=self.URL;mr.onload=function(){Ht(null,mr),Pr.revokeObjectURL(mr.src)},mr.onerror=function(){return Ht(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Gr=new self.Blob([new Uint8Array(bt)],{type:"image/png"});mr.cacheControl=tr,mr.expires=Jt,mr.src=bt.byteLength?Pr.createObjectURL(Gr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ve,I,tt,pt))});return{cancel:function(){Te.cancel(),ge()}}};function hr(M,I,W){W[M]&&-1!==W[M].indexOf(I)||(W[M]=W[M]||[],W[M].push(I))}function Xt(M,I,W){if(W&&W[M]){var oe=W[M].indexOf(I);-1!==oe&&W[M].splice(oe,1)}}var He=function(M,I){void 0===I&&(I={}),l(this,I),this.type=M},Je=function(M){function I(W,oe){void 0===oe&&(oe={}),M.call(this,"error",l({error:W},oe))}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}(He),pe=function(){};pe.prototype.on=function(M,I){return this._listeners=this._listeners||{},hr(M,I,this._listeners),this},pe.prototype.off=function(M,I){return Xt(M,I,this._listeners),Xt(M,I,this._oneTimeListeners),this},pe.prototype.once=function(M,I){return this._oneTimeListeners=this._oneTimeListeners||{},hr(M,I,this._oneTimeListeners),this},pe.prototype.fire=function(M,I){"string"==typeof M&&(M=new He(M,I||{}));var W=M.type;if(this.listens(W)){M.target=this;for(var oe=0,ge=this._listeners&&this._listeners[W]?this._listeners[W].slice():[];oe<ge.length;oe+=1)ge[oe].call(this,M);for(var Te=0,Oe=this._oneTimeListeners&&this._oneTimeListeners[W]?this._oneTimeListeners[W].slice():[];Te<Oe.length;Te+=1){var Ve=Oe[Te];Xt(W,Ve,this._oneTimeListeners),Ve.call(this,M)}var tt=this._eventedParent;tt&&(l(M,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),tt.fire(M))}else M instanceof Je&&console.error(M.error);return this},pe.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},pe.prototype.setEventedParent=function(M,I){return this._eventedParent=M,this._eventedParentData=I,this};var we={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Be=function(M,I,W,oe){this.message=(M?M+": ":"")+W,oe&&(this.identifier=oe),null!=I&&I.__line__&&(this.line=I.__line__)};function We(M){var W=M.value;return W?[new Be(M.key,W,"constants have been deprecated as of v8")]:[]}function Ke(M){for(var I=[],W=arguments.length-1;W-- >0;)I[W]=arguments[W+1];for(var oe=0,ge=I;oe<ge.length;oe+=1){var Te=ge[oe];for(var Oe in Te)M[Oe]=Te[Oe]}return M}function Ye(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function ft(M){if(Array.isArray(M))return M.map(ft);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var I={};for(var W in M)I[W]=ft(M[W]);return I}return Ye(M)}var ct=function(M){function I(W,oe){M.call(this,oe),this.message=oe,this.key=W}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}(Error),St=function(M,I){void 0===I&&(I=[]),this.parent=M,this.bindings={};for(var W=0,oe=I;W<oe.length;W+=1){var ge=oe[W];this.bindings[ge[0]]=ge[1]}};St.prototype.concat=function(M){return new St(this,M)},St.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},St.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var Ft={kind:"null"},at={kind:"number"},mt={kind:"string"},qt={kind:"boolean"},Et={kind:"color"},Dt={kind:"object"},Le={kind:"value"},Xe={kind:"collator"},ot={kind:"formatted"},dt={kind:"resolvedImage"};function Lt(M,I){return{kind:"array",itemType:M,N:I}}function Ut(M){if("array"===M.kind){var I=Ut(M.itemType);return"number"==typeof M.N?"array<"+I+", "+M.N+">":"value"===M.itemType.kind?"array":"array<"+I+">"}return M.kind}var $t=[Ft,at,mt,qt,Et,ot,Dt,Lt(Le),dt];function Wt(M,I){if("error"===I.kind)return null;if("array"===M.kind){if("array"===I.kind&&(0===I.N&&"value"===I.itemType.kind||!Wt(M.itemType,I.itemType))&&("number"!=typeof M.N||M.N===I.N))return null}else{if(M.kind===I.kind)return null;if("value"===M.kind)for(var W=0,oe=$t;W<oe.length;W+=1)if(!Wt(oe[W],I))return null}return"Expected "+Ut(M)+" but found "+Ut(I)+" instead."}function wr(M,I){return I.some(function(W){return W.kind===M.kind})}function Rr(M,I){return I.some(function(W){return"null"===W?null===M:"array"===W?Array.isArray(M):"object"===W?M&&!Array.isArray(M)&&"object"==typeof M:W===typeof M})}var br=n(function(M,I){var W={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function oe(tt){return(tt=Math.round(tt))<0?0:tt>255?255:tt}function Te(tt){return oe("%"===tt[tt.length-1]?parseFloat(tt)/100*255:parseInt(tt))}function Oe(tt){return function ge(tt){return tt<0?0:tt>1?1:tt}("%"===tt[tt.length-1]?parseFloat(tt)/100:parseFloat(tt))}function Ve(tt,pt,bt){return bt<0?bt+=1:bt>1&&(bt-=1),6*bt<1?tt+(pt-tt)*bt*6:2*bt<1?pt:3*bt<2?tt+(pt-tt)*(2/3-bt)*6:tt}try{I.parseCSSColor=function(tt){var pt,bt=tt.replace(/ /g,"").toLowerCase();if(bt in W)return W[bt].slice();if("#"===bt[0])return 4===bt.length?(pt=parseInt(bt.substr(1),16))>=0&&pt<=4095?[(3840&pt)>>4|(3840&pt)>>8,240&pt|(240&pt)>>4,15&pt|(15&pt)<<4,1]:null:7===bt.length&&(pt=parseInt(bt.substr(1),16))>=0&&pt<=16777215?[(16711680&pt)>>16,(65280&pt)>>8,255&pt,1]:null;var Ht=bt.indexOf("("),tr=bt.indexOf(")");if(-1!==Ht&&tr+1===bt.length){var Jt=bt.substr(0,Ht),mr=bt.substr(Ht+1,tr-(Ht+1)).split(","),Pr=1;switch(Jt){case"rgba":if(4!==mr.length)return null;Pr=Oe(mr.pop());case"rgb":return 3!==mr.length?null:[Te(mr[0]),Te(mr[1]),Te(mr[2]),Pr];case"hsla":if(4!==mr.length)return null;Pr=Oe(mr.pop());case"hsl":if(3!==mr.length)return null;var Gr=(parseFloat(mr[0])%360+360)%360/360,qr=Oe(mr[1]),$r=Oe(mr[2]),tn=$r<=.5?$r*(qr+1):$r+qr-$r*qr,cn=2*$r-tn;return[oe(255*Ve(cn,tn,Gr+1/3)),oe(255*Ve(cn,tn,Gr)),oe(255*Ve(cn,tn,Gr-1/3)),Pr];default:return null}}return null}}catch{}}).parseCSSColor,nr=function(M,I,W,oe){void 0===oe&&(oe=1),this.r=M,this.g=I,this.b=W,this.a=oe};nr.parse=function(M){if(M){if(M instanceof nr)return M;if("string"==typeof M){var I=br(M);if(I)return new nr(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3])}}},nr.prototype.toString=function(){var M=this.toArray(),W=M[1],oe=M[2],ge=M[3];return"rgba("+Math.round(M[0])+","+Math.round(W)+","+Math.round(oe)+","+ge+")"},nr.prototype.toArray=function(){var oe=this.a;return 0===oe?[0,0,0,0]:[255*this.r/oe,255*this.g/oe,255*this.b/oe,oe]},nr.black=new nr(0,0,0,1),nr.white=new nr(1,1,1,1),nr.transparent=new nr(0,0,0,0),nr.red=new nr(1,0,0,1);var lr=function(M,I,W){this.sensitivity=M?I?"variant":"case":I?"accent":"base",this.locale=W,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};lr.prototype.compare=function(M,I){return this.collator.compare(M,I)},lr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var sr=function(M,I,W,oe,ge){this.text=M,this.image=I,this.scale=W,this.fontStack=oe,this.textColor=ge},_r=function(M){this.sections=M};_r.fromString=function(M){return new _r([new sr(M,null,null,null,null)])},_r.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(M){return 0!==M.text.length||M.image&&0!==M.image.name.length})},_r.factory=function(M){return M instanceof _r?M:_r.fromString(M)},_r.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(M){return M.text}).join("")},_r.prototype.serialize=function(){for(var M=["format"],I=0,W=this.sections;I<W.length;I+=1){var oe=W[I];if(oe.image)M.push(["image",oe.image.name]);else{M.push(oe.text);var ge={};oe.fontStack&&(ge["text-font"]=["literal",oe.fontStack.split(",")]),oe.scale&&(ge["font-scale"]=oe.scale),oe.textColor&&(ge["text-color"]=["rgba"].concat(oe.textColor.toArray())),M.push(ge)}}return M};var Ar=function(M){this.name=M.name,this.available=M.available};function zt(M,I,W,oe){return"number"==typeof M&&M>=0&&M<=255&&"number"==typeof I&&I>=0&&I<=255&&"number"==typeof W&&W>=0&&W<=255?void 0===oe||"number"==typeof oe&&oe>=0&&oe<=1?null:"Invalid rgba value ["+[M,I,W,oe].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof oe?[M,I,W,oe]:[M,I,W]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ur(M){if(null===M||"string"==typeof M||"boolean"==typeof M||"number"==typeof M||M instanceof nr||M instanceof lr||M instanceof _r||M instanceof Ar)return!0;if(Array.isArray(M)){for(var I=0,W=M;I<W.length;I+=1)if(!ur(W[I]))return!1;return!0}if("object"==typeof M){for(var oe in M)if(!ur(M[oe]))return!1;return!0}return!1}function Tt(M){if(null===M)return Ft;if("string"==typeof M)return mt;if("boolean"==typeof M)return qt;if("number"==typeof M)return at;if(M instanceof nr)return Et;if(M instanceof lr)return Xe;if(M instanceof _r)return ot;if(M instanceof Ar)return dt;if(Array.isArray(M)){for(var I,W=M.length,oe=0,ge=M;oe<ge.length;oe+=1){var Te=Tt(ge[oe]);if(I){if(I===Te)continue;I=Le;break}I=Te}return Lt(I||Le,W)}return Dt}function Qt(M){var I=typeof M;return null===M?"":"string"===I||"number"===I||"boolean"===I?String(M):M instanceof nr||M instanceof _r||M instanceof Ar?M.toString():JSON.stringify(M)}Ar.prototype.toString=function(){return this.name},Ar.fromString=function(M){return M?new Ar({name:M,available:!1}):null},Ar.prototype.serialize=function(){return["image",this.name]};var Er=function(M,I){this.type=M,this.value=I};Er.parse=function(M,I){if(2!==M.length)return I.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!ur(M[1]))return I.error("invalid value");var W=M[1],oe=Tt(W),ge=I.expectedType;return"array"!==oe.kind||0!==oe.N||!ge||"array"!==ge.kind||"number"==typeof ge.N&&0!==ge.N||(oe=ge),new Er(oe,W)},Er.prototype.evaluate=function(){return this.value},Er.prototype.eachChild=function(){},Er.prototype.outputDefined=function(){return!0},Er.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof nr?["rgba"].concat(this.value.toArray()):this.value instanceof _r?this.value.serialize():this.value};var zr=function(M){this.name="ExpressionEvaluationError",this.message=M};zr.prototype.toJSON=function(){return this.message};var an={string:mt,number:at,boolean:qt,object:Dt},Kr=function(M,I){this.type=M,this.args=I};Kr.parse=function(M,I){if(M.length<2)return I.error("Expected at least one argument.");var W,oe=1,ge=M[0];if("array"===ge){var Te,Oe;if(M.length>2){var Ve=M[1];if("string"!=typeof Ve||!(Ve in an)||"object"===Ve)return I.error('The item type argument of "array" must be one of string, number, boolean',1);Te=an[Ve],oe++}else Te=Le;if(M.length>3){if(null!==M[2]&&("number"!=typeof M[2]||M[2]<0||M[2]!==Math.floor(M[2])))return I.error('The length argument to "array" must be a positive integer literal',2);Oe=M[2],oe++}W=Lt(Te,Oe)}else W=an[ge];for(var tt=[];oe<M.length;oe++){var pt=I.parse(M[oe],oe,Le);if(!pt)return null;tt.push(pt)}return new Kr(W,tt)},Kr.prototype.evaluate=function(M){for(var I=0;I<this.args.length;I++){var W=this.args[I].evaluate(M);if(!Wt(this.type,Tt(W)))return W;if(I===this.args.length-1)throw new zr("Expected value to be of type "+Ut(this.type)+", but found "+Ut(Tt(W))+" instead.")}return null},Kr.prototype.eachChild=function(M){this.args.forEach(M)},Kr.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Kr.prototype.serialize=function(){var M=this.type,I=[M.kind];if("array"===M.kind){var W=M.itemType;if("string"===W.kind||"number"===W.kind||"boolean"===W.kind){I.push(W.kind);var oe=M.N;("number"==typeof oe||this.args.length>1)&&I.push(oe)}}return I.concat(this.args.map(function(ge){return ge.serialize()}))};var sn=function(M){this.type=ot,this.sections=M};sn.parse=function(M,I){if(M.length<2)return I.error("Expected at least one argument.");var W=M[1];if(!Array.isArray(W)&&"object"==typeof W)return I.error("First argument must be an image or text section.");for(var oe=[],ge=!1,Te=1;Te<=M.length-1;++Te){var Oe=M[Te];if(ge&&"object"==typeof Oe&&!Array.isArray(Oe)){ge=!1;var Ve=null;if(Oe["font-scale"]&&!(Ve=I.parse(Oe["font-scale"],1,at)))return null;var tt=null;if(Oe["text-font"]&&!(tt=I.parse(Oe["text-font"],1,Lt(mt))))return null;var pt=null;if(Oe["text-color"]&&!(pt=I.parse(Oe["text-color"],1,Et)))return null;var bt=oe[oe.length-1];bt.scale=Ve,bt.font=tt,bt.textColor=pt}else{var Ht=I.parse(M[Te],1,Le);if(!Ht)return null;var tr=Ht.type.kind;if("string"!==tr&&"value"!==tr&&"null"!==tr&&"resolvedImage"!==tr)return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ge=!0,oe.push({content:Ht,scale:null,font:null,textColor:null})}}return new sn(oe)},sn.prototype.evaluate=function(M){return new _r(this.sections.map(function(I){var W=I.content.evaluate(M);return Tt(W)===dt?new sr("",W,null,null,null):new sr(Qt(W),null,I.scale?I.scale.evaluate(M):null,I.font?I.font.evaluate(M).join(","):null,I.textColor?I.textColor.evaluate(M):null)}))},sn.prototype.eachChild=function(M){for(var I=0,W=this.sections;I<W.length;I+=1){var oe=W[I];M(oe.content),oe.scale&&M(oe.scale),oe.font&&M(oe.font),oe.textColor&&M(oe.textColor)}},sn.prototype.outputDefined=function(){return!1},sn.prototype.serialize=function(){for(var M=["format"],I=0,W=this.sections;I<W.length;I+=1){var oe=W[I];M.push(oe.content.serialize());var ge={};oe.scale&&(ge["font-scale"]=oe.scale.serialize()),oe.font&&(ge["text-font"]=oe.font.serialize()),oe.textColor&&(ge["text-color"]=oe.textColor.serialize()),M.push(ge)}return M};var gn=function(M){this.type=dt,this.input=M};gn.parse=function(M,I){if(2!==M.length)return I.error("Expected two arguments.");var W=I.parse(M[1],1,mt);return W?new gn(W):I.error("No image name provided.")},gn.prototype.evaluate=function(M){var I=this.input.evaluate(M),W=Ar.fromString(I);return W&&M.availableImages&&(W.available=M.availableImages.indexOf(I)>-1),W},gn.prototype.eachChild=function(M){M(this.input)},gn.prototype.outputDefined=function(){return!1},gn.prototype.serialize=function(){return["image",this.input.serialize()]};var zn={"to-boolean":qt,"to-color":Et,"to-number":at,"to-string":mt},Vr=function(M,I){this.type=M,this.args=I};Vr.parse=function(M,I){if(M.length<2)return I.error("Expected at least one argument.");var W=M[0];if(("to-boolean"===W||"to-string"===W)&&2!==M.length)return I.error("Expected one argument.");for(var oe=zn[W],ge=[],Te=1;Te<M.length;Te++){var Oe=I.parse(M[Te],Te,Le);if(!Oe)return null;ge.push(Oe)}return new Vr(oe,ge)},Vr.prototype.evaluate=function(M){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(M));if("color"===this.type.kind){for(var I,W,oe=0,ge=this.args;oe<ge.length;oe+=1){if(W=null,(I=ge[oe].evaluate(M))instanceof nr)return I;if("string"==typeof I){var Te=M.parseColor(I);if(Te)return Te}else if(Array.isArray(I)&&!(W=I.length<3||I.length>4?"Invalid rbga value "+JSON.stringify(I)+": expected an array containing either three or four numeric values.":zt(I[0],I[1],I[2],I[3])))return new nr(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new zr(W||"Could not parse color from value '"+("string"==typeof I?I:String(JSON.stringify(I)))+"'")}if("number"===this.type.kind){for(var Oe=null,Ve=0,tt=this.args;Ve<tt.length;Ve+=1){if(null===(Oe=tt[Ve].evaluate(M)))return 0;var pt=Number(Oe);if(!isNaN(pt))return pt}throw new zr("Could not convert "+JSON.stringify(Oe)+" to number.")}return"formatted"===this.type.kind?_r.fromString(Qt(this.args[0].evaluate(M))):"resolvedImage"===this.type.kind?Ar.fromString(Qt(this.args[0].evaluate(M))):Qt(this.args[0].evaluate(M))},Vr.prototype.eachChild=function(M){this.args.forEach(M)},Vr.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Vr.prototype.serialize=function(){if("formatted"===this.type.kind)return new sn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new gn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(I){M.push(I.serialize())}),M};var _n=["Unknown","Point","LineString","Polygon"],Qr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Qr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Qr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?_n[this.feature.type]:this.feature.type:null},Qr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Qr.prototype.canonicalID=function(){return this.canonical},Qr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Qr.prototype.parseColor=function(M){var I=this._parseColorCache[M];return I||(I=this._parseColorCache[M]=nr.parse(M)),I};var Jr=function(M,I,W,oe){this.name=M,this.type=I,this._evaluate=W,this.args=oe};Jr.prototype.evaluate=function(M){return this._evaluate(M,this.args)},Jr.prototype.eachChild=function(M){this.args.forEach(M)},Jr.prototype.outputDefined=function(){return!1},Jr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},Jr.parse=function(M,I){var W,oe=M[0],ge=Jr.definitions[oe];if(!ge)return I.error('Unknown expression "'+oe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Te=Array.isArray(ge)?ge[0]:ge.type,Oe=Array.isArray(ge)?[[ge[1],ge[2]]]:ge.overloads,Ve=Oe.filter(function(mi){var ci=mi[0];return!Array.isArray(ci)||ci.length===M.length-1}),tt=null,pt=0,bt=Ve;pt<bt.length;pt+=1){var Ht=bt[pt],tr=Ht[0],Jt=Ht[1];tt=new dn(I.registry,I.path,null,I.scope);for(var mr=[],Pr=!1,Gr=1;Gr<M.length;Gr++){var qr=M[Gr],$r=Array.isArray(tr)?tr[Gr-1]:tr.type,tn=tt.parse(qr,1+mr.length,$r);if(!tn){Pr=!0;break}mr.push(tn)}if(!Pr)if(Array.isArray(tr)&&tr.length!==mr.length)tt.error("Expected "+tr.length+" arguments, but found "+mr.length+" instead.");else{for(var cn=0;cn<mr.length;cn++){var kn=Array.isArray(tr)?tr[cn]:tr.type,Cn=mr[cn];tt.concat(cn+1).checkSubtype(kn,Cn.type)}if(0===tt.errors.length)return new Jr(oe,Te,Jt,mr)}}if(1===Ve.length)(W=I.errors).push.apply(W,tt.errors);else{for(var Kn=(Ve.length?Ve:Oe).map(function(mi){var ci;return ci=mi[0],Array.isArray(ci)?"("+ci.map(Ut).join(", ")+")":"("+Ut(ci.type)+"...)"}).join(" | "),Zn=[],ri=1;ri<M.length;ri++){var gi=I.parse(M[ri],1+Zn.length);if(!gi)return null;Zn.push(Ut(gi.type))}I.error("Expected arguments of type "+Kn+", but found ("+Zn.join(", ")+") instead.")}return null},Jr.register=function(M,I){for(var W in Jr.definitions=I,I)M[W]=Jr};var Nn=function(M,I,W){this.type=Xe,this.locale=W,this.caseSensitive=M,this.diacriticSensitive=I};function Hn(M,I){M[0]=Math.min(M[0],I[0]),M[1]=Math.min(M[1],I[1]),M[2]=Math.max(M[2],I[0]),M[3]=Math.max(M[3],I[1])}function Mn(M,I){return!(M[0]<=I[0]||M[2]>=I[2]||M[1]<=I[1]||M[3]>=I[3])}function Un(M,I){var oe=(180+M[0])/360,ge=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M[1]*Math.PI/360)))/360,Te=Math.pow(2,I.z);return[Math.round(oe*Te*8192),Math.round(ge*Te*8192)]}function di(M,I,W){return I[1]>M[1]!=W[1]>M[1]&&M[0]<(W[0]-I[0])*(M[1]-I[1])/(W[1]-I[1])+I[0]}function rr(M,I){for(var W,oe,ge,Te,Oe,Ve,tt,pt=!1,bt=0,Ht=I.length;bt<Ht;bt++)for(var tr=I[bt],Jt=0,mr=tr.length;Jt<mr-1;Jt++){if(void 0,void 0,void 0,void 0,(Te=(W=M)[0]-(oe=tr[Jt])[0])*(tt=W[1]-(ge=tr[Jt+1])[1])-(Ve=W[0]-ge[0])*(Oe=W[1]-oe[1])==0&&Te*Ve<=0&&Oe*tt<=0)return!1;di(M,tr[Jt],tr[Jt+1])&&(pt=!pt)}return pt}function Sr(M,I){for(var W=0;W<I.length;W++)if(rr(M,I[W]))return!0;return!1}function Rt(M,I,W,oe){var tt=oe[0]-W[0],pt=oe[1]-W[1],bt=(M[0]-W[0])*pt-tt*(M[1]-W[1]),Ht=(I[0]-W[0])*pt-tt*(I[1]-W[1]);return bt>0&&Ht<0||bt<0&&Ht>0}function gr(M,I,W){for(var oe=0,ge=W;oe<ge.length;oe+=1)for(var Te=ge[oe],Oe=0;Oe<Te.length-1;++Oe)if(void 0,void 0,(Ht=[(bt=Te[Oe+1])[0]-(pt=Te[Oe])[0],bt[1]-pt[1]])[0]*(tr=[(tt=I)[0]-(Ve=M)[0],tt[1]-Ve[1]])[1]-Ht[1]*tr[0]!=0&&Rt(Ve,tt,pt,bt)&&Rt(pt,bt,Ve,tt))return!0;var Ve,tt,pt,bt,Ht,tr;return!1}function xr(M,I){for(var W=0;W<M.length;++W)if(!rr(M[W],I))return!1;for(var oe=0;oe<M.length-1;++oe)if(gr(M[oe],M[oe+1],I))return!1;return!0}function Zr(M,I){for(var W=0;W<I.length;W++)if(xr(M,I[W]))return!0;return!1}function Ur(M,I,W){for(var oe=[],ge=0;ge<M.length;ge++){for(var Te=[],Oe=0;Oe<M[ge].length;Oe++){var Ve=Un(M[ge][Oe],W);Hn(I,Ve),Te.push(Ve)}oe.push(Te)}return oe}function Yr(M,I,W){for(var oe=[],ge=0;ge<M.length;ge++){var Te=Ur(M[ge],I,W);oe.push(Te)}return oe}function Br(M,I,W,oe){if(M[0]<W[0]||M[0]>W[2]){var ge=.5*oe,Te=M[0]-W[0]>ge?-oe:W[0]-M[0]>ge?oe:0;0===Te&&(Te=M[0]-W[2]>ge?-oe:W[2]-M[0]>ge?oe:0),M[0]+=Te}Hn(I,M)}function Cr(M,I,W,oe){for(var ge=8192*Math.pow(2,oe.z),Te=[8192*oe.x,8192*oe.y],Oe=[],Ve=0,tt=M;Ve<tt.length;Ve+=1)for(var pt=0,bt=tt[Ve];pt<bt.length;pt+=1){var Ht=bt[pt],tr=[Ht.x+Te[0],Ht.y+Te[1]];Br(tr,I,W,ge),Oe.push(tr)}return Oe}function Or(M,I,W,oe){for(var ge,Te=8192*Math.pow(2,oe.z),Oe=[8192*oe.x,8192*oe.y],Ve=[],tt=0,pt=M;tt<pt.length;tt+=1){for(var bt=[],Ht=0,tr=pt[tt];Ht<tr.length;Ht+=1){var Jt=tr[Ht],mr=[Jt.x+Oe[0],Jt.y+Oe[1]];Hn(I,mr),bt.push(mr)}Ve.push(bt)}if(I[2]-I[0]<=Te/2){(ge=I)[0]=ge[1]=1/0,ge[2]=ge[3]=-1/0;for(var Pr=0,Gr=Ve;Pr<Gr.length;Pr+=1)for(var qr=0,$r=Gr[Pr];qr<$r.length;qr+=1)Br($r[qr],I,W,Te)}return Ve}Nn.parse=function(M,I){if(2!==M.length)return I.error("Expected one argument.");var W=M[1];if("object"!=typeof W||Array.isArray(W))return I.error("Collator options argument must be an object.");var oe=I.parse(void 0!==W["case-sensitive"]&&W["case-sensitive"],1,qt);if(!oe)return null;var ge=I.parse(void 0!==W["diacritic-sensitive"]&&W["diacritic-sensitive"],1,qt);if(!ge)return null;var Te=null;return W.locale&&!(Te=I.parse(W.locale,1,mt))?null:new Nn(oe,ge,Te)},Nn.prototype.evaluate=function(M){return new lr(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},Nn.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},Nn.prototype.outputDefined=function(){return!1},Nn.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var Dr=function(M,I){this.type=qt,this.geojson=M,this.geometries=I};function Nr(M){if(M instanceof Jr&&("get"===M.name&&1===M.args.length||"feature-state"===M.name||"has"===M.name&&1===M.args.length||"properties"===M.name||"geometry-type"===M.name||"id"===M.name||/^filter-/.test(M.name))||M instanceof Dr)return!1;var I=!0;return M.eachChild(function(W){I&&!Nr(W)&&(I=!1)}),I}function nn(M){if(M instanceof Jr&&"feature-state"===M.name)return!1;var I=!0;return M.eachChild(function(W){I&&!nn(W)&&(I=!1)}),I}function rn(M,I){if(M instanceof Jr&&I.indexOf(M.name)>=0)return!1;var W=!0;return M.eachChild(function(oe){W&&!rn(oe,I)&&(W=!1)}),W}Dr.parse=function(M,I){if(2!==M.length)return I.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(ur(M[1])){var W=M[1];if("FeatureCollection"===W.type)for(var oe=0;oe<W.features.length;++oe){var ge=W.features[oe].geometry.type;if("Polygon"===ge||"MultiPolygon"===ge)return new Dr(W,W.features[oe].geometry)}else if("Feature"===W.type){var Te=W.geometry.type;if("Polygon"===Te||"MultiPolygon"===Te)return new Dr(W,W.geometry)}else if("Polygon"===W.type||"MultiPolygon"===W.type)return new Dr(W,W)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Dr.prototype.evaluate=function(M){if(null!=M.geometry()&&null!=M.canonicalID()){if("Point"===M.geometryType())return function(I,W){var oe=[1/0,1/0,-1/0,-1/0],ge=[1/0,1/0,-1/0,-1/0],Te=I.canonicalID();if("Polygon"===W.type){var Oe=Ur(W.coordinates,ge,Te),Ve=Cr(I.geometry(),oe,ge,Te);if(!Mn(oe,ge))return!1;for(var tt=0,pt=Ve;tt<pt.length;tt+=1)if(!rr(pt[tt],Oe))return!1}if("MultiPolygon"===W.type){var bt=Yr(W.coordinates,ge,Te),Ht=Cr(I.geometry(),oe,ge,Te);if(!Mn(oe,ge))return!1;for(var tr=0,Jt=Ht;tr<Jt.length;tr+=1)if(!Sr(Jt[tr],bt))return!1}return!0}(M,this.geometries);if("LineString"===M.geometryType())return function(I,W){var oe=[1/0,1/0,-1/0,-1/0],ge=[1/0,1/0,-1/0,-1/0],Te=I.canonicalID();if("Polygon"===W.type){var Oe=Ur(W.coordinates,ge,Te),Ve=Or(I.geometry(),oe,ge,Te);if(!Mn(oe,ge))return!1;for(var tt=0,pt=Ve;tt<pt.length;tt+=1)if(!xr(pt[tt],Oe))return!1}if("MultiPolygon"===W.type){var bt=Yr(W.coordinates,ge,Te),Ht=Or(I.geometry(),oe,ge,Te);if(!Mn(oe,ge))return!1;for(var tr=0,Jt=Ht;tr<Jt.length;tr+=1)if(!Zr(Jt[tr],bt))return!1}return!0}(M,this.geometries)}return!1},Dr.prototype.eachChild=function(){},Dr.prototype.outputDefined=function(){return!0},Dr.prototype.serialize=function(){return["within",this.geojson]};var pn=function(M,I){this.type=I.type,this.name=M,this.boundExpression=I};pn.parse=function(M,I){if(2!==M.length||"string"!=typeof M[1])return I.error("'var' expression requires exactly one string literal argument.");var W=M[1];return I.scope.has(W)?new pn(W,I.scope.get(W)):I.error('Unknown variable "'+W+'". Make sure "'+W+'" has been bound in an enclosing "let" expression before using it.',1)},pn.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},pn.prototype.eachChild=function(){},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){return["var",this.name]};var dn=function(M,I,W,oe,ge){void 0===I&&(I=[]),void 0===oe&&(oe=new St),void 0===ge&&(ge=[]),this.registry=M,this.path=I,this.key=I.map(function(Te){return"["+Te+"]"}).join(""),this.scope=oe,this.errors=ge,this.expectedType=W};function Sn(M,I){for(var W,ge=M.length-1,Te=0,Oe=ge,Ve=0;Te<=Oe;)if((W=M[Ve=Math.floor((Te+Oe)/2)])<=I){if(Ve===ge||I<M[Ve+1])return Ve;Te=Ve+1}else{if(!(W>I))throw new zr("Input is not a number.");Oe=Ve-1}return 0}dn.prototype.parse=function(M,I,W,oe,ge){return void 0===ge&&(ge={}),I?this.concat(I,W,oe)._parse(M,ge):this._parse(M,ge)},dn.prototype._parse=function(M,I){function W(pt,bt,Ht){return"assert"===Ht?new Kr(bt,[pt]):"coerce"===Ht?new Vr(bt,[pt]):pt}if(null!==M&&"string"!=typeof M&&"boolean"!=typeof M&&"number"!=typeof M||(M=["literal",M]),Array.isArray(M)){if(0===M.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var oe=M[0];if("string"!=typeof oe)return this.error("Expression name must be a string, but found "+typeof oe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var ge=this.registry[oe];if(ge){var Te=ge.parse(M,this);if(!Te)return null;if(this.expectedType){var Oe=this.expectedType,Ve=Te.type;if("string"!==Oe.kind&&"number"!==Oe.kind&&"boolean"!==Oe.kind&&"object"!==Oe.kind&&"array"!==Oe.kind||"value"!==Ve.kind)if("color"!==Oe.kind&&"formatted"!==Oe.kind&&"resolvedImage"!==Oe.kind||"value"!==Ve.kind&&"string"!==Ve.kind){if(this.checkSubtype(Oe,Ve))return null}else Te=W(Te,Oe,I.typeAnnotation||"coerce");else Te=W(Te,Oe,I.typeAnnotation||"assert")}if(!(Te instanceof Er)&&"resolvedImage"!==Te.type.kind&&function pt(bt){if(bt instanceof pn)return pt(bt.boundExpression);if(bt instanceof Jr&&"error"===bt.name||bt instanceof Nn||bt instanceof Dr)return!1;var Ht=bt instanceof Vr||bt instanceof Kr,tr=!0;return bt.eachChild(function(Jt){tr=Ht?tr&&pt(Jt):tr&&Jt instanceof Er}),!!tr&&Nr(bt)&&rn(bt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(Te)){var tt=new Qr;try{Te=new Er(Te.type,Te.evaluate(tt))}catch(pt){return this.error(pt.message),null}}return Te}return this.error('Unknown expression "'+oe+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===M?"'undefined' value invalid. Use null instead.":"object"==typeof M?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof M+" instead.")},dn.prototype.concat=function(M,I,W){var oe="number"==typeof M?this.path.concat(M):this.path,ge=W?this.scope.concat(W):this.scope;return new dn(this.registry,oe,I||null,ge,this.errors)},dn.prototype.error=function(M){for(var I=[],W=arguments.length-1;W-- >0;)I[W]=arguments[W+1];var oe=""+this.key+I.map(function(ge){return"["+ge+"]"}).join("");this.errors.push(new ct(oe,M))},dn.prototype.checkSubtype=function(M,I){var W=Wt(M,I);return W&&this.error(W),W};var En=function(M,I,W){this.type=M,this.input=I,this.labels=[],this.outputs=[];for(var oe=0,ge=W;oe<ge.length;oe+=1){var Te=ge[oe],Ve=Te[1];this.labels.push(Te[0]),this.outputs.push(Ve)}};function Ln(M,I,W){return M*(1-W)+I*W}En.parse=function(M,I){if(M.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return I.error("Expected an even number of arguments.");var W=I.parse(M[1],1,at);if(!W)return null;var oe=[],ge=null;I.expectedType&&"value"!==I.expectedType.kind&&(ge=I.expectedType);for(var Te=1;Te<M.length;Te+=2){var Oe=1===Te?-1/0:M[Te],Ve=M[Te+1],tt=Te,pt=Te+1;if("number"!=typeof Oe)return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',tt);if(oe.length&&oe[oe.length-1][0]>=Oe)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',tt);var bt=I.parse(Ve,pt,ge);if(!bt)return null;ge=ge||bt.type,oe.push([Oe,bt])}return new En(ge,W,oe)},En.prototype.evaluate=function(M){var I=this.labels,W=this.outputs;if(1===I.length)return W[0].evaluate(M);var oe=this.input.evaluate(M);if(oe<=I[0])return W[0].evaluate(M);var ge=I.length;return oe>=I[ge-1]?W[ge-1].evaluate(M):W[Sn(I,oe)].evaluate(M)},En.prototype.eachChild=function(M){M(this.input);for(var I=0,W=this.outputs;I<W.length;I+=1)M(W[I])},En.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},En.prototype.serialize=function(){for(var M=["step",this.input.serialize()],I=0;I<this.labels.length;I++)I>0&&M.push(this.labels[I]),M.push(this.outputs[I].serialize());return M};var Fn=Object.freeze({__proto__:null,number:Ln,color:function(M,I,W){return new nr(Ln(M.r,I.r,W),Ln(M.g,I.g,W),Ln(M.b,I.b,W),Ln(M.a,I.a,W))},array:function(M,I,W){return M.map(function(oe,ge){return Ln(oe,I[ge],W)})}}),qn=6/29,ni=3*qn*qn,zi=Math.PI/180,Di=180/Math.PI;function Dn(M){return M>.008856451679035631?Math.pow(M,1/3):M/ni+4/29}function si(M){return M>qn?M*M*M:ni*(M-4/29)}function ai(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,1/2.4)-.055)}function Wi(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function ka(M){var I=Wi(M.r),W=Wi(M.g),oe=Wi(M.b),ge=Dn((.4124564*I+.3575761*W+.1804375*oe)/.95047),Te=Dn((.2126729*I+.7151522*W+.072175*oe)/1);return{l:116*Te-16,a:500*(ge-Te),b:200*(Te-Dn((.0193339*I+.119192*W+.9503041*oe)/1.08883)),alpha:M.a}}function Va(M){var I=(M.l+16)/116,W=isNaN(M.a)?I:I+M.a/500,oe=isNaN(M.b)?I:I-M.b/200;return I=1*si(I),W=.95047*si(W),oe=1.08883*si(oe),new nr(ai(3.2404542*W-1.5371385*I-.4985314*oe),ai(-.969266*W+1.8760108*I+.041556*oe),ai(.0556434*W-.2040259*I+1.0572252*oe),M.alpha)}function ao(M,I,W){var oe=I-M;return M+W*(oe>180||oe<-180?oe-360*Math.round(oe/360):oe)}var Bi={forward:ka,reverse:Va,interpolate:function(M,I,W){return{l:Ln(M.l,I.l,W),a:Ln(M.a,I.a,W),b:Ln(M.b,I.b,W),alpha:Ln(M.alpha,I.alpha,W)}}},ra={forward:function(M){var I=ka(M),W=I.l,oe=I.a,ge=I.b,Te=Math.atan2(ge,oe)*Di;return{h:Te<0?Te+360:Te,c:Math.sqrt(oe*oe+ge*ge),l:W,alpha:M.a}},reverse:function(M){var I=M.h*zi,W=M.c;return Va({l:M.l,a:Math.cos(I)*W,b:Math.sin(I)*W,alpha:M.alpha})},interpolate:function(M,I,W){return{h:ao(M.h,I.h,W),c:Ln(M.c,I.c,W),l:Ln(M.l,I.l,W),alpha:Ln(M.alpha,I.alpha,W)}}},co=Object.freeze({__proto__:null,lab:Bi,hcl:ra}),Ji=function(M,I,W,oe,ge){this.type=M,this.operator=I,this.interpolation=W,this.input=oe,this.labels=[],this.outputs=[];for(var Te=0,Oe=ge;Te<Oe.length;Te+=1){var Ve=Oe[Te],pt=Ve[1];this.labels.push(Ve[0]),this.outputs.push(pt)}};function _o(M,I,W,oe){var ge=oe-W,Te=M-W;return 0===ge?0:1===I?Te/ge:(Math.pow(I,Te)-1)/(Math.pow(I,ge)-1)}Ji.interpolationFactor=function(M,I,W,oe){var ge=0;if("exponential"===M.name)ge=_o(I,M.base,W,oe);else if("linear"===M.name)ge=_o(I,1,W,oe);else if("cubic-bezier"===M.name){var Te=M.controlPoints;ge=new r(Te[0],Te[1],Te[2],Te[3]).solve(_o(I,1,W,oe))}return ge},Ji.parse=function(M,I){var W=M[0],oe=M[1],ge=M[2],Te=M.slice(3);if(!Array.isArray(oe)||0===oe.length)return I.error("Expected an interpolation type expression.",1);if("linear"===oe[0])oe={name:"linear"};else if("exponential"===oe[0]){var Oe=oe[1];if("number"!=typeof Oe)return I.error("Exponential interpolation requires a numeric base.",1,1);oe={name:"exponential",base:Oe}}else{if("cubic-bezier"!==oe[0])return I.error("Unknown interpolation type "+String(oe[0]),1,0);var Ve=oe.slice(1);if(4!==Ve.length||Ve.some(function(Gr){return"number"!=typeof Gr||Gr<0||Gr>1}))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);oe={name:"cubic-bezier",controlPoints:Ve}}if(M.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(!(ge=I.parse(ge,2,at)))return null;var tt=[],pt=null;"interpolate-hcl"===W||"interpolate-lab"===W?pt=Et:I.expectedType&&"value"!==I.expectedType.kind&&(pt=I.expectedType);for(var bt=0;bt<Te.length;bt+=2){var Ht=Te[bt],tr=Te[bt+1],Jt=bt+3,mr=bt+4;if("number"!=typeof Ht)return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Jt);if(tt.length&&tt[tt.length-1][0]>=Ht)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Jt);var Pr=I.parse(tr,mr,pt);if(!Pr)return null;pt=pt||Pr.type,tt.push([Ht,Pr])}return"number"===pt.kind||"color"===pt.kind||"array"===pt.kind&&"number"===pt.itemType.kind&&"number"==typeof pt.N?new Ji(pt,W,oe,ge,tt):I.error("Type "+Ut(pt)+" is not interpolatable.")},Ji.prototype.evaluate=function(M){var I=this.labels,W=this.outputs;if(1===I.length)return W[0].evaluate(M);var oe=this.input.evaluate(M);if(oe<=I[0])return W[0].evaluate(M);var ge=I.length;if(oe>=I[ge-1])return W[ge-1].evaluate(M);var Te=Sn(I,oe),tt=Ji.interpolationFactor(this.interpolation,oe,I[Te],I[Te+1]),pt=W[Te].evaluate(M),bt=W[Te+1].evaluate(M);return"interpolate"===this.operator?Fn[this.type.kind.toLowerCase()](pt,bt,tt):"interpolate-hcl"===this.operator?ra.reverse(ra.interpolate(ra.forward(pt),ra.forward(bt),tt)):Bi.reverse(Bi.interpolate(Bi.forward(pt),Bi.forward(bt),tt))},Ji.prototype.eachChild=function(M){M(this.input);for(var I=0,W=this.outputs;I<W.length;I+=1)M(W[I])},Ji.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Ji.prototype.serialize=function(){var M;M="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var I=[this.operator,M,this.input.serialize()],W=0;W<this.labels.length;W++)I.push(this.labels[W],this.outputs[W].serialize());return I};var uo=function(M,I){this.type=M,this.args=I};uo.parse=function(M,I){if(M.length<2)return I.error("Expectected at least one argument.");var W=null,oe=I.expectedType;oe&&"value"!==oe.kind&&(W=oe);for(var ge=[],Te=0,Oe=M.slice(1);Te<Oe.length;Te+=1){var tt=I.parse(Oe[Te],1+ge.length,W,void 0,{typeAnnotation:"omit"});if(!tt)return null;W=W||tt.type,ge.push(tt)}var pt=oe&&ge.some(function(bt){return Wt(oe,bt.type)});return new uo(pt?Le:W,ge)},uo.prototype.evaluate=function(M){for(var I,W=null,oe=0,ge=0,Te=this.args;ge<Te.length&&(oe++,(W=Te[ge].evaluate(M))&&W instanceof Ar&&!W.available&&(I||(I=W.name),W=null,oe===this.args.length&&(W=I)),null===W);ge+=1);return W},uo.prototype.eachChild=function(M){this.args.forEach(M)},uo.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},uo.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(I){M.push(I.serialize())}),M};var Ia=function(M,I){this.type=I.type,this.bindings=[].concat(M),this.result=I};Ia.prototype.evaluate=function(M){return this.result.evaluate(M)},Ia.prototype.eachChild=function(M){for(var I=0,W=this.bindings;I<W.length;I+=1)M(W[I][1]);M(this.result)},Ia.parse=function(M,I){if(M.length<4)return I.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var W=[],oe=1;oe<M.length-1;oe+=2){var ge=M[oe];if("string"!=typeof ge)return I.error("Expected string, but found "+typeof ge+" instead.",oe);if(/[^a-zA-Z0-9_]/.test(ge))return I.error("Variable names must contain only alphanumeric characters or '_'.",oe);var Te=I.parse(M[oe+1],oe+1);if(!Te)return null;W.push([ge,Te])}var Oe=I.parse(M[M.length-1],M.length-1,I.expectedType,W);return Oe?new Ia(W,Oe):null},Ia.prototype.outputDefined=function(){return this.result.outputDefined()},Ia.prototype.serialize=function(){for(var M=["let"],I=0,W=this.bindings;I<W.length;I+=1){var oe=W[I];M.push(oe[0],oe[1].serialize())}return M.push(this.result.serialize()),M};var fo=function(M,I,W){this.type=M,this.index=I,this.input=W};fo.parse=function(M,I){if(3!==M.length)return I.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var W=I.parse(M[1],1,at),oe=I.parse(M[2],2,Lt(I.expectedType||Le));return W&&oe?new fo(oe.type.itemType,W,oe):null},fo.prototype.evaluate=function(M){var I=this.index.evaluate(M),W=this.input.evaluate(M);if(I<0)throw new zr("Array index out of bounds: "+I+" < 0.");if(I>=W.length)throw new zr("Array index out of bounds: "+I+" > "+(W.length-1)+".");if(I!==Math.floor(I))throw new zr("Array index must be an integer, but found "+I+" instead.");return W[I]},fo.prototype.eachChild=function(M){M(this.index),M(this.input)},fo.prototype.outputDefined=function(){return!1},fo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ao=function(M,I){this.type=qt,this.needle=M,this.haystack=I};Ao.parse=function(M,I){if(3!==M.length)return I.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var W=I.parse(M[1],1,Le),oe=I.parse(M[2],2,Le);return W&&oe?wr(W.type,[qt,mt,at,Ft,Le])?new Ao(W,oe):I.error("Expected first argument to be of type boolean, string, number or null, but found "+Ut(W.type)+" instead"):null},Ao.prototype.evaluate=function(M){var I=this.needle.evaluate(M),W=this.haystack.evaluate(M);if(!W)return!1;if(!Rr(I,["boolean","string","number","null"]))throw new zr("Expected first argument to be of type boolean, string, number or null, but found "+Ut(Tt(I))+" instead.");if(!Rr(W,["string","array"]))throw new zr("Expected second argument to be of type array or string, but found "+Ut(Tt(W))+" instead.");return W.indexOf(I)>=0},Ao.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},Ao.prototype.outputDefined=function(){return!0},Ao.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Mo=function(M,I,W){this.type=at,this.needle=M,this.haystack=I,this.fromIndex=W};Mo.parse=function(M,I){if(M.length<=2||M.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var W=I.parse(M[1],1,Le),oe=I.parse(M[2],2,Le);if(!W||!oe)return null;if(!wr(W.type,[qt,mt,at,Ft,Le]))return I.error("Expected first argument to be of type boolean, string, number or null, but found "+Ut(W.type)+" instead");if(4===M.length){var ge=I.parse(M[3],3,at);return ge?new Mo(W,oe,ge):null}return new Mo(W,oe)},Mo.prototype.evaluate=function(M){var I=this.needle.evaluate(M),W=this.haystack.evaluate(M);if(!Rr(I,["boolean","string","number","null"]))throw new zr("Expected first argument to be of type boolean, string, number or null, but found "+Ut(Tt(I))+" instead.");if(!Rr(W,["string","array"]))throw new zr("Expected second argument to be of type array or string, but found "+Ut(Tt(W))+" instead.");if(this.fromIndex){var oe=this.fromIndex.evaluate(M);return W.indexOf(I,oe)}return W.indexOf(I)},Mo.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ja=function(M,I,W,oe,ge,Te){this.inputType=M,this.type=I,this.input=W,this.cases=oe,this.outputs=ge,this.otherwise=Te};Ja.parse=function(M,I){if(M.length<5)return I.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return I.error("Expected an even number of arguments.");var W,oe;I.expectedType&&"value"!==I.expectedType.kind&&(oe=I.expectedType);for(var ge={},Te=[],Oe=2;Oe<M.length-1;Oe+=2){var Ve=M[Oe],tt=M[Oe+1];Array.isArray(Ve)||(Ve=[Ve]);var pt=I.concat(Oe);if(0===Ve.length)return pt.error("Expected at least one branch label.");for(var bt=0,Ht=Ve;bt<Ht.length;bt+=1){var tr=Ht[bt];if("number"!=typeof tr&&"string"!=typeof tr)return pt.error("Branch labels must be numbers or strings.");if("number"==typeof tr&&Math.abs(tr)>Number.MAX_SAFE_INTEGER)return pt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof tr&&Math.floor(tr)!==tr)return pt.error("Numeric branch labels must be integer values.");if(W){if(pt.checkSubtype(W,Tt(tr)))return null}else W=Tt(tr);if(void 0!==ge[String(tr)])return pt.error("Branch labels must be unique.");ge[String(tr)]=Te.length}var Jt=I.parse(tt,Oe,oe);if(!Jt)return null;oe=oe||Jt.type,Te.push(Jt)}var mr=I.parse(M[1],1,Le);if(!mr)return null;var Pr=I.parse(M[M.length-1],M.length-1,oe);return Pr?"value"!==mr.type.kind&&I.concat(1).checkSubtype(W,mr.type)?null:new Ja(W,oe,mr,ge,Te,Pr):null},Ja.prototype.evaluate=function(M){var I=this.input.evaluate(M);return(Tt(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(M)},Ja.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},Ja.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},Ja.prototype.serialize=function(){for(var M=this,I=["match",this.input.serialize()],W=[],oe={},ge=0,Te=Object.keys(this.cases).sort();ge<Te.length;ge+=1){var Oe=Te[ge];void 0===(Ht=oe[this.cases[Oe]])?(oe[this.cases[Oe]]=W.length,W.push([this.cases[Oe],[Oe]])):W[Ht][1].push(Oe)}for(var Ve=function(Jt){return"number"===M.inputType.kind?Number(Jt):Jt},tt=0,pt=W;tt<pt.length;tt+=1){var bt=pt[tt],Ht=bt[0],tr=bt[1];I.push(1===tr.length?Ve(tr[0]):tr.map(Ve)),I.push(this.outputs[outputIndex$1].serialize())}return I.push(this.otherwise.serialize()),I};var _a=function(M,I,W){this.type=M,this.branches=I,this.otherwise=W};_a.parse=function(M,I){if(M.length<4)return I.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return I.error("Expected an odd number of arguments.");var W;I.expectedType&&"value"!==I.expectedType.kind&&(W=I.expectedType);for(var oe=[],ge=1;ge<M.length-1;ge+=2){var Te=I.parse(M[ge],ge,qt);if(!Te)return null;var Oe=I.parse(M[ge+1],ge+1,W);if(!Oe)return null;oe.push([Te,Oe]),W=W||Oe.type}var Ve=I.parse(M[M.length-1],M.length-1,W);return Ve?new _a(W,oe,Ve):null},_a.prototype.evaluate=function(M){for(var I=0,W=this.branches;I<W.length;I+=1){var oe=W[I],Te=oe[1];if(oe[0].evaluate(M))return Te.evaluate(M)}return this.otherwise.evaluate(M)},_a.prototype.eachChild=function(M){for(var I=0,W=this.branches;I<W.length;I+=1){var oe=W[I],Te=oe[1];M(oe[0]),M(Te)}M(this.otherwise)},_a.prototype.outputDefined=function(){return this.branches.every(function(M){return M[1].outputDefined()})&&this.otherwise.outputDefined()},_a.prototype.serialize=function(){var M=["case"];return this.eachChild(function(I){M.push(I.serialize())}),M};var to=function(M,I,W,oe){this.type=M,this.input=I,this.beginIndex=W,this.endIndex=oe};function Ts(M,I){return"=="===M||"!="===M?"boolean"===I.kind||"string"===I.kind||"number"===I.kind||"null"===I.kind||"value"===I.kind:"string"===I.kind||"number"===I.kind||"value"===I.kind}function Ls(M,I,W,oe){return 0===oe.compare(I,W)}function na(M,I,W){var oe="=="!==M&&"!="!==M;return function(){function ge(Te,Oe,Ve){this.type=qt,this.lhs=Te,this.rhs=Oe,this.collator=Ve,this.hasUntypedArgument="value"===Te.type.kind||"value"===Oe.type.kind}return ge.parse=function(Te,Oe){if(3!==Te.length&&4!==Te.length)return Oe.error("Expected two or three arguments.");var Ve=Te[0],tt=Oe.parse(Te[1],1,Le);if(!tt)return null;if(!Ts(Ve,tt.type))return Oe.concat(1).error('"'+Ve+"\" comparisons are not supported for type '"+Ut(tt.type)+"'.");var pt=Oe.parse(Te[2],2,Le);if(!pt)return null;if(!Ts(Ve,pt.type))return Oe.concat(2).error('"'+Ve+"\" comparisons are not supported for type '"+Ut(pt.type)+"'.");if(tt.type.kind!==pt.type.kind&&"value"!==tt.type.kind&&"value"!==pt.type.kind)return Oe.error("Cannot compare types '"+Ut(tt.type)+"' and '"+Ut(pt.type)+"'.");oe&&("value"===tt.type.kind&&"value"!==pt.type.kind?tt=new Kr(pt.type,[tt]):"value"!==tt.type.kind&&"value"===pt.type.kind&&(pt=new Kr(tt.type,[pt])));var bt=null;if(4===Te.length){if("string"!==tt.type.kind&&"string"!==pt.type.kind&&"value"!==tt.type.kind&&"value"!==pt.type.kind)return Oe.error("Cannot use collator to compare non-string types.");if(!(bt=Oe.parse(Te[3],3,Xe)))return null}return new ge(tt,pt,bt)},ge.prototype.evaluate=function(Te){var Oe=this.lhs.evaluate(Te),Ve=this.rhs.evaluate(Te);if(oe&&this.hasUntypedArgument){var tt=Tt(Oe),pt=Tt(Ve);if(tt.kind!==pt.kind||"string"!==tt.kind&&"number"!==tt.kind)throw new zr('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+tt.kind+", "+pt.kind+") instead.")}if(this.collator&&!oe&&this.hasUntypedArgument){var bt=Tt(Oe),Ht=Tt(Ve);if("string"!==bt.kind||"string"!==Ht.kind)return I(Te,Oe,Ve)}return this.collator?W(Te,Oe,Ve,this.collator.evaluate(Te)):I(Te,Oe,Ve)},ge.prototype.eachChild=function(Te){Te(this.lhs),Te(this.rhs),this.collator&&Te(this.collator)},ge.prototype.outputDefined=function(){return!0},ge.prototype.serialize=function(){var Te=[M];return this.eachChild(function(Oe){Te.push(Oe.serialize())}),Te},ge}()}to.parse=function(M,I){if(M.length<=2||M.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var W=I.parse(M[1],1,Le),oe=I.parse(M[2],2,at);if(!W||!oe)return null;if(!wr(W.type,[Lt(Le),mt,Le]))return I.error("Expected first argument to be of type array or string, but found "+Ut(W.type)+" instead");if(4===M.length){var ge=I.parse(M[3],3,at);return ge?new to(W.type,W,oe,ge):null}return new to(W.type,W,oe)},to.prototype.evaluate=function(M){var I=this.input.evaluate(M),W=this.beginIndex.evaluate(M);if(!Rr(I,["string","array"]))throw new zr("Expected first argument to be of type array or string, but found "+Ut(Tt(I))+" instead.");if(this.endIndex){var oe=this.endIndex.evaluate(M);return I.slice(W,oe)}return I.slice(W)},to.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},to.prototype.outputDefined=function(){return!1},to.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ys=na("==",function(M,I,W){return I===W},Ls),as=na("!=",function(M,I,W){return I!==W},function(M,I,W,oe){return!Ls(0,I,W,oe)}),ks=na("<",function(M,I,W){return I<W},function(M,I,W,oe){return oe.compare(I,W)<0}),As=na(">",function(M,I,W){return I>W},function(M,I,W,oe){return oe.compare(I,W)>0}),ho=na("<=",function(M,I,W){return I<=W},function(M,I,W,oe){return oe.compare(I,W)<=0}),Fs=na(">=",function(M,I,W){return I>=W},function(M,I,W,oe){return oe.compare(I,W)>=0}),jo=function(M,I,W,oe,ge){this.type=mt,this.number=M,this.locale=I,this.currency=W,this.minFractionDigits=oe,this.maxFractionDigits=ge};jo.parse=function(M,I){if(3!==M.length)return I.error("Expected two arguments.");var W=I.parse(M[1],1,at);if(!W)return null;var oe=M[2];if("object"!=typeof oe||Array.isArray(oe))return I.error("NumberFormat options argument must be an object.");var ge=null;if(oe.locale&&!(ge=I.parse(oe.locale,1,mt)))return null;var Te=null;if(oe.currency&&!(Te=I.parse(oe.currency,1,mt)))return null;var Oe=null;if(oe["min-fraction-digits"]&&!(Oe=I.parse(oe["min-fraction-digits"],1,at)))return null;var Ve=null;return oe["max-fraction-digits"]&&!(Ve=I.parse(oe["max-fraction-digits"],1,at))?null:new jo(W,ge,Te,Oe,Ve)},jo.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},jo.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},jo.prototype.outputDefined=function(){return!1},jo.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var Uo=function(M){this.type=at,this.input=M};Uo.parse=function(M,I){if(2!==M.length)return I.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var W=I.parse(M[1],1);return W?"array"!==W.type.kind&&"string"!==W.type.kind&&"value"!==W.type.kind?I.error("Expected argument of type string or array, but found "+Ut(W.type)+" instead."):new Uo(W):null},Uo.prototype.evaluate=function(M){var I=this.input.evaluate(M);if("string"==typeof I||Array.isArray(I))return I.length;throw new zr("Expected value to be of type string or array, but found "+Ut(Tt(I))+" instead.")},Uo.prototype.eachChild=function(M){M(this.input)},Uo.prototype.outputDefined=function(){return!1},Uo.prototype.serialize=function(){var M=["length"];return this.eachChild(function(I){M.push(I.serialize())}),M};var ns={"==":ys,"!=":as,">":As,"<":ks,">=":Fs,"<=":ho,array:Kr,at:fo,boolean:Kr,case:_a,coalesce:uo,collator:Nn,format:sn,image:gn,in:Ao,"index-of":Mo,interpolate:Ji,"interpolate-hcl":Ji,"interpolate-lab":Ji,length:Uo,let:Ia,literal:Er,match:Ja,number:Kr,"number-format":jo,object:Kr,slice:to,step:En,string:Kr,"to-boolean":Vr,"to-color":Vr,"to-number":Vr,"to-string":Vr,var:pn,within:Dr};function Ka(M,I){var W=I[0],oe=I[1],ge=I[2],Te=I[3];W=W.evaluate(M),oe=oe.evaluate(M),ge=ge.evaluate(M);var Oe=Te?Te.evaluate(M):1,Ve=zt(W,oe,ge,Oe);if(Ve)throw new zr(Ve);return new nr(W/255*Oe,oe/255*Oe,ge/255*Oe,Oe)}function Zo(M,I){return M in I}function Vo(M,I){var W=I[M];return void 0===W?null:W}function wa(M){return{type:M}}function So(M){return{result:"success",value:M}}function ro(M){return{result:"error",value:M}}function Xo(M){return"data-driven"===M["property-type"]||"cross-faded-data-driven"===M["property-type"]}function os(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function wo(M){return!!M.expression&&M.expression.interpolated}function ta(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":null===M?"null":typeof M}function qe(M){return"object"==typeof M&&null!==M&&!Array.isArray(M)}function Ze(M){return M}function nt(M,I,W){return void 0!==M?M:void 0!==I?I:void 0!==W?W:void 0}function ht(M,I,W,oe,ge){return nt(typeof W===ge?oe[W]:void 0,M.default,I.default)}function xt(M,I,W){if("number"!==ta(W))return nt(M.default,I.default);var oe=M.stops.length;if(1===oe||W<=M.stops[0][0])return M.stops[0][1];if(W>=M.stops[oe-1][0])return M.stops[oe-1][1];var ge=Sn(M.stops.map(function(Te){return Te[0]}),W);return M.stops[ge][1]}function yt(M,I,W){var oe=void 0!==M.base?M.base:1;if("number"!==ta(W))return nt(M.default,I.default);var ge=M.stops.length;if(1===ge||W<=M.stops[0][0])return M.stops[0][1];if(W>=M.stops[ge-1][0])return M.stops[ge-1][1];var tr,Jt,Pr,Gr,Te=Sn(M.stops.map(function(Ht){return Ht[0]}),W),Oe=(tr=oe,Gr=W-(Jt=M.stops[Te][0]),0==(Pr=M.stops[Te+1][0]-Jt)?0:1===tr?Gr/Pr:(Math.pow(tr,Gr)-1)/(Math.pow(tr,Pr)-1)),Ve=M.stops[Te][1],tt=M.stops[Te+1][1],pt=Fn[I.type]||Ze;if(M.colorSpace&&"rgb"!==M.colorSpace){var bt=co[M.colorSpace];pt=function(Ht,tr){return bt.reverse(bt.interpolate(bt.forward(Ht),bt.forward(tr),Oe))}}return"function"==typeof Ve.evaluate?{evaluate:function(){for(var Ht=[],tr=arguments.length;tr--;)Ht[tr]=arguments[tr];var Jt=Ve.evaluate.apply(void 0,Ht),mr=tt.evaluate.apply(void 0,Ht);if(void 0!==Jt&&void 0!==mr)return pt(Jt,mr,Oe)}}:pt(Ve,tt,Oe)}function Ot(M,I,W){return"color"===I.type?W=nr.parse(W):"formatted"===I.type?W=_r.fromString(W.toString()):"resolvedImage"===I.type?W=Ar.fromString(W.toString()):ta(W)===I.type||"enum"===I.type&&I.values[W]||(W=void 0),nt(W,M.default,I.default)}Jr.register(ns,{error:[{kind:"error"},[mt],function(M,I){throw new zr(I[0].evaluate(M))}],typeof:[mt,[Le],function(M,I){return Ut(Tt(I[0].evaluate(M)))}],"to-rgba":[Lt(at,4),[Et],function(M,I){return I[0].evaluate(M).toArray()}],rgb:[Et,[at,at,at],Ka],rgba:[Et,[at,at,at,at],Ka],has:{type:qt,overloads:[[[mt],function(M,I){return Zo(I[0].evaluate(M),M.properties())}],[[mt,Dt],function(M,I){var oe=I[1];return Zo(I[0].evaluate(M),oe.evaluate(M))}]]},get:{type:Le,overloads:[[[mt],function(M,I){return Vo(I[0].evaluate(M),M.properties())}],[[mt,Dt],function(M,I){var oe=I[1];return Vo(I[0].evaluate(M),oe.evaluate(M))}]]},"feature-state":[Le,[mt],function(M,I){return Vo(I[0].evaluate(M),M.featureState||{})}],properties:[Dt,[],function(M){return M.properties()}],"geometry-type":[mt,[],function(M){return M.geometryType()}],id:[Le,[],function(M){return M.id()}],zoom:[at,[],function(M){return M.globals.zoom}],"heatmap-density":[at,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[at,[],function(M){return M.globals.lineProgress||0}],accumulated:[Le,[],function(M){return void 0===M.globals.accumulated?null:M.globals.accumulated}],"+":[at,wa(at),function(M,I){for(var W=0,oe=0,ge=I;oe<ge.length;oe+=1)W+=ge[oe].evaluate(M);return W}],"*":[at,wa(at),function(M,I){for(var W=1,oe=0,ge=I;oe<ge.length;oe+=1)W*=ge[oe].evaluate(M);return W}],"-":{type:at,overloads:[[[at,at],function(M,I){var oe=I[1];return I[0].evaluate(M)-oe.evaluate(M)}],[[at],function(M,I){return-I[0].evaluate(M)}]]},"/":[at,[at,at],function(M,I){var oe=I[1];return I[0].evaluate(M)/oe.evaluate(M)}],"%":[at,[at,at],function(M,I){var oe=I[1];return I[0].evaluate(M)%oe.evaluate(M)}],ln2:[at,[],function(){return Math.LN2}],pi:[at,[],function(){return Math.PI}],e:[at,[],function(){return Math.E}],"^":[at,[at,at],function(M,I){var oe=I[1];return Math.pow(I[0].evaluate(M),oe.evaluate(M))}],sqrt:[at,[at],function(M,I){return Math.sqrt(I[0].evaluate(M))}],log10:[at,[at],function(M,I){return Math.log(I[0].evaluate(M))/Math.LN10}],ln:[at,[at],function(M,I){return Math.log(I[0].evaluate(M))}],log2:[at,[at],function(M,I){return Math.log(I[0].evaluate(M))/Math.LN2}],sin:[at,[at],function(M,I){return Math.sin(I[0].evaluate(M))}],cos:[at,[at],function(M,I){return Math.cos(I[0].evaluate(M))}],tan:[at,[at],function(M,I){return Math.tan(I[0].evaluate(M))}],asin:[at,[at],function(M,I){return Math.asin(I[0].evaluate(M))}],acos:[at,[at],function(M,I){return Math.acos(I[0].evaluate(M))}],atan:[at,[at],function(M,I){return Math.atan(I[0].evaluate(M))}],min:[at,wa(at),function(M,I){return Math.min.apply(Math,I.map(function(W){return W.evaluate(M)}))}],max:[at,wa(at),function(M,I){return Math.max.apply(Math,I.map(function(W){return W.evaluate(M)}))}],abs:[at,[at],function(M,I){return Math.abs(I[0].evaluate(M))}],round:[at,[at],function(M,I){var W=I[0].evaluate(M);return W<0?-Math.round(-W):Math.round(W)}],floor:[at,[at],function(M,I){return Math.floor(I[0].evaluate(M))}],ceil:[at,[at],function(M,I){return Math.ceil(I[0].evaluate(M))}],"filter-==":[qt,[mt,Le],function(M,I){var W=I[0],oe=I[1];return M.properties()[W.value]===oe.value}],"filter-id-==":[qt,[Le],function(M,I){var W=I[0];return M.id()===W.value}],"filter-type-==":[qt,[mt],function(M,I){var W=I[0];return M.geometryType()===W.value}],"filter-<":[qt,[mt,Le],function(M,I){var W=I[0],oe=I[1],ge=M.properties()[W.value],Te=oe.value;return typeof ge==typeof Te&&ge<Te}],"filter-id-<":[qt,[Le],function(M,I){var W=I[0],oe=M.id(),ge=W.value;return typeof oe==typeof ge&&oe<ge}],"filter->":[qt,[mt,Le],function(M,I){var W=I[0],oe=I[1],ge=M.properties()[W.value],Te=oe.value;return typeof ge==typeof Te&&ge>Te}],"filter-id->":[qt,[Le],function(M,I){var W=I[0],oe=M.id(),ge=W.value;return typeof oe==typeof ge&&oe>ge}],"filter-<=":[qt,[mt,Le],function(M,I){var W=I[0],oe=I[1],ge=M.properties()[W.value],Te=oe.value;return typeof ge==typeof Te&&ge<=Te}],"filter-id-<=":[qt,[Le],function(M,I){var W=I[0],oe=M.id(),ge=W.value;return typeof oe==typeof ge&&oe<=ge}],"filter->=":[qt,[mt,Le],function(M,I){var W=I[0],oe=I[1],ge=M.properties()[W.value],Te=oe.value;return typeof ge==typeof Te&&ge>=Te}],"filter-id->=":[qt,[Le],function(M,I){var W=I[0],oe=M.id(),ge=W.value;return typeof oe==typeof ge&&oe>=ge}],"filter-has":[qt,[Le],function(M,I){return I[0].value in M.properties()}],"filter-has-id":[qt,[],function(M){return null!==M.id()&&void 0!==M.id()}],"filter-type-in":[qt,[Lt(mt)],function(M,I){return I[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[qt,[Lt(Le)],function(M,I){return I[0].value.indexOf(M.id())>=0}],"filter-in-small":[qt,[mt,Lt(Le)],function(M,I){var W=I[0];return I[1].value.indexOf(M.properties()[W.value])>=0}],"filter-in-large":[qt,[mt,Lt(Le)],function(M,I){var W=I[0],oe=I[1];return function(ge,Te,Oe,Ve){for(;Oe<=Ve;){var tt=Oe+Ve>>1;if(Te[tt]===ge)return!0;Te[tt]>ge?Ve=tt-1:Oe=tt+1}return!1}(M.properties()[W.value],oe.value,0,oe.value.length-1)}],all:{type:qt,overloads:[[[qt,qt],function(M,I){var oe=I[1];return I[0].evaluate(M)&&oe.evaluate(M)}],[wa(qt),function(M,I){for(var W=0,oe=I;W<oe.length;W+=1)if(!oe[W].evaluate(M))return!1;return!0}]]},any:{type:qt,overloads:[[[qt,qt],function(M,I){var oe=I[1];return I[0].evaluate(M)||oe.evaluate(M)}],[wa(qt),function(M,I){for(var W=0,oe=I;W<oe.length;W+=1)if(oe[W].evaluate(M))return!0;return!1}]]},"!":[qt,[qt],function(M,I){return!I[0].evaluate(M)}],"is-supported-script":[qt,[mt],function(M,I){var oe=M.globals&&M.globals.isSupportedScript;return!oe||oe(I[0].evaluate(M))}],upcase:[mt,[mt],function(M,I){return I[0].evaluate(M).toUpperCase()}],downcase:[mt,[mt],function(M,I){return I[0].evaluate(M).toLowerCase()}],concat:[mt,wa(Le),function(M,I){return I.map(function(W){return Qt(W.evaluate(M))}).join("")}],"resolved-locale":[mt,[Xe],function(M,I){return I[0].evaluate(M).resolvedLocale()}]});var ir=function(M,I){var W;this.expression=M,this._warningHistory={},this._evaluator=new Qr,this._defaultValue=I?"color"===(W=I).type&&qe(W.default)?new nr(0,0,0,0):"color"===W.type?nr.parse(W.default)||null:void 0===W.default?null:W.default:null,this._enumValues=I&&"enum"===I.type?I.values:null};function or(M){return Array.isArray(M)&&M.length>0&&"string"==typeof M[0]&&M[0]in ns}function er(M,I){var ge,Te,W=new dn(ns,[],I?(Te={color:Et,string:mt,number:at,enum:mt,boolean:qt,formatted:ot,resolvedImage:dt},"array"===(ge=I).type?Lt(Te[ge.value]||Le,ge.length):Te[ge.type]):void 0),oe=W.parse(M,void 0,void 0,void 0,I&&"string"===I.type?{typeAnnotation:"coerce"}:void 0);return oe?So(new ir(oe,I)):ro(W.errors)}ir.prototype.evaluateWithoutErrorHandling=function(M,I,W,oe,ge,Te){return this._evaluator.globals=M,this._evaluator.feature=I,this._evaluator.featureState=W,this._evaluator.canonical=oe,this._evaluator.availableImages=ge||null,this._evaluator.formattedSection=Te,this.expression.evaluate(this._evaluator)},ir.prototype.evaluate=function(M,I,W,oe,ge,Te){this._evaluator.globals=M,this._evaluator.feature=I||null,this._evaluator.featureState=W||null,this._evaluator.canonical=oe,this._evaluator.availableImages=ge||null,this._evaluator.formattedSection=Te||null;try{var Oe=this.expression.evaluate(this._evaluator);if(null==Oe||"number"==typeof Oe&&Oe!=Oe)return this._defaultValue;if(this._enumValues&&!(Oe in this._enumValues))throw new zr("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ve){return JSON.stringify(Ve)}).join(", ")+", but found "+JSON.stringify(Oe)+" instead.");return Oe}catch(Ve){return this._warningHistory[Ve.message]||(this._warningHistory[Ve.message]=!0,typeof console<"u"&&console.warn(Ve.message)),this._defaultValue}};var dr=function(M,I){this.kind=M,this._styleExpression=I,this.isStateDependent="constant"!==M&&!nn(I.expression)};dr.prototype.evaluateWithoutErrorHandling=function(M,I,W,oe,ge,Te){return this._styleExpression.evaluateWithoutErrorHandling(M,I,W,oe,ge,Te)},dr.prototype.evaluate=function(M,I,W,oe,ge,Te){return this._styleExpression.evaluate(M,I,W,oe,ge,Te)};var kr=function(M,I,W,oe){this.kind=M,this.zoomStops=W,this._styleExpression=I,this.isStateDependent="camera"!==M&&!nn(I.expression),this.interpolationType=oe};function Lr(M,I){if("error"===(M=er(M,I)).result)return M;var W=M.value.expression,oe=Nr(W);if(!oe&&!Xo(I))return ro([new ct("","data expressions not supported")]);var ge=rn(W,["zoom"]);if(!ge&&!os(I))return ro([new ct("","zoom expressions not supported")]);var Te=function Ve(tt){var pt=null;if(tt instanceof Ia)pt=Ve(tt.result);else if(tt instanceof uo)for(var bt=0,Ht=tt.args;bt<Ht.length&&!(pt=Ve(Ht[bt]));bt+=1);else(tt instanceof En||tt instanceof Ji)&&tt.input instanceof Jr&&"zoom"===tt.input.name&&(pt=tt);return pt instanceof ct||tt.eachChild(function(Jt){var mr=Ve(Jt);mr instanceof ct?pt=mr:!pt&&mr?pt=new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):pt&&mr&&pt!==mr&&(pt=new ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),pt}(W);return Te||ge?Te instanceof ct?ro([Te]):Te instanceof Ji&&!wo(I)?ro([new ct("",'"interpolate" expressions cannot be used with this property')]):So(Te?new kr(oe?"camera":"composite",M.value,Te.labels,Te instanceof Ji?Te.interpolation:void 0):new dr(oe?"constant":"source",M.value)):ro([new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}kr.prototype.evaluateWithoutErrorHandling=function(M,I,W,oe,ge,Te){return this._styleExpression.evaluateWithoutErrorHandling(M,I,W,oe,ge,Te)},kr.prototype.evaluate=function(M,I,W,oe,ge,Te){return this._styleExpression.evaluate(M,I,W,oe,ge,Te)},kr.prototype.interpolationFactor=function(M,I,W){return this.interpolationType?Ji.interpolationFactor(this.interpolationType,M,I,W):0};var Ir=function(M,I){this._parameters=M,this._specification=I,Ke(this,function W(oe,ge){var Te,Oe,Ve,tt="color"===ge.type,pt=oe.stops&&"object"==typeof oe.stops[0][0],Ht=pt||!(pt||void 0!==oe.property),tr=oe.type||(wo(ge)?"exponential":"interval");if(tt&&((oe=Ke({},oe)).stops&&(oe.stops=oe.stops.map(function(mi){return[mi[0],nr.parse(mi[1])]})),oe.default=nr.parse(oe.default?oe.default:ge.default)),oe.colorSpace&&"rgb"!==oe.colorSpace&&!co[oe.colorSpace])throw new Error("Unknown color space: "+oe.colorSpace);if("exponential"===tr)Te=yt;else if("interval"===tr)Te=xt;else if("categorical"===tr){Te=ht,Oe=Object.create(null);for(var Jt=0,mr=oe.stops;Jt<mr.length;Jt+=1){var Pr=mr[Jt];Oe[Pr[0]]=Pr[1]}Ve=typeof oe.stops[0][0]}else{if("identity"!==tr)throw new Error('Unknown function type "'+tr+'"');Te=Ot}if(pt){for(var Gr={},qr=[],$r=0;$r<oe.stops.length;$r++){var tn=oe.stops[$r],cn=tn[0].zoom;void 0===Gr[cn]&&(Gr[cn]={zoom:cn,type:oe.type,property:oe.property,default:oe.default,stops:[]},qr.push(cn)),Gr[cn].stops.push([tn[0].value,tn[1]])}for(var kn=[],Cn=0,Kn=qr;Cn<Kn.length;Cn+=1){var Zn=Kn[Cn];kn.push([Gr[Zn].zoom,W(Gr[Zn],ge)])}var ri={name:"linear"};return{kind:"composite",interpolationType:ri,interpolationFactor:Ji.interpolationFactor.bind(void 0,ri),zoomStops:kn.map(function(mi){return mi[0]}),evaluate:function(mi,ci){var Ai=mi.zoom;return yt({stops:kn,base:oe.base},ge,Ai).evaluate(Ai,ci)}}}if(Ht){var gi="exponential"===tr?{name:"exponential",base:void 0!==oe.base?oe.base:1}:null;return{kind:"camera",interpolationType:gi,interpolationFactor:Ji.interpolationFactor.bind(void 0,gi),zoomStops:oe.stops.map(function(mi){return mi[0]}),evaluate:function(mi){return Te(oe,ge,mi.zoom,Oe,Ve)}}}return{kind:"source",evaluate:function(mi,ci){var Ai=ci&&ci.properties?ci.properties[oe.property]:void 0;return void 0===Ai?nt(oe.default,ge.default):Te(oe,ge,Ai,Oe,Ve)}}}(this._parameters,this._specification))};function Wr(M){var I=M.key,W=M.value,oe=M.valueSpec||{},ge=M.objectElementValidators||{},Te=M.style,Oe=M.styleSpec,Ve=[],tt=ta(W);if("object"!==tt)return[new Be(I,W,"object expected, "+tt+" found")];for(var pt in W){var bt=pt.split(".")[0],Ht=oe[bt]||oe["*"],tr=void 0;if(ge[bt])tr=ge[bt];else if(oe[bt])tr=vr;else if(ge["*"])tr=ge["*"];else{if(!oe["*"]){Ve.push(new Be(I,W[pt],'unknown property "'+pt+'"'));continue}tr=vr}Ve=Ve.concat(tr({key:(I&&I+".")+pt,value:W[pt],valueSpec:Ht,style:Te,styleSpec:Oe,object:W,objectKey:pt},W))}for(var Jt in oe)ge[Jt]||oe[Jt].required&&void 0===oe[Jt].default&&void 0===W[Jt]&&Ve.push(new Be(I,W,'missing required property "'+Jt+'"'));return Ve}function mn(M){var I=M.value,W=M.valueSpec,oe=M.style,ge=M.styleSpec,Te=M.key,Oe=M.arrayElementValidator||vr;if("array"!==ta(I))return[new Be(Te,I,"array expected, "+ta(I)+" found")];if(W.length&&I.length!==W.length)return[new Be(Te,I,"array length "+W.length+" expected, length "+I.length+" found")];if(W["min-length"]&&I.length<W["min-length"])return[new Be(Te,I,"array length at least "+W["min-length"]+" expected, length "+I.length+" found")];var Ve={type:W.value,values:W.values};ge.$version<7&&(Ve.function=W.function),"object"===ta(W.value)&&(Ve=W.value);for(var tt=[],pt=0;pt<I.length;pt++)tt=tt.concat(Oe({array:I,arrayIndex:pt,value:I[pt],valueSpec:Ve,style:oe,styleSpec:ge,key:Te+"["+pt+"]"}));return tt}function Tn(M){var I=M.key,W=M.value,oe=M.valueSpec,ge=ta(W);return"number"===ge&&W!=W&&(ge="NaN"),"number"!==ge?[new Be(I,W,"number expected, "+ge+" found")]:"minimum"in oe&&W<oe.minimum?[new Be(I,W,W+" is less than the minimum value "+oe.minimum)]:"maximum"in oe&&W>oe.maximum?[new Be(I,W,W+" is greater than the maximum value "+oe.maximum)]:[]}function jn(M){var I,W,oe,ge=M.valueSpec,Te=Ye(M.value.type),Oe={},Ve="categorical"!==Te&&void 0===M.value.property,tt=!Ve,pt="array"===ta(M.value.stops)&&"array"===ta(M.value.stops[0])&&"object"===ta(M.value.stops[0][0]),bt=Wr({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Jt){if("identity"===Te)return[new Be(Jt.key,Jt.value,'identity function may not have a "stops" property')];var mr=[],Pr=Jt.value;return mr=mr.concat(mn({key:Jt.key,value:Pr,valueSpec:Jt.valueSpec,style:Jt.style,styleSpec:Jt.styleSpec,arrayElementValidator:Ht})),"array"===ta(Pr)&&0===Pr.length&&mr.push(new Be(Jt.key,Pr,"array must have at least one stop")),mr},default:function(Jt){return vr({key:Jt.key,value:Jt.value,valueSpec:ge,style:Jt.style,styleSpec:Jt.styleSpec})}}});return"identity"===Te&&Ve&&bt.push(new Be(M.key,M.value,'missing required property "property"')),"identity"===Te||M.value.stops||bt.push(new Be(M.key,M.value,'missing required property "stops"')),"exponential"===Te&&M.valueSpec.expression&&!wo(M.valueSpec)&&bt.push(new Be(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(tt&&!Xo(M.valueSpec)?bt.push(new Be(M.key,M.value,"property functions not supported")):Ve&&!os(M.valueSpec)&&bt.push(new Be(M.key,M.value,"zoom functions not supported"))),"categorical"!==Te&&!pt||void 0!==M.value.property||bt.push(new Be(M.key,M.value,'"property" property is required')),bt;function Ht(Jt){var mr=[],Pr=Jt.value,Gr=Jt.key;if("array"!==ta(Pr))return[new Be(Gr,Pr,"array expected, "+ta(Pr)+" found")];if(2!==Pr.length)return[new Be(Gr,Pr,"array length 2 expected, length "+Pr.length+" found")];if(pt){if("object"!==ta(Pr[0]))return[new Be(Gr,Pr,"object expected, "+ta(Pr[0])+" found")];if(void 0===Pr[0].zoom)return[new Be(Gr,Pr,"object stop key must have zoom")];if(void 0===Pr[0].value)return[new Be(Gr,Pr,"object stop key must have value")];if(oe&&oe>Ye(Pr[0].zoom))return[new Be(Gr,Pr[0].zoom,"stop zoom values must appear in ascending order")];Ye(Pr[0].zoom)!==oe&&(oe=Ye(Pr[0].zoom),W=void 0,Oe={}),mr=mr.concat(Wr({key:Gr+"[0]",value:Pr[0],valueSpec:{zoom:{}},style:Jt.style,styleSpec:Jt.styleSpec,objectElementValidators:{zoom:Tn,value:tr}}))}else mr=mr.concat(tr({key:Gr+"[0]",value:Pr[0],valueSpec:{},style:Jt.style,styleSpec:Jt.styleSpec},Pr));return or(ft(Pr[1]))?mr.concat([new Be(Gr+"[1]",Pr[1],"expressions are not allowed in function stops.")]):mr.concat(vr({key:Gr+"[1]",value:Pr[1],valueSpec:ge,style:Jt.style,styleSpec:Jt.styleSpec}))}function tr(Jt,mr){var Pr=ta(Jt.value),Gr=Ye(Jt.value),qr=null!==Jt.value?Jt.value:mr;if(I){if(Pr!==I)return[new Be(Jt.key,qr,Pr+" stop domain type must match previous stop domain type "+I)]}else I=Pr;if("number"!==Pr&&"string"!==Pr&&"boolean"!==Pr)return[new Be(Jt.key,qr,"stop domain value must be a number, string, or boolean")];if("number"!==Pr&&"categorical"!==Te){var $r="number expected, "+Pr+" found";return Xo(ge)&&void 0===Te&&($r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Be(Jt.key,qr,$r)]}return"categorical"!==Te||"number"!==Pr||isFinite(Gr)&&Math.floor(Gr)===Gr?"categorical"!==Te&&"number"===Pr&&void 0!==W&&Gr<W?[new Be(Jt.key,qr,"stop domain values must appear in ascending order")]:(W=Gr,"categorical"===Te&&Gr in Oe?[new Be(Jt.key,qr,"stop domain values must be unique")]:(Oe[Gr]=!0,[])):[new Be(Jt.key,qr,"integer expected, found "+Gr)]}}function Gn(M){var I=("property"===M.expressionContext?Lr:er)(ft(M.value),M.valueSpec);if("error"===I.result)return I.value.map(function(oe){return new Be(""+M.key+oe.key,M.value,oe.message)});var W=I.value.expression||I.value._styleExpression.expression;if("property"===M.expressionContext&&"text-font"===M.propertyKey&&!W.outputDefined())return[new Be(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===M.expressionContext&&"layout"===M.propertyType&&!nn(W))return[new Be(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===M.expressionContext&&!nn(W))return[new Be(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&0===M.expressionContext.indexOf("cluster")){if(!rn(W,["zoom","feature-state"]))return[new Be(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===M.expressionContext&&!Nr(W))return[new Be(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ei(M){var I=M.key,W=M.value,oe=M.valueSpec,ge=[];return Array.isArray(oe.values)?-1===oe.values.indexOf(Ye(W))&&ge.push(new Be(I,W,"expected one of ["+oe.values.join(", ")+"], "+JSON.stringify(W)+" found")):-1===Object.keys(oe.values).indexOf(Ye(W))&&ge.push(new Be(I,W,"expected one of ["+Object.keys(oe.values).join(", ")+"], "+JSON.stringify(W)+" found")),ge}function Yn(M){if(!0===M||!1===M)return!0;if(!Array.isArray(M)||0===M.length)return!1;switch(M[0]){case"has":return M.length>=2&&"$id"!==M[1]&&"$type"!==M[1];case"in":return M.length>=3&&("string"!=typeof M[1]||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==M.length||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var I=0,W=M.slice(1);I<W.length;I+=1){var oe=W[I];if(!Yn(oe)&&"boolean"!=typeof oe)return!1}return!0;default:return!0}}Ir.deserialize=function(M){return new Ir(M._parameters,M._specification)},Ir.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var Mi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ri(M){if(null==M)return{filter:function(){return!0},needGeometry:!1};Yn(M)||(M=Ki(M));var I=er(M,Mi);if("error"===I.result)throw new Error(I.value.map(function(W){return W.key+": "+W.message}).join(", "));return{filter:function(W,oe,ge){return I.value.evaluate(W,oe,{},ge)},needGeometry:function W(oe){if(!Array.isArray(oe))return!1;if("within"===oe[0])return!0;for(var ge=1;ge<oe.length;ge++)if(W(oe[ge]))return!0;return!1}(M)}}function Qi(M,I){return M<I?-1:M>I?1:0}function Ki(M){if(!M)return!0;var I,W=M[0];return M.length<=1?"any"!==W:"=="===W?ea(M[1],M[2],"=="):"!="===W?ca(ea(M[1],M[2],"==")):"<"===W||">"===W||"<="===W||">="===W?ea(M[1],M[2],W):"any"===W?(I=M.slice(1),["any"].concat(I.map(Ki))):"all"===W?["all"].concat(M.slice(1).map(Ki)):"none"===W?["all"].concat(M.slice(1).map(Ki).map(ca)):"in"===W?Da(M[1],M.slice(2)):"!in"===W?ca(Da(M[1],M.slice(2))):"has"===W?Ea(M[1]):"!has"===W?ca(Ea(M[1])):"within"!==W||M}function ea(M,I,W){switch(M){case"$type":return["filter-type-"+W,I];case"$id":return["filter-id-"+W,I];default:return["filter-"+W,M,I]}}function Da(M,I){if(0===I.length)return!1;switch(M){case"$type":return["filter-type-in",["literal",I]];case"$id":return["filter-id-in",["literal",I]];default:return I.length>200&&!I.some(function(W){return typeof W!=typeof I[0]})?["filter-in-large",M,["literal",I.sort(Qi)]]:["filter-in-small",M,["literal",I]]}}function Ea(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function ca(M){return["!",M]}function ma(M){return Yn(ft(M.value))?Gn(Ke({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function I(W){var oe=W.value,ge=W.key;if("array"!==ta(oe))return[new Be(ge,oe,"array expected, "+ta(oe)+" found")];var Te,Oe=W.styleSpec,Ve=[];if(oe.length<1)return[new Be(ge,oe,"filter array must have at least 1 element")];switch(Ve=Ve.concat(ei({key:ge+"[0]",value:oe[0],valueSpec:Oe.filter_operator,style:W.style,styleSpec:W.styleSpec})),Ye(oe[0])){case"<":case"<=":case">":case">=":oe.length>=2&&"$type"===Ye(oe[1])&&Ve.push(new Be(ge,oe,'"$type" cannot be use with operator "'+oe[0]+'"'));case"==":case"!=":3!==oe.length&&Ve.push(new Be(ge,oe,'filter array for operator "'+oe[0]+'" must have 3 elements'));case"in":case"!in":oe.length>=2&&"string"!==(Te=ta(oe[1]))&&Ve.push(new Be(ge+"[1]",oe[1],"string expected, "+Te+" found"));for(var tt=2;tt<oe.length;tt++)Te=ta(oe[tt]),"$type"===Ye(oe[1])?Ve=Ve.concat(ei({key:ge+"["+tt+"]",value:oe[tt],valueSpec:Oe.geometry_type,style:W.style,styleSpec:W.styleSpec})):"string"!==Te&&"number"!==Te&&"boolean"!==Te&&Ve.push(new Be(ge+"["+tt+"]",oe[tt],"string, number, or boolean expected, "+Te+" found"));break;case"any":case"all":case"none":for(var pt=1;pt<oe.length;pt++)Ve=Ve.concat(I({key:ge+"["+pt+"]",value:oe[pt],style:W.style,styleSpec:W.styleSpec}));break;case"has":case"!has":Te=ta(oe[1]),2!==oe.length?Ve.push(new Be(ge,oe,'filter array for "'+oe[0]+'" operator must have 2 elements')):"string"!==Te&&Ve.push(new Be(ge+"[1]",oe[1],"string expected, "+Te+" found"));break;case"within":Te=ta(oe[1]),2!==oe.length?Ve.push(new Be(ge,oe,'filter array for "'+oe[0]+'" operator must have 2 elements')):"object"!==Te&&Ve.push(new Be(ge+"[1]",oe[1],"object expected, "+Te+" found"))}return Ve}(M)}function Aa(M,I){var W=M.key,oe=M.style,ge=M.styleSpec,Te=M.value,Oe=M.objectKey,Ve=ge[I+"_"+M.layerType];if(!Ve)return[];var tt=Oe.match(/^(.*)-transition$/);if("paint"===I&&tt&&Ve[tt[1]]&&Ve[tt[1]].transition)return vr({key:W,value:Te,valueSpec:ge.transition,style:oe,styleSpec:ge});var pt,bt=M.valueSpec||Ve[Oe];if(!bt)return[new Be(W,Te,'unknown property "'+Oe+'"')];if("string"===ta(Te)&&Xo(bt)&&!bt.tokens&&(pt=/^{([^}]+)}$/.exec(Te)))return[new Be(W,Te,'"'+Oe+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(pt[1])+" }`.")];var Ht=[];return"symbol"===M.layerType&&("text-field"===Oe&&oe&&!oe.glyphs&&Ht.push(new Be(W,Te,'use of "text-field" requires a style "glyphs" property')),"text-font"===Oe&&qe(ft(Te))&&"identity"===Ye(Te.type)&&Ht.push(new Be(W,Te,'"text-font" does not support identity functions'))),Ht.concat(vr({key:M.key,value:Te,valueSpec:bt,style:oe,styleSpec:ge,expressionContext:"property",propertyType:I,propertyKey:Oe}))}function Ha(M){return Aa(M,"paint")}function po(M){return Aa(M,"layout")}function go(M){var I=[],W=M.value,oe=M.key,ge=M.style,Te=M.styleSpec;W.type||W.ref||I.push(new Be(oe,W,'either "type" or "ref" is required'));var Oe,Ve=Ye(W.type),tt=Ye(W.ref);if(W.id)for(var pt=Ye(W.id),bt=0;bt<M.arrayIndex;bt++){var Ht=ge.layers[bt];Ye(Ht.id)===pt&&I.push(new Be(oe,W.id,'duplicate layer id "'+W.id+'", previously used at line '+Ht.id.__line__))}if("ref"in W)["type","source","source-layer","filter","layout"].forEach(function(mr){mr in W&&I.push(new Be(oe,W[mr],'"'+mr+'" is prohibited for ref layers'))}),ge.layers.forEach(function(mr){Ye(mr.id)===tt&&(Oe=mr)}),Oe?Oe.ref?I.push(new Be(oe,W.ref,"ref cannot reference another ref layer")):Ve=Ye(Oe.type):I.push(new Be(oe,W.ref,'ref layer "'+tt+'" not found'));else if("background"!==Ve)if(W.source){var tr=ge.sources&&ge.sources[W.source],Jt=tr&&Ye(tr.type);tr?"vector"===Jt&&"raster"===Ve?I.push(new Be(oe,W.source,'layer "'+W.id+'" requires a raster source')):"raster"===Jt&&"raster"!==Ve?I.push(new Be(oe,W.source,'layer "'+W.id+'" requires a vector source')):"vector"!==Jt||W["source-layer"]?"raster-dem"===Jt&&"hillshade"!==Ve?I.push(new Be(oe,W.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ve||!W.paint||!W.paint["line-gradient"]||"geojson"===Jt&&tr.lineMetrics||I.push(new Be(oe,W,'layer "'+W.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):I.push(new Be(oe,W,'layer "'+W.id+'" must specify a "source-layer"')):I.push(new Be(oe,W.source,'source "'+W.source+'" not found'))}else I.push(new Be(oe,W,'missing required property "source"'));return I=I.concat(Wr({key:oe,value:W,valueSpec:Te.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vr({key:oe+".type",value:W.type,valueSpec:Te.layer.type,style:M.style,styleSpec:M.styleSpec,object:W,objectKey:"type"})},filter:ma,layout:function(mr){return Wr({layer:W,key:mr.key,value:mr.value,style:mr.style,styleSpec:mr.styleSpec,objectElementValidators:{"*":function(Pr){return po(Ke({layerType:Ve},Pr))}}})},paint:function(mr){return Wr({layer:W,key:mr.key,value:mr.value,style:mr.style,styleSpec:mr.styleSpec,objectElementValidators:{"*":function(Pr){return Ha(Ke({layerType:Ve},Pr))}}})}}}))}function mo(M){var I=M.value,W=M.key,oe=ta(I);return"string"!==oe?[new Be(W,I,"string expected, "+oe+" found")]:[]}var vo={promoteId:function(M){var I=M.key,W=M.value;if("string"===ta(W))return mo({key:I,value:W});var oe=[];for(var ge in W)oe.push.apply(oe,mo({key:I+"."+ge,value:W[ge]}));return oe}};function Zi(M){var I=M.value,W=M.key,oe=M.styleSpec,ge=M.style;if(!I.type)return[new Be(W,I,'"type" is required')];var Te,Oe=Ye(I.type);switch(Oe){case"vector":case"raster":case"raster-dem":return Wr({key:W,value:I,valueSpec:oe["source_"+Oe.replace("-","_")],style:M.style,styleSpec:oe,objectElementValidators:vo});case"geojson":if(Te=Wr({key:W,value:I,valueSpec:oe.source_geojson,style:ge,styleSpec:oe,objectElementValidators:vo}),I.cluster)for(var Ve in I.clusterProperties){var tt=I.clusterProperties[Ve],pt=tt[0],Ht="string"==typeof pt?[pt,["accumulated"],["get",Ve]]:pt;Te.push.apply(Te,Gn({key:W+"."+Ve+".map",value:tt[1],expressionContext:"cluster-map"})),Te.push.apply(Te,Gn({key:W+"."+Ve+".reduce",value:Ht,expressionContext:"cluster-reduce"}))}return Te;case"video":return Wr({key:W,value:I,valueSpec:oe.source_video,style:ge,styleSpec:oe});case"image":return Wr({key:W,value:I,valueSpec:oe.source_image,style:ge,styleSpec:oe});case"canvas":return[new Be(W,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ei({key:W+".type",value:I.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ge,styleSpec:oe})}}function vt(M){var I=M.value,W=M.styleSpec,oe=W.light,ge=M.style,Te=[],Oe=ta(I);if(void 0===I)return Te;if("object"!==Oe)return Te.concat([new Be("light",I,"object expected, "+Oe+" found")]);for(var Ve in I){var tt=Ve.match(/^(.*)-transition$/);Te=Te.concat(tt&&oe[tt[1]]&&oe[tt[1]].transition?vr({key:Ve,value:I[Ve],valueSpec:W.transition,style:ge,styleSpec:W}):oe[Ve]?vr({key:Ve,value:I[Ve],valueSpec:oe[Ve],style:ge,styleSpec:W}):[new Be(Ve,I[Ve],'unknown property "'+Ve+'"')])}return Te}var jt={"*":function(){return[]},array:mn,boolean:function(M){var I=M.value,W=M.key,oe=ta(I);return"boolean"!==oe?[new Be(W,I,"boolean expected, "+oe+" found")]:[]},number:Tn,color:function(M){var I=M.key,W=M.value,oe=ta(W);return"string"!==oe?[new Be(I,W,"color expected, "+oe+" found")]:null===br(W)?[new Be(I,W,'color expected, "'+W+'" found')]:[]},constants:We,enum:ei,filter:ma,function:jn,layer:go,object:Wr,source:Zi,light:vt,string:mo,formatted:function(M){return 0===mo(M).length?[]:Gn(M)},resolvedImage:function(M){return 0===mo(M).length?[]:Gn(M)}};function vr(M){var I=M.value,W=M.valueSpec,oe=M.styleSpec;return W.expression&&qe(Ye(I))?jn(M):W.expression&&or(ft(I))?Gn(M):W.type&&jt[W.type]?jt[W.type](M):Wr(Ke({},M,{valueSpec:W.type?oe[W.type]:W}))}function Zt(M){var I=M.value,W=M.key,oe=mo(M);return oe.length||(-1===I.indexOf("{fontstack}")&&oe.push(new Be(W,I,'"glyphs" url must include a "{fontstack}" token')),-1===I.indexOf("{range}")&&oe.push(new Be(W,I,'"glyphs" url must include a "{range}" token'))),oe}function yr(M,I){void 0===I&&(I=we);var W=[];return W=W.concat(vr({key:"",value:M,valueSpec:I.$root,styleSpec:I,style:M,objectElementValidators:{glyphs:Zt,"*":function(){return[]}}})),M.constants&&(W=W.concat(We({key:"constants",value:M.constants,style:M,styleSpec:I}))),Hr(W)}function Hr(M){return[].concat(M).sort(function(I,W){return I.line-W.line})}function Xr(M){return function(){for(var I=[],W=arguments.length;W--;)I[W]=arguments[W];return Hr(M.apply(this,I))}}yr.source=Xr(Zi),yr.light=Xr(vt),yr.layer=Xr(go),yr.filter=Xr(ma),yr.paintProperty=Xr(Ha),yr.layoutProperty=Xr(po);var ln=yr,bn=ln.light,vn=ln.paintProperty,An=ln.layoutProperty;function In(M,I){var W=!1;if(I&&I.length)for(var oe=0,ge=I;oe<ge.length;oe+=1)M.fire(new Je(new Error(ge[oe].message))),W=!0;return W}var xn=Pn;function Pn(M,I,W){var oe=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var ge=new Int32Array(this.arrayBuffer);M=ge[0],this.d=(I=ge[1])+2*(W=ge[2]);for(var Te=0;Te<this.d*this.d;Te++){var Oe=ge[3+Te],Ve=ge[3+Te+1];oe.push(Oe===Ve?null:ge.subarray(Oe,Ve))}var pt=ge[3+oe.length+1];this.keys=ge.subarray(ge[3+oe.length],pt),this.bboxes=ge.subarray(pt),this.insert=this._insertReadonly}else{this.d=I+2*W;for(var bt=0;bt<this.d*this.d;bt++)oe.push([]);this.keys=[],this.bboxes=[]}this.n=I,this.extent=M,this.padding=W,this.scale=I/M,this.uid=0;var Ht=W/I*M;this.min=-Ht,this.max=M+Ht}Pn.prototype.insert=function(M,I,W,oe,ge){this._forEachCell(I,W,oe,ge,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(I),this.bboxes.push(W),this.bboxes.push(oe),this.bboxes.push(ge)},Pn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Pn.prototype._insertCell=function(M,I,W,oe,ge,Te){this.cells[ge].push(Te)},Pn.prototype.query=function(M,I,W,oe,ge){var Te=this.min,Oe=this.max;if(M<=Te&&I<=Te&&Oe<=W&&Oe<=oe&&!ge)return Array.prototype.slice.call(this.keys);var Ve=[];return this._forEachCell(M,I,W,oe,this._queryCell,Ve,{},ge),Ve},Pn.prototype._queryCell=function(M,I,W,oe,ge,Te,Oe,Ve){var tt=this.cells[ge];if(null!==tt)for(var pt=this.keys,bt=this.bboxes,Ht=0;Ht<tt.length;Ht++){var tr=tt[Ht];if(void 0===Oe[tr]){var Jt=4*tr;(Ve?Ve(bt[Jt+0],bt[Jt+1],bt[Jt+2],bt[Jt+3]):M<=bt[Jt+2]&&I<=bt[Jt+3]&&W>=bt[Jt+0]&&oe>=bt[Jt+1])?(Oe[tr]=!0,Te.push(pt[tr])):Oe[tr]=!1}}},Pn.prototype._forEachCell=function(M,I,W,oe,ge,Te,Oe,Ve){for(var tt=this._convertToCellCoord(M),pt=this._convertToCellCoord(I),bt=this._convertToCellCoord(W),Ht=this._convertToCellCoord(oe),tr=tt;tr<=bt;tr++)for(var Jt=pt;Jt<=Ht;Jt++){var mr=this.d*Jt+tr;if((!Ve||Ve(this._convertFromCellCoord(tr),this._convertFromCellCoord(Jt),this._convertFromCellCoord(tr+1),this._convertFromCellCoord(Jt+1)))&&ge.call(this,M,I,W,oe,mr,Te,Oe,Ve))return}},Pn.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},Pn.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},Pn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,I=3+this.cells.length+1+1,W=0,oe=0;oe<this.cells.length;oe++)W+=this.cells[oe].length;var ge=new Int32Array(I+W+this.keys.length+this.bboxes.length);ge[0]=this.extent,ge[1]=this.n,ge[2]=this.padding;for(var Te=I,Oe=0;Oe<M.length;Oe++){var Ve=M[Oe];ge[3+Oe]=Te,ge.set(Ve,Te),Te+=Ve.length}return ge[3+M.length]=Te,ge.set(this.keys,Te),ge[3+M.length+1]=Te+=this.keys.length,ge.set(this.bboxes,Te),Te+=this.bboxes.length,ge.buffer};var Wn=self.ImageData,$n=self.ImageBitmap,fi={};function un(M,I,W){void 0===W&&(W={}),Object.defineProperty(I,"_classRegistryKey",{value:M,writeable:!1}),fi[M]={klass:I,omit:W.omit||[],shallow:W.shallow||[]}}for(var hi in un("Object",Object),xn.serialize=function(M,I){var W=M.toArrayBuffer();return I&&I.push(W),{buffer:W}},xn.deserialize=function(M){return new xn(M.buffer)},un("Grid",xn),un("Color",nr),un("Error",Error),un("ResolvedImage",Ar),un("StylePropertyFunction",Ir),un("StyleExpression",ir,{omit:["_evaluator"]}),un("ZoomDependentExpression",kr),un("ZoomConstantExpression",dr),un("CompoundExpression",Jr,{omit:["_evaluate"]}),ns)ns[hi]._classRegistryKey||un("Expression_"+hi,ns[hi]);function Vn(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&"ArrayBuffer"===M.constructor.name)}function Xn(M){return $n&&M instanceof $n}function ui(M,I){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(Vn(M)||Xn(M))return I&&I.push(M),M;if(ArrayBuffer.isView(M)){var W=M;return I&&I.push(W.buffer),W}if(M instanceof Wn)return I&&I.push(M.data.buffer),M;if(Array.isArray(M)){for(var oe=[],ge=0,Te=M;ge<Te.length;ge+=1)oe.push(ui(Te[ge],I));return oe}if("object"==typeof M){var Ve=M.constructor,tt=Ve._classRegistryKey;if(!tt)throw new Error("can't serialize object of unregistered class");var pt=Ve.serialize?Ve.serialize(M,I):{};if(!Ve.serialize){for(var bt in M)if(M.hasOwnProperty(bt)&&!(fi[tt].omit.indexOf(bt)>=0)){var Ht=M[bt];pt[bt]=fi[tt].shallow.indexOf(bt)>=0?Ht:ui(Ht,I)}M instanceof Error&&(pt.message=M.message)}if(pt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==tt&&(pt.$name=tt),pt}throw new Error("can't serialize object of type "+typeof M)}function Ci(M){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||Vn(M)||Xn(M)||ArrayBuffer.isView(M)||M instanceof Wn)return M;if(Array.isArray(M))return M.map(Ci);if("object"==typeof M){var I=M.$name||"Object",W=fi[I].klass;if(!W)throw new Error("can't deserialize unregistered class "+I);if(W.deserialize)return W.deserialize(M);for(var oe=Object.create(W.prototype),ge=0,Te=Object.keys(M);ge<Te.length;ge+=1){var Oe=Te[ge];if("$name"!==Oe){var Ve=M[Oe];oe[Oe]=fi[I].shallow.indexOf(Oe)>=0?Ve:Ci(Ve)}}return oe}throw new Error("can't deserialize object of type "+typeof M)}var Gi=function(){this.first=!0};Gi.prototype.update=function(M,I){var W=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=W,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=W,!0):(this.lastFloorZoom>W?(this.lastIntegerZoom=W+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<W&&(this.lastIntegerZoom=W,this.lastIntegerZoomTime=I),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=W,!0))};var Rn={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function Hi(M){for(var I=0,W=M;I<W.length;I+=1)if(Ti(W[I].charCodeAt(0)))return!0;return!1}function qi(M){return!(Rn.Arabic(M)||Rn["Arabic Supplement"](M)||Rn["Arabic Extended-A"](M)||Rn["Arabic Presentation Forms-A"](M)||Rn["Arabic Presentation Forms-B"](M))}function Ti(M){return!(746!==M&&747!==M&&(M<4352||!(Rn["Bopomofo Extended"](M)||Rn.Bopomofo(M)||Rn["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||Rn["CJK Compatibility Ideographs"](M)||Rn["CJK Compatibility"](M)||Rn["CJK Radicals Supplement"](M)||Rn["CJK Strokes"](M)||!(!Rn["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||12336===M)||Rn["CJK Unified Ideographs Extension A"](M)||Rn["CJK Unified Ideographs"](M)||Rn["Enclosed CJK Letters and Months"](M)||Rn["Hangul Compatibility Jamo"](M)||Rn["Hangul Jamo Extended-A"](M)||Rn["Hangul Jamo Extended-B"](M)||Rn["Hangul Jamo"](M)||Rn["Hangul Syllables"](M)||Rn.Hiragana(M)||Rn["Ideographic Description Characters"](M)||Rn.Kanbun(M)||Rn["Kangxi Radicals"](M)||Rn["Katakana Phonetic Extensions"](M)||Rn.Katakana(M)&&12540!==M||!(!Rn["Halfwidth and Fullwidth Forms"](M)||65288===M||65289===M||65293===M||M>=65306&&M<=65310||65339===M||65341===M||65343===M||M>=65371&&M<=65503||65507===M||M>=65512&&M<=65519)||!(!Rn["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||Rn["Unified Canadian Aboriginal Syllabics"](M)||Rn["Unified Canadian Aboriginal Syllabics Extended"](M)||Rn["Vertical Forms"](M)||Rn["Yijing Hexagram Symbols"](M)||Rn["Yi Syllables"](M)||Rn["Yi Radicals"](M))))}function Xi(M){return!(Ti(M)||(I=M,Rn["Latin-1 Supplement"](I)&&(167===I||169===I||174===I||177===I||188===I||189===I||190===I||215===I||247===I)||Rn["General Punctuation"](I)&&(8214===I||8224===I||8225===I||8240===I||8241===I||8251===I||8252===I||8258===I||8263===I||8264===I||8265===I||8273===I)||Rn["Letterlike Symbols"](I)||Rn["Number Forms"](I)||Rn["Miscellaneous Technical"](I)&&(I>=8960&&I<=8967||I>=8972&&I<=8991||I>=8996&&I<=9e3||9003===I||I>=9085&&I<=9114||I>=9150&&I<=9165||9167===I||I>=9169&&I<=9179||I>=9186&&I<=9215)||Rn["Control Pictures"](I)&&9251!==I||Rn["Optical Character Recognition"](I)||Rn["Enclosed Alphanumerics"](I)||Rn["Geometric Shapes"](I)||Rn["Miscellaneous Symbols"](I)&&!(I>=9754&&I<=9759)||Rn["Miscellaneous Symbols and Arrows"](I)&&(I>=11026&&I<=11055||I>=11088&&I<=11097||I>=11192&&I<=11243)||Rn["CJK Symbols and Punctuation"](I)||Rn.Katakana(I)||Rn["Private Use Area"](I)||Rn["CJK Compatibility Forms"](I)||Rn["Small Form Variants"](I)||Rn["Halfwidth and Fullwidth Forms"](I)||8734===I||8756===I||8757===I||I>=9984&&I<=10087||I>=10102&&I<=10131||65532===I||65533===I));var I}function Ni(M){return M>=1424&&M<=2303||Rn["Arabic Presentation Forms-A"](M)||Rn["Arabic Presentation Forms-B"](M)}function fa(M,I){return!(!I&&Ni(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||Rn.Khmer(M))}function oi(M){for(var I=0,W=M;I<W.length;I+=1)if(Ni(W[I].charCodeAt(0)))return!0;return!1}var ia="deferred",$a="loading",ss="loaded",Eo=null,ki="unavailable",Ma=null,Co=function(M){M&&"string"==typeof M&&M.indexOf("NetworkError")>-1&&(ki="error"),Eo&&Eo(M)};function aa(){za.fire(new He("pluginStateChange",{pluginStatus:ki,pluginURL:Ma}))}var za=new pe,no=function(){return ki},oa=function(){if(ki!==ia||!Ma)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ki=$a,aa(),Ma&&wt({url:Ma},function(M){M?Co(M):(ki=ss,aa())})},To={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ki===ss||null!=To.applyArabicShaping},isLoading:function(){return ki===$a},setState:function(M){ki=M.pluginStatus,Ma=M.pluginURL},isParsed:function(){return null!=To.applyArabicShaping&&null!=To.processBidirectionalText&&null!=To.processStyledBidirectionalText},getPluginURL:function(){return Ma}},pa=function(M,I){this.zoom=M,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gi,this.transition={})};pa.prototype.isSupportedScript=function(M){return function(I,W){for(var oe=0,ge=I;oe<ge.length;oe+=1)if(!fa(ge[oe].charCodeAt(0),W))return!1;return!0}(M,To.isLoaded())},pa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},pa.prototype.getCrossfadeParameters=function(){var M=this.zoom,I=M-Math.floor(M),W=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*W}:{fromScale:.5,toScale:1,t:1-(1-W)*I}};var yo=function(M,I){this.property=M,this.value=I,this.expression=function(W,oe){if(qe(W))return new Ir(W,oe);if(or(W)){var ge=Lr(W,oe);if("error"===ge.result)throw new Error(ge.value.map(function(Oe){return Oe.key+": "+Oe.message}).join(", "));return ge.value}var Te=W;return"string"==typeof W&&"color"===oe.type&&(Te=nr.parse(W)),{kind:"constant",evaluate:function(){return Te}}}(void 0===I?M.specification.default:I,M.specification)};yo.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},yo.prototype.possiblyEvaluate=function(M,I,W){return this.property.possiblyEvaluate(this,M,I,W)};var xs=function(M){this.property=M,this.value=new yo(M,void 0)};xs.prototype.transitioned=function(M,I){return new Bs(this.property,this.value,I,l({},M.transition,this.transition),M.now)},xs.prototype.untransitioned=function(){return new Bs(this.property,this.value,null,{},0)};var Ko=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};Ko.prototype.getValue=function(M){return w(this._values[M].value.value)},Ko.prototype.setValue=function(M,I){this._values.hasOwnProperty(M)||(this._values[M]=new xs(this._values[M].property)),this._values[M].value=new yo(this._values[M].property,null===I?void 0:w(I))},Ko.prototype.getTransition=function(M){return w(this._values[M].transition)},Ko.prototype.setTransition=function(M,I){this._values.hasOwnProperty(M)||(this._values[M]=new xs(this._values[M].property)),this._values[M].transition=w(I)||void 0},Ko.prototype.serialize=function(){for(var M={},I=0,W=Object.keys(this._values);I<W.length;I+=1){var oe=W[I],ge=this.getValue(oe);void 0!==ge&&(M[oe]=ge);var Te=this.getTransition(oe);void 0!==Te&&(M[oe+"-transition"]=Te)}return M},Ko.prototype.transitioned=function(M,I){for(var W=new qa(this._properties),oe=0,ge=Object.keys(this._values);oe<ge.length;oe+=1){var Te=ge[oe];W._values[Te]=this._values[Te].transitioned(M,I._values[Te])}return W},Ko.prototype.untransitioned=function(){for(var M=new qa(this._properties),I=0,W=Object.keys(this._values);I<W.length;I+=1){var oe=W[I];M._values[oe]=this._values[oe].untransitioned()}return M};var Bs=function(M,I,W,oe,ge){this.property=M,this.value=I,this.begin=ge+oe.delay||0,this.end=this.begin+oe.duration||0,M.specification.transition&&(oe.delay||oe.duration)&&(this.prior=W)};Bs.prototype.possiblyEvaluate=function(M,I,W){var oe=M.now||0,ge=this.value.possiblyEvaluate(M,I,W),Te=this.prior;if(Te){if(oe>this.end)return this.prior=null,ge;if(this.value.isDataDriven())return this.prior=null,ge;if(oe<this.begin)return Te.possiblyEvaluate(M,I,W);var Oe=(oe-this.begin)/(this.end-this.begin);return this.property.interpolate(Te.possiblyEvaluate(M,I,W),ge,function(Ve){if(Ve<=0)return 0;if(Ve>=1)return 1;var tt=Ve*Ve,pt=tt*Ve;return 4*(Ve<.5?pt:3*(Ve-tt)+pt-.75)}(Oe))}return ge};var qa=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};qa.prototype.possiblyEvaluate=function(M,I,W){for(var oe=new ps(this._properties),ge=0,Te=Object.keys(this._values);ge<Te.length;ge+=1){var Oe=Te[ge];oe._values[Oe]=this._values[Oe].possiblyEvaluate(M,I,W)}return oe},qa.prototype.hasTransition=function(){for(var M=0,I=Object.keys(this._values);M<I.length;M+=1)if(this._values[I[M]].prior)return!0;return!1};var Vs=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};Vs.prototype.getValue=function(M){return w(this._values[M].value)},Vs.prototype.setValue=function(M,I){this._values[M]=new yo(this._values[M].property,null===I?void 0:w(I))},Vs.prototype.serialize=function(){for(var M={},I=0,W=Object.keys(this._values);I<W.length;I+=1){var oe=W[I],ge=this.getValue(oe);void 0!==ge&&(M[oe]=ge)}return M},Vs.prototype.possiblyEvaluate=function(M,I,W){for(var oe=new ps(this._properties),ge=0,Te=Object.keys(this._values);ge<Te.length;ge+=1){var Oe=Te[ge];oe._values[Oe]=this._values[Oe].possiblyEvaluate(M,I,W)}return oe};var Ga=function(M,I,W){this.property=M,this.value=I,this.parameters=W};Ga.prototype.isConstant=function(){return"constant"===this.value.kind},Ga.prototype.constantOr=function(M){return"constant"===this.value.kind?this.value.value:M},Ga.prototype.evaluate=function(M,I,W,oe){return this.property.evaluate(this.value,this.parameters,M,I,W,oe)};var ps=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};ps.prototype.get=function(M){return this._values[M]};var yi=function(M){this.specification=M};yi.prototype.possiblyEvaluate=function(M,I){return M.expression.evaluate(I)},yi.prototype.interpolate=function(M,I,W){var oe=Fn[this.specification.type];return oe?oe(M,I,W):M};var Pi=function(M,I){this.specification=M,this.overrides=I};Pi.prototype.possiblyEvaluate=function(M,I,W,oe){return new Ga(this,"constant"===M.expression.kind||"camera"===M.expression.kind?{kind:"constant",value:M.expression.evaluate(I,null,{},W,oe)}:M.expression,I)},Pi.prototype.interpolate=function(M,I,W){if("constant"!==M.value.kind||"constant"!==I.value.kind)return M;if(void 0===M.value.value||void 0===I.value.value)return new Ga(this,{kind:"constant",value:void 0},M.parameters);var oe=Fn[this.specification.type];return oe?new Ga(this,{kind:"constant",value:oe(M.value.value,I.value.value,W)},M.parameters):M},Pi.prototype.evaluate=function(M,I,W,oe,ge,Te){return"constant"===M.kind?M.value:M.evaluate(I,W,oe,ge,Te)};var Ps=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.possiblyEvaluate=function(W,oe,ge,Te){if(void 0===W.value)return new Ga(this,{kind:"constant",value:void 0},oe);if("constant"===W.expression.kind){var Oe=W.expression.evaluate(oe,null,{},ge,Te),Ve="resolvedImage"===W.property.specification.type&&"string"!=typeof Oe?Oe.name:Oe,tt=this._calculate(Ve,Ve,Ve,oe);return new Ga(this,{kind:"constant",value:tt},oe)}if("camera"===W.expression.kind){var pt=this._calculate(W.expression.evaluate({zoom:oe.zoom-1}),W.expression.evaluate({zoom:oe.zoom}),W.expression.evaluate({zoom:oe.zoom+1}),oe);return new Ga(this,{kind:"constant",value:pt},oe)}return new Ga(this,W.expression,oe)},I.prototype.evaluate=function(W,oe,ge,Te,Oe,Ve){if("source"===W.kind){var tt=W.evaluate(oe,ge,Te,Oe,Ve);return this._calculate(tt,tt,tt,oe)}return"composite"===W.kind?this._calculate(W.evaluate({zoom:Math.floor(oe.zoom)-1},ge,Te),W.evaluate({zoom:Math.floor(oe.zoom)},ge,Te),W.evaluate({zoom:Math.floor(oe.zoom)+1},ge,Te),oe):W.value},I.prototype._calculate=function(W,oe,ge,Te){return Te.zoom>Te.zoomHistory.lastIntegerZoom?{from:W,to:oe}:{from:ge,to:oe}},I.prototype.interpolate=function(W){return W},I}(Pi),Hs=function(M){this.specification=M};Hs.prototype.possiblyEvaluate=function(M,I,W,oe){if(void 0!==M.value){if("constant"===M.expression.kind){var ge=M.expression.evaluate(I,null,{},W,oe);return this._calculate(ge,ge,ge,I)}return this._calculate(M.expression.evaluate(new pa(Math.floor(I.zoom-1),I)),M.expression.evaluate(new pa(Math.floor(I.zoom),I)),M.expression.evaluate(new pa(Math.floor(I.zoom+1),I)),I)}},Hs.prototype._calculate=function(M,I,W,oe){return oe.zoom>oe.zoomHistory.lastIntegerZoom?{from:M,to:I}:{from:W,to:I}},Hs.prototype.interpolate=function(M){return M};var ls=function(M){this.specification=M};ls.prototype.possiblyEvaluate=function(M,I,W,oe){return!!M.expression.evaluate(I,null,{},W,oe)},ls.prototype.interpolate=function(){return!1};var Ho=function(M){for(var I in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var W=M[I];W.specification.overridable&&this.overridableProperties.push(I);var oe=this.defaultPropertyValues[I]=new yo(W,void 0),ge=this.defaultTransitionablePropertyValues[I]=new xs(W);this.defaultTransitioningPropertyValues[I]=ge.untransitioned(),this.defaultPossiblyEvaluatedValues[I]=oe.possiblyEvaluate({})}};un("DataDrivenProperty",Pi),un("DataConstantProperty",yi),un("CrossFadedDataDrivenProperty",Ps),un("CrossFadedProperty",Hs),un("ColorRampProperty",ls);var $o=function(M){function I(W,oe){if(M.call(this),this.id=W.id,this.type=W.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==W.type&&(this.metadata=W.metadata,this.minzoom=W.minzoom,this.maxzoom=W.maxzoom,"background"!==W.type&&(this.source=W.source,this.sourceLayer=W["source-layer"],this.filter=W.filter),oe.layout&&(this._unevaluatedLayout=new Vs(oe.layout)),oe.paint)){for(var ge in this._transitionablePaint=new Ko(oe.paint),W.paint)this.setPaintProperty(ge,W.paint[ge],{validate:!1});for(var Te in W.layout)this.setLayoutProperty(Te,W.layout[Te],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ps(oe.paint)}}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},I.prototype.getLayoutProperty=function(W){return"visibility"===W?this.visibility:this._unevaluatedLayout.getValue(W)},I.prototype.setLayoutProperty=function(W,oe,ge){void 0===ge&&(ge={}),null!=oe&&this._validate(An,"layers."+this.id+".layout."+W,W,oe,ge)||("visibility"!==W?this._unevaluatedLayout.setValue(W,oe):this.visibility=oe)},I.prototype.getPaintProperty=function(W){return T(W,"-transition")?this._transitionablePaint.getTransition(W.slice(0,-11)):this._transitionablePaint.getValue(W)},I.prototype.setPaintProperty=function(W,oe,ge){if(void 0===ge&&(ge={}),null!=oe&&this._validate(vn,"layers."+this.id+".paint."+W,W,oe,ge))return!1;if(T(W,"-transition"))return this._transitionablePaint.setTransition(W.slice(0,-11),oe||void 0),!1;var Oe=this._transitionablePaint._values[W],Ve="cross-faded-data-driven"===Oe.property.specification["property-type"],tt=Oe.value.isDataDriven(),pt=Oe.value;this._transitionablePaint.setValue(W,oe),this._handleSpecialPaintPropertyUpdate(W);var bt=this._transitionablePaint._values[W].value;return bt.isDataDriven()||tt||Ve||this._handleOverridablePaintPropertyUpdate(W,pt,bt)},I.prototype._handleSpecialPaintPropertyUpdate=function(W){},I.prototype._handleOverridablePaintPropertyUpdate=function(W,oe,ge){return!1},I.prototype.isHidden=function(W){return!!(this.minzoom&&W<this.minzoom)||!!(this.maxzoom&&W>=this.maxzoom)||"none"===this.visibility},I.prototype.updateTransitions=function(W){this._transitioningPaint=this._transitionablePaint.transitioned(W,this._transitioningPaint)},I.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},I.prototype.recalculate=function(W,oe){W.getCrossfadeParameters&&(this._crossfadeParameters=W.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(W,void 0,oe)),this.paint=this._transitioningPaint.possiblyEvaluate(W,void 0,oe)},I.prototype.serialize=function(){var W={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(W.layout=W.layout||{},W.layout.visibility=this.visibility),k(W,function(oe,ge){return!(void 0===oe||"layout"===ge&&!Object.keys(oe).length||"paint"===ge&&!Object.keys(oe).length)})},I.prototype._validate=function(W,oe,ge,Te,Oe){return void 0===Oe&&(Oe={}),(!Oe||!1!==Oe.validate)&&In(this,W.call(ln,{key:oe,layerType:this.type,objectKey:ge,value:Te,styleSpec:we,style:{glyphs:!0,sprite:!0}}))},I.prototype.is3D=function(){return!1},I.prototype.isTileClipped=function(){return!1},I.prototype.hasOffscreenPass=function(){return!1},I.prototype.resize=function(){},I.prototype.isStateDependent=function(){for(var W in this.paint._values){var oe=this.paint.get(W);if(oe instanceof Ga&&Xo(oe.property.specification)&&("source"===oe.value.kind||"composite"===oe.value.kind)&&oe.value.isStateDependent)return!0}return!1},I}(pe),nl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ms=function(M,I){this._structArray=M,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},sa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function da(M,I){void 0===I&&(I=1);var W=0,oe=0;return{members:M.map(function(ge){var Oe=nl[ge.type].BYTES_PER_ELEMENT,Ve=W=ds(W,Math.max(I,Oe)),tt=ge.components||1;return oe=Math.max(oe,Oe),W+=Oe*tt,{name:ge.name,type:ge.type,components:tt,offset:Ve}}),size:ds(W,Math.max(oe,I)),alignment:I}}function ds(M,I){return Math.ceil(M/I)*I}sa.serialize=function(M,I){return M._trim(),I&&(M.isTransferred=!0,I.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},sa.deserialize=function(M){var I=Object.create(this.prototype);return I.arrayBuffer=M.arrayBuffer,I.length=M.length,I.capacity=M.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I},sa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},sa.prototype.clear=function(){this.length=0},sa.prototype.resize=function(M){this.reserve(M),this.length=M},sa.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}},sa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var bs=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe){var ge=this.length;return this.resize(ge+1),this.emplace(ge,W,oe)},I.prototype.emplace=function(W,oe,ge){var Te=2*W;return this.int16[Te+0]=oe,this.int16[Te+1]=ge,W},I}(sa);bs.prototype.bytesPerElement=4,un("StructArrayLayout2i4",bs);var Ra=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,W,oe,ge,Te)},I.prototype.emplace=function(W,oe,ge,Te,Oe){var Ve=4*W;return this.int16[Ve+0]=oe,this.int16[Ve+1]=ge,this.int16[Ve+2]=Te,this.int16[Ve+3]=Oe,W},I}(sa);Ra.prototype.bytesPerElement=8,un("StructArrayLayout4i8",Ra);var _s=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te,Oe,Ve){var tt=this.length;return this.resize(tt+1),this.emplace(tt,W,oe,ge,Te,Oe,Ve)},I.prototype.emplace=function(W,oe,ge,Te,Oe,Ve,tt){var pt=6*W;return this.int16[pt+0]=oe,this.int16[pt+1]=ge,this.int16[pt+2]=Te,this.int16[pt+3]=Oe,this.int16[pt+4]=Ve,this.int16[pt+5]=tt,W},I}(sa);_s.prototype.bytesPerElement=12,un("StructArrayLayout2i4i12",_s);var Ns=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te,Oe,Ve){var tt=this.length;return this.resize(tt+1),this.emplace(tt,W,oe,ge,Te,Oe,Ve)},I.prototype.emplace=function(W,oe,ge,Te,Oe,Ve,tt){var pt=4*W,bt=8*W;return this.int16[pt+0]=oe,this.int16[pt+1]=ge,this.uint8[bt+4]=Te,this.uint8[bt+5]=Oe,this.uint8[bt+6]=Ve,this.uint8[bt+7]=tt,W},I}(sa);Ns.prototype.bytesPerElement=8,un("StructArrayLayout2i4ub8",Ns);var Os=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht){var tr=this.length;return this.resize(tr+1),this.emplace(tr,W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht)},I.prototype.emplace=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr){var Jt=9*W,mr=18*W;return this.uint16[Jt+0]=oe,this.uint16[Jt+1]=ge,this.uint16[Jt+2]=Te,this.uint16[Jt+3]=Oe,this.uint16[Jt+4]=Ve,this.uint16[Jt+5]=tt,this.uint16[Jt+6]=pt,this.uint16[Jt+7]=bt,this.uint8[mr+16]=Ht,this.uint8[mr+17]=tr,W},I}(sa);Os.prototype.bytesPerElement=18,un("StructArrayLayout8ui2ub18",Os);var qo=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt){var mr=this.length;return this.resize(mr+1),this.emplace(mr,W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt)},I.prototype.emplace=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr){var Pr=12*W;return this.int16[Pr+0]=oe,this.int16[Pr+1]=ge,this.int16[Pr+2]=Te,this.int16[Pr+3]=Oe,this.uint16[Pr+4]=Ve,this.uint16[Pr+5]=tt,this.uint16[Pr+6]=pt,this.uint16[Pr+7]=bt,this.int16[Pr+8]=Ht,this.int16[Pr+9]=tr,this.int16[Pr+10]=Jt,this.int16[Pr+11]=mr,W},I}(sa);qo.prototype.bytesPerElement=24,un("StructArrayLayout4i4ui4i24",qo);var gs=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge){var Te=this.length;return this.resize(Te+1),this.emplace(Te,W,oe,ge)},I.prototype.emplace=function(W,oe,ge,Te){var Oe=3*W;return this.float32[Oe+0]=oe,this.float32[Oe+1]=ge,this.float32[Oe+2]=Te,W},I}(sa);gs.prototype.bytesPerElement=12,un("StructArrayLayout3f12",gs);var Ws=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W){var oe=this.length;return this.resize(oe+1),this.emplace(oe,W)},I.prototype.emplace=function(W,oe){return this.uint32[1*W+0]=oe,W},I}(sa);Ws.prototype.bytesPerElement=4,un("StructArrayLayout1ul4",Ws);var ul=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt){var Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,W,oe,ge,Te,Oe,Ve,tt,pt,bt)},I.prototype.emplace=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht){var tr=10*W,Jt=5*W;return this.int16[tr+0]=oe,this.int16[tr+1]=ge,this.int16[tr+2]=Te,this.int16[tr+3]=Oe,this.int16[tr+4]=Ve,this.int16[tr+5]=tt,this.uint32[Jt+3]=pt,this.uint16[tr+8]=bt,this.uint16[tr+9]=Ht,W},I}(sa);ul.prototype.bytesPerElement=20,un("StructArrayLayout6i1ul2ui20",ul);var Ss=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te,Oe,Ve){var tt=this.length;return this.resize(tt+1),this.emplace(tt,W,oe,ge,Te,Oe,Ve)},I.prototype.emplace=function(W,oe,ge,Te,Oe,Ve,tt){var pt=6*W;return this.int16[pt+0]=oe,this.int16[pt+1]=ge,this.int16[pt+2]=Te,this.int16[pt+3]=Oe,this.int16[pt+4]=Ve,this.int16[pt+5]=tt,W},I}(sa);Ss.prototype.bytesPerElement=12,un("StructArrayLayout2i2i2i12",Ss);var qs=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te,Oe){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,W,oe,ge,Te,Oe)},I.prototype.emplace=function(W,oe,ge,Te,Oe,Ve){var tt=4*W,pt=8*W;return this.float32[tt+0]=oe,this.float32[tt+1]=ge,this.float32[tt+2]=Te,this.int16[pt+6]=Oe,this.int16[pt+7]=Ve,W},I}(sa);qs.prototype.bytesPerElement=16,un("StructArrayLayout2f1f2i16",qs);var js=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,W,oe,ge,Te)},I.prototype.emplace=function(W,oe,ge,Te,Oe){var Ve=12*W,tt=3*W;return this.uint8[Ve+0]=oe,this.uint8[Ve+1]=ge,this.float32[tt+1]=Te,this.float32[tt+2]=Oe,W},I}(sa);js.prototype.bytesPerElement=12,un("StructArrayLayout2ub2f12",js);var xo=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge){var Te=this.length;return this.resize(Te+1),this.emplace(Te,W,oe,ge)},I.prototype.emplace=function(W,oe,ge,Te){var Oe=3*W;return this.uint16[Oe+0]=oe,this.uint16[Oe+1]=ge,this.uint16[Oe+2]=Te,W},I}(sa);xo.prototype.bytesPerElement=6,un("StructArrayLayout3ui6",xo);var fl=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr,Pr,Gr,qr,$r){var tn=this.length;return this.resize(tn+1),this.emplace(tn,W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr,Pr,Gr,qr,$r)},I.prototype.emplace=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr,Pr,Gr,qr,$r,tn){var cn=24*W,kn=12*W,Cn=48*W;return this.int16[cn+0]=oe,this.int16[cn+1]=ge,this.uint16[cn+2]=Te,this.uint16[cn+3]=Oe,this.uint32[kn+2]=Ve,this.uint32[kn+3]=tt,this.uint32[kn+4]=pt,this.uint16[cn+10]=bt,this.uint16[cn+11]=Ht,this.uint16[cn+12]=tr,this.float32[kn+7]=Jt,this.float32[kn+8]=mr,this.uint8[Cn+36]=Pr,this.uint8[Cn+37]=Gr,this.uint8[Cn+38]=qr,this.uint32[kn+10]=$r,this.int16[cn+22]=tn,W},I}(sa);fl.prototype.bytesPerElement=48,un("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",fl);var il=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr,Pr,Gr,qr,$r,tn,cn,kn,Cn,Kn,Zn,ri,gi,mi,ci,Ai){var _i=this.length;return this.resize(_i+1),this.emplace(_i,W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr,Pr,Gr,qr,$r,tn,cn,kn,Cn,Kn,Zn,ri,gi,mi,ci,Ai)},I.prototype.emplace=function(W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr,Pr,Gr,qr,$r,tn,cn,kn,Cn,Kn,Zn,ri,gi,mi,ci,Ai,_i){var vi=34*W,ha=17*W;return this.int16[vi+0]=oe,this.int16[vi+1]=ge,this.int16[vi+2]=Te,this.int16[vi+3]=Oe,this.int16[vi+4]=Ve,this.int16[vi+5]=tt,this.int16[vi+6]=pt,this.int16[vi+7]=bt,this.uint16[vi+8]=Ht,this.uint16[vi+9]=tr,this.uint16[vi+10]=Jt,this.uint16[vi+11]=mr,this.uint16[vi+12]=Pr,this.uint16[vi+13]=Gr,this.uint16[vi+14]=qr,this.uint16[vi+15]=$r,this.uint16[vi+16]=tn,this.uint16[vi+17]=cn,this.uint16[vi+18]=kn,this.uint16[vi+19]=Cn,this.uint16[vi+20]=Kn,this.uint16[vi+21]=Zn,this.uint16[vi+22]=ri,this.uint32[ha+12]=gi,this.float32[ha+13]=mi,this.float32[ha+14]=ci,this.float32[ha+15]=Ai,this.float32[ha+16]=_i,W},I}(sa);il.prototype.bytesPerElement=68,un("StructArrayLayout8i15ui1ul4f68",il);var ce=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W){var oe=this.length;return this.resize(oe+1),this.emplace(oe,W)},I.prototype.emplace=function(W,oe){return this.float32[1*W+0]=oe,W},I}(sa);ce.prototype.bytesPerElement=4,un("StructArrayLayout1f4",ce);var L=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge){var Te=this.length;return this.resize(Te+1),this.emplace(Te,W,oe,ge)},I.prototype.emplace=function(W,oe,ge,Te){var Oe=3*W;return this.int16[Oe+0]=oe,this.int16[Oe+1]=ge,this.int16[Oe+2]=Te,W},I}(sa);L.prototype.bytesPerElement=6,un("StructArrayLayout3i6",L);var R=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge){var Te=this.length;return this.resize(Te+1),this.emplace(Te,W,oe,ge)},I.prototype.emplace=function(W,oe,ge,Te){var Ve=4*W;return this.uint32[2*W+0]=oe,this.uint16[Ve+2]=ge,this.uint16[Ve+3]=Te,W},I}(sa);R.prototype.bytesPerElement=8,un("StructArrayLayout1ul2ui8",R);var F=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe){var ge=this.length;return this.resize(ge+1),this.emplace(ge,W,oe)},I.prototype.emplace=function(W,oe,ge){var Te=2*W;return this.uint16[Te+0]=oe,this.uint16[Te+1]=ge,W},I}(sa);F.prototype.bytesPerElement=4,un("StructArrayLayout2ui4",F);var Y=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W){var oe=this.length;return this.resize(oe+1),this.emplace(oe,W)},I.prototype.emplace=function(W,oe){return this.uint16[1*W+0]=oe,W},I}(sa);Y.prototype.bytesPerElement=2,un("StructArrayLayout1ui2",Y);var ae=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe){var ge=this.length;return this.resize(ge+1),this.emplace(ge,W,oe)},I.prototype.emplace=function(W,oe,ge){var Te=2*W;return this.float32[Te+0]=oe,this.float32[Te+1]=ge,W},I}(sa);ae.prototype.bytesPerElement=8,un("StructArrayLayout2f8",ae);var fe=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(W,oe,ge,Te){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,W,oe,ge,Te)},I.prototype.emplace=function(W,oe,ge,Te,Oe){var Ve=4*W;return this.float32[Ve+0]=oe,this.float32[Ve+1]=ge,this.float32[Ve+2]=Te,this.float32[Ve+3]=Oe,W},I}(sa);fe.prototype.bytesPerElement=16,un("StructArrayLayout4f16",fe);var ve=function(M){function I(){M.apply(this,arguments)}M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I;var W={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return W.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},W.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},W.x1.get=function(){return this._structArray.int16[this._pos2+2]},W.y1.get=function(){return this._structArray.int16[this._pos2+3]},W.x2.get=function(){return this._structArray.int16[this._pos2+4]},W.y2.get=function(){return this._structArray.int16[this._pos2+5]},W.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},W.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},W.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},W.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(I.prototype,W),I}(Ms);ve.prototype.size=20;var Ae=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.get=function(W){return new ve(this,W)},I}(ul);un("CollisionBoxArray",Ae);var Pe=function(M){function I(){M.apply(this,arguments)}M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I;var W={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return W.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},W.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},W.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},W.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},W.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},W.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},W.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},W.segment.get=function(){return this._structArray.uint16[this._pos2+10]},W.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},W.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},W.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},W.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},W.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},W.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},W.placedOrientation.set=function(oe){this._structArray.uint8[this._pos1+37]=oe},W.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},W.hidden.set=function(oe){this._structArray.uint8[this._pos1+38]=oe},W.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},W.crossTileID.set=function(oe){this._structArray.uint32[this._pos4+10]=oe},W.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(I.prototype,W),I}(Ms);Pe.prototype.size=48;var Ge=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.get=function(W){return new Pe(this,W)},I}(fl);un("PlacedSymbolArray",Ge);var Qe=function(M){function I(){M.apply(this,arguments)}M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I;var W={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return W.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},W.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},W.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},W.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},W.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},W.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},W.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},W.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},W.key.get=function(){return this._structArray.uint16[this._pos2+8]},W.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},W.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},W.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},W.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},W.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},W.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},W.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},W.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},W.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},W.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},W.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},W.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},W.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},W.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},W.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},W.crossTileID.set=function(oe){this._structArray.uint32[this._pos4+12]=oe},W.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},W.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},W.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},W.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(I.prototype,W),I}(Ms);Qe.prototype.size=68;var st=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.get=function(W){return new Qe(this,W)},I}(il);un("SymbolInstanceArray",st);var Mt=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.getoffsetX=function(W){return this.float32[1*W+0]},I}(ce);un("GlyphOffsetArray",Mt);var It=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.getx=function(W){return this.int16[3*W+0]},I.prototype.gety=function(W){return this.int16[3*W+1]},I.prototype.gettileUnitDistanceFromAnchor=function(W){return this.int16[3*W+2]},I}(L);un("SymbolLineVertexArray",It);var Ct=function(M){function I(){M.apply(this,arguments)}M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I;var W={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return W.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},W.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},W.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(I.prototype,W),I}(Ms);Ct.prototype.size=8;var Pt=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.get=function(W){return new Ct(this,W)},I}(R);un("FeatureIndexArray",Pt);var kt=da([{name:"a_pos",components:2,type:"Int16"}],4).members,Vt=function(M){void 0===M&&(M=[]),this.segments=M};function Nt(M,I){return 256*(M=s(Math.floor(M),0,255))+s(Math.floor(I),0,255)}Vt.prototype.prepareSegment=function(M,I,W,oe){var ge=this.segments[this.segments.length-1];return M>Vt.MAX_VERTEX_ARRAY_LENGTH&&A("Max vertices per segment is "+Vt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!ge||ge.vertexLength+M>Vt.MAX_VERTEX_ARRAY_LENGTH||ge.sortKey!==oe)&&(ge={vertexOffset:I.length,primitiveOffset:W.length,vertexLength:0,primitiveLength:0},void 0!==oe&&(ge.sortKey=oe),this.segments.push(ge)),ge},Vt.prototype.get=function(){return this.segments},Vt.prototype.destroy=function(){for(var M=0,I=this.segments;M<I.length;M+=1){var W=I[M];for(var oe in W.vaos)W.vaos[oe].destroy()}},Vt.simpleSegment=function(M,I,W,oe){return new Vt([{vertexOffset:M,primitiveOffset:I,vertexLength:W,primitiveLength:oe,vaos:{},sortKey:0}])},Vt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,un("SegmentVector",Vt);var Yt=da([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),fr=n(function(M){M.exports=function(I,W){var oe,ge,Te,Oe,Ve,tt,pt,bt;for(ge=I.length-(oe=3&I.length),Te=W,Ve=3432918353,tt=461845907,bt=0;bt<ge;)pt=255&I.charCodeAt(bt)|(255&I.charCodeAt(++bt))<<8|(255&I.charCodeAt(++bt))<<16|(255&I.charCodeAt(++bt))<<24,++bt,Te=27492+(65535&(Oe=5*(65535&(Te=(Te^=pt=(65535&(pt=(pt=(65535&pt)*Ve+(((pt>>>16)*Ve&65535)<<16)&4294967295)<<15|pt>>>17))*tt+(((pt>>>16)*tt&65535)<<16)&4294967295)<<13|Te>>>19))+((5*(Te>>>16)&65535)<<16)&4294967295))+((58964+(Oe>>>16)&65535)<<16);switch(pt=0,oe){case 3:pt^=(255&I.charCodeAt(bt+2))<<16;case 2:pt^=(255&I.charCodeAt(bt+1))<<8;case 1:Te^=pt=(65535&(pt=(pt=(65535&(pt^=255&I.charCodeAt(bt)))*Ve+(((pt>>>16)*Ve&65535)<<16)&4294967295)<<15|pt>>>17))*tt+(((pt>>>16)*tt&65535)<<16)&4294967295}return Te^=I.length,Te=2246822507*(65535&(Te^=Te>>>16))+((2246822507*(Te>>>16)&65535)<<16)&4294967295,Te=3266489909*(65535&(Te^=Te>>>13))+((3266489909*(Te>>>16)&65535)<<16)&4294967295,(Te^=Te>>>16)>>>0}}),Mr=n(function(M){M.exports=function(I,W){for(var oe,ge=I.length,Te=W^ge,Oe=0;ge>=4;)oe=1540483477*(65535&(oe=255&I.charCodeAt(Oe)|(255&I.charCodeAt(++Oe))<<8|(255&I.charCodeAt(++Oe))<<16|(255&I.charCodeAt(++Oe))<<24))+((1540483477*(oe>>>16)&65535)<<16),Te=1540483477*(65535&Te)+((1540483477*(Te>>>16)&65535)<<16)^(oe=1540483477*(65535&(oe^=oe>>>24))+((1540483477*(oe>>>16)&65535)<<16)),ge-=4,++Oe;switch(ge){case 3:Te^=(255&I.charCodeAt(Oe+2))<<16;case 2:Te^=(255&I.charCodeAt(Oe+1))<<8;case 1:Te=1540483477*(65535&(Te^=255&I.charCodeAt(Oe)))+((1540483477*(Te>>>16)&65535)<<16)}return Te=1540483477*(65535&(Te^=Te>>>13))+((1540483477*(Te>>>16)&65535)<<16),(Te^=Te>>>15)>>>0}}),jr=fr,fn=Mr;jr.murmur3=fr,jr.murmur2=fn;var on=function(){this.ids=[],this.positions=[],this.indexed=!1};on.prototype.add=function(M,I,W,oe){this.ids.push(yn(M)),this.positions.push(I,W,oe)},on.prototype.getPositions=function(M){for(var I=yn(M),W=0,oe=this.ids.length-1;W<oe;){var ge=W+oe>>1;this.ids[ge]>=I?oe=ge:W=ge+1}for(var Te=[];this.ids[W]===I;)Te.push({index:this.positions[3*W],start:this.positions[3*W+1],end:this.positions[3*W+2]}),W++;return Te},on.serialize=function(M,I){var W=new Float64Array(M.ids),oe=new Uint32Array(M.positions);return function ge(Te,Oe,Ve,tt){for(;Ve<tt;){for(var pt=Te[Ve+tt>>1],bt=Ve-1,Ht=tt+1;;){do{bt++}while(Te[bt]<pt);do{Ht--}while(Te[Ht]>pt);if(bt>=Ht)break;Jn(Te,bt,Ht),Jn(Oe,3*bt,3*Ht),Jn(Oe,3*bt+1,3*Ht+1),Jn(Oe,3*bt+2,3*Ht+2)}Ht-Ve<tt-Ht?(ge(Te,Oe,Ve,Ht),Ve=Ht+1):(ge(Te,Oe,Ht+1,tt),tt=Ht)}}(W,oe,0,W.length-1),I&&I.push(W.buffer,oe.buffer),{ids:W,positions:oe}},on.deserialize=function(M){var I=new on;return I.ids=M.ids,I.positions=M.positions,I.indexed=!0,I};var wn=Math.pow(2,53)-1;function yn(M){var I=+M;return!isNaN(I)&&I<=wn?I:jr(String(M))}function Jn(M,I,W){var oe=M[I];M[I]=M[W],M[W]=oe}un("FeaturePositionMap",on);var ii=function(M,I){this.gl=M.gl,this.location=I},xi=function(M){function I(W,oe){M.call(this,W,oe),this.current=0}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(W){this.current!==W&&(this.current=W,this.gl.uniform1i(this.location,W))},I}(ii),en=function(M){function I(W,oe){M.call(this,W,oe),this.current=0}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(W){this.current!==W&&(this.current=W,this.gl.uniform1f(this.location,W))},I}(ii),On=function(M){function I(W,oe){M.call(this,W,oe),this.current=[0,0]}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(W){W[0]===this.current[0]&&W[1]===this.current[1]||(this.current=W,this.gl.uniform2f(this.location,W[0],W[1]))},I}(ii),ti=function(M){function I(W,oe){M.call(this,W,oe),this.current=[0,0,0]}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(W){W[0]===this.current[0]&&W[1]===this.current[1]&&W[2]===this.current[2]||(this.current=W,this.gl.uniform3f(this.location,W[0],W[1],W[2]))},I}(ii),Qn=function(M){function I(W,oe){M.call(this,W,oe),this.current=[0,0,0,0]}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(W){W[0]===this.current[0]&&W[1]===this.current[1]&&W[2]===this.current[2]&&W[3]===this.current[3]||(this.current=W,this.gl.uniform4f(this.location,W[0],W[1],W[2],W[3]))},I}(ii),pi=function(M){function I(W,oe){M.call(this,W,oe),this.current=nr.transparent}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(W){W.r===this.current.r&&W.g===this.current.g&&W.b===this.current.b&&W.a===this.current.a||(this.current=W,this.gl.uniform4f(this.location,W.r,W.g,W.b,W.a))},I}(ii),wi=new Float32Array(16),ji=function(M){function I(W,oe){M.call(this,W,oe),this.current=wi}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(W){if(W[12]!==this.current[12]||W[0]!==this.current[0])return this.current=W,void this.gl.uniformMatrix4fv(this.location,!1,W);for(var oe=1;oe<16;oe++)if(W[oe]!==this.current[oe]){this.current=W,this.gl.uniformMatrix4fv(this.location,!1,W);break}},I}(ii);function li(M){return[Nt(255*M.r,255*M.g),Nt(255*M.b,255*M.a)]}var Oi=function(M,I,W){this.value=M,this.uniformNames=I.map(function(oe){return"u_"+oe}),this.type=W};Oi.prototype.setUniform=function(M,I,W){M.set(W.constantOr(this.value))},Oi.prototype.getBinding=function(M,I,W){return"color"===this.type?new pi(M,I):new en(M,I)};var Li=function(M,I){this.uniformNames=I.map(function(W){return"u_"+W}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Li.prototype.setConstantPatternPositions=function(M,I){this.pixelRatioFrom=I.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=I.tlbr,this.patternTo=M.tlbr},Li.prototype.setUniform=function(M,I,W,oe){var ge="u_pattern_to"===oe?this.patternTo:"u_pattern_from"===oe?this.patternFrom:"u_pixel_ratio_to"===oe?this.pixelRatioTo:"u_pixel_ratio_from"===oe?this.pixelRatioFrom:null;ge&&M.set(ge)},Li.prototype.getBinding=function(M,I,W){return"u_pattern"===W.substr(0,9)?new Qn(M,I):new en(M,I)};var Yi=function(M,I,W,oe){this.expression=M,this.type=W,this.maxValue=0,this.paintVertexAttributes=I.map(function(ge){return{name:"a_"+ge,type:"Float32",components:"color"===W?2:1,offset:0}}),this.paintVertexArray=new oe};Yi.prototype.populatePaintArray=function(M,I,W,oe,ge){var Te=this.paintVertexArray.length,Oe=this.expression.evaluate(new pa(0),I,{},oe,[],ge);this.paintVertexArray.resize(M),this._setPaintValue(Te,M,Oe)},Yi.prototype.updatePaintArray=function(M,I,W,oe){var ge=this.expression.evaluate({zoom:0},W,oe);this._setPaintValue(M,I,ge)},Yi.prototype._setPaintValue=function(M,I,W){if("color"===this.type)for(var oe=li(W),ge=M;ge<I;ge++)this.paintVertexArray.emplace(ge,oe[0],oe[1]);else{for(var Te=M;Te<I;Te++)this.paintVertexArray.emplace(Te,W);this.maxValue=Math.max(this.maxValue,Math.abs(W))}},Yi.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ei=function(M,I,W,oe,ge,Te){this.expression=M,this.uniformNames=I.map(function(Oe){return"u_"+Oe+"_t"}),this.type=W,this.useIntegerZoom=oe,this.zoom=ge,this.maxValue=0,this.paintVertexAttributes=I.map(function(Oe){return{name:"a_"+Oe,type:"Float32",components:"color"===W?4:2,offset:0}}),this.paintVertexArray=new Te};Ei.prototype.populatePaintArray=function(M,I,W,oe,ge){var Te=this.expression.evaluate(new pa(this.zoom),I,{},oe,[],ge),Oe=this.expression.evaluate(new pa(this.zoom+1),I,{},oe,[],ge),Ve=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(Ve,M,Te,Oe)},Ei.prototype.updatePaintArray=function(M,I,W,oe){var ge=this.expression.evaluate({zoom:this.zoom},W,oe),Te=this.expression.evaluate({zoom:this.zoom+1},W,oe);this._setPaintValue(M,I,ge,Te)},Ei.prototype._setPaintValue=function(M,I,W,oe){if("color"===this.type)for(var ge=li(W),Te=li(oe),Oe=M;Oe<I;Oe++)this.paintVertexArray.emplace(Oe,ge[0],ge[1],Te[0],Te[1]);else{for(var Ve=M;Ve<I;Ve++)this.paintVertexArray.emplace(Ve,W,oe);this.maxValue=Math.max(this.maxValue,Math.abs(W),Math.abs(oe))}},Ei.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ei.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ei.prototype.setUniform=function(M,I){var W=this.useIntegerZoom?Math.floor(I.zoom):I.zoom,oe=s(this.expression.interpolationFactor(W,this.zoom,this.zoom+1),0,1);M.set(oe)},Ei.prototype.getBinding=function(M,I,W){return new en(M,I)};var Fi=function(M,I,W,oe,ge,Te){this.expression=M,this.type=I,this.useIntegerZoom=W,this.zoom=oe,this.layerId=Te,this.zoomInPaintVertexArray=new ge,this.zoomOutPaintVertexArray=new ge};Fi.prototype.populatePaintArray=function(M,I,W){var oe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(oe,M,I.patterns&&I.patterns[this.layerId],W)},Fi.prototype.updatePaintArray=function(M,I,W,oe,ge){this._setPaintValues(M,I,W.patterns&&W.patterns[this.layerId],ge)},Fi.prototype._setPaintValues=function(M,I,W,oe){if(oe&&W){var Ve=oe[W.min],tt=oe[W.mid],pt=oe[W.max];if(Ve&&tt&&pt)for(var bt=M;bt<I;bt++)this.zoomInPaintVertexArray.emplace(bt,tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],Ve.tl[0],Ve.tl[1],Ve.br[0],Ve.br[1],tt.pixelRatio,Ve.pixelRatio),this.zoomOutPaintVertexArray.emplace(bt,tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],pt.tl[0],pt.tl[1],pt.br[0],pt.br[1],tt.pixelRatio,pt.pixelRatio)}},Fi.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,Yt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,Yt.members,this.expression.isStateDependent))},Fi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Vi=function(M,I,W,oe){this.binders={},this.layoutAttributes=oe,this._buffers=[];var ge=[];for(var Te in M.paint._values)if(W(Te)){var Oe=M.paint.get(Te);if(Oe instanceof Ga&&Xo(Oe.property.specification)){var Ve=ja(Te,M.type),tt=Oe.value,pt=Oe.property.specification.type,bt=Oe.property.useIntegerZoom,Ht=Oe.property.specification["property-type"],tr="cross-faded"===Ht||"cross-faded-data-driven"===Ht;if("constant"===tt.kind)this.binders[Te]=tr?new Li(tt.value,Ve):new Oi(tt.value,Ve,pt),ge.push("/u_"+Te);else if("source"===tt.kind||tr){var Jt=Ua(Te,pt,"source");this.binders[Te]=tr?new Fi(tt,pt,bt,I,Jt,M.id):new Yi(tt,Ve,pt,Jt),ge.push("/a_"+Te)}else{var mr=Ua(Te,pt,"composite");this.binders[Te]=new Ei(tt,Ve,pt,bt,I,mr),ge.push("/z_"+Te)}}}this.cacheKey=ge.sort().join("")};Vi.prototype.getMaxValue=function(M){var I=this.binders[M];return I instanceof Yi||I instanceof Ei?I.maxValue:0},Vi.prototype.populatePaintArrays=function(M,I,W,oe,ge){for(var Te in this.binders){var Oe=this.binders[Te];(Oe instanceof Yi||Oe instanceof Ei||Oe instanceof Fi)&&Oe.populatePaintArray(M,I,W,oe,ge)}},Vi.prototype.setConstantPatternPositions=function(M,I){for(var W in this.binders){var oe=this.binders[W];oe instanceof Li&&oe.setConstantPatternPositions(M,I)}},Vi.prototype.updatePaintArrays=function(M,I,W,oe,ge){var Te=!1;for(var Oe in M)for(var Ve=0,tt=I.getPositions(Oe);Ve<tt.length;Ve+=1){var pt=tt[Ve],bt=W.feature(pt.index);for(var Ht in this.binders){var tr=this.binders[Ht];if((tr instanceof Yi||tr instanceof Ei||tr instanceof Fi)&&!0===tr.expression.isStateDependent){var Jt=oe.paint.get(Ht);tr.expression=Jt.value,tr.updatePaintArray(pt.start,pt.end,bt,M[Oe],ge),Te=!0}}}return Te},Vi.prototype.defines=function(){var M=[];for(var I in this.binders){var W=this.binders[I];(W instanceof Oi||W instanceof Li)&&M.push.apply(M,W.uniformNames.map(function(oe){return"#define HAS_UNIFORM_"+oe}))}return M},Vi.prototype.getPaintVertexBuffers=function(){return this._buffers},Vi.prototype.getUniforms=function(M,I){var W=[];for(var oe in this.binders){var ge=this.binders[oe];if(ge instanceof Oi||ge instanceof Li||ge instanceof Ei)for(var Te=0,Oe=ge.uniformNames;Te<Oe.length;Te+=1){var Ve=Oe[Te];if(I[Ve]){var tt=ge.getBinding(M,I[Ve],Ve);W.push({name:Ve,property:oe,binding:tt})}}}return W},Vi.prototype.setUniforms=function(M,I,W,oe){for(var ge=0,Te=I;ge<Te.length;ge+=1){var Oe=Te[ge],Ve=Oe.name,tt=Oe.property;this.binders[tt].setUniform(Oe.binding,oe,W.get(tt),Ve)}},Vi.prototype.updatePaintBuffers=function(M){for(var I in this._buffers=[],this.binders){var W=this.binders[I];if(M&&W instanceof Fi){var oe=2===M.fromScale?W.zoomInPaintVertexBuffer:W.zoomOutPaintVertexBuffer;oe&&this._buffers.push(oe)}else(W instanceof Yi||W instanceof Ei)&&W.paintVertexBuffer&&this._buffers.push(W.paintVertexBuffer)}},Vi.prototype.upload=function(M){for(var I in this.binders){var W=this.binders[I];(W instanceof Yi||W instanceof Ei||W instanceof Fi)&&W.upload(M)}this.updatePaintBuffers()},Vi.prototype.destroy=function(){for(var M in this.binders){var I=this.binders[M];(I instanceof Yi||I instanceof Ei||I instanceof Fi)&&I.destroy()}};var ya=function(M,I,W,oe){void 0===oe&&(oe=function(){return!0}),this.programConfigurations={};for(var ge=0,Te=I;ge<Te.length;ge+=1){var Oe=Te[ge];this.programConfigurations[Oe.id]=new Vi(Oe,W,oe,M)}this.needsUpload=!1,this._featureMap=new on,this._bufferOffset=0};function ja(M,I){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(I+"-","").replace(/-/g,"_")]}function Ua(M,I,W){var ge={"line-pattern":{source:Os,composite:Os},"fill-pattern":{source:Os,composite:Os},"fill-extrusion-pattern":{source:Os,composite:Os}}[M];return ge&&ge[W]||{color:{source:ae,composite:fe},number:{source:ce,composite:ae}}[I][W]}ya.prototype.populatePaintArrays=function(M,I,W,oe,ge,Te){for(var Oe in this.programConfigurations)this.programConfigurations[Oe].populatePaintArrays(M,I,oe,ge,Te);void 0!==I.id&&this._featureMap.add(I.id,W,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},ya.prototype.updatePaintArrays=function(M,I,W,oe){for(var ge=0,Te=W;ge<Te.length;ge+=1){var Oe=Te[ge];this.needsUpload=this.programConfigurations[Oe.id].updatePaintArrays(M,this._featureMap,I,Oe,oe)||this.needsUpload}},ya.prototype.get=function(M){return this.programConfigurations[M]},ya.prototype.upload=function(M){if(this.needsUpload){for(var I in this.programConfigurations)this.programConfigurations[I].upload(M);this.needsUpload=!1}},ya.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},un("ConstantBinder",Oi),un("CrossFadedConstantBinder",Li),un("SourceExpressionBinder",Yi),un("CrossFadedCompositeBinder",Fi),un("CompositeExpressionBinder",Ei),un("ProgramConfiguration",Vi,{omit:["_buffers"]}),un("ProgramConfigurationSet",ya);var Fa=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function Sa(M){for(var I=8192/M.extent,W=M.loadGeometry(),oe=0;oe<W.length;oe++)for(var ge=W[oe],Te=0;Te<ge.length;Te++){var Oe=ge[Te];Oe.x=Math.round(Oe.x*I),Oe.y=Math.round(Oe.y*I),(Oe.x<Fa.min||Oe.x>Fa.max||Oe.y<Fa.min||Oe.y>Fa.max)&&(A("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Oe.x=s(Oe.x,Fa.min,Fa.max),Oe.y=s(Oe.y,Fa.min,Fa.max))}return W}function Lo(M,I,W,oe,ge){M.emplaceBack(2*I+(oe+1)/2,2*W+(ge+1)/2)}var Qa=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new bs,this.indexArray=new xo,this.segments=new Vt,this.programConfigurations=new ya(kt,M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function Qo(M,I){for(var W=0;W<M.length;W++)if(cs(I,M[W]))return!0;for(var oe=0;oe<I.length;oe++)if(cs(M,I[oe]))return!0;return!!Zs(M,I)}function Is(M,I,W){return!!cs(M,I)||!!Po(I,M,W)}function Gs(M,I){if(1===M.length)return al(I,M[0]);for(var W=0;W<I.length;W++)for(var oe=I[W],ge=0;ge<oe.length;ge++)if(cs(M,oe[ge]))return!0;for(var Te=0;Te<M.length;Te++)if(al(I,M[Te]))return!0;for(var Oe=0;Oe<I.length;Oe++)if(Zs(M,I[Oe]))return!0;return!1}function hl(M,I,W){if(M.length>1){if(Zs(M,I))return!0;for(var oe=0;oe<I.length;oe++)if(Po(I[oe],M,W))return!0}for(var ge=0;ge<M.length;ge++)if(Po(M[ge],I,W))return!0;return!1}function Zs(M,I){if(0===M.length||0===I.length)return!1;for(var W=0;W<M.length-1;W++)for(var oe=M[W],ge=M[W+1],Te=0;Te<I.length-1;Te++)if(Ys(oe,ge,I[Te],I[Te+1]))return!0;return!1}function Ys(M,I,W,oe){return O(M,W,oe)!==O(I,W,oe)&&O(M,I,W)!==O(M,I,oe)}function Po(M,I,W){var oe=W*W;if(1===I.length)return M.distSqr(I[0])<oe;for(var ge=1;ge<I.length;ge++)if(Xs(M,I[ge-1],I[ge])<oe)return!0;return!1}function Xs(M,I,W){var oe=I.distSqr(W);if(0===oe)return M.distSqr(I);var ge=((M.x-I.x)*(W.x-I.x)+(M.y-I.y)*(W.y-I.y))/oe;return M.distSqr(ge<0?I:ge>1?W:W.sub(I)._mult(ge)._add(I))}function al(M,I){for(var W,oe,ge,Te=!1,Oe=0;Oe<M.length;Oe++)for(var Ve=0,tt=(W=M[Oe]).length-1;Ve<W.length;tt=Ve++)(oe=W[Ve]).y>I.y!=(ge=W[tt]).y>I.y&&I.x<(ge.x-oe.x)*(I.y-oe.y)/(ge.y-oe.y)+oe.x&&(Te=!Te);return Te}function cs(M,I){for(var W=!1,oe=0,ge=M.length-1;oe<M.length;ge=oe++){var Te=M[oe],Oe=M[ge];Te.y>I.y!=Oe.y>I.y&&I.x<(Oe.x-Te.x)*(I.y-Te.y)/(Oe.y-Te.y)+Te.x&&(W=!W)}return W}function ol(M,I,W){var oe=W[0],ge=W[2];if(M.x<oe.x&&I.x<oe.x||M.x>ge.x&&I.x>ge.x||M.y<oe.y&&I.y<oe.y||M.y>ge.y&&I.y>ge.y)return!1;var Te=O(M,I,W[0]);return Te!==O(M,I,W[1])||Te!==O(M,I,W[2])||Te!==O(M,I,W[3])}function Ca(M,I,W){var oe=I.paint.get(M).value;return"constant"===oe.kind?oe.value:W.programConfigurations.get(I.id).getMaxValue(M)}function Fo(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Bo(M,I,W,oe,ge){if(!I[0]&&!I[1])return M;var Te=t.convert(I)._mult(ge);"viewport"===W&&Te._rotate(-oe);for(var Oe=[],Ve=0;Ve<M.length;Ve++)Oe.push(M[Ve].sub(Te));return Oe}Qa.prototype.populate=function(M,I,W){var oe=this.layers[0],ge=[],Te=null;"circle"===oe.type&&(Te=oe.layout.get("circle-sort-key"));for(var Oe=0,Ve=M;Oe<Ve.length;Oe+=1){var tt=Ve[Oe],pt=tt.feature,bt=tt.id,Ht=tt.index,tr=tt.sourceLayerIndex,Jt=this.layers[0]._featureFilter.needGeometry,mr={type:pt.type,id:bt,properties:pt.properties,geometry:Jt?Sa(pt):[]};if(this.layers[0]._featureFilter.filter(new pa(this.zoom),mr,W)){Jt||(mr.geometry=Sa(pt));var Pr=Te?Te.evaluate(mr,{},W):void 0;ge.push({id:bt,properties:pt.properties,type:pt.type,sourceLayerIndex:tr,index:Ht,geometry:mr.geometry,patterns:{},sortKey:Pr})}}Te&&ge.sort(function(ri,gi){return ri.sortKey-gi.sortKey});for(var qr=0,$r=ge;qr<$r.length;qr+=1){var tn=$r[qr],kn=tn.geometry,Cn=tn.index,Kn=tn.sourceLayerIndex,Zn=M[Cn].feature;this.addFeature(tn,kn,Cn,W),I.featureIndex.insert(Zn,kn,Cn,Kn,this.index)}},Qa.prototype.update=function(M,I,W){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,I,this.stateDependentLayers,W)},Qa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Qa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qa.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,kt),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Qa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qa.prototype.addFeature=function(M,I,W,oe){for(var ge=0,Te=I;ge<Te.length;ge+=1)for(var Oe=0,Ve=Te[ge];Oe<Ve.length;Oe+=1){var tt=Ve[Oe],pt=tt.x,bt=tt.y;if(!(pt<0||pt>=8192||bt<0||bt>=8192)){var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),tr=Ht.vertexLength;Lo(this.layoutVertexArray,pt,bt,-1,-1),Lo(this.layoutVertexArray,pt,bt,1,-1),Lo(this.layoutVertexArray,pt,bt,1,1),Lo(this.layoutVertexArray,pt,bt,-1,1),this.indexArray.emplaceBack(tr,tr+1,tr+2),this.indexArray.emplaceBack(tr,tr+3,tr+2),Ht.vertexLength+=4,Ht.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,W,{},oe)},un("CircleBucket",Qa,{omit:["layers"]});var pl=new Ho({"circle-sort-key":new Pi(we.layout_circle["circle-sort-key"])}),nc={paint:new Ho({"circle-radius":new Pi(we.paint_circle["circle-radius"]),"circle-color":new Pi(we.paint_circle["circle-color"]),"circle-blur":new Pi(we.paint_circle["circle-blur"]),"circle-opacity":new Pi(we.paint_circle["circle-opacity"]),"circle-translate":new yi(we.paint_circle["circle-translate"]),"circle-translate-anchor":new yi(we.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yi(we.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yi(we.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Pi(we.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Pi(we.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Pi(we.paint_circle["circle-stroke-opacity"])}),layout:pl},ke=typeof Float32Array<"u"?Float32Array:Array;function ye(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function Ce(M,I,W){var oe=I[0],ge=I[1],Te=I[2],Oe=I[3],Ve=I[4],tt=I[5],pt=I[6],bt=I[7],Ht=I[8],tr=I[9],Jt=I[10],mr=I[11],Pr=I[12],Gr=I[13],qr=I[14],$r=I[15],tn=W[0],cn=W[1],kn=W[2],Cn=W[3];return M[0]=tn*oe+cn*Ve+kn*Ht+Cn*Pr,M[1]=tn*ge+cn*tt+kn*tr+Cn*Gr,M[2]=tn*Te+cn*pt+kn*Jt+Cn*qr,M[3]=tn*Oe+cn*bt+kn*mr+Cn*$r,M[4]=(tn=W[4])*oe+(cn=W[5])*Ve+(kn=W[6])*Ht+(Cn=W[7])*Pr,M[5]=tn*ge+cn*tt+kn*tr+Cn*Gr,M[6]=tn*Te+cn*pt+kn*Jt+Cn*qr,M[7]=tn*Oe+cn*bt+kn*mr+Cn*$r,M[8]=(tn=W[8])*oe+(cn=W[9])*Ve+(kn=W[10])*Ht+(Cn=W[11])*Pr,M[9]=tn*ge+cn*tt+kn*tr+Cn*Gr,M[10]=tn*Te+cn*pt+kn*Jt+Cn*qr,M[11]=tn*Oe+cn*bt+kn*mr+Cn*$r,M[12]=(tn=W[12])*oe+(cn=W[13])*Ve+(kn=W[14])*Ht+(Cn=W[15])*Pr,M[13]=tn*ge+cn*tt+kn*tr+Cn*Gr,M[14]=tn*Te+cn*pt+kn*Jt+Cn*qr,M[15]=tn*Oe+cn*bt+kn*mr+Cn*$r,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,I=0,W=arguments.length;W--;)I+=M[W]*M[W];return Math.sqrt(I)});var Bt,I,lt=Ce;function hn(M,I,W){var oe=I[0],ge=I[1],Te=I[2],Oe=I[3];return M[0]=W[0]*oe+W[4]*ge+W[8]*Te+W[12]*Oe,M[1]=W[1]*oe+W[5]*ge+W[9]*Te+W[13]*Oe,M[2]=W[2]*oe+W[6]*ge+W[10]*Te+W[14]*Oe,M[3]=W[3]*oe+W[7]*ge+W[11]*Te+W[15]*Oe,M}Bt=new ke(3),ke!=Float32Array&&(Bt[0]=0,Bt[1]=0,Bt[2]=0),I=new ke(4),ke!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[3]=0);var bi=(function(){var I=new ke(2);ke!=Float32Array&&(I[0]=0,I[1]=0)}(),function(M){function I(W){M.call(this,W,nc)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.createBucket=function(W){return new Qa(W)},I.prototype.queryRadius=function(W){var oe=W;return Ca("circle-radius",this,oe)+Ca("circle-stroke-width",this,oe)+Fo(this.paint.get("circle-translate"))},I.prototype.queryIntersectsFeature=function(W,oe,ge,Te,Oe,Ve,tt,pt){for(var bt=Bo(W,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ve.angle,tt),Ht=this.paint.get("circle-radius").evaluate(oe,ge)+this.paint.get("circle-stroke-width").evaluate(oe,ge),tr="map"===this.paint.get("circle-pitch-alignment"),Jt=tr?bt:function(Kn,Zn){return Kn.map(function(ri){return Si(ri,Zn)})}(bt,pt),mr=tr?Ht*tt:Ht,Pr=0,Gr=Te;Pr<Gr.length;Pr+=1)for(var qr=0,$r=Gr[Pr];qr<$r.length;qr+=1){var tn=$r[qr],cn=tr?tn:Si(tn,pt),kn=mr,Cn=hn([],[tn.x,tn.y,0,1],pt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?kn*=Cn[3]/Ve.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(kn*=Ve.cameraToCenterDistance/Cn[3]),Is(Jt,cn,kn))return!0}return!1},I}($o));function Si(M,I){var W=hn([],[M.x,M.y,0,1],I);return new t(W[0]/W[3],W[1]/W[3])}var Ui=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}(Qa);function eo(M,I,W,oe){var ge=I.width,Te=I.height;if(oe){if(oe instanceof Uint8ClampedArray)oe=new Uint8Array(oe.buffer);else if(oe.length!==ge*Te*W)throw new RangeError("mismatched image size")}else oe=new Uint8Array(ge*Te*W);return M.width=ge,M.height=Te,M.data=oe,M}function La(M,I,W){var oe=I.width,ge=I.height;if(oe!==M.width||ge!==M.height){var Te=eo({},{width:oe,height:ge},W);Ds(M,Te,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,oe),height:Math.min(M.height,ge)},W),M.width=oe,M.height=ge,M.data=Te.data}}function Ds(M,I,W,oe,ge,Te){if(0===ge.width||0===ge.height)return I;if(ge.width>M.width||ge.height>M.height||W.x>M.width-ge.width||W.y>M.height-ge.height)throw new RangeError("out of range source coordinates for image copy");if(ge.width>I.width||ge.height>I.height||oe.x>I.width-ge.width||oe.y>I.height-ge.height)throw new RangeError("out of range destination coordinates for image copy");for(var Oe=M.data,Ve=I.data,tt=0;tt<ge.height;tt++)for(var pt=((W.y+tt)*M.width+W.x)*Te,bt=((oe.y+tt)*I.width+oe.x)*Te,Ht=0;Ht<ge.width*Te;Ht++)Ve[bt+Ht]=Oe[pt+Ht];return I}un("HeatmapBucket",Ui,{omit:["layers"]});var Us=function(M,I){eo(this,M,1,I)};Us.prototype.resize=function(M){La(this,M,1)},Us.prototype.clone=function(){return new Us({width:this.width,height:this.height},new Uint8Array(this.data))},Us.copy=function(M,I,W,oe,ge){Ds(M,I,W,oe,ge,1)};var es=function(M,I){eo(this,M,4,I)};es.prototype.resize=function(M){La(this,M,4)},es.prototype.replace=function(M,I){I?this.data.set(M):this.data=M instanceof Uint8ClampedArray?new Uint8Array(M.buffer):M},es.prototype.clone=function(){return new es({width:this.width,height:this.height},new Uint8Array(this.data))},es.copy=function(M,I,W,oe,ge){Ds(M,I,W,oe,ge,4)},un("AlphaImage",Us),un("RGBAImage",es);var _l={paint:new Ho({"heatmap-radius":new Pi(we.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Pi(we.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yi(we.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ls(we.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yi(we.paint_heatmap["heatmap-opacity"])})};function Ac(M,I){for(var W=new Uint8Array(1024),oe={},ge=0,Te=0;ge<256;ge++,Te+=4){oe[I]=ge/255;var Oe=M.evaluate(oe);W[Te+0]=Math.floor(255*Oe.r/Oe.a),W[Te+1]=Math.floor(255*Oe.g/Oe.a),W[Te+2]=Math.floor(255*Oe.b/Oe.a),W[Te+3]=Math.floor(255*Oe.a)}return new es({width:256,height:1},W)}var fh=function(M){function I(W){M.call(this,W,_l),this._updateColorRamp()}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.createBucket=function(W){return new Ui(W)},I.prototype._handleSpecialPaintPropertyUpdate=function(W){"heatmap-color"===W&&this._updateColorRamp()},I.prototype._updateColorRamp=function(){this.colorRamp=Ac(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},I.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},I}($o),hh={paint:new Ho({"hillshade-illumination-direction":new yi(we.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yi(we.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yi(we.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yi(we.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yi(we.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yi(we.paint_hillshade["hillshade-accent-color"])})},ph=function(M){function I(W){M.call(this,W,hh)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},I}($o),Vu=da([{name:"a_pos",components:2,type:"Int16"}],4).members,cu=Mc,dh=Mc;function Mc(M,I,W){W=W||2;var oe,ge,Te,Oe,Ve,tt,pt,bt=I&&I.length,Ht=bt?I[0]*W:M.length,tr=Hu(M,0,Ht,W,!0),Jt=[];if(!tr||tr.next===tr.prev)return Jt;if(bt&&(tr=function(Pr,Gr,qr,$r){var tn,cn,Kn,Zn=[];for(tn=0,cn=Gr.length;tn<cn;tn++)(Kn=Hu(Pr,Gr[tn]*$r,tn<cn-1?Gr[tn+1]*$r:Pr.length,$r,!1))===Kn.next&&(Kn.steiner=!0),Zn.push(wh(Kn));for(Zn.sort(xh),tn=0;tn<Zn.length;tn++)bh(Zn[tn],qr),qr=wl(qr,qr.next);return qr}(M,I,tr,W)),M.length>80*W){oe=Te=M[0],ge=Oe=M[1];for(var mr=W;mr<Ht;mr+=W)(Ve=M[mr])<oe&&(oe=Ve),(tt=M[mr+1])<ge&&(ge=tt),Ve>Te&&(Te=Ve),tt>Oe&&(Oe=tt);pt=0!==(pt=Math.max(Te-oe,Oe-ge))?1/pt:0}return ic(tr,Jt,W,oe,ge,pt),Jt}function Hu(M,I,W,oe,ge){var Te,Oe;if(ge===hu(M,I,W,oe)>0)for(Te=I;Te<W;Te+=oe)Oe=Yu(Te,M[Te],M[Te+1],Oe);else for(Te=W-oe;Te>=I;Te-=oe)Oe=Yu(Te,M[Te],M[Te+1],Oe);return Oe&&Sc(Oe,Oe.next)&&(oc(Oe),Oe=Oe.next),Oe}function wl(M,I){if(!M)return M;I||(I=M);var W,oe=M;do{if(W=!1,oe.steiner||!Sc(oe,oe.next)&&0!==Oo(oe.prev,oe,oe.next))oe=oe.next;else{if(oc(oe),(oe=I=oe.prev)===oe.next)break;W=!0}}while(W||oe!==I);return I}function ic(M,I,W,oe,ge,Te,Oe){if(M){!Oe&&Te&&function(bt,Ht,tr,Jt){var mr=bt;do{null===mr.z&&(mr.z=uu(mr.x,mr.y,Ht,tr,Jt)),mr.prevZ=mr.prev,mr.nextZ=mr.next,mr=mr.next}while(mr!==bt);mr.prevZ.nextZ=null,mr.prevZ=null,function(Pr){var Gr,qr,$r,tn,cn,kn,Cn,Kn,Zn=1;do{for(qr=Pr,Pr=null,cn=null,kn=0;qr;){for(kn++,$r=qr,Cn=0,Gr=0;Gr<Zn&&(Cn++,$r=$r.nextZ);Gr++);for(Kn=Zn;Cn>0||Kn>0&&$r;)0!==Cn&&(0===Kn||!$r||qr.z<=$r.z)?(tn=qr,qr=qr.nextZ,Cn--):(tn=$r,$r=$r.nextZ,Kn--),cn?cn.nextZ=tn:Pr=tn,tn.prevZ=cn,cn=tn;qr=$r}cn.nextZ=null,Zn*=2}while(kn>1)}(mr)}(M,oe,ge,Te);for(var Ve,tt,pt=M;M.prev!==M.next;)if(Ve=M.prev,tt=M.next,Te?mh(M,oe,ge,Te):gh(M))I.push(Ve.i/W),I.push(M.i/W),I.push(tt.i/W),oc(M),M=tt.next,pt=tt.next;else if((M=tt)===pt){Oe?1===Oe?ic(M=vh(wl(M),I,W),I,W,oe,ge,Te,2):2===Oe&&yh(M,I,W,oe,ge,Te):ic(wl(M),I,W,oe,ge,Te,1);break}}}function gh(M){var I=M.prev,W=M,oe=M.next;if(Oo(I,W,oe)>=0)return!1;for(var ge=M.next.next;ge!==M.prev;){if(Ol(I.x,I.y,W.x,W.y,oe.x,oe.y,ge.x,ge.y)&&Oo(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function mh(M,I,W,oe){var ge=M.prev,Te=M,Oe=M.next;if(Oo(ge,Te,Oe)>=0)return!1;for(var pt=ge.x>Te.x?ge.x>Oe.x?ge.x:Oe.x:Te.x>Oe.x?Te.x:Oe.x,bt=ge.y>Te.y?ge.y>Oe.y?ge.y:Oe.y:Te.y>Oe.y?Te.y:Oe.y,Ht=uu(ge.x<Te.x?ge.x<Oe.x?ge.x:Oe.x:Te.x<Oe.x?Te.x:Oe.x,ge.y<Te.y?ge.y<Oe.y?ge.y:Oe.y:Te.y<Oe.y?Te.y:Oe.y,I,W,oe),tr=uu(pt,bt,I,W,oe),Jt=M.prevZ,mr=M.nextZ;Jt&&Jt.z>=Ht&&mr&&mr.z<=tr;){if(Jt!==M.prev&&Jt!==M.next&&Ol(ge.x,ge.y,Te.x,Te.y,Oe.x,Oe.y,Jt.x,Jt.y)&&Oo(Jt.prev,Jt,Jt.next)>=0||(Jt=Jt.prevZ,mr!==M.prev&&mr!==M.next&&Ol(ge.x,ge.y,Te.x,Te.y,Oe.x,Oe.y,mr.x,mr.y)&&Oo(mr.prev,mr,mr.next)>=0))return!1;mr=mr.nextZ}for(;Jt&&Jt.z>=Ht;){if(Jt!==M.prev&&Jt!==M.next&&Ol(ge.x,ge.y,Te.x,Te.y,Oe.x,Oe.y,Jt.x,Jt.y)&&Oo(Jt.prev,Jt,Jt.next)>=0)return!1;Jt=Jt.prevZ}for(;mr&&mr.z<=tr;){if(mr!==M.prev&&mr!==M.next&&Ol(ge.x,ge.y,Te.x,Te.y,Oe.x,Oe.y,mr.x,mr.y)&&Oo(mr.prev,mr,mr.next)>=0)return!1;mr=mr.nextZ}return!0}function vh(M,I,W){var oe=M;do{var ge=oe.prev,Te=oe.next.next;!Sc(ge,Te)&&qu(ge,oe,oe.next,Te)&&ac(ge,Te)&&ac(Te,ge)&&(I.push(ge.i/W),I.push(oe.i/W),I.push(Te.i/W),oc(oe),oc(oe.next),oe=M=Te),oe=oe.next}while(oe!==M);return wl(oe)}function yh(M,I,W,oe,ge,Te){var Oe=M;do{for(var Ve=Oe.next.next;Ve!==Oe.prev;){if(Oe.i!==Ve.i&&Th(Oe,Ve)){var tt=Gu(Oe,Ve);return Oe=wl(Oe,Oe.next),tt=wl(tt,tt.next),ic(Oe,I,W,oe,ge,Te),void ic(tt,I,W,oe,ge,Te)}Ve=Ve.next}Oe=Oe.next}while(Oe!==M)}function xh(M,I){return M.x-I.x}function bh(M,I){if(I=function(oe,ge){var Te,Oe=ge,Ve=oe.x,tt=oe.y,pt=-1/0;do{if(tt<=Oe.y&&tt>=Oe.next.y&&Oe.next.y!==Oe.y){var bt=Oe.x+(tt-Oe.y)*(Oe.next.x-Oe.x)/(Oe.next.y-Oe.y);if(bt<=Ve&&bt>pt){if(pt=bt,bt===Ve){if(tt===Oe.y)return Oe;if(tt===Oe.next.y)return Oe.next}Te=Oe.x<Oe.next.x?Oe:Oe.next}}Oe=Oe.next}while(Oe!==ge);if(!Te)return null;if(Ve===pt)return Te;var Ht,tr=Te,Jt=Te.x,mr=Te.y,Pr=1/0;Oe=Te;do{Ve>=Oe.x&&Oe.x>=Jt&&Ve!==Oe.x&&Ol(tt<mr?Ve:pt,tt,Jt,mr,tt<mr?pt:Ve,tt,Oe.x,Oe.y)&&(Ht=Math.abs(tt-Oe.y)/(Ve-Oe.x),ac(Oe,oe)&&(Ht<Pr||Ht===Pr&&(Oe.x>Te.x||Oe.x===Te.x&&_h(Te,Oe)))&&(Te=Oe,Pr=Ht)),Oe=Oe.next}while(Oe!==tr);return Te}(M,I)){var W=Gu(I,M);wl(I,I.next),wl(W,W.next)}}function _h(M,I){return Oo(M.prev,M,I.prev)<0&&Oo(I.next,M,M.next)<0}function uu(M,I,W,oe,ge){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-W)*ge)|M<<8))|M<<4))|M<<2))|M<<1))|(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-oe)*ge)|I<<8))|I<<4))|I<<2))|I<<1))<<1}function wh(M){var I=M,W=M;do{(I.x<W.x||I.x===W.x&&I.y<W.y)&&(W=I),I=I.next}while(I!==M);return W}function Ol(M,I,W,oe,ge,Te,Oe,Ve){return(ge-Oe)*(I-Ve)-(M-Oe)*(Te-Ve)>=0&&(M-Oe)*(oe-Ve)-(W-Oe)*(I-Ve)>=0&&(W-Oe)*(Te-Ve)-(ge-Oe)*(oe-Ve)>=0}function Th(M,I){return M.next.i!==I.i&&M.prev.i!==I.i&&!function(W,oe){var ge=W;do{if(ge.i!==W.i&&ge.next.i!==W.i&&ge.i!==oe.i&&ge.next.i!==oe.i&&qu(ge,ge.next,W,oe))return!0;ge=ge.next}while(ge!==W);return!1}(M,I)&&(ac(M,I)&&ac(I,M)&&function(W,oe){var ge=W,Te=!1,Oe=(W.x+oe.x)/2,Ve=(W.y+oe.y)/2;do{ge.y>Ve!=ge.next.y>Ve&&ge.next.y!==ge.y&&Oe<(ge.next.x-ge.x)*(Ve-ge.y)/(ge.next.y-ge.y)+ge.x&&(Te=!Te),ge=ge.next}while(ge!==W);return Te}(M,I)&&(Oo(M.prev,M,I.prev)||Oo(M,I.prev,I))||Sc(M,I)&&Oo(M.prev,M,M.next)>0&&Oo(I.prev,I,I.next)>0)}function Oo(M,I,W){return(I.y-M.y)*(W.x-I.x)-(I.x-M.x)*(W.y-I.y)}function Sc(M,I){return M.x===I.x&&M.y===I.y}function qu(M,I,W,oe){var ge=Cc(Oo(M,I,W)),Te=Cc(Oo(M,I,oe)),Oe=Cc(Oo(W,oe,M)),Ve=Cc(Oo(W,oe,I));return ge!==Te&&Oe!==Ve||!(0!==ge||!Ec(M,W,I))||!(0!==Te||!Ec(M,oe,I))||!(0!==Oe||!Ec(W,M,oe))||!(0!==Ve||!Ec(W,I,oe))}function Ec(M,I,W){return I.x<=Math.max(M.x,W.x)&&I.x>=Math.min(M.x,W.x)&&I.y<=Math.max(M.y,W.y)&&I.y>=Math.min(M.y,W.y)}function Cc(M){return M>0?1:M<0?-1:0}function ac(M,I){return Oo(M.prev,M,M.next)<0?Oo(M,I,M.next)>=0&&Oo(M,M.prev,I)>=0:Oo(M,I,M.prev)<0||Oo(M,M.next,I)<0}function Gu(M,I){var W=new fu(M.i,M.x,M.y),oe=new fu(I.i,I.x,I.y),ge=M.next,Te=I.prev;return M.next=I,I.prev=M,W.next=ge,ge.prev=W,oe.next=W,W.prev=oe,Te.next=oe,oe.prev=Te,oe}function Yu(M,I,W,oe){var ge=new fu(M,I,W);return oe?(ge.next=oe.next,ge.prev=oe,oe.next.prev=ge,oe.next=ge):(ge.prev=ge,ge.next=ge),ge}function oc(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function fu(M,I,W){this.i=M,this.x=I,this.y=W,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hu(M,I,W,oe){for(var ge=0,Te=I,Oe=W-oe;Te<W;Te+=oe)ge+=(M[Oe]-M[Te])*(M[Te+1]+M[Oe+1]),Oe=Te;return ge}function kh(M,I,W,oe,ge){!function Te(Oe,Ve,tt,pt,bt){for(;pt>tt;){if(pt-tt>600){var Ht=pt-tt+1,tr=Ve-tt+1,Jt=Math.log(Ht),mr=.5*Math.exp(2*Jt/3),Pr=.5*Math.sqrt(Jt*mr*(Ht-mr)/Ht)*(tr-Ht/2<0?-1:1);Te(Oe,Ve,Math.max(tt,Math.floor(Ve-tr*mr/Ht+Pr)),Math.min(pt,Math.floor(Ve+(Ht-tr)*mr/Ht+Pr)),bt)}var $r=Oe[Ve],tn=tt,cn=pt;for(sc(Oe,tt,Ve),bt(Oe[pt],$r)>0&&sc(Oe,tt,pt);tn<cn;){for(sc(Oe,tn,cn),tn++,cn--;bt(Oe[tn],$r)<0;)tn++;for(;bt(Oe[cn],$r)>0;)cn--}0===bt(Oe[tt],$r)?sc(Oe,tt,cn):sc(Oe,++cn,pt),cn<=Ve&&(tt=cn+1),Ve<=cn&&(pt=cn-1)}}(M,I,W||0,oe||M.length-1,ge||Ah)}function sc(M,I,W){var oe=M[I];M[I]=M[W],M[W]=oe}function Ah(M,I){return M<I?-1:M>I?1:0}function pu(M,I){var W=M.length;if(W<=1)return[M];for(var oe,ge,Te=[],Oe=0;Oe<W;Oe++){var Ve=P(M[Oe]);0!==Ve&&(M[Oe].area=Math.abs(Ve),void 0===ge&&(ge=Ve<0),ge===Ve<0?(oe&&Te.push(oe),oe=[M[Oe]]):oe.push(M[Oe]))}if(oe&&Te.push(oe),I>1)for(var tt=0;tt<Te.length;tt++)Te[tt].length<=I||(kh(Te[tt],I,1,Te[tt].length-1,Mh),Te[tt]=Te[tt].slice(0,I));return Te}function Mh(M,I){return I.area-M.area}function du(M,I,W){for(var oe=W.patternDependencies,ge=!1,Te=0,Oe=I;Te<Oe.length;Te+=1){var Ve=Oe[Te].paint.get(M+"-pattern");Ve.isConstant()||(ge=!0);var tt=Ve.constantOr(null);tt&&(ge=!0,oe[tt.to]=!0,oe[tt.from]=!0)}return ge}function gu(M,I,W,oe,ge){for(var Te=ge.patternDependencies,Oe=0,Ve=I;Oe<Ve.length;Oe+=1){var tt=Ve[Oe],pt=tt.paint.get(M+"-pattern").value;if("constant"!==pt.kind){var bt=pt.evaluate({zoom:oe-1},W,{},ge.availableImages),Ht=pt.evaluate({zoom:oe},W,{},ge.availableImages),tr=pt.evaluate({zoom:oe+1},W,{},ge.availableImages);Ht=Ht&&Ht.name?Ht.name:Ht,tr=tr&&tr.name?tr.name:tr,Te[bt=bt&&bt.name?bt.name:bt]=!0,Te[Ht]=!0,Te[tr]=!0,W.patterns[tt.id]={min:bt,mid:Ht,max:tr}}}return W}Mc.deviation=function(M,I,W,oe){var ge=I&&I.length,Oe=Math.abs(hu(M,0,ge?I[0]*W:M.length,W));if(ge)for(var Ve=0,tt=I.length;Ve<tt;Ve++)Oe-=Math.abs(hu(M,I[Ve]*W,Ve<tt-1?I[Ve+1]*W:M.length,W));var Ht=0;for(Ve=0;Ve<oe.length;Ve+=3){var tr=oe[Ve]*W,Jt=oe[Ve+1]*W,mr=oe[Ve+2]*W;Ht+=Math.abs((M[tr]-M[mr])*(M[Jt+1]-M[tr+1])-(M[tr]-M[Jt])*(M[mr+1]-M[tr+1]))}return 0===Oe&&0===Ht?0:Math.abs((Ht-Oe)/Oe)},Mc.flatten=function(M){for(var I=M[0][0].length,W={vertices:[],holes:[],dimensions:I},oe=0,ge=0;ge<M.length;ge++){for(var Te=0;Te<M[ge].length;Te++)for(var Oe=0;Oe<I;Oe++)W.vertices.push(M[ge][Te][Oe]);ge>0&&W.holes.push(oe+=M[ge-1].length)}return W},cu.default=dh;var Js=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bs,this.indexArray=new xo,this.indexArray2=new F,this.programConfigurations=new ya(Vu,M.layers,M.zoom),this.segments=new Vt,this.segments2=new Vt,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};Js.prototype.populate=function(M,I,W){this.hasPattern=du("fill",this.layers,I);for(var oe=this.layers[0].layout.get("fill-sort-key"),ge=[],Te=0,Oe=M;Te<Oe.length;Te+=1){var Ve=Oe[Te],tt=Ve.feature,pt=Ve.id,bt=Ve.index,Ht=Ve.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,Jt={type:tt.type,id:pt,properties:tt.properties,geometry:tr?Sa(tt):[]};if(this.layers[0]._featureFilter.filter(new pa(this.zoom),Jt,W)){tr||(Jt.geometry=Sa(tt));var mr=oe?oe.evaluate(Jt,{},W,I.availableImages):void 0;ge.push({id:pt,properties:tt.properties,type:tt.type,sourceLayerIndex:Ht,index:bt,geometry:Jt.geometry,patterns:{},sortKey:mr})}}oe&&ge.sort(function(ri,gi){return ri.sortKey-gi.sortKey});for(var Gr=0,qr=ge;Gr<qr.length;Gr+=1){var $r=qr[Gr],cn=$r.geometry,kn=$r.index,Cn=$r.sourceLayerIndex;if(this.hasPattern){var Kn=gu("fill",this.layers,$r,this.zoom,I);this.patternFeatures.push(Kn)}else this.addFeature($r,cn,kn,W,{});I.featureIndex.insert(M[kn].feature,cn,kn,Cn,this.index)}},Js.prototype.update=function(M,I,W){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,I,this.stateDependentLayers,W)},Js.prototype.addFeatures=function(M,I,W){for(var oe=0,ge=this.patternFeatures;oe<ge.length;oe+=1){var Te=ge[oe];this.addFeature(Te,Te.geometry,Te.index,I,W)}},Js.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Js.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Js.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Vu),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},Js.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Js.prototype.addFeature=function(M,I,W,oe,ge){for(var Te=0,Oe=pu(I,500);Te<Oe.length;Te+=1){for(var Ve=Oe[Te],tt=0,pt=0,bt=Ve;pt<bt.length;pt+=1)tt+=bt[pt].length;for(var Ht=this.segments.prepareSegment(tt,this.layoutVertexArray,this.indexArray),tr=Ht.vertexLength,Jt=[],mr=[],Pr=0,Gr=Ve;Pr<Gr.length;Pr+=1){var qr=Gr[Pr];if(0!==qr.length){qr!==Ve[0]&&mr.push(Jt.length/2);var $r=this.segments2.prepareSegment(qr.length,this.layoutVertexArray,this.indexArray2),tn=$r.vertexLength;this.layoutVertexArray.emplaceBack(qr[0].x,qr[0].y),this.indexArray2.emplaceBack(tn+qr.length-1,tn),Jt.push(qr[0].x),Jt.push(qr[0].y);for(var cn=1;cn<qr.length;cn++)this.layoutVertexArray.emplaceBack(qr[cn].x,qr[cn].y),this.indexArray2.emplaceBack(tn+cn-1,tn+cn),Jt.push(qr[cn].x),Jt.push(qr[cn].y);$r.vertexLength+=qr.length,$r.primitiveLength+=qr.length}}for(var kn=cu(Jt,mr),Cn=0;Cn<kn.length;Cn+=3)this.indexArray.emplaceBack(tr+kn[Cn],tr+kn[Cn+1],tr+kn[Cn+2]);Ht.vertexLength+=tt,Ht.primitiveLength+=kn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,W,ge,oe)},un("FillBucket",Js,{omit:["layers","patternFeatures"]});var Sh=new Ho({"fill-sort-key":new Pi(we.layout_fill["fill-sort-key"])}),Eh={paint:new Ho({"fill-antialias":new yi(we.paint_fill["fill-antialias"]),"fill-opacity":new Pi(we.paint_fill["fill-opacity"]),"fill-color":new Pi(we.paint_fill["fill-color"]),"fill-outline-color":new Pi(we.paint_fill["fill-outline-color"]),"fill-translate":new yi(we.paint_fill["fill-translate"]),"fill-translate-anchor":new yi(we.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ps(we.paint_fill["fill-pattern"])}),layout:Sh},Ch=function(M){function I(W){M.call(this,W,Eh)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.recalculate=function(W,oe){M.prototype.recalculate.call(this,W,oe);var ge=this.paint._values["fill-outline-color"];"constant"===ge.value.kind&&void 0===ge.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},I.prototype.createBucket=function(W){return new Js(W)},I.prototype.queryRadius=function(){return Fo(this.paint.get("fill-translate"))},I.prototype.queryIntersectsFeature=function(W,oe,ge,Te,Oe,Ve,tt){return Gs(Bo(W,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ve.angle,tt),Te)},I.prototype.isTileClipped=function(){return!0},I}($o),Wu=da([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Zu=Il;function Il(M,I,W,oe,ge){this.properties={},this.extent=W,this.type=0,this._pbf=M,this._geometry=-1,this._keys=oe,this._values=ge,M.readFields(Lh,this,I)}function Lh(M,I,W){1==M?I.id=W.readVarint():2==M?function(oe,ge){for(var Te=oe.readVarint()+oe.pos;oe.pos<Te;){var Oe=ge._keys[oe.readVarint()],Ve=ge._values[oe.readVarint()];ge.properties[Oe]=Ve}}(W,I):3==M?I.type=W.readVarint():4==M&&(I._geometry=W.pos)}function Ph(M){for(var I,W,oe=0,ge=0,Te=M.length,Oe=Te-1;ge<Te;Oe=ge++)oe+=((W=M[Oe]).x-(I=M[ge]).x)*(I.y+W.y);return oe}Il.types=["Unknown","Point","LineString","Polygon"],Il.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var I,W=M.readVarint()+M.pos,oe=1,ge=0,Te=0,Oe=0,Ve=[];M.pos<W;){if(ge<=0){var tt=M.readVarint();oe=7&tt,ge=tt>>3}if(ge--,1===oe||2===oe)Te+=M.readSVarint(),Oe+=M.readSVarint(),1===oe&&(I&&Ve.push(I),I=[]),I.push(new t(Te,Oe));else{if(7!==oe)throw new Error("unknown command "+oe);I&&I.push(I[0].clone())}}return I&&Ve.push(I),Ve},Il.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var I=M.readVarint()+M.pos,W=1,oe=0,ge=0,Te=0,Oe=1/0,Ve=-1/0,tt=1/0,pt=-1/0;M.pos<I;){if(oe<=0){var bt=M.readVarint();W=7&bt,oe=bt>>3}if(oe--,1===W||2===W)(ge+=M.readSVarint())<Oe&&(Oe=ge),ge>Ve&&(Ve=ge),(Te+=M.readSVarint())<tt&&(tt=Te),Te>pt&&(pt=Te);else if(7!==W)throw new Error("unknown command "+W)}return[Oe,tt,Ve,pt]},Il.prototype.toGeoJSON=function(M,I,W){var oe,ge,Te=this.extent*Math.pow(2,W),Oe=this.extent*M,Ve=this.extent*I,tt=this.loadGeometry(),pt=Il.types[this.type];function bt(Jt){for(var mr=0;mr<Jt.length;mr++){var Pr=Jt[mr];Jt[mr]=[360*(Pr.x+Oe)/Te-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pr.y+Ve)/Te)*Math.PI/180))-90]}}switch(this.type){case 1:var Ht=[];for(oe=0;oe<tt.length;oe++)Ht[oe]=tt[oe][0];bt(tt=Ht);break;case 2:for(oe=0;oe<tt.length;oe++)bt(tt[oe]);break;case 3:for(tt=function(Jt){var mr=Jt.length;if(mr<=1)return[Jt];for(var Pr,Gr,qr=[],$r=0;$r<mr;$r++){var tn=Ph(Jt[$r]);0!==tn&&(void 0===Gr&&(Gr=tn<0),Gr===tn<0?(Pr&&qr.push(Pr),Pr=[Jt[$r]]):Pr.push(Jt[$r]))}return Pr&&qr.push(Pr),qr}(tt),oe=0;oe<tt.length;oe++)for(ge=0;ge<tt[oe].length;ge++)bt(tt[oe][ge])}1===tt.length?tt=tt[0]:pt="Multi"+pt;var tr={type:"Feature",geometry:{type:pt,coordinates:tt},properties:this.properties};return"id"in this&&(tr.id=this.id),tr};var Xu=Ju;function Ju(M,I){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(Oh,this,I),this.length=this._features.length}function Oh(M,I,W){15===M?I.version=W.readVarint():1===M?I.name=W.readString():5===M?I.extent=W.readVarint():2===M?I._features.push(W.pos):3===M?I._keys.push(W.readString()):4===M&&I._values.push(function(oe){for(var ge=null,Te=oe.readVarint()+oe.pos;oe.pos<Te;){var Oe=oe.readVarint()>>3;ge=1===Oe?oe.readString():2===Oe?oe.readFloat():3===Oe?oe.readDouble():4===Oe?oe.readVarint64():5===Oe?oe.readVarint():6===Oe?oe.readSVarint():7===Oe?oe.readBoolean():null}return ge}(W))}function Ih(M,I,W){if(3===M){var oe=new Xu(W,W.readVarint()+W.pos);oe.length&&(I[oe.name]=oe)}}Ju.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var I=this._pbf.readVarint()+this._pbf.pos;return new Zu(this._pbf,I,this.extent,this._keys,this._values)};var Dl={VectorTile:function(M,I){this.layers=M.readFields(Ih,{},I)},VectorTileFeature:Zu,VectorTileLayer:Xu},Dh=Dl.VectorTileFeature.types,mu=Math.pow(2,13);function lc(M,I,W,oe,ge,Te,Oe,Ve){M.emplaceBack(I,W,2*Math.floor(oe*mu)+Oe,ge*mu*2,Te*mu*2,Math.round(Ve))}var Ks=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new _s,this.indexArray=new xo,this.programConfigurations=new ya(Wu,M.layers,M.zoom),this.segments=new Vt,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function zh(M,I){return M.x===I.x&&(M.x<0||M.x>8192)||M.y===I.y&&(M.y<0||M.y>8192)}function Rh(M){return M.every(function(I){return I.x<0})||M.every(function(I){return I.x>8192})||M.every(function(I){return I.y<0})||M.every(function(I){return I.y>8192})}Ks.prototype.populate=function(M,I,W){this.features=[],this.hasPattern=du("fill-extrusion",this.layers,I);for(var oe=0,ge=M;oe<ge.length;oe+=1){var Te=ge[oe],Oe=Te.feature,Ve=Te.id,tt=Te.index,pt=Te.sourceLayerIndex,bt=this.layers[0]._featureFilter.needGeometry,Ht={type:Oe.type,id:Ve,properties:Oe.properties,geometry:bt?Sa(Oe):[]};if(this.layers[0]._featureFilter.filter(new pa(this.zoom),Ht,W)){var tr={id:Ve,sourceLayerIndex:pt,index:tt,geometry:bt?Ht.geometry:Sa(Oe),properties:Oe.properties,type:Oe.type,patterns:{}};void 0!==Oe.id&&(tr.id=Oe.id),this.hasPattern?this.features.push(gu("fill-extrusion",this.layers,tr,this.zoom,I)):this.addFeature(tr,tr.geometry,tt,W,{}),I.featureIndex.insert(Oe,tr.geometry,tt,pt,this.index,!0)}}},Ks.prototype.addFeatures=function(M,I,W){for(var oe=0,ge=this.features;oe<ge.length;oe+=1){var Te=ge[oe];this.addFeature(Te,Te.geometry,Te.index,I,W)}},Ks.prototype.update=function(M,I,W){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,I,this.stateDependentLayers,W)},Ks.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ks.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ks.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Wu),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},Ks.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ks.prototype.addFeature=function(M,I,W,oe,ge){for(var Te=0,Oe=pu(I,500);Te<Oe.length;Te+=1){for(var Ve=Oe[Te],tt=0,pt=0,bt=Ve;pt<bt.length;pt+=1)tt+=bt[pt].length;for(var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),tr=0,Jt=Ve;tr<Jt.length;tr+=1){var mr=Jt[tr];if(0!==mr.length&&!Rh(mr))for(var Pr=0,Gr=0;Gr<mr.length;Gr++){var qr=mr[Gr];if(Gr>=1){var $r=mr[Gr-1];if(!zh(qr,$r)){Ht.vertexLength+4>Vt.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var tn=qr.sub($r)._perp()._unit(),cn=$r.dist(qr);Pr+cn>32768&&(Pr=0),lc(this.layoutVertexArray,qr.x,qr.y,tn.x,tn.y,0,0,Pr),lc(this.layoutVertexArray,qr.x,qr.y,tn.x,tn.y,0,1,Pr),lc(this.layoutVertexArray,$r.x,$r.y,tn.x,tn.y,0,0,Pr+=cn),lc(this.layoutVertexArray,$r.x,$r.y,tn.x,tn.y,0,1,Pr);var kn=Ht.vertexLength;this.indexArray.emplaceBack(kn,kn+2,kn+1),this.indexArray.emplaceBack(kn+1,kn+2,kn+3),Ht.vertexLength+=4,Ht.primitiveLength+=2}}}}if(Ht.vertexLength+tt>Vt.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(tt,this.layoutVertexArray,this.indexArray)),"Polygon"===Dh[M.type]){for(var Cn=[],Kn=[],Zn=Ht.vertexLength,ri=0,gi=Ve;ri<gi.length;ri+=1){var mi=gi[ri];if(0!==mi.length){mi!==Ve[0]&&Kn.push(Cn.length/2);for(var ci=0;ci<mi.length;ci++){var Ai=mi[ci];lc(this.layoutVertexArray,Ai.x,Ai.y,0,0,1,1,0),Cn.push(Ai.x),Cn.push(Ai.y)}}}for(var _i=cu(Cn,Kn),vi=0;vi<_i.length;vi+=3)this.indexArray.emplaceBack(Zn+_i[vi],Zn+_i[vi+2],Zn+_i[vi+1]);Ht.primitiveLength+=_i.length/3,Ht.vertexLength+=tt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,W,ge,oe)},un("FillExtrusionBucket",Ks,{omit:["layers","features"]});var Fh={paint:new Ho({"fill-extrusion-opacity":new yi(we["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Pi(we["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yi(we["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yi(we["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ps(we["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Pi(we["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Pi(we["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yi(we["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Bh=function(M){function I(W){M.call(this,W,Fh)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.createBucket=function(W){return new Ks(W)},I.prototype.queryRadius=function(){return Fo(this.paint.get("fill-extrusion-translate"))},I.prototype.is3D=function(){return!0},I.prototype.queryIntersectsFeature=function(W,oe,ge,Te,Oe,Ve,tt,pt){var bt=Bo(W,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ve.angle,tt),Ht=this.paint.get("fill-extrusion-height").evaluate(oe,ge),tr=this.paint.get("fill-extrusion-base").evaluate(oe,ge),Jt=function(Pr,Gr,qr,$r){for(var tn=[],cn=0,kn=Pr;cn<kn.length;cn+=1){var Cn=kn[cn],Kn=[Cn.x,Cn.y,0,1];hn(Kn,Kn,Gr),tn.push(new t(Kn[0]/Kn[3],Kn[1]/Kn[3]))}return tn}(bt,pt),mr=function(Pr,Gr,qr,$r){for(var tn=[],cn=[],kn=$r[8]*Gr,Cn=$r[9]*Gr,Kn=$r[10]*Gr,Zn=$r[11]*Gr,ri=$r[8]*qr,gi=$r[9]*qr,mi=$r[10]*qr,ci=$r[11]*qr,Ai=0,_i=Pr;Ai<_i.length;Ai+=1){for(var ha=[],la=[],va=0,Ii=_i[Ai];va<Ii.length;va+=1){var ua=Ii[va],Na=ua.x,Pa=ua.y,Wa=$r[0]*Na+$r[4]*Pa+$r[12],Oa=$r[1]*Na+$r[5]*Pa+$r[13],zo=$r[2]*Na+$r[6]*Pa+$r[14],Za=$r[3]*Na+$r[7]*Pa+$r[15],is=zo+Kn,Yo=Za+Zn,ts=Wa+ri,ms=Oa+gi,fs=zo+mi,Ro=Za+ci,rs=new t((Wa+kn)/Yo,(Oa+Cn)/Yo);rs.z=is/Yo,ha.push(rs);var ko=new t(ts/Ro,ms/Ro);ko.z=fs/Ro,la.push(ko)}tn.push(ha),cn.push(la)}return[tn,cn]}(Te,tr,Ht,pt);return function(Pr,Gr,qr){var $r=1/0;Gs(qr,Gr)&&($r=Ku(qr,Gr[0]));for(var tn=0;tn<Gr.length;tn++)for(var cn=Gr[tn],kn=Pr[tn],Cn=0;Cn<cn.length-1;Cn++){var Kn=cn[Cn],mi=[Kn,cn[Cn+1],kn[Cn+1],kn[Cn],Kn];Qo(qr,mi)&&($r=Math.min($r,Ku(qr,mi)))}return $r!==1/0&&$r}(mr[0],mr[1],Jt)},I}($o);function cc(M,I){return M.x*I.x+M.y*I.y}function Ku(M,I){if(1===M.length){for(var W,oe=0,ge=I[oe++];!W||ge.equals(W);)if(!(W=I[oe++]))return 1/0;for(;oe<I.length;oe++){var Te=I[oe],Oe=M[0],Ve=W.sub(ge),tt=Te.sub(ge),pt=Oe.sub(ge),bt=cc(Ve,Ve),Ht=cc(Ve,tt),tr=cc(tt,tt),Jt=cc(pt,Ve),mr=cc(pt,tt),Pr=bt*tr-Ht*Ht,Gr=(tr*Jt-Ht*mr)/Pr,qr=(bt*mr-Ht*Jt)/Pr,tn=ge.z*(1-Gr-qr)+W.z*Gr+Te.z*qr;if(isFinite(tn))return tn}return 1/0}for(var cn=1/0,kn=0,Cn=I;kn<Cn.length;kn+=1)cn=Math.min(cn,Cn[kn].z);return cn}var $u=da([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Nh=Dl.VectorTileFeature.types,jh=Math.cos(Math.PI/180*37.5),Qu=Math.pow(2,14)/.5,ws=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ns,this.indexArray=new xo,this.programConfigurations=new ya($u,M.layers,M.zoom),this.segments=new Vt,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};ws.prototype.populate=function(M,I,W){this.hasPattern=du("line",this.layers,I);for(var oe=this.layers[0].layout.get("line-sort-key"),ge=[],Te=0,Oe=M;Te<Oe.length;Te+=1){var Ve=Oe[Te],tt=Ve.feature,pt=Ve.id,bt=Ve.index,Ht=Ve.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,Jt={type:tt.type,id:pt,properties:tt.properties,geometry:tr?Sa(tt):[]};if(this.layers[0]._featureFilter.filter(new pa(this.zoom),Jt,W)){tr||(Jt.geometry=Sa(tt));var mr=oe?oe.evaluate(Jt,{},W):void 0;ge.push({id:pt,properties:tt.properties,type:tt.type,sourceLayerIndex:Ht,index:bt,geometry:Jt.geometry,patterns:{},sortKey:mr})}}oe&&ge.sort(function(ri,gi){return ri.sortKey-gi.sortKey});for(var Gr=0,qr=ge;Gr<qr.length;Gr+=1){var $r=qr[Gr],cn=$r.geometry,kn=$r.index,Cn=$r.sourceLayerIndex;if(this.hasPattern){var Kn=gu("line",this.layers,$r,this.zoom,I);this.patternFeatures.push(Kn)}else this.addFeature($r,cn,kn,W,{});I.featureIndex.insert(M[kn].feature,cn,kn,Cn,this.index)}},ws.prototype.update=function(M,I,W){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,I,this.stateDependentLayers,W)},ws.prototype.addFeatures=function(M,I,W){for(var oe=0,ge=this.patternFeatures;oe<ge.length;oe+=1){var Te=ge[oe];this.addFeature(Te,Te.geometry,Te.index,I,W)}},ws.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,$u),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ws.prototype.addFeature=function(M,I,W,oe,ge){for(var Te=this.layers[0].layout,Oe=Te.get("line-join").evaluate(M,{}),Ve=Te.get("line-cap"),tt=Te.get("line-miter-limit"),pt=Te.get("line-round-limit"),bt=0,Ht=I;bt<Ht.length;bt+=1)this.addLine(Ht[bt],M,Oe,Ve,tt,pt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,W,ge,oe)},ws.prototype.addLine=function(M,I,W,oe,ge,Te){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,I.properties&&I.properties.hasOwnProperty("mapbox_clip_start")&&I.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+I.properties.mapbox_clip_start,this.clipEnd=+I.properties.mapbox_clip_end;for(var Oe=0;Oe<M.length-1;Oe++)this.totalDistance+=M[Oe].dist(M[Oe+1]);this.updateScaledDistance()}for(var Ve="Polygon"===Nh[I.type],tt=M.length;tt>=2&&M[tt-1].equals(M[tt-2]);)tt--;for(var pt=0;pt<tt-1&&M[pt].equals(M[pt+1]);)pt++;if(!(tt<(Ve?3:2))){"bevel"===W&&(ge=1.05);var bt,Ht=this.overscaling<=16?122880/(512*this.overscaling):0,tr=this.segments.prepareSegment(10*tt,this.layoutVertexArray,this.indexArray),Jt=void 0,mr=void 0,Pr=void 0,Gr=void 0;this.e1=this.e2=-1,Ve&&(Gr=M[pt].sub(bt=M[tt-2])._unit()._perp());for(var qr=pt;qr<tt;qr++)if(!(mr=qr===tt-1?Ve?M[pt+1]:void 0:M[qr+1])||!M[qr].equals(mr)){Gr&&(Pr=Gr),bt&&(Jt=bt),bt=M[qr],Gr=mr?mr.sub(bt)._unit()._perp():Pr;var $r=(Pr=Pr||Gr).add(Gr);0===$r.x&&0===$r.y||$r._unit();var tn=Pr.x*Gr.x+Pr.y*Gr.y,cn=$r.x*Gr.x+$r.y*Gr.y,kn=0!==cn?1/cn:1/0,Cn=2*Math.sqrt(2-2*cn),Kn=cn<jh&&Jt&&mr,Zn=Pr.x*Gr.y-Pr.y*Gr.x>0;if(Kn&&qr>pt){var ri=bt.dist(Jt);if(ri>2*Ht){var gi=bt.sub(bt.sub(Jt)._mult(Ht/ri)._round());this.updateDistance(Jt,gi),this.addCurrentVertex(gi,Pr,0,0,tr),Jt=gi}}var mi=Jt&&mr,ci=mi?W:Ve?"butt":oe;if(mi&&"round"===ci&&(kn<Te?ci="miter":kn<=2&&(ci="fakeround")),"miter"===ci&&kn>ge&&(ci="bevel"),"bevel"===ci&&(kn>2&&(ci="flipbevel"),kn<ge&&(ci="miter")),Jt&&this.updateDistance(Jt,bt),"miter"===ci)$r._mult(kn),this.addCurrentVertex(bt,$r,0,0,tr);else if("flipbevel"===ci){if(kn>100)$r=Gr.mult(-1);else{var Ai=kn*Pr.add(Gr).mag()/Pr.sub(Gr).mag();$r._perp()._mult(Ai*(Zn?-1:1))}this.addCurrentVertex(bt,$r,0,0,tr),this.addCurrentVertex(bt,$r.mult(-1),0,0,tr)}else if("bevel"===ci||"fakeround"===ci){var _i=-Math.sqrt(kn*kn-1),vi=Zn?_i:0,ha=Zn?0:_i;if(Jt&&this.addCurrentVertex(bt,Pr,vi,ha,tr),"fakeround"===ci)for(var la=Math.round(180*Cn/Math.PI/20),va=1;va<la;va++){var Ii=va/la;if(.5!==Ii){var ua=Ii-.5;Ii+=Ii*ua*(Ii-1)*((1.0904+tn*(tn*(3.55645-1.43519*tn)-3.2452))*ua*ua+(.848013+tn*(.215638*tn-1.06021)))}var Na=Gr.sub(Pr)._mult(Ii)._add(Pr)._unit()._mult(Zn?-1:1);this.addHalfVertex(bt,Na.x,Na.y,!1,Zn,0,tr)}mr&&this.addCurrentVertex(bt,Gr,-vi,-ha,tr)}else if("butt"===ci)this.addCurrentVertex(bt,$r,0,0,tr);else if("square"===ci){var Pa=Jt?1:-1;this.addCurrentVertex(bt,$r,Pa,Pa,tr)}else"round"===ci&&(Jt&&(this.addCurrentVertex(bt,Pr,0,0,tr),this.addCurrentVertex(bt,Pr,1,1,tr,!0)),mr&&(this.addCurrentVertex(bt,Gr,-1,-1,tr,!0),this.addCurrentVertex(bt,Gr,0,0,tr)));if(Kn&&qr<tt-1){var Wa=bt.dist(mr);if(Wa>2*Ht){var Oa=bt.add(mr.sub(bt)._mult(Ht/Wa)._round());this.updateDistance(bt,Oa),this.addCurrentVertex(Oa,Gr,0,0,tr),bt=Oa}}}}},ws.prototype.addCurrentVertex=function(M,I,W,oe,ge,Te){void 0===Te&&(Te=!1);var tt=I.y*oe-I.x,pt=-I.y-I.x*oe;this.addHalfVertex(M,I.x+I.y*W,I.y-I.x*W,Te,!1,W,ge),this.addHalfVertex(M,tt,pt,Te,!0,-oe,ge),this.distance>Qu/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(M,I,W,oe,ge,Te))},ws.prototype.addHalfVertex=function(M,I,W,oe,ge,Te,Oe){var pt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((M.x<<1)+(oe?1:0),(M.y<<1)+(ge?1:0),Math.round(63*I)+128,Math.round(63*W)+128,1+(0===Te?0:Te<0?-1:1)|(63&pt)<<2,pt>>6);var bt=Oe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,bt),Oe.primitiveLength++),ge?this.e2=bt:this.e1=bt},ws.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Qu-1):this.distance},ws.prototype.updateDistance=function(M,I){this.distance+=M.dist(I),this.updateScaledDistance()},un("LineBucket",ws,{omit:["layers","patternFeatures"]});var Uh=new Ho({"line-cap":new yi(we.layout_line["line-cap"]),"line-join":new Pi(we.layout_line["line-join"]),"line-miter-limit":new yi(we.layout_line["line-miter-limit"]),"line-round-limit":new yi(we.layout_line["line-round-limit"]),"line-sort-key":new Pi(we.layout_line["line-sort-key"])}),ef={paint:new Ho({"line-opacity":new Pi(we.paint_line["line-opacity"]),"line-color":new Pi(we.paint_line["line-color"]),"line-translate":new yi(we.paint_line["line-translate"]),"line-translate-anchor":new yi(we.paint_line["line-translate-anchor"]),"line-width":new Pi(we.paint_line["line-width"]),"line-gap-width":new Pi(we.paint_line["line-gap-width"]),"line-offset":new Pi(we.paint_line["line-offset"]),"line-blur":new Pi(we.paint_line["line-blur"]),"line-dasharray":new Hs(we.paint_line["line-dasharray"]),"line-pattern":new Ps(we.paint_line["line-pattern"]),"line-gradient":new ls(we.paint_line["line-gradient"])}),layout:Uh},tf=new(function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.possiblyEvaluate=function(W,oe){return oe=new pa(Math.floor(oe.zoom),{now:oe.now,fadeDuration:oe.fadeDuration,zoomHistory:oe.zoomHistory,transition:oe.transition}),M.prototype.possiblyEvaluate.call(this,W,oe)},I.prototype.evaluate=function(W,oe,ge,Te){return oe=l({},oe,{zoom:Math.floor(oe.zoom)}),M.prototype.evaluate.call(this,W,oe,ge,Te)},I}(Pi))(ef.paint.properties["line-width"].specification);tf.useIntegerZoom=!0;var Vh=function(M){function I(W){M.call(this,W,ef)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._handleSpecialPaintPropertyUpdate=function(W){"line-gradient"===W&&this._updateGradient()},I.prototype._updateGradient=function(){this.gradient=Ac(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},I.prototype.recalculate=function(W,oe){M.prototype.recalculate.call(this,W,oe),this.paint._values["line-floorwidth"]=tf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,W)},I.prototype.createBucket=function(W){return new ws(W)},I.prototype.queryRadius=function(W){var oe=W,ge=rf(Ca("line-width",this,oe),Ca("line-gap-width",this,oe)),Te=Ca("line-offset",this,oe);return ge/2+Math.abs(Te)+Fo(this.paint.get("line-translate"))},I.prototype.queryIntersectsFeature=function(W,oe,ge,Te,Oe,Ve,tt){var pt=Bo(W,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ve.angle,tt),bt=tt/2*rf(this.paint.get("line-width").evaluate(oe,ge),this.paint.get("line-gap-width").evaluate(oe,ge)),Ht=this.paint.get("line-offset").evaluate(oe,ge);return Ht&&(Te=function(tr,Jt){for(var mr=[],Pr=new t(0,0),Gr=0;Gr<tr.length;Gr++){for(var qr=tr[Gr],$r=[],tn=0;tn<qr.length;tn++){var kn=qr[tn],Cn=qr[tn+1],Kn=0===tn?Pr:kn.sub(qr[tn-1])._unit()._perp(),Zn=tn===qr.length-1?Pr:Cn.sub(kn)._unit()._perp(),ri=Kn._add(Zn)._unit();ri._mult(1/(ri.x*Zn.x+ri.y*Zn.y)),$r.push(ri._mult(Jt)._add(kn))}mr.push($r)}return mr}(Te,Ht*tt)),function(tr,Jt,mr){for(var Pr=0;Pr<Jt.length;Pr++){var Gr=Jt[Pr];if(tr.length>=3)for(var qr=0;qr<Gr.length;qr++)if(cs(tr,Gr[qr]))return!0;if(hl(tr,Gr,mr))return!0}return!1}(pt,Te,bt)},I.prototype.isTileClipped=function(){return!0},I}($o);function rf(M,I){return I>0?I+2*M:M}var vu=da([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hh=da([{name:"a_projected_pos",components:3,type:"Float32"}],4),qh=(da([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),da([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),nf=(da([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),da([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Gh=da([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Yh(M,I,W){return M.sections.forEach(function(oe){var ge,Oe,Ve;oe.text=(ge=oe.text,Oe=W,"uppercase"===(Ve=I.layout.get("text-transform").evaluate(Oe,{}))?ge=ge.toLocaleUpperCase():"lowercase"===Ve&&(ge=ge.toLocaleLowerCase()),To.applyArabicShaping&&(ge=To.applyArabicShaping(ge)),ge)}),M}da([{name:"triangle",components:3,type:"Uint16"}]),da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),da([{type:"Float32",name:"offsetX"}]),da([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var uc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},af=function(M,I,W,oe,ge){var Te,Oe,Ve=8*ge-oe-1,tt=(1<<Ve)-1,pt=tt>>1,bt=-7,Ht=W?ge-1:0,tr=W?-1:1,Jt=M[I+Ht];for(Ht+=tr,Te=Jt&(1<<-bt)-1,Jt>>=-bt,bt+=Ve;bt>0;Te=256*Te+M[I+Ht],Ht+=tr,bt-=8);for(Oe=Te&(1<<-bt)-1,Te>>=-bt,bt+=oe;bt>0;Oe=256*Oe+M[I+Ht],Ht+=tr,bt-=8);if(0===Te)Te=1-pt;else{if(Te===tt)return Oe?NaN:1/0*(Jt?-1:1);Oe+=Math.pow(2,oe),Te-=pt}return(Jt?-1:1)*Oe*Math.pow(2,Te-oe)},of=function(M,I,W,oe,ge,Te){var Oe,Ve,tt,pt=8*Te-ge-1,bt=(1<<pt)-1,Ht=bt>>1,tr=23===ge?Math.pow(2,-24)-Math.pow(2,-77):0,Jt=oe?0:Te-1,mr=oe?1:-1,Pr=I<0||0===I&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(Ve=isNaN(I)?1:0,Oe=bt):(Oe=Math.floor(Math.log(I)/Math.LN2),I*(tt=Math.pow(2,-Oe))<1&&(Oe--,tt*=2),(I+=Oe+Ht>=1?tr/tt:tr*Math.pow(2,1-Ht))*tt>=2&&(Oe++,tt/=2),Oe+Ht>=bt?(Ve=0,Oe=bt):Oe+Ht>=1?(Ve=(I*tt-1)*Math.pow(2,ge),Oe+=Ht):(Ve=I*Math.pow(2,Ht-1)*Math.pow(2,ge),Oe=0));ge>=8;M[W+Jt]=255&Ve,Jt+=mr,Ve/=256,ge-=8);for(Oe=Oe<<ge|Ve,pt+=ge;pt>0;M[W+Jt]=255&Oe,Jt+=mr,Oe/=256,pt-=8);M[W+Jt-mr]|=128*Pr},Lc=Ba;function Ba(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}Ba.Varint=0,Ba.Fixed64=1,Ba.Bytes=2,Ba.Fixed32=5;var sf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function dl(M){return M.type===Ba.Bytes?M.readVarint()+M.pos:M.pos+1}function lf(M,I,W){var oe=I<=16383?1:I<=2097151?2:I<=268435455?3:Math.floor(Math.log(I)/(7*Math.LN2));W.realloc(oe);for(var ge=W.pos-1;ge>=M;ge--)W.buf[ge+oe]=W.buf[ge]}function Wh(M,I){for(var W=0;W<M.length;W++)I.writeVarint(M[W])}function Zh(M,I){for(var W=0;W<M.length;W++)I.writeSVarint(M[W])}function Xh(M,I){for(var W=0;W<M.length;W++)I.writeFloat(M[W])}function Jh(M,I){for(var W=0;W<M.length;W++)I.writeDouble(M[W])}function Kh(M,I){for(var W=0;W<M.length;W++)I.writeBoolean(M[W])}function $h(M,I){for(var W=0;W<M.length;W++)I.writeFixed32(M[W])}function Qh(M,I){for(var W=0;W<M.length;W++)I.writeSFixed32(M[W])}function ep(M,I){for(var W=0;W<M.length;W++)I.writeFixed64(M[W])}function tp(M,I){for(var W=0;W<M.length;W++)I.writeSFixed64(M[W])}function Pc(M,I){return(M[I]|M[I+1]<<8|M[I+2]<<16)+16777216*M[I+3]}function Rl(M,I,W){M[W]=I,M[W+1]=I>>>8,M[W+2]=I>>>16,M[W+3]=I>>>24}function cf(M,I){return(M[I]|M[I+1]<<8|M[I+2]<<16)+(M[I+3]<<24)}function rp(M,I,W){1===M&&W.readMessage(np,I)}function np(M,I,W){if(3===M){var oe=W.readMessage(ip,{}),Oe=oe.width,Ve=oe.height,tt=oe.left,pt=oe.top,bt=oe.advance;I.push({id:oe.id,bitmap:new Us({width:Oe+6,height:Ve+6},oe.bitmap),metrics:{width:Oe,height:Ve,left:tt,top:pt,advance:bt}})}}function ip(M,I,W){1===M?I.id=W.readVarint():2===M?I.bitmap=W.readBytes():3===M?I.width=W.readVarint():4===M?I.height=W.readVarint():5===M?I.left=W.readSVarint():6===M?I.top=W.readSVarint():7===M&&(I.advance=W.readVarint())}function uf(M){for(var I=0,W=0,oe=0,ge=M;oe<ge.length;oe+=1){var Te=ge[oe];I+=Te.w*Te.h,W=Math.max(W,Te.w)}M.sort(function(Pr,Gr){return Gr.h-Pr.h});for(var Oe=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(I/.95)),W),h:1/0}],Ve=0,tt=0,pt=0,bt=M;pt<bt.length;pt+=1)for(var Ht=bt[pt],tr=Oe.length-1;tr>=0;tr--){var Jt=Oe[tr];if(!(Ht.w>Jt.w||Ht.h>Jt.h)){if(Ht.x=Jt.x,Ht.y=Jt.y,tt=Math.max(tt,Ht.y+Ht.h),Ve=Math.max(Ve,Ht.x+Ht.w),Ht.w===Jt.w&&Ht.h===Jt.h){var mr=Oe.pop();tr<Oe.length&&(Oe[tr]=mr)}else Ht.h===Jt.h?(Jt.x+=Ht.w,Jt.w-=Ht.w):Ht.w===Jt.w?(Jt.y+=Ht.h,Jt.h-=Ht.h):(Oe.push({x:Jt.x+Ht.w,y:Jt.y,w:Jt.w-Ht.w,h:Ht.h}),Jt.y+=Ht.h,Jt.h-=Ht.h);break}}return{w:Ve,h:tt,fill:I/(Ve*tt)||0}}Ba.prototype={destroy:function(){this.buf=null},readFields:function(M,I,W){for(W=W||this.length;this.pos<W;){var oe=this.readVarint(),ge=oe>>3,Te=this.pos;this.type=7&oe,M(ge,I,this),this.pos===Te&&this.skip(oe)}return I},readMessage:function(M,I){return this.readFields(M,I,this.readVarint()+this.pos)},readFixed32:function(){var M=Pc(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=cf(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Pc(this.buf,this.pos)+4294967296*Pc(this.buf,this.pos+4);return this.pos+=8,M},readSFixed64:function(){var M=Pc(this.buf,this.pos)+4294967296*cf(this.buf,this.pos+4);return this.pos+=8,M},readFloat:function(){var M=af(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=af(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var I,W,oe=this.buf;return I=127&(W=oe[this.pos++]),W<128?I:(I|=(127&(W=oe[this.pos++]))<<7,W<128?I:(I|=(127&(W=oe[this.pos++]))<<14,W<128?I:(I|=(127&(W=oe[this.pos++]))<<21,W<128?I:function(ge,Te,Oe){var Ve,tt,pt=Oe.buf;if(Ve=(112&(tt=pt[Oe.pos++]))>>4,tt<128||(Ve|=(127&(tt=pt[Oe.pos++]))<<3,tt<128)||(Ve|=(127&(tt=pt[Oe.pos++]))<<10,tt<128)||(Ve|=(127&(tt=pt[Oe.pos++]))<<17,tt<128)||(Ve|=(127&(tt=pt[Oe.pos++]))<<24,tt<128)||(Ve|=(1&(tt=pt[Oe.pos++]))<<31,tt<128))return function zl(M,I,W){return W?4294967296*I+(M>>>0):4294967296*(I>>>0)+(M>>>0)}(ge,Ve,Te);throw new Error("Expected varint not more than 10 bytes")}(I|=(15&(W=oe[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var M=this.readVarint()+this.pos,I=this.pos;return this.pos=M,M-I>=12&&sf?sf.decode(this.buf.subarray(I,M)):function(W,oe,ge){for(var Te="",Oe=oe;Oe<ge;){var Ve,tt,pt,bt=W[Oe],Ht=null,tr=bt>239?4:bt>223?3:bt>191?2:1;if(Oe+tr>ge)break;1===tr?bt<128&&(Ht=bt):2===tr?128==(192&(Ve=W[Oe+1]))&&(Ht=(31&bt)<<6|63&Ve)<=127&&(Ht=null):3===tr?(tt=W[Oe+2],128==(192&(Ve=W[Oe+1]))&&128==(192&tt)&&((Ht=(15&bt)<<12|(63&Ve)<<6|63&tt)<=2047||Ht>=55296&&Ht<=57343)&&(Ht=null)):4===tr&&(tt=W[Oe+2],pt=W[Oe+3],128==(192&(Ve=W[Oe+1]))&&128==(192&tt)&&128==(192&pt)&&((Ht=(15&bt)<<18|(63&Ve)<<12|(63&tt)<<6|63&pt)<=65535||Ht>=1114112)&&(Ht=null)),null===Ht?(Ht=65533,tr=1):Ht>65535&&(Ht-=65536,Te+=String.fromCharCode(Ht>>>10&1023|55296),Ht=56320|1023&Ht),Te+=String.fromCharCode(Ht),Oe+=tr}return Te}(this.buf,I,M)},readBytes:function(){var M=this.readVarint()+this.pos,I=this.buf.subarray(this.pos,M);return this.pos=M,I},readPackedVarint:function(M,I){if(this.type!==Ba.Bytes)return M.push(this.readVarint(I));var W=dl(this);for(M=M||[];this.pos<W;)M.push(this.readVarint(I));return M},readPackedSVarint:function(M){if(this.type!==Ba.Bytes)return M.push(this.readSVarint());var I=dl(this);for(M=M||[];this.pos<I;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==Ba.Bytes)return M.push(this.readBoolean());var I=dl(this);for(M=M||[];this.pos<I;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==Ba.Bytes)return M.push(this.readFloat());var I=dl(this);for(M=M||[];this.pos<I;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==Ba.Bytes)return M.push(this.readDouble());var I=dl(this);for(M=M||[];this.pos<I;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==Ba.Bytes)return M.push(this.readFixed32());var I=dl(this);for(M=M||[];this.pos<I;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==Ba.Bytes)return M.push(this.readSFixed32());var I=dl(this);for(M=M||[];this.pos<I;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==Ba.Bytes)return M.push(this.readFixed64());var I=dl(this);for(M=M||[];this.pos<I;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==Ba.Bytes)return M.push(this.readSFixed64());var I=dl(this);for(M=M||[];this.pos<I;)M.push(this.readSFixed64());return M},skip:function(M){var I=7&M;if(I===Ba.Varint)for(;this.buf[this.pos++]>127;);else if(I===Ba.Bytes)this.pos=this.readVarint()+this.pos;else if(I===Ba.Fixed32)this.pos+=4;else{if(I!==Ba.Fixed64)throw new Error("Unimplemented type: "+I);this.pos+=8}},writeTag:function(M,I){this.writeVarint(M<<3|I)},realloc:function(M){for(var I=this.length||16;I<this.pos+M;)I*=2;if(I!==this.length){var W=new Uint8Array(I);W.set(this.buf),this.buf=W,this.length=I}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),Rl(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),Rl(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),Rl(this.buf,-1&M,this.pos),Rl(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),Rl(this.buf,-1&M,this.pos),Rl(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(I,W){var oe,ge,Te,Ve;if(I>=0?(oe=I%4294967296|0,ge=I/4294967296|0):(ge=~(-I/4294967296),4294967295^(oe=~(-I%4294967296))?oe=oe+1|0:(oe=0,ge=ge+1|0)),I>=0x10000000000000000||I<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");W.realloc(10),Te=oe,(Ve=W).buf[Ve.pos++]=127&Te|128,Te>>>=7,Ve.buf[Ve.pos++]=127&Te|128,Te>>>=7,Ve.buf[Ve.pos++]=127&Te|128,Te>>>=7,Ve.buf[Ve.pos++]=127&Te|128,Ve.buf[Ve.pos]=127&(Te>>>=7),function(Te,Oe){var Ve=(7&Te)<<4;Oe.buf[Oe.pos++]|=Ve|((Te>>>=3)?128:0),Te&&(Oe.buf[Oe.pos++]=127&Te|((Te>>>=7)?128:0),Te&&(Oe.buf[Oe.pos++]=127&Te|((Te>>>=7)?128:0),Te&&(Oe.buf[Oe.pos++]=127&Te|((Te>>>=7)?128:0),Te&&(Oe.buf[Oe.pos++]=127&Te|((Te>>>=7)?128:0),Te&&(Oe.buf[Oe.pos++]=127&Te)))))}(ge,W)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(Boolean(M))},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var I=this.pos;this.pos=function(oe,ge,Te){for(var Oe,Ve,tt=0;tt<ge.length;tt++){if((Oe=ge.charCodeAt(tt))>55295&&Oe<57344){if(!Ve){Oe>56319||tt+1===ge.length?(oe[Te++]=239,oe[Te++]=191,oe[Te++]=189):Ve=Oe;continue}if(Oe<56320){oe[Te++]=239,oe[Te++]=191,oe[Te++]=189,Ve=Oe;continue}Oe=Ve-55296<<10|Oe-56320|65536,Ve=null}else Ve&&(oe[Te++]=239,oe[Te++]=191,oe[Te++]=189,Ve=null);Oe<128?oe[Te++]=Oe:(Oe<2048?oe[Te++]=Oe>>6|192:(Oe<65536?oe[Te++]=Oe>>12|224:(oe[Te++]=Oe>>18|240,oe[Te++]=Oe>>12&63|128),oe[Te++]=Oe>>6&63|128),oe[Te++]=63&Oe|128)}return Te}(this.buf,M,this.pos);var W=this.pos-I;W>=128&&lf(I,W,this),this.pos=I-1,this.writeVarint(W),this.pos+=W},writeFloat:function(M){this.realloc(4),of(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),of(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var I=M.length;this.writeVarint(I),this.realloc(I);for(var W=0;W<I;W++)this.buf[this.pos++]=M[W]},writeRawMessage:function(M,I){this.pos++;var W=this.pos;M(I,this);var oe=this.pos-W;oe>=128&&lf(W,oe,this),this.pos=W-1,this.writeVarint(oe),this.pos+=oe},writeMessage:function(M,I,W){this.writeTag(M,Ba.Bytes),this.writeRawMessage(I,W)},writePackedVarint:function(M,I){I.length&&this.writeMessage(M,Wh,I)},writePackedSVarint:function(M,I){I.length&&this.writeMessage(M,Zh,I)},writePackedBoolean:function(M,I){I.length&&this.writeMessage(M,Kh,I)},writePackedFloat:function(M,I){I.length&&this.writeMessage(M,Xh,I)},writePackedDouble:function(M,I){I.length&&this.writeMessage(M,Jh,I)},writePackedFixed32:function(M,I){I.length&&this.writeMessage(M,$h,I)},writePackedSFixed32:function(M,I){I.length&&this.writeMessage(M,Qh,I)},writePackedFixed64:function(M,I){I.length&&this.writeMessage(M,ep,I)},writePackedSFixed64:function(M,I){I.length&&this.writeMessage(M,tp,I)},writeBytesField:function(M,I){this.writeTag(M,Ba.Bytes),this.writeBytes(I)},writeFixed32Field:function(M,I){this.writeTag(M,Ba.Fixed32),this.writeFixed32(I)},writeSFixed32Field:function(M,I){this.writeTag(M,Ba.Fixed32),this.writeSFixed32(I)},writeFixed64Field:function(M,I){this.writeTag(M,Ba.Fixed64),this.writeFixed64(I)},writeSFixed64Field:function(M,I){this.writeTag(M,Ba.Fixed64),this.writeSFixed64(I)},writeVarintField:function(M,I){this.writeTag(M,Ba.Varint),this.writeVarint(I)},writeSVarintField:function(M,I){this.writeTag(M,Ba.Varint),this.writeSVarint(I)},writeStringField:function(M,I){this.writeTag(M,Ba.Bytes),this.writeString(I)},writeFloatField:function(M,I){this.writeTag(M,Ba.Fixed32),this.writeFloat(I)},writeDoubleField:function(M,I){this.writeTag(M,Ba.Fixed64),this.writeDouble(I)},writeBooleanField:function(M,I){this.writeVarintField(M,Boolean(I))}};var Oc=function(M,I){var W=I.pixelRatio,oe=I.version,ge=I.stretchX,Te=I.stretchY,Oe=I.content;this.paddedRect=M,this.pixelRatio=W,this.stretchX=ge,this.stretchY=Te,this.content=Oe,this.version=oe},fc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};fc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},fc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},fc.tlbr.get=function(){return this.tl.concat(this.br)},fc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Oc.prototype,fc);var hc=function(M,I){var W={},oe={};this.haveRenderCallbacks=[];var ge=[];this.addImages(M,W,ge),this.addImages(I,oe,ge);var Te=uf(ge),tt=new es({width:Te.w||1,height:Te.h||1});for(var pt in M){var bt=M[pt],Ht=W[pt].paddedRect;es.copy(bt.data,tt,{x:0,y:0},{x:Ht.x+1,y:Ht.y+1},bt.data)}for(var tr in I){var Jt=I[tr],mr=oe[tr].paddedRect,Pr=mr.x+1,Gr=mr.y+1,qr=Jt.data.width,$r=Jt.data.height;es.copy(Jt.data,tt,{x:0,y:0},{x:Pr,y:Gr},Jt.data),es.copy(Jt.data,tt,{x:0,y:$r-1},{x:Pr,y:Gr-1},{width:qr,height:1}),es.copy(Jt.data,tt,{x:0,y:0},{x:Pr,y:Gr+$r},{width:qr,height:1}),es.copy(Jt.data,tt,{x:qr-1,y:0},{x:Pr-1,y:Gr},{width:1,height:$r}),es.copy(Jt.data,tt,{x:0,y:0},{x:Pr+qr,y:Gr},{width:1,height:$r})}this.image=tt,this.iconPositions=W,this.patternPositions=oe};hc.prototype.addImages=function(M,I,W){for(var oe in M){var ge=M[oe],Te={x:0,y:0,w:ge.data.width+2,h:ge.data.height+2};W.push(Te),I[oe]=new Oc(Te,ge),ge.hasRenderCallback&&this.haveRenderCallbacks.push(oe)}},hc.prototype.patchUpdatedImages=function(M,I){for(var W in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[W],M.getImage(W),I),this.patchUpdatedImage(this.patternPositions[W],M.getImage(W),I)},hc.prototype.patchUpdatedImage=function(M,I,W){if(M&&I&&M.version!==I.version){M.version=I.version;var oe=M.tl;W.update(I.data,void 0,{x:oe[0],y:oe[1]})}},un("ImagePosition",Oc),un("ImageAtlas",hc);var zs={horizontal:1,vertical:2,horizontalOnly:3},Fl=function(){this.scale=1,this.fontStack="",this.imageName=null};Fl.forText=function(M,I){var W=new Fl;return W.scale=M||1,W.fontStack=I,W},Fl.forImage=function(M){var I=new Fl;return I.imageName=M,I};var us=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ic(M,I,W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr,Pr){var Gr,qr=us.fromFeature(M,ge);Ht===zs.vertical&&qr.verticalizePunctuation();var $r=To.processBidirectionalText,tn=To.processStyledBidirectionalText;if($r&&1===qr.sections.length){Gr=[];for(var cn=0,kn=$r(qr.toString(),yu(qr,pt,Te,I,oe,Jt,mr));cn<kn.length;cn+=1){var Cn=kn[cn],Kn=new us;Kn.text=Cn,Kn.sections=qr.sections;for(var Zn=0;Zn<Cn.length;Zn++)Kn.sectionIndex.push(0);Gr.push(Kn)}}else if(tn){Gr=[];for(var ri=0,gi=tn(qr.text,qr.sectionIndex,yu(qr,pt,Te,I,oe,Jt,mr));ri<gi.length;ri+=1){var mi=gi[ri],ci=new us;ci.text=mi[0],ci.sectionIndex=mi[1],ci.sections=qr.sections,Gr.push(ci)}}else Gr=function(vi,ha){for(var la=[],va=vi.text,Ii=0,ua=0,Na=ha;ua<Na.length;ua+=1){var Pa=Na[ua];la.push(vi.substring(Ii,Pa)),Ii=Pa}return Ii<va.length&&la.push(vi.substring(Ii,va.length)),la}(qr,yu(qr,pt,Te,I,oe,Jt,mr));var Ai=[],_i={positionedLines:Ai,text:qr.toString(),top:bt[1],bottom:bt[1],left:bt[0],right:bt[0],writingMode:Ht,iconsInText:!1,verticalizable:!1};return function(vi,ha,la,va,Ii,ua,Na,Pa,Wa,Oa,zo,Za){for(var is=0,Yo=-17,ts=0,ms=0,fs="right"===Pa?1:"left"===Pa?0:.5,Ro=0,rs=0,ko=Ii;rs<ko.length;rs+=1){var No=ko[rs];No.trim();var $i=No.getMaxScale(),ga=24*($i-1),oo={positionedGlyphs:[],lineOffset:0};vi.positionedLines[Ro]=oo;var so=oo.positionedGlyphs,io=0;if(No.length()){for(var Xa=0;Xa<No.length();Xa++){var xa=No.getSection(Xa),lo=No.getSectionIndex(Xa),vs=No.getCharCode(Xa),Cs=0,hs=null,$s=null,yl=null,Wo=24,Qs=!(Wa===zs.horizontal||!zo&&!Ti(vs)||zo&&(Dc[vs]||(kl=vs,Rn.Arabic(kl)||Rn["Arabic Supplement"](kl)||Rn["Arabic Extended-A"](kl)||Rn["Arabic Presentation Forms-A"](kl)||Rn["Arabic Presentation Forms-B"](kl))));if(xa.imageName){var el=va[xa.imageName];if(!el)continue;yl=xa.imageName,vi.iconsInText=vi.iconsInText||!0,$s=el.paddedRect;var tl=el.displaySize;xa.scale=24*xa.scale/Za,Cs=ga+(24-tl[1]*xa.scale),Wo=(hs={width:tl[0],height:tl[1],left:1,top:-3,advance:Qs?tl[1]:tl[0]}).advance;var Gl=Qs?tl[0]*xa.scale-24*$i:tl[1]*xa.scale-24*$i;Gl>0&&Gl>io&&(io=Gl)}else{var Hc=la[xa.fontStack],Ll=Hc&&Hc[vs];if(Ll&&Ll.rect)$s=Ll.rect,hs=Ll.metrics;else{var qc=ha[xa.fontStack],Gc=qc&&qc[vs];if(!Gc)continue;hs=Gc.metrics}Cs=24*($i-xa.scale)}Qs?(vi.verticalizable=!0,so.push({glyph:vs,imageName:yl,x:is,y:Yo+Cs,vertical:Qs,scale:xa.scale,fontStack:xa.fontStack,sectionIndex:lo,metrics:hs,rect:$s}),is+=Wo*xa.scale+Oa):(so.push({glyph:vs,imageName:yl,x:is,y:Yo+Cs,vertical:Qs,scale:xa.scale,fontStack:xa.fontStack,sectionIndex:lo,metrics:hs,rect:$s}),is+=hs.advance*xa.scale+Oa)}0!==so.length&&(ts=Math.max(is-Oa,ts),op(so,0,so.length-1,fs,io)),is=0;var Wc=ua*$i+io;oo.lineOffset=Math.max(io,ga),Yo+=Wc,ms=Math.max(Wc,ms),++Ro}else Yo+=ua,++Ro}var kl,Yl=Yo- -17,Zc=xu(Na),Wl=Zc.horizontalAlign,Al=Zc.verticalAlign;(function(gc,Xc,Jc,Kc,mc,$c,vc,Qc,yc){var Zl,eu=(Xc-Jc)*mc;Zl=$c!==vc?-Qc*Kc- -17:(-Kc*yc+.5)*vc;for(var Xl=0,Jl=gc;Xl<Jl.length;Xl+=1)for(var Kl=0,xc=Jl[Xl].positionedGlyphs;Kl<xc.length;Kl+=1){var $l=xc[Kl];$l.x+=eu,$l.y+=Zl}})(vi.positionedLines,fs,Wl,Al,ts,ms,ua,Yl,Ii.length),vi.top+=-Al*Yl,vi.bottom=vi.top+Yl,vi.left+=-Wl*ts,vi.right=vi.left+ts}(_i,I,W,oe,Gr,Oe,Ve,tt,Ht,pt,tr,Pr),!function(vi){for(var ha=0,la=vi;ha<la.length;ha+=1)if(0!==la[ha].positionedGlyphs.length)return!1;return!0}(Ai)&&_i}us.fromFeature=function(M,I){for(var W=new us,oe=0;oe<M.sections.length;oe++){var ge=M.sections[oe];ge.image?W.addImageSection(ge):W.addTextSection(ge,I)}return W},us.prototype.length=function(){return this.text.length},us.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},us.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},us.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},us.prototype.verticalizePunctuation=function(){this.text=function(M){for(var I="",W=0;W<M.length;W++){var oe=M.charCodeAt(W+1)||null,ge=M.charCodeAt(W-1)||null;oe&&Xi(oe)&&!uc[M[W+1]]||ge&&Xi(ge)&&!uc[M[W-1]]||!uc[M[W]]?I+=M[W]:I+=uc[M[W]]}return I}(this.text)},us.prototype.trim=function(){for(var M=0,I=0;I<this.text.length&&Dc[this.text.charCodeAt(I)];I++)M++;for(var W=this.text.length,oe=this.text.length-1;oe>=0&&oe>=M&&Dc[this.text.charCodeAt(oe)];oe--)W--;this.text=this.text.substring(M,W),this.sectionIndex=this.sectionIndex.slice(M,W)},us.prototype.substring=function(M,I){var W=new us;return W.text=this.text.substring(M,I),W.sectionIndex=this.sectionIndex.slice(M,I),W.sections=this.sections,W},us.prototype.toString=function(){return this.text},us.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(I,W){return Math.max(I,M.sections[W].scale)},0)},us.prototype.addTextSection=function(M,I){this.text+=M.text,this.sections.push(Fl.forText(M.scale,M.fontStack||I));for(var W=this.sections.length-1,oe=0;oe<M.text.length;++oe)this.sectionIndex.push(W)},us.prototype.addImageSection=function(M){var I=M.image?M.image.name:"";if(0!==I.length){var W=this.getNextImageSectionCharCode();W?(this.text+=String.fromCharCode(W),this.sections.push(Fl.forImage(I)),this.sectionIndex.push(this.sections.length-1)):A("Reached maximum number of images 6401")}else A("Can't add FormattedSection with an empty image.")},us.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Dc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Es={};function ff(M,I,W,oe,ge,Te){if(I.imageName){var Oe=oe[I.imageName];return Oe?Oe.displaySize[0]*I.scale*24/Te+ge:0}var Ve=W[I.fontStack],tt=Ve&&Ve[M];return tt?tt.metrics.advance*I.scale+ge:0}function hf(M,I,W,oe){var ge=Math.pow(M-I,2);return oe?M<I?ge/2:2*ge:ge+Math.abs(W)*W}function ap(M,I,W){var oe=0;return 10===M&&(oe-=1e4),W&&(oe+=150),40!==M&&65288!==M||(oe+=50),41!==I&&65289!==I||(oe+=50),oe}function pf(M,I,W,oe,ge,Te){for(var Oe=null,Ve=hf(I,W,ge,Te),tt=0,pt=oe;tt<pt.length;tt+=1){var bt=pt[tt],Ht=hf(I-bt.x,W,ge,Te)+bt.badness;Ht<=Ve&&(Oe=bt,Ve=Ht)}return{index:M,x:I,priorBreak:Oe,badness:Ve}}function yu(M,I,W,oe,ge,Te,Oe){if("point"!==Te)return[];if(!M)return[];for(var Ve,tt=[],pt=function(Gr,qr,$r,tn,cn,kn){for(var Cn=0,Kn=0;Kn<Gr.length();Kn++){var Zn=Gr.getSection(Kn);Cn+=ff(Gr.getCharCode(Kn),Zn,tn,cn,qr,kn)}return Cn/Math.max(1,Math.ceil(Cn/$r))}(M,I,W,oe,ge,Oe),bt=M.text.indexOf("\u200b")>=0,Ht=0,tr=0;tr<M.length();tr++){var Jt=M.getSection(tr),mr=M.getCharCode(tr);if(Dc[mr]||(Ht+=ff(mr,Jt,oe,ge,I,Oe)),tr<M.length()-1){var Pr=!((Ve=mr)<11904||!(Rn["Bopomofo Extended"](Ve)||Rn.Bopomofo(Ve)||Rn["CJK Compatibility Forms"](Ve)||Rn["CJK Compatibility Ideographs"](Ve)||Rn["CJK Compatibility"](Ve)||Rn["CJK Radicals Supplement"](Ve)||Rn["CJK Strokes"](Ve)||Rn["CJK Symbols and Punctuation"](Ve)||Rn["CJK Unified Ideographs Extension A"](Ve)||Rn["CJK Unified Ideographs"](Ve)||Rn["Enclosed CJK Letters and Months"](Ve)||Rn["Halfwidth and Fullwidth Forms"](Ve)||Rn.Hiragana(Ve)||Rn["Ideographic Description Characters"](Ve)||Rn["Kangxi Radicals"](Ve)||Rn["Katakana Phonetic Extensions"](Ve)||Rn.Katakana(Ve)||Rn["Vertical Forms"](Ve)||Rn["Yi Radicals"](Ve)||Rn["Yi Syllables"](Ve)));(Es[mr]||Pr||Jt.imageName)&&tt.push(pf(tr+1,Ht,pt,tt,ap(mr,M.getCharCode(tr+1),Pr&&bt),!1))}}return function Gr(qr){return qr?Gr(qr.priorBreak).concat(qr.index):[]}(pf(M.length(),Ht,pt,tt,0,!0))}function xu(M){var I=.5,W=.5;switch(M){case"right":case"top-right":case"bottom-right":I=1;break;case"left":case"top-left":case"bottom-left":I=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":W=1;break;case"top":case"top-right":case"top-left":W=0}return{horizontalAlign:I,verticalAlign:W}}function op(M,I,W,oe,ge){if(oe||ge)for(var Te=M[W],Ve=(M[W].x+Te.metrics.advance*Te.scale)*oe,tt=I;tt<=W;tt++)M[tt].x-=Ve,M[tt].y+=ge}function df(M,I,W,oe,ge,Te){var Oe,Ve=M.image;if(Ve.content){var tt=Ve.content,pt=Ve.pixelRatio||1;Oe=[tt[0]/pt,tt[1]/pt,Ve.displaySize[0]-tt[2]/pt,Ve.displaySize[1]-tt[3]/pt]}var bt,Ht,tr,Jt,mr=I.left*Te,Pr=I.right*Te;"width"===W||"both"===W?(Jt=ge[0]+mr-oe[3],Ht=ge[0]+Pr+oe[1]):Ht=(Jt=ge[0]+(mr+Pr-Ve.displaySize[0])/2)+Ve.displaySize[0];var Gr=I.top*Te,qr=I.bottom*Te;return"height"===W||"both"===W?(bt=ge[1]+Gr-oe[0],tr=ge[1]+qr+oe[2]):tr=(bt=ge[1]+(Gr+qr-Ve.displaySize[1])/2)+Ve.displaySize[1],{image:Ve,top:bt,right:Ht,bottom:tr,left:Jt,collisionPadding:Oe}}Es[10]=!0,Es[32]=!0,Es[38]=!0,Es[40]=!0,Es[41]=!0,Es[43]=!0,Es[45]=!0,Es[47]=!0,Es[173]=!0,Es[183]=!0,Es[8203]=!0,Es[8208]=!0,Es[8211]=!0,Es[8231]=!0;var Bl=function(M){function I(W,oe,ge,Te){M.call(this,W,oe),this.angle=ge,void 0!==Te&&(this.segment=Te)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.clone=function(){return new I(this.x,this.y,this.angle,this.segment)},I}(t);function bu(M,I){var W=I.expression;if("constant"===W.kind)return{kind:"constant",layoutSize:W.evaluate(new pa(M+1))};if("source"===W.kind)return{kind:"source"};for(var oe=W.zoomStops,ge=W.interpolationType,Te=0;Te<oe.length&&oe[Te]<=M;)Te++;for(var Oe=Te=Math.max(0,Te-1);Oe<oe.length&&oe[Oe]<M+1;)Oe++;Oe=Math.min(oe.length-1,Oe);var Ve=oe[Te],tt=oe[Oe];return"composite"===W.kind?{kind:"composite",minZoom:Ve,maxZoom:tt,interpolationType:ge}:{kind:"camera",minZoom:Ve,maxZoom:tt,minSize:W.evaluate(new pa(Ve)),maxSize:W.evaluate(new pa(tt)),interpolationType:ge}}function gf(M,I,W){var oe=I.uSize,Te=W.lowerSize;return"source"===M.kind?Te/128:"composite"===M.kind?Ln(Te/128,W.upperSize/128,I.uSizeT):oe}function mf(M,I){var W=0,oe=0;if("constant"===M.kind)oe=M.layoutSize;else if("source"!==M.kind){var ge=M.interpolationType,Ve=ge?s(Ji.interpolationFactor(ge,I,M.minZoom,M.maxZoom),0,1):0;"camera"===M.kind?oe=Ln(M.minSize,M.maxSize,Ve):W=Ve}return{uSizeT:W,uSize:oe}}un("Anchor",Bl);var sp=Object.freeze({__proto__:null,getSizeData:bu,evaluateSizeForFeature:gf,evaluateSizeForZoom:mf,SIZE_PACK_FACTOR:128});function vf(M,I,W,oe,ge){if(void 0===I.segment)return!0;for(var Te=I,Oe=I.segment+1,Ve=0;Ve>-W/2;){if(--Oe<0)return!1;Ve-=M[Oe].dist(Te),Te=M[Oe]}Ve+=M[Oe].dist(M[Oe+1]),Oe++;for(var tt=[],pt=0;Ve<W/2;){var Ht=M[Oe],tr=M[Oe+1];if(!tr)return!1;var Jt=M[Oe-1].angleTo(Ht)-Ht.angleTo(tr);for(Jt=Math.abs((Jt+3*Math.PI)%(2*Math.PI)-Math.PI),tt.push({distance:Ve,angleDelta:Jt}),pt+=Jt;Ve-tt[0].distance>oe;)pt-=tt.shift().angleDelta;if(pt>ge)return!1;Oe++,Ve+=Ht.dist(tr)}return!0}function yf(M){for(var I=0,W=0;W<M.length-1;W++)I+=M[W].dist(M[W+1]);return I}function xf(M,I,W){return M?.6*I*W:0}function bf(M,I){return Math.max(M?M.right-M.left:0,I?I.right-I.left:0)}function lp(M,I,W,oe,ge,Te){for(var Oe=xf(W,ge,Te),Ve=bf(W,oe)*Te,tt=0,pt=yf(M)/2,bt=0;bt<M.length-1;bt++){var Ht=M[bt],tr=M[bt+1],Jt=Ht.dist(tr);if(tt+Jt>pt){var mr=(pt-tt)/Jt,Pr=Ln(Ht.x,tr.x,mr),Gr=Ln(Ht.y,tr.y,mr),qr=new Bl(Pr,Gr,tr.angleTo(Ht),bt);return qr._round(),!Oe||vf(M,qr,Ve,Oe,I)?qr:void 0}tt+=Jt}}function cp(M,I,W,oe,ge,Te,Oe,Ve,tt){var pt=xf(oe,Te,Oe),bt=bf(oe,ge),Ht=bt*Oe,tr=0===M[0].x||M[0].x===tt||0===M[0].y||M[0].y===tt;return I-Ht<I/4&&(I=Ht+I/4),function Jt(mr,Pr,Gr,qr,$r,tn,cn,kn,Cn){for(var Kn=tn/2,Zn=yf(mr),ri=0,gi=Pr-Gr,mi=[],ci=0;ci<mr.length-1;ci++){for(var Ai=mr[ci],_i=mr[ci+1],vi=Ai.dist(_i),ha=_i.angleTo(Ai);gi+Gr<ri+vi;){var la=((gi+=Gr)-ri)/vi,va=Ln(Ai.x,_i.x,la),Ii=Ln(Ai.y,_i.y,la);if(va>=0&&va<Cn&&Ii>=0&&Ii<Cn&&gi-Kn>=0&&gi+Kn<=Zn){var ua=new Bl(va,Ii,ha,ci);ua._round(),qr&&!vf(mr,ua,tn,qr,$r)||mi.push(ua)}}ri+=vi}return kn||mi.length||cn||(mi=Jt(mr,ri/2,Gr,qr,$r,tn,cn,!0,Cn)),mi}(M,tr?I/2*Ve%I:(bt/2+2*Te)*Oe*Ve%I,I,pt,W,Ht,tr,!1,tt)}function _f(M,I,W,oe,ge){for(var Te=[],Oe=0;Oe<M.length;Oe++)for(var Ve=M[Oe],tt=void 0,pt=0;pt<Ve.length-1;pt++){var bt=Ve[pt],Ht=Ve[pt+1];bt.x<I&&Ht.x<I||(bt.x<I?bt=new t(I,bt.y+(I-bt.x)/(Ht.x-bt.x)*(Ht.y-bt.y))._round():Ht.x<I&&(Ht=new t(I,bt.y+(I-bt.x)/(Ht.x-bt.x)*(Ht.y-bt.y))._round()),bt.y<W&&Ht.y<W||(bt.y<W?bt=new t(bt.x+(W-bt.y)/(Ht.y-bt.y)*(Ht.x-bt.x),W)._round():Ht.y<W&&(Ht=new t(bt.x+(W-bt.y)/(Ht.y-bt.y)*(Ht.x-bt.x),W)._round()),bt.x>=oe&&Ht.x>=oe||(bt.x>=oe?bt=new t(oe,bt.y+(oe-bt.x)/(Ht.x-bt.x)*(Ht.y-bt.y))._round():Ht.x>=oe&&(Ht=new t(oe,bt.y+(oe-bt.x)/(Ht.x-bt.x)*(Ht.y-bt.y))._round()),bt.y>=ge&&Ht.y>=ge||(bt.y>=ge?bt=new t(bt.x+(ge-bt.y)/(Ht.y-bt.y)*(Ht.x-bt.x),ge)._round():Ht.y>=ge&&(Ht=new t(bt.x+(ge-bt.y)/(Ht.y-bt.y)*(Ht.x-bt.x),ge)._round()),tt&&bt.equals(tt[tt.length-1])||Te.push(tt=[bt]),tt.push(Ht)))))}return Te}function wf(M,I,W,oe){var ge=[],Te=M.image,Oe=Te.pixelRatio,Ve=Te.paddedRect.w-2,tt=Te.paddedRect.h-2,pt=M.right-M.left,bt=M.bottom-M.top,Ht=Te.stretchX||[[0,Ve]],tr=Te.stretchY||[[0,tt]],Jt=function(ua,Na){return ua+Na[1]-Na[0]},mr=Ht.reduce(Jt,0),Pr=tr.reduce(Jt,0),Gr=Ve-mr,qr=tt-Pr,$r=0,tn=mr,cn=0,kn=Pr,Cn=0,Kn=Gr,Zn=0,ri=qr;if(Te.content&&oe){var gi=Te.content;$r=zc(Ht,0,gi[0]),cn=zc(tr,0,gi[1]),tn=zc(Ht,gi[0],gi[2]),kn=zc(tr,gi[1],gi[3]),Cn=gi[0]-$r,Zn=gi[1]-cn,Kn=gi[2]-gi[0]-tn,ri=gi[3]-gi[1]-kn}var mi=function(ua,Na,Pa,Wa){var Oa=Rc(ua.stretch-$r,tn,pt,M.left),zo=Fc(ua.fixed-Cn,Kn,ua.stretch,mr),Za=Rc(Na.stretch-cn,kn,bt,M.top),is=Fc(Na.fixed-Zn,ri,Na.stretch,Pr),Yo=Rc(Pa.stretch-$r,tn,pt,M.left),ts=Fc(Pa.fixed-Cn,Kn,Pa.stretch,mr),ms=Rc(Wa.stretch-cn,kn,bt,M.top),fs=Fc(Wa.fixed-Zn,ri,Wa.stretch,Pr),Ro=new t(Oa,Za),rs=new t(Yo,Za),ko=new t(Yo,ms),No=new t(Oa,ms),$i=new t(zo/Oe,is/Oe),ga=new t(ts/Oe,fs/Oe),oo=I*Math.PI/180;if(oo){var so=Math.sin(oo),io=Math.cos(oo),Xa=[io,-so,so,io];Ro._matMult(Xa),rs._matMult(Xa),No._matMult(Xa),ko._matMult(Xa)}var xa=ua.stretch+ua.fixed,vs=Na.stretch+Na.fixed;return{tl:Ro,tr:rs,bl:No,br:ko,tex:{x:Te.paddedRect.x+1+xa,y:Te.paddedRect.y+1+vs,w:Pa.stretch+Pa.fixed-xa,h:Wa.stretch+Wa.fixed-vs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$i,pixelOffsetBR:ga,minFontScaleX:Kn/Oe/pt,minFontScaleY:ri/Oe/bt,isSDF:W}};if(oe&&(Te.stretchX||Te.stretchY))for(var ci=Tf(Ht,Gr,mr),Ai=Tf(tr,qr,Pr),_i=0;_i<ci.length-1;_i++)for(var vi=ci[_i],ha=ci[_i+1],la=0;la<Ai.length-1;la++)ge.push(mi(vi,Ai[la],ha,Ai[la+1]));else ge.push(mi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ve+1},{fixed:0,stretch:tt+1}));return ge}function zc(M,I,W){for(var oe=0,ge=0,Te=M;ge<Te.length;ge+=1){var Oe=Te[ge];oe+=Math.max(I,Math.min(W,Oe[1]))-Math.max(I,Math.min(W,Oe[0]))}return oe}function Tf(M,I,W){for(var oe=[{fixed:-1,stretch:0}],ge=0,Te=M;ge<Te.length;ge+=1){var Oe=Te[ge],Ve=Oe[0],tt=Oe[1],pt=oe[oe.length-1];oe.push({fixed:Ve-pt.stretch,stretch:pt.stretch}),oe.push({fixed:Ve-pt.stretch,stretch:pt.stretch+(tt-Ve)})}return oe.push({fixed:I+1,stretch:W}),oe}function Rc(M,I,W,oe){return M/I*W+oe}function Fc(M,I,W,oe){return M-I*W/oe}var Bc=function(M,I,W,oe,ge,Te,Oe,Ve,tt,pt){if(this.boxStartIndex=M.length,tt){var bt=Te.top,Ht=Te.bottom,tr=Te.collisionPadding;tr&&(bt-=tr[1],Ht+=tr[3]);var Jt=Ht-bt;Jt>0&&(Jt=Math.max(10,Jt),this.circleDiameter=Jt)}else{var mr=Te.top*Oe-Ve,Pr=Te.bottom*Oe+Ve,Gr=Te.left*Oe-Ve,qr=Te.right*Oe+Ve,$r=Te.collisionPadding;if($r&&(Gr-=$r[0]*Oe,mr-=$r[1]*Oe,qr+=$r[2]*Oe,Pr+=$r[3]*Oe),pt){var tn=new t(Gr,mr),cn=new t(qr,mr),kn=new t(Gr,Pr),Cn=new t(qr,Pr),Kn=pt*Math.PI/180;tn._rotate(Kn),cn._rotate(Kn),kn._rotate(Kn),Cn._rotate(Kn),Gr=Math.min(tn.x,cn.x,kn.x,Cn.x),qr=Math.max(tn.x,cn.x,kn.x,Cn.x),mr=Math.min(tn.y,cn.y,kn.y,Cn.y),Pr=Math.max(tn.y,cn.y,kn.y,Cn.y)}M.emplaceBack(I.x,I.y,Gr,mr,qr,Pr,W,oe,ge)}this.boxEndIndex=M.length},Nl=function(M,I){if(void 0===M&&(M=[]),void 0===I&&(I=up),this.data=M,this.length=this.data.length,this.compare=I,this.length>0)for(var W=(this.length>>1)-1;W>=0;W--)this._down(W)};function up(M,I){return M<I?-1:M>I?1:0}function fp(M,I,W){void 0===I&&(I=1),void 0===W&&(W=!1);for(var oe=1/0,ge=1/0,Te=-1/0,Oe=-1/0,Ve=M[0],tt=0;tt<Ve.length;tt++){var pt=Ve[tt];(!tt||pt.x<oe)&&(oe=pt.x),(!tt||pt.y<ge)&&(ge=pt.y),(!tt||pt.x>Te)&&(Te=pt.x),(!tt||pt.y>Oe)&&(Oe=pt.y)}var tr=Math.min(Te-oe,Oe-ge),Jt=tr/2,mr=new Nl([],hp);if(0===tr)return new t(oe,ge);for(var Pr=oe;Pr<Te;Pr+=tr)for(var Gr=ge;Gr<Oe;Gr+=tr)mr.push(new jl(Pr+Jt,Gr+Jt,Jt,M));for(var qr=function(cn){for(var kn=0,Cn=0,Kn=0,Zn=cn[0],ri=0,gi=Zn.length,mi=gi-1;ri<gi;mi=ri++){var ci=Zn[ri],Ai=Zn[mi],_i=ci.x*Ai.y-Ai.x*ci.y;Cn+=(ci.x+Ai.x)*_i,Kn+=(ci.y+Ai.y)*_i,kn+=3*_i}return new jl(Cn/kn,Kn/kn,0,cn)}(M),$r=mr.length;mr.length;){var tn=mr.pop();(tn.d>qr.d||!qr.d)&&(qr=tn,W&&console.log("found best %d after %d probes",Math.round(1e4*tn.d)/1e4,$r)),tn.max-qr.d<=I||(mr.push(new jl(tn.p.x-(Jt=tn.h/2),tn.p.y-Jt,Jt,M)),mr.push(new jl(tn.p.x+Jt,tn.p.y-Jt,Jt,M)),mr.push(new jl(tn.p.x-Jt,tn.p.y+Jt,Jt,M)),mr.push(new jl(tn.p.x+Jt,tn.p.y+Jt,Jt,M)),$r+=4)}return W&&(console.log("num probes: "+$r),console.log("best distance: "+qr.d)),qr.p}function hp(M,I){return I.max-M.max}function jl(M,I,W,oe){this.p=new t(M,I),this.h=W,this.d=function(ge,Te){for(var Oe=!1,Ve=1/0,tt=0;tt<Te.length;tt++)for(var pt=Te[tt],bt=0,Ht=pt.length,tr=Ht-1;bt<Ht;tr=bt++){var Jt=pt[bt],mr=pt[tr];Jt.y>ge.y!=mr.y>ge.y&&ge.x<(mr.x-Jt.x)*(ge.y-Jt.y)/(mr.y-Jt.y)+Jt.x&&(Oe=!Oe),Ve=Math.min(Ve,Xs(ge,Jt,mr))}return(Oe?1:-1)*Math.sqrt(Ve)}(this.p,oe),this.max=this.d+this.h*Math.SQRT2}Nl.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},Nl.prototype.pop=function(){if(0!==this.length){var M=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),M}},Nl.prototype.peek=function(){return this.data[0]},Nl.prototype._up=function(M){for(var I=this.data,W=this.compare,oe=I[M];M>0;){var ge=M-1>>1,Te=I[ge];if(W(oe,Te)>=0)break;I[M]=Te,M=ge}I[M]=oe},Nl.prototype._down=function(M){for(var I=this.data,W=this.compare,oe=this.length>>1,ge=I[M];M<oe;){var Te=1+(M<<1),Oe=I[Te],Ve=Te+1;if(Ve<this.length&&W(I[Ve],Oe)<0&&(Te=Ve,Oe=I[Ve]),W(Oe,ge)>=0)break;I[M]=Oe,M=Te}I[M]=ge};var _u=Number.POSITIVE_INFINITY;function kf(M,I){return I[1]!==_u?function(W,oe,ge){var Te=0,Oe=0;switch(oe=Math.abs(oe),ge=Math.abs(ge),W){case"top-right":case"top-left":case"top":Oe=ge-7;break;case"bottom-right":case"bottom-left":case"bottom":Oe=7-ge}switch(W){case"top-right":case"bottom-right":case"right":Te=-oe;break;case"top-left":case"bottom-left":case"left":Te=oe}return[Te,Oe]}(M,I[0],I[1]):function(W,oe){var ge=0,Te=0;oe<0&&(oe=0);var Oe=oe/Math.sqrt(2);switch(W){case"top-right":case"top-left":Te=Oe-7;break;case"bottom-right":case"bottom-left":Te=7-Oe;break;case"bottom":Te=7-oe;break;case"top":Te=oe-7}switch(W){case"top-right":case"bottom-right":ge=-Oe;break;case"top-left":case"bottom-left":ge=Oe;break;case"left":ge=oe;break;case"right":ge=-oe}return[ge,Te]}(M,I[0])}function wu(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Af(M,I,W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr){var Pr=function(cn,kn,Cn,Kn,Zn,ri,gi,mi){for(var ci=Kn.layout.get("text-rotate").evaluate(ri,{})*Math.PI/180,Ai=[],_i=0,vi=kn.positionedLines;_i<vi.length;_i+=1)for(var ha=vi[_i],la=0,va=ha.positionedGlyphs;la<va.length;la+=1){var Ii=va[la];if(Ii.rect){var ua=Ii.rect||{},Na=4,Pa=!0,Wa=1,Oa=0,zo=(Zn||mi)&&Ii.vertical,Za=Ii.metrics.advance*Ii.scale/2;if(mi&&kn.verticalizable&&(Oa=ha.lineOffset/2-(Ii.imageName?-(24-Ii.metrics.width*Ii.scale)/2:24*(Ii.scale-1))),Ii.imageName){var ts=gi[Ii.imageName];Pa=ts.sdf,Na=1/(Wa=ts.pixelRatio)}var ms=Zn?[Ii.x+Za,Ii.y]:[0,0],fs=Zn?[0,0]:[Ii.x+Za+Cn[0],Ii.y+Cn[1]-Oa],Ro=[0,0];zo&&(Ro=fs,fs=[0,0]);var rs=(Ii.metrics.left-Na)*Ii.scale-Za+fs[0],ko=(-Ii.metrics.top-Na)*Ii.scale+fs[1],No=rs+ua.w*Ii.scale/Wa,$i=ko+ua.h*Ii.scale/Wa,ga=new t(rs,ko),oo=new t(No,ko),so=new t(rs,$i),io=new t(No,$i);if(zo){var Xa=new t(-Za,Za- -17),xa=-Math.PI/2,lo=12-Za,Cs=new t(22-lo,-(Ii.imageName?lo:0)),hs=new(Function.prototype.bind.apply(t,[null].concat(Ro)));ga._rotateAround(xa,Xa)._add(Cs)._add(hs),oo._rotateAround(xa,Xa)._add(Cs)._add(hs),so._rotateAround(xa,Xa)._add(Cs)._add(hs),io._rotateAround(xa,Xa)._add(Cs)._add(hs)}if(ci){var $s=Math.sin(ci),yl=Math.cos(ci),Wo=[yl,-$s,$s,yl];ga._matMult(Wo),oo._matMult(Wo),so._matMult(Wo),io._matMult(Wo)}var Qs=new t(0,0),el=new t(0,0);Ai.push({tl:ga,tr:oo,bl:so,br:io,tex:ua,writingMode:kn.writingMode,glyphOffset:ms,sectionIndex:Ii.sectionIndex,isSDF:Pa,pixelOffsetTL:Qs,pixelOffsetBR:el,minFontScaleX:0,minFontScaleY:0})}}return Ai}(0,W,Ve,ge,Te,Oe,oe,M.allowVerticalPlacement),Gr=M.textSizeData,qr=null;"source"===Gr.kind?(qr=[128*ge.layout.get("text-size").evaluate(Oe,{})])[0]>32640&&A(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Gr.kind&&((qr=[128*Jt.compositeTextSizes[0].evaluate(Oe,{},mr),128*Jt.compositeTextSizes[1].evaluate(Oe,{},mr)])[0]>32640||qr[1]>32640)&&A(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),M.addSymbols(M.text,Pr,qr,Ve,Te,Oe,pt,I,tt.lineStartIndex,tt.lineLength,tr,mr);for(var $r=0,tn=bt;$r<tn.length;$r+=1)Ht[tn[$r]]=M.text.placedSymbolArray.length-1;return 4*Pr.length}function Mf(M){for(var I in M)return M[I];return null}function pp(M,I,W,oe){var ge=M.compareText;if(I in ge){for(var Te=ge[I],Oe=Te.length-1;Oe>=0;Oe--)if(oe.dist(Te[Oe])<W)return!0}else ge[I]=[];return ge[I].push(oe),!1}var dp=Dl.VectorTileFeature.types,gp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Nc(M,I,W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr){var Jt=Ve?Math.min(32640,Math.round(Ve[0])):0,mr=Ve?Math.min(32640,Math.round(Ve[1])):0;M.emplaceBack(I,W,Math.round(32*oe),Math.round(32*ge),Te,Oe,(Jt<<1)+(tt?1:0),mr,16*pt,16*bt,256*Ht,256*tr)}function Tu(M,I,W){M.emplaceBack(I.x,I.y,W),M.emplaceBack(I.x,I.y,W),M.emplaceBack(I.x,I.y,W),M.emplaceBack(I.x,I.y,W)}function mp(M){for(var I=0,W=M.sections;I<W.length;I+=1)if(oi(W[I].text))return!0;return!1}var Ul=function(M){this.layoutVertexArray=new qo,this.indexArray=new xo,this.programConfigurations=M,this.segments=new Vt,this.dynamicLayoutVertexArray=new gs,this.opacityVertexArray=new Ws,this.placedSymbolArray=new Ge};Ul.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Ul.prototype.upload=function(M,I,W,oe){this.isEmpty()||(W&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,vu.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,Hh.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,gp,!0),this.opacityVertexBuffer.itemSize=1),(W||oe)&&this.programConfigurations.upload(M))},Ul.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},un("SymbolBuffers",Ul);var pc=function(M,I,W){this.layoutVertexArray=new M,this.layoutAttributes=I,this.indexArray=new W,this.segments=new Vt,this.collisionVertexArray=new js};pc.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,qh.members,!0)},pc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},un("CollisionBuffers",pc);var Ta=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Oe){return Oe.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ye([]),this.placementViewportMatrix=ye([]);var I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bu(this.zoom,I["text-size"]),this.iconSizeData=bu(this.zoom,I["icon-size"]);var W=this.layers[0].layout,oe=W.get("symbol-sort-key"),ge=W.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==ge&&void 0!==oe.constantOr(1),this.sortFeaturesByY=("viewport-y"===ge||"auto"===ge&&!this.sortFeaturesByKey)&&(W.get("text-allow-overlap")||W.get("icon-allow-overlap")||W.get("text-ignore-placement")||W.get("icon-ignore-placement")),"point"===W.get("symbol-placement")&&(this.writingModes=W.get("text-writing-mode").map(function(Oe){return zs[Oe]})),this.stateDependentLayerIds=this.layers.filter(function(Oe){return Oe.isStateDependent()}).map(function(Oe){return Oe.id}),this.sourceID=M.sourceID};Ta.prototype.createArrays=function(){this.text=new Ul(new ya(vu.members,this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Ul(new ya(vu.members,this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Mt,this.lineVertexArray=new It,this.symbolInstances=new st},Ta.prototype.calculateGlyphDependencies=function(M,I,W,oe,ge){for(var Te=0;Te<M.length;Te++)if(I[M.charCodeAt(Te)]=!0,(W||oe)&&ge){var Oe=uc[M.charAt(Te)];Oe&&(I[Oe.charCodeAt(0)]=!0)}},Ta.prototype.populate=function(M,I,W){var oe=this.layers[0],ge=oe.layout,Te=ge.get("text-font"),Oe=ge.get("text-field"),Ve=ge.get("icon-image"),tt=("constant"!==Oe.value.kind||Oe.value.value instanceof _r&&!Oe.value.value.isEmpty()||Oe.value.value.toString().length>0)&&("constant"!==Te.value.kind||Te.value.value.length>0),pt="constant"!==Ve.value.kind||!!Ve.value.value||Object.keys(Ve.parameters).length>0,bt=ge.get("symbol-sort-key");if(this.features=[],tt||pt){for(var Ht=I.iconDependencies,tr=I.glyphDependencies,Jt=I.availableImages,mr=new pa(this.zoom),Pr=0,Gr=M;Pr<Gr.length;Pr+=1){var qr=Gr[Pr],$r=qr.feature,tn=qr.id,cn=qr.index,kn=qr.sourceLayerIndex,Cn=oe._featureFilter.needGeometry,Kn={type:$r.type,id:tn,properties:$r.properties,geometry:Cn?Sa($r):[]};if(oe._featureFilter.filter(mr,Kn,W)){Cn||(Kn.geometry=Sa($r));var Zn=void 0;if(tt){var ri=oe.getValueAndResolveTokens("text-field",Kn,W,Jt),gi=_r.factory(ri);mp(gi)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===no()||this.hasRTLText&&To.isParsed())&&(Zn=Yh(gi,oe,Kn))}var mi=void 0;if(pt){var ci=oe.getValueAndResolveTokens("icon-image",Kn,W,Jt);mi=ci instanceof Ar?ci:Ar.fromString(ci)}if(Zn||mi){var Ai=this.sortFeaturesByKey?bt.evaluate(Kn,{},W):void 0,_i={id:tn,text:Zn,icon:mi,index:cn,sourceLayerIndex:kn,geometry:Sa($r),properties:$r.properties,type:dp[$r.type],sortKey:Ai};if(this.features.push(_i),mi&&(Ht[mi.name]=!0),Zn){var vi=Te.evaluate(Kn,{},W).join(","),ha="map"===ge.get("text-rotation-alignment")&&"point"!==ge.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(zs.vertical)>=0;for(var la=0,va=Zn.sections;la<va.length;la+=1){var Ii=va[la];if(Ii.image)Ht[Ii.image.name]=!0;else{var ua=Hi(Zn.toString()),Na=Ii.fontStack||vi,Pa=tr[Na]=tr[Na]||{};this.calculateGlyphDependencies(Ii.text,Pa,ha,this.allowVerticalPlacement,ua)}}}}}}"line"===ge.get("symbol-placement")&&(this.features=function(Wa){var Oa={},zo={},Za=[],is=0;function Yo(io){Za.push(Wa[io]),is++}function ts(io,Xa,xa){var lo=zo[io];return delete zo[io],zo[Xa]=lo,Za[lo].geometry[0].pop(),Za[lo].geometry[0]=Za[lo].geometry[0].concat(xa[0]),lo}function ms(io,Xa,xa){var lo=Oa[Xa];return delete Oa[Xa],Oa[io]=lo,Za[lo].geometry[0].shift(),Za[lo].geometry[0]=xa[0].concat(Za[lo].geometry[0]),lo}function fs(io,Xa,xa){var lo=xa?Xa[0][Xa[0].length-1]:Xa[0][0];return io+":"+lo.x+":"+lo.y}for(var Ro=0;Ro<Wa.length;Ro++){var rs=Wa[Ro],ko=rs.geometry,No=rs.text?rs.text.toString():null;if(No){var $i=fs(No,ko),ga=fs(No,ko,!0);if($i in zo&&ga in Oa&&zo[$i]!==Oa[ga]){var oo=ms($i,ga,ko),so=ts($i,ga,Za[oo].geometry);delete Oa[$i],delete zo[ga],zo[fs(No,Za[so].geometry,!0)]=so,Za[oo].geometry=null}else $i in zo?ts($i,ga,ko):ga in Oa?ms($i,ga,ko):(Yo(Ro),Oa[$i]=is-1,zo[ga]=is-1)}else Yo(Ro)}return Za.filter(function(io){return io.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Wa,Oa){return Wa.sortKey-Oa.sortKey})}},Ta.prototype.update=function(M,I,W){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,I,this.layers,W),this.icon.programConfigurations.updatePaintArrays(M,I,this.layers,W))},Ta.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Ta.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ta.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ta.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ta.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ta.prototype.addToLineVertexArray=function(M,I){var W=this.lineVertexArray.length;if(void 0!==M.segment){for(var oe=M.dist(I[M.segment+1]),ge=M.dist(I[M.segment]),Te={},Oe=M.segment+1;Oe<I.length;Oe++)Te[Oe]={x:I[Oe].x,y:I[Oe].y,tileUnitDistanceFromAnchor:oe},Oe<I.length-1&&(oe+=I[Oe+1].dist(I[Oe]));for(var Ve=M.segment||0;Ve>=0;Ve--)Te[Ve]={x:I[Ve].x,y:I[Ve].y,tileUnitDistanceFromAnchor:ge},Ve>0&&(ge+=I[Ve-1].dist(I[Ve]));for(var tt=0;tt<I.length;tt++){var pt=Te[tt];this.lineVertexArray.emplaceBack(pt.x,pt.y,pt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:W,lineLength:this.lineVertexArray.length-W}},Ta.prototype.addSymbols=function(M,I,W,oe,ge,Te,Oe,Ve,tt,pt,bt,Ht){for(var tr=M.indexArray,Jt=M.layoutVertexArray,mr=M.segments.prepareSegment(4*I.length,Jt,tr,Te.sortKey),Pr=this.glyphOffsetArray.length,Gr=mr.vertexLength,qr=this.allowVerticalPlacement&&Oe===zs.vertical?Math.PI/2:0,$r=Te.text&&Te.text.sections,tn=0;tn<I.length;tn++){var cn=I[tn],kn=cn.tl,Cn=cn.tr,Kn=cn.bl,Zn=cn.br,ri=cn.tex,gi=cn.pixelOffsetTL,mi=cn.pixelOffsetBR,ci=cn.minFontScaleX,Ai=cn.minFontScaleY,_i=cn.glyphOffset,vi=cn.isSDF,ha=cn.sectionIndex,la=mr.vertexLength,va=_i[1];Nc(Jt,Ve.x,Ve.y,kn.x,va+kn.y,ri.x,ri.y,W,vi,gi.x,gi.y,ci,Ai),Nc(Jt,Ve.x,Ve.y,Cn.x,va+Cn.y,ri.x+ri.w,ri.y,W,vi,mi.x,gi.y,ci,Ai),Nc(Jt,Ve.x,Ve.y,Kn.x,va+Kn.y,ri.x,ri.y+ri.h,W,vi,gi.x,mi.y,ci,Ai),Nc(Jt,Ve.x,Ve.y,Zn.x,va+Zn.y,ri.x+ri.w,ri.y+ri.h,W,vi,mi.x,mi.y,ci,Ai),Tu(M.dynamicLayoutVertexArray,Ve,qr),tr.emplaceBack(la,la+1,la+2),tr.emplaceBack(la+1,la+2,la+3),mr.vertexLength+=4,mr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_i[0]),tn!==I.length-1&&ha===I[tn+1].sectionIndex||M.programConfigurations.populatePaintArrays(Jt.length,Te,Te.index,{},Ht,$r&&$r[ha])}M.placedSymbolArray.emplaceBack(Ve.x,Ve.y,Pr,this.glyphOffsetArray.length-Pr,Gr,tt,pt,Ve.segment,W?W[0]:0,W?W[1]:0,oe[0],oe[1],Oe,0,!1,0,bt)},Ta.prototype._addCollisionDebugVertex=function(M,I,W,oe,ge,Te){return I.emplaceBack(0,0),M.emplaceBack(W.x,W.y,oe,ge,Math.round(Te.x),Math.round(Te.y))},Ta.prototype.addCollisionDebugVertices=function(M,I,W,oe,ge,Te,Oe){var Ve=ge.segments.prepareSegment(4,ge.layoutVertexArray,ge.indexArray),tt=Ve.vertexLength,pt=ge.layoutVertexArray,bt=ge.collisionVertexArray,Ht=Oe.anchorX,tr=Oe.anchorY;this._addCollisionDebugVertex(pt,bt,Te,Ht,tr,new t(M,I)),this._addCollisionDebugVertex(pt,bt,Te,Ht,tr,new t(W,I)),this._addCollisionDebugVertex(pt,bt,Te,Ht,tr,new t(W,oe)),this._addCollisionDebugVertex(pt,bt,Te,Ht,tr,new t(M,oe)),Ve.vertexLength+=4;var Jt=ge.indexArray;Jt.emplaceBack(tt,tt+1),Jt.emplaceBack(tt+1,tt+2),Jt.emplaceBack(tt+2,tt+3),Jt.emplaceBack(tt+3,tt),Ve.primitiveLength+=4},Ta.prototype.addDebugCollisionBoxes=function(M,I,W,oe){for(var ge=M;ge<I;ge++){var Te=this.collisionBoxArray.get(ge);this.addCollisionDebugVertices(Te.x1,Te.y1,Te.x2,Te.y2,oe?this.textCollisionBox:this.iconCollisionBox,Te.anchorPoint,W)}},Ta.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pc(Ss,nf.members,F),this.iconCollisionBox=new pc(Ss,nf.members,F);for(var M=0;M<this.symbolInstances.length;M++){var I=this.symbolInstances.get(M);this.addDebugCollisionBoxes(I.textBoxStartIndex,I.textBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.iconBoxStartIndex,I.iconBoxEndIndex,I,!1),this.addDebugCollisionBoxes(I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I,!1)}},Ta.prototype._deserializeCollisionBoxesForSymbol=function(M,I,W,oe,ge,Te,Oe,Ve,tt){for(var pt={},bt=I;bt<W;bt++){var Ht=M.get(bt);pt.textBox={x1:Ht.x1,y1:Ht.y1,x2:Ht.x2,y2:Ht.y2,anchorPointX:Ht.anchorPointX,anchorPointY:Ht.anchorPointY},pt.textFeatureIndex=Ht.featureIndex;break}for(var tr=oe;tr<ge;tr++){var Jt=M.get(tr);pt.verticalTextBox={x1:Jt.x1,y1:Jt.y1,x2:Jt.x2,y2:Jt.y2,anchorPointX:Jt.anchorPointX,anchorPointY:Jt.anchorPointY},pt.verticalTextFeatureIndex=Jt.featureIndex;break}for(var mr=Te;mr<Oe;mr++){var Pr=M.get(mr);pt.iconBox={x1:Pr.x1,y1:Pr.y1,x2:Pr.x2,y2:Pr.y2,anchorPointX:Pr.anchorPointX,anchorPointY:Pr.anchorPointY},pt.iconFeatureIndex=Pr.featureIndex;break}for(var Gr=Ve;Gr<tt;Gr++){var qr=M.get(Gr);pt.verticalIconBox={x1:qr.x1,y1:qr.y1,x2:qr.x2,y2:qr.y2,anchorPointX:qr.anchorPointX,anchorPointY:qr.anchorPointY},pt.verticalIconFeatureIndex=qr.featureIndex;break}return pt},Ta.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var I=0;I<this.symbolInstances.length;I++){var W=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,W.textBoxStartIndex,W.textBoxEndIndex,W.verticalTextBoxStartIndex,W.verticalTextBoxEndIndex,W.iconBoxStartIndex,W.iconBoxEndIndex,W.verticalIconBoxStartIndex,W.verticalIconBoxEndIndex))}},Ta.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ta.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ta.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ta.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ta.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ta.prototype.addIndicesForPlacedSymbol=function(M,I){for(var W=M.placedSymbolArray.get(I),oe=W.vertexStartIndex+4*W.numGlyphs,ge=W.vertexStartIndex;ge<oe;ge+=4)M.indexArray.emplaceBack(ge,ge+1,ge+2),M.indexArray.emplaceBack(ge+1,ge+2,ge+3)},Ta.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var I=Math.sin(M),W=Math.cos(M),oe=[],ge=[],Te=[],Oe=0;Oe<this.symbolInstances.length;++Oe){Te.push(Oe);var Ve=this.symbolInstances.get(Oe);oe.push(0|Math.round(I*Ve.anchorX+W*Ve.anchorY)),ge.push(Ve.featureIndex)}return Te.sort(function(tt,pt){return oe[tt]-oe[pt]||ge[pt]-ge[tt]}),Te},Ta.prototype.addToSortKeyRanges=function(M,I){var W=this.sortKeyRanges[this.sortKeyRanges.length-1];W&&W.sortKey===I?W.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:M,symbolInstanceEnd:M+1})},Ta.prototype.sortFeatures=function(M){var I=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var W=0,oe=this.symbolInstanceIndexes;W<oe.length;W+=1){var Te=this.symbolInstances.get(oe[W]);this.featureSortOrder.push(Te.featureIndex),[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(function(Oe,Ve,tt){Oe>=0&&tt.indexOf(Oe)===Ve&&I.addIndicesForPlacedSymbol(I.text,Oe)}),Te.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Te.verticalPlacedTextSymbolIndex),Te.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.placedIconSymbolIndex),Te.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},un("SymbolBucket",Ta,{omit:["layers","collisionBoxArray","features","compareText"]}),Ta.MAX_GLYPHS=65535,Ta.addDynamicAttributes=Tu;var vp=new Ho({"symbol-placement":new yi(we.layout_symbol["symbol-placement"]),"symbol-spacing":new yi(we.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yi(we.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Pi(we.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yi(we.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yi(we.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new yi(we.layout_symbol["icon-ignore-placement"]),"icon-optional":new yi(we.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yi(we.layout_symbol["icon-rotation-alignment"]),"icon-size":new Pi(we.layout_symbol["icon-size"]),"icon-text-fit":new yi(we.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yi(we.layout_symbol["icon-text-fit-padding"]),"icon-image":new Pi(we.layout_symbol["icon-image"]),"icon-rotate":new Pi(we.layout_symbol["icon-rotate"]),"icon-padding":new yi(we.layout_symbol["icon-padding"]),"icon-keep-upright":new yi(we.layout_symbol["icon-keep-upright"]),"icon-offset":new Pi(we.layout_symbol["icon-offset"]),"icon-anchor":new Pi(we.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yi(we.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yi(we.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yi(we.layout_symbol["text-rotation-alignment"]),"text-field":new Pi(we.layout_symbol["text-field"]),"text-font":new Pi(we.layout_symbol["text-font"]),"text-size":new Pi(we.layout_symbol["text-size"]),"text-max-width":new Pi(we.layout_symbol["text-max-width"]),"text-line-height":new yi(we.layout_symbol["text-line-height"]),"text-letter-spacing":new Pi(we.layout_symbol["text-letter-spacing"]),"text-justify":new Pi(we.layout_symbol["text-justify"]),"text-radial-offset":new Pi(we.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yi(we.layout_symbol["text-variable-anchor"]),"text-anchor":new Pi(we.layout_symbol["text-anchor"]),"text-max-angle":new yi(we.layout_symbol["text-max-angle"]),"text-writing-mode":new yi(we.layout_symbol["text-writing-mode"]),"text-rotate":new Pi(we.layout_symbol["text-rotate"]),"text-padding":new yi(we.layout_symbol["text-padding"]),"text-keep-upright":new yi(we.layout_symbol["text-keep-upright"]),"text-transform":new Pi(we.layout_symbol["text-transform"]),"text-offset":new Pi(we.layout_symbol["text-offset"]),"text-allow-overlap":new yi(we.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yi(we.layout_symbol["text-ignore-placement"]),"text-optional":new yi(we.layout_symbol["text-optional"])}),ku={paint:new Ho({"icon-opacity":new Pi(we.paint_symbol["icon-opacity"]),"icon-color":new Pi(we.paint_symbol["icon-color"]),"icon-halo-color":new Pi(we.paint_symbol["icon-halo-color"]),"icon-halo-width":new Pi(we.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Pi(we.paint_symbol["icon-halo-blur"]),"icon-translate":new yi(we.paint_symbol["icon-translate"]),"icon-translate-anchor":new yi(we.paint_symbol["icon-translate-anchor"]),"text-opacity":new Pi(we.paint_symbol["text-opacity"]),"text-color":new Pi(we.paint_symbol["text-color"],{runtimeType:Et,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Pi(we.paint_symbol["text-halo-color"]),"text-halo-width":new Pi(we.paint_symbol["text-halo-width"]),"text-halo-blur":new Pi(we.paint_symbol["text-halo-blur"]),"text-translate":new yi(we.paint_symbol["text-translate"]),"text-translate-anchor":new yi(we.paint_symbol["text-translate-anchor"])}),layout:vp},Vl=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:Ft,this.defaultValue=M};Vl.prototype.evaluate=function(M){if(M.formattedSection){var I=this.defaultValue.property.overrides;if(I&&I.hasOverride(M.formattedSection))return I.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},Vl.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},Vl.prototype.outputDefined=function(){return!1},Vl.prototype.serialize=function(){return null},un("FormatSectionOverride",Vl,{omit:["defaultValue"]});var yp=function(M){function I(W){M.call(this,W,ku)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.recalculate=function(W,oe){if(M.prototype.recalculate.call(this,W,oe),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var ge=this.layout.get("text-writing-mode");if(ge){for(var Te=[],Oe=0,Ve=ge;Oe<Ve.length;Oe+=1){var tt=Ve[Oe];Te.indexOf(tt)<0&&Te.push(tt)}this.layout._values["text-writing-mode"]=Te}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},I.prototype.getValueAndResolveTokens=function(W,oe,ge,Te){var tt,Oe=this.layout.get(W).evaluate(oe,{},ge,Te),Ve=this._unevaluatedLayout._values[W];return Ve.isDataDriven()||or(Ve.value)||!Oe?Oe:(tt=oe.properties,Oe.replace(/{([^{}]+)}/g,function(bt,Ht){return Ht in tt?String(tt[Ht]):""}))},I.prototype.createBucket=function(W){return new Ta(W)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype._setPaintOverrides=function(){for(var W=0,oe=ku.paint.overridableProperties;W<oe.length;W+=1){var ge=oe[W];if(I.hasPaintOverride(this.layout,ge)){var tt,Te=this.paint.get(ge),Oe=new Vl(Te),Ve=new ir(Oe,Te.property.specification);tt="constant"===Te.value.kind||"source"===Te.value.kind?new dr("source",Ve):new kr("composite",Ve,Te.value.zoomStops,Te.value._interpolationType),this.paint._values[ge]=new Ga(Te.property,tt,Te.parameters)}}},I.prototype._handleOverridablePaintPropertyUpdate=function(W,oe,ge){return!(!this.layout||oe.isDataDriven()||ge.isDataDriven())&&I.hasPaintOverride(this.layout,W)},I.hasPaintOverride=function(W,oe){var ge=W.get("text-field"),Te=ku.paint.properties[oe],Oe=!1,Ve=function(bt){for(var Ht=0,tr=bt;Ht<tr.length;Ht+=1)if(Te.overrides&&Te.overrides.hasOverride(tr[Ht]))return void(Oe=!0)};if("constant"===ge.value.kind&&ge.value.value instanceof _r)Ve(ge.value.value.sections);else if("source"===ge.value.kind){var tt=function(bt){Oe||(bt instanceof Er&&Tt(bt.value)===ot?Ve(bt.value.sections):bt instanceof sn?Ve(bt.sections):bt.eachChild(tt))},pt=ge.value;pt._styleExpression&&tt(pt._styleExpression.expression)}return Oe},I}($o),xp={paint:new Ho({"background-color":new yi(we.paint_background["background-color"]),"background-pattern":new Hs(we.paint_background["background-pattern"]),"background-opacity":new yi(we.paint_background["background-opacity"])})},bp=function(M){function I(W){M.call(this,W,xp)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}($o),_p={paint:new Ho({"raster-opacity":new yi(we.paint_raster["raster-opacity"]),"raster-hue-rotate":new yi(we.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yi(we.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yi(we.paint_raster["raster-brightness-max"]),"raster-saturation":new yi(we.paint_raster["raster-saturation"]),"raster-contrast":new yi(we.paint_raster["raster-contrast"]),"raster-resampling":new yi(we.paint_raster["raster-resampling"]),"raster-fade-duration":new yi(we.paint_raster["raster-fade-duration"])})},wp=function(M){function I(W){M.call(this,W,_p)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}($o),Tp=function(M){function I(W){M.call(this,W,{}),this.implementation=W}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},I.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},I.prototype.recalculate=function(){},I.prototype.updateTransitions=function(){},I.prototype.hasTransition=function(){},I.prototype.serialize=function(){},I.prototype.onAdd=function(W){this.implementation.onAdd&&this.implementation.onAdd(W,W.painter.context.gl)},I.prototype.onRemove=function(W){this.implementation.onRemove&&this.implementation.onRemove(W,W.painter.context.gl)},I}($o),kp={circle:bi,heatmap:fh,hillshade:ph,fill:Ch,"fill-extrusion":Bh,line:Vh,symbol:yp,background:bp,raster:wp},Sf=self.HTMLImageElement,Ef=self.HTMLCanvasElement,Cf=self.HTMLVideoElement,Lf=self.ImageData,jc=self.ImageBitmap,Sl=function(M,I,W,oe){this.context=M,this.format=W,this.texture=M.gl.createTexture(),this.update(I,oe)};Sl.prototype.update=function(M,I,W){var oe=M.width,ge=M.height,Te=!(this.size&&this.size[0]===oe&&this.size[1]===ge||W),Oe=this.context,Ve=Oe.gl;if(this.useMipmap=Boolean(I&&I.useMipmap),Ve.bindTexture(Ve.TEXTURE_2D,this.texture),Oe.pixelStoreUnpackFlipY.set(!1),Oe.pixelStoreUnpack.set(1),Oe.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ve.RGBA&&(!I||!1!==I.premultiply)),Te)this.size=[oe,ge],M instanceof Sf||M instanceof Ef||M instanceof Cf||M instanceof Lf||jc&&M instanceof jc?Ve.texImage2D(Ve.TEXTURE_2D,0,this.format,this.format,Ve.UNSIGNED_BYTE,M):Ve.texImage2D(Ve.TEXTURE_2D,0,this.format,oe,ge,0,this.format,Ve.UNSIGNED_BYTE,M.data);else{var tt=W||{x:0,y:0},pt=tt.x,bt=tt.y;M instanceof Sf||M instanceof Ef||M instanceof Cf||M instanceof Lf||jc&&M instanceof jc?Ve.texSubImage2D(Ve.TEXTURE_2D,0,pt,bt,Ve.RGBA,Ve.UNSIGNED_BYTE,M):Ve.texSubImage2D(Ve.TEXTURE_2D,0,pt,bt,oe,ge,Ve.RGBA,Ve.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ve.generateMipmap(Ve.TEXTURE_2D)},Sl.prototype.bind=function(M,I,W){var oe=this.context.gl;oe.bindTexture(oe.TEXTURE_2D,this.texture),W!==oe.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(W=oe.LINEAR),M!==this.filter&&(oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,M),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,W||M),this.filter=M),I!==this.wrap&&(oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,I),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,I),this.wrap=I)},Sl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Au=function(M){var I=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){I._triggered=!1,I._callback()})};Au.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},Au.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Hl=function(M,I,W){this.target=M,this.parent=I,this.mapId=W,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},f(["receive","process"],this),this.invoker=new Au(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=S()?M:self};function Pf(M,I,W){var oe=2*Math.PI*6378137/256/Math.pow(2,W);return[M*oe-2*Math.PI*6378137/2,I*oe-2*Math.PI*6378137/2]}Hl.prototype.send=function(M,I,W,oe,ge){var Te=this;void 0===ge&&(ge=!1);var Oe=Math.round(1e18*Math.random()).toString(36).substring(0,10);W&&(this.callbacks[Oe]=W);var Ve=z(this.globalScope)?void 0:[];return this.target.postMessage({id:Oe,type:M,hasCallback:!!W,targetMapId:oe,mustQueue:ge,sourceMapId:this.mapId,data:ui(I,Ve)},Ve),{cancel:function(){W&&delete Te.callbacks[Oe],Te.target.postMessage({id:Oe,type:"<cancel>",targetMapId:oe,sourceMapId:Te.mapId})}}},Hl.prototype.receive=function(M){var I=M.data,W=I.id;if(W&&(!I.targetMapId||this.mapId===I.targetMapId))if("<cancel>"===I.type){delete this.tasks[W];var oe=this.cancelCallbacks[W];delete this.cancelCallbacks[W],oe&&oe()}else S()||I.mustQueue?(this.tasks[W]=I,this.taskQueue.push(W),this.invoker.trigger()):this.processTask(W,I)},Hl.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),I=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),I&&this.processTask(M,I)}},Hl.prototype.processTask=function(M,I){var W=this;if("<response>"===I.type){var oe=this.callbacks[M];delete this.callbacks[M],oe&&(I.error?oe(Ci(I.error)):oe(null,Ci(I.data)))}else{var ge=!1,Te=z(this.globalScope)?void 0:[],Oe=I.hasCallback?function(bt,Ht){ge=!0,delete W.cancelCallbacks[M],W.target.postMessage({id:M,type:"<response>",sourceMapId:W.mapId,error:bt?ui(bt):null,data:ui(Ht,Te)},Te)}:function(bt){ge=!0},Ve=null,tt=Ci(I.data);if(this.parent[I.type])Ve=this.parent[I.type](I.sourceMapId,tt,Oe);else if(this.parent.getWorkerSource){var pt=I.type.split(".");Ve=this.parent.getWorkerSource(I.sourceMapId,pt[0],tt.source)[pt[1]](tt,Oe)}else Oe(new Error("Could not find function "+I.type));!ge&&Ve&&Ve.cancel&&(this.cancelCallbacks[M]=Ve.cancel)}},Hl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Io=function(M,I){M&&(I?this.setSouthWest(M).setNorthEast(I):4===M.length?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};Io.prototype.setNorthEast=function(M){return this._ne=M instanceof Ya?new Ya(M.lng,M.lat):Ya.convert(M),this},Io.prototype.setSouthWest=function(M){return this._sw=M instanceof Ya?new Ya(M.lng,M.lat):Ya.convert(M),this},Io.prototype.extend=function(M){var I,W,oe=this._sw,ge=this._ne;if(M instanceof Ya)I=M,W=M;else{if(!(M instanceof Io))return Array.isArray(M)?4===M.length||M.every(Array.isArray)?this.extend(Io.convert(M)):this.extend(Ya.convert(M)):this;if(W=M._ne,!(I=M._sw)||!W)return this}return oe||ge?(oe.lng=Math.min(I.lng,oe.lng),oe.lat=Math.min(I.lat,oe.lat),ge.lng=Math.max(W.lng,ge.lng),ge.lat=Math.max(W.lat,ge.lat)):(this._sw=new Ya(I.lng,I.lat),this._ne=new Ya(W.lng,W.lat)),this},Io.prototype.getCenter=function(){return new Ya((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Io.prototype.getSouthWest=function(){return this._sw},Io.prototype.getNorthEast=function(){return this._ne},Io.prototype.getNorthWest=function(){return new Ya(this.getWest(),this.getNorth())},Io.prototype.getSouthEast=function(){return new Ya(this.getEast(),this.getSouth())},Io.prototype.getWest=function(){return this._sw.lng},Io.prototype.getSouth=function(){return this._sw.lat},Io.prototype.getEast=function(){return this._ne.lng},Io.prototype.getNorth=function(){return this._ne.lat},Io.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Io.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Io.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Io.prototype.contains=function(M){var I=Ya.convert(M),W=I.lng,oe=I.lat,Te=this._sw.lng<=W&&W<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Te=this._sw.lng>=W&&W>=this._ne.lng),this._sw.lat<=oe&&oe<=this._ne.lat&&Te},Io.convert=function(M){return!M||M instanceof Io?M:new Io(M)};var Ya=function(M,I){if(isNaN(M)||isNaN(I))throw new Error("Invalid LngLat object: ("+M+", "+I+")");if(this.lng=+M,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ya.prototype.wrap=function(){return new Ya(c(this.lng,-180,180),this.lat)},Ya.prototype.toArray=function(){return[this.lng,this.lat]},Ya.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ya.prototype.distanceTo=function(M){var I=Math.PI/180,W=this.lat*I,oe=M.lat*I,ge=Math.sin(W)*Math.sin(oe)+Math.cos(W)*Math.cos(oe)*Math.cos((M.lng-this.lng)*I);return 6371008.8*Math.acos(Math.min(ge,1))},Ya.prototype.toBounds=function(M){void 0===M&&(M=0);var I=360*M/40075017,W=I/Math.cos(Math.PI/180*this.lat);return new Io(new Ya(this.lng-W,this.lat-I),new Ya(this.lng+W,this.lat+I))},Ya.convert=function(M){if(M instanceof Ya)return M;if(Array.isArray(M)&&(2===M.length||3===M.length))return new Ya(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&"object"==typeof M&&null!==M)return new Ya(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Of=2*Math.PI*6371008.8;function If(M){return Of*Math.cos(M*Math.PI/180)}function Df(M){return(180+M)/360}function zf(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function Rf(M,I){return M/If(I)}function Mu(M){return 360/Math.PI*Math.atan(Math.exp((180-360*M)*Math.PI/180))-90}var El=function(M,I,W){void 0===W&&(W=0),this.x=+M,this.y=+I,this.z=+W};El.fromLngLat=function(M,I){void 0===I&&(I=0);var W=Ya.convert(M);return new El(Df(W.lng),zf(W.lat),Rf(I,W.lat))},El.prototype.toLngLat=function(){return new Ya(360*this.x-180,Mu(this.y))},El.prototype.toAltitude=function(){return this.z*If(Mu(this.y))},El.prototype.meterInMercatorCoordinateUnits=function(){return 1/Of*(M=Mu(this.y),1/Math.cos(M*Math.PI/180));var M};var Cl=function(M,I,W){this.z=M,this.x=I,this.y=W,this.key=dc(0,M,M,I,W)};Cl.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},Cl.prototype.url=function(M,I){var W,oe,ge,Te,Oe,Ve=(oe=this.y,ge=this.z,Te=Pf(256*(W=this.x),256*(oe=Math.pow(2,ge)-oe-1),ge),Oe=Pf(256*(W+1),256*(oe+1),ge),Te[0]+","+Te[1]+","+Oe[0]+","+Oe[1]),tt=function(pt,bt,Ht){for(var tr,Jt="",mr=pt;mr>0;mr--)Jt+=(bt&(tr=1<<mr-1)?1:0)+(Ht&tr?2:0);return Jt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===I?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",tt).replace("{bbox-epsg-3857}",Ve)},Cl.prototype.getTilePoint=function(M){var I=Math.pow(2,this.z);return new t(8192*(M.x*I-this.x),8192*(M.y*I-this.y))},Cl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ff=function(M,I){this.wrap=M,this.canonical=I,this.key=dc(M,I.z,I.z,I.x,I.y)},Do=function(M,I,W,oe,ge){this.overscaledZ=M,this.wrap=I,this.canonical=new Cl(W,+oe,+ge),this.key=dc(I,M,W,oe,ge)};function dc(M,I,W,oe,ge){(M*=2)<0&&(M=-1*M-1);var Te=1<<W;return(Te*Te*M+Te*ge+oe).toString(36)+W.toString(36)+I.toString(36)}Do.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},Do.prototype.scaledTo=function(M){var I=this.canonical.z-M;return M>this.canonical.z?new Do(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Do(M,this.wrap,M,this.canonical.x>>I,this.canonical.y>>I)},Do.prototype.calculateScaledKey=function(M,I){var W=this.canonical.z-M;return M>this.canonical.z?dc(this.wrap*+I,M,this.canonical.z,this.canonical.x,this.canonical.y):dc(this.wrap*+I,M,M,this.canonical.x>>W,this.canonical.y>>W)},Do.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var I=this.canonical.z-M.canonical.z;return 0===M.overscaledZ||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>I&&M.canonical.y===this.canonical.y>>I},Do.prototype.children=function(M){if(this.overscaledZ>=M)return[new Do(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var I=this.canonical.z+1,W=2*this.canonical.x,oe=2*this.canonical.y;return[new Do(I,this.wrap,I,W,oe),new Do(I,this.wrap,I,W+1,oe),new Do(I,this.wrap,I,W,oe+1),new Do(I,this.wrap,I,W+1,oe+1)]},Do.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},Do.prototype.wrapped=function(){return new Do(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Do.prototype.unwrapTo=function(M){return new Do(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},Do.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Do.prototype.toUnwrapped=function(){return new Ff(this.wrap,this.canonical)},Do.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Do.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new El(M.x-this.wrap,M.y))},un("CanonicalTileID",Cl),un("OverscaledTileID",Do,{omit:["posMatrix"]});var ml=function(M,I,W){if(this.uid=M,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(W&&"mapbox"!==W&&"terrarium"!==W)return A('"'+W+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=I.height;var oe=this.dim=I.height-2;this.data=new Uint32Array(I.data.buffer),this.encoding=W||"mapbox";for(var ge=0;ge<oe;ge++)this.data[this._idx(-1,ge)]=this.data[this._idx(0,ge)],this.data[this._idx(oe,ge)]=this.data[this._idx(oe-1,ge)],this.data[this._idx(ge,-1)]=this.data[this._idx(ge,0)],this.data[this._idx(ge,oe)]=this.data[this._idx(ge,oe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(oe,-1)]=this.data[this._idx(oe-1,0)],this.data[this._idx(-1,oe)]=this.data[this._idx(0,oe-1)],this.data[this._idx(oe,oe)]=this.data[this._idx(oe-1,oe-1)]};ml.prototype.get=function(M,I){var W=new Uint8Array(this.data.buffer),oe=4*this._idx(M,I);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(W[oe],W[oe+1],W[oe+2])},ml.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ml.prototype._idx=function(M,I){if(M<-1||M>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(M+1)},ml.prototype._unpackMapbox=function(M,I,W){return(256*M*256+256*I+W)/10-1e4},ml.prototype._unpackTerrarium=function(M,I,W){return 256*M+I+W/256-32768},ml.prototype.getPixels=function(){return new es({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ml.prototype.backfillBorder=function(M,I,W){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var oe=I*this.dim,ge=I*this.dim+this.dim,Te=W*this.dim,Oe=W*this.dim+this.dim;switch(I){case-1:oe=ge-1;break;case 1:ge=oe+1}switch(W){case-1:Te=Oe-1;break;case 1:Oe=Te+1}for(var Ve=-I*this.dim,tt=-W*this.dim,pt=Te;pt<Oe;pt++)for(var bt=oe;bt<ge;bt++)this.data[this._idx(bt,pt)]=M.data[this._idx(bt+Ve,pt+tt)]},un("DEMData",ml);var Uc=function(M){this._stringToNumber={},this._numberToString=[];for(var I=0;I<M.length;I++){var W=M[I];this._stringToNumber[W]=I,this._numberToString[I]=W}};Uc.prototype.encode=function(M){return this._stringToNumber[M]},Uc.prototype.decode=function(M){return this._numberToString[M]};var Vc=function(M,I,W,oe,ge){this.type="Feature",this._vectorTileFeature=M,M._z=I,M._x=W,M._y=oe,this.properties=M.properties,this.id=ge},Su={geometry:{configurable:!0}};Su.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Su.geometry.set=function(M){this._geometry=M},Vc.prototype.toJSON=function(){var M={geometry:this.geometry};for(var I in this)"_geometry"!==I&&"_vectorTileFeature"!==I&&(M[I]=this[I]);return M},Object.defineProperties(Vc.prototype,Su);var ql=function(){this.state={},this.stateChanges={},this.deletedStates={}};ql.prototype.updateState=function(M,I,W){var oe=String(I);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][oe]=this.stateChanges[M][oe]||{},l(this.stateChanges[M][oe],W),null===this.deletedStates[M])for(var ge in this.deletedStates[M]={},this.state[M])ge!==oe&&(this.deletedStates[M][ge]=null);else if(this.deletedStates[M]&&null===this.deletedStates[M][oe])for(var Te in this.deletedStates[M][oe]={},this.state[M][oe])W[Te]||(this.deletedStates[M][oe][Te]=null);else for(var Oe in W)this.deletedStates[M]&&this.deletedStates[M][oe]&&null===this.deletedStates[M][oe][Oe]&&delete this.deletedStates[M][oe][Oe]},ql.prototype.removeFeatureState=function(M,I,W){if(null!==this.deletedStates[M]){var oe=String(I);if(this.deletedStates[M]=this.deletedStates[M]||{},W&&void 0!==I)null!==this.deletedStates[M][oe]&&(this.deletedStates[M][oe]=this.deletedStates[M][oe]||{},this.deletedStates[M][oe][W]=null);else if(void 0!==I)if(this.stateChanges[M]&&this.stateChanges[M][oe])for(W in this.deletedStates[M][oe]={},this.stateChanges[M][oe])this.deletedStates[M][oe][W]=null;else this.deletedStates[M][oe]=null;else this.deletedStates[M]=null}},ql.prototype.getState=function(M,I){var W=String(I),Te=l({},(this.state[M]||{})[W],(this.stateChanges[M]||{})[W]);if(null===this.deletedStates[M])return{};if(this.deletedStates[M]){var Oe=this.deletedStates[M][I];if(null===Oe)return{};for(var Ve in Oe)delete Te[Ve]}return Te},ql.prototype.initializeTileState=function(M,I){M.setFeatureState(this.state,I)},ql.prototype.coalesceChanges=function(M,I){var W={};for(var oe in this.stateChanges){this.state[oe]=this.state[oe]||{};var ge={};for(var Te in this.stateChanges[oe])this.state[oe][Te]||(this.state[oe][Te]={}),l(this.state[oe][Te],this.stateChanges[oe][Te]),ge[Te]=this.state[oe][Te];W[oe]=ge}for(var Oe in this.deletedStates){this.state[Oe]=this.state[Oe]||{};var Ve={};if(null===this.deletedStates[Oe])for(var tt in this.state[Oe])Ve[tt]={},this.state[Oe][tt]={};else for(var pt in this.deletedStates[Oe]){if(null===this.deletedStates[Oe][pt])this.state[Oe][pt]={};else for(var bt=0,Ht=Object.keys(this.deletedStates[Oe][pt]);bt<Ht.length;bt+=1)delete this.state[Oe][pt][Ht[bt]];Ve[pt]=this.state[Oe][pt]}W[Oe]=W[Oe]||{},l(W[Oe],Ve)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(W).length)for(var Jt in M)M[Jt].setFeatureState(W,I)};var vl=function(M,I){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new xn(8192,16,0),this.grid3D=new xn(8192,16,0),this.featureIndexArray=new Pt,this.promoteId=I};function Bf(M,I,W,oe,ge){return _(M,function(Te,Oe){var Ve=I instanceof ps?I.get(Oe):null;return Ve&&Ve.evaluate?Ve.evaluate(W,oe,ge):Ve})}function Nf(M){for(var I=1/0,W=1/0,oe=-1/0,ge=-1/0,Te=0,Oe=M;Te<Oe.length;Te+=1){var Ve=Oe[Te];I=Math.min(I,Ve.x),W=Math.min(W,Ve.y),oe=Math.max(oe,Ve.x),ge=Math.max(ge,Ve.y)}return{minX:I,minY:W,maxX:oe,maxY:ge}}function Ap(M,I){return I-M}vl.prototype.insert=function(M,I,W,oe,ge,Te){var Oe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(W,oe,ge);for(var Ve=Te?this.grid3D:this.grid,tt=0;tt<I.length;tt++){for(var pt=I[tt],bt=[1/0,1/0,-1/0,-1/0],Ht=0;Ht<pt.length;Ht++){var tr=pt[Ht];bt[0]=Math.min(bt[0],tr.x),bt[1]=Math.min(bt[1],tr.y),bt[2]=Math.max(bt[2],tr.x),bt[3]=Math.max(bt[3],tr.y)}bt[0]<8192&&bt[1]<8192&&bt[2]>=0&&bt[3]>=0&&Ve.insert(Oe,bt[0],bt[1],bt[2],bt[3])}},vl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Dl.VectorTile(new Lc(this.rawTileData)).layers,this.sourceLayerCoder=new Uc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},vl.prototype.query=function(M,I,W,oe){var ge=this;this.loadVTLayers();for(var Te=M.params||{},Oe=8192/M.tileSize/M.scale,Ve=Ri(Te.filter),tt=M.queryGeometry,pt=M.queryPadding*Oe,bt=Nf(tt),Ht=this.grid.query(bt.minX-pt,bt.minY-pt,bt.maxX+pt,bt.maxY+pt),tr=Nf(M.cameraQueryGeometry),mr=0,Pr=this.grid3D.query(tr.minX-pt,tr.minY-pt,tr.maxX+pt,tr.maxY+pt,function(kn,Cn,Kn,Zn){return function(ri,gi,mi,ci,Ai){for(var _i=0,vi=ri;_i<vi.length;_i+=1){var ha=vi[_i];if(gi<=ha.x&&mi<=ha.y&&ci>=ha.x&&Ai>=ha.y)return!0}var la=[new t(gi,mi),new t(gi,Ai),new t(ci,Ai),new t(ci,mi)];if(ri.length>2)for(var va=0,Ii=la;va<Ii.length;va+=1)if(cs(ri,Ii[va]))return!0;for(var ua=0;ua<ri.length-1;ua++)if(ol(ri[ua],ri[ua+1],la))return!0;return!1}(M.cameraQueryGeometry,kn-pt,Cn-pt,Kn+pt,Zn+pt)});mr<Pr.length;mr+=1)Ht.push(Pr[mr]);Ht.sort(Ap);for(var qr,$r={},tn=function(kn){var Cn=Ht[kn];if(Cn!==qr){qr=Cn;var Kn=ge.featureIndexArray.get(Cn),Zn=null;ge.loadMatchingFeature($r,Kn.bucketIndex,Kn.sourceLayerIndex,Kn.featureIndex,Ve,Te.layers,Te.availableImages,I,W,oe,function(ri,gi,mi){return Zn||(Zn=Sa(ri)),gi.queryIntersectsFeature(tt,ri,mi,Zn,ge.z,M.transform,Oe,M.pixelPosMatrix)})}},cn=0;cn<Ht.length;cn++)tn(cn);return $r},vl.prototype.loadMatchingFeature=function(M,I,W,oe,ge,Te,Oe,Ve,tt,pt,bt){var Ht=this.bucketLayerIDs[I];if(!Te||function(Kn,Zn){for(var ri=0;ri<Kn.length;ri++)if(Zn.indexOf(Kn[ri])>=0)return!0;return!1}(Te,Ht)){var tr=this.sourceLayerCoder.decode(W),Jt=this.vtLayers[tr].feature(oe);if(ge.filter(new pa(this.tileID.overscaledZ),Jt))for(var mr=this.getId(Jt,tr),Pr=0;Pr<Ht.length;Pr++){var Gr=Ht[Pr];if(!(Te&&Te.indexOf(Gr)<0)){var qr=Ve[Gr];if(qr){var $r={};void 0!==mr&&pt&&($r=pt.getState(qr.sourceLayer||"_geojsonTileLayer",mr));var tn=tt[Gr];tn.paint=Bf(tn.paint,qr.paint,Jt,$r,Oe),tn.layout=Bf(tn.layout,qr.layout,Jt,$r,Oe);var cn=!bt||bt(Jt,qr,$r);if(cn){var kn=new Vc(Jt,this.z,this.x,this.y,mr);kn.layer=tn;var Cn=M[Gr];void 0===Cn&&(Cn=M[Gr]=[]),Cn.push({featureIndex:oe,feature:kn,intersectionZ:cn})}}}}}},vl.prototype.lookupSymbolFeatures=function(M,I,W,oe,ge,Te,Oe,Ve){var tt={};this.loadVTLayers();for(var pt=Ri(ge),bt=0,Ht=M;bt<Ht.length;bt+=1)this.loadMatchingFeature(tt,W,oe,Ht[bt],pt,Te,Oe,Ve,I);return tt},vl.prototype.hasLayer=function(M){for(var I=0,W=this.bucketLayerIDs;I<W.length;I+=1)for(var oe=0,ge=W[I];oe<ge.length;oe+=1)if(M===ge[oe])return!0;return!1},vl.prototype.getId=function(M,I){var W=M.id;return this.promoteId&&"boolean"==typeof(W=M.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[I]])&&(W=Number(W)),W},un("FeatureIndex",vl,{omit:["rawTileData","sourceLayerCoder"]});var Go=function(M,I){this.tileID=M,this.uid=g(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Go.prototype.registerFadeDuration=function(M){var I=M+this.timeAdded;I<B.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)},Go.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Go.prototype.loadVectorData=function(M,I,W){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var oe in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(pt,bt){var Ht={};if(!bt)return Ht;for(var tr=function(){var Pr=mr[Jt],Gr=Pr.layerIds.map(function(cn){return bt.getLayer(cn)}).filter(Boolean);if(0!==Gr.length){Pr.layers=Gr,Pr.stateDependentLayerIds&&(Pr.stateDependentLayers=Pr.stateDependentLayerIds.map(function(cn){return Gr.filter(function(kn){return kn.id===cn})[0]}));for(var qr=0,$r=Gr;qr<$r.length;qr+=1)Ht[$r[qr].id]=Pr}},Jt=0,mr=pt;Jt<mr.length;Jt+=1)tr();return Ht}(M.buckets,I.style),this.hasSymbolBuckets=!1,this.buckets){var ge=this.buckets[oe];if(ge instanceof Ta){if(this.hasSymbolBuckets=!0,!W)break;ge.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Te in this.buckets){var Oe=this.buckets[Te];if(Oe instanceof Ta&&Oe.hasRTLText){this.hasRTLText=!0,To.isLoading()||To.isLoaded()||"deferred"!==no()||oa();break}}for(var Ve in this.queryPadding=0,this.buckets){var tt=this.buckets[Ve];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(Ve).queryRadius(tt))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new Ae},Go.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Go.prototype.getBucket=function(M){return this.buckets[M.id]},Go.prototype.upload=function(M){for(var I in this.buckets){var W=this.buckets[I];W.uploadPending()&&W.upload(M)}var oe=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sl(M,this.imageAtlas.image,oe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sl(M,this.glyphAtlasImage,oe.ALPHA),this.glyphAtlasImage=null)},Go.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},Go.prototype.queryRenderedFeatures=function(M,I,W,oe,ge,Te,Oe,Ve,tt,pt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:oe,cameraQueryGeometry:ge,scale:Te,tileSize:this.tileSize,pixelPosMatrix:pt,transform:Ve,params:Oe,queryPadding:this.queryPadding*tt},M,I,W):{}},Go.prototype.querySourceFeatures=function(M,I){var W=this.latestFeatureIndex;if(W&&W.rawTileData){var oe=W.loadVTLayers(),ge=I?I.sourceLayer:"",Te=oe._geojsonTileLayer||oe[ge];if(Te)for(var Oe=Ri(I&&I.filter),Ve=this.tileID.canonical,tt=Ve.z,pt=Ve.x,bt=Ve.y,Ht={z:tt,x:pt,y:bt},tr=0;tr<Te.length;tr++){var Jt=Te.feature(tr);if(Oe.filter(new pa(this.tileID.overscaledZ),Jt)){var mr=W.getId(Jt,ge),Pr=new Vc(Jt,tt,pt,bt,mr);Pr.tile=Ht,M.push(Pr)}}}},Go.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Go.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Go.prototype.setExpiryData=function(M){var I=this.expirationTime;if(M.cacheControl){var W=E(M.cacheControl);W["max-age"]&&(this.expirationTime=Date.now()+1e3*W["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var oe=Date.now(),ge=!1;if(this.expirationTime>oe)ge=!1;else if(I)if(this.expirationTime<I)ge=!0;else{var Te=this.expirationTime-I;Te?this.expirationTime=oe+Math.max(Te,3e4):ge=!0}else ge=!0;ge?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Go.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Go.prototype.setFeatureState=function(M,I){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(M).length){var W=this.latestFeatureIndex.loadVTLayers();for(var oe in this.buckets)if(I.style.hasLayer(oe)){var ge=this.buckets[oe],Te=ge.layers[0].sourceLayer||"_geojsonTileLayer",Oe=W[Te],Ve=M[Te];if(Oe&&Ve&&0!==Object.keys(Ve).length){ge.update(Ve,Oe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var tt=I&&I.style&&I.style.getLayer(oe);tt&&(this.queryPadding=Math.max(this.queryPadding,tt.queryRadius(ge)))}}}},Go.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Go.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<B.now()},Go.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Go.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=B.now()+M},Go.prototype.setDependencies=function(M,I){for(var W={},oe=0,ge=I;oe<ge.length;oe+=1)W[ge[oe]]=!0;this.dependencies[M]=W},Go.prototype.hasDependency=function(M,I){for(var W=0,oe=M;W<oe.length;W+=1){var Te=this.dependencies[oe[W]];if(Te)for(var Oe=0,Ve=I;Oe<Ve.length;Oe+=1)if(Te[Ve[Oe]])return!0}return!1};var Tl=self.performance,jf=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},Tl.mark(this._marks.start)};jf.prototype.finish=function(){Tl.mark(this._marks.end);var M=Tl.getEntriesByName(this._marks.measure);return 0===M.length&&(Tl.measure(this._marks.measure,this._marks.start,this._marks.end),M=Tl.getEntriesByName(this._marks.measure),Tl.clearMarks(this._marks.start),Tl.clearMarks(this._marks.end),Tl.clearMeasures(this._marks.measure)),M},e.Actor=Hl,e.AlphaImage=Us,e.CanonicalTileID=Cl,e.CollisionBoxArray=Ae,e.Color=nr,e.DEMData=ml,e.DataConstantProperty=yi,e.DictionaryCoder=Uc,e.EXTENT=8192,e.ErrorEvent=Je,e.EvaluationParameters=pa,e.Event=He,e.Evented=pe,e.FeatureIndex=vl,e.FillBucket=Js,e.FillExtrusionBucket=Ks,e.ImageAtlas=hc,e.ImagePosition=Oc,e.LineBucket=ws,e.LngLat=Ya,e.LngLatBounds=Io,e.MercatorCoordinate=El,e.ONE_EM=24,e.OverscaledTileID=Do,e.Point=t,e.Point$1=t,e.Properties=Ho,e.Protobuf=Lc,e.RGBAImage=es,e.RequestManager=ne,e.RequestPerformance=jf,e.ResourceType=gt,e.SegmentVector=Vt,e.SourceFeatureState=ql,e.StructArrayLayout1ui2=Y,e.StructArrayLayout2f1f2i16=qs,e.StructArrayLayout2i4=bs,e.StructArrayLayout3ui6=xo,e.StructArrayLayout4i8=Ra,e.SymbolBucket=Ta,e.Texture=Sl,e.Tile=Go,e.Transitionable=Ko,e.Uniform1f=en,e.Uniform1i=xi,e.Uniform2f=On,e.Uniform3f=ti,e.Uniform4f=Qn,e.UniformColor=pi,e.UniformMatrix4f=ji,e.UnwrappedTileID=Ff,e.ValidationError=Be,e.WritingMode=zs,e.ZoomHistory=Gi,e.add=function(M,I,W){return M[0]=I[0]+W[0],M[1]=I[1]+W[1],M[2]=I[2]+W[2],M},e.addDynamicAttributes=Tu,e.asyncAll=function(M,I,W){if(!M.length)return W(null,[]);var oe=M.length,ge=new Array(M.length),Te=null;M.forEach(function(Oe,Ve){I(Oe,function(tt,pt){tt&&(Te=tt),ge[Ve]=pt,0==--oe&&W(Te,ge)})})},e.bezier=a,e.bindAll=f,e.browser=B,e.cacheEntryPossiblyAdded=function(M){++rt>De&&(M.getActor().send("enforceCacheSizeLimit",Ne),rt=0)},e.clamp=s,e.clearTileCache=function(M){var I=self.caches.delete("mapbox-tiles");M&&I.catch(M).then(function(){return M()})},e.clipLine=_f,e.clone=function(M){var I=new ke(16);return I[0]=M[0],I[1]=M[1],I[2]=M[2],I[3]=M[3],I[4]=M[4],I[5]=M[5],I[6]=M[6],I[7]=M[7],I[8]=M[8],I[9]=M[9],I[10]=M[10],I[11]=M[11],I[12]=M[12],I[13]=M[13],I[14]=M[14],I[15]=M[15],I},e.clone$1=w,e.clone$2=function(M){var I=new ke(3);return I[0]=M[0],I[1]=M[1],I[2]=M[2],I},e.collisionCircleLayout=Gh,e.config=H,e.create=function(){var M=new ke(16);return ke!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},e.create$1=function(){var M=new ke(9);return ke!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},e.create$2=function(){var M=new ke(4);return ke!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},e.createCommonjsModule=n,e.createExpression=er,e.createLayout=da,e.createStyleLayer=function(M){return"custom"===M.type?new Tp(M):new kp[M.type](M)},e.cross=function(M,I,W){var oe=I[0],ge=I[1],Te=I[2],Oe=W[0],Ve=W[1],tt=W[2];return M[0]=ge*tt-Te*Ve,M[1]=Te*Oe-oe*tt,M[2]=oe*Ve-ge*Oe,M},e.deepEqual=function M(I,W){if(Array.isArray(I)){if(!Array.isArray(W)||I.length!==W.length)return!1;for(var oe=0;oe<I.length;oe++)if(!M(I[oe],W[oe]))return!1;return!0}if("object"==typeof I&&null!==I&&null!==W){if("object"!=typeof W||Object.keys(I).length!==Object.keys(W).length)return!1;for(var ge in I)if(!M(I[ge],W[ge]))return!1;return!0}return I===W},e.dot=function(M,I){return M[0]*I[0]+M[1]*I[1]+M[2]*I[2]},e.dot$1=function(M,I){return M[0]*I[0]+M[1]*I[1]+M[2]*I[2]+M[3]*I[3]},e.ease=i,e.emitValidationErrors=In,e.endsWith=T,e.enforceCacheSizeLimit=function(M){$e(),Ee&&Ee.then(function(I){I.keys().then(function(W){for(var oe=0;oe<W.length-M;oe++)I.delete(W[oe])})})},e.evaluateSizeForFeature=gf,e.evaluateSizeForZoom=mf,e.evaluateVariableOffset=kf,e.evented=za,e.extend=l,e.featureFilter=Ri,e.filterObject=k,e.fromRotation=function(M,I){var W=Math.sin(I),oe=Math.cos(I);return M[0]=oe,M[1]=W,M[2]=0,M[3]=-W,M[4]=oe,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},e.getAnchorAlignment=xu,e.getAnchorJustification=wu,e.getArrayBuffer=wt,e.getImage=ar,e.getJSON=function(M,I){return et(l(M,{type:"json"}),I)},e.getRTLTextPluginStatus=no,e.getReferrer=_t,e.getVideo=function(M,I){var W,oe,ge=self.document.createElement("video");ge.muted=!0,ge.onloadstart=function(){I(null,ge)};for(var Te=0;Te<M.length;Te++){var Oe=self.document.createElement("source");W=M[Te],oe=void 0,(oe=self.document.createElement("a")).href=W,(oe.protocol!==self.document.location.protocol||oe.host!==self.document.location.host)&&(ge.crossOrigin="Anonymous"),Oe.src=M[Te],ge.appendChild(Oe)}return{cancel:function(){}}},e.identity=ye,e.invert=function(M,I){var W=I[0],oe=I[1],ge=I[2],Te=I[3],Oe=I[4],Ve=I[5],tt=I[6],pt=I[7],bt=I[8],Ht=I[9],tr=I[10],Jt=I[11],mr=I[12],Pr=I[13],Gr=I[14],qr=I[15],$r=W*Ve-oe*Oe,tn=W*tt-ge*Oe,cn=W*pt-Te*Oe,kn=oe*tt-ge*Ve,Cn=oe*pt-Te*Ve,Kn=ge*pt-Te*tt,Zn=bt*Pr-Ht*mr,ri=bt*Gr-tr*mr,gi=bt*qr-Jt*mr,mi=Ht*Gr-tr*Pr,ci=Ht*qr-Jt*Pr,Ai=tr*qr-Jt*Gr,_i=$r*Ai-tn*ci+cn*mi+kn*gi-Cn*ri+Kn*Zn;return _i?(M[0]=(Ve*Ai-tt*ci+pt*mi)*(_i=1/_i),M[1]=(ge*ci-oe*Ai-Te*mi)*_i,M[2]=(Pr*Kn-Gr*Cn+qr*kn)*_i,M[3]=(tr*Cn-Ht*Kn-Jt*kn)*_i,M[4]=(tt*gi-Oe*Ai-pt*ri)*_i,M[5]=(W*Ai-ge*gi+Te*ri)*_i,M[6]=(Gr*cn-mr*Kn-qr*tn)*_i,M[7]=(bt*Kn-tr*cn+Jt*tn)*_i,M[8]=(Oe*ci-Ve*gi+pt*Zn)*_i,M[9]=(oe*gi-W*ci-Te*Zn)*_i,M[10]=(mr*Cn-Pr*cn+qr*$r)*_i,M[11]=(Ht*cn-bt*Cn-Jt*$r)*_i,M[12]=(Ve*ri-Oe*mi-tt*Zn)*_i,M[13]=(W*mi-oe*ri+ge*Zn)*_i,M[14]=(Pr*tn-mr*kn-Gr*$r)*_i,M[15]=(bt*kn-Ht*tn+tr*$r)*_i,M):null},e.isChar=Rn,e.isMapboxURL=se,e.keysDifference=function(M,I){var W=[];for(var oe in M)oe in I||W.push(oe);return W},e.makeRequest=et,e.mapObject=_,e.mercatorXfromLng=Df,e.mercatorYfromLat=zf,e.mercatorZfromAltitude=Rf,e.mul=lt,e.multiply=Ce,e.mvt=Dl,e.normalize=function(M,I){var W=I[0],oe=I[1],ge=I[2],Te=W*W+oe*oe+ge*ge;return Te>0&&(Te=1/Math.sqrt(Te)),M[0]=I[0]*Te,M[1]=I[1]*Te,M[2]=I[2]*Te,M},e.number=Ln,e.offscreenCanvasSupported=ut,e.ortho=function(M,I,W,oe,ge,Te,Oe){var Ve=1/(I-W),tt=1/(oe-ge),pt=1/(Te-Oe);return M[0]=-2*Ve,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*tt,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*pt,M[11]=0,M[12]=(I+W)*Ve,M[13]=(ge+oe)*tt,M[14]=(Oe+Te)*pt,M[15]=1,M},e.parseGlyphPBF=function(M){return new Lc(M).readFields(rp,[])},e.pbf=Lc,e.performSymbolLayout=function(M,I,W,oe,ge,Te,Oe){M.createArrays(),M.tilePixelRatio=8192/(512*M.overscaling),M.compareText={},M.iconsNeedLinear=!1;var tt=M.layers[0].layout,pt=M.layers[0]._unevaluatedLayout._values,bt={};if("composite"===M.textSizeData.kind){var Ht=M.textSizeData,Jt=Ht.maxZoom;bt.compositeTextSizes=[pt["text-size"].possiblyEvaluate(new pa(Ht.minZoom),Oe),pt["text-size"].possiblyEvaluate(new pa(Jt),Oe)]}if("composite"===M.iconSizeData.kind){var mr=M.iconSizeData,Gr=mr.maxZoom;bt.compositeIconSizes=[pt["icon-size"].possiblyEvaluate(new pa(mr.minZoom),Oe),pt["icon-size"].possiblyEvaluate(new pa(Gr),Oe)]}bt.layoutTextSize=pt["text-size"].possiblyEvaluate(new pa(M.zoom+1),Oe),bt.layoutIconSize=pt["icon-size"].possiblyEvaluate(new pa(M.zoom+1),Oe),bt.textMaxSize=pt["text-size"].possiblyEvaluate(new pa(18));for(var qr=24*tt.get("text-line-height"),$r="map"===tt.get("text-rotation-alignment")&&"point"!==tt.get("symbol-placement"),tn=tt.get("text-keep-upright"),cn=tt.get("text-size"),kn=function(){var Zn=Kn[Cn],ri=tt.get("text-font").evaluate(Zn,{},Oe).join(","),gi=cn.evaluate(Zn,{},Oe),mi=bt.layoutTextSize.evaluate(Zn,{},Oe),ci=bt.layoutIconSize.evaluate(Zn,{},Oe),Ai={horizontal:{},vertical:void 0},_i=Zn.text,vi=[0,0];if(_i){var ha=_i.toString(),la=24*tt.get("text-letter-spacing").evaluate(Zn,{},Oe),va=function($i){for(var ga=0,oo=$i;ga<oo.length;ga+=1)if(!qi(oo[ga].charCodeAt(0)))return!1;return!0}(ha)?la:0,Ii=tt.get("text-anchor").evaluate(Zn,{},Oe),ua=tt.get("text-variable-anchor");if(!ua){var Na=tt.get("text-radial-offset").evaluate(Zn,{},Oe);vi=Na?kf(Ii,[24*Na,_u]):tt.get("text-offset").evaluate(Zn,{},Oe).map(function($i){return 24*$i})}var Pa=$r?"center":tt.get("text-justify").evaluate(Zn,{},Oe),Wa=tt.get("symbol-placement"),Oa="point"===Wa?24*tt.get("text-max-width").evaluate(Zn,{},Oe):0,zo=function(){M.allowVerticalPlacement&&Hi(ha)&&(Ai.vertical=Ic(_i,I,W,ge,ri,Oa,qr,Ii,"left",va,vi,zs.vertical,!0,Wa,mi,gi))};if(!$r&&ua){for(var Za="auto"===Pa?ua.map(function($i){return wu($i)}):[Pa],is=!1,Yo=0;Yo<Za.length;Yo++){var ts=Za[Yo];if(!Ai.horizontal[ts])if(is)Ai.horizontal[ts]=Ai.horizontal[0];else{var ms=Ic(_i,I,W,ge,ri,Oa,qr,"center",ts,va,vi,zs.horizontal,!1,Wa,mi,gi);ms&&(Ai.horizontal[ts]=ms,is=1===ms.positionedLines.length)}}zo()}else{"auto"===Pa&&(Pa=wu(Ii));var fs=Ic(_i,I,W,ge,ri,Oa,qr,Ii,Pa,va,vi,zs.horizontal,!1,Wa,mi,gi);fs&&(Ai.horizontal[Pa]=fs),zo(),Hi(ha)&&$r&&tn&&(Ai.vertical=Ic(_i,I,W,ge,ri,Oa,qr,Ii,Pa,va,vi,zs.vertical,!1,Wa,mi,gi))}}var $i,ga,so,vs,hs,Ro=void 0,rs=!1;if(Zn.icon&&Zn.icon.name){var ko=oe[Zn.icon.name];ko&&($i=ge[Zn.icon.name],ga=tt.get("icon-offset").evaluate(Zn,{},Oe),so=xu(tt.get("icon-anchor").evaluate(Zn,{},Oe)),Ro={image:$i,top:hs=ga[1]-$i.displaySize[1]*so.verticalAlign,bottom:hs+$i.displaySize[1],left:vs=ga[0]-$i.displaySize[0]*so.horizontalAlign,right:vs+$i.displaySize[0]},rs=ko.sdf,void 0===M.sdfIcons?M.sdfIcons=ko.sdf:M.sdfIcons!==ko.sdf&&A("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ko.pixelRatio!==M.pixelRatio||0!==tt.get("icon-rotate").constantOr(1))&&(M.iconsNeedLinear=!0))}var No=Mf(Ai.horizontal)||Ai.vertical;M.iconsInText=!!No&&No.iconsInText,(No||Ro)&&function($i,ga,oo,so,io,Xa,xa,lo,vs,Cs,hs){var $s=Xa.textMaxSize.evaluate(ga,{});void 0===$s&&($s=xa);var yl,Wo=$i.layers[0].layout,Qs=Wo.get("icon-offset").evaluate(ga,{},hs),el=Mf(oo.horizontal),tl=xa/24,Eu=$i.tilePixelRatio*tl,Gl=$i.tilePixelRatio*$s/24,Hc=$i.tilePixelRatio*lo,Ll=$i.tilePixelRatio*Wo.get("symbol-spacing"),qc=Wo.get("text-padding")*$i.tilePixelRatio,Gc=Wo.get("icon-padding")*$i.tilePixelRatio,Yc=Wo.get("text-max-angle")/180*Math.PI,Wc="map"===Wo.get("text-rotation-alignment")&&"point"!==Wo.get("symbol-placement"),kl="map"===Wo.get("icon-rotation-alignment")&&"point"!==Wo.get("symbol-placement"),Yl=Wo.get("symbol-placement"),Zc=Ll/2,Wl=Wo.get("icon-text-fit");so&&"none"!==Wl&&($i.allowVerticalPlacement&&oo.vertical&&(yl=df(so,oo.vertical,Wl,Wo.get("icon-text-fit-padding"),Qs,tl)),el&&(so=df(so,el,Wl,Wo.get("icon-text-fit-padding"),Qs,tl)));var Al=function(Sp,bc){bc.x<0||bc.x>=8192||bc.y<0||bc.y>=8192||function(bo,rl,Ep,Ml,Iu,qf,ru,sl,nu,_c,iu,au,Du,Gf,wc,Yf,Wf,Zf,Xf,Jf,Rs,ou,Kf,ll,Cp){var zu,Pl,Ql,ec,tc,rc=bo.addToLineVertexArray(rl,Ep),$f=0,Qf=0,eh=0,th=0,Ru=-1,Fu=-1,xl={},rh=jr(""),Bu=0,Nu=0;if(void 0===sl._unevaluatedLayout.getValue("text-radial-offset")?(Bu=(zu=sl.layout.get("text-offset").evaluate(Rs,{},ll).map(function(kc){return 24*kc}))[0],Nu=zu[1]):(Bu=24*sl.layout.get("text-radial-offset").evaluate(Rs,{},ll),Nu=_u),bo.allowVerticalPlacement&&Ml.vertical){var nh=sl.layout.get("text-rotate").evaluate(Rs,{},ll)+90;ec=new Bc(nu,rl,_c,iu,au,Ml.vertical,Du,Gf,wc,nh),ru&&(tc=new Bc(nu,rl,_c,iu,au,ru,Wf,Zf,wc,nh))}if(Iu){var ju=sl.layout.get("icon-rotate").evaluate(Rs,{}),ih="none"!==sl.layout.get("icon-text-fit"),ah=wf(Iu,ju,Kf,ih),Uu=ru?wf(ru,ju,Kf,ih):void 0;Ql=new Bc(nu,rl,_c,iu,au,Iu,Wf,Zf,!1,ju),$f=4*ah.length;var oh=bo.iconSizeData,Tc=null;"source"===oh.kind?(Tc=[128*sl.layout.get("icon-size").evaluate(Rs,{})])[0]>32640&&A(bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===oh.kind&&((Tc=[128*ou.compositeIconSizes[0].evaluate(Rs,{},ll),128*ou.compositeIconSizes[1].evaluate(Rs,{},ll)])[0]>32640||Tc[1]>32640)&&A(bo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),bo.addSymbols(bo.icon,ah,Tc,Jf,Xf,Rs,!1,rl,rc.lineStartIndex,rc.lineLength,-1,ll),Ru=bo.icon.placedSymbolArray.length-1,Uu&&(Qf=4*Uu.length,bo.addSymbols(bo.icon,Uu,Tc,Jf,Xf,Rs,zs.vertical,rl,rc.lineStartIndex,rc.lineLength,-1,ll),Fu=bo.icon.placedSymbolArray.length-1)}for(var sh in Ml.horizontal){var su=Ml.horizontal[sh];if(!Pl){rh=jr(su.text);var Pp=sl.layout.get("text-rotate").evaluate(Rs,{},ll);Pl=new Bc(nu,rl,_c,iu,au,su,Du,Gf,wc,Pp)}var lh=1===su.positionedLines.length;if(eh+=Af(bo,rl,su,qf,sl,wc,Rs,Yf,rc,Ml.vertical?zs.horizontal:zs.horizontalOnly,lh?Object.keys(Ml.horizontal):[sh],xl,Ru,ou,ll),lh)break}Ml.vertical&&(th+=Af(bo,rl,Ml.vertical,qf,sl,wc,Rs,Yf,rc,zs.vertical,["vertical"],xl,Fu,ou,ll));var Op=Pl?Pl.boxStartIndex:bo.collisionBoxArray.length,Ip=Pl?Pl.boxEndIndex:bo.collisionBoxArray.length,Dp=ec?ec.boxStartIndex:bo.collisionBoxArray.length,zp=ec?ec.boxEndIndex:bo.collisionBoxArray.length,Rp=Ql?Ql.boxStartIndex:bo.collisionBoxArray.length,Fp=Ql?Ql.boxEndIndex:bo.collisionBoxArray.length,Bp=tc?tc.boxStartIndex:bo.collisionBoxArray.length,Np=tc?tc.boxEndIndex:bo.collisionBoxArray.length,cl=-1,lu=function(kc,uh){return kc&&kc.circleDiameter?Math.max(kc.circleDiameter,uh):uh};cl=lu(Pl,cl),cl=lu(ec,cl),cl=lu(Ql,cl);var ch=(cl=lu(tc,cl))>-1?1:0;ch&&(cl*=Cp/24),bo.glyphOffsetArray.length>=Ta.MAX_GLYPHS&&A("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Rs.sortKey&&bo.addToSortKeyRanges(bo.symbolInstances.length,Rs.sortKey),bo.symbolInstances.emplaceBack(rl.x,rl.y,xl.right>=0?xl.right:-1,xl.center>=0?xl.center:-1,xl.left>=0?xl.left:-1,xl.vertical||-1,Ru,Fu,rh,Op,Ip,Dp,zp,Rp,Fp,Bp,Np,_c,eh,th,$f,Qf,ch,0,Du,Bu,Nu,cl)}($i,bc,Sp,oo,so,io,yl,$i.layers[0],$i.collisionBoxArray,ga.index,ga.sourceLayerIndex,$i.index,Eu,qc,Wc,vs,Hc,Gc,kl,Qs,ga,Xa,Cs,hs,xa)};if("line"===Yl)for(var gc=0,Xc=_f(ga.geometry,0,0,8192,8192);gc<Xc.length;gc+=1)for(var Jc=Xc[gc],mc=0,$c=cp(Jc,Ll,Yc,oo.vertical||el,so,24,Gl,$i.overscaling,8192);mc<$c.length;mc+=1){var vc=$c[mc];el&&pp($i,el.text,Zc,vc)||Al(Jc,vc)}else if("line-center"===Yl)for(var yc=0,eu=ga.geometry;yc<eu.length;yc+=1){var Zl=eu[yc];if(Zl.length>1){var Xl=lp(Zl,Yc,oo.vertical||el,so,24,Gl);Xl&&Al(Zl,Xl)}}else if("Polygon"===ga.type)for(var Jl=0,tu=pu(ga.geometry,0);Jl<tu.length;Jl+=1){var Kl=tu[Jl],xc=fp(Kl,16);Al(Kl[0],new Bl(xc.x,xc.y,0))}else if("LineString"===ga.type)for(var $l=0,Uf=ga.geometry;$l<Uf.length;$l+=1){var Cu=Uf[$l];Al(Cu,new Bl(Cu[0].x,Cu[0].y,0))}else if("Point"===ga.type)for(var Lu=0,Vf=ga.geometry;Lu<Vf.length;Lu+=1)for(var Pu=0,Hf=Vf[Lu];Pu<Hf.length;Pu+=1){var Ou=Hf[Pu];Al([Ou],new Bl(Ou.x,Ou.y,0))}}(M,Zn,Ai,Ro,oe,bt,mi,ci,vi,rs,Oe)},Cn=0,Kn=M.features;Cn<Kn.length;Cn+=1)kn();Te&&M.generateCollisionDebugBuffers()},e.perspective=function(M,I,W,oe,ge){var Te,Oe=1/Math.tan(I/2);return M[0]=Oe/W,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=Oe,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,null!=ge&&ge!==1/0?(M[10]=(ge+oe)*(Te=1/(oe-ge)),M[14]=2*ge*oe*Te):(M[10]=-1,M[14]=-2*oe),M},e.pick=function(M,I){for(var W={},oe=0;oe<I.length;oe++){var ge=I[oe];ge in M&&(W[ge]=M[ge])}return W},e.plugin=To,e.polygonIntersectsPolygon=Qo,e.postMapLoadEvent=Fe,e.postTurnstileEvent=Me,e.potpack=uf,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=un,e.registerForPluginStateChange=function(M){return M({pluginStatus:ki,pluginURL:Ma}),za.on("pluginStateChange",M),M},e.rotate=function(M,I,W){var oe=I[0],ge=I[1],Te=I[2],Oe=I[3],Ve=Math.sin(W),tt=Math.cos(W);return M[0]=oe*tt+Te*Ve,M[1]=ge*tt+Oe*Ve,M[2]=oe*-Ve+Te*tt,M[3]=ge*-Ve+Oe*tt,M},e.rotateX=function(M,I,W){var oe=Math.sin(W),ge=Math.cos(W),Te=I[4],Oe=I[5],Ve=I[6],tt=I[7],pt=I[8],bt=I[9],Ht=I[10],tr=I[11];return I!==M&&(M[0]=I[0],M[1]=I[1],M[2]=I[2],M[3]=I[3],M[12]=I[12],M[13]=I[13],M[14]=I[14],M[15]=I[15]),M[4]=Te*ge+pt*oe,M[5]=Oe*ge+bt*oe,M[6]=Ve*ge+Ht*oe,M[7]=tt*ge+tr*oe,M[8]=pt*ge-Te*oe,M[9]=bt*ge-Oe*oe,M[10]=Ht*ge-Ve*oe,M[11]=tr*ge-tt*oe,M},e.rotateZ=function(M,I,W){var oe=Math.sin(W),ge=Math.cos(W),Te=I[0],Oe=I[1],Ve=I[2],tt=I[3],pt=I[4],bt=I[5],Ht=I[6],tr=I[7];return I!==M&&(M[8]=I[8],M[9]=I[9],M[10]=I[10],M[11]=I[11],M[12]=I[12],M[13]=I[13],M[14]=I[14],M[15]=I[15]),M[0]=Te*ge+pt*oe,M[1]=Oe*ge+bt*oe,M[2]=Ve*ge+Ht*oe,M[3]=tt*ge+tr*oe,M[4]=pt*ge-Te*oe,M[5]=bt*ge-Oe*oe,M[6]=Ht*ge-Ve*oe,M[7]=tr*ge-tt*oe,M},e.scale=function(M,I,W){var oe=W[0],ge=W[1],Te=W[2];return M[0]=I[0]*oe,M[1]=I[1]*oe,M[2]=I[2]*oe,M[3]=I[3]*oe,M[4]=I[4]*ge,M[5]=I[5]*ge,M[6]=I[6]*ge,M[7]=I[7]*ge,M[8]=I[8]*Te,M[9]=I[9]*Te,M[10]=I[10]*Te,M[11]=I[11]*Te,M[12]=I[12],M[13]=I[13],M[14]=I[14],M[15]=I[15],M},e.scale$1=function(M,I,W){return M[0]=I[0]*W,M[1]=I[1]*W,M[2]=I[2]*W,M[3]=I[3]*W,M},e.scale$2=function(M,I,W){return M[0]=I[0]*W,M[1]=I[1]*W,M[2]=I[2]*W,M},e.setCacheLimits=function(M,I){Ne=M,De=I},e.setRTLTextPlugin=function(M,I,W){if(void 0===W&&(W=!1),ki===ia||ki===$a||ki===ss)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ma=B.resolveURL(M),ki=ia,Eo=I,aa(),W||oa()},e.sphericalToCartesian=function(M){var I=M[0],W=M[1],oe=M[2];return W+=90,W*=Math.PI/180,oe*=Math.PI/180,{x:I*Math.cos(W)*Math.sin(oe),y:I*Math.sin(W)*Math.sin(oe),z:I*Math.cos(oe)}},e.sqrLen=function(M){var I=M[0],W=M[1];return I*I+W*W},e.styleSpec=we,e.sub=function(M,I,W){return M[0]=I[0]-W[0],M[1]=I[1]-W[1],M[2]=I[2]-W[2],M},e.symbolSize=sp,e.transformMat3=function(M,I,W){var oe=I[0],ge=I[1],Te=I[2];return M[0]=oe*W[0]+ge*W[3]+Te*W[6],M[1]=oe*W[1]+ge*W[4]+Te*W[7],M[2]=oe*W[2]+ge*W[5]+Te*W[8],M},e.transformMat4=hn,e.translate=function(M,I,W){var oe,ge,Te,Oe,Ve,tt,pt,bt,Ht,tr,Jt,mr,Pr=W[0],Gr=W[1],qr=W[2];return I===M?(M[12]=I[0]*Pr+I[4]*Gr+I[8]*qr+I[12],M[13]=I[1]*Pr+I[5]*Gr+I[9]*qr+I[13],M[14]=I[2]*Pr+I[6]*Gr+I[10]*qr+I[14],M[15]=I[3]*Pr+I[7]*Gr+I[11]*qr+I[15]):(ge=I[1],Te=I[2],Oe=I[3],Ve=I[4],tt=I[5],pt=I[6],bt=I[7],Ht=I[8],tr=I[9],Jt=I[10],mr=I[11],M[0]=oe=I[0],M[1]=ge,M[2]=Te,M[3]=Oe,M[4]=Ve,M[5]=tt,M[6]=pt,M[7]=bt,M[8]=Ht,M[9]=tr,M[10]=Jt,M[11]=mr,M[12]=oe*Pr+Ve*Gr+Ht*qr+I[12],M[13]=ge*Pr+tt*Gr+tr*qr+I[13],M[14]=Te*Pr+pt*Gr+Jt*qr+I[14],M[15]=Oe*Pr+bt*Gr+mr*qr+I[15]),M},e.triggerPluginCompletionEvent=Co,e.uniqueId=g,e.validateCustomStyleLayer=function(M){var I=[],W=M.id;return void 0===W&&I.push({message:"layers."+W+': missing required property "id"'}),void 0===M.render&&I.push({message:"layers."+W+': missing required method "render"'}),M.renderingMode&&"2d"!==M.renderingMode&&"3d"!==M.renderingMode&&I.push({message:"layers."+W+': property "renderingMode" must be either "2d" or "3d"'}),I},e.validateLight=bn,e.validateStyle=ln,e.values=function(M){var I=[];for(var W in M)I.push(M[W]);return I},e.vectorTile=Dl,e.version="1.10.1",e.warnOnce=A,e.webpSupported=ee,e.window=self,e.wrap=c}),h(0,function(e){function n(He){var Je=typeof He;if("number"===Je||"boolean"===Je||"string"===Je||null==He)return JSON.stringify(He);if(Array.isArray(He)){for(var pe="[",we=0,Be=He;we<Be.length;we+=1)pe+=n(Be[we])+",";return pe+"]"}for(var We=Object.keys(He).sort(),Ke="{",Ye=0;Ye<We.length;Ye++)Ke+=JSON.stringify(We[Ye])+":"+n(He[We[Ye]])+",";return Ke+"}"}function r(He){for(var Je="",pe=0,we=e.refProperties;pe<we.length;pe+=1)Je+="/"+n(He[we[pe]]);return Je}var o=function(He){this.keyCache={},He&&this.replace(He)};o.prototype.replace=function(He){this._layerConfigs={},this._layers={},this.update(He,[])},o.prototype.update=function(He,Je){for(var pe=this,we=0,Be=He;we<Be.length;we+=1){var We=Be[we];this._layerConfigs[We.id]=We;var Ke=this._layers[We.id]=e.createStyleLayer(We);Ke._featureFilter=e.featureFilter(Ke.filter),this.keyCache[We.id]&&delete this.keyCache[We.id]}for(var Ye=0,ft=Je;Ye<ft.length;Ye+=1){var ct=ft[Ye];delete this.keyCache[ct],delete this._layerConfigs[ct],delete this._layers[ct]}this.familiesBySource={};for(var St=0,Ft=function(Xe,ot){for(var dt={},Lt=0;Lt<Xe.length;Lt++){var Ut=ot&&ot[Xe[Lt].id]||r(Xe[Lt]);ot&&(ot[Xe[Lt].id]=Ut);var $t=dt[Ut];$t||($t=dt[Ut]=[]),$t.push(Xe[Lt])}var Wt=[];for(var wr in dt)Wt.push(dt[wr]);return Wt}(e.values(this._layerConfigs),this.keyCache);St<Ft.length;St+=1){var at=Ft[St].map(function(Xe){return pe._layers[Xe.id]}),mt=at[0];if("none"!==mt.visibility){var qt=mt.source||"",Et=this.familiesBySource[qt];Et||(Et=this.familiesBySource[qt]={});var Dt=mt.sourceLayer||"_geojsonTileLayer",Le=Et[Dt];Le||(Le=Et[Dt]=[]),Le.push(at)}}};var t=function(He){var Je={},pe=[];for(var we in He){var Be=He[we],We=Je[we]={};for(var Ke in Be){var Ye=Be[+Ke];if(Ye&&0!==Ye.bitmap.width&&0!==Ye.bitmap.height){var ft={x:0,y:0,w:Ye.bitmap.width+2,h:Ye.bitmap.height+2};pe.push(ft),We[Ke]={rect:ft,metrics:Ye.metrics}}}}var ct=e.potpack(pe),at=new e.AlphaImage({width:ct.w||1,height:ct.h||1});for(var mt in He){var qt=He[mt];for(var Et in qt){var Dt=qt[+Et];if(Dt&&0!==Dt.bitmap.width&&0!==Dt.bitmap.height){var Le=Je[mt][Et].rect;e.AlphaImage.copy(Dt.bitmap,at,{x:0,y:0},{x:Le.x+1,y:Le.y+1},Dt.bitmap)}}}this.image=at,this.positions=Je};e.register("GlyphAtlas",t);var d=function(He){this.tileID=new e.OverscaledTileID(He.tileID.overscaledZ,He.tileID.wrap,He.tileID.canonical.z,He.tileID.canonical.x,He.tileID.canonical.y),this.uid=He.uid,this.zoom=He.zoom,this.pixelRatio=He.pixelRatio,this.tileSize=He.tileSize,this.source=He.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=He.showCollisionBoxes,this.collectResourceTiming=!!He.collectResourceTiming,this.returnDependencies=!!He.returnDependencies,this.promoteId=He.promoteId};function a(He,Je,pe){for(var we=new e.EvaluationParameters(Je),Be=0,We=He;Be<We.length;Be+=1)We[Be].recalculate(we,pe)}function i(He,Je){var pe=e.getArrayBuffer(He.request,function(we,Be,We,Ke){we?Je(we):Be&&Je(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Be)),rawData:Be,cacheControl:We,expires:Ke})});return function(){pe.cancel(),Je()}}d.prototype.parse=function(He,Je,pe,we,Be){var We=this;this.status="parsing",this.data=He,this.collisionBoxArray=new e.CollisionBoxArray;var Ke=new e.DictionaryCoder(Object.keys(He.layers).sort()),Ye=new e.FeatureIndex(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];var ft,ct,St,Ft,at={},mt={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:pe},qt=Je.familiesBySource[this.source];for(var Et in qt){var Dt=He.layers[Et];if(Dt){1===Dt.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Et+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Le=Ke.encode(Et),Xe=[],ot=0;ot<Dt.length;ot++){var dt=Dt.feature(ot),Lt=Ye.getId(dt,Et);Xe.push({feature:dt,id:Lt,index:ot,sourceLayerIndex:Le})}for(var Ut=0,$t=qt[Et];Ut<$t.length;Ut+=1){var Wt=$t[Ut],wr=Wt[0];wr.minzoom&&this.zoom<Math.floor(wr.minzoom)||wr.maxzoom&&this.zoom>=wr.maxzoom||"none"!==wr.visibility&&(a(Wt,this.zoom,pe),(at[wr.id]=wr.createBucket({index:Ye.bucketLayerIDs.length,layers:Wt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Le,sourceID:this.source})).populate(Xe,mt,this.tileID.canonical),Ye.bucketLayerIDs.push(Wt.map(function(sr){return sr.id})))}}}var Rr=e.mapObject(mt.glyphDependencies,function(sr){return Object.keys(sr).map(Number)});Object.keys(Rr).length?we.send("getGlyphs",{uid:this.uid,stacks:Rr},function(sr,_r){ft||(ft=sr,ct=_r,lr.call(We))}):ct={};var br=Object.keys(mt.iconDependencies);br.length?we.send("getImages",{icons:br,source:this.source,tileID:this.tileID,type:"icons"},function(sr,_r){ft||(ft=sr,St=_r,lr.call(We))}):St={};var nr=Object.keys(mt.patternDependencies);function lr(){if(ft)return Be(ft);if(ct&&St&&Ft){var sr=new t(ct),_r=new e.ImageAtlas(St,Ft);for(var Ar in at){var zt=at[Ar];zt instanceof e.SymbolBucket?(a(zt.layers,this.zoom,pe),e.performSymbolLayout(zt,ct,sr.positions,St,_r.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):zt.hasPattern&&(zt instanceof e.LineBucket||zt instanceof e.FillBucket||zt instanceof e.FillExtrusionBucket)&&(a(zt.layers,this.zoom,pe),zt.addFeatures(mt,this.tileID.canonical,_r.patternPositions))}this.status="done",Be(null,{buckets:e.values(at).filter(function(ur){return!ur.isEmpty()}),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:sr.image,imageAtlas:_r,glyphMap:this.returnDependencies?ct:null,iconMap:this.returnDependencies?St:null,glyphPositions:this.returnDependencies?sr.positions:null})}}nr.length?we.send("getImages",{icons:nr,source:this.source,tileID:this.tileID,type:"patterns"},function(sr,_r){ft||(ft=sr,Ft=_r,lr.call(We))}):Ft={},lr.call(this)};var s=function(He,Je,pe,we){this.actor=He,this.layerIndex=Je,this.availableImages=pe,this.loadVectorData=we||i,this.loading={},this.loaded={}};s.prototype.loadTile=function(He,Je){var pe=this,we=He.uid;this.loading||(this.loading={});var Be=!!(He&&He.request&&He.request.collectResourceTiming)&&new e.RequestPerformance(He.request),We=this.loading[we]=new d(He);We.abort=this.loadVectorData(He,function(Ke,Ye){if(delete pe.loading[we],Ke||!Ye)return We.status="done",pe.loaded[we]=We,Je(Ke);var ft=Ye.rawData,ct={};Ye.expires&&(ct.expires=Ye.expires),Ye.cacheControl&&(ct.cacheControl=Ye.cacheControl);var St={};if(Be){var Ft=Be.finish();Ft&&(St.resourceTiming=JSON.parse(JSON.stringify(Ft)))}We.vectorTile=Ye.vectorTile,We.parse(Ye.vectorTile,pe.layerIndex,pe.availableImages,pe.actor,function(at,mt){if(at||!mt)return Je(at);Je(null,e.extend({rawTileData:ft.slice(0)},mt,ct,St))}),pe.loaded=pe.loaded||{},pe.loaded[we]=We})},s.prototype.reloadTile=function(He,Je){var pe=this,we=this.loaded,Be=He.uid,We=this;if(we&&we[Be]){var Ke=we[Be];Ke.showCollisionBoxes=He.showCollisionBoxes;var Ye=function(ft,ct){var St=Ke.reloadCallback;St&&(delete Ke.reloadCallback,Ke.parse(Ke.vectorTile,We.layerIndex,pe.availableImages,We.actor,St)),Je(ft,ct)};"parsing"===Ke.status?Ke.reloadCallback=Ye:"done"===Ke.status&&(Ke.vectorTile?Ke.parse(Ke.vectorTile,this.layerIndex,this.availableImages,this.actor,Ye):Ye())}},s.prototype.abortTile=function(He,Je){var pe=this.loading,we=He.uid;pe&&pe[we]&&pe[we].abort&&(pe[we].abort(),delete pe[we]),Je()},s.prototype.removeTile=function(He,Je){var pe=this.loaded,we=He.uid;pe&&pe[we]&&delete pe[we],Je()};var c=e.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(He,Je){var pe=He.uid,we=He.encoding,Be=He.rawImageData,We=c&&Be instanceof c?this.getImageData(Be):Be,Ke=new e.DEMData(pe,We,we);this.loaded=this.loaded||{},this.loaded[pe]=Ke,Je(null,Ke)},l.prototype.getImageData=function(He){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(He.width,He.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=He.width,this.offscreenCanvas.height=He.height,this.offscreenCanvasContext.drawImage(He,0,0,He.width,He.height);var Je=this.offscreenCanvasContext.getImageData(-1,-1,He.width+2,He.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:Je.width,height:Je.height},Je.data)},l.prototype.removeTile=function(He){var Je=this.loaded,pe=He.uid;Je&&Je[pe]&&delete Je[pe]};var p=function He(Je,pe){var we,Be=Je&&Je.type;if("FeatureCollection"===Be)for(we=0;we<Je.features.length;we++)He(Je.features[we],pe);else if("GeometryCollection"===Be)for(we=0;we<Je.geometries.length;we++)He(Je.geometries[we],pe);else if("Feature"===Be)He(Je.geometry,pe);else if("Polygon"===Be)g(Je.coordinates,pe);else if("MultiPolygon"===Be)for(we=0;we<Je.coordinates.length;we++)g(Je.coordinates[we],pe);return Je};function g(He,Je){if(0!==He.length){u(He[0],Je);for(var pe=1;pe<He.length;pe++)u(He[pe],!Je)}}function u(He,Je){for(var pe=0,we=0,Be=He.length,We=Be-1;we<Be;We=we++)pe+=(He[we][0]-He[We][0])*(He[We][1]+He[we][1]);pe>=0!=!!Je&&He.reverse()}var x=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(He){this._feature=He,this.extent=e.EXTENT,this.type=He.type,this.properties=He.tags,"id"in He&&!isNaN(He.id)&&(this.id=parseInt(He.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var He=[],Je=0,pe=this._feature.geometry;Je<pe.length;Je+=1){var we=pe[Je];He.push([new e.Point$1(we[0],we[1])])}return He}for(var Be=[],We=0,Ke=this._feature.geometry;We<Ke.length;We+=1){for(var Ye=[],ft=0,ct=Ke[We];ft<ct.length;ft+=1){var St=ct[ft];Ye.push(new e.Point$1(St[0],St[1]))}Be.push(Ye)}return Be},f.prototype.toGeoJSON=function(He,Je,pe){return x.call(this,He,Je,pe)};var T=function(He){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=He.length,this._features=He};T.prototype.feature=function(He){return new f(this._features[He])};var _=e.vectorTile.VectorTileFeature,k=w;function w(He,Je){this.options=Je||{},this.features=He,this.length=He.length}function C(He,Je){this.id="number"==typeof He.id?He.id:void 0,this.type=He.type,this.rawGeometry=1===He.type?[He.geometry]:He.geometry,this.properties=He.tags,this.extent=Je||4096}w.prototype.feature=function(He){return new C(this.features[He],this.options.extent)},C.prototype.loadGeometry=function(){var He=this.rawGeometry;this.geometry=[];for(var Je=0;Je<He.length;Je++){for(var pe=He[Je],we=[],Be=0;Be<pe.length;Be++)we.push(new e.Point$1(pe[Be][0],pe[Be][1]));this.geometry.push(we)}return this.geometry},C.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var He=this.geometry,Je=1/0,pe=-1/0,we=1/0,Be=-1/0,We=0;We<He.length;We++)for(var Ke=He[We],Ye=0;Ye<Ke.length;Ye++){var ft=Ke[Ye];Je=Math.min(Je,ft.x),pe=Math.max(pe,ft.x),we=Math.min(we,ft.y),Be=Math.max(Be,ft.y)}return[Je,we,pe,Be]},C.prototype.toGeoJSON=_.prototype.toGeoJSON;var A=E,S=k;function E(He){var Je=new e.pbf;return function(pe,we){for(var Be in pe.layers)we.writeMessage(3,D,pe.layers[Be])}(He,Je),Je.finish()}function D(He,Je){var pe;Je.writeVarintField(15,He.version||1),Je.writeStringField(1,He.name||""),Je.writeVarintField(5,He.extent||4096);var we={keys:[],values:[],keycache:{},valuecache:{}};for(pe=0;pe<He.length;pe++)we.feature=He.feature(pe),Je.writeMessage(2,z,we);var Be=we.keys;for(pe=0;pe<Be.length;pe++)Je.writeStringField(3,Be[pe]);var We=we.values;for(pe=0;pe<We.length;pe++)Je.writeMessage(4,G,We[pe])}function z(He,Je){var pe=He.feature;void 0!==pe.id&&Je.writeVarintField(1,pe.id),Je.writeMessage(2,N,He),Je.writeVarintField(3,pe.type),Je.writeMessage(4,J,pe)}function N(He,Je){var pe=He.feature,we=He.keys,Be=He.values,We=He.keycache,Ke=He.valuecache;for(var Ye in pe.properties){var ft=We[Ye];void 0===ft&&(we.push(Ye),We[Ye]=ft=we.length-1),Je.writeVarint(ft);var ct=pe.properties[Ye],St=typeof ct;"string"!==St&&"boolean"!==St&&"number"!==St&&(ct=JSON.stringify(ct));var Ft=St+":"+ct,at=Ke[Ft];void 0===at&&(Be.push(ct),Ke[Ft]=at=Be.length-1),Je.writeVarint(at)}}function V(He,Je){return(Je<<3)+(7&He)}function X(He){return He<<1^He>>31}function J(He,Je){for(var pe=He.loadGeometry(),we=He.type,Be=0,We=0,Ke=pe.length,Ye=0;Ye<Ke;Ye++){var ft=pe[Ye],ct=1;1===we&&(ct=ft.length),Je.writeVarint(V(1,ct));for(var St=3===we?ft.length-1:ft.length,Ft=0;Ft<St;Ft++){1===Ft&&1!==we&&Je.writeVarint(V(2,St-1));var at=ft[Ft].x-Be,mt=ft[Ft].y-We;Je.writeVarint(X(at)),Je.writeVarint(X(mt)),Be+=at,We+=mt}3===we&&Je.writeVarint(V(7,1))}}function G(He,Je){var pe=typeof He;"string"===pe?Je.writeStringField(1,He):"boolean"===pe?Je.writeBooleanField(7,He):"number"===pe&&(He%1!=0?Je.writeDoubleField(3,He):He<0?Je.writeSVarintField(6,He):Je.writeVarintField(5,He))}function Z(He,Je,pe,we,Be,We){if(!(Be-we<=pe)){var Ke=we+Be>>1;(function Ye(ft,ct,St,Ft,at,mt){for(;at>Ft;){if(at-Ft>600){var qt=at-Ft+1,Et=St-Ft+1,Dt=Math.log(qt),Le=.5*Math.exp(2*Dt/3),Xe=.5*Math.sqrt(Dt*Le*(qt-Le)/qt)*(Et-qt/2<0?-1:1);Ye(ft,ct,St,Math.max(Ft,Math.floor(St-Et*Le/qt+Xe)),Math.min(at,Math.floor(St+(qt-Et)*Le/qt+Xe)),mt)}var Lt=ct[2*St+mt],Ut=Ft,$t=at;for(re(ft,ct,Ft,St),ct[2*at+mt]>Lt&&re(ft,ct,Ft,at);Ut<$t;){for(re(ft,ct,Ut,$t),Ut++,$t--;ct[2*Ut+mt]<Lt;)Ut++;for(;ct[2*$t+mt]>Lt;)$t--}ct[2*Ft+mt]===Lt?re(ft,ct,Ft,$t):re(ft,ct,++$t,at),$t<=St&&(Ft=$t+1),St<=$t&&(at=$t-1)}})(He,Je,Ke,we,Be,We%2),Z(He,Je,pe,we,Ke-1,We+1),Z(He,Je,pe,Ke+1,Be,We+1)}}function re(He,Je,pe,we){j(He,pe,we),j(Je,2*pe,2*we),j(Je,2*pe+1,2*we+1)}function j(He,Je,pe){var we=He[Je];He[Je]=He[pe],He[pe]=we}function B(He,Je,pe,we){var Be=He-pe,We=Je-we;return Be*Be+We*We}A.fromVectorTileJs=E,A.fromGeojsonVt=function(He,Je){Je=Je||{};var pe={};for(var we in He)pe[we]=new k(He[we].features,Je),pe[we].name=we,pe[we].version=Je.version,pe[we].extent=Je.extent;return E({layers:pe})},A.GeoJSONWrapper=S;var H=function(He){return He[0]},ee=function(He){return He[1]},U=function(He,Je,pe,we,Be){void 0===Je&&(Je=H),void 0===pe&&(pe=ee),void 0===we&&(we=64),void 0===Be&&(Be=Float64Array),this.nodeSize=we,this.points=He;for(var We=He.length<65536?Uint16Array:Uint32Array,Ke=this.ids=new We(He.length),Ye=this.coords=new Be(2*He.length),ft=0;ft<He.length;ft++)Ke[ft]=ft,Ye[2*ft]=Je(He[ft]),Ye[2*ft+1]=pe(He[ft]);Z(Ke,Ye,we,0,Ke.length-1,0)};U.prototype.range=function(He,Je,pe,we){return function(Be,We,Ke,Ye,ft,ct,St){for(var Ft,at,mt=[0,Be.length-1,0],qt=[];mt.length;){var Et=mt.pop(),Dt=mt.pop(),Le=mt.pop();if(Dt-Le<=St)for(var Xe=Le;Xe<=Dt;Xe++)at=We[2*Xe+1],(Ft=We[2*Xe])>=Ke&&Ft<=ft&&at>=Ye&&at<=ct&&qt.push(Be[Xe]);else{var ot=Math.floor((Le+Dt)/2);at=We[2*ot+1],(Ft=We[2*ot])>=Ke&&Ft<=ft&&at>=Ye&&at<=ct&&qt.push(Be[ot]);var dt=(Et+1)%2;(0===Et?Ke<=Ft:Ye<=at)&&(mt.push(Le),mt.push(ot-1),mt.push(dt)),(0===Et?ft>=Ft:ct>=at)&&(mt.push(ot+1),mt.push(Dt),mt.push(dt))}}return qt}(this.ids,this.coords,He,Je,pe,we,this.nodeSize)},U.prototype.within=function(He,Je,pe){return function(we,Be,We,Ke,Ye,ft){for(var ct=[0,we.length-1,0],St=[],Ft=Ye*Ye;ct.length;){var at=ct.pop(),mt=ct.pop(),qt=ct.pop();if(mt-qt<=ft)for(var Et=qt;Et<=mt;Et++)B(Be[2*Et],Be[2*Et+1],We,Ke)<=Ft&&St.push(we[Et]);else{var Dt=Math.floor((qt+mt)/2),Le=Be[2*Dt],Xe=Be[2*Dt+1];B(Le,Xe,We,Ke)<=Ft&&St.push(we[Dt]);var ot=(at+1)%2;(0===at?We-Ye<=Le:Ke-Ye<=Xe)&&(ct.push(qt),ct.push(Dt-1),ct.push(ot)),(0===at?We+Ye>=Le:Ke+Ye>=Xe)&&(ct.push(Dt+1),ct.push(mt),ct.push(ot))}}return St}(this.ids,this.coords,He,Je,pe,this.nodeSize)};var $={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(He){return He}},q=function(He){this.options=de(Object.create($),He),this.trees=new Array(this.options.maxZoom+1)};function te(He,Je,pe,we,Be){return{x:He,y:Je,zoom:1/0,id:pe,parentId:-1,numPoints:we,properties:Be}}function ne(He,Je){var pe=He.geometry.coordinates,Be=pe[1];return{x:ue(pe[0]),y:le(Be),zoom:1/0,index:Je,parentId:-1}}function se(He){return{type:"Feature",id:He.id,properties:ie(He),geometry:{type:"Point",coordinates:[(we=He.x,360*(we-.5)),(Je=He.y,pe=(180-360*Je)*Math.PI/180,360*Math.atan(Math.exp(pe))/Math.PI-90)]}};var Je,pe,we}function ie(He){var Je=He.numPoints,pe=Je>=1e4?Math.round(Je/1e3)+"k":Je>=1e3?Math.round(Je/100)/10+"k":Je;return de(de({},He.properties),{cluster:!0,cluster_id:He.id,point_count:Je,point_count_abbreviated:pe})}function ue(He){return He/360+.5}function le(He){var Je=Math.sin(He*Math.PI/180),pe=.5-.25*Math.log((1+Je)/(1-Je))/Math.PI;return pe<0?0:pe>1?1:pe}function de(He,Je){for(var pe in Je)He[pe]=Je[pe];return He}function be(He){return He.x}function _e(He){return He.y}function xe(He,Je,pe,we,Be,We){var Ke=Be-pe,Ye=We-we;if(0!==Ke||0!==Ye){var ft=((He-pe)*Ke+(Je-we)*Ye)/(Ke*Ke+Ye*Ye);ft>1?(pe=Be,we=We):ft>0&&(pe+=Ke*ft,we+=Ye*ft)}return(Ke=He-pe)*Ke+(Ye=Je-we)*Ye}function Ee(He,Je,pe,we){var Be={id:void 0===He?null:He,type:Je,geometry:pe,tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(We){var Ke=We.geometry,Ye=We.type;if("Point"===Ye||"MultiPoint"===Ye||"LineString"===Ye)he(We,Ke);else if("Polygon"===Ye||"MultiLineString"===Ye)for(var ft=0;ft<Ke.length;ft++)he(We,Ke[ft]);else if("MultiPolygon"===Ye)for(ft=0;ft<Ke.length;ft++)for(var ct=0;ct<Ke[ft].length;ct++)he(We,Ke[ft][ct])}(Be),Be}function he(He,Je){for(var pe=0;pe<Je.length;pe+=3)He.minX=Math.min(He.minX,Je[pe]),He.minY=Math.min(He.minY,Je[pe+1]),He.maxX=Math.max(He.maxX,Je[pe]),He.maxY=Math.max(He.maxY,Je[pe+1])}function me(He,Je,pe,we){if(Je.geometry){var Be=Je.geometry.coordinates,We=Je.geometry.type,Ke=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2),Ye=[],ft=Je.id;if(pe.promoteId?ft=Je.properties[pe.promoteId]:pe.generateId&&(ft=we||0),"Point"===We)Se(Be,Ye);else if("MultiPoint"===We)for(var ct=0;ct<Be.length;ct++)Se(Be[ct],Ye);else if("LineString"===We)Me(Be,Ye,Ke,!1);else if("MultiLineString"===We){if(pe.lineMetrics){for(ct=0;ct<Be.length;ct++)Me(Be[ct],Ye=[],Ke,!1),He.push(Ee(ft,"LineString",Ye,Je.properties));return}Ie(Be,Ye,Ke,!1)}else if("Polygon"===We)Ie(Be,Ye,Ke,!0);else{if("MultiPolygon"!==We){if("GeometryCollection"===We){for(ct=0;ct<Je.geometry.geometries.length;ct++)me(He,{id:ft,geometry:Je.geometry.geometries[ct],properties:Je.properties},pe,we);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ct=0;ct<Be.length;ct++){var St=[];Ie(Be[ct],St,Ke,!0),Ye.push(St)}}He.push(Ee(ft,We,Ye,Je.properties))}}function Se(He,Je){Je.push(Fe(He[0])),Je.push(Ne(He[1])),Je.push(0)}function Me(He,Je,pe,we){for(var Be,We,Ke=0,Ye=0;Ye<He.length;Ye++){var ft=Fe(He[Ye][0]),ct=Ne(He[Ye][1]);Je.push(ft),Je.push(ct),Je.push(0),Ye>0&&(Ke+=we?(Be*ct-ft*We)/2:Math.sqrt(Math.pow(ft-Be,2)+Math.pow(ct-We,2))),Be=ft,We=ct}var St=Je.length-3;Je[2]=1,function Ft(at,mt,qt,Et){for(var Dt,Le=Et,Xe=qt-mt>>1,ot=qt-mt,dt=at[mt],Lt=at[mt+1],Ut=at[qt],$t=at[qt+1],Wt=mt+3;Wt<qt;Wt+=3){var wr=xe(at[Wt],at[Wt+1],dt,Lt,Ut,$t);if(wr>Le)Dt=Wt,Le=wr;else if(wr===Le){var Rr=Math.abs(Wt-Xe);Rr<ot&&(Dt=Wt,ot=Rr)}}Le>Et&&(Dt-mt>3&&Ft(at,mt,Dt,Et),at[Dt+2]=Le,qt-Dt>3&&Ft(at,Dt,qt,Et))}(Je,0,St,pe),Je[St+2]=1,Je.size=Math.abs(Ke),Je.start=0,Je.end=Je.size}function Ie(He,Je,pe,we){for(var Be=0;Be<He.length;Be++){var We=[];Me(He[Be],We,pe,we),Je.push(We)}}function Fe(He){return He/360+.5}function Ne(He){var Je=Math.sin(He*Math.PI/180),pe=.5-.25*Math.log((1+Je)/(1-Je))/Math.PI;return pe<0?0:pe>1?1:pe}function De(He,Je,pe,we,Be,We,Ke,Ye){if(we/=Je,We>=(pe/=Je)&&Ke<we)return He;if(Ke<pe||We>=we)return null;for(var ft=[],ct=0;ct<He.length;ct++){var St=He[ct],Ft=St.geometry,at=St.type,mt=0===Be?St.minX:St.minY,qt=0===Be?St.maxX:St.maxY;if(mt>=pe&&qt<we)ft.push(St);else if(!(qt<pe||mt>=we)){var Et=[];if("Point"===at||"MultiPoint"===at)$e(Ft,Et,pe,we,Be);else if("LineString"===at)Re(Ft,Et,pe,we,Be,!1,Ye.lineMetrics);else if("MultiLineString"===at)Ue(Ft,Et,pe,we,Be,!1);else if("Polygon"===at)Ue(Ft,Et,pe,we,Be,!0);else if("MultiPolygon"===at)for(var Dt=0;Dt<Ft.length;Dt++){var Le=[];Ue(Ft[Dt],Le,pe,we,Be,!0),Le.length&&Et.push(Le)}if(Et.length){if(Ye.lineMetrics&&"LineString"===at){for(Dt=0;Dt<Et.length;Dt++)ft.push(Ee(St.id,at,Et[Dt],St.tags));continue}"LineString"!==at&&"MultiLineString"!==at||(1===Et.length?(at="LineString",Et=Et[0]):at="MultiLineString"),"Point"!==at&&"MultiPoint"!==at||(at=3===Et.length?"Point":"MultiPoint"),ft.push(Ee(St.id,at,Et,St.tags))}}}return ft.length?ft:null}function $e(He,Je,pe,we,Be){for(var We=0;We<He.length;We+=3){var Ke=He[We+Be];Ke>=pe&&Ke<=we&&(Je.push(He[We]),Je.push(He[We+1]),Je.push(He[We+2]))}}function Re(He,Je,pe,we,Be,We,Ke){for(var Ye,ft,ct=ze(He),St=0===Be?rt:ut,Ft=He.start,at=0;at<He.length-3;at+=3){var mt=He[at],qt=He[at+1],Et=He[at+2],Dt=He[at+3],Le=He[at+4],Xe=0===Be?mt:qt,ot=0===Be?Dt:Le,dt=!1;Ke&&(Ye=Math.sqrt(Math.pow(mt-Dt,2)+Math.pow(qt-Le,2))),Xe<pe?ot>pe&&(ft=St(ct,mt,qt,Dt,Le,pe),Ke&&(ct.start=Ft+Ye*ft)):Xe>we?ot<we&&(ft=St(ct,mt,qt,Dt,Le,we),Ke&&(ct.start=Ft+Ye*ft)):je(ct,mt,qt,Et),ot<pe&&Xe>=pe&&(ft=St(ct,mt,qt,Dt,Le,pe),dt=!0),ot>we&&Xe<=we&&(ft=St(ct,mt,qt,Dt,Le,we),dt=!0),!We&&dt&&(Ke&&(ct.end=Ft+Ye*ft),Je.push(ct),ct=ze(He)),Ke&&(Ft+=Ye)}var Lt=He.length-3;mt=He[Lt],qt=He[Lt+1],Et=He[Lt+2],(Xe=0===Be?mt:qt)>=pe&&Xe<=we&&je(ct,mt,qt,Et),Lt=ct.length-3,We&&Lt>=3&&(ct[Lt]!==ct[0]||ct[Lt+1]!==ct[1])&&je(ct,ct[0],ct[1],ct[2]),ct.length&&Je.push(ct)}function ze(He){var Je=[];return Je.size=He.size,Je.start=He.start,Je.end=He.end,Je}function Ue(He,Je,pe,we,Be,We){for(var Ke=0;Ke<He.length;Ke++)Re(He[Ke],Je,pe,we,Be,We,!1)}function je(He,Je,pe,we){He.push(Je),He.push(pe),He.push(we)}function rt(He,Je,pe,we,Be,We){var Ke=(We-Je)/(we-Je);return He.push(We),He.push(pe+(Be-pe)*Ke),He.push(1),Ke}function ut(He,Je,pe,we,Be,We){var Ke=(We-pe)/(Be-pe);return He.push(Je+(we-Je)*Ke),He.push(We),He.push(1),Ke}function gt(He,Je){for(var pe=[],we=0;we<He.length;we++){var Be,We=He[we],Ke=We.type;if("Point"===Ke||"MultiPoint"===Ke||"LineString"===Ke)Be=At(We.geometry,Je);else if("MultiLineString"===Ke||"Polygon"===Ke){Be=[];for(var Ye=0;Ye<We.geometry.length;Ye++)Be.push(At(We.geometry[Ye],Je))}else if("MultiPolygon"===Ke)for(Be=[],Ye=0;Ye<We.geometry.length;Ye++){for(var ft=[],ct=0;ct<We.geometry[Ye].length;ct++)ft.push(At(We.geometry[Ye][ct],Je));Be.push(ft)}pe.push(Ee(We.id,Ke,Be,We.tags))}return pe}function At(He,Je){var pe=[];pe.size=He.size,void 0!==He.start&&(pe.start=He.start,pe.end=He.end);for(var we=0;we<He.length;we+=3)pe.push(He[we]+Je,He[we+1],He[we+2]);return pe}function _t(He,Je){if(He.transformed)return He;var pe,we,Be,We=1<<He.z,Ke=He.x,Ye=He.y;for(pe=0;pe<He.features.length;pe++){var ft=He.features[pe],ct=ft.geometry,St=ft.type;if(ft.geometry=[],1===St)for(we=0;we<ct.length;we+=2)ft.geometry.push(it(ct[we],ct[we+1],Je,We,Ke,Ye));else for(we=0;we<ct.length;we++){var Ft=[];for(Be=0;Be<ct[we].length;Be+=2)Ft.push(it(ct[we][Be],ct[we][Be+1],Je,We,Ke,Ye));ft.geometry.push(Ft)}}return He.transformed=!0,He}function it(He,Je,pe,we,Be,We){return[Math.round(pe*(He*we-Be)),Math.round(pe*(Je*we-We))]}function et(He,Je,pe,we,Be){for(var We=Je===Be.maxZoom?0:Be.tolerance/((1<<Je)*Be.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:pe,y:we,z:Je,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<He.length;Ye++){Ke.numFeatures++,wt(Ke,He[Ye],We,Be);var ft=He[Ye].minX,ct=He[Ye].minY,St=He[Ye].maxX,Ft=He[Ye].maxY;ft<Ke.minX&&(Ke.minX=ft),ct<Ke.minY&&(Ke.minY=ct),St>Ke.maxX&&(Ke.maxX=St),Ft>Ke.maxY&&(Ke.maxY=Ft)}return Ke}function wt(He,Je,pe,we){var Be=Je.geometry,We=Je.type,Ke=[];if("Point"===We||"MultiPoint"===We)for(var Ye=0;Ye<Be.length;Ye+=3)Ke.push(Be[Ye]),Ke.push(Be[Ye+1]),He.numPoints++,He.numSimplified++;else if("LineString"===We)Gt(Ke,Be,He,pe,!1,!1);else if("MultiLineString"===We||"Polygon"===We)for(Ye=0;Ye<Be.length;Ye++)Gt(Ke,Be[Ye],He,pe,"Polygon"===We,0===Ye);else if("MultiPolygon"===We)for(var ft=0;ft<Be.length;ft++){var ct=Be[ft];for(Ye=0;Ye<ct.length;Ye++)Gt(Ke,ct[Ye],He,pe,!0,0===Ye)}if(Ke.length){var St=Je.tags||null;if("LineString"===We&&we.lineMetrics){for(var Ft in St={},Je.tags)St[Ft]=Je.tags[Ft];St.mapbox_clip_start=Be.start/Be.size,St.mapbox_clip_end=Be.end/Be.size}var at={geometry:Ke,type:"Polygon"===We||"MultiPolygon"===We?3:"LineString"===We||"MultiLineString"===We?2:1,tags:St};null!==Je.id&&(at.id=Je.id),He.features.push(at)}}function Gt(He,Je,pe,we,Be,We){var Ke=we*we;if(we>0&&Je.size<(Be?Ke:we))pe.numPoints+=Je.length/3;else{for(var Ye=[],ft=0;ft<Je.length;ft+=3)(0===we||Je[ft+2]>Ke)&&(pe.numSimplified++,Ye.push(Je[ft]),Ye.push(Je[ft+1])),pe.numPoints++;Be&&function(ct,St){for(var Ft=0,at=0,mt=ct.length,qt=mt-2;at<mt;qt=at,at+=2)Ft+=(ct[at]-ct[qt])*(ct[at+1]+ct[qt+1]);if(Ft>0===St)for(at=0,mt=ct.length;at<mt/2;at+=2){var Et=ct[at],Dt=ct[at+1];ct[at]=ct[mt-2-at],ct[at+1]=ct[mt-1-at],ct[mt-2-at]=Et,ct[mt-1-at]=Dt}}(Ye,We),He.push(Ye)}}function Kt(He,Je){var pe=(Je=this.options=function(Be,We){for(var Ke in We)Be[Ke]=We[Ke];return Be}(Object.create(this.options),Je)).debug;if(pe&&console.time("preprocess data"),Je.maxZoom<0||Je.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Je.promoteId&&Je.generateId)throw new Error("promoteId and generateId cannot be used together.");var Be,We,Ke,Ye,ft,ct,we=function(Be,We){var Ke=[];if("FeatureCollection"===Be.type)for(var Ye=0;Ye<Be.features.length;Ye++)me(Ke,Be.features[Ye],We,Ye);else me(Ke,"Feature"===Be.type?Be:{geometry:Be},We);return Ke}(He,Je);this.tiles={},this.tileCoords=[],pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Je.indexMaxZoom,Je.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Be=we,We=Je,Ke=We.buffer/We.extent,Ye=Be,ft=De(Be,1,-1-Ke,Ke,0,-1,2,We),ct=De(Be,1,1-Ke,2+Ke,0,-1,2,We),(ft||ct)&&(Ye=De(Be,1,-Ke,1+Ke,0,-1,2,We)||[],ft&&(Ye=gt(ft,1).concat(Ye)),ct&&(Ye=Ye.concat(gt(ct,-1)))),we=Ye).length&&this.splitTile(we,0,0,0),pe&&(we.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function cr(He,Je,pe){return 32*((1<<He)*pe+Je)+He}function ar(He,Je){var pe=He.tileID.canonical;if(!this._geoJSONIndex)return Je(null,null);var we=this._geoJSONIndex.getTile(pe.z,pe.x,pe.y);if(!we)return Je(null,null);var Be=new T(we.features),We=A(Be);0===We.byteOffset&&We.byteLength===We.buffer.byteLength||(We=new Uint8Array(We)),Je(null,{vectorTile:Be,rawData:We.buffer})}q.prototype.load=function(He){var Je=this.options,pe=Je.log,we=Je.minZoom,Be=Je.maxZoom,We=Je.nodeSize;pe&&console.time("total time");var Ke="prepare "+He.length+" points";pe&&console.time(Ke),this.points=He;for(var Ye=[],ft=0;ft<He.length;ft++)He[ft].geometry&&Ye.push(ne(He[ft],ft));this.trees[Be+1]=new U(Ye,be,_e,We,Float32Array),pe&&console.timeEnd(Ke);for(var ct=Be;ct>=we;ct--){var St=+Date.now();Ye=this._cluster(Ye,ct),this.trees[ct]=new U(Ye,be,_e,We,Float32Array),pe&&console.log("z%d: %d clusters in %dms",ct,Ye.length,+Date.now()-St)}return pe&&console.timeEnd("total time"),this},q.prototype.getClusters=function(He,Je){var pe=((He[0]+180)%360+360)%360-180,we=Math.max(-90,Math.min(90,He[1])),Be=180===He[2]?180:((He[2]+180)%360+360)%360-180,We=Math.max(-90,Math.min(90,He[3]));if(He[2]-He[0]>=360)pe=-180,Be=180;else if(pe>Be){var Ke=this.getClusters([pe,we,180,We],Je),Ye=this.getClusters([-180,we,Be,We],Je);return Ke.concat(Ye)}for(var ft=this.trees[this._limitZoom(Je)],ct=[],St=0,Ft=ft.range(ue(pe),le(We),ue(Be),le(we));St<Ft.length;St+=1){var mt=ft.points[Ft[St]];ct.push(mt.numPoints?se(mt):this.points[mt.index])}return ct},q.prototype.getChildren=function(He){var Je=this._getOriginId(He),pe=this._getOriginZoom(He),we="No cluster with the specified id.",Be=this.trees[pe];if(!Be)throw new Error(we);var We=Be.points[Je];if(!We)throw new Error(we);for(var Ke=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),Ye=[],ft=0,ct=Be.within(We.x,We.y,Ke);ft<ct.length;ft+=1){var Ft=Be.points[ct[ft]];Ft.parentId===He&&Ye.push(Ft.numPoints?se(Ft):this.points[Ft.index])}if(0===Ye.length)throw new Error(we);return Ye},q.prototype.getLeaves=function(He,Je,pe){var we=[];return this._appendLeaves(we,He,Je=Je||10,pe=pe||0,0),we},q.prototype.getTile=function(He,Je,pe){var we=this.trees[this._limitZoom(He)],Be=Math.pow(2,He),We=this.options,Ye=We.radius/We.extent,ft=(pe-Ye)/Be,ct=(pe+1+Ye)/Be,St={features:[]};return this._addTileFeatures(we.range((Je-Ye)/Be,ft,(Je+1+Ye)/Be,ct),we.points,Je,pe,Be,St),0===Je&&this._addTileFeatures(we.range(1-Ye/Be,ft,1,ct),we.points,Be,pe,Be,St),Je===Be-1&&this._addTileFeatures(we.range(0,ft,Ye/Be,ct),we.points,-1,pe,Be,St),St.features.length?St:null},q.prototype.getClusterExpansionZoom=function(He){for(var Je=this._getOriginZoom(He)-1;Je<=this.options.maxZoom;){var pe=this.getChildren(He);if(Je++,1!==pe.length)break;He=pe[0].properties.cluster_id}return Je},q.prototype._appendLeaves=function(He,Je,pe,we,Be){for(var We=0,Ke=this.getChildren(Je);We<Ke.length;We+=1){var Ye=Ke[We],ft=Ye.properties;if(ft&&ft.cluster?Be+ft.point_count<=we?Be+=ft.point_count:Be=this._appendLeaves(He,ft.cluster_id,pe,we,Be):Be<we?Be++:He.push(Ye),He.length===pe)break}return Be},q.prototype._addTileFeatures=function(He,Je,pe,we,Be,We){for(var Ke=0,Ye=He;Ke<Ye.length;Ke+=1){var ft=Je[Ye[Ke]],ct=ft.numPoints,St={type:1,geometry:[[Math.round(this.options.extent*(ft.x*Be-pe)),Math.round(this.options.extent*(ft.y*Be-we))]],tags:ct?ie(ft):this.points[ft.index].properties},Ft=void 0;ct?Ft=ft.id:this.options.generateId?Ft=ft.index:this.points[ft.index].id&&(Ft=this.points[ft.index].id),void 0!==Ft&&(St.id=Ft),We.features.push(St)}},q.prototype._limitZoom=function(He){return Math.max(this.options.minZoom,Math.min(He,this.options.maxZoom+1))},q.prototype._cluster=function(He,Je){for(var pe=[],we=this.options,Ke=we.reduce,Ye=we.radius/(we.extent*Math.pow(2,Je)),ft=0;ft<He.length;ft++){var ct=He[ft];if(!(ct.zoom<=Je)){ct.zoom=Je;for(var St=this.trees[Je+1],Ft=St.within(ct.x,ct.y,Ye),at=ct.numPoints||1,mt=ct.x*at,qt=ct.y*at,Et=Ke&&at>1?this._map(ct,!0):null,Dt=(ft<<5)+(Je+1)+this.points.length,Le=0,Xe=Ft;Le<Xe.length;Le+=1){var dt=St.points[Xe[Le]];if(!(dt.zoom<=Je)){dt.zoom=Je;var Lt=dt.numPoints||1;mt+=dt.x*Lt,qt+=dt.y*Lt,at+=Lt,dt.parentId=Dt,Ke&&(Et||(Et=this._map(ct,!0)),Ke(Et,this._map(dt)))}}1===at?pe.push(ct):(ct.parentId=Dt,pe.push(te(mt/at,qt/at,Dt,at,Et)))}}return pe},q.prototype._getOriginId=function(He){return He-this.points.length>>5},q.prototype._getOriginZoom=function(He){return(He-this.points.length)%32},q.prototype._map=function(He,Je){if(He.numPoints)return Je?de({},He.properties):He.properties;var pe=this.points[He.index].properties,we=this.options.map(pe);return Je&&we===pe?de({},we):we},Kt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Kt.prototype.splitTile=function(He,Je,pe,we,Be,We,Ke){for(var Ye=[He,Je,pe,we],ft=this.options,ct=ft.debug;Ye.length;){we=Ye.pop(),pe=Ye.pop(),Je=Ye.pop(),He=Ye.pop();var St=1<<Je,Ft=cr(Je,pe,we),at=this.tiles[Ft];if(!at&&(ct>1&&console.time("creation"),at=this.tiles[Ft]=et(He,Je,pe,we,ft),this.tileCoords.push({z:Je,x:pe,y:we}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Je,pe,we,at.numFeatures,at.numPoints,at.numSimplified),console.timeEnd("creation"));var mt="z"+Je;this.stats[mt]=(this.stats[mt]||0)+1,this.total++}if(at.source=He,Be){if(Je===ft.maxZoom||Je===Be)continue;var qt=1<<Be-Je;if(pe!==Math.floor(We/qt)||we!==Math.floor(Ke/qt))continue}else if(Je===ft.indexMaxZoom||at.numPoints<=ft.indexMaxPoints)continue;if(at.source=null,0!==He.length){ct>1&&console.time("clipping");var Et,Dt,Le,Xe,ot,dt,Lt=.5*ft.buffer/ft.extent,Ut=.5-Lt,$t=.5+Lt,Wt=1+Lt;Et=Dt=Le=Xe=null,ot=De(He,St,pe-Lt,pe+$t,0,at.minX,at.maxX,ft),dt=De(He,St,pe+Ut,pe+Wt,0,at.minX,at.maxX,ft),He=null,ot&&(Et=De(ot,St,we-Lt,we+$t,1,at.minY,at.maxY,ft),Dt=De(ot,St,we+Ut,we+Wt,1,at.minY,at.maxY,ft),ot=null),dt&&(Le=De(dt,St,we-Lt,we+$t,1,at.minY,at.maxY,ft),Xe=De(dt,St,we+Ut,we+Wt,1,at.minY,at.maxY,ft),dt=null),ct>1&&console.timeEnd("clipping"),Ye.push(Et||[],Je+1,2*pe,2*we),Ye.push(Dt||[],Je+1,2*pe,2*we+1),Ye.push(Le||[],Je+1,2*pe+1,2*we),Ye.push(Xe||[],Je+1,2*pe+1,2*we+1)}}},Kt.prototype.getTile=function(He,Je,pe){var we=this.options,Be=we.extent,We=we.debug;if(He<0||He>24)return null;var Ke=1<<He,Ye=cr(He,Je=(Je%Ke+Ke)%Ke,pe);if(this.tiles[Ye])return _t(this.tiles[Ye],Be);We>1&&console.log("drilling down to z%d-%d-%d",He,Je,pe);for(var ft,ct=He,St=Je,Ft=pe;!ft&&ct>0;)ct--,St=Math.floor(St/2),Ft=Math.floor(Ft/2),ft=this.tiles[cr(ct,St,Ft)];return ft&&ft.source?(We>1&&console.log("found parent tile z%d-%d-%d",ct,St,Ft),We>1&&console.time("drilling down"),this.splitTile(ft.source,ct,St,Ft,He,Je,pe),We>1&&console.timeEnd("drilling down"),this.tiles[Ye]?_t(this.tiles[Ye],Be):null):null};var hr=function(He){function Je(pe,we,Be,We){He.call(this,pe,we,Be,ar),We&&(this.loadGeoJSON=We)}return He&&(Je.__proto__=He),(Je.prototype=Object.create(He&&He.prototype)).constructor=Je,Je.prototype.loadData=function(pe,we){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=we,this._pendingLoadDataParams=pe,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Je.prototype._loadData=function(){var pe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var we=this._pendingCallback,Be=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var We=!!(Be&&Be.request&&Be.request.collectResourceTiming)&&new e.RequestPerformance(Be.request);this.loadGeoJSON(Be,function(Ke,Ye){if(Ke||!Ye)return we(Ke);if("object"!=typeof Ye)return we(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));p(Ye,!0);try{pe._geoJSONIndex=Be.cluster?new q(function(St){var Ft=St.superclusterOptions,at=St.clusterProperties;if(!at||!Ft)return Ft;for(var mt={},qt={},Et={accumulated:null,zoom:0},Dt={properties:null},Le=Object.keys(at),Xe=0,ot=Le;Xe<ot.length;Xe+=1){var dt=ot[Xe],Lt=at[dt],Ut=Lt[0],Wt=e.createExpression(Lt[1]),wr=e.createExpression("string"==typeof Ut?[Ut,["accumulated"],["get",dt]]:Ut);mt[dt]=Wt.value,qt[dt]=wr.value}return Ft.map=function(Rr){Dt.properties=Rr;for(var br={},nr=0,lr=Le;nr<lr.length;nr+=1){var sr=lr[nr];br[sr]=mt[sr].evaluate(Et,Dt)}return br},Ft.reduce=function(Rr,br){Dt.properties=br;for(var nr=0,lr=Le;nr<lr.length;nr+=1){var sr=lr[nr];Et.accumulated=Rr[sr],Rr[sr]=qt[sr].evaluate(Et,Dt)}},Ft}(Be)).load(Ye.features):new Kt(St=Ye,Be.geojsonVtOptions)}catch(St){return we(St)}var St;pe.loaded={};var ft={};if(We){var ct=We.finish();ct&&(ft.resourceTiming={},ft.resourceTiming[Be.source]=JSON.parse(JSON.stringify(ct)))}we(null,ft)})}},Je.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Je.prototype.reloadTile=function(pe,we){var Be=this.loaded;return Be&&Be[pe.uid]?He.prototype.reloadTile.call(this,pe,we):this.loadTile(pe,we)},Je.prototype.loadGeoJSON=function(pe,we){if(pe.request)e.getJSON(pe.request,we);else{if("string"!=typeof pe.data)return we(new Error("Input data given to '"+pe.source+"' is not a valid GeoJSON object."));try{return we(null,JSON.parse(pe.data))}catch{return we(new Error("Input data given to '"+pe.source+"' is not a valid GeoJSON object."))}}},Je.prototype.removeSource=function(pe,we){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),we()},Je.prototype.getClusterExpansionZoom=function(pe,we){try{we(null,this._geoJSONIndex.getClusterExpansionZoom(pe.clusterId))}catch(Be){we(Be)}},Je.prototype.getClusterChildren=function(pe,we){try{we(null,this._geoJSONIndex.getChildren(pe.clusterId))}catch(Be){we(Be)}},Je.prototype.getClusterLeaves=function(pe,we){try{we(null,this._geoJSONIndex.getLeaves(pe.clusterId,pe.limit,pe.offset))}catch(Be){we(Be)}},Je}(s),Xt=function(He){var Je=this;this.self=He,this.actor=new e.Actor(He,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:s,geojson:hr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(pe,we){if(Je.workerSourceTypes[pe])throw new Error('Worker source with name "'+pe+'" already registered.');Je.workerSourceTypes[pe]=we},this.self.registerRTLTextPlugin=function(pe){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=pe.applyArabicShaping,e.plugin.processBidirectionalText=pe.processBidirectionalText,e.plugin.processStyledBidirectionalText=pe.processStyledBidirectionalText}};return Xt.prototype.setReferrer=function(He,Je){this.referrer=Je},Xt.prototype.setImages=function(He,Je,pe){for(var we in this.availableImages[He]=Je,this.workerSources[He]){var Be=this.workerSources[He][we];for(var We in Be)Be[We].availableImages=Je}pe()},Xt.prototype.setLayers=function(He,Je,pe){this.getLayerIndex(He).replace(Je),pe()},Xt.prototype.updateLayers=function(He,Je,pe){this.getLayerIndex(He).update(Je.layers,Je.removedIds),pe()},Xt.prototype.loadTile=function(He,Je,pe){this.getWorkerSource(He,Je.type,Je.source).loadTile(Je,pe)},Xt.prototype.loadDEMTile=function(He,Je,pe){this.getDEMWorkerSource(He,Je.source).loadTile(Je,pe)},Xt.prototype.reloadTile=function(He,Je,pe){this.getWorkerSource(He,Je.type,Je.source).reloadTile(Je,pe)},Xt.prototype.abortTile=function(He,Je,pe){this.getWorkerSource(He,Je.type,Je.source).abortTile(Je,pe)},Xt.prototype.removeTile=function(He,Je,pe){this.getWorkerSource(He,Je.type,Je.source).removeTile(Je,pe)},Xt.prototype.removeDEMTile=function(He,Je){this.getDEMWorkerSource(He,Je.source).removeTile(Je)},Xt.prototype.removeSource=function(He,Je,pe){if(this.workerSources[He]&&this.workerSources[He][Je.type]&&this.workerSources[He][Je.type][Je.source]){var we=this.workerSources[He][Je.type][Je.source];delete this.workerSources[He][Je.type][Je.source],void 0!==we.removeSource?we.removeSource(Je,pe):pe()}},Xt.prototype.loadWorkerSource=function(He,Je,pe){try{this.self.importScripts(Je.url),pe()}catch(we){pe(we.toString())}},Xt.prototype.syncRTLPluginState=function(He,Je,pe){try{e.plugin.setState(Je);var we=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=we){this.self.importScripts(we);var Be=e.plugin.isParsed();pe(Be?void 0:new Error("RTL Text Plugin failed to import scripts from "+we),Be)}}catch(We){pe(We.toString())}},Xt.prototype.getAvailableImages=function(He){var Je=this.availableImages[He];return Je||(Je=[]),Je},Xt.prototype.getLayerIndex=function(He){var Je=this.layerIndexes[He];return Je||(Je=this.layerIndexes[He]=new o),Je},Xt.prototype.getWorkerSource=function(He,Je,pe){var we=this;return this.workerSources[He]||(this.workerSources[He]={}),this.workerSources[He][Je]||(this.workerSources[He][Je]={}),this.workerSources[He][Je][pe]||(this.workerSources[He][Je][pe]=new this.workerSourceTypes[Je]({send:function(We,Ke,Ye){we.actor.send(We,Ke,Ye,He)}},this.getLayerIndex(He),this.getAvailableImages(He))),this.workerSources[He][Je][pe]},Xt.prototype.getDEMWorkerSource=function(He,Je){return this.demWorkerSources[He]||(this.demWorkerSources[He]={}),this.demWorkerSources[He][Je]||(this.demWorkerSources[He][Je]=new l),this.demWorkerSources[He][Je]},Xt.prototype.enforceCacheSizeLimit=function(He,Je){e.enforceCacheSizeLimit(Je)},typeof WorkerGlobalScope<"u"&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Xt(e.window)),Xt}),h(0,function(e){var n=e.createCommonjsModule(function(L){function R(ae){return!F(ae)}function F(ae){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var fe,ve,Ae=new Blob([""],{type:"text/javascript"}),Pe=URL.createObjectURL(Ae);try{ve=new Worker(Pe),fe=!0}catch{fe=!1}return ve&&ve.terminate(),URL.revokeObjectURL(Pe),fe}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var fe=document.createElement("canvas");fe.width=fe.height=1;var ve=fe.getContext("2d");if(!ve)return!1;var Ae=ve.getImageData(0,0,1,1);return Ae&&Ae.width===fe.width}()?(void 0===Y[fe=ae&&ae.failIfMajorPerformanceCaveat]&&(Y[fe]=function(ve){var Ge,Qe,st,Ae=(Ge=ve,Qe=document.createElement("canvas"),(st=Object.create(R.webGLContextAttributes)).failIfMajorPerformanceCaveat=Ge,Qe.probablySupportsContext?Qe.probablySupportsContext("webgl",st)||Qe.probablySupportsContext("experimental-webgl",st):Qe.supportsContext?Qe.supportsContext("webgl",st)||Qe.supportsContext("experimental-webgl",st):Qe.getContext("webgl",st)||Qe.getContext("experimental-webgl",st));if(!Ae)return!1;var Pe=Ae.createShader(Ae.VERTEX_SHADER);return!(!Pe||Ae.isContextLost())&&(Ae.shaderSource(Pe,"void main() {}"),Ae.compileShader(Pe),!0===Ae.getShaderParameter(Pe,Ae.COMPILE_STATUS))}(fe)),Y[fe]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var fe}L.exports?L.exports=R:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=R,window.mapboxgl.notSupportedReason=F);var Y={};R.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),r={create:function(L,R,F){var Y=e.window.document.createElement(L);return void 0!==R&&(Y.className=R),F&&F.appendChild(Y),Y},createNS:function(L,R){return e.window.document.createElementNS(L,R)}},o=e.window.document.documentElement.style;function t(L){if(!o)return L[0];for(var R=0;R<L.length;R++)if(L[R]in o)return L[R];return L[0]}var d,a=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);r.disableDrag=function(){o&&a&&(d=o[a],o[a]="none")},r.enableDrag=function(){o&&a&&(o[a]=d)};var i=t(["transform","WebkitTransform"]);r.setTransform=function(L,R){L.style[i]=R};var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});e.window.addEventListener("test",c,c),e.window.removeEventListener("test",c,c)}catch{s=!1}r.addEventListener=function(L,R,F,Y){void 0===Y&&(Y={}),L.addEventListener(R,F,"passive"in Y&&s?Y:Y.capture)},r.removeEventListener=function(L,R,F,Y){void 0===Y&&(Y={}),L.removeEventListener(R,F,"passive"in Y&&s?Y:Y.capture)};var l=function(L){L.preventDefault(),L.stopPropagation(),e.window.removeEventListener("click",l,!0)};function p(L){var R=L.userImage;return!!(R&&R.render&&R.render())&&(L.data.replace(new Uint8Array(R.data.buffer)),!0)}r.suppressClick=function(){e.window.addEventListener("click",l,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",l,!0)},0)},r.mousePos=function(L,R){var F=L.getBoundingClientRect();return new e.Point(R.clientX-F.left-L.clientLeft,R.clientY-F.top-L.clientTop)},r.touchPos=function(L,R){for(var F=L.getBoundingClientRect(),Y=[],ae=0;ae<R.length;ae++)Y.push(new e.Point(R[ae].clientX-F.left-L.clientLeft,R[ae].clientY-F.top-L.clientTop));return Y},r.mouseButton=function(L){return void 0!==e.window.InstallTrigger&&2===L.button&&L.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:L.button},r.remove=function(L){L.parentNode&&L.parentNode.removeChild(L)};var g=function(L){function R(){L.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.isLoaded=function(){return this.loaded},R.prototype.setLoaded=function(F){if(this.loaded!==F&&(this.loaded=F,F)){for(var Y=0,ae=this.requestors;Y<ae.length;Y+=1){var fe=ae[Y];this._notify(fe.ids,fe.callback)}this.requestors=[]}},R.prototype.getImage=function(F){return this.images[F]},R.prototype.addImage=function(F,Y){this._validate(F,Y)&&(this.images[F]=Y)},R.prototype._validate=function(F,Y){var ae=!0;return this._validateStretch(Y.stretchX,Y.data&&Y.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchX" value'))),ae=!1),this._validateStretch(Y.stretchY,Y.data&&Y.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchY" value'))),ae=!1),this._validateContent(Y.content,Y)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "content" value'))),ae=!1),ae},R.prototype._validateStretch=function(F,Y){if(!F)return!0;for(var ae=0,fe=0,ve=F;fe<ve.length;fe+=1){var Ae=ve[fe];if(Ae[0]<ae||Ae[1]<Ae[0]||Y<Ae[1])return!1;ae=Ae[1]}return!0},R.prototype._validateContent=function(F,Y){return!(F&&(4!==F.length||F[0]<0||Y.data.width<F[0]||F[1]<0||Y.data.height<F[1]||F[2]<0||Y.data.width<F[2]||F[3]<0||Y.data.height<F[3]||F[2]<F[0]||F[3]<F[1]))},R.prototype.updateImage=function(F,Y){Y.version=this.images[F].version+1,this.images[F]=Y,this.updatedImages[F]=!0},R.prototype.removeImage=function(F){var Y=this.images[F];delete this.images[F],delete this.patterns[F],Y.userImage&&Y.userImage.onRemove&&Y.userImage.onRemove()},R.prototype.listImages=function(){return Object.keys(this.images)},R.prototype.getImages=function(F,Y){var ae=!0;if(!this.isLoaded())for(var fe=0,ve=F;fe<ve.length;fe+=1)this.images[ve[fe]]||(ae=!1);this.isLoaded()||ae?this._notify(F,Y):this.requestors.push({ids:F,callback:Y})},R.prototype._notify=function(F,Y){for(var ae={},fe=0,ve=F;fe<ve.length;fe+=1){var Ae=ve[fe];this.images[Ae]||this.fire(new e.Event("styleimagemissing",{id:Ae}));var Pe=this.images[Ae];Pe?ae[Ae]={data:Pe.data.clone(),pixelRatio:Pe.pixelRatio,sdf:Pe.sdf,version:Pe.version,stretchX:Pe.stretchX,stretchY:Pe.stretchY,content:Pe.content,hasRenderCallback:Boolean(Pe.userImage&&Pe.userImage.render)}:e.warnOnce('Image "'+Ae+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}Y(null,ae)},R.prototype.getPixelSize=function(){var F=this.atlasImage;return{width:F.width,height:F.height}},R.prototype.getPattern=function(F){var Y=this.patterns[F],ae=this.getImage(F);if(!ae)return null;if(Y&&Y.position.version===ae.version)return Y.position;if(Y)Y.position.version=ae.version;else{var fe={w:ae.data.width+2,h:ae.data.height+2,x:0,y:0},ve=new e.ImagePosition(fe,ae);this.patterns[F]={bin:fe,position:ve}}return this._updatePatternAtlas(),this.patterns[F].position},R.prototype.bind=function(F){var Y=F.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(F,this.atlasImage,Y.RGBA),this.atlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE)},R.prototype._updatePatternAtlas=function(){var F=[];for(var Y in this.patterns)F.push(this.patterns[Y].bin);var ae=e.potpack(F),fe=ae.w,ve=ae.h,Ae=this.atlasImage;for(var Pe in Ae.resize({width:fe||1,height:ve||1}),this.patterns){var Ge=this.patterns[Pe].bin,Qe=Ge.x+1,st=Ge.y+1,Mt=this.images[Pe].data,It=Mt.width,Ct=Mt.height;e.RGBAImage.copy(Mt,Ae,{x:0,y:0},{x:Qe,y:st},{width:It,height:Ct}),e.RGBAImage.copy(Mt,Ae,{x:0,y:Ct-1},{x:Qe,y:st-1},{width:It,height:1}),e.RGBAImage.copy(Mt,Ae,{x:0,y:0},{x:Qe,y:st+Ct},{width:It,height:1}),e.RGBAImage.copy(Mt,Ae,{x:It-1,y:0},{x:Qe-1,y:st},{width:1,height:Ct}),e.RGBAImage.copy(Mt,Ae,{x:0,y:0},{x:Qe+It,y:st},{width:1,height:Ct})}this.dirty=!0},R.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},R.prototype.dispatchRenderCallbacks=function(F){for(var Y=0,ae=F;Y<ae.length;Y+=1){var fe=ae[Y];if(!this.callbackDispatchedThisFrame[fe]){this.callbackDispatchedThisFrame[fe]=!0;var ve=this.images[fe];p(ve)&&this.updateImage(fe,ve)}}},R}(e.Evented),u=T,x=T,f=1e20;function T(L,R,F,Y,ae,fe){this.fontSize=L||24,this.buffer=void 0===R?3:R,this.cutoff=Y||.25,this.fontFamily=ae||"sans-serif",this.fontWeight=fe||"normal",this.radius=F||8;var ve=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ve,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ve*ve),this.gridInner=new Float64Array(ve*ve),this.f=new Float64Array(ve),this.d=new Float64Array(ve),this.z=new Float64Array(ve+1),this.v=new Int16Array(ve),this.middle=Math.round(ve/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function _(L,R,F,Y,ae,fe,ve){for(var Ae=0;Ae<R;Ae++){for(var Pe=0;Pe<F;Pe++)Y[Pe]=L[Pe*R+Ae];for(k(Y,ae,fe,ve,F),Pe=0;Pe<F;Pe++)L[Pe*R+Ae]=ae[Pe]}for(Pe=0;Pe<F;Pe++){for(Ae=0;Ae<R;Ae++)Y[Ae]=L[Pe*R+Ae];for(k(Y,ae,fe,ve,R),Ae=0;Ae<R;Ae++)L[Pe*R+Ae]=Math.sqrt(ae[Ae])}}function k(L,R,F,Y,ae){F[0]=0,Y[0]=-f,Y[1]=+f;for(var fe=1,ve=0;fe<ae;fe++){for(var Ae=(L[fe]+fe*fe-(L[F[ve]]+F[ve]*F[ve]))/(2*fe-2*F[ve]);Ae<=Y[ve];)ve--,Ae=(L[fe]+fe*fe-(L[F[ve]]+F[ve]*F[ve]))/(2*fe-2*F[ve]);F[++ve]=fe,Y[ve]=Ae,Y[ve+1]=+f}for(fe=0,ve=0;fe<ae;fe++){for(;Y[ve+1]<fe;)ve++;R[fe]=(fe-F[ve])*(fe-F[ve])+L[F[ve]]}}T.prototype.draw=function(L){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(L,this.buffer,this.middle);for(var R=this.ctx.getImageData(0,0,this.size,this.size),F=new Uint8ClampedArray(this.size*this.size),Y=0;Y<this.size*this.size;Y++){var ae=R.data[4*Y+3]/255;this.gridOuter[Y]=1===ae?0:0===ae?f:Math.pow(Math.max(0,.5-ae),2),this.gridInner[Y]=1===ae?f:0===ae?0:Math.pow(Math.max(0,ae-.5),2)}for(_(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),_(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Y=0;Y<this.size*this.size;Y++)F[Y]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[Y]-this.gridInner[Y])/this.radius+this.cutoff))));return F},u.default=x;var w=function(L,R){this.requestManager=L,this.localIdeographFontFamily=R,this.entries={}};w.prototype.setURL=function(L){this.url=L},w.prototype.getGlyphs=function(L,R){var F=this,Y=[];for(var ae in L)for(var fe=0,ve=L[ae];fe<ve.length;fe+=1)Y.push({stack:ae,id:ve[fe]});e.asyncAll(Y,function(Pe,Ge){var Qe=Pe.stack,st=Pe.id,Mt=F.entries[Qe];Mt||(Mt=F.entries[Qe]={glyphs:{},requests:{},ranges:{}});var It=Mt.glyphs[st];if(void 0===It){if(It=F._tinySDF(Mt,Qe,st))return Mt.glyphs[st]=It,void Ge(null,{stack:Qe,id:st,glyph:It});var Ct=Math.floor(st/256);if(256*Ct>65535)Ge(new Error("glyphs > 65535 not supported"));else if(Mt.ranges[Ct])Ge(null,{stack:Qe,id:st,glyph:It});else{var Pt=Mt.requests[Ct];Pt||(Pt=Mt.requests[Ct]=[],w.loadGlyphRange(Qe,Ct,F.url,F.requestManager,function(kt,Vt){if(Vt){for(var Nt in Vt)F._doesCharSupportLocalGlyph(+Nt)||(Mt.glyphs[+Nt]=Vt[+Nt]);Mt.ranges[Ct]=!0}for(var Yt=0,fr=Pt;Yt<fr.length;Yt+=1)(0,fr[Yt])(kt,Vt);delete Mt.requests[Ct]})),Pt.push(function(kt,Vt){kt?Ge(kt):Vt&&Ge(null,{stack:Qe,id:st,glyph:Vt[st]||null})})}}else Ge(null,{stack:Qe,id:st,glyph:It})},function(Pe,Ge){if(Pe)R(Pe);else if(Ge){for(var Qe={},st=0,Mt=Ge;st<Mt.length;st+=1){var It=Mt[st],Ct=It.stack,Pt=It.id,kt=It.glyph;(Qe[Ct]||(Qe[Ct]={}))[Pt]=kt&&{id:kt.id,bitmap:kt.bitmap.clone(),metrics:kt.metrics}}R(null,Qe)}})},w.prototype._doesCharSupportLocalGlyph=function(L){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](L)||e.isChar["Hangul Syllables"](L)||e.isChar.Hiragana(L)||e.isChar.Katakana(L))},w.prototype._tinySDF=function(L,R,F){var Y=this.localIdeographFontFamily;if(Y&&this._doesCharSupportLocalGlyph(F)){var ae=L.tinySDF;if(!ae){var fe="400";/bold/i.test(R)?fe="900":/medium/i.test(R)?fe="500":/light/i.test(R)&&(fe="200"),ae=L.tinySDF=new w.TinySDF(24,3,8,.25,Y,fe)}return{id:F,bitmap:new e.AlphaImage({width:30,height:30},ae.draw(String.fromCharCode(F))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},w.loadGlyphRange=function(L,R,F,Y,ae){var fe=256*R,ve=fe+255,Ae=Y.transformRequest(Y.normalizeGlyphsURL(F).replace("{fontstack}",L).replace("{range}",fe+"-"+ve),e.ResourceType.Glyphs);e.getArrayBuffer(Ae,function(Pe,Ge){if(Pe)ae(Pe);else if(Ge){for(var Qe={},st=0,Mt=e.parseGlyphPBF(Ge);st<Mt.length;st+=1){var It=Mt[st];Qe[It.id]=It}ae(null,Qe)}})},w.TinySDF=u;var C=function(){this.specification=e.styleSpec.light.position};C.prototype.possiblyEvaluate=function(L,R){return e.sphericalToCartesian(L.expression.evaluate(R))},C.prototype.interpolate=function(L,R,F){return{x:e.number(L.x,R.x,F),y:e.number(L.y,R.y,F),z:e.number(L.z,R.z,F)}};var A=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new C,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),O=function(L){function R(F){L.call(this),this._transitionable=new e.Transitionable(A),this.setLight(F),this._transitioning=this._transitionable.untransitioned()}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getLight=function(){return this._transitionable.serialize()},R.prototype.setLight=function(F,Y){if(void 0===Y&&(Y={}),!this._validate(e.validateLight,F,Y))for(var ae in F){var fe=F[ae];e.endsWith(ae,"-transition")?this._transitionable.setTransition(ae.slice(0,-11),fe):this._transitionable.setValue(ae,fe)}},R.prototype.updateTransitions=function(F){this._transitioning=this._transitionable.transitioned(F,this._transitioning)},R.prototype.hasTransition=function(){return this._transitioning.hasTransition()},R.prototype.recalculate=function(F){this.properties=this._transitioning.possiblyEvaluate(F)},R.prototype._validate=function(F,Y,ae){return(!ae||!1!==ae.validate)&&e.emitValidationErrors(this,F.call(e.validateStyle,e.extend({value:Y,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},R}(e.Evented),P=function(L,R){this.width=L,this.height=R,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};P.prototype.getDash=function(L,R){var F=L.join(",")+String(R);return this.dashEntry[F]||(this.dashEntry[F]=this.addDash(L,R)),this.dashEntry[F]},P.prototype.getDashRanges=function(L,R,F){var Y=[],ae=L.length%2==1?-L[L.length-1]*F:0,fe=L[0]*F,ve=!0;Y.push({left:ae,right:fe,isDash:ve,zeroLength:0===L[0]});for(var Ae=L[0],Pe=1;Pe<L.length;Pe++){var Ge=L[Pe];ae=Ae*F,fe=(Ae+=Ge)*F,Y.push({left:ae,right:fe,isDash:ve=!ve,zeroLength:0===Ge})}return Y},P.prototype.addRoundDash=function(L,R,F){for(var Y=R/2,ae=-F;ae<=F;ae++)for(var ve=this.width*(this.nextRow+F+ae),Ae=0,Pe=L[Ae],Ge=0;Ge<this.width;Ge++){Ge/Pe.right>1&&(Pe=L[++Ae]);var Qe=Math.abs(Ge-Pe.left),st=Math.abs(Ge-Pe.right),Mt=Math.min(Qe,st),It=void 0,Ct=ae/F*(Y+1);if(Pe.isDash){var Pt=Y-Math.abs(Ct);It=Math.sqrt(Mt*Mt+Pt*Pt)}else It=Y-Math.sqrt(Mt*Mt+Ct*Ct);this.data[ve+Ge]=Math.max(0,Math.min(255,It+128))}},P.prototype.addRegularDash=function(L){for(var R=L.length-1;R>=0;--R){var F=L[R],Y=L[R+1];F.zeroLength?L.splice(R,1):Y&&Y.isDash===F.isDash&&(Y.left=F.left,L.splice(R,1))}var ae=L[0],fe=L[L.length-1];ae.isDash===fe.isDash&&(ae.left=fe.left-this.width,fe.right=ae.right+this.width);for(var ve=this.width*this.nextRow,Ae=0,Pe=L[Ae],Ge=0;Ge<this.width;Ge++){Ge/Pe.right>1&&(Pe=L[++Ae]);var Qe=Math.abs(Ge-Pe.left),st=Math.abs(Ge-Pe.right),Mt=Math.min(Qe,st);this.data[ve+Ge]=Math.max(0,Math.min(255,(Pe.isDash?Mt:-Mt)+128))}},P.prototype.addDash=function(L,R){var F=R?7:0,Y=2*F+1;if(this.nextRow+Y>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var ae=0,fe=0;fe<L.length;fe++)ae+=L[fe];if(0!==ae){var ve=this.width/ae,Ae=this.getDashRanges(L,this.width,ve);R?this.addRoundDash(Ae,ve,F):this.addRegularDash(Ae)}var Pe={y:(this.nextRow+F+.5)/this.height,height:2*F/this.height,width:ae};return this.nextRow+=Y,this.dirty=!0,Pe},P.prototype.bind=function(L){var R=L.gl;this.texture?(R.bindTexture(R.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,R.texSubImage2D(R.TEXTURE_2D,0,0,0,this.width,this.height,R.ALPHA,R.UNSIGNED_BYTE,this.data))):(this.texture=R.createTexture(),R.bindTexture(R.TEXTURE_2D,this.texture),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.REPEAT),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.REPEAT),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR),R.texImage2D(R.TEXTURE_2D,0,R.ALPHA,this.width,this.height,0,R.ALPHA,R.UNSIGNED_BYTE,this.data))};var S=function L(R,F){this.workerPool=R,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var Y=this.workerPool.acquire(this.id),ae=0;ae<Y.length;ae++){var ve=new L.Actor(Y[ae],F,this.id);ve.name="Worker "+ae,this.actors.push(ve)}};function E(L,R,F){var Y=function(ae,fe){if(ae)return F(ae);if(fe){var ve=e.pick(e.extend(fe,L),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);fe.vector_layers&&(ve.vectorLayers=fe.vector_layers,ve.vectorLayerIds=ve.vectorLayers.map(function(Ae){return Ae.id})),ve.tiles=R.canonicalizeTileset(ve,L.url),F(null,ve)}};return L.url?e.getJSON(R.transformRequest(R.normalizeSourceURL(L.url),e.ResourceType.Source),Y):e.browser.frame(function(){return Y(null,L)})}S.prototype.broadcast=function(L,R,F){e.asyncAll(this.actors,function(Y,ae){Y.send(L,R,ae)},F=F||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach(function(L){L.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=e.Actor;var D=function(L,R,F){this.bounds=e.LngLatBounds.convert(this.validateBounds(L)),this.minzoom=R||0,this.maxzoom=F||24};D.prototype.validateBounds=function(L){return Array.isArray(L)&&4===L.length?[Math.max(-180,L[0]),Math.max(-90,L[1]),Math.min(180,L[2]),Math.min(90,L[3])]:[-180,-90,180,90]},D.prototype.contains=function(L){var R=Math.pow(2,L.z),F=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*R),Y=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*R),ae=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*R),fe=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*R);return L.x>=F&&L.x<ae&&L.y>=Y&&L.y<fe};var z=function(L){function R(F,Y,ae,fe){if(L.call(this),this.id=F,this.dispatcher=ae,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(Y,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},Y),this._collectResourceTiming=Y.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(fe)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(Y,ae){F._tileJSONRequest=null,F._loaded=!0,Y?F.fire(new e.ErrorEvent(Y)):ae&&(e.extend(F,ae),ae.bounds&&(F.tileBounds=new D(ae.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(ae.tiles,F.map._requestManager._customAccessToken),e.postMapLoadEvent(ae.tiles,F.map._getMapId(),F.map._requestManager._skuToken,F.map._requestManager._customAccessToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},R.prototype.onAdd=function(F){this.map=F,this.load()},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return e.extend({},this._options)},R.prototype.loadTile=function(F,Y){var ae=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme)),fe={request:this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,tileSize:this.tileSize*F.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ve(Ae,Pe){return delete F.request,F.aborted?Y(null):Ae&&404!==Ae.status?Y(Ae):(Pe&&Pe.resourceTiming&&(F.resourceTiming=Pe.resourceTiming),this.map._refreshExpiredTiles&&Pe&&F.setExpiryData(Pe),F.loadVectorData(Pe,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),Y(null),void(F.reloadCallback&&(this.loadTile(F,F.reloadCallback),F.reloadCallback=null)))}fe.request.collectResourceTiming=this._collectResourceTiming,F.actor&&"expired"!==F.state?"loading"===F.state?F.reloadCallback=Y:F.request=F.actor.send("reloadTile",fe,ve.bind(this)):(F.actor=this.dispatcher.getActor(),F.request=F.actor.send("loadTile",fe,ve.bind(this)))},R.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.actor&&F.actor.send("abortTile",{uid:F.uid,type:this.type,source:this.id},void 0)},R.prototype.unloadTile=function(F){F.unloadVectorData(),F.actor&&F.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id},void 0)},R.prototype.hasTransition=function(){return!1},R}(e.Evented),N=function(L){function R(F,Y,ae,fe){L.call(this),this.id=F,this.dispatcher=ae,this.setEventedParent(fe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},Y),e.extend(this,e.pick(Y,["url","scheme","tileSize"]))}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(Y,ae){F._tileJSONRequest=null,F._loaded=!0,Y?F.fire(new e.ErrorEvent(Y)):ae&&(e.extend(F,ae),ae.bounds&&(F.tileBounds=new D(ae.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(ae.tiles),e.postMapLoadEvent(ae.tiles,F.map._getMapId(),F.map._requestManager._skuToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.onAdd=function(F){this.map=F,this.load()},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return e.extend({},this._options)},R.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},R.prototype.loadTile=function(F,Y){var ae=this,fe=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);F.request=e.getImage(this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),function(ve,Ae){if(delete F.request,F.aborted)F.state="unloaded",Y(null);else if(ve)F.state="errored",Y(ve);else if(Ae){ae.map._refreshExpiredTiles&&F.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var Pe=ae.map.painter.context,Ge=Pe.gl;F.texture=ae.map.painter.getTileTexture(Ae.width),F.texture?F.texture.update(Ae,{useMipmap:!0}):(F.texture=new e.Texture(Pe,Ae,Ge.RGBA,{useMipmap:!0}),F.texture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE,Ge.LINEAR_MIPMAP_NEAREST),Pe.extTextureFilterAnisotropic&&Ge.texParameterf(Ge.TEXTURE_2D,Pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Pe.extTextureFilterAnisotropicMax)),F.state="loaded",e.cacheEntryPossiblyAdded(ae.dispatcher),Y(null)}})},R.prototype.abortTile=function(F,Y){F.request&&(F.request.cancel(),delete F.request),Y()},R.prototype.unloadTile=function(F,Y){F.texture&&this.map.painter.saveTileTexture(F.texture),Y()},R.prototype.hasTransition=function(){return!1},R}(e.Evented),V=function(L){function R(F,Y,ae,fe){L.call(this,F,Y,ae,fe),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},Y),this.encoding=Y.encoding||"mapbox"}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},R.prototype.loadTile=function(F,Y){var ae=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function fe(ve,Ae){ve&&(F.state="errored",Y(ve)),Ae&&(F.dem=Ae,F.needsHillshadePrepare=!0,F.state="loaded",Y(null))}F.request=e.getImage(this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),function(ve,Ae){if(delete F.request,F.aborted)F.state="unloaded",Y(null);else if(ve)F.state="errored",Y(ve);else if(Ae){this.map._refreshExpiredTiles&&F.setExpiryData(Ae),delete Ae.cacheControl,delete Ae.expires;var Pe=e.window.ImageBitmap&&Ae instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?Ae:e.browser.getImageData(Ae,1),Ge={uid:F.uid,coord:F.tileID,source:this.id,rawImageData:Pe,encoding:this.encoding};F.actor&&"expired"!==F.state||(F.actor=this.dispatcher.getActor(),F.actor.send("loadDEMTile",Ge,fe.bind(this)))}}.bind(this)),F.neighboringTiles=this._getNeighboringTiles(F.tileID)},R.prototype._getNeighboringTiles=function(F){var Y=F.canonical,ae=Math.pow(2,Y.z),fe=(Y.x-1+ae)%ae,ve=0===Y.x?F.wrap-1:F.wrap,Ae=(Y.x+1+ae)%ae,Pe=Y.x+1===ae?F.wrap+1:F.wrap,Ge={};return Ge[new e.OverscaledTileID(F.overscaledZ,ve,Y.z,fe,Y.y).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,Pe,Y.z,Ae,Y.y).key]={backfilled:!1},Y.y>0&&(Ge[new e.OverscaledTileID(F.overscaledZ,ve,Y.z,fe,Y.y-1).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,F.wrap,Y.z,Y.x,Y.y-1).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,Pe,Y.z,Ae,Y.y-1).key]={backfilled:!1}),Y.y+1<ae&&(Ge[new e.OverscaledTileID(F.overscaledZ,ve,Y.z,fe,Y.y+1).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,F.wrap,Y.z,Y.x,Y.y+1).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,Pe,Y.z,Ae,Y.y+1).key]={backfilled:!1}),Ge},R.prototype.unloadTile=function(F){F.demTexture&&this.map.painter.saveTileTexture(F.demTexture),F.fbo&&(F.fbo.destroy(),delete F.fbo),F.dem&&delete F.dem,delete F.neighboringTiles,F.state="unloaded",F.actor&&F.actor.send("removeDEMTile",{uid:F.uid,source:this.id})},R}(N),X=function(L){function R(F,Y,ae,fe){L.call(this),this.id=F,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ae.getActor(),this.setEventedParent(fe),this._data=Y.data,this._options=e.extend({},Y),this._collectResourceTiming=Y.collectResourceTiming,this._resourceTiming=[],void 0!==Y.maxzoom&&(this.maxzoom=Y.maxzoom),Y.type&&(this.type=Y.type),Y.attribution&&(this.attribution=Y.attribution),this.promoteId=Y.promoteId;var ve=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:Y.cluster||!1,geojsonVtOptions:{buffer:(void 0!==Y.buffer?Y.buffer:128)*ve,tolerance:(void 0!==Y.tolerance?Y.tolerance:.375)*ve,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:Y.lineMetrics||!1,generateId:Y.generateId||!1},superclusterOptions:{maxZoom:void 0!==Y.clusterMaxZoom?Math.min(Y.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(Y.clusterRadius||50)*ve,log:!1,generateId:Y.generateId||!1},clusterProperties:Y.clusterProperties},Y.workerOptions)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.load=function(){var F=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Y){if(Y)F.fire(new e.ErrorEvent(Y));else{var ae={dataType:"source",sourceDataType:"metadata"};F._collectResourceTiming&&F._resourceTiming&&F._resourceTiming.length>0&&(ae.resourceTiming=F._resourceTiming,F._resourceTiming=[]),F.fire(new e.Event("data",ae))}})},R.prototype.onAdd=function(F){this.map=F,this.load()},R.prototype.setData=function(F){var Y=this;return this._data=F,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ae){if(ae)Y.fire(new e.ErrorEvent(ae));else{var fe={dataType:"source",sourceDataType:"content"};Y._collectResourceTiming&&Y._resourceTiming&&Y._resourceTiming.length>0&&(fe.resourceTiming=Y._resourceTiming,Y._resourceTiming=[]),Y.fire(new e.Event("data",fe))}}),this},R.prototype.getClusterExpansionZoom=function(F,Y){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:F,source:this.id},Y),this},R.prototype.getClusterChildren=function(F,Y){return this.actor.send("geojson.getClusterChildren",{clusterId:F,source:this.id},Y),this},R.prototype.getClusterLeaves=function(F,Y,ae,fe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:F,limit:Y,offset:ae},fe),this},R.prototype._updateWorkerData=function(F){var Y=this;this._loaded=!1;var ae=e.extend({},this.workerOptions),fe=this._data;"string"==typeof fe?(ae.request=this.map._requestManager.transformRequest(e.browser.resolveURL(fe),e.ResourceType.Source),ae.request.collectResourceTiming=this._collectResourceTiming):ae.data=JSON.stringify(fe),this.actor.send(this.type+".loadData",ae,function(ve,Ae){Y._removed||Ae&&Ae.abandoned||(Y._loaded=!0,Ae&&Ae.resourceTiming&&Ae.resourceTiming[Y.id]&&(Y._resourceTiming=Ae.resourceTiming[Y.id].slice(0)),Y.actor.send(Y.type+".coalesce",{source:ae.source},null),F(ve))})},R.prototype.loaded=function(){return this._loaded},R.prototype.loadTile=function(F,Y){var ae=this,fe=F.actor?"reloadTile":"loadTile";F.actor=this.actor,F.request=this.actor.send(fe,{type:this.type,uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Ae,Pe){return delete F.request,F.unloadVectorData(),F.aborted?Y(null):Ae?Y(Ae):(F.loadVectorData(Pe,ae.map.painter,"reloadTile"===fe),Y(null))})},R.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.aborted=!0},R.prototype.unloadTile=function(F){F.unloadVectorData(),this.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id})},R.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},R.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},R.prototype.hasTransition=function(){return!1},R}(e.Evented),J=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),G=function(L){function R(F,Y,ae,fe){L.call(this),this.id=F,this.dispatcher=ae,this.coordinates=Y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(fe),this.options=Y}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.load=function(F,Y){var ae=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(fe,ve){ae._loaded=!0,fe?ae.fire(new e.ErrorEvent(fe)):ve&&(ae.image=ve,F&&(ae.coordinates=F),Y&&Y(),ae._finishLoading())})},R.prototype.loaded=function(){return this._loaded},R.prototype.updateImage=function(F){var Y=this;return this.image&&F.url?(this.options.url=F.url,this.load(F.coordinates,function(){Y.texture=null}),this):this},R.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},R.prototype.onAdd=function(F){this.map=F,this.load()},R.prototype.setCoordinates=function(F){var Y=this;this.coordinates=F;var ae=F.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(ve){for(var Ae=1/0,Pe=1/0,Ge=-1/0,Qe=-1/0,st=0,Mt=ve;st<Mt.length;st+=1){var It=Mt[st];Ae=Math.min(Ae,It.x),Pe=Math.min(Pe,It.y),Ge=Math.max(Ge,It.x),Qe=Math.max(Qe,It.y)}var kt=Math.max(Ge-Ae,Qe-Pe),Vt=Math.max(0,Math.floor(-Math.log(kt)/Math.LN2)),Nt=Math.pow(2,Vt);return new e.CanonicalTileID(Vt,Math.floor((Ae+Ge)/2*Nt),Math.floor((Pe+Qe)/2*Nt))}(ae),this.minzoom=this.maxzoom=this.tileID.z;var fe=ae.map(function(ve){return Y.tileID.getTilePoint(ve)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(fe[0].x,fe[0].y,0,0),this._boundsArray.emplaceBack(fe[1].x,fe[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(fe[3].x,fe[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(fe[2].x,fe[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},R.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var F=this.map.painter.context,Y=F.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(F,this.image,Y.RGBA),this.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE)),this.tiles){var fe=this.tiles[ae];"loaded"!==fe.state&&(fe.state="loaded",fe.texture=this.texture)}}},R.prototype.loadTile=function(F,Y){this.tileID&&this.tileID.equals(F.tileID.canonical)?(this.tiles[String(F.tileID.wrap)]=F,F.buckets={},Y(null)):(F.state="errored",Y(null))},R.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return!1},R}(e.Evented),Z=function(L){function R(F,Y,ae,fe){L.call(this,F,Y,ae,fe),this.roundZoom=!0,this.type="video",this.options=Y}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.load=function(){var F=this;this._loaded=!1;var Y=this.options;this.urls=[];for(var ae=0,fe=Y.urls;ae<fe.length;ae+=1)this.urls.push(this.map._requestManager.transformRequest(fe[ae],e.ResourceType.Source).url);e.getVideo(this.urls,function(Ae,Pe){F._loaded=!0,Ae?F.fire(new e.ErrorEvent(Ae)):Pe&&(F.video=Pe,F.video.loop=!0,F.video.addEventListener("playing",function(){F.map.triggerRepaint()}),F.map&&F.video.play(),F._finishLoading())})},R.prototype.pause=function(){this.video&&this.video.pause()},R.prototype.play=function(){this.video&&this.video.play()},R.prototype.seek=function(F){if(this.video){var Y=this.video.seekable;F<Y.start(0)||F>Y.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+Y.start(0)+" and "+Y.end(0)+"-second mark."))):this.video.currentTime=F}},R.prototype.getVideo=function(){return this.video},R.prototype.onAdd=function(F){this.map||(this.map=F,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},R.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var F=this.map.painter.context,Y=F.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Y.texSubImage2D(Y.TEXTURE_2D,0,0,0,Y.RGBA,Y.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(F,this.video,Y.RGBA),this.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE)),this.tiles){var fe=this.tiles[ae];"loaded"!==fe.state&&(fe.state="loaded",fe.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this.video&&!this.video.paused},R}(G),re=function(L){function R(F,Y,ae,fe){L.call(this,F,Y,ae,fe),Y.coordinates?Array.isArray(Y.coordinates)&&4===Y.coordinates.length&&!Y.coordinates.some(function(ve){return!Array.isArray(ve)||2!==ve.length||ve.some(function(Ae){return"number"!=typeof Ae})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "coordinates"'))),Y.animate&&"boolean"!=typeof Y.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'optional "animate" property must be a boolean value'))),Y.canvas?"string"==typeof Y.canvas||Y.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "canvas"'))),this.options=Y,this.animate=void 0===Y.animate||Y.animate}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},R.prototype.getCanvas=function(){return this.canvas},R.prototype.onAdd=function(F){this.map=F,this.load(),this.canvas&&this.animate&&this.play()},R.prototype.onRemove=function(){this.pause()},R.prototype.prepare=function(){var F=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,F=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,F=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var Y=this.map.painter.context,ae=Y.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=Y.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(F||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(Y,this.canvas,ae.RGBA,{premultiply:!0}),this.tiles){var ve=this.tiles[fe];"loaded"!==ve.state&&(ve.state="loaded",ve.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this._playing},R.prototype._hasInvalidDimensions=function(){for(var F=0,Y=[this.canvas.width,this.canvas.height];F<Y.length;F+=1){var ae=Y[F];if(isNaN(ae)||ae<=0)return!0}return!1},R}(G),j={vector:z,raster:N,"raster-dem":V,geojson:X,video:Z,image:G,canvas:re};function B(L,R){var F=e.identity([]);return e.translate(F,F,[1,1,0]),e.scale(F,F,[.5*L.width,.5*L.height,1]),e.multiply(F,F,L.calculatePosMatrix(R.toUnwrapped()))}function H(L,R,F,Y,ae,fe){var ve=function(Pt,kt,Vt){if(Pt)for(var Nt=0,Yt=Pt;Nt<Yt.length;Nt+=1){var fr=kt[Yt[Nt]];if(fr&&fr.source===Vt&&"fill-extrusion"===fr.type)return!0}else for(var Mr in kt){var jr=kt[Mr];if(jr.source===Vt&&"fill-extrusion"===jr.type)return!0}return!1}(ae&&ae.layers,R,L.id),Ae=fe.maxPitchScaleFactor(),Pe=L.tilesIn(Y,Ae,ve);Pe.sort(ee);for(var Ge=[],Qe=0,st=Pe;Qe<st.length;Qe+=1){var Mt=st[Qe];Ge.push({wrappedTileID:Mt.tileID.wrapped().key,queryResults:Mt.tile.queryRenderedFeatures(R,F,L._state,Mt.queryGeometry,Mt.cameraQueryGeometry,Mt.scale,ae,fe,Ae,B(L.transform,Mt.tileID))})}var It=function(Pt){for(var kt={},Vt={},Nt=0,Yt=Pt;Nt<Yt.length;Nt+=1){var fr=Yt[Nt],Mr=fr.queryResults,jr=fr.wrappedTileID,Fr=Vt[jr]=Vt[jr]||{};for(var fn in Mr)for(var on=Mr[fn],wn=Fr[fn]=Fr[fn]||{},yn=kt[fn]=kt[fn]||[],Jn=0,ii=on;Jn<ii.length;Jn+=1){var xi=ii[Jn];wn[xi.featureIndex]||(wn[xi.featureIndex]=!0,yn.push(xi))}}return kt}(Ge);for(var Ct in It)It[Ct].forEach(function(Pt){var kt=Pt.feature,Vt=L.getFeatureState(kt.layer["source-layer"],kt.id);kt.source=kt.layer.source,kt.layer["source-layer"]&&(kt.sourceLayer=kt.layer["source-layer"]),kt.state=Vt});return It}function ee(L,R){var F=L.tileID,Y=R.tileID;return F.overscaledZ-Y.overscaledZ||F.canonical.y-Y.canonical.y||F.wrap-Y.wrap||F.canonical.x-Y.canonical.x}var U=function(L,R){this.max=L,this.onRemove=R,this.reset()};U.prototype.reset=function(){for(var L in this.data)for(var R=0,F=this.data[L];R<F.length;R+=1){var Y=F[R];Y.timeout&&clearTimeout(Y.timeout),this.onRemove(Y.value)}return this.data={},this.order=[],this},U.prototype.add=function(L,R,F){var Y=this,ae=L.wrapped().key;void 0===this.data[ae]&&(this.data[ae]=[]);var fe={value:R,timeout:void 0};if(void 0!==F&&(fe.timeout=setTimeout(function(){Y.remove(L,fe)},F)),this.data[ae].push(fe),this.order.push(ae),this.order.length>this.max){var ve=this._getAndRemoveByKey(this.order[0]);ve&&this.onRemove(ve)}return this},U.prototype.has=function(L){return L.wrapped().key in this.data},U.prototype.getAndRemove=function(L){return this.has(L)?this._getAndRemoveByKey(L.wrapped().key):null},U.prototype._getAndRemoveByKey=function(L){var R=this.data[L].shift();return R.timeout&&clearTimeout(R.timeout),0===this.data[L].length&&delete this.data[L],this.order.splice(this.order.indexOf(L),1),R.value},U.prototype.getByKey=function(L){var R=this.data[L];return R?R[0].value:null},U.prototype.get=function(L){return this.has(L)?this.data[L.wrapped().key][0].value:null},U.prototype.remove=function(L,R){if(!this.has(L))return this;var F=L.wrapped().key,Y=void 0===R?0:this.data[F].indexOf(R),ae=this.data[F][Y];return this.data[F].splice(Y,1),ae.timeout&&clearTimeout(ae.timeout),0===this.data[F].length&&delete this.data[F],this.onRemove(ae.value),this.order.splice(this.order.indexOf(F),1),this},U.prototype.setMaxSize=function(L){for(this.max=L;this.order.length>this.max;){var R=this._getAndRemoveByKey(this.order[0]);R&&this.onRemove(R)}return this},U.prototype.filter=function(L){var R=[];for(var F in this.data)for(var Y=0,ae=this.data[F];Y<ae.length;Y+=1){var fe=ae[Y];L(fe.value)||R.push(fe)}for(var ve=0,Ae=R;ve<Ae.length;ve+=1){var Pe=Ae[ve];this.remove(Pe.value.tileID,Pe)}};var $=function(L,R,F){this.context=L;var Y=L.gl;this.buffer=Y.createBuffer(),this.dynamicDraw=Boolean(F),this.context.unbindVAO(),L.bindElementBuffer.set(this.buffer),Y.bufferData(Y.ELEMENT_ARRAY_BUFFER,R.arrayBuffer,this.dynamicDraw?Y.DYNAMIC_DRAW:Y.STATIC_DRAW),this.dynamicDraw||delete R.arrayBuffer};$.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},$.prototype.updateData=function(L){var R=this.context.gl;this.context.unbindVAO(),this.bind(),R.bufferSubData(R.ELEMENT_ARRAY_BUFFER,0,L.arrayBuffer)},$.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},te=function(L,R,F,Y){this.length=R.length,this.attributes=F,this.itemSize=R.bytesPerElement,this.dynamicDraw=Y,this.context=L;var ae=L.gl;this.buffer=ae.createBuffer(),L.bindVertexBuffer.set(this.buffer),ae.bufferData(ae.ARRAY_BUFFER,R.arrayBuffer,this.dynamicDraw?ae.DYNAMIC_DRAW:ae.STATIC_DRAW),this.dynamicDraw||delete R.arrayBuffer};te.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},te.prototype.updateData=function(L){var R=this.context.gl;this.bind(),R.bufferSubData(R.ARRAY_BUFFER,0,L.arrayBuffer)},te.prototype.enableAttributes=function(L,R){for(var F=0;F<this.attributes.length;F++){var ae=R.attributes[this.attributes[F].name];void 0!==ae&&L.enableVertexAttribArray(ae)}},te.prototype.setVertexAttribPointers=function(L,R,F){for(var Y=0;Y<this.attributes.length;Y++){var ae=this.attributes[Y],fe=R.attributes[ae.name];void 0!==fe&&L.vertexAttribPointer(fe,ae.components,L[q[ae.type]],!1,this.itemSize,ae.offset+this.itemSize*(F||0))}},te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ne=function(L){this.gl=L.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ne.prototype.get=function(){return this.current},ne.prototype.set=function(L){},ne.prototype.getDefault=function(){return this.default},ne.prototype.setDefault=function(){this.set(this.default)};var se=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return e.Color.transparent},R.prototype.set=function(F){var Y=this.current;(F.r!==Y.r||F.g!==Y.g||F.b!==Y.b||F.a!==Y.a||this.dirty)&&(this.gl.clearColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},R}(ne),ie=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return 1},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearDepth(F),this.current=F,this.dirty=!1)},R}(ne),ue=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return 0},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearStencil(F),this.current=F,this.dirty=!1)},R}(ne),le=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return[!0,!0,!0,!0]},R.prototype.set=function(F){var Y=this.current;(F[0]!==Y[0]||F[1]!==Y[1]||F[2]!==Y[2]||F[3]!==Y[3]||this.dirty)&&(this.gl.colorMask(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},R}(ne),de=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return!0},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthMask(F),this.current=F,this.dirty=!1)},R}(ne),be=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return 255},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.stencilMask(F),this.current=F,this.dirty=!1)},R}(ne),_e=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},R.prototype.set=function(F){var Y=this.current;(F.func!==Y.func||F.ref!==Y.ref||F.mask!==Y.mask||this.dirty)&&(this.gl.stencilFunc(F.func,F.ref,F.mask),this.current=F,this.dirty=!1)},R}(ne),xe=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){var F=this.gl;return[F.KEEP,F.KEEP,F.KEEP]},R.prototype.set=function(F){var Y=this.current;(F[0]!==Y[0]||F[1]!==Y[1]||F[2]!==Y[2]||this.dirty)&&(this.gl.stencilOp(F[0],F[1],F[2]),this.current=F,this.dirty=!1)},R}(ne),Ee=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;F?Y.enable(Y.STENCIL_TEST):Y.disable(Y.STENCIL_TEST),this.current=F,this.dirty=!1}},R}(ne),he=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return[0,1]},R.prototype.set=function(F){var Y=this.current;(F[0]!==Y[0]||F[1]!==Y[1]||this.dirty)&&(this.gl.depthRange(F[0],F[1]),this.current=F,this.dirty=!1)},R}(ne),me=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;F?Y.enable(Y.DEPTH_TEST):Y.disable(Y.DEPTH_TEST),this.current=F,this.dirty=!1}},R}(ne),Se=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return this.gl.LESS},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthFunc(F),this.current=F,this.dirty=!1)},R}(ne),Me=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;F?Y.enable(Y.BLEND):Y.disable(Y.BLEND),this.current=F,this.dirty=!1}},R}(ne),Ie=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){var F=this.gl;return[F.ONE,F.ZERO]},R.prototype.set=function(F){var Y=this.current;(F[0]!==Y[0]||F[1]!==Y[1]||this.dirty)&&(this.gl.blendFunc(F[0],F[1]),this.current=F,this.dirty=!1)},R}(ne),Fe=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return e.Color.transparent},R.prototype.set=function(F){var Y=this.current;(F.r!==Y.r||F.g!==Y.g||F.b!==Y.b||F.a!==Y.a||this.dirty)&&(this.gl.blendColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},R}(ne),Ne=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return this.gl.FUNC_ADD},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.blendEquation(F),this.current=F,this.dirty=!1)},R}(ne),De=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;F?Y.enable(Y.CULL_FACE):Y.disable(Y.CULL_FACE),this.current=F,this.dirty=!1}},R}(ne),$e=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return this.gl.BACK},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.cullFace(F),this.current=F,this.dirty=!1)},R}(ne),Re=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return this.gl.CCW},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.frontFace(F),this.current=F,this.dirty=!1)},R}(ne),ze=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.useProgram(F),this.current=F,this.dirty=!1)},R}(ne),Ue=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return this.gl.TEXTURE0},R.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.activeTexture(F),this.current=F,this.dirty=!1)},R}(ne),je=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){var F=this.gl;return[0,0,F.drawingBufferWidth,F.drawingBufferHeight]},R.prototype.set=function(F){var Y=this.current;(F[0]!==Y[0]||F[1]!==Y[1]||F[2]!==Y[2]||F[3]!==Y[3]||this.dirty)&&(this.gl.viewport(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},R}(ne),rt=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;Y.bindFramebuffer(Y.FRAMEBUFFER,F),this.current=F,this.dirty=!1}},R}(ne),ut=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;Y.bindRenderbuffer(Y.RENDERBUFFER,F),this.current=F,this.dirty=!1}},R}(ne),gt=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;Y.bindTexture(Y.TEXTURE_2D,F),this.current=F,this.dirty=!1}},R}(ne),At=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;Y.bindBuffer(Y.ARRAY_BUFFER,F),this.current=F,this.dirty=!1}},R}(ne),_t=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){var Y=this.gl;Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,F),this.current=F,this.dirty=!1},R}(ne),it=function(L){function R(F){L.call(this,F),this.vao=F.extVertexArrayObject}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(F){this.vao&&(F!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(F),this.current=F,this.dirty=!1)},R}(ne),et=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return 4},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;Y.pixelStorei(Y.UNPACK_ALIGNMENT,F),this.current=F,this.dirty=!1}},R}(ne),wt=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F),this.current=F,this.dirty=!1}},R}(ne),Gt=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(F){if(F!==this.current||this.dirty){var Y=this.gl;Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,F),this.current=F,this.dirty=!1}},R}(ne),Kt=function(L){function R(F,Y){L.call(this,F),this.context=F,this.parent=Y}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getDefault=function(){return null},R}(ne),cr=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.setDirty=function(){this.dirty=!0},R.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Y=this.gl;Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,F,0),this.current=F,this.dirty=!1}},R}(Kt),ar=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Y=this.gl;Y.framebufferRenderbuffer(Y.FRAMEBUFFER,Y.DEPTH_ATTACHMENT,Y.RENDERBUFFER,F),this.current=F,this.dirty=!1}},R}(Kt),hr=function(L,R,F,Y){this.context=L,this.width=R,this.height=F;var fe=this.framebuffer=L.gl.createFramebuffer();this.colorAttachment=new cr(L,fe),Y&&(this.depthAttachment=new ar(L,fe))};hr.prototype.destroy=function(){var L=this.context.gl,R=this.colorAttachment.get();if(R&&L.deleteTexture(R),this.depthAttachment){var F=this.depthAttachment.get();F&&L.deleteRenderbuffer(F)}L.deleteFramebuffer(this.framebuffer)};var Xt=function(L,R,F){this.func=L,this.mask=R,this.range=F};Xt.ReadOnly=!1,Xt.ReadWrite=!0,Xt.disabled=new Xt(519,Xt.ReadOnly,[0,1]);var He=function(L,R,F,Y,ae,fe){this.test=L,this.ref=R,this.mask=F,this.fail=Y,this.depthFail=ae,this.pass=fe};He.disabled=new He({func:519,mask:0},0,0,7680,7680,7680);var Je=function(L,R,F){this.blendFunction=L,this.blendColor=R,this.mask=F};Je.disabled=new Je(Je.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Je.unblended=new Je(Je.Replace,e.Color.transparent,[!0,!0,!0,!0]),Je.alphaBlended=new Je([1,771],e.Color.transparent,[!0,!0,!0,!0]);var pe=function(L,R,F){this.enable=L,this.mode=R,this.frontFace=F};pe.disabled=new pe(!1,1029,2305),pe.backCCW=new pe(!0,1029,2305);var we=function(L){this.gl=L,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new se(this),this.clearDepth=new ie(this),this.clearStencil=new ue(this),this.colorMask=new le(this),this.depthMask=new de(this),this.stencilMask=new be(this),this.stencilFunc=new _e(this),this.stencilOp=new xe(this),this.stencilTest=new Ee(this),this.depthRange=new he(this),this.depthTest=new me(this),this.depthFunc=new Se(this),this.blend=new Me(this),this.blendFunc=new Ie(this),this.blendColor=new Fe(this),this.blendEquation=new Ne(this),this.cullFace=new De(this),this.cullFaceSide=new $e(this),this.frontFace=new Re(this),this.program=new ze(this),this.activeTexture=new Ue(this),this.viewport=new je(this),this.bindFramebuffer=new rt(this),this.bindRenderbuffer=new ut(this),this.bindTexture=new gt(this),this.bindVertexBuffer=new At(this),this.bindElementBuffer=new _t(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new it(this),this.pixelStoreUnpack=new et(this),this.pixelStoreUnpackPremultiplyAlpha=new wt(this),this.pixelStoreUnpackFlipY=new Gt(this),this.extTextureFilterAnisotropic=L.getExtension("EXT_texture_filter_anisotropic")||L.getExtension("MOZ_EXT_texture_filter_anisotropic")||L.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=L.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=L.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(L.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=L.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=L.getExtension("EXT_disjoint_timer_query")};we.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},we.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},we.prototype.createIndexBuffer=function(L,R){return new $(this,L,R)},we.prototype.createVertexBuffer=function(L,R,F){return new te(this,L,R,F)},we.prototype.createRenderbuffer=function(L,R,F){var Y=this.gl,ae=Y.createRenderbuffer();return this.bindRenderbuffer.set(ae),Y.renderbufferStorage(Y.RENDERBUFFER,L,R,F),this.bindRenderbuffer.set(null),ae},we.prototype.createFramebuffer=function(L,R,F){return new hr(this,L,R,F)},we.prototype.clear=function(L){var R=L.color,F=L.depth,Y=this.gl,ae=0;R&&(ae|=Y.COLOR_BUFFER_BIT,this.clearColor.set(R),this.colorMask.set([!0,!0,!0,!0])),void 0!==F&&(ae|=Y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(F),this.depthMask.set(!0)),Y.clear(ae)},we.prototype.setCullFace=function(L){!1===L.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(L.mode),this.frontFace.set(L.frontFace))},we.prototype.setDepthMode=function(L){L.func!==this.gl.ALWAYS||L.mask?(this.depthTest.set(!0),this.depthFunc.set(L.func),this.depthMask.set(L.mask),this.depthRange.set(L.range)):this.depthTest.set(!1)},we.prototype.setStencilMode=function(L){L.test.func!==this.gl.ALWAYS||L.mask?(this.stencilTest.set(!0),this.stencilMask.set(L.mask),this.stencilOp.set([L.fail,L.depthFail,L.pass]),this.stencilFunc.set({func:L.test.func,ref:L.ref,mask:L.test.mask})):this.stencilTest.set(!1)},we.prototype.setColorMode=function(L){e.deepEqual(L.blendFunction,Je.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(L.blendFunction),this.blendColor.set(L.blendColor)),this.colorMask.set(L.mask)},we.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Be=function(L){function R(F,Y,ae){var fe=this;L.call(this),this.id=F,this.dispatcher=ae,this.on("data",function(ve){"source"===ve.dataType&&"metadata"===ve.sourceDataType&&(fe._sourceLoaded=!0),fe._sourceLoaded&&!fe._paused&&"source"===ve.dataType&&"content"===ve.sourceDataType&&(fe.reload(),fe.transform&&fe.update(fe.transform))}),this.on("error",function(){fe._sourceErrored=!0}),this._source=function(ve,Ae,Pe,Ge){var Qe=new j[Ae.type](ve,Ae,Pe,Ge);if(Qe.id!==ve)throw new Error("Expected Source id to be "+ve+" instead of "+Qe.id);return e.bindAll(["load","abort","unload","serialize","prepare"],Qe),Qe}(F,Y,ae,this),this._tiles={},this._cache=new U(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.onAdd=function(F){this.map=F,this._maxTileCacheSize=F?F._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(F)},R.prototype.onRemove=function(F){this._source&&this._source.onRemove&&this._source.onRemove(F)},R.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var F in this._tiles){var Y=this._tiles[F];if("loaded"!==Y.state&&"errored"!==Y.state)return!1}return!0},R.prototype.getSource=function(){return this._source},R.prototype.pause=function(){this._paused=!0},R.prototype.resume=function(){if(this._paused){var F=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,F&&this.reload(),this.transform&&this.update(this.transform)}},R.prototype._loadTile=function(F,Y){return this._source.loadTile(F,Y)},R.prototype._unloadTile=function(F){if(this._source.unloadTile)return this._source.unloadTile(F,function(){})},R.prototype._abortTile=function(F){if(this._source.abortTile)return this._source.abortTile(F,function(){})},R.prototype.serialize=function(){return this._source.serialize()},R.prototype.prepare=function(F){for(var Y in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ae=this._tiles[Y];ae.upload(F),ae.prepare(this.map.style.imageManager)}},R.prototype.getIds=function(){return e.values(this._tiles).map(function(F){return F.tileID}).sort(We).map(function(F){return F.key})},R.prototype.getRenderableIds=function(F){var Y=this,ae=[];for(var fe in this._tiles)this._isIdRenderable(fe,F)&&ae.push(this._tiles[fe]);return F?ae.sort(function(ve,Ae){var Pe=ve.tileID,Ge=Ae.tileID,Qe=new e.Point(Pe.canonical.x,Pe.canonical.y)._rotate(Y.transform.angle),st=new e.Point(Ge.canonical.x,Ge.canonical.y)._rotate(Y.transform.angle);return Pe.overscaledZ-Ge.overscaledZ||st.y-Qe.y||st.x-Qe.x}).map(function(ve){return ve.tileID.key}):ae.map(function(ve){return ve.tileID}).sort(We).map(function(ve){return ve.key})},R.prototype.hasRenderableParent=function(F){var Y=this.findLoadedParent(F,0);return!!Y&&this._isIdRenderable(Y.tileID.key)},R.prototype._isIdRenderable=function(F,Y){return this._tiles[F]&&this._tiles[F].hasData()&&!this._coveredTiles[F]&&(Y||!this._tiles[F].holdingForFade())},R.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var F in this._cache.reset(),this._tiles)"errored"!==this._tiles[F].state&&this._reloadTile(F,"reloading")},R.prototype._reloadTile=function(F,Y){var ae=this._tiles[F];ae&&("loading"!==ae.state&&(ae.state=Y),this._loadTile(ae,this._tileLoaded.bind(this,ae,F,Y)))},R.prototype._tileLoaded=function(F,Y,ae,fe){if(fe)return F.state="errored",void(404!==fe.status?this._source.fire(new e.ErrorEvent(fe,{tile:F})):this.update(this.transform));F.timeAdded=e.browser.now(),"expired"===ae&&(F.refreshedUponExpiration=!0),this._setTileReloadTimer(Y,F),"raster-dem"===this.getSource().type&&F.dem&&this._backfillDEM(F),this._state.initializeTileState(F,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:F,coord:F.tileID}))},R.prototype._backfillDEM=function(F){for(var Y=this.getRenderableIds(),ae=0;ae<Y.length;ae++){var fe=Y[ae];if(F.neighboringTiles&&F.neighboringTiles[fe]){var ve=this.getTileByID(fe);Ae(F,ve),Ae(ve,F)}}function Ae(Pe,Ge){Pe.needsHillshadePrepare=!0;var Qe=Ge.tileID.canonical.x-Pe.tileID.canonical.x,st=Ge.tileID.canonical.y-Pe.tileID.canonical.y,Mt=Math.pow(2,Pe.tileID.canonical.z),It=Ge.tileID.key;0===Qe&&0===st||Math.abs(st)>1||(Math.abs(Qe)>1&&(1===Math.abs(Qe+Mt)?Qe+=Mt:1===Math.abs(Qe-Mt)&&(Qe-=Mt)),Ge.dem&&Pe.dem&&(Pe.dem.backfillBorder(Ge.dem,Qe,st),Pe.neighboringTiles&&Pe.neighboringTiles[It]&&(Pe.neighboringTiles[It].backfilled=!0)))}},R.prototype.getTile=function(F){return this.getTileByID(F.key)},R.prototype.getTileByID=function(F){return this._tiles[F]},R.prototype._retainLoadedChildren=function(F,Y,ae,fe){for(var ve in this._tiles){var Ae=this._tiles[ve];if(!(fe[ve]||!Ae.hasData()||Ae.tileID.overscaledZ<=Y||Ae.tileID.overscaledZ>ae)){for(var Pe=Ae.tileID;Ae&&Ae.tileID.overscaledZ>Y+1;){var Ge=Ae.tileID.scaledTo(Ae.tileID.overscaledZ-1);(Ae=this._tiles[Ge.key])&&Ae.hasData()&&(Pe=Ge)}for(var Qe=Pe;Qe.overscaledZ>Y;)if(F[(Qe=Qe.scaledTo(Qe.overscaledZ-1)).key]){fe[Pe.key]=Pe;break}}}},R.prototype.findLoadedParent=function(F,Y){if(F.key in this._loadedParentTiles){var ae=this._loadedParentTiles[F.key];return ae&&ae.tileID.overscaledZ>=Y?ae:null}for(var fe=F.overscaledZ-1;fe>=Y;fe--){var ve=F.scaledTo(fe),Ae=this._getLoadedTile(ve);if(Ae)return Ae}},R.prototype._getLoadedTile=function(F){var Y=this._tiles[F.key];return Y&&Y.hasData()?Y:this._cache.getByKey(F.wrapped().key)},R.prototype.updateCacheSize=function(F){var Y=(Math.ceil(F.width/this._source.tileSize)+1)*(Math.ceil(F.height/this._source.tileSize)+1),ae=Math.floor(5*Y),fe="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ae):ae;this._cache.setMaxSize(fe)},R.prototype.handleWrapJump=function(F){var ae=Math.round((F-(void 0===this._prevLng?F:this._prevLng))/360);if(this._prevLng=F,ae){var fe={};for(var ve in this._tiles){var Ae=this._tiles[ve];Ae.tileID=Ae.tileID.unwrapTo(Ae.tileID.wrap+ae),fe[Ae.tileID.key]=Ae}for(var Pe in this._tiles=fe,this._timers)clearTimeout(this._timers[Pe]),delete this._timers[Pe];for(var Ge in this._tiles)this._setTileReloadTimer(Ge,this._tiles[Ge])}},R.prototype.update=function(F){var Y=this;if(this.transform=F,this._sourceLoaded&&!this._paused){var ae;this.updateCacheSize(F),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ae=F.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Fr){return new e.OverscaledTileID(Fr.canonical.z,Fr.wrap,Fr.canonical.z,Fr.canonical.x,Fr.canonical.y)}):(ae=F.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ae=ae.filter(function(Fr){return Y._source.hasTile(Fr)}))):ae=[];var fe=F.coveringZoomLevel(this._source),ve=Math.max(fe-R.maxOverzooming,this._source.minzoom),Ae=Math.max(fe+R.maxUnderzooming,this._source.minzoom),Pe=this._updateRetainedTiles(ae,fe);if(Ke(this._source.type)){for(var Ge={},Qe={},st=0,Mt=Object.keys(Pe);st<Mt.length;st+=1){var It=Mt[st],Ct=Pe[It],Pt=this._tiles[It];if(Pt&&!(Pt.fadeEndTime&&Pt.fadeEndTime<=e.browser.now())){var kt=this.findLoadedParent(Ct,ve);kt&&(this._addTile(kt.tileID),Ge[kt.tileID.key]=kt.tileID),Qe[It]=Ct}}for(var Vt in this._retainLoadedChildren(Qe,fe,Ae,Pe),Ge)Pe[Vt]||(this._coveredTiles[Vt]=!0,Pe[Vt]=Ge[Vt])}for(var Nt in Pe)this._tiles[Nt].clearFadeHold();for(var Yt=0,fr=e.keysDifference(this._tiles,Pe);Yt<fr.length;Yt+=1){var Mr=fr[Yt],jr=this._tiles[Mr];jr.hasSymbolBuckets&&!jr.holdingForFade()?jr.setHoldDuration(this.map._fadeDuration):jr.hasSymbolBuckets&&!jr.symbolFadeFinished()||this._removeTile(Mr)}this._updateLoadedParentTileCache()}},R.prototype.releaseSymbolFadeTiles=function(){for(var F in this._tiles)this._tiles[F].holdingForFade()&&this._removeTile(F)},R.prototype._updateRetainedTiles=function(F,Y){for(var ae={},fe={},ve=Math.max(Y-R.maxOverzooming,this._source.minzoom),Ae=Math.max(Y+R.maxUnderzooming,this._source.minzoom),Pe={},Ge=0,Qe=F;Ge<Qe.length;Ge+=1){var st=Qe[Ge],Mt=this._addTile(st);ae[st.key]=st,Mt.hasData()||Y<this._source.maxzoom&&(Pe[st.key]=st)}this._retainLoadedChildren(Pe,Y,Ae,ae);for(var It=0,Ct=F;It<Ct.length;It+=1){var Pt=Ct[It],kt=this._tiles[Pt.key];if(!kt.hasData()){if(Y+1>this._source.maxzoom){var Vt=Pt.children(this._source.maxzoom)[0],Nt=this.getTile(Vt);if(Nt&&Nt.hasData()){ae[Vt.key]=Vt;continue}}else{var Yt=Pt.children(this._source.maxzoom);if(ae[Yt[0].key]&&ae[Yt[1].key]&&ae[Yt[2].key]&&ae[Yt[3].key])continue}for(var fr=kt.wasRequested(),Mr=Pt.overscaledZ-1;Mr>=ve;--Mr){var jr=Pt.scaledTo(Mr);if(fe[jr.key]||(fe[jr.key]=!0,!(kt=this.getTile(jr))&&fr&&(kt=this._addTile(jr)),kt&&(ae[jr.key]=jr,fr=kt.wasRequested(),kt.hasData())))break}}}return ae},R.prototype._updateLoadedParentTileCache=function(){for(var F in this._loadedParentTiles={},this._tiles){for(var Y=[],ae=void 0,fe=this._tiles[F].tileID;fe.overscaledZ>0;){if(fe.key in this._loadedParentTiles){ae=this._loadedParentTiles[fe.key];break}Y.push(fe.key);var ve=fe.scaledTo(fe.overscaledZ-1);if(ae=this._getLoadedTile(ve))break;fe=ve}for(var Ae=0,Pe=Y;Ae<Pe.length;Ae+=1)this._loadedParentTiles[Pe[Ae]]=ae}},R.prototype._addTile=function(F){var Y=this._tiles[F.key];if(Y)return Y;(Y=this._cache.getAndRemove(F))&&(this._setTileReloadTimer(F.key,Y),Y.tileID=F,this._state.initializeTileState(Y,this.map?this.map.painter:null),this._cacheTimers[F.key]&&(clearTimeout(this._cacheTimers[F.key]),delete this._cacheTimers[F.key],this._setTileReloadTimer(F.key,Y)));var ae=Boolean(Y);return ae||(Y=new e.Tile(F,this._source.tileSize*F.overscaleFactor()),this._loadTile(Y,this._tileLoaded.bind(this,Y,F.key,Y.state))),Y?(Y.uses++,this._tiles[F.key]=Y,ae||this._source.fire(new e.Event("dataloading",{tile:Y,coord:Y.tileID,dataType:"source"})),Y):null},R.prototype._setTileReloadTimer=function(F,Y){var ae=this;F in this._timers&&(clearTimeout(this._timers[F]),delete this._timers[F]);var fe=Y.getExpiryTimeout();fe&&(this._timers[F]=setTimeout(function(){ae._reloadTile(F,"expired"),delete ae._timers[F]},fe))},R.prototype._removeTile=function(F){var Y=this._tiles[F];Y&&(Y.uses--,delete this._tiles[F],this._timers[F]&&(clearTimeout(this._timers[F]),delete this._timers[F]),Y.uses>0||(Y.hasData()&&"reloading"!==Y.state?this._cache.add(Y.tileID,Y,Y.getExpiryTimeout()):(Y.aborted=!0,this._abortTile(Y),this._unloadTile(Y))))},R.prototype.clearTiles=function(){for(var F in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(F);this._cache.reset()},R.prototype.tilesIn=function(F,Y,ae){var fe=this,ve=[],Ae=this.transform;if(!Ae)return ve;for(var Pe=ae?Ae.getCameraQueryGeometry(F):F,Ge=F.map(function(Mr){return Ae.pointCoordinate(Mr)}),Qe=Pe.map(function(Mr){return Ae.pointCoordinate(Mr)}),st=this.getIds(),Mt=1/0,It=1/0,Ct=-1/0,Pt=-1/0,kt=0,Vt=Qe;kt<Vt.length;kt+=1){var Nt=Vt[kt];Mt=Math.min(Mt,Nt.x),It=Math.min(It,Nt.y),Ct=Math.max(Ct,Nt.x),Pt=Math.max(Pt,Nt.y)}for(var Yt=function(Mr){var jr=fe._tiles[st[Mr]];if(!jr.holdingForFade()){var Fr=jr.tileID,fn=Math.pow(2,Ae.zoom-jr.tileID.overscaledZ),on=Y*jr.queryPadding*e.EXTENT/jr.tileSize/fn,wn=[Fr.getTilePoint(new e.MercatorCoordinate(Mt,It)),Fr.getTilePoint(new e.MercatorCoordinate(Ct,Pt))];if(wn[0].x-on<e.EXTENT&&wn[0].y-on<e.EXTENT&&wn[1].x+on>=0&&wn[1].y+on>=0){var yn=Ge.map(function(ii){return Fr.getTilePoint(ii)}),Jn=Qe.map(function(ii){return Fr.getTilePoint(ii)});ve.push({tile:jr,tileID:Fr,queryGeometry:yn,cameraQueryGeometry:Jn,scale:fn})}}},fr=0;fr<st.length;fr++)Yt(fr);return ve},R.prototype.getVisibleCoordinates=function(F){for(var Y=this,ae=this.getRenderableIds(F).map(function(Pe){return Y._tiles[Pe].tileID}),fe=0,ve=ae;fe<ve.length;fe+=1){var Ae=ve[fe];Ae.posMatrix=this.transform.calculatePosMatrix(Ae.toUnwrapped())}return ae},R.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ke(this._source.type))for(var F in this._tiles){var Y=this._tiles[F];if(void 0!==Y.fadeEndTime&&Y.fadeEndTime>=e.browser.now())return!0}return!1},R.prototype.setFeatureState=function(F,Y,ae){this._state.updateState(F=F||"_geojsonTileLayer",Y,ae)},R.prototype.removeFeatureState=function(F,Y,ae){this._state.removeFeatureState(F=F||"_geojsonTileLayer",Y,ae)},R.prototype.getFeatureState=function(F,Y){return this._state.getState(F=F||"_geojsonTileLayer",Y)},R.prototype.setDependencies=function(F,Y,ae){var fe=this._tiles[F];fe&&fe.setDependencies(Y,ae)},R.prototype.reloadTilesForDependencies=function(F,Y){for(var ae in this._tiles)this._tiles[ae].hasDependency(F,Y)&&this._reloadTile(ae,"reloading");this._cache.filter(function(fe){return!fe.hasDependency(F,Y)})},R}(e.Evented);function We(L,R){var F=Math.abs(2*L.wrap)-+(L.wrap<0),Y=Math.abs(2*R.wrap)-+(R.wrap<0);return L.overscaledZ-R.overscaledZ||Y-F||R.canonical.y-L.canonical.y||R.canonical.x-L.canonical.x}function Ke(L){return"raster"===L||"image"===L||"video"===L}function Ye(){return new e.window.Worker(ce.workerUrl)}Be.maxOverzooming=10,Be.maxUnderzooming=3;var ft="mapboxgl_preloaded_worker_pool",ct=function(){this.active={}};ct.prototype.acquire=function(L){if(!this.workers)for(this.workers=[];this.workers.length<ct.workerCount;)this.workers.push(new Ye);return this.active[L]=!0,this.workers.slice()},ct.prototype.release=function(L){delete this.active[L],0===this.numActive()&&(this.workers.forEach(function(R){R.terminate()}),this.workers=null)},ct.prototype.isPreloaded=function(){return!!this.active[ft]},ct.prototype.numActive=function(){return Object.keys(this.active).length};var St,Ft=Math.floor(e.browser.hardwareConcurrency/2);function at(){return St||(St=new ct),St}function mt(L,R){var F={};for(var Y in L)"ref"!==Y&&(F[Y]=L[Y]);return e.refProperties.forEach(function(ae){ae in R&&(F[ae]=R[ae])}),F}function qt(L){L=L.slice();for(var R=Object.create(null),F=0;F<L.length;F++)R[L[F].id]=L[F];for(var Y=0;Y<L.length;Y++)"ref"in L[Y]&&(L[Y]=mt(L[Y],R[L[Y].ref]));return L}ct.workerCount=Math.max(Math.min(Ft,6),1);var Et={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Dt(L,R,F){F.push({command:Et.addSource,args:[L,R[L]]})}function Le(L,R,F){R.push({command:Et.removeSource,args:[L]}),F[L]=!0}function Xe(L,R,F,Y){Le(L,F,Y),Dt(L,R,F)}function ot(L,R,F){var Y;for(Y in L[F])if(L[F].hasOwnProperty(Y)&&"data"!==Y&&!e.deepEqual(L[F][Y],R[F][Y]))return!1;for(Y in R[F])if(R[F].hasOwnProperty(Y)&&"data"!==Y&&!e.deepEqual(L[F][Y],R[F][Y]))return!1;return!0}function dt(L,R,F,Y,ae,fe){var ve;for(ve in R=R||{},L=L||{})L.hasOwnProperty(ve)&&(e.deepEqual(L[ve],R[ve])||F.push({command:fe,args:[Y,ve,R[ve],ae]}));for(ve in R)R.hasOwnProperty(ve)&&!L.hasOwnProperty(ve)&&(e.deepEqual(L[ve],R[ve])||F.push({command:fe,args:[Y,ve,R[ve],ae]}))}function Lt(L){return L.id}function Ut(L,R){return L[R.id]=R,L}var Wt=function(L,R){this.reset(L,R)};Wt.prototype.reset=function(L,R){this.points=L||[],this._distances=[0];for(var F=1;F<this.points.length;F++)this._distances[F]=this._distances[F-1]+this.points[F].dist(this.points[F-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(R||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Wt.prototype.lerp=function(L){if(1===this.points.length)return this.points[0];L=e.clamp(L,0,1);for(var R=1,F=this._distances[R],Y=L*this.paddedLength+this.padding;F<Y&&R<this._distances.length;)F=this._distances[++R];var ae=R-1,fe=this._distances[ae],ve=F-fe,Ae=ve>0?(Y-fe)/ve:0;return this.points[ae].mult(1-Ae).add(this.points[R].mult(Ae))};var wr=function(L,R,F){var Y=this.boxCells=[],ae=this.circleCells=[];this.xCellCount=Math.ceil(L/F),this.yCellCount=Math.ceil(R/F);for(var fe=0;fe<this.xCellCount*this.yCellCount;fe++)Y.push([]),ae.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=L,this.height=R,this.xScale=this.xCellCount/L,this.yScale=this.yCellCount/R,this.boxUid=0,this.circleUid=0};function Rr(L,R,F,Y,ae){var fe=e.create();return R?(e.scale(fe,fe,[1/ae,1/ae,1]),F||e.rotateZ(fe,fe,Y.angle)):e.multiply(fe,Y.labelPlaneMatrix,L),fe}function br(L,R,F,Y,ae){if(R){var fe=e.clone(L);return e.scale(fe,fe,[ae,ae,1]),F||e.rotateZ(fe,fe,-Y.angle),fe}return Y.glCoordMatrix}function nr(L,R){var F=[L.x,L.y,0,1];an(F,F,R);var Y=F[3];return{point:new e.Point(F[0]/Y,F[1]/Y),signedDistanceFromCamera:Y}}function lr(L,R){return.5+L/R*.5}function sr(L,R){var F=L[0]/L[3],Y=L[1]/L[3];return F>=-R[0]&&F<=R[0]&&Y>=-R[1]&&Y<=R[1]}function _r(L,R,F,Y,ae,fe,ve,Ae){var Pe=Y?L.textSizeData:L.iconSizeData,Ge=e.evaluateSizeForZoom(Pe,F.transform.zoom),Qe=[256/F.width*2+1,256/F.height*2+1],st=Y?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;st.clear();for(var Mt=L.lineVertexArray,It=Y?L.text.placedSymbolArray:L.icon.placedSymbolArray,Ct=F.transform.width/F.transform.height,Pt=!1,kt=0;kt<It.length;kt++){var Vt=It.get(kt);if(Vt.hidden||Vt.writingMode===e.WritingMode.vertical&&!Pt)zr(Vt.numGlyphs,st);else{Pt=!1;var Nt=[Vt.anchorX,Vt.anchorY,0,1];if(e.transformMat4(Nt,Nt,R),sr(Nt,Qe)){var fr=lr(F.transform.cameraToCenterDistance,Nt[3]),Mr=e.evaluateSizeForFeature(Pe,Ge,Vt),jr=ve?Mr/fr:Mr*fr,Fr=new e.Point(Vt.anchorX,Vt.anchorY),fn=nr(Fr,ae).point,on={},wn=ur(Vt,jr,!1,Ae,R,ae,fe,L.glyphOffsetArray,Mt,st,fn,Fr,on,Ct);Pt=wn.useVertical,(wn.notEnoughRoom||Pt||wn.needsFlipping&&ur(Vt,jr,!0,Ae,R,ae,fe,L.glyphOffsetArray,Mt,st,fn,Fr,on,Ct).notEnoughRoom)&&zr(Vt.numGlyphs,st)}else zr(Vt.numGlyphs,st)}}Y?L.text.dynamicLayoutVertexBuffer.updateData(st):L.icon.dynamicLayoutVertexBuffer.updateData(st)}function Ar(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge,Qe){var st=Ae.glyphStartIndex+Ae.numGlyphs,Mt=Ae.lineStartIndex,It=Ae.lineStartIndex+Ae.lineLength,Ct=R.getoffsetX(Ae.glyphStartIndex),Pt=R.getoffsetX(st-1),kt=Qt(L*Ct,F,Y,ae,fe,ve,Ae.segment,Mt,It,Pe,Ge,Qe);if(!kt)return null;var Vt=Qt(L*Pt,F,Y,ae,fe,ve,Ae.segment,Mt,It,Pe,Ge,Qe);return Vt?{first:kt,last:Vt}:null}function zt(L,R,F,Y){return L===e.WritingMode.horizontal&&Math.abs(F.y-R.y)>Math.abs(F.x-R.x)*Y?{useVertical:!0}:(L===e.WritingMode.vertical?R.y<F.y:R.x>F.x)?{needsFlipping:!0}:null}function ur(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge,Qe,st,Mt,It){var Ct,Pt=R/24,kt=L.lineOffsetX*Pt,Vt=L.lineOffsetY*Pt;if(L.numGlyphs>1){var Nt=L.glyphStartIndex+L.numGlyphs,Yt=L.lineStartIndex,fr=L.lineStartIndex+L.lineLength,Mr=Ar(Pt,Ae,kt,Vt,F,Qe,st,L,Pe,fe,Mt);if(!Mr)return{notEnoughRoom:!0};var jr=nr(Mr.first.point,ve).point,Fr=nr(Mr.last.point,ve).point;if(Y&&!F){var fn=zt(L.writingMode,jr,Fr,It);if(fn)return fn}Ct=[Mr.first];for(var on=L.glyphStartIndex+1;on<Nt-1;on++)Ct.push(Qt(Pt*Ae.getoffsetX(on),kt,Vt,F,Qe,st,L.segment,Yt,fr,Pe,fe,Mt));Ct.push(Mr.last)}else{if(Y&&!F){var wn=nr(st,ae).point,yn=L.lineStartIndex+L.segment+1,Jn=new e.Point(Pe.getx(yn),Pe.gety(yn)),ii=nr(Jn,ae),xi=ii.signedDistanceFromCamera>0?ii.point:Tt(st,Jn,wn,1,ae),en=zt(L.writingMode,wn,xi,It);if(en)return en}var On=Qt(Pt*Ae.getoffsetX(L.glyphStartIndex),kt,Vt,F,Qe,st,L.segment,L.lineStartIndex,L.lineStartIndex+L.lineLength,Pe,fe,Mt);if(!On)return{notEnoughRoom:!0};Ct=[On]}for(var ti=0,Qn=Ct;ti<Qn.length;ti+=1){var pi=Qn[ti];e.addDynamicAttributes(Ge,pi.point,pi.angle)}return{}}function Tt(L,R,F,Y,ae){var fe=nr(L.add(L.sub(R)._unit()),ae).point,ve=F.sub(fe);return F.add(ve._mult(Y/ve.mag()))}function Qt(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge,Qe,st){var Mt=Y?L-R:L+R,It=Mt>0?1:-1,Ct=0;Y&&(It*=-1,Ct=Math.PI),It<0&&(Ct+=Math.PI);for(var Pt=It>0?Ae+ve:Ae+ve+1,kt=ae,Vt=ae,Nt=0,Yt=0,fr=Math.abs(Mt),Mr=[];Nt+Yt<=fr;){if((Pt+=It)<Ae||Pt>=Pe)return null;if(Vt=kt,Mr.push(kt),void 0===(kt=st[Pt])){var jr=new e.Point(Ge.getx(Pt),Ge.gety(Pt)),Fr=nr(jr,Qe);if(Fr.signedDistanceFromCamera>0)kt=st[Pt]=Fr.point;else{var fn=Pt-It;kt=Tt(0===Nt?fe:new e.Point(Ge.getx(fn),Ge.gety(fn)),jr,Vt,fr-Nt+1,Qe)}}Nt+=Yt,Yt=Vt.dist(kt)}var on=(fr-Nt)/Yt,wn=kt.sub(Vt),yn=wn.mult(on)._add(Vt);yn._add(wn._unit()._perp()._mult(F*It));var Jn=Ct+Math.atan2(kt.y-Vt.y,kt.x-Vt.x);return Mr.push(yn),{point:yn,angle:Jn,path:Mr}}wr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},wr.prototype.insert=function(L,R,F,Y,ae){this._forEachCell(R,F,Y,ae,this._insertBoxCell,this.boxUid++),this.boxKeys.push(L),this.bboxes.push(R),this.bboxes.push(F),this.bboxes.push(Y),this.bboxes.push(ae)},wr.prototype.insertCircle=function(L,R,F,Y){this._forEachCell(R-Y,F-Y,R+Y,F+Y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(L),this.circles.push(R),this.circles.push(F),this.circles.push(Y)},wr.prototype._insertBoxCell=function(L,R,F,Y,ae,fe){this.boxCells[ae].push(fe)},wr.prototype._insertCircleCell=function(L,R,F,Y,ae,fe){this.circleCells[ae].push(fe)},wr.prototype._query=function(L,R,F,Y,ae,fe){if(F<0||L>this.width||Y<0||R>this.height)return!ae&&[];var ve=[];if(L<=0&&R<=0&&this.width<=F&&this.height<=Y){if(ae)return!0;for(var Ae=0;Ae<this.boxKeys.length;Ae++)ve.push({key:this.boxKeys[Ae],x1:this.bboxes[4*Ae],y1:this.bboxes[4*Ae+1],x2:this.bboxes[4*Ae+2],y2:this.bboxes[4*Ae+3]});for(var Pe=0;Pe<this.circleKeys.length;Pe++){var Ge=this.circles[3*Pe],Qe=this.circles[3*Pe+1],st=this.circles[3*Pe+2];ve.push({key:this.circleKeys[Pe],x1:Ge-st,y1:Qe-st,x2:Ge+st,y2:Qe+st})}return fe?ve.filter(fe):ve}return this._forEachCell(L,R,F,Y,this._queryCell,ve,{hitTest:ae,seenUids:{box:{},circle:{}}},fe),ae?ve.length>0:ve},wr.prototype._queryCircle=function(L,R,F,Y,ae){var fe=L-F,ve=L+F,Ae=R-F,Pe=R+F;if(ve<0||fe>this.width||Pe<0||Ae>this.height)return!Y&&[];var Ge=[];return this._forEachCell(fe,Ae,ve,Pe,this._queryCellCircle,Ge,{hitTest:Y,circle:{x:L,y:R,radius:F},seenUids:{box:{},circle:{}}},ae),Y?Ge.length>0:Ge},wr.prototype.query=function(L,R,F,Y,ae){return this._query(L,R,F,Y,!1,ae)},wr.prototype.hitTest=function(L,R,F,Y,ae){return this._query(L,R,F,Y,!0,ae)},wr.prototype.hitTestCircle=function(L,R,F,Y){return this._queryCircle(L,R,F,!0,Y)},wr.prototype._queryCell=function(L,R,F,Y,ae,fe,ve,Ae){var Pe=ve.seenUids,Ge=this.boxCells[ae];if(null!==Ge)for(var Qe=this.bboxes,st=0,Mt=Ge;st<Mt.length;st+=1){var It=Mt[st];if(!Pe.box[It]){Pe.box[It]=!0;var Ct=4*It;if(L<=Qe[Ct+2]&&R<=Qe[Ct+3]&&F>=Qe[Ct+0]&&Y>=Qe[Ct+1]&&(!Ae||Ae(this.boxKeys[It]))){if(ve.hitTest)return fe.push(!0),!0;fe.push({key:this.boxKeys[It],x1:Qe[Ct],y1:Qe[Ct+1],x2:Qe[Ct+2],y2:Qe[Ct+3]})}}}var Pt=this.circleCells[ae];if(null!==Pt)for(var kt=this.circles,Vt=0,Nt=Pt;Vt<Nt.length;Vt+=1){var Yt=Nt[Vt];if(!Pe.circle[Yt]){Pe.circle[Yt]=!0;var fr=3*Yt;if(this._circleAndRectCollide(kt[fr],kt[fr+1],kt[fr+2],L,R,F,Y)&&(!Ae||Ae(this.circleKeys[Yt]))){if(ve.hitTest)return fe.push(!0),!0;var Mr=kt[fr],jr=kt[fr+1],Fr=kt[fr+2];fe.push({key:this.circleKeys[Yt],x1:Mr-Fr,y1:jr-Fr,x2:Mr+Fr,y2:jr+Fr})}}}},wr.prototype._queryCellCircle=function(L,R,F,Y,ae,fe,ve,Ae){var Pe=ve.circle,Ge=ve.seenUids,Qe=this.boxCells[ae];if(null!==Qe)for(var st=this.bboxes,Mt=0,It=Qe;Mt<It.length;Mt+=1){var Ct=It[Mt];if(!Ge.box[Ct]){Ge.box[Ct]=!0;var Pt=4*Ct;if(this._circleAndRectCollide(Pe.x,Pe.y,Pe.radius,st[Pt+0],st[Pt+1],st[Pt+2],st[Pt+3])&&(!Ae||Ae(this.boxKeys[Ct])))return fe.push(!0),!0}}var kt=this.circleCells[ae];if(null!==kt)for(var Vt=this.circles,Nt=0,Yt=kt;Nt<Yt.length;Nt+=1){var fr=Yt[Nt];if(!Ge.circle[fr]){Ge.circle[fr]=!0;var Mr=3*fr;if(this._circlesCollide(Vt[Mr],Vt[Mr+1],Vt[Mr+2],Pe.x,Pe.y,Pe.radius)&&(!Ae||Ae(this.circleKeys[fr])))return fe.push(!0),!0}}},wr.prototype._forEachCell=function(L,R,F,Y,ae,fe,ve,Ae){for(var Pe=this._convertToXCellCoord(L),Ge=this._convertToYCellCoord(R),Qe=this._convertToXCellCoord(F),st=this._convertToYCellCoord(Y),Mt=Pe;Mt<=Qe;Mt++)for(var It=Ge;It<=st;It++)if(ae.call(this,L,R,F,Y,this.xCellCount*It+Mt,fe,ve,Ae))return},wr.prototype._convertToXCellCoord=function(L){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(L*this.xScale)))},wr.prototype._convertToYCellCoord=function(L){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(L*this.yScale)))},wr.prototype._circlesCollide=function(L,R,F,Y,ae,fe){var ve=Y-L,Ae=ae-R,Pe=F+fe;return Pe*Pe>ve*ve+Ae*Ae},wr.prototype._circleAndRectCollide=function(L,R,F,Y,ae,fe,ve){var Ae=(fe-Y)/2,Pe=Math.abs(L-(Y+Ae));if(Pe>Ae+F)return!1;var Ge=(ve-ae)/2,Qe=Math.abs(R-(ae+Ge));if(Qe>Ge+F)return!1;if(Pe<=Ae||Qe<=Ge)return!0;var st=Pe-Ae,Mt=Qe-Ge;return st*st+Mt*Mt<=F*F};var Er=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zr(L,R){for(var F=0;F<L;F++){var Y=R.length;R.resize(Y+4),R.float32.set(Er,3*Y)}}function an(L,R,F){var Y=R[0],ae=R[1];return L[0]=F[0]*Y+F[4]*ae+F[12],L[1]=F[1]*Y+F[5]*ae+F[13],L[3]=F[3]*Y+F[7]*ae+F[15],L}var Kr=function(L,R,F){void 0===R&&(R=new wr(L.width+200,L.height+200,25)),void 0===F&&(F=new wr(L.width+200,L.height+200,25)),this.transform=L,this.grid=R,this.ignoredGrid=F,this.pitchfactor=Math.cos(L._pitch)*L.cameraToCenterDistance,this.screenRightBoundary=L.width+100,this.screenBottomBoundary=L.height+100,this.gridRightBoundary=L.width+200,this.gridBottomBoundary=L.height+200};function sn(L,R,F){return R*(e.EXTENT/(L.tileSize*Math.pow(2,F-L.tileID.overscaledZ)))}Kr.prototype.placeCollisionBox=function(L,R,F,Y,ae){var fe=this.projectAndGetPerspectiveRatio(Y,L.anchorPointX,L.anchorPointY),ve=F*fe.perspectiveRatio,Ae=L.x1*ve+fe.point.x,Pe=L.y1*ve+fe.point.y,Ge=L.x2*ve+fe.point.x,Qe=L.y2*ve+fe.point.y;return!this.isInsideGrid(Ae,Pe,Ge,Qe)||!R&&this.grid.hitTest(Ae,Pe,Ge,Qe,ae)?{box:[],offscreen:!1}:{box:[Ae,Pe,Ge,Qe],offscreen:this.isOffscreen(Ae,Pe,Ge,Qe)}},Kr.prototype.placeCollisionCircles=function(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge,Qe,st,Mt){var It=[],Ct=new e.Point(R.anchorX,R.anchorY),Pt=nr(Ct,fe),kt=lr(this.transform.cameraToCenterDistance,Pt.signedDistanceFromCamera),Vt=(Ge?ae/kt:ae*kt)/e.ONE_EM,Nt=nr(Ct,ve).point,Yt=Ar(Vt,Y,R.lineOffsetX*Vt,R.lineOffsetY*Vt,!1,Nt,Ct,R,F,ve,{}),fr=!1,Mr=!1,jr=!0;if(Yt){for(var Fr=.5*st*kt+Mt,fn=new e.Point(-100,-100),on=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),wn=new Wt,yn=Yt.first,Jn=Yt.last,ii=[],xi=yn.path.length-1;xi>=1;xi--)ii.push(yn.path[xi]);for(var en=1;en<Jn.path.length;en++)ii.push(Jn.path[en]);var On=2.5*Fr;if(Ae){var ti=ii.map(function(Lo){return nr(Lo,Ae)});ii=ti.some(function(Lo){return Lo.signedDistanceFromCamera<=0})?[]:ti.map(function(Lo){return Lo.point})}var Qn=[];if(ii.length>0){for(var pi=ii[0].clone(),wi=ii[0].clone(),ji=1;ji<ii.length;ji++)pi.x=Math.min(pi.x,ii[ji].x),pi.y=Math.min(pi.y,ii[ji].y),wi.x=Math.max(wi.x,ii[ji].x),wi.y=Math.max(wi.y,ii[ji].y);Qn=pi.x>=fn.x&&wi.x<=on.x&&pi.y>=fn.y&&wi.y<=on.y?[ii]:wi.x<fn.x||pi.x>on.x||wi.y<fn.y||pi.y>on.y?[]:e.clipLine([ii],fn.x,fn.y,on.x,on.y)}for(var li=0,Oi=Qn;li<Oi.length;li+=1){wn.reset(Oi[li],.25*Fr);var Yi;Yi=wn.length<=.5*Fr?1:Math.ceil(wn.paddedLength/On)+1;for(var Ei=0;Ei<Yi;Ei++){var Fi=Ei/Math.max(Yi-1,1),Vi=wn.lerp(Fi),ya=Vi.x+100,ja=Vi.y+100;It.push(ya,ja,Fr,0);var Ua=ya-Fr,ba=ja-Fr,Fa=ya+Fr,Sa=ja+Fr;if(jr=jr&&this.isOffscreen(Ua,ba,Fa,Sa),Mr=Mr||this.isInsideGrid(Ua,ba,Fa,Sa),!L&&this.grid.hitTestCircle(ya,ja,Fr,Qe)&&(fr=!0,!Pe))return{circles:[],offscreen:!1,collisionDetected:fr}}}}return{circles:!Pe&&fr||!Mr?[]:It,offscreen:jr,collisionDetected:fr}},Kr.prototype.queryRenderedSymbols=function(L){if(0===L.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var R=[],F=1/0,Y=1/0,ae=-1/0,fe=-1/0,ve=0,Ae=L;ve<Ae.length;ve+=1){var Pe=Ae[ve],Ge=new e.Point(Pe.x+100,Pe.y+100);F=Math.min(F,Ge.x),Y=Math.min(Y,Ge.y),ae=Math.max(ae,Ge.x),fe=Math.max(fe,Ge.y),R.push(Ge)}for(var Qe={},st={},Mt=0,It=this.grid.query(F,Y,ae,fe).concat(this.ignoredGrid.query(F,Y,ae,fe));Mt<It.length;Mt+=1){var Ct=It[Mt],Pt=Ct.key;if(void 0===Qe[Pt.bucketInstanceId]&&(Qe[Pt.bucketInstanceId]={}),!Qe[Pt.bucketInstanceId][Pt.featureIndex]){var kt=[new e.Point(Ct.x1,Ct.y1),new e.Point(Ct.x2,Ct.y1),new e.Point(Ct.x2,Ct.y2),new e.Point(Ct.x1,Ct.y2)];e.polygonIntersectsPolygon(R,kt)&&(Qe[Pt.bucketInstanceId][Pt.featureIndex]=!0,void 0===st[Pt.bucketInstanceId]&&(st[Pt.bucketInstanceId]=[]),st[Pt.bucketInstanceId].push(Pt.featureIndex))}}return st},Kr.prototype.insertCollisionBox=function(L,R,F,Y,ae){(R?this.ignoredGrid:this.grid).insert({bucketInstanceId:F,featureIndex:Y,collisionGroupID:ae},L[0],L[1],L[2],L[3])},Kr.prototype.insertCollisionCircles=function(L,R,F,Y,ae){for(var fe=R?this.ignoredGrid:this.grid,ve={bucketInstanceId:F,featureIndex:Y,collisionGroupID:ae},Ae=0;Ae<L.length;Ae+=4)fe.insertCircle(ve,L[Ae],L[Ae+1],L[Ae+2])},Kr.prototype.projectAndGetPerspectiveRatio=function(L,R,F){var Y=[R,F,0,1];return an(Y,Y,L),{point:new e.Point((Y[0]/Y[3]+1)/2*this.transform.width+100,(-Y[1]/Y[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/Y[3]*.5}},Kr.prototype.isOffscreen=function(L,R,F,Y){return F<100||L>=this.screenRightBoundary||Y<100||R>this.screenBottomBoundary},Kr.prototype.isInsideGrid=function(L,R,F,Y){return F>=0&&L<this.gridRightBoundary&&Y>=0&&R<this.gridBottomBoundary},Kr.prototype.getViewportMatrix=function(){var L=e.identity([]);return e.translate(L,L,[-100,-100,0]),L};var gn=function(L,R,F,Y){this.opacity=L?Math.max(0,Math.min(1,L.opacity+(L.placed?R:-R))):Y&&F?1:0,this.placed=F};gn.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var zn=function(L,R,F,Y,ae){this.text=new gn(L?L.text:null,R,F,ae),this.icon=new gn(L?L.icon:null,R,Y,ae)};zn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Vr=function(L,R,F){this.text=L,this.icon=R,this.skipFade=F},_n=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Qr=function(L,R,F,Y,ae){this.bucketInstanceId=L,this.featureIndex=R,this.sourceLayerIndex=F,this.bucketIndex=Y,this.tileID=ae},Jr=function(L){this.crossSourceCollisions=L,this.maxGroupID=0,this.collisionGroups={}};function Nn(L,R,F,Y,ae){var fe=e.getAnchorAlignment(L),ve=-(fe.horizontalAlign-.5)*R,Ae=-(fe.verticalAlign-.5)*F,Pe=e.evaluateVariableOffset(L,Y);return new e.Point(ve+Pe[0]*ae,Ae+Pe[1]*ae)}function Hn(L,R,F,Y,ae,fe){var ve=L.x1,Ae=L.x2,Pe=L.y1,Ge=L.y2,Qe=L.anchorPointX,st=L.anchorPointY,Mt=new e.Point(R,F);return Y&&Mt._rotate(ae?fe:-fe),{x1:ve+Mt.x,y1:Pe+Mt.y,x2:Ae+Mt.x,y2:Ge+Mt.y,anchorPointX:Qe,anchorPointY:st}}Jr.prototype.get=function(L){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[L]){var R=++this.maxGroupID;this.collisionGroups[L]={ID:R,predicate:function(F){return F.collisionGroupID===R}}}return this.collisionGroups[L]};var Mn=function(L,R,F,Y){this.transform=L.clone(),this.collisionIndex=new Kr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=R,this.retainedQueryData={},this.collisionGroups=new Jr(F),this.collisionCircleArrays={},this.prevPlacement=Y,Y&&(Y.prevPlacement=void 0),this.placedOrientations={}};function Un(L,R,F,Y,ae){L.emplaceBack(R?1:0,F?1:0,Y||0,ae||0),L.emplaceBack(R?1:0,F?1:0,Y||0,ae||0),L.emplaceBack(R?1:0,F?1:0,Y||0,ae||0),L.emplaceBack(R?1:0,F?1:0,Y||0,ae||0)}Mn.prototype.getBucketParts=function(L,R,F,Y){var ae=F.getBucket(R),fe=F.latestFeatureIndex;if(ae&&fe&&R.id===ae.layerIds[0]){var ve=F.collisionBoxArray,Ae=ae.layers[0].layout,Pe=Math.pow(2,this.transform.zoom-F.tileID.overscaledZ),Ge=F.tileSize/e.EXTENT,Qe=this.transform.calculatePosMatrix(F.tileID.toUnwrapped()),st="map"===Ae.get("text-pitch-alignment"),Mt="map"===Ae.get("text-rotation-alignment"),It=sn(F,1,this.transform.zoom),Ct=Rr(Qe,st,Mt,this.transform,It),Pt=null;if(st){var kt=br(Qe,st,Mt,this.transform,It);Pt=e.multiply([],this.transform.labelPlaneMatrix,kt)}this.retainedQueryData[ae.bucketInstanceId]=new Qr(ae.bucketInstanceId,fe,ae.sourceLayerIndex,ae.index,F.tileID);var Vt={bucket:ae,layout:Ae,posMatrix:Qe,textLabelPlaneMatrix:Ct,labelToScreenMatrix:Pt,scale:Pe,textPixelRatio:Ge,holdingForFade:F.holdingForFade(),collisionBoxArray:ve,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(ae.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ae.sourceID)};if(Y)for(var Nt=0,Yt=ae.sortKeyRanges;Nt<Yt.length;Nt+=1){var fr=Yt[Nt];L.push({sortKey:fr.sortKey,symbolInstanceStart:fr.symbolInstanceStart,symbolInstanceEnd:fr.symbolInstanceEnd,parameters:Vt})}else L.push({symbolInstanceStart:0,symbolInstanceEnd:ae.symbolInstances.length,parameters:Vt})}},Mn.prototype.attemptAnchorPlacement=function(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge,Qe,st,Mt,It,Ct){var Pt,kt=[st.textOffset0,st.textOffset1],Vt=Nn(L,F,Y,kt,ae),Nt=this.collisionIndex.placeCollisionBox(Hn(R,Vt.x,Vt.y,fe,ve,this.transform.angle),Qe,Ae,Pe,Ge.predicate);if((!Ct||0!==this.collisionIndex.placeCollisionBox(Hn(Ct,Vt.x,Vt.y,fe,ve,this.transform.angle),Qe,Ae,Pe,Ge.predicate).box.length)&&Nt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID].text&&(Pt=this.prevPlacement.variableOffsets[st.crossTileID].anchor),this.variableOffsets[st.crossTileID]={textOffset:kt,width:F,height:Y,anchor:L,textBoxScale:ae,prevAnchor:Pt},this.markUsedJustification(Mt,L,st,It),Mt.allowVerticalPlacement&&(this.markUsedOrientation(Mt,It,st),this.placedOrientations[st.crossTileID]=It),{shift:Vt,placedGlyphBoxes:Nt}},Mn.prototype.placeLayerBucketPart=function(L,R,F){var Y=this,ae=L.parameters,fe=ae.bucket,ve=ae.layout,Ae=ae.posMatrix,Pe=ae.textLabelPlaneMatrix,Ge=ae.labelToScreenMatrix,Qe=ae.textPixelRatio,st=ae.holdingForFade,Mt=ae.collisionBoxArray,It=ae.partiallyEvaluatedTextSize,Ct=ae.collisionGroup,Pt=ve.get("text-optional"),kt=ve.get("icon-optional"),Vt=ve.get("text-allow-overlap"),Nt=ve.get("icon-allow-overlap"),Yt="map"===ve.get("text-rotation-alignment"),fr="map"===ve.get("text-pitch-alignment"),Mr="none"!==ve.get("icon-text-fit"),jr="viewport-y"===ve.get("symbol-z-order"),Fr=Vt&&(Nt||!fe.hasIconData()||kt),fn=Nt&&(Vt||!fe.hasTextData()||Pt);!fe.collisionArrays&&Mt&&fe.deserializeCollisionBoxes(Mt);var on=function(en,On){if(!R[en.crossTileID])if(st)Y.placements[en.crossTileID]=new Vr(!1,!1,!1);else{var ti,Qn=!1,pi=!1,wi=!0,ji=null,li={box:null,offscreen:null},Oi={box:null,offscreen:null},Li=null,Yi=null,Ei=0,Fi=0,Vi=0;On.textFeatureIndex?Ei=On.textFeatureIndex:en.useRuntimeCollisionCircles&&(Ei=en.featureIndex),On.verticalTextFeatureIndex&&(Fi=On.verticalTextFeatureIndex);var ya=On.textBox;if(ya){var ja=function(Ca){var Fo=e.WritingMode.horizontal;if(fe.allowVerticalPlacement&&!Ca&&Y.prevPlacement){var Bo=Y.prevPlacement.placedOrientations[en.crossTileID];Bo&&(Y.placedOrientations[en.crossTileID]=Bo,Y.markUsedOrientation(fe,Fo=Bo,en))}return Fo},Ua=function(Ca,Fo){if(fe.allowVerticalPlacement&&en.numVerticalGlyphVertices>0&&On.verticalTextBox)for(var Bo=0,pl=fe.writingModes;Bo<pl.length&&(pl[Bo]===e.WritingMode.vertical?(li=Fo(),Oi=li):li=Ca(),!(li&&li.box&&li.box.length));Bo+=1);else li=Ca()};if(ve.get("text-variable-anchor")){var ba=ve.get("text-variable-anchor");if(Y.prevPlacement&&Y.prevPlacement.variableOffsets[en.crossTileID]){var Fa=Y.prevPlacement.variableOffsets[en.crossTileID];ba.indexOf(Fa.anchor)>0&&(ba=ba.filter(function(Ca){return Ca!==Fa.anchor})).unshift(Fa.anchor)}var Sa=function(Ca,Fo,Bo){for(var pl=Ca.x2-Ca.x1,nc=Ca.y2-Ca.y1,ke=en.textBoxScale,ye=Mr&&!Nt?Fo:null,Ce={box:[],offscreen:!1},lt=Vt?2*ba.length:ba.length,Bt=0;Bt<lt;++Bt){var hn=Y.attemptAnchorPlacement(ba[Bt%ba.length],Ca,pl,nc,ke,Yt,fr,Qe,Ae,Ct,Bt>=ba.length,en,fe,Bo,ye);if(hn&&(Ce=hn.placedGlyphBoxes)&&Ce.box&&Ce.box.length){Qn=!0,ji=hn.shift;break}}return Ce};Ua(function(){return Sa(ya,On.iconBox,e.WritingMode.horizontal)},function(){var Ca=On.verticalTextBox;return fe.allowVerticalPlacement&&!(li&&li.box&&li.box.length)&&en.numVerticalGlyphVertices>0&&Ca?Sa(Ca,On.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),li&&(Qn=li.box,wi=li.offscreen);var Lo=ja(li&&li.box);if(!Qn&&Y.prevPlacement){var Qa=Y.prevPlacement.variableOffsets[en.crossTileID];Qa&&(Y.variableOffsets[en.crossTileID]=Qa,Y.markUsedJustification(fe,Qa.anchor,en,Lo))}}else{var Qo=function(Ca,Fo){var Bo=Y.collisionIndex.placeCollisionBox(Ca,Vt,Qe,Ae,Ct.predicate);return Bo&&Bo.box&&Bo.box.length&&(Y.markUsedOrientation(fe,Fo,en),Y.placedOrientations[en.crossTileID]=Fo),Bo};Ua(function(){return Qo(ya,e.WritingMode.horizontal)},function(){var Ca=On.verticalTextBox;return fe.allowVerticalPlacement&&en.numVerticalGlyphVertices>0&&Ca?Qo(Ca,e.WritingMode.vertical):{box:null,offscreen:null}}),ja(li&&li.box&&li.box.length)}}if(Qn=(ti=li)&&ti.box&&ti.box.length>0,wi=ti&&ti.offscreen,en.useRuntimeCollisionCircles){var Is=fe.text.placedSymbolArray.get(en.centerJustifiedTextSymbolIndex),Gs=e.evaluateSizeForFeature(fe.textSizeData,It,Is),hl=ve.get("text-padding");Li=Y.collisionIndex.placeCollisionCircles(Vt,Is,fe.lineVertexArray,fe.glyphOffsetArray,Gs,Ae,Pe,Ge,F,fr,Ct.predicate,en.collisionCircleDiameter,hl),Qn=Vt||Li.circles.length>0&&!Li.collisionDetected,wi=wi&&Li.offscreen}if(On.iconFeatureIndex&&(Vi=On.iconFeatureIndex),On.iconBox){var Ys=function(Ca){var Fo=Mr&&ji?Hn(Ca,ji.x,ji.y,Yt,fr,Y.transform.angle):Ca;return Y.collisionIndex.placeCollisionBox(Fo,Nt,Qe,Ae,Ct.predicate)};pi=Oi&&Oi.box&&Oi.box.length&&On.verticalIconBox?(Yi=Ys(On.verticalIconBox)).box.length>0:(Yi=Ys(On.iconBox)).box.length>0,wi=wi&&Yi.offscreen}var Po=Pt||0===en.numHorizontalGlyphVertices&&0===en.numVerticalGlyphVertices,Xs=kt||0===en.numIconVertices;if(Po||Xs?Xs?Po||(pi=pi&&Qn):Qn=pi&&Qn:pi=Qn=pi&&Qn,Qn&&ti&&ti.box&&Y.collisionIndex.insertCollisionBox(ti.box,ve.get("text-ignore-placement"),fe.bucketInstanceId,Oi&&Oi.box&&Fi?Fi:Ei,Ct.ID),pi&&Yi&&Y.collisionIndex.insertCollisionBox(Yi.box,ve.get("icon-ignore-placement"),fe.bucketInstanceId,Vi,Ct.ID),Li&&(Qn&&Y.collisionIndex.insertCollisionCircles(Li.circles,ve.get("text-ignore-placement"),fe.bucketInstanceId,Ei,Ct.ID),F)){var al=fe.bucketInstanceId,cs=Y.collisionCircleArrays[al];void 0===cs&&(cs=Y.collisionCircleArrays[al]=new _n);for(var ol=0;ol<Li.circles.length;ol+=4)cs.circles.push(Li.circles[ol+0]),cs.circles.push(Li.circles[ol+1]),cs.circles.push(Li.circles[ol+2]),cs.circles.push(Li.collisionDetected?1:0)}Y.placements[en.crossTileID]=new Vr(Qn||Fr,pi||fn,wi||fe.justReloaded),R[en.crossTileID]=!0}};if(jr)for(var wn=fe.getSortedSymbolIndexes(this.transform.angle),yn=wn.length-1;yn>=0;--yn){var Jn=wn[yn];on(fe.symbolInstances.get(Jn),fe.collisionArrays[Jn])}else for(var ii=L.symbolInstanceStart;ii<L.symbolInstanceEnd;ii++)on(fe.symbolInstances.get(ii),fe.collisionArrays[ii]);if(F&&fe.bucketInstanceId in this.collisionCircleArrays){var xi=this.collisionCircleArrays[fe.bucketInstanceId];e.invert(xi.invProjMatrix,Ae),xi.viewportMatrix=this.collisionIndex.getViewportMatrix()}fe.justReloaded=!1},Mn.prototype.markUsedJustification=function(L,R,F,Y){var ae;ae=Y===e.WritingMode.vertical?F.verticalPlacedTextSymbolIndex:{left:F.leftJustifiedTextSymbolIndex,center:F.centerJustifiedTextSymbolIndex,right:F.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(R)];for(var ve=0,Ae=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex,F.verticalPlacedTextSymbolIndex];ve<Ae.length;ve+=1){var Pe=Ae[ve];Pe>=0&&(L.text.placedSymbolArray.get(Pe).crossTileID=ae>=0&&Pe!==ae?0:F.crossTileID)}},Mn.prototype.markUsedOrientation=function(L,R,F){for(var Y=R===e.WritingMode.horizontal||R===e.WritingMode.horizontalOnly?R:0,ae=R===e.WritingMode.vertical?R:0,fe=0,ve=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex];fe<ve.length;fe+=1)L.text.placedSymbolArray.get(ve[fe]).placedOrientation=Y;F.verticalPlacedTextSymbolIndex&&(L.text.placedSymbolArray.get(F.verticalPlacedTextSymbolIndex).placedOrientation=ae)},Mn.prototype.commit=function(L){this.commitTime=L,this.zoomAtLastRecencyCheck=this.transform.zoom;var R=this.prevPlacement,F=!1;this.prevZoomAdjustment=R?R.zoomAdjustment(this.transform.zoom):0;var Y=R?R.symbolFadeChange(L):1,ae=R?R.opacities:{},fe=R?R.variableOffsets:{},ve=R?R.placedOrientations:{};for(var Ae in this.placements){var Pe=this.placements[Ae],Ge=ae[Ae];Ge?(this.opacities[Ae]=new zn(Ge,Y,Pe.text,Pe.icon),F=F||Pe.text!==Ge.text.placed||Pe.icon!==Ge.icon.placed):(this.opacities[Ae]=new zn(null,Y,Pe.text,Pe.icon,Pe.skipFade),F=F||Pe.text||Pe.icon)}for(var Qe in ae){var st=ae[Qe];if(!this.opacities[Qe]){var Mt=new zn(st,Y,!1,!1);Mt.isHidden()||(this.opacities[Qe]=Mt,F=F||st.text.placed||st.icon.placed)}}for(var It in fe)this.variableOffsets[It]||!this.opacities[It]||this.opacities[It].isHidden()||(this.variableOffsets[It]=fe[It]);for(var Ct in ve)this.placedOrientations[Ct]||!this.opacities[Ct]||this.opacities[Ct].isHidden()||(this.placedOrientations[Ct]=ve[Ct]);F?this.lastPlacementChangeTime=L:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=R?R.lastPlacementChangeTime:L)},Mn.prototype.updateLayerOpacities=function(L,R){for(var F={},Y=0,ae=R;Y<ae.length;Y+=1){var fe=ae[Y],ve=fe.getBucket(L);ve&&fe.latestFeatureIndex&&L.id===ve.layerIds[0]&&this.updateBucketOpacities(ve,F,fe.collisionBoxArray)}},Mn.prototype.updateBucketOpacities=function(L,R,F){var Y=this;L.hasTextData()&&L.text.opacityVertexArray.clear(),L.hasIconData()&&L.icon.opacityVertexArray.clear(),L.hasIconCollisionBoxData()&&L.iconCollisionBox.collisionVertexArray.clear(),L.hasTextCollisionBoxData()&&L.textCollisionBox.collisionVertexArray.clear();var ae=L.layers[0].layout,fe=new zn(null,0,!1,!1,!0),ve=ae.get("text-allow-overlap"),Ae=ae.get("icon-allow-overlap"),Pe=ae.get("text-variable-anchor"),Ge="map"===ae.get("text-rotation-alignment"),Qe="map"===ae.get("text-pitch-alignment"),st="none"!==ae.get("icon-text-fit"),Mt=new zn(null,0,ve&&(Ae||!L.hasIconData()||ae.get("icon-optional")),Ae&&(ve||!L.hasTextData()||ae.get("text-optional")),!0);!L.collisionArrays&&F&&(L.hasIconCollisionBoxData()||L.hasTextCollisionBoxData())&&L.deserializeCollisionBoxes(F);for(var It=function(Vt,Nt,Yt){for(var fr=0;fr<Nt/4;fr++)Vt.opacityVertexArray.emplaceBack(Yt)},Ct=function(Vt){var Nt=L.symbolInstances.get(Vt),Yt=Nt.numHorizontalGlyphVertices,fr=Nt.numVerticalGlyphVertices,Mr=Nt.crossTileID,Fr=Y.opacities[Mr];R[Mr]?Fr=fe:Fr||(Y.opacities[Mr]=Fr=Mt),R[Mr]=!0;var on=Nt.numIconVertices>0,wn=Y.placedOrientations[Nt.crossTileID],yn=wn===e.WritingMode.vertical,Jn=wn===e.WritingMode.horizontal||wn===e.WritingMode.horizontalOnly;if(Yt>0||fr>0){var ii=Ur(Fr.text);It(L.text,Yt,yn?Yr:ii),It(L.text,fr,Jn?Yr:ii);var On=Fr.text.isHidden();[Nt.rightJustifiedTextSymbolIndex,Nt.centerJustifiedTextSymbolIndex,Nt.leftJustifiedTextSymbolIndex].forEach(function(Vi){Vi>=0&&(L.text.placedSymbolArray.get(Vi).hidden=On||yn?1:0)}),Nt.verticalPlacedTextSymbolIndex>=0&&(L.text.placedSymbolArray.get(Nt.verticalPlacedTextSymbolIndex).hidden=On||Jn?1:0);var ti=Y.variableOffsets[Nt.crossTileID];ti&&Y.markUsedJustification(L,ti.anchor,Nt,wn);var Qn=Y.placedOrientations[Nt.crossTileID];Qn&&(Y.markUsedJustification(L,"left",Nt,Qn),Y.markUsedOrientation(L,Qn,Nt))}if(on){var pi=Ur(Fr.icon),wi=!(st&&Nt.verticalPlacedIconSymbolIndex&&yn);Nt.placedIconSymbolIndex>=0&&(It(L.icon,Nt.numIconVertices,wi?pi:Yr),L.icon.placedSymbolArray.get(Nt.placedIconSymbolIndex).hidden=Fr.icon.isHidden()),Nt.verticalPlacedIconSymbolIndex>=0&&(It(L.icon,Nt.numVerticalIconVertices,wi?Yr:pi),L.icon.placedSymbolArray.get(Nt.verticalPlacedIconSymbolIndex).hidden=Fr.icon.isHidden())}if(L.hasIconCollisionBoxData()||L.hasTextCollisionBoxData()){var Oi=L.collisionArrays[Vt];if(Oi){var Li=new e.Point(0,0);if(Oi.textBox||Oi.verticalTextBox){var Yi=!0;if(Pe){var Ei=Y.variableOffsets[Mr];Ei?(Li=Nn(Ei.anchor,Ei.width,Ei.height,Ei.textOffset,Ei.textBoxScale),Ge&&Li._rotate(Qe?Y.transform.angle:-Y.transform.angle)):Yi=!1}Oi.textBox&&Un(L.textCollisionBox.collisionVertexArray,Fr.text.placed,!Yi||yn,Li.x,Li.y),Oi.verticalTextBox&&Un(L.textCollisionBox.collisionVertexArray,Fr.text.placed,!Yi||Jn,Li.x,Li.y)}var Fi=Boolean(!Jn&&Oi.verticalIconBox);Oi.iconBox&&Un(L.iconCollisionBox.collisionVertexArray,Fr.icon.placed,Fi,st?Li.x:0,st?Li.y:0),Oi.verticalIconBox&&Un(L.iconCollisionBox.collisionVertexArray,Fr.icon.placed,!Fi,st?Li.x:0,st?Li.y:0)}}},Pt=0;Pt<L.symbolInstances.length;Pt++)Ct(Pt);if(L.sortFeatures(this.transform.angle),this.retainedQueryData[L.bucketInstanceId]&&(this.retainedQueryData[L.bucketInstanceId].featureSortOrder=L.featureSortOrder),L.hasTextData()&&L.text.opacityVertexBuffer&&L.text.opacityVertexBuffer.updateData(L.text.opacityVertexArray),L.hasIconData()&&L.icon.opacityVertexBuffer&&L.icon.opacityVertexBuffer.updateData(L.icon.opacityVertexArray),L.hasIconCollisionBoxData()&&L.iconCollisionBox.collisionVertexBuffer&&L.iconCollisionBox.collisionVertexBuffer.updateData(L.iconCollisionBox.collisionVertexArray),L.hasTextCollisionBoxData()&&L.textCollisionBox.collisionVertexBuffer&&L.textCollisionBox.collisionVertexBuffer.updateData(L.textCollisionBox.collisionVertexArray),L.bucketInstanceId in this.collisionCircleArrays){var kt=this.collisionCircleArrays[L.bucketInstanceId];L.placementInvProjMatrix=kt.invProjMatrix,L.placementViewportMatrix=kt.viewportMatrix,L.collisionCircleArray=kt.circles,delete this.collisionCircleArrays[L.bucketInstanceId]}},Mn.prototype.symbolFadeChange=function(L){return 0===this.fadeDuration?1:(L-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Mn.prototype.zoomAdjustment=function(L){return Math.max(0,(this.transform.zoom-L)/1.5)},Mn.prototype.hasTransitions=function(L){return this.stale||L-this.lastPlacementChangeTime<this.fadeDuration},Mn.prototype.stillRecent=function(L,R){var F=this.zoomAtLastRecencyCheck===R?1-this.zoomAdjustment(R):1;return this.zoomAtLastRecencyCheck=R,this.commitTime+this.fadeDuration*F>L},Mn.prototype.setStale=function(){this.stale=!0};var di=Math.pow(2,25),rr=Math.pow(2,24),Sr=Math.pow(2,17),Rt=Math.pow(2,16),gr=Math.pow(2,9),xr=Math.pow(2,8),Zr=Math.pow(2,1);function Ur(L){if(0===L.opacity&&!L.placed)return 0;if(1===L.opacity&&L.placed)return 4294967295;var R=L.placed?1:0,F=Math.floor(127*L.opacity);return F*di+R*rr+F*Sr+R*Rt+F*gr+R*xr+F*Zr+R}var Yr=0,Br=function(L){this._sortAcrossTiles="viewport-y"!==L.layout.get("symbol-z-order")&&void 0!==L.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Br.prototype.continuePlacement=function(L,R,F,Y,ae){for(var fe=this._bucketParts;this._currentTileIndex<L.length;)if(R.getBucketParts(fe,Y,L[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ae())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,fe.sort(function(Pe,Ge){return Pe.sortKey-Ge.sortKey}));this._currentPartIndex<fe.length;)if(R.placeLayerBucketPart(fe[this._currentPartIndex],this._seenCrossTileIDs,F),this._currentPartIndex++,ae())return!0;return!1};var Cr=function(L,R,F,Y,ae,fe,ve){this.placement=new Mn(L,ae,fe,ve),this._currentPlacementIndex=R.length-1,this._forceFullPlacement=F,this._showCollisionBoxes=Y,this._done=!1};Cr.prototype.isDone=function(){return this._done},Cr.prototype.continuePlacement=function(L,R,F){for(var Y=this,ae=e.browser.now(),fe=function(){var Pe=e.browser.now()-ae;return!Y._forceFullPlacement&&Pe>2};this._currentPlacementIndex>=0;){var ve=R[L[this._currentPlacementIndex]],Ae=this.placement.collisionIndex.transform.zoom;if("symbol"===ve.type&&(!ve.minzoom||ve.minzoom<=Ae)&&(!ve.maxzoom||ve.maxzoom>Ae)){if(this._inProgressLayer||(this._inProgressLayer=new Br(ve)),this._inProgressLayer.continuePlacement(F[ve.source],this.placement,this._showCollisionBoxes,ve,fe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Cr.prototype.commit=function(L){return this.placement.commit(L),this.placement};var Or=512/e.EXTENT/2,Dr=function(L,R,F){this.tileID=L,this.indexedSymbolInstances={},this.bucketInstanceId=F;for(var Y=0;Y<R.length;Y++){var ae=R.get(Y),fe=ae.key;this.indexedSymbolInstances[fe]||(this.indexedSymbolInstances[fe]=[]),this.indexedSymbolInstances[fe].push({crossTileID:ae.crossTileID,coord:this.getScaledCoordinates(ae,L)})}};Dr.prototype.getScaledCoordinates=function(L,R){var Y=Or/Math.pow(2,R.canonical.z-this.tileID.canonical.z);return{x:Math.floor((R.canonical.x*e.EXTENT+L.anchorX)*Y),y:Math.floor((R.canonical.y*e.EXTENT+L.anchorY)*Y)}},Dr.prototype.findMatches=function(L,R,F){for(var Y=this.tileID.canonical.z<R.canonical.z?1:Math.pow(2,this.tileID.canonical.z-R.canonical.z),ae=0;ae<L.length;ae++){var fe=L.get(ae);if(!fe.crossTileID){var ve=this.indexedSymbolInstances[fe.key];if(ve)for(var Ae=this.getScaledCoordinates(fe,R),Pe=0,Ge=ve;Pe<Ge.length;Pe+=1){var Qe=Ge[Pe];if(Math.abs(Qe.coord.x-Ae.x)<=Y&&Math.abs(Qe.coord.y-Ae.y)<=Y&&!F[Qe.crossTileID]){F[Qe.crossTileID]=!0,fe.crossTileID=Qe.crossTileID;break}}}}};var Nr=function(){this.maxCrossTileID=0};Nr.prototype.generate=function(){return++this.maxCrossTileID};var nn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};nn.prototype.handleWrapJump=function(L){var R=Math.round((L-this.lng)/360);if(0!==R)for(var F in this.indexes){var Y=this.indexes[F],ae={};for(var fe in Y){var ve=Y[fe];ve.tileID=ve.tileID.unwrapTo(ve.tileID.wrap+R),ae[ve.tileID.key]=ve}this.indexes[F]=ae}this.lng=L},nn.prototype.addBucket=function(L,R,F){if(this.indexes[L.overscaledZ]&&this.indexes[L.overscaledZ][L.key]){if(this.indexes[L.overscaledZ][L.key].bucketInstanceId===R.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(L.overscaledZ,this.indexes[L.overscaledZ][L.key])}for(var Y=0;Y<R.symbolInstances.length;Y++)R.symbolInstances.get(Y).crossTileID=0;this.usedCrossTileIDs[L.overscaledZ]||(this.usedCrossTileIDs[L.overscaledZ]={});var ae=this.usedCrossTileIDs[L.overscaledZ];for(var fe in this.indexes){var ve=this.indexes[fe];if(Number(fe)>L.overscaledZ)for(var Ae in ve){var Pe=ve[Ae];Pe.tileID.isChildOf(L)&&Pe.findMatches(R.symbolInstances,L,ae)}else{var Ge=ve[L.scaledTo(Number(fe)).key];Ge&&Ge.findMatches(R.symbolInstances,L,ae)}}for(var Qe=0;Qe<R.symbolInstances.length;Qe++){var st=R.symbolInstances.get(Qe);st.crossTileID||(st.crossTileID=F.generate(),ae[st.crossTileID]=!0)}return void 0===this.indexes[L.overscaledZ]&&(this.indexes[L.overscaledZ]={}),this.indexes[L.overscaledZ][L.key]=new Dr(L,R.symbolInstances,R.bucketInstanceId),!0},nn.prototype.removeBucketCrossTileIDs=function(L,R){for(var F in R.indexedSymbolInstances)for(var Y=0,ae=R.indexedSymbolInstances[F];Y<ae.length;Y+=1)delete this.usedCrossTileIDs[L][ae[Y].crossTileID]},nn.prototype.removeStaleBuckets=function(L){var R=!1;for(var F in this.indexes){var Y=this.indexes[F];for(var ae in Y)L[Y[ae].bucketInstanceId]||(this.removeBucketCrossTileIDs(F,Y[ae]),delete Y[ae],R=!0)}return R};var rn=function(){this.layerIndexes={},this.crossTileIDs=new Nr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};rn.prototype.addLayer=function(L,R,F){var Y=this.layerIndexes[L.id];void 0===Y&&(Y=this.layerIndexes[L.id]=new nn);var ae=!1,fe={};Y.handleWrapJump(F);for(var ve=0,Ae=R;ve<Ae.length;ve+=1){var Pe=Ae[ve],Ge=Pe.getBucket(L);Ge&&L.id===Ge.layerIds[0]&&(Ge.bucketInstanceId||(Ge.bucketInstanceId=++this.maxBucketInstanceId),Y.addBucket(Pe.tileID,Ge,this.crossTileIDs)&&(ae=!0),fe[Ge.bucketInstanceId]=!0)}return Y.removeStaleBuckets(fe)&&(ae=!0),ae},rn.prototype.pruneUnusedLayers=function(L){var R={};for(var F in L.forEach(function(Y){R[Y]=!0}),this.layerIndexes)R[F]||delete this.layerIndexes[F]};var pn=function(L,R){return e.emitValidationErrors(L,R&&R.filter(function(F){return"source.canvas"!==F.identifier}))},dn=e.pick(Et,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Sn=e.pick(Et,["setCenter","setZoom","setBearing","setPitch"]),En=function(){var L={},R=e.styleSpec.$version;for(var F in e.styleSpec.$root){var Y=e.styleSpec.$root[F];if(Y.required){var ae;null!=(ae="version"===F?R:"array"===Y.type?[]:{})&&(L[F]=ae)}}return L}(),Ln=function(L){function R(F,Y){var ae=this;void 0===Y&&(Y={}),L.call(this),this.map=F,this.dispatcher=new S(at(),this),this.imageManager=new g,this.imageManager.setEventedParent(this),this.glyphManager=new w(F._requestManager,Y.localIdeographFontFamily),this.lineAtlas=new P(256,512),this.crossTileSymbolIndex=new rn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var fe=this;this._rtlTextPluginCallback=R.registerForPluginStateChange(function(ve){fe.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:ve.pluginStatus,pluginURL:ve.pluginURL},function(Pe,Ge){if(e.triggerPluginCompletionEvent(Pe),Ge&&Ge.every(function(st){return st}))for(var Qe in fe.sourceCaches)fe.sourceCaches[Qe].reload()})}),this.on("data",function(ve){if("source"===ve.dataType&&"metadata"===ve.sourceDataType){var Ae=ae.sourceCaches[ve.sourceId];if(Ae){var Pe=Ae.getSource();if(Pe&&Pe.vectorLayerIds)for(var Ge in ae._layers){var Qe=ae._layers[Ge];Qe.source===Pe.id&&ae._validateLayer(Qe)}}}})}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.loadURL=function(F,Y){var ae=this;void 0===Y&&(Y={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var fe="boolean"==typeof Y.validate?Y.validate:!e.isMapboxURL(F);F=this.map._requestManager.normalizeStyleURL(F,Y.accessToken);var ve=this.map._requestManager.transformRequest(F,e.ResourceType.Style);this._request=e.getJSON(ve,function(Ae,Pe){ae._request=null,Ae?ae.fire(new e.ErrorEvent(Ae)):Pe&&ae._load(Pe,fe)})},R.prototype.loadJSON=function(F,Y){var ae=this;void 0===Y&&(Y={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){ae._request=null,ae._load(F,!1!==Y.validate)})},R.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(En,!1)},R.prototype._load=function(F,Y){if(!Y||!pn(this,e.validateStyle(F))){for(var ae in this._loaded=!0,this.stylesheet=F,F.sources)this.addSource(ae,F.sources[ae],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs);var fe=qt(this.stylesheet.layers);this._order=fe.map(function(Ge){return Ge.id}),this._layers={},this._serializedLayers={};for(var ve=0,Ae=fe;ve<Ae.length;ve+=1){var Pe=Ae[ve];(Pe=e.createStyleLayer(Pe)).setEventedParent(this,{layer:{id:Pe.id}}),this._layers[Pe.id]=Pe,this._serializedLayers[Pe.id]=Pe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},R.prototype._loadSprite=function(F){var Y=this;this._spriteRequest=function(ae,fe,ve){var Ae,Pe,Ge,Qe=e.browser.devicePixelRatio>1?"@2x":"",st=e.getJSON(fe.transformRequest(fe.normalizeSpriteURL(ae,Qe,".json"),e.ResourceType.SpriteJSON),function(Ct,Pt){st=null,Ge||(Ge=Ct,Ae=Pt,It())}),Mt=e.getImage(fe.transformRequest(fe.normalizeSpriteURL(ae,Qe,".png"),e.ResourceType.SpriteImage),function(Ct,Pt){Mt=null,Ge||(Ge=Ct,Pe=Pt,It())});function It(){if(Ge)ve(Ge);else if(Ae&&Pe){var Ct=e.browser.getImageData(Pe),Pt={};for(var kt in Ae){var Vt=Ae[kt],Nt=Vt.width,Yt=Vt.height,fr=Vt.x,Mr=Vt.y,jr=Vt.sdf,Fr=Vt.pixelRatio,fn=Vt.stretchX,on=Vt.stretchY,wn=Vt.content,yn=new e.RGBAImage({width:Nt,height:Yt});e.RGBAImage.copy(Ct,yn,{x:fr,y:Mr},{x:0,y:0},{width:Nt,height:Yt}),Pt[kt]={data:yn,pixelRatio:Fr,sdf:jr,stretchX:fn,stretchY:on,content:wn}}ve(null,Pt)}}return{cancel:function(){st&&(st.cancel(),st=null),Mt&&(Mt.cancel(),Mt=null)}}}(F,this.map._requestManager,function(ae,fe){if(Y._spriteRequest=null,ae)Y.fire(new e.ErrorEvent(ae));else if(fe)for(var ve in fe)Y.imageManager.addImage(ve,fe[ve]);Y.imageManager.setLoaded(!0),Y._availableImages=Y.imageManager.listImages(),Y.dispatcher.broadcast("setImages",Y._availableImages),Y.fire(new e.Event("data",{dataType:"style"}))})},R.prototype._validateLayer=function(F){var Y=this.sourceCaches[F.source];if(Y){var ae=F.sourceLayer;if(ae){var fe=Y.getSource();("geojson"===fe.type||fe.vectorLayerIds&&-1===fe.vectorLayerIds.indexOf(ae))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+ae+'" does not exist on source "'+fe.id+'" as specified by style layer "'+F.id+'"')))}}},R.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var F in this.sourceCaches)if(!this.sourceCaches[F].loaded())return!1;return!!this.imageManager.isLoaded()},R.prototype._serializeLayers=function(F){for(var Y=[],ae=0,fe=F;ae<fe.length;ae+=1){var Ae=this._layers[fe[ae]];"custom"!==Ae.type&&Y.push(Ae.serialize())}return Y},R.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var F in this.sourceCaches)if(this.sourceCaches[F].hasTransition())return!0;for(var Y in this._layers)if(this._layers[Y].hasTransition())return!0;return!1},R.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},R.prototype.update=function(F){if(this._loaded){var Y=this._changed;if(this._changed){var ae=Object.keys(this._updatedLayers),fe=Object.keys(this._removedLayers);for(var ve in(ae.length||fe.length)&&this._updateWorkerLayers(ae,fe),this._updatedSources){var Ae=this._updatedSources[ve];"reload"===Ae?this._reloadSource(ve):"clear"===Ae&&this._clearSource(ve)}for(var Pe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Pe].updateTransitions(F);this.light.updateTransitions(F),this._resetUpdates()}for(var Ge in this.sourceCaches)this.sourceCaches[Ge].used=!1;for(var Qe=0,st=this._order;Qe<st.length;Qe+=1){var It=this._layers[st[Qe]];It.recalculate(F,this._availableImages),!It.isHidden(F.zoom)&&It.source&&(this.sourceCaches[It.source].used=!0)}this.light.recalculate(F),this.z=F.zoom,Y&&this.fire(new e.Event("data",{dataType:"style"}))}},R.prototype._updateTilesForChangedImages=function(){var F=Object.keys(this._changedImages);if(F.length){for(var Y in this.sourceCaches)this.sourceCaches[Y].reloadTilesForDependencies(["icons","patterns"],F);this._changedImages={}}},R.prototype._updateWorkerLayers=function(F,Y){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(F),removedIds:Y})},R.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},R.prototype.setState=function(F){var Y=this;if(this._checkLoaded(),pn(this,e.validateStyle(F)))return!1;(F=e.clone$1(F)).layers=qt(F.layers);var ae=function $t(L,R){if(!L)return[{command:Et.setStyle,args:[R]}];var F=[];try{if(!e.deepEqual(L.version,R.version))return[{command:Et.setStyle,args:[R]}];e.deepEqual(L.center,R.center)||F.push({command:Et.setCenter,args:[R.center]}),e.deepEqual(L.zoom,R.zoom)||F.push({command:Et.setZoom,args:[R.zoom]}),e.deepEqual(L.bearing,R.bearing)||F.push({command:Et.setBearing,args:[R.bearing]}),e.deepEqual(L.pitch,R.pitch)||F.push({command:Et.setPitch,args:[R.pitch]}),e.deepEqual(L.sprite,R.sprite)||F.push({command:Et.setSprite,args:[R.sprite]}),e.deepEqual(L.glyphs,R.glyphs)||F.push({command:Et.setGlyphs,args:[R.glyphs]}),e.deepEqual(L.transition,R.transition)||F.push({command:Et.setTransition,args:[R.transition]}),e.deepEqual(L.light,R.light)||F.push({command:Et.setLight,args:[R.light]});var Y={},ae=[];!function(ve,Ae,Pe,Ge){var Qe;for(Qe in Ae=Ae||{},ve=ve||{})ve.hasOwnProperty(Qe)&&(Ae.hasOwnProperty(Qe)||Le(Qe,Pe,Ge));for(Qe in Ae)Ae.hasOwnProperty(Qe)&&(ve.hasOwnProperty(Qe)?e.deepEqual(ve[Qe],Ae[Qe])||("geojson"===ve[Qe].type&&"geojson"===Ae[Qe].type&&ot(ve,Ae,Qe)?Pe.push({command:Et.setGeoJSONSourceData,args:[Qe,Ae[Qe].data]}):Xe(Qe,Ae,Pe,Ge)):Dt(Qe,Ae,Pe))}(L.sources,R.sources,ae,Y);var fe=[];L.layers&&L.layers.forEach(function(ve){Y[ve.source]?F.push({command:Et.removeLayer,args:[ve.id]}):fe.push(ve)}),F=F.concat(ae),function(ve,Ae,Pe){Ae=Ae||[];var Ge,Qe,st,Mt,It,Ct,Pt,kt=(ve=ve||[]).map(Lt),Vt=Ae.map(Lt),Nt=ve.reduce(Ut,{}),Yt=Ae.reduce(Ut,{}),fr=kt.slice(),Mr=Object.create(null);for(Ge=0,Qe=0;Ge<kt.length;Ge++)Yt.hasOwnProperty(st=kt[Ge])?Qe++:(Pe.push({command:Et.removeLayer,args:[st]}),fr.splice(fr.indexOf(st,Qe),1));for(Ge=0,Qe=0;Ge<Vt.length;Ge++)fr[fr.length-1-Ge]!==(st=Vt[Vt.length-1-Ge])&&(Nt.hasOwnProperty(st)?(Pe.push({command:Et.removeLayer,args:[st]}),fr.splice(fr.lastIndexOf(st,fr.length-Qe),1)):Qe++,Pe.push({command:Et.addLayer,args:[Yt[st],Ct=fr[fr.length-Ge]]}),fr.splice(fr.length-Ge,0,st),Mr[st]=!0);for(Ge=0;Ge<Vt.length;Ge++)if(Mt=Nt[st=Vt[Ge]],It=Yt[st],!Mr[st]&&!e.deepEqual(Mt,It))if(e.deepEqual(Mt.source,It.source)&&e.deepEqual(Mt["source-layer"],It["source-layer"])&&e.deepEqual(Mt.type,It.type)){for(Pt in dt(Mt.layout,It.layout,Pe,st,null,Et.setLayoutProperty),dt(Mt.paint,It.paint,Pe,st,null,Et.setPaintProperty),e.deepEqual(Mt.filter,It.filter)||Pe.push({command:Et.setFilter,args:[st,It.filter]}),e.deepEqual(Mt.minzoom,It.minzoom)&&e.deepEqual(Mt.maxzoom,It.maxzoom)||Pe.push({command:Et.setLayerZoomRange,args:[st,It.minzoom,It.maxzoom]}),Mt)Mt.hasOwnProperty(Pt)&&"layout"!==Pt&&"paint"!==Pt&&"filter"!==Pt&&"metadata"!==Pt&&"minzoom"!==Pt&&"maxzoom"!==Pt&&(0===Pt.indexOf("paint.")?dt(Mt[Pt],It[Pt],Pe,st,Pt.slice(6),Et.setPaintProperty):e.deepEqual(Mt[Pt],It[Pt])||Pe.push({command:Et.setLayerProperty,args:[st,Pt,It[Pt]]}));for(Pt in It)It.hasOwnProperty(Pt)&&!Mt.hasOwnProperty(Pt)&&"layout"!==Pt&&"paint"!==Pt&&"filter"!==Pt&&"metadata"!==Pt&&"minzoom"!==Pt&&"maxzoom"!==Pt&&(0===Pt.indexOf("paint.")?dt(Mt[Pt],It[Pt],Pe,st,Pt.slice(6),Et.setPaintProperty):e.deepEqual(Mt[Pt],It[Pt])||Pe.push({command:Et.setLayerProperty,args:[st,Pt,It[Pt]]}))}else Pe.push({command:Et.removeLayer,args:[st]}),Ct=fr[fr.lastIndexOf(st)+1],Pe.push({command:Et.addLayer,args:[It,Ct]})}(fe,R.layers,F)}catch(ve){console.warn("Unable to compute style diff:",ve),F=[{command:Et.setStyle,args:[R]}]}return F}(this.serialize(),F).filter(function(ve){return!(ve.command in Sn)});if(0===ae.length)return!1;var fe=ae.filter(function(ve){return!(ve.command in dn)});if(fe.length>0)throw new Error("Unimplemented: "+fe.map(function(ve){return ve.command}).join(", ")+".");return ae.forEach(function(ve){"setTransition"!==ve.command&&Y[ve.command].apply(Y,ve.args)}),this.stylesheet=F,!0},R.prototype.addImage=function(F,Y){if(this.getImage(F))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(F,Y),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},R.prototype.updateImage=function(F,Y){this.imageManager.updateImage(F,Y)},R.prototype.getImage=function(F){return this.imageManager.getImage(F)},R.prototype.removeImage=function(F){if(!this.getImage(F))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(F),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},R.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},R.prototype.addSource=function(F,Y,ae){var fe=this;if(void 0===ae&&(ae={}),this._checkLoaded(),void 0!==this.sourceCaches[F])throw new Error("There is already a source with this ID");if(!Y.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(Y).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(Y.type)>=0&&this._validate(e.validateStyle.source,"sources."+F,Y,null,ae))){this.map&&this.map._collectResourceTiming&&(Y.collectResourceTiming=!0);var ve=this.sourceCaches[F]=new Be(F,Y,this.dispatcher);ve.style=this,ve.setEventedParent(this,function(){return{isSourceLoaded:fe.loaded(),source:ve.serialize(),sourceId:F}}),ve.onAdd(this.map),this._changed=!0}},R.prototype.removeSource=function(F){if(this._checkLoaded(),void 0===this.sourceCaches[F])throw new Error("There is no source with this ID");for(var Y in this._layers)if(this._layers[Y].source===F)return this.fire(new e.ErrorEvent(new Error('Source "'+F+'" cannot be removed while layer "'+Y+'" is using it.')));var ae=this.sourceCaches[F];delete this.sourceCaches[F],delete this._updatedSources[F],ae.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:F})),ae.setEventedParent(null),ae.clearTiles(),ae.onRemove&&ae.onRemove(this.map),this._changed=!0},R.prototype.setGeoJSONSourceData=function(F,Y){this._checkLoaded(),this.sourceCaches[F].getSource().setData(Y),this._changed=!0},R.prototype.getSource=function(F){return this.sourceCaches[F]&&this.sourceCaches[F].getSource()},R.prototype.addLayer=function(F,Y,ae){void 0===ae&&(ae={}),this._checkLoaded();var fe=F.id;if(this.getLayer(fe))this.fire(new e.ErrorEvent(new Error('Layer with id "'+fe+'" already exists on this map')));else{var ve;if("custom"===F.type){if(pn(this,e.validateCustomStyleLayer(F)))return;ve=e.createStyleLayer(F)}else{if("object"==typeof F.source&&(this.addSource(fe,F.source),F=e.clone$1(F),F=e.extend(F,{source:fe})),this._validate(e.validateStyle.layer,"layers."+fe,F,{arrayIndex:-1},ae))return;ve=e.createStyleLayer(F),this._validateLayer(ve),ve.setEventedParent(this,{layer:{id:fe}}),this._serializedLayers[ve.id]=ve.serialize()}var Ae=Y?this._order.indexOf(Y):this._order.length;if(Y&&-1===Ae)this.fire(new e.ErrorEvent(new Error('Layer with id "'+Y+'" does not exist on this map.')));else{if(this._order.splice(Ae,0,fe),this._layerOrderChanged=!0,this._layers[fe]=ve,this._removedLayers[fe]&&ve.source&&"custom"!==ve.type){var Pe=this._removedLayers[fe];delete this._removedLayers[fe],Pe.type!==ve.type?this._updatedSources[ve.source]="clear":(this._updatedSources[ve.source]="reload",this.sourceCaches[ve.source].pause())}this._updateLayer(ve),ve.onAdd&&ve.onAdd(this.map)}}},R.prototype.moveLayer=function(F,Y){if(this._checkLoaded(),this._changed=!0,this._layers[F]){if(F!==Y){var ae=this._order.indexOf(F);this._order.splice(ae,1);var fe=Y?this._order.indexOf(Y):this._order.length;Y&&-1===fe?this.fire(new e.ErrorEvent(new Error('Layer with id "'+Y+'" does not exist on this map.'))):(this._order.splice(fe,0,F),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be moved.")))},R.prototype.removeLayer=function(F){this._checkLoaded();var Y=this._layers[F];if(Y){Y.setEventedParent(null);var ae=this._order.indexOf(F);this._order.splice(ae,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[F]=Y,delete this._layers[F],delete this._serializedLayers[F],delete this._updatedLayers[F],delete this._updatedPaintProps[F],Y.onRemove&&Y.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be removed.")))},R.prototype.getLayer=function(F){return this._layers[F]},R.prototype.hasLayer=function(F){return F in this._layers},R.prototype.setLayerZoomRange=function(F,Y,ae){this._checkLoaded();var fe=this.getLayer(F);fe?fe.minzoom===Y&&fe.maxzoom===ae||(null!=Y&&(fe.minzoom=Y),null!=ae&&(fe.maxzoom=ae),this._updateLayer(fe)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot have zoom extent.")))},R.prototype.setFilter=function(F,Y,ae){void 0===ae&&(ae={}),this._checkLoaded();var fe=this.getLayer(F);if(fe){if(!e.deepEqual(fe.filter,Y))return null==Y?(fe.filter=void 0,void this._updateLayer(fe)):void(this._validate(e.validateStyle.filter,"layers."+fe.id+".filter",Y,null,ae)||(fe.filter=e.clone$1(Y),this._updateLayer(fe)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be filtered.")))},R.prototype.getFilter=function(F){return e.clone$1(this.getLayer(F).filter)},R.prototype.setLayoutProperty=function(F,Y,ae,fe){void 0===fe&&(fe={}),this._checkLoaded();var ve=this.getLayer(F);ve?e.deepEqual(ve.getLayoutProperty(Y),ae)||(ve.setLayoutProperty(Y,ae,fe),this._updateLayer(ve)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},R.prototype.getLayoutProperty=function(F,Y){var ae=this.getLayer(F);if(ae)return ae.getLayoutProperty(Y);this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style.")))},R.prototype.setPaintProperty=function(F,Y,ae,fe){void 0===fe&&(fe={}),this._checkLoaded();var ve=this.getLayer(F);ve?e.deepEqual(ve.getPaintProperty(Y),ae)||(ve.setPaintProperty(Y,ae,fe)&&this._updateLayer(ve),this._changed=!0,this._updatedPaintProps[F]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},R.prototype.getPaintProperty=function(F,Y){return this.getLayer(F).getPaintProperty(Y)},R.prototype.setFeatureState=function(F,Y){this._checkLoaded();var ae=F.source,fe=F.sourceLayer,ve=this.sourceCaches[ae];if(void 0!==ve){var Ae=ve.getSource().type;"geojson"===Ae&&fe?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==Ae||fe?(void 0===F.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ve.setFeatureState(fe,F.id,Y)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},R.prototype.removeFeatureState=function(F,Y){this._checkLoaded();var ae=F.source,fe=this.sourceCaches[ae];if(void 0!==fe){var ve=fe.getSource().type,Ae="vector"===ve?F.sourceLayer:void 0;"vector"!==ve||Ae?Y&&"string"!=typeof F.id&&"number"!=typeof F.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):fe.removeFeatureState(Ae,F.id,Y):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},R.prototype.getFeatureState=function(F){this._checkLoaded();var Y=F.source,ae=F.sourceLayer,fe=this.sourceCaches[Y];if(void 0!==fe){if("vector"!==fe.getSource().type||ae)return void 0===F.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),fe.getFeatureState(ae,F.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+Y+"' does not exist in the map's style.")))},R.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},R.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(F){return F.serialize()}),layers:this._serializeLayers(this._order)},function(F){return void 0!==F})},R.prototype._updateLayer=function(F){this._updatedLayers[F.id]=!0,F.source&&!this._updatedSources[F.source]&&"raster"!==this.sourceCaches[F.source].getSource().type&&(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause()),this._changed=!0},R.prototype._flattenAndSortRenderedFeatures=function(F){for(var Y=this,ae=function(wn){return"fill-extrusion"===Y._layers[wn].type},fe={},ve=[],Ae=this._order.length-1;Ae>=0;Ae--){var Pe=this._order[Ae];if(ae(Pe)){fe[Pe]=Ae;for(var Ge=0,Qe=F;Ge<Qe.length;Ge+=1){var st=Qe[Ge][Pe];if(st)for(var Mt=0,It=st;Mt<It.length;Mt+=1)ve.push(It[Mt])}}}ve.sort(function(wn,yn){return yn.intersectionZ-wn.intersectionZ});for(var Pt=[],kt=this._order.length-1;kt>=0;kt--){var Vt=this._order[kt];if(ae(Vt))for(var Nt=ve.length-1;Nt>=0;Nt--){var Yt=ve[Nt].feature;if(fe[Yt.layer.id]<kt)break;Pt.push(Yt),ve.pop()}else for(var fr=0,Mr=F;fr<Mr.length;fr+=1){var jr=Mr[fr][Vt];if(jr)for(var Fr=0,fn=jr;Fr<fn.length;Fr+=1)Pt.push(fn[Fr].feature)}}return Pt},R.prototype.queryRenderedFeatures=function(F,Y,ae){Y&&Y.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",Y.filter,null,Y);var fe={};if(Y&&Y.layers){if(!Array.isArray(Y.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ve=0,Ae=Y.layers;ve<Ae.length;ve+=1){var Pe=Ae[ve],Ge=this._layers[Pe];if(!Ge)return this.fire(new e.ErrorEvent(new Error("The layer '"+Pe+"' does not exist in the map's style and cannot be queried for features."))),[];fe[Ge.source]=!0}}var Qe=[];for(var st in Y.availableImages=this._availableImages,this.sourceCaches)Y.layers&&!fe[st]||Qe.push(H(this.sourceCaches[st],this._layers,this._serializedLayers,F,Y,ae));return this.placement&&Qe.push(function(Mt,It,Ct,Pt,kt,Vt,Nt){for(var Yt={},fr=Vt.queryRenderedSymbols(Pt),Mr=[],jr=0,Fr=Object.keys(fr).map(Number);jr<Fr.length;jr+=1)Mr.push(Nt[Fr[jr]]);Mr.sort(ee);for(var on=function(){var xi=yn[wn],en=xi.featureIndex.lookupSymbolFeatures(fr[xi.bucketInstanceId],It,xi.bucketIndex,xi.sourceLayerIndex,kt.filter,kt.layers,kt.availableImages,Mt);for(var On in en){var ti=Yt[On]=Yt[On]||[],Qn=en[On];Qn.sort(function(li,Oi){var Li=xi.featureSortOrder;if(Li){var Yi=Li.indexOf(li.featureIndex);return Li.indexOf(Oi.featureIndex)-Yi}return Oi.featureIndex-li.featureIndex});for(var pi=0,wi=Qn;pi<wi.length;pi+=1)ti.push(wi[pi])}},wn=0,yn=Mr;wn<yn.length;wn+=1)on();var Jn=function(xi){Yt[xi].forEach(function(en){var On=en.feature,Qn=Ct[Mt[xi].source].getFeatureState(On.layer["source-layer"],On.id);On.source=On.layer.source,On.layer["source-layer"]&&(On.sourceLayer=On.layer["source-layer"]),On.state=Qn})};for(var ii in Yt)Jn(ii);return Yt}(this._layers,this._serializedLayers,this.sourceCaches,F,Y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Qe)},R.prototype.querySourceFeatures=function(F,Y){Y&&Y.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",Y.filter,null,Y);var ae=this.sourceCaches[F];return ae?function(fe,ve){for(var Ae=fe.getRenderableIds().map(function(It){return fe.getTileByID(It)}),Pe=[],Ge={},Qe=0;Qe<Ae.length;Qe++){var st=Ae[Qe],Mt=st.tileID.canonical.key;Ge[Mt]||(Ge[Mt]=!0,st.querySourceFeatures(Pe,ve))}return Pe}(ae,Y):[]},R.prototype.addSourceType=function(F,Y,ae){return R.getSourceType(F)?ae(new Error('A source type called "'+F+'" already exists.')):(R.setSourceType(F,Y),Y.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:F,url:Y.workerSourceURL},ae):ae(null,null))},R.prototype.getLight=function(){return this.light.getLight()},R.prototype.setLight=function(F,Y){void 0===Y&&(Y={}),this._checkLoaded();var ae=this.light.getLight(),fe=!1;for(var ve in F)if(!e.deepEqual(F[ve],ae[ve])){fe=!0;break}if(fe){var Ae={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(F,Y),this.light.updateTransitions(Ae)}},R.prototype._validate=function(F,Y,ae,fe,ve){return void 0===ve&&(ve={}),(!ve||!1!==ve.validate)&&pn(this,F.call(e.validateStyle,e.extend({key:Y,style:this.serialize(),value:ae,styleSpec:e.styleSpec},fe)))},R.prototype._remove=function(){for(var F in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[F].setEventedParent(null);for(var Y in this.sourceCaches)this.sourceCaches[Y].clearTiles(),this.sourceCaches[Y].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},R.prototype._clearSource=function(F){this.sourceCaches[F].clearTiles()},R.prototype._reloadSource=function(F){this.sourceCaches[F].resume(),this.sourceCaches[F].reload()},R.prototype._updateSources=function(F){for(var Y in this.sourceCaches)this.sourceCaches[Y].update(F)},R.prototype._generateCollisionBoxes=function(){for(var F in this.sourceCaches)this._reloadSource(F)},R.prototype._updatePlacement=function(F,Y,ae,fe,ve){void 0===ve&&(ve=!1);for(var Ae=!1,Pe=!1,Ge={},Qe=0,st=this._order;Qe<st.length;Qe+=1){var It=this._layers[st[Qe]];if("symbol"===It.type){if(!Ge[It.source]){var Ct=this.sourceCaches[It.source];Ge[It.source]=Ct.getRenderableIds(!0).map(function(fr){return Ct.getTileByID(fr)}).sort(function(fr,Mr){return Mr.tileID.overscaledZ-fr.tileID.overscaledZ||(fr.tileID.isLessThan(Mr.tileID)?-1:1)})}var Pt=this.crossTileSymbolIndex.addLayer(It,Ge[It.source],F.center.lng);Ae=Ae||Pt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ve=ve||this._layerOrderChanged||0===ae)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),F.zoom))&&(this.pauseablePlacement=new Cr(F,this._order,ve,Y,ae,fe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ge),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Pe=!0),Ae&&this.pauseablePlacement.placement.setStale()),Pe||Ae)for(var kt=0,Vt=this._order;kt<Vt.length;kt+=1){var Yt=this._layers[Vt[kt]];"symbol"===Yt.type&&this.placement.updateLayerOpacities(Yt,Ge[Yt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},R.prototype._releaseSymbolFadeTiles=function(){for(var F in this.sourceCaches)this.sourceCaches[F].releaseSymbolFadeTiles()},R.prototype.getImages=function(F,Y,ae){this.imageManager.getImages(Y.icons,ae),this._updateTilesForChangedImages();var fe=this.sourceCaches[Y.source];fe&&fe.setDependencies(Y.tileID.key,Y.type,Y.icons)},R.prototype.getGlyphs=function(F,Y,ae){this.glyphManager.getGlyphs(Y.stacks,ae)},R.prototype.getResource=function(F,Y,ae){return e.makeRequest(Y,ae)},R}(e.Evented);Ln.getSourceType=function(L){return j[L]},Ln.setSourceType=function(L,R){j[L]=R},Ln.registerForPluginStateChange=e.registerForPluginStateChange;var Fn=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),qn=na("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),ni=na("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),zi=na("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Di=na("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Dn=na("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),si=na("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),ai=na("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Wi=na("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ka=na("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Va=na("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ao=na("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Bi=na("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ra=na("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),co=na("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ji=na("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),_o=na("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),uo=na("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ia=na("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),fo=na("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ao=na("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Mo=na("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Ja=na("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),_a=na("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),to=na("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Ts=na("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Ls=na("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function na(L,R){var F=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Y={};return{fragmentSource:L=L.replace(F,function(ae,fe,ve,Ae,Pe){return Y[Pe]=!0,"define"===fe?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\nvarying "+ve+" "+Ae+" "+Pe+";\n#else\nuniform "+ve+" "+Ae+" u_"+Pe+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Pe+"\n    "+ve+" "+Ae+" "+Pe+" = u_"+Pe+";\n#endif\n"}),vertexSource:R=R.replace(F,function(ae,fe,ve,Ae,Pe){var Ge="float"===Ae?"vec2":"vec4",Qe=Pe.match(/color/)?"color":Ge;return Y[Pe]?"define"===fe?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\nuniform lowp float u_"+Pe+"_t;\nattribute "+ve+" "+Ge+" a_"+Pe+";\nvarying "+ve+" "+Ae+" "+Pe+";\n#else\nuniform "+ve+" "+Ae+" u_"+Pe+";\n#endif\n":"vec4"===Qe?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+Pe+" = a_"+Pe+";\n#else\n    "+ve+" "+Ae+" "+Pe+" = u_"+Pe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+Pe+" = unpack_mix_"+Qe+"(a_"+Pe+", u_"+Pe+"_t);\n#else\n    "+ve+" "+Ae+" "+Pe+" = u_"+Pe+";\n#endif\n":"define"===fe?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\nuniform lowp float u_"+Pe+"_t;\nattribute "+ve+" "+Ge+" a_"+Pe+";\n#else\nuniform "+ve+" "+Ae+" u_"+Pe+";\n#endif\n":"vec4"===Qe?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+ve+" "+Ae+" "+Pe+" = a_"+Pe+";\n#else\n    "+ve+" "+Ae+" "+Pe+" = u_"+Pe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+ve+" "+Ae+" "+Pe+" = unpack_mix_"+Qe+"(a_"+Pe+", u_"+Pe+"_t);\n#else\n    "+ve+" "+Ae+" "+Pe+" = u_"+Pe+";\n#endif\n"})}}var ys=Object.freeze({__proto__:null,prelude:qn,background:ni,backgroundPattern:zi,circle:Di,clippingMask:Dn,heatmap:si,heatmapTexture:ai,collisionBox:Wi,collisionCircle:ka,debug:Va,fill:ao,fillOutline:Bi,fillOutlinePattern:ra,fillPattern:co,fillExtrusion:Ji,fillExtrusionPattern:_o,hillshadePrepare:uo,hillshade:Ia,line:fo,lineGradient:Ao,linePattern:Mo,lineSDF:Ja,raster:_a,symbolIcon:to,symbolSDF:Ts,symbolTextAndIcon:Ls}),as=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};as.prototype.bind=function(L,R,F,Y,ae,fe,ve,Ae){this.context=L;for(var Pe=this.boundPaintVertexBuffers.length!==Y.length,Ge=0;!Pe&&Ge<Y.length;Ge++)this.boundPaintVertexBuffers[Ge]!==Y[Ge]&&(Pe=!0);L.extVertexArrayObject&&this.vao&&this.boundProgram===R&&this.boundLayoutVertexBuffer===F&&!Pe&&this.boundIndexBuffer===ae&&this.boundVertexOffset===fe&&this.boundDynamicVertexBuffer===ve&&this.boundDynamicVertexBuffer2===Ae?(L.bindVertexArrayOES.set(this.vao),ve&&ve.bind(),ae&&ae.dynamicDraw&&ae.bind(),Ae&&Ae.bind()):this.freshBind(R,F,Y,ae,fe,ve,Ae)},as.prototype.freshBind=function(L,R,F,Y,ae,fe,ve){var Ae,Pe=L.numAttributes,Ge=this.context,Qe=Ge.gl;if(Ge.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ge.extVertexArrayObject.createVertexArrayOES(),Ge.bindVertexArrayOES.set(this.vao),Ae=0,this.boundProgram=L,this.boundLayoutVertexBuffer=R,this.boundPaintVertexBuffers=F,this.boundIndexBuffer=Y,this.boundVertexOffset=ae,this.boundDynamicVertexBuffer=fe,this.boundDynamicVertexBuffer2=ve;else{Ae=Ge.currentNumAttributes||0;for(var st=Pe;st<Ae;st++)Qe.disableVertexAttribArray(st)}R.enableAttributes(Qe,L);for(var Mt=0,It=F;Mt<It.length;Mt+=1)It[Mt].enableAttributes(Qe,L);fe&&fe.enableAttributes(Qe,L),ve&&ve.enableAttributes(Qe,L),R.bind(),R.setVertexAttribPointers(Qe,L,ae);for(var Ct=0,Pt=F;Ct<Pt.length;Ct+=1){var kt=Pt[Ct];kt.bind(),kt.setVertexAttribPointers(Qe,L,ae)}fe&&(fe.bind(),fe.setVertexAttribPointers(Qe,L,ae)),Y&&Y.bind(),ve&&(ve.bind(),ve.setVertexAttribPointers(Qe,L,ae)),Ge.currentNumAttributes=Pe},as.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ks=function(L,R,F,Y,ae){var fe=L.gl;this.program=fe.createProgram();var ve=F?F.defines():[];ae&&ve.push("#define OVERDRAW_INSPECTOR;");var Ae=ve.concat(qn.fragmentSource,R.fragmentSource).join("\n"),Pe=ve.concat(qn.vertexSource,R.vertexSource).join("\n"),Ge=fe.createShader(fe.FRAGMENT_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource(Ge,Ae),fe.compileShader(Ge),fe.attachShader(this.program,Ge);var Qe=fe.createShader(fe.VERTEX_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource(Qe,Pe),fe.compileShader(Qe),fe.attachShader(this.program,Qe);for(var st=F?F.layoutAttributes:[],Mt=0;Mt<st.length;Mt++)fe.bindAttribLocation(this.program,Mt,st[Mt].name);fe.linkProgram(this.program),fe.deleteShader(Qe),fe.deleteShader(Ge),this.numAttributes=fe.getProgramParameter(this.program,fe.ACTIVE_ATTRIBUTES),this.attributes={};for(var It={},Ct=0;Ct<this.numAttributes;Ct++){var Pt=fe.getActiveAttrib(this.program,Ct);Pt&&(this.attributes[Pt.name]=fe.getAttribLocation(this.program,Pt.name))}for(var kt=fe.getProgramParameter(this.program,fe.ACTIVE_UNIFORMS),Vt=0;Vt<kt;Vt++){var Nt=fe.getActiveUniform(this.program,Vt);Nt&&(It[Nt.name]=fe.getUniformLocation(this.program,Nt.name))}this.fixedUniforms=Y(L,It),this.binderUniforms=F?F.getUniforms(L,It):[]}}};function As(L,R,F){var Y=1/sn(F,1,R.transform.tileZoom),ae=Math.pow(2,F.tileID.overscaledZ),fe=F.tileSize*Math.pow(2,R.transform.tileZoom)/ae,ve=fe*(F.tileID.canonical.x+F.tileID.wrap*ae),Ae=fe*F.tileID.canonical.y;return{u_image:0,u_texsize:F.imageAtlasTexture.size,u_scale:[Y,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[ve>>16,Ae>>16],u_pixel_coord_lower:[65535&ve,65535&Ae]}}ks.prototype.draw=function(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge,Qe,st,Mt,It,Ct,Pt){var kt,Vt=L.gl;if(!this.failedToCreate){for(var Nt in L.program.set(this.program),L.setDepthMode(F),L.setStencilMode(Y),L.setColorMode(ae),L.setCullFace(fe),this.fixedUniforms)this.fixedUniforms[Nt].set(ve[Nt]);It&&It.setUniforms(L,this.binderUniforms,st,{zoom:Mt});for(var Yt=(kt={},kt[Vt.LINES]=2,kt[Vt.TRIANGLES]=3,kt[Vt.LINE_STRIP]=1,kt)[R],fr=0,Mr=Qe.get();fr<Mr.length;fr+=1){var jr=Mr[fr],Fr=jr.vaos||(jr.vaos={});(Fr[Ae]||(Fr[Ae]=new as)).bind(L,this,Pe,It?It.getPaintVertexBuffers():[],Ge,jr.vertexOffset,Ct,Pt),Vt.drawElements(R,jr.primitiveLength*Yt,Vt.UNSIGNED_SHORT,jr.primitiveOffset*Yt*2)}}};var ho=function(L,R,F,Y){var ae=R.style.light,fe=ae.properties.get("position"),ve=[fe.x,fe.y,fe.z],Ae=e.create$1();"viewport"===ae.properties.get("anchor")&&e.fromRotation(Ae,-R.transform.angle),e.transformMat3(ve,ve,Ae);var Pe=ae.properties.get("color");return{u_matrix:L,u_lightpos:ve,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[Pe.r,Pe.g,Pe.b],u_vertical_gradient:+F,u_opacity:Y}},Fs=function(L,R,F,Y,ae,fe,ve){return e.extend(ho(L,R,F,Y),As(fe,R,ve),{u_height_factor:-Math.pow(2,ae.overscaledZ)/ve.tileSize/8})},jo=function(L){return{u_matrix:L}},Uo=function(L,R,F,Y){return e.extend(jo(L),As(F,R,Y))},ns=function(L,R){return{u_matrix:L,u_world:R}},Ka=function(L,R,F,Y,ae){return e.extend(Uo(L,R,F,Y),{u_world:ae})},Zo=function(L,R,F,Y){var ae,fe,ve=L.transform;if("map"===Y.paint.get("circle-pitch-alignment")){var Ae=sn(F,1,ve.zoom);ae=!0,fe=[Ae,Ae]}else ae=!1,fe=ve.pixelsToGLUnits;return{u_camera_to_center_distance:ve.cameraToCenterDistance,u_scale_with_map:+("map"===Y.paint.get("circle-pitch-scale")),u_matrix:L.translatePosMatrix(R.posMatrix,F,Y.paint.get("circle-translate"),Y.paint.get("circle-translate-anchor")),u_pitch_with_map:+ae,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:fe}},Vo=function(L,R,F){var Y=sn(F,1,R.zoom),ae=Math.pow(2,R.zoom-F.tileID.overscaledZ),fe=F.tileID.overscaleFactor();return{u_matrix:L,u_camera_to_center_distance:R.cameraToCenterDistance,u_pixels_to_tile_units:Y,u_extrude_scale:[R.pixelsToGLUnits[0]/(Y*ae),R.pixelsToGLUnits[1]/(Y*ae)],u_overscale_factor:fe}},wa=function(L,R,F){return{u_matrix:L,u_inv_matrix:R,u_camera_to_center_distance:F.cameraToCenterDistance,u_viewport_size:[F.width,F.height]}},So=function(L,R,F){return void 0===F&&(F=1),{u_matrix:L,u_color:R,u_overlay:0,u_overlay_scale:F}},ro=function(L){return{u_matrix:L}},Xo=function(L,R,F,Y){return{u_matrix:L,u_extrude_scale:sn(R,1,F),u_intensity:Y}};function os(L,R){var F=Math.pow(2,R.canonical.z),Y=R.canonical.y;return[new e.MercatorCoordinate(0,Y/F).toLngLat().lat,new e.MercatorCoordinate(0,(Y+1)/F).toLngLat().lat]}var wo=function(L,R,F){var Y=L.transform;return{u_matrix:ht(L,R,F),u_ratio:1/sn(R,1,Y.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/Y.pixelsToGLUnits[0],1/Y.pixelsToGLUnits[1]]}},ta=function(L,R,F){return e.extend(wo(L,R,F),{u_image:0})},qe=function(L,R,F,Y){var ae=L.transform,fe=nt(R,ae);return{u_matrix:ht(L,R,F),u_texsize:R.imageAtlasTexture.size,u_ratio:1/sn(R,1,ae.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[fe,Y.fromScale,Y.toScale],u_fade:Y.t,u_units_to_pixels:[1/ae.pixelsToGLUnits[0],1/ae.pixelsToGLUnits[1]]}},Ze=function(L,R,F,Y,ae){var ve=L.lineAtlas,Ae=nt(R,L.transform),Pe="round"===F.layout.get("line-cap"),Ge=ve.getDash(Y.from,Pe),Qe=ve.getDash(Y.to,Pe),st=Ge.width*ae.fromScale,Mt=Qe.width*ae.toScale;return e.extend(wo(L,R,F),{u_patternscale_a:[Ae/st,-Ge.height/2],u_patternscale_b:[Ae/Mt,-Qe.height/2],u_sdfgamma:ve.width/(256*Math.min(st,Mt)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ge.y,u_tex_y_b:Qe.y,u_mix:ae.t})};function nt(L,R){return 1/sn(L,1,R.tileZoom)}function ht(L,R,F){return L.translatePosMatrix(R.tileID.posMatrix,R,F.paint.get("line-translate"),F.paint.get("line-translate-anchor"))}var xt=function(L,R,F,Y,ae){return{u_matrix:L,u_tl_parent:R,u_scale_parent:F,u_buffer_scale:1,u_fade_t:Y.mix,u_opacity:Y.opacity*ae.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ae.paint.get("raster-brightness-min"),u_brightness_high:ae.paint.get("raster-brightness-max"),u_saturation_factor:(ve=ae.paint.get("raster-saturation"),ve>0?1-1/(1.001-ve):-ve),u_contrast_factor:(fe=ae.paint.get("raster-contrast"),fe>0?1/(1-fe):1+fe),u_spin_weights:yt(ae.paint.get("raster-hue-rotate"))};var fe,ve};function yt(L){L*=Math.PI/180;var R=Math.sin(L),F=Math.cos(L);return[(2*F+1)/3,(-Math.sqrt(3)*R-F+1)/3,(Math.sqrt(3)*R-F+1)/3]}var Ot,ir=function(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge){var Qe=ae.transform;return{u_is_size_zoom_constant:+("constant"===L||"source"===L),u_is_size_feature_constant:+("constant"===L||"camera"===L),u_size_t:R?R.uSizeT:0,u_size:R?R.uSize:0,u_camera_to_center_distance:Qe.cameraToCenterDistance,u_pitch:Qe.pitch/360*2*Math.PI,u_rotate_symbol:+F,u_aspect_ratio:Qe.width/Qe.height,u_fade_change:ae.options.fadeDuration?ae.symbolFadeChange:1,u_matrix:fe,u_label_plane_matrix:ve,u_coord_matrix:Ae,u_is_text:+Pe,u_pitch_with_map:+Y,u_texsize:Ge,u_texture:0}},or=function(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge,Qe){var st=ae.transform;return e.extend(ir(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge),{u_gamma_scale:Y?Math.cos(st._pitch)*st.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Qe})},er=function(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge){return e.extend(or(L,R,F,Y,ae,fe,ve,Ae,!0,Pe,!0),{u_texsize_icon:Ge,u_texture_icon:1})},dr=function(L,R,F){return{u_matrix:L,u_opacity:R,u_color:F}},kr=function(L,R,F,Y,ae,fe){return e.extend((Ae=fe,Ge=ae,Qe=(Pe=F).imageManager.getPattern((ve=Y).from.toString()),st=Pe.imageManager.getPattern(ve.to.toString()),It=(Mt=Pe.imageManager.getPixelSize()).width,Ct=Mt.height,Pt=Math.pow(2,Ge.tileID.overscaledZ),Vt=(kt=Ge.tileSize*Math.pow(2,Pe.transform.tileZoom)/Pt)*(Ge.tileID.canonical.x+Ge.tileID.wrap*Pt),Nt=kt*Ge.tileID.canonical.y,{u_image:0,u_pattern_tl_a:Qe.tl,u_pattern_br_a:Qe.br,u_pattern_tl_b:st.tl,u_pattern_br_b:st.br,u_texsize:[It,Ct],u_mix:Ae.t,u_pattern_size_a:Qe.displaySize,u_pattern_size_b:st.displaySize,u_scale_a:Ae.fromScale,u_scale_b:Ae.toScale,u_tile_units_to_pixels:1/sn(Ge,1,Pe.transform.tileZoom),u_pixel_coord_upper:[Vt>>16,Nt>>16],u_pixel_coord_lower:[65535&Vt,65535&Nt]}),{u_matrix:L,u_opacity:R});var ve,Ae,Pe,Ge,Qe,st,Mt,It,Ct,Pt,kt,Vt,Nt},Lr={fillExtrusion:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_lightpos:new e.Uniform3f(L,R.u_lightpos),u_lightintensity:new e.Uniform1f(L,R.u_lightintensity),u_lightcolor:new e.Uniform3f(L,R.u_lightcolor),u_vertical_gradient:new e.Uniform1f(L,R.u_vertical_gradient),u_opacity:new e.Uniform1f(L,R.u_opacity)}},fillExtrusionPattern:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_lightpos:new e.Uniform3f(L,R.u_lightpos),u_lightintensity:new e.Uniform1f(L,R.u_lightintensity),u_lightcolor:new e.Uniform3f(L,R.u_lightcolor),u_vertical_gradient:new e.Uniform1f(L,R.u_vertical_gradient),u_height_factor:new e.Uniform1f(L,R.u_height_factor),u_image:new e.Uniform1i(L,R.u_image),u_texsize:new e.Uniform2f(L,R.u_texsize),u_pixel_coord_upper:new e.Uniform2f(L,R.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,R.u_pixel_coord_lower),u_scale:new e.Uniform3f(L,R.u_scale),u_fade:new e.Uniform1f(L,R.u_fade),u_opacity:new e.Uniform1f(L,R.u_opacity)}},fill:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix)}},fillPattern:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_image:new e.Uniform1i(L,R.u_image),u_texsize:new e.Uniform2f(L,R.u_texsize),u_pixel_coord_upper:new e.Uniform2f(L,R.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,R.u_pixel_coord_lower),u_scale:new e.Uniform3f(L,R.u_scale),u_fade:new e.Uniform1f(L,R.u_fade)}},fillOutline:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_world:new e.Uniform2f(L,R.u_world)}},fillOutlinePattern:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_world:new e.Uniform2f(L,R.u_world),u_image:new e.Uniform1i(L,R.u_image),u_texsize:new e.Uniform2f(L,R.u_texsize),u_pixel_coord_upper:new e.Uniform2f(L,R.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,R.u_pixel_coord_lower),u_scale:new e.Uniform3f(L,R.u_scale),u_fade:new e.Uniform1f(L,R.u_fade)}},circle:function(L,R){return{u_camera_to_center_distance:new e.Uniform1f(L,R.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(L,R.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(L,R.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(L,R.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(L,R.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(L,R.u_matrix)}},collisionBox:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_camera_to_center_distance:new e.Uniform1f(L,R.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(L,R.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(L,R.u_extrude_scale),u_overscale_factor:new e.Uniform1f(L,R.u_overscale_factor)}},collisionCircle:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_inv_matrix:new e.UniformMatrix4f(L,R.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(L,R.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(L,R.u_viewport_size)}},debug:function(L,R){return{u_color:new e.UniformColor(L,R.u_color),u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_overlay:new e.Uniform1i(L,R.u_overlay),u_overlay_scale:new e.Uniform1f(L,R.u_overlay_scale)}},clippingMask:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix)}},heatmap:function(L,R){return{u_extrude_scale:new e.Uniform1f(L,R.u_extrude_scale),u_intensity:new e.Uniform1f(L,R.u_intensity),u_matrix:new e.UniformMatrix4f(L,R.u_matrix)}},heatmapTexture:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_world:new e.Uniform2f(L,R.u_world),u_image:new e.Uniform1i(L,R.u_image),u_color_ramp:new e.Uniform1i(L,R.u_color_ramp),u_opacity:new e.Uniform1f(L,R.u_opacity)}},hillshade:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_image:new e.Uniform1i(L,R.u_image),u_latrange:new e.Uniform2f(L,R.u_latrange),u_light:new e.Uniform2f(L,R.u_light),u_shadow:new e.UniformColor(L,R.u_shadow),u_highlight:new e.UniformColor(L,R.u_highlight),u_accent:new e.UniformColor(L,R.u_accent)}},hillshadePrepare:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_image:new e.Uniform1i(L,R.u_image),u_dimension:new e.Uniform2f(L,R.u_dimension),u_zoom:new e.Uniform1f(L,R.u_zoom),u_maxzoom:new e.Uniform1f(L,R.u_maxzoom),u_unpack:new e.Uniform4f(L,R.u_unpack)}},line:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_ratio:new e.Uniform1f(L,R.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,R.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(L,R.u_units_to_pixels)}},lineGradient:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_ratio:new e.Uniform1f(L,R.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,R.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(L,R.u_units_to_pixels),u_image:new e.Uniform1i(L,R.u_image)}},linePattern:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_texsize:new e.Uniform2f(L,R.u_texsize),u_ratio:new e.Uniform1f(L,R.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,R.u_device_pixel_ratio),u_image:new e.Uniform1i(L,R.u_image),u_units_to_pixels:new e.Uniform2f(L,R.u_units_to_pixels),u_scale:new e.Uniform3f(L,R.u_scale),u_fade:new e.Uniform1f(L,R.u_fade)}},lineSDF:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_ratio:new e.Uniform1f(L,R.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,R.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(L,R.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(L,R.u_patternscale_a),u_patternscale_b:new e.Uniform2f(L,R.u_patternscale_b),u_sdfgamma:new e.Uniform1f(L,R.u_sdfgamma),u_image:new e.Uniform1i(L,R.u_image),u_tex_y_a:new e.Uniform1f(L,R.u_tex_y_a),u_tex_y_b:new e.Uniform1f(L,R.u_tex_y_b),u_mix:new e.Uniform1f(L,R.u_mix)}},raster:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_tl_parent:new e.Uniform2f(L,R.u_tl_parent),u_scale_parent:new e.Uniform1f(L,R.u_scale_parent),u_buffer_scale:new e.Uniform1f(L,R.u_buffer_scale),u_fade_t:new e.Uniform1f(L,R.u_fade_t),u_opacity:new e.Uniform1f(L,R.u_opacity),u_image0:new e.Uniform1i(L,R.u_image0),u_image1:new e.Uniform1i(L,R.u_image1),u_brightness_low:new e.Uniform1f(L,R.u_brightness_low),u_brightness_high:new e.Uniform1f(L,R.u_brightness_high),u_saturation_factor:new e.Uniform1f(L,R.u_saturation_factor),u_contrast_factor:new e.Uniform1f(L,R.u_contrast_factor),u_spin_weights:new e.Uniform3f(L,R.u_spin_weights)}},symbolIcon:function(L,R){return{u_is_size_zoom_constant:new e.Uniform1i(L,R.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(L,R.u_is_size_feature_constant),u_size_t:new e.Uniform1f(L,R.u_size_t),u_size:new e.Uniform1f(L,R.u_size),u_camera_to_center_distance:new e.Uniform1f(L,R.u_camera_to_center_distance),u_pitch:new e.Uniform1f(L,R.u_pitch),u_rotate_symbol:new e.Uniform1i(L,R.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(L,R.u_aspect_ratio),u_fade_change:new e.Uniform1f(L,R.u_fade_change),u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(L,R.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(L,R.u_coord_matrix),u_is_text:new e.Uniform1i(L,R.u_is_text),u_pitch_with_map:new e.Uniform1i(L,R.u_pitch_with_map),u_texsize:new e.Uniform2f(L,R.u_texsize),u_texture:new e.Uniform1i(L,R.u_texture)}},symbolSDF:function(L,R){return{u_is_size_zoom_constant:new e.Uniform1i(L,R.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(L,R.u_is_size_feature_constant),u_size_t:new e.Uniform1f(L,R.u_size_t),u_size:new e.Uniform1f(L,R.u_size),u_camera_to_center_distance:new e.Uniform1f(L,R.u_camera_to_center_distance),u_pitch:new e.Uniform1f(L,R.u_pitch),u_rotate_symbol:new e.Uniform1i(L,R.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(L,R.u_aspect_ratio),u_fade_change:new e.Uniform1f(L,R.u_fade_change),u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(L,R.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(L,R.u_coord_matrix),u_is_text:new e.Uniform1i(L,R.u_is_text),u_pitch_with_map:new e.Uniform1i(L,R.u_pitch_with_map),u_texsize:new e.Uniform2f(L,R.u_texsize),u_texture:new e.Uniform1i(L,R.u_texture),u_gamma_scale:new e.Uniform1f(L,R.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(L,R.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(L,R.u_is_halo)}},symbolTextAndIcon:function(L,R){return{u_is_size_zoom_constant:new e.Uniform1i(L,R.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(L,R.u_is_size_feature_constant),u_size_t:new e.Uniform1f(L,R.u_size_t),u_size:new e.Uniform1f(L,R.u_size),u_camera_to_center_distance:new e.Uniform1f(L,R.u_camera_to_center_distance),u_pitch:new e.Uniform1f(L,R.u_pitch),u_rotate_symbol:new e.Uniform1i(L,R.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(L,R.u_aspect_ratio),u_fade_change:new e.Uniform1f(L,R.u_fade_change),u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(L,R.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(L,R.u_coord_matrix),u_is_text:new e.Uniform1i(L,R.u_is_text),u_pitch_with_map:new e.Uniform1i(L,R.u_pitch_with_map),u_texsize:new e.Uniform2f(L,R.u_texsize),u_texsize_icon:new e.Uniform2f(L,R.u_texsize_icon),u_texture:new e.Uniform1i(L,R.u_texture),u_texture_icon:new e.Uniform1i(L,R.u_texture_icon),u_gamma_scale:new e.Uniform1f(L,R.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(L,R.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(L,R.u_is_halo)}},background:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_opacity:new e.Uniform1f(L,R.u_opacity),u_color:new e.UniformColor(L,R.u_color)}},backgroundPattern:function(L,R){return{u_matrix:new e.UniformMatrix4f(L,R.u_matrix),u_opacity:new e.Uniform1f(L,R.u_opacity),u_image:new e.Uniform1i(L,R.u_image),u_pattern_tl_a:new e.Uniform2f(L,R.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(L,R.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(L,R.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(L,R.u_pattern_br_b),u_texsize:new e.Uniform2f(L,R.u_texsize),u_mix:new e.Uniform1f(L,R.u_mix),u_pattern_size_a:new e.Uniform2f(L,R.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(L,R.u_pattern_size_b),u_scale_a:new e.Uniform1f(L,R.u_scale_a),u_scale_b:new e.Uniform1f(L,R.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(L,R.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,R.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(L,R.u_tile_units_to_pixels)}}};function Ir(L,R,F,Y,ae,fe,ve){for(var Ae=L.context,Pe=Ae.gl,Ge=L.useProgram("collisionBox"),Qe=[],st=0,Mt=0,It=0;It<Y.length;It++){var Ct=Y[It],Pt=R.getTile(Ct),kt=Pt.getBucket(F);if(kt){var Vt=Ct.posMatrix;0===ae[0]&&0===ae[1]||(Vt=L.translatePosMatrix(Ct.posMatrix,Pt,ae,fe));var Nt=ve?kt.textCollisionBox:kt.iconCollisionBox,Yt=kt.collisionCircleArray;if(Yt.length>0){var fr=e.create(),Mr=Vt;e.mul(fr,kt.placementInvProjMatrix,L.transform.glCoordMatrix),e.mul(fr,fr,kt.placementViewportMatrix),Qe.push({circleArray:Yt,circleOffset:Mt,transform:Mr,invTransform:fr}),Mt=st+=Yt.length/4}Nt&&Ge.draw(Ae,Pe.LINES,Xt.disabled,He.disabled,L.colorModeForRenderPass(),pe.disabled,Vo(Vt,L.transform,Pt),F.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,null,L.transform.zoom,null,null,Nt.collisionVertexBuffer)}}if(ve&&Qe.length){var jr=L.useProgram("collisionCircle"),Fr=new e.StructArrayLayout2f1f2i16;Fr.resize(4*st),Fr._trim();for(var fn=0,on=0,wn=Qe;on<wn.length;on+=1)for(var yn=wn[on],Jn=0;Jn<yn.circleArray.length/4;Jn++){var ii=4*Jn,xi=yn.circleArray[ii+0],en=yn.circleArray[ii+1],On=yn.circleArray[ii+2],ti=yn.circleArray[ii+3];Fr.emplace(fn++,xi,en,On,ti,0),Fr.emplace(fn++,xi,en,On,ti,1),Fr.emplace(fn++,xi,en,On,ti,2),Fr.emplace(fn++,xi,en,On,ti,3)}(!Ot||Ot.length<2*st)&&(Ot=function(Li){var Yi=2*Li,Ei=new e.StructArrayLayout3ui6;Ei.resize(Yi),Ei._trim();for(var Fi=0;Fi<Yi;Fi++){var Vi=6*Fi;Ei.uint16[Vi+0]=4*Fi+0,Ei.uint16[Vi+1]=4*Fi+1,Ei.uint16[Vi+2]=4*Fi+2,Ei.uint16[Vi+3]=4*Fi+2,Ei.uint16[Vi+4]=4*Fi+3,Ei.uint16[Vi+5]=4*Fi+0}return Ei}(st));for(var Qn=Ae.createIndexBuffer(Ot,!0),pi=Ae.createVertexBuffer(Fr,e.collisionCircleLayout.members,!0),wi=0,ji=Qe;wi<ji.length;wi+=1){var li=ji[wi],Oi=wa(li.transform,li.invTransform,L.transform);jr.draw(Ae,Pe.TRIANGLES,Xt.disabled,He.disabled,L.colorModeForRenderPass(),pe.disabled,Oi,F.id,pi,Qn,e.SegmentVector.simpleSegment(0,2*li.circleOffset,li.circleArray.length,li.circleArray.length/2),null,L.transform.zoom,null,null,null)}pi.destroy(),Qn.destroy()}}var Wr=e.identity(new Float32Array(16));function mn(L,R,F,Y,ae,fe){var ve=e.getAnchorAlignment(L),Ae=-(ve.horizontalAlign-.5)*R,Pe=-(ve.verticalAlign-.5)*F,Ge=e.evaluateVariableOffset(L,Y);return new e.Point((Ae/ae+Ge[0])*fe,(Pe/ae+Ge[1])*fe)}function Tn(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge,Qe){var st=L.text.placedSymbolArray,Mt=L.text.dynamicLayoutVertexArray,It=L.icon.dynamicLayoutVertexArray,Ct={};Mt.clear();for(var Pt=0;Pt<st.length;Pt++){var kt=st.get(Pt),Nt=kt.hidden||!kt.crossTileID||L.allowVerticalPlacement&&!kt.placedOrientation?null:Y[kt.crossTileID];if(Nt){var Yt=new e.Point(kt.anchorX,kt.anchorY),fr=nr(Yt,F?Ae:ve),Mr=lr(fe.cameraToCenterDistance,fr.signedDistanceFromCamera),jr=ae.evaluateSizeForFeature(L.textSizeData,Ge,kt)*Mr/e.ONE_EM;F&&(jr*=L.tilePixelRatio/Pe);for(var on=mn(Nt.anchor,Nt.width,Nt.height,Nt.textOffset,Nt.textBoxScale,jr),wn=F?nr(Yt.add(on),ve).point:fr.point.add(R?on.rotate(-fe.angle):on),yn=L.allowVerticalPlacement&&kt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Jn=0;Jn<kt.numGlyphs;Jn++)e.addDynamicAttributes(Mt,wn,yn);Qe&&kt.associatedIconIndex>=0&&(Ct[kt.associatedIconIndex]={shiftedAnchor:wn,angle:yn})}else zr(kt.numGlyphs,Mt)}if(Qe){It.clear();for(var ii=L.icon.placedSymbolArray,xi=0;xi<ii.length;xi++){var en=ii.get(xi);if(en.hidden)zr(en.numGlyphs,It);else{var On=Ct[xi];if(On)for(var ti=0;ti<en.numGlyphs;ti++)e.addDynamicAttributes(It,On.shiftedAnchor,On.angle);else zr(en.numGlyphs,It)}}L.icon.dynamicLayoutVertexBuffer.updateData(It)}L.text.dynamicLayoutVertexBuffer.updateData(Mt)}function jn(L,R,F){return F.iconsInText&&R?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function Gn(L,R,F,Y,ae,fe,ve,Ae,Pe,Ge,Qe,st){for(var Mt=L.context,It=Mt.gl,Ct=L.transform,Pt="map"===Ae,kt="map"===Pe,Vt=Pt&&"point"!==F.layout.get("symbol-placement"),Nt=Pt&&!kt&&!Vt,Yt=void 0!==F.layout.get("symbol-sort-key").constantOr(1),fr=L.depthModeForSublayer(0,Xt.ReadOnly),Mr=F.layout.get("text-variable-anchor"),jr=[],Fr=0,fn=Y;Fr<fn.length;Fr+=1){var on=fn[Fr],wn=R.getTile(on),yn=wn.getBucket(F);if(yn){var Jn=ae?yn.text:yn.icon;if(Jn&&Jn.segments.get().length){var ii=Jn.programConfigurations.get(F.id),xi=ae||yn.sdfIcons,en=ae?yn.textSizeData:yn.iconSizeData,On=kt||0!==Ct.pitch,ti=L.useProgram(jn(xi,ae,yn),ii),Qn=e.evaluateSizeForZoom(en,Ct.zoom),pi=void 0,wi=[0,0],ji=void 0,li=void 0,Oi=null,Li=void 0;if(ae)ji=wn.glyphAtlasTexture,li=It.LINEAR,pi=wn.glyphAtlasTexture.size,yn.iconsInText&&(wi=wn.imageAtlasTexture.size,Oi=wn.imageAtlasTexture,Li=On||L.options.rotating||L.options.zooming||"composite"===en.kind||"camera"===en.kind?It.LINEAR:It.NEAREST);else{var Ei=1!==F.layout.get("icon-size").constantOr(0)||yn.iconsNeedLinear;ji=wn.imageAtlasTexture,li=xi||L.options.rotating||L.options.zooming||Ei||On?It.LINEAR:It.NEAREST,pi=wn.imageAtlasTexture.size}var Fi=sn(wn,1,L.transform.zoom),Vi=Rr(on.posMatrix,kt,Pt,L.transform,Fi),ya=br(on.posMatrix,kt,Pt,L.transform,Fi),ja=Mr&&yn.hasTextData(),Ua="none"!==F.layout.get("icon-text-fit")&&ja&&yn.hasIconData();Vt&&_r(yn,on.posMatrix,L,ae,Vi,ya,kt,Ge);var ba=L.translatePosMatrix(on.posMatrix,wn,fe,ve),Fa=Vt||ae&&Mr||Ua?Wr:Vi,Sa=L.translatePosMatrix(ya,wn,fe,ve,!0),Lo=xi&&0!==F.paint.get(ae?"text-halo-width":"icon-halo-width").constantOr(1),Qa={program:ti,buffers:Jn,uniformValues:xi?yn.iconsInText?er(en.kind,Qn,Nt,kt,L,ba,Fa,Sa,pi,wi):or(en.kind,Qn,Nt,kt,L,ba,Fa,Sa,ae,pi,!0):ir(en.kind,Qn,Nt,kt,L,ba,Fa,Sa,ae,pi),atlasTexture:ji,atlasTextureIcon:Oi,atlasInterpolation:li,atlasInterpolationIcon:Li,isSDF:xi,hasHalo:Lo};if(Yt)for(var Qo=0,Is=Jn.segments.get();Qo<Is.length;Qo+=1){var Gs=Is[Qo];jr.push({segments:new e.SegmentVector([Gs]),sortKey:Gs.sortKey,state:Qa})}else jr.push({segments:Jn.segments,sortKey:0,state:Qa})}}}Yt&&jr.sort(function(al,cs){return al.sortKey-cs.sortKey});for(var hl=0,Zs=jr;hl<Zs.length;hl+=1){var Ys=Zs[hl],Po=Ys.state;if(Mt.activeTexture.set(It.TEXTURE0),Po.atlasTexture.bind(Po.atlasInterpolation,It.CLAMP_TO_EDGE),Po.atlasTextureIcon&&(Mt.activeTexture.set(It.TEXTURE1),Po.atlasTextureIcon&&Po.atlasTextureIcon.bind(Po.atlasInterpolationIcon,It.CLAMP_TO_EDGE)),Po.isSDF){var Xs=Po.uniformValues;Po.hasHalo&&(Xs.u_is_halo=1,ei(Po.buffers,Ys.segments,F,L,Po.program,fr,Qe,st,Xs)),Xs.u_is_halo=0}ei(Po.buffers,Ys.segments,F,L,Po.program,fr,Qe,st,Po.uniformValues)}}function ei(L,R,F,Y,ae,fe,ve,Ae,Pe){var Ge=Y.context;ae.draw(Ge,Ge.gl.TRIANGLES,fe,ve,Ae,pe.disabled,Pe,F.id,L.layoutVertexBuffer,L.indexBuffer,R,F.paint,Y.transform.zoom,L.programConfigurations.get(F.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function Yn(L,R,F,Y,ae,fe,ve){var Ae,Pe,Ge,Qe,st,Mt=L.context.gl,It=F.paint.get("fill-pattern"),Ct=It&&It.constantOr(1),Pt=F.getCrossfadeParameters();ve?(Pe=Ct&&!F.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=Mt.LINES):(Pe=Ct?"fillPattern":"fill",Ae=Mt.TRIANGLES);for(var kt=0,Vt=Y;kt<Vt.length;kt+=1){var Nt=Vt[kt],Yt=R.getTile(Nt);if(!Ct||Yt.patternsLoaded()){var fr=Yt.getBucket(F);if(fr){var Mr=fr.programConfigurations.get(F.id),jr=L.useProgram(Pe,Mr);Ct&&(L.context.activeTexture.set(Mt.TEXTURE0),Yt.imageAtlasTexture.bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE),Mr.updatePaintBuffers(Pt));var Fr=It.constantOr(null);if(Fr&&Yt.imageAtlas){var fn=Yt.imageAtlas,on=fn.patternPositions[Fr.to.toString()],wn=fn.patternPositions[Fr.from.toString()];on&&wn&&Mr.setConstantPatternPositions(on,wn)}var yn=L.translatePosMatrix(Nt.posMatrix,Yt,F.paint.get("fill-translate"),F.paint.get("fill-translate-anchor"));if(ve){Qe=fr.indexBuffer2,st=fr.segments2;var Jn=[Mt.drawingBufferWidth,Mt.drawingBufferHeight];Ge="fillOutlinePattern"===Pe&&Ct?Ka(yn,L,Pt,Yt,Jn):ns(yn,Jn)}else Qe=fr.indexBuffer,st=fr.segments,Ge=Ct?Uo(yn,L,Pt,Yt):jo(yn);jr.draw(L.context,Ae,ae,L.stencilModeForClipping(Nt),fe,pe.disabled,Ge,F.id,fr.layoutVertexBuffer,Qe,st,F.paint,L.transform.zoom,Mr)}}}}function Mi(L,R,F,Y,ae,fe,ve){for(var Ae=L.context,Pe=Ae.gl,Ge=F.paint.get("fill-extrusion-pattern"),Qe=Ge.constantOr(1),st=F.getCrossfadeParameters(),Mt=F.paint.get("fill-extrusion-opacity"),It=0,Ct=Y;It<Ct.length;It+=1){var Pt=Ct[It],kt=R.getTile(Pt),Vt=kt.getBucket(F);if(Vt){var Nt=Vt.programConfigurations.get(F.id),Yt=L.useProgram(Qe?"fillExtrusionPattern":"fillExtrusion",Nt);Qe&&(L.context.activeTexture.set(Pe.TEXTURE0),kt.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),Nt.updatePaintBuffers(st));var fr=Ge.constantOr(null);if(fr&&kt.imageAtlas){var Mr=kt.imageAtlas,jr=Mr.patternPositions[fr.to.toString()],Fr=Mr.patternPositions[fr.from.toString()];jr&&Fr&&Nt.setConstantPatternPositions(jr,Fr)}var fn=L.translatePosMatrix(Pt.posMatrix,kt,F.paint.get("fill-extrusion-translate"),F.paint.get("fill-extrusion-translate-anchor")),on=F.paint.get("fill-extrusion-vertical-gradient"),wn=Qe?Fs(fn,L,on,Mt,Pt,st,kt):ho(fn,L,on,Mt);Yt.draw(Ae,Ae.gl.TRIANGLES,ae,fe,ve,pe.backCCW,wn,F.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,F.paint,L.transform.zoom,Nt)}}}function Ri(L,R,F,Y,ae,fe){var ve=L.context,Ae=ve.gl,Pe=R.fbo;if(Pe){var Ge=L.useProgram("hillshade");ve.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,Pe.colorAttachment.get());var Qe=function(st,Mt,It){var Ct=It.paint.get("hillshade-shadow-color"),Pt=It.paint.get("hillshade-highlight-color"),kt=It.paint.get("hillshade-accent-color"),Vt=It.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===It.paint.get("hillshade-illumination-anchor")&&(Vt-=st.transform.angle);var Nt=!st.options.moving;return{u_matrix:st.transform.calculatePosMatrix(Mt.tileID.toUnwrapped(),Nt),u_image:0,u_latrange:os(0,Mt.tileID),u_light:[It.paint.get("hillshade-exaggeration"),Vt],u_shadow:Ct,u_highlight:Pt,u_accent:kt}}(L,R,F);Ge.draw(ve,Ae.TRIANGLES,Y,ae,fe,pe.disabled,Qe,F.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}}function Qi(L,R,F,Y,ae,fe,ve){var kt,Vt,Nt,Yt,fr,Ae=L.context,Pe=Ae.gl,Ge=R.dem;if(Ge&&Ge.data){var Qe=Ge.dim,st=Ge.stride,Mt=Ge.getPixels();if(Ae.activeTexture.set(Pe.TEXTURE1),Ae.pixelStoreUnpackPremultiplyAlpha.set(!1),R.demTexture=R.demTexture||L.getTileTexture(st),R.demTexture){var It=R.demTexture;It.update(Mt,{premultiply:!1}),It.bind(Pe.NEAREST,Pe.CLAMP_TO_EDGE)}else R.demTexture=new e.Texture(Ae,Mt,Pe.RGBA,{premultiply:!1}),R.demTexture.bind(Pe.NEAREST,Pe.CLAMP_TO_EDGE);Ae.activeTexture.set(Pe.TEXTURE0);var Ct=R.fbo;if(!Ct){var Pt=new e.Texture(Ae,{width:Qe,height:Qe,data:null},Pe.RGBA);Pt.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),(Ct=R.fbo=Ae.createFramebuffer(Qe,Qe,!0)).colorAttachment.set(Pt.texture)}Ae.bindFramebuffer.set(Ct.framebuffer),Ae.viewport.set([0,0,Qe,Qe]),L.useProgram("hillshadePrepare").draw(Ae,Pe.TRIANGLES,ae,fe,ve,pe.disabled,(kt=R.tileID,Nt=Y,Yt=(Vt=Ge).stride,fr=e.create(),e.ortho(fr,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(fr,fr,[0,-e.EXTENT,0]),{u_matrix:fr,u_image:1,u_dimension:[Yt,Yt],u_zoom:kt.overscaledZ,u_maxzoom:Nt,u_unpack:Vt.getUnpackVector()}),F.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments),R.needsHillshadePrepare=!1}}function Ki(L,R,F,Y,ae){var fe=Y.paint.get("raster-fade-duration");if(fe>0){var ve=e.browser.now(),Ae=(ve-L.timeAdded)/fe,Pe=R?(ve-R.timeAdded)/fe:-1,Ge=F.getSource(),Qe=ae.coveringZoomLevel({tileSize:Ge.tileSize,roundZoom:Ge.roundZoom}),st=!R||Math.abs(R.tileID.overscaledZ-Qe)>Math.abs(L.tileID.overscaledZ-Qe),Mt=st&&L.refreshedUponExpiration?1:e.clamp(st?Ae:1-Pe,0,1);return L.refreshedUponExpiration&&Ae>=1&&(L.refreshedUponExpiration=!1),R?{opacity:1,mix:1-Mt}:{opacity:Mt,mix:0}}return{opacity:1,mix:0}}var ea=new e.Color(1,0,0,1),Da=new e.Color(0,1,0,1),Ea=new e.Color(0,0,1,1),ca=new e.Color(1,0,1,1),ma=new e.Color(0,1,1,1);function Ha(L,R,F,Y){go(L,0,R+F/2,L.transform.width,F,Y)}function po(L,R,F,Y){go(L,R-F/2,0,F,L.transform.height,Y)}function go(L,R,F,Y,ae,fe){var ve=L.context,Ae=ve.gl;Ae.enable(Ae.SCISSOR_TEST),Ae.scissor(R*e.browser.devicePixelRatio,F*e.browser.devicePixelRatio,Y*e.browser.devicePixelRatio,ae*e.browser.devicePixelRatio),ve.clear({color:fe}),Ae.disable(Ae.SCISSOR_TEST)}function mo(L,R,F){var Y=L.context,ae=Y.gl,fe=F.posMatrix,ve=L.useProgram("debug"),Ae=Xt.disabled,Pe=He.disabled,Ge=L.colorModeForRenderPass();Y.activeTexture.set(ae.TEXTURE0),L.emptyTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),ve.draw(Y,ae.LINE_STRIP,Ae,Pe,Ge,pe.disabled,So(fe,e.Color.red),"$debug",L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments);var Qe=R.getTileByID(F.key).latestRawTileData,Mt=Math.floor((Qe&&Qe.byteLength||0)/1024),It=R.getTile(F).tileSize,Ct=512/Math.min(It,512)*(F.overscaledZ/L.transform.zoom)*.5,Pt=F.canonical.toString();F.overscaledZ!==F.canonical.z&&(Pt+=" => "+F.overscaledZ),function(kt,Vt){kt.initDebugOverlayCanvas();var Nt=kt.debugOverlayCanvas,Yt=kt.context.gl,fr=kt.debugOverlayCanvas.getContext("2d");fr.clearRect(0,0,Nt.width,Nt.height),fr.shadowColor="white",fr.shadowBlur=2,fr.lineWidth=1.5,fr.strokeStyle="white",fr.textBaseline="top",fr.font="bold 36px Open Sans, sans-serif",fr.fillText(Vt,5,5),fr.strokeText(Vt,5,5),kt.debugOverlayTexture.update(Nt),kt.debugOverlayTexture.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE)}(L,Pt+" "+Mt+"kb"),ve.draw(Y,ae.TRIANGLES,Ae,Pe,Je.alphaBlended,pe.disabled,So(fe,e.Color.transparent,Ct),"$debug",L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments)}var vo={symbol:function(L,R,F,Y,ae){if("translucent"===L.renderPass){var fe=He.disabled,ve=L.colorModeForRenderPass();F.layout.get("text-variable-anchor")&&function(Ae,Pe,Ge,Qe,st,Mt,It){for(var Ct=Pe.transform,Pt="map"===st,kt="map"===Mt,Vt=0,Nt=Ae;Vt<Nt.length;Vt+=1){var Yt=Nt[Vt],fr=Qe.getTile(Yt),Mr=fr.getBucket(Ge);if(Mr&&Mr.text&&Mr.text.segments.get().length){var Fr=e.evaluateSizeForZoom(Mr.textSizeData,Ct.zoom),fn=sn(fr,1,Pe.transform.zoom),on=Rr(Yt.posMatrix,kt,Pt,Pe.transform,fn),wn="none"!==Ge.layout.get("icon-text-fit")&&Mr.hasIconData();if(Fr){var yn=Math.pow(2,Ct.zoom-fr.tileID.overscaledZ);Tn(Mr,Pt,kt,It,e.symbolSize,Ct,on,Yt.posMatrix,yn,Fr,wn)}}}}(Y,L,F,R,F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),ae),0!==F.paint.get("icon-opacity").constantOr(1)&&Gn(L,R,F,Y,!1,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),F.layout.get("icon-rotation-alignment"),F.layout.get("icon-pitch-alignment"),F.layout.get("icon-keep-upright"),fe,ve),0!==F.paint.get("text-opacity").constantOr(1)&&Gn(L,R,F,Y,!0,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),F.layout.get("text-keep-upright"),fe,ve),R.map.showCollisionBoxes&&(Ir(L,R,F,Y,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),!0),Ir(L,R,F,Y,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),!1))}},circle:function(L,R,F,Y){if("translucent"===L.renderPass){var ae=F.paint.get("circle-opacity"),fe=F.paint.get("circle-stroke-width"),ve=F.paint.get("circle-stroke-opacity"),Ae=void 0!==F.layout.get("circle-sort-key").constantOr(1);if(0!==ae.constantOr(1)||0!==fe.constantOr(1)&&0!==ve.constantOr(1)){for(var Pe=L.context,Ge=Pe.gl,Qe=L.depthModeForSublayer(0,Xt.ReadOnly),st=He.disabled,Mt=L.colorModeForRenderPass(),It=[],Ct=0;Ct<Y.length;Ct++){var Pt=Y[Ct],kt=R.getTile(Pt),Vt=kt.getBucket(F);if(Vt){var Nt=Vt.programConfigurations.get(F.id),Yt={programConfiguration:Nt,program:L.useProgram("circle",Nt),layoutVertexBuffer:Vt.layoutVertexBuffer,indexBuffer:Vt.indexBuffer,uniformValues:Zo(L,Pt,kt,F)};if(Ae)for(var fr=0,Mr=Vt.segments.get();fr<Mr.length;fr+=1){var jr=Mr[fr];It.push({segments:new e.SegmentVector([jr]),sortKey:jr.sortKey,state:Yt})}else It.push({segments:Vt.segments,sortKey:0,state:Yt})}}Ae&&It.sort(function(ti,Qn){return ti.sortKey-Qn.sortKey});for(var Fr=0,fn=It;Fr<fn.length;Fr+=1){var on=fn[Fr],wn=on.state;wn.program.draw(Pe,Ge.TRIANGLES,Qe,st,Mt,pe.disabled,wn.uniformValues,F.id,wn.layoutVertexBuffer,wn.indexBuffer,on.segments,F.paint,L.transform.zoom,wn.programConfiguration)}}}},heatmap:function(L,R,F,Y){if(0!==F.paint.get("heatmap-opacity"))if("offscreen"===L.renderPass){var ae=L.context,fe=ae.gl,ve=He.disabled,Ae=new Je([fe.ONE,fe.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Pt,kt,Vt){var Nt=Pt.gl;Pt.activeTexture.set(Nt.TEXTURE1),Pt.viewport.set([0,0,kt.width/4,kt.height/4]);var Mr,jr,Fr,fn,on,Yt=Vt.heatmapFbo;if(Yt)Nt.bindTexture(Nt.TEXTURE_2D,Yt.colorAttachment.get()),Pt.bindFramebuffer.set(Yt.framebuffer);else{var fr=Nt.createTexture();Nt.bindTexture(Nt.TEXTURE_2D,fr),Nt.texParameteri(Nt.TEXTURE_2D,Nt.TEXTURE_WRAP_S,Nt.CLAMP_TO_EDGE),Nt.texParameteri(Nt.TEXTURE_2D,Nt.TEXTURE_WRAP_T,Nt.CLAMP_TO_EDGE),Nt.texParameteri(Nt.TEXTURE_2D,Nt.TEXTURE_MIN_FILTER,Nt.LINEAR),Nt.texParameteri(Nt.TEXTURE_2D,Nt.TEXTURE_MAG_FILTER,Nt.LINEAR),Fr=fr,fn=Yt=Vt.heatmapFbo=Pt.createFramebuffer(kt.width/4,kt.height/4,!1),(on=(Mr=Pt).gl).texImage2D(on.TEXTURE_2D,0,on.RGBA,(jr=kt).width/4,jr.height/4,0,on.RGBA,Mr.extRenderToTextureHalfFloat?Mr.extTextureHalfFloat.HALF_FLOAT_OES:on.UNSIGNED_BYTE,null),fn.colorAttachment.set(Fr)}})(ae,L,F),ae.clear({color:e.Color.transparent});for(var Pe=0;Pe<Y.length;Pe++){var Ge=Y[Pe];if(!R.hasRenderableParent(Ge)){var Qe=R.getTile(Ge),st=Qe.getBucket(F);if(st){var Mt=st.programConfigurations.get(F.id);L.useProgram("heatmap",Mt).draw(ae,fe.TRIANGLES,Xt.disabled,ve,Ae,pe.disabled,Xo(Ge.posMatrix,Qe,L.transform.zoom,F.paint.get("heatmap-intensity")),F.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,F.paint,L.transform.zoom,Mt)}}}ae.viewport.set([0,0,L.width,L.height])}else"translucent"===L.renderPass&&(L.context.setColorMode(L.colorModeForRenderPass()),function(Pt,kt){var Vt=Pt.context,Nt=Vt.gl,Yt=kt.heatmapFbo;if(Yt){Vt.activeTexture.set(Nt.TEXTURE0),Nt.bindTexture(Nt.TEXTURE_2D,Yt.colorAttachment.get()),Vt.activeTexture.set(Nt.TEXTURE1);var fr=kt.colorRampTexture;fr||(fr=kt.colorRampTexture=new e.Texture(Vt,kt.colorRamp,Nt.RGBA)),fr.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE),Pt.useProgram("heatmapTexture").draw(Vt,Nt.TRIANGLES,Xt.disabled,He.disabled,Pt.colorModeForRenderPass(),pe.disabled,function(Mr,jr,Fr,fn){var on=e.create();e.ortho(on,0,Mr.width,Mr.height,0,0,1);var wn=Mr.context.gl;return{u_matrix:on,u_world:[wn.drawingBufferWidth,wn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:jr.paint.get("heatmap-opacity")}}(Pt,kt),kt.id,Pt.viewportBuffer,Pt.quadTriangleIndexBuffer,Pt.viewportSegments,kt.paint,Pt.transform.zoom)}}(L,F))},line:function(L,R,F,Y){if("translucent"===L.renderPass){var ae=F.paint.get("line-opacity"),fe=F.paint.get("line-width");if(0!==ae.constantOr(1)&&0!==fe.constantOr(1)){var ve=L.depthModeForSublayer(0,Xt.ReadOnly),Ae=L.colorModeForRenderPass(),Pe=F.paint.get("line-dasharray"),Ge=F.paint.get("line-pattern"),Qe=Ge.constantOr(1),st=F.paint.get("line-gradient"),Mt=F.getCrossfadeParameters(),It=Qe?"linePattern":Pe?"lineSDF":st?"lineGradient":"line",Ct=L.context,Pt=Ct.gl,kt=!0;if(st){Ct.activeTexture.set(Pt.TEXTURE0);var Vt=F.gradientTexture;if(!F.gradient)return;Vt||(Vt=F.gradientTexture=new e.Texture(Ct,F.gradient,Pt.RGBA)),Vt.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE)}for(var Nt=0,Yt=Y;Nt<Yt.length;Nt+=1){var fr=Yt[Nt],Mr=R.getTile(fr);if(!Qe||Mr.patternsLoaded()){var jr=Mr.getBucket(F);if(jr){var Fr=jr.programConfigurations.get(F.id),fn=L.context.program.get(),on=L.useProgram(It,Fr),wn=kt||on.program!==fn,yn=Ge.constantOr(null);if(yn&&Mr.imageAtlas){var Jn=Mr.imageAtlas,ii=Jn.patternPositions[yn.to.toString()],xi=Jn.patternPositions[yn.from.toString()];ii&&xi&&Fr.setConstantPatternPositions(ii,xi)}var en=Qe?qe(L,Mr,F,Mt):Pe?Ze(L,Mr,F,Pe,Mt):st?ta(L,Mr,F):wo(L,Mr,F);Qe?(Ct.activeTexture.set(Pt.TEXTURE0),Mr.imageAtlasTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE),Fr.updatePaintBuffers(Mt)):Pe&&(wn||L.lineAtlas.dirty)&&(Ct.activeTexture.set(Pt.TEXTURE0),L.lineAtlas.bind(Ct)),on.draw(Ct,Pt.TRIANGLES,ve,L.stencilModeForClipping(fr),Ae,pe.disabled,en,F.id,jr.layoutVertexBuffer,jr.indexBuffer,jr.segments,F.paint,L.transform.zoom,Fr),kt=!1}}}}}},fill:function(L,R,F,Y){var ae=F.paint.get("fill-color"),fe=F.paint.get("fill-opacity");if(0!==fe.constantOr(1)){var ve=L.colorModeForRenderPass(),Ae=F.paint.get("fill-pattern"),Pe=L.opaquePassEnabledForLayer()&&!Ae.constantOr(1)&&1===ae.constantOr(e.Color.transparent).a&&1===fe.constantOr(0)?"opaque":"translucent";if(L.renderPass===Pe){var Ge=L.depthModeForSublayer(1,"opaque"===L.renderPass?Xt.ReadWrite:Xt.ReadOnly);Yn(L,R,F,Y,Ge,ve,!1)}if("translucent"===L.renderPass&&F.paint.get("fill-antialias")){var Qe=L.depthModeForSublayer(F.getPaintProperty("fill-outline-color")?2:0,Xt.ReadOnly);Yn(L,R,F,Y,Qe,ve,!0)}}},"fill-extrusion":function(L,R,F,Y){var ae=F.paint.get("fill-extrusion-opacity");if(0!==ae&&"translucent"===L.renderPass){var fe=new Xt(L.context.gl.LEQUAL,Xt.ReadWrite,L.depthRangeFor3D);if(1!==ae||F.paint.get("fill-extrusion-pattern").constantOr(1))Mi(L,R,F,Y,fe,He.disabled,Je.disabled),Mi(L,R,F,Y,fe,L.stencilModeFor3D(),L.colorModeForRenderPass());else{var ve=L.colorModeForRenderPass();Mi(L,R,F,Y,fe,He.disabled,ve)}}},hillshade:function(L,R,F,Y){if("offscreen"===L.renderPass||"translucent"===L.renderPass){for(var ae=L.context,fe=R.getSource().maxzoom,ve=L.depthModeForSublayer(0,Xt.ReadOnly),Ae=L.colorModeForRenderPass(),Pe="translucent"===L.renderPass?L.stencilConfigForOverlap(Y):[{},Y],Ge=Pe[0],Qe=0,st=Pe[1];Qe<st.length;Qe+=1){var Mt=st[Qe],It=R.getTile(Mt);It.needsHillshadePrepare&&"offscreen"===L.renderPass?Qi(L,It,F,fe,ve,He.disabled,Ae):"translucent"===L.renderPass&&Ri(L,It,F,ve,Ge[Mt.overscaledZ],Ae)}ae.viewport.set([0,0,L.width,L.height])}},raster:function(L,R,F,Y){if("translucent"===L.renderPass&&0!==F.paint.get("raster-opacity")&&Y.length)for(var ae=L.context,fe=ae.gl,ve=R.getSource(),Ae=L.useProgram("raster"),Pe=L.colorModeForRenderPass(),Ge=ve instanceof G?[{},Y]:L.stencilConfigForOverlap(Y),Qe=Ge[0],st=Ge[1],Mt=st[st.length-1].overscaledZ,It=!L.options.moving,Ct=0,Pt=st;Ct<Pt.length;Ct+=1){var kt=Pt[Ct],Vt=L.depthModeForSublayer(kt.overscaledZ-Mt,1===F.paint.get("raster-opacity")?Xt.ReadWrite:Xt.ReadOnly,fe.LESS),Nt=R.getTile(kt),Yt=L.transform.calculatePosMatrix(kt.toUnwrapped(),It);Nt.registerFadeDuration(F.paint.get("raster-fade-duration"));var fr=R.findLoadedParent(kt,0),Mr=Ki(Nt,fr,R,F,L.transform),jr=void 0,Fr=void 0,fn="nearest"===F.paint.get("raster-resampling")?fe.NEAREST:fe.LINEAR;ae.activeTexture.set(fe.TEXTURE0),Nt.texture.bind(fn,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),ae.activeTexture.set(fe.TEXTURE1),fr?(fr.texture.bind(fn,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),jr=Math.pow(2,fr.tileID.overscaledZ-Nt.tileID.overscaledZ),Fr=[Nt.tileID.canonical.x*jr%1,Nt.tileID.canonical.y*jr%1]):Nt.texture.bind(fn,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST);var on=xt(Yt,Fr||[0,0],jr||1,Mr,F);ve instanceof G?Ae.draw(ae,fe.TRIANGLES,Vt,He.disabled,Pe,pe.disabled,on,F.id,ve.boundsBuffer,L.quadTriangleIndexBuffer,ve.boundsSegments):Ae.draw(ae,fe.TRIANGLES,Vt,Qe[kt.overscaledZ],Pe,pe.disabled,on,F.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}},background:function(L,R,F){var Y=F.paint.get("background-color"),ae=F.paint.get("background-opacity");if(0!==ae){var fe=L.context,ve=fe.gl,Ae=L.transform,Pe=Ae.tileSize,Ge=F.paint.get("background-pattern");if(!L.isPatternMissing(Ge)){var Qe=!Ge&&1===Y.a&&1===ae&&L.opaquePassEnabledForLayer()?"opaque":"translucent";if(L.renderPass===Qe){var st=He.disabled,Mt=L.depthModeForSublayer(0,"opaque"===Qe?Xt.ReadWrite:Xt.ReadOnly),It=L.colorModeForRenderPass(),Ct=L.useProgram(Ge?"backgroundPattern":"background"),Pt=Ae.coveringTiles({tileSize:Pe});Ge&&(fe.activeTexture.set(ve.TEXTURE0),L.imageManager.bind(L.context));for(var kt=F.getCrossfadeParameters(),Vt=0,Nt=Pt;Vt<Nt.length;Vt+=1){var Yt=Nt[Vt],fr=L.transform.calculatePosMatrix(Yt.toUnwrapped()),Mr=Ge?kr(fr,ae,L,Ge,{tileID:Yt,tileSize:Pe},kt):dr(fr,ae,Y);Ct.draw(fe,ve.TRIANGLES,Mt,st,It,pe.disabled,Mr,F.id,L.tileExtentBuffer,L.quadTriangleIndexBuffer,L.tileExtentSegments)}}}}},debug:function(L,R,F){for(var Y=0;Y<F.length;Y++)mo(L,R,F[Y])},custom:function(L,R,F){var Y=L.context,ae=F.implementation;if("offscreen"===L.renderPass){var fe=ae.prerender;fe&&(L.setCustomLayerDefaults(),Y.setColorMode(L.colorModeForRenderPass()),fe.call(ae,Y.gl,L.transform.customLayerMatrix()),Y.setDirty(),L.setBaseState())}else if("translucent"===L.renderPass){L.setCustomLayerDefaults(),Y.setColorMode(L.colorModeForRenderPass()),Y.setStencilMode(He.disabled);var ve="3d"===ae.renderingMode?new Xt(L.context.gl.LEQUAL,Xt.ReadWrite,L.depthRangeFor3D):L.depthModeForSublayer(0,Xt.ReadOnly);Y.setDepthMode(ve),ae.render(Y.gl,L.transform.customLayerMatrix()),Y.setDirty(),L.setBaseState(),Y.bindFramebuffer.set(null)}}},Zi=function(L,R){this.context=new we(L),this.transform=R,this._tileTextures={},this.setup(),this.numSublayers=Be.maxUnderzooming+Be.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new rn,this.gpuTimers={}};Zi.prototype.resize=function(L,R){if(this.width=L*e.browser.devicePixelRatio,this.height=R*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var F=0,Y=this.style._order;F<Y.length;F+=1)this.style._layers[Y[F]].resize()},Zi.prototype.setup=function(){var L=this.context,R=new e.StructArrayLayout2i4;R.emplaceBack(0,0),R.emplaceBack(e.EXTENT,0),R.emplaceBack(0,e.EXTENT),R.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=L.createVertexBuffer(R,Fn.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var F=new e.StructArrayLayout2i4;F.emplaceBack(0,0),F.emplaceBack(e.EXTENT,0),F.emplaceBack(0,e.EXTENT),F.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=L.createVertexBuffer(F,Fn.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var Y=new e.StructArrayLayout4i8;Y.emplaceBack(0,0,0,0),Y.emplaceBack(e.EXTENT,0,e.EXTENT,0),Y.emplaceBack(0,e.EXTENT,0,e.EXTENT),Y.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=L.createVertexBuffer(Y,J.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ae=new e.StructArrayLayout2i4;ae.emplaceBack(0,0),ae.emplaceBack(1,0),ae.emplaceBack(0,1),ae.emplaceBack(1,1),this.viewportBuffer=L.createVertexBuffer(ae,Fn.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var fe=new e.StructArrayLayout1ui2;fe.emplaceBack(0),fe.emplaceBack(1),fe.emplaceBack(3),fe.emplaceBack(2),fe.emplaceBack(0),this.tileBorderIndexBuffer=L.createIndexBuffer(fe);var ve=new e.StructArrayLayout3ui6;ve.emplaceBack(0,1,2),ve.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=L.createIndexBuffer(ve),this.emptyTexture=new e.Texture(L,{width:1,height:1,data:new Uint8Array([0,0,0,0])},L.gl.RGBA);var Ae=this.context.gl;this.stencilClearMode=new He({func:Ae.ALWAYS,mask:0},0,255,Ae.ZERO,Ae.ZERO,Ae.ZERO)},Zi.prototype.clearStencil=function(){var L=this.context,R=L.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var F=e.create();e.ortho(F,0,this.width,this.height,0,0,1),e.scale(F,F,[R.drawingBufferWidth,R.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(L,R.TRIANGLES,Xt.disabled,this.stencilClearMode,Je.disabled,pe.disabled,ro(F),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Zi.prototype._renderTileClippingMasks=function(L,R){if(this.currentStencilSource!==L.source&&L.isTileClipped()&&R&&R.length){this.currentStencilSource=L.source;var F=this.context,Y=F.gl;this.nextStencilID+R.length>256&&this.clearStencil(),F.setColorMode(Je.disabled),F.setDepthMode(Xt.disabled);var ae=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var fe=0,ve=R;fe<ve.length;fe+=1){var Ae=ve[fe],Pe=this._tileClippingMaskIDs[Ae.key]=this.nextStencilID++;ae.draw(F,Y.TRIANGLES,Xt.disabled,new He({func:Y.ALWAYS,mask:0},Pe,255,Y.KEEP,Y.KEEP,Y.REPLACE),Je.disabled,pe.disabled,ro(Ae.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Zi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var L=this.nextStencilID++,R=this.context.gl;return new He({func:R.NOTEQUAL,mask:255},L,255,R.KEEP,R.KEEP,R.REPLACE)},Zi.prototype.stencilModeForClipping=function(L){var R=this.context.gl;return new He({func:R.EQUAL,mask:255},this._tileClippingMaskIDs[L.key],0,R.KEEP,R.KEEP,R.REPLACE)},Zi.prototype.stencilConfigForOverlap=function(L){var R,F=this.context.gl,Y=L.sort(function(Pe,Ge){return Ge.overscaledZ-Pe.overscaledZ}),ae=Y[Y.length-1].overscaledZ,fe=Y[0].overscaledZ-ae+1;if(fe>1){this.currentStencilSource=void 0,this.nextStencilID+fe>256&&this.clearStencil();for(var ve={},Ae=0;Ae<fe;Ae++)ve[Ae+ae]=new He({func:F.GEQUAL,mask:255},Ae+this.nextStencilID,255,F.KEEP,F.KEEP,F.REPLACE);return this.nextStencilID+=fe,[ve,Y]}return[(R={},R[ae]=He.disabled,R),Y]},Zi.prototype.colorModeForRenderPass=function(){var L=this.context.gl;return this._showOverdrawInspector?new Je([L.CONSTANT_COLOR,L.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Je.unblended:Je.alphaBlended},Zi.prototype.depthModeForSublayer=function(L,R,F){if(!this.opaquePassEnabledForLayer())return Xt.disabled;var Y=1-((1+this.currentLayer)*this.numSublayers+L)*this.depthEpsilon;return new Xt(F||this.context.gl.LEQUAL,R,[Y,Y])},Zi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Zi.prototype.render=function(L,R){var F=this;this.style=L,this.options=R,this.lineAtlas=L.lineAtlas,this.imageManager=L.imageManager,this.glyphManager=L.glyphManager,this.symbolFadeChange=L.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var Y=this.style._order,ae=this.style.sourceCaches;for(var fe in ae){var ve=ae[fe];ve.used&&ve.prepare(this.context)}var Ae,Pe,Ge={},Qe={},st={};for(var Mt in ae){var It=ae[Mt];Ge[Mt]=It.getVisibleCoordinates(),Qe[Mt]=Ge[Mt].slice().reverse(),st[Mt]=It.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ct=0;Ct<Y.length;Ct++)if(this.style._layers[Y[Ct]].is3D()){this.opaquePassCutoff=Ct;break}this.renderPass="offscreen";for(var kt=0,Vt=Y;kt<Vt.length;kt+=1){var Yt=this.style._layers[Vt[kt]];if(Yt.hasOffscreenPass()&&!Yt.isHidden(this.transform.zoom)){var fr=Qe[Yt.source];("custom"===Yt.type||fr.length)&&this.renderLayer(this,ae[Yt.source],Yt,fr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:R.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=R.showOverdrawInspector,this.depthRangeFor3D=[0,1-(L._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=Y.length-1;this.currentLayer>=0;this.currentLayer--){var Mr=this.style._layers[Y[this.currentLayer]],jr=ae[Mr.source],Fr=Ge[Mr.source];this._renderTileClippingMasks(Mr,Fr),this.renderLayer(this,jr,Mr,Fr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<Y.length;this.currentLayer++){var fn=this.style._layers[Y[this.currentLayer]],on=ae[fn.source],wn=("symbol"===fn.type?st:Qe)[fn.source];this._renderTileClippingMasks(fn,Ge[fn.source]),this.renderLayer(this,on,fn,wn)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(yn){yn.source&&!yn.isHidden(F.transform.zoom)&&(yn.source!==(Pe&&Pe.id)&&(Pe=F.style.sourceCaches[yn.source]),(!Ae||Ae.getSource().maxzoom<Pe.getSource().maxzoom)&&(Ae=Pe))}),Ae&&vo.debug(this,Ae,Ae.getVisibleCoordinates())),this.options.showPadding&&function Aa(L){var R=L.transform.padding;Ha(L,L.transform.height-(R.top||0),3,ea),Ha(L,R.bottom||0,3,Da),po(L,R.left||0,3,Ea),po(L,L.transform.width-(R.right||0),3,ca);var Y,ae,fe,ve,F=L.transform.centerPoint;go(Y=L,(ae=F.x)-1,(fe=L.transform.height-F.y)-10,2,20,ve=ma),go(Y,ae-10,fe-1,20,2,ve)}(this),this.context.setDefault()},Zi.prototype.renderLayer=function(L,R,F,Y){F.isHidden(this.transform.zoom)||("background"===F.type||"custom"===F.type||Y.length)&&(this.id=F.id,this.gpuTimingStart(F),vo[F.type](L,R,F,Y,this.style.placement.variableOffsets),this.gpuTimingEnd())},Zi.prototype.gpuTimingStart=function(L){if(this.options.gpuTiming){var R=this.context.extTimerQuery,F=this.gpuTimers[L.id];F||(F=this.gpuTimers[L.id]={calls:0,cpuTime:0,query:R.createQueryEXT()}),F.calls++,R.beginQueryEXT(R.TIME_ELAPSED_EXT,F.query)}},Zi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var L=this.context.extTimerQuery;L.endQueryEXT(L.TIME_ELAPSED_EXT)}},Zi.prototype.collectGpuTimers=function(){var L=this.gpuTimers;return this.gpuTimers={},L},Zi.prototype.queryGpuTimers=function(L){var R={};for(var F in L){var Y=L[F],ae=this.context.extTimerQuery,fe=ae.getQueryObjectEXT(Y.query,ae.QUERY_RESULT_EXT)/1e6;ae.deleteQueryEXT(Y.query),R[F]=fe}return R},Zi.prototype.translatePosMatrix=function(L,R,F,Y,ae){if(!F[0]&&!F[1])return L;var fe=ae?"map"===Y?this.transform.angle:0:"viewport"===Y?-this.transform.angle:0;if(fe){var ve=Math.sin(fe),Ae=Math.cos(fe);F=[F[0]*Ae-F[1]*ve,F[0]*ve+F[1]*Ae]}var Pe=[ae?F[0]:sn(R,F[0],this.transform.zoom),ae?F[1]:sn(R,F[1],this.transform.zoom),0],Ge=new Float32Array(16);return e.translate(Ge,L,Pe),Ge},Zi.prototype.saveTileTexture=function(L){var R=this._tileTextures[L.size[0]];R?R.push(L):this._tileTextures[L.size[0]]=[L]},Zi.prototype.getTileTexture=function(L){var R=this._tileTextures[L];return R&&R.length>0?R.pop():null},Zi.prototype.isPatternMissing=function(L){if(!L)return!1;if(!L.from||!L.to)return!0;var R=this.imageManager.getPattern(L.from.toString()),F=this.imageManager.getPattern(L.to.toString());return!R||!F},Zi.prototype.useProgram=function(L,R){this.cache=this.cache||{};var F=""+L+(R?R.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[F]||(this.cache[F]=new ks(this.context,ys[L],R,Lr[L],this._showOverdrawInspector)),this.cache[F]},Zi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Zi.prototype.setBaseState=function(){var L=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(L.FUNC_ADD)},Zi.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Zi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var vt=function(L,R){this.points=L,this.planes=R};vt.fromInvProjectionMatrix=function(L,R,F){var Y=Math.pow(2,F),ae=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ve){return e.transformMat4([],ve,L)}).map(function(ve){return e.scale$1([],ve,1/ve[3]/R*Y)}),fe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ve){var Ae=e.sub([],ae[ve[0]],ae[ve[1]]),Pe=e.sub([],ae[ve[2]],ae[ve[1]]),Ge=e.normalize([],e.cross([],Ae,Pe)),Qe=-e.dot(Ge,ae[ve[1]]);return Ge.concat(Qe)});return new vt(ae,fe)};var jt=function(L,R){this.min=L,this.max=R,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};jt.prototype.quadrant=function(L){for(var R=[L%2==0,L<2],F=e.clone$2(this.min),Y=e.clone$2(this.max),ae=0;ae<R.length;ae++)F[ae]=R[ae]?this.min[ae]:this.center[ae],Y[ae]=R[ae]?this.center[ae]:this.max[ae];return Y[2]=this.max[2],new jt(F,Y)},jt.prototype.distanceX=function(L){return Math.max(Math.min(this.max[0],L[0]),this.min[0])-L[0]},jt.prototype.distanceY=function(L){return Math.max(Math.min(this.max[1],L[1]),this.min[1])-L[1]},jt.prototype.intersects=function(L){for(var R=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],F=!0,Y=0;Y<L.planes.length;Y++){for(var ae=L.planes[Y],fe=0,ve=0;ve<R.length;ve++)fe+=e.dot$1(ae,R[ve])>=0;if(0===fe)return 0;fe!==R.length&&(F=!1)}if(F)return 2;for(var Ae=0;Ae<3;Ae++){for(var Pe=Number.MAX_VALUE,Ge=-Number.MAX_VALUE,Qe=0;Qe<L.points.length;Qe++){var st=L.points[Qe][Ae]-this.min[Ae];Pe=Math.min(Pe,st),Ge=Math.max(Ge,st)}if(Ge<0||Pe>this.max[Ae]-this.min[Ae])return 0}return 1};var vr=function(L,R,F,Y){if(void 0===L&&(L=0),void 0===R&&(R=0),void 0===F&&(F=0),void 0===Y&&(Y=0),isNaN(L)||L<0||isNaN(R)||R<0||isNaN(F)||F<0||isNaN(Y)||Y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=L,this.bottom=R,this.left=F,this.right=Y};vr.prototype.interpolate=function(L,R,F){return null!=R.top&&null!=L.top&&(this.top=e.number(L.top,R.top,F)),null!=R.bottom&&null!=L.bottom&&(this.bottom=e.number(L.bottom,R.bottom,F)),null!=R.left&&null!=L.left&&(this.left=e.number(L.left,R.left,F)),null!=R.right&&null!=L.right&&(this.right=e.number(L.right,R.right,F)),this},vr.prototype.getCenter=function(L,R){var F=e.clamp((this.left+L-this.right)/2,0,L),Y=e.clamp((this.top+R-this.bottom)/2,0,R);return new e.Point(F,Y)},vr.prototype.equals=function(L){return this.top===L.top&&this.bottom===L.bottom&&this.left===L.left&&this.right===L.right},vr.prototype.clone=function(){return new vr(this.top,this.bottom,this.left,this.right)},vr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Zt=function(L,R,F,Y,ae){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===ae||ae,this._minZoom=L||0,this._maxZoom=R||22,this._minPitch=F??0,this._maxPitch=Y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new vr,this._posMatrixCache={},this._alignedPosMatrixCache={}},yr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Zt.prototype.clone=function(){var L=new Zt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return L.tileSize=this.tileSize,L.latRange=this.latRange,L.width=this.width,L.height=this.height,L._center=this._center,L.zoom=this.zoom,L.angle=this.angle,L._fov=this._fov,L._pitch=this._pitch,L._unmodified=this._unmodified,L._edgeInsets=this._edgeInsets.clone(),L._calcMatrices(),L},yr.minZoom.get=function(){return this._minZoom},yr.minZoom.set=function(L){this._minZoom!==L&&(this._minZoom=L,this.zoom=Math.max(this.zoom,L))},yr.maxZoom.get=function(){return this._maxZoom},yr.maxZoom.set=function(L){this._maxZoom!==L&&(this._maxZoom=L,this.zoom=Math.min(this.zoom,L))},yr.minPitch.get=function(){return this._minPitch},yr.minPitch.set=function(L){this._minPitch!==L&&(this._minPitch=L,this.pitch=Math.max(this.pitch,L))},yr.maxPitch.get=function(){return this._maxPitch},yr.maxPitch.set=function(L){this._maxPitch!==L&&(this._maxPitch=L,this.pitch=Math.min(this.pitch,L))},yr.renderWorldCopies.get=function(){return this._renderWorldCopies},yr.renderWorldCopies.set=function(L){void 0===L?L=!0:null===L&&(L=!1),this._renderWorldCopies=L},yr.worldSize.get=function(){return this.tileSize*this.scale},yr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},yr.size.get=function(){return new e.Point(this.width,this.height)},yr.bearing.get=function(){return-this.angle/Math.PI*180},yr.bearing.set=function(L){var R=-e.wrap(L,-180,180)*Math.PI/180;this.angle!==R&&(this._unmodified=!1,this.angle=R,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},yr.pitch.get=function(){return this._pitch/Math.PI*180},yr.pitch.set=function(L){var R=e.clamp(L,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==R&&(this._unmodified=!1,this._pitch=R,this._calcMatrices())},yr.fov.get=function(){return this._fov/Math.PI*180},yr.fov.set=function(L){L=Math.max(.01,Math.min(60,L)),this._fov!==L&&(this._unmodified=!1,this._fov=L/180*Math.PI,this._calcMatrices())},yr.zoom.get=function(){return this._zoom},yr.zoom.set=function(L){var R=Math.min(Math.max(L,this.minZoom),this.maxZoom);this._zoom!==R&&(this._unmodified=!1,this._zoom=R,this.scale=this.zoomScale(R),this.tileZoom=Math.floor(R),this.zoomFraction=R-this.tileZoom,this._constrain(),this._calcMatrices())},yr.center.get=function(){return this._center},yr.center.set=function(L){L.lat===this._center.lat&&L.lng===this._center.lng||(this._unmodified=!1,this._center=L,this._constrain(),this._calcMatrices())},yr.padding.get=function(){return this._edgeInsets.toJSON()},yr.padding.set=function(L){this._edgeInsets.equals(L)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,L,1),this._calcMatrices())},yr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Zt.prototype.isPaddingEqual=function(L){return this._edgeInsets.equals(L)},Zt.prototype.interpolatePadding=function(L,R,F){this._unmodified=!1,this._edgeInsets.interpolate(L,R,F),this._constrain(),this._calcMatrices()},Zt.prototype.coveringZoomLevel=function(L){var R=(L.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/L.tileSize));return Math.max(0,R)},Zt.prototype.getVisibleUnwrappedCoordinates=function(L){var R=[new e.UnwrappedTileID(0,L)];if(this._renderWorldCopies)for(var F=this.pointCoordinate(new e.Point(0,0)),Y=this.pointCoordinate(new e.Point(this.width,0)),ae=this.pointCoordinate(new e.Point(this.width,this.height)),fe=this.pointCoordinate(new e.Point(0,this.height)),ve=Math.floor(Math.min(F.x,Y.x,ae.x,fe.x)),Ae=Math.floor(Math.max(F.x,Y.x,ae.x,fe.x)),Pe=ve-1;Pe<=Ae+1;Pe++)0!==Pe&&R.push(new e.UnwrappedTileID(Pe,L));return R},Zt.prototype.coveringTiles=function(L){var R=this.coveringZoomLevel(L),F=R;if(void 0!==L.minzoom&&R<L.minzoom)return[];void 0!==L.maxzoom&&R>L.maxzoom&&(R=L.maxzoom);var Y=e.MercatorCoordinate.fromLngLat(this.center),ae=Math.pow(2,R),fe=[ae*Y.x,ae*Y.y,0],ve=vt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,R),Ae=L.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ae=R);var Pe=function(wn){return{aabb:new jt([wn*ae,0,0],[(wn+1)*ae,ae,0]),zoom:0,x:0,y:0,wrap:wn,fullyVisible:!1}},Ge=[],Qe=[],st=R,Mt=L.reparseOverscaled?F:R;if(this._renderWorldCopies)for(var It=1;It<=3;It++)Ge.push(Pe(-It)),Ge.push(Pe(It));for(Ge.push(Pe(0));Ge.length>0;){var Ct=Ge.pop(),Pt=Ct.x,kt=Ct.y,Vt=Ct.fullyVisible;if(!Vt){var Nt=Ct.aabb.intersects(ve);if(0===Nt)continue;Vt=2===Nt}var Yt=Ct.aabb.distanceX(fe),fr=Ct.aabb.distanceY(fe),Mr=Math.max(Math.abs(Yt),Math.abs(fr));if(Ct.zoom===st||Mr>3+(1<<st-Ct.zoom)-2&&Ct.zoom>=Ae)Qe.push({tileID:new e.OverscaledTileID(Ct.zoom===st?Mt:Ct.zoom,Ct.wrap,Ct.zoom,Pt,kt),distanceSq:e.sqrLen([fe[0]-.5-Pt,fe[1]-.5-kt])});else for(var Fr=0;Fr<4;Fr++){var fn=(Pt<<1)+Fr%2,on=(kt<<1)+(Fr>>1);Ge.push({aabb:Ct.aabb.quadrant(Fr),zoom:Ct.zoom+1,x:fn,y:on,wrap:Ct.wrap,fullyVisible:Vt})}}return Qe.sort(function(wn,yn){return wn.distanceSq-yn.distanceSq}).map(function(wn){return wn.tileID})},Zt.prototype.resize=function(L,R){this.width=L,this.height=R,this.pixelsToGLUnits=[2/L,-2/R],this._constrain(),this._calcMatrices()},yr.unmodified.get=function(){return this._unmodified},Zt.prototype.zoomScale=function(L){return Math.pow(2,L)},Zt.prototype.scaleZoom=function(L){return Math.log(L)/Math.LN2},Zt.prototype.project=function(L){var R=e.clamp(L.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(L.lng)*this.worldSize,e.mercatorYfromLat(R)*this.worldSize)},Zt.prototype.unproject=function(L){return new e.MercatorCoordinate(L.x/this.worldSize,L.y/this.worldSize).toLngLat()},yr.point.get=function(){return this.project(this.center)},Zt.prototype.setLocationAtPoint=function(L,R){var F=this.pointCoordinate(R),Y=this.pointCoordinate(this.centerPoint),ae=this.locationCoordinate(L),fe=new e.MercatorCoordinate(ae.x-(F.x-Y.x),ae.y-(F.y-Y.y));this.center=this.coordinateLocation(fe),this._renderWorldCopies&&(this.center=this.center.wrap())},Zt.prototype.locationPoint=function(L){return this.coordinatePoint(this.locationCoordinate(L))},Zt.prototype.pointLocation=function(L){return this.coordinateLocation(this.pointCoordinate(L))},Zt.prototype.locationCoordinate=function(L){return e.MercatorCoordinate.fromLngLat(L)},Zt.prototype.coordinateLocation=function(L){return L.toLngLat()},Zt.prototype.pointCoordinate=function(L){var R=[L.x,L.y,0,1],F=[L.x,L.y,1,1];e.transformMat4(R,R,this.pixelMatrixInverse),e.transformMat4(F,F,this.pixelMatrixInverse);var Y=R[3],ae=F[3],Ae=R[1]/Y,Pe=F[1]/ae,Ge=R[2]/Y,Qe=F[2]/ae,st=Ge===Qe?0:(0-Ge)/(Qe-Ge);return new e.MercatorCoordinate(e.number(R[0]/Y,F[0]/ae,st)/this.worldSize,e.number(Ae,Pe,st)/this.worldSize)},Zt.prototype.coordinatePoint=function(L){var R=[L.x*this.worldSize,L.y*this.worldSize,0,1];return e.transformMat4(R,R,this.pixelMatrix),new e.Point(R[0]/R[3],R[1]/R[3])},Zt.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Zt.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Zt.prototype.setMaxBounds=function(L){L?(this.lngRange=[L.getWest(),L.getEast()],this.latRange=[L.getSouth(),L.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Zt.prototype.calculatePosMatrix=function(L,R){void 0===R&&(R=!1);var F=L.key,Y=R?this._alignedPosMatrixCache:this._posMatrixCache;if(Y[F])return Y[F];var ae=L.canonical,fe=this.worldSize/this.zoomScale(ae.z),ve=ae.x+Math.pow(2,ae.z)*L.wrap,Ae=e.identity(new Float64Array(16));return e.translate(Ae,Ae,[ve*fe,ae.y*fe,0]),e.scale(Ae,Ae,[fe/e.EXTENT,fe/e.EXTENT,1]),e.multiply(Ae,R?this.alignedProjMatrix:this.projMatrix,Ae),Y[F]=new Float32Array(Ae),Y[F]},Zt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Zt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var L,R,F,Y,ae=-90,fe=90,ve=-180,Ae=180,Pe=this.size,Ge=this._unmodified;if(this.latRange){var Qe=this.latRange;ae=e.mercatorYfromLat(Qe[1])*this.worldSize,L=(fe=e.mercatorYfromLat(Qe[0])*this.worldSize)-ae<Pe.y?Pe.y/(fe-ae):0}if(this.lngRange){var st=this.lngRange;ve=e.mercatorXfromLng(st[0])*this.worldSize,R=(Ae=e.mercatorXfromLng(st[1])*this.worldSize)-ve<Pe.x?Pe.x/(Ae-ve):0}var Mt=this.point,It=Math.max(R||0,L||0);if(It)return this.center=this.unproject(new e.Point(R?(Ae+ve)/2:Mt.x,L?(fe+ae)/2:Mt.y)),this.zoom+=this.scaleZoom(It),this._unmodified=Ge,void(this._constraining=!1);if(this.latRange){var Ct=Mt.y,Pt=Pe.y/2;Ct-Pt<ae&&(Y=ae+Pt),Ct+Pt>fe&&(Y=fe-Pt)}if(this.lngRange){var kt=Mt.x,Vt=Pe.x/2;kt-Vt<ve&&(F=ve+Vt),kt+Vt>Ae&&(F=Ae-Vt)}void 0===F&&void 0===Y||(this.center=this.unproject(new e.Point(void 0!==F?F:Mt.x,void 0!==Y?Y:Mt.y))),this._unmodified=Ge,this._constraining=!1}},Zt.prototype._calcMatrices=function(){if(this.height){var R=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var F=Math.PI/2+this._pitch,Y=this._fov*(.5+R.y/this.height),ae=Math.sin(Y)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-F-Y,.01,Math.PI-.01)),fe=this.point,ve=fe.x,Ae=fe.y,Pe=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+this.cameraToCenterDistance),Ge=this.height/50,Qe=new Float64Array(16);e.perspective(Qe,this._fov,this.width/this.height,Ge,Pe),Qe[8]=2*-R.x/this.width,Qe[9]=2*R.y/this.height,e.scale(Qe,Qe,[1,-1,1]),e.translate(Qe,Qe,[0,0,-this.cameraToCenterDistance]),e.rotateX(Qe,Qe,this._pitch),e.rotateZ(Qe,Qe,this.angle),e.translate(Qe,Qe,[-ve,-Ae,0]),this.mercatorMatrix=e.scale([],Qe,[this.worldSize,this.worldSize,this.worldSize]),e.scale(Qe,Qe,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Qe,this.invProjMatrix=e.invert([],this.projMatrix);var st=this.width%2/2,Mt=this.height%2/2,It=Math.cos(this.angle),Ct=Math.sin(this.angle),Pt=ve-Math.round(ve)+It*st+Ct*Mt,kt=Ae-Math.round(Ae)+It*Mt+Ct*st,Vt=new Float64Array(Qe);if(e.translate(Vt,Vt,[Pt>.5?Pt-1:Pt,kt>.5?kt-1:kt,0]),this.alignedProjMatrix=Vt,Qe=e.create(),e.scale(Qe,Qe,[this.width/2,-this.height/2,1]),e.translate(Qe,Qe,[1,-1,0]),this.labelPlaneMatrix=Qe,Qe=e.create(),e.scale(Qe,Qe,[1,-1,1]),e.translate(Qe,Qe,[-1,-1,0]),e.scale(Qe,Qe,[2/this.width,2/this.height,1]),this.glCoordMatrix=Qe,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Qe=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Qe,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Zt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var L=this.pointCoordinate(new e.Point(0,0)),R=[L.x*this.worldSize,L.y*this.worldSize,0,1];return e.transformMat4(R,R,this.pixelMatrix)[3]/this.cameraToCenterDistance},Zt.prototype.getCameraPoint=function(){var R=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,R))},Zt.prototype.getCameraQueryGeometry=function(L){var R=this.getCameraPoint();if(1===L.length)return[L[0],R];for(var F=R.x,Y=R.y,ae=R.x,fe=R.y,ve=0,Ae=L;ve<Ae.length;ve+=1){var Pe=Ae[ve];F=Math.min(F,Pe.x),Y=Math.min(Y,Pe.y),ae=Math.max(ae,Pe.x),fe=Math.max(fe,Pe.y)}return[new e.Point(F,Y),new e.Point(ae,Y),new e.Point(ae,fe),new e.Point(F,fe),new e.Point(F,Y)]},Object.defineProperties(Zt.prototype,yr);var Hr=function(L){var R,Y,ae,fe;this._hashName=L&&encodeURIComponent(L),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(R=this._updateHashUnthrottled.bind(this),300,Y=!1,ae=null,fe=function(){ae=null,Y&&(R(),ae=setTimeout(fe,300),Y=!1)},function(){return Y=!0,ae||fe(),ae})};Hr.prototype.addTo=function(L){return this._map=L,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Hr.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Hr.prototype.getHashString=function(L){var R=this._map.getCenter(),F=Math.round(100*this._map.getZoom())/100,Y=Math.ceil((F*Math.LN2+Math.log(512/360/.5))/Math.LN10),ae=Math.pow(10,Y),fe=Math.round(R.lng*ae)/ae,ve=Math.round(R.lat*ae)/ae,Ae=this._map.getBearing(),Pe=this._map.getPitch(),Ge="";if(Ge+=L?"/"+fe+"/"+ve+"/"+F:F+"/"+ve+"/"+fe,(Ae||Pe)&&(Ge+="/"+Math.round(10*Ae)/10),Pe&&(Ge+="/"+Math.round(Pe)),this._hashName){var Qe=this._hashName,st=!1,Mt=e.window.location.hash.slice(1).split("&").map(function(It){var Ct=It.split("=")[0];return Ct===Qe?(st=!0,Ct+"="+Ge):It}).filter(function(It){return It});return st||Mt.push(Qe+"="+Ge),"#"+Mt.join("&")}return"#"+Ge},Hr.prototype._getCurrentHash=function(){var L,R=this,F=e.window.location.hash.replace("#","");return this._hashName?(F.split("&").map(function(Y){return Y.split("=")}).forEach(function(Y){Y[0]===R._hashName&&(L=Y)}),(L&&L[1]||"").split("/")):F.split("/")},Hr.prototype._onHashChange=function(){var L=this._getCurrentHash();if(L.length>=3&&!L.some(function(F){return isNaN(F)})){var R=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(L[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+L[2],+L[1]],zoom:+L[0],bearing:R,pitch:+(L[4]||0)}),!0}return!1},Hr.prototype._updateHashUnthrottled=function(){var L=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",L)}catch{}};var Xr={linearity:.3,easing:e.bezier(0,0,.3,1)},ln=e.extend({deceleration:2500,maxSpeed:1400},Xr),bn=e.extend({deceleration:20,maxSpeed:1400},Xr),vn=e.extend({deceleration:1e3,maxSpeed:360},Xr),An=e.extend({deceleration:1e3,maxSpeed:90},Xr),In=function(L){this._map=L,this.clear()};function xn(L,R){(!L.duration||L.duration<R.duration)&&(L.duration=R.duration,L.easing=R.easing)}function Pn(L,R,F){var Y=F.maxSpeed,ae=F.linearity,fe=F.deceleration,ve=e.clamp(L*ae/(R/1e3),-Y,Y),Ae=Math.abs(ve)/(fe*ae);return{easing:F.easing,duration:1e3*Ae,amount:ve*(Ae/2)}}In.prototype.clear=function(){this._inertiaBuffer=[]},In.prototype.record=function(L){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:L})},In.prototype._drainInertiaBuffer=function(){for(var L=this._inertiaBuffer,R=e.browser.now();L.length>0&&R-L[0].time>160;)L.shift()},In.prototype._onMoveEnd=function(L){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var R={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},F=0,Y=this._inertiaBuffer;F<Y.length;F+=1){var ae=Y[F].settings;R.zoom+=ae.zoomDelta||0,R.bearing+=ae.bearingDelta||0,R.pitch+=ae.pitchDelta||0,ae.panDelta&&R.pan._add(ae.panDelta),ae.around&&(R.around=ae.around),ae.pinchAround&&(R.pinchAround=ae.pinchAround)}var fe=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ve={};if(R.pan.mag()){var Ae=Pn(R.pan.mag(),fe,e.extend({},ln,L||{}));ve.offset=R.pan.mult(Ae.amount/R.pan.mag()),ve.center=this._map.transform.center,xn(ve,Ae)}if(R.zoom){var Pe=Pn(R.zoom,fe,bn);ve.zoom=this._map.transform.zoom+Pe.amount,xn(ve,Pe)}if(R.bearing){var Ge=Pn(R.bearing,fe,vn);ve.bearing=this._map.transform.bearing+e.clamp(Ge.amount,-179,179),xn(ve,Ge)}if(R.pitch){var Qe=Pn(R.pitch,fe,An);ve.pitch=this._map.transform.pitch+Qe.amount,xn(ve,Qe)}if(ve.zoom||ve.bearing){var st=void 0===R.pinchAround?R.around:R.pinchAround;ve.around=st?this._map.unproject(st):this._map.getCenter()}return this.clear(),e.extend(ve,{noMoveStart:!0})}};var Wn=function(L){function R(Y,ae,fe,ve){void 0===ve&&(ve={});var Ae=r.mousePos(ae.getCanvasContainer(),fe),Pe=ae.unproject(Ae);L.call(this,Y,e.extend({point:Ae,lngLat:Pe,originalEvent:fe},ve)),this._defaultPrevented=!1,this.target=ae}L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R;var F={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,F),R}(e.Event),$n=function(L){function R(Y,ae,fe){var ve="touchend"===Y?fe.changedTouches:fe.touches,Ae=r.touchPos(ae.getCanvasContainer(),ve),Pe=Ae.map(function(st){return ae.unproject(st)}),Ge=Ae.reduce(function(st,Mt,It,Ct){return st.add(Mt.div(Ct.length))},new e.Point(0,0)),Qe=ae.unproject(Ge);L.call(this,Y,{points:Ae,point:Ge,lngLats:Pe,lngLat:Qe,originalEvent:fe}),this._defaultPrevented=!1}L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R;var F={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,F),R}(e.Event),fi=function(L){function R(Y,ae,fe){L.call(this,Y,{originalEvent:fe}),this._defaultPrevented=!1}L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R;var F={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,F),R}(e.Event),un=function(L,R){this._map=L,this._clickTolerance=R.clickTolerance};un.prototype.reset=function(){delete this._mousedownPos},un.prototype.wheel=function(L){return this._firePreventable(new fi(L.type,this._map,L))},un.prototype.mousedown=function(L,R){return this._mousedownPos=R,this._firePreventable(new Wn(L.type,this._map,L))},un.prototype.mouseup=function(L){this._map.fire(new Wn(L.type,this._map,L))},un.prototype.click=function(L,R){this._mousedownPos&&this._mousedownPos.dist(R)>=this._clickTolerance||this._map.fire(new Wn(L.type,this._map,L))},un.prototype.dblclick=function(L){return this._firePreventable(new Wn(L.type,this._map,L))},un.prototype.mouseover=function(L){this._map.fire(new Wn(L.type,this._map,L))},un.prototype.mouseout=function(L){this._map.fire(new Wn(L.type,this._map,L))},un.prototype.touchstart=function(L){return this._firePreventable(new $n(L.type,this._map,L))},un.prototype.touchmove=function(L){this._map.fire(new $n(L.type,this._map,L))},un.prototype.touchend=function(L){this._map.fire(new $n(L.type,this._map,L))},un.prototype.touchcancel=function(L){this._map.fire(new $n(L.type,this._map,L))},un.prototype._firePreventable=function(L){if(this._map.fire(L),L.defaultPrevented)return{}},un.prototype.isEnabled=function(){return!0},un.prototype.isActive=function(){return!1},un.prototype.enable=function(){},un.prototype.disable=function(){};var hi=function(L){this._map=L};hi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},hi.prototype.mousemove=function(L){this._map.fire(new Wn(L.type,this._map,L))},hi.prototype.mousedown=function(){this._delayContextMenu=!0},hi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Wn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},hi.prototype.contextmenu=function(L){this._delayContextMenu?this._contextMenuEvent=L:this._map.fire(new Wn(L.type,this._map,L)),this._map.listens("contextmenu")&&L.preventDefault()},hi.prototype.isEnabled=function(){return!0},hi.prototype.isActive=function(){return!1},hi.prototype.enable=function(){},hi.prototype.disable=function(){};var Vn=function(L,R){this._map=L,this._el=L.getCanvasContainer(),this._container=L.getContainer(),this._clickTolerance=R.clickTolerance||1};function Xn(L,R){for(var F={},Y=0;Y<L.length;Y++)F[L[Y].identifier]=R[Y];return F}Vn.prototype.isEnabled=function(){return!!this._enabled},Vn.prototype.isActive=function(){return!!this._active},Vn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vn.prototype.mousedown=function(L,R){this.isEnabled()&&L.shiftKey&&0===L.button&&(r.disableDrag(),this._startPos=this._lastPos=R,this._active=!0)},Vn.prototype.mousemoveWindow=function(L,R){if(this._active){var F=R;if(!(this._lastPos.equals(F)||!this._box&&F.dist(this._startPos)<this._clickTolerance)){var Y=this._startPos;this._lastPos=F,this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",L));var ae=Math.min(Y.x,F.x),fe=Math.max(Y.x,F.x),ve=Math.min(Y.y,F.y),Ae=Math.max(Y.y,F.y);r.setTransform(this._box,"translate("+ae+"px,"+ve+"px)"),this._box.style.width=fe-ae+"px",this._box.style.height=Ae-ve+"px"}}},Vn.prototype.mouseupWindow=function(L,R){var F=this;if(this._active&&0===L.button){var Y=this._startPos,ae=R;if(this.reset(),r.suppressClick(),Y.x!==ae.x||Y.y!==ae.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:L})),{cameraAnimation:function(fe){return fe.fitScreenCoordinates(Y,ae,F._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",L)}},Vn.prototype.keydown=function(L){this._active&&27===L.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",L))},Vn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag(),delete this._startPos,delete this._lastPos},Vn.prototype._fireEvent=function(L,R){return this._map.fire(new e.Event(L,{originalEvent:R}))};var ui=function(L){this.reset(),this.numTouches=L.numTouches};ui.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ui.prototype.touchstart=function(L,R,F){(this.centroid||F.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=L.timeStamp),F.length===this.numTouches&&(this.centroid=function(Y){for(var ae=new e.Point(0,0),fe=0,ve=Y;fe<ve.length;fe+=1)ae._add(ve[fe]);return ae.div(Y.length)}(R),this.touches=Xn(F,R)))},ui.prototype.touchmove=function(L,R,F){if(!this.aborted&&this.centroid){var Y=Xn(F,R);for(var ae in this.touches){var ve=Y[ae];(!ve||ve.dist(this.touches[ae])>30)&&(this.aborted=!0)}}},ui.prototype.touchend=function(L,R,F){if((!this.centroid||L.timeStamp-this.startTime>500)&&(this.aborted=!0),0===F.length){var Y=!this.aborted&&this.centroid;if(this.reset(),Y)return Y}};var Ci=function(L){this.singleTap=new ui(L),this.numTaps=L.numTaps,this.reset()};Ci.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ci.prototype.touchstart=function(L,R,F){this.singleTap.touchstart(L,R,F)},Ci.prototype.touchmove=function(L,R,F){this.singleTap.touchmove(L,R,F)},Ci.prototype.touchend=function(L,R,F){var Y=this.singleTap.touchend(L,R,F);if(Y){var ae=L.timeStamp-this.lastTime<500,fe=!this.lastTap||this.lastTap.dist(Y)<30;if(ae&&fe||this.reset(),this.count++,this.lastTime=L.timeStamp,this.lastTap=Y,this.count===this.numTaps)return this.reset(),Y}};var Gi=function(){this._zoomIn=new Ci({numTouches:1,numTaps:2}),this._zoomOut=new Ci({numTouches:2,numTaps:1}),this.reset()};Gi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Gi.prototype.touchstart=function(L,R,F){this._zoomIn.touchstart(L,R,F),this._zoomOut.touchstart(L,R,F)},Gi.prototype.touchmove=function(L,R,F){this._zoomIn.touchmove(L,R,F),this._zoomOut.touchmove(L,R,F)},Gi.prototype.touchend=function(L,R,F){var Y=this,ae=this._zoomIn.touchend(L,R,F),fe=this._zoomOut.touchend(L,R,F);return ae?(this._active=!0,L.preventDefault(),setTimeout(function(){return Y.reset()},0),{cameraAnimation:function(ve){return ve.easeTo({duration:300,zoom:ve.getZoom()+1,around:ve.unproject(ae)},{originalEvent:L})}}):fe?(this._active=!0,L.preventDefault(),setTimeout(function(){return Y.reset()},0),{cameraAnimation:function(ve){return ve.easeTo({duration:300,zoom:ve.getZoom()-1,around:ve.unproject(fe)},{originalEvent:L})}}):void 0},Gi.prototype.touchcancel=function(){this.reset()},Gi.prototype.enable=function(){this._enabled=!0},Gi.prototype.disable=function(){this._enabled=!1,this.reset()},Gi.prototype.isEnabled=function(){return this._enabled},Gi.prototype.isActive=function(){return this._active};var Rn=function(L){this.reset(),this._clickTolerance=L.clickTolerance||1};Rn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Rn.prototype._correctButton=function(L,R){return!1},Rn.prototype._move=function(L,R){return{}},Rn.prototype.mousedown=function(L,R){if(!this._lastPoint){var F=r.mouseButton(L);this._correctButton(L,F)&&(this._lastPoint=R,this._eventButton=F)}},Rn.prototype.mousemoveWindow=function(L,R){var F=this._lastPoint;if(F&&(L.preventDefault(),this._moved||!(R.dist(F)<this._clickTolerance)))return this._moved=!0,this._lastPoint=R,this._move(F,R)},Rn.prototype.mouseupWindow=function(L){r.mouseButton(L)===this._eventButton&&(this._moved&&r.suppressClick(),this.reset())},Rn.prototype.enable=function(){this._enabled=!0},Rn.prototype.disable=function(){this._enabled=!1,this.reset()},Rn.prototype.isEnabled=function(){return this._enabled},Rn.prototype.isActive=function(){return this._active};var Hi=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.mousedown=function(F,Y){L.prototype.mousedown.call(this,F,Y),this._lastPoint&&(this._active=!0)},R.prototype._correctButton=function(F,Y){return 0===Y&&!F.ctrlKey},R.prototype._move=function(F,Y){return{around:Y,panDelta:Y.sub(F)}},R}(Rn),qi=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype._correctButton=function(F,Y){return 0===Y&&F.ctrlKey||2===Y},R.prototype._move=function(F,Y){var ae=.8*(Y.x-F.x);if(ae)return this._active=!0,{bearingDelta:ae}},R.prototype.contextmenu=function(F){F.preventDefault()},R}(Rn),Ti=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype._correctButton=function(F,Y){return 0===Y&&F.ctrlKey||2===Y},R.prototype._move=function(F,Y){var ae=-.5*(Y.y-F.y);if(ae)return this._active=!0,{pitchDelta:ae}},R.prototype.contextmenu=function(F){F.preventDefault()},R}(Rn),Xi=function(L){this._minTouches=1,this._clickTolerance=L.clickTolerance||1,this.reset()};Xi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Xi.prototype.touchstart=function(L,R,F){return this._calculateTransform(L,R,F)},Xi.prototype.touchmove=function(L,R,F){if(this._active)return L.preventDefault(),this._calculateTransform(L,R,F)},Xi.prototype.touchend=function(L,R,F){this._calculateTransform(L,R,F),this._active&&F.length<this._minTouches&&this.reset()},Xi.prototype.touchcancel=function(){this.reset()},Xi.prototype._calculateTransform=function(L,R,F){F.length>0&&(this._active=!0);var Y=Xn(F,R),ae=new e.Point(0,0),fe=new e.Point(0,0),ve=0;for(var Ae in Y){var Pe=Y[Ae],Ge=this._touches[Ae];Ge&&(ae._add(Pe),fe._add(Pe.sub(Ge)),ve++,Y[Ae]=Pe)}if(this._touches=Y,!(ve<this._minTouches)&&fe.mag()){var Qe=fe.div(ve);if(this._sum._add(Qe),!(this._sum.mag()<this._clickTolerance))return{around:ae.div(ve),panDelta:Qe}}},Xi.prototype.enable=function(){this._enabled=!0},Xi.prototype.disable=function(){this._enabled=!1,this.reset()},Xi.prototype.isEnabled=function(){return this._enabled},Xi.prototype.isActive=function(){return this._active};var Ni=function(){this.reset()};function fa(L,R,F){for(var Y=0;Y<L.length;Y++)if(L[Y].identifier===F)return R[Y]}function oi(L,R){return Math.log(L/R)/Math.LN2}Ni.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ni.prototype._start=function(L){},Ni.prototype._move=function(L,R,F){return{}},Ni.prototype.touchstart=function(L,R,F){this._firstTwoTouches||F.length<2||(this._firstTwoTouches=[F[0].identifier,F[1].identifier],this._start([R[0],R[1]]))},Ni.prototype.touchmove=function(L,R,F){if(this._firstTwoTouches){L.preventDefault();var Y=this._firstTwoTouches,fe=Y[1],ve=fa(F,R,Y[0]),Ae=fa(F,R,fe);if(ve&&Ae){var Pe=this._aroundCenter?null:ve.add(Ae).div(2);return this._move([ve,Ae],Pe,L)}}},Ni.prototype.touchend=function(L,R,F){if(this._firstTwoTouches){var Y=this._firstTwoTouches,fe=Y[1],ve=fa(F,R,Y[0]),Ae=fa(F,R,fe);ve&&Ae||(this._active&&r.suppressClick(),this.reset())}},Ni.prototype.touchcancel=function(){this.reset()},Ni.prototype.enable=function(L){this._enabled=!0,this._aroundCenter=!!L&&"center"===L.around},Ni.prototype.disable=function(){this._enabled=!1,this.reset()},Ni.prototype.isEnabled=function(){return this._enabled},Ni.prototype.isActive=function(){return this._active};var ia=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.reset=function(){L.prototype.reset.call(this),delete this._distance,delete this._startDistance},R.prototype._start=function(F){this._startDistance=this._distance=F[0].dist(F[1])},R.prototype._move=function(F,Y){var ae=this._distance;if(this._distance=F[0].dist(F[1]),this._active||!(Math.abs(oi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:oi(this._distance,ae),pinchAround:Y}},R}(Ni);function $a(L,R){return 180*L.angleWith(R)/Math.PI}var ss=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.reset=function(){L.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},R.prototype._start=function(F){this._startVector=this._vector=F[0].sub(F[1]),this._minDiameter=F[0].dist(F[1])},R.prototype._move=function(F,Y){var ae=this._vector;if(this._vector=F[0].sub(F[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$a(this._vector,ae),pinchAround:Y}},R.prototype._isBelowThreshold=function(F){this._minDiameter=Math.min(this._minDiameter,F.mag());var Y=25/(Math.PI*this._minDiameter)*360,ae=$a(F,this._startVector);return Math.abs(ae)<Y},R}(Ni);function Jo(L){return Math.abs(L.y)>Math.abs(L.x)}var Eo=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.reset=function(){L.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},R.prototype._start=function(F){this._lastPoints=F,Jo(F[0].sub(F[1]))&&(this._valid=!1)},R.prototype._move=function(F,Y,ae){var fe=F[0].sub(this._lastPoints[0]),ve=F[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(fe,ve,ae.timeStamp),this._valid)return this._lastPoints=F,this._active=!0,{pitchDelta:(fe.y+ve.y)/2*-.5}},R.prototype.gestureBeginsVertically=function(F,Y,ae){if(void 0!==this._valid)return this._valid;var fe=F.mag()>=2,ve=Y.mag()>=2;if(fe||ve){if(!fe||!ve)return void 0===this._firstMove&&(this._firstMove=ae),ae-this._firstMove<100&&void 0;var Ae=F.y>0==Y.y>0;return Jo(F)&&Jo(Y)&&Ae}},R}(Ni),ki={panStep:100,bearingStep:15,pitchStep:10},Ma=function(){var L=ki;this._panStep=L.panStep,this._bearingStep=L.bearingStep,this._pitchStep=L.pitchStep};function Co(L){return L*(2-L)}Ma.prototype.reset=function(){this._active=!1},Ma.prototype.keydown=function(L){var R=this;if(!(L.altKey||L.ctrlKey||L.metaKey)){var F=0,Y=0,ae=0,fe=0,ve=0;switch(L.keyCode){case 61:case 107:case 171:case 187:F=1;break;case 189:case 109:case 173:F=-1;break;case 37:L.shiftKey?Y=-1:(L.preventDefault(),fe=-1);break;case 39:L.shiftKey?Y=1:(L.preventDefault(),fe=1);break;case 38:L.shiftKey?ae=1:(L.preventDefault(),ve=-1);break;case 40:L.shiftKey?ae=-1:(L.preventDefault(),ve=1);break;default:return}return{cameraAnimation:function(Ae){var Pe=Ae.getZoom();Ae.easeTo({duration:300,easeId:"keyboardHandler",easing:Co,zoom:F?Math.round(Pe)+F*(L.shiftKey?2:1):Pe,bearing:Ae.getBearing()+Y*R._bearingStep,pitch:Ae.getPitch()+ae*R._pitchStep,offset:[-fe*R._panStep,-ve*R._panStep],center:Ae.getCenter()},{originalEvent:L})}}}},Ma.prototype.enable=function(){this._enabled=!0},Ma.prototype.disable=function(){this._enabled=!1,this.reset()},Ma.prototype.isEnabled=function(){return this._enabled},Ma.prototype.isActive=function(){return this._active};var aa=function(L,R){this._map=L,this._el=L.getCanvasContainer(),this._handler=R,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};aa.prototype.setZoomRate=function(L){this._defaultZoomRate=L},aa.prototype.setWheelZoomRate=function(L){this._wheelZoomRate=L},aa.prototype.isEnabled=function(){return!!this._enabled},aa.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},aa.prototype.isZooming=function(){return!!this._zooming},aa.prototype.enable=function(L){this.isEnabled()||(this._enabled=!0,this._aroundCenter=L&&"center"===L.around)},aa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},aa.prototype.wheel=function(L){if(this.isEnabled()){var R=L.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*L.deltaY:L.deltaY,F=e.browser.now(),Y=F-(this._lastWheelEventTime||0);this._lastWheelEventTime=F,0!==R&&R%4.000244140625==0?this._type="wheel":0!==R&&Math.abs(R)<4?this._type="trackpad":Y>400?(this._type=null,this._lastValue=R,this._timeout=setTimeout(this._onTimeout,40,L)):this._type||(this._type=Math.abs(Y*R)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,R+=this._lastValue)),L.shiftKey&&R&&(R/=4),this._type&&(this._lastWheelEvent=L,this._delta-=R,this._active||this._start(L)),L.preventDefault()}},aa.prototype._onTimeout=function(L){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(L)},aa.prototype._start=function(L){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var R=r.mousePos(this._el,L);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(R)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},aa.prototype.renderFrame=function(){return this._onScrollFrame()},aa.prototype._onScrollFrame=function(){var L=this;if(this._frameId&&(this._frameId=null,this.isActive())){var R=this._map.transform;if(0!==this._delta){var F="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,Y=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&0!==Y&&(Y=1/Y);var ae="number"==typeof this._targetZoom?R.zoomScale(this._targetZoom):R.scale;this._targetZoom=Math.min(R.maxZoom,Math.max(R.minZoom,R.scaleZoom(ae*Y))),"wheel"===this._type&&(this._startZoom=R.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var fe,ve="number"==typeof this._targetZoom?this._targetZoom:R.zoom,Ae=this._startZoom,Pe=this._easing,Ge=!1;if("wheel"===this._type&&Ae&&Pe){var Qe=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),st=Pe(Qe);fe=e.number(Ae,ve,st),Qe<1?this._frameId||(this._frameId=!0):Ge=!0}else fe=ve,Ge=!0;return this._active=!0,Ge&&(this._active=!1,this._finishTimeout=setTimeout(function(){L._zooming=!1,L._handler._triggerRenderFrame(),delete L._targetZoom,delete L._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ge,zoomDelta:fe-R.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},aa.prototype._smoothOutEasing=function(L){var R=e.ease;if(this._prevEase){var F=this._prevEase,Y=(e.browser.now()-F.start)/F.duration,ae=F.easing(Y+.01)-F.easing(Y),fe=.27/Math.sqrt(ae*ae+1e-4)*.01,ve=Math.sqrt(.0729-fe*fe);R=e.bezier(fe,ve,.25,1)}return this._prevEase={start:e.browser.now(),duration:L,easing:R},R},aa.prototype.reset=function(){this._active=!1};var za=function(L,R){this._clickZoom=L,this._tapZoom=R};za.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},za.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},za.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},za.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var no=function(){this.reset()};no.prototype.reset=function(){this._active=!1},no.prototype.dblclick=function(L,R){return L.preventDefault(),{cameraAnimation:function(F){F.easeTo({duration:300,zoom:F.getZoom()+(L.shiftKey?-1:1),around:F.unproject(R)},{originalEvent:L})}}},no.prototype.enable=function(){this._enabled=!0},no.prototype.disable=function(){this._enabled=!1,this.reset()},no.prototype.isEnabled=function(){return this._enabled},no.prototype.isActive=function(){return this._active};var oa=function(){this._tap=new Ci({numTouches:1,numTaps:1}),this.reset()};oa.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},oa.prototype.touchstart=function(L,R,F){this._swipePoint||(this._tapTime&&L.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?F.length>0&&(this._swipePoint=R[0],this._swipeTouch=F[0].identifier):this._tap.touchstart(L,R,F))},oa.prototype.touchmove=function(L,R,F){if(this._tapTime){if(this._swipePoint){if(F[0].identifier!==this._swipeTouch)return;var Y=R[0],ae=Y.y-this._swipePoint.y;return this._swipePoint=Y,L.preventDefault(),this._active=!0,{zoomDelta:ae/128}}}else this._tap.touchmove(L,R,F)},oa.prototype.touchend=function(L,R,F){this._tapTime?this._swipePoint&&0===F.length&&this.reset():this._tap.touchend(L,R,F)&&(this._tapTime=L.timeStamp)},oa.prototype.touchcancel=function(){this.reset()},oa.prototype.enable=function(){this._enabled=!0},oa.prototype.disable=function(){this._enabled=!1,this.reset()},oa.prototype.isEnabled=function(){return this._enabled},oa.prototype.isActive=function(){return this._active};var To=function(L,R,F){this._el=L,this._mousePan=R,this._touchPan=F};To.prototype.enable=function(L){this._inertiaOptions=L||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},To.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},To.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},To.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pa=function(L,R,F){this._pitchWithRotate=L.pitchWithRotate,this._mouseRotate=R,this._mousePitch=F};pa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var yo=function(L,R,F,Y){this._el=L,this._touchZoom=R,this._touchRotate=F,this._tapDragZoom=Y,this._rotationDisabled=!1,this._enabled=!0};yo.prototype.enable=function(L){this._touchZoom.enable(L),this._rotationDisabled||this._touchRotate.enable(L),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},yo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},yo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},yo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},yo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},yo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var xs=function(L){return L.zoom||L.drag||L.pitch||L.rotate},Ko=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R}(e.Event);function Bs(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta}var qa=function(L,R){this._map=L,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new In(L),this._bearingSnap=R.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(R),e.bindAll(["handleEvent","handleWindowEvent"],this);var F=this._el;this._listeners=[[F,"touchstart",{passive:!1}],[F,"touchmove",{passive:!1}],[F,"touchend",void 0],[F,"touchcancel",void 0],[F,"mousedown",void 0],[F,"mousemove",void 0],[F,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[F,"mouseover",void 0],[F,"mouseout",void 0],[F,"dblclick",void 0],[F,"click",void 0],[F,"keydown",{capture:!1}],[F,"keyup",void 0],[F,"wheel",{passive:!1}],[F,"contextmenu",void 0],[e.window,"blur",void 0]];for(var Y=0,ae=this._listeners;Y<ae.length;Y+=1){var fe=ae[Y],ve=fe[0];r.addEventListener(ve,fe[1],ve===e.window.document?this.handleWindowEvent:this.handleEvent,fe[2])}};qa.prototype.destroy=function(){for(var L=0,R=this._listeners;L<R.length;L+=1){var F=R[L],Y=F[0];r.removeEventListener(Y,F[1],Y===e.window.document?this.handleWindowEvent:this.handleEvent,F[2])}},qa.prototype._addDefaultHandlers=function(L){var R=this._map,F=R.getCanvasContainer();this._add("mapEvent",new un(R,L));var Y=R.boxZoom=new Vn(R,L);this._add("boxZoom",Y);var ae=new Gi,fe=new no;R.doubleClickZoom=new za(fe,ae),this._add("tapZoom",ae),this._add("clickZoom",fe);var ve=new oa;this._add("tapDragZoom",ve);var Ae=R.touchPitch=new Eo;this._add("touchPitch",Ae);var Pe=new qi(L),Ge=new Ti(L);R.dragRotate=new pa(L,Pe,Ge),this._add("mouseRotate",Pe,["mousePitch"]),this._add("mousePitch",Ge,["mouseRotate"]);var Qe=new Hi(L),st=new Xi(L);R.dragPan=new To(F,Qe,st),this._add("mousePan",Qe),this._add("touchPan",st,["touchZoom","touchRotate"]);var Mt=new ss,It=new ia;R.touchZoomRotate=new yo(F,It,Mt,ve),this._add("touchRotate",Mt,["touchPan","touchZoom"]),this._add("touchZoom",It,["touchPan","touchRotate"]);var Ct=R.scrollZoom=new aa(R,this);this._add("scrollZoom",Ct,["mousePan"]);var Pt=R.keyboard=new Ma;this._add("keyboard",Pt),this._add("blockableMapEvent",new hi(R));for(var kt=0,Vt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];kt<Vt.length;kt+=1){var Nt=Vt[kt];L.interactive&&L[Nt]&&R[Nt].enable(L[Nt])}},qa.prototype._add=function(L,R,F){this._handlers.push({handlerName:L,handler:R,allowed:F}),this._handlersById[L]=R},qa.prototype.stop=function(){if(!this._updatingCamera){for(var L=0,R=this._handlers;L<R.length;L+=1)R[L].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},qa.prototype.isActive=function(){for(var L=0,R=this._handlers;L<R.length;L+=1)if(R[L].handler.isActive())return!0;return!1},qa.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},qa.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},qa.prototype.isMoving=function(){return Boolean(xs(this._eventsInProgress))||this.isZooming()},qa.prototype._blockedByActive=function(L,R,F){for(var Y in L)if(Y!==F&&(!R||R.indexOf(Y)<0))return!0;return!1},qa.prototype.handleWindowEvent=function(L){this.handleEvent(L,L.type+"Window")},qa.prototype._getMapTouches=function(L){for(var R=[],F=0,Y=L;F<Y.length;F+=1){var ae=Y[F];this._el.contains(ae.target)&&R.push(ae)}return R},qa.prototype.handleEvent=function(L,R){if("blur"!==L.type){this._updatingCamera=!0;for(var F="renderFrame"===L.type?void 0:L,Y={needsRenderFrame:!1},ae={},fe={},ve=L.touches?this._getMapTouches(L.touches):void 0,Ae=ve?r.touchPos(this._el,ve):r.mousePos(this._el,L),Pe=0,Ge=this._handlers;Pe<Ge.length;Pe+=1){var Qe=Ge[Pe],st=Qe.handlerName,Mt=Qe.handler,It=Qe.allowed;if(Mt.isEnabled()){var Ct=void 0;this._blockedByActive(fe,It,st)?Mt.reset():Mt[R||L.type]&&(Ct=Mt[R||L.type](L,Ae,ve),this.mergeHandlerResult(Y,ae,Ct,st,F),Ct&&Ct.needsRenderFrame&&this._triggerRenderFrame()),(Ct||Mt.isActive())&&(fe[st]=Mt)}}var Pt={};for(var kt in this._previousActiveHandlers)fe[kt]||(Pt[kt]=F);this._previousActiveHandlers=fe,(Object.keys(Pt).length||Bs(Y))&&(this._changes.push([Y,ae,Pt]),this._triggerRenderFrame()),(Object.keys(fe).length||Bs(Y))&&this._map._stop(!0),this._updatingCamera=!1;var Vt=Y.cameraAnimation;Vt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Vt(this._map))}else this.stop()},qa.prototype.mergeHandlerResult=function(L,R,F,Y,ae){if(F){e.extend(L,F);var fe={handlerName:Y,originalEvent:F.originalEvent||ae};void 0!==F.zoomDelta&&(R.zoom=fe),void 0!==F.panDelta&&(R.drag=fe),void 0!==F.pitchDelta&&(R.pitch=fe),void 0!==F.bearingDelta&&(R.rotate=fe)}},qa.prototype._applyChanges=function(){for(var L={},R={},F={},Y=0,ae=this._changes;Y<ae.length;Y+=1){var fe=ae[Y],ve=fe[0],Ae=fe[1],Pe=fe[2];ve.panDelta&&(L.panDelta=(L.panDelta||new e.Point(0,0))._add(ve.panDelta)),ve.zoomDelta&&(L.zoomDelta=(L.zoomDelta||0)+ve.zoomDelta),ve.bearingDelta&&(L.bearingDelta=(L.bearingDelta||0)+ve.bearingDelta),ve.pitchDelta&&(L.pitchDelta=(L.pitchDelta||0)+ve.pitchDelta),void 0!==ve.around&&(L.around=ve.around),void 0!==ve.pinchAround&&(L.pinchAround=ve.pinchAround),ve.noInertia&&(L.noInertia=ve.noInertia),e.extend(R,Ae),e.extend(F,Pe)}this._updateMapTransform(L,R,F),this._changes=[]},qa.prototype._updateMapTransform=function(L,R,F){var Y=this._map,ae=Y.transform;if(!Bs(L))return this._fireEvents(R,F);var fe=L.panDelta,ve=L.zoomDelta,Ae=L.bearingDelta,Pe=L.pitchDelta,Ge=L.around,Qe=L.pinchAround;void 0!==Qe&&(Ge=Qe),Y._stop(!0),Ge=Ge||Y.transform.centerPoint;var st=ae.pointLocation(fe?Ge.sub(fe):Ge);Ae&&(ae.bearing+=Ae),Pe&&(ae.pitch+=Pe),ve&&(ae.zoom+=ve),ae.setLocationAtPoint(st,Ge),this._map._update(),L.noInertia||this._inertia.record(L),this._fireEvents(R,F)},qa.prototype._fireEvents=function(L,R){var F=this,Y=xs(this._eventsInProgress),ae=xs(L),fe={};for(var ve in L)this._eventsInProgress[ve]||(fe[ve+"start"]=L[ve].originalEvent),this._eventsInProgress[ve]=L[ve];for(var Pe in!Y&&ae&&this._fireEvent("movestart",ae.originalEvent),fe)this._fireEvent(Pe,fe[Pe]);for(var Ge in L.rotate&&(this._bearingChanged=!0),ae&&this._fireEvent("move",ae.originalEvent),L)this._fireEvent(Ge,L[Ge].originalEvent);var st,Mt={};for(var It in this._eventsInProgress){var Ct=this._eventsInProgress[It],Pt=Ct.handlerName,kt=Ct.originalEvent;this._handlersById[Pt].isActive()||(delete this._eventsInProgress[It],Mt[It+"end"]=st=R[Pt]||kt)}for(var Vt in Mt)this._fireEvent(Vt,Mt[Vt]);var Nt=xs(this._eventsInProgress);if((Y||ae)&&!Nt){this._updatingCamera=!0;var Yt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),fr=function(Mr){return 0!==Mr&&-F._bearingSnap<Mr&&Mr<F._bearingSnap};Yt?(fr(Yt.bearing||this._map.getBearing())&&(Yt.bearing=0),this._map.easeTo(Yt,{originalEvent:st})):(this._map.fire(new e.Event("moveend",{originalEvent:st})),fr(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},qa.prototype._fireEvent=function(L,R){this._map.fire(new e.Event(L,R?{originalEvent:R}:{}))},qa.prototype._triggerRenderFrame=function(){var L=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(R){delete L._frameId,L.handleEvent(new Ko("renderFrame",{timeStamp:R})),L._applyChanges()}))};var Vs=function(L){function R(F,Y){L.call(this),this._moving=!1,this._zooming=!1,this.transform=F,this._bearingSnap=Y.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},R.prototype.setCenter=function(F,Y){return this.jumpTo({center:F},Y)},R.prototype.panBy=function(F,Y,ae){return F=e.Point.convert(F).mult(-1),this.panTo(this.transform.center,e.extend({offset:F},Y),ae)},R.prototype.panTo=function(F,Y,ae){return this.easeTo(e.extend({center:F},Y),ae)},R.prototype.getZoom=function(){return this.transform.zoom},R.prototype.setZoom=function(F,Y){return this.jumpTo({zoom:F},Y),this},R.prototype.zoomTo=function(F,Y,ae){return this.easeTo(e.extend({zoom:F},Y),ae)},R.prototype.zoomIn=function(F,Y){return this.zoomTo(this.getZoom()+1,F,Y),this},R.prototype.zoomOut=function(F,Y){return this.zoomTo(this.getZoom()-1,F,Y),this},R.prototype.getBearing=function(){return this.transform.bearing},R.prototype.setBearing=function(F,Y){return this.jumpTo({bearing:F},Y),this},R.prototype.getPadding=function(){return this.transform.padding},R.prototype.setPadding=function(F,Y){return this.jumpTo({padding:F},Y),this},R.prototype.rotateTo=function(F,Y,ae){return this.easeTo(e.extend({bearing:F},Y),ae)},R.prototype.resetNorth=function(F,Y){return this.rotateTo(0,e.extend({duration:1e3},F),Y),this},R.prototype.resetNorthPitch=function(F,Y){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},F),Y),this},R.prototype.snapToNorth=function(F,Y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(F,Y):this},R.prototype.getPitch=function(){return this.transform.pitch},R.prototype.setPitch=function(F,Y){return this.jumpTo({pitch:F},Y),this},R.prototype.cameraForBounds=function(F,Y){return F=e.LngLatBounds.convert(F),this._cameraForBoxAndBearing(F.getNorthWest(),F.getSouthEast(),0,Y)},R.prototype._cameraForBoxAndBearing=function(F,Y,ae,fe){var ve={top:0,bottom:0,right:0,left:0};if("number"==typeof(fe=e.extend({padding:ve,offset:[0,0],maxZoom:this.transform.maxZoom},fe)).padding){var Ae=fe.padding;fe.padding={top:Ae,bottom:Ae,right:Ae,left:Ae}}fe.padding=e.extend(ve,fe.padding);var Pe=this.transform,Ge=Pe.padding,Qe=Pe.project(e.LngLat.convert(F)),st=Pe.project(e.LngLat.convert(Y)),Mt=Qe.rotate(-ae*Math.PI/180),It=st.rotate(-ae*Math.PI/180),Ct=new e.Point(Math.max(Mt.x,It.x),Math.max(Mt.y,It.y)),Pt=new e.Point(Math.min(Mt.x,It.x),Math.min(Mt.y,It.y)),kt=Ct.sub(Pt),Vt=(Pe.width-(Ge.left+Ge.right+fe.padding.left+fe.padding.right))/kt.x,Nt=(Pe.height-(Ge.top+Ge.bottom+fe.padding.top+fe.padding.bottom))/kt.y;if(!(Nt<0||Vt<0)){var Yt=Math.min(Pe.scaleZoom(Pe.scale*Math.min(Vt,Nt)),fe.maxZoom),fr=e.Point.convert(fe.offset),Fr=new e.Point(fr.x+(fe.padding.left-fe.padding.right)/2,fr.y+(fe.padding.top-fe.padding.bottom)/2).mult(Pe.scale/Pe.zoomScale(Yt));return{center:Pe.unproject(Qe.add(st).div(2).sub(Fr)),zoom:Yt,bearing:ae}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},R.prototype.fitBounds=function(F,Y,ae){return this._fitInternal(this.cameraForBounds(F,Y),Y,ae)},R.prototype.fitScreenCoordinates=function(F,Y,ae,fe,ve){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(F)),this.transform.pointLocation(e.Point.convert(Y)),ae,fe),fe,ve)},R.prototype._fitInternal=function(F,Y,ae){return F?(delete(Y=e.extend(F,Y)).padding,Y.linear?this.easeTo(Y,ae):this.flyTo(Y,ae)):this},R.prototype.jumpTo=function(F,Y){this.stop();var ae=this.transform,fe=!1,ve=!1,Ae=!1;return"zoom"in F&&ae.zoom!==+F.zoom&&(fe=!0,ae.zoom=+F.zoom),void 0!==F.center&&(ae.center=e.LngLat.convert(F.center)),"bearing"in F&&ae.bearing!==+F.bearing&&(ve=!0,ae.bearing=+F.bearing),"pitch"in F&&ae.pitch!==+F.pitch&&(Ae=!0,ae.pitch=+F.pitch),null==F.padding||ae.isPaddingEqual(F.padding)||(ae.padding=F.padding),this.fire(new e.Event("movestart",Y)).fire(new e.Event("move",Y)),fe&&this.fire(new e.Event("zoomstart",Y)).fire(new e.Event("zoom",Y)).fire(new e.Event("zoomend",Y)),ve&&this.fire(new e.Event("rotatestart",Y)).fire(new e.Event("rotate",Y)).fire(new e.Event("rotateend",Y)),Ae&&this.fire(new e.Event("pitchstart",Y)).fire(new e.Event("pitch",Y)).fire(new e.Event("pitchend",Y)),this.fire(new e.Event("moveend",Y))},R.prototype.easeTo=function(F,Y){var ae=this;this._stop(!1,F.easeId),(!1===(F=e.extend({offset:[0,0],duration:500,easing:e.ease},F)).animate||!F.essential&&e.browser.prefersReducedMotion)&&(F.duration=0);var fe=this.transform,ve=this.getZoom(),Ae=this.getBearing(),Pe=this.getPitch(),Ge=this.getPadding(),Qe="zoom"in F?+F.zoom:ve,st="bearing"in F?this._normalizeBearing(F.bearing,Ae):Ae,Mt="pitch"in F?+F.pitch:Pe,It="padding"in F?F.padding:fe.padding,Ct=e.Point.convert(F.offset),Pt=fe.centerPoint.add(Ct),kt=fe.pointLocation(Pt),Vt=e.LngLat.convert(F.center||kt);this._normalizeCenter(Vt);var Nt,Yt,fr=fe.project(kt),Mr=fe.project(Vt).sub(fr),jr=fe.zoomScale(Qe-ve);F.around&&(Nt=e.LngLat.convert(F.around),Yt=fe.locationPoint(Nt));var Fr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Qe!==ve,this._rotating=this._rotating||Ae!==st,this._pitching=this._pitching||Mt!==Pe,this._padding=!fe.isPaddingEqual(It),this._easeId=F.easeId,this._prepareEase(Y,F.noMoveStart,Fr),clearTimeout(this._easeEndTimeoutID),this._ease(function(fn){if(ae._zooming&&(fe.zoom=e.number(ve,Qe,fn)),ae._rotating&&(fe.bearing=e.number(Ae,st,fn)),ae._pitching&&(fe.pitch=e.number(Pe,Mt,fn)),ae._padding&&(fe.interpolatePadding(Ge,It,fn),Pt=fe.centerPoint.add(Ct)),Nt)fe.setLocationAtPoint(Nt,Yt);else{var on=fe.zoomScale(fe.zoom-ve),wn=Qe>ve?Math.min(2,jr):Math.max(.5,jr),yn=Math.pow(wn,1-fn),Jn=fe.unproject(fr.add(Mr.mult(fn*yn)).mult(on));fe.setLocationAtPoint(fe.renderWorldCopies?Jn.wrap():Jn,Pt)}ae._fireMoveEvents(Y)},function(fn){ae._afterEase(Y,fn)},F),this},R.prototype._prepareEase=function(F,Y,ae){void 0===ae&&(ae={}),this._moving=!0,Y||ae.moving||this.fire(new e.Event("movestart",F)),this._zooming&&!ae.zooming&&this.fire(new e.Event("zoomstart",F)),this._rotating&&!ae.rotating&&this.fire(new e.Event("rotatestart",F)),this._pitching&&!ae.pitching&&this.fire(new e.Event("pitchstart",F))},R.prototype._fireMoveEvents=function(F){this.fire(new e.Event("move",F)),this._zooming&&this.fire(new e.Event("zoom",F)),this._rotating&&this.fire(new e.Event("rotate",F)),this._pitching&&this.fire(new e.Event("pitch",F))},R.prototype._afterEase=function(F,Y){if(!this._easeId||!Y||this._easeId!==Y){delete this._easeId;var ae=this._zooming,fe=this._rotating,ve=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ae&&this.fire(new e.Event("zoomend",F)),fe&&this.fire(new e.Event("rotateend",F)),ve&&this.fire(new e.Event("pitchend",F)),this.fire(new e.Event("moveend",F))}},R.prototype.flyTo=function(F,Y){var ae=this;if(!F.essential&&e.browser.prefersReducedMotion){var fe=e.pick(F,["center","zoom","bearing","pitch","around"]);return this.jumpTo(fe,Y)}this.stop(),F=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},F);var ve=this.transform,Ae=this.getZoom(),Pe=this.getBearing(),Ge=this.getPitch(),Qe=this.getPadding(),st="zoom"in F?e.clamp(+F.zoom,ve.minZoom,ve.maxZoom):Ae,Mt="bearing"in F?this._normalizeBearing(F.bearing,Pe):Pe,It="pitch"in F?+F.pitch:Ge,Ct="padding"in F?F.padding:ve.padding,Pt=ve.zoomScale(st-Ae),kt=e.Point.convert(F.offset),Vt=ve.centerPoint.add(kt),Nt=ve.pointLocation(Vt),Yt=e.LngLat.convert(F.center||Nt);this._normalizeCenter(Yt);var fr=ve.project(Nt),Mr=ve.project(Yt).sub(fr),jr=F.curve,Fr=Math.max(ve.width,ve.height),fn=Fr/Pt,on=Mr.mag();if("minZoom"in F){var wn=e.clamp(Math.min(F.minZoom,Ae,st),ve.minZoom,ve.maxZoom),yn=Fr/ve.zoomScale(wn-Ae);jr=Math.sqrt(yn/on*2)}var Jn=jr*jr;function ii(li){var Oi=(fn*fn-Fr*Fr+(li?-1:1)*Jn*Jn*on*on)/(2*(li?fn:Fr)*Jn*on);return Math.log(Math.sqrt(Oi*Oi+1)-Oi)}function xi(li){return(Math.exp(li)-Math.exp(-li))/2}function en(li){return(Math.exp(li)+Math.exp(-li))/2}var On=ii(0),ti=function(li){return en(On)/en(On+jr*li)},Qn=function(li){return Fr*((en(On)*(xi(Oi=On+jr*li)/en(Oi))-xi(On))/Jn)/on;var Oi},pi=(ii(1)-On)/jr;if(Math.abs(on)<1e-6||!isFinite(pi)){if(Math.abs(Fr-fn)<1e-6)return this.easeTo(F,Y);var wi=fn<Fr?-1:1;pi=Math.abs(Math.log(fn/Fr))/jr,Qn=function(){return 0},ti=function(li){return Math.exp(wi*jr*li)}}return F.duration="duration"in F?+F.duration:1e3*pi/("screenSpeed"in F?+F.screenSpeed/jr:+F.speed),F.maxDuration&&F.duration>F.maxDuration&&(F.duration=0),this._zooming=!0,this._rotating=Pe!==Mt,this._pitching=It!==Ge,this._padding=!ve.isPaddingEqual(Ct),this._prepareEase(Y,!1),this._ease(function(li){var Oi=li*pi,Li=1/ti(Oi);ve.zoom=1===li?st:Ae+ve.scaleZoom(Li),ae._rotating&&(ve.bearing=e.number(Pe,Mt,li)),ae._pitching&&(ve.pitch=e.number(Ge,It,li)),ae._padding&&(ve.interpolatePadding(Qe,Ct,li),Vt=ve.centerPoint.add(kt));var Yi=1===li?Yt:ve.unproject(fr.add(Mr.mult(Qn(Oi))).mult(Li));ve.setLocationAtPoint(ve.renderWorldCopies?Yi.wrap():Yi,Vt),ae._fireMoveEvents(Y)},function(){return ae._afterEase(Y)},F),this},R.prototype.isEasing=function(){return!!this._easeFrameId},R.prototype.stop=function(){return this._stop()},R.prototype._stop=function(F,Y){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ae=this._onEaseEnd;delete this._onEaseEnd,ae.call(this,Y)}if(!F){var fe=this.handlers;fe&&fe.stop()}return this},R.prototype._ease=function(F,Y,ae){!1===ae.animate||0===ae.duration?(F(1),Y()):(this._easeStart=e.browser.now(),this._easeOptions=ae,this._onEaseFrame=F,this._onEaseEnd=Y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},R.prototype._renderFrameCallback=function(){var F=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(F)),F<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},R.prototype._normalizeBearing=function(F,Y){F=e.wrap(F,-180,180);var ae=Math.abs(F-Y);return Math.abs(F-360-Y)<ae&&(F-=360),Math.abs(F+360-Y)<ae&&(F+=360),F},R.prototype._normalizeCenter=function(F){var Y=this.transform;if(Y.renderWorldCopies&&!Y.lngRange){var ae=F.lng-Y.center.lng;F.lng+=ae>180?-360:ae<-180?360:0}},R}(e.Evented),Ga=function(L){void 0===L&&(L={}),this.options=L,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ga.prototype.getDefaultPosition=function(){return"bottom-right"},Ga.prototype.onAdd=function(L){var R=this.options&&this.options.compact;return this._map=L,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=r.create("div","mapboxgl-ctrl-attrib-inner",this._container),R&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===R&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ga.prototype.onRemove=function(){r.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ga.prototype._updateEditLink=function(){var L=this._editLink;L||(L=this._editLink=this._container.querySelector(".mapbox-improve-map"));var R=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(L){var F=R.reduce(function(Y,ae,fe){return ae.value&&(Y+=ae.key+"="+ae.value+(fe<R.length-1?"&":"")),Y},"?");L.href=e.config.FEEDBACK_URL+"/"+F+(this._map._hash?this._map._hash.getHashString(!0):""),L.rel="noopener nofollow"}},Ga.prototype._updateData=function(L){!L||"metadata"!==L.sourceDataType&&"style"!==L.dataType||(this._updateAttributions(),this._updateEditLink())},Ga.prototype._updateAttributions=function(){if(this._map.style){var L=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?L=L.concat(this.options.customAttribution.map(function(Ae){return"string"!=typeof Ae?"":Ae})):"string"==typeof this.options.customAttribution&&L.push(this.options.customAttribution)),this._map.style.stylesheet){var R=this._map.style.stylesheet;this.styleOwner=R.owner,this.styleId=R.id}var F=this._map.style.sourceCaches;for(var Y in F){var ae=F[Y];if(ae.used){var fe=ae.getSource();fe.attribution&&L.indexOf(fe.attribution)<0&&L.push(fe.attribution)}}L.sort(function(Ae,Pe){return Ae.length-Pe.length});var ve=(L=L.filter(function(Ae,Pe){for(var Ge=Pe+1;Ge<L.length;Ge++)if(L[Ge].indexOf(Ae)>=0)return!1;return!0})).join(" | ");ve!==this._attribHTML&&(this._attribHTML=ve,L.length?(this._innerContainer.innerHTML=ve,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ga.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ps=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};ps.prototype.onAdd=function(L){this._map=L,this._container=r.create("div","mapboxgl-ctrl");var R=r.create("a","mapboxgl-ctrl-logo");return R.target="_blank",R.rel="noopener nofollow",R.href="https://www.mapbox.com/",R.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),R.setAttribute("rel","noopener nofollow"),this._container.appendChild(R),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ps.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ps.prototype.getDefaultPosition=function(){return"bottom-left"},ps.prototype._updateLogo=function(L){L&&"metadata"!==L.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ps.prototype._logoRequired=function(){if(this._map.style){var L=this._map.style.sourceCaches;for(var R in L)if(L[R].getSource().mapbox_logo)return!0;return!1}},ps.prototype._updateCompact=function(){var L=this._container.children;if(L.length){var R=L[0];this._map.getCanvasContainer().offsetWidth<250?R.classList.add("mapboxgl-compact"):R.classList.remove("mapboxgl-compact")}};var yi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};yi.prototype.add=function(L){var R=++this._id;return this._queue.push({callback:L,id:R,cancelled:!1}),R},yi.prototype.remove=function(L){for(var R=this._currentlyRunning,F=0,Y=R?this._queue.concat(R):this._queue;F<Y.length;F+=1){var ae=Y[F];if(ae.id===L)return void(ae.cancelled=!0)}},yi.prototype.run=function(L){void 0===L&&(L=0);var R=this._currentlyRunning=this._queue;this._queue=[];for(var F=0,Y=R;F<Y.length;F+=1){var ae=Y[F];if(!ae.cancelled&&(ae.callback(L),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},yi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Pi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ps=e.window.HTMLImageElement,Hs=e.window.HTMLElement,ls=e.window.ImageBitmap,Ho={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},$o=function(L){function R(Y){var ae=this;if(null!=(Y=e.extend({},Ho,Y)).minZoom&&null!=Y.maxZoom&&Y.minZoom>Y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=Y.minPitch&&null!=Y.maxPitch&&Y.minPitch>Y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=Y.minPitch&&Y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=Y.maxPitch&&Y.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var fe=new Zt(Y.minZoom,Y.maxZoom,Y.minPitch,Y.maxPitch,Y.renderWorldCopies);if(L.call(this,fe,Y),this._interactive=Y.interactive,this._maxTileCacheSize=Y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Y.preserveDrawingBuffer,this._antialias=Y.antialias,this._trackResize=Y.trackResize,this._bearingSnap=Y.bearingSnap,this._refreshExpiredTiles=Y.refreshExpiredTiles,this._fadeDuration=Y.fadeDuration,this._crossSourceCollisions=Y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Y.collectResourceTiming,this._renderTaskQueue=new yi,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Pi,Y.locale),this._requestManager=new e.RequestManager(Y.transformRequest,Y.accessToken),"string"==typeof Y.container){if(this._container=e.window.document.getElementById(Y.container),!this._container)throw new Error("Container '"+Y.container+"' not found.")}else{if(!(Y.container instanceof Hs))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=Y.container}if(Y.maxBounds&&this.setMaxBounds(Y.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ae._update(!1)}),this.on("moveend",function(){return ae._update(!1)}),this.on("zoom",function(){return ae._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new qa(this,Y),this._hash=Y.hash&&new Hr("string"==typeof Y.hash&&Y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:Y.center,zoom:Y.zoom,bearing:Y.bearing,pitch:Y.pitch}),Y.bounds&&(this.resize(),this.fitBounds(Y.bounds,e.extend({},Y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Y.localIdeographFontFamily,Y.style&&this.setStyle(Y.style,{localIdeographFontFamily:Y.localIdeographFontFamily}),Y.attributionControl&&this.addControl(new Ga({customAttribution:Y.customAttribution})),this.addControl(new ps,Y.logoPosition),this.on("style.load",function(){ae.transform.unmodified&&ae.jumpTo(ae.style.stylesheet)}),this.on("data",function(Ae){ae._update("style"===Ae.dataType),ae.fire(new e.Event(Ae.dataType+"data",Ae))}),this.on("dataloading",function(Ae){ae.fire(new e.Event(Ae.dataType+"dataloading",Ae))})}L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R;var F={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return R.prototype._getMapId=function(){return this._mapId},R.prototype.addControl=function(Y,ae){if(void 0===ae&&Y.getDefaultPosition&&(ae=Y.getDefaultPosition()),void 0===ae&&(ae="top-right"),!Y||!Y.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=Y.onAdd(this);this._controls.push(Y);var ve=this._controlPositions[ae];return-1!==ae.indexOf("bottom")?ve.insertBefore(fe,ve.firstChild):ve.appendChild(fe),this},R.prototype.removeControl=function(Y){if(!Y||!Y.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ae=this._controls.indexOf(Y);return ae>-1&&this._controls.splice(ae,1),Y.onRemove(this),this},R.prototype.resize=function(Y){var ae=this._containerDimensions(),fe=ae[0],ve=ae[1];this._resizeCanvas(fe,ve),this.transform.resize(fe,ve),this.painter.resize(fe,ve);var Ae=!this._moving;return Ae&&(this.stop(),this.fire(new e.Event("movestart",Y)).fire(new e.Event("move",Y))),this.fire(new e.Event("resize",Y)),Ae&&this.fire(new e.Event("moveend",Y)),this},R.prototype.getBounds=function(){return this.transform.getBounds()},R.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},R.prototype.setMaxBounds=function(Y){return this.transform.setMaxBounds(e.LngLatBounds.convert(Y)),this._update()},R.prototype.setMinZoom=function(Y){if((Y=Y??-2)>=-2&&Y<=this.transform.maxZoom)return this.transform.minZoom=Y,this._update(),this.getZoom()<Y&&this.setZoom(Y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},R.prototype.getMinZoom=function(){return this.transform.minZoom},R.prototype.setMaxZoom=function(Y){if((Y=Y??22)>=this.transform.minZoom)return this.transform.maxZoom=Y,this._update(),this.getZoom()>Y&&this.setZoom(Y),this;throw new Error("maxZoom must be greater than the current minZoom")},R.prototype.getMaxZoom=function(){return this.transform.maxZoom},R.prototype.setMinPitch=function(Y){if((Y=Y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(Y>=0&&Y<=this.transform.maxPitch)return this.transform.minPitch=Y,this._update(),this.getPitch()<Y&&this.setPitch(Y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},R.prototype.getMinPitch=function(){return this.transform.minPitch},R.prototype.setMaxPitch=function(Y){if((Y=Y??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(Y>=this.transform.minPitch)return this.transform.maxPitch=Y,this._update(),this.getPitch()>Y&&this.setPitch(Y),this;throw new Error("maxPitch must be greater than the current minPitch")},R.prototype.getMaxPitch=function(){return this.transform.maxPitch},R.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},R.prototype.setRenderWorldCopies=function(Y){return this.transform.renderWorldCopies=Y,this._update()},R.prototype.project=function(Y){return this.transform.locationPoint(e.LngLat.convert(Y))},R.prototype.unproject=function(Y){return this.transform.pointLocation(e.Point.convert(Y))},R.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},R.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},R.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},R.prototype._createDelegatedListener=function(Y,ae,fe){var ve,Ae=this;if("mouseenter"===Y||"mouseover"===Y){var Pe=!1;return{layer:ae,listener:fe,delegates:{mousemove:function(Qe){var st=Ae.getLayer(ae)?Ae.queryRenderedFeatures(Qe.point,{layers:[ae]}):[];st.length?Pe||(Pe=!0,fe.call(Ae,new Wn(Y,Ae,Qe.originalEvent,{features:st}))):Pe=!1},mouseout:function(){Pe=!1}}}}if("mouseleave"===Y||"mouseout"===Y){var Ge=!1;return{layer:ae,listener:fe,delegates:{mousemove:function(Qe){(Ae.getLayer(ae)?Ae.queryRenderedFeatures(Qe.point,{layers:[ae]}):[]).length?Ge=!0:Ge&&(Ge=!1,fe.call(Ae,new Wn(Y,Ae,Qe.originalEvent)))},mouseout:function(Qe){Ge&&(Ge=!1,fe.call(Ae,new Wn(Y,Ae,Qe.originalEvent)))}}}}return{layer:ae,listener:fe,delegates:(ve={},ve[Y]=function(Qe){var st=Ae.getLayer(ae)?Ae.queryRenderedFeatures(Qe.point,{layers:[ae]}):[];st.length&&(Qe.features=st,fe.call(Ae,Qe),delete Qe.features)},ve)}},R.prototype.on=function(Y,ae,fe){if(void 0===fe)return L.prototype.on.call(this,Y,ae);var ve=this._createDelegatedListener(Y,ae,fe);for(var Ae in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[Y]=this._delegatedListeners[Y]||[],this._delegatedListeners[Y].push(ve),ve.delegates)this.on(Ae,ve.delegates[Ae]);return this},R.prototype.once=function(Y,ae,fe){if(void 0===fe)return L.prototype.once.call(this,Y,ae);var ve=this._createDelegatedListener(Y,ae,fe);for(var Ae in ve.delegates)this.once(Ae,ve.delegates[Ae]);return this},R.prototype.off=function(Y,ae,fe){var ve=this;return void 0===fe?L.prototype.off.call(this,Y,ae):(this._delegatedListeners&&this._delegatedListeners[Y]&&function(Ae){for(var Pe=Ae[Y],Ge=0;Ge<Pe.length;Ge++){var Qe=Pe[Ge];if(Qe.layer===ae&&Qe.listener===fe){for(var st in Qe.delegates)ve.off(st,Qe.delegates[st]);return Pe.splice(Ge,1),ve}}}(this._delegatedListeners),this)},R.prototype.queryRenderedFeatures=function(Y,ae){if(!this.style)return[];var fe;if(void 0!==ae||void 0===Y||Y instanceof e.Point||Array.isArray(Y)||(ae=Y,Y=void 0),ae=ae||{},(Y=Y||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof Y[0])fe=[e.Point.convert(Y)];else{var ve=e.Point.convert(Y[0]),Ae=e.Point.convert(Y[1]);fe=[ve,new e.Point(Ae.x,ve.y),Ae,new e.Point(ve.x,Ae.y),ve]}return this.style.queryRenderedFeatures(fe,ae,this.transform)},R.prototype.querySourceFeatures=function(Y,ae){return this.style.querySourceFeatures(Y,ae)},R.prototype.setStyle=function(Y,ae){return!1!==(ae=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ae)).diff&&ae.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&Y?(this._diffStyle(Y,ae),this):(this._localIdeographFontFamily=ae.localIdeographFontFamily,this._updateStyle(Y,ae))},R.prototype._getUIString=function(Y){var ae=this._locale[Y];if(null==ae)throw new Error("Missing UI string '"+Y+"'");return ae},R.prototype._updateStyle=function(Y,ae){return this.style&&(this.style.setEventedParent(null),this.style._remove()),Y?(this.style=new Ln(this,ae||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof Y?this.style.loadURL(Y):this.style.loadJSON(Y),this):(delete this.style,this)},R.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ln(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},R.prototype._diffStyle=function(Y,ae){var fe=this;if("string"==typeof Y){var ve=this._requestManager.normalizeStyleURL(Y),Ae=this._requestManager.transformRequest(ve,e.ResourceType.Style);e.getJSON(Ae,function(Pe,Ge){Pe?fe.fire(new e.ErrorEvent(Pe)):Ge&&fe._updateDiff(Ge,ae)})}else"object"==typeof Y&&this._updateDiff(Y,ae)},R.prototype._updateDiff=function(Y,ae){try{this.style.setState(Y)&&this._update(!0)}catch(fe){e.warnOnce("Unable to perform style diff: "+(fe.message||fe.error||fe)+".  Rebuilding the style from scratch."),this._updateStyle(Y,ae)}},R.prototype.getStyle=function(){if(this.style)return this.style.serialize()},R.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},R.prototype.addSource=function(Y,ae){return this._lazyInitEmptyStyle(),this.style.addSource(Y,ae),this._update(!0)},R.prototype.isSourceLoaded=function(Y){var ae=this.style&&this.style.sourceCaches[Y];if(void 0!==ae)return ae.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+Y+"'")))},R.prototype.areTilesLoaded=function(){var Y=this.style&&this.style.sourceCaches;for(var ae in Y){var fe=Y[ae]._tiles;for(var ve in fe){var Ae=fe[ve];if("loaded"!==Ae.state&&"errored"!==Ae.state)return!1}}return!0},R.prototype.addSourceType=function(Y,ae,fe){return this._lazyInitEmptyStyle(),this.style.addSourceType(Y,ae,fe)},R.prototype.removeSource=function(Y){return this.style.removeSource(Y),this._update(!0)},R.prototype.getSource=function(Y){return this.style.getSource(Y)},R.prototype.addImage=function(Y,ae,fe){void 0===fe&&(fe={});var ve=fe.pixelRatio;void 0===ve&&(ve=1);var Ae=fe.sdf;void 0===Ae&&(Ae=!1);var Pe=fe.stretchX,Ge=fe.stretchY,Qe=fe.content;if(this._lazyInitEmptyStyle(),ae instanceof Ps||ls&&ae instanceof ls){var st=e.browser.getImageData(ae);this.style.addImage(Y,{data:new e.RGBAImage({width:st.width,height:st.height},st.data),pixelRatio:ve,stretchX:Pe,stretchY:Ge,content:Qe,sdf:Ae,version:0})}else{if(void 0===ae.width||void 0===ae.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Nt=ae;this.style.addImage(Y,{data:new e.RGBAImage({width:ae.width,height:ae.height},new Uint8Array(ae.data)),pixelRatio:ve,stretchX:Pe,stretchY:Ge,content:Qe,sdf:Ae,version:0,userImage:Nt}),Nt.onAdd&&Nt.onAdd(this,Y)}},R.prototype.updateImage=function(Y,ae){var fe=this.style.getImage(Y);if(!fe)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ve=ae instanceof Ps||ls&&ae instanceof ls?e.browser.getImageData(ae):ae,Ae=ve.width,Pe=ve.height,Ge=ve.data;return void 0===Ae||void 0===Pe?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Ae!==fe.data.width||Pe!==fe.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(fe.data.replace(Ge,!(ae instanceof Ps||ls&&ae instanceof ls)),void this.style.updateImage(Y,fe))},R.prototype.hasImage=function(Y){return Y?!!this.style.getImage(Y):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},R.prototype.removeImage=function(Y){this.style.removeImage(Y)},R.prototype.loadImage=function(Y,ae){e.getImage(this._requestManager.transformRequest(Y,e.ResourceType.Image),ae)},R.prototype.listImages=function(){return this.style.listImages()},R.prototype.addLayer=function(Y,ae){return this._lazyInitEmptyStyle(),this.style.addLayer(Y,ae),this._update(!0)},R.prototype.moveLayer=function(Y,ae){return this.style.moveLayer(Y,ae),this._update(!0)},R.prototype.removeLayer=function(Y){return this.style.removeLayer(Y),this._update(!0)},R.prototype.getLayer=function(Y){return this.style.getLayer(Y)},R.prototype.setLayerZoomRange=function(Y,ae,fe){return this.style.setLayerZoomRange(Y,ae,fe),this._update(!0)},R.prototype.setFilter=function(Y,ae,fe){return void 0===fe&&(fe={}),this.style.setFilter(Y,ae,fe),this._update(!0)},R.prototype.getFilter=function(Y){return this.style.getFilter(Y)},R.prototype.setPaintProperty=function(Y,ae,fe,ve){return void 0===ve&&(ve={}),this.style.setPaintProperty(Y,ae,fe,ve),this._update(!0)},R.prototype.getPaintProperty=function(Y,ae){return this.style.getPaintProperty(Y,ae)},R.prototype.setLayoutProperty=function(Y,ae,fe,ve){return void 0===ve&&(ve={}),this.style.setLayoutProperty(Y,ae,fe,ve),this._update(!0)},R.prototype.getLayoutProperty=function(Y,ae){return this.style.getLayoutProperty(Y,ae)},R.prototype.setLight=function(Y,ae){return void 0===ae&&(ae={}),this._lazyInitEmptyStyle(),this.style.setLight(Y,ae),this._update(!0)},R.prototype.getLight=function(){return this.style.getLight()},R.prototype.setFeatureState=function(Y,ae){return this.style.setFeatureState(Y,ae),this._update()},R.prototype.removeFeatureState=function(Y,ae){return this.style.removeFeatureState(Y,ae),this._update()},R.prototype.getFeatureState=function(Y){return this.style.getFeatureState(Y)},R.prototype.getContainer=function(){return this._container},R.prototype.getCanvasContainer=function(){return this._canvasContainer},R.prototype.getCanvas=function(){return this._canvas},R.prototype._containerDimensions=function(){var Y=0,ae=0;return this._container&&(Y=this._container.clientWidth||400,ae=this._container.clientHeight||300),[Y,ae]},R.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},R.prototype._setupContainer=function(){var Y=this._container;Y.classList.add("mapboxgl-map"),(this._missingCSSCanary=r.create("div","mapboxgl-canary",Y)).style.visibility="hidden",this._detectMissingCSS();var ae=this._canvasContainer=r.create("div","mapboxgl-canvas-container",Y);this._interactive&&ae.classList.add("mapboxgl-interactive"),this._canvas=r.create("canvas","mapboxgl-canvas",ae),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var fe=this._containerDimensions();this._resizeCanvas(fe[0],fe[1]);var ve=this._controlContainer=r.create("div","mapboxgl-control-container",Y),Ae=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Pe){Ae[Pe]=r.create("div","mapboxgl-ctrl-"+Pe,ve)})},R.prototype._resizeCanvas=function(Y,ae){var fe=e.browser.devicePixelRatio||1;this._canvas.width=fe*Y,this._canvas.height=fe*ae,this._canvas.style.width=Y+"px",this._canvas.style.height=ae+"px"},R.prototype._setupPainter=function(){var Y=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ae=this._canvas.getContext("webgl",Y)||this._canvas.getContext("experimental-webgl",Y);ae?(this.painter=new Zi(ae,this.transform),e.webpSupported.testSupport(ae)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},R.prototype._contextLost=function(Y){Y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:Y}))},R.prototype._contextRestored=function(Y){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:Y}))},R.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},R.prototype._update=function(Y){return this.style?(this._styleDirty=this._styleDirty||Y,this._sourcesDirty=!0,this.triggerRepaint(),this):this},R.prototype._requestRenderFrame=function(Y){return this._update(),this._renderTaskQueue.add(Y)},R.prototype._cancelRenderFrame=function(Y){this._renderTaskQueue.remove(Y)},R.prototype._render=function(Y){var ae,fe=this,ve=0,Ae=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ae=Ae.createQueryEXT(),Ae.beginQueryEXT(Ae.TIME_ELAPSED_EXT,ae),ve=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(Y),!this._removed){var Pe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ge=this.transform.zoom,Qe=e.browser.now();this.style.zoomHistory.update(Ge,Qe);var st=new e.EvaluationParameters(Ge,{now:Qe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Mt=st.crossFadingFactor();1===Mt&&Mt===this._crossFadingFactor||(Pe=!0,this._crossFadingFactor=Mt),this.style.update(st)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Pe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var It=e.browser.now()-ve;Ae.endQueryEXT(Ae.TIME_ELAPSED_EXT,ae),setTimeout(function(){var Pt=Ae.getQueryObjectEXT(ae,Ae.QUERY_RESULT_EXT)/1e6;Ae.deleteQueryEXT(ae),fe.fire(new e.Event("gpu-timing-frame",{cpuTime:It,gpuTime:Pt}))},50)}if(this.listens("gpu-timing-layer")){var Ct=this.painter.collectGpuTimers();setTimeout(function(){var Pt=fe.painter.queryGpuTimers(Ct);fe.fire(new e.Event("gpu-timing-layer",{layerTimes:Pt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},R.prototype.remove=function(){this._hash&&this._hash.remove();for(var Y=0,ae=this._controls;Y<ae.length;Y+=1)ae[Y].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var fe=this.painter.context.gl.getExtension("WEBGL_lose_context");fe&&fe.loseContext(),nl(this._canvasContainer),nl(this._controlContainer),nl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},R.prototype.triggerRepaint=function(){var Y=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(ae){Y._frame=null,Y._render(ae)}))},R.prototype._onWindowOnline=function(){this._update()},R.prototype._onWindowResize=function(Y){this._trackResize&&this.resize({originalEvent:Y})._update()},F.showTileBoundaries.get=function(){return!!this._showTileBoundaries},F.showTileBoundaries.set=function(Y){this._showTileBoundaries!==Y&&(this._showTileBoundaries=Y,this._update())},F.showPadding.get=function(){return!!this._showPadding},F.showPadding.set=function(Y){this._showPadding!==Y&&(this._showPadding=Y,this._update())},F.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},F.showCollisionBoxes.set=function(Y){this._showCollisionBoxes!==Y&&(this._showCollisionBoxes=Y,Y?this.style._generateCollisionBoxes():this._update())},F.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},F.showOverdrawInspector.set=function(Y){this._showOverdrawInspector!==Y&&(this._showOverdrawInspector=Y,this._update())},F.repaint.get=function(){return!!this._repaint},F.repaint.set=function(Y){this._repaint!==Y&&(this._repaint=Y,this.triggerRepaint())},F.vertices.get=function(){return!!this._vertices},F.vertices.set=function(Y){this._vertices=Y,this._update()},R.prototype._setCacheLimits=function(Y,ae){e.setCacheLimits(Y,ae)},F.version.get=function(){return e.version},Object.defineProperties(R.prototype,F),R}(Vs);function nl(L){L.parentNode&&L.parentNode.removeChild(L)}var Ms={showCompass:!0,showZoom:!0,visualizePitch:!1},sa=function(L){var R=this;this.options=e.extend({},Ms,L),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(F){return F.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(F){return R._map.zoomIn({},{originalEvent:F})}),r.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(F){return R._map.zoomOut({},{originalEvent:F})}),r.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(F){R.options.visualizePitch?R._map.resetNorthPitch({},{originalEvent:F}):R._map.resetNorth({},{originalEvent:F})}),this._compassIcon=r.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};sa.prototype._updateZoomButtons=function(){var L=this._map.getZoom();this._zoomInButton.disabled=L===this._map.getMaxZoom(),this._zoomOutButton.disabled=L===this._map.getMinZoom()},sa.prototype._rotateCompassArrow=function(){var L=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=L},sa.prototype.onAdd=function(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new da(this._map,this._compass,this.options.visualizePitch)),this._container},sa.prototype.onRemove=function(){r.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},sa.prototype._createButton=function(L,R){var F=r.create("button",L,this._container);return F.type="button",F.addEventListener("click",R),F},sa.prototype._setButtonTitle=function(L,R){var F=this._map._getUIString("NavigationControl."+R);L.title=F,L.setAttribute("aria-label",F)};var da=function(L,R,F){void 0===F&&(F=!1),this._clickTolerance=10,this.element=R,this.mouseRotate=new qi({clickTolerance:L.dragRotate._mouseRotate._clickTolerance}),this.map=L,F&&(this.mousePitch=new Ti({clickTolerance:L.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener(R,"mousedown",this.mousedown),r.addEventListener(R,"touchstart",this.touchstart,{passive:!1}),r.addEventListener(R,"touchmove",this.touchmove),r.addEventListener(R,"touchend",this.touchend),r.addEventListener(R,"touchcancel",this.reset)};function ds(L,R,F){if(L=new e.LngLat(L.lng,L.lat),R){var Y=new e.LngLat(L.lng-360,L.lat),ae=new e.LngLat(L.lng+360,L.lat),fe=F.locationPoint(L).distSqr(R);F.locationPoint(Y).distSqr(R)<fe?L=Y:F.locationPoint(ae).distSqr(R)<fe&&(L=ae)}for(;Math.abs(L.lng-F.center.lng)>180;){var ve=F.locationPoint(L);if(ve.x>=0&&ve.y>=0&&ve.x<=F.width&&ve.y<=F.height)break;L.lng>F.center.lng?L.lng-=360:L.lng+=360}return L}da.prototype.down=function(L,R){this.mouseRotate.mousedown(L,R),this.mousePitch&&this.mousePitch.mousedown(L,R),r.disableDrag()},da.prototype.move=function(L,R){var F=this.map,Y=this.mouseRotate.mousemoveWindow(L,R);if(Y&&Y.bearingDelta&&F.setBearing(F.getBearing()+Y.bearingDelta),this.mousePitch){var ae=this.mousePitch.mousemoveWindow(L,R);ae&&ae.pitchDelta&&F.setPitch(F.getPitch()+ae.pitchDelta)}},da.prototype.off=function(){var L=this.element;r.removeEventListener(L,"mousedown",this.mousedown),r.removeEventListener(L,"touchstart",this.touchstart,{passive:!1}),r.removeEventListener(L,"touchmove",this.touchmove),r.removeEventListener(L,"touchend",this.touchend),r.removeEventListener(L,"touchcancel",this.reset),this.offTemp()},da.prototype.offTemp=function(){r.enableDrag(),r.removeEventListener(e.window,"mousemove",this.mousemove),r.removeEventListener(e.window,"mouseup",this.mouseup)},da.prototype.mousedown=function(L){this.down(e.extend({},L,{ctrlKey:!0,preventDefault:function(){return L.preventDefault()}}),r.mousePos(this.element,L)),r.addEventListener(e.window,"mousemove",this.mousemove),r.addEventListener(e.window,"mouseup",this.mouseup)},da.prototype.mousemove=function(L){this.move(L,r.mousePos(this.element,L))},da.prototype.mouseup=function(L){this.mouseRotate.mouseupWindow(L),this.mousePitch&&this.mousePitch.mouseupWindow(L),this.offTemp()},da.prototype.touchstart=function(L){1!==L.targetTouches.length?this.reset():(this._startPos=this._lastPos=r.touchPos(this.element,L.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return L.preventDefault()}},this._startPos))},da.prototype.touchmove=function(L){1!==L.targetTouches.length?this.reset():(this._lastPos=r.touchPos(this.element,L.targetTouches)[0],this.move({preventDefault:function(){return L.preventDefault()}},this._lastPos))},da.prototype.touchend=function(L){0===L.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},da.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var bs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ra(L,R,F){var Y=L.classList;for(var ae in bs)Y.remove("mapboxgl-"+F+"-anchor-"+ae);Y.add("mapboxgl-"+F+"-anchor-"+R)}var _s,Ns=function(L){function R(F,Y){var ae=this;if(L.call(this),(F instanceof e.window.HTMLElement||Y)&&(F=e.extend({element:F},Y)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=F&&F.anchor||"center",this._color=F&&F.color||"#3FB1CE",this._draggable=F&&F.draggable||!1,this._state="inactive",this._rotation=F&&F.rotation||0,this._rotationAlignment=F&&F.rotationAlignment||"auto",this._pitchAlignment=F&&F.pitchAlignment&&"auto"!==F.pitchAlignment?F.pitchAlignment:this._rotationAlignment,F&&F.element)this._element=F.element,this._offset=e.Point.convert(F&&F.offset||[0,0]);else{this._defaultMarker=!0,this._element=r.create("div"),this._element.setAttribute("aria-label","Map marker");var fe=r.createNS("http://www.w3.org/2000/svg","svg");fe.setAttributeNS(null,"display","block"),fe.setAttributeNS(null,"height","41px"),fe.setAttributeNS(null,"width","27px"),fe.setAttributeNS(null,"viewBox","0 0 27 41");var ve=r.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"stroke","none"),ve.setAttributeNS(null,"stroke-width","1"),ve.setAttributeNS(null,"fill","none"),ve.setAttributeNS(null,"fill-rule","evenodd");var Ae=r.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"fill-rule","nonzero");var Pe=r.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Pe.setAttributeNS(null,"fill","#000000");for(var Ge=0,Qe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ge<Qe.length;Ge+=1){var st=Qe[Ge],Mt=r.createNS("http://www.w3.org/2000/svg","ellipse");Mt.setAttributeNS(null,"opacity","0.04"),Mt.setAttributeNS(null,"cx","10.5"),Mt.setAttributeNS(null,"cy","5.80029008"),Mt.setAttributeNS(null,"rx",st.rx),Mt.setAttributeNS(null,"ry",st.ry),Pe.appendChild(Mt)}var It=r.createNS("http://www.w3.org/2000/svg","g");It.setAttributeNS(null,"fill",this._color);var Ct=r.createNS("http://www.w3.org/2000/svg","path");Ct.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),It.appendChild(Ct);var Pt=r.createNS("http://www.w3.org/2000/svg","g");Pt.setAttributeNS(null,"opacity","0.25"),Pt.setAttributeNS(null,"fill","#000000");var kt=r.createNS("http://www.w3.org/2000/svg","path");kt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Pt.appendChild(kt);var Vt=r.createNS("http://www.w3.org/2000/svg","g");Vt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Vt.setAttributeNS(null,"fill","#FFFFFF");var Nt=r.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Yt=r.createNS("http://www.w3.org/2000/svg","circle");Yt.setAttributeNS(null,"fill","#000000"),Yt.setAttributeNS(null,"opacity","0.25"),Yt.setAttributeNS(null,"cx","5.5"),Yt.setAttributeNS(null,"cy","5.5"),Yt.setAttributeNS(null,"r","5.4999962");var fr=r.createNS("http://www.w3.org/2000/svg","circle");fr.setAttributeNS(null,"fill","#FFFFFF"),fr.setAttributeNS(null,"cx","5.5"),fr.setAttributeNS(null,"cy","5.5"),fr.setAttributeNS(null,"r","5.4999962"),Nt.appendChild(Yt),Nt.appendChild(fr),Ae.appendChild(Pe),Ae.appendChild(It),Ae.appendChild(Pt),Ae.appendChild(Vt),Ae.appendChild(Nt),fe.appendChild(Ae),this._element.appendChild(fe),this._offset=e.Point.convert(F&&F.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Mr){Mr.preventDefault()}),this._element.addEventListener("mousedown",function(Mr){Mr.preventDefault()}),this._element.addEventListener("focus",function(){var Mr=ae._map.getContainer();Mr.scrollTop=0,Mr.scrollLeft=0}),Ra(this._element,this._anchor,"marker"),this._popup=null}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.addTo=function(F){return this.remove(),this._map=F,F.getCanvasContainer().appendChild(this._element),F.on("move",this._update),F.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},R.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},R.prototype.getElement=function(){return this._element},R.prototype.setPopup=function(F){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),F){if(!("offset"in F.options)){var Y=Math.sqrt(Math.pow(13.5,2)/2);F.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Y,-1*(24.6+Y)],"bottom-right":[-Y,-1*(24.6+Y)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=F,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},R.prototype._onKeyPress=function(F){var Y=F.code,ae=F.charCode||F.keyCode;"Space"!==Y&&"Enter"!==Y&&32!==ae&&13!==ae||this.togglePopup()},R.prototype._onMapClick=function(F){var Y=F.originalEvent.target,ae=this._element;this._popup&&(Y===ae||ae.contains(Y))&&this.togglePopup()},R.prototype.getPopup=function(){return this._popup},R.prototype.togglePopup=function(){var F=this._popup;return F?(F.isOpen()?F.remove():F.addTo(this._map),this):this},R.prototype._update=function(F){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ds(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var Y="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?Y="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(Y="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ae="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?ae="rotateX(0deg)":"map"===this._pitchAlignment&&(ae="rotateX("+this._map.getPitch()+"deg)"),F&&"moveend"!==F.type||(this._pos=this._pos.round()),r.setTransform(this._element,bs[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ae+" "+Y)}},R.prototype.getOffset=function(){return this._offset},R.prototype.setOffset=function(F){return this._offset=e.Point.convert(F),this._update(),this},R.prototype._onMove=function(F){this._pos=F.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},R.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},R.prototype._addDragHandler=function(F){this._element.contains(F.originalEvent.target)&&(F.preventDefault(),this._positionDelta=F.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},R.prototype.setDraggable=function(F){return this._draggable=!!F,this._map&&(F?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},R.prototype.isDraggable=function(){return this._draggable},R.prototype.setRotation=function(F){return this._rotation=F||0,this._update(),this},R.prototype.getRotation=function(){return this._rotation},R.prototype.setRotationAlignment=function(F){return this._rotationAlignment=F||"auto",this._update(),this},R.prototype.getRotationAlignment=function(){return this._rotationAlignment},R.prototype.setPitchAlignment=function(F){return this._pitchAlignment=F&&"auto"!==F?F:this._rotationAlignment,this._update(),this},R.prototype.getPitchAlignment=function(){return this._pitchAlignment},R}(e.Evented),Os={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},qo=0,gs=!1,Ws=function(L){function R(F){L.call(this),this.options=e.extend({},Os,F),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.onAdd=function(F){var Y;return this._map=F,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Y=this._setupUI,void 0!==_s?Y(_s):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(ae){Y(_s="denied"!==ae.state)}):Y(_s=!!e.window.navigator.geolocation),this._container},R.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),r.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,qo=0,gs=!1},R.prototype._isOutOfMapMaxBounds=function(F){var Y=this._map.getMaxBounds(),ae=F.coords;return Y&&(ae.longitude<Y.getWest()||ae.longitude>Y.getEast()||ae.latitude<Y.getSouth()||ae.latitude>Y.getNorth())},R.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},R.prototype._onSuccess=function(F){if(this._map){if(this._isOutOfMapMaxBounds(F))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",F)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=F,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(F),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(F),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",F)),this._finish()}},R.prototype._updateCamera=function(F){var Y=new e.LngLat(F.coords.longitude,F.coords.latitude),ae=F.coords.accuracy,fe=this._map.getBearing(),ve=e.extend({bearing:fe},this.options.fitBoundsOptions);this._map.fitBounds(Y.toBounds(ae),ve,{geolocateSource:!0})},R.prototype._updateMarker=function(F){if(F){var Y=new e.LngLat(F.coords.longitude,F.coords.latitude);this._accuracyCircleMarker.setLngLat(Y).addTo(this._map),this._userLocationDotMarker.setLngLat(Y).addTo(this._map),this._accuracy=F.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},R.prototype._updateCircleRadius=function(){var F=this._map._container.clientHeight/2,Y=this._map.unproject([0,F]),ae=this._map.unproject([1,F]),fe=Y.distanceTo(ae),ve=Math.ceil(2*this._accuracy/fe);this._circleElement.style.width=ve+"px",this._circleElement.style.height=ve+"px"},R.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},R.prototype._onError=function(F){if(this._map){if(this.options.trackUserLocation)if(1===F.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var Y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=Y,this._geolocateButton.setAttribute("aria-label",Y),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===F.code&&gs)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",F)),this._finish()}},R.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},R.prototype._setupUI=function(F){var Y=this;if(this._container.addEventListener("contextmenu",function(ve){return ve.preventDefault()}),this._geolocateButton=r.create("button","mapboxgl-ctrl-geolocate",this._container),r.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===F){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ae=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ae,this._geolocateButton.setAttribute("aria-label",ae)}else{var fe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=r.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ns(this._dotElement),this._circleElement=r.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ns({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ve){ve.geolocateSource||"ACTIVE_LOCK"!==Y._watchState||ve.originalEvent&&"resize"===ve.originalEvent.type||(Y._watchState="BACKGROUND",Y._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),Y._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),Y.fire(new e.Event("trackuserlocationend")))})},R.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":qo--,gs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var F;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++qo>1?(F={maximumAge:6e5,timeout:0},gs=!0):(F=this.options.positionOptions,gs=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,F)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},R.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},R}(e.Evented),ul={maxWidth:100,unit:"metric"},Ss=function(L){this.options=e.extend({},ul,L),e.bindAll(["_onMove","setUnit"],this)};function qs(L,R,F){var Y=F&&F.maxWidth||100,ae=L._container.clientHeight/2,fe=L.unproject([0,ae]),ve=L.unproject([Y,ae]),Ae=fe.distanceTo(ve);if(F&&"imperial"===F.unit){var Pe=3.2808*Ae;Pe>5280?js(R,Y,Pe/5280,L._getUIString("ScaleControl.Miles")):js(R,Y,Pe,L._getUIString("ScaleControl.Feet"))}else F&&"nautical"===F.unit?js(R,Y,Ae/1852,L._getUIString("ScaleControl.NauticalMiles")):Ae>=1e3?js(R,Y,Ae/1e3,L._getUIString("ScaleControl.Kilometers")):js(R,Y,Ae,L._getUIString("ScaleControl.Meters"))}function js(L,R,F,Y){var ae,fe,ve,Ge,Qe,Ae=(ae=F,(fe=Math.pow(10,(""+Math.floor(ae)).length-1))*(ve=(ve=ae/fe)>=10?10:ve>=5?5:ve>=3?3:ve>=2?2:ve>=1?1:(Ge=ve,Qe=Math.pow(10,Math.ceil(-Math.log(Ge)/Math.LN10)),Math.round(Ge*Qe)/Qe)));L.style.width=R*(Ae/F)+"px",L.innerHTML=Ae+"&nbsp;"+Y}Ss.prototype.getDefaultPosition=function(){return"bottom-left"},Ss.prototype._onMove=function(){qs(this._map,this._container,this.options)},Ss.prototype.onAdd=function(L){return this._map=L,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ss.prototype.onRemove=function(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ss.prototype.setUnit=function(L){this.options.unit=L,qs(this._map,this._container,this.options)};var xo=function(L){this._fullscreen=!1,L&&L.container&&(L.container instanceof e.window.HTMLElement?this._container=L.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};xo.prototype.onAdd=function(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},xo.prototype.onRemove=function(){r.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},xo.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},xo.prototype._setupUI=function(){var L=this._fullscreenButton=r.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);r.create("span","mapboxgl-ctrl-icon",L).setAttribute("aria-hidden",!0),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},xo.prototype._updateTitle=function(){var L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L},xo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},xo.prototype._isFullscreen=function(){return this._fullscreen},xo.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},xo.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var fl={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},il=function(L){function R(F){L.call(this),this.options=e.extend(Object.create(fl),F),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return L&&(R.__proto__=L),(R.prototype=Object.create(L&&L.prototype)).constructor=R,R.prototype.addTo=function(F){return this._map&&this.remove(),this._map=F,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},R.prototype.isOpen=function(){return!!this._map},R.prototype.remove=function(){return this._content&&r.remove(this._content),this._container&&(r.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},R.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},R.prototype.getElement=function(){return this._container},R.prototype.setText=function(F){return this.setDOMContent(e.window.document.createTextNode(F))},R.prototype.setHTML=function(F){var Y,ae=e.window.document.createDocumentFragment(),fe=e.window.document.createElement("body");for(fe.innerHTML=F;Y=fe.firstChild;)ae.appendChild(Y);return this.setDOMContent(ae)},R.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},R.prototype.setMaxWidth=function(F){return this.options.maxWidth=F,this._update(),this},R.prototype.setDOMContent=function(F){return this._createContent(),this._content.appendChild(F),this._update(),this},R.prototype.addClassName=function(F){this._container&&this._container.classList.add(F)},R.prototype.removeClassName=function(F){this._container&&this._container.classList.remove(F)},R.prototype.toggleClassName=function(F){if(this._container)return this._container.classList.toggle(F)},R.prototype._createContent=function(){this._content&&r.remove(this._content),this._content=r.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},R.prototype._onMouseUp=function(F){this._update(F.point)},R.prototype._onMouseMove=function(F){this._update(F.point)},R.prototype._onDrag=function(F){this._update(F.point)},R.prototype._update=function(F){var Y=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=r.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=r.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Mt){return Y._container.classList.add(Mt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ds(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||F)){var fe=this._pos=this._trackPointer&&F?F:this._map.project(this._lngLat),ve=this.options.anchor,Ae=function Mt(It){if(It){if("number"==typeof It){var Ct=Math.round(Math.sqrt(.5*Math.pow(It,2)));return{center:new e.Point(0,0),top:new e.Point(0,It),"top-left":new e.Point(Ct,Ct),"top-right":new e.Point(-Ct,Ct),bottom:new e.Point(0,-It),"bottom-left":new e.Point(Ct,-Ct),"bottom-right":new e.Point(-Ct,-Ct),left:new e.Point(It,0),right:new e.Point(-It,0)}}if(It instanceof e.Point||Array.isArray(It)){var Pt=e.Point.convert(It);return{center:Pt,top:Pt,"top-left":Pt,"top-right":Pt,bottom:Pt,"bottom-left":Pt,"bottom-right":Pt,left:Pt,right:Pt}}return{center:e.Point.convert(It.center||[0,0]),top:e.Point.convert(It.top||[0,0]),"top-left":e.Point.convert(It["top-left"]||[0,0]),"top-right":e.Point.convert(It["top-right"]||[0,0]),bottom:e.Point.convert(It.bottom||[0,0]),"bottom-left":e.Point.convert(It["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(It["bottom-right"]||[0,0]),left:e.Point.convert(It.left||[0,0]),right:e.Point.convert(It.right||[0,0])}}return Mt(new e.Point(0,0))}(this.options.offset);if(!ve){var Pe,Ge=this._container.offsetWidth,Qe=this._container.offsetHeight;Pe=fe.y+Ae.bottom.y<Qe?["top"]:fe.y>this._map.transform.height-Qe?["bottom"]:[],fe.x<Ge/2?Pe.push("left"):fe.x>this._map.transform.width-Ge/2&&Pe.push("right"),ve=0===Pe.length?"bottom":Pe.join("-")}var st=fe.add(Ae[ve]).round();r.setTransform(this._container,bs[ve]+" translate("+st.x+"px,"+st.y+"px)"),Ra(this._container,ve,"popup")}},R.prototype._onClose=function(){this.remove()},R}(e.Evented),ce={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:$o,NavigationControl:sa,GeolocateControl:Ws,AttributionControl:Ga,ScaleControl:Ss,FullscreenControl:xo,Popup:il,Marker:Ns,Style:Ln,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){at().acquire(ft)},clearPrewarmedResources:function(){var L=St;L&&(L.isPreloaded()&&1===L.numActive()?(L.release(ft),St=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(L){e.config.ACCESS_TOKEN=L},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(L){e.config.API_URL=L},get workerCount(){return ct.workerCount},set workerCount(L){ct.workerCount=L},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(L){e.config.MAX_PARALLEL_IMAGE_REQUESTS=L},clearStorage:function(L){e.clearTileCache(L)},workerUrl:""};return ce}),b},"object"==typeof K&&void 0!==Q?Q.exports=v():(m=m||self).mapboxgl=v()},{}],240:[function(y,Q,K){"use strict";Q.exports=Math.log2||function(m){return Math.log(m)*Math.LOG2E}},{}],241:[function(y,Q,K){"use strict";Q.exports=function(v,b){b||(b=v,v=window);var h=0,e=0,n=0,r={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function t(x){var f=!1;return"altKey"in x&&(f=f||x.altKey!==r.alt,r.alt=!!x.altKey),"shiftKey"in x&&(f=f||x.shiftKey!==r.shift,r.shift=!!x.shiftKey),"ctrlKey"in x&&(f=f||x.ctrlKey!==r.control,r.control=!!x.ctrlKey),"metaKey"in x&&(f=f||x.metaKey!==r.meta,r.meta=!!x.metaKey),f}function d(x,f){var T=m.x(f),_=m.y(f);"buttons"in f&&(x=0|f.buttons),(x!==h||T!==e||_!==n||t(f))&&(h=0|x,e=T||0,n=_||0,b&&b(h,e,n,r))}function a(x){d(0,x)}function i(){(h||e||n||r.shift||r.alt||r.meta||r.control)&&(e=n=0,h=0,r.shift=r.alt=r.control=r.meta=!1,b&&b(0,0,0,r))}function s(x){t(x)&&b&&b(h,e,n,r)}function c(x){0===m.buttons(x)?d(0,x):d(h,x)}function l(x){d(h|m.buttons(x),x)}function p(x){d(h&~m.buttons(x),x)}function g(){o||(o=!0,v.addEventListener("mousemove",c),v.addEventListener("mousedown",l),v.addEventListener("mouseup",p),v.addEventListener("mouseleave",a),v.addEventListener("mouseenter",a),v.addEventListener("mouseout",a),v.addEventListener("mouseover",a),v.addEventListener("blur",i),v.addEventListener("keyup",s),v.addEventListener("keydown",s),v.addEventListener("keypress",s),v!==window&&(window.addEventListener("blur",i),window.addEventListener("keyup",s),window.addEventListener("keydown",s),window.addEventListener("keypress",s)))}g();var u={element:v};return Object.defineProperties(u,{enabled:{get:function(){return o},set:function(x){x?g():!o||(o=!1,v.removeEventListener("mousemove",c),v.removeEventListener("mousedown",l),v.removeEventListener("mouseup",p),v.removeEventListener("mouseleave",a),v.removeEventListener("mouseenter",a),v.removeEventListener("mouseout",a),v.removeEventListener("mouseover",a),v.removeEventListener("blur",i),v.removeEventListener("keyup",s),v.removeEventListener("keydown",s),v.removeEventListener("keypress",s),v!==window&&(window.removeEventListener("blur",i),window.removeEventListener("keyup",s),window.removeEventListener("keydown",s),window.removeEventListener("keypress",s)))},enumerable:!0},buttons:{get:function(){return h},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),u};var m=y("mouse-event")},{"mouse-event":243}],242:[function(y,Q,K){var m={left:0,top:0};Q.exports=function(v,b,h){b=b||v.currentTarget||v.srcElement,Array.isArray(h)||(h=[0,0]);var o,e=v.clientX||0,n=v.clientY||0,r=(o=b)===window||o===document||o===document.body?m:o.getBoundingClientRect();return h[0]=e-r.left,h[1]=n-r.top,h}},{}],243:[function(y,Q,K){"use strict";function m(v){return v.target||v.srcElement||window}K.buttons=function(v){if("object"==typeof v){if("buttons"in v)return v.buttons;if("which"in v){if(2===(b=v.which))return 4;if(3===b)return 2;if(b>0)return 1<<b-1}else if("button"in v){var b;if(1===(b=v.button))return 4;if(2===b)return 2;if(b>=0)return 1<<b}}return 0},K.element=m,K.x=function(v){if("object"==typeof v){if("offsetX"in v)return v.offsetX;var b=m(v).getBoundingClientRect();return v.clientX-b.left}return 0},K.y=function(v){if("object"==typeof v){if("offsetY"in v)return v.offsetY;var b=m(v).getBoundingClientRect();return v.clientY-b.top}return 0}},{}],244:[function(y,Q,K){"use strict";var m=y("to-px");Q.exports=function(v,b,h){"function"==typeof v&&(h=!!b,b=v,v=window);var e=m("ex",v),n=function(r){h&&r.preventDefault();var o=r.deltaX||0,t=r.deltaY||0,d=r.deltaZ||0,a=1;switch(r.deltaMode){case 1:a=e;break;case 2:a=window.innerHeight}if(t*=a,d*=a,(o*=a)||t||d)return b(o,t,d,r)};return v.addEventListener("wheel",n),n}},{"to-px":315}],245:[function(y,Q,K){(function(m,v){(function(){var b,h,e;e=function(){"use strict";var b,h,e,n=Object.prototype.toString,r=void 0!==v?function(x){return v(x)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(x,f,T,_){return Object.defineProperty(x,f,{value:T,writable:!0,configurable:!1!==_})}}catch{b=function(f,T,_){return f[T]=_,f}}function o(x,f){e.add(x,f),h||(h=r(e.drain))}function t(x){var f,T=typeof x;return null==x||"object"!=T&&"function"!=T||(f=x.then),"function"==typeof f&&f}function d(){for(var x=0;x<this.chain.length;x++)a(this,1===this.state?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function a(x,f,T){var _,k;try{!1===f?T.reject(x.msg):(_=!0===f?x.msg:f.call(void 0,x.msg))===T.promise?T.reject(TypeError("Promise-chain cycle")):(k=t(_))?k.call(_,T.resolve,T.reject):T.resolve(_)}catch(w){T.reject(w)}}function i(x){var f,T=this;if(!T.triggered){T.triggered=!0,T.def&&(T=T.def);try{(f=t(x))?o(function(){var _=new l(T);try{f.call(x,function(){i.apply(_,arguments)},function(){s.apply(_,arguments)})}catch(k){s.call(_,k)}}):(T.msg=x,T.state=1,T.chain.length>0&&o(d,T))}catch(_){s.call(new l(T),_)}}}function s(x){var f=this;f.triggered||(f.triggered=!0,f.def&&(f=f.def),f.msg=x,f.state=2,f.chain.length>0&&o(d,f))}function c(x,f,T,_){for(var k=0;k<f.length;k++)!function(w){x.resolve(f[w]).then(function(C){T(w,C)},_)}(k)}function l(x){this.def=x,this.triggered=!1}function p(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(x){if("function"!=typeof x)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var f=new p(this);this.then=function(T,_){var k={success:"function"!=typeof T||T,failure:"function"==typeof _&&_};return k.promise=new this.constructor(function(w,C){if("function"!=typeof w||"function"!=typeof C)throw TypeError("Not a function");k.resolve=w,k.reject=C}),f.chain.push(k),0!==f.state&&o(d,f),k.promise},this.catch=function(T){return this.then(void 0,T)};try{x.call(void 0,function(T){i.call(f,T)},function(T){s.call(f,T)})}catch(T){s.call(f,T)}}e=function(){var x,f,T;function _(k,w){this.fn=k,this.self=w,this.next=void 0}return{add:function(k,w){T=new _(k,w),f?f.next=T:x=T,f=T,T=void 0},drain:function(){var k=x;for(x=f=h=void 0;k;)k.fn.call(k.self),k=k.next}}}();var u=b({},"constructor",g,!1);return g.prototype=u,b(u,"__NPO__",0,!1),b(g,"resolve",function(x){return x&&"object"==typeof x&&1===x.__NPO__?x:new this(function(f,T){if("function"!=typeof f||"function"!=typeof T)throw TypeError("Not a function");f(x)})}),b(g,"reject",function(x){return new this(function(f,T){if("function"!=typeof f||"function"!=typeof T)throw TypeError("Not a function");T(x)})}),b(g,"all",function(x){var f=this;return"[object Array]"!=n.call(x)?f.reject(TypeError("Not an array")):0===x.length?f.resolve([]):new f(function(T,_){if("function"!=typeof T||"function"!=typeof _)throw TypeError("Not a function");var k=x.length,w=Array(k),C=0;c(f,x,function(A,O){w[A]=O,++C===k&&T(w)},_)})}),b(g,"race",function(x){var f=this;return"[object Array]"!=n.call(x)?f.reject(TypeError("Not an array")):new f(function(T,_){if("function"!=typeof T||"function"!=typeof _)throw TypeError("Not a function");c(f,x,function(k,w){T(w)},_)})}),g},(h=void 0!==m?m:this)[b="Promise"]=h[b]||e(),void 0!==Q&&Q.exports&&(Q.exports=h[b])}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},y("timers").setImmediate)},{timers:312}],246:[function(y,Q,K){var m=Math.PI,v=r(120);function b(o,t,d,a){return["C",o,t,d,a,d,a]}function h(o,t,d,a,i,s){return["C",o/3+2/3*d,t/3+2/3*a,i/3+2/3*d,s/3+2/3*a,i,s]}function e(o,t,d,a,i,s,c,l,p,g){if(g)O=g[0],P=g[1],C=g[2],A=g[3];else{var u=n(o,t,-i);t=u.y;var x=((o=u.x)-(l=(u=n(l,p,-i)).x))/2,f=(t-(p=u.y))/2,T=x*x/(d*d)+f*f/(a*a);T>1&&(d*=T=Math.sqrt(T),a*=T);var _=d*d,k=a*a,w=(s==c?-1:1)*Math.sqrt(Math.abs((_*k-_*f*f-k*x*x)/(_*f*f+k*x*x)));w==1/0&&(w=1);var C=w*d*f/a+(o+l)/2,A=w*-a*x/d+(t+p)/2,O=Math.asin(((t-A)/a).toFixed(9)),P=Math.asin(((p-A)/a).toFixed(9));(O=o<C?m-O:O)<0&&(O=2*m+O),(P=l<C?m-P:P)<0&&(P=2*m+P),c&&O>P&&(O-=2*m),!c&&P>O&&(P-=2*m)}if(Math.abs(P-O)>v){var S=P,E=l,D=p;P=O+v*(c&&P>O?1:-1);var z=e(l=C+d*Math.cos(P),p=A+a*Math.sin(P),d,a,i,0,c,E,D,[P,S,C,A])}var N=Math.tan((P-O)/4),V=4/3*d*N,X=4/3*a*N,J=[2*o-(o+V*Math.sin(O)),2*t-(t-X*Math.cos(O)),l+V*Math.sin(P),p-X*Math.cos(P),l,p];if(g)return J;z&&(J=J.concat(z));for(var G=0;G<J.length;){var Z=n(J[G],J[G+1],i);J[G++]=Z.x,J[G++]=Z.y}return J}function n(o,t,d){return{x:o*Math.cos(d)-t*Math.sin(d),y:o*Math.sin(d)+t*Math.cos(d)}}function r(o){return o*(m/180)}Q.exports=function(o){for(var t,d=[],a=0,i=0,s=0,c=0,l=null,p=null,g=0,u=0,x=0,f=o.length;x<f;x++){var T=o[x],_=T[0];switch(_){case"M":s=T[1],c=T[2];break;case"A":(T=e(g,u,T[1],T[2],r(T[3]),T[4],T[5],T[6],T[7])).unshift("C"),T.length>7&&(d.push(T.splice(0,7)),T.unshift("C"));break;case"S":var k=g,w=u;"C"!=t&&"S"!=t||(k+=k-a,w+=w-i),T=["C",k,w,T[1],T[2],T[3],T[4]];break;case"T":"Q"==t||"T"==t?(l=2*g-l,p=2*u-p):(l=g,p=u),T=h(g,u,l,p,T[1],T[2]);break;case"Q":l=T[1],p=T[2],T=h(g,u,T[1],T[2],T[3],T[4]);break;case"L":T=b(g,u,T[1],T[2]);break;case"H":T=b(g,u,T[1],u);break;case"V":T=b(g,u,g,T[1]);break;case"Z":T=b(g,u,s,c)}t=_,g=T[T.length-2],u=T[T.length-1],T.length>4?(a=T[T.length-4],i=T[T.length-3]):(a=g,i=u),d.push(T)}return d}},{}],247:[function(y,Q,K){"use strict";var m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function h(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}Q.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},r=0;r<10;r++)n["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(t){return n[t]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch{return!1}}()?Object.assign:function(e,n){for(var r,o,t=h(e),d=1;d<arguments.length;d++){for(var a in r=Object(arguments[d]))v.call(r,a)&&(t[a]=r[a]);if(m){o=m(r);for(var i=0;i<o.length;i++)b.call(r,o[i])&&(t[o[i]]=r[o[i]])}}return t}},{}],248:[function(y,Q,K){"use strict";function m(h,e){if("string"!=typeof h)return[h];var n=[h];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var r=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],o=e.escape||"___",t=!!e.flat;r.forEach(function(a){var i=new RegExp(["\\",a[0],"[^\\",a[0],"\\",a[1],"]*\\",a[1]].join("")),s=[];function c(l,p,g){var u=n.push(l.slice(a[0].length,-a[1].length))-1;return s.push(u),o+u+o}n.forEach(function(l,p){for(var g,u=0;l!=g;)if(g=l,l=l.replace(i,c),u++>1e4)throw Error("References have circular dependency. Please, check them.");n[p]=l}),s=s.reverse(),n=n.map(function(l){return s.forEach(function(p){l=l.replace(new RegExp("(\\"+o+p+"\\"+o+")","g"),a[0]+"$1"+a[1])}),l})});var d=new RegExp("\\"+o+"([0-9]+)\\"+o);return t?n:function a(i,s,c){for(var l,p=[],g=0;l=d.exec(i);){if(g++>1e4)throw Error("Circular references in parenthesis");p.push(i.slice(0,l.index)),p.push(a(s[l[1]],s)),i=i.slice(l.index+l[0].length)}return p.push(i),p}(n[0],n)}function v(h,e){if(e&&e.flat){var n,r=e&&e.escape||"___",o=h[0];if(!o)return"";for(var t=new RegExp("\\"+r+"([0-9]+)\\"+r),d=0;o!=n;){if(d++>1e4)throw Error("Circular references in "+h);n=o,o=o.replace(t,a)}return o}return h.reduce(function i(s,c){return Array.isArray(c)&&(c=c.reduce(i,"")),s+c},"");function a(i,s){if(null==h[s])throw Error("Reference "+s+"is undefined");return h[s]}}function b(h,e){return Array.isArray(h)?v(h,e):m(h,e)}b.parse=m,b.stringify=v,Q.exports=b},{}],249:[function(y,Q,K){"use strict";var m=y("pick-by-alias");Q.exports=function(v){var b;return arguments.length>1&&(v=arguments),"string"==typeof v?v=v.split(/\s/).map(parseFloat):"number"==typeof v&&(v=[v]),v.length&&"number"==typeof v[0]?b=1===v.length?{width:v[0],height:v[0],x:0,y:0}:2===v.length?{width:v[0],height:v[1],x:0,y:0}:{x:v[0],y:v[1],width:v[2]-v[0]||0,height:v[3]-v[1]||0}:v&&((b={x:(v=m(v,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:v.top||0}).width=v.width??(v.right?v.right-b.x:0),b.height=v.height??(v.bottom?v.bottom-b.y:0)),b}},{"pick-by-alias":253}],250:[function(y,Q,K){Q.exports=function(h){var e=[];return h.replace(v,function(n,r,o){var a,t=r.toLowerCase();for(a=void 0,o=(a=o.match(b))?a.map(Number):[],"m"==t&&o.length>2&&(e.push([r].concat(o.splice(0,2))),t="l",r="m"==r?"l":"L");;){if(o.length==m[t])return o.unshift(r),e.push(o);if(o.length<m[t])throw new Error("malformed path data");e.push([r].concat(o.splice(0,m[t])))}}),e};var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},v=/([astvzqmhlc])([^astvzqmhlc]*)/gi,b=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(y,Q,K){Q.exports=function(m,v){v||(v=[0,""]),m=String(m);var b=parseFloat(m,10);return v[0]=b,v[1]=m.match(/[\d.\-\+]*\s*(.*)/)[1]||"",v}},{}],252:[function(y,Q,K){(function(m){(function(){(function(){var v,b,h,e,n,r;typeof performance<"u"&&null!==performance&&performance.now?Q.exports=function(){return performance.now()}:null!=m&&m.hrtime?(Q.exports=function(){return(v()-n)/1e6},b=m.hrtime,e=(v=function(){var o;return 1e9*(o=b())[0]+o[1]})(),r=1e9*m.uptime(),n=e-r):Date.now?(Q.exports=function(){return Date.now()-h},h=Date.now()):(Q.exports=function(){return(new Date).getTime()-h},h=(new Date).getTime())}).call(this)}).call(this)}).call(this,y("_process"))},{_process:278}],253:[function(y,Q,K){"use strict";Q.exports=function(b,h,e){var n,r,o={};if("string"==typeof h&&(h=v(h)),Array.isArray(h)){var t={};for(r=0;r<h.length;r++)t[h[r]]=!0;h=t}for(n in h)h[n]=v(h[n]);var d={};for(n in h){var a=h[n];if(Array.isArray(a))for(r=0;r<a.length;r++){var i=a[r];if(e&&(d[i]=!0),i in b){if(o[n]=b[i],e)for(var s=r;s<a.length;s++)d[a[s]]=!0;break}}else n in b&&(h[n]&&(o[n]=b[n]),e&&(d[n]=!0))}if(e)for(n in b)d[n]||(o[n]=b[n]);return o};var m={};function v(b){return m[b]?m[b]:("string"==typeof b&&(b=m[b]=b.split(/\s*,\s*|\s+/)),b)}},{}],254:[function(y,Q,K){Q.exports=function(m,v,b,h){var e=m[0],n=m[1],r=!1;void 0===b&&(b=0),void 0===h&&(h=v.length);for(var o=h-b,t=0,d=o-1;t<o;d=t++){var a=v[t+b][0],i=v[t+b][1],c=v[d+b][1];i>n!=c>n&&e<(v[d+b][0]-a)*(n-i)/(c-i)+a&&(r=!r)}return r}},{}],255:[function(y,Q,K){var m,v=y("./lib/build-log"),b=y("./lib/epsilon"),h=y("./lib/intersecter"),e=y("./lib/segment-chainer"),n=y("./lib/segment-selector"),r=y("./lib/geojson"),o=!1,t=b();function d(a,i,s){var c=m.segments(a),l=m.segments(i),p=s(m.combine(c,l));return m.polygon(p)}m={buildLog:function(a){return!0===a?o=v():!1===a&&(o=!1),!1!==o&&o.list},epsilon:function(a){return t.epsilon(a)},segments:function(a){var i=h(!0,t,o);return a.regions.forEach(i.addRegion),{segments:i.calculate(a.inverted),inverted:a.inverted}},combine:function(a,i){return{combined:h(!1,t,o).calculate(a.segments,a.inverted,i.segments,i.inverted),inverted1:a.inverted,inverted2:i.inverted}},selectUnion:function(a){return{segments:n.union(a.combined,o),inverted:a.inverted1||a.inverted2}},selectIntersect:function(a){return{segments:n.intersect(a.combined,o),inverted:a.inverted1&&a.inverted2}},selectDifference:function(a){return{segments:n.difference(a.combined,o),inverted:a.inverted1&&!a.inverted2}},selectDifferenceRev:function(a){return{segments:n.differenceRev(a.combined,o),inverted:!a.inverted1&&a.inverted2}},selectXor:function(a){return{segments:n.xor(a.combined,o),inverted:a.inverted1!==a.inverted2}},polygon:function(a){return{regions:e(a.segments,t,o),inverted:a.inverted}},polygonFromGeoJSON:function(a){return r.toPolygon(m,a)},polygonToGeoJSON:function(a){return r.fromPolygon(m,t,a)},union:function(a,i){return d(a,i,m.selectUnion)},intersect:function(a,i){return d(a,i,m.selectIntersect)},difference:function(a,i){return d(a,i,m.selectDifference)},differenceRev:function(a,i){return d(a,i,m.selectDifferenceRev)},xor:function(a,i){return d(a,i,m.selectXor)}},"object"==typeof window&&(window.PolyBool=m),Q.exports=m},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(y,Q,K){Q.exports=function(){var m,v=0,b=!1;function h(e,n){return m.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),m}return m={list:[],segmentId:function(){return v++},checkIntersection:function(e,n){return h("check",{seg1:e,seg2:n})},segmentChop:function(e,n){return h("div_seg",{seg:e,pt:n}),h("chop",{seg:e,pt:n})},statusRemove:function(e){return h("pop_seg",{seg:e})},segmentUpdate:function(e){return h("seg_update",{seg:e})},segmentNew:function(e,n){return h("new_seg",{seg:e,primary:n})},segmentRemove:function(e){return h("rem_seg",{seg:e})},tempStatus:function(e,n,r){return h("temp_status",{seg:e,above:n,below:r})},rewind:function(e){return h("rewind",{seg:e})},status:function(e,n,r){return h("status",{seg:e,above:n,below:r})},vert:function(e){return e===b?m:(b=e,h("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),h("log",{txt:e})},reset:function(){return h("reset")},selected:function(e){return h("selected",{segs:e})},chainStart:function(e){return h("chain_start",{seg:e})},chainRemoveHead:function(e,n){return h("chain_rem_head",{index:e,pt:n})},chainRemoveTail:function(e,n){return h("chain_rem_tail",{index:e,pt:n})},chainNew:function(e,n){return h("chain_new",{pt1:e,pt2:n})},chainMatch:function(e){return h("chain_match",{index:e})},chainClose:function(e){return h("chain_close",{index:e})},chainAddHead:function(e,n){return h("chain_add_head",{index:e,pt:n})},chainAddTail:function(e,n){return h("chain_add_tail",{index:e,pt:n})},chainConnect:function(e,n){return h("chain_con",{index1:e,index2:n})},chainReverse:function(e){return h("chain_rev",{index:e})},chainJoin:function(e,n){return h("chain_join",{index1:e,index2:n})},done:function(){return h("done")}}}},{}],257:[function(y,Q,K){Q.exports=function(m){"number"!=typeof m&&(m=1e-10);var v={epsilon:function(b){return"number"==typeof b&&(m=b),m},pointAboveOrOnLine:function(b,h,e){var n=h[0],r=h[1];return(e[0]-n)*(b[1]-r)-(e[1]-r)*(b[0]-n)>=-m},pointBetween:function(b,h,e){var r=e[0]-h[0],t=e[1]-h[1],d=(b[0]-h[0])*r+(b[1]-h[1])*t;return!(d<m||d-(r*r+t*t)>-m)},pointsSameX:function(b,h){return Math.abs(b[0]-h[0])<m},pointsSameY:function(b,h){return Math.abs(b[1]-h[1])<m},pointsSame:function(b,h){return v.pointsSameX(b,h)&&v.pointsSameY(b,h)},pointsCompare:function(b,h){return v.pointsSameX(b,h)?v.pointsSameY(b,h)?0:b[1]<h[1]?-1:1:b[0]<h[0]?-1:1},pointsCollinear:function(b,h,e){return Math.abs((b[0]-h[0])*(h[1]-e[1])-(h[0]-e[0])*(b[1]-h[1]))<m},linesIntersect:function(b,h,e,n){var r=h[0]-b[0],o=h[1]-b[1],t=n[0]-e[0],d=n[1]-e[1],a=r*d-o*t;if(Math.abs(a)<m)return!1;var i=b[0]-e[0],s=b[1]-e[1],c=(t*s-d*i)/a,l=(r*s-o*i)/a,p={alongA:0,alongB:0,pt:[b[0]+c*r,b[1]+c*o]};return p.alongA=c<=-m?-2:c<m?-1:c-1<=-m?0:c-1<m?1:2,p.alongB=l<=-m?-2:l<m?-1:l-1<=-m?0:l-1<m?1:2,p},pointInsideRegion:function(b,h){for(var e=b[0],n=b[1],r=h[h.length-1][0],o=h[h.length-1][1],t=!1,d=0;d<h.length;d++){var a=h[d][0],i=h[d][1];i-n>m!=o-n>m&&(r-a)*(n-i)/(o-i)+a-e>m&&(t=!t),r=a,o=i}return t}};return v}},{}],258:[function(y,Q,K){Q.exports={toPolygon:function(v,b){function h(r){if(r.length<=0)return v.segments({inverted:!1,regions:[]});function o(a){var i=a.slice(0,a.length-1);return v.segments({inverted:!1,regions:[i]})}for(var t=o(r[0]),d=1;d<r.length;d++)t=v.selectDifference(v.combine(t,o(r[d])));return t}if("Polygon"===b.type)return v.polygon(h(b.coordinates));if("MultiPolygon"===b.type){for(var e=v.segments({inverted:!1,regions:[]}),n=0;n<b.coordinates.length;n++)e=v.selectUnion(v.combine(e,h(b.coordinates[n])));return v.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(v,b,h){function e(l,p){return b.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],p)}function n(l){return{region:l,children:[]}}h=v.polygon(v.segments(h));var r=n(null);function o(l,p){for(var g=0;g<l.children.length;g++)if(e(p,(x=l.children[g]).region))return void o(x,p);var u=n(p);for(g=0;g<l.children.length;g++){var x;e((x=l.children[g]).region,p)&&(u.children.push(x),l.children.splice(g,1),g--)}l.children.push(u)}for(var t=0;t<h.regions.length;t++){var d=h.regions[t];d.length<3||o(r,d)}function a(l,p){for(var g=0,u=l[l.length-1][0],x=l[l.length-1][1],f=[],T=0;T<l.length;T++){var _=l[T][0],k=l[T][1];f.push([_,k]),g+=k*u-_*x,u=_,x=k}return g<0!==p&&f.reverse(),f.push([f[0][0],f[0][1]]),f}var i=[];function s(l){var p=[a(l.region,!1)];i.push(p);for(var g=0;g<l.children.length;g++)p.push(c(l.children[g]))}function c(l){for(var p=0;p<l.children.length;p++)s(l.children[p]);return a(l.region,!0)}for(t=0;t<r.children.length;t++)s(r.children[t]);return i.length<=0?{type:"Polygon",coordinates:[]}:1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}}},{}],259:[function(y,Q,K){var m=y("./linked-list");Q.exports=function(v,b,h){function e(a,i,s){return{id:h?h.segmentId():-1,start:a,end:i,myFill:{above:s.myFill.above,below:s.myFill.below},otherFill:null}}var n=m.create();function r(a,i){n.insertBefore(a,function(s){return c=a.isStart,p=i,g=s.isStart,x=s.other.pt,(0!==(f=b.pointsCompare(a.pt,u=s.pt))?f:b.pointsSame(p,x)?0:c!==g?c?1:-1:b.pointAboveOrOnLine(p,g?u:x,g?x:u)?1:-1)<0;var c,p,g,u,x,f})}function o(a,i){var c,p,s=(r(p=m.node({isStart:!0,pt:(c=a).start,seg:c,primary:i,other:null,status:null}),c.end),p);return function(c,l,p){var g=m.node({isStart:!1,pt:l.end,seg:l,primary:p,other:c,status:null});c.other=g,r(g,c.pt)}(s,a,i),s}function t(a,i){var c,l,s=e(i,a.seg.end,a.seg);return c=a,l=i,h&&h.segmentChop(c.seg,l),c.other.remove(),c.seg.end=l,c.other.pt=l,r(c.other,c.pt),o(s,a.primary)}function d(a,i){var s=m.create();function c(O){return s.findTransition(function(P){var S,E,D,z,N,V;return z=(S=O).seg.end,(b.pointsCollinear(D=S.seg.start,N=(E=P.ev).seg.start,V=E.seg.end)?b.pointsCollinear(z,N,V)||b.pointAboveOrOnLine(z,N,V)?1:-1:b.pointAboveOrOnLine(D,N,V)?1:-1)>0})}function l(O,P){var S=O.seg,E=P.seg,D=S.start,z=S.end,N=E.start,V=E.end;h&&h.checkIntersection(S,E);var X=b.linesIntersect(D,z,N,V);if(!1===X){if(!b.pointsCollinear(D,z,N)||b.pointsSame(D,V)||b.pointsSame(z,N))return!1;var J=b.pointsSame(D,N),G=b.pointsSame(z,V);if(J&&G)return P;var Z=!J&&b.pointBetween(D,N,V),re=!G&&b.pointBetween(z,N,V);if(J)return re?t(P,z):t(O,V),P;Z&&(G||(re?t(P,z):t(O,V)),t(P,D))}else 0===X.alongA&&(-1===X.alongB?t(O,N):0===X.alongB?t(O,X.pt):1===X.alongB&&t(O,V)),0===X.alongB&&(-1===X.alongA?t(P,D):0===X.alongA?t(P,X.pt):1===X.alongA&&t(P,z));return!1}for(var p=[];!n.isEmpty();){var g=n.getHead();if(h&&h.vert(g.pt[0]),g.isStart){let O=function(){if(x){var P=l(g,x);if(P)return P}return!!f&&l(g,f)};h&&h.segmentNew(g.seg,g.primary);var u=c(g),x=u.before?u.before.ev:null,f=u.after?u.after.ev:null;h&&h.tempStatus(g.seg,!!x&&x.seg,!!f&&f.seg);var T,k,_=O();if(_&&(v?(k=null===g.seg.myFill.below||g.seg.myFill.above!==g.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=g.seg.myFill,h&&h.segmentUpdate(_.seg),g.other.remove(),g.remove()),n.getHead()!==g){h&&h.rewind(g.seg);continue}v?(k=null===g.seg.myFill.below||g.seg.myFill.above!==g.seg.myFill.below,g.seg.myFill.below=f?f.seg.myFill.above:a,g.seg.myFill.above=k?!g.seg.myFill.below:g.seg.myFill.below):null===g.seg.otherFill&&(g.seg.otherFill={above:T=f?g.primary===f.primary?f.seg.otherFill.above:f.seg.myFill.above:g.primary?i:a,below:T}),h&&h.status(g.seg,!!x&&x.seg,!!f&&f.seg),g.other.status=u.insert(m.node({ev:g}))}else{var w=g.status;if(null===w)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(w.prev)&&s.exists(w.next)&&l(w.prev.ev,w.next.ev),h&&h.statusRemove(w.ev.seg),w.remove(),!g.primary){var C=g.seg.myFill;g.seg.myFill=g.seg.otherFill,g.seg.otherFill=C}p.push(g.seg)}n.getHead().remove()}return h&&h.done(),p}return v?{addRegion:function(a){for(var i,s,c,l=a[a.length-1],p=0;p<a.length;p++){var g=b.pointsCompare(i=l,l=a[p]);0!==g&&o((s=g<0?i:l,c=g<0?l:i,{id:h?h.segmentId():-1,start:s,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(a){return d(a,!1)}}:{calculate:function(a,i,s,c){return a.forEach(function(l){o(e(l.start,l.end,l),!0)}),s.forEach(function(l){o(e(l.start,l.end,l),!1)}),d(i,c)}}}},{"./linked-list":260}],260:[function(y,Q,K){Q.exports={create:function(){var m={root:{root:!0,next:null},exists:function(v){return null!==v&&v!==m.root},isEmpty:function(){return null===m.root.next},getHead:function(){return m.root.next},insertBefore:function(v,b){for(var h=m.root,e=m.root.next;null!==e;){if(b(e))return v.prev=e.prev,v.next=e,e.prev.next=v,void(e.prev=v);h=e,e=e.next}h.next=v,v.prev=h,v.next=null},findTransition:function(v){for(var b=m.root,h=m.root.next;null!==h&&!v(h);)b=h,h=h.next;return{before:b===m.root?null:b,after:h,insert:function(e){return e.prev=b,e.next=h,b.next=e,null!==h&&(h.prev=e),e}}}};return m},node:function(m){return m.prev=null,m.next=null,m.remove=function(){m.prev.next=m.next,m.next&&(m.next.prev=m.prev),m.prev=null,m.next=null},m}}},{}],261:[function(y,Q,K){Q.exports=function(m,v,b){var h=[],e=[];return m.forEach(function(n){var r=n.start,o=n.end;if(v.pointsSame(r,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{b&&b.chainStart(n);for(var t={index:0,matches_head:!1,matches_pt1:!1},d={index:0,matches_head:!1,matches_pt1:!1},a=t,i=0;i<h.length;i++){var s=(u=h[i])[0],c=u[u.length-1];if(v.pointsSame(s,r)){if(A(i,!0,!0))break}else if(v.pointsSame(s,o)){if(A(i,!0,!1))break}else if(v.pointsSame(c,r)){if(A(i,!1,!0))break}else if(v.pointsSame(c,o)&&A(i,!1,!1))break}if(a===t)return h.push([r,o]),void(b&&b.chainNew(r,o));if(a===d){b&&b.chainMatch(t.index);var l=t.index,p=t.matches_pt1?o:r,g=t.matches_head,u=h[l],x=g?u[0]:u[u.length-1],f=g?u[1]:u[u.length-2],T=g?u[u.length-1]:u[0],_=g?u[u.length-2]:u[1];return v.pointsCollinear(f,x,p)&&(g?(b&&b.chainRemoveHead(t.index,p),u.shift()):(b&&b.chainRemoveTail(t.index,p),u.pop()),x=f),v.pointsSame(T,p)?(h.splice(l,1),v.pointsCollinear(_,T,x)&&(g?(b&&b.chainRemoveTail(t.index,x),u.pop()):(b&&b.chainRemoveHead(t.index,x),u.shift())),b&&b.chainClose(t.index),void e.push(u)):void(g?(b&&b.chainAddHead(t.index,p),u.unshift(p)):(b&&b.chainAddTail(t.index,p),u.push(p)))}var k=t.index,w=d.index;b&&b.chainConnect(k,w);var C=h[k].length<h[w].length;t.matches_head?d.matches_head?C?(O(k),P(k,w)):(O(w),P(w,k)):P(w,k):d.matches_head?P(k,w):C?(O(k),P(w,k)):(O(w),P(k,w))}function A(S,E,D){return a.index=S,a.matches_head=E,a.matches_pt1=D,a===t?(a=d,!1):(a=null,!0)}function O(S){b&&b.chainReverse(S),h[S].reverse()}function P(S,E){var D=h[S],z=h[E],N=D[D.length-1],V=D[D.length-2],X=z[0],J=z[1];v.pointsCollinear(V,N,X)&&(b&&b.chainRemoveTail(S,N),D.pop(),N=V),v.pointsCollinear(N,X,J)&&(b&&b.chainRemoveHead(E,X),z.shift()),b&&b.chainJoin(S,E),h[S]=D.concat(z),h.splice(E,1)}}),e}},{}],262:[function(y,Q,K){function m(b,h,e){var n=[];return b.forEach(function(r){var o=(r.myFill.above?8:0)+(r.myFill.below?4:0)+(r.otherFill&&r.otherFill.above?2:0)+(r.otherFill&&r.otherFill.below?1:0);0!==h[o]&&n.push({id:e?e.segmentId():-1,start:r.start,end:r.end,myFill:{above:1===h[o],below:2===h[o]},otherFill:null})}),e&&e.selected(n),n}Q.exports={union:function(b,h){return m(b,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],h)},intersect:function(b,h){return m(b,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],h)},difference:function(b,h){return m(b,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],h)},differenceRev:function(b,h){return m(b,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],h)},xor:function(b,h){return m(b,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],h)}}},{}],263:[function(y,Q,K){"use strict";var m=y("stream").Transform,v=y("stream-parser");function b(){m.call(this,{readableObjectMode:!0})}function h(e,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,n&&(this.code=n),r&&(this.statusCode=r)}(b.prototype=Object.create(m.prototype)).constructor=b,v(b.prototype),K.ParserStream=b,K.sliceEq=function(e,n,r){for(var o=n,t=0;t<r.length;)if(e[o++]!==r[t++])return!1;return!0},K.str2arr=function(e,n){var r=[],o=0;if(n&&"hex"===n)for(;o<e.length;)r.push(parseInt(e.slice(o,o+2),16)),o+=2;else for(;o<e.length;o++)r.push(255&e.charCodeAt(o));return r},K.readUInt16LE=function(e,n){return e[n]|e[n+1]<<8},K.readUInt16BE=function(e,n){return e[n+1]|e[n]<<8},K.readUInt32LE=function(e,n){return e[n]|e[n+1]<<8|e[n+2]<<16|16777216*e[n+3]},K.readUInt32BE=function(e,n){return e[n+3]|e[n+2]<<8|e[n+1]<<16|16777216*e[n]},(h.prototype=Object.create(Error.prototype)).constructor=h,K.ProbeError=h},{stream:286,"stream-parser":302}],264:[function(y,Q,K){"use strict";function m(h,e){var n=new Error(h);return n.code=e,n}function v(h){try{return decodeURIComponent(escape(h))}catch{return h}}function b(h,e,n){this.input=h.subarray(e,n),this.start=e;var r=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==r&&"MM\0*"!==r)throw m("invalid TIFF signature","EBADDATA");this.big_endian="M"===r[0]}b.prototype.each=function(h){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var n=this.ifds_to_read.shift();n.offset&&this.scan_ifd(n.id,n.offset,h)}},b.prototype.read_uint16=function(h){var e=this.input;if(h+2>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?256*e[h]+e[h+1]:e[h]+256*e[h+1]},b.prototype.read_uint32=function(h){var e=this.input;if(h+4>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[h]+65536*e[h+1]+256*e[h+2]+e[h+3]:e[h]+256*e[h+1]+65536*e[h+2]+16777216*e[h+3]},b.prototype.is_subifd_link=function(h,e){return 0===h&&34665===e||0===h&&34853===e||34665===h&&40965===e},b.prototype.exif_format_length=function(h){switch(h){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},b.prototype.exif_format_read=function(h,e){var n;switch(h){case 1:case 2:return this.input[e];case 6:return(n=this.input[e])|33554430*(128&n);case 3:return this.read_uint16(e);case 8:return(n=this.read_uint16(e))|131070*(32768&n);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},b.prototype.scan_ifd=function(h,e,n){var r=this.read_uint16(e);e+=2;for(var o=0;o<r;o++){var t=this.read_uint16(e),d=this.read_uint16(e+2),a=this.read_uint32(e+4),i=this.exif_format_length(d),s=a*i,c=s<=4?e+8:this.read_uint32(e+8),l=!1;if(c+s>this.input.length)throw m("unexpected EOF","EBADDATA");for(var p=[],g=c,u=0;u<a;u++,g+=i){var x=this.exif_format_read(d,g);if(null===x){p=null;break}p.push(x)}if(Array.isArray(p)&&2===d&&(p=v(String.fromCharCode.apply(null,p)))&&"\0"===p[p.length-1]&&(p=p.slice(0,-1)),this.is_subifd_link(h,t)&&Array.isArray(p)&&Number.isInteger(p[0])&&p[0]>0&&(this.ifds_to_read.push({id:t,offset:p[0]}),l=!0),!1===n({is_big_endian:this.big_endian,ifd:h,tag:t,format:d,count:a,entry_offset:e+this.start,data_length:s,data_offset:c+this.start,value:p,is_subifd_link:l}))return void(this.aborted=!0);e+=12}0===h&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},Q.exports.ExifParser=b,Q.exports.get_orientation=function(h){var e=0;try{return new b(h,0,h.length).each(function(n){if(0===n.ifd&&274===n.tag&&Array.isArray(n.value))return e=n.value[0],!1}),e}catch{return-1}}},{}],265:[function(y,Q,K){"use strict";var m=y("./common").readUInt16BE,v=y("./common").readUInt32BE;function b(t,d){if(t.length<4+d)return null;var a=v(t,d);return t.length<a+d||a<8?null:{boxtype:String.fromCharCode.apply(null,t.slice(d+4,d+8)),data:t.slice(d+8,d+a),end:d+a}}function h(t,d){for(var a=0;;){var i=b(t,a);if(!i)break;switch(i.boxtype){case"ispe":d.sizes.push({width:v(i.data,4),height:v(i.data,8)});break;case"irot":d.transforms.push({type:"irot",value:3&i.data[0]});break;case"imir":d.transforms.push({type:"imir",value:1&i.data[0]})}a=i.end}}function e(t,d,a){for(var i=0,s=0;s<a;s++)i=256*i+(t[d+s]||0);return i}function n(t,d){for(var a=t[4]>>4&15,i=15&t[4],s=t[5]>>4&15,c=m(t,6),l=8,p=0;p<c;p++){var g=m(t,l),u=m(t,l+=2),x=e(t,l+=2,s),f=m(t,l+=s);if(l+=2,0===u&&1===f){var T=e(t,l,a),_=e(t,l+a,i);d.item_loc[g]={length:_,offset:T+x}}l+=f*(a+i)}}function r(t,d){for(var a=m(t,4),i=6,s=0;s<a;s++){var c=b(t,i);if(!c)break;if("infe"===c.boxtype){for(var l=m(c.data,4),p="",g=8;g<c.data.length&&c.data[g];g++)p+=String.fromCharCode(c.data[g]);d.item_inf[p]=l}i=c.end}}function o(t,d){for(var a=0;;){var i=b(t,a);if(!i)break;"ipco"===i.boxtype&&h(i.data,d),a=i.end}}Q.exports.unbox=b,Q.exports.readSizeFromMeta=function(t){var d={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(g,u){for(var x=4;;){var f=b(g,x);if(!f)break;"iprp"===f.boxtype&&o(f.data,u),"iloc"===f.boxtype&&n(f.data,u),"iinf"===f.boxtype&&r(f.data,u),x=f.end}}(t,d),d.sizes.length){var a,i,s,c=(i=(a=d.sizes).reduce(function(g,u){return g.width>u.width||g.width===u.width&&g.height>u.height?g:u}),s=a.reduce(function(g,u){return g.height>u.height||g.height===u.height&&g.width>u.width?g:u}),i.width>s.height||i.width===s.height&&i.height>s.width?i:s),l=1;d.transforms.forEach(function(g){var u={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},x={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===g.type&&(l=0===g.value?x[l]:u[l=u[l=x[l]]]),"irot"===g.type)for(var f=0;f<g.value;f++)l=u[l]});var p=null;return d.item_inf.Exif&&(p=d.item_loc[d.item_inf.Exif]),{width:c.width,height:c.height,orientation:d.transforms.length?l:null,variants:d.sizes,exif_location:p}}},Q.exports.getMimeType=function(t){var d=String.fromCharCode.apply(null,t.slice(0,4)),a={};a[d]=!0;for(var i=8;i<t.length;i+=4)a[String.fromCharCode.apply(null,t.slice(i,i+4))]=!0;if(a.mif1||a.msf1||a.miaf)return"avif"===d||"avis"===d||"avio"===d?{type:"avif",mime:"image/avif"}:"heic"===d||"heix"===d?{type:"heic",mime:"image/heic"}:"hevc"===d||"hevx"===d?{type:"heic",mime:"image/heic-sequence"}:a.avif||a.avis?{type:"avif",mime:"image/avif"}:a.heic||a.heix||a.hevc||a.hevx||a.heis?a.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(y,Q,K){"use strict";var m=y("../common").str2arr,v=y("../common").sliceEq,b=y("../common").readUInt32BE,h=y("../miaf_utils"),e=y("../exif_utils"),n=m("ftyp");Q.exports=function(r){if(v(r,4,n)){var o=h.unbox(r,0);if(o){var t=h.getMimeType(o.data);if(t){for(var d,a=o.end;;){var i=h.unbox(r,a);if(!i)break;if(a=i.end,"mdat"===i.boxtype)return;if("meta"===i.boxtype){d=i.data;break}}if(d){var s=h.readSizeFromMeta(d);if(s){var c={width:s.width,height:s.height,type:t.type,mime:t.mime,wUnits:"px",hUnits:"px"};if(s.variants.length>1&&(c.variants=s.variants),s.orientation&&(c.orientation=s.orientation),s.exif_location&&s.exif_location.offset+s.exif_location.length<=r.length){var l=b(r,s.exif_location.offset),p=r.slice(s.exif_location.offset+l+4,s.exif_location.offset+s.exif_location.length),g=e.get_orientation(p);g>0&&(c.orientation=g)}return c}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(y,Q,K){"use strict";var m=y("../common").str2arr,v=y("../common").sliceEq,b=y("../common").readUInt16LE,h=m("BM");Q.exports=function(e){if(!(e.length<26)&&v(e,0,h))return{width:b(e,18),height:b(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(y,Q,K){"use strict";var m=y("../common").str2arr,v=y("../common").sliceEq,b=y("../common").readUInt16LE,h=m("GIF87a"),e=m("GIF89a");Q.exports=function(n){if(!(n.length<10)&&(v(n,0,h)||v(n,0,e)))return{width:b(n,6),height:b(n,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(y,Q,K){"use strict";var m=y("../common").readUInt16LE;Q.exports=function(v){var b=m(v,0),h=m(v,2),e=m(v,4);if(0===b&&1===h&&e){for(var n=[],r={width:0,height:0},o=0;o<e;o++){var t=v[6+16*o]||256,d=v[6+16*o+1]||256,a={width:t,height:d};n.push(a),(t>r.width||d>r.height)&&(r=a)}return{width:r.width,height:r.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(y,Q,K){"use strict";var m=y("../common").readUInt16BE,v=y("../common").str2arr,b=y("../common").sliceEq,h=y("../exif_utils"),e=v("Exif\0\0");Q.exports=function(n){if(!(n.length<2)&&255===n[0]&&216===n[1]&&255===n[2])for(var r=2;;){for(;;){if(n.length-r<2)return;if(255===n[r++])break}for(var o,t,d=n[r++];255===d;)d=n[r++];if(208<=d&&d<=217||1===d)o=0;else{if(!(192<=d&&d<=254)||n.length-r<2)return;o=m(n,r)-2,r+=2}if(217===d||218===d)return;if(225===d&&o>=10&&b(n,r,e)&&(t=h.get_orientation(n.slice(r+6,r+o))),o>=5&&192<=d&&d<=207&&196!==d&&200!==d&&204!==d){if(n.length-r<o)return;var a={width:m(n,r+3),height:m(n,r+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return t>0&&(a.orientation=t),a}r+=o}}},{"../common":263,"../exif_utils":264}],271:[function(y,Q,K){"use strict";var m=y("../common").str2arr,v=y("../common").sliceEq,b=y("../common").readUInt32BE,h=m("\x89PNG\r\n\x1a\n"),e=m("IHDR");Q.exports=function(n){if(!(n.length<24)&&v(n,0,h)&&v(n,12,e))return{width:b(n,16),height:b(n,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(y,Q,K){"use strict";var m=y("../common").str2arr,v=y("../common").sliceEq,b=y("../common").readUInt32BE,h=m("8BPS\0\x01");Q.exports=function(e){if(!(e.length<22)&&v(e,0,h))return{width:b(e,18),height:b(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(y,Q,K){"use strict";function m(t){return"number"==typeof t&&isFinite(t)&&t>0}var v=/<[-_.:a-zA-Z0-9][^>]*>/,b=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,h=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function o(t){return r.test(t)?t.match(r)[0]:"px"}Q.exports=function(t){if(function(T){var _,k=0,w=T.length;for(239===T[0]&&187===T[1]&&191===T[2]&&(k=3);k<w&&(32===(_=T[k])||9===_||13===_||10===_);)k++;return k!==w&&60===T[k]}(t)){for(var d="",a=0;a<t.length;a++)d+=String.fromCharCode(t[a]);var i=(d.match(v)||[""])[0];if(b.test(i)){var s=(_=(T=i).match(h),k=T.match(e),w=T.match(n),{width:_&&(_[1]||_[2]),height:k&&(k[1]||k[2]),viewbox:w&&(w[1]||w[2])}),c=parseFloat(s.width),l=parseFloat(s.height);if(s.width&&s.height)return m(c)&&m(l)?{width:c,height:l,type:"svg",mime:"image/svg+xml",wUnits:o(s.width),hUnits:o(s.height)}:void 0;var p=(s.viewbox||"").split(" "),g={width:p[2],height:p[3]},u=parseFloat(g.width),x=parseFloat(g.height);if(m(u)&&m(x)&&o(g.width)===o(g.height)){var f=u/x;return s.width?m(c)?{width:c,height:c/f,type:"svg",mime:"image/svg+xml",wUnits:o(s.width),hUnits:o(s.width)}:void 0:s.height?m(l)?{width:l*f,height:l,type:"svg",mime:"image/svg+xml",wUnits:o(s.height),hUnits:o(s.height)}:void 0:{width:u,height:x,type:"svg",mime:"image/svg+xml",wUnits:o(g.width),hUnits:o(g.height)}}}}var T,_,k,w}},{}],274:[function(y,Q,K){"use strict";var m=y("../common").str2arr,v=y("../common").sliceEq,b=y("../common").readUInt16LE,h=y("../common").readUInt16BE,e=y("../common").readUInt32LE,n=y("../common").readUInt32BE,r=m("II*\0"),o=m("MM\0*");function t(i,s,c){return c?h(i,s):b(i,s)}function d(i,s,c){return c?n(i,s):e(i,s)}function a(i,s,c){var l=t(i,s+2,c);return 1!==d(i,s+4,c)||3!==l&&4!==l?null:3===l?t(i,s+8,c):d(i,s+8,c)}Q.exports=function(i){if(!(i.length<8)&&(v(i,0,r)||v(i,0,o))){var s=77===i[0],c=d(i,4,s)-8;if(!(c<0)){var l=c+8;if(!(i.length-l<2)){var p=12*t(i,l+0,s);if(!(p<=0||(l+=2,i.length-l<p))){var g,u,x,f;for(g=0;g<p;g+=12)256===(f=t(i,l+g,s))?u=a(i,l+g,s):257===f&&(x=a(i,l+g,s));return u&&x?{width:u,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":263}],275:[function(y,Q,K){"use strict";var m=y("../common").str2arr,v=y("../common").sliceEq,b=y("../common").readUInt16LE,h=y("../common").readUInt32LE,e=y("../exif_utils"),n=m("RIFF"),r=m("WEBP");function o(a,i){if(157===a[i+3]&&1===a[i+4]&&42===a[i+5])return{width:16383&b(a,i+6),height:16383&b(a,i+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function t(a,i){if(47===a[i]){var s=h(a,i+1);return{width:1+(16383&s),height:1+(s>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function d(a,i){return{width:1+(a[i+6]<<16|a[i+5]<<8|a[i+4]),height:1+(a[i+9]<<i|a[i+8]<<8|a[i+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}Q.exports=function(a){if(!(a.length<16)&&(v(a,0,n)||v(a,8,r))){var i=12,s=null,c=0,l=h(a,4)+8;if(!(l>a.length)){for(;i+8<l;)if(0!==a[i]){var p=String.fromCharCode.apply(null,a.slice(i,i+4)),g=h(a,i+4);"VP8 "===p&&g>=10?s=s||o(a,i+8):"VP8L"===p&&g>=9?s=s||t(a,i+8):"VP8X"===p&&g>=10?s=s||d(a,i+8):"EXIF"===p&&(c=e.get_orientation(a.slice(i+8,i+8+g)),i=1/0),i+=8+g}else i++;if(s)return c>0&&(s.orientation=c),s}}}},{"../common":263,"../exif_utils":264}],276:[function(y,Q,K){"use strict";Q.exports={avif:y("./parse_sync/avif"),bmp:y("./parse_sync/bmp"),gif:y("./parse_sync/gif"),ico:y("./parse_sync/ico"),jpeg:y("./parse_sync/jpeg"),png:y("./parse_sync/png"),psd:y("./parse_sync/psd"),svg:y("./parse_sync/svg"),tiff:y("./parse_sync/tiff"),webp:y("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(y,Q,K){"use strict";var m=y("./lib/parsers_sync");Q.exports=function(v){return function(b){for(var h=Object.keys(m),e=0;e<h.length;e++){var n=m[h[e]](b);if(n)return n}return null}(v)},Q.exports.parsers=m},{"./lib/parsers_sync":276}],278:[function(y,Q,K){var m,v,b=Q.exports={};function h(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function n(l){if(m===setTimeout)return setTimeout(l,0);if((m===h||!m)&&setTimeout)return m=setTimeout,setTimeout(l,0);try{return m(l,0)}catch{try{return m.call(null,l,0)}catch{return m.call(this,l,0)}}}!function(){try{m="function"==typeof setTimeout?setTimeout:h}catch{m=h}try{v="function"==typeof clearTimeout?clearTimeout:e}catch{v=e}}();var r,o=[],t=!1,d=-1;function a(){t&&r&&(t=!1,r.length?o=r.concat(o):d=-1,o.length&&i())}function i(){if(!t){var l=n(a);t=!0;for(var p=o.length;p;){for(r=o,o=[];++d<p;)r&&r[d].run();d=-1,p=o.length}r=null,t=!1,function(g){if(v===clearTimeout)return clearTimeout(g);if((v===e||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(g);try{v(g)}catch{try{return v.call(null,g)}catch{return v.call(this,g)}}}(l)}}function s(l,p){this.fun=l,this.array=p}function c(){}b.nextTick=function(l){var p=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)p[g-1]=arguments[g];o.push(new s(l,p)),1!==o.length||t||n(i)},s.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=c,b.addListener=c,b.once=c,b.off=c,b.removeListener=c,b.removeAllListeners=c,b.emit=c,b.prependListener=c,b.prependOnceListener=c,b.listeners=function(l){return[]},b.binding=function(l){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(l){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],279:[function(y,Q,K){(function(m){(function(){for(var v=y("performance-now"),b=typeof window>"u"?m:window,h=["moz","webkit"],e="AnimationFrame",n=b["request"+e],r=b["cancel"+e]||b["cancelRequest"+e],o=0;!n&&o<h.length;o++)n=b[h[o]+"Request"+e],r=b[h[o]+"Cancel"+e]||b[h[o]+"CancelRequest"+e];if(!n||!r){var t=0,d=0,a=[];n=function(i){if(0===a.length){var s=v(),c=Math.max(0,1e3/60-(s-t));t=c+s,setTimeout(function(){var l=a.slice(0);a.length=0;for(var p=0;p<l.length;p++)if(!l[p].cancelled)try{l[p].callback(t)}catch(g){setTimeout(function(){throw g},0)}},Math.round(c))}return a.push({handle:++d,callback:i,cancelled:!1}),d},r=function(i){for(var s=0;s<a.length;s++)a[s].handle===i&&(a[s].cancelled=!0)}}Q.exports=function(i){return n.call(b,i)},Q.exports.cancel=function(){r.apply(b,arguments)},Q.exports.polyfill=function(i){i||(i=b),i.requestAnimationFrame=n,i.cancelAnimationFrame=r}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(y,Q,K){"use strict";var m=y("array-bounds"),v=y("color-normalize"),b=y("update-diff"),h=y("pick-by-alias"),e=y("object-assign"),n=y("flatten-vertex-data"),r=y("to-float32"),o=r.float32,t=r.fract32;Q.exports=function(a,i){if("function"==typeof a?(i||(i={}),i.regl=a):i=a,i.length&&(i.positions=i),!(a=i.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var s,c,l,p,g,u,x=a._gl,f={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},T=[];return p=a.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=a.buffer({usage:"static",type:"float",data:d}),C(i),s=a({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:a.prop("range"),lineWidth:a.prop("lineWidth"),capSize:a.prop("capSize"),opacity:a.prop("opacity"),scale:a.prop("scale"),translate:a.prop("translate"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),viewport:function(O,P){return[P.viewport.x,P.viewport.y,O.viewportWidth,O.viewportHeight]}},attributes:{color:{buffer:p,offset:function(O,P){return 4*P.offset},divisor:1},position:{buffer:c,offset:function(O,P){return 8*P.offset},divisor:1},positionFract:{buffer:l,offset:function(O,P){return 8*P.offset},divisor:1},error:{buffer:g,offset:function(O,P){return 16*P.offset},divisor:1},direction:{buffer:u,stride:24,offset:0},lineOffset:{buffer:u,stride:24,offset:8},capOffset:{buffer:u,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:!1,instances:a.prop("count"),count:d.length}),e(_,{update:C,draw:k,destroy:A,regl:a,gl:x,canvas:x.canvas,groups:T}),_;function _(O){O?C(O):null===O&&A(),k()}function k(O){if("number"==typeof O)return w(O);O&&!Array.isArray(O)&&(O=[O]),a._refresh(),T.forEach(function(P,S){P&&(O&&(P.draw=!!O[S]),P.draw?w(S):P.draw=!0)})}function w(O){"number"==typeof O&&(O=T[O]),null!=O&&O&&O.count&&O.color&&O.opacity&&O.positions&&O.positions.length>1&&(O.scaleRatio=[O.scale[0]*O.viewport.width,O.scale[1]*O.viewport.height],s(O),O.after&&O.after(O))}function C(O){if(O){null!=O.length?"number"==typeof O[0]&&(O=[{positions:O}]):Array.isArray(O)||(O=[O]);var P=0,S=0;if(_.groups=T=O.map(function(J,G){var Z=T[G];return J&&("function"==typeof J?J={after:J}:"number"==typeof J[0]&&(J={positions:J}),J=h(J,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),Z||(T[G]=Z={id:G,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},J=e({},f,J)),b(Z,J,[{lineWidth:function(re){return.5*+re},capSize:function(re){return.5*+re},opacity:parseFloat,errors:function(re){return re=n(re),S+=re.length,re},positions:function(re,j){return re=n(re,"float64"),j.count=Math.floor(re.length/2),j.bounds=m(re,2),j.offset=P,P+=j.count,re}},{color:function(re,j){var B=j.count;if(re||(re="transparent"),!Array.isArray(re)||"number"==typeof re[0]){var H=re;re=Array(B);for(var ee=0;ee<B;ee++)re[ee]=H}if(re.length<B)throw Error("Not enough colors");for(var U=new Uint8Array(4*B),$=0;$<B;$++){var q=v(re[$],"uint8");U.set(q,4*$)}return U},range:function(re,j,B){return re||(re=j.bounds),j.scale=[1/(re[2]-re[0]),1/(re[3]-re[1])],j.translate=[-re[0],-re[1]],j.scaleFract=t(j.scale),j.translateFract=t(j.translate),re},viewport:function(re){var j;return Array.isArray(re)?j={x:re[0],y:re[1],width:re[2]-re[0],height:re[3]-re[1]}:re?((j={x:re.x||re.left||0,y:re.y||re.top||0}).width=re.right?re.right-j.x:re.w||re.width||0,j.height=re.bottom?re.bottom-j.y:re.h||re.height||0):j={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight},j}}])),Z}),P||S){var E=T.reduce(function(J,G,Z){return J+(G?G.count:0)},0),D=new Float64Array(2*E),z=new Uint8Array(4*E),N=new Float32Array(4*E);T.forEach(function(J,G){if(J){var Z=J.positions,j=J.offset,H=J.errors;J.count&&(z.set(J.color,4*j),N.set(H,4*j),D.set(Z,2*j))}});var V=o(D);c(V);var X=t(D,V);l(X),p(z),g(N)}}}function A(){c.destroy(),l.destroy(),p.destroy(),g.destroy(),u.destroy()}};var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(y,Q,K){"use strict";var m=y("color-normalize"),v=y("array-bounds"),b=y("object-assign"),h=y("glslify"),e=y("pick-by-alias"),n=y("flatten-vertex-data"),r=y("earcut"),o=y("array-normalize"),t=y("to-float32"),d=t.float32,a=t.fract32,i=y("es6-weak-map"),s=y("parse-rect"),c=y("array-find-index");function l(p,g){if(!(this instanceof l))return new l(p,g);if("function"==typeof p?(g||(g={}),g.regl=p):g=p,g.length&&(g.positions=g),!(p=g.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=p._gl,this.regl=p,this.passes=[],this.shaders=l.shaders.has(p)?l.shaders.get(p):l.shaders.set(p,l.createShaders(p)).get(p),this.update(g)}Q.exports=l,l.dashMult=2,l.maxPatternLength=256,l.precisionThreshold=3e6,l.maxPoints=1e4,l.maxLines=2048,l.shaders=new i,l.createShaders=function(p){var g,u=p.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),x={primitive:"triangle strip",instances:p.prop("count"),count:4,offset:0,uniforms:{miterMode:function(T,_){return"round"===_.join?2:1},miterLimit:p.prop("miterLimit"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),thickness:p.prop("thickness"),dashTexture:p.prop("dashTexture"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),dashLength:p.prop("dashLength"),viewport:function(T,_){return[_.viewport.x,_.viewport.y,T.viewportWidth,T.viewportHeight]},depth:p.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(T,_){return!_.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport")},f=p(b({vert:h(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:h(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:u,divisor:0,stride:8,offset:0},lineTop:{buffer:u,divisor:0,stride:8,offset:4},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},x));try{g=p(b({cull:{enable:!0,face:"back"},vert:h(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:h(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:u,divisor:0,stride:8,offset:0},lineTop:{buffer:u,divisor:0,stride:8,offset:4},aColor:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:p.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},x))}catch{g=f}return{fill:p({primitive:"triangle",elements:function(T,_){return _.triangles},offset:0,vert:h(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:h(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:p.prop("scale"),color:p.prop("fill"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),viewport:function(T,_){return[_.viewport.x,_.viewport.y,T.viewportWidth,T.viewportHeight]}},attributes:{position:{buffer:p.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8}},blend:x.blend,depth:{enable:!1},scissor:x.scissor,stencil:x.stencil,viewport:x.viewport}),rect:f,miter:g}},l.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},l.prototype.render=function(){for(var p,g=[],u=arguments.length;u--;)g[u]=arguments[u];g.length&&(p=this).update.apply(p,g),this.draw()},l.prototype.draw=function(){for(var p=this,g=[],u=arguments.length;u--;)g[u]=arguments[u];return(g.length?g:this.passes).forEach(function(x,f){var T;if(x&&Array.isArray(x))return(T=p).draw.apply(T,x);"number"==typeof x&&(x=p.passes[x]),x&&x.count>1&&x.opacity&&(p.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&p.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>l.precisionThreshold||x.scale[1]*x.viewport.height>l.precisionThreshold||"rect"===x.join||!x.join&&(x.thickness<=2||x.count>=l.maxPoints)?p.shaders.rect(x):p.shaders.miter(x)))}),this},l.prototype.update=function(p){var g=this;if(p){null!=p.length?"number"==typeof p[0]&&(p=[{positions:p}]):Array.isArray(p)||(p=[p]);var u=this.regl,x=this.gl;if(p.forEach(function(w,C){var A=g.passes[C];if(void 0!==w)if(null!==w){if("number"==typeof w[0]&&(w={positions:w}),w=e(w,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),A||(g.passes[C]=A={id:C,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:u.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},w=b({},l.defaults,w)),null!=w.thickness&&(A.thickness=parseFloat(w.thickness)),null!=w.opacity&&(A.opacity=parseFloat(w.opacity)),null!=w.miterLimit&&(A.miterLimit=parseFloat(w.miterLimit)),null!=w.overlay&&(A.overlay=!!w.overlay,C<l.maxLines&&(A.depth=2*(l.maxLines-1-C%l.maxLines)/l.maxLines-1)),null!=w.join&&(A.join=w.join),null!=w.hole&&(A.hole=w.hole),null!=w.fill&&(A.fill=w.fill?m(w.fill,"uint8"):null),null!=w.viewport&&(A.viewport=s(w.viewport)),A.viewport||(A.viewport=s([x.drawingBufferWidth,x.drawingBufferHeight])),null!=w.close&&(A.close=w.close),null===w.positions&&(w.positions=[]),w.positions){var O,P;if(w.positions.x&&w.positions.y){var S=w.positions.x,E=w.positions.y;P=A.count=Math.max(S.length,E.length),O=new Float64Array(2*P);for(var D=0;D<P;D++)O[2*D]=S[D],O[2*D+1]=E[D]}else O=n(w.positions,"float64"),P=A.count=Math.floor(O.length/2);var z=A.bounds=v(O,2);if(A.fill){for(var N=[],V={},X=0,J=0,G=0,Z=A.count;J<Z;J++){var re=O[2*J],j=O[2*J+1];isNaN(re)||isNaN(j)||null==re||null==j?(re=O[2*X],j=O[2*X+1],V[J]=X):X=J,N[G++]=re,N[G++]=j}if(w.splitNull){A.count-1 in V||(V[A.count]=A.count-1);var B=Object.keys(V).map(Number).sort(function(wt,Gt){return wt-Gt}),H=[],ee=0,U=null!=A.hole?A.hole[0]:null;if(null!=U){var $=c(B,function(wt){return wt>=U});(B=B.slice(0,$)).push(U)}for(var q=function(wt){var Gt=N.slice(2*ee,2*B[wt]).concat(U?N.slice(2*U):[]),Kt=(A.hole||[]).map(function(ar){return ar-U+(B[wt]-ee)}),cr=r(Gt,Kt);cr=cr.map(function(ar){return ar+ee+(ar+ee<B[wt]?0:U-B[wt])}),H.push.apply(H,cr),ee=B[wt]+1},te=0;te<B.length;te++)q(te);for(var ne=0,se=H.length;ne<se;ne++)null!=V[H[ne]]&&(H[ne]=V[H[ne]]);A.triangles=H}else{for(var ie=r(N,A.hole||[]),ue=0,le=ie.length;ue<le;ue++)null!=V[ie[ue]]&&(ie[ue]=V[ie[ue]]);A.triangles=ie}}var de=new Float64Array(O);o(de,2,z);var be=new Float64Array(2*P+6);A.close?O[0]===O[2*P-2]&&O[1]===O[2*P-1]?(be[0]=de[2*P-4],be[1]=de[2*P-3]):(be[0]=de[2*P-2],be[1]=de[2*P-1]):(be[0]=de[0],be[1]=de[1]),be.set(de,2),A.close?O[0]===O[2*P-2]&&O[1]===O[2*P-1]?(be[2*P+2]=de[2],be[2*P+3]=de[3],A.count-=1):(be[2*P+2]=de[0],be[2*P+3]=de[1],be[2*P+4]=de[2],be[2*P+5]=de[3]):(be[2*P+2]=de[2*P-2],be[2*P+3]=de[2*P-1],be[2*P+4]=de[2*P-2],be[2*P+5]=de[2*P-1]);var _e=d(be);A.positionBuffer(_e);var xe=a(be,_e);A.positionFractBuffer(xe)}if(w.range?A.range=w.range:A.range||(A.range=A.bounds),(w.range||w.positions)&&A.count){var Ee=A.bounds,Se=A.range[2]-A.range[0],Me=A.range[3]-A.range[1];A.scale=[(Ee[2]-Ee[0])/Se,(Ee[3]-Ee[1])/Me],A.translate=[-A.range[0]/Se+Ee[0]/Se||0,-A.range[1]/Me+Ee[1]/Me||0],A.scaleFract=a(A.scale),A.translateFract=a(A.translate)}if(w.dashes){var Ie,Fe=0;if(!w.dashes||w.dashes.length<2)Fe=1,Ie=new Uint8Array([255,255,255,255,255,255,255,255]);else{Fe=0;for(var Ne=0;Ne<w.dashes.length;++Ne)Fe+=w.dashes[Ne];Ie=new Uint8Array(Fe*l.dashMult);for(var De=0,$e=255,Re=0;Re<2;Re++)for(var ze=0;ze<w.dashes.length;++ze){for(var Ue=0,je=w.dashes[ze]*l.dashMult*.5;Ue<je;++Ue)Ie[De++]=$e;$e^=255}}A.dashLength=Fe,A.dashTexture({channels:1,data:Ie,width:Ie.length,height:1,mag:"linear",min:"linear"},0,0)}if(w.color){var rt=A.count,ut=w.color;ut||(ut="transparent");var gt=new Uint8Array(4*rt+4);if(Array.isArray(ut)&&"number"!=typeof ut[0]){for(var At=0;At<rt;At++){var _t=m(ut[At],"uint8");gt.set(_t,4*At)}gt.set(m(ut[0],"uint8"),4*rt)}else for(var it=m(ut,"uint8"),et=0;et<rt+1;et++)gt.set(it,4*et);A.colorBuffer({usage:"dynamic",type:"uint8",data:gt})}}else g.passes[C]=null}),p.length<this.passes.length){for(var f=p.length;f<this.passes.length;f++){var T=this.passes[f];T&&(T.colorBuffer.destroy(),T.positionBuffer.destroy(),T.dashTexture.destroy())}this.passes.length=p.length}for(var _=[],k=0;k<this.passes.length;k++)null!==this.passes[k]&&_.push(this.passes[k]);return this.passes=_,this}},l.prototype.destroy=function(){return this.passes.forEach(function(p){p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(y,Q,K){"use strict";function m(f,T){return function(_){if(Array.isArray(_))return _}(f)||function(_,k){var w=null==_?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(null!=w){var C,A,O=[],P=!0,S=!1;try{for(w=w.call(_);!(P=(C=w.next()).done)&&(O.push(C.value),!k||O.length!==k);P=!0);}catch(E){S=!0,A=E}finally{try{P||null==w.return||w.return()}finally{if(S)throw A}}return O}}(f,T)||b(f,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(f){return function(T){if(Array.isArray(T))return h(T)}(f)||function(T){if(typeof Symbol<"u"&&null!=T[Symbol.iterator]||null!=T["@@iterator"])return Array.from(T)}(f)||b(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(f,T){if(f){if("string"==typeof f)return h(f,T);var _=Object.prototype.toString.call(f).slice(8,-1);return"Object"===_&&f.constructor&&(_=f.constructor.name),"Map"===_||"Set"===_?Array.from(f):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?h(f,T):void 0}}function h(f,T){(null==T||T>f.length)&&(T=f.length);for(var _=0,k=new Array(T);_<T;_++)k[_]=f[_];return k}var e=y("color-normalize"),n=y("array-bounds"),r=y("color-id"),o=y("@plotly/point-cluster"),t=y("object-assign"),d=y("glslify"),a=y("pick-by-alias"),i=y("update-diff"),s=y("flatten-vertex-data"),c=y("is-iexplorer"),l=y("to-float32"),p=y("parse-rect"),g=u;function u(f,T){var _=this;if(!(this instanceof u))return new u(f,T);"function"==typeof f?(T||(T={}),T.regl=f):(T=f,f=null),T&&T.length&&(T.positions=T);var k,w=(f=T.regl)._gl,C=[];this.tooManyColors=c,k=f.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:f,gl:w,groups:[],markerCache:[null],markerTextures:[null],palette:C,paletteIds:{},paletteTexture:k,maxColors:255,maxSize:100,canvas:w.canvas}),this.update(T);var A={uniforms:{constPointSize:!!T.constPointSize,opacity:f.prop("opacity"),paletteSize:function(S,E){return[_.tooManyColors?0:255,k.height]},pixelRatio:f.context("pixelRatio"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translate:f.prop("translate"),translateFract:f.prop("translateFract"),markerTexture:f.prop("markerTexture"),paletteTexture:k},attributes:{x:function(S,E){return E.xAttr||{buffer:E.positionBuffer,stride:8,offset:0}},y:function(S,E){return E.yAttr||{buffer:E.positionBuffer,stride:8,offset:4}},xFract:function(S,E){return E.xAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:0}},yFract:function(S,E){return E.yAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:4}},size:function(S,E){return E.size.length?{buffer:E.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*E.size/_.maxSize)]}},borderSize:function(S,E){return E.borderSize.length?{buffer:E.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*E.borderSize/_.maxSize)]}},colorId:function(S,E){return E.color.length?{buffer:E.colorBuffer,stride:_.tooManyColors?8:4,offset:0}:{constant:_.tooManyColors?C.slice(4*E.color,4*E.color+4):[E.color]}},borderColorId:function(S,E){return E.borderColor.length?{buffer:E.colorBuffer,stride:_.tooManyColors?8:4,offset:_.tooManyColors?4:2}:{constant:_.tooManyColors?C.slice(4*E.borderColor,4*E.borderColor+4):[E.borderColor]}},isActive:function(S,E){return!0===E.activation?{constant:[1]}:E.activation?E.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:f.prop("elements"),count:f.prop("count"),offset:f.prop("offset"),primitive:"points"},O=t({},A);O.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),O.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=f(O);var P=t({},A);P.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),P.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),c&&(P.frag=P.frag.replace("smoothstep","smoothStep"),O.frag=O.frag.replace("smoothstep","smoothStep")),this.drawCircle=f(P)}u.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},u.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},u.prototype.draw=function(){for(var f=this,T=arguments.length,_=new Array(T),k=0;k<T;k++)_[k]=arguments[k];var w=this.groups;if(1===_.length&&Array.isArray(_[0])&&(null===_[0][0]||Array.isArray(_[0][0]))&&(_=_[0]),this.regl._refresh(),_.length)for(var C=0;C<_.length;C++)this.drawItem(C,_[C]);else w.forEach(function(A,O){f.drawItem(O)});return this},u.prototype.drawItem=function(f,T){var _=this.groups,k=_[f];if("number"==typeof T&&(f=T,k=_[T],T=null),k&&k.count&&k.opacity){k.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,k,T));for(var w=[],C=1;C<k.activation.length;C++)k.activation[C]&&(!0===k.activation[C]||k.activation[C].data.length)&&w.push.apply(w,v(this.getMarkerDrawOptions(C,k,T)));w.length&&this.drawMarker(w)}},u.prototype.getMarkerDrawOptions=function(f,T,_){var k=T.range,w=T.tree,C=T.viewport,A=T.activation,O=T.selectionBuffer,P=T.count;if(!w)return _?[t({},T,{markerTexture:this.markerTextures[f],activation:A[f],count:_.length,elements:_,offset:0})]:[t({},T,{markerTexture:this.markerTextures[f],activation:A[f],offset:0})];var S=[],E=w.range(k,{lod:!0,px:[(k[2]-k[0])/C.width,(k[3]-k[1])/C.height]});if(_){for(var D=A[f].data,z=new Uint8Array(P),N=0;N<_.length;N++){var V=_[N];z[V]=D?D[V]:1}O.subdata(z)}for(var X=E.length;X--;){var J=m(E[X],2),G=J[0];S.push(t({},T,{markerTexture:this.markerTextures[f],activation:_?O:A[f],offset:G,count:J[1]-G}))}return S},u.prototype.update=function(){for(var f=this,T=arguments.length,_=new Array(T),k=0;k<T;k++)_[k]=arguments[k];if(_.length){1===_.length&&Array.isArray(_[0])&&(_=_[0]);var w=this.groups,C=this.gl,A=this.regl,O=this.maxSize,P=this.maxColors,S=this.palette;this.groups=w=_.map(function(E,D){var z=w[D];if(void 0===E)return z;null===E?E={positions:null}:"function"==typeof E?E={ondraw:E}:"number"==typeof E[0]&&(E={positions:E}),null===(E=a(E,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(E.positions=[]),null!=E.tooManyColors&&(f.tooManyColors=E.tooManyColors),z||(w[D]=z={id:D,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:A.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:A.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},E=t({},u.defaults,E)),E.positions&&!("marker"in E)&&(E.marker=z.marker,delete z.marker),E.marker&&!("positions"in E)&&(E.positions=z.positions,delete z.positions);var N=0,V=0;if(i(z,E,[{snap:!0,size:function(le,de){return null==le&&(le=u.defaults.size),N+=le&&le.length?1:0,le},borderSize:function(le,de){return null==le&&(le=u.defaults.borderSize),N+=le&&le.length?1:0,le},opacity:parseFloat,color:function(le,de){return null==le&&(le=u.defaults.color),le=f.updateColor(le),V++,le},borderColor:function(le,de){return null==le&&(le=u.defaults.borderColor),le=f.updateColor(le),V++,le},bounds:function(le,de,be){return"range"in be||(be.range=null),le},positions:function(le,de,be){var _e=de.snap,xe=de.positionBuffer,Ee=de.positionFractBuffer,he=de.selectionBuffer;if(le.x||le.y)return de.xAttr=le.x.length?{buffer:A.buffer(le.x),offset:0,stride:4,count:le.x.length}:{buffer:le.x.buffer,offset:4*le.x.offset||0,stride:4*(le.x.stride||1),count:le.x.count},de.yAttr=le.y.length?{buffer:A.buffer(le.y),offset:0,stride:4,count:le.y.length}:{buffer:le.y.buffer,offset:4*le.y.offset||0,stride:4*(le.y.stride||1),count:le.y.count},de.count=Math.max(de.xAttr.count,de.yAttr.count),le;le=s(le,"float64");var me=de.count=Math.floor(le.length/2),Se=de.bounds=me?n(le,2):null;if(be.range||de.range||(delete de.range,be.range=Se),be.marker||de.marker||(delete de.marker,be.marker=null),_e&&(!0===_e||me>_e)?de.tree=o(le,{bounds:Se}):_e&&_e.length&&(de.tree=_e),de.tree){var Me={primitive:"points",usage:"static",data:de.tree,type:"uint32"};de.elements?de.elements(Me):de.elements=A.elements(Me)}var Ie=l.float32(le);return xe({data:Ie,usage:"dynamic"}),Ee({data:l.fract32(le,Ie),usage:"dynamic"}),he({data:new Uint8Array(me),type:"uint8",usage:"stream"}),le}},{marker:function(le,de,be){var _e=de.activation;if(_e.forEach(function(Ie){return Ie&&Ie.destroy&&Ie.destroy()}),_e.length=0,le&&"number"!=typeof le[0]){for(var xe=[],Ee=0,he=Math.min(le.length,de.count);Ee<he;Ee++){var me=f.addMarker(le[Ee]);xe[me]||(xe[me]=new Uint8Array(de.count)),xe[me][Ee]=1}for(var Se=0;Se<xe.length;Se++)if(xe[Se]){var Me={data:xe[Se],type:"uint8",usage:"static"};_e[Se]?_e[Se](Me):_e[Se]=A.buffer(Me),_e[Se].data=xe[Se]}}else _e[f.addMarker(le)]=!0;return le},range:function(le,de,be){var _e=de.bounds;if(_e)return le||(le=_e),de.scale=[1/(le[2]-le[0]),1/(le[3]-le[1])],de.translate=[-le[0],-le[1]],de.scaleFract=l.fract(de.scale),de.translateFract=l.fract(de.translate),le},viewport:function(le){return p(le||[C.drawingBufferWidth,C.drawingBufferHeight])}}]),N){var J=z.count,G=z.size,Z=z.borderSize,re=z.sizeBuffer,j=new Uint8Array(2*J);if(G.length||Z.length)for(var B=0;B<J;B++)j[2*B]=Math.round(255*(G[B]??G)/O),j[2*B+1]=Math.round(255*(Z[B]??Z)/O);re({data:j,usage:"dynamic"})}if(V){var H,U=z.count,$=z.color,q=z.borderColor,te=z.colorBuffer;if(f.tooManyColors){if($.length||q.length){H=new Uint8Array(8*U);for(var ne=0;ne<U;ne++){var se=$[ne];H[8*ne]=S[4*se],H[8*ne+1]=S[4*se+1],H[8*ne+2]=S[4*se+2],H[8*ne+3]=S[4*se+3];var ie=q[ne];H[8*ne+4]=S[4*ie],H[8*ne+5]=S[4*ie+1],H[8*ne+6]=S[4*ie+2],H[8*ne+7]=S[4*ie+3]}}}else if($.length||q.length){H=new Uint8Array(4*U+2);for(var ue=0;ue<U;ue++)null!=$[ue]&&(H[4*ue]=$[ue]%P,H[4*ue+1]=Math.floor($[ue]/P)),null!=q[ue]&&(H[4*ue+2]=q[ue]%P,H[4*ue+3]=Math.floor(q[ue]/P))}te({data:H||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},u.prototype.addMarker=function(f){var T,_=this.markerTextures,k=this.regl,w=this.markerCache,C=null==f?0:w.indexOf(f);if(C>=0)return C;if(f instanceof Uint8Array||f instanceof Uint8ClampedArray)T=f;else{T=new Uint8Array(f.length);for(var A=0,O=f.length;A<O;A++)T[A]=255*f[A]}var P=Math.floor(Math.sqrt(T.length));return C=_.length,w.push(f),_.push(k.texture({channels:1,data:T,radius:P,mag:"linear",min:"linear"})),C},u.prototype.updateColor=function(f){var T=this.paletteIds,_=this.palette,k=this.maxColors;Array.isArray(f)||(f=[f]);var w=[];if("number"==typeof f[0]){var C=[];if(Array.isArray(f))for(var A=0;A<f.length;A+=4)C.push(f.slice(A,A+4));else for(var O=0;O<f.length;O+=4)C.push(f.subarray(O,O+4));f=C}for(var P=0;P<f.length;P++){var S=f[P];S=e(S,"uint8");var E=r(S,!1);if(null==T[E]){var D=_.length;T[E]=Math.floor(D/4),_[D]=S[0],_[D+1]=S[1],_[D+2]=S[2],_[D+3]=S[3]}w[P]=T[E]}return!this.tooManyColors&&_.length>4*k&&(this.tooManyColors=!0),this.updatePalette(_),1===w.length?w[0]:w},u.prototype.updatePalette=function(f){if(!this.tooManyColors){var T=this.maxColors,_=this.paletteTexture,k=Math.ceil(.25*f.length/T);if(k>1)for(var w=.25*(f=f.slice()).length%T;w<k*T;w++)f.push(0,0,0,0);_.height<k&&_.resize(T,k),_.subimage({width:Math.min(.25*f.length,T),height:k,data:f},0,0)}},u.prototype.destroy=function(){return this.groups.forEach(function(f){f.sizeBuffer.destroy(),f.positionBuffer.destroy(),f.positionFractBuffer.destroy(),f.colorBuffer.destroy(),f.activation.forEach(function(T){return T&&T.destroy&&T.destroy()}),f.selectionBuffer.destroy(),f.elements&&f.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(f){return f&&f.destroy&&f.destroy()}),this};var x=y("object-assign");Q.exports=function(f,T){var _=new g(f,T),k=_.render.bind(_);return x(k,{render:k,update:_.update.bind(_),draw:_.draw.bind(_),destroy:_.destroy.bind(_),regl:_.regl,gl:_.gl,canvas:_.gl.canvas,groups:_.groups,markers:_.markerCache,palette:_.palette}),k}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(y,Q,K){"use strict";var m=y("regl-scatter2d"),v=y("pick-by-alias"),b=y("array-bounds"),h=y("raf"),e=y("array-range"),n=y("parse-rect"),r=y("flatten-vertex-data");function o(i,s){if(!(this instanceof o))return new o(i,s);this.traces=[],this.passes={},this.regl=i,this.scatter=m(i),this.canvas=this.scatter.canvas}function t(i,s,c){return(null!=i.id?i.id:i)<<16|(255&s)<<8|255&c}function d(i,s,c){var l,p,g,u,x=i[s],f=i[c];return x.length>2?(l=x[1],p=x[3]):x.length?(l=x[0],p=x[1]):(l=x.y,p=x.y+x.height),f.length>2?(g=f[0],u=f[2]):f.length?(g=f[0],u=f[1]):(g=f.x,u=f.x+f.width),[g,l,u,p]}function a(i){if("number"==typeof i)return[i,i,i,i];if(2===i.length)return[i[0],i[1],i[0],i[1]];var s=n(i);return[s.x,s.y,s.x+s.width,s.y+s.height]}Q.exports=o,o.prototype.render=function(){for(var i,s=this,c=[],l=arguments.length;l--;)c[l]=arguments[l];return c.length&&(i=this).update.apply(i,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=h(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,h(function(){s.dirty=!1})),this)},o.prototype.update=function(){for(var i,s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s.length){for(var l=0;l<s.length;l++)this.updateItem(l,s[l]);this.traces=this.traces.filter(Boolean);for(var p=[],g=0,u=0;u<this.traces.length;u++){for(var x=this.traces[u],f=this.traces[u].passes,T=0;T<f.length;T++)p.push(this.passes[f[T]]);x.passOffset=g,g+=x.passes.length}return(i=this.scatter).update.apply(i,p),this}},o.prototype.updateItem=function(i,s){var c=this.regl;if(null===s)return this.traces[i]=null,this;if(!s)return this;var l,p=v(s,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),g=this.traces[i]||(this.traces[i]={id:i,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:n([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=p.color&&(g.color=p.color),null!=p.size&&(g.size=p.size),null!=p.marker&&(g.marker=p.marker),null!=p.borderColor&&(g.borderColor=p.borderColor),null!=p.borderSize&&(g.borderSize=p.borderSize),null!=p.opacity&&(g.opacity=p.opacity),p.viewport&&(g.viewport=n(p.viewport)),null!=p.diagonal&&(g.diagonal=p.diagonal),null!=p.upper&&(g.upper=p.upper),null!=p.lower&&(g.lower=p.lower),p.data){g.buffer(r(p.data)),g.columns=p.data.length,g.count=p.data[0].length,g.bounds=[];for(var u=0;u<g.columns;u++)g.bounds[u]=b(p.data[u],1)}p.range&&(g.range=p.range,l=g.range&&"number"!=typeof g.range[0]),p.domain&&(g.domain=p.domain);var x=!1;null!=p.padding&&(Array.isArray(p.padding)&&p.padding.length===g.columns&&"number"==typeof p.padding[p.padding.length-1]?(g.padding=p.padding.map(a),x=!0):g.padding=a(p.padding));var f=g.columns,T=g.count,_=g.viewport.width,k=g.viewport.height,w=g.viewport.x,C=g.viewport.y,A=_/f,O=k/f;g.passes=[];for(var P=0;P<f;P++)for(var S=0;S<f;S++)if((g.diagonal||S!==P)&&(g.upper||!(P>S))&&(g.lower||!(P<S))){var E=t(g.id,P,S),D=this.passes[E]||(this.passes[E]={});if(p.data&&(D.positions=p.transpose?{x:{buffer:g.buffer,offset:S,count:T,stride:f},y:{buffer:g.buffer,offset:P,count:T,stride:f}}:{x:{buffer:g.buffer,offset:S*T,count:T},y:{buffer:g.buffer,offset:P*T,count:T}},D.bounds=d(g.bounds,P,S)),p.domain||p.viewport||p.data){var z=x?d(g.padding,P,S):g.padding;if(g.domain){var N=d(g.domain,P,S);D.viewport=[w+N[0]*_+z[0],C+N[1]*k+z[1],w+N[2]*_-z[2],C+N[3]*k-z[3]]}else D.viewport=[w+S*A+A*z[0],C+P*O+O*z[1],w+(S+1)*A-A*z[2],C+(P+1)*O-O*z[3]]}p.color&&(D.color=g.color),p.size&&(D.size=g.size),p.marker&&(D.marker=g.marker),p.borderSize&&(D.borderSize=g.borderSize),p.borderColor&&(D.borderColor=g.borderColor),p.opacity&&(D.opacity=g.opacity),p.range&&(D.range=l?d(g.range,P,S):g.range||D.bounds),g.passes.push(E)}return this},o.prototype.draw=function(){for(var i,s=[],c=arguments.length;c--;)s[c]=arguments[c];if(s.length){for(var l=[],p=0;p<s.length;p++)if("number"==typeof s[p]){var g=this.traces[s[p]],x=g.passOffset;l.push.apply(l,e(x,x+g.passes.length))}else if(s[p].length){var f=s[p],T=this.traces[p],_=T.passes,k=T.passOffset;_=_.map(function(w,C){l[k+C]=f})}(i=this.scatter).draw.apply(i,l)}else this.scatter.draw();return this},o.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(y,Q,K){var v;v=function(){function m(pe,we){this.id=$++,this.type=pe,this.data=we}function v(pe){return"["+function we(Be){if(0===Be.length)return[];var We=Be.charAt(0),Ke=Be.charAt(Be.length-1);if(1<Be.length&&We===Ke&&('"'===We||"'"===We))return['"'+Be.substr(1,Be.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(We=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Be))return we(Be.substr(0,We.index)).concat(we(We[1])).concat(we(Be.substr(We.index+We[0].length)));if(1===(We=Be.split(".")).length)return['"'+Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Be=[],Ke=0;Ke<We.length;++Ke)Be=Be.concat(we(We[Ke]));return Be}(pe).join("][")+"]"}function b(pe){return"string"==typeof pe?pe.split():pe}function h(pe){return"string"==typeof pe?document.querySelector(pe):pe}function n(pe,we){for(var Be=Array(pe),We=0;We<pe;++We)Be[We]=we(We);return Be}function r(pe){var we,Be;return we=(65535<pe)<<4,we|=Be=(255<(pe>>>=we))<<3,(we|=Be=(15<(pe>>>=Be))<<2)|(Be=(3<(pe>>>=Be))<<1)|pe>>>Be>>1}function o(){function pe(We){e:{for(var Ke=16;268435456>=Ke;Ke*=16)if(We<=Ke){We=Ke;break e}We=0}return 0<(Ke=Be[r(We)>>2]).length?Ke.pop():new ArrayBuffer(We)}function we(We){Be[r(We.byteLength)>>2].push(We)}var Be=n(8,function(){return[]});return{alloc:pe,free:we,allocType:function(We,Ke){var Ye=null;switch(We){case 5120:Ye=new Int8Array(pe(Ke),0,Ke);break;case 5121:Ye=new Uint8Array(pe(Ke),0,Ke);break;case 5122:Ye=new Int16Array(pe(2*Ke),0,Ke);break;case 5123:Ye=new Uint16Array(pe(2*Ke),0,Ke);break;case 5124:Ye=new Int32Array(pe(4*Ke),0,Ke);break;case 5125:Ye=new Uint32Array(pe(4*Ke),0,Ke);break;case 5126:Ye=new Float32Array(pe(4*Ke),0,Ke);break;default:return null}return Ye.length!==Ke?Ye.subarray(0,Ke):Ye},freeType:function(We){we(We.buffer)}}}function t(pe){return!!pe&&"object"==typeof pe&&Array.isArray(pe.shape)&&Array.isArray(pe.stride)&&"number"==typeof pe.offset&&pe.shape.length===pe.stride.length&&(Array.isArray(pe.data)||ue(pe.data))}function d(pe,we,Be,We,Ke,Ye){for(var ft=0;ft<we;++ft)for(var ct=pe[ft],St=0;St<Be;++St)for(var Ft=ct[St],at=0;at<We;++at)Ke[Ye++]=Ft[at]}function a(pe){return 0|be[Object.prototype.toString.call(pe)]}function i(pe,we){for(var Be=0;Be<we.length;++Be)pe[Be]=we[Be]}function s(pe,we,Be,We,Ke,Ye,ft){for(var ct=0,St=0;St<Be;++St)for(var Ft=0;Ft<We;++Ft)pe[ct++]=we[Ke*St+Ye*Ft+ft]}function p(pe){for(var we=se.allocType(5123,pe.length),Be=0;Be<pe.length;++Be)if(isNaN(pe[Be]))we[Be]=65535;else if(1/0===pe[Be])we[Be]=31744;else if(-1/0===pe[Be])we[Be]=64512;else{Me[0]=pe[Be];var We=(Ye=Ie[0])>>>31<<15,Ke=(Ye<<1>>>24)-127,Ye=Ye>>13&1023;we[Be]=-24>Ke?We:-14>Ke?We+(Ye+1024>>-14-Ke):15<Ke?We+31744:We+(Ke+15<<10)+Ye}return we}function g(pe){return Array.isArray(pe)||ue(pe)}function u(pe){return"[object "+pe+"]"}function x(pe){return Array.isArray(pe)&&(0===pe.length||"number"==typeof pe[0])}function f(pe){return!(!Array.isArray(pe)||0===pe.length||!g(pe[0]))}function T(pe){return Object.prototype.toString.call(pe)}function _(pe){if(!pe)return!1;var we=T(pe);return 0<=ut.indexOf(we)||x(pe)||f(pe)||t(pe)}function k(pe,we){36193===pe.type?(pe.data=p(we),se.freeType(we)):pe.data=we}function w(pe,we,Be,We,Ke,Ye){if(pe=void 0!==At[pe]?At[pe]:De[pe]*gt[we],Ye&&(pe*=6),Ke){for(We=0;1<=Be;)We+=pe*Be*Be,Be/=2;return We}return pe*Be*We}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function D(pe,we){return pe>>>we|pe<<32-we}function z(pe,we){var Be=(65535&pe)+(65535&we);return(pe>>16)+(we>>16)+(Be>>16)<<16|65535&Be}function N(pe){return Array.prototype.slice.call(pe)}function V(pe){return N(pe).join("")}function J(pe){return Array.isArray(pe)||ue(pe)||t(pe)}function G(pe){return pe.sort(function(we,Be){return"viewport"===we?-1:"viewport"===Be?1:we<Be?-1:1})}function Z(pe,we,Be,We){this.thisDep=pe,this.contextDep=we,this.propDep=Be,this.append=We}function re(pe){return pe&&!(pe.thisDep||pe.contextDep||pe.propDep)}function j(pe){return new Z(!1,!1,!1,pe)}function B(pe,we){var Be=pe.type;if(0===Be)return new Z(!0,1<=(Be=pe.data.length),2<=Be,we);if(4===Be)return new Z((Be=pe.data).thisDep,Be.contextDep,Be.propDep,we);if(5===Be)return new Z(!1,!1,!1,we);if(6===Be){for(var We=Be=!1,Ke=!1,Ye=0;Ye<pe.data.length;++Ye){var ft=pe.data[Ye];1===ft.type?Ke=!0:2===ft.type?We=!0:3===ft.type?Be=!0:0===ft.type?(Be=!0,1<=(ft=ft.data)&&(We=!0),2<=ft&&(Ke=!0)):4===ft.type&&(Be=Be||ft.data.thisDep,We=We||ft.data.contextDep,Ke=Ke||ft.data.propDep)}return new Z(Be,We,Ke,we)}return new Z(3===Be,2===Be,1===Be,we)}function H(pe,we,Be,We,Ke,Ye,ft,ct,St,Ft,at,mt,qt,Et,Dt,Le){function Xe(Rt){return Rt.replace(".","_")}function ot(Rt,gr,xr){var Zr=Xe(Rt);Hn.push(Rt),Nn[Zr]=Jr[Zr]=!!xr,Mn[Zr]=gr}function dt(Rt,gr,xr){var Zr=Xe(Rt);Hn.push(Rt),Array.isArray(xr)?(Jr[Zr]=xr.slice(),Nn[Zr]=xr.slice()):Jr[Zr]=Nn[Zr]=xr,Un[Zr]=gr}function Lt(){var Rt=function X(pe){function we(){var at=[],mt=[];return U(function(){at.push.apply(at,N(arguments))},{def:function(){var qt="v"+Ke++;return mt.push(qt),0<arguments.length&&(at.push(qt,"="),at.push.apply(at,N(arguments)),at.push(";")),qt},toString:function(){return V([0<mt.length?"var "+mt.join(",")+";":"",V(at)])}})}function Be(){function at(Le,Xe){qt(Le,Xe,"=",mt.def(Le,Xe),";")}var mt=we(),qt=we(),Et=mt.toString,Dt=qt.toString;return U(function(){mt.apply(mt,N(arguments))},{def:mt.def,entry:mt,exit:qt,save:at,set:function(Le,Xe,ot){at(Le,Xe),mt(Le,Xe,"=",ot,";")},toString:function(){return Et()+Dt()}})}var We=pe&&pe.cache,Ke=0,Ye=[],ft=[],ct=[],St=we(),Ft={};return{global:St,link:function(at,mt){var qt=mt&&mt.stable;if(!qt)for(var Et=0;Et<ft.length;++Et)if(ft[Et]===at&&!ct[Et])return Ye[Et];return Et="g"+Ke++,Ye.push(Et),ft.push(at),ct.push(qt),Et},block:we,proc:function(at,mt){function qt(){var Xe="a"+Et.length;return Et.push(Xe),Xe}var Et=[];mt=mt||0;for(var Dt=0;Dt<mt;++Dt)qt();var Le=(Dt=Be()).toString;return Ft[at]=U(Dt,{arg:qt,toString:function(){return V(["function(",Et.join(),"){",Le(),"}"])}})},scope:Be,cond:function(){var at=V(arguments),mt=Be(),qt=Be(),Et=mt.toString,Dt=qt.toString;return U(mt,{then:function(){return mt.apply(mt,N(arguments)),this},else:function(){return qt.apply(qt,N(arguments)),this},toString:function(){var Le=Dt();return Le&&(Le="else{"+Le+"}"),V(["if(",at,"){",Et(),"}",Le])}})},compile:function(){var at=['"use strict";',St,"return {"];Object.keys(Ft).forEach(function(Et){at.push('"',Et,'":',Ft[Et].toString(),",")}),at.push("}");var mt,qt=V(at).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return We&&(mt=function(Et){for(var Dt,Le="",Xe=0;Xe<Et.length;Xe++)Dt=Et.charCodeAt(Xe),Le+="0123456789abcdef".charAt(Dt>>>4&15)+"0123456789abcdef".charAt(15&Dt);return Le}(function(Et){for(var Dt=Array(Et.length>>2),Le=0;Le<Dt.length;Le++)Dt[Le]=0;for(Le=0;Le<8*Et.length;Le+=8)Dt[Le>>5]|=(255&Et.charCodeAt(Le/8))<<24-Le%32;var Xe,ot,dt,Lt,Ut,$t,Wt,wr,Rr,br,nr,lr=8*Et.length;for(Et=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Le=Array(64),Dt[lr>>5]|=128<<24-lr%32,Dt[15+(lr+64>>9<<4)]=lr,wr=0;wr<Dt.length;wr+=16){for(lr=Et[0],Xe=Et[1],ot=Et[2],dt=Et[3],Lt=Et[4],Ut=Et[5],$t=Et[6],Wt=Et[7],Rr=0;64>Rr;Rr++){var sr;16>Rr?Le[Rr]=Dt[Rr+wr]:(br=Rr,nr=z(nr=D(nr=Le[Rr-2],17)^D(nr,19)^nr>>>10,Le[Rr-7]),sr=D(sr=Le[Rr-15],7)^D(sr,18)^sr>>>3,Le[br]=z(z(nr,sr),Le[Rr-16])),br=z(z(z(z(Wt,br=D(br=Lt,6)^D(br,11)^D(br,25)),Lt&Ut^~Lt&$t),Gt[Rr]),Le[Rr]),nr=z(Wt=D(Wt=lr,2)^D(Wt,13)^D(Wt,22),lr&Xe^lr&ot^Xe&ot),Wt=$t,$t=Ut,Ut=Lt,Lt=z(dt,br),dt=ot,ot=Xe,Xe=lr,lr=z(br,nr)}Et[0]=z(lr,Et[0]),Et[1]=z(Xe,Et[1]),Et[2]=z(ot,Et[2]),Et[3]=z(dt,Et[3]),Et[4]=z(Lt,Et[4]),Et[5]=z(Ut,Et[5]),Et[6]=z($t,Et[6]),Et[7]=z(Wt,Et[7])}for(Dt="",Le=0;Le<32*Et.length;Le+=8)Dt+=String.fromCharCode(Et[Le>>5]>>>24-Le%32&255);return Dt}(function(Et){for(var Dt,Le,Xe="",ot=-1;++ot<Et.length;)Dt=Et.charCodeAt(ot),Le=ot+1<Et.length?Et.charCodeAt(ot+1):0,55296<=Dt&&56319>=Dt&&56320<=Le&&57343>=Le&&(Dt=65536+((1023&Dt)<<10)+(1023&Le),ot++),127>=Dt?Xe+=String.fromCharCode(Dt):2047>=Dt?Xe+=String.fromCharCode(192|Dt>>>6&31,128|63&Dt):65535>=Dt?Xe+=String.fromCharCode(224|Dt>>>12&15,128|Dt>>>6&63,128|63&Dt):2097151>=Dt&&(Xe+=String.fromCharCode(240|Dt>>>18&7,128|Dt>>>12&63,128|Dt>>>6&63,128|63&Dt));return Xe}(qt))),We[mt])?We[mt].apply(null,ft):(qt=Function.apply(null,Ye.concat(qt)),We&&(We[mt]=qt),qt.apply(null,ft))}}}({cache:Dt}),gr=Rt.link,xr=Rt.global;Rt.id=Sr++,Rt.batchId="0";var Zr=gr(di),Ur=Rt.shared={props:"a0"};Object.keys(di).forEach(function(Dr){Ur[Dr]=xr.def(Zr,".",Dr)});var Yr=Rt.next={},Br=Rt.current={};Object.keys(Un).forEach(function(Dr){Array.isArray(Jr[Dr])&&(Yr[Dr]=xr.def(Ur.next,".",Dr),Br[Dr]=xr.def(Ur.current,".",Dr))});var Cr=Rt.constants={};Object.keys(rr).forEach(function(Dr){Cr[Dr]=xr.def(JSON.stringify(rr[Dr]))}),Rt.invoke=function(Dr,Nr){switch(Nr.type){case 0:var nn=["this",Ur.context,Ur.props,Rt.batchId];return Dr.def(gr(Nr.data),".call(",nn.slice(0,Math.max(Nr.data.length+1,4)),")");case 1:return Dr.def(Ur.props,Nr.data);case 2:return Dr.def(Ur.context,Nr.data);case 3:return Dr.def("this",Nr.data);case 4:return Nr.data.append(Rt,Dr),Nr.data.ref;case 5:return Nr.data.toString();case 6:return Nr.data.map(function(rn){return Rt.invoke(Dr,rn)})}},Rt.attribCache={};var Or={};return Rt.scopeAttrib=function(Dr){if((Dr=we.id(Dr))in Or)return Or[Dr];var Nr=Ft.scope[Dr];return Nr||(Nr=Ft.scope[Dr]=new gn),Or[Dr]=gr(Nr)},Rt}function Rr(Rt,gr,xr,Zr,Ur){function Yr(Sn){var En=Cr[Sn];En&&(Dr[Sn]=En)}var Sn,Ln,Fn,qn,Br=function(Sn,En){if("string"==typeof(Ln=Sn.static).frag&&"string"==typeof Ln.vert){if(0<Object.keys(En.dynamic).length)return null;var Ln=En.static,Fn=Object.keys(Ln);if(0<Fn.length&&"number"==typeof Ln[Fn[0]]){for(var qn=[],ni=0;ni<Fn.length;++ni)qn.push([0|Ln[Fn[ni]],Fn[ni]]);return qn}}return null}(Rt,gr),Cr=function(Sn,En,Ln){function Fn(Di){if(Di in qn){var Dn=qn[Di];Di=!0;var si,ai,Wi=0|Dn.x,ka=0|Dn.y;return"width"in Dn?si=0|Dn.width:Di=!1,"height"in Dn?ai=0|Dn.height:Di=!1,new Z(!Di&&En&&En.thisDep,!Di&&En&&En.contextDep,!Di&&En&&En.propDep,function(ao,Bi){var ra=ao.shared.context,co=si;"width"in Dn||(co=Bi.def(ra,".","framebufferWidth","-",Wi));var Ji=ai;return"height"in Dn||(Ji=Bi.def(ra,".","framebufferHeight","-",ka)),[Wi,ka,co,Ji]})}if(Di in ni){var Va=ni[Di];return Di=B(Va,function(ao,Bi){var ra=ao.invoke(Bi,Va),co=ao.shared.context,Ji=Bi.def(ra,".x|0"),_o=Bi.def(ra,".y|0");return[Ji,_o,Bi.def('"width" in ',ra,"?",ra,".width|0:","(",co,".","framebufferWidth","-",Ji,")"),ra=Bi.def('"height" in ',ra,"?",ra,".height|0:","(",co,".","framebufferHeight","-",_o,")")]}),En&&(Di.thisDep=Di.thisDep||En.thisDep,Di.contextDep=Di.contextDep||En.contextDep,Di.propDep=Di.propDep||En.propDep),Di}return En?new Z(En.thisDep,En.contextDep,En.propDep,function(ao,Bi){var ra=ao.shared.context;return[0,0,Bi.def(ra,".","framebufferWidth"),Bi.def(ra,".","framebufferHeight")]}):null}var qn=Sn.static,ni=Sn.dynamic;if(Sn=Fn("viewport")){var zi=Sn;Sn=new Z(Sn.thisDep,Sn.contextDep,Sn.propDep,function(Di,Dn){var si=zi.append(Di,Dn),ai=Di.shared.context;return Dn.set(ai,".viewportWidth",si[2]),Dn.set(ai,".viewportHeight",si[3]),si})}return{viewport:Sn,scissor_box:Fn("scissor.box")}}(Rt,nn=function Ut(Rt,gr){var xr=Rt.static,Zr=Rt.dynamic;if("framebuffer"in xr){var Ur=xr.framebuffer;return Ur?(Ur=ct.getFramebuffer(Ur),j(function(Br,Cr){var Or=Br.link(Ur),Dr=Br.shared;return Cr.set(Dr.framebuffer,".next",Or),Cr.set(Dr=Dr.context,".framebufferWidth",Or+".width"),Cr.set(Dr,".framebufferHeight",Or+".height"),Or})):j(function(Br,Cr){var Or=Br.shared;return Cr.set(Or.framebuffer,".next","null"),Cr.set(Or=Or.context,".framebufferWidth",Or+".drawingBufferWidth"),Cr.set(Or,".framebufferHeight",Or+".drawingBufferHeight"),"null"})}if("framebuffer"in Zr){var Yr=Zr.framebuffer;return B(Yr,function(Br,Cr){var Or=Br.invoke(Cr,Yr),Dr=Br.shared,Nr=Dr.framebuffer;return Or=Cr.def(Nr,".getFramebuffer(",Or,")"),Cr.set(Nr,".next",Or),Cr.set(Dr=Dr.context,".framebufferWidth",Or+"?"+Or+".width:"+Dr+".drawingBufferWidth"),Cr.set(Dr,".framebufferHeight",Or+"?"+Or+".height:"+Dr+".drawingBufferHeight"),Or})}return null}(Rt)),Or=function Wt(Rt,gr){function xr(dn,Sn){if(dn in Zr){var En=0|Zr[dn];return Sn?Yr.offset=En:Yr.instances=En,j(function(Fn,qn){return Sn&&(Fn.OFFSET=En),En})}if(dn in Ur){var Ln=Ur[dn];return B(Ln,function(Fn,qn){var ni=Fn.invoke(qn,Ln);return Sn&&(Fn.OFFSET=ni),ni})}if(Sn){if(Or)return j(function(Fn,qn){return Fn.OFFSET=0});if(Br)return new Z(Cr.thisDep,Cr.contextDep,Cr.propDep,function(Fn,qn){return qn.def(Fn.shared.vao+".currentVAO?"+Fn.shared.vao+".currentVAO.offset:0")})}else if(Br)return new Z(Cr.thisDep,Cr.contextDep,Cr.propDep,function(Fn,qn){return qn.def(Fn.shared.vao+".currentVAO?"+Fn.shared.vao+".currentVAO.instances:-1")});return null}var Zr=Rt.static,Ur=Rt.dynamic,Yr={},Br=!1,Cr=function(){if("vao"in Zr){var dn=Zr.vao;return null!==dn&&null===Ft.getVAO(dn)&&(dn=Ft.createVAO(dn)),Br=!0,Yr.vao=dn,j(function(En){var Ln=Ft.getVAO(dn);return Ln?En.link(Ln):"null"})}if("vao"in Ur){Br=!0;var Sn=Ur.vao;return B(Sn,function(En,Ln){var Fn=En.invoke(Ln,Sn);return Ln.def(En.shared.vao+".getVAO("+Fn+")")})}return null}(),Or=!1,Dr=function(){if("elements"in Zr){var dn=Zr.elements;if(Yr.elements=dn,J(dn)){var Sn=Yr.elements=Ye.create(dn,!0);dn=Ye.getElements(Sn),Or=!0}else dn&&(dn=Ye.getElements(dn),Or=!0);return(Sn=j(function(Ln,Fn){if(dn){var qn=Ln.link(dn);return Ln.ELEMENTS=qn}return Ln.ELEMENTS=null})).value=dn,Sn}if("elements"in Ur){Or=!0;var En=Ur.elements;return B(En,function(Ln,Fn){var qn=(ni=Ln.shared).isBufferArgs,ni=ni.elements,zi=Ln.invoke(Fn,En),Di=Fn.def("null");return qn=Fn.def(qn,"(",zi,")"),zi=Ln.cond(qn).then(Di,"=",ni,".createStream(",zi,");").else(Di,"=",ni,".getElements(",zi,");"),Fn.entry(zi),Fn.exit(Ln.cond(qn).then(ni,".destroyStream(",Di,");")),Ln.ELEMENTS=Di})}return Br?new Z(Cr.thisDep,Cr.contextDep,Cr.propDep,function(Ln,Fn){return Fn.def(Ln.shared.vao+".currentVAO?"+Ln.shared.elements+".getElements("+Ln.shared.vao+".currentVAO.elements):null")}):null}(),Nr=xr("offset",!0),nn=function(){if("primitive"in Zr){var dn=Zr.primitive;return Yr.primitive=dn,j(function(En,Ln){return Se[dn]})}if("primitive"in Ur){var Sn=Ur.primitive;return B(Sn,function(En,Ln){var Fn=En.constants.primTypes,qn=En.invoke(Ln,Sn);return Ln.def(Fn,"[",qn,"]")})}return Or?re(Dr)?j(Dr.value?function(En,Ln){return Ln.def(En.ELEMENTS,".primType")}:function(){return 4}):new Z(Dr.thisDep,Dr.contextDep,Dr.propDep,function(En,Ln){var Fn=En.ELEMENTS;return Ln.def(Fn,"?",Fn,".primType:",4)}):Br?new Z(Cr.thisDep,Cr.contextDep,Cr.propDep,function(En,Ln){return Ln.def(En.shared.vao+".currentVAO?"+En.shared.vao+".currentVAO.primitive:4")}):null}(),rn=function(){if("count"in Zr){var dn=0|Zr.count;return Yr.count=dn,j(function(){return dn})}if("count"in Ur){var Sn=Ur.count;return B(Sn,function(En,Ln){return En.invoke(Ln,Sn)})}return Or?re(Dr)?Dr?Nr?new Z(Nr.thisDep,Nr.contextDep,Nr.propDep,function(En,Ln){return Ln.def(En.ELEMENTS,".vertCount-",En.OFFSET)}):j(function(En,Ln){return Ln.def(En.ELEMENTS,".vertCount")}):j(function(){return-1}):new Z(Dr.thisDep||Nr.thisDep,Dr.contextDep||Nr.contextDep,Dr.propDep||Nr.propDep,function(En,Ln){var Fn=En.ELEMENTS;return En.OFFSET?Ln.def(Fn,"?",Fn,".vertCount-",En.OFFSET,":-1"):Ln.def(Fn,"?",Fn,".vertCount:-1")}):Br?new Z(Cr.thisDep,Cr.contextDep,Cr.propDep,function(En,Ln){return Ln.def(En.shared.vao,".currentVAO?",En.shared.vao,".currentVAO.count:-1")}):null}(),pn=xr("instances",!1);return{elements:Dr,primitive:nn,count:rn,instances:pn,offset:Nr,vao:Cr,vaoActive:Br,elementsActive:Or,static:Yr}}(Rt),Dr=(Ln=(Sn=Rt).static,Fn=Sn.dynamic,qn={},Hn.forEach(function(ni){function zi(Dn,si){if(ni in Ln){var ai=Dn(Ln[ni]);qn[Di]=j(function(){return ai})}else if(ni in Fn){var Wi=Fn[ni];qn[Di]=B(Wi,function(ka,Va){return si(ka,Va,ka.invoke(Va,Wi))})}}var Di=Xe(ni);switch(ni){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return zi(function(Dn){return Dn},function(Dn,si,ai){return ai});case"depth.func":return zi(function(Dn){return hr[Dn]},function(Dn,si,ai){return si.def(Dn.constants.compareFuncs,"[",ai,"]")});case"depth.range":return zi(function(Dn){return Dn},function(Dn,si,ai){return[si.def("+",ai,"[0]"),si=si.def("+",ai,"[1]")]});case"blend.func":return zi(function(Dn){return[ar["srcRGB"in Dn?Dn.srcRGB:Dn.src],ar["dstRGB"in Dn?Dn.dstRGB:Dn.dst],ar["srcAlpha"in Dn?Dn.srcAlpha:Dn.src],ar["dstAlpha"in Dn?Dn.dstAlpha:Dn.dst]]},function(Dn,si,ai){function Wi(Bi,ra){return si.def('"',Bi,ra,'" in ',ai,"?",ai,".",Bi,ra,":",ai,".",Bi)}Dn=Dn.constants.blendFuncs;var ka=Wi("src","RGB"),Va=Wi("dst","RGB"),ao=(ka=si.def(Dn,"[",ka,"]"),si.def(Dn,"[",Wi("src","Alpha"),"]"));return[ka,Va=si.def(Dn,"[",Va,"]"),ao,Dn=si.def(Dn,"[",Wi("dst","Alpha"),"]")]});case"blend.equation":return zi(function(Dn){return"string"==typeof Dn?[zn[Dn],zn[Dn]]:"object"==typeof Dn?[zn[Dn.rgb],zn[Dn.alpha]]:void 0},function(Dn,si,ai){var Wi=Dn.constants.blendEquations,ka=si.def(),Va=si.def();return(Dn=Dn.cond("typeof ",ai,'==="string"')).then(ka,"=",Va,"=",Wi,"[",ai,"];"),Dn.else(ka,"=",Wi,"[",ai,".rgb];",Va,"=",Wi,"[",ai,".alpha];"),si(Dn),[ka,Va]});case"blend.color":return zi(function(Dn){return n(4,function(si){return+Dn[si]})},function(Dn,si,ai){return n(4,function(Wi){return si.def("+",ai,"[",Wi,"]")})});case"stencil.mask":return zi(function(Dn){return 0|Dn},function(Dn,si,ai){return si.def(ai,"|0")});case"stencil.func":return zi(function(Dn){return[hr[Dn.cmp||"keep"],Dn.ref||0,"mask"in Dn?Dn.mask:-1]},function(Dn,si,ai){return[Dn=si.def('"cmp" in ',ai,"?",Dn.constants.compareFuncs,"[",ai,".cmp]",":",7680),si.def(ai,".ref|0"),si=si.def('"mask" in ',ai,"?",ai,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return zi(function(Dn){return["stencil.opBack"===ni?1029:1028,Xt[Dn.fail||"keep"],Xt[Dn.zfail||"keep"],Xt[Dn.zpass||"keep"]]},function(Dn,si,ai){function Wi(Va){return si.def('"',Va,'" in ',ai,"?",ka,"[",ai,".",Va,"]:",7680)}var ka=Dn.constants.stencilOps;return["stencil.opBack"===ni?1029:1028,Wi("fail"),Wi("zfail"),Wi("zpass")]});case"polygonOffset.offset":return zi(function(Dn){return[0|Dn.factor,0|Dn.units]},function(Dn,si,ai){return[si.def(ai,".factor|0"),si=si.def(ai,".units|0")]});case"cull.face":return zi(function(Dn){var si=0;return"front"===Dn?si=1028:"back"===Dn&&(si=1029),si},function(Dn,si,ai){return si.def(ai,'==="front"?',1028,":",1029)});case"frontFace":return zi(function(Dn){return He[Dn]},function(Dn,si,ai){return si.def(ai+'==="cw"?2304:2305')});case"colorMask":return zi(function(Dn){return Dn.map(function(si){return!!si})},function(Dn,si,ai){return n(4,function(Wi){return"!!"+ai+"["+Wi+"]"})});case"sample.coverage":return zi(function(Dn){return["value"in Dn?Dn.value:1,!!Dn.invert]},function(Dn,si,ai){return[si.def('"value" in ',ai,"?+",ai,".value:1"),si=si.def("!!",ai,".invert")]})}}),qn),Nr=function $t(Rt,gr,xr){function Zr(Dr){if(Dr in Ur){var Nr=we.id(Ur[Dr]);return(Dr=j(function(){return Nr})).id=Nr,Dr}if(Dr in Yr){var nn=Yr[Dr];return B(nn,function(rn,pn){var dn=rn.invoke(pn,nn);return pn.def(rn.shared.strings,".id(",dn,")")})}return null}var Ur=Rt.static,Yr=Rt.dynamic,Br=Zr("frag"),Cr=Zr("vert"),Or=null;return re(Br)&&re(Cr)?(Or=at.program(Cr.id,Br.id,null,xr),Rt=j(function(Dr,Nr){return Dr.link(Or)})):Rt=new Z(Br&&Br.thisDep||Cr&&Cr.thisDep,Br&&Br.contextDep||Cr&&Cr.contextDep,Br&&Br.propDep||Cr&&Cr.propDep,function(Dr,Nr){var nn,rn,pn=Dr.shared.shader;return nn=Br?Br.append(Dr,Nr):Nr.def(pn,".","frag"),rn=Cr?Cr.append(Dr,Nr):Nr.def(pn,".","vert"),Nr.def(pn+".program("+rn+","+nn+")")}),{frag:Br,vert:Cr,progVar:Rt,program:Or}}(Rt,0,Br);Yr("viewport"),Yr(Xe("scissor.box"));var nn,rn=0<Object.keys(Dr).length;if((nn={framebuffer:nn,draw:Or,shader:Nr,state:Dr,dirty:rn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Sn){var En,Ln=Sn.static;if(Sn=Sn.dynamic,"profile"in Ln){var Fn=!!Ln.profile;(En=j(function(ni,zi){return Fn})).enable=Fn}else if("profile"in Sn){var qn=Sn.profile;En=B(qn,function(ni,zi){return ni.invoke(zi,qn)})}return En}(Rt),nn.uniforms=function(Sn,En){var Ln=Sn.static,Fn=Sn.dynamic,qn={};return Object.keys(Ln).forEach(function(ni){var zi,Di=Ln[ni];if("number"==typeof Di||"boolean"==typeof Di)zi=j(function(){return Di});else if("function"==typeof Di){var Dn=Di._reglType;"texture2d"===Dn||"textureCube"===Dn?zi=j(function(si){return si.link(Di)}):"framebuffer"!==Dn&&"framebufferCube"!==Dn||(zi=j(function(si){return si.link(Di.color[0])}))}else g(Di)&&(zi=j(function(si){return si.global.def("[",n(Di.length,function(ai){return Di[ai]}),"]")}));zi.value=Di,qn[ni]=zi}),Object.keys(Fn).forEach(function(ni){var zi=Fn[ni];qn[ni]=B(zi,function(Di,Dn){return Di.invoke(Dn,zi)})}),qn}(xr),nn.drawVAO=nn.scopeVAO=Or.vao,!nn.drawVAO&&Nr.program&&!Br&&Be.angle_instanced_arrays&&Or.static.elements){var pn=!0;if(Rt=Nr.program.attributes.map(function(Sn){return Sn=gr.static[Sn],pn=pn&&!!Sn,Sn}),pn&&0<Rt.length){var dn=Ft.getVAO(Ft.createVAO({attributes:Rt,elements:Or.static.elements}));nn.drawVAO=new Z(null,null,null,function(Sn,En){return Sn.link(dn)}),nn.useVAO=!0}}return Br?nn.useVAO=!0:nn.attributes=function wr(Rt,gr){var xr=Rt.static,Zr=Rt.dynamic,Ur={};return Object.keys(xr).forEach(function(Yr){var Br=xr[Yr],Cr=we.id(Yr),Or=new gn;if(J(Br))Or.state=1,Or.buffer=Ke.getBuffer(Ke.create(Br,34962,!1,!0)),Or.type=0;else if(Nr=Ke.getBuffer(Br))Or.state=1,Or.buffer=Nr,Or.type=0;else if("constant"in Br){var Dr=Br.constant;Or.buffer="null",Or.state=2,"number"==typeof Dr?Or.x=Dr:Kt.forEach(function(En,Ln){Ln<Dr.length&&(Or[En]=Dr[Ln])})}else{var Nr=J(Br.buffer)?Ke.getBuffer(Ke.create(Br.buffer,34962,!1,!0)):Ke.getBuffer(Br.buffer),nn=0|Br.offset,rn=0|Br.stride,pn=0|Br.size,dn=!!Br.normalized,Sn=0;"type"in Br&&(Sn=_e[Br.type]),Br=0|Br.divisor,Or.buffer=Nr,Or.state=1,Or.size=pn,Or.normalized=dn,Or.type=Sn||Nr.dtype,Or.offset=nn,Or.stride=rn,Or.divisor=Br}Ur[Yr]=j(function(En,Ln){var Fn=En.attribCache;if(Cr in Fn)return Fn[Cr];var qn={isStream:!1};return Object.keys(Or).forEach(function(ni){qn[ni]=Or[ni]}),Or.buffer&&(qn.buffer=En.link(Or.buffer),qn.type=qn.type||qn.buffer+".dtype"),Fn[Cr]=qn})}),Object.keys(Zr).forEach(function(Yr){var Br=Zr[Yr];Ur[Yr]=B(Br,function(Cr,Or){function Dr(Fn){Or(dn[Fn],"=",Nr,".",Fn,"|0;")}var Nr=Cr.invoke(Or,Br),nn=Cr.shared,rn=Cr.constants,pn=nn.isBufferArgs,dn=(nn=nn.buffer,{isStream:Or.def(!1)}),Sn=new gn;Sn.state=1,Object.keys(Sn).forEach(function(Fn){dn[Fn]=Or.def(""+Sn[Fn])});var En=dn.buffer,Ln=dn.type;return Or("if(",pn,"(",Nr,")){",dn.isStream,"=true;",En,"=",nn,".createStream(",34962,",",Nr,");",Ln,"=",En,".dtype;","}else{",En,"=",nn,".getBuffer(",Nr,");","if(",En,"){",Ln,"=",En,".dtype;",'}else if("constant" in ',Nr,"){",dn.state,"=",2,";","if(typeof "+Nr+'.constant === "number"){',dn[Kt[0]],"=",Nr,".constant;",Kt.slice(1).map(function(Fn){return dn[Fn]}).join("="),"=0;","}else{",Kt.map(function(Fn,qn){return dn[Fn]+"="+Nr+".constant.length>"+qn+"?"+Nr+".constant["+qn+"]:0;"}).join(""),"}}else{","if(",pn,"(",Nr,".buffer)){",En,"=",nn,".createStream(",34962,",",Nr,".buffer);","}else{",En,"=",nn,".getBuffer(",Nr,".buffer);","}",Ln,'="type" in ',Nr,"?",rn.glTypes,"[",Nr,".type]:",En,".dtype;",dn.normalized,"=!!",Nr,".normalized;"),Dr("size"),Dr("offset"),Dr("stride"),Dr("divisor"),Or("}}"),Or.exit("if(",dn.isStream,"){",nn,".destroyStream(",En,");","}"),dn})}),Ur}(gr),nn.context=function(Sn){var En=Sn.static,Ln=Sn.dynamic,Fn={};return Object.keys(En).forEach(function(qn){var ni=En[qn];Fn[qn]=j(function(zi,Di){return"number"==typeof ni||"boolean"==typeof ni?""+ni:zi.link(ni)})}),Object.keys(Ln).forEach(function(qn){var ni=Ln[qn];Fn[qn]=B(ni,function(zi,Di){return zi.invoke(Di,ni)})}),Fn}(Zr),nn}function br(Rt,gr,xr){var Zr=Rt.shared.context,Ur=Rt.scope();Object.keys(xr).forEach(function(Yr){gr.save(Zr,"."+Yr);var Br=xr[Yr].append(Rt,gr);Array.isArray(Br)?Ur(Zr,".",Yr,"=[",Br.join(),"];"):Ur(Zr,".",Yr,"=",Br,";")}),gr(Ur)}function nr(Rt,gr,xr,Zr){var Ur,Yr=(Cr=Rt.shared).gl,Br=Cr.framebuffer;_n&&(Ur=gr.def(Cr.extensions,".webgl_draw_buffers"));var Cr=(Or=Rt.constants).drawBuffer,Or=Or.backBuffer;Rt=xr?xr.append(Rt,gr):gr.def(Br,".next"),Zr||gr("if(",Rt,"!==",Br,".cur){"),gr("if(",Rt,"){",Yr,".bindFramebuffer(",36160,",",Rt,".framebuffer);"),_n&&gr(Ur,".drawBuffersWEBGL(",Cr,"[",Rt,".colorAttachments.length]);"),gr("}else{",Yr,".bindFramebuffer(",36160,",null);"),_n&&gr(Ur,".drawBuffersWEBGL(",Or,");"),gr("}",Br,".cur=",Rt,";"),Zr||gr("}")}function lr(Rt,gr,xr){var Zr=Rt.shared,Ur=Zr.gl,Yr=Rt.current,Br=Rt.next,Cr=Zr.current,Or=Zr.next,Dr=Rt.cond(Cr,".dirty");Hn.forEach(function(Nr){var nn,rn;if(!((Nr=Xe(Nr))in xr.state))if(Nr in Br){nn=Br[Nr],rn=Yr[Nr];var pn=n(Jr[Nr].length,function(dn){return Dr.def(nn,"[",dn,"]")});Dr(Rt.cond(pn.map(function(dn,Sn){return dn+"!=="+rn+"["+Sn+"]"}).join("||")).then(Ur,".",Un[Nr],"(",pn,");",pn.map(function(dn,Sn){return rn+"["+Sn+"]="+dn}).join(";"),";"))}else nn=Dr.def(Or,".",Nr),pn=Rt.cond(nn,"!==",Cr,".",Nr),Dr(pn),Nr in Mn?pn(Rt.cond(nn).then(Ur,".enable(",Mn[Nr],");").else(Ur,".disable(",Mn[Nr],");"),Cr,".",Nr,"=",nn,";"):pn(Ur,".",Un[Nr],"(",nn,");",Cr,".",Nr,"=",nn,";")}),0===Object.keys(xr.state).length&&Dr(Cr,".dirty=false;"),gr(Dr)}function sr(Rt,gr,xr,Zr){var Ur,Yr=Rt.shared,Br=Rt.current,Cr=Yr.current,Or=Yr.gl;G(Object.keys(xr)).forEach(function(Dr){var Nr=xr[Dr];if(!Zr||Zr(Nr)){var nn=Nr.append(Rt,gr);if(Mn[Dr]){var rn=Mn[Dr];re(Nr)?(Ur=Rt.link(nn,{stable:!0}),gr(Rt.cond(Ur).then(Or,".enable(",rn,");").else(Or,".disable(",rn,");")),gr(Cr,".",Dr,"=",Ur,";")):(gr(Rt.cond(nn).then(Or,".enable(",rn,");").else(Or,".disable(",rn,");")),gr(Cr,".",Dr,"=",nn,";"))}else if(g(nn)){var pn=Br[Dr];gr(Or,".",Un[Dr],"(",nn,");",nn.map(function(dn,Sn){return pn+"["+Sn+"]="+dn}).join(";"),";")}else re(Nr)?(Ur=Rt.link(nn,{stable:!0}),gr(Or,".",Un[Dr],"(",Ur,");",Cr,".",Dr,"=",Ur,";")):gr(Or,".",Un[Dr],"(",nn,");",Cr,".",Dr,"=",nn,";")}})}function _r(Rt,gr){Vr&&(Rt.instancing=gr.def(Rt.shared.extensions,".angle_instanced_arrays"))}function Ar(Rt,gr,xr,Zr,Ur){function Yr(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Br(Sn){Sn(Dr=gr.def(),"=",Yr(),";"),"string"==typeof Ur?Sn(rn,".count+=",Ur,";"):Sn(rn,".count++;"),Et&&(Zr?Sn(Nr=gr.def(),"=",dn,".getNumPendingQueries();"):Sn(dn,".beginQuery(",rn,");"))}function Cr(Sn){Sn(rn,".cpuTime+=",Yr(),"-",Dr,";"),Et&&(Zr?Sn(dn,".pushScopeStats(",Nr,",",dn,".getNumPendingQueries(),",rn,");"):Sn(dn,".endQuery();"))}function Or(Sn){var En=gr.def(pn,".profile");gr(pn,".profile=",Sn,";"),gr.exit(pn,".profile=",En,";")}var Dr,Nr,nn=Rt.shared,rn=Rt.stats,pn=nn.current,dn=nn.timer;if(xr=xr.profile){if(re(xr))return void(xr.enable?(Br(gr),Cr(gr.exit),Or("true")):Or("false"));Or(xr=xr.append(Rt,gr))}else xr=gr.def(pn,".profile");Br(nn=Rt.block()),gr("if(",xr,"){",nn,"}"),Cr(Rt=Rt.block()),gr.exit("if(",xr,"){",Rt,"}")}function zt(Rt,gr,xr,Zr,Ur){var Br=Rt.shared;Zr.forEach(function(Cr){var Or,Dr=Cr.name,Nr=xr.attributes[Dr];if(Nr){if(!Ur(Nr))return;Or=Nr.append(Rt,gr)}else{if(!Ur(Je))return;var nn=Rt.scopeAttrib(Dr);Or={},Object.keys(new gn).forEach(function(rn){Or[rn]=gr.def(nn,".",rn)})}!function Yr(Cr,Or,Dr){function Nr(){gr("if(!",dn,".buffer){",rn,".enableVertexAttribArray(",pn,");}");var Fn,qn=Dr.type;Fn=Dr.size?gr.def(Dr.size,"||",Or):Or,gr("if(",dn,".type!==",qn,"||",dn,".size!==",Fn,"||",Ln.map(function(ni){return dn+"."+ni+"!=="+Dr[ni]}).join("||"),"){",rn,".bindBuffer(",34962,",",Sn,".buffer);",rn,".vertexAttribPointer(",[pn,Fn,qn,Dr.normalized,Dr.stride,Dr.offset],");",dn,".type=",qn,";",dn,".size=",Fn,";",Ln.map(function(ni){return dn+"."+ni+"="+Dr[ni]+";"}).join(""),"}"),Vr&&gr("if(",dn,".divisor!==",qn=Dr.divisor,"){",Rt.instancing,".vertexAttribDivisorANGLE(",[pn,qn],");",dn,".divisor=",qn,";}")}function nn(){gr("if(",dn,".buffer){",rn,".disableVertexAttribArray(",pn,");",dn,".buffer=null;","}if(",Kt.map(function(Fn,qn){return dn+"."+Fn+"!=="+En[qn]}).join("||"),"){",rn,".vertexAttrib4f(",pn,",",En,");",Kt.map(function(Fn,qn){return dn+"."+Fn+"="+En[qn]+";"}).join(""),"}")}var rn=Br.gl,pn=gr.def(Cr,".location"),dn=gr.def(Br.attributes,"[",pn,"]"),Sn=Dr.buffer,En=[Dr.x,Dr.y,Dr.z,Dr.w],Ln=["buffer","normalized","offset","stride"];1===(Cr=Dr.state)?Nr():2===Cr?nn():(gr("if(",Cr,"===",1,"){"),Nr(),gr("}else{"),nn(),gr("}"))}(Rt.link(Cr),function(rn){switch(rn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Cr.info.type),Or)})}function ur(Rt,gr,xr,Zr,Ur,Yr){for(var Br,Cr=Rt.shared,Or=Cr.gl,Dr=0;Dr<Zr.length;++Dr){var Nr,nn=(dn=Zr[Dr]).name,rn=dn.info.type,pn=xr.uniforms[nn],dn=Rt.link(dn)+".location";if(pn){if(!Ur(pn))continue;if(re(pn)){if(nn=pn.value,35678===rn||35680===rn)gr(Or,".uniform1i(",dn,",",(rn=Rt.link(nn._texture||nn.color[0]._texture))+".bind());"),gr.exit(rn,".unbind();");else if(35674===rn||35675===rn||35676===rn)pn=2,35675===rn?pn=3:35676===rn&&(pn=4),gr(Or,".uniformMatrix",pn,"fv(",dn,",false,",nn=Rt.global.def("new Float32Array(["+Array.prototype.slice.call(nn)+"])"),");");else{switch(rn){case 5126:Br="1f";break;case 35664:Br="2f";break;case 35665:Br="3f";break;case 35666:Br="4f";break;case 35670:case 5124:Br="1i";break;case 35671:case 35667:Br="2i";break;case 35672:case 35668:Br="3i";break;case 35673:case 35669:Br="4i"}gr(Or,".uniform",Br,"(",dn,",",g(nn)?Array.prototype.slice.call(nn):nn,");")}continue}Nr=pn.append(Rt,gr)}else{if(!Ur(Je))continue;Nr=gr.def(Cr.uniforms,"[",we.id(nn),"]")}switch(35678===rn?gr("if(",Nr,"&&",Nr,'._reglType==="framebuffer"){',Nr,"=",Nr,".color[0];","}"):35680===rn&&gr("if(",Nr,"&&",Nr,'._reglType==="framebufferCube"){',Nr,"=",Nr,".color[0];","}"),nn=1,rn){case 35678:case 35680:rn=gr.def(Nr,"._texture"),gr(Or,".uniform1i(",dn,",",rn,".bind());"),gr.exit(rn,".unbind();");continue;case 5124:case 35670:Br="1i";break;case 35667:case 35671:Br="2i",nn=2;break;case 35668:case 35672:Br="3i",nn=3;break;case 35669:case 35673:Br="4i",nn=4;break;case 5126:Br="1f";break;case 35664:Br="2f",nn=2;break;case 35665:Br="3f",nn=3;break;case 35666:Br="4f",nn=4;break;case 35674:Br="Matrix2fv";break;case 35675:Br="Matrix3fv";break;case 35676:Br="Matrix4fv"}if("M"===Br.charAt(0)){gr(Or,".uniform",Br,"(",dn,","),dn=Math.pow(rn-35674+2,2);var Sn=Rt.global.def("new Float32Array(",dn,")");Array.isArray(Nr)?gr("false,(",n(dn,function(Ln){return Sn+"["+Ln+"]="+Nr[Ln]}),",",Sn,")"):gr("false,(Array.isArray(",Nr,")||",Nr," instanceof Float32Array)?",Nr,":(",n(dn,function(Ln){return Sn+"["+Ln+"]="+Nr+"["+Ln+"]"}),",",Sn,")"),gr(");")}else{if(1<nn){rn=[];var En=[];for(pn=0;pn<nn;++pn)Array.isArray(Nr)?En.push(Nr[pn]):En.push(gr.def(Nr+"["+pn+"]")),Yr&&rn.push(gr.def());Yr&&gr("if(!",Rt.batchId,"||",rn.map(function(Ln,Fn){return Ln+"!=="+En[Fn]}).join("||"),"){",rn.map(function(Ln,Fn){return Ln+"="+En[Fn]+";"}).join("")),gr(Or,".uniform",Br,"(",dn,",",En.join(","),");")}else Yr&&(rn=gr.def(),gr("if(!",Rt.batchId,"||",rn,"!==",Nr,"){",rn,"=",Nr,";")),gr(Or,".uniform",Br,"(",dn,",",Nr,");");Yr&&gr("}")}}}function Tt(Rt,gr,xr,Zr){function Ur(qn){var ni=rn[qn];return ni?ni.append(Rt,ni.contextDep&&Zr.contextDynamic||ni.propDep?xr:gr):gr.def(nn,".",qn)}function Yr(){function qn(){xr(Or,".drawElementsInstancedANGLE(",[dn,En,Ln,Sn+"<<(("+Ln+"-5121)>>1)",Cr],");")}function ni(){xr(Or,".drawArraysInstancedANGLE(",[dn,Sn,En,Cr],");")}pn&&"null"!==pn?Fn?qn():(xr("if(",pn,"){"),qn(),xr("}else{"),ni(),xr("}")):ni()}function Br(){function qn(){xr(Nr+".drawElements("+[dn,En,Ln,Sn+"<<(("+Ln+"-5121)>>1)"]+");")}function ni(){xr(Nr+".drawArrays("+[dn,Sn,En]+");")}pn&&"null"!==pn?Fn?qn():(xr("if(",pn,"){"),qn(),xr("}else{"),ni(),xr("}")):ni()}var Cr,Or,qn,ni,Dr=Rt.shared,Nr=Dr.gl,nn=Dr.draw,rn=Zr.draw,pn=(ni=gr,(qn=rn.elements)?((qn.contextDep&&Zr.contextDynamic||qn.propDep)&&(ni=xr),qn=qn.append(Rt,ni),rn.elementsActive&&ni("if("+qn+")"+Nr+".bindBuffer(34963,"+qn+".buffer.buffer);")):(qn=ni.def(),ni(qn,"=",nn,".","elements",";","if(",qn,"){",Nr,".bindBuffer(",34963,",",qn,".buffer.buffer);}","else if(",Dr.vao,".currentVAO){",qn,"=",Rt.shared.elements+".getElements("+Dr.vao,".currentVAO.elements);",Qr?"":"if("+qn+")"+Nr+".bindBuffer(34963,"+qn+".buffer.buffer);","}")),qn),dn=Ur("primitive"),Sn=Ur("offset"),En=function(){var qn=rn.count,ni=gr;return qn?((qn.contextDep&&Zr.contextDynamic||qn.propDep)&&(ni=xr),qn=qn.append(Rt,ni)):qn=ni.def(nn,".","count"),qn}();if("number"==typeof En){if(0===En)return}else xr("if(",En,"){"),xr.exit("}");Vr&&(Cr=Ur("instances"),Or=Rt.instancing);var Ln=pn+".type",Fn=rn.elements&&re(rn.elements)&&!rn.vaoActive;Vr&&("number"!=typeof Cr||0<=Cr)?"string"==typeof Cr?(xr("if(",Cr,">0){"),Yr(),xr("}else if(",Cr,"<0){"),Br(),xr("}")):Yr():Br()}function Qt(Rt,gr,xr,Zr,Ur){return Ur=(gr=Lt()).proc("body",Ur),Vr&&(gr.instancing=Ur.def(gr.shared.extensions,".angle_instanced_arrays")),Rt(gr,Ur,xr,Zr),gr.compile().body}function Er(Rt,gr,xr,Zr){_r(Rt,gr),xr.useVAO?xr.drawVAO?gr(Rt.shared.vao,".setVAO(",xr.drawVAO.append(Rt,gr),");"):gr(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(gr(Rt.shared.vao,".setVAO(null);"),zt(Rt,gr,xr,Zr.attributes,function(){return!0})),ur(Rt,gr,xr,Zr.uniforms,function(){return!0},!1),Tt(Rt,gr,gr,xr)}function zr(Rt,gr,xr,Zr){function Ur(){return!0}Rt.batchId="a1",_r(Rt,gr),zt(Rt,gr,xr,Zr.attributes,Ur),ur(Rt,gr,xr,Zr.uniforms,Ur,!1),Tt(Rt,gr,gr,xr)}function an(Rt,gr,xr,Zr){function Ur(nn){return nn.contextDep&&Br||nn.propDep}function Yr(nn){return!Ur(nn)}_r(Rt,gr);var Br=xr.contextDep,Cr=gr.def(),Or=gr.def();Rt.shared.props=Or,Rt.batchId=Cr;var Dr=Rt.scope(),Nr=Rt.scope();gr(Dr.entry,"for(",Cr,"=0;",Cr,"<","a1",";++",Cr,"){",Or,"=","a0","[",Cr,"];",Nr,"}",Dr.exit),xr.needsContext&&br(Rt,Nr,xr.context),xr.needsFramebuffer&&nr(Rt,Nr,xr.framebuffer),sr(Rt,Nr,xr.state,Ur),xr.profile&&Ur(xr.profile)&&Ar(Rt,Nr,xr,!1,!0),Zr?(xr.useVAO?xr.drawVAO?Ur(xr.drawVAO)?Nr(Rt.shared.vao,".setVAO(",xr.drawVAO.append(Rt,Nr),");"):Dr(Rt.shared.vao,".setVAO(",xr.drawVAO.append(Rt,Dr),");"):Dr(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(Dr(Rt.shared.vao,".setVAO(null);"),zt(Rt,Dr,xr,Zr.attributes,Yr),zt(Rt,Nr,xr,Zr.attributes,Ur)),ur(Rt,Dr,xr,Zr.uniforms,Yr,!1),ur(Rt,Nr,xr,Zr.uniforms,Ur,!0),Tt(Rt,Dr,Nr,xr)):(gr=Rt.global.def("{}"),Zr=xr.shader.progVar.append(Rt,Nr),Or=Nr.def(Zr,".id"),Dr=Nr.def(gr,"[",Or,"]"),Nr(Rt.shared.gl,".useProgram(",Zr,".program);","if(!",Dr,"){",Dr,"=",gr,"[",Or,"]=",Rt.link(function(nn){return Qt(zr,Rt,xr,nn,2)}),"(",Zr,");}",Dr,".call(this,a0[",Cr,"],",Cr,");"))}function sn(Rt,gr,xr){var Zr=gr.static[xr];if(Zr&&function(Nr){if("object"==typeof Nr&&!g(Nr)){for(var nn=Object.keys(Nr),rn=0;rn<nn.length;++rn)if(q.isDynamic(Nr[nn[rn]]))return!0;return!1}}(Zr)){var Ur=Rt.global,Yr=Object.keys(Zr),Br=!1,Cr=!1,Or=!1,Dr=Rt.global.def("{}");Yr.forEach(function(Nr){var nn=Zr[Nr];if(q.isDynamic(nn))"function"==typeof nn&&(nn=Zr[Nr]=q.unbox(nn)),Nr=B(nn,null),Br=Br||Nr.thisDep,Or=Or||Nr.propDep,Cr=Cr||Nr.contextDep;else{switch(Ur(Dr,".",Nr,"="),typeof nn){case"number":Ur(nn);break;case"string":Ur('"',nn,'"');break;case"object":Array.isArray(nn)&&Ur("[",nn.join(),"]");break;default:Ur(Rt.link(nn))}Ur(";")}}),gr.dynamic[xr]=new q.DynamicVariable(4,{thisDep:Br,contextDep:Cr,propDep:Or,ref:Dr,append:function(Nr,nn){Yr.forEach(function(rn){var pn=Zr[rn];q.isDynamic(pn)&&(pn=Nr.invoke(nn,pn),nn(Dr,".",rn,"=",pn,";"))})}}),delete gr.static[xr]}}var gn=Ft.Record,zn={add:32774,subtract:32778,"reverse subtract":32779};Be.ext_blend_minmax&&(zn.min=32775,zn.max=32776);var Vr=Be.angle_instanced_arrays,_n=Be.webgl_draw_buffers,Qr=Be.oes_vertex_array_object,Jr={dirty:!0,profile:Le.profile},Nn={},Hn=[],Mn={},Un={};ot("dither",3024),ot("blend.enable",3042),dt("blend.color","blendColor",[0,0,0,0]),dt("blend.equation","blendEquationSeparate",[32774,32774]),dt("blend.func","blendFuncSeparate",[1,0,1,0]),ot("depth.enable",2929,!0),dt("depth.func","depthFunc",513),dt("depth.range","depthRange",[0,1]),dt("depth.mask","depthMask",!0),dt("colorMask","colorMask",[!0,!0,!0,!0]),ot("cull.enable",2884),dt("cull.face","cullFace",1029),dt("frontFace","frontFace",2305),dt("lineWidth","lineWidth",1),ot("polygonOffset.enable",32823),dt("polygonOffset.offset","polygonOffset",[0,0]),ot("sample.alpha",32926),ot("sample.enable",32928),dt("sample.coverage","sampleCoverage",[1,!1]),ot("stencil.enable",2960),dt("stencil.mask","stencilMask",-1),dt("stencil.func","stencilFunc",[519,0,-1]),dt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),dt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),ot("scissor.enable",3089),dt("scissor.box","scissor",[0,0,pe.drawingBufferWidth,pe.drawingBufferHeight]),dt("viewport","viewport",[0,0,pe.drawingBufferWidth,pe.drawingBufferHeight]);var di={gl:pe,context:qt,strings:we,next:Nn,current:Jr,draw:mt,elements:Ye,buffer:Ke,shader:at,attributes:Ft.state,vao:Ft,uniforms:St,framebuffer:ct,extensions:Be,timer:Et,isBufferArgs:J},rr={primTypes:Se,compareFuncs:hr,blendFuncs:ar,blendEquations:zn,stencilOps:Xt,glTypes:_e,orientationType:He};_n&&(rr.backBuffer=[1029],rr.drawBuffer=n(We.maxDrawbuffers,function(Rt){return 0===Rt?[0]:n(Rt,function(gr){return 36064+gr})}));var Sr=0;return{next:Nn,current:Jr,procs:function(){var Rt=Lt(),gr=Rt.proc("poll"),xr=Rt.proc("refresh"),Zr=Rt.block();gr(Zr),xr(Zr);var Ur,Yr=(Or=Rt.shared).gl,Br=Or.next,Cr=Or.current;Zr(Cr,".dirty=false;"),nr(Rt,gr),nr(Rt,xr,null,!0),Vr&&(Ur=Rt.link(Vr)),Be.oes_vertex_array_object&&xr(Rt.link(Be.oes_vertex_array_object),".bindVertexArrayOES(null);");var Or=xr.def(Or.attributes),Dr=xr.def(0),Nr=Rt.cond(Dr,".buffer");Nr.then(Yr,".enableVertexAttribArray(i);",Yr,".bindBuffer(",34962,",",Dr,".buffer.buffer);",Yr,".vertexAttribPointer(i,",Dr,".size,",Dr,".type,",Dr,".normalized,",Dr,".stride,",Dr,".offset);").else(Yr,".disableVertexAttribArray(i);",Yr,".vertexAttrib4f(i,",Dr,".x,",Dr,".y,",Dr,".z,",Dr,".w);",Dr,".buffer=null;");var nn=Rt.link(We.maxAttributes,{stable:!0});return xr("for(var i=0;i<",nn,";++i){",Dr,"=",Or,"[i];",Nr,"}"),Vr&&xr("for(var i=0;i<",nn,";++i){",Ur,".vertexAttribDivisorANGLE(i,",Or,"[i].divisor);","}"),xr(Rt.shared.vao,".currentVAO=null;",Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"),Object.keys(Mn).forEach(function(rn){var pn=Mn[rn],dn=Zr.def(Br,".",rn),Sn=Rt.block();Sn("if(",dn,"){",Yr,".enable(",pn,")}else{",Yr,".disable(",pn,")}",Cr,".",rn,"=",dn,";"),xr(Sn),gr("if(",dn,"!==",Cr,".",rn,"){",Sn,"}")}),Object.keys(Un).forEach(function(rn){var pn,dn,Sn=Un[rn],En=Jr[rn],Ln=Rt.block();Ln(Yr,".",Sn,"("),g(En)?(Sn=En.length,pn=Rt.global.def(Br,".",rn),dn=Rt.global.def(Cr,".",rn),Ln(n(Sn,function(Fn){return pn+"["+Fn+"]"}),");",n(Sn,function(Fn){return dn+"["+Fn+"]="+pn+"["+Fn+"];"}).join("")),gr("if(",n(Sn,function(Fn){return pn+"["+Fn+"]!=="+dn+"["+Fn+"]"}).join("||"),"){",Ln,"}")):(pn=Zr.def(Br,".",rn),dn=Zr.def(Cr,".",rn),Ln(pn,");",Cr,".",rn,"=",pn,";"),gr("if(",pn,"!==",dn,"){",Ln,"}")),xr(Ln)}),Rt.compile()}(),compile:function(Rt,gr,xr,Zr,Ur){var Yr=Lt();Yr.stats=Yr.link(Ur),Object.keys(gr.static).forEach(function(Cr){sn(Yr,gr,Cr)}),cr.forEach(function(Cr){sn(Yr,Rt,Cr)});var Br=Rr(Rt,gr,xr,Zr);return Br.shader.program&&(Br.shader.program.attributes.sort(function(Cr,Or){return Cr.name<Or.name?-1:1}),Br.shader.program.uniforms.sort(function(Cr,Or){return Cr.name<Or.name?-1:1})),function(Cr,Or){var Dr=Cr.proc("draw",1);_r(Cr,Dr),br(Cr,Dr,Or.context),nr(Cr,Dr,Or.framebuffer),lr(Cr,Dr,Or),sr(Cr,Dr,Or.state),Ar(Cr,Dr,Or,!1,!0);var Nr=Or.shader.progVar.append(Cr,Dr);if(Dr(Cr.shared.gl,".useProgram(",Nr,".program);"),Or.shader.program)Er(Cr,Dr,Or,Or.shader.program);else{Dr(Cr.shared.vao,".setVAO(null);");var nn=Cr.global.def("{}"),rn=Dr.def(Nr,".id"),pn=Dr.def(nn,"[",rn,"]");Dr(Cr.cond(pn).then(pn,".call(this,a0);").else(pn,"=",nn,"[",rn,"]=",Cr.link(function(dn){return Qt(Er,Cr,Or,dn,1)}),"(",Nr,");",pn,".call(this,a0);"))}0<Object.keys(Or.state).length&&Dr(Cr.shared.current,".dirty=true;"),Cr.shared.vao&&Dr(Cr.shared.vao,".setVAO(null);")}(Yr,Br),function Kr(Rt,gr){function xr(Cr){var Or=gr.shader[Cr];Or&&(Or=Or.append(Rt,Zr),isNaN(Or)?Zr.set(Ur.shader,"."+Cr,Or):Zr.set(Ur.shader,"."+Cr,Rt.link(Or,{stable:!0})))}var Zr=Rt.proc("scope",3);Rt.batchId="a2";var Ur=Rt.shared,Yr=Ur.current;if(br(Rt,Zr,gr.context),gr.framebuffer&&gr.framebuffer.append(Rt,Zr),G(Object.keys(gr.state)).forEach(function(Cr){var Or=gr.state[Cr],Dr=Or.append(Rt,Zr);g(Dr)?Dr.forEach(function(Nr,nn){isNaN(Nr)?Zr.set(Rt.next[Cr],"["+nn+"]",Nr):Zr.set(Rt.next[Cr],"["+nn+"]",Rt.link(Nr,{stable:!0}))}):re(Or)?Zr.set(Ur.next,"."+Cr,Rt.link(Dr,{stable:!0})):Zr.set(Ur.next,"."+Cr,Dr)}),Ar(Rt,Zr,gr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Cr){var Or=gr.draw[Cr];Or&&(Or=Or.append(Rt,Zr),isNaN(Or)?Zr.set(Ur.draw,"."+Cr,Or):Zr.set(Ur.draw,"."+Cr,Rt.link(Or),{stable:!0}))}),Object.keys(gr.uniforms).forEach(function(Cr){var Or=gr.uniforms[Cr].append(Rt,Zr);Array.isArray(Or)&&(Or="["+Or.map(function(Dr){return isNaN(Dr)?Dr:Rt.link(Dr,{stable:!0})})+"]"),Zr.set(Ur.uniforms,"["+Rt.link(we.id(Cr),{stable:!0})+"]",Or)}),Object.keys(gr.attributes).forEach(function(Cr){var Or=gr.attributes[Cr].append(Rt,Zr),Dr=Rt.scopeAttrib(Cr);Object.keys(new gn).forEach(function(Nr){Zr.set(Dr,"."+Nr,Or[Nr])})}),gr.scopeVAO){var Br=gr.scopeVAO.append(Rt,Zr);isNaN(Br)?Zr.set(Ur.vao,".targetVAO",Br):Zr.set(Ur.vao,".targetVAO",Rt.link(Br,{stable:!0}))}xr("vert"),xr("frag"),0<Object.keys(gr.state).length&&(Zr(Yr,".dirty=true;"),Zr.exit(Yr,".dirty=true;")),Zr("a1(",Rt.shared.context,",a0,",Rt.batchId,");")}(Yr,Br),function(Cr,Or){function Dr(En){return En.contextDep&&nn||En.propDep}var Nr=Cr.proc("batch",2);Cr.batchId="0",_r(Cr,Nr);var nn=!1,rn=!0;Object.keys(Or.context).forEach(function(En){nn=nn||Or.context[En].propDep}),nn||(br(Cr,Nr,Or.context),rn=!1);var pn=!1;if((dn=Or.framebuffer)?(dn.propDep?nn=pn=!0:dn.contextDep&&nn&&(pn=!0),pn||nr(Cr,Nr,dn)):nr(Cr,Nr,null),Or.state.viewport&&Or.state.viewport.propDep&&(nn=!0),lr(Cr,Nr,Or),sr(Cr,Nr,Or.state,function(En){return!Dr(En)}),Or.profile&&Dr(Or.profile)||Ar(Cr,Nr,Or,!1,"a1"),Or.contextDep=nn,Or.needsContext=rn,Or.needsFramebuffer=pn,(rn=Or.shader.progVar).contextDep&&nn||rn.propDep)an(Cr,Nr,Or,null);else if(rn=rn.append(Cr,Nr),Nr(Cr.shared.gl,".useProgram(",rn,".program);"),Or.shader.program)an(Cr,Nr,Or,Or.shader.program);else{Nr(Cr.shared.vao,".setVAO(null);");var dn=Cr.global.def("{}"),Sn=(pn=Nr.def(rn,".id"),Nr.def(dn,"[",pn,"]"));Nr(Cr.cond(Sn).then(Sn,".call(this,a0,a1);").else(Sn,"=",dn,"[",pn,"]=",Cr.link(function(En){return Qt(an,Cr,Or,En,2)}),"(",rn,");",Sn,".call(this,a0,a1);"))}0<Object.keys(Or.state).length&&Nr(Cr.shared.current,".dirty=true;"),Cr.shared.vao&&Nr(Cr.shared.vao,".setVAO(null);")}(Yr,Br),U(Yr.compile(),{destroy:function(){Br.shader.program.destroy()}})}}}function ee(pe,we){for(var Be=0;Be<pe.length;++Be)if(pe[Be]===we)return Be;return-1}var U=function(pe,we){for(var Be=Object.keys(we),We=0;We<Be.length;++We)pe[Be[We]]=we[Be[We]];return pe},$=0,q={DynamicVariable:m,define:function(pe,we){return new m(pe,v(we+""))},isDynamic:function(pe){return"function"==typeof pe&&!pe._reglType||pe instanceof m},unbox:function pe(we,Be){return"function"==typeof we?new m(0,we):"number"==typeof we||"boolean"==typeof we?new m(5,we):Array.isArray(we)?new m(6,we.map(function(We,Ke){return pe(We,Be+"["+Ke+"]")})):we instanceof m?we:void 0},accessor:v},te={next:"function"==typeof requestAnimationFrame?function(pe){return requestAnimationFrame(pe)}:function(pe){return setTimeout(pe,16)},cancel:"function"==typeof cancelAnimationFrame?function(pe){return cancelAnimationFrame(pe)}:clearTimeout},ne=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},se=o();se.zero=o();var ue=function(pe){return pe instanceof Uint8Array||pe instanceof Uint16Array||pe instanceof Uint32Array||pe instanceof Int8Array||pe instanceof Int16Array||pe instanceof Int32Array||pe instanceof Float32Array||pe instanceof Float64Array||pe instanceof Uint8ClampedArray},le=function(pe){return Object.keys(pe).map(function(we){return pe[we]})},de={shape:function(pe){for(var we=[];pe.length;pe=pe[0])we.push(pe.length);return we},flatten:function(pe,we,Be,We){var Ke=1;if(we.length)for(var Ye=0;Ye<we.length;++Ye)Ke*=we[Ye];else Ke=0;switch(Be=We||se.allocType(Be,Ke),we.length){case 0:break;case 1:for(We=we[0],we=0;we<We;++we)Be[we]=pe[we];break;case 2:for(We=we[0],we=we[1],Ye=Ke=0;Ye<We;++Ye)for(var ft=pe[Ye],ct=0;ct<we;++ct)Be[Ke++]=ft[ct];break;case 3:d(pe,we[0],we[1],we[2],Be,0);break;default:!function St(Ft,at,mt,qt,Et){for(var Dt=1,Le=mt+1;Le<at.length;++Le)Dt*=at[Le];var Xe=at[mt];if(at.length-mt==4){var ot=at[mt+1],dt=at[mt+2];for(at=at[mt+3],Le=0;Le<Xe;++Le)d(Ft[Le],ot,dt,at,qt,Et),Et+=Dt}else for(Le=0;Le<Xe;++Le)St(Ft[Le],at,mt+1,qt,Et),Et+=Dt}(pe,we,0,Be,0)}return Be}},be={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},_e={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},xe={dynamic:35048,stream:35040,static:35044},Ee=de.flatten,he=de.shape,me=[];me[5120]=1,me[5122]=2,me[5124]=4,me[5121]=1,me[5123]=2,me[5125]=4,me[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Me=new Float32Array(1),Ie=new Uint32Array(Me.buffer),Fe=[9984,9986,9985,9987],Ne=[0,6409,6410,6407,6408],De={};De[6409]=De[6406]=De[6402]=1,De[34041]=De[6410]=2,De[6407]=De[35904]=3,De[6408]=De[35906]=4;var $e=u("HTMLCanvasElement"),Re=u("OffscreenCanvas"),ze=u("CanvasRenderingContext2D"),Ue=u("ImageBitmap"),je=u("HTMLImageElement"),rt=u("HTMLVideoElement"),ut=Object.keys(be).concat([$e,Re,ze,Ue,je,rt]),gt=[];gt[5121]=1,gt[5126]=4,gt[36193]=2,gt[5123]=2,gt[5125]=4;var At=[];At[32854]=2,At[32855]=2,At[36194]=2,At[34041]=4,At[33776]=.5,At[33777]=.5,At[33778]=1,At[33779]=1,At[35986]=.5,At[35987]=1,At[34798]=1,At[35840]=.5,At[35841]=.25,At[35842]=.5,At[35843]=.25,At[36196]=.5;var _t=[];_t[32854]=2,_t[32855]=2,_t[36194]=2,_t[33189]=2,_t[36168]=1,_t[34041]=4,_t[35907]=4,_t[34836]=16,_t[34842]=8,_t[34843]=6;var et=[];et[6408]=4,et[6407]=3;var wt=[];wt[5121]=1,wt[5126]=4,wt[36193]=2;var Gt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Kt=["x","y","z","w"],cr="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),ar={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},hr={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Xt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},He={cw:2304,ccw:2305},Je=new Z(!1,!1,!1,function(){});return function(pe){function we(){if(0===zr.length)Ut&&Ut.update(),gn=null;else{gn=te.next(we),at();for(var Vr=zr.length-1;0<=Vr;--Vr){var _n=zr[Vr];_n&&_n(Rr,null,0)}Et.flush(),Ut&&Ut.update()}}function Be(){!gn&&0<zr.length&&(gn=te.next(we))}function We(){gn&&(te.cancel(we),gn=null)}function Ke(Vr){Vr.preventDefault(),We(),an.forEach(function(_n){_n()})}function Ye(Vr){Et.getError(),Le.restore(),_r.restore(),nr.restore(),Ar.restore(),zt.restore(),ur.restore(),sr.restore(),Ut&&Ut.restore(),Tt.procs.refresh(),Be(),Kr.forEach(function(_n){_n()})}function ft(Vr){function _n(Rt,gr){var xr={},Zr={};return Object.keys(Rt).forEach(function(Ur){var Yr=Rt[Ur];if(q.isDynamic(Yr))Zr[Ur]=q.unbox(Yr,Ur);else{if(gr&&Array.isArray(Yr))for(var Br=0;Br<Yr.length;++Br)if(q.isDynamic(Yr[Br]))return void(Zr[Ur]=q.unbox(Yr,Ur));xr[Ur]=Yr}}),{dynamic:Zr,static:xr}}var Qr=_n(Vr.context||{},!0),Jr=_n(Vr.uniforms||{},!0),Nn=_n(Vr.attributes||{},!1);Vr=_n(function(Rt){function gr(Zr){if(Zr in xr){var Ur=xr[Zr];delete xr[Zr],Object.keys(Ur).forEach(function(Yr){xr[Zr+"."+Yr]=Ur[Yr]})}}var xr=U({},Rt);return delete xr.uniforms,delete xr.attributes,delete xr.context,delete xr.vao,"stencil"in xr&&xr.stencil.op&&(xr.stencil.opBack=xr.stencil.opFront=xr.stencil.op,delete xr.stencil.op),gr("blend"),gr("depth"),gr("cull"),gr("stencil"),gr("polygonOffset"),gr("scissor"),gr("sample"),"vao"in Rt&&(xr.vao=Rt.vao),xr}(Vr),!1);var Hn={gpuTime:0,cpuTime:0,count:0},Mn=Tt.compile(Vr,Nn,Jr,Qr,Hn),Un=Mn.draw,di=Mn.batch,rr=Mn.scope,Sr=[];return U(function(Rt,gr){var xr;if("function"==typeof Rt)return rr.call(this,null,Rt,0);if("function"==typeof gr)if("number"==typeof Rt)for(xr=0;xr<Rt;++xr)rr.call(this,null,gr,xr);else{if(!Array.isArray(Rt))return rr.call(this,Rt,gr,0);for(xr=0;xr<Rt.length;++xr)rr.call(this,Rt[xr],gr,xr)}else if("number"==typeof Rt){if(0<Rt)return di.call(this,function(Zr){for(;Sr.length<Zr;)Sr.push(null);return Sr}(0|Rt),0|Rt)}else{if(!Array.isArray(Rt))return Un.call(this,Rt);if(Rt.length)return di.call(this,Rt,Rt.length)}},{stats:Hn,destroy:function(){Mn.destroy()}})}function ct(Vr,_n){var Qr=0;Tt.procs.poll();var Jr=_n.color;Jr&&(Et.clearColor(+Jr[0]||0,+Jr[1]||0,+Jr[2]||0,+Jr[3]||0),Qr|=16384),"depth"in _n&&(Et.clearDepth(+_n.depth),Qr|=256),"stencil"in _n&&(Et.clearStencil(0|_n.stencil),Qr|=1024),Et.clear(Qr)}function St(Vr){return zr.push(Vr),Be(),{cancel:function(){var _n=ee(zr,Vr);zr[_n]=function Qr(){var Jr=ee(zr,Qr);zr[Jr]=zr[zr.length-1],--zr.length,0>=zr.length&&We()}}}}function Ft(){var Vr=Qt.viewport,_n=Qt.scissor_box;Vr[0]=Vr[1]=_n[0]=_n[1]=0,Rr.viewportWidth=Rr.framebufferWidth=Rr.drawingBufferWidth=Vr[2]=_n[2]=Et.drawingBufferWidth,Rr.viewportHeight=Rr.framebufferHeight=Rr.drawingBufferHeight=Vr[3]=_n[3]=Et.drawingBufferHeight}function at(){Rr.tick+=1,Rr.time=qt(),Ft(),Tt.procs.poll()}function mt(){Ar.refresh(),Ft(),Tt.procs.refresh(),Ut&&Ut.update()}function qt(){return(ne()-$t)/1e3}if(!(pe=function e(pe){var we,Be,We,Ke,Ye=pe||{};pe={};var ft=[],ct=[],St=typeof window>"u"?1:window.devicePixelRatio,Ft=!1,at={},mt=function(Et){},qt=function(){};if("string"==typeof Ye?we=document.querySelector(Ye):"object"==typeof Ye&&("string"==typeof Ye.nodeName&&"function"==typeof Ye.appendChild&&"function"==typeof Ye.getBoundingClientRect?we=Ye:"function"==typeof Ye.drawArrays||"function"==typeof Ye.drawElements?We=(Ke=Ye).canvas:("gl"in Ye?Ke=Ye.gl:"canvas"in Ye?We=h(Ye.canvas):"container"in Ye&&(Be=h(Ye.container)),"attributes"in Ye&&(pe=Ye.attributes),"extensions"in Ye&&(ft=b(Ye.extensions)),"optionalExtensions"in Ye&&(ct=b(Ye.optionalExtensions)),"onDone"in Ye&&(mt=Ye.onDone),"profile"in Ye&&(Ft=!!Ye.profile),"pixelRatio"in Ye&&(St=+Ye.pixelRatio),"cachedCode"in Ye&&(at=Ye.cachedCode))),we&&("canvas"===we.nodeName.toLowerCase()?We=we:Be=we),!Ke){if(!We){if(!(we=function(Et,Dt,Le){function Xe(){var Lt=window.innerWidth,Ut=window.innerHeight;Et!==document.body&&(Lt=(Ut=dt.getBoundingClientRect()).right-Ut.left,Ut=Ut.bottom-Ut.top),dt.width=Le*Lt,dt.height=Le*Ut}var ot,dt=document.createElement("canvas");return U(dt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Et.appendChild(dt),Et===document.body&&(dt.style.position="absolute",U(Et.style,{margin:0,padding:0})),Et!==document.body&&"function"==typeof ResizeObserver?(ot=new ResizeObserver(function(){setTimeout(Xe)})).observe(Et):window.addEventListener("resize",Xe,!1),Xe(),{canvas:dt,onDestroy:function(){ot?ot.disconnect():window.removeEventListener("resize",Xe),Et.removeChild(dt)}}}(Be||document.body,0,St)))return null;We=we.canvas,qt=we.onDestroy}void 0===pe.premultipliedAlpha&&(pe.premultipliedAlpha=!0),Ke=function(Et,Dt){function Le(Xe){try{return Et.getContext(Xe,Dt)}catch{return null}}return Le("webgl")||Le("experimental-webgl")||Le("webgl-experimental")}(We,pe)}return Ke?{gl:Ke,canvas:We,container:Be,extensions:ft,optionalExtensions:ct,pixelRatio:St,profile:Ft,cachedCode:at,onDone:mt,onDestroy:qt}:(qt(),mt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(pe)))return null;var Et=pe.gl,Dt=Et.getContextAttributes();Et.isContextLost();var Le=function(Vr,_n){function Qr(Mn){var Un;Mn=Mn.toLowerCase();try{Un=Jr[Mn]=Vr.getExtension(Mn)}catch{}return!!Un}for(var Jr={},Nn=0;Nn<_n.extensions.length;++Nn){var Hn=_n.extensions[Nn];if(!Qr(Hn))return _n.onDestroy(),_n.onDone('"'+Hn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return _n.optionalExtensions.forEach(Qr),{extensions:Jr,restore:function(){Object.keys(Jr).forEach(function(Mn){if(Jr[Mn]&&!Qr(Mn))throw Error("(regl): error restoring extension "+Mn)})}}}(Et,pe);if(!Le)return null;var Vr,_n,Xe=(Vr={"":0},_n=[""],{id:function(Qr){var Jr=Vr[Qr];return Jr||(Jr=Vr[Qr]=_n.length,_n.push(Qr),Jr)},str:function(Qr){return _n[Qr]}}),ot={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},dt=pe.cachedCode||{},Lt=Le.extensions,Ut=function(Vr,_n){function Qr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Jr(Sr,Rt,gr){var xr=Mn.pop()||new Qr;xr.startQueryIndex=Sr,xr.endQueryIndex=Rt,xr.sum=0,xr.stats=gr,Un.push(xr)}if(!_n.ext_disjoint_timer_query)return null;var Nn=[],Hn=[],Mn=[],Un=[],di=[],rr=[];return{beginQuery:function(Sr){var Rt=Nn.pop()||_n.ext_disjoint_timer_query.createQueryEXT();_n.ext_disjoint_timer_query.beginQueryEXT(35007,Rt),Hn.push(Rt),Jr(Hn.length-1,Hn.length,Sr)},endQuery:function(){_n.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Jr,update:function(){var Sr,Rt;if(0!==(Sr=Hn.length)){rr.length=Math.max(rr.length,Sr+1),di.length=Math.max(di.length,Sr+1),di[0]=0;var gr=rr[0]=0;for(Rt=Sr=0;Rt<Hn.length;++Rt){var xr=Hn[Rt];_n.ext_disjoint_timer_query.getQueryObjectEXT(xr,34919)?(gr+=_n.ext_disjoint_timer_query.getQueryObjectEXT(xr,34918),Nn.push(xr)):Hn[Sr++]=xr,di[Rt+1]=gr,rr[Rt+1]=Sr}for(Hn.length=Sr,Rt=Sr=0;Rt<Un.length;++Rt){var Zr=(gr=Un[Rt]).startQueryIndex;gr.sum+=di[xr=gr.endQueryIndex]-di[Zr],(xr=rr[xr])===(Zr=rr[Zr])?(gr.stats.gpuTime+=gr.sum/1e6,Mn.push(gr)):(gr.startQueryIndex=Zr,gr.endQueryIndex=xr,Un[Sr++]=gr)}Un.length=Sr}},getNumPendingQueries:function(){return Hn.length},clear:function(){Nn.push.apply(Nn,Hn);for(var Sr=0;Sr<Nn.length;Sr++)_n.ext_disjoint_timer_query.deleteQueryEXT(Nn[Sr]);Hn.length=0,Nn.length=0},restore:function(){Hn.length=0,Nn.length=0}}}(0,Lt),$t=ne(),Wt=Et.drawingBufferWidth,wr=Et.drawingBufferHeight,Rr={tick:0,time:0,viewportWidth:Wt,viewportHeight:wr,framebufferWidth:Wt,framebufferHeight:wr,drawingBufferWidth:Wt,drawingBufferHeight:wr,pixelRatio:pe.pixelRatio},br=(Wt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(pe,we){var Be=1;we.ext_texture_filter_anisotropic&&(Be=pe.getParameter(34047));var We=1,Ke=1;we.webgl_draw_buffers&&(We=pe.getParameter(34852),Ke=pe.getParameter(36063));var Ye=!!we.oes_texture_float;if(Ye){Ye=pe.createTexture(),pe.bindTexture(3553,Ye),pe.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ft=pe.createFramebuffer();if(pe.bindFramebuffer(36160,ft),pe.framebufferTexture2D(36160,36064,3553,Ye,0),pe.bindTexture(3553,null),36053!==pe.checkFramebufferStatus(36160))Ye=!1;else{pe.viewport(0,0,1,1),pe.clearColor(1,0,0,1),pe.clear(16384);var ct=se.allocType(5126,4);pe.readPixels(0,0,1,1,6408,5126,ct),pe.getError()?Ye=!1:(pe.deleteFramebuffer(ft),pe.deleteTexture(Ye),Ye=1===ct[0]),se.freeType(ct)}}return ct=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ct=pe.createTexture(),ft=se.allocType(5121,36),pe.activeTexture(33984),pe.bindTexture(34067,ct),pe.texImage2D(34069,0,6408,3,3,0,6408,5121,ft),se.freeType(ft),pe.bindTexture(34067,null),pe.deleteTexture(ct),ct=!pe.getError()),{colorBits:[pe.getParameter(3410),pe.getParameter(3411),pe.getParameter(3412),pe.getParameter(3413)],depthBits:pe.getParameter(3414),stencilBits:pe.getParameter(3415),subpixelBits:pe.getParameter(3408),extensions:Object.keys(we).filter(function(St){return!!we[St]}),maxAnisotropic:Be,maxDrawbuffers:We,maxColorAttachments:Ke,pointSizeDims:pe.getParameter(33901),lineWidthDims:pe.getParameter(33902),maxViewportDims:pe.getParameter(3386),maxCombinedTextureUnits:pe.getParameter(35661),maxCubeMapSize:pe.getParameter(34076),maxRenderbufferSize:pe.getParameter(34024),maxTextureUnits:pe.getParameter(34930),maxTextureSize:pe.getParameter(3379),maxAttributes:pe.getParameter(34921),maxVertexUniforms:pe.getParameter(36347),maxVertexTextureUnits:pe.getParameter(35660),maxVaryingVectors:pe.getParameter(36348),maxFragmentUniforms:pe.getParameter(36349),glsl:pe.getParameter(35724),renderer:pe.getParameter(7937),vendor:pe.getParameter(7936),version:pe.getParameter(7938),readFloat:Ye,npotTextureCube:ct}}(Et,Lt)),nr=function c(pe,we,Be,We){function Ke(mt){this.id=St++,this.buffer=pe.createBuffer(),this.type=mt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Be.profile&&(this.stats={size:0})}function Ye(mt,qt,Et){mt.byteLength=qt.byteLength,pe.bufferData(mt.type,qt,Et)}function ft(mt,qt,Et,Dt,Le,Xe){if(mt.usage=Et,Array.isArray(qt)){if(mt.dtype=Dt||5126,0<qt.length)if(Array.isArray(qt[0])){Le=he(qt);for(var ot=Dt=1;ot<Le.length;++ot)Dt*=Le[ot];mt.dimension=Dt,Ye(mt,qt=Ee(qt,Le,mt.dtype),Et),Xe?mt.persistentData=qt:se.freeType(qt)}else"number"==typeof qt[0]?(mt.dimension=Le,i(Le=se.allocType(mt.dtype,qt.length),qt),Ye(mt,Le,Et),Xe?mt.persistentData=Le:se.freeType(Le)):ue(qt[0])&&(mt.dimension=qt[0].length,mt.dtype=Dt||a(qt[0])||5126,Ye(mt,qt=Ee(qt,[qt.length,qt[0].length],mt.dtype),Et),Xe?mt.persistentData=qt:se.freeType(qt))}else if(ue(qt))mt.dtype=Dt||a(qt),mt.dimension=Le,Ye(mt,qt,Et),Xe&&(mt.persistentData=new Uint8Array(new Uint8Array(qt.buffer)));else if(t(qt)){var dt=qt.stride,Lt=(ot=qt.offset,0),Ut=0,$t=0,Wt=0;1===(Le=qt.shape).length?(Lt=Le[0],Ut=1,$t=dt[0],Wt=0):2===Le.length&&(Lt=Le[0],Ut=Le[1],$t=dt[0],Wt=dt[1]),mt.dtype=Dt||a(qt.data)||5126,mt.dimension=Ut,s(Le=se.allocType(mt.dtype,Lt*Ut),qt.data,Lt,Ut,$t,Wt,ot),Ye(mt,Le,Et),Xe?mt.persistentData=Le:se.freeType(Le)}else qt instanceof ArrayBuffer&&(mt.dtype=5121,mt.dimension=Le,Ye(mt,qt,Et),Xe&&(mt.persistentData=new Uint8Array(new Uint8Array(qt))))}function ct(mt){we.bufferCount--,We(mt),pe.deleteBuffer(mt.buffer),mt.buffer=null,delete Ft[mt.id]}var St=0,Ft={};Ke.prototype.bind=function(){pe.bindBuffer(this.type,this.buffer)},Ke.prototype.destroy=function(){ct(this)};var at=[];return Be.profile&&(we.getTotalBufferSize=function(){var mt=0;return Object.keys(Ft).forEach(function(qt){mt+=Ft[qt].stats.size}),mt}),{create:function(mt,qt,Et,Dt){function Le(ot){var dt=35044,Lt=null,Ut=0,$t=0,Wt=1;return Array.isArray(ot)||ue(ot)||t(ot)||ot instanceof ArrayBuffer?Lt=ot:"number"==typeof ot?Ut=0|ot:ot&&("data"in ot&&(Lt=ot.data),"usage"in ot&&(dt=xe[ot.usage]),"type"in ot&&($t=_e[ot.type]),"dimension"in ot&&(Wt=0|ot.dimension),"length"in ot&&(Ut=0|ot.length)),Xe.bind(),Lt?ft(Xe,Lt,dt,$t,Wt,Dt):(Ut&&pe.bufferData(Xe.type,Ut,dt),Xe.dtype=$t||5121,Xe.usage=dt,Xe.dimension=Wt,Xe.byteLength=Ut),Be.profile&&(Xe.stats.size=Xe.byteLength*me[Xe.dtype]),Le}we.bufferCount++;var Xe=new Ke(qt);return Ft[Xe.id]=Xe,Et||Le(mt),Le._reglType="buffer",Le._buffer=Xe,Le.subdata=function(ot,dt){var Lt,Ut=0|(dt||0);if(Xe.bind(),ue(ot)||ot instanceof ArrayBuffer)pe.bufferSubData(Xe.type,Ut,ot);else if(Array.isArray(ot)){if(0<ot.length)if("number"==typeof ot[0]){var $t=se.allocType(Xe.dtype,ot.length);i($t,ot),pe.bufferSubData(Xe.type,Ut,$t),se.freeType($t)}else(Array.isArray(ot[0])||ue(ot[0]))&&(Lt=he(ot),$t=Ee(ot,Lt,Xe.dtype),pe.bufferSubData(Xe.type,Ut,$t),se.freeType($t))}else if(t(ot)){var Wt=ot.stride,wr=$t=0,Rr=0,br=0;1===(Lt=ot.shape).length?($t=Lt[0],wr=1,Rr=Wt[0],br=0):2===Lt.length&&($t=Lt[0],wr=Lt[1],Rr=Wt[0],br=Wt[1]),Lt=Array.isArray(ot.data)?Xe.dtype:a(ot.data),s(Lt=se.allocType(Lt,$t*wr),ot.data,$t,wr,Rr,br,ot.offset),pe.bufferSubData(Xe.type,Ut,Lt),se.freeType(Lt)}return Le},Be.profile&&(Le.stats=Xe.stats),Le.destroy=function(){ct(Xe)},Le},createStream:function(mt,qt){var Et=at.pop();return Et||(Et=new Ke(mt)),Et.bind(),ft(Et,qt,35040,0,1,!1),Et},destroyStream:function(mt){at.push(mt)},clear:function(){le(Ft).forEach(ct),at.forEach(ct)},getBuffer:function(mt){return mt&&mt._buffer instanceof Ke?mt._buffer:null},restore:function(){le(Ft).forEach(function(mt){mt.buffer=pe.createBuffer(),pe.bindBuffer(mt.type,mt.buffer),pe.bufferData(mt.type,mt.persistentData||mt.byteLength,mt.usage)})},_initBuffer:ft}}(Et,ot,pe,function(Vr){return sr.destroyBuffer(Vr)}),lr=function l(pe,we,Be,We){function Ke(mt){this.id=St++,ct[this.id]=this,this.buffer=mt,this.primType=4,this.type=this.vertCount=0}function Ye(mt,qt,Et,Dt,Le,Xe,ot){var dt;if(mt.buffer.bind(),qt?((dt=ot)||ue(qt)&&(!t(qt)||ue(qt.data))||(dt=we.oes_element_index_uint?5125:5123),Be._initBuffer(mt.buffer,qt,Et,dt,3)):(pe.bufferData(34963,Xe,Et),mt.buffer.dtype=dt||5121,mt.buffer.usage=Et,mt.buffer.dimension=3,mt.buffer.byteLength=Xe),dt=ot,!ot){switch(mt.buffer.dtype){case 5121:case 5120:dt=5121;break;case 5123:case 5122:dt=5123;break;case 5125:case 5124:dt=5125}mt.buffer.dtype=dt}mt.type=dt,0>(qt=Le)&&(qt=mt.buffer.byteLength,5123===dt?qt>>=1:5125===dt&&(qt>>=2)),mt.vertCount=qt,qt=Dt,0>Dt&&(qt=4,1===(Dt=mt.buffer.dimension)&&(qt=0),2===Dt&&(qt=1),3===Dt&&(qt=4)),mt.primType=qt}function ft(mt){We.elementsCount--,delete ct[mt.id],mt.buffer.destroy(),mt.buffer=null}var ct={},St=0,Ft={uint8:5121,uint16:5123};we.oes_element_index_uint&&(Ft.uint32=5125),Ke.prototype.bind=function(){this.buffer.bind()};var at=[];return{create:function(mt,qt){function Et(Xe){if(Xe)if("number"==typeof Xe)Dt(Xe),Le.primType=4,Le.vertCount=0|Xe,Le.type=5121;else{var ot=null,dt=35044,Lt=-1,Ut=-1,$t=0,Wt=0;Array.isArray(Xe)||ue(Xe)||t(Xe)?ot=Xe:("data"in Xe&&(ot=Xe.data),"usage"in Xe&&(dt=xe[Xe.usage]),"primitive"in Xe&&(Lt=Se[Xe.primitive]),"count"in Xe&&(Ut=0|Xe.count),"type"in Xe&&(Wt=Ft[Xe.type]),"length"in Xe?$t=0|Xe.length:($t=Ut,5123===Wt||5122===Wt?$t*=2:5125!==Wt&&5124!==Wt||($t*=4))),Ye(Le,ot,dt,Lt,Ut,$t,Wt)}else Dt(),Le.primType=4,Le.vertCount=0,Le.type=5121;return Et}var Dt=Be.create(null,34963,!0),Le=new Ke(Dt._buffer);return We.elementsCount++,Et(mt),Et._reglType="elements",Et._elements=Le,Et.subdata=function(Xe,ot){return Dt.subdata(Xe,ot),Et},Et.destroy=function(){ft(Le)},Et},createStream:function(mt){var qt=at.pop();return qt||(qt=new Ke(Be.create(null,34963,!0,!1)._buffer)),Ye(qt,mt,35040,-1,-1,0,0),qt},destroyStream:function(mt){at.push(mt)},getElements:function(mt){return"function"==typeof mt&&mt._elements instanceof Ke?mt._elements:null},clear:function(){le(ct).forEach(ft)}}}(Et,Lt,nr,ot),sr=function P(pe,we,Be,We,Ke,Ye,ft){function ct(){this.id=++at,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Et=we.oes_vertex_array_object;this.vao=Et?Et.createVertexArrayOES():null,mt[this.id]=this,this.buffers=[]}var St=Be.maxAttributes,Ft=Array(St);for(Be=0;Be<St;++Be)Ft[Be]=new O;var at=0,mt={},qt={Record:O,scope:{},state:Ft,currentVAO:null,targetVAO:null,restore:we.oes_vertex_array_object?function(){we.oes_vertex_array_object&&le(mt).forEach(function(Et){Et.refresh()})}:function(){},createVAO:function(Et){function Dt(Xe){var ot;Array.isArray(Xe)?(ot=Xe,Le.elements&&Le.ownsElements&&Le.elements.destroy(),Le.elements=null,Le.ownsElements=!1,Le.offset=0,Le.count=0,Le.instances=-1,Le.primitive=4):(Xe.elements?(ot=Xe.elements,Le.ownsElements?("function"==typeof ot&&"elements"===ot._reglType?Le.elements.destroy():Le.elements(ot),Le.ownsElements=!1):Ye.getElements(Xe.elements)?(Le.elements=Xe.elements,Le.ownsElements=!1):(Le.elements=Ye.create(Xe.elements),Le.ownsElements=!0)):(Le.elements=null,Le.ownsElements=!1),ot=Xe.attributes,Le.offset=0,Le.count=-1,Le.instances=-1,Le.primitive=4,Le.elements&&(Le.count=Le.elements._elements.vertCount,Le.primitive=Le.elements._elements.primType),"offset"in Xe&&(Le.offset=0|Xe.offset),"count"in Xe&&(Le.count=0|Xe.count),"instances"in Xe&&(Le.instances=0|Xe.instances),"primitive"in Xe&&(Le.primitive=Se[Xe.primitive])),Xe={};var dt=Le.attributes;dt.length=ot.length;for(var Lt=0;Lt<ot.length;++Lt){var Ut,$t=ot[Lt],Wt=dt[Lt]=new O,wr=$t.data||$t;Array.isArray(wr)||ue(wr)||t(wr)?(Le.buffers[Lt]&&(Ut=Le.buffers[Lt],ue(wr)&&Ut._buffer.byteLength>=wr.byteLength?Ut.subdata(wr):(Ut.destroy(),Le.buffers[Lt]=null)),Le.buffers[Lt]||(Ut=Le.buffers[Lt]=Ke.create($t,34962,!1,!0)),Wt.buffer=Ke.getBuffer(Ut),Wt.size=0|Wt.buffer.dimension,Wt.normalized=!1,Wt.type=Wt.buffer.dtype,Wt.offset=0,Wt.stride=0,Wt.divisor=0,Wt.state=1,Xe[Lt]=1):Ke.getBuffer($t)?(Wt.buffer=Ke.getBuffer($t),Wt.size=0|Wt.buffer.dimension,Wt.normalized=!1,Wt.type=Wt.buffer.dtype,Wt.offset=0,Wt.stride=0,Wt.divisor=0,Wt.state=1):Ke.getBuffer($t.buffer)?(Wt.buffer=Ke.getBuffer($t.buffer),Wt.size=0|(+$t.size||Wt.buffer.dimension),Wt.normalized=!!$t.normalized||!1,Wt.type="type"in $t?_e[$t.type]:Wt.buffer.dtype,Wt.offset=0|($t.offset||0),Wt.stride=0|($t.stride||0),Wt.divisor=0|($t.divisor||0),Wt.state=1):"x"in $t&&(Wt.x=+$t.x||0,Wt.y=+$t.y||0,Wt.z=+$t.z||0,Wt.w=+$t.w||0,Wt.state=2)}for(Ut=0;Ut<Le.buffers.length;++Ut)!Xe[Ut]&&Le.buffers[Ut]&&(Le.buffers[Ut].destroy(),Le.buffers[Ut]=null);return Le.refresh(),Dt}var Le=new ct;return We.vaoCount+=1,Dt.destroy=function(){for(var Xe=0;Xe<Le.buffers.length;++Xe)Le.buffers[Xe]&&Le.buffers[Xe].destroy();Le.buffers.length=0,Le.ownsElements&&(Le.elements.destroy(),Le.elements=null,Le.ownsElements=!1),Le.destroy()},Dt._vao=Le,Dt._reglType="vao",Dt(Et)},getVAO:function(Et){return"function"==typeof Et&&Et._vao?Et._vao:null},destroyBuffer:function(Et){for(var Dt=0;Dt<Ft.length;++Dt){var Le=Ft[Dt];Le.buffer===Et&&(pe.disableVertexAttribArray(Dt),Le.buffer=null)}},setVAO:we.oes_vertex_array_object?function(Et){Et!==qt.currentVAO&&(we.oes_vertex_array_object.bindVertexArrayOES(Et?Et.vao:null),qt.currentVAO=Et)}:function(Et){if(Et!==qt.currentVAO){if(Et)Et.bindAttrs();else{for(var Dt=we.angle_instanced_arrays,Le=0;Le<Ft.length;++Le){var Xe=Ft[Le];Xe.buffer?(pe.enableVertexAttribArray(Le),Xe.buffer.bind(),pe.vertexAttribPointer(Le,Xe.size,Xe.type,Xe.normalized,Xe.stride,Xe.offfset),Dt&&Xe.divisor&&Dt.vertexAttribDivisorANGLE(Le,Xe.divisor)):(pe.disableVertexAttribArray(Le),pe.vertexAttrib4f(Le,Xe.x,Xe.y,Xe.z,Xe.w))}pe.bindBuffer(34963,ft.elements?ft.elements.buffer.buffer:null)}qt.currentVAO=Et}},clear:we.oes_vertex_array_object?function(){le(mt).forEach(function(Et){Et.destroy()})}:function(){}};return ct.prototype.bindAttrs=function(){for(var Et=we.angle_instanced_arrays,Dt=this.attributes,Le=0;Le<Dt.length;++Le){var Xe=Dt[Le];Xe.buffer?(pe.enableVertexAttribArray(Le),pe.bindBuffer(34962,Xe.buffer.buffer),pe.vertexAttribPointer(Le,Xe.size,Xe.type,Xe.normalized,Xe.stride,Xe.offset),Et&&Xe.divisor&&Et.vertexAttribDivisorANGLE(Le,Xe.divisor)):(pe.disableVertexAttribArray(Le),pe.vertexAttrib4f(Le,Xe.x,Xe.y,Xe.z,Xe.w))}for(Et=Dt.length;Et<St;++Et)pe.disableVertexAttribArray(Et);(Et=Ye.getElements(this.elements))?pe.bindBuffer(34963,Et.buffer.buffer):pe.bindBuffer(34963,null)},ct.prototype.refresh=function(){var Et=we.oes_vertex_array_object;Et&&(Et.bindVertexArrayOES(this.vao),this.bindAttrs(),qt.currentVAO=null,Et.bindVertexArrayOES(null))},ct.prototype.destroy=function(){if(this.vao){var Et=we.oes_vertex_array_object;this===qt.currentVAO&&(qt.currentVAO=null,Et.bindVertexArrayOES(null)),Et.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),mt[this.id]&&(delete mt[this.id],--We.vaoCount)},qt}(Et,Lt,br,ot,nr,lr,Wt),_r=function S(pe,we,Be,We){function Ke(Dt,Le,Xe,ot){this.name=Dt,this.id=Le,this.location=Xe,this.info=ot}function Ye(Dt,Le){for(var Xe=0;Xe<Dt.length;++Xe)if(Dt[Xe].id===Le.id)return void(Dt[Xe].location=Le.location);Dt.push(Le)}function ft(Dt,Le,Xe){if(!(dt=(Xe=35632===Dt?Ft:at)[Le])){var ot=we.str(Le),dt=pe.createShader(Dt);pe.shaderSource(dt,ot),pe.compileShader(dt),Xe[Le]=dt}return dt}function ct(Dt,Le){this.id=Et++,this.fragId=Dt,this.vertId=Le,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,We.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function St(Dt,Le,Xe){var ot;ot=ft(35632,Dt.fragId);var dt=ft(35633,Dt.vertId);if(Le=Dt.program=pe.createProgram(),pe.attachShader(Le,ot),pe.attachShader(Le,dt),Xe)for(ot=0;ot<Xe.length;++ot)pe.bindAttribLocation(Le,(dt=Xe[ot])[0],dt[1]);pe.linkProgram(Le),dt=pe.getProgramParameter(Le,35718),We.profile&&(Dt.stats.uniformsCount=dt);var Lt=Dt.uniforms;for(ot=0;ot<dt;++ot)if(Xe=pe.getActiveUniform(Le,ot))if(1<Xe.size)for(var Ut=0;Ut<Xe.size;++Ut){var $t=Xe.name.replace("[0]","["+Ut+"]");Ye(Lt,new Ke($t,we.id($t),pe.getUniformLocation(Le,$t),Xe))}else Ye(Lt,new Ke(Xe.name,we.id(Xe.name),pe.getUniformLocation(Le,Xe.name),Xe));for(dt=pe.getProgramParameter(Le,35721),We.profile&&(Dt.stats.attributesCount=dt),Dt=Dt.attributes,ot=0;ot<dt;++ot)(Xe=pe.getActiveAttrib(Le,ot))&&Ye(Dt,new Ke(Xe.name,we.id(Xe.name),pe.getAttribLocation(Le,Xe.name),Xe))}var Ft={},at={},mt={},qt=[],Et=0;return We.profile&&(Be.getMaxUniformsCount=function(){var Dt=0;return qt.forEach(function(Le){Le.stats.uniformsCount>Dt&&(Dt=Le.stats.uniformsCount)}),Dt},Be.getMaxAttributesCount=function(){var Dt=0;return qt.forEach(function(Le){Le.stats.attributesCount>Dt&&(Dt=Le.stats.attributesCount)}),Dt}),{clear:function(){var Dt=pe.deleteShader.bind(pe);le(Ft).forEach(Dt),Ft={},le(at).forEach(Dt),at={},qt.forEach(function(Le){pe.deleteProgram(Le.program)}),qt.length=0,mt={},Be.shaderCount=0},program:function(Dt,Le,Xe,ot){var dt=mt[Le];dt||(dt=mt[Le]={});var Lt=dt[Dt];if(Lt&&(Lt.refCount++,!ot))return Lt;var Ut=new ct(Le,Dt);return Be.shaderCount++,St(Ut,Xe,ot),Lt||(dt[Dt]=Ut),qt.push(Ut),U(Ut,{destroy:function(){if(Ut.refCount--,0>=Ut.refCount){pe.deleteProgram(Ut.program);var $t=qt.indexOf(Ut);qt.splice($t,1),Be.shaderCount--}0>=dt[Ut.vertId].refCount&&(pe.deleteShader(at[Ut.vertId]),delete at[Ut.vertId],delete mt[Ut.fragId][Ut.vertId]),Object.keys(mt[Ut.fragId]).length||(pe.deleteShader(Ft[Ut.fragId]),delete Ft[Ut.fragId],delete mt[Ut.fragId])}})},restore:function(){Ft={},at={};for(var Dt=0;Dt<qt.length;++Dt)St(qt[Dt],null,qt[Dt].attributes.map(function(Le){return[Le.location,Le.name]}))},shader:ft,frag:-1,vert:-1}}(Et,Xe,ot,pe),Ar=function C(pe,we,Be,We,Ke,Ye,ft){function ct(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function St(rr,Sr){rr.internalformat=Sr.internalformat,rr.format=Sr.format,rr.type=Sr.type,rr.compressed=Sr.compressed,rr.premultiplyAlpha=Sr.premultiplyAlpha,rr.flipY=Sr.flipY,rr.unpackAlignment=Sr.unpackAlignment,rr.colorSpace=Sr.colorSpace,rr.width=Sr.width,rr.height=Sr.height,rr.channels=Sr.channels}function Ft(rr,Sr){if("object"==typeof Sr&&Sr){"premultiplyAlpha"in Sr&&(rr.premultiplyAlpha=Sr.premultiplyAlpha),"flipY"in Sr&&(rr.flipY=Sr.flipY),"alignment"in Sr&&(rr.unpackAlignment=Sr.alignment),"colorSpace"in Sr&&(rr.colorSpace=Tt[Sr.colorSpace]),"type"in Sr&&(rr.type=Qt[Sr.type]);var Rt=rr.width,gr=rr.height,xr=rr.channels,Zr=!1;"shape"in Sr?(Rt=Sr.shape[0],gr=Sr.shape[1],3===Sr.shape.length&&(xr=Sr.shape[2],Zr=!0)):("radius"in Sr&&(Rt=gr=Sr.radius),"width"in Sr&&(Rt=Sr.width),"height"in Sr&&(gr=Sr.height),"channels"in Sr&&(xr=Sr.channels,Zr=!0)),rr.width=0|Rt,rr.height=0|gr,rr.channels=0|xr,Rt=!1,"format"in Sr&&(gr=rr.internalformat=Er[Rt=Sr.format],rr.format=Qr[gr],Rt in Qt&&!("type"in Sr)&&(rr.type=Qt[Rt]),Rt in zr&&(rr.compressed=!0),Rt=!0),!Zr&&Rt?rr.channels=De[rr.format]:Zr&&!Rt&&rr.channels!==Ne[rr.format]&&(rr.format=rr.internalformat=Ne[rr.channels])}}function at(rr){pe.pixelStorei(37440,rr.flipY),pe.pixelStorei(37441,rr.premultiplyAlpha),pe.pixelStorei(37443,rr.colorSpace),pe.pixelStorei(3317,rr.unpackAlignment)}function mt(){ct.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function qt(rr,Sr){var Rt=null;if(_(Sr)?Rt=Sr:Sr&&(Ft(rr,Sr),"x"in Sr&&(rr.xOffset=0|Sr.x),"y"in Sr&&(rr.yOffset=0|Sr.y),_(Sr.data)&&(Rt=Sr.data)),Sr.copy){var gr=Ke.viewportWidth,xr=Ke.viewportHeight;rr.width=rr.width||gr-rr.xOffset,rr.height=rr.height||xr-rr.yOffset,rr.needsCopy=!0}else if(Rt){if(ue(Rt))rr.channels=rr.channels||4,rr.data=Rt,"type"in Sr||5121!==rr.type||(rr.type=0|be[Object.prototype.toString.call(Rt)]);else if(x(Rt)){switch(rr.channels=rr.channels||4,xr=(gr=Rt).length,rr.type){case 5121:case 5123:case 5125:case 5126:(xr=se.allocType(rr.type,xr)).set(gr),rr.data=xr;break;case 36193:rr.data=p(gr)}rr.alignment=1,rr.needsFree=!0}else if(t(Rt)){gr=Rt.data,Array.isArray(gr)||5121!==rr.type||(rr.type=0|be[Object.prototype.toString.call(gr)]);var Zr,Ur,Yr,Br,Cr=Rt.stride;3===(xr=Rt.shape).length?(Yr=xr[2],Br=Cr[2]):Br=Yr=1,Zr=xr[0],Ur=xr[1],xr=Cr[0],Cr=Cr[1],rr.alignment=1,rr.width=Zr,rr.height=Ur,rr.channels=Yr,rr.format=rr.internalformat=Ne[Yr],rr.needsFree=!0,Zr=Br,Rt=Rt.offset;for(var Or=se.allocType(36193===rr.type?5126:rr.type,(Yr=rr.width)*(Br=rr.height)*(Ur=rr.channels)),Dr=0,Nr=0;Nr<Br;++Nr)for(var nn=0;nn<Yr;++nn)for(var rn=0;rn<Ur;++rn)Or[Dr++]=gr[xr*nn+Cr*Nr+Zr*rn+Rt];k(rr,Or)}else if(T(Rt)===$e||T(Rt)===Re||T(Rt)===ze)rr.element=T(Rt)===$e||T(Rt)===Re?Rt:Rt.canvas,rr.width=rr.element.width,rr.height=rr.element.height,rr.channels=4;else if(T(Rt)===Ue)rr.element=Rt,rr.width=Rt.width,rr.height=Rt.height,rr.channels=4;else if(T(Rt)===je)rr.element=Rt,rr.width=Rt.naturalWidth,rr.height=Rt.naturalHeight,rr.channels=4;else if(T(Rt)===rt)rr.element=Rt,rr.width=Rt.videoWidth,rr.height=Rt.videoHeight,rr.channels=4;else if(f(Rt)){for(gr=rr.width||Rt[0].length,xr=rr.height||Rt.length,Cr=rr.channels,Cr=g(Rt[0][0])?Cr||Rt[0][0].length:Cr||1,Zr=de.shape(Rt),Yr=1,Br=0;Br<Zr.length;++Br)Yr*=Zr[Br];Yr=se.allocType(36193===rr.type?5126:rr.type,Yr),de.flatten(Rt,Zr,"",Yr),k(rr,Yr),rr.alignment=1,rr.width=gr,rr.height=xr,rr.channels=Cr,rr.format=rr.internalformat=Ne[Cr],rr.needsFree=!0}}else rr.width=rr.width||1,rr.height=rr.height||1,rr.channels=rr.channels||4}function Et(rr,Sr,Rt,gr,xr){var Zr=rr.element,Ur=rr.data,Yr=rr.internalformat,Br=rr.format,Cr=rr.type,Or=rr.width,Dr=rr.height;at(rr),Zr?pe.texSubImage2D(Sr,xr,Rt,gr,Br,Cr,Zr):rr.compressed?pe.compressedTexSubImage2D(Sr,xr,Rt,gr,Yr,Or,Dr,Ur):rr.needsCopy?(We(),pe.copyTexSubImage2D(Sr,xr,Rt,gr,rr.xOffset,rr.yOffset,Or,Dr)):pe.texSubImage2D(Sr,xr,Rt,gr,Or,Dr,Br,Cr,Ur)}function Dt(){return Jr.pop()||new mt}function Le(rr){rr.needsFree&&se.freeType(rr.data),mt.call(rr),Jr.push(rr)}function Xe(){ct.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ot(rr,Sr,Rt){var gr=rr.images[0]=Dt();rr.mipmask=1,gr.width=rr.width=Sr,gr.height=rr.height=Rt,gr.channels=rr.channels=4}function dt(rr,Sr){var Rt=null;if(_(Sr))St(Rt=rr.images[0]=Dt(),rr),qt(Rt,Sr),rr.mipmask=1;else if(Ft(rr,Sr),Array.isArray(Sr.mipmap))for(var gr=Sr.mipmap,xr=0;xr<gr.length;++xr)St(Rt=rr.images[xr]=Dt(),rr),Rt.width>>=xr,Rt.height>>=xr,qt(Rt,gr[xr]),rr.mipmask|=1<<xr;else St(Rt=rr.images[0]=Dt(),rr),qt(Rt,Sr),rr.mipmask=1;St(rr,rr.images[0])}function Lt(rr,Sr){for(var Rt=rr.images,gr=0;gr<Rt.length&&Rt[gr];++gr){var xr=Rt[gr],Zr=Sr,Ur=gr,Yr=xr.element,Br=xr.data,Cr=xr.internalformat,Or=xr.format,Dr=xr.type,Nr=xr.width,nn=xr.height;at(xr),Yr?pe.texImage2D(Zr,Ur,Or,Or,Dr,Yr):xr.compressed?pe.compressedTexImage2D(Zr,Ur,Cr,Nr,nn,0,Br):xr.needsCopy?(We(),pe.copyTexImage2D(Zr,Ur,Or,xr.xOffset,xr.yOffset,Nr,nn,0)):pe.texImage2D(Zr,Ur,Or,Nr,nn,0,Or,Dr,Br||null)}}function Ut(){var rr=Nn.pop()||new Xe;ct.call(rr);for(var Sr=rr.mipmask=0;16>Sr;++Sr)rr.images[Sr]=null;return rr}function $t(rr){for(var Sr=rr.images,Rt=0;Rt<Sr.length;++Rt)Sr[Rt]&&Le(Sr[Rt]),Sr[Rt]=null;Nn.push(rr)}function Wt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function wr(rr,Sr){"min"in Sr&&(rr.minFilter=ur[Sr.min],0<=Fe.indexOf(rr.minFilter)&&!("faces"in Sr)&&(rr.genMipmaps=!0)),"mag"in Sr&&(rr.magFilter=zt[Sr.mag]);var Rt=rr.wrapS,gr=rr.wrapT;if("wrap"in Sr){var xr=Sr.wrap;"string"==typeof xr?Rt=gr=Ar[xr]:Array.isArray(xr)&&(Rt=Ar[xr[0]],gr=Ar[xr[1]])}else"wrapS"in Sr&&(Rt=Ar[Sr.wrapS]),"wrapT"in Sr&&(gr=Ar[Sr.wrapT]);if(rr.wrapS=Rt,rr.wrapT=gr,"anisotropic"in Sr&&(rr.anisotropic=Sr.anisotropic),"mipmap"in Sr){switch(Rt=!1,typeof Sr.mipmap){case"string":rr.mipmapHint=_r[Sr.mipmap],Rt=rr.genMipmaps=!0;break;case"boolean":Rt=rr.genMipmaps=Sr.mipmap;break;case"object":rr.genMipmaps=!1,Rt=!0}!Rt||"min"in Sr||(rr.minFilter=9984)}}function Rr(rr,Sr){pe.texParameteri(Sr,10241,rr.minFilter),pe.texParameteri(Sr,10240,rr.magFilter),pe.texParameteri(Sr,10242,rr.wrapS),pe.texParameteri(Sr,10243,rr.wrapT),we.ext_texture_filter_anisotropic&&pe.texParameteri(Sr,34046,rr.anisotropic),rr.genMipmaps&&(pe.hint(33170,rr.mipmapHint),pe.generateMipmap(Sr))}function br(rr){ct.call(this),this.mipmask=0,this.internalformat=6408,this.id=Hn++,this.refCount=1,this.target=rr,this.texture=pe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Wt,ft.profile&&(this.stats={size:0})}function nr(rr){pe.activeTexture(33984),pe.bindTexture(rr.target,rr.texture)}function lr(){var rr=di[0];rr?pe.bindTexture(rr.target,rr.texture):pe.bindTexture(3553,null)}function sr(rr){var Sr=rr.texture,Rt=rr.unit,gr=rr.target;0<=Rt&&(pe.activeTexture(33984+Rt),pe.bindTexture(gr,null),di[Rt]=null),pe.deleteTexture(Sr),rr.texture=null,rr.params=null,rr.pixels=null,rr.refCount=0,delete Mn[rr.id],Ye.textureCount--}var _r={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ar={repeat:10497,clamp:33071,mirror:33648},zt={nearest:9728,linear:9729},ur=U({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},zt),Tt={none:0,browser:37444},Qt={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Er={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},zr={};we.ext_srgb&&(Er.srgb=35904,Er.srgba=35906),we.oes_texture_float&&(Qt.float32=Qt.float=5126),we.oes_texture_half_float&&(Qt.float16=Qt["half float"]=36193),we.webgl_depth_texture&&(U(Er,{depth:6402,"depth stencil":34041}),U(Qt,{uint16:5123,uint32:5125,"depth stencil":34042})),we.webgl_compressed_texture_s3tc&&U(zr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),we.webgl_compressed_texture_atc&&U(zr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),we.webgl_compressed_texture_pvrtc&&U(zr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),we.webgl_compressed_texture_etc1&&(zr["rgb etc1"]=36196);var an=Array.prototype.slice.call(pe.getParameter(34467));Object.keys(zr).forEach(function(rr){var Sr=zr[rr];0<=an.indexOf(Sr)&&(Er[rr]=Sr)});var Kr=Object.keys(Er);Be.textureFormats=Kr;var sn=[];Object.keys(Er).forEach(function(rr){sn[Er[rr]]=rr});var gn=[];Object.keys(Qt).forEach(function(rr){gn[Qt[rr]]=rr});var zn=[];Object.keys(zt).forEach(function(rr){zn[zt[rr]]=rr});var Vr=[];Object.keys(ur).forEach(function(rr){Vr[ur[rr]]=rr});var _n=[];Object.keys(Ar).forEach(function(rr){_n[Ar[rr]]=rr});var Qr=Kr.reduce(function(rr,Sr){var Rt=Er[Sr];return rr[Rt]=6409===Rt||6406===Rt||6409===Rt||6410===Rt||6402===Rt||34041===Rt||we.ext_srgb&&(35904===Rt||35906===Rt)?Rt:32855===Rt||0<=Sr.indexOf("rgba")?6408:6407,rr},{}),Jr=[],Nn=[],Hn=0,Mn={},Un=Be.maxTextureUnits,di=Array(Un).map(function(){return null});return U(br.prototype,{bind:function(){this.bindCount+=1;var rr=this.unit;if(0>rr){for(var Sr=0;Sr<Un;++Sr){var Rt=di[Sr];if(Rt){if(0<Rt.bindCount)continue;Rt.unit=-1}di[Sr]=this,rr=Sr;break}ft.profile&&Ye.maxTextureUnits<rr+1&&(Ye.maxTextureUnits=rr+1),this.unit=rr,pe.activeTexture(33984+rr),pe.bindTexture(this.target,this.texture)}return rr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&sr(this)}}),ft.profile&&(Ye.getTotalTextureSize=function(){var rr=0;return Object.keys(Mn).forEach(function(Sr){rr+=Mn[Sr].stats.size}),rr}),{create2D:function(rr,Sr){function Rt(xr,Zr){var Ur=gr.texInfo;Wt.call(Ur);var Yr=Ut();return"number"==typeof xr?ot(Yr,0|xr,"number"==typeof Zr?0|Zr:0|xr):xr?(wr(Ur,xr),dt(Yr,xr)):ot(Yr,1,1),Ur.genMipmaps&&(Yr.mipmask=(Yr.width<<1)-1),gr.mipmask=Yr.mipmask,St(gr,Yr),gr.internalformat=Yr.internalformat,Rt.width=Yr.width,Rt.height=Yr.height,nr(gr),Lt(Yr,3553),Rr(Ur,3553),lr(),$t(Yr),ft.profile&&(gr.stats.size=w(gr.internalformat,gr.type,Yr.width,Yr.height,Ur.genMipmaps,!1)),Rt.format=sn[gr.internalformat],Rt.type=gn[gr.type],Rt.mag=zn[Ur.magFilter],Rt.min=Vr[Ur.minFilter],Rt.wrapS=_n[Ur.wrapS],Rt.wrapT=_n[Ur.wrapT],Rt}var gr=new br(3553);return Mn[gr.id]=gr,Ye.textureCount++,Rt(rr,Sr),Rt.subimage=function(xr,Zr,Ur,Yr){Zr|=0,Ur|=0,Yr|=0;var Br=Dt();return St(Br,gr),Br.width=0,Br.height=0,qt(Br,xr),Br.width=Br.width||(gr.width>>Yr)-Zr,Br.height=Br.height||(gr.height>>Yr)-Ur,nr(gr),Et(Br,3553,Zr,Ur,Yr),lr(),Le(Br),Rt},Rt.resize=function(xr,Zr){var Ur=0|xr,Yr=0|Zr||Ur;if(Ur===gr.width&&Yr===gr.height)return Rt;Rt.width=gr.width=Ur,Rt.height=gr.height=Yr,nr(gr);for(var Br=0;gr.mipmask>>Br;++Br){var Cr=Ur>>Br,Or=Yr>>Br;if(!Cr||!Or)break;pe.texImage2D(3553,Br,gr.format,Cr,Or,0,gr.format,gr.type,null)}return lr(),ft.profile&&(gr.stats.size=w(gr.internalformat,gr.type,Ur,Yr,!1,!1)),Rt},Rt._reglType="texture2d",Rt._texture=gr,ft.profile&&(Rt.stats=gr.stats),Rt.destroy=function(){gr.decRef()},Rt},createCube:function(rr,Sr,Rt,gr,xr,Zr){function Ur(Cr,Or,Dr,Nr,nn,rn){var pn,dn=Yr.texInfo;for(Wt.call(dn),pn=0;6>pn;++pn)Br[pn]=Ut();if("number"!=typeof Cr&&Cr){if("object"==typeof Cr)if(Or)dt(Br[0],Cr),dt(Br[1],Or),dt(Br[2],Dr),dt(Br[3],Nr),dt(Br[4],nn),dt(Br[5],rn);else if(wr(dn,Cr),Ft(Yr,Cr),"faces"in Cr)for(Cr=Cr.faces,pn=0;6>pn;++pn)St(Br[pn],Yr),dt(Br[pn],Cr[pn]);else for(pn=0;6>pn;++pn)dt(Br[pn],Cr)}else for(Cr=0|Cr||1,pn=0;6>pn;++pn)ot(Br[pn],Cr,Cr);for(St(Yr,Br[0]),Yr.mipmask=dn.genMipmaps?(Br[0].width<<1)-1:Br[0].mipmask,Yr.internalformat=Br[0].internalformat,Ur.width=Br[0].width,Ur.height=Br[0].height,nr(Yr),pn=0;6>pn;++pn)Lt(Br[pn],34069+pn);for(Rr(dn,34067),lr(),ft.profile&&(Yr.stats.size=w(Yr.internalformat,Yr.type,Ur.width,Ur.height,dn.genMipmaps,!0)),Ur.format=sn[Yr.internalformat],Ur.type=gn[Yr.type],Ur.mag=zn[dn.magFilter],Ur.min=Vr[dn.minFilter],Ur.wrapS=_n[dn.wrapS],Ur.wrapT=_n[dn.wrapT],pn=0;6>pn;++pn)$t(Br[pn]);return Ur}var Yr=new br(34067);Mn[Yr.id]=Yr,Ye.cubeCount++;var Br=Array(6);return Ur(rr,Sr,Rt,gr,xr,Zr),Ur.subimage=function(Cr,Or,Dr,Nr,nn){Dr|=0,Nr|=0,nn|=0;var rn=Dt();return St(rn,Yr),rn.width=0,rn.height=0,qt(rn,Or),rn.width=rn.width||(Yr.width>>nn)-Dr,rn.height=rn.height||(Yr.height>>nn)-Nr,nr(Yr),Et(rn,34069+Cr,Dr,Nr,nn),lr(),Le(rn),Ur},Ur.resize=function(Cr){if((Cr|=0)!==Yr.width){Ur.width=Yr.width=Cr,Ur.height=Yr.height=Cr,nr(Yr);for(var Or=0;6>Or;++Or)for(var Dr=0;Yr.mipmask>>Dr;++Dr)pe.texImage2D(34069+Or,Dr,Yr.format,Cr>>Dr,Cr>>Dr,0,Yr.format,Yr.type,null);return lr(),ft.profile&&(Yr.stats.size=w(Yr.internalformat,Yr.type,Ur.width,Ur.height,!1,!0)),Ur}},Ur._reglType="textureCube",Ur._texture=Yr,ft.profile&&(Ur.stats=Yr.stats),Ur.destroy=function(){Yr.decRef()},Ur},clear:function(){for(var rr=0;rr<Un;++rr)pe.activeTexture(33984+rr),pe.bindTexture(3553,null),di[rr]=null;le(Mn).forEach(sr),Ye.cubeCount=0,Ye.textureCount=0},getTexture:function(rr){return null},restore:function(){for(var rr=0;rr<Un;++rr){var Sr=di[rr];Sr&&(Sr.bindCount=0,Sr.unit=-1,di[rr]=null)}le(Mn).forEach(function(Rt){Rt.texture=pe.createTexture(),pe.bindTexture(Rt.target,Rt.texture);for(var gr=0;32>gr;++gr)if(0!=(Rt.mipmask&1<<gr))if(3553===Rt.target)pe.texImage2D(3553,gr,Rt.internalformat,Rt.width>>gr,Rt.height>>gr,0,Rt.internalformat,Rt.type,null);else for(var xr=0;6>xr;++xr)pe.texImage2D(34069+xr,gr,Rt.internalformat,Rt.width>>gr,Rt.height>>gr,0,Rt.internalformat,Rt.type,null);Rr(Rt.texInfo,Rt.target)})},refresh:function(){for(var rr=0;rr<Un;++rr){var Sr=di[rr];Sr&&(Sr.bindCount=0,Sr.unit=-1,di[rr]=null),pe.activeTexture(33984+rr),pe.bindTexture(3553,null),pe.bindTexture(34067,null)}}}}(Et,Lt,br,function(){Tt.procs.poll()},Rr,ot,pe),zt=function(pe,we,Be,We,Ke){function Ye(mt){this.id=Ft++,this.refCount=1,this.renderbuffer=mt,this.format=32854,this.height=this.width=0,Ke.profile&&(this.stats={size:0})}function ft(mt){var qt=mt.renderbuffer;pe.bindRenderbuffer(36161,null),pe.deleteRenderbuffer(qt),mt.renderbuffer=null,mt.refCount=0,delete at[mt.id],We.renderbufferCount--}var ct={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};we.ext_srgb&&(ct.srgba=35907),we.ext_color_buffer_half_float&&(ct.rgba16f=34842,ct.rgb16f=34843),we.webgl_color_buffer_float&&(ct.rgba32f=34836);var St=[];Object.keys(ct).forEach(function(mt){St[ct[mt]]=mt});var Ft=0,at={};return Ye.prototype.decRef=function(){0>=--this.refCount&&ft(this)},Ke.profile&&(We.getTotalRenderbufferSize=function(){var mt=0;return Object.keys(at).forEach(function(qt){mt+=at[qt].stats.size}),mt}),{create:function(mt,qt){function Et(Le,Xe){var ot=0,dt=0,Lt=32854;if("object"==typeof Le&&Le?("shape"in Le?(ot=0|(dt=Le.shape)[0],dt=0|dt[1]):("radius"in Le&&(ot=dt=0|Le.radius),"width"in Le&&(ot=0|Le.width),"height"in Le&&(dt=0|Le.height)),"format"in Le&&(Lt=ct[Le.format])):"number"==typeof Le?(ot=0|Le,dt="number"==typeof Xe?0|Xe:ot):Le||(ot=dt=1),ot!==Dt.width||dt!==Dt.height||Lt!==Dt.format)return Et.width=Dt.width=ot,Et.height=Dt.height=dt,Dt.format=Lt,pe.bindRenderbuffer(36161,Dt.renderbuffer),pe.renderbufferStorage(36161,Lt,ot,dt),Ke.profile&&(Dt.stats.size=_t[Dt.format]*Dt.width*Dt.height),Et.format=St[Dt.format],Et}var Dt=new Ye(pe.createRenderbuffer());return at[Dt.id]=Dt,We.renderbufferCount++,Et(mt,qt),Et.resize=function(Le,Xe){var ot=0|Le,dt=0|Xe||ot;return ot===Dt.width&&dt===Dt.height||(Et.width=Dt.width=ot,Et.height=Dt.height=dt,pe.bindRenderbuffer(36161,Dt.renderbuffer),pe.renderbufferStorage(36161,Dt.format,ot,dt),Ke.profile&&(Dt.stats.size=_t[Dt.format]*Dt.width*Dt.height)),Et},Et._reglType="renderbuffer",Et._renderbuffer=Dt,Ke.profile&&(Et.stats=Dt.stats),Et.destroy=function(){Dt.decRef()},Et},clear:function(){le(at).forEach(ft)},restore:function(){le(at).forEach(function(mt){mt.renderbuffer=pe.createRenderbuffer(),pe.bindRenderbuffer(36161,mt.renderbuffer),pe.renderbufferStorage(36161,mt.format,mt.width,mt.height)}),pe.bindRenderbuffer(36161,null)}}}(Et,Lt,0,ot,pe),ur=function A(pe,we,Be,We,Ke,Ye){function ft(br,nr,lr){this.target=br,this.texture=nr,this.renderbuffer=lr;var sr=br=0;nr?(br=nr.width,sr=nr.height):lr&&(br=lr.width,sr=lr.height),this.width=br,this.height=sr}function ct(br){br&&(br.texture&&br.texture._texture.decRef(),br.renderbuffer&&br.renderbuffer._renderbuffer.decRef())}function St(br,nr,lr){br&&(br.texture?br.texture._texture.refCount+=1:br.renderbuffer._renderbuffer.refCount+=1)}function Ft(br,nr){nr&&(nr.texture?pe.framebufferTexture2D(36160,br,nr.target,nr.texture._texture.texture,0):pe.framebufferRenderbuffer(36160,br,36161,nr.renderbuffer._renderbuffer.renderbuffer))}function at(br){var nr=3553,lr=null,sr=null,_r=br;return"object"==typeof br&&(_r=br.data,"target"in br&&(nr=0|br.target)),"texture2d"===(br=_r._reglType)||"textureCube"===br?lr=_r:"renderbuffer"===br&&(sr=_r,nr=36161),new ft(nr,lr,sr)}function mt(br,nr,lr,sr,_r){return lr?((br=We.create2D({width:br,height:nr,format:sr,type:_r}))._texture.refCount=0,new ft(3553,br,null)):((br=Ke.create({width:br,height:nr,format:sr}))._renderbuffer.refCount=0,new ft(36161,null,br))}function qt(br){return br&&(br.texture||br.renderbuffer)}function Et(br,nr,lr){br&&(br.texture?br.texture.resize(nr,lr):br.renderbuffer&&br.renderbuffer.resize(nr,lr),br.width=nr,br.height=lr)}function Dt(){this.id=wr++,Rr[this.id]=this,this.framebuffer=pe.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Le(br){br.colorAttachments.forEach(ct),ct(br.depthAttachment),ct(br.stencilAttachment),ct(br.depthStencilAttachment)}function Xe(br){pe.deleteFramebuffer(br.framebuffer),br.framebuffer=null,Ye.framebufferCount--,delete Rr[br.id]}function ot(br){var nr;pe.bindFramebuffer(36160,br.framebuffer);var lr=br.colorAttachments;for(nr=0;nr<lr.length;++nr)Ft(36064+nr,lr[nr]);for(nr=lr.length;nr<Be.maxColorAttachments;++nr)pe.framebufferTexture2D(36160,36064+nr,3553,null,0);pe.framebufferTexture2D(36160,33306,3553,null,0),pe.framebufferTexture2D(36160,36096,3553,null,0),pe.framebufferTexture2D(36160,36128,3553,null,0),Ft(36096,br.depthAttachment),Ft(36128,br.stencilAttachment),Ft(33306,br.depthStencilAttachment),pe.checkFramebufferStatus(36160),pe.isContextLost(),pe.bindFramebuffer(36160,Lt.next?Lt.next.framebuffer:null),Lt.cur=Lt.next,pe.getError()}function dt(br,nr){function lr(_r,Ar){var zt,ur=0,Tt=0,Qt=!0,Er=!0;zt=null;var zr=!0,an="rgba",Kr="uint8",sn=1,gn=null,zn=null,Vr=null,_n=!1;"number"==typeof _r?(ur=0|_r,Tt=0|Ar||ur):_r?("shape"in _r?(ur=(Tt=_r.shape)[0],Tt=Tt[1]):("radius"in _r&&(ur=Tt=_r.radius),"width"in _r&&(ur=_r.width),"height"in _r&&(Tt=_r.height)),("color"in _r||"colors"in _r)&&(zt=_r.color||_r.colors,Array.isArray(zt)),zt||("colorCount"in _r&&(sn=0|_r.colorCount),"colorTexture"in _r&&(zr=!!_r.colorTexture,an="rgba4"),"colorType"in _r&&(Kr=_r.colorType,!zr)&&("half float"===Kr||"float16"===Kr?an="rgba16f":"float"!==Kr&&"float32"!==Kr||(an="rgba32f")),"colorFormat"in _r&&(0<=Ut.indexOf(an=_r.colorFormat)?zr=!0:0<=$t.indexOf(an)&&(zr=!1))),("depthTexture"in _r||"depthStencilTexture"in _r)&&(_n=!(!_r.depthTexture&&!_r.depthStencilTexture)),"depth"in _r&&("boolean"==typeof _r.depth?Qt=_r.depth:(gn=_r.depth,Er=!1)),"stencil"in _r&&("boolean"==typeof _r.stencil?Er=_r.stencil:(zn=_r.stencil,Qt=!1)),"depthStencil"in _r&&("boolean"==typeof _r.depthStencil?Qt=Er=_r.depthStencil:(Vr=_r.depthStencil,Er=Qt=!1))):ur=Tt=1;var Qr=null,Jr=null,Nn=null,Hn=null;if(Array.isArray(zt))Qr=zt.map(at);else if(zt)Qr=[at(zt)];else for(Qr=Array(sn),zt=0;zt<sn;++zt)Qr[zt]=mt(ur,Tt,zr,an,Kr);for(ur=ur||Qr[0].width,Tt=Tt||Qr[0].height,gn?Jr=at(gn):Qt&&!Er&&(Jr=mt(ur,Tt,_n,"depth","uint32")),zn?Nn=at(zn):Er&&!Qt&&(Nn=mt(ur,Tt,!1,"stencil","uint8")),Vr?Hn=at(Vr):!gn&&!zn&&Er&&Qt&&(Hn=mt(ur,Tt,_n,"depth stencil","depth stencil")),Qt=null,zt=0;zt<Qr.length;++zt)St(Qr[zt]),Qr[zt]&&Qr[zt].texture&&(Er=et[Qr[zt].texture._texture.format]*wt[Qr[zt].texture._texture.type],null===Qt&&(Qt=Er));return St(Jr),St(Nn),St(Hn),Le(sr),sr.width=ur,sr.height=Tt,sr.colorAttachments=Qr,sr.depthAttachment=Jr,sr.stencilAttachment=Nn,sr.depthStencilAttachment=Hn,lr.color=Qr.map(qt),lr.depth=qt(Jr),lr.stencil=qt(Nn),lr.depthStencil=qt(Hn),lr.width=sr.width,lr.height=sr.height,ot(sr),lr}var sr=new Dt;return Ye.framebufferCount++,lr(br,nr),U(lr,{resize:function(_r,Ar){var zt=Math.max(0|_r,1),ur=Math.max(0|Ar||zt,1);if(zt===sr.width&&ur===sr.height)return lr;for(var Tt=sr.colorAttachments,Qt=0;Qt<Tt.length;++Qt)Et(Tt[Qt],zt,ur);return Et(sr.depthAttachment,zt,ur),Et(sr.stencilAttachment,zt,ur),Et(sr.depthStencilAttachment,zt,ur),sr.width=lr.width=zt,sr.height=lr.height=ur,ot(sr),lr},_reglType:"framebuffer",_framebuffer:sr,destroy:function(){Xe(sr),Le(sr)},use:function(_r){Lt.setFBO({framebuffer:lr},_r)}})}var Lt={cur:null,next:null,dirty:!1,setFBO:null},Ut=["rgba"],$t=["rgba4","rgb565","rgb5 a1"];we.ext_srgb&&$t.push("srgba"),we.ext_color_buffer_half_float&&$t.push("rgba16f","rgb16f"),we.webgl_color_buffer_float&&$t.push("rgba32f");var Wt=["uint8"];we.oes_texture_half_float&&Wt.push("half float","float16"),we.oes_texture_float&&Wt.push("float","float32");var wr=0,Rr={};return U(Lt,{getFramebuffer:function(br){return"function"==typeof br&&"framebuffer"===br._reglType&&(br=br._framebuffer)instanceof Dt?br:null},create:dt,createCube:function(br){function nr(sr){var _r,Ar={color:null},zt=0,ur=null;_r="rgba";var Tt="uint8",Qt=1;if("number"==typeof sr?zt=0|sr:sr?("shape"in sr?zt=sr.shape[0]:("radius"in sr&&(zt=0|sr.radius),"width"in sr?zt=0|sr.width:"height"in sr&&(zt=0|sr.height)),("color"in sr||"colors"in sr)&&(ur=sr.color||sr.colors,Array.isArray(ur)),ur||("colorCount"in sr&&(Qt=0|sr.colorCount),"colorType"in sr&&(Tt=sr.colorType),"colorFormat"in sr&&(_r=sr.colorFormat)),"depth"in sr&&(Ar.depth=sr.depth),"stencil"in sr&&(Ar.stencil=sr.stencil),"depthStencil"in sr&&(Ar.depthStencil=sr.depthStencil)):zt=1,ur)if(Array.isArray(ur))for(sr=[],_r=0;_r<ur.length;++_r)sr[_r]=ur[_r];else sr=[ur];else for(sr=Array(Qt),ur={radius:zt,format:_r,type:Tt},_r=0;_r<Qt;++_r)sr[_r]=We.createCube(ur);for(Ar.color=Array(sr.length),_r=0;_r<sr.length;++_r)Qt=sr[_r],zt=zt||Qt.width,Ar.color[_r]={target:34069,data:sr[_r]};for(_r=0;6>_r;++_r){for(Qt=0;Qt<sr.length;++Qt)Ar.color[Qt].target=34069+_r;0<_r&&(Ar.depth=lr[0].depth,Ar.stencil=lr[0].stencil,Ar.depthStencil=lr[0].depthStencil),lr[_r]?lr[_r](Ar):lr[_r]=dt(Ar)}return U(nr,{width:zt,height:zt,color:sr})}var lr=Array(6);return nr(br),U(nr,{faces:lr,resize:function(sr){var _r=0|sr;if(_r===nr.width)return nr;var Ar=nr.color;for(sr=0;sr<Ar.length;++sr)Ar[sr].resize(_r);for(sr=0;6>sr;++sr)lr[sr].resize(_r);return nr.width=nr.height=_r,nr},_reglType:"framebufferCube",destroy:function(){lr.forEach(function(sr){sr.destroy()})}})},clear:function(){le(Rr).forEach(Xe)},restore:function(){Lt.cur=null,Lt.next=null,Lt.dirty=!0,le(Rr).forEach(function(br){br.framebuffer=pe.createFramebuffer(),ot(br)})}})}(Et,Lt,br,Ar,zt,ot),Tt=H(Et,Xe,Lt,br,nr,lr,0,ur,{},sr,_r,Wt,Rr,Ut,dt,pe),Qt=(Xe=function E(pe,we,Be,We,Ke,Ye,ft){function ct(St){var Ft;Ft=null===we.next?5121:we.next.colorAttachments[0].texture._texture.type;var at=0,mt=0,qt=We.framebufferWidth,Et=We.framebufferHeight,Dt=null;return ue(St)?Dt=St:St&&(at=0|St.x,mt=0|St.y,qt=0|(St.width||We.framebufferWidth-at),Et=0|(St.height||We.framebufferHeight-mt),Dt=St.data||null),Be(),St=qt*Et*4,Dt||(5121===Ft?Dt=new Uint8Array(St):5126===Ft&&(Dt=Dt||new Float32Array(St))),pe.pixelStorei(3333,4),pe.readPixels(at,mt,qt,Et,6408,Ft,Dt),Dt}return function(St){return St&&"framebuffer"in St?(we.setFBO({framebuffer:(Ft=St).framebuffer},function(){at=ct(Ft)}),at):ct(St);var Ft,at}}(Et,ur,Tt.procs.poll,Rr),Tt.next),Er=Et.canvas,zr=[],an=[],Kr=[],sn=[pe.onDestroy],gn=null;Er&&(Er.addEventListener("webglcontextlost",Ke,!1),Er.addEventListener("webglcontextrestored",Ye,!1));var zn=ur.setFBO=ft({framebuffer:q.define.call(null,1,"framebuffer")});return mt(),Dt=U(ft,{clear:function(Vr){if("framebuffer"in Vr)if(Vr.framebuffer&&"framebufferCube"===Vr.framebuffer_reglType)for(var _n=0;6>_n;++_n)zn(U({framebuffer:Vr.framebuffer.faces[_n]},Vr),ct);else zn(Vr,ct);else ct(0,Vr)},prop:q.define.bind(null,1),context:q.define.bind(null,2),this:q.define.bind(null,3),draw:ft({}),buffer:function(Vr){return nr.create(Vr,34962,!1,!1)},elements:function(Vr){return lr.create(Vr,!1)},texture:Ar.create2D,cube:Ar.createCube,renderbuffer:zt.create,framebuffer:ur.create,framebufferCube:ur.createCube,vao:sr.createVAO,attributes:Dt,frame:St,on:function(Vr,_n){var Qr;switch(Vr){case"frame":return St(_n);case"lost":Qr=an;break;case"restore":Qr=Kr;break;case"destroy":Qr=sn}return Qr.push(_n),{cancel:function(){for(var Jr=0;Jr<Qr.length;++Jr)if(Qr[Jr]===_n){Qr[Jr]=Qr[Qr.length-1],Qr.pop();break}}}},limits:br,hasExtension:function(Vr){return 0<=br.extensions.indexOf(Vr.toLowerCase())},read:Xe,destroy:function(){zr.length=0,We(),Er&&(Er.removeEventListener("webglcontextlost",Ke),Er.removeEventListener("webglcontextrestored",Ye)),_r.clear(),ur.clear(),zt.clear(),sr.clear(),Ar.clear(),lr.clear(),nr.clear(),Ut&&Ut.clear(),sn.forEach(function(Vr){Vr()})},_gl:Et,_refresh:mt,poll:function(){at(),Ut&&Ut.update()},now:qt,stats:ot,getCachedCode:function(){return dt},preloadCachedCode:function(Vr){Object.entries(Vr).forEach(function(_n){dt[_n[0]]=_n[1]})}}),pe.onDone(null,Dt),Dt}},"object"==typeof K&&void 0!==Q?Q.exports=v():this.createREGL=v()},{}],285:[function(y,Q,K){var m=y("buffer"),v=m.Buffer;function b(e,n){for(var r in e)n[r]=e[r]}function h(e,n,r){return v(e,n,r)}v.from&&v.alloc&&v.allocUnsafe&&v.allocUnsafeSlow?Q.exports=m:(b(m,K),K.Buffer=h),h.prototype=Object.create(v.prototype),b(v,h),h.from=function(e,n,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return v(e,n,r)},h.alloc=function(e,n,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=v(e);return void 0!==n?"string"==typeof r?o.fill(n,r):o.fill(n):o.fill(0),o},h.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return v(e)},h.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return m.SlowBuffer(e)}},{buffer:85}],286:[function(y,Q,K){Q.exports=v;var m=y("events").EventEmitter;function v(){m.call(this)}y("inherits")(v,m),v.Readable=y("readable-stream/lib/_stream_readable.js"),v.Writable=y("readable-stream/lib/_stream_writable.js"),v.Duplex=y("readable-stream/lib/_stream_duplex.js"),v.Transform=y("readable-stream/lib/_stream_transform.js"),v.PassThrough=y("readable-stream/lib/_stream_passthrough.js"),v.finished=y("readable-stream/lib/internal/streams/end-of-stream.js"),v.pipeline=y("readable-stream/lib/internal/streams/pipeline.js"),v.Stream=v,v.prototype.pipe=function(b,h){var e=this;function n(s){b.writable&&!1===b.write(s)&&e.pause&&e.pause()}function r(){e.readable&&e.resume&&e.resume()}e.on("data",n),b.on("drain",r),b._isStdio||h&&!1===h.end||(e.on("end",t),e.on("close",d));var o=!1;function t(){o||(o=!0,b.end())}function d(){o||(o=!0,"function"==typeof b.destroy&&b.destroy())}function a(s){if(i(),0===m.listenerCount(this,"error"))throw s}function i(){e.removeListener("data",n),b.removeListener("drain",r),e.removeListener("end",t),e.removeListener("close",d),e.removeListener("error",a),b.removeListener("error",a),e.removeListener("end",i),e.removeListener("close",i),b.removeListener("close",i)}return e.on("error",a),b.on("error",a),e.on("end",i),e.on("close",i),b.on("close",i),b.emit("pipe",e),b}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(y,Q,K){"use strict";var m={};function v(h,e,n){n||(n=Error);var r=function(o){var t,d;function a(i,s,c){return o.call(this,"string"==typeof e?e:e(i,s,c))||this}return d=o,(t=a).prototype=Object.create(d.prototype),t.prototype.constructor=t,t.__proto__=d,a}(n);r.prototype.name=n.name,r.prototype.code=h,m[h]=r}function b(h,e){if(Array.isArray(h)){var n=h.length;return h=h.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(h.slice(0,n-1).join(", "),", or ")+h[n-1]:2===n?"one of ".concat(e," ").concat(h[0]," or ").concat(h[1]):"of ".concat(e," ").concat(h[0])}return"of ".concat(e," ").concat(String(h))}v("ERR_INVALID_OPT_VALUE",function(h,e){return'The value "'+e+'" is invalid for option "'+h+'"'},TypeError),v("ERR_INVALID_ARG_TYPE",function(h,e,n){var r,d,i,c;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(r="must not be",e=e.replace(/^not /,"")):r="must be",i=h,(void 0===c||c>i.length)&&(c=i.length)," argument"===i.substring(c-" argument".length,c))d="The ".concat(h," ").concat(r," ").concat(b(e,"type"));else{var a=function(i,s,c){return"number"!=typeof c&&(c=0),!(c+".".length>i.length)&&-1!==i.indexOf(".",c)}(h)?"property":"argument";d='The "'.concat(h,'" ').concat(a," ").concat(r," ").concat(b(e,"type"))}return d+". Received type ".concat(typeof n)},TypeError),v("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),v("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),v("ERR_STREAM_PREMATURE_CLOSE","Premature close"),v("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),v("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),v("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),v("ERR_STREAM_WRITE_AFTER_END","write after end"),v("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),v("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),v("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Q.exports.codes=m},{}],288:[function(y,Q,K){(function(m){(function(){"use strict";var v=Object.keys||function(a){var i=[];for(var s in a)i.push(s);return i};Q.exports=o;var b=y("./_stream_readable"),h=y("./_stream_writable");y("inherits")(o,b);for(var e=v(h.prototype),n=0;n<e.length;n++){var r=e[n];o.prototype[r]||(o.prototype[r]=h.prototype[r])}function o(a){if(!(this instanceof o))return new o(a);b.call(this,a),h.call(this,a),this.allowHalfOpen=!0,a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",t)))}function t(){this._writableState.ended||m.nextTick(d,this)}function d(a){a.end()}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}})}).call(this)}).call(this,y("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(y,Q,K){"use strict";Q.exports=v;var m=y("./_stream_transform");function v(b){if(!(this instanceof v))return new v(b);m.call(this,b)}y("inherits")(v,m),v.prototype._transform=function(b,h,e){e(null,b)}},{"./_stream_transform":291,inherits:231}],290:[function(y,Q,K){(function(m,v){(function(){"use strict";var b;Q.exports=w,w.ReadableState=k,y("events");var o,h=function(j,B){return j.listeners(B).length},e=y("./internal/streams/stream"),n=y("buffer").Buffer,r=v.Uint8Array||function(){},t=y("util");o=t&&t.debuglog?t.debuglog("stream"):function(){};var d,a,i,s=y("./internal/streams/buffer_list"),c=y("./internal/streams/destroy"),l=y("./internal/streams/state").getHighWaterMark,p=y("../errors").codes,g=p.ERR_INVALID_ARG_TYPE,u=p.ERR_STREAM_PUSH_AFTER_EOF,x=p.ERR_METHOD_NOT_IMPLEMENTED,f=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;y("inherits")(w,e);var T=c.errorOrDestroy,_=["error","close","destroy","pause","resume"];function k(j,B,H){b=b||y("./_stream_duplex"),"boolean"!=typeof H&&(H=B instanceof b),this.objectMode=!!(j=j||{}).objectMode,H&&(this.objectMode=this.objectMode||!!j.readableObjectMode),this.highWaterMark=l(this,j,"readableHighWaterMark",H),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==j.emitClose,this.autoDestroy=!!j.autoDestroy,this.destroyed=!1,this.defaultEncoding=j.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,j.encoding&&(d||(d=y("string_decoder/").StringDecoder),this.decoder=new d(j.encoding),this.encoding=j.encoding)}function w(j){if(b=b||y("./_stream_duplex"),!(this instanceof w))return new w(j);this._readableState=new k(j,this,this instanceof b),this.readable=!0,j&&("function"==typeof j.read&&(this._read=j.read),"function"==typeof j.destroy&&(this._destroy=j.destroy)),e.call(this)}function C(j,B,H,ee,U){o("readableAddChunk",B);var $,te,ne,se,ie,q=j._readableState;if(null===B)q.reading=!1,function(te,ne){if(o("onEofChunk"),!ne.ended){if(ne.decoder){var se=ne.decoder.end();se&&se.length&&(ne.buffer.push(se),ne.length+=ne.objectMode?1:se.length)}ne.ended=!0,ne.sync?P(te):(ne.needReadable=!1,ne.emittedReadable||(ne.emittedReadable=!0,S(te)))}}(j,q);else if(U||(te=q,n.isBuffer(ie=ne=B)||ie instanceof r||"string"==typeof ne||void 0===ne||te.objectMode||(se=new g("chunk",["string","Buffer","Uint8Array"],ne)),$=se),$)T(j,$);else if(q.objectMode||B&&B.length>0)if("string"==typeof B||q.objectMode||Object.getPrototypeOf(B)===n.prototype||(B=function(te){return n.from(te)}(B)),ee)q.endEmitted?T(j,new f):A(j,q,B,!0);else if(q.ended)T(j,new u);else{if(q.destroyed)return!1;q.reading=!1,q.decoder&&!H?(B=q.decoder.write(B),q.objectMode||0!==B.length?A(j,q,B,!1):E(j,q)):A(j,q,B,!1)}else ee||(q.reading=!1,E(j,q));return!q.ended&&(q.length<q.highWaterMark||0===q.length)}function A(j,B,H,ee){B.flowing&&0===B.length&&!B.sync?(B.awaitDrain=0,j.emit("data",H)):(B.length+=B.objectMode?1:H.length,ee?B.buffer.unshift(H):B.buffer.push(H),B.needReadable&&P(j)),E(j,B)}function O(j,B){return j<=0||0===B.length&&B.ended?0:B.objectMode?1:j!=j?B.flowing&&B.length?B.buffer.head.data.length:B.length:(j>B.highWaterMark&&(B.highWaterMark=((H=j)>=1073741824?H=1073741824:(H--,H|=H>>>1,H|=H>>>2,H|=H>>>4,H|=H>>>8,H|=H>>>16,H++),H)),j<=B.length?j:B.ended?B.length:(B.needReadable=!0,0));var H}function P(j){var B=j._readableState;o("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(o("emitReadable",B.flowing),B.emittedReadable=!0,m.nextTick(S,j))}function S(j){var B=j._readableState;o("emitReadable_",B.destroyed,B.length,B.ended),B.destroyed||!B.length&&!B.ended||(j.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,X(j)}function E(j,B){B.readingMore||(B.readingMore=!0,m.nextTick(D,j,B))}function D(j,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&0===B.length);){var H=B.length;if(o("maybeReadMore read 0"),j.read(0),H===B.length)break}B.readingMore=!1}function z(j){var B=j._readableState;B.readableListening=j.listenerCount("readable")>0,B.resumeScheduled&&!B.paused?B.flowing=!0:j.listenerCount("data")>0&&j.resume()}function N(j){o("readable nexttick read 0"),j.read(0)}function V(j,B){o("resume",B.reading),B.reading||j.read(0),B.resumeScheduled=!1,j.emit("resume"),X(j),B.flowing&&!B.reading&&j.read(0)}function X(j){var B=j._readableState;for(o("flow",B.flowing);B.flowing&&null!==j.read(););}function J(j,B){return 0===B.length?null:(B.objectMode?H=B.buffer.shift():!j||j>=B.length?(H=B.decoder?B.buffer.join(""):1===B.buffer.length?B.buffer.first():B.buffer.concat(B.length),B.buffer.clear()):H=B.buffer.consume(j,B.decoder),H);var H}function G(j){var B=j._readableState;o("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,m.nextTick(Z,B,j))}function Z(j,B){if(o("endReadableNT",j.endEmitted,j.length),!j.endEmitted&&0===j.length&&(j.endEmitted=!0,B.readable=!1,B.emit("end"),j.autoDestroy)){var H=B._writableState;(!H||H.autoDestroy&&H.finished)&&B.destroy()}}function re(j,B){for(var H=0,ee=j.length;H<ee;H++)if(j[H]===B)return H;return-1}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(j){this._readableState&&(this._readableState.destroyed=j)}}),w.prototype.destroy=c.destroy,w.prototype._undestroy=c.undestroy,w.prototype._destroy=function(j,B){B(j)},w.prototype.push=function(j,B){var H,ee=this._readableState;return ee.objectMode?H=!0:"string"==typeof j&&((B=B||ee.defaultEncoding)!==ee.encoding&&(j=n.from(j,B),B=""),H=!0),C(this,j,B,!1,H)},w.prototype.unshift=function(j){return C(this,j,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(j){d||(d=y("string_decoder/").StringDecoder);var B=new d(j);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;for(var H=this._readableState.buffer.head,ee="";null!==H;)ee+=B.write(H.data),H=H.next;return this._readableState.buffer.clear(),""!==ee&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this},w.prototype.read=function(j){o("read",j),j=parseInt(j,10);var B=this._readableState,H=j;if(0!==j&&(B.emittedReadable=!1),0===j&&B.needReadable&&((0!==B.highWaterMark?B.length>=B.highWaterMark:B.length>0)||B.ended))return o("read: emitReadable",B.length,B.ended),0===B.length&&B.ended?G(this):P(this),null;if(0===(j=O(j,B))&&B.ended)return 0===B.length&&G(this),null;var ee,U=B.needReadable;return o("need readable",U),(0===B.length||B.length-j<B.highWaterMark)&&o("length less than watermark",U=!0),B.ended||B.reading?o("reading or ended",U=!1):U&&(o("do read"),B.reading=!0,B.sync=!0,0===B.length&&(B.needReadable=!0),this._read(B.highWaterMark),B.sync=!1,B.reading||(j=O(H,B))),null===(ee=j>0?J(j,B):null)?(B.needReadable=B.length<=B.highWaterMark,j=0):(B.length-=j,B.awaitDrain=0),0===B.length&&(B.ended||(B.needReadable=!0),H!==j&&B.ended&&G(this)),null!==ee&&this.emit("data",ee),ee},w.prototype._read=function(j){T(this,new x("_read()"))},w.prototype.pipe=function(j,B){var H=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=j;break;case 1:ee.pipes=[ee.pipes,j];break;default:ee.pipes.push(j)}ee.pipesCount+=1,o("pipe count=%d opts=%j",ee.pipesCount,B);var U=B&&!1===B.end||j===m.stdout||j===m.stderr?de:q;function q(){o("onend"),j.end()}ee.endEmitted?m.nextTick(U):H.once("end",U),j.on("unpipe",function $(be,_e){o("onunpipe"),be===H&&_e&&!1===_e.hasUnpiped&&(_e.hasUnpiped=!0,o("cleanup"),j.removeListener("close",ue),j.removeListener("finish",le),j.removeListener("drain",te),j.removeListener("error",ie),j.removeListener("unpipe",$),H.removeListener("end",q),H.removeListener("end",de),H.removeListener("data",se),ne=!0,!ee.awaitDrain||j._writableState&&!j._writableState.needDrain||te())});var be,te=(be=H,function(){var _e=be._readableState;o("pipeOnDrain",_e.awaitDrain),_e.awaitDrain&&_e.awaitDrain--,0===_e.awaitDrain&&h(be,"data")&&(_e.flowing=!0,X(be))});j.on("drain",te);var ne=!1;function se(be){o("ondata");var _e=j.write(be);o("dest.write",_e),!1===_e&&((1===ee.pipesCount&&ee.pipes===j||ee.pipesCount>1&&-1!==re(ee.pipes,j))&&!ne&&(o("false write response, pause",ee.awaitDrain),ee.awaitDrain++),H.pause())}function ie(be){o("onerror",be),de(),j.removeListener("error",ie),0===h(j,"error")&&T(j,be)}function ue(){j.removeListener("finish",le),de()}function le(){o("onfinish"),j.removeListener("close",ue),de()}function de(){o("unpipe"),H.unpipe(j)}return H.on("data",se),function(be,_e,xe){if("function"==typeof be.prependListener)return be.prependListener(_e,xe);be._events&&be._events[_e]?Array.isArray(be._events[_e])?be._events[_e].unshift(xe):be._events[_e]=[xe,be._events[_e]]:be.on(_e,xe)}(j,"error",ie),j.once("close",ue),j.once("finish",le),j.emit("pipe",H),ee.flowing||(o("pipe resume"),H.resume()),j},w.prototype.unpipe=function(j){var B=this._readableState,H={hasUnpiped:!1};if(0===B.pipesCount)return this;if(1===B.pipesCount)return j&&j!==B.pipes||(j||(j=B.pipes),B.pipes=null,B.pipesCount=0,B.flowing=!1,j&&j.emit("unpipe",this,H)),this;if(!j){var ee=B.pipes,U=B.pipesCount;B.pipes=null,B.pipesCount=0,B.flowing=!1;for(var $=0;$<U;$++)ee[$].emit("unpipe",this,{hasUnpiped:!1});return this}var q=re(B.pipes,j);return-1===q||(B.pipes.splice(q,1),B.pipesCount-=1,1===B.pipesCount&&(B.pipes=B.pipes[0]),j.emit("unpipe",this,H)),this},w.prototype.addListener=w.prototype.on=function(j,B){var H=e.prototype.on.call(this,j,B),ee=this._readableState;return"data"===j?(ee.readableListening=this.listenerCount("readable")>0,!1!==ee.flowing&&this.resume()):"readable"===j&&(ee.endEmitted||ee.readableListening||(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,o("on readable",ee.length,ee.reading),ee.length?P(this):ee.reading||m.nextTick(N,this))),H},w.prototype.removeListener=function(j,B){var H=e.prototype.removeListener.call(this,j,B);return"readable"===j&&m.nextTick(z,this),H},w.prototype.removeAllListeners=function(j){var B=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==j&&void 0!==j||m.nextTick(z,this),B},w.prototype.resume=function(){var H,j=this._readableState;return j.flowing||(o("resume"),j.flowing=!j.readableListening,this,(H=j).resumeScheduled||(H.resumeScheduled=!0,m.nextTick(V,this,H))),j.paused=!1,this},w.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(j){var B=this,H=this._readableState,ee=!1;for(var U in j.on("end",function(){if(o("wrapped end"),H.decoder&&!H.ended){var q=H.decoder.end();q&&q.length&&B.push(q)}B.push(null)}),j.on("data",function(q){o("wrapped data"),H.decoder&&(q=H.decoder.write(q)),H.objectMode&&null==q||(H.objectMode||q&&q.length)&&(B.push(q)||(ee=!0,j.pause()))}),j)void 0===this[U]&&"function"==typeof j[U]&&(this[U]=function(q){return function(){return j[q].apply(j,arguments)}}(U));for(var $=0;$<_.length;$++)j.on(_[$],this.emit.bind(this,_[$]));return this._read=function(q){o("wrapped _read",q),ee&&(ee=!1,j.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===a&&(a=y("./internal/streams/async_iterator")),a(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}}),w._fromList=J,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(j,B){return void 0===i&&(i=y("./internal/streams/from")),i(w,j,B)})}).call(this)}).call(this,y("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(y,Q,K){"use strict";Q.exports=o;var m=y("../errors").codes,v=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_MULTIPLE_CALLBACK,h=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=m.ERR_TRANSFORM_WITH_LENGTH_0,n=y("./_stream_duplex");function r(a,i){var s=this._transformState;s.transforming=!1;var c=s.writecb;if(null===c)return this.emit("error",new b);s.writechunk=null,s.writecb=null,null!=i&&this.push(i),c(a);var l=this._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}function o(a){if(!(this instanceof o))return new o(a);n.call(this,a),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",t)}function t(){var a=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(i,s){d(a,i,s)})}function d(a,i,s){if(i)return a.emit("error",i);if(null!=s&&a.push(s),a._writableState.length)throw new e;if(a._transformState.transforming)throw new h;return a.push(null)}y("inherits")(o,n),o.prototype.push=function(a,i){return this._transformState.needTransform=!1,n.prototype.push.call(this,a,i)},o.prototype._transform=function(a,i,s){s(new v("_transform()"))},o.prototype._write=function(a,i,s){var c=this._transformState;if(c.writecb=s,c.writechunk=a,c.writeencoding=i,!c.transforming){var l=this._readableState;(c.needTransform||l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}},o.prototype._read=function(a){var i=this._transformState;null===i.writechunk||i.transforming?i.needTransform=!0:(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform))},o.prototype._destroy=function(a,i){n.prototype._destroy.call(this,a,function(s){i(s)})}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(y,Q,K){(function(m,v){(function(){"use strict";function b(D){var z=this;this.next=null,this.entry=null,this.finish=function(){!function(N,V,X){var J=N.entry;for(N.entry=null;J;){var G=J.callback;V.pendingcb--,G(undefined),J=J.next}V.corkedRequestsFree.next=N}(z,D)}}var h;Q.exports=w,w.WritableState=k;var t,e={deprecate:y("util-deprecate")},n=y("./internal/streams/stream"),r=y("buffer").Buffer,o=v.Uint8Array||function(){},d=y("./internal/streams/destroy"),a=y("./internal/streams/state").getHighWaterMark,i=y("../errors").codes,s=i.ERR_INVALID_ARG_TYPE,c=i.ERR_METHOD_NOT_IMPLEMENTED,l=i.ERR_MULTIPLE_CALLBACK,p=i.ERR_STREAM_CANNOT_PIPE,g=i.ERR_STREAM_DESTROYED,u=i.ERR_STREAM_NULL_VALUES,x=i.ERR_STREAM_WRITE_AFTER_END,f=i.ERR_UNKNOWN_ENCODING,T=d.errorOrDestroy;function _(){}function k(D,z,N){h=h||y("./_stream_duplex"),"boolean"!=typeof N&&(N=z instanceof h),this.objectMode=!!(D=D||{}).objectMode,N&&(this.objectMode=this.objectMode||!!D.writableObjectMode),this.highWaterMark=a(this,D,"writableHighWaterMark",N),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===D.decodeStrings),this.defaultEncoding=D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){!function(J,G){var H,Z=J._writableState,re=Z.sync,j=Z.writecb;if("function"!=typeof j)throw new l;if((H=Z).writing=!1,H.writecb=null,H.length-=H.writelen,H.writelen=0,G)!function(H,ee,U,$,q){--ee.pendingcb,U?(m.nextTick(q,$),m.nextTick(E,H,ee),H._writableState.errorEmitted=!0,T(H,$)):(q($),H._writableState.errorEmitted=!0,T(H,$),E(H,ee))}(J,Z,re,G,j);else{var B=P(Z)||J.destroyed;B||Z.corked||Z.bufferProcessing||!Z.bufferedRequest||O(J,Z),re?m.nextTick(A,J,Z,B,j):A(J,Z,B,j)}}(z,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==D.emitClose,this.autoDestroy=!!D.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function w(D){var z=this instanceof(h=h||y("./_stream_duplex"));if(!z&&!t.call(w,this))return new w(D);this._writableState=new k(D,this,z),this.writable=!0,D&&("function"==typeof D.write&&(this._write=D.write),"function"==typeof D.writev&&(this._writev=D.writev),"function"==typeof D.destroy&&(this._destroy=D.destroy),"function"==typeof D.final&&(this._final=D.final)),n.call(this)}function C(D,z,N,V,X,J,G){z.writelen=V,z.writecb=G,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new g("write")):N?D._writev(X,z.onwrite):D._write(X,J,z.onwrite),z.sync=!1}function A(D,z,N,V){var X,J;N||(X=D,0===(J=z).length&&J.needDrain&&(J.needDrain=!1,X.emit("drain"))),z.pendingcb--,V(),E(D,z)}function O(D,z){z.bufferProcessing=!0;var N=z.bufferedRequest;if(D._writev&&N&&N.next){var X=new Array(z.bufferedRequestCount),J=z.corkedRequestsFree;J.entry=N;for(var G=0,Z=!0;N;)X[G]=N,N.isBuf||(Z=!1),N=N.next,G+=1;X.allBuffers=Z,C(D,z,!0,z.length,X,"",J.finish),z.pendingcb++,z.lastBufferedRequest=null,J.next?(z.corkedRequestsFree=J.next,J.next=null):z.corkedRequestsFree=new b(z),z.bufferedRequestCount=0}else{for(;N;){var re=N.chunk;if(C(D,z,!1,z.objectMode?1:re.length,re,N.encoding,N.callback),N=N.next,z.bufferedRequestCount--,z.writing)break}null===N&&(z.lastBufferedRequest=null)}z.bufferedRequest=N,z.bufferProcessing=!1}function P(D){return D.ending&&0===D.length&&null===D.bufferedRequest&&!D.finished&&!D.writing}function S(D,z){D._final(function(N){z.pendingcb--,N&&T(D,N),z.prefinished=!0,D.emit("prefinish"),E(D,z)})}function E(D,z){var X,J,N=P(z);if(N&&(X=D,(J=z).prefinished||J.finalCalled||("function"!=typeof X._final||J.destroyed?(J.prefinished=!0,X.emit("prefinish")):(J.pendingcb++,J.finalCalled=!0,m.nextTick(S,X,J))),0===z.pendingcb&&(z.finished=!0,D.emit("finish"),z.autoDestroy))){var V=D._readableState;(!V||V.autoDestroy&&V.endEmitted)&&D.destroy()}return N}y("inherits")(w,n),k.prototype.getBuffer=function(){for(var D=this.bufferedRequest,z=[];D;)z.push(D),D=D.next;return z},function(){try{Object.defineProperty(k.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(t=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(D){return!!t.call(this,D)||this===w&&D&&D._writableState instanceof k}})):t=function(D){return D instanceof this},w.prototype.pipe=function(){T(this,new p)},w.prototype.write=function(D,z,N){var V,Z,re,j,X=this._writableState,J=!1,G=!X.objectMode&&(r.isBuffer(V=D)||V instanceof o);return G&&!r.isBuffer(D)&&(D=r.from(D)),"function"==typeof z&&(N=z,z=null),G?z="buffer":z||(z=X.defaultEncoding),"function"!=typeof N&&(N=_),X.ending?(Z=this,re=N,j=new x,T(Z,j),m.nextTick(re,j)):(G||function(Z,re,j,B){var H;return null===j?H=new u:"string"==typeof j||re.objectMode||(H=new s("chunk",["string","Buffer"],j)),!H||(T(Z,H),m.nextTick(B,H),!1)}(this,X,D,N))&&(X.pendingcb++,J=function(Z,re,j,B,H,ee){if(!j){var U=(se=B,(ne=re).objectMode||!1===ne.decodeStrings||"string"!=typeof se||(se=r.from(se,H)),se);B!==U&&(j=!0,H="buffer",B=U)}var ne,se,$=re.objectMode?1:B.length;re.length+=$;var q=re.length<re.highWaterMark;if(q||(re.needDrain=!0),re.writing||re.corked){var te=re.lastBufferedRequest;re.lastBufferedRequest={chunk:B,encoding:H,isBuf:j,callback:ee,next:null},te?te.next=re.lastBufferedRequest:re.bufferedRequest=re.lastBufferedRequest,re.bufferedRequestCount+=1}else C(Z,re,!1,$,B,H,ee);return q}(this,X,G,D,z,N)),J},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var D=this._writableState;D.corked&&(D.corked--,D.writing||D.corked||D.bufferProcessing||!D.bufferedRequest||O(this,D))},w.prototype.setDefaultEncoding=function(D){if("string"==typeof D&&(D=D.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((D+"").toLowerCase())>-1))throw new f(D);return this._writableState.defaultEncoding=D,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(D,z,N){N(new c("_write()"))},w.prototype._writev=null,w.prototype.end=function(D,z,N){var X,J,G,V=this._writableState;return"function"==typeof D?(N=D,D=null,z=null):"function"==typeof z&&(N=z,z=null),null!=D&&this.write(D,z),V.corked&&(V.corked=1,this.uncork()),V.ending||(X=this,G=N,(J=V).ending=!0,E(X,J),G&&(J.finished?m.nextTick(G):X.once("finish",G)),J.ended=!0,X.writable=!1),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(D){this._writableState&&(this._writableState.destroyed=D)}}),w.prototype.destroy=d.destroy,w.prototype._undestroy=d.undestroy,w.prototype._destroy=function(D,z){z(D)}}).call(this)}).call(this,y("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(y,Q,K){(function(m){(function(){"use strict";var v;function b(g,u,x){return u in g?Object.defineProperty(g,u,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[u]=x,g}var h=y("./end-of-stream"),e=Symbol("lastResolve"),n=Symbol("lastReject"),r=Symbol("error"),o=Symbol("ended"),t=Symbol("lastPromise"),d=Symbol("handlePromise"),a=Symbol("stream");function i(g,u){return{value:g,done:u}}function s(g){var u=g[e];if(null!==u){var x=g[a].read();null!==x&&(g[t]=null,g[e]=null,g[n]=null,u(i(x,!1)))}}function c(g){m.nextTick(s,g)}var l=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((b(v={get stream(){return this[a]},next:function(){var g=this,u=this[r];if(null!==u)return Promise.reject(u);if(this[o])return Promise.resolve(i(void 0,!0));if(this[a].destroyed)return new Promise(function(_,k){m.nextTick(function(){g[r]?k(g[r]):_(i(void 0,!0))})});var x,_,k,f=this[t];if(f)x=new Promise((_=f,k=this,function(w,C){_.then(function(){k[o]?w(i(void 0,!0)):k[d](w,C)},C)}));else{var T=this[a].read();if(null!==T)return Promise.resolve(i(T,!1));x=new Promise(this[d])}return this[t]=x,x}},Symbol.asyncIterator,function(){return this}),b(v,"return",function(){var g=this;return new Promise(function(u,x){g[a].destroy(null,function(f){f?x(f):u(i(void 0,!0))})})}),v),l);Q.exports=function(g){var u,x=Object.create(p,(b(u={},a,{value:g,writable:!0}),b(u,e,{value:null,writable:!0}),b(u,n,{value:null,writable:!0}),b(u,r,{value:null,writable:!0}),b(u,o,{value:g._readableState.endEmitted,writable:!0}),b(u,d,{value:function(f,T){var _=x[a].read();_?(x[t]=null,x[e]=null,x[n]=null,f(i(_,!1))):(x[e]=f,x[n]=T)},writable:!0}),u));return x[t]=null,h(g,function(f){if(f&&"ERR_STREAM_PREMATURE_CLOSE"!==f.code){var T=x[n];return null!==T&&(x[t]=null,x[e]=null,x[n]=null,T(f)),void(x[r]=f)}var _=x[e];null!==_&&(x[t]=null,x[e]=null,x[n]=null,_(i(void 0,!0))),x[o]=!0}),g.on("readable",c.bind(null,x)),x}}).call(this)}).call(this,y("_process"))},{"./end-of-stream":296,_process:278}],294:[function(y,Q,K){"use strict";function m(r,o){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);o&&(d=d.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,d)}return t}function v(r,o,t){return o in r?Object.defineProperty(r,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[o]=t,r}function b(r,o){for(var t=0;t<o.length;t++){var d=o[t];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}var h=y("buffer").Buffer,e=y("util").inspect,n=e&&e.custom||"inspect";Q.exports=function(){function r(){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,r),this.head=null,this.tail=null,this.length=0}var o,t;return o=r,(t=[{key:"push",value:function(a){var i={data:a,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(a){var i={data:a,next:this.head};0===this.length&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(0!==this.length){var a=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,a}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(a){if(0===this.length)return"";for(var i=this.head,s=""+i.data;i=i.next;)s+=a+i.data;return s}},{key:"concat",value:function(a){if(0===this.length)return h.alloc(0);for(var l=h.allocUnsafe(a>>>0),p=this.head,g=0;p;)h.prototype.copy.call(p.data,l,g),g+=p.data.length,p=p.next;return l}},{key:"consume",value:function(a,i){var s;return a<this.head.data.length?(s=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):s=a===this.head.data.length?this.shift():i?this._getString(a):this._getBuffer(a),s}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var i=this.head,s=1,c=i.data;for(a-=c.length;i=i.next;){var l=i.data,p=a>l.length?l.length:a;if(c+=p===l.length?l:l.slice(0,a),0==(a-=p)){p===l.length?(++s,this.head=i.next?i.next:this.tail=null):(this.head=i,i.data=l.slice(p));break}++s}return this.length-=s,c}},{key:"_getBuffer",value:function(a){var i=h.allocUnsafe(a),s=this.head,c=1;for(s.data.copy(i),a-=s.data.length;s=s.next;){var l=s.data,p=a>l.length?l.length:a;if(l.copy(i,i.length-a,0,p),0==(a-=p)){p===l.length?(++c,this.head=s.next?s.next:this.tail=null):(this.head=s,s.data=l.slice(p));break}++c}return this.length-=c,i}},{key:n,value:function(a,i){return e(this,function(s){for(var c=1;c<arguments.length;c++){var l=null!=arguments[c]?arguments[c]:{};c%2?m(Object(l),!0).forEach(function(p){v(s,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):m(Object(l)).forEach(function(p){Object.defineProperty(s,p,Object.getOwnPropertyDescriptor(l,p))})}return s}({},i,{depth:0,customInspect:!1}))}}])&&b(o.prototype,t),r}()},{buffer:85,util:83}],295:[function(y,Q,K){(function(m){(function(){"use strict";function v(e,n){h(e,n),b(e)}function b(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function h(e,n){e.emit("error",n)}Q.exports={destroy:function(e,n){var r=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(n?n(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,m.nextTick(h,this,e)):m.nextTick(h,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(d){!n&&d?r._writableState?r._writableState.errorEmitted?m.nextTick(b,r):(r._writableState.errorEmitted=!0,m.nextTick(v,r,d)):m.nextTick(v,r,d):n?(m.nextTick(b,r),n(d)):m.nextTick(b,r)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,n){var r=e._readableState,o=e._writableState;r&&r.autoDestroy||o&&o.autoDestroy?e.destroy(n):e.emit("error",n)}}}).call(this)}).call(this,y("_process"))},{_process:278}],296:[function(y,Q,K){"use strict";var m=y("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function v(){}Q.exports=function b(h,e,n){if("function"==typeof e)return b(h,null,e);var g,u;e||(e={}),g=n||v,u=!1,n=function(){if(!u){u=!0;for(var x=arguments.length,f=new Array(x),T=0;T<x;T++)f[T]=arguments[T];g.apply(this,f)}};var r=e.readable||!1!==e.readable&&h.readable,o=e.writable||!1!==e.writable&&h.writable,t=function(){h.writable||a()},d=h._writableState&&h._writableState.finished,a=function(){o=!1,d=!0,r||n.call(h)},i=h._readableState&&h._readableState.endEmitted,s=function(){r=!1,i=!0,o||n.call(h)},c=function(g){n.call(h,g)},l=function(){var g;return r&&!i?(h._readableState&&h._readableState.ended||(g=new m),n.call(h,g)):o&&!d?(h._writableState&&h._writableState.ended||(g=new m),n.call(h,g)):void 0},p=function(){h.req.on("finish",a)};return function(g){return g.setHeader&&"function"==typeof g.abort}(h)?(h.on("complete",a),h.on("abort",l),h.req?p():h.on("request",p)):o&&!h._writableState&&(h.on("end",t),h.on("close",t)),h.on("end",s),h.on("finish",a),!1!==e.error&&h.on("error",c),h.on("close",l),function(){h.removeListener("complete",a),h.removeListener("abort",l),h.removeListener("request",p),h.req&&h.req.removeListener("finish",a),h.removeListener("end",t),h.removeListener("close",t),h.removeListener("finish",a),h.removeListener("end",s),h.removeListener("error",c),h.removeListener("close",l)}}},{"../../../errors":287}],297:[function(y,Q,K){Q.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(y,Q,K){"use strict";var m,v=y("../../../errors").codes,b=v.ERR_MISSING_ARGS,h=v.ERR_STREAM_DESTROYED;function e(d){if(d)throw d}function n(d,a,i,s){var p,g;p=s,g=!1,s=function(){g||(g=!0,p.apply(void 0,arguments))};var c=!1;d.on("close",function(){c=!0}),void 0===m&&(m=y("./end-of-stream")),m(d,{readable:a,writable:i},function(p){if(p)return s(p);c=!0,s()});var l=!1;return function(p){if(!c&&!l)return l=!0,function(g){return g.setHeader&&"function"==typeof g.abort}(d)?d.abort():"function"==typeof d.destroy?d.destroy():void s(p||new h("pipe"))}}function r(d){d()}function o(d,a){return d.pipe(a)}function t(d){return d.length?"function"!=typeof d[d.length-1]?e:d.pop():e}Q.exports=function(){for(var d=arguments.length,a=new Array(d),i=0;i<d;i++)a[i]=arguments[i];var s,c=t(a);if(Array.isArray(a[0])&&(a=a[0]),a.length<2)throw new b("streams");var l=a.map(function(p,g){var u=g<a.length-1;return n(p,u,g>0,function(x){s||(s=x),x&&l.forEach(r),u||(l.forEach(r),c(s))})});return a.reduce(o)}},{"../../../errors":287,"./end-of-stream":296}],299:[function(y,Q,K){"use strict";var m=y("../../../errors").codes.ERR_INVALID_OPT_VALUE;Q.exports={getHighWaterMark:function(v,b,h,e){var r,n=null!=(r=b).highWaterMark?r.highWaterMark:e?r[h]:null;if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new m(e?h:"highWaterMark",n);return Math.floor(n)}return v.objectMode?16:16384}}},{"../../../errors":287}],300:[function(y,Q,K){Q.exports=y("events").EventEmitter},{events:84}],301:[function(y,Q,K){"use strict";var m=y("safe-buffer").Buffer,v=m.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function b(i){var s;switch(this.encoding=function(c){var l=function(p){if(!p)return"utf8";for(var g;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(g)return;p=(""+p).toLowerCase(),g=!0}}(c);if("string"!=typeof l&&(m.isEncoding===v||!v(c)))throw new Error("Unknown encoding: "+c);return l||c}(i),this.encoding){case"utf16le":this.text=n,this.end=r,s=4;break;case"utf8":this.fillLast=e,s=4;break;case"base64":this.text=o,this.end=t,s=3;break;default:return this.write=d,void(this.end=a)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(s)}function h(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function e(i){var s=this.lastTotal-this.lastNeed,c=function(l,p,g){if(128!=(192&p[0]))return l.lastNeed=0,"\ufffd";if(l.lastNeed>1&&p.length>1){if(128!=(192&p[1]))return l.lastNeed=1,"\ufffd";if(l.lastNeed>2&&p.length>2&&128!=(192&p[2]))return l.lastNeed=2,"\ufffd"}}(this,i);return void 0!==c?c:this.lastNeed<=i.length?(i.copy(this.lastChar,s,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(i.copy(this.lastChar,s,0,i.length),void(this.lastNeed-=i.length))}function n(i,s){if((i.length-s)%2==0){var c=i.toString("utf16le",s);if(c){var l=c.charCodeAt(c.length-1);if(l>=55296&&l<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",s,i.length-1)}function r(i){var s=i&&i.length?this.write(i):"";return this.lastNeed?s+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):s}function o(i,s){var c=(i.length-s)%3;return 0===c?i.toString("base64",s):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",s,i.length-c))}function t(i){var s=i&&i.length?this.write(i):"";return this.lastNeed?s+this.lastChar.toString("base64",0,3-this.lastNeed):s}function d(i){return i.toString(this.encoding)}function a(i){return i&&i.length?this.write(i):""}K.StringDecoder=b,b.prototype.write=function(i){if(0===i.length)return"";var s,c;if(this.lastNeed){if(void 0===(s=this.fillLast(i)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<i.length?s?s+this.text(i,c):this.text(i,c):s||""},b.prototype.end=function(i){var s=i&&i.length?this.write(i):"";return this.lastNeed?s+"\ufffd":s},b.prototype.text=function(i,s){var c=function(p,g,u){var x=g.length-1;if(x<u)return 0;var f=h(g[x]);return f>=0?(f>0&&(p.lastNeed=f-1),f):--x<u||-2===f?0:(f=h(g[x]))>=0?(f>0&&(p.lastNeed=f-2),f):--x<u||-2===f?0:(f=h(g[x]))>=0?(f>0&&(2===f?f=0:p.lastNeed=f-3),f):0}(this,i,s);if(!this.lastNeed)return i.toString("utf8",s);this.lastTotal=c;var l=i.length-(c-this.lastNeed);return i.copy(this.lastChar,0,l),i.toString("utf8",s,l)},b.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},{"safe-buffer":285}],302:[function(y,Q,K){(function(m,v){(function(){var b=y("assert"),h=y("debug")("stream-parser");function e(c){h("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=-1,c._parserCallback=null,"function"==typeof c.push&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function n(c,l){b(!this._parserCallback,'there is already a "callback" set!'),b(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||e(this),h("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=l,this._parserState=0}function r(c,l){b(!this._parserCallback,'there is already a "callback" set!'),b(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||e(this),h("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=l,this._parserState=1}function o(c,l){b(!this._parserCallback,'There is already a "callback" set!'),b(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||e(this),h("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=l,this._parserState=2}function t(c,l,p){this._parserInit||e(this),h("write(%o bytes)",c.length),"function"==typeof l&&(p=l),i(this,c,null,p)}function d(c,l,p){this._parserInit||e(this),h("transform(%o bytes)",c.length),"function"!=typeof l&&(l=this._parserOutput),i(this,c,l,p)}function a(c,l,p,g){if(c._parserBytesLeft-=l.length,h("%o bytes left for stream piece",c._parserBytesLeft),0===c._parserState?(c._parserBuffers.push(l),c._parserBuffered+=l.length):2===c._parserState&&p(l),0!==c._parserBytesLeft)return g;var u=c._parserCallback;if(u&&0===c._parserState&&c._parserBuffers.length>1&&(l=v.concat(c._parserBuffers,c._parserBuffered)),0!==c._parserState&&(l=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=-1,c._parserBuffers.splice(0),u){var x=[];l&&x.push(l),p&&x.push(p);var f=u.length>x.length;f&&x.push(s(g));var T=u.apply(c,x);if(!f||g===T)return g}}Q.exports=function(c){var l=c&&"function"==typeof c._transform;if(!(l||c&&"function"==typeof c._write))throw new Error("must pass a Writable or Transform stream in");h("extending Parser into stream"),c._bytes=n,c._skipBytes=r,l&&(c._passthrough=o),l?c._transform=d:c._write=t};var i=s(function c(l,p,g,u){return l._parserBytesLeft<=0?u(new Error("got data but not currently parsing anything")):p.length<=l._parserBytesLeft?function(){return a(l,p,g,u)}:function(){var x=p.slice(0,l._parserBytesLeft);return a(l,x,g,function(f){return f?u(f):p.length>x.length?function(){return c(l,p.slice(x.length),g,u)}:void 0})}});function s(c){return function(){for(var l=c.apply(this,arguments);"function"==typeof l;)l=l();return l}}}).call(this)}).call(this,y("_process"),y("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(y,Q,K){(function(m){(function(){function v(){var b;try{b=K.storage.debug}catch{}return!b&&void 0!==m&&"env"in m&&(b=m.env.DEBUG),b}(K=Q.exports=y("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},K.formatArgs=function(b){var h=this.useColors;if(b[0]=(h?"%c":"")+this.namespace+(h?" %c":" ")+b[0]+(h?"%c ":" ")+"+"+K.humanize(this.diff),h){var e="color: "+this.color;b.splice(1,0,e,"color: inherit");var n=0,r=0;b[0].replace(/%[a-zA-Z%]/g,function(o){"%%"!==o&&(n++,"%c"===o&&(r=n))}),b.splice(r,0,e)}},K.save=function(b){try{null==b?K.storage.removeItem("debug"):K.storage.debug=b}catch{}},K.load=v,K.useColors=function(){return!!(typeof window<"u"&&window.process&&"renderer"===window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},K.storage=typeof chrome<"u"&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),K.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],K.formatters.j=function(b){try{return JSON.stringify(b)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}},K.enable(v())}).call(this)}).call(this,y("_process"))},{"./debug":304,_process:278}],304:[function(y,Q,K){var m;function v(b){function h(){if(h.enabled){var e=h,n=+new Date;e.diff=n-(m||n),e.prev=m,e.curr=n,m=n;for(var o=new Array(arguments.length),t=0;t<o.length;t++)o[t]=arguments[t];o[0]=K.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var d=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(i,s){if("%%"===i)return i;d++;var c=K.formatters[s];return"function"==typeof c&&(i=c.call(e,o[d]),o.splice(d,1),d--),i}),K.formatArgs.call(e,o),(h.log||K.log||console.log.bind(console)).apply(e,o)}}return h.namespace=b,h.enabled=K.enabled(b),h.useColors=K.useColors(),h.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return K.colors[Math.abs(r)%K.colors.length]}(b),"function"==typeof K.init&&K.init(h),h}(K=Q.exports=v.debug=v.default=v).coerce=function(b){return b instanceof Error?b.stack||b.message:b},K.disable=function(){K.enable("")},K.enable=function(b){K.save(b),K.names=[],K.skips=[];for(var h=("string"==typeof b?b:"").split(/[\s,]+/),e=h.length,n=0;n<e;n++)h[n]&&("-"===(b=h[n].replace(/\*/g,".*?"))[0]?K.skips.push(new RegExp("^"+b.substr(1)+"$")):K.names.push(new RegExp("^"+b+"$")))},K.enabled=function(b){var h,e;for(h=0,e=K.skips.length;h<e;h++)if(K.skips[h].test(b))return!1;for(h=0,e=K.names.length;h<e;h++)if(K.names[h].test(b))return!0;return!1},K.humanize=y("ms"),K.names=[],K.skips=[],K.formatters={}},{ms:305}],305:[function(y,Q,K){var m=1e3,v=6e4,b=60*v,h=24*b;function e(n,r,o){if(!(n<r))return n<1.5*r?Math.floor(n/r)+" "+o:Math.ceil(n/r)+" "+o+"s"}Q.exports=function(n,r){r=r||{};var o,d,t=typeof n;if("string"===t&&n.length>0)return function(d){if(!((d=String(d)).length>100)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(d);if(a){var i=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*h;case"hours":case"hour":case"hrs":case"hr":case"h":return i*b;case"minutes":case"minute":case"mins":case"min":case"m":return i*v;case"seconds":case"second":case"secs":case"sec":case"s":return i*m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(n);if("number"===t&&!1===isNaN(n))return r.long?e(o=n,h,"day")||e(o,b,"hour")||e(o,v,"minute")||e(o,m,"second")||o+" ms":(d=n)>=h?Math.round(d/h)+"d":d>=b?Math.round(d/b)+"h":d>=v?Math.round(d/v)+"m":d>=m?Math.round(d/m)+"s":d+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))}},{}],306:[function(y,Q,K){"use strict";var m=y("parenthesis");Q.exports=function(v,b,h){if(null==v)throw Error("First argument should be a string");if(null==b)throw Error("Separator should be a string or a RegExp");h?("string"==typeof h||Array.isArray(h))&&(h={ignore:h}):h={},null==h.escape&&(h.escape=!0),null==h.ignore?h.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof h.ignore&&(h.ignore=[h.ignore]),h.ignore=h.ignore.map(function(a){return 1===a.length&&(a+=a),a}));var e=m.parse(v,{flat:!0,brackets:h.ignore}),n=e[0].split(b);if(h.escape){for(var r=[],o=0;o<n.length;o++){var t=n[o];"\\"===t[t.length-1]&&"\\"!==t[t.length-2]?(r.push(t+b+n[o+1]),o++):r.push(t)}n=r}for(o=0;o<n.length;o++)e[0]=n[o],n[o]=m.stringify(e,{flat:!0});return n}},{parenthesis:248}],307:[function(y,Q,K){"use strict";Q.exports=function(m){for(var v=m.length,b=new Array(v),h=new Array(v),e=new Array(v),n=new Array(v),r=new Array(v),o=new Array(v),t=0;t<v;++t)b[t]=-1,h[t]=0,e[t]=!1,n[t]=0,r[t]=-1,o[t]=[];var d,a=0,i=[],s=[];function c(g){var u=[g],x=[g];for(b[g]=h[g]=a,e[g]=!0,a+=1;x.length>0;){var f=m[g=x[x.length-1]];if(n[g]<f.length){for(var T=n[g];T<f.length;++T){var _=f[T];if(b[_]<0){b[_]=h[_]=a,e[_]=!0,a+=1,u.push(_),x.push(_);break}e[_]&&(h[g]=0|Math.min(h[g],h[_])),r[_]>=0&&o[g].push(r[_])}n[g]=T}else{if(h[g]===b[g]){var k=[],w=[],C=0;for(T=u.length-1;T>=0;--T){var A=u[T];if(e[A]=!1,k.push(A),w.push(o[A]),C+=o[A].length,r[A]=i.length,A===g){u.length=T;break}}i.push(k);var O=new Array(C);for(T=0;T<w.length;T++)for(var P=0;P<w[T].length;P++)O[--C]=w[T][P];s.push(O)}x.pop()}}}for(t=0;t<v;++t)b[t]<0&&c(t);for(t=0;t<s.length;t++){var l=s[t];if(0!==l.length){l.sort(function(g,u){return g-u}),d=[l[0]];for(var p=1;p<l.length;p++)l[p]!==l[p-1]&&d.push(l[p]);s[t]=d}}return{components:i,adjacencyList:s}}},{}],308:[function(y,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var v=2*Math.PI,b=function(n,r,o,t,d,a,i){var s=n.x,c=n.y;return{x:t*(s*=r)-d*(c*=o)+a,y:d*s+t*c+i}},h=function(n,r){var o=1.5707963267948966===r?.551915024494:-1.5707963267948966===r?-.551915024494:1.3333333333333333*Math.tan(r/4),t=Math.cos(n),d=Math.sin(n),a=Math.cos(n+r),i=Math.sin(n+r);return[{x:t-d*o,y:d+t*o},{x:a+i*o,y:i-a*o},{x:a,y:i}]},e=function(n,r,o,t){var d=n*o+r*t;return d>1&&(d=1),d<-1&&(d=-1),(n*t-r*o<0?-1:1)*Math.acos(d)};K.default=function(n){var r=n.px,o=n.py,t=n.cx,d=n.cy,a=n.rx,i=n.ry,s=n.xAxisRotation,c=void 0===s?0:s,l=n.largeArcFlag,p=void 0===l?0:l,g=n.sweepFlag,u=void 0===g?0:g,x=[];if(0===a||0===i)return[];var f=Math.sin(c*v/360),T=Math.cos(c*v/360),_=T*(r-t)/2+f*(o-d)/2,k=-f*(r-t)/2+T*(o-d)/2;if(0===_&&0===k)return[];a=Math.abs(a),i=Math.abs(i);var w=Math.pow(_,2)/Math.pow(a,2)+Math.pow(k,2)/Math.pow(i,2);w>1&&(a*=Math.sqrt(w),i*=Math.sqrt(w));var A=function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(o,t){var d=[],a=!0,i=!1,s=void 0;try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done)&&(d.push(c.value),!t||d.length!==t);a=!0);}catch(p){i=!0,s=p}finally{try{!a&&l.return&&l.return()}finally{if(i)throw s}}return d}(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(V,X,J,G,Z,re,j,B,H,ee,U,$){var q=Math.pow(Z,2),te=Math.pow(re,2),ne=Math.pow(U,2),se=Math.pow($,2),ie=q*te-q*se-te*ne;ie<0&&(ie=0),ie/=q*se+te*ne;var ue=(ie=Math.sqrt(ie)*(j===B?-1:1))*Z/re*$,le=ie*-re/Z*U,de=ee*ue-H*le+(V+J)/2,be=H*ue+ee*le+(X+G)/2,_e=(U-ue)/Z,xe=($-le)/re,Ee=(-U-ue)/Z,he=(-$-le)/re,me=e(1,0,_e,xe),Se=e(_e,xe,Ee,he);return 0===B&&Se>0&&(Se-=v),1===B&&Se<0&&(Se+=v),[de,be,me,Se]}(r,o,t,d,a,i,p,u,f,T,_,k),4),O=A[0],P=A[1],S=A[2],E=A[3],D=Math.abs(E)/(v/4);Math.abs(1-D)<1e-7&&(D=1);var z=Math.max(Math.ceil(D),1);E/=z;for(var N=0;N<z;N++)x.push(h(S,E)),S+=E;return x.map(function(V){var X=b(V[0],a,i,T,f,O,P),J=X.x,G=X.y,Z=b(V[1],a,i,T,f,O,P),re=Z.x,j=Z.y,B=b(V[2],a,i,T,f,O,P);return{x1:J,y1:G,x2:re,y2:j,x:B.x,y:B.y}})},Q.exports=K.default},{}],309:[function(y,Q,K){"use strict";var m=y("parse-svg-path"),v=y("abs-svg-path"),b=y("normalize-svg-path"),h=y("is-svg-path"),e=y("assert");Q.exports=function(n){if(Array.isArray(n)&&1===n.length&&"string"==typeof n[0]&&(n=n[0]),"string"==typeof n&&(e(h(n),"String is not an SVG path."),n=m(n)),e(Array.isArray(n),"Argument should be a string or an array of path segments."),n=v(n),!(n=b(n)).length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],o=0,t=n.length;o<t;o++)for(var d=n[o].slice(1),a=0;a<d.length;a+=2)d[a+0]<r[0]&&(r[0]=d[a+0]),d[a+1]<r[1]&&(r[1]=d[a+1]),d[a+0]>r[2]&&(r[2]=d[a+0]),d[a+1]>r[3]&&(r[3]=d[a+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(y,Q,K){"use strict";Q.exports=function(h){for(var e,n=[],r=0,o=0,t=0,d=0,a=null,i=null,s=0,c=0,l=0,p=h.length;l<p;l++){var g=h[l],u=g[0];switch(u){case"M":t=g[1],d=g[2];break;case"A":var x=m({px:s,py:c,cx:g[6],cy:g[7],rx:g[1],ry:g[2],xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5]});if(!x.length)continue;for(var f,T=0;T<x.length;T++)g=["C",(f=x[T]).x1,f.y1,f.x2,f.y2,f.x,f.y],T<x.length-1&&n.push(g);break;case"S":var _=s,k=c;"C"!=e&&"S"!=e||(_+=_-r,k+=k-o),g=["C",_,k,g[1],g[2],g[3],g[4]];break;case"T":"Q"==e||"T"==e?(a=2*s-a,i=2*c-i):(a=s,i=c),g=b(s,c,a,i,g[1],g[2]);break;case"Q":a=g[1],i=g[2],g=b(s,c,g[1],g[2],g[3],g[4]);break;case"L":g=v(s,c,g[1],g[2]);break;case"H":g=v(s,c,g[1],c);break;case"V":g=v(s,c,s,g[1]);break;case"Z":g=v(s,c,t,d)}e=u,s=g[g.length-2],c=g[g.length-1],g.length>4?(r=g[g.length-4],o=g[g.length-3]):(r=s,o=c),n.push(g)}return n};var m=y("svg-arc-to-cubic-bezier");function v(h,e,n,r){return["C",h,e,n,r,n,r]}function b(h,e,n,r,o,t){return["C",h/3+2/3*n,e/3+2/3*r,o/3+2/3*n,t/3+2/3*r,o,t]}},{"svg-arc-to-cubic-bezier":308}],311:[function(y,Q,K){"use strict";var m,v=y("svg-path-bounds"),b=y("parse-svg-path"),h=y("draw-svg-path"),e=y("is-svg-path"),n=y("bitmap-sdf"),r=document.createElement("canvas"),o=r.getContext("2d");Q.exports=function(t,d){if(!e(t))throw Error("Argument should be valid svg path string");var a,i;d||(d={}),d.shape?(a=d.shape[0],i=d.shape[1]):(a=r.width=d.w||d.width||200,i=r.height=d.h||d.height||200);var s=Math.min(a,i),c=d.stroke||0,l=d.viewbox||d.viewBox||v(t),p=[a/(l[2]-l[0]),i/(l[3]-l[1])],g=Math.min(p[0]||0,p[1]||0)/2;if(o.fillStyle="black",o.fillRect(0,0,a,i),o.fillStyle="white",c&&("number"!=typeof c&&(c=1),o.strokeStyle=c>0?"white":"black",o.lineWidth=Math.abs(c)),o.translate(.5*a,.5*i),o.scale(g,g),function(){if(null!=m)return m;var f=document.createElement("canvas").getContext("2d");if(f.canvas.width=f.canvas.height=1,!window.Path2D)return m=!1;var T=new Path2D("M0,0h1v1h-1v-1Z");f.fillStyle="black",f.fill(T);var _=f.getImageData(0,0,1,1);return m=_&&_.data&&255===_.data[3]}()){var u=new Path2D(t);o.fill(u),c&&o.stroke(u)}else{var x=b(t);h(o,x),o.fill(),c&&o.stroke()}return o.setTransform(1,0,0,1,0,0),n(o,{cutoff:null!=d.cutoff?d.cutoff:.5,radius:null!=d.radius?d.radius:.5*s})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(y,Q,K){(function(m,v){(function(){var b=y("process/browser.js").nextTick,h=Function.prototype.apply,e=Array.prototype.slice,n={},r=0;function o(t,d){this._id=t,this._clearFn=d}K.setTimeout=function(){return new o(h.call(setTimeout,window,arguments),clearTimeout)},K.setInterval=function(){return new o(h.call(setInterval,window,arguments),clearInterval)},K.clearTimeout=K.clearInterval=function(t){t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},K.enroll=function(t,d){clearTimeout(t._idleTimeoutId),t._idleTimeout=d},K.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},K._unrefActive=K.active=function(t){clearTimeout(t._idleTimeoutId);var d=t._idleTimeout;d>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},d))},K.setImmediate="function"==typeof m?m:function(t){var d=r++,a=!(arguments.length<2)&&e.call(arguments,1);return n[d]=!0,b(function(){n[d]&&(a?t.apply(null,a):t.call(null),K.clearImmediate(d))}),d},K.clearImmediate="function"==typeof v?v:function(t){delete n[t]}}).call(this)}).call(this,y("timers").setImmediate,y("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(y,Q,K){!function(m){var v=/^\s+/,b=/\s+$/,h=0,e=m.round,n=m.min,r=m.max,o=m.random;function t(H,ee){if(ee=ee||{},(H=H||"")instanceof t)return H;if(!(this instanceof t))return new t(H,ee);var $,be,_e,q,te,ne,se,ie,ue,le,U=(q={r:0,g:0,b:0},te=1,ne=null,se=null,ie=null,ue=!1,le=!1,"string"==typeof($=H)&&($=function(xe){xe=xe.replace(v,"").replace(b,"").toLowerCase();var Ee,he=!1;if(O[xe])xe=O[xe],he=!0;else if("transparent"==xe)return{r:0,g:0,b:0,a:0,format:"name"};return(Ee=j.rgb.exec(xe))?{r:Ee[1],g:Ee[2],b:Ee[3]}:(Ee=j.rgba.exec(xe))?{r:Ee[1],g:Ee[2],b:Ee[3],a:Ee[4]}:(Ee=j.hsl.exec(xe))?{h:Ee[1],s:Ee[2],l:Ee[3]}:(Ee=j.hsla.exec(xe))?{h:Ee[1],s:Ee[2],l:Ee[3],a:Ee[4]}:(Ee=j.hsv.exec(xe))?{h:Ee[1],s:Ee[2],v:Ee[3]}:(Ee=j.hsva.exec(xe))?{h:Ee[1],s:Ee[2],v:Ee[3],a:Ee[4]}:(Ee=j.hex8.exec(xe))?{r:z(Ee[1]),g:z(Ee[2]),b:z(Ee[3]),a:J(Ee[4]),format:he?"name":"hex8"}:(Ee=j.hex6.exec(xe))?{r:z(Ee[1]),g:z(Ee[2]),b:z(Ee[3]),format:he?"name":"hex"}:(Ee=j.hex4.exec(xe))?{r:z(Ee[1]+""+Ee[1]),g:z(Ee[2]+""+Ee[2]),b:z(Ee[3]+""+Ee[3]),a:J(Ee[4]+""+Ee[4]),format:he?"name":"hex8"}:!!(Ee=j.hex3.exec(xe))&&{r:z(Ee[1]+""+Ee[1]),g:z(Ee[2]+""+Ee[2]),b:z(Ee[3]+""+Ee[3]),format:he?"name":"hex"}}($)),"object"==typeof $&&(B($.r)&&B($.g)&&B($.b)?(be=$.g,_e=$.b,q={r:255*E($.r,255),g:255*E(be,255),b:255*E(_e,255)},ue=!0,le="%"===String($.r).substr(-1)?"prgb":"rgb"):B($.h)&&B($.s)&&B($.v)?(ne=V($.s),se=V($.v),q=function(xe,Ee,he){xe=6*E(xe,360),Ee=E(Ee,100),he=E(he,100);var me=m.floor(xe),Se=xe-me,Me=he*(1-Ee),Ie=he*(1-Se*Ee),Fe=he*(1-(1-Se)*Ee),Ne=me%6;return{r:255*[he,Ie,Me,Me,Fe,he][Ne],g:255*[Fe,he,he,Ie,Me,Me][Ne],b:255*[Me,Me,Fe,he,he,Ie][Ne]}}($.h,ne,se),ue=!0,le="hsv"):B($.h)&&B($.s)&&B($.l)&&(ne=V($.s),ie=V($.l),q=function(xe,Ee,he){var me,Se,Me;function Ie(De,$e,Re){return Re<0&&(Re+=1),Re>1&&(Re-=1),Re<1/6?De+6*($e-De)*Re:Re<.5?$e:Re<2/3?De+($e-De)*(2/3-Re)*6:De}if(xe=E(xe,360),Ee=E(Ee,100),he=E(he,100),0===Ee)me=Se=Me=he;else{var Fe=he<.5?he*(1+Ee):he+Ee-he*Ee,Ne=2*he-Fe;me=Ie(Ne,Fe,xe+1/3),Se=Ie(Ne,Fe,xe),Me=Ie(Ne,Fe,xe-1/3)}return{r:255*me,g:255*Se,b:255*Me}}($.h,ne,ie),ue=!0,le="hsl"),$.hasOwnProperty("a")&&(te=$.a)),te=S(te),{ok:ue,format:$.format||le,r:n(255,r(q.r,0)),g:n(255,r(q.g,0)),b:n(255,r(q.b,0)),a:te});this._originalInput=H,this._r=U.r,this._g=U.g,this._b=U.b,this._a=U.a,this._roundA=e(100*this._a)/100,this._format=ee.format||U.format,this._gradientType=ee.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=U.ok,this._tc_id=h++}function d(H,ee,U){H=E(H,255),ee=E(ee,255),U=E(U,255);var $,q,te=r(H,ee,U),ne=n(H,ee,U),se=(te+ne)/2;if(te==ne)$=q=0;else{var ie=te-ne;switch(q=se>.5?ie/(2-te-ne):ie/(te+ne),te){case H:$=(ee-U)/ie+(ee<U?6:0);break;case ee:$=(U-H)/ie+2;break;case U:$=(H-ee)/ie+4}$/=6}return{h:$,s:q,l:se}}function a(H,ee,U){H=E(H,255),ee=E(ee,255),U=E(U,255);var $,q,te=r(H,ee,U),ne=n(H,ee,U),se=te,ie=te-ne;if(q=0===te?0:ie/te,te==ne)$=0;else{switch(te){case H:$=(ee-U)/ie+(ee<U?6:0);break;case ee:$=(U-H)/ie+2;break;case U:$=(H-ee)/ie+4}$/=6}return{h:$,s:q,v:se}}function i(H,ee,U,$){var q=[N(e(H).toString(16)),N(e(ee).toString(16)),N(e(U).toString(16))];return $&&q[0].charAt(0)==q[0].charAt(1)&&q[1].charAt(0)==q[1].charAt(1)&&q[2].charAt(0)==q[2].charAt(1)?q[0].charAt(0)+q[1].charAt(0)+q[2].charAt(0):q.join("")}function s(H,ee,U,$){return[N(X($)),N(e(H).toString(16)),N(e(ee).toString(16)),N(e(U).toString(16))].join("")}function c(H,ee){ee=0===ee?0:ee||10;var U=t(H).toHsl();return U.s-=ee/100,U.s=D(U.s),t(U)}function l(H,ee){ee=0===ee?0:ee||10;var U=t(H).toHsl();return U.s+=ee/100,U.s=D(U.s),t(U)}function p(H){return t(H).desaturate(100)}function g(H,ee){ee=0===ee?0:ee||10;var U=t(H).toHsl();return U.l+=ee/100,U.l=D(U.l),t(U)}function u(H,ee){ee=0===ee?0:ee||10;var U=t(H).toRgb();return U.r=r(0,n(255,U.r-e(-ee/100*255))),U.g=r(0,n(255,U.g-e(-ee/100*255))),U.b=r(0,n(255,U.b-e(-ee/100*255))),t(U)}function x(H,ee){ee=0===ee?0:ee||10;var U=t(H).toHsl();return U.l-=ee/100,U.l=D(U.l),t(U)}function f(H,ee){var U=t(H).toHsl(),$=(U.h+ee)%360;return U.h=$<0?360+$:$,t(U)}function T(H){var ee=t(H).toHsl();return ee.h=(ee.h+180)%360,t(ee)}function _(H){var ee=t(H).toHsl(),U=ee.h;return[t(H),t({h:(U+120)%360,s:ee.s,l:ee.l}),t({h:(U+240)%360,s:ee.s,l:ee.l})]}function k(H){var ee=t(H).toHsl(),U=ee.h;return[t(H),t({h:(U+90)%360,s:ee.s,l:ee.l}),t({h:(U+180)%360,s:ee.s,l:ee.l}),t({h:(U+270)%360,s:ee.s,l:ee.l})]}function w(H){var ee=t(H).toHsl(),U=ee.h;return[t(H),t({h:(U+72)%360,s:ee.s,l:ee.l}),t({h:(U+216)%360,s:ee.s,l:ee.l})]}function C(H,ee,U){ee=ee||6,U=U||30;var $=t(H).toHsl(),q=360/U,te=[t(H)];for($.h=($.h-(q*ee>>1)+720)%360;--ee;)$.h=($.h+q)%360,te.push(t($));return te}function A(H,ee){ee=ee||6;for(var U=t(H).toHsv(),$=U.h,q=U.s,te=U.v,ne=[],se=1/ee;ee--;)ne.push(t({h:$,s:q,v:te})),te=(te+se)%1;return ne}t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var H=this.toRgb();return(299*H.r+587*H.g+114*H.b)/1e3},getLuminance:function(){var H,ee,U,$=this.toRgb();return ee=$.g/255,U=$.b/255,.2126*((H=$.r/255)<=.03928?H/12.92:m.pow((H+.055)/1.055,2.4))+.7152*(ee<=.03928?ee/12.92:m.pow((ee+.055)/1.055,2.4))+.0722*(U<=.03928?U/12.92:m.pow((U+.055)/1.055,2.4))},setAlpha:function(H){return this._a=S(H),this._roundA=e(100*this._a)/100,this},toHsv:function(){var H=a(this._r,this._g,this._b);return{h:360*H.h,s:H.s,v:H.v,a:this._a}},toHsvString:function(){var H=a(this._r,this._g,this._b),ee=e(360*H.h),U=e(100*H.s),$=e(100*H.v);return 1==this._a?"hsv("+ee+", "+U+"%, "+$+"%)":"hsva("+ee+", "+U+"%, "+$+"%, "+this._roundA+")"},toHsl:function(){var H=d(this._r,this._g,this._b);return{h:360*H.h,s:H.s,l:H.l,a:this._a}},toHslString:function(){var H=d(this._r,this._g,this._b),ee=e(360*H.h),U=e(100*H.s),$=e(100*H.l);return 1==this._a?"hsl("+ee+", "+U+"%, "+$+"%)":"hsla("+ee+", "+U+"%, "+$+"%, "+this._roundA+")"},toHex:function(H){return i(this._r,this._g,this._b,H)},toHexString:function(H){return"#"+this.toHex(H)},toHex8:function(H){return U=this._g,$=this._b,q=this._a,te=H,ne=[N(e(this._r).toString(16)),N(e(U).toString(16)),N(e($).toString(16)),N(X(q))],te&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)&&ne[3].charAt(0)==ne[3].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0)+ne[3].charAt(0):ne.join("");var U,$,q,te,ne},toHex8String:function(H){return"#"+this.toHex8(H)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*E(this._r,255))+"%",g:e(100*E(this._g,255))+"%",b:e(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%)":"rgba("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(P[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(H){var ee="#"+s(this._r,this._g,this._b,this._a),U=ee,$=this._gradientType?"GradientType = 1, ":"";if(H){var q=t(H);U="#"+s(q._r,q._g,q._b,q._a)}return"progid:DXImageTransform.Microsoft.gradient("+$+"startColorstr="+ee+",endColorstr="+U+")"},toString:function(H){var ee=!!H;H=H||this._format;var U=!1;return ee||!(this._a<1&&this._a>=0)||"hex"!==H&&"hex6"!==H&&"hex3"!==H&&"hex4"!==H&&"hex8"!==H&&"name"!==H?("rgb"===H&&(U=this.toRgbString()),"prgb"===H&&(U=this.toPercentageRgbString()),"hex"!==H&&"hex6"!==H||(U=this.toHexString()),"hex3"===H&&(U=this.toHexString(!0)),"hex4"===H&&(U=this.toHex8String(!0)),"hex8"===H&&(U=this.toHex8String()),"name"===H&&(U=this.toName()),"hsl"===H&&(U=this.toHslString()),"hsv"===H&&(U=this.toHsvString()),U||this.toHexString()):"name"===H&&0===this._a?this.toName():this.toRgbString()},clone:function(){return t(this.toString())},_applyModification:function(H,ee){var U=H.apply(null,[this].concat([].slice.call(ee)));return this._r=U._r,this._g=U._g,this._b=U._b,this.setAlpha(U._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(f,arguments)},_applyCombination:function(H,ee){return H.apply(null,[this].concat([].slice.call(ee)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},t.fromRatio=function(H,ee){if("object"==typeof H){var U={};for(var $ in H)H.hasOwnProperty($)&&(U[$]="a"===$?H[$]:V(H[$]));H=U}return t(H,ee)},t.equals=function(H,ee){return!(!H||!ee)&&t(H).toRgbString()==t(ee).toRgbString()},t.random=function(){return t.fromRatio({r:o(),g:o(),b:o()})},t.mix=function(H,ee,U){U=0===U?0:U||50;var $=t(H).toRgb(),q=t(ee).toRgb(),te=U/100;return t({r:(q.r-$.r)*te+$.r,g:(q.g-$.g)*te+$.g,b:(q.b-$.b)*te+$.b,a:(q.a-$.a)*te+$.a})},t.readability=function(H,ee){var U=t(H),$=t(ee);return(m.max(U.getLuminance(),$.getLuminance())+.05)/(m.min(U.getLuminance(),$.getLuminance())+.05)},t.isReadable=function(H,ee,U){var $,q,ne,se,ie,te=t.readability(H,ee);switch(q=!1,(ne=U,"AA"!==(se=((ne=ne||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==se&&(se="AA"),"small"!==(ie=(ne.size||"small").toLowerCase())&&"large"!==ie&&(ie="small"),$={level:se,size:ie}).level+$.size){case"AAsmall":case"AAAlarge":q=te>=4.5;break;case"AAlarge":q=te>=3;break;case"AAAsmall":q=te>=7}return q},t.mostReadable=function(H,ee,U){var $,q,te,ne,se=null,ie=0;q=(U=U||{}).includeFallbackColors,te=U.level,ne=U.size;for(var ue=0;ue<ee.length;ue++)($=t.readability(H,ee[ue]))>ie&&(ie=$,se=t(ee[ue]));return t.isReadable(H,se,{level:te,size:ne})||!q?se:(U.includeFallbackColors=!1,t.mostReadable(H,["#fff","#000"],U))};var O=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=t.hexNames=function(H){var ee={};for(var U in H)H.hasOwnProperty(U)&&(ee[H[U]]=U);return ee}(O);function S(H){return H=parseFloat(H),(isNaN(H)||H<0||H>1)&&(H=1),H}function E(H,ee){var $;"string"==typeof($=H)&&-1!=$.indexOf(".")&&1===parseFloat($)&&(H="100%");var U=function($){return"string"==typeof $&&-1!=$.indexOf("%")}(H);return H=n(ee,r(0,parseFloat(H))),U&&(H=parseInt(H*ee,10)/100),m.abs(H-ee)<1e-6?1:H%ee/parseFloat(ee)}function D(H){return n(1,r(0,H))}function z(H){return parseInt(H,16)}function N(H){return 1==H.length?"0"+H:""+H}function V(H){return H<=1&&(H=100*H+"%"),H}function X(H){return m.round(255*parseFloat(H)).toString(16)}function J(H){return z(H)/255}var G,Z,re,j=(Z="[\\s|\\(]+("+(G="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+G+")[,|\\s]+("+G+")\\s*\\)?",re="[\\s|\\(]+("+G+")[,|\\s]+("+G+")[,|\\s]+("+G+")[,|\\s]+("+G+")\\s*\\)?",{CSS_UNIT:new RegExp(G),rgb:new RegExp("rgb"+Z),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+Z),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+Z),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function B(H){return!!j.CSS_UNIT.exec(H)}void 0!==Q&&Q.exports?Q.exports=t:window.tinycolor=t}(Math)},{}],314:[function(y,Q,K){"use strict";Q.exports=v,Q.exports.float32=Q.exports.float=v,Q.exports.fract32=Q.exports.fract=function(b,h){if(b.length){if(b instanceof Float32Array)return new Float32Array(b.length);h instanceof Float32Array||(h=v(b));for(var e=0,n=h.length;e<n;e++)h[e]=b[e]-h[e];return h}return v(b-v(b))};var m=new Float32Array(1);function v(b){return b.length?b instanceof Float32Array?b:new Float32Array(b):(m[0]=b,m[0])}},{}],315:[function(y,Q,K){"use strict";var m=y("parse-unit");function v(h,e){var n=m(getComputedStyle(h).getPropertyValue(e));return n[0]*b(n[1],h)}function b(h,e){switch(e=e||document.body,h=(h||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),h){case"%":return e.clientHeight/100;case"ch":case"ex":return function(n,r){var o=document.createElement("div");o.style["font-size"]="128"+n,r.appendChild(o);var t=v(o,"font-size")/128;return r.removeChild(o),t}(h,e);case"em":return v(e,"font-size");case"rem":return v(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}Q.exports=b},{"parse-unit":251}],316:[function(y,Q,K){var m,v;m=this,v=function(m){"use strict";function v(s){return s}function b(s){if(null==s)return v;var c,l,p=s.scale[0],g=s.scale[1],u=s.translate[0],x=s.translate[1];return function(f,T){T||(c=l=0);var _=2,k=f.length,w=new Array(k);for(w[0]=(c+=f[0])*p+u,w[1]=(l+=f[1])*g+x;_<k;)w[_]=f[_],++_;return w}}function h(s){var c,l=b(s.transform),p=1/0,g=p,u=-p,x=-p;function f(_){(_=l(_))[0]<p&&(p=_[0]),_[0]>u&&(u=_[0]),_[1]<g&&(g=_[1]),_[1]>x&&(x=_[1])}function T(_){switch(_.type){case"GeometryCollection":_.geometries.forEach(T);break;case"Point":f(_.coordinates);break;case"MultiPoint":_.coordinates.forEach(f)}}for(c in s.arcs.forEach(function(_){for(var k,w=-1,C=_.length;++w<C;)(k=l(_[w],w))[0]<p&&(p=k[0]),k[0]>u&&(u=k[0]),k[1]<g&&(g=k[1]),k[1]>x&&(x=k[1])}),s.objects)T(s.objects[c]);return[p,g,u,x]}function e(s,c){var l=c.id,p=c.bbox,g=c.properties??{},u=n(s,c);return null==l&&null==p?{type:"Feature",properties:g,geometry:u}:null==p?{type:"Feature",id:l,properties:g,geometry:u}:{type:"Feature",id:l,bbox:p,properties:g,geometry:u}}function n(s,c){var l=b(s.transform),p=s.arcs;function g(_,k){k.length&&k.pop();for(var w=p[_<0?~_:_],C=0,A=w.length;C<A;++C)k.push(l(w[C],C));_<0&&function(O,P){for(var S,E=O.length,D=E-P;D<--E;)S=O[D],O[D++]=O[E],O[E]=S}(k,A)}function u(_){return l(_)}function x(_){for(var k=[],w=0,C=_.length;w<C;++w)g(_[w],k);return k.length<2&&k.push(k[0]),k}function f(_){for(var k=x(_);k.length<4;)k.push(k[0]);return k}function T(_){return _.map(f)}return function _(k){var w,C=k.type;switch(C){case"GeometryCollection":return{type:C,geometries:k.geometries.map(_)};case"Point":w=u(k.coordinates);break;case"MultiPoint":w=k.coordinates.map(u);break;case"LineString":w=x(k.arcs);break;case"MultiLineString":w=k.arcs.map(x);break;case"Polygon":w=T(k.arcs);break;case"MultiPolygon":w=k.arcs.map(T);break;default:return null}return{type:C,coordinates:w}}(c)}function r(s,c){var l={},p={},g={},u=[],x=-1;function f(T,_){for(var k in T){var w=T[k];delete _[w.start],delete w.start,delete w.end,w.forEach(function(C){l[C<0?~C:C]=1}),u.push(w)}}return c.forEach(function(T,_){var k,w=s.arcs[T<0?~T:T];w.length<3&&!w[1][0]&&!w[1][1]&&(k=c[++x],c[x]=T,c[_]=k)}),c.forEach(function(T){var _,k,S,E,D,z,w=(z=(D=s.arcs[(S=T)<0?~S:S])[0],s.transform?(E=[0,0],D.forEach(function(N){E[0]+=N[0],E[1]+=N[1]})):E=D[D.length-1],S<0?[E,z]:[z,E]),C=w[0],A=w[1];if(_=g[C])if(delete g[_.end],_.push(T),_.end=A,k=p[A]){delete p[k.start];var O=k===_?_:_.concat(k);p[O.start=_.start]=g[O.end=k.end]=O}else p[_.start]=g[_.end]=_;else if(_=p[A])if(delete p[_.start],_.unshift(T),_.start=C,k=g[C]){delete g[k.end];var P=k===_?_:k.concat(_);p[P.start=k.start]=g[P.end=_.end]=P}else p[_.start]=g[_.end]=_;else p[(_=[T]).start=C]=g[_.end=A]=_}),f(g,p),f(p,g),c.forEach(function(T){l[T<0?~T:T]||u.push([T])}),u}function o(s,c,l){var p,g,u;if(arguments.length>1)p=t(0,c,l);else for(g=0,p=new Array(u=s.arcs.length);g<u;++g)p[g]=g;return{type:"MultiLineString",arcs:r(s,p)}}function t(s,c,l){var p,g=[],u=[];function x(_){var k=_<0?~_:_;(u[k]||(u[k]=[])).push({i:_,g:p})}function f(_){_.forEach(x)}function T(_){_.forEach(f)}return function _(k){switch(p=k,k.type){case"GeometryCollection":k.geometries.forEach(_);break;case"LineString":f(k.arcs);break;case"MultiLineString":case"Polygon":T(k.arcs);break;case"MultiPolygon":k.arcs.forEach(T)}}(c),u.forEach(null==l?function(_){g.push(_[0].i)}:function(_){l(_[0].g,_[_.length-1].g)&&g.push(_[0].i)}),g}function d(s,c){var l={},p=[],g=[];function u(f){f.forEach(function(T){T.forEach(function(_){(l[_=_<0?~_:_]||(l[_]=[])).push(f)})}),p.push(f)}function x(f){return function(T){for(var _,k=-1,w=T.length,C=T[w-1],A=0;++k<w;)A+=(_=C)[0]*(C=T[k])[1]-_[1]*C[0];return Math.abs(A)}(n(s,{type:"Polygon",arcs:[f]}).coordinates[0])}return c.forEach(function f(T){switch(T.type){case"GeometryCollection":T.geometries.forEach(f);break;case"Polygon":u(T.arcs);break;case"MultiPolygon":T.arcs.forEach(u)}}),p.forEach(function(f){if(!f._){var T=[],_=[f];for(f._=1,g.push(T);f=_.pop();)T.push(f),f.forEach(function(k){k.forEach(function(w){l[w<0?~w:w].forEach(function(C){C._||(C._=1,_.push(C))})})})}}),p.forEach(function(f){delete f._}),{type:"MultiPolygon",arcs:g.map(function(f){var T,_=[];if(f.forEach(function(O){O.forEach(function(P){P.forEach(function(S){l[S<0?~S:S].length<2&&_.push(S)})})}),(T=(_=r(s,_)).length)>1)for(var k,w,C=1,A=x(_[0]);C<T;++C)(k=x(_[C]))>A&&(w=_[0],_[0]=_[C],_[C]=w,A=k);return _}).filter(function(f){return f.length>0})}}function a(s,c){for(var l=0,p=s.length;l<p;){var g=l+p>>>1;s[g]<c?l=g+1:p=g}return l}function i(s){if(null==s)return v;var c,l,p=s.scale[0],g=s.scale[1],u=s.translate[0],x=s.translate[1];return function(f,T){T||(c=l=0);var _=2,k=f.length,w=new Array(k),C=Math.round((f[0]-u)/p),A=Math.round((f[1]-x)/g);for(w[0]=C-c,c=C,w[1]=A-l,l=A;_<k;)w[_]=f[_],++_;return w}}m.bbox=h,m.feature=function(s,c){return"string"==typeof c&&(c=s.objects[c]),"GeometryCollection"===c.type?{type:"FeatureCollection",features:c.geometries.map(function(l){return e(s,l)})}:e(s,c)},m.merge=function(s){return n(s,d.apply(this,arguments))},m.mergeArcs=d,m.mesh=function(s){return n(s,o.apply(this,arguments))},m.meshArcs=o,m.neighbors=function(s){var c={},l=s.map(function(){return[]});function p(O,P){O.forEach(function(S){S<0&&(S=~S);var E=c[S];E?E.push(P):c[S]=[P]})}function g(O,P){O.forEach(function(S){p(S,P)})}var u={LineString:p,MultiLineString:g,Polygon:g,MultiPolygon:function(O,P){O.forEach(function(S){g(S,P)})}};for(var x in s.forEach(function O(P,S){"GeometryCollection"===P.type?P.geometries.forEach(function(E){O(E,S)}):P.type in u&&u[P.type](P.arcs,S)}),c)for(var f=c[x],T=f.length,_=0;_<T;++_)for(var k=_+1;k<T;++k){var w,C=f[_],A=f[k];(w=l[C])[x=a(w,A)]!==A&&w.splice(x,0,A),(w=l[A])[x=a(w,C)]!==C&&w.splice(x,0,C)}return l},m.quantize=function(s,c){if(s.transform)throw new Error("already quantized");if(c&&c.scale)f=s.bbox;else{if(!((l=Math.floor(c))>=2))throw new Error("n must be \u22652");var l,p=(f=s.bbox||h(s))[0],g=f[1],u=f[2],x=f[3];c={scale:[u-p?(u-p)/(l-1):1,x-g?(x-g)/(l-1):1],translate:[p,g]}}var f,T,_=i(c),k=s.objects,w={};function C(O){return _(O)}function A(O){var P;switch(O.type){case"GeometryCollection":P={type:"GeometryCollection",geometries:O.geometries.map(A)};break;case"Point":P={type:"Point",coordinates:C(O.coordinates)};break;case"MultiPoint":P={type:"MultiPoint",coordinates:O.coordinates.map(C)};break;default:return O}return null!=O.id&&(P.id=O.id),null!=O.bbox&&(P.bbox=O.bbox),null!=O.properties&&(P.properties=O.properties),P}for(T in k)w[T]=A(k[T]);return{type:"Topology",bbox:f,transform:c,objects:w,arcs:s.arcs.map(function(O){var P,S=0,E=1,D=O.length,z=new Array(D);for(z[0]=_(O[0],0);++S<D;)((P=_(O[S],S))[0]||P[1])&&(z[E++]=P);return 1===E&&(z[E++]=[0,0]),z.length=E,z})}},m.transform=b,m.untransform=i,Object.defineProperty(m,"__esModule",{value:!0})},v("object"==typeof K&&void 0!==Q?K:(m=m||self).topojson=m.topojson||{})},{}],317:[function(y,Q,K){"use strict";var m=y("../prototype/is");Q.exports=function(v){if("function"!=typeof v||!hasOwnProperty.call(v,"length"))return!1;try{if("number"!=typeof v.length||"function"!=typeof v.call||"function"!=typeof v.apply)return!1}catch{return!1}return!m(v)}},{"../prototype/is":324}],318:[function(y,Q,K){"use strict";var m=y("../value/is"),v=y("../object/is"),b=y("../string/coerce"),h=y("./to-short-string"),e=function(n,r){return n.replace("%v",h(r))};Q.exports=function(n,r,o){if(!v(o))throw new TypeError(e(r,n));if(!m(n)){if("default"in o)return o.default;if(o.isOptional)return null}var t=b(o.errorMessage);throw m(t)||(t=r),new TypeError(e(t,n))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(y,Q,K){"use strict";Q.exports=function(m){try{return m.toString()}catch{try{return String(m)}catch{return null}}}},{}],320:[function(y,Q,K){"use strict";var m=y("./safe-to-string"),v=/[\n\r\u2028\u2029]/g;Q.exports=function(b){var h=m(b);return null===h?"<Non-coercible to string value>":(h.length>100&&(h=h.slice(0,99)+"\u2026"),h=h.replace(v,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":319}],321:[function(y,Q,K){"use strict";var m=y("../value/is"),v={object:!0,function:!0,undefined:!0};Q.exports=function(b){return!!m(b)&&hasOwnProperty.call(v,typeof b)}},{"../value/is":327}],322:[function(y,Q,K){"use strict";var m=y("../lib/resolve-exception"),v=y("./is");Q.exports=function(b){return v(b)?b:m(b,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(y,Q,K){"use strict";var m=y("../function/is"),v=/^\s*class[\s{/}]/,b=Function.prototype.toString;Q.exports=function(h){return!!m(h)&&!v.test(b.call(h))}},{"../function/is":317}],324:[function(y,Q,K){"use strict";var m=y("../object/is");Q.exports=function(v){if(!m(v))return!1;try{return!!v.constructor&&v.constructor.prototype===v}catch{return!1}}},{"../object/is":321}],325:[function(y,Q,K){"use strict";var m=y("../value/is"),v=y("../object/is"),b=Object.prototype.toString;Q.exports=function(h){if(!m(h))return null;if(v(h)){var e=h.toString;if("function"!=typeof e||e===b)return null}try{return""+h}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(y,Q,K){"use strict";var m=y("../lib/resolve-exception"),v=y("./is");Q.exports=function(b){return v(b)?b:m(b,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(y,Q,K){"use strict";Q.exports=function(m){return null!=m}},{}],328:[function(y,Q,K){(function(m){(function(){"use strict";var v=y("bit-twiddle"),b=y("dup"),h=y("buffer").Buffer;m.__TYPEDARRAY_POOL||(m.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),BIGUINT64:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),BIGINT64:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var e=typeof Uint8ClampedArray<"u",n=typeof BigUint64Array<"u",r=typeof BigInt64Array<"u",o=m.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=b([32,0])),o.BIGUINT64||(o.BIGUINT64=b([32,0])),o.BIGINT64||(o.BIGINT64=b([32,0])),o.BUFFER||(o.BUFFER=b([32,0]));var t=o.DATA,d=o.BUFFER;function a(A){if(A){var P=v.log2(A.length||A.byteLength);t[P].push(A)}}function i(A){A=v.nextPow2(A);var O=v.log2(A),P=t[O];return P.length>0?P.pop():new ArrayBuffer(A)}function s(A){return new Uint8Array(i(A),0,A)}function c(A){return new Uint16Array(i(2*A),0,A)}function l(A){return new Uint32Array(i(4*A),0,A)}function p(A){return new Int8Array(i(A),0,A)}function g(A){return new Int16Array(i(2*A),0,A)}function u(A){return new Int32Array(i(4*A),0,A)}function x(A){return new Float32Array(i(4*A),0,A)}function f(A){return new Float64Array(i(8*A),0,A)}function T(A){return e?new Uint8ClampedArray(i(A),0,A):s(A)}function _(A){return n?new BigUint64Array(i(8*A),0,A):null}function k(A){return r?new BigInt64Array(i(8*A),0,A):null}function w(A){return new DataView(i(A),0,A)}function C(A){A=v.nextPow2(A);var O=v.log2(A),P=d[O];return P.length>0?P.pop():new h(A)}K.free=function(A){if(h.isBuffer(A))d[v.log2(A.length)].push(A);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(A)&&(A=A.buffer),!A)return;var P=0|v.log2(A.length||A.byteLength);t[P].push(A)}},K.freeUint8=K.freeUint16=K.freeUint32=K.freeBigUint64=K.freeInt8=K.freeInt16=K.freeInt32=K.freeBigInt64=K.freeFloat32=K.freeFloat=K.freeFloat64=K.freeDouble=K.freeUint8Clamped=K.freeDataView=function(A){a(A.buffer)},K.freeArrayBuffer=a,K.freeBuffer=function(A){d[v.log2(A.length)].push(A)},K.malloc=function(A,O){if(void 0===O||"arraybuffer"===O)return i(A);switch(O){case"uint8":return s(A);case"uint16":return c(A);case"uint32":return l(A);case"int8":return p(A);case"int16":return g(A);case"int32":return u(A);case"float":case"float32":return x(A);case"double":case"float64":return f(A);case"uint8_clamped":return T(A);case"bigint64":return k(A);case"biguint64":return _(A);case"buffer":return C(A);case"data":case"dataview":return w(A);default:return null}return null},K.mallocArrayBuffer=i,K.mallocUint8=s,K.mallocUint16=c,K.mallocUint32=l,K.mallocInt8=p,K.mallocInt16=g,K.mallocInt32=u,K.mallocFloat32=K.mallocFloat=x,K.mallocFloat64=K.mallocDouble=f,K.mallocUint8Clamped=T,K.mallocBigUint64=_,K.mallocBigInt64=k,K.mallocDataView=w,K.mallocBuffer=C,K.clearCache=function(){for(var A=0;A<32;++A)o.UINT8[A].length=0,o.UINT16[A].length=0,o.UINT32[A].length=0,o.INT8[A].length=0,o.INT16[A].length=0,o.INT32[A].length=0,o.FLOAT[A].length=0,o.DOUBLE[A].length=0,o.BIGUINT64[A].length=0,o.BIGINT64[A].length=0,o.UINT8C[A].length=0,t[A].length=0,d[A].length=0}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(y,Q,K){var m=/[\'\"]/;Q.exports=function(v){return v?(m.test(v.charAt(0))&&(v=v.substr(1)),m.test(v.charAt(v.length-1))&&(v=v.substr(0,v.length-1)),v):""}},{}],330:[function(y,Q,K){"use strict";Q.exports=function(m,v,b){Array.isArray(b)||(b=[].slice.call(arguments,2));for(var h=0,e=b.length;h<e;h++){var n=b[h];for(var r in n)if((void 0===v[r]||Array.isArray(v[r])||m[r]!==v[r])&&r in v){var o;if(!0===n[r])o=v[r];else if(!1===n[r]||"function"==typeof n[r]&&void 0===(o=n[r](v[r],m,v)))continue;m[r]=o}}return m}},{}],331:[function(y,Q,K){(function(m){(function(){function v(b){try{if(!m.localStorage)return!1}catch{return!1}var h=m.localStorage[b];return null!=h&&"true"===String(h).toLowerCase()}Q.exports=function(b,h){if(v("noDeprecation"))return b;var e=!1;return function(){if(!e){if(v("throwDeprecation"))throw new Error(h);v("traceDeprecation")?console.trace(h):console.warn(h),e=!0}return b.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(y,Q,K){var m=y("get-canvas-context");Q.exports=function(v){return m("webgl",v)}},{"get-canvas-context":194}],333:[function(y,Q,K){var m=y("../main"),v=y("object-assign"),b=m.instance();function h(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}v(h.prototype=new m.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(a,i){if("string"==typeof a){var s=a.match(n);return s?s[0]:""}var c=this._validateYear(a),l=a.month(),p=""+this.toChineseMonth(c,l);return i&&p.length<2&&(p="0"+p),this.isIntercalaryMonth(c,l)&&(p+="i"),p},monthNames:function(a){if("string"==typeof a){var i=a.match(r);return i?i[0]:""}var s=this._validateYear(a),c=a.month(),l=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(s,c)-1];return this.isIntercalaryMonth(s,c)&&(l="\u95f0"+l),l},monthNamesShort:function(a){if("string"==typeof a){var i=a.match(o);return i?i[0]:""}var s=this._validateYear(a),c=a.month(),l=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(s,c)-1];return this.isIntercalaryMonth(s,c)&&(l="\u95f0"+l),l},parseMonth:function(a,i){a=this._validateYear(a);var s,c=parseInt(i);if(isNaN(c))"\u95f0"===i[0]&&(s=!0,i=i.substring(1)),"\u6708"===i[i.length-1]&&(i=i.substring(0,i.length-1)),c=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(i);else{var l=i[i.length-1];s="i"===l||"I"===l}return this.toMonthIndex(a,c,s)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(a,i){if(a.year&&(a=a.year()),"number"!=typeof a||a<1888||a>2111)throw i.replace(/\{0\}/,this.local.name);return a},toMonthIndex:function(a,i,s){var c=this.intercalaryMonth(a);if(s&&i!==c||i<1||i>12)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!s&&i<=c?i-1:i:i-1},toChineseMonth:function(a,i){a.year&&(i=(a=a.year()).month());var s=this.intercalaryMonth(a);if(i<0||i>(s?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return s?i<s?i+1:i:i+1},intercalaryMonth:function(a){return a=this._validateYear(a),t[a-t[0]]>>13},isIntercalaryMonth:function(a,i){a.year&&(i=(a=a.year()).month());var s=this.intercalaryMonth(a);return!!s&&s===i},leapYear:function(a){return 0!==this.intercalaryMonth(a)},weekOfYear:function(a,i,s){var c,l=this._validateYear(a,m.local.invalidyear),p=d[l-d[0]];(c=b.newDate(p>>9&4095,p>>5&15,31&p)).add(4-(c.dayOfWeek()||7),"d");var f=this.toJD(a,i,s)-c.toJD();return 1+Math.floor(f/7)},monthsInYear:function(a){return this.leapYear(a)?13:12},daysInMonth:function(a,i){a.year&&(i=a.month(),a=a.year()),a=this._validateYear(a);var s=t[a-t[0]];if(i>(s>>13?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return s&1<<12-i?30:29},weekDay:function(a,i,s){return(this.dayOfWeek(a,i,s)||7)<6},toJD:function(a,i,s){var c=this._validate(a,p,s,m.local.invalidDate);a=this._validateYear(c.year()),i=c.month(),s=c.day();var l=this.isIntercalaryMonth(a,i),p=this.toChineseMonth(a,i),g=function(u,x,f,T,_){var k,w,C;if("object"==typeof u)w=u,k=x||{};else{var A;if(!("number"==typeof u&&u>=1888&&u<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof x&&x>=1&&x<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof f&&f>=1&&f<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof T?(A=!1,k=T):(A=!!T,k={}),w={year:u,month:x,day:f,isIntercalary:A}}C=w.day-1;var O,P=t[w.year-t[0]],S=P>>13;O=S&&(w.month>S||w.isIntercalary)?w.month:w.month-1;for(var E=0;E<O;E++)C+=P&1<<12-E?30:29;var D=d[w.year-d[0]],z=new Date(D>>9&4095,(D>>5&15)-1,(31&D)+C);return k.year=z.getFullYear(),k.month=1+z.getMonth(),k.day=z.getDate(),k}(a,p,s,l);return b.toJD(g.year,g.month,g.day)},fromJD:function(a){var i=b.fromJD(a),s=function(l,p,g,u){var x,f;if("object"==typeof l)x=l,f=p||{};else{if(!("number"==typeof l&&l>=1888&&l<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof p&&p>=1&&p<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof g&&g>=1&&g<=31))throw new Error("Solar day outside range 1 - 31");x={year:l,month:p,day:g},f={}}var T=d[x.year-d[0]];f.year=(x.year<<9|x.month<<5|x.day)>=T?x.year:x.year-1,T=d[f.year-d[0]];var k,w=new Date(T>>9&4095,(T>>5&15)-1,31&T),C=new Date(x.year,x.month-1,x.day);k=Math.round((C-w)/864e5);var A,O=t[f.year-t[0]];for(A=0;A<13;A++){var P=O&1<<12-A?30:29;if(k<P)break;k-=P}var S=O>>13;return!S||A<S?(f.isIntercalary=!1,f.month=1+A):A===S?(f.isIntercalary=!0,f.month=A):(f.isIntercalary=!1,f.month=A),f.day=1+k,f}(i.year(),i.month(),i.day()),c=this.toMonthIndex(s.year,s.month,s.isIntercalary);return this.newDate(s.year,c,s.day)},fromString:function(a){var i=a.match(e),s=this._validateYear(+i[1]),p=this.toMonthIndex(s,+i[2],!!i[3]);return this.newDate(s,p,+i[4])},add:function(a,i,s){var c=a.year(),l=a.month(),p=this.isIntercalaryMonth(c,l),g=this.toChineseMonth(c,l),u=Object.getPrototypeOf(h.prototype).add.call(this,a,i,s);if("y"===s){var x=u.year(),f=u.month(),T=this.isIntercalaryMonth(x,g),_=this.toMonthIndex(x,g,!(!p||!T));_!==f&&u.month(_)}return u}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,n=/^\d?\d[iI]?/m,r=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,o=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;m.calendars.chinese=h;var t=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":347,"object-assign":247}],334:[function(y,Q,K){var m=y("../main");function b(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new m.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var e=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return(h=e.year()+(e.year()<0?1:0))%4==3||h%4==-1},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(h,e,n){var r=this.newDate(h,e,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(h,e){var n=this._validate(h,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(h,e,n){return(this.dayOfWeek(h,e,n)||7)<6},toJD:function(h,e,n){var r=this._validate(h,e,n,m.local.invalidDate);return(h=r.year())<0&&h++,r.day()+30*(r.month()-1)+365*(h-1)+Math.floor(h/4)+this.jdEpoch-1},fromJD:function(h){var e=Math.floor(h)+.5-this.jdEpoch,n=Math.floor((e-Math.floor((e+366)/1461))/365)+1;n<=0&&n--,e=Math.floor(h)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(e/30)+1;return this.newDate(n,r,e-30*(r-1)+1)}}),m.calendars.coptic=b},{"../main":347,"object-assign":247}],335:[function(y,Q,K){var m=y("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new m.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),400},weekOfYear:function(e,n,r){var o=this.newDate(e,n,r);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/8)+1},daysInMonth:function(e,n){var r=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,n,r){return(this._validate(e,n,r,m.local.invalidDate).day()+1)%8},weekDay:function(e,n,r){var o=this.dayOfWeek(e,n,r);return o>=2&&o<=6},extraInfo:function(e,n,r){var o=this._validate(e,n,r,m.local.invalidDate);return{century:h[Math.floor((o.year()-1)/100)+1]||""}},toJD:function(e,n,r){var o=this._validate(e,n,r,m.local.invalidDate);return e=o.year()+(o.year()<0?1:0),n=o.month(),(r=o.day())+(n>1?16:0)+(n>2?32*(n-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var n=Math.floor(e/400)+1;e-=400*(n-1),e+=e>15?16:0;var r=Math.floor(e/32)+1;return this.newDate(n<=0?n-1:n,r,e-32*(r-1)+1)}});var h={20:"Fruitbat",21:"Anchovy"};m.calendars.discworld=b},{"../main":347,"object-assign":247}],336:[function(y,Q,K){var m=y("../main");function b(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new m.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var e=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return(h=e.year()+(e.year()<0?1:0))%4==3||h%4==-1},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(h,e,n){var r=this.newDate(h,e,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(h,e){var n=this._validate(h,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(h,e,n){return(this.dayOfWeek(h,e,n)||7)<6},toJD:function(h,e,n){var r=this._validate(h,e,n,m.local.invalidDate);return(h=r.year())<0&&h++,r.day()+30*(r.month()-1)+365*(h-1)+Math.floor(h/4)+this.jdEpoch-1},fromJD:function(h){var e=Math.floor(h)+.5-this.jdEpoch,n=Math.floor((e-Math.floor((e+366)/1461))/365)+1;n<=0&&n--,e=Math.floor(h)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(e/30)+1;return this.newDate(n,r,e-30*(r-1)+1)}}),m.calendars.ethiopian=b},{"../main":347,"object-assign":247}],337:[function(y,Q,K){var m=y("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function h(e,n){return e-n*Math.floor(e/n)}y("object-assign")(b.prototype=new m.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(n.year())},_leapYear:function(e){return h(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,n,r){var o=this.newDate(e,n,r);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,n){return e.year&&(n=e.month(),e=e.year()),this._validate(e,n,this.minDay,m.local.invalidMonth),12===n&&this.leapYear(e)||8===n&&5===h(this.daysInYear(e),10)?30:9===n&&3===h(this.daysInYear(e),10)?29:this.daysPerMonth[n-1]},weekDay:function(e,n,r){return 6!==this.dayOfWeek(e,n,r)},extraInfo:function(e,n,r){var o=this._validate(e,n,r,m.local.invalidDate);return{yearType:(this.leapYear(o)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(o)%10-3]}},toJD:function(e,n,r){var o=this._validate(e,n,r,m.local.invalidDate);e=o.year(),n=o.month(),r=o.day();var t=e<=0?e+1:e,d=this.jdEpoch+this._delay1(t)+this._delay2(t)+r+1;if(n<7){for(var a=7;a<=this.monthsInYear(e);a++)d+=this.daysInMonth(e,a);for(a=1;a<n;a++)d+=this.daysInMonth(e,a)}else for(a=7;a<n;a++)d+=this.daysInMonth(e,a);return d},_delay1:function(e){var n=Math.floor((235*e-234)/19),o=29*n+Math.floor((12084+13753*n)/25920);return h(3*(o+1),7)<3&&o++,o},_delay2:function(e){var n=this._delay1(e-1),r=this._delay1(e);return this._delay1(e+1)-r==356?2:r-n==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var n=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===n?1:n+1,7,1);)n++;for(var r=e<this.toJD(n,1,1)?7:1;e>this.toJD(n,r,this.daysInMonth(n,r));)r++;var o=e-this.toJD(n,r,1)+1;return this.newDate(n,r,o)}}),m.calendars.hebrew=b},{"../main":347,"object-assign":247}],338:[function(y,Q,K){var m=y("../main");function b(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new m.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(h){return(11*this._validate(h,this.minMonth,this.minDay,m.local.invalidYear).year()+14)%30<11},weekOfYear:function(h,e,n){var r=this.newDate(h,e,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(h){return this.leapYear(h)?355:354},daysInMonth:function(h,e){var n=this._validate(h,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(h,e,n){return 5!==this.dayOfWeek(h,e,n)},toJD:function(h,e,n){var r=this._validate(h,e,n,m.local.invalidDate);return h=r.year(),e=r.month(),h=h<=0?h+1:h,(n=r.day())+Math.ceil(29.5*(e-1))+354*(h-1)+Math.floor((3+11*h)/30)+this.jdEpoch-1},fromJD:function(h){h=Math.floor(h)+.5;var e=Math.floor((30*(h-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var n=Math.min(12,Math.ceil((h-29-this.toJD(e,1,1))/29.5)+1),r=h-this.toJD(e,n,1)+1;return this.newDate(e,n,r)}}),m.calendars.islamic=b},{"../main":347,"object-assign":247}],339:[function(y,Q,K){var m=y("../main");function b(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new m.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var e=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return(h=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(h,e,n){var r=this.newDate(h,e,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(h,e){var n=this._validate(h,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(h,e,n){return(this.dayOfWeek(h,e,n)||7)<6},toJD:function(h,e,n){var r=this._validate(h,e,n,m.local.invalidDate);return h=r.year(),e=r.month(),n=r.day(),h<0&&h++,e<=2&&(h--,e+=12),Math.floor(365.25*(h+4716))+Math.floor(30.6001*(e+1))+n-1524.5},fromJD:function(h){var e=Math.floor(h+.5)+1524,n=Math.floor((e-122.1)/365.25),r=Math.floor(365.25*n),o=Math.floor((e-r)/30.6001),t=o-Math.floor(o<14?1:13),d=n-Math.floor(t>2?4716:4715),a=e-r-Math.floor(30.6001*o);return d<=0&&d--,this.newDate(d,t,a)}}),m.calendars.julian=b},{"../main":347,"object-assign":247}],340:[function(y,Q,K){var m=y("../main");function b(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}function h(n,r){return n-r*Math.floor(n/r)}function e(n,r){return h(n-1,r)+1}y("object-assign")(b.prototype=new m.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(n){return this._validate(n,this.minMonth,this.minDay,m.local.invalidYear),!1},formatYear:function(n){n=this._validate(n,this.minMonth,this.minDay,m.local.invalidYear).year();var r=Math.floor(n/400);return n%=400,n+=n<0?400:0,r+"."+Math.floor(n/20)+"."+n%20},forYear:function(n){if((n=n.split(".")).length<3)throw"Invalid Mayan year";for(var r=0,o=0;o<n.length;o++){var t=parseInt(n[o],10);if(Math.abs(t)>19||o>0&&t<0)throw"Invalid Mayan year";r=20*r+t}return r},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,m.local.invalidYear),18},weekOfYear:function(n,r,o){return this._validate(n,r,o,m.local.invalidDate),0},daysInYear:function(n){return this._validate(n,this.minMonth,this.minDay,m.local.invalidYear),360},daysInMonth:function(n,r){return this._validate(n,r,this.minDay,m.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(n,r,o){return this._validate(n,r,o,m.local.invalidDate).day()},weekDay:function(n,r,o){return this._validate(n,r,o,m.local.invalidDate),!0},extraInfo:function(n,r,o){var t=this._validate(n,r,o,m.local.invalidDate).toJD(),d=this._toHaab(t),a=this._toTzolkin(t);return{haabMonthName:this.local.haabMonths[d[0]-1],haabMonth:d[0],haabDay:d[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(n){var r=h(8+(n-=this.jdEpoch)+340,365);return[Math.floor(r/20)+1,h(r,20)]},_toTzolkin:function(n){return[e(20+(n-=this.jdEpoch),20),e(n+4,13)]},toJD:function(n,r,o){var t=this._validate(n,r,o,m.local.invalidDate);return t.day()+20*t.month()+360*t.year()+this.jdEpoch},fromJD:function(n){n=Math.floor(n)+.5-this.jdEpoch;var r=Math.floor(n/360);n%=360,n+=n<0?360:0;var o=Math.floor(n/20);return this.newDate(r,o,n%20)}}),m.calendars.mayan=b},{"../main":347,"object-assign":247}],341:[function(y,Q,K){var m=y("../main"),v=y("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new m.baseCalendar;var h=m.instance("gregorian");v(b.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return h.leapYear(n.year()+(n.year()<1?1:0)+1469)},weekOfYear:function(e,n,r){var o=this.newDate(e,n,r);return o.add(1-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(e,n){var r=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(12===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(e,n,r){return(this.dayOfWeek(e,n,r)||7)<6},toJD:function(e,n,r){var o=this._validate(e,n,r,m.local.invalidMonth);(e=o.year())<0&&e++;for(var t=o.day(),d=1;d<o.month();d++)t+=this.daysPerMonth[d-1];return t+h.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var n=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(n+1,1,1);)n++;for(var r=e-Math.floor(this.toJD(n,1,1)+.5)+1,o=1;r>this.daysInMonth(n,o);)r-=this.daysInMonth(n,o),o++;return this.newDate(n,o,r)}}),m.calendars.nanakshahi=b},{"../main":347,"object-assign":247}],342:[function(y,Q,K){var m=y("../main");function b(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new m.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(h){return this.daysInYear(h)!==this.daysPerYear},weekOfYear:function(h,e,n){var r=this.newDate(h,e,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(h){if(h=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[h])return this.daysPerYear;for(var e=0,n=this.minMonth;n<=12;n++)e+=this.NEPALI_CALENDAR_DATA[h][n];return e},daysInMonth:function(h,e){return h.year&&(e=h.month(),h=h.year()),this._validate(h,e,this.minDay,m.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[h]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[h][e]},weekDay:function(h,e,n){return 6!==this.dayOfWeek(h,e,n)},toJD:function(h,e,n){var r=this._validate(h,e,n,m.local.invalidDate);h=r.year(),e=r.month(),n=r.day();var o=m.instance(),t=0,d=e,a=h;this._createMissingCalendarData(h);var i=h-(d>9||9===d&&n>=this.NEPALI_CALENDAR_DATA[a][0]?56:57);for(9!==e&&(t=n,d--);9!==d;)d<=0&&(d=12,a--),t+=this.NEPALI_CALENDAR_DATA[a][d],d--;return 9===e?(t+=n-this.NEPALI_CALENDAR_DATA[a][0])<0&&(t+=o.daysInYear(i)):t+=this.NEPALI_CALENDAR_DATA[a][9]-this.NEPALI_CALENDAR_DATA[a][0],o.newDate(i,1,1).add(t,"d").toJD()},fromJD:function(h){var e=m.instance().fromJD(h),n=e.year(),r=e.dayOfYear(),o=n+56;this._createMissingCalendarData(o);for(var t=9,a=this.NEPALI_CALENDAR_DATA[o][t]-this.NEPALI_CALENDAR_DATA[o][0]+1;r>a;)++t>12&&(t=1,o++),a+=this.NEPALI_CALENDAR_DATA[o][t];return this.newDate(o,t,this.NEPALI_CALENDAR_DATA[o][t]-(a-r))},_createMissingCalendarData:function(h){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var n=h-1;n<h+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),m.calendars.nepali=b},{"../main":347,"object-assign":247}],343:[function(y,Q,K){var m=y("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function h(e,n){return e-n*Math.floor(e/n)}y("object-assign")(b.prototype=new m.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return 682*((n.year()-(n.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,n,r){var o=this.newDate(e,n,r);return o.add(-(o.dayOfWeek()+1)%7,"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(e,n){var r=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(12===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(e,n,r){return 5!==this.dayOfWeek(e,n,r)},toJD:function(e,n,r){var o=this._validate(e,n,r,m.local.invalidDate);e=o.year(),n=o.month(),r=o.day();var t=e-(e>=0?474:473),d=474+h(t,2820);return r+(n<=7?31*(n-1):30*(n-1)+6)+Math.floor((682*d-110)/2816)+365*(d-1)+1029983*Math.floor(t/2820)+this.jdEpoch-1},fromJD:function(e){var n=(e=Math.floor(e)+.5)-this.toJD(475,1,1),r=Math.floor(n/1029983),o=h(n,1029983),t=2820;if(1029982!==o){var d=Math.floor(o/366),a=h(o,366);t=Math.floor((2134*d+2816*a+2815)/1028522)+d+1}var i=t+2820*r+474,s=e-this.toJD(i=i<=0?i-1:i,1,1)+1,c=s<=186?Math.ceil(s/31):Math.ceil((s-6)/30),l=e-this.toJD(i,c,1)+1;return this.newDate(i,c,l)}}),m.calendars.persian=b,m.calendars.jalali=b},{"../main":347,"object-assign":247}],344:[function(y,Q,K){var m=y("../main"),v=y("object-assign"),b=m.instance();function h(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v(h.prototype=new m.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(n.year()),b.leapYear(e)},weekOfYear:function(e,n,r){var o=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(o.year()),b.weekOfYear(e,o.month(),o.day())},daysInMonth:function(e,n){var r=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(e,n,r){return(this.dayOfWeek(e,n,r)||7)<6},toJD:function(e,n,r){var o=this._validate(e,n,r,m.local.invalidDate);return e=this._t2gYear(o.year()),b.toJD(e,o.month(),o.day())},fromJD:function(e){var n=b.fromJD(e),r=this._g2tYear(n.year());return this.newDate(r,n.month(),n.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),m.calendars.taiwan=h},{"../main":347,"object-assign":247}],345:[function(y,Q,K){var m=y("../main"),v=y("object-assign"),b=m.instance();function h(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v(h.prototype=new m.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(n.year()),b.leapYear(e)},weekOfYear:function(e,n,r){var o=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(o.year()),b.weekOfYear(e,o.month(),o.day())},daysInMonth:function(e,n){var r=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(e,n,r){return(this.dayOfWeek(e,n,r)||7)<6},toJD:function(e,n,r){var o=this._validate(e,n,r,m.local.invalidDate);return e=this._t2gYear(o.year()),b.toJD(e,o.month(),o.day())},fromJD:function(e){var n=b.fromJD(e),r=this._g2tYear(n.year());return this.newDate(r,n.month(),n.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),m.calendars.thai=h},{"../main":347,"object-assign":247}],346:[function(y,Q,K){var m=y("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new m.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return 355===this.daysInYear(n.year())},weekOfYear:function(e,n,r){var o=this.newDate(e,n,r);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var n=0,r=1;r<=12;r++)n+=this.daysInMonth(e,r);return n},daysInMonth:function(e,n){for(var r=this._validate(e,n,this.minDay,m.local.invalidMonth).toJD()-24e5+.5,o=0,t=0;t<h.length;t++){if(h[t]>r)return h[o]-h[o-1];o++}return 30},weekDay:function(e,n,r){return 5!==this.dayOfWeek(e,n,r)},toJD:function(e,n,r){var o=this._validate(e,n,r,m.local.invalidDate),t=12*(o.year()-1)+o.month()-15292;return o.day()+h[t-1]-1+24e5-.5},fromJD:function(e){for(var n=e-24e5+.5,r=0,o=0;o<h.length&&!(h[o]>n);o++)r++;var t=r+15292,d=Math.floor((t-1)/12);return this.newDate(d+1,t-12*d,n-h[r-1]+1)},isValid:function(e,n,r){var o=m.baseCalendar.prototype.isValid.apply(this,arguments);return o&&(o=(e=null!=e.year?e.year:e)>=1276&&e<=1500),o},_validate:function(e,n,r,o){var t=m.baseCalendar.prototype._validate.apply(this,arguments);if(t.year<1276||t.year>1500)throw o.replace(/\{0\}/,this.local.name);return t}}),m.calendars.ummalqura=b;var h=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(y,Q,K){var m=y("object-assign");function v(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function b(o,t,d,a){if(this._calendar=o,this._year=t,this._month=d,this._day=a,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(r.local.invalidDate||r.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function h(o,t){return"000000".substring(0,t-(o=""+o).length)+o}function e(){this.shortYearCutoff="+10"}function n(o){this.local=this.regionalOptions[o]||this.regionalOptions[""]}m(v.prototype,{instance:function(o,t){o=(o||"gregorian").toLowerCase();var d=this._localCals[o+"-"+(t=t||"")];if(!d&&this.calendars[o]&&(d=new this.calendars[o](t),this._localCals[o+"-"+t]=d),!d)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,o);return d},newDate:function(o,t,d,a,i){return(a=(null!=o&&o.year?o.calendar():"string"==typeof a?this.instance(a,i):a)||this.instance()).newDate(o,t,d)},substituteDigits:function(o){return function(t){return(t+"").replace(/[0-9]/g,function(d){return o[d]})}},substituteChineseDigits:function(o,t){return function(d){for(var a="",i=0;d>0;){var s=d%10;a=(0===s?"":o[s]+t[i])+a,i++,d=Math.floor(d/10)}return 0===a.indexOf(o[1]+t[1])&&(a=a.substr(1)),a||o[0]}}}),m(b.prototype,{newDate:function(o,t,d){return this._calendar.newDate(o??this,t,d)},year:function(o){return 0===arguments.length?this._year:this.set(o,"y")},month:function(o){return 0===arguments.length?this._month:this.set(o,"m")},day:function(o){return 0===arguments.length?this._day:this.set(o,"d")},date:function(o,t,d){if(!this._calendar.isValid(o,t,d))throw(r.local.invalidDate||r.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=o,this._month=t,this._day=d,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(o,t){return this._calendar.add(this,o,t)},set:function(o,t){return this._calendar.set(this,o,t)},compareTo:function(o){if(this._calendar.name!==o._calendar.name)throw(r.local.differentCalendars||r.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,o._calendar.local.name);var t=this._year!==o._year?this._year-o._year:this._month!==o._month?this.monthOfYear()-o.monthOfYear():this._day-o._day;return 0===t?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(o){return this._calendar.fromJD(o)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(o){return this._calendar.fromJSDate(o)},toString:function(){return(this.year()<0?"-":"")+h(Math.abs(this.year()),4)+"-"+h(this.month(),2)+"-"+h(this.day(),2)}}),m(e.prototype,{_validateLevel:0,newDate:function(o,t,d){return null==o?this.today():(o.year&&(this._validate(o,t,d,r.local.invalidDate||r.regionalOptions[""].invalidDate),d=o.day(),t=o.month(),o=o.year()),new b(this,o,t,d))},today:function(){return this.fromJSDate(new Date)},epoch:function(o){return this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(o){var t=this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+h(Math.abs(t.year()),4)},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),12},monthOfYear:function(o,t){var d=this._validate(o,t,this.minDay,r.local.invalidMonth||r.regionalOptions[""].invalidMonth);return(d.month()+this.monthsInYear(d)-this.firstMonth)%this.monthsInYear(d)+this.minMonth},fromMonthOfYear:function(o,t){var d=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(o)+this.minMonth;return this._validate(o,d,this.minDay,r.local.invalidMonth||r.regionalOptions[""].invalidMonth),d},daysInYear:function(o){var t=this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(o,t,d){var a=this._validate(o,t,d,r.local.invalidDate||r.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(o,t,d){var a=this._validate(o,t,d,r.local.invalidDate||r.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(o,t,d){return this._validate(o,t,d,r.local.invalidDate||r.regionalOptions[""].invalidDate),{}},add:function(o,t,d){return this._validate(o,this.minMonth,this.minDay,r.local.invalidDate||r.regionalOptions[""].invalidDate),this._correctAdd(o,this._add(o,t,d),t,d)},_add:function(o,t,d){if(this._validateLevel++,"d"===d||"w"===d){var a=o.toJD()+t*("w"===d?this.daysInWeek():1),i=o.calendar().fromJD(a);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var s=o.year()+("y"===d?t:0),c=o.monthOfYear()+("m"===d?t:0);i=o.day(),"y"===d?(o.month()!==this.fromMonthOfYear(s,c)&&(c=this.newDate(s,o.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(s)),i=Math.min(i,this.daysInMonth(s,this.fromMonthOfYear(s,c)))):"m"===d&&(function(p){for(;c<p.minMonth;)s--,c+=p.monthsInYear(s);for(var g=p.monthsInYear(s);c>g-1+p.minMonth;)s++,c-=g,g=p.monthsInYear(s)}(this),i=Math.min(i,this.daysInMonth(s,this.fromMonthOfYear(s,c))));var l=[s,this.fromMonthOfYear(s,c),i];return this._validateLevel--,l}catch(p){throw this._validateLevel--,p}},_correctAdd:function(o,t,d,a){if(!(this.hasYearZero||"y"!==a&&"m"!==a||0!==t[0]&&o.year()>0==t[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[a];t=this._add(o,d*i[0]+(d<0?-1:1)*i[1],i[2])}return o.date(t[0],t[1],t[2])},set:function(o,t,d){this._validate(o,this.minMonth,this.minDay,r.local.invalidDate||r.regionalOptions[""].invalidDate);var a="y"===d?t:o.year(),i="m"===d?t:o.month(),s="d"===d?t:o.day();return"y"!==d&&"m"!==d||(s=Math.min(s,this.daysInMonth(a,i))),o.date(a,i,s)},isValid:function(o,t,d){this._validateLevel++;var a=this.hasYearZero||0!==o;if(a){var i=this.newDate(o,t,this.minDay);a=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(i)&&d>=this.minDay&&d-this.minDay<this.daysInMonth(i)}return this._validateLevel--,a},toJSDate:function(o,t,d){var a=this._validate(o,t,d,r.local.invalidDate||r.regionalOptions[""].invalidDate);return r.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(o){return this.fromJD(r.instance().fromJSDate(o).toJD())},_validate:function(o,t,d,a){if(o.year){if(0===this._validateLevel&&this.name!==o.calendar().name)throw(r.local.differentCalendars||r.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,o.calendar().local.name);return o}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(o,t,d))throw a.replace(/\{0\}/,this.local.name);var i=this.newDate(o,t,d);return this._validateLevel--,i}catch(s){throw this._validateLevel--,s}}}),m(n.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var t=this._validate(o,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return(o=t.year()+(t.year()<0?1:0))%4==0&&(o%100!=0||o%400==0)},weekOfYear:function(o,t,d){var a=this.newDate(o,t,d);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(o,t){var d=this._validate(o,t,this.minDay,r.local.invalidMonth||r.regionalOptions[""].invalidMonth);return this.daysPerMonth[d.month()-1]+(2===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(o,t,d){return(this.dayOfWeek(o,t,d)||7)<6},toJD:function(o,t,d){var a=this._validate(o,t,d,r.local.invalidDate||r.regionalOptions[""].invalidDate);o=a.year(),t=a.month(),d=a.day(),o<0&&o++,t<3&&(t+=12,o--);var i=Math.floor(o/100),s=2-i+Math.floor(i/4);return Math.floor(365.25*(o+4716))+Math.floor(30.6001*(t+1))+d+s-1524.5},fromJD:function(o){var t=Math.floor(o+.5),d=Math.floor((t-1867216.25)/36524.25),a=1524+(d=t+1+d-Math.floor(d/4)),i=Math.floor((a-122.1)/365.25),s=Math.floor(365.25*i),c=Math.floor((a-s)/30.6001),l=a-s-Math.floor(30.6001*c),p=c-(c>13.5?13:1),g=i-(p>2.5?4716:4715);return g<=0&&g--,this.newDate(g,p,l)},toJSDate:function(o,t,d){var a=this._validate(o,t,d,r.local.invalidDate||r.regionalOptions[""].invalidDate),i=new Date(a.year(),a.month()-1,a.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(o){return this.newDate(o.getFullYear(),o.getMonth()+1,o.getDate())}});var r=Q.exports=new v;r.cdate=b,r.baseCalendar=e,r.calendars.gregorian=n},{"object-assign":247}],348:[function(y,Q,K){var m=y("object-assign"),v=y("./main");m(v.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),v.local=v.regionalOptions[""],m(v.cdate.prototype,{formatDate:function(b,h){return"string"!=typeof b&&(h=b,b=""),this._calendar.formatDate(b||"",this,h)}}),m(v.baseCalendar.prototype,{UNIX_EPOCH:v.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:v.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(b,h,e){if("string"!=typeof b&&(e=h,h=b,b=""),!h)return"";if(h.calendar()!==this)throw v.local.invalidFormat||v.regionalOptions[""].invalidFormat;b=b||this.local.dateFormat;for(var r,o,t,d=(e=e||{}).dayNamesShort||this.local.dayNamesShort,a=e.dayNames||this.local.dayNames,i=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,c=e.monthNames||this.local.monthNames,l=function(C,A){for(var O=1;w+O<b.length&&b.charAt(w+O)===C;)O++;return w+=O-1,Math.floor(O/(A||1))>1},p=function(C,A,O,P){var S=""+A;if(l(C,P))for(;S.length<O;)S="0"+S;return S},g=this,x=function(C,A){return A?"function"==typeof c?c.call(g,C):c[C.month()-g.minMonth]:"function"==typeof s?s.call(g,C):s[C.month()-g.minMonth]},f=this.local.digits,T=function(C){return e.localNumbers&&f?f(C):C},_="",k=!1,w=0;w<b.length;w++)if(k)"'"!==b.charAt(w)||l("'")?_+=b.charAt(w):k=!1;else switch(b.charAt(w)){case"d":_+=T(p("d",h.day(),2));break;case"D":_+=("D",r=h.dayOfWeek(),o=d,t=a,l("D")?t[r]:o[r]);break;case"o":_+=p("o",h.dayOfYear(),3);break;case"w":_+=p("w",h.weekOfYear(),2);break;case"m":_+=(C=h,"function"==typeof i?i.call(g,C,l("m")):T(p("m",C.month(),2)));break;case"M":_+=x(h,l("M"));break;case"y":_+=l("y",2)?h.year():(h.year()%100<10?"0":"")+h.year()%100;break;case"Y":l("Y",2),_+=h.formatYear();break;case"J":_+=h.toJD();break;case"@":_+=(h.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":_+=(h.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?_+="'":k=!0;break;default:_+=b.charAt(w)}var C;return _},parseDate:function(b,h,e){if(null==h)throw v.local.invalidArguments||v.regionalOptions[""].invalidArguments;if(""===(h="object"==typeof h?h.toString():h+""))return null;b=b||this.local.dateFormat;var n=(e=e||{}).shortYearCutoff||this.shortYearCutoff;n="string"!=typeof n?n:this.today().year()%100+parseInt(n,10);for(var r=e.dayNamesShort||this.local.dayNamesShort,o=e.dayNames||this.local.dayNames,t=e.parseMonth||this.local.parseMonth,d=e.monthNumbers||this.local.monthNumbers,a=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,s=-1,c=-1,l=-1,p=-1,g=-1,u=!1,x=!1,f=function(D,z){for(var N=1;P+N<b.length&&b.charAt(P+N)===D;)N++;return P+=N-1,Math.floor(N/(z||1))>1},T=function(D,z){var N=f(D,z),V=[2,3,N?4:2,N?4:2,10,11,20]["oyYJ@!".indexOf(D)+1],X=new RegExp("^-?\\d{1,"+V+"}"),J=h.substring(O).match(X);if(!J)throw(v.local.missingNumberAt||v.regionalOptions[""].missingNumberAt).replace(/\{0\}/,O);return O+=J[0].length,parseInt(J[0],10)},_=this,k=function(){if("function"==typeof d){f("m");var D=d.call(_,h.substring(O));return O+=D.length,D}return T("m")},w=function(D,z,N,V){for(var X=f(D,V)?N:z,J=0;J<X.length;J++)if(h.substr(O,X[J].length).toLowerCase()===X[J].toLowerCase())return O+=X[J].length,J+_.minMonth;throw(v.local.unknownNameAt||v.regionalOptions[""].unknownNameAt).replace(/\{0\}/,O)},C=function(){if("function"==typeof i){var D=f("M")?i.call(_,h.substring(O)):a.call(_,h.substring(O));return O+=D.length,D}return w("M",a,i)},A=function(){if(h.charAt(O)!==b.charAt(P))throw(v.local.unexpectedLiteralAt||v.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,O);O++},O=0,P=0;P<b.length;P++)if(x)"'"!==b.charAt(P)||f("'")?A():x=!1;else switch(b.charAt(P)){case"d":p=T("d");break;case"D":w("D",r,o);break;case"o":g=T("o");break;case"w":T("w");break;case"m":l=k();break;case"M":l=C();break;case"y":var S=P;u=!f("y",2),P=S,c=T("y",2);break;case"Y":c=T("Y",2);break;case"J":s=T("J")+.5,"."===h.charAt(O)&&(O++,T("J"));break;case"@":s=T("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":s=T("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":O=h.length;break;case"'":f("'")?A():x=!0;break;default:A()}if(O<h.length)throw v.local.unexpectedText||v.regionalOptions[""].unexpectedText;if(-1===c?c=this.today().year():c<100&&u&&(c+=-1===n?1900:this.today().year()-this.today().year()%100-(c<=n?0:100)),"string"==typeof l&&(l=t.call(this,c,l)),g>-1){p=g;for(var E=this.daysInMonth(c,l=1);p>E;E=this.daysInMonth(c,l))l++,p-=E}return s>-1?this.fromJD(s):this.newDate(c,l,p)},determineDate:function(b,h,e,n,r){e&&"object"!=typeof e&&(r=n,n=e,e=null),"string"!=typeof n&&(r=n,n="");var o=this;return h=h?h.newDate():null,null==b?h:"string"==typeof b?function(t){try{return o.parseDate(n,t,r)}catch{}for(var d=((t=t.toLowerCase()).match(/^c/)&&e?e.newDate():null)||o.today(),a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=a.exec(t);i;)d.add(parseInt(i[1],10),i[2]||"d"),i=a.exec(t);return d}(b):"number"==typeof b?isNaN(b)||b===1/0||b===-1/0?h:o.today().add(b,"d"):o.newDate(b)}})},{"./main":347,"object-assign":247}],349:[function(y,Q,K){"use strict";Q.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(y,Q,K){"use strict";var m=y("./arrow_paths"),v=y("../../plots/font_attributes"),b=y("../../plots/cartesian/constants"),h=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),Q.exports=h("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:v({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",b.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",b.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:v({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("./draw").draw;function h(n){m.filterVisible(n._fullLayout.annotations).forEach(function(o){var t=v.getFromId(n,o.xref),d=v.getFromId(n,o.yref),a=v.getRefType(o.xref),i=v.getRefType(o.yref);o._extremes={},"range"===a&&e(o,t),"range"===i&&e(o,d)})}function e(n,r){var o,t=r._id,d=t.charAt(0),a=n[d],i=n["a"+d],l=n["_"+d+"padplus"],p=n["_"+d+"padminus"],g={x:1,y:-1}[d]*n[d+"shift"],u=3*n.arrowsize*n.arrowwidth||0,x=u+g,f=u-g,T=3*n.startarrowsize*n.arrowwidth||0,_=T+g,k=T-g;if(n["a"+d+"ref"]===n[d+"ref"]){var w=v.findExtremes(r,[r.r2c(a)],{ppadplus:x,ppadminus:f}),C=v.findExtremes(r,[r.r2c(i)],{ppadplus:Math.max(l,_),ppadminus:Math.max(p,k)});o={min:[w.min[0],C.min[0]],max:[w.max[0],C.max[0]]}}else _=i?_+i:_,k=i?k-i:k,o=v.findExtremes(r,[r.r2c(a)],{ppadplus:Math.max(l,x,_),ppadminus:Math.max(p,f,k)});n._extremes[t]=o}Q.exports=function(n){if(m.filterVisible(n._fullLayout.annotations).length&&n._fullData.length)return m.syncOrAsync([b,h],n)}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../registry"),b=y("../../plot_api/plot_template").arrayEditor;function h(n,r){var o,t,d,a,i,s,c,l=n._fullLayout.annotations,p=[],g=[],u=[],x=(r||[]).length;for(o=0;o<l.length;o++)if(a=(d=l[o]).clicktoshow){for(t=0;t<x;t++)if(s=(i=r[t]).xaxis,c=i.yaxis,s._id===d.xref&&c._id===d.yref&&s.d2r(i.x)===e(d._xclick,s)&&c.d2r(i.y)===e(d._yclick,c)){(d.visible?"onout"===a?g:u:p).push(o);break}t===x&&d.visible&&"onout"===a&&g.push(o)}return{on:p,off:g,explicitOff:u}}function e(n,r){return"log"===r.type?r.l2r(n):r.d2r(n)}Q.exports={hasClickToShow:function(n,r){var o=h(n,r);return o.on.length>0||o.explicitOff.length>0},onClick:function(n,r){var o,t,d=h(n,r),a=d.on,i=d.off.concat(d.explicitOff),s={},c=n._fullLayout.annotations;if(a.length||i.length){for(o=0;o<a.length;o++)(t=b(n.layout,"annotations",c[a[o]])).modifyItem("visible",!0),m.extendFlat(s,t.getUpdateObj());for(o=0;o<i.length;o++)(t=b(n.layout,"annotations",c[i[o]])).modifyItem("visible",!1),m.extendFlat(s,t.getUpdateObj());return v.call("update",n,{},s)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../color");Q.exports=function(b,h,e,n){n("opacity");var r=n("bgcolor"),o=n("bordercolor"),t=v.opacity(o);n("borderpad");var d=n("borderwidth"),a=n("showarrow");if(n("text",a?" ":e._dfltTitle.annotation),n("textangle"),m.coerceFont(n,"font",e.font),n("width"),n("align"),n("height")&&n("valign"),a){var i,s,c=n("arrowside");-1!==c.indexOf("end")&&(i=n("arrowhead"),s=n("arrowsize")),-1!==c.indexOf("start")&&(n("startarrowhead",i),n("startarrowsize",s)),n("arrowcolor",t?h.bordercolor:v.defaultLine),n("arrowwidth",2*(t&&d||1)),n("standoff"),n("startstandoff")}var l=n("hovertext"),p=e.hoverlabel||{};if(l){var g=n("hoverlabel.bgcolor",p.bgcolor||(v.opacity(r)?v.rgb(r):v.defaultLine)),u=n("hoverlabel.bordercolor",p.bordercolor||v.contrast(g));m.coerceFont(n,"hoverlabel.font",{family:p.font.family,size:p.font.size,color:p.font.color||u})}n("captureevents",!!l)}},{"../../lib":515,"../color":367}],354:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib/to_log_range");Q.exports=function(b,h,e,n){h=h||{};var r="log"===e&&"linear"===h.type;if(r||"linear"===e&&"log"===h.type)for(var t,d,a=b._fullLayout.annotations,i=h._id.charAt(0),s=0;s<a.length;s++)d="annotations["+s+"].",(t=a[s])[i+"ref"]===h._id&&c(i),t["a"+i+"ref"]===h._id&&c("a"+i);function c(l){var p=t[l],g=null;g=r?v(p,h.range):Math.pow(10,p),m(g)||(g=null),n(d+l,g)}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("../../plots/array_container_defaults"),h=y("./common_defaults"),e=y("./attributes");function n(r,o,t){function d(C,A){return m.coerce(r,o,e,C,A)}var a=d("visible"),i=d("clicktoshow");if(a||i){h(r,o,t,d);for(var s=o.showarrow,c=["x","y"],l=[-10,-30],p={_fullLayout:t},g=0;g<2;g++){var u=c[g],x=v.coerceRef(r,o,p,u,"","paper");if("paper"!==x&&v.getFromId(p,x)._annIndices.push(o._index),v.coercePosition(o,p,d,x,u,.5),s){var f="a"+u,T=v.coerceRef(r,o,p,f,"pixel",["pixel","paper"]);"pixel"!==T&&T!==x&&(T=o[f]="pixel"),v.coercePosition(o,p,d,T,f,"pixel"===T?l[g]:.4)}d(u+"anchor"),d(u+"shift")}if(m.noneOrAll(r,o,["x","y"]),s&&m.noneOrAll(r,o,["ax","ay"]),i){var k=d("xclick"),w=d("yclick");o._xclick=void 0===k?o.x:v.cleanPosition(k,p,o.xref),o._yclick=void 0===w?o.y:v.cleanPosition(w,p,o.yref)}}}Q.exports=function(r,o){b(r,o,{name:"annotations",handleItemDefaults:n})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../registry"),b=y("../../plots/plots"),h=y("../../lib"),e=h.strTranslate,n=y("../../plots/cartesian/axes"),r=y("../color"),o=y("../drawing"),t=y("../fx"),d=y("../../lib/svg_text_utils"),a=y("../../lib/setcursor"),i=y("../dragelement"),s=y("../../plot_api/plot_template").arrayEditor,c=y("./draw_arrow_head");function l(u,x){var f=u._fullLayout.annotations[x]||{},T=n.getFromId(u,f.xref),_=n.getFromId(u,f.yref);T&&T.setScale(),_&&_.setScale(),g(u,f,x,!1,T,_)}function p(u,x,f,T,_){var k=_[f],w=_[f+"ref"],C=-1!==f.indexOf("y"),A="domain"===n.getRefType(w),O=C?T.h:T.w;return u?A?k+(C?-x:x)/u._length:u.p2r(u.r2p(k)+x):k+(C?-x:x)/O}function g(u,x,f,T,_,k){var w,C,A=u._fullLayout,O=u._fullLayout._size,P=u._context.edits;T?(w="annotation-"+T,C=T+".annotations"):(w="annotation",C="annotations");var S=s(u.layout,C,x),E=S.modifyBase,D=S.modifyItem,z=S.getUpdateObj;A._infolayer.selectAll("."+w+'[data-index="'+f+'"]').remove();var N="clip"+A._uid+"_ann"+f;if(x._input&&!1!==x.visible){var V={x:{},y:{}},X=+x.textangle||0,J=A._infolayer.append("g").classed(w,!0).attr("data-index",String(f)).style("opacity",x.opacity),G=J.append("g").classed("annotation-text-g",!0),Z=P[x.showarrow?"annotationTail":"annotationPosition"],re=x.captureevents||P.annotationText||Z,j=G.append("g").style("pointer-events",re?"all":null).call(a,"pointer").on("click",function(){u._dragging=!1,u.emit("plotly_clickannotation",ie(m.event))});x.hovertext&&j.on("mouseover",function(){var de=x.hoverlabel,be=de.font,_e=this.getBoundingClientRect(),xe=u.getBoundingClientRect();t.loneHover({x0:_e.left-xe.left,x1:_e.right-xe.left,y:(_e.top+_e.bottom)/2-xe.top,text:x.hovertext,color:de.bgcolor,borderColor:de.bordercolor,fontFamily:be.family,fontSize:be.size,fontColor:be.color},{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:u})}).on("mouseout",function(){t.loneUnhover(A._hoverlayer.node())});var B=x.borderwidth,ee=B+x.borderpad,U=j.append("rect").attr("class","bg").style("stroke-width",B+"px").call(r.stroke,x.bordercolor).call(r.fill,x.bgcolor),$=x.width||x.height,q=A._topclips.selectAll("#"+N).data($?[0]:[]);q.enter().append("clipPath").classed("annclip",!0).attr("id",N).append("rect"),q.exit().remove();var te=x.font,ne=A._meta?h.templateString(x.text,A._meta):x.text,se=j.append("text").classed("annotation-text",!0).text(ne);P.annotationText?se.call(d.makeEditable,{delegate:j,gd:u}).call(ue).on("edit",function(de){x.text=de,this.call(ue),D("text",de),_&&_.autorange&&E(_._name+".autorange",!0),k&&k.autorange&&E(k._name+".autorange",!0),v.call("_guiRelayout",u,z())}):se.call(ue)}else m.selectAll("#"+N).remove();function ie(de){var be={index:f,annotation:x._input,fullAnnotation:x,event:de};return T&&(be.subplotId=T),be}function ue(de){return de.call(o.font,te).attr({"text-anchor":{left:"start",right:"end"}[x.align]||"middle"}),d.convertToTspans(de,u,le),de}function le(){var de=se.selectAll("a");1===de.size()&&de.text()===se.text()&&j.insert("a",":first-child").attr({"xlink:xlink:href":de.attr("xlink:href"),"xlink:xlink:show":de.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(U.node());var be=j.select(".annotation-text-math-group"),_e=!be.empty(),xe=o.bBox((_e?be:se).node()),Ee=xe.width,he=xe.height,me=x.width||Ee,Se=x.height||he,Me=Math.round(me+2*ee),Ie=Math.round(Se+2*ee);function Fe(at,mt){return"auto"===mt&&(mt=at<1/3?"left":at>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[mt]}for(var Ne=!1,De=["x","y"],$e=0;$e<De.length;$e++){var Re,ze,Ue,je,rt,ut=De[$e],gt=x[ut+"ref"]||ut,At=x["a"+ut+"ref"],_t={x:_,y:k}[ut],it=(X+("x"===ut?0:-90))*Math.PI/180,et=Me*Math.cos(it),wt=Ie*Math.sin(it),Gt=Math.abs(et)+Math.abs(wt),Kt=x[ut+"anchor"],cr=x[ut+"shift"]*("x"===ut?1:-1),ar=V[ut],hr=n.getRefType(gt);if(_t&&"domain"!==hr){var Xt=_t.r2fraction(x[ut]);(Xt<0||Xt>1)&&(At===gt?((Xt=_t.r2fraction(x["a"+ut]))<0||Xt>1)&&(Ne=!0):Ne=!0),Re=_t._offset+_t.r2p(x[ut]),je=.5}else{var He="domain"===hr;"x"===ut?(Ue=x[ut],Re=He?_t._offset+_t._length*Ue:Re=O.l+O.w*Ue):(Ue=1-x[ut],Re=He?_t._offset+_t._length*Ue:Re=O.t+O.h*Ue),je=x.showarrow?.5:Ue}if(x.showarrow){ar.head=Re;var Je=x["a"+ut];if(rt=et*Fe(.5,x.xanchor)-wt*Fe(.5,x.yanchor),At===gt){var pe=n.getRefType(At);"domain"===pe?("y"===ut&&(Je=1-Je),ar.tail=_t._offset+_t._length*Je):ar.tail="paper"===pe?"y"===ut?O.t+O.h*(Je=1-Je):O.l+O.w*Je:_t._offset+_t.r2p(Je),ze=rt}else ar.tail=Re+Je,ze=rt+Je;ar.text=ar.tail+rt;var we=A["x"===ut?"width":"height"];if("paper"===gt&&(ar.head=h.constrain(ar.head,1,we-1)),"pixel"===At){var Be=-Math.max(ar.tail-3,ar.text),We=Math.min(ar.tail+3,ar.text)-we;Be>0?(ar.tail+=Be,ar.text+=Be):We>0&&(ar.tail-=We,ar.text-=We)}ar.tail+=cr,ar.head+=cr}else ze=rt=Gt*Fe(je,Kt),ar.text=Re+rt;ar.text+=cr,rt+=cr,x["_"+ut+"padplus"]=Gt/2+(ze+=cr),x["_"+ut+"padminus"]=Gt/2-ze,x["_"+ut+"size"]=Gt,x["_"+ut+"shift"]=rt}if(Ne)j.remove();else{var Ke=0,Ye=0;"left"!==x.align&&(Ke=(me-Ee)*("center"===x.align?.5:1)),"top"!==x.valign&&(Ye=(Se-he)*("middle"===x.valign?.5:1)),_e?be.select("svg").attr({x:ee+Ke-1,y:ee+Ye}).call(o.setClipUrl,$?N:null,u):se.call(d.positionText,ee+Ke-xe.left,ee+Ye-xe.top).call(o.setClipUrl,$?N:null,u),q.select("rect").call(o.setRect,ee,ee,me,Se),U.call(o.setRect,B/2,B/2,Me-B,Ie-B),j.call(o.setTranslate,Math.round(V.x.text-Me/2),Math.round(V.y.text-Ie/2)),G.attr({transform:"rotate("+X+","+V.x.text+","+V.y.text+")"});var St,Ft=function(at,mt){J.selectAll(".annotation-arrow-g").remove();var qt=V.x.head,Et=V.y.head,Dt=V.x.tail+at,Le=V.y.tail+mt,Xe=V.x.text+at,ot=V.y.text+mt,dt=h.rotationXYMatrix(X,Xe,ot),Lt=h.apply2DTransform(dt),Ut=h.apply2DTransform2(dt),$t=+U.attr("width"),Wt=+U.attr("height"),wr=Xe-.5*$t,Rr=wr+$t,br=ot-.5*Wt,nr=br+Wt,lr=[[wr,br,wr,nr],[wr,nr,Rr,nr],[Rr,nr,Rr,br],[Rr,br,wr,br]].map(Ut);if(!lr.reduce(function(sn,gn){return sn^!!h.segmentsIntersect(qt,Et,qt+1e6,Et+1e6,gn[0],gn[1],gn[2],gn[3])},!1)){lr.forEach(function(sn){var gn=h.segmentsIntersect(Dt,Le,qt,Et,sn[0],sn[1],sn[2],sn[3]);gn&&(Dt=gn.x,Le=gn.y)});var sr=x.arrowwidth,_r=x.arrowcolor,Ar=x.arrowside,zt=J.append("g").style({opacity:r.opacity(_r)}).classed("annotation-arrow-g",!0),ur=zt.append("path").attr("d","M"+Dt+","+Le+"L"+qt+","+Et).style("stroke-width",sr+"px").call(r.stroke,r.rgb(_r));if(c(ur,Ar,x),P.annotationPosition&&ur.node().parentNode&&!T){var Tt=qt,Qt=Et;if(x.standoff){var Er=Math.sqrt(Math.pow(qt-Dt,2)+Math.pow(Et-Le,2));Tt+=x.standoff*(Dt-qt)/Er,Qt+=x.standoff*(Le-Et)/Er}var zr,an,Kr=zt.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Dt-Tt)+","+(Le-Qt),transform:e(Tt,Qt)}).style("stroke-width",sr+6+"px").call(r.stroke,"rgba(0,0,0,0)").call(r.fill,"rgba(0,0,0,0)");i.init({element:Kr.node(),gd:u,prepFn:function(){var sn=o.getTranslate(j);zr=sn.x,an=sn.y,_&&_.autorange&&E(_._name+".autorange",!0),k&&k.autorange&&E(k._name+".autorange",!0)},moveFn:function(sn,gn){var zn=Lt(zr,an),Vr=zn[0]+sn,_n=zn[1]+gn;j.call(o.setTranslate,Vr,_n),D("x",p(_,sn,"x",O,x)),D("y",p(k,gn,"y",O,x)),x.axref===x.xref&&D("ax",p(_,sn,"ax",O,x)),x.ayref===x.yref&&D("ay",p(k,gn,"ay",O,x)),zt.attr("transform",e(sn,gn)),G.attr({transform:"rotate("+X+","+Vr+","+_n+")"})},doneFn:function(){v.call("_guiRelayout",u,z());var sn=document.querySelector(".js-notes-box-panel");sn&&sn.redraw(sn.selectedObj)}})}}};x.showarrow&&Ft(0,0),Z&&i.init({element:j.node(),gd:u,prepFn:function(){St=G.attr("transform")},moveFn:function(at,mt){var qt="pointer";if(x.showarrow)D("ax",x.axref===x.xref?p(_,at,"ax",O,x):x.ax+at),D("ay",x.ayref===x.yref?p(k,mt,"ay",O.w,x):x.ay+mt),Ft(at,mt);else{if(T)return;var Et,Dt;if(_)Et=p(_,at,"x",O,x);else{var Le=x._xsize/O.w;Et=i.align(x.x+(x._xshift-x.xshift)/O.w-Le/2+at/O.w,Le,0,1,x.xanchor)}if(k)Dt=p(k,mt,"y",O,x);else{var ot=x._ysize/O.h;Dt=i.align(x.y-(x._yshift+x.yshift)/O.h-ot/2-mt/O.h,ot,0,1,x.yanchor)}D("x",Et),D("y",Dt),_&&k||(qt=i.getCursor(_?.5:Et,k?.5:Dt,x.xanchor,x.yanchor))}G.attr({transform:e(at,mt)+St}),a(j,qt)},clickFn:function(at,mt){x.captureevents&&u.emit("plotly_clickannotation",ie(mt))},doneFn:function(){a(j),v.call("_guiRelayout",u,z());var at=document.querySelector(".js-notes-box-panel");at&&at.redraw(at.selectedObj)}})}}}Q.exports={draw:function(u){var x=u._fullLayout;x._infolayer.selectAll(".annotation").remove();for(var f=0;f<x.annotations.length;f++)x.annotations[f].visible&&l(u,f);return b.previousPromises(u)},drawOne:l,drawRaw:g}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../color"),b=y("./arrow_paths"),h=y("../../lib"),e=h.strScale,n=h.strRotate,r=h.strTranslate;Q.exports=function(o,t,d){var a,i,s,c,l=o.node(),p=b[d.arrowhead||0],g=b[d.startarrowhead||0],u=(d.arrowwidth||1)*(d.arrowsize||1),x=(d.arrowwidth||1)*(d.startarrowsize||1),f=t.indexOf("start")>=0,T=t.indexOf("end")>=0,_=p.backoff*u+d.standoff,k=g.backoff*x+d.startstandoff;if("line"===l.nodeName){a={x:+o.attr("x1"),y:+o.attr("y1")},i={x:+o.attr("x2"),y:+o.attr("y2")};var w=a.x-i.x,C=a.y-i.y;if(c=(s=Math.atan2(C,w))+Math.PI,_&&k&&_+k>Math.sqrt(w*w+C*C))return void J();if(_){if(_*_>w*w+C*C)return void J();var A=_*Math.cos(s),O=_*Math.sin(s);i.x+=A,i.y+=O,o.attr({x2:i.x,y2:i.y})}if(k){if(k*k>w*w+C*C)return void J();var P=k*Math.cos(s),S=k*Math.sin(s);a.x-=P,a.y-=S,o.attr({x1:a.x,y1:a.y})}}else if("path"===l.nodeName){var E=l.getTotalLength(),D="";if(E<_+k)return void J();var z=l.getPointAtLength(0),N=l.getPointAtLength(.1);s=Math.atan2(z.y-N.y,z.x-N.x),a=l.getPointAtLength(Math.min(k,E)),D="0px,"+k+"px,";var V=l.getPointAtLength(E),X=l.getPointAtLength(E-.1);c=Math.atan2(V.y-X.y,V.x-X.x),i=l.getPointAtLength(Math.max(0,E-_)),o.style("stroke-dasharray",D+=E-(D?k+_:_)+"px,"+E+"px")}function J(){o.style("stroke-dasharray","0px,100px")}function G(Z,re,j,B){Z.path&&(Z.noRotate&&(j=0),m.select(l.parentNode).append("path").attr({class:o.attr("class"),d:Z.path,transform:r(re.x,re.y)+n(180*j/Math.PI)+e(B)}).style({fill:v.rgb(d.arrowcolor),"stroke-width":0}))}f&&G(g,a,s,x),T&&G(p,i,c,u)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(y,Q,K){"use strict";var m=y("./draw"),v=y("./click");Q.exports={moduleType:"component",name:"annotations",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("annotations"),calcAutorange:y("./calc_autorange"),draw:m.draw,drawOne:m.drawOne,drawRaw:m.drawRaw,hasClickToShow:v.hasClickToShow,onClick:v.onClick,convertCoords:y("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(y,Q,K){"use strict";var m=y("../annotations/attributes"),v=y("../../plot_api/edit_types").overrideAll,b=y("../../plot_api/plot_template").templatedArray;Q.exports=v(b("annotation",{visible:m.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:m.xanchor,xshift:m.xshift,yanchor:m.yanchor,yshift:m.yshift,text:m.text,textangle:m.textangle,font:m.font,width:m.width,height:m.height,opacity:m.opacity,align:m.align,valign:m.valign,bgcolor:m.bgcolor,bordercolor:m.bordercolor,borderpad:m.borderpad,borderwidth:m.borderwidth,showarrow:m.showarrow,arrowcolor:m.arrowcolor,arrowhead:m.arrowhead,startarrowhead:m.startarrowhead,arrowside:m.arrowside,arrowsize:m.arrowsize,startarrowsize:m.startarrowsize,arrowwidth:m.arrowwidth,standoff:m.standoff,startstandoff:m.startstandoff,hovertext:m.hovertext,hoverlabel:m.hoverlabel,captureevents:m.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes");function b(h,e){var n=e.fullSceneLayout.domain,r=e.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};h._xa={},m.extendFlat(h._xa,o),v.setConvert(h._xa),h._xa._offset=r.l+n.x[0]*r.w,h._xa.l2p=function(){return.5*(1+h._pdata[0]/h._pdata[3])*r.w*(n.x[1]-n.x[0])},h._ya={},m.extendFlat(h._ya,o),v.setConvert(h._ya),h._ya._offset=r.t+(1-n.y[1])*r.h,h._ya.l2p=function(){return.5*(1-h._pdata[1]/h._pdata[3])*r.h*(n.y[1]-n.y[0])}}Q.exports=function(h){for(var e=h.fullSceneLayout.annotations,n=0;n<e.length;n++)b(e[n],h);h.fullLayout._infolayer.selectAll(".annotation-"+h.id).remove()}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("../../plots/array_container_defaults"),h=y("../annotations/common_defaults"),e=y("./attributes");function n(r,o,t,d){function a(s,c){return m.coerce(r,o,e,s,c)}function i(s){var c=s+"axis",l={_fullLayout:{}};return l._fullLayout[c]=t[c],v.coercePosition(o,l,a,s,s,.5)}a("visible")&&(h(r,o,d.fullLayout,a),i("x"),i("y"),i("z"),m.noneOrAll(r,o,["x","y","z"]),o.xref="x",o.yref="y",o.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),o.showarrow&&(o.axref="pixel",o.ayref="pixel",a("ax",-10),a("ay",-30),m.noneOrAll(r,o,["ax","ay"])))}Q.exports=function(r,o,t){b(r,o,{name:"annotations",handleItemDefaults:n,fullLayout:t.fullLayout})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(y,Q,K){"use strict";var m=y("../annotations/draw").drawRaw,v=y("../../plots/gl3d/project"),b=["x","y","z"];Q.exports=function(h){for(var e=h.fullSceneLayout,n=h.dataScale,r=e.annotations,o=0;o<r.length;o++){for(var t=r[o],d=!1,a=0;a<3;a++){var i=b[a],c=e[i+"axis"].r2fraction(t[i]);if(c<0||c>1){d=!0;break}}d?h.fullLayout._infolayer.select(".annotation-"+h.id+'[data-index="'+o+'"]').remove():(t._pdata=v(h.glplot.cameraParams,[e.xaxis.r2l(t.x)*n[0],e.yaxis.r2l(t.y)*n[1],e.zaxis.r2l(t.z)*n[2]]),m(h.graphDiv,t,o,h.id,t._xa,t._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib");Q.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:y("./attributes")}}},layoutAttributes:y("./attributes"),handleDefaults:y("./defaults"),includeBasePlot:function(b,h){var e=m.subplotsRegistry.gl3d;if(e)for(var n=e.attrRegex,r=Object.keys(b),o=0;o<r.length;o++){var t=r[o];n.test(t)&&(b[t].annotations||[]).length&&(v.pushUnique(h._basePlotModules,e),v.pushUnique(h._subplots.gl3d,t))}},convert:y("./convert"),draw:y("./draw")}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(y,Q,K){"use strict";Q.exports=y("world-calendars/dist/main"),y("world-calendars/dist/plus"),y("world-calendars/dist/calendars/chinese"),y("world-calendars/dist/calendars/coptic"),y("world-calendars/dist/calendars/discworld"),y("world-calendars/dist/calendars/ethiopian"),y("world-calendars/dist/calendars/hebrew"),y("world-calendars/dist/calendars/islamic"),y("world-calendars/dist/calendars/julian"),y("world-calendars/dist/calendars/mayan"),y("world-calendars/dist/calendars/nanakshahi"),y("world-calendars/dist/calendars/nepali"),y("world-calendars/dist/calendars/persian"),y("world-calendars/dist/calendars/taiwan"),y("world-calendars/dist/calendars/thai"),y("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(y,Q,K){"use strict";var m=y("./calendars"),v=y("../../lib"),b=y("../../constants/numerical"),h=b.EPOCHJD,e=b.ONEDAY,n={valType:"enumerated",values:v.sortObjectKeys(m.calendars),editType:"calc",dflt:"gregorian"},r=function(g,u,x,f){var T={};return T[x]=n,v.coerce(g,u,T,x,f)},o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},t={};function d(g){return t[g]||(t[g]=m.instance(g))}function a(g){return v.extendFlat({},n,{description:g})}function i(g){return"Sets the calendar system to use with `"+g+"` date data."}var s={xcalendar:a(i("x"))},c=v.extendFlat({},s,{ycalendar:a(i("y"))}),l=v.extendFlat({},c,{zcalendar:a(i("z"))}),p=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Q.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:c,bar:c,box:c,heatmap:c,contour:c,histogram:c,histogram2d:c,histogram2dcontour:c,scatter3d:l,surface:l,mesh3d:l,scattergl:c,ohlc:s,candlestick:s},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:p},yaxis:{calendar:p},scene:{xaxis:{calendar:p},yaxis:{calendar:p},zaxis:{calendar:p}},polar:{radialaxis:{calendar:p}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:n,handleDefaults:r,handleTraceDefaults:function(g,u,x,f){for(var T=0;T<x.length;T++)r(g,u,x[T]+"calendar",f.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:d,worldCalFmt:function(g,u,x){for(var f,T,_,k,w,C=Math.floor((u+.05)/e)+h,A=d(x).fromJD(C),O=0;-1!==(O=g.indexOf("%",O));)"0"===(f=g.charAt(O+1))||"-"===f||"_"===f?(_=3,T=g.charAt(O+2),"_"===f&&(f="-")):(T=f,f="0",_=2),(k=o[T])?(w="##"===k?"##":A.formatDate(k[f]),g=g.substr(0,O)+w+g.substr(O+_),O+=w.length):O+=_;return g}}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(y,Q,K){"use strict";K.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],K.defaultLine="#444",K.lightLine="#eee",K.background="#fff",K.borderLine="#BEC8D9",K.lightFraction=1e3/11},{}],367:[function(y,Q,K){"use strict";var m=y("tinycolor2"),v=y("fast-isnumeric"),b=y("../../lib/array").isTypedArray,h=Q.exports={},e=y("./attributes");h.defaults=e.defaults;var n=h.defaultLine=e.defaultLine;h.lightLine=e.lightLine;var r=h.background=e.background;function o(t){if(v(t)||"string"!=typeof t)return t;var d=t.trim();if("rgb"!==d.substr(0,3))return t;var a=d.match(/^rgba?\s*\(([^()]*)\)$/);if(!a)return t;var i=a[1].trim().split(/\s*[\s,]\s*/),s="a"===d.charAt(3)&&4===i.length;if(!s&&3!==i.length)return t;for(var c=0;c<i.length;c++){if(!(i[c].length&&(i[c]=Number(i[c]),i[c]>=0)))return t;if(3===c)i[c]>1&&(i[c]=1);else if(i[c]>=1)return t}var l=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return s?"rgba("+l+", "+i[3]+")":"rgb("+l+")"}h.tinyRGB=function(t){var d=t.toRgb();return"rgb("+Math.round(d.r)+", "+Math.round(d.g)+", "+Math.round(d.b)+")"},h.rgb=function(t){return h.tinyRGB(m(t))},h.opacity=function(t){return t?m(t).getAlpha():0},h.addOpacity=function(t,d){var a=m(t).toRgb();return"rgba("+Math.round(a.r)+", "+Math.round(a.g)+", "+Math.round(a.b)+", "+d+")"},h.combine=function(t,d){var a=m(t).toRgb();if(1===a.a)return m(t).toRgbString();var i=m(d||r).toRgb(),s=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a};return m({r:s.r*(1-a.a)+a.r*a.a,g:s.g*(1-a.a)+a.g*a.a,b:s.b*(1-a.a)+a.b*a.a}).toRgbString()},h.contrast=function(t,d,a){var i=m(t);return 1!==i.getAlpha()&&(i=m(h.combine(t,r))),(i.isDark()?d?i.lighten(d):r:a?i.darken(a):n).toString()},h.stroke=function(t,d){var a=m(d);t.style({stroke:h.tinyRGB(a),"stroke-opacity":a.getAlpha()})},h.fill=function(t,d){var a=m(d);t.style({fill:h.tinyRGB(a),"fill-opacity":a.getAlpha()})},h.clean=function(t){if(t&&"object"==typeof t){var d,a,i,s,c=Object.keys(t);for(d=0;d<c.length;d++)if(s=t[i=c[d]],"color"===i.substr(i.length-5))if(Array.isArray(s))for(a=0;a<s.length;a++)s[a]=o(s[a]);else t[i]=o(s);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(s))for(a=0;a<s.length;a++)Array.isArray(s[a])&&(s[a][1]=o(s[a][1]));else if(Array.isArray(s)){var l=s[0];if(!Array.isArray(l)&&l&&"object"==typeof l)for(a=0;a<s.length;a++)h.clean(s[a])}else s&&"object"==typeof s&&!b(s)&&h.clean(s)}}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/layout_attributes"),v=y("../../plots/font_attributes"),b=y("../../lib/extend").extendFlat,h=y("../../plot_api/edit_types").overrideAll;Q.exports=h({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:m.linecolor,outlinewidth:m.linewidth,bordercolor:m.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:b({},m.ticks,{dflt:""}),ticklabeloverflow:b({},m.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,tickfont:v({}),tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,separatethousands:m.separatethousands,exponentformat:m.exponentformat,minexponent:m.minexponent,showexponent:m.showexponent,title:{text:{valType:"string"},font:v({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:v({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(y,Q,K){"use strict";Q.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plot_api/plot_template"),b=y("../../plots/cartesian/tick_value_defaults"),h=y("../../plots/cartesian/tick_mark_defaults"),e=y("../../plots/cartesian/tick_label_defaults"),n=y("../../plots/cartesian/prefix_suffix_defaults"),r=y("./attributes");Q.exports=function(o,t,d){var a=v.newContainer(t,"colorbar"),i=o.colorbar||{};function s(C,A){return m.coerce(i,a,r,C,A)}var c=d.margin||{t:0,b:0,l:0,r:0},l=d.width-c.l-c.r,p=d.height-c.t-c.b,g="v"===s("orientation"),u=s("thicknessmode");s("thickness","fraction"===u?30/(g?l:p):30);var x=s("lenmode");s("len","fraction"===x?1:g?p:l),s("x",g?1.02:.5),s("xanchor",g?"left":"center"),s("xpad"),s("y",g?.5:1.02),s("yanchor",g?"middle":"bottom"),s("ypad"),m.noneOrAll(i,a,["x","y"]),s("outlinecolor"),s("outlinewidth"),s("bordercolor"),s("borderwidth"),s("bgcolor");var f=m.coerce(i,a,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:g?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");s("ticklabeloverflow",-1!==f.indexOf("inside")?"hide past domain":"hide past div"),b(i,a,s,"linear");var T=d.font,_={outerTicks:!1,font:T};-1!==f.indexOf("inside")&&(_.bgColor="black"),n(i,a,s,"linear",_),e(i,a,s,"linear",_),h(i,a,s,"linear",_),s("title.text",d._dfltTitle.colorbar);var k=a.tickfont,w=m.extendFlat({},k,{color:T.color,size:m.bigFont(k.size)});m.coerceFont(s,"title.font",w),s("title.side",g?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("tinycolor2"),b=y("../../plots/plots"),h=y("../../registry"),e=y("../../plots/cartesian/axes"),n=y("../dragelement"),r=y("../../lib"),o=r.strTranslate,t=y("../../lib/extend").extendFlat,d=y("../../lib/setcursor"),a=y("../drawing"),i=y("../color"),s=y("../titles"),c=y("../../lib/svg_text_utils"),l=y("../colorscale/helpers").flipScale,p=y("../../plots/cartesian/axis_defaults"),g=y("../../plots/cartesian/position_defaults"),u=y("../../plots/cartesian/layout_attributes"),x=y("../../constants/alignment"),f=x.LINE_SPACING,T=x.FROM_TL,_=x.FROM_BR,k=y("./constants").cn;Q.exports={draw:function(w){var C=w._fullLayout._infolayer.selectAll("g."+k.colorbar).data(function(A){var O,P,S,E,D=A._fullLayout,z=A.calcdata,N=[];function V($){return t($,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function X(){"function"==typeof E.calc?E.calc(A,S,O):(O._fillgradient=P.reversescale?l(P.colorscale):P.colorscale,O._zrange=[P[E.min],P[E.max]])}for(var J=0;J<z.length;J++){var Z=(S=z[J][0].trace)._module.colorbar;if(!0===S.visible&&Z)for(var re=Array.isArray(Z),j=re?Z:[Z],B=0;B<j.length;B++){var H=(E=j[B]).container;(P=H?S[H]:S)&&P.showscale&&((O=V(P.colorbar))._id="cb"+S.uid+(re&&H?"-"+H:""),O._traceIndex=S.index,O._propPrefix=(H?H+".":"")+"colorbar.",O._meta=S._meta,X(),N.push(O))}}for(var ee in D._colorAxes)if((P=D[ee]).showscale){var U=D._colorAxes[ee];(O=V(P.colorbar))._id="cb"+ee,O._propPrefix=ee+".colorbar.",O._meta=D._meta,E={min:"cmin",max:"cmax"},"heatmap"!==U[0]&&(E.calc=(S=U[1])._module.colorbar.calc),X(),N.push(O)}return N}(w),function(A){return A._id});C.enter().append("g").attr("class",function(A){return A._id}).classed(k.colorbar,!0),C.each(function(A){var O=m.select(this);r.ensureSingle(O,"rect",k.cbbg),r.ensureSingle(O,"g",k.cbfills),r.ensureSingle(O,"g",k.cblines),r.ensureSingle(O,"g",k.cbaxis,function(S){S.classed(k.crisp,!0)}),r.ensureSingle(O,"g",k.cbtitleunshift,function(S){S.append("g").classed(k.cbtitle,!0)}),r.ensureSingle(O,"rect",k.cboutline);var S,E,D,z,N,V,X,J,P=function(S,E,D){var z="v"===E.orientation,N=E.len,V=E.lenmode,X=E.thickness,J=E.thicknessmode,G=E.outlinewidth,Z=E.borderwidth,re=E.bgcolor,j=E.xanchor,B=E.yanchor,H=E.xpad,ee=E.ypad,U=E.x,$=z?E.y:1-E.y,q=D._fullLayout,te=q._size,ne=E._fillcolor,se=E._line,ie=E.title,ue=ie.side,le=E._zrange||m.extent(("function"==typeof ne?ne:se.color).domain()),de="function"==typeof se.color?se.color:function(){return se.color},be="function"==typeof ne?ne:function(){return ne},_e=E._levels,xe=function(hr,Xt,He){var Je,pe,we=Xt._levels,Be=[],We=[],Ke=we.end+we.size/100,Ye=we.size,ft=1.001*He[0]-.001*He[1],ct=1.001*He[1]-.001*He[0];for(pe=0;pe<1e5&&(Je=we.start+pe*Ye,!(Ye>0?Je>=Ke:Je<=Ke));pe++)Je>ft&&Je<ct&&Be.push(Je);if(Xt._fillgradient)We=[0];else if("function"==typeof Xt._fillcolor){var St=Xt._filllevels;if(St)for(Ke=St.end+St.size/100,Ye=St.size,pe=0;pe<1e5&&(Je=St.start+pe*Ye,!(Ye>0?Je>=Ke:Je<=Ke));pe++)Je>He[0]&&Je<He[1]&&We.push(Je);else(We=Be.map(function(Ft){return Ft-we.size/2})).push(We[We.length-1]+we.size)}else Xt._fillcolor&&"string"==typeof Xt._fillcolor&&(We=[0]);return we.size<0&&(Be.reverse(),We.reverse()),{line:Be,fill:We}}(0,E,le),Ee=xe.fill,he=xe.line,me=Math.round(X*("fraction"===J?z?te.w:te.h:1)),Se=me/(z?te.w:te.h),Me=Math.round(N*("fraction"===V?z?te.h:te.w:1)),Ie=Me/(z?te.h:te.w),Fe=Math.round(z?U*te.w+H:$*te.h+ee),Ne={center:.5,right:1}[j]||0,De={top:1,middle:.5}[B]||0,$e=z?U-Ne*Se:$-De*Se,Re=z?$-De*Ie:U-Ne*Ie,ze=Math.round(z?te.h*(1-Re):te.w*Re);E._lenFrac=Ie,E._thickFrac=Se,E._uFrac=$e,E._vFrac=Re;var Ue=E._axis=function(hr,Xt,He){var Je=hr._fullLayout,pe="v"===Xt.orientation,we={type:"linear",range:He,tickmode:Xt.tickmode,nticks:Xt.nticks,tick0:Xt.tick0,dtick:Xt.dtick,tickvals:Xt.tickvals,ticktext:Xt.ticktext,ticks:Xt.ticks,ticklen:Xt.ticklen,tickwidth:Xt.tickwidth,tickcolor:Xt.tickcolor,showticklabels:Xt.showticklabels,ticklabelposition:Xt.ticklabelposition,ticklabeloverflow:Xt.ticklabeloverflow,ticklabelstep:Xt.ticklabelstep,tickfont:Xt.tickfont,tickangle:Xt.tickangle,tickformat:Xt.tickformat,exponentformat:Xt.exponentformat,minexponent:Xt.minexponent,separatethousands:Xt.separatethousands,showexponent:Xt.showexponent,showtickprefix:Xt.showtickprefix,tickprefix:Xt.tickprefix,showticksuffix:Xt.showticksuffix,ticksuffix:Xt.ticksuffix,title:Xt.title,showline:!0,anchor:"free",side:pe?"right":"bottom",position:1},Be=pe?"y":"x",We={type:"linear",_id:Be+Xt._id},Ke={letter:Be,font:Je.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Je.calendar};function Ye(ft,ct){return r.coerce(we,We,u,ft,ct)}return p(we,We,Ye,Ke,Je),g(we,We,Ye,Ke),We}(D,E,le);Ue.position=Se+(z?U+H/te.w:$+ee/te.h);var je=-1!==["top","bottom"].indexOf(ue);if(z&&je&&(Ue.title.side=ue,Ue.titlex=U+H/te.w,Ue.titley=Re+("top"===ie.side?Ie-ee/te.h:ee/te.h)),z||je||(Ue.title.side=ue,Ue.titley=$+ee/te.h,Ue.titlex=Re+H/te.w),se.color&&"auto"===E.tickmode){Ue.tickmode="linear",Ue.tick0=_e.start;var rt=_e.size,ut=r.constrain(Me/50,4,15)+1,gt=(le[1]-le[0])/((E.nticks||ut)*rt);if(gt>1){var At=Math.pow(10,Math.floor(Math.log(gt)/Math.LN10));rt*=At*r.roundUp(gt/At,[2,5,10]),(Math.abs(_e.start)/_e.size+1e-6)%1<2e-6&&(Ue.tick0=0)}Ue.dtick=rt}Ue.domain=z?[Re+ee/te.h,Re+Ie-ee/te.h]:[Re+H/te.w,Re+Ie-H/te.w],Ue.setScale(),S.attr("transform",o(Math.round(te.l),Math.round(te.t)));var _t,it=S.select("."+k.cbtitleunshift).attr("transform",o(-Math.round(te.l),-Math.round(te.t))),et=Ue.ticklabelposition,wt=Ue.title.font.size,Gt=S.select("."+k.cbaxis),Kt=0,cr=0;function ar(hr,Xt){var He={propContainer:Ue,propName:E._propPrefix+"title",traceIndex:E._traceIndex,_meta:E._meta,placeholder:q._dfltTitle.colorbar,containerGroup:S.select("."+k.cbtitle)},Je="h"===hr.charAt(0)?hr.substr(1):"h"+hr;S.selectAll("."+Je+",."+Je+"-math-group").remove(),s.draw(D,hr,t(He,Xt||{}))}return r.syncOrAsync([b.previousPromises,function(){var hr,Xt;(z&&je||!z&&!je)&&("top"===ue&&(hr=H+te.l+te.w*U,Xt=ee+te.t+te.h*(1-Re-Ie)+3+.75*wt),"bottom"===ue&&(hr=H+te.l+te.w*U,Xt=ee+te.t+te.h*(1-Re)-3-.25*wt),"right"===ue&&(Xt=ee+te.t+te.h*$+3+.75*wt,hr=H+te.l+te.w*Re),ar(Ue._id+"title",{attributes:{x:hr,y:Xt,"text-anchor":z?"start":"middle"}}))},function(){if(!z&&!je||z&&je){var hr,Xt=S.select("."+k.cbtitle),He=Xt.select("text"),Je=[-G/2,G/2],pe=Xt.select(".h"+Ue._id+"title-math-group").node(),we=15.6;if(He.node()&&(we=parseInt(He.node().style.fontSize,10)*f),pe?(hr=a.bBox(pe),cr=hr.width,(Kt=hr.height)>we&&(Je[1]-=(Kt-we)/2)):He.node()&&!He.classed(k.jsPlaceholder)&&(hr=a.bBox(He.node()),cr=hr.width,Kt=hr.height),z){if(Kt){if(Kt+=5,"top"===ue)Ue.domain[1]-=Kt/te.h,Je[1]*=-1;else{Ue.domain[0]+=Kt/te.h;var Be=c.lineCount(He);Je[1]+=(1-Be)*we}Xt.attr("transform",o(Je[0],Je[1])),Ue.setScale()}}else cr&&("right"===ue&&(Ue.domain[0]+=(cr+wt/2)/te.w),Xt.attr("transform",o(Je[0],Je[1])),Ue.setScale())}S.selectAll("."+k.cbfills+",."+k.cblines).attr("transform",z?o(0,Math.round(te.h*(1-Ue.domain[1]))):o(Math.round(te.w*Ue.domain[0]),0)),Gt.attr("transform",z?o(0,Math.round(-te.t)):o(Math.round(-te.l),0));var We=S.select("."+k.cbfills).selectAll("rect."+k.cbfill).attr("style","").data(Ee);We.enter().append("rect").classed(k.cbfill,!0).style("stroke","none"),We.exit().remove();var Ke=le.map(Ue.c2p).map(Math.round).sort(function(Ft,at){return Ft-at});We.each(function(Ft,at){var mt=[0===at?le[0]:(Ee[at]+Ee[at-1])/2,at===Ee.length-1?le[1]:(Ee[at]+Ee[at+1])/2].map(Ue.c2p).map(Math.round);z&&(mt[1]=r.constrain(mt[1]+(mt[1]>mt[0])?1:-1,Ke[0],Ke[1]));var qt=m.select(this).attr(z?"x":"y",Fe).attr(z?"y":"x",m.min(mt)).attr(z?"width":"height",Math.max(me,2)).attr(z?"height":"width",Math.max(m.max(mt)-m.min(mt),2));if(E._fillgradient)a.gradient(qt,D,E._id,z?"vertical":"horizontalreversed",E._fillgradient,"fill");else{var Et=be(Ft).replace("e-","");qt.attr("fill",v(Et).toHexString())}});var Ye=S.select("."+k.cblines).selectAll("path."+k.cbline).data(se.color&&se.width?he:[]);Ye.enter().append("path").classed(k.cbline,!0),Ye.exit().remove(),Ye.each(function(Ft){var at=Fe,mt=Math.round(Ue.c2p(Ft))+se.width/2%1;m.select(this).attr("d","M"+(z?at+","+mt:mt+","+at)+(z?"h":"v")+me).call(a.lineGroupStyle,se.width,de(Ft),se.dash)}),Gt.selectAll("g."+Ue._id+"tick,path").remove();var ft=Fe+me+(G||0)/2-("outside"===E.ticks?1:0),ct=e.calcTicks(Ue),St=e.getTickSigns(Ue)[2];return e.drawTicks(D,Ue,{vals:"inside"===Ue.ticks?e.clipEnds(Ue,ct):ct,layer:Gt,path:e.makeTickPath(Ue,ft,St),transFn:e.makeTransTickFn(Ue)}),e.drawLabels(D,Ue,{vals:ct,layer:Gt,transFn:e.makeTransTickLabelFn(Ue),labelFns:e.makeLabelFns(Ue,ft)})},function(){if(z&&!je||!z&&je){var hr,Xt,He=Ue.position||0,Je=Ue._offset+Ue._length/2;if("right"===ue)Xt=Je,hr=te.l+te.w*He+10+wt*(Ue.showticklabels?1:.5);else if(hr=Je,"bottom"===ue&&(Xt=te.t+te.h*He+10+(-1===et.indexOf("inside")?Ue.tickfont.size:0)+("intside"!==Ue.ticks&&E.ticklen||0)),"top"===ue){var pe=ie.text.split("<br>").length;Xt=te.t+te.h*He+10-me-f*wt*pe}ar((z?"h":"v")+Ue._id+"title",{avoid:{selection:m.select(D).selectAll("g."+Ue._id+"tick"),side:ue,offsetTop:z?0:te.t,offsetLeft:z?te.l:0,maxShift:z?q.width:q.height},attributes:{x:hr,y:Xt,"text-anchor":"middle"},transform:{rotate:z?-90:0,offset:0}})}},b.previousPromises,function(){var hr,Xt=me+G/2;-1===et.indexOf("inside")&&(hr=a.bBox(Gt.node()),Xt+=z?hr.width:hr.height),_t=it.select("text");var He=0,Je=z&&"top"===ue,pe=!z&&"right"===ue,we=0;if(_t.node()&&!_t.classed(k.jsPlaceholder)){var Be,We=it.select(".h"+Ue._id+"title-math-group").node();We&&(z&&je||!z&&!je)?(He=(hr=a.bBox(We)).width,Be=hr.height):(He=(hr=a.bBox(it.node())).right-te.l-(z?Fe:ze),Be=hr.bottom-te.t-(z?ze:Fe),z||"top"!==ue||(Xt+=hr.height,we=hr.height)),pe&&(_t.attr("transform",o(He/2+wt/2,0)),He*=2),Xt=Math.max(Xt,z?He:Be)}var Ke=2*(z?H:ee)+Xt+Z+G/2,Ye=0;!z&&ie.text&&"bottom"===B&&$<=0&&(Ke+=Ye=Ke/2,we+=Ye),q._hColorbarMoveTitle=Ye,q._hColorbarMoveCBTitle=we;var ft=Z+G;S.select("."+k.cbbg).attr("x",(z?Fe:ze)-ft/2-(z?H:0)).attr("y",(z?ze:Fe)-(z?Me:ee+we-Ye)).attr(z?"width":"height",Math.max(Ke-Ye,2)).attr(z?"height":"width",Math.max(Me+ft,2)).call(i.fill,re).call(i.stroke,E.bordercolor).style("stroke-width",Z);var ct=pe?Math.max(He-10,0):0;if(S.selectAll("."+k.cboutline).attr("x",(z?Fe:ze+H)+ct).attr("y",(z?ze+ee-Me:Fe)+(Je?Kt:0)).attr(z?"width":"height",Math.max(me,2)).attr(z?"height":"width",Math.max(Me-(z?2*ee+Kt:2*H+ct),2)).call(i.stroke,E.outlinecolor).style({fill:"none","stroke-width":G}),S.attr("transform",o(te.l-(z?Ne*Ke:0),te.t-(z?0:(1-De)*Ke-we))),!z&&(Z||v(re).getAlpha()&&!v.equals(q.paper_bgcolor,re))){var St=Gt.selectAll("text"),Ft=St[0].length,at=S.select("."+k.cbbg).node(),mt=a.bBox(at),qt=a.getTranslate(S);St.each(function(Lt,Ut){var $t=Ft-1;if(0===Ut||Ut===$t){var Wt,wr=a.bBox(this),Rr=a.getTranslate(this);Ut===$t?(Wt=mt.right+qt.x+ze-Z-2+U-(wr.right+Rr.x))>0&&(Wt=0):0===Ut&&(Wt=mt.left+qt.x+ze+Z+2-(wr.left+Rr.x))<0&&(Wt=0),Wt&&(Ft<3?this.setAttribute("transform","translate("+Wt+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Et={},Dt=T[j],Le=_[j],Xe=T[B],ot=_[B],dt=Ke-me;z?("pixels"===V?(Et.y=$,Et.t=Me*Xe,Et.b=Me*ot):(Et.t=Et.b=0,Et.yt=$+N*Xe,Et.yb=$-N*ot),"pixels"===J?(Et.x=U,Et.l=Ke*Dt,Et.r=Ke*Le):(Et.l=dt*Dt,Et.r=dt*Le,Et.xl=U-X*Dt,Et.xr=U+X*Le)):("pixels"===V?(Et.x=U,Et.l=Me*Dt,Et.r=Me*Le):(Et.l=Et.r=0,Et.xl=U+N*Dt,Et.xr=U-N*Le),"pixels"===J?(Et.y=1-$,Et.t=Ke*Xe,Et.b=Ke*ot):(Et.t=dt*Xe,Et.b=dt*ot,Et.yt=$-X*Xe,Et.yb=$+X*ot)),b.autoMargin(D,E._id,Et)}],D)}(O,A,w);P&&P.then&&(w._promises||[]).push(P),w._context.edits.colorbarPosition&&(X="v"===(E=A).orientation,J=(D=w)._fullLayout._size,n.init({element:(S=O).node(),gd:D,prepFn:function(){z=S.attr("transform"),d(S)},moveFn:function(G,Z){S.attr("transform",z+o(G,Z)),N=n.align((X?E._uFrac:E._vFrac)+G/J.w,X?E._thickFrac:E._lenFrac,0,1,E.xanchor),V=n.align((X?E._vFrac:1-E._uFrac)-Z/J.h,X?E._lenFrac:E._thickFrac,0,1,E.yanchor);var re=n.getCursor(N,V,E.xanchor,E.yanchor);d(S,re)},doneFn:function(){if(d(S),void 0!==N&&void 0!==V){var G={};G[E._propPrefix+"x"]=N,G[E._propPrefix+"y"]=V,void 0!==E._traceIndex?h.call("_guiRestyle",D,G,E._traceIndex):h.call("_guiRelayout",D,G)}}}))}),C.exit().each(function(A){b.autoMargin(w,A._id)}).remove(),C.order()}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v){return m.isPlainObject(v.colorbar)}},{"../../lib":515}],373:[function(y,Q,K){"use strict";Q.exports={moduleType:"component",name:"colorbar",attributes:y("./attributes"),supplyDefaults:y("./defaults"),draw:y("./draw").draw,hasColorbar:y("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(y,Q,K){"use strict";var m=y("../colorbar/attributes"),v=y("../../lib/regex").counter,b=y("../../lib/sort_object_keys"),h=y("./scales.js").scales;function e(n){return"`"+n+"`"}b(h),Q.exports=function(n,r){n=n||"";var o,t=(r=r||{}).cLetter||"c",d=("onlyIfNumerical"in r||Boolean(n),"noScale"in r?r.noScale:"marker.line"===n),a="showScaleDflt"in r?r.showScaleDflt:"z"===t,i="string"==typeof r.colorscaleDflt?h[r.colorscaleDflt]:null,s=r.editTypeOverride||"",c=n?n+".":"";"colorAttr"in r?o=r.colorAttr:e(c+(o={z:"z",c:"color"}[t]));var l=t+"auto",p=t+"min",g=t+"max",u=t+"mid",x=(e(c+l),e(c+p),e(c+g),{});x[p]=x[g]=void 0;var f={};f[l]=!1;var T={};return"color"===o&&(T.color={valType:"color",arrayOk:!0,editType:s||"style"},r.anim&&(T.color.anim=!0)),T[l]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:x},T[p]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:f},T[g]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:f},T[u]={valType:"number",dflt:null,editType:"calc",impliedEdits:x},T.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},T.autocolorscale={valType:"boolean",dflt:!1!==r.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},T.reversescale={valType:"boolean",dflt:!1,editType:"plot"},d||(T.showscale={valType:"boolean",dflt:a,editType:"calc"},T.colorbar=m),r.noColorAxis||(T.coloraxis={valType:"subplotid",regex:v("coloraxis"),dflt:null,editType:"calc"}),T}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("./helpers").extractOpts;Q.exports=function(h,e,n){var o=h._fullLayout,t=n.vals,d=n.containerStr,a=d?v.nestedProperty(e,d).get():e,i=b(a),s=!1!==i.auto,c=i.min,l=i.max,p=i.mid,g=function(){return v.aggNums(Math.min,null,t)},u=function(){return v.aggNums(Math.max,null,t)};void 0===c?c=g():s&&(c=a._colorAx&&m(c)?Math.min(c,g()):g()),void 0===l?l=u():s&&(l=a._colorAx&&m(l)?Math.max(l,u()):u()),s&&void 0!==p&&(l-p>p-c?c=p-(l-p):l-p<p-c&&(l=p+(p-c))),c===l&&(c-=.5,l+=.5),i._sync("min",c),i._sync("max",l),i.autocolorscale&&i._sync("colorscale",c*l<0?o.colorscale.diverging:c>=0?o.colorscale.sequential:o.colorscale.sequentialminus)}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./helpers").hasColorscale,b=y("./helpers").extractOpts;Q.exports=function(h,e){function n(s,c){var l=s["_"+c];void 0!==l&&(s[c]=l)}function r(s,c){var l=c.container?m.nestedProperty(s,c.container).get():s;if(l)if(l.coloraxis)l._colorAx=e[l.coloraxis];else{var p=b(l),g=p.auto;(g||void 0===p.min)&&n(l,c.min),(g||void 0===p.max)&&n(l,c.max),p.autocolorscale&&n(l,"colorscale")}}for(var o=0;o<h.length;o++){var t=h[o],d=t._module.colorbar;if(d)if(Array.isArray(d))for(var a=0;a<d.length;a++)r(t,d[a]);else r(t,d);v(t,"marker.line")&&r(t,{container:"marker.line",min:"cmin",max:"cmax"})}for(var i in e._colorAxes)r(e[i],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../colorbar/has_colorbar"),h=y("../colorbar/defaults"),e=y("./scales").isValid,n=y("../../registry").traceIs;function r(o,t){var d=t.slice(0,t.length-1);return t?v.nestedProperty(o,d).get()||{}:o}Q.exports=function o(t,d,a,i,s){var c=s.prefix,l=s.cLetter,p="_module"in d,g=r(t,c),u=r(d,c),x=r(d._template||{},c)||{},f=function(){return delete t.coloraxis,delete d.coloraxis,o(t,d,a,i,s)};if(p){var T=a._colorAxes||{},_=i(c+"coloraxis");if(_){var k=n(d,"contour")&&v.nestedProperty(d,"contours.coloring").get()||"heatmap",w=T[_];return void(w?(w[2].push(f),w[0]!==k&&(w[0]=!1,v.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):T[_]=[k,d,[f]])}}var C=g[l+"min"],A=g[l+"max"],O=m(C)&&m(A)&&C<A;i(c+l+"auto",!O)?i(c+l+"mid"):(i(c+l+"min"),i(c+l+"max"));var P,S,E=g.colorscale,D=x.colorscale;void 0!==E&&(P=!e(E)),void 0!==D&&(P=!e(D)),i(c+"autocolorscale",P),i(c+"colorscale"),i(c+"reversescale"),"marker.line."!==c&&(c&&p&&(S=b(g)),i(c+"showscale",S)&&(c&&x&&(u._template=x),h(g,u,a)))}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("tinycolor2"),b=y("fast-isnumeric"),h=y("../../lib"),e=y("../color"),n=y("./scales").isValid,r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],o=["min","max","mid","auto"];function t(c){var l,p,g,u=c._colorAx,x=u||c,f={};for(p=0;p<r.length;p++)f[g=r[p]]=x[g];if(u)for(l="c",p=0;p<o.length;p++)f[g=o[p]]=x["c"+g];else{var T;for(p=0;p<o.length;p++)((T="c"+(g=o[p]))in x||(T="z"+g)in x)&&(f[g]=x[T]);l=T.charAt(0)}return f._sync=function(_,k){var w=-1!==o.indexOf(_)?l+_:_;x[w]=x["_"+w]=k},f}function d(c){for(var l=t(c),p=l.min,g=l.max,u=l.reversescale?a(l.colorscale):l.colorscale,x=u.length,f=new Array(x),T=new Array(x),_=0;_<x;_++){var k=u[_];f[_]=p+k[0]*(g-p),T[_]=k[1]}return{domain:f,range:T}}function a(c){for(var l=c.length,p=new Array(l),g=l-1,u=0;g>=0;g--,u++){var x=c[g];p[u]=[1-x[0],x[1]]}return p}function i(c,l){l=l||{};for(var p=c.domain,g=c.range,u=g.length,x=new Array(u),f=0;f<u;f++){var T=v(g[f]).toRgb();x[f]=[T.r,T.g,T.b,T.a]}var _,k=m.scale.linear().domain(p).range(x).clamp(!0),w=l.noNumericCheck,C=l.returnArray;return(_=w&&C?k:w?function(A){return s(k(A))}:C?function(A){return b(A)?k(A):v(A).isValid()?A:e.defaultLine}:function(A){return b(A)?s(k(A)):v(A).isValid()?A:e.defaultLine}).domain=k.domain,_.range=function(){return g},_}function s(c){return v({r:c[0],g:c[1],b:c[2],a:c[3]}).toRgbString()}Q.exports={hasColorscale:function(c,l,p){var g=l?h.nestedProperty(c,l).get()||{}:c,u=g[p||"color"],x=!1;if(h.isArrayOrTypedArray(u))for(var f=0;f<u.length;f++)if(b(u[f])){x=!0;break}return h.isPlainObject(g)&&(x||!0===g.showscale||b(g.cmin)&&b(g.cmax)||n(g.colorscale)||h.isPlainObject(g.colorbar))},extractOpts:t,extractScale:d,flipScale:a,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(c,l){return i(d(c),l)}}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(y,Q,K){"use strict";var m=y("./scales"),v=y("./helpers");Q.exports={moduleType:"component",name:"colorscale",attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),handleDefaults:y("./defaults"),crossTraceDefaults:y("./cross_trace_defaults"),calc:y("./calc"),scales:m.scales,defaultScale:m.defaultScale,getScale:m.get,isValidScale:m.isValid,hasColorscale:v.hasColorscale,extractOpts:v.extractOpts,extractScale:v.extractScale,flipScale:v.flipScale,makeColorScaleFunc:v.makeColorScaleFunc,makeColorScaleFuncFromTrace:v.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(y,Q,K){"use strict";var m=y("../../lib/extend").extendFlat,v=y("./attributes"),b=y("./scales").scales;Q.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:m({_isSubplotObj:!0,editType:"calc"},v("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plot_api/plot_template"),b=y("./layout_attributes"),h=y("./defaults");Q.exports=function(e,n){function r(l,p){return m.coerce(e,n,b,l,p)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var o,t,d=n._colorAxes;function a(l,p){return m.coerce(o,t,b.coloraxis,l,p)}for(var i in d){var s=d[i];if(s[0])o=e[i]||{},(t=v.newContainer(n,i,"coloraxis"))._name=i,h(o,t,n,a,{prefix:"",cLetter:"c"});else{for(var c=0;c<s[2].length;c++)s[2][c]();delete n._colorAxes[i]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(y,Q,K){"use strict";var m=y("tinycolor2"),v={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},b=v.RdBu;function h(e){var n=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var r=0;r<e.length;r++){var o=e[r];if(2!==o.length||+o[0]<n||!m(o[1]).isValid())return!1;n=+o[0]}return!0}Q.exports={scales:v,defaultScale:b,get:function(e,n){if(n||(n=b),!e)return n;function r(){try{e=v[e]||JSON.parse(e)}catch{e=n}}return"string"==typeof e&&(r(),"string"==typeof e&&r()),h(e)?e:n},isValid:function(e){return void 0!==v[e]||h(e)}}},{tinycolor2:313}],383:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h,e){var n=(m-b)/(h-b),r=n+v/(h-b),o=(n+r)/2;return"left"===e||"bottom"===e?n:"center"===e||"middle"===e?o:"right"===e||"top"===e?r:n<2/3-o?n:r>4/3-o?r:o}},{}],384:[function(y,Q,K){"use strict";var m=y("../../lib"),v=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];Q.exports=function(b,h,e,n){return b="left"===e?0:"center"===e?1:"right"===e?2:m.constrain(Math.floor(3*b),0,2),h="bottom"===n?0:"middle"===n?1:"top"===n?2:m.constrain(Math.floor(3*h),0,2),v[h][b]}},{"../../lib":515}],385:[function(y,Q,K){"use strict";K.selectMode=function(m){return"lasso"===m||"select"===m},K.drawMode=function(m){return"drawclosedpath"===m||"drawopenpath"===m||"drawline"===m||"drawrect"===m||"drawcircle"===m},K.openMode=function(m){return"drawline"===m||"drawopenpath"===m},K.rectMode=function(m){return"select"===m||"drawline"===m||"drawrect"===m||"drawcircle"===m},K.freeMode=function(m){return"lasso"===m||"drawclosedpath"===m||"drawopenpath"===m},K.selectingOrDrawing=function(m){return K.freeMode(m)||K.rectMode(m)}},{}],386:[function(y,Q,K){"use strict";var m=y("mouse-event-offset"),v=y("has-hover"),b=y("has-passive-events"),h=y("../../lib").removeElement,e=y("../../plots/cartesian/constants"),n=Q.exports={};n.align=y("./align"),n.getCursor=y("./cursor");var r=y("./unhover");function o(){var d=document.createElement("div");d.className="dragcover";var a=d.style;return a.position="fixed",a.left=0,a.right=0,a.top=0,a.bottom=0,a.zIndex=999999999,a.background="none",document.body.appendChild(d),d}function t(d){return m(d.changedTouches?d.changedTouches[0]:d,document.body)}n.unhover=r.wrapped,n.unhoverRaw=r.raw,n.init=function(d){var a,i,s,c,l,p,g,u,x=d.gd,f=1,T=x._context.doubleClickDelay,_=d.element;x._mouseDownTime||(x._mouseDownTime=0),_.style.pointerEvents="all",_.onmousedown=w,b?(_._ontouchstart&&_.removeEventListener("touchstart",_._ontouchstart),_._ontouchstart=w,_.addEventListener("touchstart",w,{passive:!1})):_.ontouchstart=w;var k=d.clampFn||function(O,P,S){return Math.abs(O)<S&&(O=0),Math.abs(P)<S&&(P=0),[O,P]};function w(O){x._dragged=!1,x._dragging=!0;var P=t(O);a=P[0],i=P[1],g=O.target,p=O,u=2===O.buttons||O.ctrlKey,void 0===O.clientX&&void 0===O.clientY&&(O.clientX=a,O.clientY=i),(s=(new Date).getTime())-x._mouseDownTime<T?f+=1:(f=1,x._mouseDownTime=s),d.prepFn&&d.prepFn(O,a,i),v&&!u?(l=o()).style.cursor=window.getComputedStyle(_).cursor:v||(l=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(_).cursor),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),!1!==d.dragmode&&(O.preventDefault(),document.addEventListener("mousemove",C),document.addEventListener("touchmove",C,{passive:!1}))}function C(O){O.preventDefault();var P=t(O),E=k(P[0]-a,P[1]-i,d.minDrag||e.MINDRAG),D=E[0],z=E[1];(D||z)&&(x._dragged=!0,n.unhover(x,O)),x._dragged&&d.moveFn&&!u&&(x._dragdata={element:_,dx:D,dy:z},d.moveFn(D,z))}function A(O){if(delete x._dragdata,!1!==d.dragmode&&(O.preventDefault(),document.removeEventListener("mousemove",C),document.removeEventListener("touchmove",C)),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),v?h(l):c&&(l.documentElement.style.cursor=c,c=null),x._dragging){if(x._dragging=!1,(new Date).getTime()-x._mouseDownTime>T&&(f=Math.max(f-1,1)),x._dragged)d.doneFn&&d.doneFn();else if(d.clickFn&&d.clickFn(f,p),!u){var P;try{P=new MouseEvent("click",O)}catch{var S=t(O);(P=document.createEvent("MouseEvents")).initMouseEvent("click",O.bubbles,O.cancelable,O.view,O.detail,O.screenX,O.screenY,S[0],S[1],O.ctrlKey,O.altKey,O.shiftKey,O.metaKey,O.button,O.relatedTarget)}g.dispatchEvent(P)}x._dragging=!1,x._dragged=!1}else x._dragged=!1}},n.coverSlip=o},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(y,Q,K){"use strict";var m=y("../../lib/events"),v=y("../../lib/throttle"),b=y("../../lib/dom").getGraphDiv,h=y("../fx/constants"),e=Q.exports={};e.wrapped=function(n,r,o){(n=b(n))._fullLayout&&v.clear(n._fullLayout._uid+h.HOVERID),e.raw(n,r,o)},e.raw=function(n,r){var o=n._fullLayout,t=n._hoverdata;r||(r={}),r.target&&!n._dragged&&!1===m.triggerHandler(n,"plotly_beforehover",r)||(o._hoverlayer.selectAll("g").remove(),o._hoverlayer.selectAll("line").remove(),o._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,r.target&&t&&n.emit("plotly_unhover",{event:r,points:t}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(y,Q,K){"use strict";K.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},K.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=v.numberFormat,h=y("fast-isnumeric"),e=y("tinycolor2"),n=y("../../registry"),r=y("../color"),o=y("../colorscale"),t=v.strTranslate,d=y("../../lib/svg_text_utils"),a=y("../../constants/xmlns_namespaces"),i=y("../../constants/alignment").LINE_SPACING,s=y("../../constants/interactions").DESELECTDIM,c=y("../../traces/scatter/subtypes"),l=y("../../traces/scatter/make_bubble_size_func"),p=y("../../components/fx/helpers").appendArrayPointValue,g=Q.exports={};function u(G,Z,re){var j=Z.fillpattern,B=j&&g.getPatternAttr(j.shape,0,"");if(B){var H=g.getPatternAttr(j.bgcolor,0,null),ee=g.getPatternAttr(j.fgcolor,0,null),U=j.fgopacity,$=g.getPatternAttr(j.size,0,8),q=g.getPatternAttr(j.solidity,0,.3);g.pattern(G,"point",re,Z.uid,B,$,q,void 0,j.fillmode,H,ee,U)}else Z.fillcolor&&G.call(r.fill,Z.fillcolor)}g.font=function(G,Z,re,j){v.isPlainObject(Z)&&(j=Z.color,re=Z.size,Z=Z.family),Z&&G.style("font-family",Z),re+1&&G.style("font-size",re+"px"),j&&G.call(r.fill,j)},g.setPosition=function(G,Z,re){G.attr("x",Z).attr("y",re)},g.setSize=function(G,Z,re){G.attr("width",Z).attr("height",re)},g.setRect=function(G,Z,re,j,B){G.call(g.setPosition,Z,re).call(g.setSize,j,B)},g.translatePoint=function(G,Z,re,j){var B=re.c2p(G.x),H=j.c2p(G.y);return!!(h(B)&&h(H)&&Z.node())&&("text"===Z.node().nodeName?Z.attr("x",B).attr("y",H):Z.attr("transform",t(B,H)),!0)},g.translatePoints=function(G,Z,re){G.each(function(j){var B=m.select(this);g.translatePoint(j,B,Z,re)})},g.hideOutsideRangePoint=function(G,Z,re,j,B,H){Z.attr("display",re.isPtWithinRange(G,B)&&j.isPtWithinRange(G,H)?null:"none")},g.hideOutsideRangePoints=function(G,Z){if(Z._hasClipOnAxisFalse){var re=Z.xaxis,j=Z.yaxis;G.each(function(B){var H=B[0].trace,ee=H.xcalendar,U=H.ycalendar,$=n.traceIs(H,"bar-like")?".bartext":".point,.textpoint";G.selectAll($).each(function(q){g.hideOutsideRangePoint(q,m.select(this),re,j,ee,U)})})}},g.crispRound=function(G,Z,re){return Z&&h(Z)?G._context.staticPlot?Z:Z<1?1:Math.round(Z):re||0},g.singleLineStyle=function(G,Z,re,j,B){Z.style("fill","none");var H=(((G||[])[0]||{}).trace||{}).line||{},ee=re||H.width||0,U=B||H.dash||"";r.stroke(Z,j||H.color),g.dashLine(Z,U,ee)},g.lineGroupStyle=function(G,Z,re,j){G.style("fill","none").each(function(B){var H=(((B||[])[0]||{}).trace||{}).line||{},ee=Z||H.width||0,U=j||H.dash||"";m.select(this).call(r.stroke,re||H.color).call(g.dashLine,U,ee)})},g.dashLine=function(G,Z,re){Z=g.dashStyle(Z,re=+re||0),G.style({"stroke-dasharray":Z,"stroke-width":re+"px"})},g.dashStyle=function(G,Z){Z=+Z||1;var re=Math.max(Z,3);return"solid"===G?G="":"dot"===G?G=re+"px,"+re+"px":"dash"===G?G=3*re+"px,"+3*re+"px":"longdash"===G?G=5*re+"px,"+5*re+"px":"dashdot"===G?G=3*re+"px,"+re+"px,"+re+"px,"+re+"px":"longdashdot"===G&&(G=5*re+"px,"+2*re+"px,"+re+"px,"+2*re+"px"),G},g.singleFillStyle=function(G,Z){var re=m.select(G.node());u(G,((re.data()[0]||[])[0]||{}).trace||{},Z)},g.fillGroupStyle=function(G,Z){G.style("stroke-width",0).each(function(re){var j=m.select(this);re[0].trace&&u(j,re[0].trace,Z)})};var x=y("./symbol_defs");g.symbolNames=[],g.symbolFuncs=[],g.symbolNeedLines={},g.symbolNoDot={},g.symbolNoFill={},g.symbolList=[],Object.keys(x).forEach(function(G){var Z=x[G],re=Z.n;g.symbolList.push(re,String(re),G,re+100,String(re+100),G+"-open"),g.symbolNames[re]=G,g.symbolFuncs[re]=Z.f,Z.needLine&&(g.symbolNeedLines[re]=!0),Z.noDot?g.symbolNoDot[re]=!0:g.symbolList.push(re+200,String(re+200),G+"-dot",re+300,String(re+300),G+"-open-dot"),Z.noFill&&(g.symbolNoFill[re]=!0)});var f=g.symbolNames.length;function T(G,Z){return g.symbolFuncs[G%100](Z)+(G>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}g.symbolNumber=function(G){if(h(G))G=+G;else if("string"==typeof G){var Z=0;G.indexOf("-open")>0&&(Z=100,G=G.replace("-open","")),G.indexOf("-dot")>0&&(Z+=200,G=G.replace("-dot","")),(G=g.symbolNames.indexOf(G))>=0&&(G+=Z)}return G%100>=f||G>=400?0:Math.floor(Math.max(G,0))};var _={x1:1,x2:0,y1:0,y2:0},k={x1:0,x2:0,y1:1,y2:0},w=b("~f"),C={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:_},horizontalreversed:{node:"linearGradient",attrs:_,reversed:!0},vertical:{node:"linearGradient",attrs:k},verticalreversed:{node:"linearGradient",attrs:k,reversed:!0}};g.gradient=function(G,Z,re,j,B,H){for(var ee=B.length,U=C[j],$=new Array(ee),q=0;q<ee;q++)U.reversed?$[ee-1-q]=[w(100*(1-B[q][0])),B[q][1]]:$[q]=[w(100*B[q][0]),B[q][1]];var te=Z._fullLayout,ne="g"+te._uid+"-"+re,se=te._defs.select(".gradients").selectAll("#"+ne).data([j+$.join(";")],v.identity);se.exit().remove(),se.enter().append(U.node).each(function(){var ie=m.select(this);U.attrs&&ie.attr(U.attrs),ie.attr("id",ne);var ue=ie.selectAll("stop").data($);ue.exit().remove(),ue.enter().append("stop"),ue.each(function(le){var de=e(le[1]);m.select(this).attr({offset:le[0]+"%","stop-color":r.tinyRGB(de),"stop-opacity":de.getAlpha()})})}),G.style(H,V(ne,Z)).style(H+"-opacity",null),G.classed("gradient_filled",!0)},g.pattern=function(G,Z,re,j,B,H,ee,U,$,q,te,ne){var se="legend"===Z;U&&("overlay"===$?te=r.contrast(q=U):(q=void 0,te=U));var ie,ue,le,de,be,_e,xe,Ee,me,Me=re._fullLayout,Ie="p"+Me._uid+"-"+j,Fe={};switch(B){case"/":ie=H*Math.sqrt(2),ue=H*Math.sqrt(2),_e="path",Fe={d:le="M-"+ie/4+","+ue/4+"l"+ie/2+",-"+ue/2+"M0,"+ue+"L"+ie+",0M"+ie/4*3+","+ue/4*5+"l"+ie/2+",-"+ue/2,opacity:ne,stroke:te,"stroke-width":(de=ee*H)+"px"};break;case"\\":ie=H*Math.sqrt(2),ue=H*Math.sqrt(2),_e="path",Fe={d:le="M"+ie/4*3+",-"+ue/4+"l"+ie/2+","+ue/2+"M0,0L"+ie+","+ue+"M-"+ie/4+","+ue/4*3+"l"+ie/2+","+ue/2,opacity:ne,stroke:te,"stroke-width":(de=ee*H)+"px"};break;case"x":ie=H*Math.sqrt(2),ue=H*Math.sqrt(2),le="M-"+ie/4+","+ue/4+"l"+ie/2+",-"+ue/2+"M0,"+ue+"L"+ie+",0M"+ie/4*3+","+ue/4*5+"l"+ie/2+",-"+ue/2+"M"+ie/4*3+",-"+ue/4+"l"+ie/2+","+ue/2+"M0,0L"+ie+","+ue+"M-"+ie/4+","+ue/4*3+"l"+ie/2+","+ue/2,de=H-H*Math.sqrt(1-ee),_e="path",Fe={d:le,opacity:ne,stroke:te,"stroke-width":de+"px"};break;case"|":_e="path",_e="path",Fe={d:le="M"+(ie=H)/2+",0L"+ie/2+","+(ue=H),opacity:ne,stroke:te,"stroke-width":(de=ee*H)+"px"};break;case"-":_e="path",_e="path",Fe={d:le="M0,"+(ue=H)/2+"L"+(ie=H)+","+ue/2,opacity:ne,stroke:te,"stroke-width":(de=ee*H)+"px"};break;case"+":_e="path",le="M"+(ie=H)/2+",0L"+ie/2+","+(ue=H)+"M0,"+ue/2+"L"+ie+","+ue/2,de=H-H*Math.sqrt(1-ee),_e="path",Fe={d:le,opacity:ne,stroke:te,"stroke-width":de+"px"};break;case".":ie=H,ue=H,ee<Math.PI/4?be=Math.sqrt(ee*H*H/Math.PI):(xe=ee,Ee=Math.PI/4,1,be=(me=H/2)+(H/Math.sqrt(2)-me)*(xe-Ee)/(1-Ee)),_e="circle",Fe={cx:ie/2,cy:ue/2,r:be,opacity:ne,fill:te}}var Ne=[B||"noSh",q||"noBg",te||"noFg",H,ee].join(";"),De=Me._defs.select(".patterns").selectAll("#"+Ie).data([Ne],v.identity);De.exit().remove(),De.enter().append("pattern").each(function(){var $e=m.select(this);if($e.attr({id:Ie,width:ie+"px",height:ue+"px",patternUnits:"userSpaceOnUse",patternTransform:se?"scale(0.8)":""}),q){var Re=$e.selectAll("rect").data([0]);Re.exit().remove(),Re.enter().append("rect").attr({width:ie+"px",height:ue+"px",fill:q})}var ze=$e.selectAll(_e).data([0]);ze.exit().remove(),ze.enter().append(_e).attr(Fe)}),G.style("fill",V(Ie,re)).style("fill-opacity",null),G.classed("pattern_filled",!0)},g.initGradients=function(G){v.ensureSingle(G._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),m.select(G).selectAll(".gradient_filled").classed("gradient_filled",!1)},g.initPatterns=function(G){v.ensureSingle(G._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),m.select(G).selectAll(".pattern_filled").classed("pattern_filled",!1)},g.getPatternAttr=function(G,Z,re){return G&&v.isArrayOrTypedArray(G)?Z<G.length?G[Z]:re:G},g.pointStyle=function(G,Z,re){if(G.size()){var j=g.makePointStyleFns(Z);G.each(function(B){g.singlePointStyle(B,m.select(this),Z,j,re)})}},g.singlePointStyle=function(G,Z,re,j,B){var H=re.marker,ee=H.line;if(Z.style("opacity",j.selectedOpacityFn?j.selectedOpacityFn(G):void 0===G.mo?H.opacity:G.mo),j.ms2mrc){var U;U="various"===G.ms||"various"===H.size?3:j.ms2mrc(G.ms),G.mrc=U,j.selectedSizeFn&&(U=G.mrc=j.selectedSizeFn(G));var $=g.symbolNumber(G.mx||H.symbol)||0;G.om=$%200>=100,Z.attr("d",T($,U))}var q,te,ne,se=!1;if(G.so?(ne=ee.outlierwidth,te=ee.outliercolor,q=H.outliercolor):(ne=(G.mlw+1||(ee||{}).width+1||(G.trace?(G.trace.marker.line||{}).width:0)+1)-1||0,te="mlc"in G?G.mlcc=j.lineScale(G.mlc):v.isArrayOrTypedArray(ee.color)?r.defaultLine:ee.color,v.isArrayOrTypedArray(H.color)&&(q=r.defaultLine,se=!0),q="mc"in G?G.mcc=j.markerScale(G.mc):H.color||"rgba(0,0,0,0)",j.selectedColorFn&&(q=j.selectedColorFn(G))),G.om)Z.call(r.stroke,q).style({"stroke-width":(ne||1)+"px",fill:"none"});else{Z.style("stroke-width",(G.isBlank?0:ne)+"px");var ue=H.gradient,le=G.mgt;le?se=!0:le=ue&&ue.type,v.isArrayOrTypedArray(le)&&(C[le=le[0]]||(le=0));var de=H.pattern,be=de&&g.getPatternAttr(de.shape,G.i,"");if(le&&"none"!==le){var _e=G.mgc;_e?se=!0:_e=ue.color;var xe=re.uid;se&&(xe+="-"+G.i),g.gradient(Z,B,xe,le,[[0,_e],[1,q]],"fill")}else if(be){var Ee=g.getPatternAttr(de.bgcolor,G.i,null),he=g.getPatternAttr(de.fgcolor,G.i,null),me=de.fgopacity,Se=g.getPatternAttr(de.size,G.i,8),Me=g.getPatternAttr(de.solidity,G.i,.3),Ie=G.mcc||v.isArrayOrTypedArray(de.shape)||v.isArrayOrTypedArray(de.bgcolor)||v.isArrayOrTypedArray(de.size)||v.isArrayOrTypedArray(de.solidity),Fe=re.uid;Ie&&(Fe+="-"+G.i),g.pattern(Z,"point",B,Fe,be,Se,Me,G.mcc,de.fillmode,Ee,he,me)}else r.fill(Z,q);ne&&r.stroke(Z,te)}},g.makePointStyleFns=function(G){var Z={},re=G.marker;return Z.markerScale=g.tryColorscale(re,""),Z.lineScale=g.tryColorscale(re,"line"),n.traceIs(G,"symbols")&&(Z.ms2mrc=c.isBubble(G)?l(G):function(){return(re.size||6)/2}),G.selectedpoints&&v.extendFlat(Z,g.makeSelectedPointStyleFns(G)),Z},g.makeSelectedPointStyleFns=function(G){var Z={},B=G.marker||{},H=(G.selected||{}).marker||{},ee=(G.unselected||{}).marker||{},$=H.opacity,q=ee.opacity,te=void 0!==$,ne=void 0!==q;(v.isArrayOrTypedArray(B.opacity)||te||ne)&&(Z.selectedOpacityFn=function(Ee){var he=void 0===Ee.mo?B.opacity:Ee.mo;return Ee.selected?te?$:he:ne?q:s*he});var se=B.color,ie=H.color,ue=ee.color;(ie||ue)&&(Z.selectedColorFn=function(Ee){var he=Ee.mcc||se;return Ee.selected?ie||he:ue||he});var le=B.size,de=H.size,be=ee.size,_e=void 0!==de,xe=void 0!==be;return n.traceIs(G,"symbols")&&(_e||xe)&&(Z.selectedSizeFn=function(Ee){var he=Ee.mrc||le/2;return Ee.selected?_e?de/2:he:xe?be/2:he}),Z},g.makeSelectedTextStyleFns=function(G){var Z={},U=(G.textfont||{}).color,$=((G.selected||{}).textfont||{}).color,q=((G.unselected||{}).textfont||{}).color;return Z.selectedTextColorFn=function(te){var ne=te.tc||U;return te.selected?$||ne:q||($?ne:r.addOpacity(ne,s))},Z},g.selectedPointStyle=function(G,Z){if(G.size()&&Z.selectedpoints){var re=g.makeSelectedPointStyleFns(Z),j=Z.marker||{},B=[];re.selectedOpacityFn&&B.push(function(H,ee){H.style("opacity",re.selectedOpacityFn(ee))}),re.selectedColorFn&&B.push(function(H,ee){r.fill(H,re.selectedColorFn(ee))}),re.selectedSizeFn&&B.push(function(H,ee){var U=ee.mx||j.symbol||0,$=re.selectedSizeFn(ee);H.attr("d",T(g.symbolNumber(U),$)),ee.mrc2=$}),B.length&&G.each(function(H){for(var ee=m.select(this),U=0;U<B.length;U++)B[U](ee,H)})}},g.tryColorscale=function(G,Z){var re=Z?v.nestedProperty(G,Z).get():G;return re&&(re.colorscale||re._colorAx)&&v.isArrayOrTypedArray(re.color)?o.makeColorScaleFuncFromTrace(re):v.identity};var A={start:1,end:-1,middle:0,bottom:1,top:-1};function O(G,Z,re,j,B){var H=m.select(G.node().parentNode),ee=-1!==Z.indexOf("top")?"top":-1!==Z.indexOf("bottom")?"bottom":"middle",U=-1!==Z.indexOf("left")?"end":-1!==Z.indexOf("right")?"start":"middle",$=j?j/.8+1:0,q=(d.lineCount(G)-1)*i+1,te=A[U]*$,ne=.75*re+A[ee]*$+(A[ee]-1)*q*re/2;G.attr("text-anchor",U),B||H.attr("transform",t(te,ne))}function P(G,Z){var re=G.ts||Z.textfont.size;return h(re)&&re>0?re:0}function S(G,Z,re,j){var B=G[0]-Z[0],H=G[1]-Z[1],ee=re[0]-Z[0],U=re[1]-Z[1],$=Math.pow(B*B+H*H,.25),q=Math.pow(ee*ee+U*U,.25),te=(q*q*B-$*$*ee)*j,ne=(q*q*H-$*$*U)*j,se=3*q*($+q),ie=3*$*($+q);return[[m.round(Z[0]+(se&&te/se),2),m.round(Z[1]+(se&&ne/se),2)],[m.round(Z[0]-(ie&&te/ie),2),m.round(Z[1]-(ie&&ne/ie),2)]]}g.textPointStyle=function(G,Z,re){if(G.size()){var j;if(Z.selectedpoints){var B=g.makeSelectedTextStyleFns(Z);j=B.selectedTextColorFn}var H=Z.texttemplate,ee=re._fullLayout;G.each(function(U){var $=m.select(this),q=H?v.extractOption(U,Z,"txt","texttemplate"):v.extractOption(U,Z,"tx","text");if(q||0===q){if(H){var te=Z._module.formatLabels,ne=te?te(U,Z,ee):{},se={};p(se,Z,U.i),q=v.texttemplateString(q,ne,ee._d3locale,se,U,Z._meta||{})}var ue=U.tp||Z.textposition,le=P(U,Z),de=j?j(U):U.tc||Z.textfont.color;$.call(g.font,U.tf||Z.textfont.family,le,de).text(q).call(d.convertToTspans,re).call(O,ue,le,U.mrc)}else $.remove()})}},g.selectedTextStyle=function(G,Z){if(G.size()&&Z.selectedpoints){var re=g.makeSelectedTextStyleFns(Z);G.each(function(j){var B=m.select(this),H=re.selectedTextColorFn(j),ee=j.tp||Z.textposition,U=P(j,Z);r.fill(B,H);var $=n.traceIs(Z,"bar-like");O(B,ee,U,j.mrc2||j.mrc,$)})}},g.smoothopen=function(G,Z){if(G.length<3)return"M"+G.join("L");var re,j="M"+G[0],B=[];for(re=1;re<G.length-1;re++)B.push(S(G[re-1],G[re],G[re+1],Z));for(j+="Q"+B[0][0]+" "+G[1],re=2;re<G.length-1;re++)j+="C"+B[re-2][1]+" "+B[re-1][0]+" "+G[re];return j+"Q"+B[G.length-3][1]+" "+G[G.length-1]},g.smoothclosed=function(G,Z){if(G.length<3)return"M"+G.join("L")+"Z";var re,j="M"+G[0],B=G.length-1,H=[S(G[B],G[0],G[1],Z)];for(re=1;re<B;re++)H.push(S(G[re-1],G[re],G[re+1],Z));for(H.push(S(G[B-1],G[B],G[0],Z)),re=1;re<=B;re++)j+="C"+H[re-1][1]+" "+H[re][0]+" "+G[re];return j+"C"+H[B][1]+" "+H[0][0]+" "+G[0]+"Z"};var E={hv:function(G,Z){return"H"+m.round(Z[0],2)+"V"+m.round(Z[1],2)},vh:function(G,Z){return"V"+m.round(Z[1],2)+"H"+m.round(Z[0],2)},hvh:function(G,Z){return"H"+m.round((G[0]+Z[0])/2,2)+"V"+m.round(Z[1],2)+"H"+m.round(Z[0],2)},vhv:function(G,Z){return"V"+m.round((G[1]+Z[1])/2,2)+"H"+m.round(Z[0],2)+"V"+m.round(Z[1],2)}},D=function(G,Z){return"L"+m.round(Z[0],2)+","+m.round(Z[1],2)};g.steps=function(G){var Z=E[G]||D;return function(re){for(var j="M"+m.round(re[0][0],2)+","+m.round(re[0][1],2),B=1;B<re.length;B++)j+=Z(re[B-1],re[B]);return j}},g.makeTester=function(){var G=v.ensureSingleById(m.select("body"),"svg","js-plotly-tester",function(re){re.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Z=v.ensureSingle(G,"path","js-reference-point",function(re){re.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});g.tester=G,g.testref=Z},g.savedBBoxes={};var z=0;function N(G){var Z=G.getAttribute("data-unformatted");if(null!==Z)return Z+G.getAttribute("data-math")+G.getAttribute("text-anchor")+G.getAttribute("style")}function V(G,Z){if(!G)return null;var re=Z._context,j=re._exportedPlot?"":re._baseUrl||"";return j?"url('"+j+"#"+G+"')":"url(#"+G+")"}g.bBox=function(G,Z,re){var j,B,H;if(re||(re=N(G)),re){if(j=g.savedBBoxes[re])return v.extendFlat({},j)}else if(1===G.childNodes.length){var ee=G.childNodes[0];if(re=N(ee)){var U=+ee.getAttribute("x")||0,$=+ee.getAttribute("y")||0,q=ee.getAttribute("transform");if(!q){var te=g.bBox(ee,!1,re);return U&&(te.left+=U,te.right+=U),$&&(te.top+=$,te.bottom+=$),te}if(j=g.savedBBoxes[re+="~"+U+"~"+$+"~"+q])return v.extendFlat({},j)}}Z?B=G:(H=g.tester.node(),B=G.cloneNode(!0),H.appendChild(B)),m.select(B).attr("transform",null).call(d.positionText,0,0);var ne=B.getBoundingClientRect(),se=g.testref.node().getBoundingClientRect();Z||H.removeChild(B);var ie={height:ne.height,width:ne.width,left:ne.left-se.left,top:ne.top-se.top,right:ne.right-se.left,bottom:ne.bottom-se.top};return z>=1e4&&(g.savedBBoxes={},z=0),re&&(g.savedBBoxes[re]=ie),z++,v.extendFlat({},ie)},g.setClipUrl=function(G,Z,re){G.attr("clip-path",V(Z,re))},g.getTranslate=function(G){var Z=(G[G.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(re,j,B){return[j,B].join(" ")}).split(" ");return{x:+Z[0]||0,y:+Z[1]||0}},g.setTranslate=function(G,Z,re){var B=G.attr?"attr":"setAttribute",H=G[G.attr?"attr":"getAttribute"]("transform")||"";return Z=Z||0,re=re||0,H=H.replace(/(\btranslate\(.*?\);?)/,"").trim(),H=(H+=t(Z,re)).trim(),G[B]("transform",H),H},g.getScale=function(G){var Z=(G[G.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(re,j,B){return[j,B].join(" ")}).split(" ");return{x:+Z[0]||1,y:+Z[1]||1}},g.setScale=function(G,Z,re){var B=G.attr?"attr":"setAttribute",H=G[G.attr?"attr":"getAttribute"]("transform")||"";return Z=Z||1,re=re||1,H=H.replace(/(\bscale\(.*?\);?)/,"").trim(),H=(H+="scale("+Z+","+re+")").trim(),G[B]("transform",H),H};var X=/\s*sc.*/;g.setPointGroupScale=function(G,Z,re){if(Z=Z||1,re=re||1,G){var j=1===Z&&1===re?"":"scale("+Z+","+re+")";G.each(function(){var B=(this.getAttribute("transform")||"").replace(X,"");B=(B+=j).trim(),this.setAttribute("transform",B)})}};var J=/translate\([^)]*\)\s*$/;g.setTextPointsScale=function(G,Z,re){G&&G.each(function(){var j,B=m.select(this),H=B.select("text");if(H.node()){var ee=parseFloat(H.attr("x")||0),U=parseFloat(H.attr("y")||0),$=(B.attr("transform")||"").match(J);j=1===Z&&1===re?[]:[t(ee,U),"scale("+Z+","+re+")",t(-ee,-U)],$&&j.push($),B.attr("transform",j.join(""))}})}},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(y,Q,K){"use strict";var m=y("@plotly/d3");Q.exports={circle:{n:0,f:function(v){var b=m.round(v,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(v){var b=m.round(v,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(v){var b=m.round(1.3*v,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(v){var b=m.round(.4*v,2),h=m.round(1.2*v,2);return"M"+h+","+b+"H"+b+"V"+h+"H-"+b+"V"+b+"H-"+h+"V-"+b+"H-"+b+"V-"+h+"H"+b+"V-"+b+"H"+h+"Z"}},x:{n:4,f:function(v){var b=m.round(.8*v/Math.sqrt(2),2),h="l"+b+","+b,e="l"+b+",-"+b,n="l-"+b+",-"+b,r="l-"+b+","+b;return"M0,"+b+h+e+n+e+n+r+n+r+h+r+h+"Z"}},"triangle-up":{n:5,f:function(v){var b=m.round(2*v/Math.sqrt(3),2);return"M-"+b+","+m.round(v/2,2)+"H"+b+"L0,-"+m.round(v,2)+"Z"}},"triangle-down":{n:6,f:function(v){var b=m.round(2*v/Math.sqrt(3),2);return"M-"+b+",-"+m.round(v/2,2)+"H"+b+"L0,"+m.round(v,2)+"Z"}},"triangle-left":{n:7,f:function(v){var b=m.round(2*v/Math.sqrt(3),2);return"M"+m.round(v/2,2)+",-"+b+"V"+b+"L-"+m.round(v,2)+",0Z"}},"triangle-right":{n:8,f:function(v){var b=m.round(2*v/Math.sqrt(3),2);return"M-"+m.round(v/2,2)+",-"+b+"V"+b+"L"+m.round(v,2)+",0Z"}},"triangle-ne":{n:9,f:function(v){var b=m.round(.6*v,2),h=m.round(1.2*v,2);return"M-"+h+",-"+b+"H"+b+"V"+h+"Z"}},"triangle-se":{n:10,f:function(v){var b=m.round(.6*v,2),h=m.round(1.2*v,2);return"M"+b+",-"+h+"V"+b+"H-"+h+"Z"}},"triangle-sw":{n:11,f:function(v){var b=m.round(.6*v,2),h=m.round(1.2*v,2);return"M"+h+","+b+"H-"+b+"V-"+h+"Z"}},"triangle-nw":{n:12,f:function(v){var b=m.round(.6*v,2),h=m.round(1.2*v,2);return"M-"+b+","+h+"V-"+b+"H"+h+"Z"}},pentagon:{n:13,f:function(v){var b=m.round(.951*v,2),h=m.round(.588*v,2),e=m.round(-v,2),n=m.round(-.309*v,2);return"M"+b+","+n+"L"+h+","+m.round(.809*v,2)+"H-"+h+"L-"+b+","+n+"L0,"+e+"Z"}},hexagon:{n:14,f:function(v){var b=m.round(v,2),h=m.round(v/2,2),e=m.round(v*Math.sqrt(3)/2,2);return"M"+e+",-"+h+"V"+h+"L0,"+b+"L-"+e+","+h+"V-"+h+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(v){var b=m.round(v,2),h=m.round(v/2,2),e=m.round(v*Math.sqrt(3)/2,2);return"M-"+h+","+e+"H"+h+"L"+b+",0L"+h+",-"+e+"H-"+h+"L-"+b+",0Z"}},octagon:{n:16,f:function(v){var b=m.round(.924*v,2),h=m.round(.383*v,2);return"M-"+h+",-"+b+"H"+h+"L"+b+",-"+h+"V"+h+"L"+h+","+b+"H-"+h+"L-"+b+","+h+"V-"+h+"Z"}},star:{n:17,f:function(v){var b=1.4*v,h=m.round(.225*b,2),e=m.round(.951*b,2),n=m.round(.363*b,2),r=m.round(.588*b,2),o=m.round(-b,2),t=m.round(-.309*b,2),d=m.round(.118*b,2),a=m.round(.809*b,2);return"M"+h+","+t+"H"+e+"L"+n+","+d+"L"+r+","+a+"L0,"+m.round(.382*b,2)+"L-"+r+","+a+"L-"+n+","+d+"L-"+e+","+t+"H-"+h+"L0,"+o+"Z"}},hexagram:{n:18,f:function(v){var b=m.round(.66*v,2),h=m.round(.38*v,2),e=m.round(.76*v,2);return"M-"+e+",0l-"+h+",-"+b+"h"+e+"l"+h+",-"+b+"l"+h+","+b+"h"+e+"l-"+h+","+b+"l"+h+","+b+"h-"+e+"l-"+h+","+b+"l-"+h+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(v){var b=m.round(v*Math.sqrt(3)*.8,2),h=m.round(.8*v,2),e=m.round(1.6*v,2),n=m.round(4*v,2),r="A "+n+","+n+" 0 0 1 ";return"M-"+b+","+h+r+b+","+h+r+"0,-"+e+r+"-"+b+","+h+"Z"}},"star-triangle-down":{n:20,f:function(v){var b=m.round(v*Math.sqrt(3)*.8,2),h=m.round(.8*v,2),e=m.round(1.6*v,2),n=m.round(4*v,2),r="A "+n+","+n+" 0 0 1 ";return"M"+b+",-"+h+r+"-"+b+",-"+h+r+"0,"+e+r+b+",-"+h+"Z"}},"star-square":{n:21,f:function(v){var b=m.round(1.1*v,2),h=m.round(2*v,2),e="A "+h+","+h+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(v){var b=m.round(1.4*v,2),h=m.round(1.9*v,2),e="A "+h+","+h+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(v){var b=m.round(.7*v,2),h=m.round(1.4*v,2);return"M0,"+h+"L"+b+",0L0,-"+h+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(v){var b=m.round(1.4*v,2),h=m.round(.7*v,2);return"M0,"+h+"L"+b+",0L0,-"+h+"L-"+b+",0Z"}},hourglass:{n:25,f:function(v){var b=m.round(v,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(v){var b=m.round(v,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(v){var b=m.round(v,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(v){var b=m.round(v,2),h=m.round(v/Math.sqrt(2),2);return"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(v){var b=m.round(v,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(v){var b=m.round(v,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(v){var b=m.round(1.3*v,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(v){var b=m.round(1.3*v,2),h=m.round(.65*v,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+h+",-"+h+"L"+h+","+h+"M-"+h+","+h+"L"+h+",-"+h},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(v){var b=m.round(1.4*v,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(v){var b=m.round(v,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(v){var b=m.round(1.2*v,2),h=m.round(.85*v,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(v){var b=m.round(v/2,2),h=m.round(v,2);return"M"+b+","+h+"V-"+h+"m-"+h+",0V"+h+"M"+h+","+b+"H-"+h+"m0,-"+h+"H"+h},needLine:!0,noFill:!0},"y-up":{n:37,f:function(v){var b=m.round(1.2*v,2),h=m.round(1.6*v,2),e=m.round(.8*v,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(v){var b=m.round(1.2*v,2),h=m.round(1.6*v,2),e=m.round(.8*v,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(v){var b=m.round(1.2*v,2),h=m.round(1.6*v,2),e=m.round(.8*v,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(v){var b=m.round(1.2*v,2),h=m.round(1.6*v,2),e=m.round(.8*v,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(v){var b=m.round(1.4*v,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(v){var b=m.round(1.4*v,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(v){var b=m.round(v,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(v){var b=m.round(v,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(v){var b=m.round(v,2);return"M0,0L-"+b+","+m.round(2*v,2)+"H"+b+"Z"},noDot:!0},"arrow-down":{n:46,f:function(v){var b=m.round(v,2);return"M0,0L-"+b+",-"+m.round(2*v,2)+"H"+b+"Z"},noDot:!0},"arrow-left":{n:47,f:function(v){var b=m.round(2*v,2),h=m.round(v,2);return"M0,0L"+b+",-"+h+"V"+h+"Z"},noDot:!0},"arrow-right":{n:48,f:function(v){var b=m.round(2*v,2),h=m.round(v,2);return"M0,0L-"+b+",-"+h+"V"+h+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(v){var b=m.round(v,2);return"M-"+b+",0H"+b+"M0,0L-"+b+","+m.round(2*v,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(v){var b=m.round(v,2);return"M-"+b+",0H"+b+"M0,0L-"+b+",-"+m.round(2*v,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(v){var b=m.round(2*v,2),h=m.round(v,2);return"M0,-"+h+"V"+h+"M0,0L"+b+",-"+h+"V"+h+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(v){var b=m.round(2*v,2),h=m.round(v,2);return"M0,-"+h+"V"+h+"M0,0L-"+b+",-"+h+"V"+h+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],391:[function(y,Q,K){"use strict";Q.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../registry"),b=y("../../plots/cartesian/axes"),h=y("../../lib"),e=y("./compute_error");function n(r,o,t,d){var a=o["error_"+d]||{},i=[];if(a.visible&&-1!==["linear","log"].indexOf(t.type)){for(var s=e(a),c=0;c<r.length;c++){var l=r[c],p=l.i;if(void 0===p)p=c;else if(null===p)continue;var g=l[d];if(m(t.c2l(g))){var u=s(g,p);if(m(u[0])&&m(u[1])){var x=l[d+"s"]=g-u[0],f=l[d+"h"]=g+u[1];i.push(x,f)}}}var _=o._extremes[t._id],k=b.findExtremes(t,i,h.extendFlat({tozero:_.opts.tozero},{padded:!0}));_.min=_.min.concat(k.min),_.max=_.max.concat(k.max)}}Q.exports=function(r){for(var o=r.calcdata,t=0;t<o.length;t++){var d=o[t],a=d[0].trace;if(!0===a.visible&&v.traceIs(a,"errorBarsOK")){var i=b.getFromId(r,a.xaxis),s=b.getFromId(r,a.yaxis);n(d,a,i,"x"),n(d,a,s,"y")}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(y,Q,K){"use strict";function m(v,b){return"percent"===v?function(h){return Math.abs(h*b/100)}:"constant"===v?function(){return Math.abs(b)}:"sqrt"===v?function(h){return Math.sqrt(Math.abs(h))}:void 0}Q.exports=function(v){var b=v.type,h=v.symmetric;if("data"===b){var e=v.array||[];if(h)return function(t,d){var a=+e[d];return[a,a]};var n=v.arrayminus||[];return function(t,d){var a=+e[d],i=+n[d];return isNaN(a)&&isNaN(i)?[NaN,NaN]:[i||0,a||0]}}var r=m(b,v.value),o=m(b,v.valueminus);return h||void 0===v.valueminus?function(t){var d=r(t);return[d,d]}:function(t){return[o(t),r(t)]}}},{}],394:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../registry"),b=y("../../lib"),h=y("../../plot_api/plot_template"),e=y("./attributes");Q.exports=function(n,r,o,t){var d="error_"+t.axis,a=h.newContainer(r,d),i=n[d]||{};function s(g,u){return b.coerce(i,a,e,g,u)}if(!1!==s("visible",void 0!==i.array||void 0!==i.value||"sqrt"===i.type)){var c=s("type","array"in i?"data":"percent"),l=!0;"sqrt"!==c&&(l=s("symmetric",!(("data"===c?"arrayminus":"valueminus")in i))),"data"===c?(s("array"),s("traceref"),l||(s("arrayminus"),s("tracerefminus"))):"percent"!==c&&"constant"!==c||(s("value"),l||s("valueminus"));var p="copy_"+t.inherit+"style";t.inherit&&(r["error_"+t.inherit]||{}).visible&&s(p,!(i.color||m(i.thickness)||m(i.width))),t.inherit&&a[p]||(s("color",o),s("thickness"),s("width",v.traceIs(r,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plot_api/edit_types").overrideAll,b=y("./attributes"),h={error_x:m.extendFlat({},b),error_y:m.extendFlat({},b)};delete h.error_x.copy_zstyle,delete h.error_y.copy_zstyle,delete h.error_y.copy_ystyle;var e={error_x:m.extendFlat({},b),error_y:m.extendFlat({},b),error_z:m.extendFlat({},b)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,Q.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:h,bar:h,histogram:h,scatter3d:v(e,"calc","nested"),scattergl:v(h,"calc","nested")}},supplyDefaults:y("./defaults"),calc:y("./calc"),makeComputeError:y("./compute_error"),plot:y("./plot"),style:y("./style"),hoverInfo:function(n,r,o){(r.error_y||{}).visible&&(o.yerr=n.yh-n.y,r.error_y.symmetric||(o.yerrneg=n.y-n.ys)),(r.error_x||{}).visible&&(o.xerr=n.xh-n.x,r.error_x.symmetric||(o.xerrneg=n.x-n.xs))}}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=y("../drawing"),h=y("../../traces/scatter/subtypes");Q.exports=function(e,n,r,o){var t=r.xaxis,d=r.yaxis,a=o&&o.duration>0;n.each(function(i){var s,c=i[0].trace,l=c.error_x||{},p=c.error_y||{};c.ids&&(s=function(f){return f.id});var g=h.hasMarkers(c)&&c.marker.maxdisplayed>0;p.visible||l.visible||(i=[]);var u=m.select(this).selectAll("g.errorbar").data(i,s);if(u.exit().remove(),i.length){l.visible||u.selectAll("path.xerror").remove(),p.visible||u.selectAll("path.yerror").remove(),u.style("opacity",1);var x=u.enter().append("g").classed("errorbar",!0);a&&x.style("opacity",0).transition().duration(o.duration).style("opacity",1),b.setClipUrl(u,r.layerClipId,e),u.each(function(f){var P,S,E,D,T=m.select(this),_=(E=d,D={x:(S=t).c2p((P=f).x),y:E.c2p(P.y)},void 0!==P.yh&&(D.yh=E.c2p(P.yh),D.ys=E.c2p(P.ys),v(D.ys)||(D.noYS=!0,D.ys=E.c2p(P.ys,!0))),void 0!==P.xh&&(D.xh=S.c2p(P.xh),D.xs=S.c2p(P.xs),v(D.xs)||(D.noXS=!0,D.xs=S.c2p(P.xs,!0))),D);if(!g||f.vis){var k,w=T.select("path.yerror");if(p.visible&&v(_.x)&&v(_.yh)&&v(_.ys)){var C=p.width;k="M"+(_.x-C)+","+_.yh+"h"+2*C+"m-"+C+",0V"+_.ys,_.noYS||(k+="m-"+C+",0h"+2*C),w.size()?a&&(w=w.transition().duration(o.duration).ease(o.easing)):w=T.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),w.attr("d",k)}else w.remove();var A=T.select("path.xerror");if(l.visible&&v(_.y)&&v(_.xh)&&v(_.xs)){var O=(l.copy_ystyle?p:l).width;k="M"+_.xh+","+(_.y-O)+"v"+2*O+"m0,-"+O+"H"+_.xs,_.noXS||(k+="m0,-"+O+"v"+2*O),A.size()?a&&(A=A.transition().duration(o.duration).ease(o.easing)):A=T.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),A.attr("d",k)}else A.remove()}})}})}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../color");Q.exports=function(b){b.each(function(h){var e=h[0].trace,n=e.error_y||{},r=e.error_x||{},o=m.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(v.stroke,n.color),r.copy_ystyle&&(r=n),o.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(v.stroke,r.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(y,Q,K){"use strict";var m=y("../../plots/font_attributes"),v=y("./layout_attributes").hoverlabel,b=y("../../lib/extend").extendFlat;Q.exports={hoverlabel:{bgcolor:b({},v.bgcolor,{arrayOk:!0}),bordercolor:b({},v.bordercolor,{arrayOk:!0}),font:m({arrayOk:!0,editType:"none"}),align:b({},v.align,{arrayOk:!0}),namelength:b({},v.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../registry");function b(h,e,n,r){r=r||m.identity,Array.isArray(h)&&(e[0][n]=r(h))}Q.exports=function(h){var e=h.calcdata,n=h._fullLayout;function r(i){return function(s){return m.coerceHoverinfo({hoverinfo:s},{_module:i._module},n)}}for(var o=0;o<e.length;o++){var t=e[o],d=t[0].trace;if(!v.traceIs(d,"pie-like")){var a=v.traceIs(d,"2dMap")?b:m.fillArray;a(d.hoverinfo,t,"hi",r(d)),d.hovertemplate&&a(d.hovertemplate,t,"ht"),d.hoverlabel&&(a(d.hoverlabel.bgcolor,t,"hbg"),a(d.hoverlabel.bordercolor,t,"hbc"),a(d.hoverlabel.font.size,t,"hts"),a(d.hoverlabel.font.color,t,"htc"),a(d.hoverlabel.font.family,t,"htf"),a(d.hoverlabel.namelength,t,"hnl"),a(d.hoverlabel.align,t,"hta"))}}}},{"../../lib":515,"../../registry":647}],400:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("./hover").hover;Q.exports=function(b,h,e){var n=m.getComponentMethod("annotations","onClick")(b,b._hoverdata);function r(){b.emit("plotly_click",{points:b._hoverdata,event:h})}void 0!==e&&v(b,h,e,!0),b._hoverdata&&h&&h.target&&(n&&n.then?n.then(r):r(),h.stopImmediatePropagation&&h.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(y,Q,K){"use strict";Q.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("./hoverlabel_defaults");Q.exports=function(h,e,n,r){var o=m.extendFlat({},r.hoverlabel);e.hovertemplate&&(o.namelength=-1),b(h,e,function(t,d){return m.coerce(h,e,v,t,d)},o)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(y,Q,K){"use strict";var m=y("../../lib");K.getSubplot=function(r){return r.subplot||r.xaxis+r.yaxis||r.geo},K.isTraceInSubplots=function(r,o){if("splom"===r.type){for(var t=r.xaxes||[],d=r.yaxes||[],a=0;a<t.length;a++)for(var i=0;i<d.length;i++)if(-1!==o.indexOf(t[a]+d[i]))return!0;return!1}return-1!==o.indexOf(K.getSubplot(r))},K.flat=function(r,o){for(var t=new Array(r.length),d=0;d<r.length;d++)t[d]=o;return t},K.p2c=function(r,o){for(var t=new Array(r.length),d=0;d<r.length;d++)t[d]=r[d].p2c(o);return t},K.getDistanceFunction=function(r,o,t,d){return"closest"===r?d||K.quadrature(o,t):"x"===r.charAt(0)?o:t},K.getClosest=function(r,o,t){if(!1!==t.index)t.index>=0&&t.index<r.length?t.distance=0:t.index=!1;else for(var d=0;d<r.length;d++){var a=o(r[d]);a<=t.distance&&(t.index=d,t.distance=a)}return t},K.inbox=function(r,o,t){return r*o<0||0===r?t:1/0},K.quadrature=function(r,o){return function(t){var d=r(t),a=o(t);return Math.sqrt(d*d+a*a)}},K.makeEventData=function(r,o,t){var d="index"in r?r.index:r.pointNumber,a={data:o._input,fullData:o,curveNumber:o.index,pointNumber:d};if(o._indexToPoints){var i=o._indexToPoints[d];1===i.length?a.pointIndex=i[0]:a.pointIndices=i}else a.pointIndex=d;return o._module.eventData?a=o._module.eventData(a,r,o,t,d):("xVal"in r?a.x=r.xVal:"x"in r&&(a.x=r.x),"yVal"in r?a.y=r.yVal:"y"in r&&(a.y=r.y),r.xa&&(a.xaxis=r.xa),r.ya&&(a.yaxis=r.ya),void 0!==r.zLabelVal&&(a.z=r.zLabelVal)),K.appendArrayPointValue(a,o,d),a},K.appendArrayPointValue=function(r,o,t){var d=o._arrayAttrs;if(d)for(var a=0;a<d.length;a++){var i=d[a],s=b(i);if(void 0===r[s]){var c=h(m.nestedProperty(o,i).get(),t);void 0!==c&&(r[s]=c)}}},K.appendArrayMultiPointValues=function(r,o,t){var d=o._arrayAttrs;if(d)for(var a=0;a<d.length;a++){var i=d[a],s=b(i);if(void 0===r[s]){for(var c=m.nestedProperty(o,i).get(),l=new Array(t.length),p=0;p<t.length;p++)l[p]=h(c,t[p]);r[s]=l}}};var v={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function b(r){return v[r]||r}function h(r,o){return Array.isArray(o)?Array.isArray(r)&&Array.isArray(r[o[0]])?r[o[0]][o[1]]:void 0:r[o]}var e={x:!0,y:!0},n={"x unified":!0,"y unified":!0};K.isUnifiedHover=function(r){return"string"==typeof r&&!!n[r]},K.isXYhover=function(r){return"string"==typeof r&&!!e[r]}},{"../../lib":515}],404:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=y("tinycolor2"),h=y("../../lib"),e=h.strTranslate,n=h.strRotate,r=y("../../lib/events"),o=y("../../lib/svg_text_utils"),t=y("../../lib/override_cursor"),d=y("../drawing"),a=y("../color"),i=y("../dragelement"),s=y("../../plots/cartesian/axes"),c=y("../../registry"),l=y("./helpers"),p=y("./constants"),g=y("../legend/defaults"),u=y("../legend/draw"),x=p.YANGLE,f=Math.PI*x/180,T=1/Math.sin(f),_=Math.cos(f),k=Math.sin(f),w=p.HOVERARROWSIZE,C=p.HOVERTEXTPAD,A={box:!0,ohlc:!0,violin:!0,candlestick:!0},O={scatter:!0,scattergl:!0,splom:!0};function P(B){return[B.trace.index,B.index,B.x0,B.y0,B.name,B.attr,B.xa?B.xa._id:"",B.ya?B.ya._id:""].join(",")}K.hover=function(B,H,ee,U){B=h.getGraphDiv(B);var $=H.target;h.throttle(B._fullLayout._uid+p.HOVERID,p.HOVERMINTIME,function(){!function(q,te,ne,se,ie){ne||(ne="xy");var ue=Array.isArray(ne)?ne:[ne],le=q._fullLayout,de=le._plots||[],be=de[ne],_e=le._has("cartesian");if(be){var xe=be.overlays.map(function(Vr){return Vr.id});ue=ue.concat(xe)}for(var Ee=ue.length,he=new Array(Ee),me=new Array(Ee),Se=!1,Me=0;Me<Ee;Me++){var Ie=ue[Me];if(de[Ie])Se=!0,he[Me]=de[Ie].xaxis,me[Me]=de[Ie].yaxis;else{if(!le[Ie]||!le[Ie]._subplot)return void h.warn("Unrecognized subplot: "+Ie);var Fe=le[Ie]._subplot;he[Me]=Fe.xaxis,me[Me]=Fe.yaxis}}var Ne=te.hovermode||le.hovermode;if(Ne&&!Se&&(Ne="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Ne)||!q.calcdata||q.querySelector(".zoombox")||q._dragging)return i.unhoverRaw(q,te);var De=le.hoverdistance;-1===De&&(De=1/0);var $e=le.spikedistance;-1===$e&&($e=1/0);var Re,ze,Ue,je,rt,ut,gt,At,_t,it,et,wt,Gt,Kt=[],cr=[],ar={hLinePoint:null,vLinePoint:null},hr=!1;if(Array.isArray(te))for(Ne="array",Ue=0;Ue<te.length;Ue++)(rt=q.calcdata[te[Ue].curveNumber||0])&&(ut=rt[0].trace,"skip"!==rt[0].trace.hoverinfo&&(cr.push(rt),"h"===ut.orientation&&(hr=!0)));else{for(je=0;je<q.calcdata.length;je++)"skip"!==(ut=(rt=q.calcdata[je])[0].trace).hoverinfo&&l.isTraceInSubplots(ut,ue)&&(cr.push(rt),"h"===ut.orientation&&(hr=!0));var Xt,He;if(ie){if(!1===r.triggerHandler(q,"plotly_beforehover",te))return;var Je=ie.getBoundingClientRect();Xt=te.clientX-Je.left,He=te.clientY-Je.top,le._calcInverseTransform(q);var pe=h.apply3DTransform(le._invTransform)(Xt,He);if(He=pe[1],(Xt=pe[0])<0||Xt>he[0]._length||He<0||He>me[0]._length)return i.unhoverRaw(q,te)}else Xt="xpx"in te?te.xpx:he[0]._length/2,He="ypx"in te?te.ypx:me[0]._length/2;if(te.pointerX=Xt+he[0]._offset,te.pointerY=He+me[0]._offset,Re="xval"in te?l.flat(ue,te.xval):l.p2c(he,Xt),ze="yval"in te?l.flat(ue,te.yval):l.p2c(me,He),!v(Re[0])||!v(ze[0]))return h.warn("Fx.hover failed",te,q),i.unhoverRaw(q,te)}var we=1/0;function Be(Vr,_n){for(je=0;je<cr.length;je++)if((rt=cr[je])&&rt[0]&&rt[0].trace&&!0===(ut=rt[0].trace).visible&&0!==ut._length&&-1===["carpet","contourcarpet"].indexOf(ut._module.name)){if("splom"===ut.type?gt=ue[At=0]:(gt=l.getSubplot(ut),At=ue.indexOf(gt)),l.isUnifiedHover(_t=Ne)&&(_t=_t.charAt(0)),wt={cd:rt,trace:ut,xa:he[At],ya:me[At],maxHoverDistance:De,maxSpikeDistance:$e,index:!1,distance:Math.min(we,De),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:a.defaultLine,name:ut.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},le[gt]&&(wt.subplot=le[gt]._subplot),le._splomScenes&&le._splomScenes[ut.uid]&&(wt.scene=le._splomScenes[ut.uid]),Gt=Kt.length,"array"===_t){var Qr=te[je];"pointNumber"in Qr?(wt.index=Qr.pointNumber,_t="closest"):(_t="","xval"in Qr&&(it=Qr.xval,_t="x"),"yval"in Qr&&(et=Qr.yval,_t=_t?"closest":"y"))}else void 0!==Vr&&void 0!==_n?(it=Vr,et=_n):(it=Re[At],et=ze[At]);if(0!==De)if(ut._module&&ut._module.hoverPoints){var Jr=ut._module.hoverPoints(wt,it,et,_t,{finiteRange:!0,hoverLayer:le._hoverlayer});if(Jr)for(var Nn,Hn=0;Hn<Jr.length;Hn++)v((Nn=Jr[Hn]).x0)&&v(Nn.y0)&&Kt.push(N(Nn,Ne))}else h.log("Unrecognized trace type in hover:",ut);if("closest"===Ne&&Kt.length>Gt&&(Kt.splice(0,Gt),we=Kt[0].distance),_e&&0!==$e&&0===Kt.length){wt.distance=$e,wt.index=!1;var Mn=ut._module.hoverPoints(wt,it,et,"closest",{hoverLayer:le._hoverlayer});if(Mn&&(Mn=Mn.filter(function(gr){return gr.spikeDistance<=$e})),Mn&&Mn.length){var Un,di=Mn.filter(function(gr){return gr.xa.showspikes&&"hovered data"!==gr.xa.spikesnap});if(di.length){var rr=di[0];v(rr.x0)&&v(rr.y0)&&(Un=Ke(rr),(!ar.vLinePoint||ar.vLinePoint.spikeDistance>Un.spikeDistance)&&(ar.vLinePoint=Un))}var Sr=Mn.filter(function(gr){return gr.ya.showspikes&&"hovered data"!==gr.ya.spikesnap});if(Sr.length){var Rt=Sr[0];v(Rt.x0)&&v(Rt.y0)&&(Un=Ke(Rt),(!ar.hLinePoint||ar.hLinePoint.spikeDistance>Un.spikeDistance)&&(ar.hLinePoint=Un))}}}}}function We(Vr,_n,Qr){for(var Jr,Nn=null,Hn=1/0,Mn=0;Mn<Vr.length;Mn++)Jr=Vr[Mn].spikeDistance,Qr&&0===Mn&&(Jr=-1/0),Jr<=Hn&&Jr<=_n&&(Nn=Vr[Mn],Hn=Jr);return Nn}function Ke(Vr){return Vr?{xa:Vr.xa,ya:Vr.ya,x:void 0!==Vr.xSpike?Vr.xSpike:(Vr.x0+Vr.x1)/2,y:void 0!==Vr.ySpike?Vr.ySpike:(Vr.y0+Vr.y1)/2,distance:Vr.distance,spikeDistance:Vr.spikeDistance,curveNumber:Vr.trace.index,color:Vr.color,pointNumber:Vr.index}:null}Be();var Ye={fullLayout:le,container:le._hoverlayer,event:te},ft=q._spikepoints;q._spikepoints={vLinePoint:ar.vLinePoint,hLinePoint:ar.hLinePoint};var St=function(){Kt.sort(function(Vr,_n){return Vr.distance-_n.distance}),Kt=function(Vr,_n){for(var Qr=_n.charAt(0),Jr=[],Nn=[],Hn=[],Mn=0;Mn<Vr.length;Mn++){var Un=Vr[Mn];c.traceIs(Un.trace,"bar-like")||c.traceIs(Un.trace,"box-violin")?Hn.push(Un):Un.trace[Qr+"period"]?Nn.push(Un):Jr.push(Un)}return Jr.concat(Nn).concat(Hn)}(Kt,Ne)};St();var Ft=Ne.charAt(0),at=("x"===Ft||"y"===Ft)&&Kt[0]&&O[Kt[0].trace.type];if(_e&&0!==$e&&0!==Kt.length){var mt=We(Kt.filter(function(Vr){return Vr.ya.showspikes}),$e,at);ar.hLinePoint=Ke(mt);var qt=We(Kt.filter(function(Vr){return Vr.xa.showspikes}),$e,at);ar.vLinePoint=Ke(qt)}if(0===Kt.length){var Et=i.unhoverRaw(q,te);return!_e||null===ar.hLinePoint&&null===ar.vLinePoint||X(ft)&&V(q,ar,Ye),Et}if(_e&&X(ft)&&V(q,ar,Ye),l.isXYhover(_t)&&0!==Kt[0].length&&"splom"!==Kt[0].trace.type){var Dt=Kt[0],Le=(Kt=A[Dt.trace.type]?Kt.filter(function(Vr){return Vr.trace.index===Dt.trace.index}):[Dt]).length;Be(G("x",Dt,le),G("y",Dt,le));var dt,Lt=[],Ut={},$t=0,Wt=function(Vr){var _n=A[Vr.trace.type]?P(Vr):Vr.trace.index;if(Ut[_n]){var Qr=Ut[_n]-1,Jr=Lt[Qr];Qr>0&&Math.abs(Vr.distance)<Math.abs(Jr.distance)&&(Lt[Qr]=Vr)}else $t++,Ut[_n]=$t,Lt.push(Vr)};for(dt=0;dt<Le;dt++)Wt(Kt[dt]);for(dt=Kt.length-1;dt>Le-1;dt--)Wt(Kt[dt]);Kt=Lt,St()}var wr=q._hoverdata,Rr=[],br=Z(q),nr=re(q);for(Ue=0;Ue<Kt.length;Ue++){var lr=Kt[Ue],sr=l.makeEventData(lr,lr.trace,lr.cd);if(!1!==lr.hovertemplate){var _r=!1;lr.cd[lr.index]&&lr.cd[lr.index].ht&&(_r=lr.cd[lr.index].ht),lr.hovertemplate=_r||lr.trace.hovertemplate||!1}if(lr.xa&&lr.ya){var Ar=lr.x0+lr.xa._offset,zt=lr.x1+lr.xa._offset,ur=lr.y0+lr.ya._offset,Tt=lr.y1+lr.ya._offset,Qt=Math.min(Ar,zt),Er=Math.max(Ar,zt),zr=Math.min(ur,Tt),an=Math.max(ur,Tt);sr.bbox={x0:Qt+nr,x1:Er+nr,y0:zr+br,y1:an+br}}lr.eventData=[sr],Rr.push(sr)}q._hoverdata=Rr;var Kr="y"===Ne&&(cr.length>1||Kt.length>1)||"closest"===Ne&&hr&&Kt.length>1,sn=a.combine(le.plot_bgcolor||a.background,le.paper_bgcolor),gn=E(Kt,{gd:q,hovermode:Ne,rotateLabels:Kr,bgColor:sn,container:le._hoverlayer,outerContainer:le._paper.node(),commonLabelOpts:le.hoverlabel,hoverdistance:le.hoverdistance});if(l.isUnifiedHover(Ne)||(function(Vr,_n,Qr){var Jr,Nn,Hn,Mn,Un,di,rr,Sr=0,Rt=1,gr=Vr.size(),xr=new Array(gr),Zr=0;function Ur(rn){var pn=rn[0],dn=rn[rn.length-1];if(Hn=dn.pos+dn.dp+dn.size-pn.pmax,(Nn=pn.pmin-pn.pos-pn.dp+pn.size)>.01){for(Un=rn.length-1;Un>=0;Un--)rn[Un].dp+=Nn;Jr=!1}if(!(Hn<.01)){if(Nn<-.01){for(Un=rn.length-1;Un>=0;Un--)rn[Un].dp-=Hn;Jr=!1}if(Jr){var Sn=0;for(Mn=0;Mn<rn.length;Mn++)(di=rn[Mn]).pos+di.dp+di.size>pn.pmax&&Sn++;for(Mn=rn.length-1;Mn>=0&&!(Sn<=0);Mn--)(di=rn[Mn]).pos>pn.pmax-1&&(di.del=!0,Sn--);for(Mn=0;Mn<rn.length&&!(Sn<=0);Mn++)if((di=rn[Mn]).pos<pn.pmin+1)for(di.del=!0,Sn--,Hn=2*di.size,Un=rn.length-1;Un>=0;Un--)rn[Un].dp-=Hn;for(Mn=rn.length-1;Mn>=0&&!(Sn<=0);Mn--)(di=rn[Mn]).pos+di.dp+di.size>pn.pmax&&(di.del=!0,Sn--)}}}for(Vr.each(function(rn){var pn=rn[_n],dn="x"===pn._id.charAt(0),Sn=pn.range;0===Zr&&Sn&&Sn[0]>Sn[1]!==dn&&(Rt=-1),xr[Zr++]=[{datum:rn,traceIndex:rn.trace.index,dp:0,pos:rn.pos,posref:rn.posref,size:rn.by*(dn?T:1)/2,pmin:0,pmax:dn?Qr.width:Qr.height}]}),xr.sort(function(rn,pn){return rn[0].posref-pn[0].posref||Rt*(pn[0].traceIndex-rn[0].traceIndex)});!Jr&&Sr<=gr;){for(Sr++,Jr=!0,Mn=0;Mn<xr.length-1;){var Yr=xr[Mn],Br=xr[Mn+1],Cr=Yr[Yr.length-1],Or=Br[0];if((Nn=Cr.pos+Cr.dp+Cr.size-Or.pos-Or.dp+Or.size)>.01&&Cr.pmin===Or.pmin&&Cr.pmax===Or.pmax){for(Un=Br.length-1;Un>=0;Un--)Br[Un].dp+=Nn;for(Yr.push.apply(Yr,Br),xr.splice(Mn+1,1),rr=0,Un=Yr.length-1;Un>=0;Un--)rr+=Yr[Un].dp;for(Hn=rr/Yr.length,Un=Yr.length-1;Un>=0;Un--)Yr[Un].dp-=Hn;Jr=!1}else Mn++}xr.forEach(Ur)}for(Mn=xr.length-1;Mn>=0;Mn--){var Dr=xr[Mn];for(Un=Dr.length-1;Un>=0;Un--){var Nr=Dr[Un],nn=Nr.datum;nn.offset=Nr.dp,nn.del=Nr.del}}}(gn,Kr?"xa":"ya",le),z(gn,Kr,le._invScaleX,le._invScaleY)),ie&&ie.tagName){var zn=c.getComponentMethod("annotations","hasClickToShow")(q,Rr);t(m.select(ie),zn?"pointer":"")}!ie||se||!function(Vr,_n,Qr){if(!Qr||Qr.length!==Vr._hoverdata.length)return!0;for(var Jr=Qr.length-1;Jr>=0;Jr--){var Nn=Qr[Jr],Hn=Vr._hoverdata[Jr];if(Nn.curveNumber!==Hn.curveNumber||String(Nn.pointNumber)!==String(Hn.pointNumber)||String(Nn.pointNumbers)!==String(Hn.pointNumbers))return!0}return!1}(q,0,wr)||(wr&&q.emit("plotly_unhover",{event:te,points:wr}),q.emit("plotly_hover",{event:te,points:q._hoverdata,xaxes:he,yaxes:me,xvals:Re,yvals:ze}))}(B,H,ee,U,$)})},K.loneHover=function(B,H){var ee=!0;Array.isArray(B)||(ee=!1,B=[B]);var U=H.gd,$=Z(U),q=re(U),te=E(B.map(function(ie){var ue=ie._x0||ie.x0||ie.x||0,le=ie._x1||ie.x1||ie.x||0,de=ie._y0||ie.y0||ie.y||0,be=ie._y1||ie.y1||ie.y||0,_e=ie.eventData;if(_e){var xe=Math.min(ue,le),Ee=Math.max(ue,le),he=Math.min(de,be),me=Math.max(de,be),Se=ie.trace;if(c.traceIs(Se,"gl3d")){var Me=U._fullLayout[Se.scene]._scene.container,Ie=Me.offsetLeft,Fe=Me.offsetTop;xe+=Ie,Ee+=Ie,he+=Fe,me+=Fe}_e.bbox={x0:xe+q,x1:Ee+q,y0:he+$,y1:me+$},H.inOut_bbox&&H.inOut_bbox.push(_e.bbox)}else _e=!1;return{color:ie.color||a.defaultLine,x0:ie.x0||ie.x||0,x1:ie.x1||ie.x||0,y0:ie.y0||ie.y||0,y1:ie.y1||ie.y||0,xLabel:ie.xLabel,yLabel:ie.yLabel,zLabel:ie.zLabel,text:ie.text,name:ie.name,idealAlign:ie.idealAlign,borderColor:ie.borderColor,fontFamily:ie.fontFamily,fontSize:ie.fontSize,fontColor:ie.fontColor,nameLength:ie.nameLength,textAlign:ie.textAlign,trace:ie.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ie.hovertemplate||!1,hovertemplateLabels:ie.hovertemplateLabels||!1,eventData:_e}}),{gd:U,hovermode:"closest",rotateLabels:!1,bgColor:H.bgColor||a.background,container:m.select(H.container),outerContainer:H.outerContainer||H.container}),ne=0,se=0;return te.sort(function(ie,ue){return ie.y0-ue.y0}).each(function(ie,ue){var le=ie.y0-ie.by/2;ie.offset=le-5<ne?ne-le+5:0,ne=le+ie.by+ie.offset,ue===H.anchorIndex&&(se=ie.offset)}).each(function(ie){ie.offset-=se}),z(te,!1,U._fullLayout._invScaleX,U._fullLayout._invScaleY),ee?te:te.node()};var S=/<extra>([\s\S]*)<\/extra>/;function E(B,H){var ee=H.gd,U=ee._fullLayout,$=H.hovermode,q=H.rotateLabels,te=H.bgColor,ne=H.container,se=H.outerContainer,ie=H.commonLabelOpts||{};if(0===B.length)return[[]];var ue=H.fontFamily||p.HOVERFONT,le=H.fontSize||p.HOVERFONTSIZE,de=B[0],be=de.xa,_e=de.ya,xe=$.charAt(0),Ee=de[xe+"Label"],he=j(ee,se),me=he.top,Se=he.width,Me=he.height,Ie=void 0!==Ee&&de.distance<=H.hoverdistance&&("x"===$||"y"===$);if(Ie){var Fe,Ne,De=!0;for(Fe=0;Fe<B.length;Fe++)if(De&&void 0===B[Fe].zLabel&&(De=!1),Ne=B[Fe].hoverinfo||B[Fe].trace.hoverinfo){var $e=Array.isArray(Ne)?Ne:Ne.split("+");if(-1===$e.indexOf("all")&&-1===$e.indexOf($)){Ie=!1;break}}De&&(Ie=!1)}var Re=ne.selectAll("g.axistext").data(Ie?[0]:[]);if(Re.enter().append("g").classed("axistext",!0),Re.exit().remove(),Re.each(function(){var at=m.select(this),mt=h.ensureSingle(at,"path","",function(zt){zt.style({"stroke-width":"1px"})}),qt=h.ensureSingle(at,"text","",function(zt){zt.attr("data-notex",1)}),Et=ie.bgcolor||a.defaultLine,Dt=ie.bordercolor||a.contrast(Et),Le=a.contrast(Et),Xe={family:ie.font.family||ue,size:ie.font.size||le,color:ie.font.color||Le};mt.style({fill:Et,stroke:Dt}),qt.text(Ee).call(d.font,Xe).call(o.positionText,0,0).call(o.convertToTspans,ee),at.attr("transform","");var ot,dt,Lt=j(ee,qt.node());if("x"===$){var Ut="top"===be.side?"-":"";qt.attr("text-anchor","middle").call(o.positionText,0,"top"===be.side?me-Lt.bottom-w-C:me-Lt.top+w+C),dt=_e._offset+("top"===be.side?0:_e._length);var $t=Lt.width/2+C;(ot=be._offset+(de.x0+de.x1)/2)<$t?(ot=$t,mt.attr("d","M-"+($t-w)+",0L-"+($t-2*w)+","+Ut+w+"H"+(C+Lt.width/2)+"v"+Ut+(2*C+Lt.height)+"H-"+$t+"V"+Ut+w+"Z")):ot>U.width-$t?(ot=U.width-$t,mt.attr("d","M"+($t-w)+",0L"+$t+","+Ut+w+"v"+Ut+(2*C+Lt.height)+"H-"+$t+"V"+Ut+w+"H"+($t-2*w)+"Z")):mt.attr("d","M0,0L"+w+","+Ut+w+"H"+(C+Lt.width/2)+"v"+Ut+(2*C+Lt.height)+"H-"+(C+Lt.width/2)+"V"+Ut+w+"H-"+w+"Z")}else{var Wt,wr,Rr;"right"===_e.side?(Wt="start",wr=1,Rr="",ot=be._offset+be._length):(Wt="end",wr=-1,Rr="-",ot=be._offset),dt=_e._offset+(de.y0+de.y1)/2,qt.attr("text-anchor",Wt),mt.attr("d","M0,0L"+Rr+w+","+w+"V"+(C+Lt.height/2)+"h"+Rr+(2*C+Lt.width)+"V-"+(C+Lt.height/2)+"H"+Rr+w+"V-"+w+"Z");var br,nr=Lt.height/2,lr=me-Lt.top-nr,sr="clip"+U._uid+"commonlabel"+_e._id;if(ot<Lt.width+2*C+w){br="M-"+(w+C)+"-"+nr+"h-"+(Lt.width-C)+"V"+nr+"h"+(Lt.width-C)+"Z";var _r=Lt.width-ot+C;o.positionText(qt,_r,lr),"end"===Wt&&qt.selectAll("tspan").each(function(){var zt=m.select(this),ur=d.tester.append("text").text(zt.text()).call(d.font,Xe),Tt=j(ee,ur.node());Math.round(Tt.width)<Math.round(Lt.width)&&zt.attr("x",_r-Tt.width),ur.remove()})}else o.positionText(qt,wr*(C+w),lr),br=null;var Ar=U._topclips.selectAll("#"+sr).data(br?[0]:[]);Ar.enter().append("clipPath").attr("id",sr).append("path"),Ar.exit().remove(),Ar.select("path").attr("d",br),d.setClipUrl(qt,br?sr:null,ee)}at.attr("transform",e(ot,dt))}),l.isUnifiedHover($)){ne.selectAll("g.hovertext").remove();var ze=B.filter(function(at){return"none"!==at.hoverinfo});if(0===ze.length)return;var Ue=U.hoverlabel,je=Ue.font,ut={font:je};g({showlegend:!0,legend:{title:{text:Ee,font:je},font:je,bgcolor:Ue.bgcolor,bordercolor:Ue.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:U.legend?U.legend.traceorder:void 0,orientation:"v"}},ut,ee._fullData);var gt=ut.legend;gt.entries=[];for(var At=0;At<ze.length;At++){var _t=ze[At];if("none"!==_t.hoverinfo){var it=D(_t,!0,$,U,Ee),et=it[0],wt=it[1];_t.name=wt,_t.text=""!==wt?wt+" : "+et:et;var Gt=_t.cd[_t.index];Gt&&(Gt.mc&&(_t.mc=Gt.mc),Gt.mcc&&(_t.mc=Gt.mcc),Gt.mlc&&(_t.mlc=Gt.mlc),Gt.mlcc&&(_t.mlc=Gt.mlcc),Gt.mlw&&(_t.mlw=Gt.mlw),Gt.mrc&&(_t.mrc=Gt.mrc),Gt.dir&&(_t.dir=Gt.dir)),_t._distinct=!0,gt.entries.push([_t])}}gt.entries.sort(function(at,mt){return at[0].trace.index-mt[0].trace.index}),gt.layer=ne,gt._inHover=!0,gt._groupTitleFont=Ue.grouptitlefont,u(ee,gt);var Kt,cr,ar,hr,Xt=ne.select("g.legend"),He=j(ee,Xt.node()),Je=He.width+2*C,pe=He.height+2*C,we=ze[0],Be=(we.x0+we.x1)/2,We=(we.y0+we.y1)/2,Ke=!(c.traceIs(we.trace,"bar-like")||c.traceIs(we.trace,"box-violin"));"y"===xe?Ke?(cr=We-C,Kt=We+C):(cr=Math.min.apply(null,ze.map(function(at){return Math.min(at.y0,at.y1)})),Kt=Math.max.apply(null,ze.map(function(at){return Math.max(at.y0,at.y1)}))):cr=Kt=h.mean(ze.map(function(at){return(at.y0+at.y1)/2}))-pe/2,"x"===xe?Ke?(ar=Be+C,hr=Be-C):(ar=Math.max.apply(null,ze.map(function(at){return Math.max(at.x0,at.x1)})),hr=Math.min.apply(null,ze.map(function(at){return Math.min(at.x0,at.x1)}))):ar=hr=h.mean(ze.map(function(at){return(at.x0+at.x1)/2}))-Je/2;var Ye,ft,ct=be._offset,St=_e._offset;return hr+=ct-Je,cr+=St-pe,Ye=(ar+=ct)+Je<Se&&ar>=0?ar:hr+Je<Se&&hr>=0?hr:ct+Je<Se?ct:ar-Be<Be-hr+Je?Se-Je:0,ft=(Kt+=St)+pe<Me&&Kt>=0?Kt:cr+pe<Me&&cr>=0?cr:St+pe<Me?St:Kt-We<We-cr+pe?Me-pe:0,Xt.attr("transform",e((Ye+=C)-1,(ft+=C)-1)),Xt}var Ft=ne.selectAll("g.hovertext").data(B,function(at){return P(at)});return Ft.enter().append("g").classed("hovertext",!0).each(function(){var at=m.select(this);at.append("rect").call(a.fill,a.addOpacity(te,.8)),at.append("text").classed("name",!0),at.append("path").style("stroke-width","1px"),at.append("text").classed("nums",!0).call(d.font,ue,le)}),Ft.exit().remove(),Ft.each(function(at){var mt=m.select(this).attr("transform",""),qt=at.color;Array.isArray(qt)&&(qt=qt[at.eventData[0].pointNumber]);var Et=at.bgcolor||qt,Dt=a.combine(a.opacity(Et)?Et:a.defaultLine,te),Le=a.combine(a.opacity(qt)?qt:a.defaultLine,te),Xe=at.borderColor||a.contrast(Dt),ot=D(at,Ie,$,U,Ee,mt),dt=ot[0],Lt=ot[1],Ut=mt.select("text.nums").call(d.font,at.fontFamily||ue,at.fontSize||le,at.fontColor||Xe).text(dt).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,ee),$t=mt.select("text.name"),Wt=0,wr=0;if(Lt&&Lt!==dt){$t.call(d.font,at.fontFamily||ue,at.fontSize||le,Le).text(Lt).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,ee);var Rr=j(ee,$t.node());Wt=Rr.width+2*C,wr=Rr.height+2*C}else $t.remove(),mt.select("rect").remove();mt.select("path").style({fill:Dt,stroke:Xe});var br=at.xa._offset+(at.x0+at.x1)/2,nr=at.ya._offset+(at.y0+at.y1)/2,lr=Math.abs(at.x1-at.x0),sr=Math.abs(at.y1-at.y0),_r=j(ee,Ut.node()),Ar=_r.width/U._invScaleX,zt=_r.height/U._invScaleY;at.ty0=(me-_r.top)/U._invScaleY,at.bx=Ar+2*C,at.by=Math.max(zt+2*C,wr),at.anchor="start",at.txwidth=Ar,at.tx2width=Wt,at.offset=0;var ur,Tt,Qt=(Ar+w+C+Wt)*U._invScaleX;if(q)at.pos=br,ur=nr+sr/2+Qt<=Me,Tt=nr-sr/2-Qt>=0,"top"!==at.idealAlign&&ur||!Tt?ur?(nr+=sr/2,at.anchor="start"):at.anchor="middle":(nr-=sr/2,at.anchor="end");else if(at.pos=nr,ur=br+lr/2+Qt<=Se,Tt=br-lr/2-Qt>=0,"left"!==at.idealAlign&&ur||!Tt)if(ur)br+=lr/2,at.anchor="start";else{at.anchor="middle";var Er=Qt/2,zr=br+Er-Se,an=br-Er;zr>0&&(br-=zr),an<0&&(br+=-an)}else br-=lr/2,at.anchor="end";Ut.attr("text-anchor",at.anchor),Wt&&$t.attr("text-anchor",at.anchor),mt.attr("transform",e(br,nr)+(q?n(x):""))}),Ft}function D(B,H,ee,U,$,q){var te="",ne="";void 0!==B.nameOverride&&(B.name=B.nameOverride),B.name&&(B.trace._meta&&(B.name=h.templateString(B.name,B.trace._meta)),te=J(B.name,B.nameLength));var se=ee.charAt(0);void 0!==B.zLabel?(void 0!==B.xLabel&&(ne+="x: "+B.xLabel+"<br>"),void 0!==B.yLabel&&(ne+="y: "+B.yLabel+"<br>"),"choropleth"!==B.trace.type&&"choroplethmapbox"!==B.trace.type&&(ne+=(ne?"z: ":"")+B.zLabel)):H&&B[se+"Label"]===$?ne=B[("x"===se?"y":"x")+"Label"]||"":void 0===B.xLabel?void 0!==B.yLabel&&"scattercarpet"!==B.trace.type&&(ne=B.yLabel):ne=void 0===B.yLabel?B.xLabel:"("+B.xLabel+", "+B.yLabel+")",!B.text&&0!==B.text||Array.isArray(B.text)||(ne+=(ne?"<br>":"")+B.text),void 0!==B.extraText&&(ne+=(ne?"<br>":"")+B.extraText),q&&""===ne&&!B.hovertemplate&&(""===te&&q.remove(),ne=te);var ue=B.hovertemplate||!1;if(ue){var le=B.hovertemplateLabels||B;B[se+"Label"]!==$&&(le[se+"other"]=le[se+"Val"],le[se+"otherLabel"]=le[se+"Label"]),ne=(ne=h.hovertemplateString(ue,le,U._d3locale,B.eventData[0]||{},B.trace._meta)).replace(S,function(de,be){return te=J(be,B.nameLength),""})}return[ne,te]}function z(B,H,ee,U){var $=function(te){return te*ee},q=function(te){return te*U};B.each(function(te){var ne=m.select(this);if(te.del)return ne.remove();var se=ne.select("text.nums"),ie=te.anchor,ue="end"===ie?-1:1,le={start:1,end:-1,middle:0}[ie],de=le*(w+C),be=de+le*(te.txwidth+C),_e=0,xe=te.offset,Ee="middle"===ie;Ee&&(de-=te.tx2width/2,be+=te.txwidth/2+C),H&&(xe*=-k,_e=te.offset*_),ne.select("path").attr("d",Ee?"M-"+$(te.bx/2+te.tx2width/2)+","+q(xe-te.by/2)+"h"+$(te.bx)+"v"+q(te.by)+"h-"+$(te.bx)+"Z":"M0,0L"+$(ue*w+_e)+","+q(w+xe)+"v"+q(te.by/2-w)+"h"+$(ue*te.bx)+"v-"+q(te.by)+"H"+$(ue*w+_e)+"V"+q(xe-w)+"Z");var he=_e+de,me=xe+te.ty0-te.by/2+C,Se=te.textAlign||"auto";"auto"!==Se&&("left"===Se&&"start"!==ie?(se.attr("text-anchor","start"),he=Ee?-te.bx/2-te.tx2width/2+C:-te.bx-C):"right"===Se&&"end"!==ie&&(se.attr("text-anchor","end"),he=Ee?te.bx/2-te.tx2width/2-C:te.bx+C)),se.call(o.positionText,$(he),q(me)),te.tx2width&&(ne.select("text.name").call(o.positionText,$(be+le*C+_e),q(xe+te.ty0-te.by/2+C)),ne.select("rect").call(d.setRect,$(be+(le-1)*te.tx2width/2+_e),q(xe-te.by/2-1),$(te.tx2width),q(te.by+2)))})}function N(B,H){var ee=B.index,U=B.trace||{},$=B.cd[0],q=B.cd[ee]||{};function te(de){return de||v(de)&&0===de}var ne=Array.isArray(ee)?function(de,be){var _e=h.castOption($,ee,de);return te(_e)?_e:h.extractOption({},U,"",be)}:function(de,be){return h.extractOption(q,U,de,be)};function se(de,be,_e){var xe=ne(be,_e);te(xe)&&(B[de]=xe)}if(se("hoverinfo","hi","hoverinfo"),se("bgcolor","hbg","hoverlabel.bgcolor"),se("borderColor","hbc","hoverlabel.bordercolor"),se("fontFamily","htf","hoverlabel.font.family"),se("fontSize","hts","hoverlabel.font.size"),se("fontColor","htc","hoverlabel.font.color"),se("nameLength","hnl","hoverlabel.namelength"),se("textAlign","hta","hoverlabel.align"),B.posref="y"===H||"closest"===H&&"h"===U.orientation?B.xa._offset+(B.x0+B.x1)/2:B.ya._offset+(B.y0+B.y1)/2,B.x0=h.constrain(B.x0,0,B.xa._length),B.x1=h.constrain(B.x1,0,B.xa._length),B.y0=h.constrain(B.y0,0,B.ya._length),B.y1=h.constrain(B.y1,0,B.ya._length),void 0!==B.xLabelVal&&(B.xLabel="xLabel"in B?B.xLabel:s.hoverLabelText(B.xa,B.xLabelVal,U.xhoverformat),B.xVal=B.xa.c2d(B.xLabelVal)),void 0!==B.yLabelVal&&(B.yLabel="yLabel"in B?B.yLabel:s.hoverLabelText(B.ya,B.yLabelVal,U.yhoverformat),B.yVal=B.ya.c2d(B.yLabelVal)),void 0!==B.zLabelVal&&void 0===B.zLabel&&(B.zLabel=String(B.zLabelVal)),!(isNaN(B.xerr)||"log"===B.xa.type&&B.xerr<=0)){var ie=s.tickText(B.xa,B.xa.c2l(B.xerr),"hover").text;B.xLabel+=void 0!==B.xerrneg?" +"+ie+" / -"+s.tickText(B.xa,B.xa.c2l(B.xerrneg),"hover").text:" \xb1 "+ie,"x"===H&&(B.distance+=1)}if(!(isNaN(B.yerr)||"log"===B.ya.type&&B.yerr<=0)){var ue=s.tickText(B.ya,B.ya.c2l(B.yerr),"hover").text;B.yLabel+=void 0!==B.yerrneg?" +"+ue+" / -"+s.tickText(B.ya,B.ya.c2l(B.yerrneg),"hover").text:" \xb1 "+ue,"y"===H&&(B.distance+=1)}var le=B.hoverinfo||B.trace.hoverinfo;return le&&"all"!==le&&(-1===(le=Array.isArray(le)?le:le.split("+")).indexOf("x")&&(B.xLabel=void 0),-1===le.indexOf("y")&&(B.yLabel=void 0),-1===le.indexOf("z")&&(B.zLabel=void 0),-1===le.indexOf("text")&&(B.text=void 0),-1===le.indexOf("name")&&(B.name=void 0)),B}function V(B,H,ee){var U,$,q=ee.container,te=ee.fullLayout,ne=te._size,se=ee.event,ie=!!H.hLinePoint,ue=!!H.vLinePoint;if(q.selectAll(".spikeline").remove(),ue||ie){var le=a.combine(te.plot_bgcolor,te.paper_bgcolor);if(ie){var de,be,_e=H.hLinePoint;U=_e&&_e.xa,"cursor"===($=_e&&_e.ya).spikesnap?(de=se.pointerX,be=se.pointerY):(de=U._offset+_e.x,be=$._offset+_e.y);var xe,Ee,he=b.readability(_e.color,le)<1.5?a.contrast(le):_e.color,me=$.spikemode,Se=$.spikethickness,Me=$.spikecolor||he,Ie=s.getPxPosition(B,$);if(-1!==me.indexOf("toaxis")||-1!==me.indexOf("across")){if(-1!==me.indexOf("toaxis")&&(xe=Ie,Ee=de),-1!==me.indexOf("across")){var Fe=$._counterDomainMin,Ne=$._counterDomainMax;"free"===$.anchor&&(Fe=Math.min(Fe,$.position),Ne=Math.max(Ne,$.position)),xe=ne.l+Fe*ne.w,Ee=ne.l+Ne*ne.w}q.insert("line",":first-child").attr({x1:xe,x2:Ee,y1:be,y2:be,"stroke-width":Se,stroke:Me,"stroke-dasharray":d.dashStyle($.spikedash,Se)}).classed("spikeline",!0).classed("crisp",!0),q.insert("line",":first-child").attr({x1:xe,x2:Ee,y1:be,y2:be,"stroke-width":Se+2,stroke:le}).classed("spikeline",!0).classed("crisp",!0)}-1!==me.indexOf("marker")&&q.insert("circle",":first-child").attr({cx:Ie+("right"!==$.side?Se:-Se),cy:be,r:Se,fill:Me}).classed("spikeline",!0)}if(ue){var De,$e,Re=H.vLinePoint;$=Re&&Re.ya,"cursor"===(U=Re&&Re.xa).spikesnap?(De=se.pointerX,$e=se.pointerY):(De=U._offset+Re.x,$e=$._offset+Re.y);var ze,Ue,je=b.readability(Re.color,le)<1.5?a.contrast(le):Re.color,rt=U.spikemode,ut=U.spikethickness,gt=U.spikecolor||je,At=s.getPxPosition(B,U);if(-1!==rt.indexOf("toaxis")||-1!==rt.indexOf("across")){if(-1!==rt.indexOf("toaxis")&&(ze=At,Ue=$e),-1!==rt.indexOf("across")){var _t=U._counterDomainMin,it=U._counterDomainMax;"free"===U.anchor&&(_t=Math.min(_t,U.position),it=Math.max(it,U.position)),ze=ne.t+(1-it)*ne.h,Ue=ne.t+(1-_t)*ne.h}q.insert("line",":first-child").attr({x1:De,x2:De,y1:ze,y2:Ue,"stroke-width":ut,stroke:gt,"stroke-dasharray":d.dashStyle(U.spikedash,ut)}).classed("spikeline",!0).classed("crisp",!0),q.insert("line",":first-child").attr({x1:De,x2:De,y1:ze,y2:Ue,"stroke-width":ut+2,stroke:le}).classed("spikeline",!0).classed("crisp",!0)}-1!==rt.indexOf("marker")&&q.insert("circle",":first-child").attr({cx:De,cy:At-("top"!==U.side?ut:-ut),r:ut,fill:gt}).classed("spikeline",!0)}}}function X(B,H){return!H||H.vLinePoint!==B._spikepoints.vLinePoint||H.hLinePoint!==B._spikepoints.hLinePoint}function J(B,H){return o.plainText(B||"",{len:H,allowedTags:["br","sub","sup","b","i","em"]})}function G(B,H,ee){var U=H[B+"a"],$=H[B+"Val"],q=H.cd[0];if("category"===U.type)$=U._categoriesMap[$];else if("date"===U.type){var te=H.trace[B+"periodalignment"];if(te){var ne=H.cd[H.index],se=ne[B+"Start"];void 0===se&&(se=ne[B]);var ie=ne[B+"End"];void 0===ie&&(ie=ne[B]);var ue=ie-se;"end"===te?$+=ue:"middle"===te&&($+=ue/2)}$=U.d2c($)}return q&&q.t&&q.t.posLetter===U._id&&("group"!==ee.boxmode&&"group"!==ee.violinmode||($+=q.t.dPos)),$}function Z(B){return B.offsetTop+B.clientTop}function re(B){return B.offsetLeft+B.clientLeft}function j(B,H){var ee=B._fullLayout,U=H.getBoundingClientRect(),$=U.x,q=U.y,te=$+U.width,ne=q+U.height,se=h.apply3DTransform(ee._invTransform)($,q),ie=h.apply3DTransform(ee._invTransform)(te,ne),ue=se[0],le=se[1],de=ie[0],be=ie[1];return{x:ue,y:le,width:de-ue,height:be-le,top:Math.min(le,be),left:Math.min(ue,de),right:Math.max(ue,de),bottom:Math.max(le,be)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../color"),b=y("./helpers").isUnifiedHover;Q.exports=function(h,e,n,r){r=r||{};var o=e.legend;function t(d){r.font[d]||(r.font[d]=o?e.legend.font[d]:e.font[d])}e&&b(e.hovermode)&&(r.font||(r.font={}),t("size"),t("family"),t("color"),o?(r.bgcolor||(r.bgcolor=v.combine(e.legend.bgcolor,e.paper_bgcolor)),r.bordercolor||(r.bordercolor=e.legend.bordercolor)):r.bgcolor||(r.bgcolor=e.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),m.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h){function e(n,r){return void 0!==h[n]?h[n]:m.coerce(b,h,v,n,r)}return e("clickmode"),e("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../dragelement"),h=y("./helpers"),e=y("./layout_attributes"),n=y("./hover");Q.exports={moduleType:"component",name:"fx",constants:y("./constants"),schema:{layout:e},attributes:y("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:y("./layout_global_defaults"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),getDistanceFunction:h.getDistanceFunction,getClosest:h.getClosest,inbox:h.inbox,quadrature:h.quadrature,appendArrayPointValue:h.appendArrayPointValue,castHoverOption:function(r,o,t){return v.castOption(r,o,"hoverlabel."+t)},castHoverinfo:function(r,o,t){return v.castOption(r,t,"hoverinfo",function(d){return v.coerceHoverinfo({hoverinfo:d},{_module:r._module},o)})},hover:n.hover,unhover:b.unhover,loneHover:n.loneHover,loneUnhover:function(r){var o=v.isD3Selection(r)?r:m.select(r);o.selectAll("g.hovertext").remove(),o.selectAll(".spikeline").remove()},click:y("./click")}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(y,Q,K){"use strict";var m=y("./constants"),v=y("../../plots/font_attributes"),b=v({editType:"none"});b.family.dflt=m.HOVERFONT,b.size.dflt=m.HOVERFONTSIZE,Q.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,grouptitlefont:v({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes"),b=y("./hovermode_defaults"),h=y("./hoverlabel_defaults");Q.exports=function(e,n){function r(a,i){return m.coerce(e,n,v,a,i)}b(e,n)&&(r("hoverdistance"),r("spikedistance")),"select"===r("dragmode")&&r("selectdirection");var o=n._has("mapbox"),t=n._has("geo"),d=n._basePlotModules.length;"zoom"===n.dragmode&&((o||t)&&1===d||o&&t&&2===d)&&(n.dragmode="pan"),h(e,n,r),m.coerceFont(r,"hoverlabel.grouptitlefont",n.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./hoverlabel_defaults"),b=y("./layout_attributes");Q.exports=function(h,e){v(h,e,function(n,r){return m.coerce(h,e,b,n,r)})}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../lib/regex").counter,b=y("../../plots/domain").attributes,h=y("../../plots/cartesian/constants").idRegex,e=y("../../plot_api/plot_template"),n={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[v("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[h.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[h.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:b({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function r(d,a,i){var s=a[i+"axes"],c=Object.keys((d._splomAxes||{})[i]||{});return Array.isArray(s)?s:c.length?c:void 0}function o(d,a,i,s,c,l){var p=a(d+"gap",i),g=a("domain."+d);a(d+"side",s);for(var u=new Array(c),x=g[0],f=(g[1]-x)/(c-p),T=f*(1-p),_=0;_<c;_++){var k=x+f*_;u[l?c-1-_:_]=[k,k+T]}return u}function t(d,a,i,s,c){var l,p=new Array(i);function g(u,x){-1!==a.indexOf(x)&&void 0===s[x]?(p[u]=x,s[x]=u):p[u]=""}if(Array.isArray(d))for(l=0;l<i;l++)g(l,d[l]);else for(g(0,c),l=1;l<i;l++)g(l,c+(l+1));return p}Q.exports={moduleType:"component",name:"grid",schema:{layout:{grid:n}},layoutAttributes:n,sizeDefaults:function(d,a){var i=d.grid||{},s=r(a,i,"x"),c=r(a,i,"y");if(d.grid||s||c){var l,p,g=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),u=Array.isArray(s),x=Array.isArray(c),f=u&&s!==i.xaxes&&x&&c!==i.yaxes;g?(l=i.subplots.length,p=i.subplots[0].length):(x&&(l=c.length),u&&(p=s.length));var T=e.newContainer(a,"grid"),_=S("rows",l),k=S("columns",p);if(_*k>1){!g&&!u&&!x&&"independent"===S("pattern")&&(g=!0),T._hasSubplotGrid=g;var w,C,A="top to bottom"===S("roworder"),P=g?.3:.1;f&&a._splomGridDflt&&(w=a._splomGridDflt.xside,C=a._splomGridDflt.yside),T._domains={x:o("x",S,g?.2:.1,w,k),y:o("y",S,P,C,_,A)}}else delete a.grid}function S(E,D){return m.coerce(i,T,n,E,D)}},contentDefaults:function(d,a){var i=a.grid;if(i&&i._domains){var s,c,l,p,g,u,x,f=d.grid||{},T=a._subplots,_=i._hasSubplotGrid,k=i.rows,w=i.columns,C="independent"===i.pattern,A=i._axisMap={};if(_){var O=f.subplots||[];u=i.subplots=new Array(k);var P=1;for(s=0;s<k;s++){var S=u[s]=new Array(w),E=O[s]||[];for(c=0;c<w;c++)if(C?(g=1===P?"xy":"x"+P+"y"+P,P++):g=E[c],S[c]="",-1!==T.cartesian.indexOf(g)){if(x=g.indexOf("y"),l=g.slice(0,x),p=g.slice(x),void 0!==A[l]&&A[l]!==c||void 0!==A[p]&&A[p]!==s)continue;S[c]=g,A[l]=c,A[p]=s}}}else{var D=r(a,f,"x"),z=r(a,f,"y");i.xaxes=t(D,T.xaxis,w,A,"x"),i.yaxes=t(z,T.yaxis,k,A,"y")}var N=i._anchors={},V="top to bottom"===i.roworder;for(var X in A){var J,G,Z,re=X.charAt(0),j=i[re+"side"];if(j.length<8)N[X]="free";else if("x"===re){if("t"===j.charAt(0)===V?(J=0,G=1,Z=k):(J=k-1,G=-1,Z=-1),_){var B=A[X];for(s=J;s!==Z;s+=G)if((g=u[s][B])&&(x=g.indexOf("y"),g.slice(0,x)===X)){N[X]=g.slice(x);break}}else for(s=J;s!==Z;s+=G)if(-1!==T.cartesian.indexOf(X+(p=i.yaxes[s]))){N[X]=p;break}}else if("l"===j.charAt(0)?(J=0,G=1,Z=w):(J=w-1,G=-1,Z=-1),_){var H=A[X];for(s=J;s!==Z;s+=G)if((g=u[H][s])&&(x=g.indexOf("y"),g.slice(x)===X)){N[X]=g.slice(0,x);break}}else for(s=J;s!==Z;s+=G)if(-1!==T.cartesian.indexOf((l=i.xaxes[s])+X)){N[X]=l;break}}}}}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/constants"),v=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),Q.exports=v("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib/to_log_range");Q.exports=function(b,h,e,n){h=h||{};var r="log"===e&&"linear"===h.type;if(r||"linear"===e&&"log"===h.type)for(var t,d,a=b._fullLayout.images,i=h._id.charAt(0),s=0;s<a.length;s++)if(d="images["+s+"].",(t=a[s])[i+"ref"]===h._id){var c=t[i],l=t["size"+i],p=null,g=null;if(r){p=v(c,h.range);var u=l/Math.pow(10,p)/2;g=2*Math.log(u+Math.sqrt(1+u*u))/Math.LN10}else g=(p=Math.pow(10,c))*(Math.pow(10,l/2)-Math.pow(10,-l/2));m(p)?m(g)||(g=null):(p=null,g=null),n(d+i,p),n(d+"size"+i,g)}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("../../plots/array_container_defaults"),h=y("./attributes");function e(n,r,o){function t(p,g){return m.coerce(n,r,h,p,g)}var d=t("source");if(!t("visible",!!d))return r;t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var a={_fullLayout:o},i=["x","y"],s=0;s<2;s++){var c=i[s],l=v.coerceRef(n,r,a,c,"paper",void 0);"paper"!==l&&v.getFromId(a,l)._imgIndices.push(r._index),v.coercePosition(r,a,t,l,c,0)}return r}Q.exports=function(n,r){b(n,r,{name:"images",handleItemDefaults:e})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../drawing"),b=y("../../plots/cartesian/axes"),h=y("../../plots/cartesian/axis_ids"),e=y("../../constants/xmlns_namespaces");Q.exports=function(n){var r,o,t=n._fullLayout,d=[],a={},i=[];for(o=0;o<t.images.length;o++){var s=t.images[o];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){r=h.ref2id(s.xref)+h.ref2id(s.yref);var c=t._plots[r];if(!c){i.push(s);continue}c.mainplot&&(r=c.mainplot.id),a[r]||(a[r]=[]),a[r].push(s)}else"above"===s.layer?d.push(s):i.push(s)}var l={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},p={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function g(w){var C=m.select(this);if(this._imgSrc!==w.source)if(C.attr("xmlns",e.svg),w.source&&"data:"===w.source.slice(0,5))C.attr("xlink:href",w.source),this._imgSrc=w.source;else{var A=new Promise(function(O){var P=new Image;function S(){C.remove(),O()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=S,P.onload=function(){var E=document.createElement("canvas");E.width=this.width,E.height=this.height,E.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var D=E.toDataURL("image/png");C.attr("xlink:href",D),O()},C.on("error",S),P.src=w.source,this._imgSrc=w.source}.bind(this));n._promises.push(A)}}function u(w){var C,A,O=m.select(this),P=b.getFromId(n,w.xref),S=b.getFromId(n,w.yref),E="domain"===b.getRefType(w.xref),D="domain"===b.getRefType(w.yref),z=t._size;C=void 0!==P?"string"==typeof w.xref&&E?P._length*w.sizex:Math.abs(P.l2p(w.sizex)-P.l2p(0)):w.sizex*z.w,A=void 0!==S?"string"==typeof w.yref&&D?S._length*w.sizey:Math.abs(S.l2p(w.sizey)-S.l2p(0)):w.sizey*z.h;var N,V,X=C*l[w.xanchor].offset,J=A*p[w.yanchor].offset,G=l[w.xanchor].sizing+p[w.yanchor].sizing;switch(N=void 0!==P?"string"==typeof w.xref&&E?P._length*w.x+P._offset:P.r2p(w.x)+P._offset:w.x*z.w+z.l,N+=X,V=void 0!==S?"string"==typeof w.yref&&D?S._length*(1-w.y)+S._offset:S.r2p(w.y)+S._offset:z.h-w.y*z.h+z.t,V+=J,w.sizing){case"fill":G+=" slice";break;case"stretch":G="none"}O.attr({x:N,y:V,width:C,height:A,preserveAspectRatio:G,opacity:w.opacity});var Z=(P&&"domain"!==b.getRefType(w.xref)?P._id:"")+(S&&"domain"!==b.getRefType(w.yref)?S._id:"");v.setClipUrl(O,Z?"clip"+t._uid+Z:null,n)}var x=t._imageLowerLayer.selectAll("image").data(i),f=t._imageUpperLayer.selectAll("image").data(d);x.enter().append("image"),f.enter().append("image"),x.exit().remove(),f.exit().remove(),x.each(function(w){g.bind(this)(w),u.bind(this)(w)}),f.each(function(w){g.bind(this)(w),u.bind(this)(w)});var T=Object.keys(t._plots);for(o=0;o<T.length;o++){var _=t._plots[r=T[o]];if(_.imagelayer){var k=_.imagelayer.selectAll("image").data(a[r]||[]);k.enter().append("image"),k.exit().remove(),k.each(function(w){g.bind(this)(w),u.bind(this)(w)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(y,Q,K){"use strict";Q.exports={moduleType:"component",name:"images",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("images"),draw:y("./draw"),convertCoords:y("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(y,Q,K){"use strict";var m=y("../../plots/font_attributes"),v=y("../color/attributes");Q.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:m({editType:"legend"}),grouptitlefont:m({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:m({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(y,Q,K){"use strict";Q.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("../../plot_api/plot_template"),h=y("../../plots/attributes"),e=y("./attributes"),n=y("../../plots/layout_attributes"),r=y("./helpers");Q.exports=function(o,t,d){var a,i=o.legend||{},s=b.newContainer(t,"legend");function c(S,E){return v.coerce(i,s,e,S,E)}for(var l=function(S,E){return v.coerce(a._input,a,h,S,E)},p=t.font||{},g=v.coerceFont(c,"grouptitlefont",v.extendFlat({},p,{size:Math.round(1.1*p.size)})),u=0,x=!1,f="normal",T=0;T<d.length;T++)(a=d[T]).visible&&((a.showlegend||a._dfltShowLegend&&!(a._module&&a._module.attributes&&a._module.attributes.showlegend&&!1===a._module.attributes.showlegend.dflt))&&(u++,a.showlegend&&(x=!0,(m.traceIs(a,"pie-like")||!0===a._input.showlegend)&&u++),v.coerceFont(l,"legendgrouptitle.font",g)),(m.traceIs(a,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(a.fill))&&(f=r.isGrouped({traceorder:f})?"grouped+reversed":"reversed"),void 0!==a.legendgroup&&""!==a.legendgroup&&(f=r.isReversed({traceorder:f})?"reversed+grouped":"grouped"));var _=v.coerce(o,t,n,"showlegend",x&&u>1);if(!1===_&&(t.legend=void 0),(!1!==_||i.uirevision)&&(c("uirevision",t.uirevision),!1!==_)){c("bgcolor",t.paper_bgcolor),c("bordercolor"),c("borderwidth");var k,w,C,A=v.coerceFont(c,"font",t.font),O="h"===c("orientation");if(O?(k=0,m.getComponentMethod("rangeslider","isVisible")(o.xaxis)?(w=1.1,C="bottom"):(w=-.1,C="top")):(k=1.02,w=1,C="auto"),c("traceorder",f),r.isGrouped(t.legend)&&c("tracegroupgap"),c("itemsizing"),c("itemwidth"),c("itemclick"),c("itemdoubleclick"),c("groupclick"),c("x",k),c("xanchor"),c("y",w),c("yanchor",C),c("valign"),v.noneOrAll(i,s,["x","y"]),c("title.text")){c("title.side",O?"left":"top");var P=v.extendFlat({},A,{size:v.bigFont(A.size)});v.coerceFont(c,"title.font",P)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../plots/plots"),h=y("../../registry"),e=y("../../lib/events"),n=y("../dragelement"),r=y("../drawing"),o=y("../color"),t=y("../../lib/svg_text_utils"),d=y("./handle_click"),a=y("./constants"),i=y("../../constants/alignment"),s=i.LINE_SPACING,c=i.FROM_TL,l=i.FROM_BR,p=y("./get_legend_data"),g=y("./style"),u=y("./helpers");function x(A,O,P,S,E){var D=P.data()[0][0].trace,z={event:E,node:P.node(),curveNumber:D.index,expandedIndex:D._expandedIndex,data:A.data,layout:A.layout,frames:A._transitionData._frames,config:A._context,fullData:A._fullData,fullLayout:A._fullLayout};D._group&&(z.group=D._group),h.traceIs(D,"pie-like")&&(z.label=P.datum()[0].label),!1!==e.triggerHandler(A,"plotly_legendclick",z)&&(1===S?O._clickTimeout=setTimeout(function(){A._fullLayout&&d(P,A,S)},A._context.doubleClickDelay):2===S&&(O._clickTimeout&&clearTimeout(O._clickTimeout),A._legendMouseDownTime=0,!1!==e.triggerHandler(A,"plotly_legenddoubleclick",z)&&d(P,A,S)))}function f(A,O,P){var S,E,D=A.data()[0][0],z=D.trace,N=h.traceIs(z,"pie-like"),V=!P._inHover&&O._context.edits.legendText&&!N,X=P._maxNameLength;D.groupTitle?(S=D.groupTitle.text,E=D.groupTitle.font):(E=P.font,P.entries?S=D.text:(S=N?D.label:z.name,z._meta&&(S=v.templateString(S,z._meta))));var J=v.ensureSingle(A,"text","legendtext");J.attr("text-anchor","start").call(r.font,E).text(V?T(S,X):S),t.positionText(J,P.itemwidth+2*a.itemGap,0),V?J.call(t.makeEditable,{gd:O,text:S}).call(k,A,O,P).on("edit",function(Z){this.text(T(Z,X)).call(k,A,O,P);var re=D.trace._fullInput||{},j={};if(h.hasTransform(re,"groupby")){var B=h.getTransformIndices(re,"groupby"),ee=v.keyedContainer(re,"transforms["+B[B.length-1]+"].styles","target","value.name");ee.set(D.trace._group,Z),j=ee.constructUpdate()}else j.name=Z;return h.call("_guiRestyle",O,j,z.index)}):k(J,A,O,P)}function T(A,O){var P=Math.max(4,O);if(A&&A.trim().length>=P/2)return A;for(var S=P-(A=A||"").length;S>0;S--)A+=" ";return A}function _(A,O){var P,S=O._context.doubleClickDelay,E=1,D=v.ensureSingle(A,"rect","legendtoggle",function(z){O._context.staticPlot||z.style("cursor","pointer").attr("pointer-events","all"),z.call(o.fill,"rgba(0,0,0,0)")});O._context.staticPlot||(D.on("mousedown",function(){(P=(new Date).getTime())-O._legendMouseDownTime<S?E+=1:(E=1,O._legendMouseDownTime=P)}),D.on("mouseup",function(){if(!O._dragged&&!O._editing){var z=O._fullLayout.legend;(new Date).getTime()-O._legendMouseDownTime>S&&(E=Math.max(E-1,1)),x(O,z,A,E,m.event)}}))}function k(A,O,P,S,E){S._inHover&&A.attr("data-notex",!0),t.convertToTspans(A,P,function(){!function(D,z,N,V){var X=D.data()[0][0];if(N._inHover||!X||X.trace.showlegend){var J=D.select("g[class*=math-group]"),G=J.node();N||(N=z._fullLayout.legend);var j,B,re=N.borderwidth,H=(1===V?N.title.font:X.groupTitle?X.groupTitle.font:N.font).size*s;if(G){var ee=r.bBox(G);j=ee.height,B=ee.width,1===V?r.setTranslate(J,re,re+.75*j):r.setTranslate(J,0,.25*j)}else{var U=D.select(1===V?".legendtitletext":".legendtext"),$=t.lineCount(U),q=U.node();if(j=H*$,B=q?r.bBox(q).width:0,1===V)"left"===N.title.side&&(B+=2*a.itemGap),t.positionText(U,re+a.titlePad,re+H);else{var te=2*a.itemGap+N.itemwidth;X.groupTitle&&(te=a.itemGap,B-=N.itemwidth),t.positionText(U,te,-H*(($-1)/2-.3))}}1===V?(N._titleWidth=B,N._titleHeight=j):(X.lineHeight=H,X.height=Math.max(j,16)+3,X.width=B)}else D.remove()}(O,P,S,E)})}function w(A){return v.isRightAnchor(A)?"right":v.isCenterAnchor(A)?"center":"left"}function C(A){return v.isBottomAnchor(A)?"bottom":v.isMiddleAnchor(A)?"middle":"top"}Q.exports=function(A,O){return O||(O=A._fullLayout.legend||{}),function(P,S){var E,D,z=P._fullLayout,N="legend"+z._uid,V=S._inHover;if(V?(E=S.layer,N+="-hover"):E=z._infolayer,E){if(P._legendMouseDownTime||(P._legendMouseDownTime=0),V){if(!S.entries)return;D=p(S.entries,S)}else{if(!P.calcdata)return;D=z.showlegend&&p(P.calcdata,S)}var X=z.hiddenlabels||[];if(!(V||z.showlegend&&D.length))return E.selectAll(".legend").remove(),z._topdefs.select("#"+N).remove(),b.autoMargin(P,"legend");var J=v.ensureSingle(E,"g","legend",function($){V||$.attr("pointer-events","all")}),G=v.ensureSingleById(z._topdefs,"clipPath",N,function($){$.append("rect")}),Z=v.ensureSingle(J,"rect","bg",function($){$.attr("shape-rendering","crispEdges")});Z.call(o.stroke,S.bordercolor).call(o.fill,S.bgcolor).style("stroke-width",S.borderwidth+"px");var re=v.ensureSingle(J,"g","scrollbox"),j=S.title;if(S._titleWidth=0,S._titleHeight=0,j.text){var B=v.ensureSingle(re,"text","legendtitletext");B.attr("text-anchor","start").call(r.font,j.font).text(j.text),k(B,re,P,S,1)}else re.selectAll(".legendtitletext").remove();var H=v.ensureSingle(J,"rect","scrollbar",function($){$.attr(a.scrollBarEnterAttrs).call(o.fill,a.scrollBarColor)}),ee=re.selectAll("g.groups").data(D);ee.enter().append("g").attr("class","groups"),ee.exit().remove();var U=ee.selectAll("g.traces").data(v.identity);U.enter().append("g").attr("class","traces"),U.exit().remove(),U.style("opacity",function($){var q=$[0].trace;return h.traceIs(q,"pie-like")?-1!==X.indexOf($[0].label)?.5:1:"legendonly"===q.visible?.5:1}).each(function(){m.select(this).call(f,P,S)}).call(g,P,S).each(function(){V||m.select(this).call(_,P)}),v.syncOrAsync([b.previousPromises,function(){return function($,q,te,ne){var se=$._fullLayout;ne||(ne=se.legend);var ie=se._size,ue=u.isVertical(ne),le=u.isGrouped(ne),de=ne.borderwidth,be=2*de,_e=a.itemGap,xe=ne.itemwidth+2*_e,Ee=2*(de+_e),he=C(ne),me=ne.y<0||0===ne.y&&"top"===he,Se=ne.y>1||1===ne.y&&"bottom"===he,Me=ne.tracegroupgap;ne._maxHeight=Math.max(me||Se?se.height/2:ie.h,30);var Ie=0;ne._width=0,ne._height=0;var hr,Xt,He,Je,Fe=(Xt=0,He=0,(Je=(hr=ne).title.side)&&(-1!==Je.indexOf("left")&&(Xt=hr._titleWidth),-1!==Je.indexOf("top")&&(He=hr._titleHeight)),[Xt,He]);if(ue)te.each(function(hr){var Xt=hr[0].height;r.setTranslate(this,de+Fe[0],de+Fe[1]+ne._height+Xt/2+_e),ne._height+=Xt,ne._width=Math.max(ne._width,hr[0].width)}),Ie=xe+ne._width,ne._width+=_e+xe+be,ne._height+=Ee,le&&(q.each(function(hr,Xt){r.setTranslate(this,0,Xt*ne.tracegroupgap)}),ne._height+=(ne._lgroupsLength-1)*ne.tracegroupgap);else{var Ne=w(ne),Re=Se||me,ze=se.width/2;ne._maxWidth=Math.max(ne.x<0||0===ne.x&&"right"===Ne?Re&&"left"===Ne?ie.l+ie.w:ze:ne.x>1||1===ne.x&&"left"===Ne?Re&&"right"===Ne?ie.r+ie.w:ze:ie.w,2*xe);var Ue=0,je=0;te.each(function(hr){var Xt=hr[0].width+xe;Ue=Math.max(Ue,Xt),je+=Xt}),Ie=null;var rt=0;if(le){var ut=0,gt=0,At=0;q.each(function(){var hr=0,Xt=0;m.select(this).selectAll("g.traces").each(function(Je){var pe=Je[0].width,we=Je[0].height;r.setTranslate(this,Fe[0],Fe[1]+de+_e+we/2+Xt),Xt+=we,hr=Math.max(hr,xe+pe)});var He=hr+_e;gt>0&&He+de+gt>ne._maxWidth?(rt=Math.max(rt,gt),gt=0,At+=ut+Me,ut=Xt):ut=Math.max(ut,Xt),r.setTranslate(this,gt,At),gt+=He}),ne._width=Math.max(rt,gt)+de,ne._height=At+ut+Ee}else{var _t=te.size(),it=je+be+(_t-1)*_e<ne._maxWidth,et=0,wt=0,Gt=0,Kt=0;te.each(function(hr){var Xt=hr[0].height,He=xe+hr[0].width,Je=(it?He:Ue)+_e;Je+de+wt-_e>=ne._maxWidth&&(rt=Math.max(rt,Kt),wt=0,Gt+=et,ne._height+=et,et=0),r.setTranslate(this,Fe[0]+de+wt,Fe[1]+de+Gt+Xt/2+_e),Kt=wt+He+_e,wt+=Je,et=Math.max(et,Xt)}),it?(ne._width=wt+be,ne._height=et+Ee):(ne._width=Math.max(rt,Kt)+be,ne._height+=et+Ee)}}ne._width=Math.ceil(Math.max(ne._width+Fe[0],ne._titleWidth+2*(de+a.titlePad))),ne._height=Math.ceil(Math.max(ne._height+Fe[1],ne._titleHeight+2*(de+a.itemGap))),ne._effHeight=Math.min(ne._height,ne._maxHeight);var cr=$._context.edits,ar=cr.legendText||cr.legendPosition;te.each(function(hr){var Xt=m.select(this).select(".legendtoggle"),He=hr[0].height,Je=ar?xe:Ie||xe+hr[0].width;ue||(Je+=_e/2),r.setRect(Xt,0,-He/2,Je,He)})}(P,ee,U,S)},function(){var $,q,te,ne,Re,ze,Ue,je,se=z._size,ie=S.borderwidth;if(!V){if(Ue=w(ze=(Re=P)._fullLayout.legend),je=C(ze),b.autoMargin(Re,"legend",{x:ze.x,y:ze.y,l:ze._width*c[Ue],r:ze._width*l[Ue],b:ze._effHeight*l[je],t:ze._effHeight*c[je]}))return;var ue=se.l+se.w*S.x-c[w(S)]*S._width,le=se.t+se.h*(1-S.y)-c[C(S)]*S._effHeight;if(z.margin.autoexpand){var de=ue,be=le;ue=v.constrain(ue,0,z.width-S._width),le=v.constrain(le,0,z.height-S._effHeight),ue!==de&&v.log("Constrain legend.x to make legend fit inside graph"),le!==be&&v.log("Constrain legend.y to make legend fit inside graph")}r.setTranslate(J,ue,le)}if(H.on(".drag",null),J.on("wheel",null),V||S._height<=S._maxHeight||P._context.staticPlot){var _e=S._effHeight;V&&(_e=S._height),Z.attr({width:S._width-ie,height:_e-ie,x:ie/2,y:ie/2}),r.setTranslate(re,0,0),G.select("rect").attr({width:S._width-2*ie,height:_e-2*ie,x:ie,y:ie}),r.setClipUrl(re,N,P),r.setRect(H,0,0,0,0),delete S._scrollY}else{var xe,he,me=Math.max(a.scrollBarMinHeight,S._effHeight*S._effHeight/S._height),Se=S._effHeight-me-2*a.scrollBarMargin,Me=S._height-S._effHeight,Ie=Se/Me,Fe=Math.min(S._scrollY||0,Me);Z.attr({width:S._width-2*ie+a.scrollBarWidth+a.scrollBarMargin,height:S._effHeight-ie,x:ie/2,y:ie/2}),G.select("rect").attr({width:S._width-2*ie+a.scrollBarWidth+a.scrollBarMargin,height:S._effHeight-2*ie,x:ie,y:ie+Fe}),r.setClipUrl(re,N,P),$e(Fe,me,Ie),J.on("wheel",function(){$e(Fe=v.constrain(S._scrollY+m.event.deltaY/Se*Me,0,Me),me,Ie),0!==Fe&&Fe!==Me&&m.event.preventDefault()});var Ne=m.behavior.drag().on("dragstart",function(){var Re=m.event.sourceEvent;xe="touchstart"===Re.type?Re.changedTouches[0].clientY:Re.clientY,he=Fe}).on("drag",function(){var Re=m.event.sourceEvent;2===Re.buttons||Re.ctrlKey||$e(Fe=function(ze,Ue,je){return v.constrain((je-Ue)/Ie+ze,0,Me)}(he,xe,"touchmove"===Re.type?Re.changedTouches[0].clientY:Re.clientY),me,Ie)});H.call(Ne);var De=m.behavior.drag().on("dragstart",function(){var Re=m.event.sourceEvent;"touchstart"===Re.type&&(xe=Re.changedTouches[0].clientY,he=Fe)}).on("drag",function(){var Re=m.event.sourceEvent;"touchmove"===Re.type&&$e(Fe=function(ze,Ue,je){return v.constrain((Ue-je)/Ie+ze,0,Me)}(he,xe,Re.changedTouches[0].clientY),me,Ie)});re.call(De)}function $e(Re,ze,Ue){S._scrollY=P._fullLayout.legend._scrollY=Re,r.setTranslate(re,0,-Re),r.setRect(H,S._width,a.scrollBarMargin+Re*Ue,a.scrollBarWidth,ze),G.select("rect").attr("y",ie+Re)}P._context.edits.legendPosition&&(J.classed("cursor-move",!0),n.init({element:J.node(),gd:P,prepFn:function(){var Re=r.getTranslate(J);te=Re.x,ne=Re.y},moveFn:function(Re,ze){var Ue=te+Re,je=ne+ze;r.setTranslate(J,Ue,je),$=n.align(Ue,0,se.l,se.l+se.w,S.xanchor),q=n.align(je,0,se.t+se.h,se.t,S.yanchor)},doneFn:function(){void 0!==$&&void 0!==q&&h.call("_guiRelayout",P,{"legend.x":$,"legend.y":q})},clickFn:function(Re,ze){var Ue=E.selectAll("g.traces").filter(function(){var je=this.getBoundingClientRect();return ze.clientX>=je.left&&ze.clientX<=je.right&&ze.clientY>=je.top&&ze.clientY<=je.bottom});Ue.size()>0&&x(P,J,Ue,Re,ze)}}))}],P)}}(A,O)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("./helpers");Q.exports=function(b,h){var e,n,r=h._inHover,o=v.isGrouped(h),t=v.isReversed(h),d={},a=[],i=!1,s={},c=0,l=0;function p(z,N){if(""!==z&&v.isGrouped(h))-1===a.indexOf(z)?(a.push(z),i=!0,d[z]=[N]):d[z].push(N);else{var V="~~i"+c;a.push(V),d[V]=[N],c++}}for(e=0;e<b.length;e++){var g=b[e],u=g[0],x=u.trace,f=x.legendgroup;if(r||x.visible&&x.showlegend)if(m.traceIs(x,"pie-like"))for(s[f]||(s[f]={}),n=0;n<g.length;n++){var T=g[n].label;s[f][T]||(p(f,{label:T,color:g[n].color,i:g[n].i,trace:x,pts:g[n].pts}),s[f][T]=!0,l=Math.max(l,(T||"").length))}else p(f,u),l=Math.max(l,(x.name||"").length)}if(!a.length)return[];var _=!i||!o,k=[];for(e=0;e<a.length;e++){var w=d[a[e]];k.push(_?w[0]:w)}for(_&&(k=[k]),e=0;e<k.length;e++){var C=1/0;for(n=0;n<k[e].length;n++){var A=k[e][n].trace.legendrank;C>A&&(C=A)}k[e][0]._groupMinRank=C,k[e][0]._preGroupSort=e}var O=function(z,N){return z.trace.legendrank-N.trace.legendrank||z._preSort-N._preSort};for(k.forEach(function(z,N){z[0]._preGroupSort=N}),k.sort(function(z,N){return z[0]._groupMinRank-N[0]._groupMinRank||z[0]._preGroupSort-N[0]._preGroupSort}),e=0;e<k.length;e++){k[e].forEach(function(z,N){z._preSort=N}),k[e].sort(O);var P=k[e][0].trace,S=null;for(n=0;n<k[e].length;n++){var E=k[e][n].trace.legendgrouptitle;if(E&&E.text){S=E,r&&(E.font=h._groupTitleFont);break}}if(t&&k[e].reverse(),S){var D=!1;for(n=0;n<k[e].length;n++)if(m.traceIs(k[e][n].trace,"pie-like")){D=!0;break}k[e].unshift({i:-1,groupTitle:S,noClick:D,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:"toggleitem"===h.groupclick||P.visible}})}for(n=0;n<k[e].length;n++)k[e][n]=[k[e][n]]}return h._lgroupsLength=k.length,h._maxNameLength=l,k}},{"../../registry":647,"./helpers":423}],422:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../registry"),b=!0;Q.exports=function(h,e,n){var r=e._fullLayout;if(!e._dragged&&!e._editing){var o,t=r.legend.itemclick,d=r.legend.itemdoubleclick,a=r.legend.groupclick;if(1===n&&"toggle"===t&&"toggleothers"===d&&b&&e.data&&e._context.showTips&&m.notifier(m._(e,"Double-click on legend to isolate one trace"),"long"),b=!1,1===n?o=t:2===n&&(o=d),o){var i="togglegroup"===a,s=r.hiddenlabels?r.hiddenlabels.slice():[],c=h.data()[0][0];if(!c.groupTitle||!c.noClick){var l,p,g,u,x,f=e._fullData,T=c.trace,_=T.legendgroup,k={},w=[],C=[],A=[];if(v.traceIs(T,"pie-like")){var O=c.label,P=s.indexOf(O);"toggle"===o?-1===P?s.push(O):s.splice(P,1):"toggleothers"===o&&(s=[],e.calcdata[0].forEach(function(H){O!==H.label&&s.push(H.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===s.length&&-1===P&&(s=[])),v.call("_guiRelayout",e,"hiddenlabels",s)}else{var S,E=_&&_.length,D=[];if(E)for(l=0;l<f.length;l++)(S=f[l]).visible&&S.legendgroup===_&&D.push(l);if("toggle"===o){var z;switch(T.visible){case!0:z="legendonly";break;case!1:z=!1;break;case"legendonly":z=!0}if(E)if(i)for(l=0;l<f.length;l++)!1!==f[l].visible&&f[l].legendgroup===_&&B(f[l],z);else B(T,z);else B(T,z)}else if("toggleothers"===o){var X,G=!0;for(l=0;l<f.length;l++)if(X=!0!==f[l].showlegend,!(f[l]===T||X||E&&f[l].legendgroup===_||!0!==f[l].visible||v.traceIs(f[l],"notLegendIsolatable"))){G=!1;break}for(l=0;l<f.length;l++)if(!1!==f[l].visible&&!v.traceIs(f[l],"notLegendIsolatable"))switch(T.visible){case"legendonly":B(f[l],!0);break;case!0:X=!0!==f[l].showlegend&&!f[l].legendgroup,B(f[l],!!(f[l]===T||E&&f[l].legendgroup===_||X)||!!G||"legendonly")}}for(l=0;l<C.length;l++)if(g=C[l]){var Z=g.constructUpdate(),re=Object.keys(Z);for(p=0;p<re.length;p++)(k[u=re[p]]=k[u]||[])[A[l]]=Z[u]}for(x=Object.keys(k),l=0;l<x.length;l++)for(u=x[l],p=0;p<w.length;p++)k[u].hasOwnProperty(p)||(k[u][p]=void 0);v.call("_guiRestyle",e,k,w)}}}}function j(H,ee,U){var $=w.indexOf(H),q=k[ee];return q||(q=k[ee]=[]),-1===w.indexOf(H)&&(w.push(H),$=w.length-1),q[$]=U,$}function B(H,ee){if(!c.groupTitle||i){var U=H._fullInput;if(v.hasTransform(U,"groupby")){var $=C[U.index];if(!$){var q=v.getTransformIndices(U,"groupby");$=m.keyedContainer(U,"transforms["+q[q.length-1]+"].styles","target","value.visible"),C[U.index]=$}var ne=$.get(H._group);void 0===ne&&(ne=!0),!1!==ne&&$.set(H._group,ee),A[U.index]=j(U.index,"visible",!1!==U.visible)}else j(U.index,"visible",!1!==U.visible&&ee)}}}},{"../../lib":515,"../../registry":647}],423:[function(y,Q,K){"use strict";K.isGrouped=function(m){return-1!==(m.traceorder||"").indexOf("grouped")},K.isVertical=function(m){return"h"!==m.orientation},K.isReversed=function(m){return-1!==(m.traceorder||"").indexOf("reversed")}},{}],424:[function(y,Q,K){"use strict";Q.exports={moduleType:"component",name:"legend",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),draw:y("./draw"),style:y("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../registry"),b=y("../../lib"),h=b.strTranslate,e=y("../drawing"),n=y("../color"),r=y("../colorscale/helpers").extractOpts,o=y("../../traces/scatter/subtypes"),t=y("../../traces/pie/style_one"),d=y("../../traces/pie/helpers").castOption,a=y("./constants");function i(l,p){return(p?"radial":"horizontal")+(l?"":"reversed")}function s(l){var p=l[0].trace,g=p.contours,u=o.hasLines(p),x=o.hasMarkers(p),f=p.visible&&p.fill&&"none"!==p.fill,T=!1,_=!1;if(g){var k=g.coloring;"lines"===k?T=!0:u="none"===k||"heatmap"===k||g.showlines,"constraint"===g.type?f="="!==g._operation:"fill"!==k&&"heatmap"!==k||(_=!0)}return{showMarker:x,showLine:u,showFill:f,showGradientLine:T,showGradientFill:_,anyLine:u||T,anyFill:f||_}}function c(l,p,g){return l&&b.isArrayOrTypedArray(l)?p:l>g?g:l}Q.exports=function(l,p,g){g||(g=p._fullLayout.legend);var x="constant"===g.itemsizing,f=g.itemwidth,_=h((f+2*a.itemGap)/2,0),k=function(A,O,P,S){var E;if(A+1)E=A;else{if(!(O&&O.width>0))return 0;E=O.width}return x?S:Math.min(E,P)};function w(A,O,P){var S=A[0].trace,E=S.marker||{},D=E.line||{},z=P?S.visible&&S.type===P:v.traceIs(S,"bar"),N=m.select(O).select("g.legendpoints").selectAll("path.legend"+P).data(z?[A]:[]);N.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),N.exit().remove(),N.each(function(V){var X=m.select(this),J=V[0],G=k(J.mlw,E.line,5,2);X.style("stroke-width",G+"px");var Z=J.mcc;if(!g._inHover&&"mc"in J){var re=r(E),j=re.mid;void 0===j&&(j=(re.max+re.min)/2),Z=e.tryColorscale(E,"")(j)}var B=Z||J.mc||E.color,H=E.pattern,ee=H&&e.getPatternAttr(H.shape,0,"");if(ee){var U=e.getPatternAttr(H.bgcolor,0,null),$=e.getPatternAttr(H.fgcolor,0,null),q=H.fgopacity,te=c(H.size,8,10),ne=c(H.solidity,.5,1);X.call(e.pattern,"legend",p,"legend-"+S.uid,ee,te,ne,Z,H.fillmode,U,$,q)}else X.call(n.fill,B);G&&n.stroke(X,J.mlc||D.color)})}function C(A,O,P){var S=A[0],E=S.trace,D=P?E.visible&&E.type===P:v.traceIs(E,P),z=m.select(O).select("g.legendpoints").selectAll("path.legend"+P).data(D?[A]:[]);if(z.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),z.exit().remove(),z.size()){var N=(E.marker||{}).line,V=k(d(N.width,S.pts),N,5,2),X=b.minExtend(E,{marker:{line:{width:V}}});X.marker.line.color=N.color;var J=b.minExtend(S,{trace:X});t(z,J,X)}}l.each(function(A){var O=m.select(this),P=b.ensureSingle(O,"g","layers");P.style("opacity",A[0].trace.opacity);var S=g.valign,E=A[0].lineHeight,D=A[0].height;P.attr("transform","middle"!==S&&E&&D?h(0,{top:1,bottom:-1}[S]*(.5*(E-D+3))):null),P.selectAll("g.legendfill").data([A]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([A]).enter().append("g").classed("legendlines",!0);var N=P.selectAll("g.legendsymbols").data([A]);N.enter().append("g").classed("legendsymbols",!0),N.selectAll("g.legendpoints").data([A]).enter().append("g").classed("legendpoints",!0)}).each(function(A){var O,P=A[0].trace,S=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":S=[["M-15,-2V4H15V-2Z"]],O=!0;break;case"choropleth":case"choroplethmapbox":S=[["M-6,-6V6H6V-6Z"]],O=!0;break;case"densitymapbox":S=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],O="radial";break;case"cone":S=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],O=!1;break;case"streamtube":S=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],O=!1;break;case"surface":S=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],O=!0;break;case"mesh3d":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],O=!1;break;case"volume":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],O=!0;break;case"isosurface":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],O=!1}var E=m.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(S);E.enter().append("path").classed("legend3dandfriends",!0).attr("transform",_).style("stroke-miterlimit",1),E.exit().remove(),E.each(function(D,z){var N,V=m.select(this),X=r(P),J=X.colorscale,G=X.reversescale;if(J){if(!O){var Z=J.length;N=0===z?J[G?Z-1:0][1]:1===z?J[G?0:Z-1][1]:J[Math.floor((Z-1)/2)][1]}}else{var re=P.vertexcolor||P.facecolor||P.color;N=b.isArrayOrTypedArray(re)?re[z]||re[0]:re}V.attr("d",D[0]),N?V.call(n.fill,N):V.call(function(j){j.size()&&e.gradient(j,p,"legendfill-"+P.uid,i(G,"radial"===O),J,"fill")})})}).each(function(A){var O=A[0].trace,P="waterfall"===O.type;if(A[0]._distinct&&P){var S=A[0].trace[A[0].dir].marker;return A[0].mc=S.color,A[0].mlw=S.line.width,A[0].mlc=S.line.color,w(A,this,"waterfall")}var E=[];O.visible&&P&&(E=A[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var D=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(E);D.enter().append("path").classed("legendwaterfall",!0).attr("transform",_).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(z){var N=m.select(this),V=O[z[0]].marker,X=k(void 0,V.line,5,2);N.attr("d",z[1]).style("stroke-width",X+"px").call(n.fill,V.color),X&&N.call(n.stroke,V.line.color)})}).each(function(A){w(A,this,"funnel")}).each(function(A){w(A,this)}).each(function(A){var O=A[0].trace,P=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data(O.visible&&v.traceIs(O,"box-violin")?[A]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),P.exit().remove(),P.each(function(){var S=m.select(this);if("all"!==O.boxpoints&&"all"!==O.points||0!==n.opacity(O.fillcolor)||0!==n.opacity((O.line||{}).color)){var E=k(void 0,O.line,5,2);S.style("stroke-width",E+"px").call(n.fill,O.fillcolor),E&&n.stroke(S,O.line.color)}else{var D=b.minExtend(O,{marker:{size:x?12:b.constrain(O.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(e.pointStyle,D,p)}})}).each(function(A){C(A,this,"funnelarea")}).each(function(A){C(A,this,"pie")}).each(function(A){var O,P,S=s(A),E=S.showFill,D=S.showLine,z=S.showGradientLine,N=S.showGradientFill,V=S.anyFill,X=S.anyLine,J=A[0],G=J.trace,Z=r(G),re=Z.colorscale,j=Z.reversescale,B=o.hasMarkers(G)||!V?"M5,0":X?"M5,-2":"M5,-3",H=m.select(this),ee=H.select(".legendfill").selectAll("path").data(E||N?[A]:[]);if(ee.enter().append("path").classed("js-fill",!0),ee.exit().remove(),ee.attr("d",B+"h"+f+"v6h-"+f+"z").call(function(q){q.size()&&(E?e.fillGroupStyle(q,p):e.gradient(q,p,"legendfill-"+G.uid,i(j),re,"fill"))}),D||z){var U=k(void 0,G.line,10,5);P=b.minExtend(G,{line:{width:U}}),O=[b.minExtend(J,{trace:P})]}var $=H.select(".legendlines").selectAll("path").data(D||z?[O]:[]);$.enter().append("path").classed("js-line",!0),$.exit().remove(),$.attr("d",B+(z?"l"+f+",0.0001":"h"+f)).call(D?e.lineGroupStyle:function(q){if(q.size()){var te="legendline-"+G.uid;e.lineGroupStyle(q),e.gradient(q,p,te,i(j),re,"stroke")}})}).each(function(A){var O,P,S=s(A),z=S.showLine,N=S.showMarker,V=A[0],X=V.trace,J=!N&&!S.anyLine&&!S.anyFill&&o.hasText(X);function G($,q,te,ne){var se=b.nestedProperty(X,$).get(),ie=b.isArrayOrTypedArray(se)&&q?q(se):se;if(x&&ie&&void 0!==ne&&(ie=ne),te){if(ie<te[0])return te[0];if(ie>te[1])return te[1]}return ie}function Z($){return V._distinct&&V.index&&$[V.index]?$[V.index]:$[0]}if(N||J||z){var re={},j={};if(N){re.mc=G("marker.color",Z),re.mx=G("marker.symbol",Z),re.mo=G("marker.opacity",b.mean,[.2,1]),re.mlc=G("marker.line.color",Z),re.mlw=G("marker.line.width",b.mean,[0,5],2),j.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var B=G("marker.size",b.mean,[2,16],12);re.ms=B,j.marker.size=B}z&&(j.line={width:G("line.width",Z,[0,10],5)}),J&&(re.tx="Aa",re.tp=G("textposition",Z),re.ts=10,re.tc=G("textfont.color",Z),re.tf=G("textfont.family",Z)),O=[b.minExtend(V,re)],(P=b.minExtend(X,j)).selectedpoints=null,P.texttemplate=null}var H=m.select(this).select("g.legendpoints"),ee=H.selectAll("path.scatterpts").data(N?O:[]);ee.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",_),ee.exit().remove(),ee.call(e.pointStyle,P,p),N&&(O[0].mrc=3);var U=H.selectAll("g.pointtext").data(J?O:[]);U.enter().append("g").classed("pointtext",!0).append("text").attr("transform",_),U.exit().remove(),U.selectAll("text").call(e.textPointStyle,P,p)}).each(function(A){var O=A[0].trace,P=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(O.visible&&"candlestick"===O.type?[A,A]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(S,E){return E?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",_).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var D=m.select(this),z=O[E?"increasing":"decreasing"],N=k(void 0,z.line,5,2);D.style("stroke-width",N+"px").call(n.fill,z.fillcolor),N&&n.stroke(D,z.line.color)})}).each(function(A){var O=A[0].trace,P=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(O.visible&&"ohlc"===O.type?[A,A]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(S,E){return E?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",_).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var D=m.select(this),z=O[E?"increasing":"decreasing"],N=k(void 0,z.line,5,2);D.style("fill","none").call(e.dashLine,z.line.dash,N),N&&n.stroke(D,z.line.color)})})}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(y,Q,K){"use strict";y("./constants"),Q.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../plots/plots"),b=y("../../plots/cartesian/axis_ids"),h=y("../../fonts/ploticon"),e=y("../shapes/draw").eraseActiveShape,n=y("../../lib"),r=n._,o=Q.exports={};function t(u,x){var f,T,_=x.currentTarget,k=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,C=u._fullLayout,A={},O=b.list(u,null,!0),P=C._cartesianSpikesEnabled;if("zoom"===k){var S,E="in"===w?.5:2,D=(1+E)/2,z=(1-E)/2;for(T=0;T<O.length;T++)if(!(f=O[T]).fixedrange)if(S=f._name,"auto"===w)A[S+".autorange"]=!0;else if("reset"===w){if(void 0===f._rangeInitial)A[S+".autorange"]=!0;else{var N=f._rangeInitial.slice();A[S+".range[0]"]=N[0],A[S+".range[1]"]=N[1]}void 0!==f._showSpikeInitial&&(A[S+".showspikes"]=f._showSpikeInitial,"on"!==P||f._showSpikeInitial||(P="off"))}else{var V=[f.r2l(f.range[0]),f.r2l(f.range[1])],X=[D*V[0]+z*V[1],D*V[1]+z*V[0]];A[S+".range[0]"]=f.l2r(X[0]),A[S+".range[1]"]=f.l2r(X[1])}}else"hovermode"!==k||"x"!==w&&"y"!==w||_.setAttribute("data-val",w=C._isHoriz?"y":"x"),A[k]=w;C._cartesianSpikesEnabled=P,m.call("_guiRelayout",u,A)}function d(u,x){for(var f=x.currentTarget,T=f.getAttribute("data-attr"),_=f.getAttribute("data-val")||!0,k=u._fullLayout._subplots.gl3d||[],w={},C=T.split("."),A=0;A<k.length;A++)w[k[A]+"."+C[1]]=_;w.dragmode="pan"===_?_:"zoom",m.call("_guiRelayout",u,w)}function a(u,x){for(var f=x.currentTarget.getAttribute("data-attr"),T="resetLastSave"===f,_="resetDefault"===f,k=u._fullLayout,w=k._subplots.gl3d||[],C={},A=0;A<w.length;A++){var O,P=w[A],S=P+".camera",E=P+".aspectratio",D=P+".aspectmode",z=k[P]._scene;T?(C[S+".up"]=z.viewInitial.up,C[S+".eye"]=z.viewInitial.eye,C[S+".center"]=z.viewInitial.center,O=!0):_&&(C[S+".up"]=null,C[S+".eye"]=null,C[S+".center"]=null,O=!0),O&&(C[E+".x"]=z.viewInitial.aspectratio.x,C[E+".y"]=z.viewInitial.aspectratio.y,C[E+".z"]=z.viewInitial.aspectratio.z,C[D]=z.viewInitial.aspectmode)}m.call("_guiRelayout",u,C)}function i(u,x){var f=x.currentTarget,T=f._previousVal,_=u._fullLayout,k=_._subplots.gl3d||[],w=["xaxis","yaxis","zaxis"],C={},A={};if(T)A=T,f._previousVal=null;else{for(var O=0;O<k.length;O++){var P=k[O],S=_[P],E=P+".hovermode";C[E]=S.hovermode,A[E]=!1;for(var D=0;D<3;D++){var z=w[D],N=P+"."+z+".showspikes";A[N]=!1,C[N]=S[z].showspikes}}f._previousVal=C}return A}function s(u,x){for(var f=x.currentTarget,T=f.getAttribute("data-attr"),_=f.getAttribute("data-val")||!0,k=u._fullLayout,w=k._subplots.geo||[],C=0;C<w.length;C++){var A=w[C];if("zoom"===T){var P=k[A].projection.scale;m.call("_guiRelayout",u,A+".projection.scale","in"===_?2*P:.5*P)}}"reset"===T&&g(u,"geo")}function c(u){var x=u._fullLayout;return!x.hovermode&&(x._has("cartesian")?x._isHoriz?"y":"x":"closest")}function l(u){var x=c(u);m.call("_guiRelayout",u,"hovermode",x)}function p(u,x){for(var f=x.currentTarget.getAttribute("data-val"),T=u._fullLayout,_=T._subplots.mapbox||[],k={},w=0;w<_.length;w++){var C=_[w],A=T[C].zoom;k[C+".zoom"]="in"===f?1.05*A:A/1.05}m.call("_guiRelayout",u,k)}function g(u,x){for(var f=u._fullLayout,T=f._subplots[x]||[],_={},k=0;k<T.length;k++)for(var w=T[k],C=f[w]._subplot.viewInitial,A=Object.keys(C),O=0;O<A.length;O++){var P=A[O];_[w+"."+P]=C[P]}m.call("_guiRelayout",u,_)}o.toImage={name:"toImage",title:function(u){return r(u,"png"===((u._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:h.camera,click:function(u){var x=u._context.toImageButtonOptions,f={format:x.format||"png"};n.notifier(r(u,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==f.format&&n.isIE()&&(n.notifier(r(u,"IE only supports svg.  Changing format to svg."),"long"),f.format="svg"),["filename","width","height","scale"].forEach(function(T){T in x&&(f[T]=x[T])}),m.call("downloadImage",u,f).then(function(T){n.notifier(r(u,"Snapshot succeeded")+" - "+T,"long")}).catch(function(){n.notifier(r(u,"Sorry, there was a problem downloading your snapshot!"),"long")})}},o.sendDataToCloud={name:"sendDataToCloud",title:function(u){return r(u,"Edit in Chart Studio")},icon:h.disk,click:function(u){v.sendDataToCloud(u)}},o.editInChartStudio={name:"editInChartStudio",title:function(u){return r(u,"Edit in Chart Studio")},icon:h.pencil,click:function(u){v.sendDataToCloud(u)}},o.zoom2d={name:"zoom2d",_cat:"zoom",title:function(u){return r(u,"Zoom")},attr:"dragmode",val:"zoom",icon:h.zoombox,click:t},o.pan2d={name:"pan2d",_cat:"pan",title:function(u){return r(u,"Pan")},attr:"dragmode",val:"pan",icon:h.pan,click:t},o.select2d={name:"select2d",_cat:"select",title:function(u){return r(u,"Box Select")},attr:"dragmode",val:"select",icon:h.selectbox,click:t},o.lasso2d={name:"lasso2d",_cat:"lasso",title:function(u){return r(u,"Lasso Select")},attr:"dragmode",val:"lasso",icon:h.lasso,click:t},o.drawclosedpath={name:"drawclosedpath",title:function(u){return r(u,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:h.drawclosedpath,click:t},o.drawopenpath={name:"drawopenpath",title:function(u){return r(u,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:h.drawopenpath,click:t},o.drawline={name:"drawline",title:function(u){return r(u,"Draw line")},attr:"dragmode",val:"drawline",icon:h.drawline,click:t},o.drawrect={name:"drawrect",title:function(u){return r(u,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:h.drawrect,click:t},o.drawcircle={name:"drawcircle",title:function(u){return r(u,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:h.drawcircle,click:t},o.eraseshape={name:"eraseshape",title:function(u){return r(u,"Erase active shape")},icon:h.eraseshape,click:e},o.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(u){return r(u,"Zoom in")},attr:"zoom",val:"in",icon:h.zoom_plus,click:t},o.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(u){return r(u,"Zoom out")},attr:"zoom",val:"out",icon:h.zoom_minus,click:t},o.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(u){return r(u,"Autoscale")},attr:"zoom",val:"auto",icon:h.autoscale,click:t},o.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(u){return r(u,"Reset axes")},attr:"zoom",val:"reset",icon:h.home,click:t},o.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(u){return r(u,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:h.tooltip_basic,gravity:"ne",click:t},o.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(u){return r(u,"Compare data on hover")},attr:"hovermode",val:function(u){return u._fullLayout._isHoriz?"y":"x"},icon:h.tooltip_compare,gravity:"ne",click:t},o.zoom3d={name:"zoom3d",_cat:"zoom",title:function(u){return r(u,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:h.zoombox,click:d},o.pan3d={name:"pan3d",_cat:"pan",title:function(u){return r(u,"Pan")},attr:"scene.dragmode",val:"pan",icon:h.pan,click:d},o.orbitRotation={name:"orbitRotation",title:function(u){return r(u,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:h["3d_rotate"],click:d},o.tableRotation={name:"tableRotation",title:function(u){return r(u,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:h["z-axis"],click:d},o.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(u){return r(u,"Reset camera to default")},attr:"resetDefault",icon:h.home,click:a},o.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(u){return r(u,"Reset camera to last save")},attr:"resetLastSave",icon:h.movie,click:a},o.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(u){return r(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:h.tooltip_basic,gravity:"ne",click:function(u,x){var f=i(u,x);m.call("_guiRelayout",u,f)}},o.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(u){return r(u,"Zoom in")},attr:"zoom",val:"in",icon:h.zoom_plus,click:s},o.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(u){return r(u,"Zoom out")},attr:"zoom",val:"out",icon:h.zoom_minus,click:s},o.resetGeo={name:"resetGeo",_cat:"reset",title:function(u){return r(u,"Reset")},attr:"reset",val:null,icon:h.autoscale,click:s},o.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(u){return r(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:h.tooltip_basic,gravity:"ne",click:l},o.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(u){return r(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:h.tooltip_basic,gravity:"ne",click:l},o.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(u){return r(u,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:h.tooltip_basic,gravity:"ne",click:l},o.resetViewSankey={name:"resetSankeyGroup",title:function(u){return r(u,"Reset view")},icon:h.home,click:function(u){for(var x={"node.groups":[],"node.x":[],"node.y":[]},f=0;f<u._fullData.length;f++){var T=u._fullData[f]._viewInitial;x["node.groups"].push(T.node.groups.slice()),x["node.x"].push(T.node.x.slice()),x["node.y"].push(T.node.y.slice())}m.call("restyle",u,x)}},o.toggleHover={name:"toggleHover",title:function(u){return r(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:h.tooltip_basic,gravity:"ne",click:function(u,x){var f=i(u,x);f.hovermode=c(u),m.call("_guiRelayout",u,f)}},o.resetViews={name:"resetViews",title:function(u){return r(u,"Reset views")},icon:h.home,click:function(u,x){var f=x.currentTarget;f.setAttribute("data-attr","zoom"),f.setAttribute("data-val","reset"),t(u,x),f.setAttribute("data-attr","resetLastSave"),a(u,x),g(u,"geo"),g(u,"mapbox")}},o.toggleSpikelines={name:"toggleSpikelines",title:function(u){return r(u,"Toggle Spike Lines")},icon:h.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(u){var x=u._fullLayout;x._cartesianSpikesEnabled="on"===x._cartesianSpikesEnabled?"off":"on",m.call("_guiRelayout",u,function(T){for(var _="on"===T._fullLayout._cartesianSpikesEnabled,k=b.list(T,null,!0),w={},C=0;C<k.length;C++){var A=k[C];w[A._name+".showspikes"]=!!_||A._showSpikeInitial}return w}(u))}},o.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(u){return r(u,"Reset view")},attr:"reset",icon:h.home,click:function(u){g(u,"mapbox")}},o.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(u){return r(u,"Zoom in")},attr:"zoom",val:"in",icon:h.zoom_plus,click:p},o.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(u){return r(u,"Zoom out")},attr:"zoom",val:"out",icon:h.zoom_minus,click:p}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(y,Q,K){"use strict";var m=y("./buttons"),v=Object.keys(m),b=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],h=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(b),e=[];v.forEach(function(n){!function(r){if(-1===h.indexOf(r._cat||r.name)){var o=r.name,t=(r._cat||r.name).toLowerCase();-1===e.indexOf(o)&&e.push(o),-1===e.indexOf(t)&&e.push(t)}}(m[n])}),e.sort(),Q.exports={DRAW_MODES:b,backButtons:h,foreButtons:e}},{"./buttons":427}],429:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../color"),b=y("../../plot_api/plot_template"),h=y("./attributes");Q.exports=function(e,n){var r=e.modebar||{},o=b.newContainer(n,"modebar");function t(a,i){return m.coerce(r,o,h,a,i)}t("orientation"),t("bgcolor",v.addOpacity(n.paper_bgcolor,.5));var d=v.contrast(v.rgb(n.modebar.bgcolor));t("color",v.addOpacity(d,.3)),t("activecolor",v.addOpacity(d,.7)),t("uirevision",n.uirevision),t("add"),t("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(y,Q,K){"use strict";Q.exports={moduleType:"component",name:"modebar",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),manage:y("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axis_ids"),v=y("../../traces/scatter/subtypes"),b=y("../../registry"),h=y("../fx/helpers").isUnifiedHover,e=y("./modebar"),n=y("./buttons"),r=y("./constants").DRAW_MODES,o=y("../../lib").extendDeep;Q.exports=function(t){var d=t._fullLayout,a=t._context,i=d._modeBar;if(a.displayModeBar||a.watermark){if(!Array.isArray(a.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(a.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s,c=a.modeBarButtons;s=Array.isArray(c)&&c.length?function(l){for(var p=o([],l),g=0;g<p.length;g++)for(var u=p[g],x=0;x<u.length;x++){var f=u[x];if("string"==typeof f){if(void 0===n[f])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));p[g][x]=n[f]}}return p}(c):!a.displayModeBar&&a.watermark?[]:function(l){var p=l._fullLayout,g=l._fullData,u=l._context;function x(se,ie){if("string"==typeof ie){if(ie.toLowerCase()===se.toLowerCase())return!0}else if(ie.name===se||(ie._cat||ie.name)===se.toLowerCase())return!0;return!1}var f=p.modebar.add;"string"==typeof f&&(f=[f]);var T=p.modebar.remove;"string"==typeof T&&(T=[T]);var _=u.modeBarButtonsToAdd.concat(f.filter(function(se){for(var ie=0;ie<u.modeBarButtonsToRemove.length;ie++)if(x(se,u.modeBarButtonsToRemove[ie]))return!1;return!0})),k=u.modeBarButtonsToRemove.concat(T.filter(function(se){for(var ie=0;ie<u.modeBarButtonsToAdd.length;ie++)if(x(se,u.modeBarButtonsToAdd[ie]))return!1;return!0})),w=p._has("cartesian"),C=p._has("gl3d"),A=p._has("geo"),O=p._has("pie"),P=p._has("funnelarea"),S=p._has("gl2d"),E=p._has("ternary"),D=p._has("mapbox"),z=p._has("polar"),N=p._has("smith"),V=p._has("sankey"),X=function(se){for(var ie=m.list({_fullLayout:se},null,!0),ue=0;ue<ie.length;ue++)if(!ie[ue].fixedrange)return!1;return!0}(p),J=h(p.hovermode),G=[];function Z(se){if(se.length){for(var ie=[],ue=0;ue<se.length;ue++){for(var le=se[ue],de=n[le],be=de.name.toLowerCase(),_e=(de._cat||de.name).toLowerCase(),xe=!1,Ee=0;Ee<k.length;Ee++){var he=k[Ee].toLowerCase();if(he===be||he===_e){xe=!0;break}}xe||ie.push(n[le])}G.push(ie)}}var re=["toImage"];u.showEditInChartStudio?re.push("editInChartStudio"):u.showSendToCloud&&re.push("sendDataToCloud"),Z(re);var j=[],B=[],H=[],ee=[];(w||S||O||P||E)+A+C+D+z+N>1?(B=["toggleHover"],H=["resetViews"]):A?(j=["zoomInGeo","zoomOutGeo"],B=["hoverClosestGeo"],H=["resetGeo"]):C?(B=["hoverClosest3d"],H=["resetCameraDefault3d","resetCameraLastSave3d"]):D?(j=["zoomInMapbox","zoomOutMapbox"],B=["toggleHover"],H=["resetViewMapbox"]):S?B=["hoverClosestGl2d"]:O?B=["hoverClosestPie"]:V?(B=["hoverClosestCartesian","hoverCompareCartesian"],H=["resetViewSankey"]):B=["toggleHover"],w&&(B=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(se){for(var ie=0;ie<se.length;ie++)if(!b.traceIs(se[ie],"noHover"))return!1;return!0}(g)||J)&&(B=[]),!w&&!S||X||(j=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==H[0]&&(H=["resetScale2d"])),C?ee=["zoom3d","pan3d","orbitRotation","tableRotation"]:(w||S)&&!X||E?ee=["zoom2d","pan2d"]:D||A?ee=["pan2d"]:z&&(ee=["zoom2d"]),function(se){for(var ie=!1,ue=0;ue<se.length&&!ie;ue++){var le=se[ue];le._module&&le._module.selectPoints&&(b.traceIs(le,"scatter-like")?(v.hasMarkers(le)||v.hasText(le))&&(ie=!0):b.traceIs(le,"box-violin")&&"all"!==le.boxpoints&&"all"!==le.points||(ie=!0))}return ie}(g)&&ee.push("select2d","lasso2d");var U=[],$=function(se){-1===U.indexOf(se)&&-1!==B.indexOf(se)&&U.push(se)};if(Array.isArray(_)){for(var q=[],te=0;te<_.length;te++){var ne=_[te];"string"==typeof ne?(ne=ne.toLowerCase(),-1!==r.indexOf(ne)?(p._has("mapbox")||p._has("cartesian"))&&ee.push(ne):"togglespikelines"===ne?$("toggleSpikelines"):"togglehover"===ne?$("toggleHover"):"hovercompare"===ne?$("hoverCompareCartesian"):"hoverclosest"===ne?($("hoverClosestCartesian"),$("hoverClosestGeo"),$("hoverClosest3d"),$("hoverClosestGl2d"),$("hoverClosestPie")):"v1hovermode"===ne&&($("toggleHover"),$("hoverClosestCartesian"),$("hoverCompareCartesian"),$("hoverClosestGeo"),$("hoverClosest3d"),$("hoverClosestGl2d"),$("hoverClosestPie"))):q.push(ne)}_=q}return Z(ee),Z(j.concat(H)),Z(U),function(se,ie){if(ie.length)if(Array.isArray(ie[0]))for(var ue=0;ue<ie.length;ue++)se.push(ie[ue]);else se.push(ie);return se}(G,_)}(t),i?i.update(t,s):d._modeBar=e(t,s)}else i&&(i.destroy(),delete d._modeBar)}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=y("../../lib"),h=y("../../fonts/ploticon"),e=y("../../version").version,n=new DOMParser;function r(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var o=r.prototype;o.update=function(t,d){this.graphInfo=t;var a=this.graphInfo._context,i=this.graphInfo._fullLayout,s="modebar-"+i._uid;this.element.setAttribute("id",s),this._uid=s,this.element.className="modebar","hover"===a.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===i.modebar.orientation&&(this.element.className+=" vertical",d=d.reverse());var c=i.modebar,l="hover"===a.displayModeBar?".js-plotly-plot .plotly:hover ":"";b.deleteRelatedStyleRule(s),b.addRelatedStyleRule(s,l+"#"+s+" .modebar-group","background-color: "+c.bgcolor),b.addRelatedStyleRule(s,"#"+s+" .modebar-btn .icon path","fill: "+c.color),b.addRelatedStyleRule(s,"#"+s+" .modebar-btn:hover .icon path","fill: "+c.activecolor),b.addRelatedStyleRule(s,"#"+s+" .modebar-btn.active .icon path","fill: "+c.activecolor);var p=!this.hasButtons(d),g=this.hasLogo!==a.displaylogo,u=this.locale!==a.locale;if(this.locale=a.locale,(p||g||u)&&(this.removeAllButtons(),this.updateButtons(d),a.watermark||a.displaylogo)){var x=this.getLogo();a.watermark&&(x.className=x.className+" watermark"),"v"===i.modebar.orientation?this.element.insertBefore(x,this.element.childNodes[0]):this.element.appendChild(x),this.hasLogo=!0}this.updateActiveButton()},o.updateButtons=function(t){var d=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(a){var i=d.createGroup();a.forEach(function(s){var c=s.name;if(!c)throw new Error("must provide button 'name' in button config");if(-1!==d.buttonsNames.indexOf(c))throw new Error("button name '"+c+"' is taken");d.buttonsNames.push(c);var l=d.createButton(s);d.buttonElements.push(l),i.appendChild(l)}),d.element.appendChild(i)})},o.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},o.createButton=function(t){var d=this,a=document.createElement("a");a.setAttribute("rel","tooltip"),a.className="modebar-btn";var i=t.title;void 0===i?i=t.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&a.setAttribute("data-title",i),void 0!==t.attr&&a.setAttribute("data-attr",t.attr);var s=t.val;if(void 0!==s&&("function"==typeof s&&(s=s(this.graphInfo)),a.setAttribute("data-val",s)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");a.addEventListener("click",function(l){t.click(d.graphInfo,l),d.updateActiveButton(l.currentTarget)}),a.setAttribute("data-toggle",t.toggle||!1),t.toggle&&m.select(a).classed("active",!0);var c=t.icon;return a.appendChild("function"==typeof c?c():this.createIcon(c||h.question)),a.setAttribute("data-gravity",t.gravity||"n"),a},o.createIcon=function(t){var d,a=v(t.height)?Number(t.height):t.ascent-t.descent,i="http://www.w3.org/2000/svg";if(t.path){(d=document.createElementNS(i,"svg")).setAttribute("viewBox",[0,0,t.width,a].join(" ")),d.setAttribute("class","icon");var s=document.createElementNS(i,"path");s.setAttribute("d",t.path),t.transform?s.setAttribute("transform",t.transform):void 0!==t.ascent&&s.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),d.appendChild(s)}return t.svg&&(d=n.parseFromString(t.svg,"application/xml").childNodes[0]),d.setAttribute("height","1em"),d.setAttribute("width","1em"),d},o.updateActiveButton=function(t){var d=this.graphInfo._fullLayout,a=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var s=i.getAttribute("data-val")||!0,c=i.getAttribute("data-attr"),l="true"===i.getAttribute("data-toggle"),p=m.select(i);if(l)c===a&&p.classed("active",!p.classed("active"));else{var g=null===c?c:b.nestedProperty(d,c).get();p.classed("active",g===s)}})},o.hasButtons=function(t){var d=this.buttons;if(!d||t.length!==d.length)return!1;for(var a=0;a<t.length;++a){if(t[a].length!==d[a].length)return!1;for(var i=0;i<t[a].length;i++)if(t[a][i].name!==d[a][i].name)return!1}return!0},o.getLogo=function(){var t=this.createGroup(),d=document.createElement("a");return d.href="https://plotly.com/",d.target="_blank",d.setAttribute("data-title",b._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),d.className="modebar-btn plotlyjsicon modebar-btn--logo",d.appendChild(this.createIcon(h.newplotlylogo)),t.appendChild(d),t},o.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},o.destroy=function(){b.removeElement(this.container.querySelector(".modebar")),b.deleteRelatedStyleRule(this._uid)},Q.exports=function(t,d){var a=t._fullLayout,i=new r({graphInfo:t,container:a._modebardiv.node(),buttons:d});return a._privateplot&&m.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(y,Q,K){"use strict";var m=y("../../plots/font_attributes"),v=y("../color/attributes"),b=(0,y("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});Q.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:m({editType:"plot"}),bgcolor:{valType:"color",dflt:v.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(y,Q,K){"use strict";Q.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../color"),b=y("../../plot_api/plot_template"),h=y("../../plots/array_container_defaults"),e=y("./attributes"),n=y("./constants");function r(o,t,d,a){var i=a.calendar;function s(l,p){return m.coerce(o,t,e.buttons,l,p)}if(s("visible")){var c=s("step");"all"!==c&&(!i||"gregorian"===i||"month"!==c&&"year"!==c?s("stepmode"):t.stepmode="backward",s("count")),s("label")}}Q.exports=function(o,t,d,a,i){var s=o.rangeselector||{},c=b.newContainer(t,"rangeselector");function l(u,x){return m.coerce(s,c,e,u,x)}if(l("visible",h(s,c,{name:"buttons",handleItemDefaults:r,calendar:i}).length>0)){var p=function(u,x,f){for(var T=f.filter(function(C){return x[C].anchor===u._id}),_=0,k=0;k<T.length;k++){var w=x[T[k]].domain;w&&(_=Math.max(w[1],_))}return[u.domain[0],_+n.yPad]}(t,d,a);l("x",p[0]),l("y",p[1]),m.noneOrAll(o,t,["x","y"]),l("xanchor"),l("yanchor"),m.coerceFont(l,"font",d.font);var g=l("bgcolor");l("activecolor",v.contrast(g,n.lightAmount,n.darkAmount)),l("bordercolor"),l("borderwidth")}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../registry"),b=y("../../plots/plots"),h=y("../color"),e=y("../drawing"),n=y("../../lib"),r=n.strTranslate,o=y("../../lib/svg_text_utils"),t=y("../../plots/cartesian/axis_ids"),d=y("../../constants/alignment"),a=d.LINE_SPACING,i=d.FROM_TL,s=d.FROM_BR,c=y("./constants"),l=y("./get_update_object");function p(x){return x._id}function g(x,f,T){var k,w,_=n.ensureSingle(x,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});_.attr({rx:c.rx,ry:c.ry}),_.call(h.stroke,f.bordercolor).call(h.fill,(k=f,w=T,w._isActive||w._isHovered?k.activecolor:k.bgcolor)).style("stroke-width",f.borderwidth+"px")}function u(x,f,T,_){var k,w;n.ensureSingle(x,"text","selector-text",function(k){k.attr("text-anchor","middle")}).call(e.font,f.font).text((k=T,w=_._fullLayout._meta,k.label?w?n.templateString(k.label,w):k.label:"all"===k.step?"all":k.count+k.step.charAt(0))).call(function(k){o.convertToTspans(k,_)})}Q.exports=function(x){var f=x._fullLayout._infolayer.selectAll(".rangeselector").data(function(T){for(var _=t.list(T,"x",!0),k=[],w=0;w<_.length;w++){var C=_[w];C.rangeselector&&C.rangeselector.visible&&k.push(C)}return k}(x),p);f.enter().append("g").classed("rangeselector",!0),f.exit().remove(),f.style({cursor:"pointer","pointer-events":"all"}),f.each(function(T){var _=m.select(this),k=T,w=k.rangeselector,C=_.selectAll("g.button").data(n.filterVisible(w.buttons));C.enter().append("g").classed("button",!0),C.exit().remove(),C.each(function(A){var O=m.select(this),P=l(k,A);A._isActive=function(S,E,D){if("all"===E.step)return!0===S.autorange;var z=Object.keys(D);return S.range[0]===D[z[0]]&&S.range[1]===D[z[1]]}(k,A,P),O.call(g,w,A),O.call(u,w,A,x),O.on("click",function(){x._dragged||v.call("_guiRelayout",x,P)}),O.on("mouseover",function(){A._isHovered=!0,O.call(g,w,A)}),O.on("mouseout",function(){A._isHovered=!1,O.call(g,w,A)})}),function(A,O,P,S,E){var D=0,z=0,N=P.borderwidth;O.each(function(){var re=m.select(this).select(".selector-text"),B=Math.max(P.font.size*a*o.lineCount(re),16)+3;z=Math.max(z,B)}),O.each(function(){var re=m.select(this),j=re.select(".selector-rect"),B=re.select(".selector-text"),H=B.node()&&e.bBox(B.node()).width,ee=P.font.size*a,U=o.lineCount(B),$=Math.max(H+10,c.minButtonWidth);re.attr("transform",r(N+D,N)),j.attr({x:0,y:0,width:$,height:z}),o.positionText(B,$/2,z/2-(U-1)*ee/2+3),D+=$+5});var V=A._fullLayout._size,X=V.l+V.w*P.x,J=V.t+V.h*(1-P.y),G="left";n.isRightAnchor(P)&&(X-=D,G="right"),n.isCenterAnchor(P)&&(X-=D/2,G="center");var Z="top";n.isBottomAnchor(P)&&(J-=z,Z="bottom"),n.isMiddleAnchor(P)&&(J-=z/2,Z="middle"),D=Math.ceil(D),z=Math.ceil(z),X=Math.round(X),J=Math.round(J),b.autoMargin(A,S+"-range-selector",{x:P.x,y:P.y,l:D*i[G],r:D*s[G],b:z*s[Z],t:z*i[Z]}),E.attr("transform",r(X,J))}(x,C,w,k._name,_)})}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(y,Q,K){"use strict";var m=y("d3-time"),v=y("../../lib").titleCase;Q.exports=function(b,h){var e=b._name,n={};if("all"===h.step)n[e+".autorange"]=!0;else{var r=function(o,t){var d,a=o.range,i=new Date(o.r2l(a[1])),c=m["utc"+v(t.step)],l=t.count;switch(t.stepmode){case"backward":d=o.l2r(+c.offset(i,-l));break;case"todate":var p=c.offset(i,-l);d=o.l2r(+c.ceil(p))}return[d,a[1]]}(b,h);n[e+".range[0]"]=r[0],n[e+".range[1]"]=r[1]}return n}},{"../../lib":515,"d3-time":122}],438:[function(y,Q,K){"use strict";Q.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:y("./attributes")}}},layoutAttributes:y("./attributes"),handleDefaults:y("./defaults"),draw:y("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(y,Q,K){"use strict";var m=y("../color/attributes");Q.exports={bgcolor:{valType:"color",dflt:m.background,editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axis_ids").list,v=y("../../plots/cartesian/autorange").getAutoRange,b=y("./constants");Q.exports=function(h){for(var e=m(h,"x",!0),n=0;n<e.length;n++){var r=e[n],o=r[b.name];o&&o.visible&&o.autorange&&(o._input.autorange=!0,o._input.range=o.range=v(h,r))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(y,Q,K){"use strict";Q.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plot_api/plot_template"),b=y("../../plots/cartesian/axis_ids"),h=y("./attributes"),e=y("./oppaxis_attributes");Q.exports=function(n,r,o){var t=n[o],d=r[o];if(t.rangeslider||r._requestRangeslider[d._id]){m.isPlainObject(t.rangeslider)||(t.rangeslider={});var a,i,s=t.rangeslider,c=v.newContainer(d,"rangeslider");if(_("visible")){_("bgcolor",r.plot_bgcolor),_("bordercolor"),_("borderwidth"),_("thickness"),_("autorange",!d.isValidRange(s.range)),_("range");var l=r._subplots;if(l)for(var p=l.cartesian.filter(function(w){return w.substr(0,w.indexOf("y"))===b.name2id(o)}).map(function(w){return w.substr(w.indexOf("y"),w.length)}),g=m.simpleMap(p,b.id2name),u=0;u<g.length;u++){var x=g[u];a=s[x]||{},i=v.newContainer(c,x,"yaxis");var f,T=r[x];a.range&&T.isValidRange(a.range)&&(f="fixed"),"match"!==k("rangemode",f)&&k("range",T.range.slice())}c._input=s}}function _(w,C){return m.coerce(s,c,h,w,C)}function k(w,C){return m.coerce(a,i,e,w,C)}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../registry"),b=y("../../plots/plots"),h=y("../../lib"),e=h.strTranslate,n=y("../drawing"),r=y("../color"),o=y("../titles"),t=y("../../plots/cartesian"),d=y("../../plots/cartesian/axis_ids"),a=y("../dragelement"),i=y("../../lib/setcursor"),s=y("./constants");function c(f,T,_,k){var w=h.ensureSingle(f,"rect",s.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),C=k.borderwidth%2==0?k.borderwidth:k.borderwidth-1,A=-k._offsetShift,O=n.crispRound(T,k.borderwidth);w.attr({width:k._width+C,height:k._height+C,transform:e(A,A),fill:k.bgcolor,stroke:k.bordercolor,"stroke-width":O})}function l(f,T,_,k){h.ensureSingleById(T._fullLayout._topdefs,"clipPath",k._clipId,function(C){C.append("rect").attr({x:0,y:0})}).select("rect").attr({width:k._width,height:k._height})}function p(f,T,_,k){var w,C=T.calcdata,A=f.selectAll("g."+s.rangePlotClassName).data(_._subplotsWith,h.identity);A.enter().append("g").attr("class",function(O){return s.rangePlotClassName+" "+O}).call(n.setClipUrl,k._clipId,T),A.order(),A.exit().remove(),A.each(function(O,P){var S=m.select(this),E=0===P,D=d.getFromId(T,O,"y"),z=D._name,N=k[z],V={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:k.range.slice(),calendar:_.calendar},width:k._width,height:k._height,margin:{t:0,b:0,l:0,r:0}},_context:T._context};_.rangebreaks&&(V.layout.xaxis.rangebreaks=_.rangebreaks),V.layout[z]={type:D.type,domain:[0,1],range:"match"!==N.rangemode?N.range.slice():D.range.slice(),calendar:D.calendar},D.rangebreaks&&(V.layout[z].rangebreaks=D.rangebreaks),b.supplyDefaults(V);var X=V._fullLayout.xaxis,J=V._fullLayout[z];X.clearCalc(),X.setScale(),J.clearCalc(),J.setScale();var G={id:O,plotgroup:S,xaxis:X,yaxis:J,isRangePlot:!0};E?w=G:(G.mainplot="xy",G.mainplotinfo=w),t.rangePlot(T,G,function(Z,re){for(var j=[],B=0;B<Z.length;B++){var H=Z[B],ee=H[0].trace;ee.xaxis+ee.yaxis===re&&j.push(H)}return j}(C,O))})}function g(f,T,_,k,w){h.ensureSingle(f,"rect",s.maskMinClassName,function(C){C.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(r.fill,s.maskColor),h.ensureSingle(f,"rect",s.maskMaxClassName,function(C){C.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(r.fill,s.maskColor),"match"!==w.rangemode&&(h.ensureSingle(f,"rect",s.maskMinOppAxisClassName,function(C){C.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).call(r.fill,s.maskOppAxisColor),h.ensureSingle(f,"rect",s.maskMaxOppAxisClassName,function(C){C.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).style("border-top",s.maskOppBorder).call(r.fill,s.maskOppAxisColor))}function u(f,T,_,k){T._context.staticPlot||h.ensureSingle(f,"rect",s.slideBoxClassName,function(w){w.attr({y:0,cursor:s.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:k._height,fill:s.slideBoxFill})}function x(f,T,_,k){var w=h.ensureSingle(f,"g",s.grabberMinClassName),C=h.ensureSingle(f,"g",s.grabberMaxClassName),A={x:0,width:s.handleWidth,rx:s.handleRadius,fill:r.background,stroke:r.defaultLine,"stroke-width":s.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(k._height/4),height:Math.round(k._height/2)};h.ensureSingle(w,"rect",s.handleMinClassName,function(S){S.attr(A)}).attr(O),h.ensureSingle(C,"rect",s.handleMaxClassName,function(S){S.attr(A)}).attr(O);var P={width:s.grabAreaWidth,x:0,y:0,fill:s.grabAreaFill,cursor:T._context.staticPlot?void 0:s.grabAreaCursor};h.ensureSingle(w,"rect",s.grabAreaMinClassName,function(S){S.attr(P)}).attr("height",k._height),h.ensureSingle(C,"rect",s.grabAreaMaxClassName,function(S){S.attr(P)}).attr("height",k._height)}Q.exports=function(f){for(var T=f._fullLayout,_=T._rangeSliderData,k=0;k<_.length;k++){var w=_[k][s.name];w._clipId=w._id+"-"+T._uid}var C=T._infolayer.selectAll("g."+s.containerClassName).data(_,function(A){return A._name});C.exit().each(function(A){T._topdefs.select("#"+A[s.name]._clipId).remove()}).remove(),0!==_.length&&(C.enter().append("g").classed(s.containerClassName,!0).attr("pointer-events","all"),C.each(function(A){var O=m.select(this),P=A[s.name],S=T[d.id2name(A.anchor)],E=P[d.id2name(A.anchor)];if(P.range){var D,z=h.simpleMap(P.range,A.r2l),N=h.simpleMap(A.range,A.r2l);D=N[0]<N[1]?[Math.min(z[0],N[0]),Math.max(z[1],N[1])]:[Math.max(z[0],N[0]),Math.min(z[1],N[1])],P.range=P._input.range=h.simpleMap(D,A.l2r)}A.cleanRange("rangeslider.range");var V=T._size,X=A.domain;P._width=V.w*(X[1]-X[0]);var J=Math.round(V.l+V.w*X[0]),G=Math.round(V.t+V.h*(1-A._counterDomainMin)+("bottom"===A.side?A._depth:0)+P._offsetShift+s.extraPad);O.attr("transform",e(J,G)),P._rl=h.simpleMap(P.range,A.r2l);var Z=P._rl[0],re=P._rl[1],j=re-Z;if(P.p2d=function(se){return se/P._width*j+Z},P.d2p=function(se){return(se-Z)/j*P._width},A.rangebreaks){var B=A.locateBreaks(Z,re);if(B.length){var H,ee,U=0;for(H=0;H<B.length;H++)U+=(ee=B[H]).max-ee.min;var $=P._width/(re-Z-U),q=[-$*Z];for(H=0;H<B.length;H++)q.push(q[q.length-1]-$*((ee=B[H]).max-ee.min));for(P.d2p=function(se){for(var ie=q[0],ue=0;ue<B.length;ue++){var le=B[ue];if(se>=le.max)ie=q[ue+1];else if(se<le.min)break}return ie+$*se},H=0;H<B.length;H++)(ee=B[H]).pmin=P.d2p(ee.min),ee.pmax=P.d2p(ee.max);P.p2d=function(se){for(var ie=q[0],ue=0;ue<B.length;ue++){var le=B[ue];if(se>=le.pmax)ie=q[ue+1];else if(se<le.pmin)break}return(se-ie)/$}}}if("match"!==E.rangemode){var te=S.r2l(E.range[0]),ne=S.r2l(E.range[1])-te;P.d2pOppAxis=function(se){return(se-te)/ne*P._height}}O.call(c,f,A,P).call(l,f,A,P).call(p,f,A,P).call(g,f,A,P,E).call(u,f,A,P).call(x,f,A,P),function(se,ie,ue,le){if(!ie._context.staticPlot){var de=se.select("rect."+s.slideBoxClassName).node(),be=se.select("rect."+s.grabAreaMinClassName).node(),_e=se.select("rect."+s.grabAreaMaxClassName).node();se.on("mousedown",xe),se.on("touchstart",xe)}function xe(){var Ee=m.event,he=Ee.target,me=Ee.clientX||Ee.touches[0].clientX,Se=me-se.node().getBoundingClientRect().left,Me=le.d2p(ue._rl[0]),Ie=le.d2p(ue._rl[1]),Fe=a.coverSlip();function Ne($e){var Re,ze,Ue,je=+($e.clientX||$e.touches[0].clientX)-me;switch(he){case de:Ue="ew-resize",Re=Me+je,ze=Ie+je;break;case be:Ue="col-resize",Re=Me+je,ze=Ie;break;case _e:Ue="col-resize",Re=Me,ze=Ie+je;break;default:Ue="ew-resize",Re=Se,ze=Se+je}if(ze<Re){var rt=ze;ze=Re,Re=rt}le._pixelMin=Re,le._pixelMax=ze,i(m.select(Fe),Ue),function(ut,gt,At,_t){function it(Gt){return At.l2r(h.constrain(Gt,_t._rl[0],_t._rl[1]))}var et=it(_t.p2d(_t._pixelMin)),wt=it(_t.p2d(_t._pixelMax));window.requestAnimationFrame(function(){v.call("_guiRelayout",gt,At._name+".range",[et,wt])})}(0,ie,ue,le)}function De(){Fe.removeEventListener("mousemove",Ne),Fe.removeEventListener("mouseup",De),this.removeEventListener("touchmove",Ne),this.removeEventListener("touchend",De),h.removeElement(Fe)}this.addEventListener("touchmove",Ne),this.addEventListener("touchend",De),Fe.addEventListener("mousemove",Ne),Fe.addEventListener("mouseup",De)}}(O,f,A,P),function(se,ie,ue,le,de,be){var _e=s.handleWidth/2;function xe(De){return h.constrain(De,0,le._width)}function Ee(De){return h.constrain(De,0,le._height)}function he(De){return h.constrain(De,-_e,le._width+_e)}var me=xe(le.d2p(ue._rl[0])),Se=xe(le.d2p(ue._rl[1]));if(se.select("rect."+s.slideBoxClassName).attr("x",me).attr("width",Se-me),se.select("rect."+s.maskMinClassName).attr("width",me),se.select("rect."+s.maskMaxClassName).attr("x",Se).attr("width",le._width-Se),"match"!==be.rangemode){var Me=le._height-Ee(le.d2pOppAxis(de._rl[1])),Ie=le._height-Ee(le.d2pOppAxis(de._rl[0]));se.select("rect."+s.maskMinOppAxisClassName).attr("x",me).attr("height",Me).attr("width",Se-me),se.select("rect."+s.maskMaxOppAxisClassName).attr("x",me).attr("y",Ie).attr("height",le._height-Ie).attr("width",Se-me),se.select("rect."+s.slideBoxClassName).attr("y",Me).attr("height",Ie-Me)}var Fe=Math.round(he(me-_e))-.5,Ne=Math.round(he(Se-_e))+.5;se.select("g."+s.grabberMinClassName).attr("transform",e(Fe,.5)),se.select("g."+s.grabberMaxClassName).attr("transform",e(Ne,.5))}(O,0,A,P,S,E),"bottom"===A.side&&o.draw(f,A._id+"title",{propContainer:A,propName:A._name+".title",placeholder:T._dfltTitle.x,attributes:{x:A._offset+A._length/2,y:G+P._height+P._offsetShift+10+1.5*A.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axis_ids"),v=y("../../lib/svg_text_utils"),b=y("./constants"),h=y("../../constants/alignment").LINE_SPACING,e=b.name;function n(r){var o=r&&r[e];return o&&o.visible}K.isVisible=n,K.makeData=function(r){var o=m.list({_fullLayout:r},"x",!0),t=r.margin,d=[];if(!r._has("gl2d"))for(var a=0;a<o.length;a++){var i=o[a];if(n(i)){d.push(i);var s=i[e];s._id=e+i._id,s._height=(r.height-t.b-t.t)*s.thickness,s._offsetShift=Math.floor(s.borderwidth/2)}}r._rangeSliderData=d},K.autoMarginOpts=function(r,o){var t=r._fullLayout,d=o[e],a=o._id.charAt(0),i=0,s=0;return"bottom"===o.side&&(i=o._depth,o.title.text!==t._dfltTitle[a]&&(s=1.5*o.title.font.size+10+d._offsetShift,s+=(o.title.text.match(v.BR_TAG_ALL)||[]).length*o.title.font.size*h)),{x:0,y:o._counterDomainMin,l:0,r:0,t:0,b:d._height+i+Math.max(t.margin.b,s),pad:b.extraPad+2*d._offsetShift}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("./oppaxis_attributes"),h=y("./helpers");Q.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:m.extendFlat({},v,{yaxis:b})}}},layoutAttributes:y("./attributes"),handleDefaults:y("./defaults"),calcAutorange:y("./calc_autorange"),draw:y("./draw"),isVisible:h.isVisible,makeData:h.makeData,autoMarginOpts:h.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(y,Q,K){"use strict";Q.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(y,Q,K){"use strict";var m=y("../annotations/attributes"),v=y("../../traces/scatter/attributes").line,b=y("../drawing/attributes").dash,h=y("../../lib/extend").extendFlat,e=y("../../plot_api/edit_types").overrideAll,n=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),Q.exports=e(n("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:h({},m.xref,{}),yref:h({},m.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:v.color,width:h({},v.width,{min:1,dflt:1}),dash:h({},b,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(y,Q,K){"use strict";Q.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("../../plots/array_container_defaults"),h=y("./attributes"),e=y("../shapes/helpers");function n(r,o,t){function d(O,P){return m.coerce(r,o,h,O,P)}var a=d("path"),i="path"!==d("type",a?"path":"rect");i&&delete o.path,d("opacity"),d("line.color"),d("line.width"),d("line.dash");for(var s=["x","y"],c=0;c<2;c++){var l,p,g,u=s[c],x={_fullLayout:t},f=v.coerceRef(r,o,x,u);if((l=v.getFromId(x,f))._selectionIndices.push(o._index),g=e.rangeToShapePosition(l),p=e.shapePositionToRange(l),i){var T=u+"0",_=u+"1",k=r[T],w=r[_];r[T]=p(r[T],!0),r[_]=p(r[_],!0),v.coercePosition(o,x,d,f,T),v.coercePosition(o,x,d,f,_);var C=o[T],A=o[_];void 0!==C&&void 0!==A&&(o[T]=g(C),o[_]=g(A),r[T]=k,r[_]=w)}}i&&m.noneOrAll(r,o,["x0","x1","y0","y1"])}Q.exports=function(r,o){b(r,o,{name:"selections",handleItemDefaults:n});for(var t=o.selections,d=0;d<t.length;d++){var a=t[d];a&&void 0===a.path&&(void 0!==a.x0&&void 0!==a.x1&&void 0!==a.y0&&void 0!==a.y1||(o.selections[d]=null))}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(y,Q,K){"use strict";var m=y("../shapes/draw_newshape/helpers").readPaths,v=y("../shapes/display_outlines"),b=y("../shapes/handle_outline").clearOutlineControllers,h=y("../color"),e=y("../drawing"),n=y("../../plot_api/plot_template").arrayEditor,r=y("../shapes/helpers"),o=r.getPathString;function t(c){var l=c._fullLayout;for(var p in b(c),l._selectionLayer.selectAll("path").remove(),l._plots){var g=l._plots[p].selectionLayer;g&&g.selectAll("path").remove()}for(var u=0;u<l.selections.length;u++)a(c,u)}function d(c){return c._context.editSelection}function a(c,l){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+l+'"]').remove();var p=r.makeSelectionsOptionsAndPlotinfo(c,l),g=p.options,u=p.plotinfo;g._input&&function(x){var f=o(c,g),T={"data-index":l,"fill-rule":"evenodd",d:f},_=g.opacity,k="rgba(0,0,0,0)",w=g.line.color||h.contrast(c._fullLayout.plot_bgcolor),C=g.line.width,A=g.line.dash;C||(C=5,A="solid");var O=d(c)&&c._fullLayout._activeSelectionIndex===l;O&&(k=c._fullLayout.activeselection.fillcolor,_=c._fullLayout.activeselection.opacity);for(var P=[],S=1;S>=0;S--){var E=x.append("path").attr(T).style("opacity",S?.1:_).call(h.stroke,w).call(h.fill,k).call(e.dashLine,S?"solid":A,S?4+C:C);if(i(E,c,g),O){var D=n(c.layout,"selections",g);E.style({cursor:"move"});var z={element:E.node(),plotinfo:u,gd:c,editHelpers:D,isActiveSelection:!0},N=m(f,c);v(N,E,z)}else E.style("pointer-events",S?"all":"none");P[S]=E}var V=P[0];P[1].node().addEventListener("click",function(){return function(X,J){if(d(X)){var G=+J.node().getAttribute("data-index");if(G>=0){if(G===X._fullLayout._activeSelectionIndex)return void s(X);X._fullLayout._activeSelectionIndex=G,X._fullLayout._deactivateSelection=s,t(X)}}}(c,V)})}(c._fullLayout._selectionLayer)}function i(c,l,p){e.setClipUrl(c,"clip"+l._fullLayout._uid+(p.xref+p.yref),l)}function s(c){d(c)&&c._fullLayout._activeSelectionIndex>=0&&(b(c),delete c._fullLayout._activeSelectionIndex,t(c))}Q.exports={draw:t,drawOne:a,activateLastSelection:function(c){d(c)&&(c._fullLayout._activeSelectionIndex=c._fullLayout.selections.length-1,c._fullLayout._deactivateSelection=s,t(c))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(y,Q,K){"use strict";var m=y("../../drawing/attributes").dash,v=y("../../../lib/extend").extendFlat;Q.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:v({},m,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(y,Q,K){"use strict";Q.exports=function(m,v,b){b("newselection.mode"),b("newselection.line.width")&&(b("newselection.line.color"),b("newselection.line.dash")),b("activeselection.fillcolor"),b("activeselection.opacity")}},{}],453:[function(y,Q,K){"use strict";var m=y("../../dragelement/helpers").selectMode,v=y("../../shapes/handle_outline").clearOutline,b=y("../../shapes/draw_newshape/helpers"),h=b.readPaths,e=b.writePaths,n=b.fixDatesForPaths;Q.exports=function(r,o){if(r.length){var t=r[0][0];if(t){var d=t.getAttribute("d"),a=o.gd,i=a._fullLayout.newselection,s=o.plotinfo,c=s.xaxis,l=s.yaxis,p=o.isActiveSelection,g=o.dragmode,u=(a.layout||{}).selections||[];if(!m(g)&&void 0!==p){var x=a._fullLayout._activeSelectionIndex;if(x<u.length)switch(a._fullLayout.selections[x].type){case"rect":g="select";break;case"path":g="lasso"}}var f,T=h(d,a,s,p),_={xref:c._id,yref:l._id,opacity:i.opacity,line:{color:i.line.color,width:i.line.width,dash:i.line.dash}};1===T.length&&(f=T[0]),f&&5===f.length&&"select"===g?(_.type="rect",_.x0=f[0][1],_.y0=f[0][2],_.x1=f[2][1],_.y1=f[2][2]):(_.type="path",c&&l&&n(T,c,l),_.path=e(T),f=null),v(a);for(var k=o.editHelpers,w=(k||{}).modifyItem,C=[],A=0;A<u.length;A++){var O=a._fullLayout.selections[A];if(O){if(C[A]=O._input,void 0!==p&&A===a._fullLayout._activeSelectionIndex){var P=_;switch(O.type){case"rect":w("x0",P.x0),w("x1",P.x1),w("y0",P.y0),w("y1",P.y1);break;case"path":w("path",P.path)}}}else C[A]=O}return void 0===p?(C.push(_),C):k?k.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(y,Q,K){"use strict";var m=y("../../lib").strTranslate;function v(b,h){switch(b.type){case"log":return b.p2d(h);case"date":return b.p2r(h,0,b.calendar);default:return b.p2r(h)}}Q.exports={p2r:v,r2p:function(b,h){switch(b.type){case"log":return b.d2p(h);case"date":return b.r2p(h,0,b.calendar);default:return b.r2p(h)}},axValue:function(b){var h="y"===b._id.charAt(0)?1:0;return function(e){return v(b,e[h])}},getTransform:function(b){return m(b.xaxis._offset,b.yaxis._offset)}}},{"../../lib":515}],455:[function(y,Q,K){"use strict";var m=y("./draw"),v=y("./select");Q.exports={moduleType:"component",name:"selections",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),supplyDrawNewSelectionDefaults:y("./draw_newselection/defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("selections"),draw:m.draw,drawOne:m.drawOne,reselect:v.reselect,prepSelect:v.prepSelect,clearOutline:v.clearOutline,clearSelectionsCache:v.clearSelectionsCache,selectOnClick:v.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(y,Q,K){"use strict";var m=y("polybooljs"),v=y("point-in-polygon/nested"),b=y("../../registry"),h=y("../drawing").dashStyle,e=y("../color"),n=y("../fx"),r=y("../fx/helpers").makeEventData,o=y("../dragelement/helpers"),t=o.freeMode,d=o.rectMode,a=o.drawMode,i=o.openMode,s=o.selectMode,c=y("../shapes/helpers"),l=y("../shapes/constants"),p=y("../shapes/display_outlines"),g=y("../shapes/handle_outline").clearOutline,u=y("../shapes/draw_newshape/helpers"),x=u.handleEllipse,f=u.readPaths,T=y("../shapes/draw_newshape/newshapes"),_=y("./draw_newselection/newselections"),k=y("./draw").activateLastSelection,w=y("../../lib"),C=w.sorterAsc,A=y("../../lib/polygon"),O=y("../../lib/throttle"),P=y("../../plots/cartesian/axis_ids").getFromId,S=y("../../lib/clear_gl_canvases"),E=y("../../plot_api/subroutines").redrawReglTraces,D=y("./constants"),z=D.MINSELECT,N=A.filter,V=A.tester,X=y("./helpers"),J=X.p2r,G=X.axValue,Z=X.getTransform;function re(De){return void 0!==De.subplot}function j(De,$e,Re,ze,Ue,je,rt){var ut,gt,At,_t,it,et,wt,Gt,Kt,we,cr=$e._hoverdata,ar=$e._fullLayout.clickmode.indexOf("event")>-1,hr=[];if((we=cr)&&Array.isArray(we)&&!0!==we[0].hoverOnBox){U(De,$e,je);var Xt=function(we,Be){var We,Ke,Ye=we[0],ft=-1,ct=[];for(Ke=0;Ke<Be.length;Ke++)if(Ye.fullData._expandedIndex===(We=Be[Ke]).cd[0].trace._expandedIndex){if(!0===Ye.hoverOnBox)break;void 0!==Ye.pointNumber?ft=Ye.pointNumber:void 0!==Ye.binNumber&&(ft=Ye.binNumber,ct=Ye.pointNumbers);break}return{pointNumber:ft,pointNumbers:ct,searchInfo:We}}(cr,ut=te($e,Re,ze,Ue));if(Xt.pointNumbers.length>0?function(we,Be){var We,Ke,Ye,ft=[];for(Ye=0;Ye<we.length;Ye++)(We=we[Ye]).cd[0].trace.selectedpoints&&We.cd[0].trace.selectedpoints.length>0&&ft.push(We);if(1===ft.length&&ft[0]===Be.searchInfo&&(Ke=Be.searchInfo.cd[0].trace).selectedpoints.length===Be.pointNumbers.length){for(Ye=0;Ye<Be.pointNumbers.length;Ye++)if(Ke.selectedpoints.indexOf(Be.pointNumbers[Ye])<0)return!1;return!0}return!1}(ut,Xt):function(we){var We,Ke,Ye=0;for(Ke=0;Ke<we.length;Ke++)if((We=we[Ke].cd[0].trace).selectedpoints&&(We.selectedpoints.length>1||(Ye+=We.selectedpoints.length)>1))return!1;return 1===Ye}(ut)&&(et=se(Xt))){for(rt&&rt.remove(),Kt=0;Kt<ut.length;Kt++)(gt=ut[Kt])._module.selectPoints(gt,!1);ie($e,ut),$(je),ar&&Ne($e)}else{for(wt=De.shiftKey&&(void 0!==et?et:se(Xt)),At=function(we,Be,We){return{pointNumber:we,searchInfo:Be,subtract:!!We}}(Xt.pointNumber,Xt.searchInfo,wt),_t=ee(je.selectionDefs.concat([At])),Kt=0;Kt<ut.length;Kt++)if(it=le(ut[Kt]._module.selectPoints(ut[Kt],_t),ut[Kt]),hr.length)for(var He=0;He<it.length;He++)hr.push(it[He]);else hr=it;if(ie($e,ut,Gt={points:hr}),At&&je&&je.selectionDefs.push(At),rt){var Je=je.mergedPolygons,pe=i(je.dragmode);p(de(Je,pe),rt,je)}ar&&Fe($e,Gt)}}}function B(De){return"pointNumber"in De&&"searchInfo"in De}function H(De){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function($e,Re,ze,Ue){return Ue.cd[0].trace._expandedIndex===De.searchInfo.cd[0].trace._expandedIndex&&ze===De.pointNumber},isRect:!1,degenerate:!1,subtract:!!De.subtract}}function ee(De){if(De.length){for(var $e=[],Re=B(De[0])?0:De[0][0][0],ze=Re,Ue=B(De[0])?0:De[0][0][1],je=Ue,rt=0;rt<De.length;rt++)if(B(De[rt]))$e.push(H(De[rt]));else{var ut=V(De[rt]);ut.subtract=!!De[rt].subtract,$e.push(ut),Re=Math.min(Re,ut.xmin),ze=Math.max(ze,ut.xmax),Ue=Math.min(Ue,ut.ymin),je=Math.max(je,ut.ymax)}return{xmin:Re,xmax:ze,ymin:Ue,ymax:je,pts:[],contains:function(gt,At,_t,it){for(var et=!1,wt=0;wt<$e.length;wt++)$e[wt].contains(gt,At,_t,it)&&(et=!$e[wt].subtract);return et},isRect:!1,degenerate:!1}}}function U(De,$e,Re){var ze=$e._fullLayout,Ue=Re.plotinfo,je=Re.dragmode,rt=ze._lastSelectedSubplot&&ze._lastSelectedSubplot===Ue.id,ut=(De.shiftKey||De.altKey)&&!(a(je)&&i(je));rt&&ut&&Ue.selection&&Ue.selection.selectionDefs&&!Re.selectionDefs?(Re.selectionDefs=Ue.selection.selectionDefs,Re.mergedPolygons=Ue.selection.mergedPolygons):ut&&Ue.selection||$(Re),rt||(g($e),ze._lastSelectedSubplot=Ue.id)}function $(De,$e){var Re=De.dragmode,ze=De.plotinfo,Ue=De.gd;Ue._fullLayout._activeShapeIndex>=0&&Ue._fullLayout._deactivateShape(Ue),Ue._fullLayout._activeSelectionIndex>=0&&Ue._fullLayout._deactivateSelection(Ue);var je=Ue._fullLayout._zoomlayer,rt=a(Re),ut=s(Re);if(rt||ut){var gt,At,_t=je.selectAll(".select-outline-"+ze.id);_t&&Ue._fullLayout._outlining&&(rt&&(gt=T(_t,De)),gt&&b.call("_guiRelayout",Ue,{shapes:gt}),ut&&!re(De)&&(At=_(_t,De)),At&&(Ue._fullLayout._noEmitSelectedAtStart=!0,b.call("_guiRelayout",Ue,{selections:At}).then(function(){$e&&k(Ue)})),Ue._fullLayout._outlining=!1)}ze.selection={},ze.selection.selectionDefs=De.selectionDefs=[],ze.selection.mergedPolygons=De.mergedPolygons=[]}function q(De){return De._id}function te(De,$e,Re,ze){if(!De.calcdata)return[];var Ue,je,rt,ut=[],gt=$e.map(q),At=Re.map(q);for(rt=0;rt<De.calcdata.length;rt++)if(!0===(je=(Ue=De.calcdata[rt])[0].trace).visible&&je._module&&je._module.selectPoints)if(!re({subplot:ze})||je.subplot!==ze&&je.geo!==ze)if("splom"===je.type){if(je._xaxes[gt[0]]&&je._yaxes[At[0]]){var _t=ne(je._module,Ue,$e[0],Re[0]);_t.scene=De._fullLayout._splomScenes[je.uid],ut.push(_t)}}else if("sankey"===je.type){var it=ne(je._module,Ue,$e[0],Re[0]);ut.push(it)}else{if(-1===gt.indexOf(je.xaxis)||-1===At.indexOf(je.yaxis))continue;ut.push(ne(je._module,Ue,P(De,je.xaxis),P(De,je.yaxis)))}else ut.push(ne(je._module,Ue,$e[0],Re[0]));return ut}function ne(De,$e,Re,ze){return{_module:De,cd:$e,xaxis:Re,yaxis:ze}}function se(De){var $e=De.searchInfo.cd[0].trace,ze=De.pointNumbers;return!!$e.selectedpoints&&$e.selectedpoints.indexOf(ze.length>0?ze[0]:De.pointNumber)>-1}function ie(De,$e,Re){var ze,Ue;for(ze=0;ze<$e.length;ze++){var je=$e[ze].cd[0].trace._fullInput,rt=De._fullLayout._tracePreGUI[je.uid]||{};void 0===rt.selectedpoints&&(rt.selectedpoints=je._input.selectedpoints||null)}if(Re){var ut=Re.points||[];for(ze=0;ze<$e.length;ze++)(Ue=$e[ze].cd[0].trace)._input.selectedpoints=Ue._fullInput.selectedpoints=[],Ue._fullInput!==Ue&&(Ue.selectedpoints=[]);for(var gt=0;gt<ut.length;gt++){var At=ut[gt],_t=At.data,it=At.fullData,et=At.pointIndex,wt=At.pointIndices;wt?([].push.apply(_t.selectedpoints,wt),Ue._fullInput!==Ue&&[].push.apply(it.selectedpoints,wt)):(_t.selectedpoints.push(et),Ue._fullInput!==Ue&&it.selectedpoints.push(et))}}else for(ze=0;ze<$e.length;ze++)delete(Ue=$e[ze].cd[0].trace).selectedpoints,delete Ue._input.selectedpoints,Ue._fullInput!==Ue&&delete Ue._fullInput.selectedpoints;!function(Gt,Kt){for(var cr=!1,ar=0;ar<Kt.length;ar++){var hr=Kt[ar],Xt=hr.cd;b.traceIs(Xt[0].trace,"regl")&&(cr=!0);var He=hr._module,Je=He.styleOnSelect||He.style;Je&&(Je(Gt,Xt,Xt[0].node3),Xt[0].nodeRangePlot3&&Je(Gt,Xt,Xt[0].nodeRangePlot3))}cr&&(S(Gt),E(Gt))}(De,$e)}function ue(De,$e,Re){for(var ze=(Re?m.difference:m.union)({regions:De},{regions:[$e]}).regions.reverse(),Ue=0;Ue<ze.length;Ue++){var je=ze[Ue];je.subtract=me(je,ze.slice(0,Ue))}return ze}function le(De,$e){if(Array.isArray(De))for(var Re=$e.cd,ze=$e.cd[0].trace,Ue=0;Ue<De.length;Ue++)De[Ue]=r(De[Ue],ze,Re);return De}function de(De,$e){for(var Re=[],ze=0;ze<De.length;ze++){Re[ze]=[];for(var Ue=0;Ue<De[ze].length;Ue++){Re[ze][Ue]=[],Re[ze][Ue][0]=Ue?"L":"M";for(var je=0;je<De[ze][Ue].length;je++)Re[ze][Ue].push(De[ze][Ue][je])}$e||Re[ze].push(["Z",Re[ze][0][1],Re[ze][0][2]])}return Re}function be(De,$e){for(var Re,ze,Ue=[],je=[],rt=0;rt<$e.length;rt++){var ut=$e[rt];ze=ut._module.selectPoints(ut,De),je.push(ze),Re=le(ze,ut),Ue=Ue.concat(Re)}return Ue}function _e(De,$e,Re,ze,Ue){var je,rt,ut,gt=!!ze;Ue&&(je=Ue.plotinfo,rt=Ue.xaxes[0]._id,ut=Ue.yaxes[0]._id);var At=[],_t=[],it=he(De),et=De._fullLayout;if(je){var wt=et._zoomlayer,Gt=et.dragmode,Kt=a(Gt),cr=s(Gt);if(Kt||cr){var ar=P(De,rt,"x"),hr=P(De,ut,"y");if(ar&&hr){var Xt=wt.selectAll(".select-outline-"+je.id);if(Xt&&De._fullLayout._outlining&&Xt.length){for(var He=Xt[0][0].getAttribute("d"),Je=f(He,De,je),pe=[],we=0;we<Je.length;we++){for(var Be=Je[we],We=[],Ke=0;Ke<Be.length;Ke++)We.push([Se(ar,Be[Ke][1]),Se(hr,Be[Ke][2])]);We.xref=rt,We.yref=ut,We.subtract=me(We,pe),pe.push(We)}it=it.concat(pe)}}}}var Ye=rt&&ut?[rt+ut]:et._subplots.cartesian;!function(ur){var Tt=ur.calcdata;if(Tt)for(var Qt=0;Qt<Tt.length;Qt++){var zr=ur._fullLayout._splomScenes;if(zr){var an=zr[Tt[Qt][0].trace.uid];an&&(an.selectBatch=[])}}}(De);for(var ft={},ct=0;ct<Ye.length;ct++){var St=Ye[ct],Ft=St.indexOf("y"),at=St.slice(0,Ft),mt=St.slice(Ft),qt=rt&&ut?Re:void 0;if(qt=Ee(it,at,mt,qt)){var Et=ze;if(!gt){var Dt=P(De,at,"x"),Le=P(De,mt,"y");Et=te(De,[Dt],[Le],St);for(var Xe=0;Xe<Et.length;Xe++){var ot=Et[Xe],dt=ot.cd[0],Lt=dt.trace;if("scattergl"===ot._module.name&&!dt.t.xpx){var Ut=Lt.x,$t=Lt.y,Wt=Lt._length;dt.t.xpx=[],dt.t.ypx=[];for(var wr=0;wr<Wt;wr++)dt.t.xpx[wr]=Dt.c2p(Ut[wr]),dt.t.ypx[wr]=Le.c2p($t[wr])}"splom"===ot._module.name&&(ft[Lt.uid]||(ft[Lt.uid]=!0))}}var Rr=be(qt,Et);At=At.concat(Rr),_t=_t.concat(Et)}}var br={points:At};ie(De,_t,br);var nr=et.clickmode.indexOf("event")>-1&&$e;if(!je&&$e){var lr=he(De,!0);if(lr.length){var sr=lr[0].xref,_r=lr[0].yref;if(sr&&_r){var Ar=Me(lr);Ie([P(De,sr,"x"),P(De,_r,"y")])(br,Ar)}}De._fullLayout._noEmitSelectedAtStart?De._fullLayout._noEmitSelectedAtStart=!1:nr&&Fe(De,br),et._reselect=!1}if(!je&&et._deselect){var zt=et._deselect;(function(ur,Tt,Qt){for(var Er=0;Er<Qt.length;Er++){var zr=Qt[Er];if(zr.xaxis&&zr.xaxis._id===ur&&zr.yaxis&&zr.yaxis._id===Tt)return!0}return!1})(rt=zt.xref,ut=zt.yref,_t)||xe(De,rt,ut,ze),nr&&(br.points.length?Fe(De,br):Ne(De)),et._deselect=!1}return{eventData:br,selectionTesters:Re}}function xe(De,$e,Re,ze){ze=te(De,[P(De,$e,"x")],[P(De,Re,"y")],$e+Re);for(var Ue=0;Ue<ze.length;Ue++){var je=ze[Ue];je._module.selectPoints(je,!1)}ie(De,ze)}function Ee(De,$e,Re,ze){for(var Ue,je=0;je<De.length;je++){var rt=De[je];$e===rt.xref&&Re===rt.yref&&(Ue?ze=ee(Ue=ue(Ue,rt,!!rt.subtract)):(Ue=[rt],ze=V(rt)))}return ze}function he(De,$e){for(var Re=[],ze=De._fullLayout,Ue=ze.selections,je=Ue.length,rt=0;rt<je;rt++)if(!$e||rt===ze._activeSelectionIndex){var ut=Ue[rt];if(ut){var gt,At,_t,it,et,wt=ut.xref,Gt=ut.yref,Kt=P(De,wt,"x"),cr=P(De,Gt,"y");if("rect"===ut.type){et=[];var ar=Se(Kt,ut.x0),hr=Se(Kt,ut.x1),Xt=Se(cr,ut.y0),He=Se(cr,ut.y1);et=[[ar,Xt],[ar,He],[hr,He],[hr,Xt]],gt=Math.min(ar,hr),At=Math.max(ar,hr),_t=Math.min(Xt,He),it=Math.max(Xt,He),et.xmin=gt,et.xmax=At,et.ymin=_t,et.ymax=it,et.xref=wt,et.yref=Gt,et.subtract=!1,et.isRect=!0,Re.push(et)}else if("path"===ut.type)for(var Je=ut.path.split("Z"),pe=[],we=0;we<Je.length;we++){var Be=Je[we];if(Be){var We=c.extractPathCoords(Be+="Z",l.paramIsX,"raw"),Ke=c.extractPathCoords(Be,l.paramIsY,"raw");gt=1/0,At=-1/0,_t=1/0,it=-1/0,et=[];for(var Ye=0;Ye<We.length;Ye++){var ft=Se(Kt,We[Ye]),ct=Se(cr,Ke[Ye]);et.push([ft,ct]),gt=Math.min(ft,gt),At=Math.max(ft,At),_t=Math.min(ct,_t),it=Math.max(ct,it)}et.xmin=gt,et.xmax=At,et.ymin=_t,et.ymax=it,et.xref=wt,et.yref=Gt,et.subtract=me(et,pe),pe.push(et),Re.push(et)}}}}return Re}function me(De,$e){for(var Re=!1,ze=0;ze<$e.length;ze++)for(var Ue=$e[ze],je=0;je<De.length;je++)if(v(De[je],Ue)){Re=!Re;break}return Re}function Se(De,$e){return"date"===De.type&&($e=$e.replace("_"," ")),"log"===De.type?De.c2p($e):De.r2p($e,null,De.calendar)}function Me(De){for(var $e=De.length,Re=[],ze=0;ze<$e;ze++){var Ue=De[ze];Re=(Re=Re.concat(Ue)).concat([Ue[0]])}return(je=Re).isRect=5===je.length&&je[0][0]===je[4][0]&&je[0][1]===je[4][1]&&je[0][0]===je[1][0]&&je[2][0]===je[3][0]&&je[0][1]===je[3][1]&&je[1][1]===je[2][1]||je[0][1]===je[1][1]&&je[2][1]===je[3][1]&&je[0][0]===je[3][0]&&je[1][0]===je[2][0],je.isRect&&(je.xmin=Math.min(je[0][0],je[2][0]),je.xmax=Math.max(je[0][0],je[2][0]),je.ymin=Math.min(je[0][1],je[2][1]),je.ymax=Math.max(je[0][1],je[2][1])),je;var je}function Ie(De){return function($e,Re){for(var ze,Ue,je=0;je<De.length;je++){var rt=De[je],ut=rt._id,gt=ut.charAt(0);if(Re.isRect){ze||(ze={});var At=Re[gt+"min"],_t=Re[gt+"max"];void 0!==At&&void 0!==_t&&(ze[ut]=[J(rt,At),J(rt,_t)].sort(C))}else Ue||(Ue={}),Ue[ut]=Re.map(G(rt))}ze&&($e.range=ze),Ue&&($e.lassoPoints=Ue)}}function Fe(De,$e){$e&&($e.selections=(De.layout||{}).selections||[]),De.emit("plotly_selected",$e)}function Ne(De){De.emit("plotly_deselect",null)}Q.exports={reselect:_e,prepSelect:function(De,$e,Re,ze,Ue){var je=!re(ze),rt=t(Ue),ut=d(Ue),gt=i(Ue),At=a(Ue),_t=s(Ue),it="drawcircle"===Ue,et="drawline"===Ue||it,wt=ze.gd,Gt=wt._fullLayout,Kt=_t&&"immediate"===Gt.newselection.mode&&je,cr=Gt._zoomlayer,ar=ze.element.getBoundingClientRect(),hr=ze.plotinfo,Xt=Z(hr),He=$e-ar.left,Je=Re-ar.top;Gt._calcInverseTransform(wt);var we,Be,We,Ke,Ye,ft,ct,pe=w.apply3DTransform(Gt._invTransform)(He,Je),St=Gt._invScaleX,Ft=Gt._invScaleY,at=He=pe[0],mt=Je=pe[1],qt="M"+He+","+Je,Et=ze.xaxes[0],Dt=ze.yaxes[0],Le=Et._length,Xe=Dt._length,ot=De.altKey&&!(a(Ue)&&gt);U(De,wt,ze),rt&&(we=N([[He,Je]],D.BENDPX));var dt=cr.selectAll("path.select-outline-"+hr.id).data([1]),Lt=At?Gt.newshape:Gt.newselection;dt.enter().append("path").attr("class","select-outline select-outline-"+hr.id).style({opacity:At?Lt.opacity/2:1,fill:At&&!gt?Lt.fillcolor:"none",stroke:Lt.line.color||(je?e.contrast(wt._fullLayout.plot_bgcolor):"#7f7f7f"),"stroke-dasharray":h(Lt.line.dash,Lt.line.width),"stroke-width":Lt.line.width+"px","shape-rendering":"crispEdges"}).attr("fill-rule","evenodd").classed("cursor-move",!!At).attr("transform",Xt).attr("d",qt+"Z");var Ut=cr.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",Xt).attr("d","M0,0Z"),$t=Gt._uid+D.SELECTID,Wt=[],wr=te(wt,ze.xaxes,ze.yaxes,ze.subplot);Kt&&!De.shiftKey&&(ze._clearSubplotSelections=function(){if(je){var br=Et._id,nr=Dt._id;xe(wt,br,nr,wr);for(var lr=(wt.layout||{}).selections||[],sr=[],_r=!1,Ar=0;Ar<lr.length;Ar++){var zt=Gt.selections[Ar];zt.xref!==br||zt.yref!==nr?sr.push(lr[Ar]):_r=!0}_r&&(wt._fullLayout._noEmitSelectedAtStart=!0,b.call("_guiRelayout",wt,{selections:sr}))}});var br,Rr=(br=ze).plotinfo.fillRangeItems||Ie(br.xaxes.concat(br.yaxes));ze.moveFn=function(br,nr){ze._clearSubplotSelections&&(ze._clearSubplotSelections(),ze._clearSubplotSelections=void 0),at=Math.max(0,Math.min(Le,St*br+He)),mt=Math.max(0,Math.min(Xe,Ft*nr+Je));var lr=Math.abs(at-He),sr=Math.abs(mt-Je);if(ut){var _r,Ar,zt;if(_t){var ur=Gt.selectdirection;switch(_r="any"===ur?sr<Math.min(.6*lr,z)?"h":lr<Math.min(.6*sr,z)?"v":"d":ur){case"h":Ar=it?Xe/2:0,zt=Xe;break;case"v":Ar=it?Le/2:0,zt=Le}}if(At)switch(Gt.newshape.drawdirection){case"vertical":_r="h",Ar=it?Xe/2:0,zt=Xe;break;case"horizontal":_r="v",Ar=it?Le/2:0,zt=Le;break;case"ortho":lr<sr?(_r="h",Ar=Je,zt=mt):(_r="v",Ar=He,zt=at);break;default:_r="d"}"h"===_r?((Ke=et?x(it,[at,Ar],[at,zt]):[[He,Ar],[He,zt],[at,zt],[at,Ar]]).xmin=et?at:Math.min(He,at),Ke.xmax=et?at:Math.max(He,at),Ke.ymin=Math.min(Ar,zt),Ke.ymax=Math.max(Ar,zt),Ut.attr("d","M"+Ke.xmin+","+(Je-z)+"h-4v"+2*z+"h4ZM"+(Ke.xmax-1)+","+(Je-z)+"h4v"+2*z+"h-4Z")):"v"===_r?((Ke=et?x(it,[Ar,mt],[zt,mt]):[[Ar,Je],[Ar,mt],[zt,mt],[zt,Je]]).xmin=Math.min(Ar,zt),Ke.xmax=Math.max(Ar,zt),Ke.ymin=et?mt:Math.min(Je,mt),Ke.ymax=et?mt:Math.max(Je,mt),Ut.attr("d","M"+(He-z)+","+Ke.ymin+"v-4h"+2*z+"v4ZM"+(He-z)+","+(Ke.ymax-1)+"v4h"+2*z+"v-4Z")):"d"===_r&&((Ke=et?x(it,[He,Je],[at,mt]):[[He,Je],[He,mt],[at,mt],[at,Je]]).xmin=Math.min(He,at),Ke.xmax=Math.max(He,at),Ke.ymin=Math.min(Je,mt),Ke.ymax=Math.max(Je,mt),Ut.attr("d","M0,0Z"))}else rt&&(we.addPt([at,mt]),Ke=we.filtered);if(ze.selectionDefs&&ze.selectionDefs.length?(We=ue(ze.mergedPolygons,Ke,ot),Ke.subtract=ot,Be=ee(ze.selectionDefs.concat([Ke]))):(We=[Ke],Be=V(Ke)),p(de(We,gt),dt,ze),_t){var Tt,Qt=_e(wt,!1),Er=Qt.eventData?Qt.eventData.points.slice():[];Qt=_e(wt,!1,Be,wr,ze),Be=Qt.selectionTesters,ct=Qt.eventData,Tt=we?we.filtered:Me(We),O.throttle($t,D.SELECTDELAY,function(){for(var zr=(Wt=be(Be,wr)).slice(),an=0;an<Er.length;an++){for(var Kr=Er[an],sn=!1,gn=0;gn<zr.length;gn++)if(zr[gn].curveNumber===Kr.curveNumber&&zr[gn].pointNumber===Kr.pointNumber){sn=!0;break}sn||zr.push(Kr)}zr.length&&(ct||(ct={}),ct.points=zr),Rr(ct,Tt),wt.emit("plotly_selecting",ct)})}},ze.clickFn=function(br,nr){if(Ut.remove(),wt._fullLayout._activeShapeIndex>=0)wt._fullLayout._deactivateShape(wt);else if(!At){var lr=Gt.clickmode;O.done($t).then(function(){if(O.clear($t),2===br){for(dt.remove(),Ye=0;Ye<wr.length;Ye++)(ft=wr[Ye])._module.selectPoints(ft,!1);if(ie(wt,wr),$(ze),Ne(wt),wr.length){var sr=wr[0].xaxis,_r=wr[0].yaxis;if(sr&&_r){for(var Ar=[],zt=wt._fullLayout.selections,ur=0;ur<zt.length;ur++){var Tt=zt[ur];Tt&&(Tt.xref===sr._id&&Tt.yref===_r._id||Ar.push(Tt))}Ar.length<zt.length&&(wt._fullLayout._noEmitSelectedAtStart=!0,b.call("_guiRelayout",wt,{selections:Ar}))}}}else lr.indexOf("select")>-1&&j(nr,wt,ze.xaxes,ze.yaxes,ze.subplot,ze,dt),"event"===lr&&Fe(wt,void 0);n.click(wt,nr)}).catch(w.error)}},ze.doneFn=function(){Ut.remove(),O.done($t).then(function(){O.clear($t),!Kt&&Ke&&ze.selectionDefs&&(Ke.subtract=ot,ze.selectionDefs.push(Ke),ze.mergedPolygons.length=0,[].push.apply(ze.mergedPolygons,We)),(Kt||At)&&$(ze,Kt),ze.doneFnCompleted&&ze.doneFnCompleted(Wt),_t&&Fe(wt,ct)}).catch(w.error)}},clearOutline:g,clearSelectionsCache:$,selectOnClick:j}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(y,Q,K){"use strict";var m=y("../annotations/attributes"),v=y("../../traces/scatter/attributes").line,b=y("../drawing/attributes").dash,h=y("../../lib/extend").extendFlat,e=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),Q.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:h({},m.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:h({},m.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:h({},v.color,{editType:"arraydraw"}),width:h({},v.width,{editType:"calc+arraydraw"}),dash:h({},b,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("./constants"),h=y("./helpers");function e(t){return r(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function n(t){return r(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function r(t,d,a,i,s,c){var l=t/2,p=c;if("pixel"===d){var g=s?h.extractPathCoords(s,c?b.paramIsY:b.paramIsX):[a,i],u=m.aggNums(Math.max,null,g),x=m.aggNums(Math.min,null,g),f=x<0?Math.abs(x)+l:l,T=u>0?u+l:l;return{ppad:l,ppadplus:p?f:T,ppadminus:p?T:f}}return{ppad:l}}function o(t,d,a,i,s){var c="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==d)return[c(d),c(a)];if(i){var l,p,g,u,x=1/0,f=-1/0,T=i.match(b.segmentRE);for("date"===t.type&&(c=h.decodeDate(c)),l=0;l<T.length;l++)void 0!==(p=s[T[l].charAt(0)].drawn)&&(!(g=T[l].substr(1).match(b.paramRE))||g.length<p||((u=c(g[p]))<x&&(x=u),u>f&&(f=u)));return f>=x?[x,f]:void 0}}Q.exports=function(t){var a=m.filterVisible(t._fullLayout.shapes);if(a.length&&t._fullData.length)for(var i=0;i<a.length;i++){var s,c,l=a[i];l._extremes={};var p=v.getRefType(l.xref),g=v.getRefType(l.yref);if("paper"!==l.xref&&"domain"!==p){var u="pixel"===l.xsizemode?l.xanchor:l.x0,x="pixel"===l.xsizemode?l.xanchor:l.x1;(c=o(s=v.getFromId(t,l.xref),u,x,l.path,b.paramIsX))&&(l._extremes[s._id]=v.findExtremes(s,c,e(l)))}if("paper"!==l.yref&&"domain"!==g){var f="pixel"===l.ysizemode?l.yanchor:l.y0,T="pixel"===l.ysizemode?l.yanchor:l.y1;(c=o(s=v.getFromId(t,l.yref),f,T,l.path,b.paramIsY))&&(l._extremes[s._id]=v.findExtremes(s,c,n(l)))}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(y,Q,K){"use strict";Q.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("../../plots/array_container_defaults"),h=y("./attributes"),e=y("./helpers");function n(r,o,t){function d(E,D){return m.coerce(r,o,h,E,D)}if(d("visible")){var a=d("path"),i="path"!==d("type",a?"path":"rect");i&&delete o.path,d("editable"),d("layer"),d("opacity"),d("fillcolor"),d("fillrule"),d("line.width")&&(d("line.color"),d("line.dash"));for(var s=d("xsizemode"),c=d("ysizemode"),l=["x","y"],p=0;p<2;p++){var g,u,x,f=l[p],T=f+"anchor",_="x"===f?s:c,k={_fullLayout:t},w=v.coerceRef(r,o,k,f,void 0,"paper");if("range"===v.getRefType(w)?((g=v.getFromId(k,w))._shapeIndices.push(o._index),x=e.rangeToShapePosition(g),u=e.shapePositionToRange(g)):u=x=m.identity,i){var C=f+"0",A=f+"1",O=r[C],P=r[A];r[C]=u(r[C],!0),r[A]=u(r[A],!0),"pixel"===_?(d(C,0),d(A,10)):(v.coercePosition(o,k,d,w,C,.25),v.coercePosition(o,k,d,w,A,.75)),o[C]=x(o[C]),o[A]=x(o[A]),r[C]=O,r[A]=P}if("pixel"===_){var S=r[T];r[T]=u(r[T],!0),v.coercePosition(o,k,d,w,T,.25),o[T]=x(o[T]),r[T]=S}}i&&m.noneOrAll(r,o,["x0","x1","y0","y1"])}}Q.exports=function(r,o){b(r,o,{name:"shapes",handleItemDefaults:n})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(y,Q,K){"use strict";var m=y("../../lib").strTranslate,v=y("../dragelement"),b=y("../dragelement/helpers"),h=b.drawMode,e=b.selectMode,n=y("../../registry"),r=y("../color"),o=y("./draw_newshape/constants"),t=o.i000,d=o.i090,a=o.i180,i=o.i270,s=y("./handle_outline").clearOutlineControllers,c=y("./draw_newshape/helpers"),l=c.pointsOnRectangle,p=c.pointsOnEllipse,g=c.writePaths,u=y("./draw_newshape/newshapes"),x=y("../selections/draw_newselection/newselections");function f(T,_){var k,w,C,P=T.length;return w=T[k=(_+1)%P][1],C=T[k][2],w===T[_][1]&&C===T[_][2]&&(w=T[k=(_+2)%P][1],C=T[k][2]),[k,w,C]}Q.exports=function T(_,k,w,C){C||(C=0);var A=w.gd;function O(){T(_,k,w,C++),p(_[0])&&P({redrawing:!0})}function P(q){var te={};void 0!==w.isActiveShape&&(w.isActiveShape=!1,te=u(k,w)),void 0!==w.isActiveSelection&&(w.isActiveSelection=!1,te=x(k,w),A._fullLayout._reselect=!0),Object.keys(te).length&&n.call((q||{}).redrawing?"relayout":"_guiRelayout",A,te)}var S,E,D,z,N,V=A._fullLayout._zoomlayer,X=w.dragmode,J=h(X),G=e(X);function Z(q){D=+q.srcElement.getAttribute("data-i"),z=+q.srcElement.getAttribute("data-j"),S[D][z].moveFn=re}function re(q,te){if(_.length){var ne=N[D][z][1],se=N[D][z][2],ie=_[D],ue=ie.length;if(l(ie)){var le=q,de=te;w.isActiveSelection&&(f(ie,z)[1]===ie[z][1]?de=0:le=0);for(var be=0;be<ue;be++)if(be!==z){var _e=ie[be];_e[1]===ie[z][1]&&(_e[1]=ne+le),_e[2]===ie[z][2]&&(_e[2]=se+de)}if(ie[z][1]=ne+le,ie[z][2]=se+de,!l(ie))for(var xe=0;xe<ue;xe++)for(var Ee=0;Ee<ie[xe].length;Ee++)ie[xe][Ee]=N[D][xe][Ee]}else ie[z][1]=ne+q,ie[z][2]=se+te;O()}}function j(){P()}function B(q,te){if(2===q){D=+te.srcElement.getAttribute("data-i"),z=+te.srcElement.getAttribute("data-j");var ne=_[D];l(ne)||p(ne)||function(){if(_.length&&_[D]&&_[D].length){for(var se=[],ie=0;ie<_[D].length;ie++)ie!==z&&se.push(_[D][ie]);se.length>1&&(2!==se.length||"Z"!==se[1][0])&&(0===z&&(se[0][0]="M"),_[D]=se,O(),P())}}()}}function H(q,te){(function(ne,se){if(_.length)for(var ie=0;ie<_.length;ie++)for(var ue=0;ue<_[ie].length;ue++)for(var le=0;le+2<_[ie][ue].length;le+=2)_[ie][ue][le+1]=N[ie][ue][le+1]+ne,_[ie][ue][le+2]=N[ie][ue][le+2]+se})(q,te),O()}(J||G)&&(A._fullLayout._outlining=!0),s(A),k.attr("d",g(_)),C||!w.isActiveShape&&!w.isActiveSelection||(N=function(q,te){for(var ne=0;ne<te.length;ne++){var se=te[ne];q[ne]=[];for(var ie=0;ie<se.length;ie++){q[ne][ie]=[];for(var ue=0;ue<se[ie].length;ue++)q[ne][ie][ue]=se[ie][ue]}}return q}([],_),function(q){S=[];for(var te=0;te<_.length;te++){var ne=_[te],se=l(ne),ie=!se&&p(ne);S[te]=[];for(var ue=ne.length,le=0;le<ue;le++)if("Z"!==ne[le][0]&&(!ie||le===t||le===d||le===a||le===i)){var de,be=se&&w.isActiveSelection;be&&(de=f(ne,le));var _e=ne[le][1],xe=ne[le][2],Ee=q.append(be?"rect":"circle").attr("data-i",te).attr("data-j",le).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(be){var he=de[1]-_e,me=de[2]-xe,Se=me?5:Math.max(Math.min(25,Math.abs(he)-5),5),Me=he?5:Math.max(Math.min(25,Math.abs(me)-5),5);Ee.classed(me?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Se).attr("height",Me).attr("x",_e-Se/2).attr("y",xe-Me/2).attr("transform",m(he/2,me/2))}else Ee.classed("cursor-grab",!0).attr("r",5).attr("cx",_e).attr("cy",xe);S[te][le]={element:Ee.node(),gd:A,prepFn:Z,doneFn:j,clickFn:B},v.init(S[te][le])}}}(V.append("g").attr("class","outline-controllers")),E=[],_.length&&(E[0]={element:k[0][0],gd:A,prepFn:function ee(q){(D=+q.srcElement.getAttribute("data-i"))||(D=0),E[D].moveFn=H},doneFn:function U(){P()},clickFn:function $(q){2===q&&function(te){if(e(te._fullLayout.dragmode)){s(te);var ne=te._fullLayout._activeSelectionIndex,se=(te.layout||{}).selections||[];if(ne<se.length){for(var ie=[],ue=0;ue<se.length;ue++)ue!==ne&&ie.push(se[ue]);delete te._fullLayout._activeSelectionIndex;var le=te._fullLayout.selections[ne];te._fullLayout._deselect={xref:le.xref,yref:le.yref},n.call("_guiRelayout",te,{selections:ie})}}}(A)}},v.init(E[0])))}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("../../plots/cartesian/axes"),h=y("./draw_newshape/helpers").readPaths,e=y("./display_outlines"),n=y("./handle_outline").clearOutlineControllers,r=y("../color"),o=y("../drawing"),t=y("../../plot_api/plot_template").arrayEditor,d=y("../dragelement"),a=y("../../lib/setcursor"),i=y("./constants"),s=y("./helpers"),c=s.getPathString;function l(_){var k=_._fullLayout;for(var w in k._shapeUpperLayer.selectAll("path").remove(),k._shapeLowerLayer.selectAll("path").remove(),k._plots){var C=k._plots[w].shapelayer;C&&C.selectAll("path").remove()}for(var A=0;A<k.shapes.length;A++)k.shapes[A].visible&&u(_,A)}function p(_){return!!_._fullLayout._outlining}function g(_){return!_._context.edits.shapePosition}function u(_,k){_._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+k+'"]').remove();var w=s.makeShapesOptionsAndPlotinfo(_,k),C=w.options,A=w.plotinfo;C._input&&!1!==C.visible&&function O(P){var S=c(_,C),E={"data-index":k,"fill-rule":C.fillrule,d:S},D=C.opacity,z=C.fillcolor,N=C.line.width?C.line.color:"rgba(0,0,0,0)",V=C.line.width,X=C.line.dash;V||!0!==C.editable||(V=5,X="solid");var J="Z"!==S[S.length-1],G=g(_)&&C.editable&&_._fullLayout._activeShapeIndex===k;G&&(z=J?"rgba(0,0,0,0)":_._fullLayout.activeshape.fillcolor,D=_._fullLayout.activeshape.opacity);var Z,re=P.append("path").attr(E).style("opacity",D).call(r.stroke,N).call(r.fill,z).call(o.dashLine,X,V);if(x(re,_,C),(G||_._context.edits.shapePosition)&&(Z=t(_.layout,"shapes",C)),G){re.style({cursor:"move"});var j={element:re.node(),plotinfo:A,gd:_,editHelpers:Z,isActiveShape:!0},B=h(S,_);e(B,re,j)}else _._context.edits.shapePosition?function(H,ee,U,$,q,te){var ne,se,ie,ue,le,de,be,_e,xe,Ee,he,me,Se,Me,Ie,Fe,Ne="pixel"===U.xsizemode,De="pixel"===U.ysizemode,$e="line"===U.type,Re="path"===U.type,ze=te.modifyItem,Ue=b.getFromId(H,U.xref),je=b.getRefType(U.xref),rt=b.getFromId(H,U.yref),ut=b.getRefType(U.yref),gt=s.getDataToPixel(H,Ue,!1,je),At=s.getDataToPixel(H,rt,!0,ut),_t=s.getPixelToData(H,Ue,!1,je),it=s.getPixelToData(H,rt,!0,ut),et=$e?function(){var Xt=Math.max(U.line.width,10),He=q.append("g").attr("data-index",$);He.append("path").attr("d",ee.attr("d")).style({cursor:"move","stroke-width":Xt,"stroke-opacity":"0"});var Je={"fill-opacity":"0"},pe=Math.max(Xt/2,10);return He.append("circle").attr({"data-line-point":"start-point",cx:Ne?gt(U.xanchor)+U.x0:gt(U.x0),cy:De?At(U.yanchor)-U.y0:At(U.y0),r:pe}).style(Je).classed("cursor-grab",!0),He.append("circle").attr({"data-line-point":"end-point",cx:Ne?gt(U.xanchor)+U.x1:gt(U.x1),cy:De?At(U.yanchor)-U.y1:At(U.y1),r:pe}).style(Je).classed("cursor-grab",!0),He}():ee,wt={element:et.node(),gd:H,prepFn:function(Xt){var He,Je,pe,we,Be,We,Ke,Ye;p(H)||(Ne&&(le=gt(U.xanchor)),De&&(de=At(U.yanchor)),"path"===U.type?Ie=U.path:(ne=Ne?U.x0:gt(U.x0),se=De?U.y0:At(U.y0),ie=Ne?U.x1:gt(U.x1),ue=De?U.y1:At(U.y1)),ne<ie?(xe=ne,Se="x0",Ee=ie,Me="x1"):(xe=ie,Se="x1",Ee=ne,Me="x0"),!De&&se<ue||De&&se>ue?(be=se,he="y0",_e=ue,me="y1"):(be=ue,he="y1",_e=se,me="y0"),Gt(Xt),ar(q,U),He=ee,Be=(Je=U).yref,We=b.getFromId(pe=H,we=Je.xref),Ke=b.getFromId(pe,Be),Ye="","paper"===we||We.autorange||(Ye+=we),"paper"===Be||Ke.autorange||(Ye+=Be),o.setClipUrl(He,Ye?"clip"+pe._fullLayout._uid+Ye:null,pe),wt.moveFn="move"===Fe?Kt:cr,wt.altKey=Xt.altKey)},doneFn:function(){p(H)||(a(ee),hr(q),x(ee,H,U),m.call("_guiRelayout",H,te.getUpdateObj()))},clickFn:function(){p(H)||hr(q)}};function Gt(Xt){if(p(H))Fe=null;else if($e)Fe="path"===Xt.target.tagName?"move":"start-point"===Xt.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var He=wt.element.getBoundingClientRect(),Je=He.right-He.left,pe=He.bottom-He.top,We=!Re&&Je>10&&pe>10&&!Xt.shiftKey?d.getCursor((Xt.clientX-He.left)/Je,1-(Xt.clientY-He.top)/pe):"move";a(ee,We),Fe=We.split("-")[0]}}function Kt(Xt,He){if("path"===U.type){var Je=function(Be){return Be},pe=Je,we=Je;Ne?ze("xanchor",U.xanchor=_t(le+Xt)):(pe=function(Be){return _t(gt(Be)+Xt)},Ue&&"date"===Ue.type&&(pe=s.encodeDate(pe))),De?ze("yanchor",U.yanchor=it(de+He)):(we=function(Be){return it(At(Be)+He)},rt&&"date"===rt.type&&(we=s.encodeDate(we))),ze("path",U.path=f(Ie,pe,we))}else Ne?ze("xanchor",U.xanchor=_t(le+Xt)):(ze("x0",U.x0=_t(ne+Xt)),ze("x1",U.x1=_t(ie+Xt))),De?ze("yanchor",U.yanchor=it(de+He)):(ze("y0",U.y0=it(se+He)),ze("y1",U.y1=it(ue+He)));ee.attr("d",c(H,U)),ar(q,U)}function cr(Xt,He){if(Re){var Je=function(Le){return Le},pe=Je,we=Je;Ne?ze("xanchor",U.xanchor=_t(le+Xt)):(pe=function(Le){return _t(gt(Le)+Xt)},Ue&&"date"===Ue.type&&(pe=s.encodeDate(pe))),De?ze("yanchor",U.yanchor=it(de+He)):(we=function(Le){return it(At(Le)+He)},rt&&"date"===rt.type&&(we=s.encodeDate(we))),ze("path",U.path=f(Ie,pe,we))}else if($e){if("resize-over-start-point"===Fe){var Be=ne+Xt,We=De?se-He:se+He;ze("x0",U.x0=Ne?Be:_t(Be)),ze("y0",U.y0=De?We:it(We))}else if("resize-over-end-point"===Fe){var Ke=ie+Xt,Ye=De?ue-He:ue+He;ze("x1",U.x1=Ne?Ke:_t(Ke)),ze("y1",U.y1=De?Ye:it(Ye))}}else{var ft=function(Le){return-1!==Fe.indexOf(Le)},ct=ft("n"),St=ft("s"),Ft=ft("w"),at=ft("e"),mt=ct?be+He:be,qt=St?_e+He:_e,Et=Ft?xe+Xt:xe,Dt=at?Ee+Xt:Ee;De&&(ct&&(mt=be-He),St&&(qt=_e-He)),(!De&&qt-mt>10||De&&mt-qt>10)&&(ze(he,U[he]=De?mt:it(mt)),ze(me,U[me]=De?qt:it(qt))),Dt-Et>10&&(ze(Se,U[Se]=Ne?Et:_t(Et)),ze(Me,U[Me]=Ne?Dt:_t(Dt)))}ee.attr("d",c(H,U)),ar(q,U)}function ar(Xt,He){(Ne||De)&&function(){var Je="path"!==He.type,pe=Xt.selectAll(".visual-cue").data([0]);pe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var we=gt(Ne?He.xanchor:v.midRange(Je?[He.x0,He.x1]:s.extractPathCoords(He.path,i.paramIsX))),Be=At(De?He.yanchor:v.midRange(Je?[He.y0,He.y1]:s.extractPathCoords(He.path,i.paramIsY)));we=s.roundPositionForSharpStrokeRendering(we,1),Be=s.roundPositionForSharpStrokeRendering(Be,1),pe.attr("d",Ne&&De?"M"+(we-1-1)+","+(Be-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":Ne?"M"+(we-1-1)+","+(Be-9-1)+"v18 h2 v-18 Z":"M"+(we-9-1)+","+(Be-1-1)+"h18 v2 h-18 Z")}()}function hr(Xt){Xt.selectAll(".visual-cue").remove()}d.init(wt),et.node().onmousemove=Gt}(_,re,C,k,P,Z):!0===C.editable&&re.style("pointer-events",J||r.opacity(z)*D<=.5?"stroke":"all");re.node().addEventListener("click",function(){return function(H,ee){if(g(H)){var U=+ee.node().getAttribute("data-index");if(U>=0){if(U===H._fullLayout._activeShapeIndex)return void T(H);H._fullLayout._activeShapeIndex=U,H._fullLayout._deactivateShape=T,l(H)}}}(_,re)})}("below"!==C.layer?_._fullLayout._shapeUpperLayer:"paper"===C.xref||"paper"===C.yref?_._fullLayout._shapeLowerLayer:A._hadPlotinfo?(A.mainplotinfo||A).shapelayer:_._fullLayout._shapeLowerLayer)}function x(_,k,w){var C=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(_,C?"clip"+k._fullLayout._uid+C:null,k)}function f(_,k,w){return _.replace(i.segmentRE,function(C){var A=0,O=C.charAt(0),P=i.paramIsX[O],S=i.paramIsY[O],E=i.numParams[O];return O+C.substr(1).replace(i.paramRE,function(D){return A>=E||(P[A]?D=k(D):S[A]&&(D=w(D)),A++),D})})}function T(_){g(_)&&_._fullLayout._activeShapeIndex>=0&&(n(_),delete _._fullLayout._activeShapeIndex,l(_))}Q.exports={draw:l,drawOne:u,eraseActiveShape:function(_){if(g(_)){n(_);var k=_._fullLayout._activeShapeIndex,w=(_.layout||{}).shapes||[];if(k<w.length){for(var C=[],A=0;A<w.length;A++)A!==k&&C.push(w[A]);delete _._fullLayout._activeShapeIndex,m.call("_guiRelayout",_,{shapes:C})}}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(y,Q,K){"use strict";var m=y("../../drawing/attributes").dash,v=y("../../../lib/extend").extendFlat;Q.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:v({},m,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(y,Q,K){"use strict";Q.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(y,Q,K){"use strict";var m=y("../../color");Q.exports=function(v,b,h){h("newshape.drawdirection"),h("newshape.layer"),h("newshape.fillcolor"),h("newshape.fillrule"),h("newshape.opacity"),h("newshape.line.width")&&(h("newshape.line.color",m.contrast((v||{}).plot_bgcolor||"#FFF")),h("newshape.line.dash")),h("activeshape.fillcolor"),h("activeshape.opacity")}},{"../../color":367}],466:[function(y,Q,K){"use strict";var m=y("parse-svg-path"),v=y("./constants"),b=v.CIRCLE_SIDES,h=v.SQRT2,e=y("../../selections/helpers"),n=e.p2r,r=e.r2p,o=[0,3,4,5,6,1,2],t=[0,3,4,1,2];function d(i,s){return Math.abs(i-s)<=1e-6}function a(i,s){var c=s[1]-i[1],l=s[2]-i[2];return Math.sqrt(c*c+l*l)}K.writePaths=function(i){var s=i.length;if(!s)return"M0,0Z";for(var c="",l=0;l<s;l++)for(var p=i[l].length,g=0;g<p;g++){var u=i[l][g][0];if("Z"===u)c+="Z";else for(var x=i[l][g].length,f=0;f<x;f++){var T=f;"Q"===u||"S"===u?T=t[f]:"C"===u&&(T=o[f]),c+=i[l][g][T],f>0&&f<x-1&&(c+=",")}}return c},K.readPaths=function(i,s,c,l){var p,g,u,x=m(i),f=[],T=-1,_=0,k=0,w=function(){g=_,u=k};w();for(var C=0;C<x.length;C++){var E=[],D=x[C][0],z=D;switch(D){case"M":f[++T]=[],E.push([z,_=+x[C][1],k=+x[C][2]]),w();break;case"Q":case"S":E.push([z,_=+x[C][3],k=+x[C][4],+x[C][1],+x[C][2]]);break;case"C":E.push([z,_=+x[C][5],k=+x[C][6],+x[C][1],+x[C][2],+x[C][3],+x[C][4]]);break;case"T":case"L":E.push([z,_=+x[C][1],k=+x[C][2]]);break;case"H":E.push([z="L",_=+x[C][1],k]);break;case"V":E.push([z="L",_,k=+x[C][1]]);break;case"A":z="L";var N=+x[C][1],V=+x[C][2];+x[C][4]||(N=-N,V=-V);var X=_-N,J=k;for(p=1;p<=b/2;p++){var G=2*Math.PI*p/b;E.push([z,X+N*Math.cos(G),J+V*Math.sin(G)])}break;case"Z":_===g&&k===u||E.push([z,_=g,k=u])}for(var Z=(c||{}).domain,re=s._fullLayout._size,j=c&&"pixel"===c.xsizemode,B=c&&"pixel"===c.ysizemode,H=!1===l,ee=0;ee<E.length;ee++){for(p=0;p+2<7;p+=2){var U=E[ee][p+1],$=E[ee][p+2];void 0!==U&&void 0!==$&&(_=U,k=$,c&&(c.xaxis&&c.xaxis.p2r?(H&&(U-=c.xaxis._offset),U=j?r(c.xaxis,c.xanchor)+U:n(c.xaxis,U)):(H&&(U-=re.l),Z?U=Z.x[0]+U/re.w:U/=re.w),c.yaxis&&c.yaxis.p2r?(H&&($-=c.yaxis._offset),$=B?r(c.yaxis,c.yanchor)-$:n(c.yaxis,$)):(H&&($-=re.t),$=Z?Z.y[1]-$/re.h:1-$/re.h)),E[ee][p+1]=U,E[ee][p+2]=$)}f[T].push(E[ee].slice())}}return f},K.pointsOnRectangle=function(i){if(5!==i.length)return!1;for(var s=1;s<3;s++)if(!d(i[0][s]-i[1][s],i[3][s]-i[2][s])||!d(i[0][s]-i[3][s],i[1][s]-i[2][s]))return!1;return!(!d(i[0][1],i[1][1])&&!d(i[0][1],i[3][1])||!(a(i[0],i[1])*a(i[0],i[3])))},K.pointsOnEllipse=function(i){var s=i.length;if(s!==b+1)return!1;s=b;for(var c=0;c<s;c++){var l=(2*s-c)%s,p=(s/2+l)%s;if(!d(a(i[c],i[(s/2+c)%s]),a(i[l],i[p])))return!1}return!0},K.handleEllipse=function(i,s,c){if(!i)return[s,c];var l=K.ellipseOver({x0:s[0],y0:s[1],x1:c[0],y1:c[1]}),p=(l.x1+l.x0)/2,g=(l.y1+l.y0)/2,u=(l.x1-l.x0)/2,x=(l.y1-l.y0)/2;u||(u=x/=h),x||(x=u/=h);for(var f=[],T=0;T<b;T++){var _=2*T*Math.PI/b;f.push([p+u*Math.cos(_),g+x*Math.sin(_)])}return f},K.ellipseOver=function(i){var s=i.x0,c=i.y0,l=i.x1,p=i.y1,g=l-s,u=p-c,x=((s-=g)+l)/2,f=((c-=u)+p)/2;return{x0:x-(g*=h),y0:f-(u*=h),x1:x+g,y1:f+u}},K.fixDatesForPaths=function(i,s,c){var l="date"===s.type,p="date"===c.type;if(!l&&!p)return i;for(var g=0;g<i.length;g++)for(var u=0;u<i[g].length;u++)for(var x=0;x+2<i[g][u].length;x+=2)l&&(i[g][u][x+1]=i[g][u][x+1].replace(" ","_")),p&&(i[g][u][x+2]=i[g][u][x+2].replace(" ","_"));return i}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(y,Q,K){"use strict";var m=y("../../dragelement/helpers"),v=m.drawMode,b=m.openMode,h=y("./constants"),e=h.i000,n=h.i090,r=h.i180,o=h.i270,t=h.cos45,d=h.sin45,a=y("../../selections/helpers"),i=a.p2r,s=a.r2p,c=y(".././handle_outline").clearOutline,l=y("./helpers"),p=l.readPaths,g=l.writePaths,u=l.ellipseOver,x=l.fixDatesForPaths;Q.exports=function(f,T){if(f.length){var _=f[0][0];if(_){var k=_.getAttribute("d"),w=T.gd,C=w._fullLayout.newshape,A=T.plotinfo,O=A.xaxis,P=A.yaxis,S=!!A.domain||!A.xaxis,E=!!A.domain||!A.yaxis,D=T.isActiveShape,z=T.dragmode,N=(w.layout||{}).shapes||[];if(!v(z)&&void 0!==D){var V=w._fullLayout._activeShapeIndex;if(V<N.length)switch(w._fullLayout.shapes[V].type){case"rect":z="drawrect";break;case"circle":z="drawcircle";break;case"line":z="drawline";break;case"path":var X=N[V].path||"";z="Z"===X[X.length-1]?"drawclosedpath":"drawopenpath"}}var J,G=b(z),Z=p(k,w,A,D),re={editable:!0,xref:S?"paper":O._id,yref:E?"paper":P._id,layer:C.layer,opacity:C.opacity,line:{color:C.line.color,width:C.line.width,dash:C.line.dash}};if(G||(re.fillcolor=C.fillcolor,re.fillrule=C.fillrule),1===Z.length&&(J=Z[0]),J&&5===J.length&&"drawrect"===z)re.type="rect",re.x0=J[0][1],re.y0=J[0][2],re.x1=J[2][1],re.y1=J[2][2];else if(J&&"drawline"===z)re.type="line",re.x0=J[0][1],re.y0=J[0][2],re.x1=J[1][1],re.y1=J[1][2];else if(J&&"drawcircle"===z){re.type="circle";var j=J[e][1],B=J[n][1],H=J[r][1],ee=J[o][1],U=J[e][2],$=J[n][2],q=J[r][2],te=J[o][2],ne=A.xaxis&&("date"===A.xaxis.type||"log"===A.xaxis.type),se=A.yaxis&&("date"===A.yaxis.type||"log"===A.yaxis.type);ne&&(j=s(A.xaxis,j),B=s(A.xaxis,B),H=s(A.xaxis,H),ee=s(A.xaxis,ee)),se&&(U=s(A.yaxis,U),$=s(A.yaxis,$),q=s(A.yaxis,q),te=s(A.yaxis,te));var ie=(B+ee)/2,ue=(U+q)/2,le=u({x0:ie,y0:ue,x1:ie+(ee-B+H-j)/2*t,y1:ue+(te-$+q-U)/2*d});ne&&(le.x0=i(A.xaxis,le.x0),le.x1=i(A.xaxis,le.x1)),se&&(le.y0=i(A.yaxis,le.y0),le.y1=i(A.yaxis,le.y1)),re.x0=le.x0,re.y0=le.y0,re.x1=le.x1,re.y1=le.y1}else re.type="path",O&&P&&x(Z,O,P),re.path=g(Z),J=null;c(w);for(var de=T.editHelpers,be=(de||{}).modifyItem,_e=[],xe=0;xe<N.length;xe++){var Ee=w._fullLayout.shapes[xe];if(_e[xe]=Ee._input,void 0!==D&&xe===w._fullLayout._activeShapeIndex){var he=re;switch(Ee.type){case"line":case"rect":case"circle":be("x0",he.x0),be("x1",he.x1),be("y0",he.y0),be("y1",he.y1);break;case"path":be("path",he.path)}}}return void 0===D?(_e.push(re),_e):de?de.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(y,Q,K){"use strict";Q.exports={clearOutlineControllers:function(m){var v=m._fullLayout._zoomlayer;v&&v.selectAll(".outline-controllers").remove()},clearOutline:function(m){var v=m._fullLayout._zoomlayer;v&&v.selectAll(".select-outline").remove(),m._fullLayout._outlining=!1}}},{}],469:[function(y,Q,K){"use strict";var m=y("./constants"),v=y("../../lib"),b=y("../../plots/cartesian/axes");K.rangeToShapePosition=function(h){return"log"===h.type?h.r2d:function(e){return e}},K.shapePositionToRange=function(h){return"log"===h.type?h.d2r:function(e){return e}},K.decodeDate=function(h){return function(e){return e.replace&&(e=e.replace("_"," ")),h(e)}},K.encodeDate=function(h){return function(e){return h(e).replace(" ","_")}},K.extractPathCoords=function(h,e,n){var r=[];return h.match(m.segmentRE).forEach(function(o){var t=e[o.charAt(0)].drawn;if(void 0!==t){var d=o.substr(1).match(m.paramRE);if(d&&!(d.length<t)){var a=d[t],i=n?a:v.cleanNumber(a);r.push(i)}}}),r},K.getDataToPixel=function(h,e,n,r){var o,t=h._fullLayout._size;if(e)if("domain"===r)o=function(a){return e._length*(n?1-a:a)+e._offset};else{var d=K.shapePositionToRange(e);o=function(a){return e._offset+e.r2p(d(a,!0))},"date"===e.type&&(o=K.decodeDate(o))}else o=n?function(a){return t.t+t.h*(1-a)}:function(a){return t.l+t.w*a};return o},K.getPixelToData=function(h,e,n,r){var o,t=h._fullLayout._size;if(e)if("domain"===r)o=function(a){var i=(a-e._offset)/e._length;return n?1-i:i};else{var d=K.rangeToShapePosition(e);o=function(a){return d(e.p2r(a-e._offset))}}else o=n?function(a){return 1-(a-t.t)/t.h}:function(a){return(a-t.l)/t.w};return o},K.roundPositionForSharpStrokeRendering=function(h,e){var n=1===Math.round(e%2),r=Math.round(h);return n?r+.5:r},K.makeShapesOptionsAndPlotinfo=function(h,e){var n=h._fullLayout.shapes[e]||{},r=h._fullLayout._plots[n.xref+n.yref];return r?r._hadPlotinfo=!0:(r={},n.xref&&"paper"!==n.xref&&(r.xaxis=h._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(r.yaxis=h._fullLayout[n.yref+"axis"])),r.xsizemode=n.xsizemode,r.ysizemode=n.ysizemode,r.xanchor=n.xanchor,r.yanchor=n.yanchor,{options:n,plotinfo:r}},K.makeSelectionsOptionsAndPlotinfo=function(h,e){var n=h._fullLayout.selections[e]||{},r=h._fullLayout._plots[n.xref+n.yref];return r?r._hadPlotinfo=!0:(r={},n.xref&&(r.xaxis=h._fullLayout[n.xref+"axis"]),n.yref&&(r.yaxis=h._fullLayout[n.yref+"axis"])),{options:n,plotinfo:r}},K.getPathString=function(h,e){var n,r,o,t,d,a,i,s,P,S,E,z,N,V,X,c=e.type,l=b.getRefType(e.xref),p=b.getRefType(e.yref),g=b.getFromId(h,e.xref),u=b.getFromId(h,e.yref),x=h._fullLayout._size;if(g?"domain"===l?r=function(P){return g._offset+g._length*P}:(n=K.shapePositionToRange(g),r=function(P){return g._offset+g.r2p(n(P,!0))}):r=function(P){return x.l+x.w*P},u?"domain"===p?t=function(P){return u._offset+u._length*(1-P)}:(o=K.shapePositionToRange(u),t=function(P){return u._offset+u.r2p(o(P,!0))}):t=function(P){return x.t+x.h*(1-P)},"path"===c)return g&&"date"===g.type&&(r=K.decodeDate(r)),u&&"date"===u.type&&(t=K.decodeDate(t)),S=r,E=t,z=(P=e).xsizemode,N=P.ysizemode,V=P.xanchor,X=P.yanchor,P.path.replace(m.segmentRE,function(J){var G=0,Z=J.charAt(0),re=m.paramIsX[Z],j=m.paramIsY[Z],B=m.numParams[Z],H=J.substr(1).replace(m.paramRE,function(ee){return re[G]?ee="pixel"===z?S(V)+Number(ee):S(ee):j[G]&&(ee="pixel"===N?E(X)-Number(ee):E(ee)),++G>B&&(ee="X"),ee});return G>B&&(H=H.replace(/[\s,]*X.*/,""),v.log("Ignoring extra params in segment "+J)),Z+H});if("pixel"===e.xsizemode){var f=r(e.xanchor);d=f+e.x0,a=f+e.x1}else d=r(e.x0),a=r(e.x1);if("pixel"===e.ysizemode){var T=t(e.yanchor);i=T-e.y0,s=T-e.y1}else i=t(e.y0),s=t(e.y1);if("line"===c)return"M"+d+","+i+"L"+a+","+s;if("rect"===c)return"M"+d+","+i+"H"+a+"V"+s+"H"+d+"Z";var _=(d+a)/2,k=(i+s)/2,w=Math.abs(_-d),C=Math.abs(k-i),A="A"+w+","+C,O=_+w+","+k;return"M"+O+A+" 0 1,1 "+_+","+(k-C)+A+" 0 0,1 "+O+"Z"}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(y,Q,K){"use strict";var m=y("./draw");Q.exports={moduleType:"component",name:"shapes",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),supplyDrawNewShapeDefaults:y("./draw_newshape/defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("shapes"),calcAutorange:y("./calc_autorange"),draw:m.draw,drawOne:m.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(y,Q,K){"use strict";var m=y("../../plots/font_attributes"),v=y("../../plots/pad_attributes"),b=y("../../lib/extend").extendDeepAll,h=y("../../plot_api/edit_types").overrideAll,e=y("../../plots/animation_attributes"),n=y("../../plot_api/plot_template").templatedArray,r=y("./constants"),o=n("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});Q.exports=h(n("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:o,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:b(v({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:m({})},font:m({}),activebgcolor:{valType:"color",dflt:r.gripBgActiveColor},bgcolor:{valType:"color",dflt:r.railBgColor},bordercolor:{valType:"color",dflt:r.railBorderColor},borderwidth:{valType:"number",min:0,dflt:r.railBorderWidth},ticklen:{valType:"number",min:0,dflt:r.tickLength},tickcolor:{valType:"color",dflt:r.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:r.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(y,Q,K){"use strict";Q.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/array_container_defaults"),b=y("./attributes"),h=y("./constants").name,e=b.steps;function n(o,t,d){function a(p,g){return m.coerce(o,t,b,p,g)}for(var i=v(o,t,{name:"steps",handleItemDefaults:r}),s=0,c=0;c<i.length;c++)i[c].visible&&s++;if(s<2?t.visible=!1:a("visible")){t._stepCount=s;var l=t._visibleSteps=m.filterVisible(i);(i[a("active")]||{}).visible||(t.active=l[0]._index),a("x"),a("y"),m.noneOrAll(o,t,["x","y"]),a("xanchor"),a("yanchor"),a("len"),a("lenmode"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),m.coerceFont(a,"font",d.font),a("currentvalue.visible")&&(a("currentvalue.xanchor"),a("currentvalue.prefix"),a("currentvalue.suffix"),a("currentvalue.offset"),m.coerceFont(a,"currentvalue.font",t.font)),a("transition.duration"),a("transition.easing"),a("bgcolor"),a("activebgcolor"),a("bordercolor"),a("borderwidth"),a("ticklen"),a("tickwidth"),a("tickcolor"),a("minorticklen")}}function r(o,t){function d(i,s){return m.coerce(o,t,e,i,s)}if("skip"===o.method||Array.isArray(o.args)?d("visible"):t.visible=!1){d("method"),d("args");var a=d("label","step-"+t._index);d("value",a),d("execute")}}Q.exports=function(o,t){v(o,t,{name:h,handleItemDefaults:n})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../plots/plots"),b=y("../color"),h=y("../drawing"),e=y("../../lib"),n=e.strTranslate,r=y("../../lib/svg_text_utils"),o=y("../../plot_api/plot_template").arrayEditor,t=y("./constants"),d=y("../../constants/alignment"),a=d.LINE_SPACING,i=d.FROM_TL,s=d.FROM_BR;function c(E){return t.autoMarginIdRoot+E._index}function l(E){return E._index}function p(E,D){var z=h.tester.selectAll("g."+t.labelGroupClass).data(D._visibleSteps);z.enter().append("g").classed(t.labelGroupClass,!0);var N=0,V=0;z.each(function(ee){var U=x(m.select(this),{step:ee},D).node();if(U){var $=h.bBox(U);V=Math.max(V,$.height),N=Math.max(N,$.width)}}),z.remove();var X=D._dims={};X.inputAreaWidth=Math.max(t.railWidth,t.gripHeight);var J=E._fullLayout._size;if(X.lx=J.l+J.w*D.x,X.ly=J.t+J.h*(1-D.y),X.outerLength="fraction"===D.lenmode?Math.round(J.w*D.len):D.len,X.inputAreaStart=0,X.inputAreaLength=Math.round(X.outerLength-D.pad.l-D.pad.r),X.labelStride=Math.max(1,Math.ceil((N+t.labelPadding)/((X.inputAreaLength-2*t.stepInset)/(D._stepCount-1)))),X.labelHeight=V,X.currentValueMaxWidth=0,X.currentValueHeight=0,X.currentValueTotalHeight=0,X.currentValueMaxLines=1,D.currentvalue.visible){var re=h.tester.append("g");z.each(function(ee){var U=g(re,D,ee.label),$=U.node()&&h.bBox(U.node())||{width:0,height:0},q=r.lineCount(U);X.currentValueMaxWidth=Math.max(X.currentValueMaxWidth,Math.ceil($.width)),X.currentValueHeight=Math.max(X.currentValueHeight,Math.ceil($.height)),X.currentValueMaxLines=Math.max(X.currentValueMaxLines,q)}),X.currentValueTotalHeight=X.currentValueHeight+D.currentvalue.offset,re.remove()}X.height=X.currentValueTotalHeight+t.tickOffset+D.ticklen+t.labelOffset+X.labelHeight+D.pad.t+D.pad.b;var j="left";e.isRightAnchor(D)&&(X.lx-=X.outerLength,j="right"),e.isCenterAnchor(D)&&(X.lx-=X.outerLength/2,j="center");var B="top";e.isBottomAnchor(D)&&(X.ly-=X.height,B="bottom"),e.isMiddleAnchor(D)&&(X.ly-=X.height/2,B="middle"),X.outerLength=Math.ceil(X.outerLength),X.height=Math.ceil(X.height),X.lx=Math.round(X.lx),X.ly=Math.round(X.ly);var H={y:D.y,b:X.height*s[B],t:X.height*i[B]};"fraction"===D.lenmode?(H.l=0,H.xl=D.x-D.len*i[j],H.r=0,H.xr=D.x+D.len*s[j]):(H.x=D.x,H.l=X.outerLength*i[j],H.r=X.outerLength*s[j]),v.autoMargin(E,c(D),H)}function g(E,D,z){if(D.currentvalue.visible){var N,V,X=D._dims;switch(D.currentvalue.xanchor){case"right":N=X.inputAreaLength-t.currentValueInset-X.currentValueMaxWidth,V="left";break;case"center":N=.5*X.inputAreaLength,V="middle";break;default:N=t.currentValueInset,V="left"}var J=e.ensureSingle(E,"text",t.labelClass,function(H){H.attr({"text-anchor":V,"data-notex":1})}),G=D.currentvalue.prefix?D.currentvalue.prefix:"";if("string"==typeof z)G+=z;else{var Z=D.steps[D.active].label,re=D._gd._fullLayout._meta;re&&(Z=e.templateString(Z,re)),G+=Z}D.currentvalue.suffix&&(G+=D.currentvalue.suffix),J.call(h.font,D.currentvalue.font).text(G).call(r.convertToTspans,D._gd);var j=r.lineCount(J);return r.positionText(J,N,(X.currentValueMaxLines+1-j)*D.currentvalue.font.size*a),J}}function u(E,D,z){e.ensureSingle(E,"rect",t.gripRectClass,function(N){N.call(k,D,E,z).style("pointer-events","all")}).attr({width:t.gripWidth,height:t.gripHeight,rx:t.gripRadius,ry:t.gripRadius}).call(b.stroke,z.bordercolor).call(b.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function x(E,D,z){var N=e.ensureSingle(E,"text",t.labelClass,function(J){J.attr({"text-anchor":"middle","data-notex":1})}),V=D.step.label,X=z._gd._fullLayout._meta;return X&&(V=e.templateString(V,X)),N.call(h.font,z.font).text(V).call(r.convertToTspans,z._gd),N}function f(E,D){var z=e.ensureSingle(E,"g",t.labelsClass),N=D._dims,V=z.selectAll("g."+t.labelGroupClass).data(N.labelSteps);V.enter().append("g").classed(t.labelGroupClass,!0),V.exit().remove(),V.each(function(X){var J=m.select(this);J.call(x,X,D),h.setTranslate(J,A(D,X.fraction),t.tickOffset+D.ticklen+D.font.size*a+t.labelOffset+N.currentValueTotalHeight)})}function T(E,D,z,N,V){var X=Math.round(N*(z._stepCount-1)),J=z._visibleSteps[X]._index;J!==z.active&&_(E,D,z,J,!0,V)}function _(E,D,z,N,V,X){var J=z.active;z.active=N,o(E.layout,t.name,z).applyUpdate("active",N);var G=z.steps[z.active];D.call(C,z,X),D.call(g,z),E.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:V,previousActive:J}),G&&G.method&&V&&(D._nextMethod?(D._nextMethod.step=G,D._nextMethod.doCallback=V,D._nextMethod.doTransition=X):(D._nextMethod={step:G,doCallback:V,doTransition:X},D._nextMethodRaf=window.requestAnimationFrame(function(){var Z=D._nextMethod.step;Z.method&&(Z.execute&&v.executeAPICommand(E,Z.method,Z.args),D._nextMethod=null,D._nextMethodRaf=null)})))}function k(E,D,z){var N=z.node(),V=m.select(D);function X(){return z.data()[0]}function J(){var G=X();D.emit("plotly_sliderstart",{slider:G});var Z=z.select("."+t.gripRectClass);m.event.stopPropagation(),m.event.preventDefault(),Z.call(b.fill,G.activebgcolor);var re=O(G,m.mouse(N)[0]);function j(){var H=X(),ee=O(H,m.mouse(N)[0]);T(D,z,H,ee,!1)}function B(){var H=X();H._dragging=!1,Z.call(b.fill,H.bgcolor),V.on("mouseup",null),V.on("mousemove",null),V.on("touchend",null),V.on("touchmove",null),D.emit("plotly_sliderend",{slider:H,step:H.steps[H.active]})}T(D,z,G,re,!0),G._dragging=!0,V.on("mousemove",j),V.on("touchmove",j),V.on("mouseup",B),V.on("touchend",B)}E.on("mousedown",J),E.on("touchstart",J)}function w(E,D){var z=E.selectAll("rect."+t.tickRectClass).data(D._visibleSteps),N=D._dims;z.enter().append("rect").classed(t.tickRectClass,!0),z.exit().remove(),z.attr({width:D.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(V,X){var J=X%N.labelStride==0,G=m.select(this);G.attr({height:J?D.ticklen:D.minorticklen}).call(b.fill,D.tickcolor),h.setTranslate(G,A(D,X/(D._stepCount-1))-.5*D.tickwidth,(J?t.tickOffset:t.minorTickOffset)+N.currentValueTotalHeight)})}function C(E,D,z){for(var N=E.select("rect."+t.gripRectClass),V=0,X=0;X<D._stepCount;X++)if(D._visibleSteps[X]._index===D.active){V=X;break}var J=A(D,V/(D._stepCount-1));if(!D._invokingCommand){var G=N;z&&D.transition.duration>0&&(G=G.transition().duration(D.transition.duration).ease(D.transition.easing)),G.attr("transform",n(J-.5*t.gripWidth,D._dims.currentValueTotalHeight))}}function A(E,D){var z=E._dims;return z.inputAreaStart+t.stepInset+(z.inputAreaLength-2*t.stepInset)*Math.min(1,Math.max(0,D))}function O(E,D){var z=E._dims;return Math.min(1,Math.max(0,(D-t.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*t.stepInset-2*z.inputAreaStart)))}function P(E,D,z){var N=z._dims,V=e.ensureSingle(E,"rect",t.railTouchRectClass,function(X){X.call(k,D,E,z).style("pointer-events","all")});V.attr({width:N.inputAreaLength,height:Math.max(N.inputAreaWidth,t.tickOffset+z.ticklen+N.labelHeight)}).call(b.fill,z.bgcolor).attr("opacity",0),h.setTranslate(V,0,N.currentValueTotalHeight)}function S(E,D){var z=D._dims,N=z.inputAreaLength-2*t.railInset,V=e.ensureSingle(E,"rect",t.railRectClass);V.attr({width:N,height:t.railWidth,rx:t.railRadius,ry:t.railRadius,"shape-rendering":"crispEdges"}).call(b.stroke,D.bordercolor).call(b.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px"),h.setTranslate(V,t.railInset,.5*(z.inputAreaWidth-t.railWidth)+z.currentValueTotalHeight)}Q.exports=function(E){var D=E._fullLayout,z=function(Z,re){for(var j=Z[t.name],B=[],H=0;H<j.length;H++){var ee=j[H];ee.visible&&(ee._gd=re,B.push(ee))}return B}(D,E),N=D._infolayer.selectAll("g."+t.containerClassName).data(z.length>0?[0]:[]);function V(Z){Z._commandObserver&&(Z._commandObserver.remove(),delete Z._commandObserver),v.autoMargin(E,c(Z))}if(N.enter().append("g").classed(t.containerClassName,!0).style("cursor","ew-resize"),N.exit().each(function(){m.select(this).selectAll("g."+t.groupClassName).each(V)}).remove(),0!==z.length){var X=N.selectAll("g."+t.groupClassName).data(z,l);X.enter().append("g").classed(t.groupClassName,!0),X.exit().each(V).remove();for(var J=0;J<z.length;J++)p(E,z[J]);X.each(function(Z){var re=m.select(this);(function(j){var B=j._dims;B.labelSteps=[];for(var H=j._stepCount,ee=0;ee<H;ee+=B.labelStride)B.labelSteps.push({fraction:ee/(H-1),step:j._visibleSteps[ee]})})(Z),v.manageCommandObserver(E,Z,Z._visibleSteps,function(j){var B=re.data()[0];B.active!==j.index&&(B._dragging||_(E,re,B,j.index,!1,!0))}),function(j,B,H){(H.steps[H.active]||{}).visible||(H.active=H._visibleSteps[0]._index),B.call(g,H).call(S,H).call(f,H).call(w,H).call(P,j,H).call(u,j,H);var ee=H._dims;h.setTranslate(B,ee.lx+H.pad.l,ee.ly+H.pad.t),B.call(C,H,!1),B.call(g,H)}(E,m.select(this),Z)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(y,Q,K){"use strict";var m=y("./constants");Q.exports={moduleType:"component",name:m.name,layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),draw:y("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=y("../../plots/plots"),h=y("../../registry"),e=y("../../lib"),n=e.strTranslate,r=y("../drawing"),o=y("../color"),t=y("../../lib/svg_text_utils"),d=y("../../constants/interactions"),a=y("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;Q.exports={draw:function(s,c,l){var p,u=l.propName,x=l.placeholder,f=l.traceIndex,T=l.avoid||{},_=l.attributes,k=l.transform,w=l.containerGroup,C=s._fullLayout,A=1,O=!1,P=l.propContainer.title,S=(P&&P.text?P.text:"").trim(),E=P&&P.font?P.font:{},D=E.family,z=E.size,N=E.color;"title.text"===u?p="titleText":-1!==u.indexOf("axis")?p="axisTitleText":u.indexOf(!0)&&(p="colorbarTitleText");var V=s._context.edits[p];""===S?A=0:S.replace(i," % ")===x.replace(i," % ")&&(A=.2,O=!0,V||(S="")),l._meta?S=e.templateString(S,l._meta):C._meta&&(S=e.templateString(S,C._meta));var X,J=S||V;w||(w=e.ensureSingle(C._infolayer,"g","g-"+c),X=C._hColorbarMoveTitle);var G=w.selectAll("text").data(J?[0]:[]);if(G.enter().append("text"),G.text(S).attr("class",c),G.exit().remove(),!J)return w;function Z(B){e.syncOrAsync([re,j],B)}function re(B){var H;return!k&&X&&(k={}),k?(H="",k.rotate&&(H+="rotate("+[k.rotate,_.x,_.y]+")"),(k.offset||X)&&(H+=n(0,(k.offset||0)-(X||0)))):H=null,B.attr("transform",H),B.style({"font-family":D,"font-size":m.round(z,2)+"px",fill:o.rgb(N),opacity:A*o.opacity(N),"font-weight":b.fontWeight}).attr(_).call(t.convertToTspans,s),b.previousPromises(s)}function j(B){var H=m.select(B.node().parentNode);if(T&&T.selection&&T.side&&S){H.attr("transform",null);var ee=a[T.side],U="left"===T.side||"top"===T.side?-1:1,$=v(T.pad)?T.pad:2,q=r.bBox(H.node()),ne=T.maxShift||U*({left:0,top:0,right:C.width,bottom:C.height}[T.side]-q[T.side]),se=0;if(ne<0)se=ne;else{var ie=T.offsetLeft||0,ue=T.offsetTop||0;q.left-=ie,q.right-=ie,q.top-=ue,q.bottom-=ue,T.selection.each(function(){var de=r.bBox(this);e.bBoxIntersect(q,de,$)&&(se=Math.max(se,U*(de[T.side]-q[ee])+$))}),se=Math.min(ne,se)}if(se>0||ne<0){var le={left:[-se,0],right:[se,0],top:[0,-se],bottom:[0,se]}[T.side];H.attr("transform",n(le[0],le[1]))}}}return G.call(Z),V&&(S?G.on(".opacity",null):(A=0,O=!0,G.text(x).on("mouseover.opacity",function(){m.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})),G.call(t.makeEditable,{gd:s}).on("edit",function(B){void 0!==f?h.call("_guiRestyle",s,u,B,f):h.call("_guiRelayout",s,u,B)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Z)}).on("input",function(B){this.text(B||" ").call(t.positionText,_.x,_.y)})),G.classed("js-placeholder",O),w}}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(y,Q,K){"use strict";var m=y("../../plots/font_attributes"),v=y("../color/attributes"),b=y("../../lib/extend").extendFlat,h=y("../../plot_api/edit_types").overrideAll,e=y("../../plots/pad_attributes"),n=y("../../plot_api/plot_template").templatedArray,r=n("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Q.exports=h(n("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:r,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:b(e({editType:"arraydraw"}),{}),font:m({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:v.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(y,Q,K){"use strict";Q.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],479:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/array_container_defaults"),b=y("./attributes"),h=y("./constants").name,e=b.buttons;function n(o,t,d){function a(i,s){return m.coerce(o,t,b,i,s)}a("visible",v(o,t,{name:"buttons",handleItemDefaults:r}).length>0)&&(a("active"),a("direction"),a("type"),a("showactive"),a("x"),a("y"),m.noneOrAll(o,t,["x","y"]),a("xanchor"),a("yanchor"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),m.coerceFont(a,"font",d.font),a("bgcolor",d.paper_bgcolor),a("bordercolor"),a("borderwidth"))}function r(o,t){function d(a,i){return m.coerce(o,t,e,a,i)}d("visible","skip"===o.method||Array.isArray(o.args))&&(d("method"),d("args"),d("args2"),d("label"),d("execute"))}Q.exports=function(o,t){v(o,t,{name:h,handleItemDefaults:n})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../plots/plots"),b=y("../color"),h=y("../drawing"),e=y("../../lib"),n=y("../../lib/svg_text_utils"),r=y("../../plot_api/plot_template").arrayEditor,o=y("../../constants/alignment").LINE_SPACING,t=y("./constants"),d=y("./scrollbox");function a(A){return A._index}function i(A,O){return+A.attr(t.menuIndexAttrName)===O._index}function s(A,O,P,S,E,D,z,N){O.active=z,r(A.layout,t.name,O).applyUpdate("active",z),"buttons"===O.type?l(A,S,null,null,O):"dropdown"===O.type&&(E.attr(t.menuIndexAttrName,"-1"),c(A,S,E,D,O),N||l(A,S,E,D,O))}function c(A,O,P,S,E){var D=e.ensureSingle(O,"g",t.headerClassName,function(G){G.style("pointer-events","all")}),z=E._dims,X={y:E.pad.t,yPad:0,x:E.pad.l,xPad:0,index:0},J={width:z.headerWidth,height:z.headerHeight};D.call(p,E,E.buttons[E.active]||t.blankHeaderOpts,A).call(w,E,X,J),e.ensureSingle(O,"text",t.headerArrowClassName,function(G){G.attr("text-anchor","end").call(h.font,E.font).text(t.arrowSymbol[E.direction])}).attr({x:z.headerWidth-t.arrowOffsetX+E.pad.l,y:z.headerHeight/2+t.textOffsetY+E.pad.t}),D.on("click",function(){P.call(C,String(i(P,E)?-1:E._index)),l(A,O,P,S,E)}),D.on("mouseover",function(){D.call(f)}),D.on("mouseout",function(){D.call(T,E)}),h.setTranslate(O,z.lx,z.ly)}function l(A,O,P,S,E){P||(P=O).attr("pointer-events","all");var D=-1==+P.attr(t.menuIndexAttrName)&&"buttons"!==E.type?[]:E.buttons,z="dropdown"===E.type?t.dropdownButtonClassName:t.buttonClassName,N=P.selectAll("g."+z).data(e.filterVisible(D)),V=N.enter().append("g").classed(z,!0),X=N.exit();"dropdown"===E.type?(V.attr("opacity","0").transition().attr("opacity","1"),X.transition().attr("opacity","0").remove()):X.remove();var J=0,G=0,Z=E._dims,re=-1!==["up","down"].indexOf(E.direction);"dropdown"===E.type&&(re?G=Z.headerHeight+t.gapButtonHeader:J=Z.headerWidth+t.gapButtonHeader),"dropdown"===E.type&&"up"===E.direction&&(G=-t.gapButtonHeader+t.gapButton-Z.openHeight),"dropdown"===E.type&&"left"===E.direction&&(J=-t.gapButtonHeader+t.gapButton-Z.openWidth);var H,ee,U,j={x:Z.lx+J+E.pad.l,y:Z.ly+G+E.pad.t,yPad:t.gapButton,xPad:t.gapButton,index:0},B={l:j.x+E.borderwidth,t:j.y+E.borderwidth};N.each(function(H,ee){var U=m.select(this);U.call(p,E,H,A).call(w,E,j),U.on("click",function(){m.event.defaultPrevented||(H.execute&&(H.args2&&E.active===ee?(s(A,E,0,O,P,S,-1),v.executeAPICommand(A,H.method,H.args2)):(s(A,E,0,O,P,S,ee),v.executeAPICommand(A,H.method,H.args))),A.emit("plotly_buttonclicked",{menu:E,button:H,active:E.active}))}),U.on("mouseover",function(){U.call(f)}),U.on("mouseout",function(){U.call(T,E),N.call(x,E)})}),N.call(x,E),re?(B.w=Math.max(Z.openWidth,Z.headerWidth),B.h=j.y-B.t):(B.w=j.x-B.l,B.h=Math.max(Z.openHeight,Z.headerHeight)),B.direction=E.direction,S&&(N.size()?function(H,ee,U,$,q,te){var ne,se,ie,ue=q.direction,de=q._dims,be=q.active;if("up"===ue||"down"===ue)for(se=0,ie=0;ie<be;ie++)se+=de.heights[ie]+t.gapButton;else for(ne=0,ie=0;ie<be;ie++)ne+=de.widths[ie]+t.gapButton;$.enable(te,ne,se),$.hbar&&$.hbar.attr("opacity","0").transition().attr("opacity","1"),$.vbar&&$.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,S,E,B):(U=!!(H=S).vbar,(ee=!!H.hbar)&&H.hbar.transition().attr("opacity","0").each("end",function(){ee=!1,U||H.disable()}),U&&H.vbar.transition().attr("opacity","0").each("end",function(){U=!1,ee||H.disable()})))}function p(A,O,P,S){A.call(g,O).call(u,O,P,S)}function g(A,O){e.ensureSingle(A,"rect",t.itemRectClassName,function(P){P.attr({rx:t.rx,ry:t.ry,"shape-rendering":"crispEdges"})}).call(b.stroke,O.bordercolor).call(b.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function u(A,O,P,S){var E=e.ensureSingle(A,"text",t.itemTextClassName,function(N){N.attr({"text-anchor":"start","data-notex":1})}),D=P.label,z=S._fullLayout._meta;z&&(D=e.templateString(D,z)),E.call(h.font,O.font).text(D).call(n.convertToTspans,S)}function x(A,O){var P=O.active;A.each(function(S,E){var D=m.select(this);E===P&&O.showactive&&D.select("rect."+t.itemRectClassName).call(b.fill,t.activeColor)})}function f(A){A.select("rect."+t.itemRectClassName).call(b.fill,t.hoverColor)}function T(A,O){A.select("rect."+t.itemRectClassName).call(b.fill,O.bgcolor)}function _(A,O){var P=O._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},S=h.tester.selectAll("g."+t.dropdownButtonClassName).data(e.filterVisible(O.buttons));S.enter().append("g").classed(t.dropdownButtonClassName,!0);var E=-1!==["up","down"].indexOf(O.direction);S.each(function(J,G){var Z=m.select(this);Z.call(p,O,J,A);var re=Z.select("."+t.itemTextClassName),j=re.node()&&h.bBox(re.node()).width,B=Math.max(j+t.textPadX,t.minWidth),H=O.font.size*o,ee=n.lineCount(re),U=Math.max(H*ee,t.minHeight)+t.textOffsetY;U=Math.ceil(U),B=Math.ceil(B),P.widths[G]=B,P.heights[G]=U,P.height1=Math.max(P.height1,U),P.width1=Math.max(P.width1,B),E?(P.totalWidth=Math.max(P.totalWidth,B),P.openWidth=P.totalWidth,P.totalHeight+=U+t.gapButton,P.openHeight+=U+t.gapButton):(P.totalWidth+=B+t.gapButton,P.openWidth+=B+t.gapButton,P.totalHeight=Math.max(P.totalHeight,U),P.openHeight=P.totalHeight)}),E?P.totalHeight-=t.gapButton:P.totalWidth-=t.gapButton,P.headerWidth=P.width1+t.arrowPadX,P.headerHeight=P.height1,"dropdown"===O.type&&(E?(P.width1+=t.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=t.arrowPadX),S.remove();var D=P.totalWidth+O.pad.l+O.pad.r,z=P.totalHeight+O.pad.t+O.pad.b,N=A._fullLayout._size;P.lx=N.l+N.w*O.x,P.ly=N.t+N.h*(1-O.y);var V="left";e.isRightAnchor(O)&&(P.lx-=D,V="right"),e.isCenterAnchor(O)&&(P.lx-=D/2,V="center");var X="top";e.isBottomAnchor(O)&&(P.ly-=z,X="bottom"),e.isMiddleAnchor(O)&&(P.ly-=z/2,X="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),v.autoMargin(A,k(O),{x:O.x,y:O.y,l:D*({right:1,center:.5}[V]||0),r:D*({left:1,center:.5}[V]||0),b:z*({top:1,middle:.5}[X]||0),t:z*({bottom:1,middle:.5}[X]||0)})}function k(A){return t.autoMarginIdRoot+A._index}function w(A,O,P,S){S=S||{};var E=A.select("."+t.itemRectClassName),D=A.select("."+t.itemTextClassName),z=O.borderwidth,N=P.index,V=O._dims;h.setTranslate(A,z+P.x,z+P.y);var X=-1!==["up","down"].indexOf(O.direction),J=S.height||(X?V.heights[N]:V.height1);E.attr({x:0,y:0,width:S.width||(X?V.width1:V.widths[N]),height:J});var G=O.font.size*o,Z=(n.lineCount(D)-1)*G/2;n.positionText(D,t.textOffsetX,J/2-Z+t.textOffsetY),X?P.y+=V.heights[N]+P.yPad:P.x+=V.widths[N]+P.xPad,P.index++}function C(A,O){A.attr(t.menuIndexAttrName,O||"-1").selectAll("g."+t.dropdownButtonClassName).remove()}Q.exports=function(A){var O=A._fullLayout,P=e.filterVisible(O[t.name]);function S(G){v.autoMargin(A,k(G))}var E=O._menulayer.selectAll("g."+t.containerClassName).data(P.length>0?[0]:[]);if(E.enter().append("g").classed(t.containerClassName,!0).style("cursor","pointer"),E.exit().each(function(){m.select(this).selectAll("g."+t.headerGroupClassName).each(S)}).remove(),0!==P.length){var D=E.selectAll("g."+t.headerGroupClassName).data(P,a);D.enter().append("g").classed(t.headerGroupClassName,!0);for(var z=e.ensureSingle(E,"g",t.dropdownButtonGroupClassName,function(G){G.style("pointer-events","all")}),N=0;N<P.length;N++)_(A,P[N]);var J=new d(A,z,"updatemenus"+O._uid);D.enter().size()&&(z.node().parentNode.appendChild(z.node()),z.call(C)),D.exit().each(function(G){z.call(C),S(G)}).remove(),D.each(function(G){var Z=m.select(this),re="dropdown"===G.type?z:null;v.manageCommandObserver(A,G,G.buttons,function(j){s(A,G,0,Z,re,J,j.index,!0)}),"dropdown"===G.type?(c(A,Z,z,J,G),i(z,G)&&l(A,Z,z,J,G)):l(A,Z,null,null,G)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(y,Q,K){arguments[4][475][0].apply(K,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(y,Q,K){"use strict";Q.exports=e;var m=y("@plotly/d3"),v=y("../color"),b=y("../drawing"),h=y("../../lib");function e(n,r,o){this.gd=n,this.container=r,this.id=o,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(n,r,o){var t=this.gd._fullLayout,d=t.width,a=t.height;this.position=n;var i,s,c,l,p=this.position.l,g=this.position.w,u=this.position.t,x=this.position.h,f=this.position.direction,T="down"===f,_="left"===f,k="up"===f,w=g,C=x;T||_||"right"===f||k||(this.position.direction="down",T=!0),T||k?(s=(i=p)+w,T?(c=u,C=(l=Math.min(c+C,a))-c):C=(l=u+C)-(c=Math.max(l-C,0))):(l=(c=u)+C,_?w=(s=p+w)-(i=Math.max(s-w,0)):(i=p,w=(s=Math.min(i+w,d))-i)),this._box={l:i,t:c,w,h:C};var A=g>w,O=e.barLength+2*e.barPad,P=e.barWidth+2*e.barPad,S=p,E=u+x;E+P>a&&(E=a-P);var D=this.container.selectAll("rect.scrollbar-horizontal").data(A?[0]:[]);D.exit().on(".drag",null).remove(),D.enter().append("rect").classed("scrollbar-horizontal",!0).call(v.fill,e.barColor),A?(this.hbar=D.attr({rx:e.barRadius,ry:e.barRadius,x:S,y:E,width:O,height:P}),this._hbarXMin=S+O/2,this._hbarTranslateMax=w-O):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=x>C,N=e.barWidth+2*e.barPad,V=e.barLength+2*e.barPad,X=p+g,J=u;X+N>d&&(X=d-N);var G=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);G.exit().on(".drag",null).remove(),G.enter().append("rect").classed("scrollbar-vertical",!0).call(v.fill,e.barColor),z?(this.vbar=G.attr({rx:e.barRadius,ry:e.barRadius,x:X,y:J,width:N,height:V}),this._vbarYMin=J+V/2,this._vbarTranslateMax=C-V):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Z=this.id,re=i-.5,j=z?s+N+.5:s+.5,B=c-.5,H=A?l+P+.5:l+.5,ee=t._topdefs.selectAll("#"+Z).data(A||z?[0]:[]);if(ee.exit().remove(),ee.enter().append("clipPath").attr("id",Z).append("rect"),A||z?(this._clipRect=ee.select("rect").attr({x:Math.floor(re),y:Math.floor(B),width:Math.ceil(j)-Math.floor(re),height:Math.ceil(H)-Math.floor(B)}),this.container.call(b.setClipUrl,Z,this.gd),this.bg.attr({x:p,y:u,width:g,height:x})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),A||z){var U=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(U);var $=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault(),m.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));A&&this.hbar.on(".drag",null).call($),z&&this.vbar.on(".drag",null).call($)}this.setTranslate(r,o)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var n=this.translateX,r=this.translateY;this.hbar&&(n-=m.event.dx),this.vbar&&(r-=m.event.dy),this.setTranslate(n,r)},e.prototype._onBoxWheel=function(){var n=this.translateX,r=this.translateY;this.hbar&&(n+=m.event.deltaY),this.vbar&&(r+=m.event.deltaY),this.setTranslate(n,r)},e.prototype._onBarDrag=function(){var n=this.translateX,r=this.translateY;if(this.hbar){var o=n+this._hbarXMin,t=o+this._hbarTranslateMax;n=(h.constrain(m.event.x,o,t)-o)/(t-o)*(this.position.w-this._box.w)}if(this.vbar){var d=r+this._vbarYMin,a=d+this._vbarTranslateMax;r=(h.constrain(m.event.y,d,a)-d)/(a-d)*(this.position.h-this._box.h)}this.setTranslate(n,r)},e.prototype.setTranslate=function(n,r){var o=this.position.w-this._box.w,t=this.position.h-this._box.h;n=h.constrain(n||0,0,o),r=h.constrain(r||0,0,t),this.translateX=n,this.translateY=r,this.container.call(b.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar&&this.hbar.call(b.setTranslate,n+n/o*this._hbarTranslateMax,r),this.vbar&&this.vbar.call(b.setTranslate,n,r+r/t*this._vbarTranslateMax)}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(y,Q,K){"use strict";Q.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(y,Q,K){"use strict";Q.exports={axisRefDescription:function(m,v,b){return["If set to a",m,"axis id (e.g. *"+m+"* or","*"+m+"2*), the `"+m+"` position refers to a",m,"coordinate. If set to *paper*, the `"+m+"`","position refers to the distance from the",v,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",v,"("+b+"). If set to a",m,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",v,"of the domain of that axis: e.g.,","*"+m+"2 domain* refers to the domain of the second",m," axis and a",m,"position of 0.5 refers to the","point between the",v,"and the",b,"of the domain of the","second",m,"axis."].join(" ")}}},{}],485:[function(y,Q,K){"use strict";Q.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],486:[function(y,Q,K){"use strict";Q.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(y,Q,K){"use strict";Q.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(y,Q,K){"use strict";Q.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(y,Q,K){"use strict";Q.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],490:[function(y,Q,K){"use strict";Q.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(y,Q,K){"use strict";Q.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(y,Q,K){"use strict";K.xmlns="http://www.w3.org/2000/xmlns/",K.svg="http://www.w3.org/2000/svg",K.xlink="http://www.w3.org/1999/xlink",K.svgAttrs={xmlns:K.svg,"xmlns:xlink":K.xlink}},{}],493:[function(y,Q,K){"use strict";K.version=y("./version").version,y("native-promise-only"),y("../build/plotcss");for(var m=y("./registry"),v=K.register=m.register,b=y("./plot_api"),h=Object.keys(b),e=0;e<h.length;e++){var n=h[e];"_"!==n.charAt(0)&&(K[n]=b[n]),v({moduleType:"apiMethod",name:n,fn:b[n]})}v(y("./traces/scatter")),v([y("./components/legend"),y("./components/fx"),y("./components/annotations"),y("./components/annotations3d"),y("./components/selections"),y("./components/shapes"),y("./components/images"),y("./components/updatemenus"),y("./components/sliders"),y("./components/rangeslider"),y("./components/rangeselector"),y("./components/grid"),y("./components/errorbars"),y("./components/colorscale"),y("./components/colorbar"),y("./components/modebar")]),v([y("./locale-en"),y("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(v(window.PlotlyLocales),delete window.PlotlyLocales),K.Icons=y("./fonts/ploticon");var r=y("./components/fx"),o=y("./plots/plots");K.Plots={resize:o.resize,graphJson:o.graphJson,sendDataToCloud:o.sendDataToCloud},K.Fx={hover:r.hover,unhover:r.unhover,loneHover:r.loneHover,loneUnhover:r.loneUnhover},K.Snapshot=y("./snapshot"),K.PlotSchema=y("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(y,Q,K){"use strict";Q.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(y,Q,K){"use strict";K.isLeftAnchor=function(m){return"left"===m.xanchor||"auto"===m.xanchor&&m.x<=1/3},K.isCenterAnchor=function(m){return"center"===m.xanchor||"auto"===m.xanchor&&m.x>1/3&&m.x<2/3},K.isRightAnchor=function(m){return"right"===m.xanchor||"auto"===m.xanchor&&m.x>=2/3},K.isTopAnchor=function(m){return"top"===m.yanchor||"auto"===m.yanchor&&m.y>=2/3},K.isMiddleAnchor=function(m){return"middle"===m.yanchor||"auto"===m.yanchor&&m.y>1/3&&m.y<2/3},K.isBottomAnchor=function(m){return"bottom"===m.yanchor||"auto"===m.yanchor&&m.y<=1/3}},{}],496:[function(y,Q,K){"use strict";var m=y("./mod"),v=m.mod,b=m.modHalf,h=Math.PI,e=2*h;function n(d){return Math.abs(d[1]-d[0])>e-1e-14}function r(d,a){return b(a-d,e)}function o(d,a){if(n(a))return!0;var i,s;a[0]<a[1]?(i=a[0],s=a[1]):(i=a[1],s=a[0]),(i=v(i,e))>(s=v(s,e))&&(s+=e);var c=v(d,e),l=c+e;return c>=i&&c<=s||l>=i&&l<=s}function t(d,a,i,s,c,l,p){c=c||0,l=l||0;var g,u,x,f,T,_=n([i,s]);function k(O,P){return[O*Math.cos(P)+c,l-O*Math.sin(P)]}_?(g=0,u=h,x=e):i<s?(g=i,x=s):(g=s,x=i),d<a?(f=d,T=a):(f=a,T=d);var w,C=Math.abs(x-g)<=h?0:1;function A(O,P,S){return"A"+[O,O]+" "+[0,C,S]+" "+k(O,P)}return _?w=null===f?"M"+k(T,g)+A(T,u,0)+A(T,x,0)+"Z":"M"+k(f,g)+A(f,u,0)+A(f,x,0)+"ZM"+k(T,g)+A(T,u,1)+A(T,x,1)+"Z":null===f?(w="M"+k(T,g)+A(T,x,0),p&&(w+="L0,0Z")):w="M"+k(f,g)+"L"+k(T,g)+A(T,x,0)+"L"+k(f,x)+A(f,g,1)+"Z",w}Q.exports={deg2rad:function(d){return d/180*h},rad2deg:function(d){return d/h*180},angleDelta:r,angleDist:function(d,a){return Math.abs(r(d,a))},isFullCircle:n,isAngleInsideSector:o,isPtInsideSector:function(d,a,i,s){return!!o(a,s)&&(i[0]<i[1]?(c=i[0],l=i[1]):(c=i[1],l=i[0]),d>=c&&d<=l);var c,l},pathArc:function(d,a,i,s,c){return t(null,d,a,i,s,c,0)},pathSector:function(d,a,i,s,c){return t(null,d,a,i,s,c,1)},pathAnnulus:function(d,a,i,s,c,l){return t(d,a,i,s,c,l,1)}}},{"./mod":522}],497:[function(y,Q,K){"use strict";var m=Array.isArray,v=ArrayBuffer,b=DataView;function h(r){return v.isView(r)&&!(r instanceof b)}function e(r){return m(r)||h(r)}function n(r,o,t){if(e(r)){if(e(r[0])){for(var d=t,a=0;a<r.length;a++)d=o(d,r[a].length);return d}return r.length}return 0}K.isTypedArray=h,K.isArrayOrTypedArray=e,K.isArray1D=function(r){return!e(r[0])},K.ensureArray=function(r,o){return m(r)||(r=[]),r.length=o,r},K.concat=function(){var r,o,t,d,a,i,s,c,l=[],p=!0,g=0;for(t=0;t<arguments.length;t++)(i=(d=arguments[t]).length)&&(o?l.push(d):(o=d,a=i),m(d)?r=!1:(p=!1,g?r!==d.constructor&&(r=!1):r=d.constructor),g+=i);if(!g)return[];if(!l.length)return o;if(p)return o.concat.apply(o,l);if(r){for((s=new r(g)).set(o),t=0;t<l.length;t++)s.set(d=l[t],a),a+=d.length;return s}for(s=new Array(g),c=0;c<o.length;c++)s[c]=o[c];for(t=0;t<l.length;t++){for(d=l[t],c=0;c<d.length;c++)s[a+c]=d[c];a+=c}return s},K.maxRowLength=function(r){return n(r,Math.max,0)},K.minRowLength=function(r){return n(r,Math.min,1/0)}},{}],498:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../constants/numerical").BADNUM,b=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;Q.exports=function(h){return"string"==typeof h&&(h=h.replace(b,"")),m(h)?Number(h):v}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(y,Q,K){"use strict";Q.exports=function(m){var v=m._fullLayout;v._glcanvas&&v._glcanvas.size()&&v._glcanvas.each(function(b){b.regl&&b.regl.clear({color:!0,depth:!0})})}},{}],500:[function(y,Q,K){"use strict";Q.exports=function(m){m._responsiveChartHandler&&(window.removeEventListener("resize",m._responsiveChartHandler),delete m._responsiveChartHandler)}},{}],501:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("tinycolor2"),b=y("../plots/attributes"),h=y("../components/colorscale/scales"),e=y("../components/color"),n=y("../constants/interactions").DESELECTDIM,r=y("./nested_property"),o=y("./regex").counter,t=y("./mod").modHalf,d=y("./array").isArrayOrTypedArray;function a(i,s){var c=K.valObjectMeta[s.valType];if(s.arrayOk&&d(i))return!0;if(c.validateFunction)return c.validateFunction(i,s);var l={},p=l;return c.coerceFunction(i,{set:function(u){p=u}},l,s),p!==l}K.valObjectMeta={data_array:{coerceFunction:function(i,s,c){d(i)?s.set(i):void 0!==c&&s.set(c)}},enumerated:{coerceFunction:function(i,s,c,l){l.coerceNumber&&(i=+i),-1===l.values.indexOf(i)?s.set(c):s.set(i)},validateFunction:function(i,s){s.coerceNumber&&(i=+i);for(var c=s.values,l=0;l<c.length;l++){var p=String(c[l]);if("/"===p.charAt(0)&&"/"===p.charAt(p.length-1)){if(new RegExp(p.substr(1,p.length-2)).test(i))return!0}else if(i===c[l])return!0}return!1}},boolean:{coerceFunction:function(i,s,c){s.set(!0===i||!1===i?i:c)}},number:{coerceFunction:function(i,s,c,l){!m(i)||void 0!==l.min&&i<l.min||void 0!==l.max&&i>l.max?s.set(c):s.set(+i)}},integer:{coerceFunction:function(i,s,c,l){i%1||!m(i)||void 0!==l.min&&i<l.min||void 0!==l.max&&i>l.max?s.set(c):s.set(+i)}},string:{coerceFunction:function(i,s,c,l){s.set("string"!=typeof i?!0!==l.strict&&"number"==typeof i?String(i):c:l.noBlank&&!i?c:i)}},color:{coerceFunction:function(i,s,c){v(i).isValid()?s.set(i):s.set(c)}},colorlist:{coerceFunction:function(i,s,c){Array.isArray(i)&&i.length&&i.every(function(l){return v(l).isValid()})?s.set(i):s.set(c)}},colorscale:{coerceFunction:function(i,s,c){s.set(h.get(i,c))}},angle:{coerceFunction:function(i,s,c){"auto"===i?s.set("auto"):m(i)?s.set(t(+i,360)):s.set(c)}},subplotid:{coerceFunction:function(i,s,c,l){var p=l.regex||o(c);"string"==typeof i&&p.test(i)?s.set(i):s.set(c)},validateFunction:function(i,s){var c=s.dflt;return i===c||"string"==typeof i&&!!o(c).test(i)}},flaglist:{coerceFunction:function(i,s,c,l){if(-1===(l.extras||[]).indexOf(i))if("string"==typeof i){for(var p=i.split("+"),g=0;g<p.length;){var u=p[g];-1===l.flags.indexOf(u)||p.indexOf(u)<g?p.splice(g,1):g++}s.set(p.length?p.join("+"):c)}else s.set(c);else s.set(i)}},any:{coerceFunction:function(i,s,c){s.set(void 0===i?c:i)}},info_array:{coerceFunction:function(i,s,c,l){function p(E,D,z){var N;return void 0===z&&(z=D.dflt),K.valObjectMeta[D.valType].coerceFunction(E,{set:function(X){N=X}},z,D),N}var g=2===l.dimensions||"1-2"===l.dimensions&&Array.isArray(i)&&Array.isArray(i[0]);if(Array.isArray(i)){var u,x,f,_,k,w=l.items,C=[],A=Array.isArray(w),O=A&&g&&Array.isArray(w[0]),P=g&&A&&!O,S=A&&!P?w.length:i.length;if(c=Array.isArray(c)?c:[],g)for(u=0;u<S;u++)for(C[u]=[],f=Array.isArray(i[u])?i[u]:[],_=P?w.length:A?w[u].length:f.length,x=0;x<_;x++)void 0!==(k=p(f[x],P?w[x]:A?w[u][x]:w,(c[u]||[])[x]))&&(C[u][x]=k);else for(u=0;u<S;u++)void 0!==(k=p(i[u],A?w[u]:w,c[u]))&&(C[u]=k);s.set(C)}else s.set(c)},validateFunction:function(i,s){if(!Array.isArray(i))return!1;var c=s.items,l=Array.isArray(c),p=2===s.dimensions;if(!s.freeLength&&i.length!==c.length)return!1;for(var g=0;g<i.length;g++)if(p){if(!Array.isArray(i[g])||!s.freeLength&&i[g].length!==c[g].length)return!1;for(var u=0;u<i[g].length;u++)if(!a(i[g][u],l?c[g][u]:c))return!1}else if(!a(i[g],l?c[g]:c))return!1;return!0}}},K.coerce=function(i,s,c,l,p){var g=r(c,l).get(),u=r(i,l),x=r(s,l),f=u.get(),T=s._template;if(void 0===f&&T&&(f=r(T,l).get(),T=0),void 0===p&&(p=g.dflt),g.arrayOk&&d(f))return x.set(f),f;var _=K.valObjectMeta[g.valType].coerceFunction;_(f,x,p,g);var k=x.get();return T&&k===p&&!a(f,g)&&(_(f=r(T,l).get(),x,p,g),k=x.get()),k},K.coerce2=function(i,s,c,l,p){var g=r(i,l),u=K.coerce(i,s,c,l,p);return null!=g.get()&&u},K.coerceFont=function(i,s,c){var l={};return l.family=i(s+".family",(c=c||{}).family),l.size=i(s+".size",c.size),l.color=i(s+".color",c.color),l},K.coercePattern=function(i,s,c,l){if(i(s+".shape")){i(s+".solidity"),i(s+".size");var p="overlay"===i(s+".fillmode");if(!l){var g=i(s+".bgcolor",p?c:void 0);i(s+".fgcolor",p?e.contrast(g):c)}i(s+".fgopacity",p?.5:1)}},K.coerceHoverinfo=function(i,s,c){var l,p=s._module.attributes,g=p.hoverinfo?p:b,u=g.hoverinfo;if(1===c._dataLength){var x="all"===u.dflt?u.flags.slice():u.dflt.split("+");x.splice(x.indexOf("name"),1),l=x.join("+")}return K.coerce(i,s,g,"hoverinfo",l)},K.coerceSelectionMarkerOpacity=function(i,s){if(i.marker){var c,l,p=i.marker.opacity;void 0!==p&&(d(p)||i.selected||i.unselected||(c=p,l=n*p),s("selected.marker.opacity",c),s("unselected.marker.opacity",l))}},K.validate=a},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(y,Q,K){"use strict";var m,v,b=y("d3-time-format").timeFormat,h=y("fast-isnumeric"),e=y("./loggers"),n=y("./mod").mod,r=y("../constants/numerical"),o=r.BADNUM,t=r.ONEDAY,d=r.ONEHOUR,a=r.ONEMIN,i=r.ONESEC,s=r.EPOCHJD,c=y("../registry"),l=y("d3-time-format").utcFormat,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,u=(new Date).getFullYear()-70;function x(D){return D&&c.componentsRegistry.calendars&&"string"==typeof D&&"gregorian"!==D}function f(D,z){return String(D+Math.pow(10,z)).substr(1)}K.dateTick0=function(D,z){var X,J,N=(J=!!z,x(X=D)?J?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[X]:c.getComponentMethod("calendars","CANONICAL_TICK")[X]:J?"2000-01-02":"2000-01-01");if(z<2)return N;var V=K.dateTime2ms(N,D);return K.ms2DateTime(V+=t*(z-1),0,D)},K.dfltRange=function(D){return x(D)?c.getComponentMethod("calendars","DFLTRANGE")[D]:["2000-01-01","2001-01-01"]},K.isJSDate=function(D){return"object"==typeof D&&null!==D&&"function"==typeof D.getTime},K.dateTime2ms=function(D,z){if(K.isJSDate(D)){var N=D.getTimezoneOffset()*a,V=(D.getUTCMinutes()-D.getMinutes())*a+(D.getUTCSeconds()-D.getSeconds())*i+(D.getUTCMilliseconds()-D.getMilliseconds());if(V){var X=3*a;N=N-X/2+n(V-N+X/2,X)}return(D=Number(D)-N)>=m&&D<=v?D:o}if("string"!=typeof D&&"number"!=typeof D)return o;D=String(D);var J=x(z),G=D.charAt(0);!J||"G"!==G&&"g"!==G||(D=D.substr(1),z="");var Z=J&&"chinese"===z.substr(0,7),re=D.match(Z?g:p);if(!re)return o;var j=re[1],B=re[3]||"1",H=Number(re[5]||1),ee=Number(re[7]||0),U=Number(re[9]||0),$=Number(re[11]||0);if(J){if(2===j.length)return o;var q;j=Number(j);try{var te=c.getComponentMethod("calendars","getCal")(z);if(Z){var ne="i"===B.charAt(B.length-1);B=parseInt(B,10),q=te.newDate(j,te.toMonthIndex(j,B,ne),H)}else q=te.newDate(j,Number(B),H)}catch{return o}return q?(q.toJD()-s)*t+ee*d+U*a+$*i:o}j=2===j.length?(Number(j)+2e3-u)%100+u:Number(j),B-=1;var se=new Date(Date.UTC(2e3,B,H,ee,U));return se.setUTCFullYear(j),se.getUTCMonth()!==B||se.getUTCDate()!==H?o:se.getTime()+$*i},m=K.MIN_MS=K.dateTime2ms("-9999"),v=K.MAX_MS=K.dateTime2ms("9999-12-31 23:59:59.9999"),K.isDateTime=function(D,z){return K.dateTime2ms(D,z)!==o};var T=90*t,_=3*d,k=5*a;function w(D,z,N,V,X){if((z||N||V||X)&&(D+=" "+f(z,2)+":"+f(N,2),(V||X)&&(D+=":"+f(V,2),X))){for(var J=4;X%10==0;)J-=1,X/=10;D+="."+f(X,J)}return D}K.ms2DateTime=function(D,z,N){if("number"!=typeof D||!(D>=m&&D<=v))return o;z||(z=0);var V,X,J,G,Z,re,j=Math.floor(10*n(D+.05,1)),B=Math.round(D-j/10);if(x(N)){var H=Math.floor(B/t)+s,ee=Math.floor(n(D,t));try{V=c.getComponentMethod("calendars","getCal")(N).fromJD(H).formatDate("yyyy-mm-dd")}catch{V=l("G%Y-%m-%d")(new Date(B))}if("-"===V.charAt(0))for(;V.length<11;)V="-0"+V.substr(1);else for(;V.length<10;)V="0"+V;X=z<T?Math.floor(ee/d):0,J=z<T?Math.floor(ee%d/a):0,G=z<_?Math.floor(ee%a/i):0,Z=z<k?ee%i*10+j:0}else re=new Date(B),V=l("%Y-%m-%d")(re),X=z<T?re.getUTCHours():0,J=z<T?re.getUTCMinutes():0,G=z<_?re.getUTCSeconds():0,Z=z<k?10*re.getUTCMilliseconds()+j:0;return w(V,X,J,G,Z)},K.ms2DateTimeLocal=function(D){if(!(D>=m+t&&D<=v-t))return o;var z=Math.floor(10*n(D+.05,1)),N=new Date(Math.round(D-z/10));return w(b("%Y-%m-%d")(N),N.getHours(),N.getMinutes(),N.getSeconds(),10*N.getUTCMilliseconds()+z)},K.cleanDate=function(D,z,N){if(D===o)return z;if(K.isJSDate(D)||"number"==typeof D&&isFinite(D)){if(x(N))return e.error("JS Dates and milliseconds are incompatible with world calendars",D),z;if(!(D=K.ms2DateTimeLocal(+D))&&void 0!==z)return z}else if(!K.isDateTime(D,N))return e.error("unrecognized date",D),z;return D};var C=/%\d?f/g,A=/%h/g,O={1:"1",2:"1",3:"2",4:"2"};function P(D,z,N,V){D=D.replace(C,function(J){var G=Math.min(+J.charAt(1)||6,6);return(z/1e3%1+2).toFixed(G).substr(2).replace(/0+$/,"")||"0"});var X=new Date(Math.floor(z+.05));if(D=D.replace(A,function(){return O[N("%q")(X)]}),x(V))try{D=c.getComponentMethod("calendars","worldCalFmt")(D,z,V)}catch{return"Invalid"}return N(D)(X)}var S=[59,59.9,59.99,59.999,59.9999];K.formatDate=function(D,z,N,V,X,J){if(X=x(X)&&X,!z)if("y"===N)z=J.year;else if("m"===N)z=J.month;else{if("d"!==N)return function(G,Z){var re=n(G+.05,t),j=f(Math.floor(re/d),2)+":"+f(n(Math.floor(re/a),60),2);if("M"!==Z){h(Z)||(Z=0);var B=(100+Math.min(n(G/i,60),S[Z])).toFixed(Z).substr(1);Z>0&&(B=B.replace(/0+$/,"").replace(/[\.]$/,"")),j+=":"+B}return j}(D,N)+"\n"+P(J.dayMonthYear,D,V,X);z=J.dayMonth+"\n"+J.year}return P(z,D,V,X)};var E=3*t;K.incrementMonth=function(D,z,N){N=x(N)&&N;var V=n(D,t);if(D=Math.round(D-V),N)try{var X=Math.round(D/t)+s,J=c.getComponentMethod("calendars","getCal")(N),G=J.fromJD(X);return z%12?J.add(G,z,"m"):J.add(G,z/12,"y"),(G.toJD()-s)*t+V}catch{e.error("invalid ms "+D+" in calendar "+N)}var Z=new Date(D+E);return Z.setUTCMonth(Z.getUTCMonth()+z)+V-E},K.findExactDates=function(D,z){for(var N,V,X=0,J=0,G=0,Z=0,re=x(z)&&c.getComponentMethod("calendars","getCal")(z),j=0;j<D.length;j++)if(h(V=D[j])){if(!(V%t))if(re)try{1===(N=re.fromJD(V/t+s)).day()?1===N.month()?X++:J++:G++}catch{}else 1===(N=new Date(V)).getUTCDate()?0===N.getUTCMonth()?X++:J++:G++}else Z++;G+=J+=X;var B=D.length-Z;return{exactYears:X/B,exactMonths:J/B,exactDays:G/B}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("./loggers"),b=y("./matrix"),h=y("gl-mat4");function e(d){var a=d&&d.parentNode;a&&a.removeChild(d)}function n(d,a,i){var s="plotly.js-style-"+d,c=document.getElementById(s);c||((c=document.createElement("style")).setAttribute("id",s),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var l=c.sheet;l.insertRule?l.insertRule(a+"{"+i+"}",0):l.addRule?l.addRule(a,i,0):v.warn("addStyleRule failed")}function r(d){var a=window.getComputedStyle(d,null),i=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("-moz-transform")||a.getPropertyValue("-ms-transform")||a.getPropertyValue("-o-transform")||a.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(s){return+s})}function o(d){for(var a=[];t(d);)a.push(d),d=d.parentNode;return a}function t(d){return d&&(d instanceof Element||d instanceof HTMLElement)}Q.exports={getGraphDiv:function(d){var a;if("string"==typeof d){if(null===(a=document.getElementById(d)))throw new Error("No DOM element with id '"+d+"' exists on the page.");return a}if(null==d)throw new Error("DOM element provided is null or undefined");return d},isPlotDiv:function(d){var a=m.select(d);return a.node()instanceof HTMLElement&&a.size()&&a.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(d,a){n("global",d,a)},addRelatedStyleRule:n,deleteRelatedStyleRule:function(d){var i=document.getElementById("plotly.js-style-"+d);i&&e(i)},getFullTransformMatrix:function(d){var a=o(d),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return a.forEach(function(s){var c=r(s);if(c){var l=b.convertCssMatrix(c);i=h.multiply(i,i,l)}}),i},getElementTransformMatrix:r,getElementAndAncestors:o,equalDomRects:function(d,a){return d&&a&&d.x===a.x&&d.y===a.y&&d.top===a.top&&d.left===a.left&&d.right===a.right&&d.bottom===a.bottom}}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(y,Q,K){"use strict";var m=y("events").EventEmitter;Q.exports={init:function(b){if(b._ev instanceof m)return b;var h=new m,e=new m;return b._ev=h,b._internalEv=e,b.on=h.on.bind(h),b.once=h.once.bind(h),b.removeListener=h.removeListener.bind(h),b.removeAllListeners=h.removeAllListeners.bind(h),b._internalOn=e.on.bind(e),b._internalOnce=e.once.bind(e),b._removeInternalListener=e.removeListener.bind(e),b._removeAllInternalListeners=e.removeAllListeners.bind(e),b.emit=function(n,r){typeof jQuery<"u"&&jQuery(b).trigger(n,r),h.emit(n,r),e.emit(n,r)},b},triggerHandler:function(b,h,e){var n,r;typeof jQuery<"u"&&(n=jQuery(b).triggerHandler(h,e));var o=b._ev;if(!o)return n;var t,d=o._events[h];if(!d)return n;function a(i){return i.listener?(o.removeListener(h,i.listener),i.fired?void 0:(i.fired=!0,i.listener.apply(o,[e]))):i.apply(o,[e])}for(d=Array.isArray(d)?d:[d],t=0;t<d.length-1;t++)a(d[t]);return r=a(d[t]),void 0!==n?n:r},purge:function(b){return delete b._ev,delete b.on,delete b.once,delete b.removeListener,delete b.removeAllListeners,delete b.emit,delete b._ev,delete b._internalEv,delete b._internalOn,delete b._internalOnce,delete b._removeInternalListener,delete b._removeAllInternalListeners,b}}},{events:84}],505:[function(y,Q,K){"use strict";var m=y("./is_plain_object.js"),v=Array.isArray;function b(h,e,n,r){var o,t,d,a,i,s,c=h[0],l=h.length;if(2===l&&v(c)&&v(h[1])&&0===c.length){if(function(g,u){var x,f;for(x=0;x<g.length;x++){if(null!==(f=g[x])&&"object"==typeof f)return!1;void 0!==f&&(u[x]=f)}return!0}(h[1],c))return c;c.splice(0,c.length)}for(var p=1;p<l;p++)for(t in o=h[p])d=c[t],a=o[t],r&&v(a)?c[t]=a:e&&a&&(m(a)||(i=v(a)))?(i?(i=!1,s=d&&v(d)?d:[]):s=d&&m(d)?d:{},c[t]=b([s,a],e,n,r)):(void 0!==a||n)&&(c[t]=a);return c}K.extendFlat=function(){return b(arguments,!1,!1,!1)},K.extendDeep=function(){return b(arguments,!0,!1,!1)},K.extendDeepAll=function(){return b(arguments,!0,!0,!1)},K.extendDeepNoArrays=function(){return b(arguments,!0,!1,!0)}},{"./is_plain_object.js":516}],506:[function(y,Q,K){"use strict";Q.exports=function(m){for(var v={},b=[],h=0,e=0;e<m.length;e++){var n=m[e];1!==v[n]&&(v[n]=1,b[h++]=n)}return b}},{}],507:[function(y,Q,K){"use strict";function m(b){return!0===b.visible}function v(b){var h=b[0].trace;return!0===h.visible&&0!==h._length}Q.exports=function(b){for(var h,e=(h=b,Array.isArray(h)&&Array.isArray(h[0])&&h[0][0]&&h[0][0].trace?v:m),n=[],r=0;r<b.length;r++){var o=b[r];e(o)&&n.push(o)}return n}},{}],508:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("country-regex"),b=y("@turf/area"),h=y("@turf/centroid"),e=y("@turf/bbox"),n=y("./identity"),r=y("./loggers"),o=y("./is_plain_object"),t=y("./nested_property"),d=y("./polygon"),a=Object.keys(v),i={"ISO-3":n,"USA-states":n,"country names":function(c){for(var l=0;l<a.length;l++){var p=a[l];if(new RegExp(v[p]).test(c.trim().toLowerCase()))return p}return r.log("Unrecognized country name: "+c+"."),!1}};function s(c){var l=c.geojson,p=window.PlotlyGeoAssets||{},g="string"==typeof l?p[l]:l;return o(g)?g:(r.error("Oops ... something went wrong when fetching "+l),!1)}Q.exports={locationToFeature:function(c,l,p){if(!l||"string"!=typeof l)return!1;var g,u,x,f=i[c](l);if(f){if("USA-states"===c)for(g=[],x=0;x<p.length;x++)(u=p[x]).properties&&u.properties.gu&&"USA"===u.properties.gu&&g.push(u);else g=p;for(x=0;x<g.length;x++)if((u=g[x]).id===f)return u;r.log(["Location with id",f,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var l,p,g,u,x=c.geometry,f=x.coordinates,T=c.id,_=[];function k(w){for(var C=0;C<w.length-1;C++)if(w[C][0]>0&&w[C+1][0]<0)return C;return null}switch(l="RUS"===T||"FJI"===T?function(w){var C;if(null===k(w))C=w;else for(C=new Array(w.length),u=0;u<w.length;u++)C[u]=[w[u][0]<0?w[u][0]+360:w[u][0],w[u][1]];_.push(d.tester(C))}:"ATA"===T?function(w){var C=k(w);if(null===C)return _.push(d.tester(w));var A=new Array(w.length+1),O=0;for(u=0;u<w.length;u++)u>C?A[O++]=[w[u][0]+360,w[u][1]]:u===C?(A[O++]=w[u],A[O++]=[w[u][0],-90]):A[O++]=w[u];var P=d.tester(A);P.pts.pop(),_.push(P)}:function(w){_.push(d.tester(w))},x.type){case"MultiPolygon":for(p=0;p<f.length;p++)for(g=0;g<f[p].length;g++)l(f[p][g]);break;case"Polygon":for(p=0;p<f.length;p++)l(f[p])}return _},getTraceGeojson:s,extractTraceFeature:function(c){var l=c[0].trace,p=s(l);if(!p)return!1;var g,u={},x=[];for(g=0;g<l._length;g++){var f=c[g];(f.loc||0===f.loc)&&(u[f.loc]=f)}function T(w){var C=t(w,l.featureidkey||"id").get(),A=u[C];if(A){var O=w.geometry;if("Polygon"===O.type||"MultiPolygon"===O.type){var P={type:"Feature",id:C,geometry:O,properties:{}};P.properties.ct=function(S){var E,D=S.geometry;if("MultiPolygon"===D.type)for(var z=D.coordinates,N=0,V=0;V<z.length;V++){var X={type:"Polygon",coordinates:z[V]},J=b.default(X);J>N&&(N=J,E=X)}else E=D;return h.default(E).geometry.coordinates}(P),A.fIn=w,A.fOut=P,x.push(P)}else r.log(["Location",A.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete u[C]}switch(p.type){case"FeatureCollection":var _=p.features;for(g=0;g<_.length;g++)T(_[g]);break;case"Feature":T(p);break;default:return r.warn(["Invalid GeoJSON type",(p.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var k in u)r.log(["Location *"+k+"*","does not have a matching feature with id-key","*"+l.featureidkey+"*."].join(" "));return x},fetchTraceGeoData:function(c){var l=window.PlotlyGeoAssets||{},p=[];function g(T){return new Promise(function(_,k){m.json(T,function(w,C){return w?(delete l[T],k(new Error(404===w.status?'GeoJSON at URL "'+T+'" does not exist.':"Unexpected error while fetching from "+T))):(l[T]=C,_(C))})})}function u(T){return new Promise(function(_,k){var w=0,C=setInterval(function(){return l[T]&&"pending"!==l[T]?(clearInterval(C),_(l[T])):w>100?(clearInterval(C),k("Unexpected error while fetching from "+T)):void w++},50)})}for(var x=0;x<c.length;x++){var f=c[x][0].trace.geojson;"string"==typeof f&&(l[f]?"pending"===l[f]&&p.push(u(f)):(l[f]="pending",p.push(g(f))))}return p},computeBbox:function(c){return e.default(c)}}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(y,Q,K){"use strict";var m=y("../constants/numerical").BADNUM;K.calcTraceToLineCoords=function(v){for(var b=v[0].trace.connectgaps,h=[],e=[],n=0;n<v.length;n++){var r=v[n].lonlat;r[0]!==m?e.push(r):!b&&e.length>0&&(h.push(e),e=[])}return e.length>0&&h.push(e),h},K.makeLine=function(v){return 1===v.length?{type:"LineString",coordinates:v[0]}:{type:"MultiLineString",coordinates:v}},K.makePolygon=function(v){if(1===v.length)return{type:"Polygon",coordinates:v};for(var b=new Array(v.length),h=0;h<v.length;h++)b[h]=[v[h]];return{type:"MultiPolygon",coordinates:b}},K.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(y,Q,K){"use strict";var m,v,b,h=y("./mod").mod;function e(r,o,t,d,a,i,s,c){var l=t-r,p=a-r,g=s-a,u=d-o,x=i-o,f=c-i,T=l*f-g*u;if(0===T)return null;var _=(p*f-g*x)/T,k=(p*u-l*x)/T;return k<0||k>1||_<0||_>1?null:{x:r+l*_,y:o+u*_}}function n(r,o,t,d,a){var i=d*r+a*o;if(i<0)return d*d+a*a;if(i>t){var s=d-r,c=a-o;return s*s+c*c}var l=d*o-a*r;return l*l/t}K.segmentsIntersect=e,K.segmentDistance=function(r,o,t,d,a,i,s,c){if(e(r,o,t,d,a,i,s,c))return 0;var l=t-r,p=d-o,g=s-a,u=c-i,x=l*l+p*p,f=g*g+u*u,T=Math.min(n(l,p,x,a-r,i-o),n(l,p,x,s-r,c-o),n(g,u,f,r-a,o-i),n(g,u,f,t-a,d-i));return Math.sqrt(T)},K.getTextLocation=function(r,o,t,d){if(r===v&&d===b||(m={},v=r,b=d),m[t])return m[t];var a=r.getPointAtLength(h(t-d/2,o)),i=r.getPointAtLength(h(t+d/2,o)),s=Math.atan((i.y-a.y)/(i.x-a.x)),c=r.getPointAtLength(h(t,o)),l={x:(4*c.x+a.x+i.x)/6,y:(4*c.y+a.y+i.y)/6,theta:s};return m[t]=l,l},K.clearLocationCache=function(){v=null},K.getVisibleSegment=function(r,o,t){var d,a,i=o.left,s=o.right,c=o.top,l=o.bottom,p=0,g=r.getTotalLength(),u=g;function x(T){var _=r.getPointAtLength(T);0===T?d=_:T===g&&(a=_);var k=_.x<i?i-_.x:_.x>s?_.x-s:0,w=_.y<c?c-_.y:_.y>l?_.y-l:0;return Math.sqrt(k*k+w*w)}for(var f=x(p);f;){if((p+=f+t)>u)return;f=x(p)}for(f=x(u);f;){if(p>(u-=f+t))return;f=x(u)}return{min:p,max:u,len:u-p,total:g,isClosed:0===p&&u===g&&Math.abs(d.x-a.x)<.1&&Math.abs(d.y-a.y)<.1}},K.findPointOnPath=function(r,o,t,d){for(var a,i,s,c=(d=d||{}).pathLength||r.getTotalLength(),l=d.tolerance||.001,p=d.iterationLimit||30,g=r.getPointAtLength(0)[t]>r.getPointAtLength(c)[t]?-1:1,u=0,x=0,f=c;u<p;){if(s=(i=r.getPointAtLength(a=(x+f)/2))[t]-o,Math.abs(s)<l)return i;g*s>0?f=a:x=a,u++}return i}},{"./mod":522}],511:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("tinycolor2"),b=y("color-normalize"),h=y("../components/colorscale"),e=y("../components/color/attributes").defaultLine,n=y("./array").isArrayOrTypedArray,r=b(e);function o(a,i){var s=a;return s[3]*=i,s}function t(a){if(m(a))return r;var i=b(a);return i.length?i:r}function d(a){return m(a)?a:1}Q.exports={formatColor:function(a,i,s){var c,l,p,g,u,x=a.color,f=n(x),T=n(i),_=h.extractOpts(a),k=[];if(c=void 0!==_.colorscale?h.makeColorScaleFuncFromTrace(a):t,l=f?function(C,A){return void 0===C[A]?r:b(c(C[A]))}:t,p=T?function(C,A){return void 0===C[A]?1:d(C[A])}:d,f||T)for(var w=0;w<s;w++)g=l(x,w),u=p(i,w),k[w]=o(g,u);else k=o(b(x),i);return k},parseColorScale:function(a){var i=h.extractOpts(a),s=i.colorscale;return i.reversescale&&(s=h.flipScale(i.colorscale)),s.map(function(c){var l=c[0],p=v(c[1]).toRgb();return{index:l,rgb:[p.r,p.g,p.b,p.a]}})}}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(y,Q,K){"use strict";var m=y("./identity");function v(b){return[b]}Q.exports={keyFun:function(b){return b.key},repeat:v,descend:m,wrap:v,unwrap:function(b){return b[0]}}},{"./identity":513}],513:[function(y,Q,K){"use strict";Q.exports=function(m){return m}},{}],514:[function(y,Q,K){"use strict";Q.exports=function(m,v){if(!v)return m;var b=1/Math.abs(v),h=b>1?(b*m+b*v)/b:m+v,e=String(h).length;if(e>16){var n=String(v).length;if(e>=String(m).length+n){var r=parseFloat(h).toPrecision(12);-1===r.indexOf("e+")&&(h=+r)}}return h}},{}],515:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("d3-time-format").utcFormat,b=y("d3-format").format,h=y("fast-isnumeric"),e=y("../constants/numerical"),n=e.FP_SAFE,r=-n,o=e.BADNUM,t=Q.exports={};t.adjustFormat=function(j){return!j||/^\d[.]\df/.test(j)||/[.]\d%/.test(j)?j:"0.f"===j?"~f":/^\d%/.test(j)?"~%":/^\ds/.test(j)?"~s":!/^[~,.0$]/.test(j)&&/[&fps]/.test(j)?"~"+j:j};var d={};t.warnBadFormat=function(j){var B=String(j);d[B]||(d[B]=1,t.warn('encountered bad format: "'+B+'"'))},t.noFormat=function(j){return String(j)},t.numberFormat=function(j){var B;try{B=b(t.adjustFormat(j))}catch{return t.warnBadFormat(j),t.noFormat}return B},t.nestedProperty=y("./nested_property"),t.keyedContainer=y("./keyed_container"),t.relativeAttr=y("./relative_attr"),t.isPlainObject=y("./is_plain_object"),t.toLogRange=y("./to_log_range"),t.relinkPrivateKeys=y("./relink_private");var a=y("./array");t.isTypedArray=a.isTypedArray,t.isArrayOrTypedArray=a.isArrayOrTypedArray,t.isArray1D=a.isArray1D,t.ensureArray=a.ensureArray,t.concat=a.concat,t.maxRowLength=a.maxRowLength,t.minRowLength=a.minRowLength;var i=y("./mod");t.mod=i.mod,t.modHalf=i.modHalf;var s=y("./coerce");t.valObjectMeta=s.valObjectMeta,t.coerce=s.coerce,t.coerce2=s.coerce2,t.coerceFont=s.coerceFont,t.coercePattern=s.coercePattern,t.coerceHoverinfo=s.coerceHoverinfo,t.coerceSelectionMarkerOpacity=s.coerceSelectionMarkerOpacity,t.validate=s.validate;var c=y("./dates");t.dateTime2ms=c.dateTime2ms,t.isDateTime=c.isDateTime,t.ms2DateTime=c.ms2DateTime,t.ms2DateTimeLocal=c.ms2DateTimeLocal,t.cleanDate=c.cleanDate,t.isJSDate=c.isJSDate,t.formatDate=c.formatDate,t.incrementMonth=c.incrementMonth,t.dateTick0=c.dateTick0,t.dfltRange=c.dfltRange,t.findExactDates=c.findExactDates,t.MIN_MS=c.MIN_MS,t.MAX_MS=c.MAX_MS;var l=y("./search");t.findBin=l.findBin,t.sorterAsc=l.sorterAsc,t.sorterDes=l.sorterDes,t.distinctVals=l.distinctVals,t.roundUp=l.roundUp,t.sort=l.sort,t.findIndexOfMin=l.findIndexOfMin,t.sortObjectKeys=y("./sort_object_keys");var p=y("./stats");t.aggNums=p.aggNums,t.len=p.len,t.mean=p.mean,t.median=p.median,t.midRange=p.midRange,t.variance=p.variance,t.stdev=p.stdev,t.interp=p.interp;var g=y("./matrix");t.init2dArray=g.init2dArray,t.transposeRagged=g.transposeRagged,t.dot=g.dot,t.translationMatrix=g.translationMatrix,t.rotationMatrix=g.rotationMatrix,t.rotationXYMatrix=g.rotationXYMatrix,t.apply3DTransform=g.apply3DTransform,t.apply2DTransform=g.apply2DTransform,t.apply2DTransform2=g.apply2DTransform2,t.convertCssMatrix=g.convertCssMatrix,t.inverseTransformMatrix=g.inverseTransformMatrix;var u=y("./angles");t.deg2rad=u.deg2rad,t.rad2deg=u.rad2deg,t.angleDelta=u.angleDelta,t.angleDist=u.angleDist,t.isFullCircle=u.isFullCircle,t.isAngleInsideSector=u.isAngleInsideSector,t.isPtInsideSector=u.isPtInsideSector,t.pathArc=u.pathArc,t.pathSector=u.pathSector,t.pathAnnulus=u.pathAnnulus;var x=y("./anchor_utils");t.isLeftAnchor=x.isLeftAnchor,t.isCenterAnchor=x.isCenterAnchor,t.isRightAnchor=x.isRightAnchor,t.isTopAnchor=x.isTopAnchor,t.isMiddleAnchor=x.isMiddleAnchor,t.isBottomAnchor=x.isBottomAnchor;var f=y("./geometry2d");t.segmentsIntersect=f.segmentsIntersect,t.segmentDistance=f.segmentDistance,t.getTextLocation=f.getTextLocation,t.clearLocationCache=f.clearLocationCache,t.getVisibleSegment=f.getVisibleSegment,t.findPointOnPath=f.findPointOnPath;var T=y("./extend");t.extendFlat=T.extendFlat,t.extendDeep=T.extendDeep,t.extendDeepAll=T.extendDeepAll,t.extendDeepNoArrays=T.extendDeepNoArrays;var _=y("./loggers");t.log=_.log,t.warn=_.warn,t.error=_.error;var k=y("./regex");t.counterRegex=k.counter;var w=y("./throttle");t.throttle=w.throttle,t.throttleDone=w.done,t.clearThrottle=w.clear;var C=y("./dom");function A(j){var B={};for(var H in j)for(var ee=j[H],U=0;U<ee.length;U++)B[ee[U]]=+H;return B}t.getGraphDiv=C.getGraphDiv,t.isPlotDiv=C.isPlotDiv,t.removeElement=C.removeElement,t.addStyleRule=C.addStyleRule,t.addRelatedStyleRule=C.addRelatedStyleRule,t.deleteRelatedStyleRule=C.deleteRelatedStyleRule,t.getFullTransformMatrix=C.getFullTransformMatrix,t.getElementTransformMatrix=C.getElementTransformMatrix,t.getElementAndAncestors=C.getElementAndAncestors,t.equalDomRects=C.equalDomRects,t.clearResponsive=y("./clear_responsive"),t.preserveDrawingBuffer=y("./preserve_drawing_buffer"),t.makeTraceGroups=y("./make_trace_groups"),t._=y("./localize"),t.notifier=y("./notifier"),t.filterUnique=y("./filter_unique"),t.filterVisible=y("./filter_visible"),t.pushUnique=y("./push_unique"),t.increment=y("./increment"),t.cleanNumber=y("./clean_number"),t.ensureNumber=function(j){return h(j)?(j=Number(j))>n||j<r?o:j:o},t.isIndex=function(j,B){return!(void 0!==B&&j>=B)&&h(j)&&j>=0&&j%1==0},t.noop=y("./noop"),t.identity=y("./identity"),t.repeat=function(j,B){for(var H=new Array(B),ee=0;ee<B;ee++)H[ee]=j;return H},t.swapAttrs=function(j,B,H,ee){H||(H="x"),ee||(ee="y");for(var U=0;U<B.length;U++){var $=B[U],q=t.nestedProperty(j,$.replace("?",H)),te=t.nestedProperty(j,$.replace("?",ee)),ne=q.get();q.set(te.get()),te.set(ne)}},t.raiseToTop=function(j){j.parentNode.appendChild(j)},t.cancelTransition=function(j){return j.transition().duration(0)},t.constrain=function(j,B,H){return B>H?Math.max(H,Math.min(B,j)):Math.max(B,Math.min(H,j))},t.bBoxIntersect=function(j,B,H){return j.left<=B.right+(H=H||0)&&B.left<=j.right+H&&j.top<=B.bottom+H&&B.top<=j.bottom+H},t.simpleMap=function(j,B,H,ee,U){for(var $=j.length,q=new Array($),te=0;te<$;te++)q[te]=B(j[te],H,ee,U);return q},t.randstr=function j(B,H,ee,U){if(ee||(ee=16),void 0===H&&(H=24),H<=0)return"0";var $,q,te=Math.log(Math.pow(2,H))/Math.log(ee),ne="";for($=2;te===1/0;$*=2)te=Math.log(Math.pow(2,H/$))/Math.log(ee)*$;var se=te-Math.floor(te);for($=0;$<Math.floor(te);$++)ne=Math.floor(Math.random()*ee).toString(ee)+ne;se&&(q=Math.pow(ee,se),ne=Math.floor(Math.random()*q).toString(ee)+ne);var ie=parseInt(ne,ee);return B&&B[ne]||ie!==1/0&&ie>=Math.pow(2,H)?U>10?(t.warn("randstr failed uniqueness"),ne):j(B,H,ee,(U||0)+1):ne},t.OptionControl=function(j,B){j||(j={}),B||(B="opt");var H={optionList:[],_newoption:function(ee){ee[B]=j,H[ee.name]=ee,H.optionList.push(ee)}};return H["_"+B]=j,H},t.smooth=function(j,B){if((B=Math.round(B)||0)<2)return j;var H,ee,U,$,q=j.length,te=2*q,ne=2*B-1,se=new Array(ne),ie=new Array(q);for(H=0;H<ne;H++)se[H]=(1-Math.cos(Math.PI*(H+1)/B))/(2*B);for(H=0;H<q;H++){for($=0,ee=0;ee<ne;ee++)(U=H+ee+1-B)<-q?U-=te*Math.round(U/te):U>=te&&(U-=te*Math.floor(U/te)),U<0?U=-1-U:U>=q&&(U=te-1-U),$+=j[U]*se[ee];ie[H]=$}return ie},t.syncOrAsync=function(j,B,H){var ee;function U(){return t.syncOrAsync(j,B,H)}for(;j.length;)if((ee=(0,j.splice(0,1)[0])(B))&&ee.then)return ee.then(U);return H&&H(B)},t.stripTrailingSlash=function(j){return"/"===j.substr(-1)?j.substr(0,j.length-1):j},t.noneOrAll=function(j,B,H){if(j){var ee,U=!1,$=!0;for(ee=0;ee<H.length;ee++)null!=j[H[ee]]?U=!0:$=!1;if(U&&!$)for(ee=0;ee<H.length;ee++)j[H[ee]]=B[H[ee]]}},t.mergeArray=function(j,B,H,ee){var U="function"==typeof ee;if(t.isArrayOrTypedArray(j))for(var $=Math.min(j.length,B.length),q=0;q<$;q++){var te=j[q];B[q][H]=U?ee(te):te}},t.mergeArrayCastPositive=function(j,B,H){return t.mergeArray(j,B,H,function(ee){var U=+ee;return isFinite(U)&&U>0?U:0})},t.fillArray=function(j,B,H,ee){if(ee=ee||t.identity,t.isArrayOrTypedArray(j))for(var U=0;U<B.length;U++)B[U][H]=ee(j[U])},t.castOption=function(j,B,H,ee){ee=ee||t.identity;var U=t.nestedProperty(j,H).get();return t.isArrayOrTypedArray(U)?Array.isArray(B)&&t.isArrayOrTypedArray(U[B[0]])?ee(U[B[0]][B[1]]):ee(U[B]):U},t.extractOption=function(j,B,H,ee){if(H in j)return j[H];var U=t.nestedProperty(B,ee).get();return Array.isArray(U)?void 0:U},t.tagSelected=function(j,B,H){var ee,U,$=B.selectedpoints,q=B._indexToPoints;q&&(ee=A(q));for(var te=0;te<$.length;te++){var ne=$[te];if(t.isIndex(ne)||t.isArrayOrTypedArray(ne)&&t.isIndex(ne[0])&&t.isIndex(ne[1])){var se=ee?ee[ne]:ne,ie=H?H[se]:se;void 0!==(U=ie)&&U<j.length&&(j[ie].selected=1)}}},t.selIndices2selPoints=function(j){var B=j.selectedpoints,H=j._indexToPoints;if(H){for(var ee=A(H),U=[],$=0;$<B.length;$++){var q=B[$];if(t.isIndex(q)){var te=ee[q];t.isIndex(te)&&U.push(te)}}return U}return B},t.getTargetArray=function(j,B){var H=B.target;if("string"==typeof H&&H){var ee=t.nestedProperty(j,H).get();return!!Array.isArray(ee)&&ee}return!!Array.isArray(H)&&H},t.minExtend=function(j,B){var H={};"object"!=typeof B&&(B={});var ee,U,$,q=Object.keys(j);for(ee=0;ee<q.length;ee++)$=j[U=q[ee]],"_"!==U.charAt(0)&&"function"!=typeof $&&(H[U]="module"===U?$:Array.isArray($)?"colorscale"===U?$.slice():$.slice(0,3):t.isTypedArray($)?$.subarray(0,3):$&&"object"==typeof $?t.minExtend(j[U],B[U]):$);for(q=Object.keys(B),ee=0;ee<q.length;ee++)"object"==typeof($=B[U=q[ee]])&&U in H&&"object"==typeof H[U]||(H[U]=$);return H},t.titleCase=function(j){return j.charAt(0).toUpperCase()+j.substr(1)},t.containsAny=function(j,B){for(var H=0;H<B.length;H++)if(-1!==j.indexOf(B[H]))return!0;return!1},t.isIE=function(){return void 0!==window.navigator.msSaveBlob};var O=/Version\/[\d\.]+.*Safari/;t.isSafari=function(){return O.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;t.isIOS=function(){return P.test(window.navigator.userAgent)};var S=/Firefox\/(\d+)\.\d+/;t.getFirefoxVersion=function(){var j=S.exec(window.navigator.userAgent);if(j&&2===j.length){var B=parseInt(j[1]);if(!isNaN(B))return B}return null},t.isD3Selection=function(j){return j instanceof m.selection},t.ensureSingle=function(j,B,H,ee){var U=j.select(B+(H?"."+H:""));if(U.size())return U;var $=j.append(B);return H&&$.classed(H,!0),ee&&$.call(ee),$},t.ensureSingleById=function(j,B,H,ee){var U=j.select(B+"#"+H);if(U.size())return U;var $=j.append(B).attr("id",H);return ee&&$.call(ee),$},t.objectFromPath=function(j,B){for(var H,ee=j.split("."),U=H={},$=0;$<ee.length;$++){var q=ee[$],te=null,ne=ee[$].match(/(.*)\[([0-9]+)\]/);ne?(te=ne[2],(H=H[q=ne[1]]=[])[te]=$===ee.length-1?B:{},H=H[te]):(H[q]=$===ee.length-1?B:{},H=H[q])}return U};var E=/^([^\[\.]+)\.(.+)?/,D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;t.expandObjectPaths=function(j){var B,H,ee,U,$,q,te;if("object"==typeof j&&!Array.isArray(j))for(H in j)j.hasOwnProperty(H)&&((B=H.match(E))?(U=j[H],ee=B[1],delete j[H],j[ee]=t.extendDeepNoArrays(j[ee]||{},t.objectFromPath(H,t.expandObjectPaths(U))[ee])):(B=H.match(D))?(U=j[H],ee=B[1],$=parseInt(B[2]),delete j[H],j[ee]=j[ee]||[],"."===B[3]?(te=B[4],q=j[ee][$]=j[ee][$]||{},t.extendDeepNoArrays(q,t.objectFromPath(te,t.expandObjectPaths(U)))):j[ee][$]=t.expandObjectPaths(U)):j[H]=t.expandObjectPaths(j[H]));return j},t.numSeparate=function(j,B,H){if(H||(H=!1),"string"!=typeof B||0===B.length)throw new Error("Separator string required for formatting!");"number"==typeof j&&(j=String(j));var ee=/(\d+)(\d{3})/,U=B.charAt(0),$=B.charAt(1),q=j.split("."),te=q[0],ne=q.length>1?U+q[1]:"";if($&&(q.length>1||te.length>4||H))for(;ee.test(te);)te=te.replace(ee,"$1"+$+"$2");return te+ne},t.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var z=/^\w*$/;t.templateString=function(j,B){var H={};return j.replace(t.TEMPLATE_STRING_REGEX,function(ee,U){var $;return z.test(U)?$=B[U]:(H[U]=H[U]||t.nestedProperty(B,U).get,$=H[U]()),t.isValidTextValue($)?$:""})};var N={max:10,count:0,name:"hovertemplate"};t.hovertemplateString=function(){return J.apply(N,arguments)};var V={max:10,count:0,name:"texttemplate"};t.texttemplateString=function(){return J.apply(V,arguments)};var X=/^[:|\|]/;function J(j,B,H){var ee=this,U=arguments;B||(B={});var $={};return j.replace(t.TEMPLATE_STRING_REGEX,function(q,te,ne){var se,ie,ue,le="_xother"===te||"_yother"===te,de="_xother_"===te||"_yother_"===te,be="xother_"===te||"yother_"===te,_e="xother"===te||"yother"===te||le||be||de,xe=te;if((le||de)&&(xe=xe.substring(1)),(be||de)&&(xe=xe.substring(0,xe.length-1)),_e){if(void 0===(se=B[xe]))return""}else for(ue=3;ue<U.length;ue++)if(ie=U[ue]){if(ie.hasOwnProperty(xe)){se=ie[xe];break}if(z.test(xe)||(se=t.nestedProperty(ie,xe).get(),(se=$[xe]||t.nestedProperty(ie,xe).get())&&($[xe]=se)),void 0!==se)break}if(void 0===se&&ee)return ee.count<ee.max&&(t.warn("Variable '"+xe+"' in "+ee.name+" could not be found!"),se=q),ee.count===ee.max&&t.warn("Too many "+ee.name+" warnings - additional warnings will be suppressed"),ee.count++,q;if(ne){var Ee;if(":"===ne[0]&&(se=(Ee=H?H.numberFormat:t.numberFormat)(ne.replace(X,""))(se)),"|"===ne[0]){Ee=H?H.timeFormat:v;var he=t.dateTime2ms(se);se=t.formatDate(he,ne.replace(X,""),!1,Ee)}}else{var me=xe+"Label";B.hasOwnProperty(me)&&(se=B[me])}return _e&&(se="("+se+")",(le||de)&&(se=" "+se),(be||de)&&(se+=" ")),se})}t.subplotSort=function(j,B){for(var H=Math.min(j.length,B.length)+1,ee=0,U=0,$=0;$<H;$++){var q=j.charCodeAt($)||0,te=B.charCodeAt($)||0,ne=q>=48&&q<=57,se=te>=48&&te<=57;if(ne&&(ee=10*ee+q-48),se&&(U=10*U+te-48),!ne||!se){if(ee!==U)return ee-U;if(q!==te)return q-te}}return U-ee};var G=2e9;t.seedPseudoRandom=function(){G=2e9},t.pseudoRandom=function(){var j=G;return G=(69069*G+1)%4294967296,Math.abs(G-j)<429496729?t.pseudoRandom():G/4294967296},t.fillText=function(j,B,H){var ee=Array.isArray(H)?function(q){H.push(q)}:function(q){H.text=q},U=t.extractOption(j,B,"htx","hovertext");if(t.isValidTextValue(U))return ee(U);var $=t.extractOption(j,B,"tx","text");return t.isValidTextValue($)?ee($):void 0},t.isValidTextValue=function(j){return j||0===j},t.formatPercent=function(j,B){B=B||0;for(var H=(Math.round(100*j*Math.pow(10,B))*Math.pow(.1,B)).toFixed(B)+"%",ee=0;ee<B;ee++)-1!==H.indexOf(".")&&(H=(H=H.replace("0%","%")).replace(".%","%"));return H},t.isHidden=function(j){var B=window.getComputedStyle(j).display;return!B||"none"===B},t.strTranslate=function(j,B){return j||B?"translate("+j+","+B+")":""},t.strRotate=function(j){return j?"rotate("+j+")":""},t.strScale=function(j){return 1!==j?"scale("+j+")":""},t.getTextTransform=function(j){var B=j.noCenter,H=j.textX,ee=j.textY,ne=j.rotate,se=j.scale;return se?se>1&&(se=1):se=0,t.strTranslate(j.targetX-se*(H+(j.anchorX||0)),j.targetY-se*(ee+(j.anchorY||0)))+t.strScale(se)+(ne?"rotate("+ne+(B?"":" "+H+" "+ee)+")":"")},t.ensureUniformFontSize=function(j,B){var H=t.extendFlat({},B);return H.size=Math.max(B.size,j._fullLayout.uniformtext.minsize||0),H},t.join2=function(j,B,H){var ee=j.length;return ee>1?j.slice(0,-1).join(B)+H+j[ee-1]:j.join(B)},t.bigFont=function(j){return Math.round(1.2*j)};var Z=t.getFirefoxVersion(),re=null!==Z&&Z<86;t.getPositionFromD3Event=function(){return re?[m.event.layerX,m.event.layerY]:[m.event.offsetX,m.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(y,Q,K){"use strict";Q.exports=function(m){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(m):"[object Object]"===Object.prototype.toString.call(m)&&Object.getPrototypeOf(m).hasOwnProperty("hasOwnProperty")}},{}],517:[function(y,Q,K){"use strict";var m=y("./nested_property"),v=/^\w*$/;Q.exports=function(b,h,e,n){var r,o,t;e=e||"name",n=n||"value";var d={};h&&h.length?(t=m(b,h),o=t.get()):o=b,h=h||"";var a={};if(o)for(r=0;r<o.length;r++)a[o[r][e]]=r;var i=v.test(n),s={set:function(c,l){var p=null===l?4:0;if(!o){if(!t||4===p)return;t.set(o=[])}var g=a[c];if(void 0===g){if(4===p)return;p|=3,a[c]=g=o.length}else l!==(i?o[g][n]:m(o[g],n).get())&&(p|=2);var u=o[g]=o[g]||{};return u[e]=c,i?u[n]=l:m(u,n).set(l),null!==l&&(p&=-5),d[g]=d[g]|p,s},get:function(c){if(o){var l=a[c];return void 0===l?void 0:i?o[l][n]:m(o[l],n).get()}},rename:function(c,l){var p=a[c];return void 0===p||(d[p]=1|d[p],a[l]=p,delete a[c],o[p][e]=l),s},remove:function(c){var l=a[c];if(void 0===l)return s;var p=o[l];if(Object.keys(p).length>2)return d[l]=2|d[l],s.set(c,null);if(i){for(r=l;r<o.length;r++)d[r]=3|d[r];for(r=l;r<o.length;r++)a[o[r][e]]--;o.splice(l,1),delete a[c]}else m(p,n).set(null),d[l]=6|d[l];return s},constructUpdate:function(){for(var c,l,p={},g=Object.keys(d),u=0;u<g.length;u++)c=h+"["+(l=g[u])+"]",o[l]?(1&d[l]&&(p[c+"."+e]=o[l][e]),2&d[l]&&(p[c+"."+n]=i?4&d[l]?null:o[l][n]:4&d[l]?null:m(o[l],n).get())):p[c]=null;return p}};return s}},{"./nested_property":523}],518:[function(y,Q,K){"use strict";var m=y("../registry");Q.exports=function(v,b){for(var h=v._context.locale,e=0;e<2;e++){for(var n=v._context.locales,r=0;r<2;r++){var o=(n[h]||{}).dictionary;if(o){var t=o[b];if(t)return t}n=m.localeRegistry}var d=h.split("-")[0];if(d===h)break;h=d}return b}},{"../registry":647}],519:[function(y,Q,K){"use strict";var m=y("../plot_api/plot_config").dfltConfig,v=y("./notifier"),b=Q.exports={};b.log=function(){var h;if(m.logging>1){var e=["LOG:"];for(h=0;h<arguments.length;h++)e.push(arguments[h]);console.trace.apply(console,e)}if(m.notifyOnLogging>1){var n=[];for(h=0;h<arguments.length;h++)n.push(arguments[h]);v(n.join("<br>"),"long")}},b.warn=function(){var h;if(m.logging>0){var e=["WARN:"];for(h=0;h<arguments.length;h++)e.push(arguments[h]);console.trace.apply(console,e)}if(m.notifyOnLogging>0){var n=[];for(h=0;h<arguments.length;h++)n.push(arguments[h]);v(n.join("<br>"),"stick")}},b.error=function(){var h;if(m.logging>0){var e=["ERROR:"];for(h=0;h<arguments.length;h++)e.push(arguments[h]);console.error.apply(console,e)}if(m.notifyOnLogging>0){var n=[];for(h=0;h<arguments.length;h++)n.push(arguments[h]);v(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(y,Q,K){"use strict";var m=y("@plotly/d3");Q.exports=function(v,b,h){var e=v.selectAll("g."+h.replace(/\s/g,".")).data(b,function(r){return r[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",h),e.order();var n=v.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(r){r[0][n]=m.select(this)}),e}},{"@plotly/d3":58}],521:[function(y,Q,K){"use strict";var m=y("gl-mat4");K.init2dArray=function(v,b){for(var h=new Array(v),e=0;e<v;e++)h[e]=new Array(b);return h},K.transposeRagged=function(v){var b,h,e=0,n=v.length;for(b=0;b<n;b++)e=Math.max(e,v[b].length);var r=new Array(e);for(b=0;b<e;b++)for(r[b]=new Array(n),h=0;h<n;h++)r[b][h]=v[h][b];return r},K.dot=function(v,b){if(!v.length||!b.length||v.length!==b.length)return null;var h,e,n=v.length;if(v[0].length)for(h=new Array(n),e=0;e<n;e++)h[e]=K.dot(v[e],b);else if(b[0].length){var r=K.transposeRagged(b);for(h=new Array(r.length),e=0;e<r.length;e++)h[e]=K.dot(v,r[e])}else for(h=0,e=0;e<n;e++)h+=v[e]*b[e];return h},K.translationMatrix=function(v,b){return[[1,0,v],[0,1,b],[0,0,1]]},K.rotationMatrix=function(v){var b=v*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},K.rotationXYMatrix=function(v,b,h){return K.dot(K.dot(K.translationMatrix(b,h),K.rotationMatrix(v)),K.translationMatrix(-b,-h))},K.apply3DTransform=function(v){return function(){var b=arguments,h=1===arguments.length?b[0]:[b[0],b[1],b[2]||0];return K.dot(v,[h[0],h[1],h[2],1]).slice(0,3)}},K.apply2DTransform=function(v){return function(){var b=arguments;3===b.length&&(b=b[0]);var h=1===arguments.length?b[0]:[b[0],b[1]];return K.dot(v,[h[0],h[1],1]).slice(0,2)}},K.apply2DTransform2=function(v){var b=K.apply2DTransform(v);return function(h){return b(h.slice(0,2)).concat(b(h.slice(2,4)))}},K.convertCssMatrix=function(v){if(v){var b=v.length;if(16===b)return v;if(6===b)return[v[0],v[1],0,0,v[2],v[3],0,0,0,0,1,0,v[4],v[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},K.inverseTransformMatrix=function(v){var b=[];return m.invert(b,v),[[b[0],b[1],b[2],b[3]],[b[4],b[5],b[6],b[7]],[b[8],b[9],b[10],b[11]],[b[12],b[13],b[14],b[15]]]}},{"gl-mat4":210}],522:[function(y,Q,K){"use strict";Q.exports={mod:function(m,v){var b=m%v;return b<0?b+v:b},modHalf:function(m,v){return Math.abs(m)>v/2?m-Math.round(m/v)*v:m}}},{}],523:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("./array").isArrayOrTypedArray;function b(d,a){return function(){var i,s,c,l,p,g=d;for(l=0;l<a.length-1;l++){if(-1===(i=a[l])){for(s=!0,c=[],p=0;p<g.length;p++)c[p]=b(g[p],a.slice(l+1))(),c[p]!==c[0]&&(s=!1);return s?c[0]:c}if("number"==typeof i&&!v(g)||"object"!=typeof(g=g[i])||null===g)return}if("object"==typeof g&&null!==g&&null!==(c=g[a[l]]))return c}}Q.exports=function(d,a){if(m(a))a=String(a);else if("string"!=typeof a||"[-1]"===a.substr(a.length-4))throw"bad property string";for(var i,s,c,l=0,p=a.split(".");l<p.length;){if(i=String(p[l]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])p[l]=i[1];else{if(0!==l)throw"bad property string";p.splice(0,1)}for(s=i[2].substr(1,i[2].length-2).split("]["),c=0;c<s.length;c++)l++,p.splice(l,0,Number(s[c]))}l++}return"object"!=typeof d?{set:function(){throw"bad container"},get:function(){},astr:a,parts:p,obj:d}:{set:n(d,p,a),get:b(d,p),astr:a,parts:p,obj:d}};var h=/(^|\.)args\[/;function e(d,a){return void 0===d||null===d&&!a.match(h)}function n(d,a,i){return function(s){var c,l,p=d,g="",u=[[d,g]],x=e(s,i);for(l=0;l<a.length-1;l++){if("number"==typeof(c=a[l])&&!v(p))throw"array index but container is not an array";if(-1===c){if(x=!o(p,a.slice(l+1),s,i))break;return}if(!t(p,c,a[l+1],x))break;if("object"!=typeof(p=p[c])||null===p)throw"container is not an object";g=r(g,c),u.push([p,g])}if(x){if(l===a.length-1&&(delete p[a[l]],Array.isArray(p)&&+a[l]==p.length-1))for(;p.length&&void 0===p[p.length-1];)p.pop()}else p[a[l]]=s}}function r(d,a){var i=a;return m(a)?i="["+a+"]":d&&(i="."+a),d+i}function o(d,a,i,s){var c,l=v(i),p=!0,g=i,u=s.replace("-1",0),x=!l&&e(i,u),f=a[0];for(c=0;c<d.length;c++)u=s.replace("-1",c),l&&(x=e(g=i[c%i.length],u)),x&&(p=!1),t(d,c,f,x)&&n(d[c],a,s.replace("-1",c))(g);return p}function t(d,a,i,s){if(void 0===d[a]){if(s)return!1;d[a]="number"==typeof i?[]:{}}return!0}},{"./array":497,"fast-isnumeric":190}],524:[function(y,Q,K){"use strict";Q.exports=function(){}},{}],525:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=[];Q.exports=function(h,e){if(-1===b.indexOf(h)){b.push(h);var n=1e3;v(e)?n=e:"long"===e&&(n=3e3);var r=m.select("body").selectAll(".plotly-notifier").data([0]);r.enter().append("div").classed("plotly-notifier",!0),r.selectAll(".notifier-note").data(b).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var d=m.select(this);d.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){d.transition().call(o)});for(var a=d.append("p"),i=t.split(/<br\s*\/?>/g),s=0;s<i.length;s++)s&&a.append("br"),a.append("span").text(i[s]);"stick"===e?d.transition().duration(350).style("opacity",1):d.transition().duration(700).style("opacity",1).transition().delay(n).call(o)})}function o(t){t.duration(700).style("opacity",0).each("end",function(d){var a=b.indexOf(d);-1!==a&&b.splice(a,1),m.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(y,Q,K){"use strict";var m=y("./setcursor"),v="data-savedcursor";Q.exports=function(b,h){var e=b.attr(v);if(h){if(!e){for(var n=(b.attr("class")||"").split(" "),r=0;r<n.length;r++){var o=n[r];0===o.indexOf("cursor-")&&b.attr(v,o.substr(7)).classed(o,!1)}b.attr(v)||b.attr(v,"!!")}m(b,h)}else e&&(b.attr(v,null),"!!"===e?m(b):m(b,e))}},{"./setcursor":536}],527:[function(y,Q,K){"use strict";var m=y("./matrix").dot,v=y("../constants/numerical").BADNUM,b=Q.exports={};b.tester=function(h){var e,n=h.slice(),r=n[0][0],o=r,t=n[0][1],d=t;for(n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),e=1;e<n.length;e++)r=Math.min(r,n[e][0]),o=Math.max(o,n[e][0]),t=Math.min(t,n[e][1]),d=Math.max(d,n[e][1]);var a,i=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(i=!0,a=function(l){return l[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(i=!0,a=function(l){return l[1]===n[0][1]}));var s=!0,c=n[0];for(e=1;e<n.length;e++)if(c[0]!==n[e][0]||c[1]!==n[e][1]){s=!1;break}return{xmin:r,xmax:o,ymin:t,ymax:d,pts:n,contains:i?function(l,p){var g=l[0],u=l[1];return!(g===v||g<r||g>o||u===v||u<t||u>d||p&&a(l))}:function(l,p){var g=l[0],u=l[1];if(g===v||g<r||g>o||u===v||u<t||u>d)return!1;var x,f,T,_,k,w=n.length,C=n[0][0],A=n[0][1],O=0;for(x=1;x<w;x++)if(f=C,T=A,C=n[x][0],A=n[x][1],!(g<(_=Math.min(f,C))||g>Math.max(f,C)||u>Math.max(T,A)))if(u<Math.min(T,A))g!==_&&O++;else{if(u===(k=C===f?u:T+(g-f)*(A-T)/(C-f)))return 1!==x||!p;u<=k&&g!==_&&O++}return O%2==1},isRect:i,degenerate:s}},b.isSegmentBent=function(h,e,n,r){var o,t,d,a=h[e],i=[h[n][0]-a[0],h[n][1]-a[1]],s=m(i,i),c=Math.sqrt(s),l=[-i[1]/c,i[0]/c];for(o=e+1;o<n;o++)if((d=m(t=[h[o][0]-a[0],h[o][1]-a[1]],i))<0||d>s||Math.abs(m(t,l))>r)return!0;return!1},b.filter=function(h,e){var n=[h[0]],r=0,o=0;function t(d){h.push(d);var a=n.length,i=r;n.splice(o+1);for(var s=i+1;s<h.length;s++)(s===h.length-1||b.isSegmentBent(h,i,s+1,e))&&(n.push(h[s]),n.length<a-2&&(r=s,o=n.length-1),i=s)}return h.length>1&&t(h.pop()),{addPt:t,raw:h,filtered:n}}},{"../constants/numerical":491,"./matrix":521}],528:[function(y,Q,K){(function(m){(function(){"use strict";var v=y("./show_no_webgl_msg"),b=y("regl");Q.exports=function(h,e,n){var r=h._fullLayout,o=!0;return r._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(n);else if(!t.pick||r._has("parcoords")){try{t.regl=b({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:h._context.plotGlPixelRatio||m.devicePixelRatio,extensions:e||[],cachedCode:n||{}})}catch{o=!1}t.regl||(o=!1),o&&this.addEventListener("webglcontextlost",function(d){h&&h.emit&&h.emit("plotly_webglcontextlost",{event:d,layer:t.key})},!1)}}),o||v({container:r._glcontainer.node()}),o}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("is-mobile");Q.exports=function(b){var h,a;if("string"!=typeof(h=b&&b.hasOwnProperty("userAgent")?b.userAgent:(typeof navigator<"u"&&(a=navigator.userAgent),a&&a.headers&&"string"==typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]),a)))return!0;var e=v({ua:{headers:{"user-agent":h}},tablet:!0,featureDetect:!1});if(!e)for(var n=h.split(" "),r=1;r<n.length;r++)if(-1!==n[r].indexOf("Safari"))for(var o=r-1;o>-1;o--){var t=n[o];if("Version/"===t.substr(0,8)){var d=t.substr(8).split(".")[0];if(m(d)&&(d=+d),d>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(y,Q,K){"use strict";Q.exports=function(m,v){if(v instanceof RegExp){for(var b=v.toString(),h=0;h<m.length;h++)if(m[h]instanceof RegExp&&m[h].toString()===b)return m;m.push(v)}else!v&&0!==v||-1!==m.indexOf(v)||m.push(v);return m}},{}],531:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("../plot_api/plot_config").dfltConfig,b={add:function(h,e,n,r,o){var t,d;h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1},d=h.undoQueue.index,h.autoplay?h.undoQueue.inSequence||(h.autoplay=!1):(!h.undoQueue.sequence||h.undoQueue.beginSequence?(h.undoQueue.queue.splice(d,h.undoQueue.queue.length-d,t={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),h.undoQueue.index+=1):t=h.undoQueue.queue[d-1],h.undoQueue.beginSequence=!1,t&&(t.undo.calls.unshift(e),t.undo.args.unshift(n),t.redo.calls.push(r),t.redo.args.push(o)),h.undoQueue.queue.length>v.queueLength&&(h.undoQueue.queue.shift(),h.undoQueue.index--))},startSequence:function(h){h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1},h.undoQueue.sequence=!0,h.undoQueue.beginSequence=!0},stopSequence:function(h){h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1},h.undoQueue.sequence=!1,h.undoQueue.beginSequence=!1},undo:function(h){var e,n;if(!(void 0===h.undoQueue||isNaN(h.undoQueue.index)||h.undoQueue.index<=0)){for(h.undoQueue.index--,e=h.undoQueue.queue[h.undoQueue.index],h.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)b.plotDo(h,e.undo.calls[n],e.undo.args[n]);h.undoQueue.inSequence=!1,h.autoplay=!1}},redo:function(h){var e,n;if(!(void 0===h.undoQueue||isNaN(h.undoQueue.index)||h.undoQueue.index>=h.undoQueue.queue.length)){for(e=h.undoQueue.queue[h.undoQueue.index],h.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)b.plotDo(h,e.redo.calls[n],e.redo.args[n]);h.undoQueue.inSequence=!1,h.autoplay=!1,h.undoQueue.index++}},plotDo:function(h,e,n){h.autoplay=!0,n=function(r,o){for(var t,d=[],a=0;a<o.length;a++)d[a]=(t=o[a])===r?t:"object"==typeof t?Array.isArray(t)?m.extendDeep([],t):m.extendDeepAll({},t):t;return d}(h,n),e.apply(null,n)}};Q.exports=b},{"../lib":515,"../plot_api/plot_config":553}],532:[function(y,Q,K){"use strict";K.counter=function(m,v,b,h){var e=(v||"")+(b?"":"$"),n=!1===h?"":"^";return"xy"===m?new RegExp(n+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(n+m+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(y,Q,K){"use strict";var m=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,v=/^[^\.\[\]]+$/;Q.exports=function(b,h){for(;h;){var e=b.match(m);if(e)b=e[1];else{if(!b.match(v))throw new Error("bad relativeAttr call:"+[b,h]);b=""}if("^"!==h.charAt(0))break;h=h.slice(1)}return b&&"["!==h.charAt(0)?b+"."+h:b+h}},{}],534:[function(y,Q,K){"use strict";var m=y("./array").isArrayOrTypedArray,v=y("./is_plain_object");Q.exports=function b(h,e){for(var n in e){var r=e[n],o=h[n];if(o!==r)if("_"===n.charAt(0)||"function"==typeof r){if(n in h)continue;h[n]=r}else if(m(r)&&m(o)&&v(r[0])){if("customdata"===n||"ids"===n)continue;for(var t=Math.min(r.length,o.length),d=0;d<t;d++)o[d]!==r[d]&&v(r[d])&&v(o[d])&&b(o[d],r[d])}else v(r)&&v(o)&&(b(o,r),Object.keys(o).length||delete h[n])}}},{"./array":497,"./is_plain_object":516}],535:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("./loggers"),b=y("./identity"),h=y("../constants/numerical").BADNUM;function e(t,d){return t<d}function n(t,d){return t<=d}function r(t,d){return t>d}function o(t,d){return t>=d}K.findBin=function(t,d,a){if(m(d.start))return a?Math.ceil((t-d.start)/d.size-1e-9)-1:Math.floor((t-d.start)/d.size+1e-9);var i,s,c=0,l=d.length,p=0,g=l>1?(d[l-1]-d[0])/(l-1):1;for(s=g>=0?a?e:n:a?o:r,t+=1e-9*g*(a?-1:1)*(g>=0?1:-1);c<l&&p++<100;)s(d[i=Math.floor((c+l)/2)],t)?c=i+1:l=i;return p>90&&v.log("Long binary search..."),c-1},K.sorterAsc=function(t,d){return t-d},K.sorterDes=function(t,d){return d-t},K.distinctVals=function(t){var d,a=t.slice();for(a.sort(K.sorterAsc),d=a.length-1;d>-1&&a[d]===h;d--);for(var i,s=a[d]-a[0]||1,c=s/(d||1)/1e4,l=[],p=0;p<=d;p++){var g=a[p],u=g-i;void 0===i?(l.push(g),i=g):u>c&&(s=Math.min(s,u),l.push(g),i=g)}return{vals:l,minDiff:s}},K.roundUp=function(t,d,a){for(var i,s=0,c=d.length-1,l=0,p=a?0:1,g=a?1:0,u=a?Math.ceil:Math.floor;s<c&&l++<100;)d[i=u((s+c)/2)]<=t?s=i+p:c=i-g;return d[s]},K.sort=function(t,d){for(var a=0,i=0,s=1;s<t.length;s++){var c=d(t[s],t[s-1]);if(c<0?a=1:c>0&&(i=1),a&&i)return t.sort(d)}return i?t:t.reverse()},K.findIndexOfMin=function(t,d){d=d||b;for(var a,i=1/0,s=0;s<t.length;s++){var c=d(t[s]);c<i&&(i=c,a=s)}return a}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(y,Q,K){"use strict";Q.exports=function(m,v){(m.attr("class")||"").split(" ").forEach(function(b){0===b.indexOf("cursor-")&&m.classed(b,!1)}),v&&m.classed("cursor-"+v,!0)}},{}],537:[function(y,Q,K){"use strict";var m=y("../components/color"),v=function(){};Q.exports=function(b){for(var h in b)"function"==typeof b[h]&&(b[h]=v);b.destroy=function(){b.container.parentNode.removeChild(b.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=m.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=m.lightLine,e.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",e.appendChild(n),b.container.appendChild(e),b.container.style.background="#FFFFFF",b.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(y,Q,K){"use strict";Q.exports=function(m){return Object.keys(m).sort()}},{}],539:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("./array").isArrayOrTypedArray;K.aggNums=function(b,h,e,n){var r,o;if((!n||n>e.length)&&(n=e.length),m(h)||(h=!1),v(e[0])){for(o=new Array(n),r=0;r<n;r++)o[r]=K.aggNums(b,h,e[r]);e=o}for(r=0;r<n;r++)m(h)?m(e[r])&&(h=b(+h,+e[r])):h=e[r];return h},K.len=function(b){return K.aggNums(function(h){return h+1},0,b)},K.mean=function(b,h){return h||(h=K.len(b)),K.aggNums(function(e,n){return e+n},0,b)/h},K.midRange=function(b){if(void 0!==b&&0!==b.length)return(K.aggNums(Math.max,null,b)+K.aggNums(Math.min,null,b))/2},K.variance=function(b,h,e){return h||(h=K.len(b)),m(e)||(e=K.mean(b,h)),K.aggNums(function(n,r){return n+Math.pow(r-e,2)},0,b)/h},K.stdev=function(b,h,e){return Math.sqrt(K.variance(b,h,e))},K.median=function(b){var h=b.slice().sort();return K.interp(h,.5)},K.interp=function(b,h){if(!m(h))throw"n should be a finite number";if((h=h*b.length-.5)<0)return b[0];if(h>b.length-1)return b[b.length-1];var e=h%1;return e*b[Math.ceil(h)]+(1-e)*b[Math.floor(h)]}},{"./array":497,"fast-isnumeric":190}],540:[function(y,Q,K){"use strict";var m=y("color-normalize");Q.exports=function(v){return v?m(v):[0,0,0,1]}},{"color-normalize":89}],541:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../lib"),b=v.strTranslate,h=y("../constants/xmlns_namespaces"),e=y("../constants/alignment").LINE_SPACING,n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;K.convertToTspans=function(S,E,D){var z=S.text(),N=!S.attr("data-notex")&&E&&E._context.typesetMath&&typeof MathJax<"u"&&z.match(n),V=m.select(S.node().parentNode);if(!V.empty()){var X=S.attr("class")?S.attr("class").split(" ")[0]:"text";return V.selectAll("svg."+(X+="-math")).remove(),V.selectAll("g."+X+"-group").remove(),S.style("display",null).attr({"data-unformatted":z,"data-math":"N"}),N?(E&&E._promises||[]).push(new Promise(function(G){S.style("display","none");var Z=parseInt(S.node().style.fontSize,10);!function(j,B,H){var ee,U,$,q,te=parseInt((MathJax.version||"").split(".")[0]);if(2===te||3===te){var ne=function(){var ie="math-output-"+v.randstr({},64),ue=(q=m.select("body").append("div").attr({id:ie}).style({visibility:"hidden",position:"absolute","font-size":B.fontSize+"px"}).text(j.replace(r,"\\lt ").replace(o,"\\gt "))).node();return 2===te?MathJax.Hub.Typeset(ue):MathJax.typeset([ue])},se=function(){var ie=q.select(2===te?".MathJax_SVG":".MathJax"),ue=!ie.empty()&&q.select("svg").node();if(ue){var le,de=ue.getBoundingClientRect();le=2===te?m.select("body").select("#MathJax_SVG_glyphs"):ie.select("defs"),H(ie,le,de)}else v.log("There was an error in the tex syntax.",j),H();q.remove()};2===te?MathJax.Hub.Queue(function(){return U=v.extendDeepAll({},MathJax.Hub.config),$=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:t},displayAlign:"left"})},function(){if("SVG"!==(ee=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},ne,se,function(){if("SVG"!==ee)return MathJax.Hub.setRenderer(ee)},function(){return void 0!==$&&(MathJax.Hub.processSectionDelay=$),MathJax.Hub.Config(U)}):3===te&&(U=v.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=t,"svg"!==(ee=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ne(),se(),"svg"!==ee&&(MathJax.config.startup.output=ee),MathJax.config=U}))}else v.warn("No MathJax version:",MathJax.version)}(N[2],{fontSize:Z},function(j,B,H){V.selectAll("svg."+X).remove(),V.selectAll("g."+X+"-group").remove();var ee=j&&j.select("svg");if(!ee||!ee.node())return J(),void G();var U=V.append("g").classed(X+"-group",!0).attr({"pointer-events":"none","data-unformatted":z,"data-math":"Y"});U.node().appendChild(ee.node()),B&&B.node()&&ee.node().insertBefore(B.node().cloneNode(!0),ee.node().firstChild);var $=H.width,q=H.height;ee.attr({class:X,height:q,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var te=S.node().style.fill||"black",ne=ee.select("g");ne.attr({fill:te,stroke:te});var se=ne.node().getBoundingClientRect(),ie=se.width,ue=se.height;(ie>$||ue>q)&&(ee.style("overflow","hidden"),ie=(se=ee.node().getBoundingClientRect()).width,ue=se.height);var le=+S.attr("x"),de=+S.attr("y"),be=-(Z||S.node().getBoundingClientRect().height)/4;if("y"===X[0])U.attr({transform:"rotate("+[-90,le,de]+")"+b(-ie/2,be-ue/2)});else if("l"===X[0])de=be-ue/2;else if("a"===X[0]&&0!==X.indexOf("atitle"))le=0,de=be;else{var _e=S.attr("text-anchor");le-=ie*("middle"===_e?.5:"end"===_e?1:0),de=de+be-ue/2}ee.attr({x:le,y:de}),D&&D.call(S,U),G(U)})})):J(),S}function J(){V.empty()||(X=S.attr("class")+"-math",V.select("svg."+X).remove()),S.text("").style("white-space","pre"),function(G,Z){Z=Z.replace(c," ");var re,j=!1,B=[],H=-1;function ee(){H++;var he=document.createElementNS(h.svg,"tspan");m.select(he).attr({class:"line",dy:H*e+"em"}),G.appendChild(he),re=he;var me=B;if(B=[{node:he}],me.length>1)for(var Se=1;Se<me.length;Se++)U(me[Se])}function U(he){var me,Se=he.type,Me={};if("a"===Se){me="a";var Ie=he.target,Fe=he.href,Ne=he.popup;Fe&&(Me={"xlink:xlink:show":"_blank"===Ie||"_"!==Ie.charAt(0)?"new":"replace",target:Ie,"xlink:xlink:href":Fe},Ne&&(Me.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ne+'");return false;'))}else me="tspan";he.style&&(Me.style=he.style);var De=document.createElementNS(h.svg,me);if("sup"===Se||"sub"===Se){$(re,"\u200b"),re.appendChild(De);var $e=document.createElementNS(h.svg,"tspan");$($e,"\u200b"),m.select($e).attr("dy",i[Se]),Me.dy=a[Se],re.appendChild(De),re.appendChild($e)}else re.appendChild(De);m.select(De).attr(Me),re=he.node=De,B.push(he)}function $(he,me){he.appendChild(document.createTextNode(me))}function q(he){if(1!==B.length){var me=B.pop();he!==me.type&&v.log("Start tag <"+me.type+"> doesnt match end tag <"+he+">. Pretending it did match.",Z),re=B[B.length-1].node}else v.log("Ignoring unexpected end tag </"+he+">.",Z)}g.test(Z)?ee():(re=G,B=[{node:G}]);for(var te=Z.split(l),ne=0;ne<te.length;ne++){var se=te[ne],ie=se.match(p),ue=ie&&ie[2].toLowerCase(),le=d[ue];if("br"===ue)ee();else if(void 0===le)$(re,A(se));else if(ie[1])q(ue);else{var de=ie[4],be={type:ue},_e=_(de,u);if(_e?(_e=_e.replace(k,"$1 fill:"),le&&(_e+=";"+le)):le&&(_e=le),_e&&(be.style=_e),"a"===ue){j=!0;var xe=_(de,x);if(xe){var Ee=O(xe);Ee&&(be.href=Ee,be.target=_(de,f)||"_blank",be.popup=_(de,T))}}U(be)}}return j}(S.node(),z)&&S.style("pointer-events","all"),K.positionText(S),D&&D.call(S)}};var r=/(<|&lt;|&#60;)/g,o=/(>|&gt;|&#62;)/g,t=[["$","$"],["\\(","\\)"]],d={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},a={sub:"0.3em",sup:"-0.6em"},i={sub:"-0.21em",sup:"0.42em"},s=["http:","https:","mailto:","",void 0,":"],c=K.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,p=/<(\/?)([^ >]*)(\s+(.*))?>/i,g=/<br(\s+.*)?>/i;K.BR_TAG_ALL=/<br(\s+.*)?>/gi;var u=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,x=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,f=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,T=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(S,E){if(!S)return null;var D=S.match(E),z=D&&(D[3]||D[4]);return z&&A(z)}var k=/(^|;)\s*color:/;K.plainText=function(S,E){for(var D=void 0!==(E=E||{}).len&&-1!==E.len?E.len:1/0,z=void 0!==E.allowedTags?E.allowedTags:["br"],V=S.split(l),X=[],J="",G=0,Z=0;Z<V.length;Z++){var re=V[Z],j=re.match(p),B=j&&j[2].toLowerCase();if(B)-1!==z.indexOf(B)&&(X.push(re),J=B);else{var H=re.length;if(G+H<D)X.push(re),G+=H;else if(G<D){var ee=D-G;J&&("br"!==J||ee<=3||H<=3)&&X.pop(),X.push(D>3?re.substr(0,ee-3)+"...":re.substr(0,ee));break}J=""}}return X.join("")};var w={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function A(S){return S.replace(C,function(E,D){return("#"===D.charAt(0)?function(z){if(!(z>1114111)){var N=String.fromCodePoint;if(N)return N(z);var V=String.fromCharCode;return z<=65535?V(z):V(55232+(z>>10),z%1024+56320)}}("x"===D.charAt(1)?parseInt(D.substr(2),16):parseInt(D.substr(1),10)):w[D])||E})}function O(S){var E=encodeURI(decodeURI(S)),D=document.createElement("a"),z=document.createElement("a");D.href=S,z.href=E;var V=z.protocol;return-1!==s.indexOf(D.protocol)&&-1!==s.indexOf(V)?E:""}function P(S,E,D){var z,N,V,X=D.horizontalAlign,J=D.verticalAlign||"top",G=S.node().getBoundingClientRect(),Z=E.node().getBoundingClientRect();return N="bottom"===J?function(){return G.bottom-z.height}:"middle"===J?function(){return G.top+(G.height-z.height)/2}:function(){return G.top},V="right"===X?function(){return G.right-z.width}:"center"===X?function(){return G.left+(G.width-z.width)/2}:function(){return G.left},function(){z=this.node().getBoundingClientRect();var re=V()-Z.left,j=N()-Z.top,B=D.gd||{};if(D.gd){B._fullLayout._calcInverseTransform(B);var H=v.apply3DTransform(B._fullLayout._invTransform)(re,j);re=H[0],j=H[1]}return this.style({top:j+"px",left:re+"px","z-index":1e3}),this}}K.convertEntities=A,K.sanitizeHTML=function(S){S=S.replace(c," ");for(var E=document.createElement("p"),D=E,z=[],N=S.split(l),V=0;V<N.length;V++){var X=N[V],J=X.match(p),G=J&&J[2].toLowerCase();if(G in d)if(J[1])z.length&&(D=z.pop());else{var Z=J[4],re=_(Z,u),j=re?{style:re}:{};if("a"===G){var B=_(Z,x);if(B){var H=O(B);if(H){j.href=H;var ee=_(Z,f);ee&&(j.target=ee)}}}var U=document.createElement(G);D.appendChild(U),m.select(U).attr(j),D=U,z.push(U)}else D.appendChild(document.createTextNode(A(X)))}return E.innerHTML},K.lineCount=function(S){return S.selectAll("tspan.line").size()||1},K.positionText=function(S,E,D){return S.each(function(){var z=m.select(this);function N(J,G){return void 0===G?null===(G=z.attr(J))&&(z.attr(J,0),G=0):z.attr(J,G),G}var V=N("x",E),X=N("y",D);"text"===this.nodeName&&z.selectAll("tspan.line").attr({x:V,y:X})})},K.makeTextShadow=function(S){var E="1px ",D="1px ",z="1px ";return E+D+z+S+", -"+E+"-"+D+z+S+", "+E+"-"+D+z+S+", -"+E+D+z+S},K.makeEditable=function(S,E){var D=E.gd,z=E.delegate,N=m.dispatch("edit","input","cancel"),V=z||S;if(S.style({"pointer-events":z?"none":"all"}),1!==S.size())throw new Error("boo");function X(){var re,j,B,H,ee;re=m.select(D).select(".svg-container"),j=re.append("div"),B=S.node().style,H=parseFloat(B.fontSize||12),void 0===(ee=E.text)&&(ee=S.attr("data-unformatted")),j.classed("plugin-editable editable",!0).style({position:"absolute","font-family":B.fontFamily||"Arial","font-size":H,color:E.fill||B.fill||"black",opacity:1,"background-color":E.background||"transparent",outline:"#ffffff33 1px solid",margin:[-H/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ee).call(P(S,re,E)).on("blur",function(){D._editing=!1,S.text(this.textContent).style({opacity:1});var U,$=m.select(this).attr("class");(U=$?"."+$.split(" ")[0]+"-math-group":"[class*=-math-group]")&&m.select(S.node().parentNode).select(U).style({opacity:0});var q=this.textContent;m.select(this).transition().duration(0).remove(),m.select(document).on("mouseup",null),N.edit.call(S,q)}).on("focus",function(){var U=this;D._editing=!0,m.select(document).on("mouseup",function(){if(m.event.target===U)return!1;document.activeElement===j.node()&&j.node().blur()})}).on("keyup",function(){27===m.event.which?(D._editing=!1,S.style({opacity:1}),m.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),N.cancel.call(S,this.textContent)):(N.input.call(S,this.textContent),m.select(this).call(P(S,re,E)))}).on("keydown",function(){13===m.event.which&&this.blur()}).call(J),S.style({opacity:0});var G,Z=V.attr("class");(G=Z?"."+Z.split(" ")[0]+"-math-group":"[class*=-math-group]")&&m.select(S.node().parentNode).select(G).style({opacity:0})}function J(G){var Z=G.node(),re=document.createRange();re.selectNodeContents(Z);var j=window.getSelection();j.removeAllRanges(),j.addRange(re),Z.focus()}return E.immediate?X():V.on("click",X),m.rebind(S,N,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(y,Q,K){"use strict";var m={};function v(b){b&&null!==b.timer&&(clearTimeout(b.timer),b.timer=null)}K.throttle=function(b,h,e){var n=m[b],r=Date.now();if(!n){for(var o in m)m[o].ts<r-6e4&&delete m[o];n=m[b]={ts:0,timer:null}}function t(){e(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}v(n),r>n.ts+h?t():n.timer=setTimeout(function(){t(),n.timer=null},h)},K.done=function(b){var h=m[b];return h&&h.timer?new Promise(function(e){var n=h.onDone;h.onDone=function(){n&&n(),e(),h.onDone=null}}):Promise.resolve()},K.clear=function(b){if(b)v(m[b]),delete m[b];else for(var h in m)K.clear(h)}},{}],543:[function(y,Q,K){"use strict";var m=y("fast-isnumeric");Q.exports=function(v,b){if(v>0)return Math.log(v)/Math.LN10;var h=Math.log(Math.min(b[0],b[1]))/Math.LN10;return m(h)||(h=Math.log(Math.max(b[0],b[1]))/Math.LN10-6),h}},{"fast-isnumeric":190}],544:[function(y,Q,K){"use strict";var m=Q.exports={},v=y("../plots/geo/constants").locationmodeToLayer,b=y("topojson-client").feature;m.getTopojsonName=function(h){return[h.scope.replace(/ /g,"-"),"_",h.resolution.toString(),"m"].join("")},m.getTopojsonPath=function(h,e){return h+e+".json"},m.getTopojsonFeatures=function(h,e){return b(e,e.objects[v[h.locationmode]]).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(y,Q,K){"use strict";Q.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(y,Q,K){"use strict";Q.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(y,Q,K){"use strict";var m=y("../registry");Q.exports=function(v){for(var b,h,e=m.layoutArrayContainers,n=m.layoutArrayRegexes,r=v.split("[")[0],o=0;o<n.length;o++)if((h=v.match(n[o]))&&0===h.index){b=h[0];break}if(b||(b=e[e.indexOf(r)]),!b)return!1;var t=v.substr(b.length);return t?!!(h=t.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:b,index:Number(h[1]),property:h[3]||""}:{array:b,index:"",property:""}}},{"../registry":647}],548:[function(y,Q,K){"use strict";var m=y("../lib"),v=m.extendFlat,b=m.isPlainObject,h={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},n=h.flags.slice().concat(["fullReplot"]),r=e.flags.slice().concat("layoutReplot");function o(a){for(var i={},s=0;s<a.length;s++)i[a[s]]=!1;return i}function t(a,i,s){var c=v({},a);for(var l in c){var p=c[l];b(p)&&(c[l]=d(p,i,0,l))}return"from-root"===s&&(c.editType=i),c}function d(a,i,s,c){if(a.valType){var l=v({},a);if(l.editType=i,Array.isArray(a.items)){l.items=new Array(a.items.length);for(var p=0;p<a.items.length;p++)l.items[p]=d(a.items[p],i)}return l}return t(a,i,"_"===c.charAt(0)?"nested":"from-root")}Q.exports={traces:h,layout:e,traceFlags:function(){return o(n)},layoutFlags:function(){return o(r)},update:function(a,i){var s=i.editType;if(s&&"none"!==s)for(var c=s.split("+"),l=0;l<c.length;l++)a[c[l]]=!0},overrideAll:t}},{"../lib":515}],549:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("gl-mat4/fromQuat"),b=y("../registry"),h=y("../lib"),e=y("../plots/plots"),n=y("../plots/cartesian/axis_ids"),r=y("../components/color"),o=n.cleanId,t=n.getFromTrace,d=b.traceIs;function a(f,T){var _=f[T],k=T.charAt(0);_&&"paper"!==_&&(f[T]=o(_,k,!0))}function i(f){function T(_,k){f[_]&&(!f.title||!f.title[k])&&(f.title||(f.title={}),f.title[k]=f[_],delete f[_])}f&&("string"!=typeof f.title&&"number"!=typeof f.title||(f.title={text:f.title}),T("titlefont","font"),T("titleposition","position"),T("titleside","side"),T("titleoffset","offset"))}function s(f){if(!h.isPlainObject(f))return!1;var T=f.name;return delete f.name,delete f.showlegend,("string"==typeof T||"number"==typeof T)&&String(T)}function c(f,T,_,k){if(_&&!k)return f;if(k&&!_||!f.trim())return T;if(!T.trim())return f;var w,C=Math.min(f.length,T.length);for(w=0;w<C&&f.charAt(w)===T.charAt(w);w++);return f.substr(0,w).trim()}function l(f){var T="middle",_="center";return"string"==typeof f&&(-1!==f.indexOf("top")?T="top":-1!==f.indexOf("bottom")&&(T="bottom"),-1!==f.indexOf("left")?_="left":-1!==f.indexOf("right")&&(_="right")),T+" "+_}function p(f,T){return T in f&&"object"==typeof f[T]&&0===Object.keys(f[T]).length}K.clearPromiseQueue=function(f){Array.isArray(f._promises)&&f._promises.length>0&&h.log("Clearing previous rejected promises from queue."),f._promises=[]},K.cleanLayout=function(f){var T,_;f||(f={}),f.xaxis1&&(f.xaxis||(f.xaxis=f.xaxis1),delete f.xaxis1),f.yaxis1&&(f.yaxis||(f.yaxis=f.yaxis1),delete f.yaxis1),f.scene1&&(f.scene||(f.scene=f.scene1),delete f.scene1);var k=(e.subplotsRegistry.cartesian||{}).attrRegex,w=(e.subplotsRegistry.polar||{}).attrRegex,C=(e.subplotsRegistry.ternary||{}).attrRegex,A=(e.subplotsRegistry.gl3d||{}).attrRegex,O=Object.keys(f);for(T=0;T<O.length;T++){var P=O[T];if(k&&k.test(P)){var S=f[P];S.anchor&&"free"!==S.anchor&&(S.anchor=o(S.anchor)),S.overlaying&&(S.overlaying=o(S.overlaying)),S.type||(S.isdate?S.type="date":S.islog?S.type="log":!1===S.isdate&&!1===S.islog&&(S.type="linear")),"withzero"!==S.autorange&&"tozero"!==S.autorange||(S.autorange=!0,S.rangemode="tozero"),delete S.islog,delete S.isdate,delete S.categories,p(S,"domain")&&delete S.domain,void 0!==S.autotick&&(void 0===S.tickmode&&(S.tickmode=S.autotick?"auto":"linear"),delete S.autotick),i(S)}else if(w&&w.test(P))i(f[P].radialaxis);else if(C&&C.test(P)){var E=f[P];i(E.aaxis),i(E.baxis),i(E.caxis)}else if(A&&A.test(P)){var D=f[P],z=D.cameraposition;if(Array.isArray(z)&&4===z[0].length){var V=z[1],X=z[2],J=v([],z[0]),G=[];for(_=0;_<3;++_)G[_]=V[_]+X*J[2+4*_];D.camera={eye:{x:G[0],y:G[1],z:G[2]},center:{x:V[0],y:V[1],z:V[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}i(D.xaxis),i(D.yaxis),i(D.zaxis)}}var Z=Array.isArray(f.annotations)?f.annotations.length:0;for(T=0;T<Z;T++){var re=f.annotations[T];h.isPlainObject(re)&&(re.ref&&("paper"===re.ref?(re.xref="paper",re.yref="paper"):"data"===re.ref&&(re.xref="x",re.yref="y"),delete re.ref),a(re,"xref"),a(re,"yref"))}var j=Array.isArray(f.shapes)?f.shapes.length:0;for(T=0;T<j;T++){var B=f.shapes[T];h.isPlainObject(B)&&(a(B,"xref"),a(B,"yref"))}var H=Array.isArray(f.images)?f.images.length:0;for(T=0;T<H;T++){var ee=f.images[T];h.isPlainObject(ee)&&(a(ee,"xref"),a(ee,"yref"))}var U=f.legend;return U&&(U.x>3?(U.x=1.02,U.xanchor="left"):U.x<-2&&(U.x=-.02,U.xanchor="right"),U.y>3?(U.y=1.02,U.yanchor="bottom"):U.y<-2&&(U.y=-.02,U.yanchor="top")),i(f),"rotate"===f.dragmode&&(f.dragmode="orbit"),r.clean(f),f.template&&f.template.layout&&K.cleanLayout(f.template.layout),f},K.cleanData=function(f){for(var T=0;T<f.length;T++){var _,k=f[T];if("histogramy"===k.type&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var w=r.defaults,C=k.error_y.color||(d(k,"bar")?r.defaultLine:w[T%w.length]);k.error_y.color=r.addOpacity(r.rgb(C),r.opacity(C)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&("h"!==k.bardir||!d(k,"bar")&&"histogram"!==k.type.substr(0,9)||(k.orientation="h",K.swapXYData(k)),delete k.bardir),"histogramy"===k.type&&K.swapXYData(k),"histogramx"!==k.type&&"histogramy"!==k.type||(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=o(k.xaxis,"x")),k.yaxis&&(k.yaxis=o(k.yaxis,"y")),d(k,"gl3d")&&k.scene&&(k.scene=e.subplotsRegistry.gl3d.cleanId(k.scene)),!d(k,"pie-like")&&!d(k,"bar-like"))if(Array.isArray(k.textposition))for(_=0;_<k.textposition.length;_++)k.textposition[_]=l(k.textposition[_]);else k.textposition&&(k.textposition=l(k.textposition));var A=b.getModule(k);if(A&&A.colorbar){var O=A.colorbar.container,P=O?k[O]:k;P&&P.colorscale&&("YIGnBu"===P.colorscale&&(P.colorscale="YlGnBu"),"YIOrRd"===P.colorscale&&(P.colorscale="YlOrRd"))}if("surface"===k.type&&h.isPlainObject(k.contours)){var S=["x","y","z"];for(_=0;_<S.length;_++){var E=k.contours[S[_]];h.isPlainObject(E)&&(E.highlightColor&&(E.highlightcolor=E.highlightColor,delete E.highlightColor),E.highlightWidth&&(E.highlightwidth=E.highlightWidth,delete E.highlightWidth))}}if("candlestick"===k.type||"ohlc"===k.type){var D=!1!==(k.increasing||{}).showlegend,z=!1!==(k.decreasing||{}).showlegend,N=s(k.increasing),V=s(k.decreasing);if(!1!==N&&!1!==V){var X=c(N,V,D,z);X&&(k.name=X)}else!N&&!V||k.name||(k.name=N||V)}if(Array.isArray(k.transforms)){var J=k.transforms;for(_=0;_<J.length;_++){var G=J[_];if(h.isPlainObject(G))switch(G.type){case"filter":G.filtersrc&&(G.target=G.filtersrc,delete G.filtersrc),G.calendar&&(G.valuecalendar||(G.valuecalendar=G.calendar),delete G.calendar);break;case"groupby":if(G.styles=G.styles||G.style,G.styles&&!Array.isArray(G.styles)){var Z=G.styles,re=Object.keys(Z);G.styles=[];for(var j=0;j<re.length;j++)G.styles.push({target:re[j],value:Z[re[j]]})}}}}p(k,"line")&&delete k.line,"marker"in k&&(p(k.marker,"line")&&delete k.marker.line,p(k,"marker")&&delete k.marker),r.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),i(k),k.colorbar&&i(k.colorbar),k.marker&&k.marker.colorbar&&i(k.marker.colorbar),k.line&&k.line.colorbar&&i(k.line.colorbar),k.aaxis&&i(k.aaxis),k.baxis&&i(k.baxis)}},K.swapXYData=function(f){var T;if(h.swapAttrs(f,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(f.z)&&Array.isArray(f.z[0])&&(f.transpose?delete f.transpose:f.transpose=!0),f.error_x&&f.error_y){var _=f.error_y,k="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);h.swapAttrs(f,["error_?.copy_ystyle"]),k&&h.swapAttrs(f,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof f.hoverinfo){var w=f.hoverinfo.split("+");for(T=0;T<w.length;T++)"x"===w[T]?w[T]="y":"y"===w[T]&&(w[T]="x");f.hoverinfo=w.join("+")}},K.coerceTraceIndices=function(f,T){if(m(T))return[T];if(!Array.isArray(T)||!T.length)return f.data.map(function(w,C){return C});if(Array.isArray(T)){for(var _=[],k=0;k<T.length;k++)h.isIndex(T[k],f.data.length)?_.push(T[k]):h.warn("trace index (",T[k],") is not a number or is out of bounds");return _}return T},K.manageArrayContainers=function(f,T,_){var k=f.obj,w=f.parts,C=w.length,A=w[C-1],O=m(A);if(O&&null===T){var P=w.slice(0,C-1).join(".");h.nestedProperty(k,P).get().splice(A,1)}else O&&void 0===f.get()&&void 0===f.get()&&(_[f.astr]=null),f.set(T)};var g=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function u(f){var T=f.search(g);if(T>0)return f.substr(0,T)}K.hasParent=function(f,T){for(var _=u(T);_;){if(_ in f)return!0;_=u(_)}return!1};var x=["x","y","z"];K.clearAxisTypes=function(f,T,_){for(var k=0;k<T.length;k++)for(var w=f._fullData[k],C=0;C<3;C++){var A=t(f,w,x[C]);if(A&&"log"!==A.type){var O=A._name,P=A._id.substr(1);if("scene"===P.substr(0,5)){if(void 0!==_[P])continue;O=P+"."+O}var S=O+".type";void 0===_[O]&&void 0===_[S]&&h.nestedProperty(f.layout,S).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(y,Q,K){"use strict";var m=y("./plot_api");K._doPlot=m._doPlot,K.newPlot=m.newPlot,K.restyle=m.restyle,K.relayout=m.relayout,K.redraw=m.redraw,K.update=m.update,K._guiRestyle=m._guiRestyle,K._guiRelayout=m._guiRelayout,K._guiUpdate=m._guiUpdate,K._storeDirectGUIEdit=m._storeDirectGUIEdit,K.react=m.react,K.extendTraces=m.extendTraces,K.prependTraces=m.prependTraces,K.addTraces=m.addTraces,K.deleteTraces=m.deleteTraces,K.moveTraces=m.moveTraces,K.purge=m.purge,K.addFrames=m.addFrames,K.deleteFrames=m.deleteFrames,K.animate=m.animate,K.setPlotConfig=m.setPlotConfig,K.toImage=y("./to_image"),K.validate=y("./validate"),K.downloadImage=y("../snapshot/download");var v=y("./template_api");K.makeTemplate=v.makeTemplate,K.validateTemplate=v.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(y,Q,K){"use strict";var m=y("../lib/is_plain_object"),v=y("../lib/noop"),b=y("../lib/loggers"),h=y("../lib/search").sorterAsc,e=y("../registry");K.containerArrayMatch=y("./container_array_match");var n=K.isAddVal=function(o){return"add"===o||m(o)},r=K.isRemoveVal=function(o){return null===o||"remove"===o};K.applyContainerArrayChanges=function(o,t,d,a,i){var s=t.astr,c=e.getComponentMethod(s,"supplyLayoutDefaults"),l=e.getComponentMethod(s,"draw"),p=e.getComponentMethod(s,"drawOne"),g=a.replot||a.recalc||c===v||l===v,u=o.layout,x=o._fullLayout;if(d[""]){Object.keys(d).length>1&&b.warn("Full array edits are incompatible with other edits",s);var f=d[""][""];if(r(f))t.set(null);else{if(!Array.isArray(f))return b.warn("Unrecognized full array edit value",s,f),!0;t.set(f)}return!g&&(c(u,x),l(o),!0)}var T,_,k,w,C,A,O,S=Object.keys(d).map(Number).sort(h),E=t.get(),D=E||[],z=i(x,s).get(),N=[],V=-1,X=D.length;for(T=0;T<S.length;T++)if(w=d[k=S[T]],C=Object.keys(w),O=n(A=w[""]),k<0||k>D.length-(O?0:1))b.warn("index out of range",s,k);else if(void 0!==A)C.length>1&&b.warn("Insertion & removal are incompatible with edits to the same index.",s,k),r(A)?N.push(k):O?("add"===A&&(A={}),D.splice(k,0,A),z&&z.splice(k,0,{})):b.warn("Unrecognized full object edit value",s,k,A),-1===V&&(V=k);else for(_=0;_<C.length;_++)i(D[k],C[_],s+"["+k+"].").set(w[C[_]]);for(T=N.length-1;T>=0;T--)D.splice(N[T],1),z&&z.splice(N[T],1);if(D.length?E||t.set(D):t.set(null),g)return!1;if(c(u,x),p!==v){var J;if(-1===V)J=S;else{for(X=Math.max(D.length,X),J=[],T=0;T<S.length&&!((k=S[T])>=V);T++)J.push(k);for(T=V;T<X;T++)J.push(T)}for(T=0;T<J.length;T++)p(o,J[T])}else l(o);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=y("has-hover"),h=y("../lib"),e=h.nestedProperty,n=y("../lib/events"),r=y("../lib/queue"),o=y("../registry"),t=y("./plot_schema"),d=y("../plots/plots"),a=y("../plots/cartesian/axes"),i=y("../components/drawing"),s=y("../components/color"),c=y("../plots/cartesian/graph_interact").initInteractions,l=y("../constants/xmlns_namespaces"),p=y("../components/selections").clearOutline,g=y("./plot_config").dfltConfig,u=y("./manage_arrays"),x=y("./helpers"),f=y("./subroutines"),T=y("./edit_types"),_=y("../plots/cartesian/constants").AX_NAME_PATTERN,k=0;function w(he){var me=he._fullLayout;me._redrawFromAutoMarginCount?me._redrawFromAutoMarginCount--:he.emit("plotly_afterplot")}function C(he,me){try{he._fullLayout._paper.style("background",me)}catch(Se){h.error(Se)}}function A(he,me){C(he,s.combine(me,"white"))}function O(he,me){if(!he._context){he._context=h.extendDeep({},g);var Se=m.select("base");he._context._baseUrl=Se.size()&&Se.attr("href")?window.location.href.split("#")[0]:""}var Me,Ie,Fe,Ne=he._context;if(me){for(Ie=Object.keys(me),Me=0;Me<Ie.length;Me++)"editable"!==(Fe=Ie[Me])&&"edits"!==Fe&&Fe in Ne&&(Ne[Fe]="setBackground"===Fe&&"opaque"===me[Fe]?A:me[Fe]);me.plot3dPixelRatio&&!Ne.plotGlPixelRatio&&(Ne.plotGlPixelRatio=Ne.plot3dPixelRatio);var De=me.editable;if(void 0!==De)for(Ne.editable=De,Ie=Object.keys(Ne.edits),Me=0;Me<Ie.length;Me++)Ne.edits[Ie[Me]]=De;if(me.edits)for(Ie=Object.keys(me.edits),Me=0;Me<Ie.length;Me++)(Fe=Ie[Me])in Ne.edits&&(Ne.edits[Fe]=me.edits[Fe]);Ne._exportedPlot=me._exportedPlot}Ne.staticPlot&&(Ne.editable=!1,Ne.edits={},Ne.autosizable=!1,Ne.scrollZoom=!1,Ne.doubleClick=!1,Ne.showTips=!1,Ne.showLink=!1,Ne.displayModeBar=!1),"hover"!==Ne.displayModeBar||b||(Ne.displayModeBar=!0),"transparent"!==Ne.setBackground&&"function"==typeof Ne.setBackground||(Ne.setBackground=C),Ne._hasZeroHeight=Ne._hasZeroHeight||0===he.clientHeight,Ne._hasZeroWidth=Ne._hasZeroWidth||0===he.clientWidth;var $e=Ne.scrollZoom,Re=Ne._scrollZoom={};if(!0===$e)Re.cartesian=1,Re.gl3d=1,Re.geo=1,Re.mapbox=1;else if("string"==typeof $e){var ze=$e.split("+");for(Me=0;Me<ze.length;Me++)Re[ze[Me]]=1}else!1!==$e&&(Re.gl3d=1,Re.geo=1,Re.mapbox=1)}function P(he,me){var Se,Me,Ie=me+1,Fe=[];for(Se=0;Se<he.length;Se++)(Me=he[Se])<0?Fe.push(Ie+Me):Fe.push(Me);return Fe}function S(he,me,Se){var Me,Ie;for(Me=0;Me<me.length;Me++){if((Ie=me[Me])!==parseInt(Ie,10))throw new Error("all values in "+Se+" must be integers");if(Ie>=he.data.length||Ie<-he.data.length)throw new Error(Se+" must be valid indices for gd.data.");if(me.indexOf(Ie,Me+1)>-1||Ie>=0&&me.indexOf(-he.data.length+Ie)>-1||Ie<0&&me.indexOf(he.data.length+Ie)>-1)throw new Error("each index in "+Se+" must be unique.")}}function E(he,me,Se){if(!Array.isArray(he.data))throw new Error("gd.data must be an array.");if(void 0===me)throw new Error("currentIndices is a required argument.");if(Array.isArray(me)||(me=[me]),S(he,me,"currentIndices"),void 0===Se||Array.isArray(Se)||(Se=[Se]),void 0!==Se&&S(he,Se,"newIndices"),void 0!==Se&&me.length!==Se.length)throw new Error("current and new indices must be of equal length.")}function D(he,me,Se,Me,Ie){!function(je,rt,ut,gt){var At=h.isPlainObject(gt);if(!Array.isArray(je.data))throw new Error("gd.data must be an array");if(!h.isPlainObject(rt))throw new Error("update must be a key:value object");if(void 0===ut)throw new Error("indices must be an integer or array of integers");for(var _t in S(je,ut,"indices"),rt){if(!Array.isArray(rt[_t])||rt[_t].length!==ut.length)throw new Error("attribute "+_t+" must be an array of length equal to indices array length");if(At&&(!(_t in gt)||!Array.isArray(gt[_t])||gt[_t].length!==rt[_t].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(he,me,Se,Me);for(var Fe=function(je,rt,ut,gt){var _t,it,et,wt,Gt=h.isPlainObject(gt),Kt=[];for(var cr in Array.isArray(ut)||(ut=[ut]),ut=P(ut,je.data.length-1),rt)for(var ar=0;ar<ut.length;ar++){if(_t=(it=e(je.data[ut[ar]],cr)).get(),!h.isArrayOrTypedArray(et=rt[cr][ar]))throw new Error("attribute: "+cr+" index: "+ar+" must be an array");if(!h.isArrayOrTypedArray(_t))throw new Error("cannot extend missing or non-array attribute: "+cr);if(_t.constructor!==et.constructor)throw new Error("cannot extend array with an array of a different type: "+cr);v(wt=Gt?gt[cr][ar]:gt)||(wt=-1),Kt.push({prop:it,target:_t,insert:et,maxp:Math.floor(wt)})}return Kt}(he,me,Se,Me),Ne={},De={},$e=0;$e<Fe.length;$e++){var Re=Fe[$e].prop,Ue=Ie(Fe[$e].target,Fe[$e].insert,Fe[$e].maxp);Re.set(Ue[0]),Array.isArray(Ne[Re.astr])||(Ne[Re.astr]=[]),Ne[Re.astr].push(Ue[1]),Array.isArray(De[Re.astr])||(De[Re.astr]=[]),De[Re.astr].push(Fe[$e].target.length)}return{update:Ne,maxPoints:De}}function z(he,me){var Se=new he.constructor(he.length+me.length);return Se.set(he),Se.set(me,he.length),Se}function N(he,me,Se,Me){he=h.getGraphDiv(he),x.clearPromiseQueue(he);var Ie={};if("string"==typeof me)Ie[me]=Se;else{if(!h.isPlainObject(me))return h.warn("Restyle fail.",me,Se,Me),Promise.reject();Ie=h.extendFlat({},me),void 0===Me&&(Me=Se)}Object.keys(Ie).length&&(he.changed=!0);var Fe=x.coerceTraceIndices(he,Me),Ne=G(he,Ie,Fe),De=Ne.flags;De.calc&&(he.calcdata=void 0),De.clearAxisTypes&&x.clearAxisTypes(he,Fe,{});var $e=[];De.fullReplot?$e.push(K._doPlot):($e.push(d.previousPromises),d.supplyDefaults(he),De.markerSize&&(d.doCalcdata(he),B($e)),De.style&&$e.push(f.doTraceStyle),De.colorbars&&$e.push(f.doColorBars),$e.push(w)),$e.push(d.rehover,d.redrag,d.reselect),r.add(he,N,[he,Ne.undoit,Ne.traces],N,[he,Ne.redoit,Ne.traces]);var Re=h.syncOrAsync($e,he);return Re&&Re.then||(Re=Promise.resolve()),Re.then(function(){return he.emit("plotly_restyle",Ne.eventData),he})}function V(he){return void 0===he?null:he}function X(he,me){return me?function(Se,Me,Ie){var Fe=e(Se,Me),Ne=Fe.set;return Fe.set=function(De){J((Ie||"")+Me,Fe.get(),De,he),Ne(De)},Fe}:e}function J(he,me,Se,Me){if(Array.isArray(me)||Array.isArray(Se))for(var Ie=Array.isArray(me)?me:[],Fe=Array.isArray(Se)?Se:[],Ne=Math.max(Ie.length,Fe.length),De=0;De<Ne;De++)J(he+"["+De+"]",Ie[De],Fe[De],Me);else if(h.isPlainObject(me)||h.isPlainObject(Se)){var $e=h.isPlainObject(me)?me:{},Re=h.isPlainObject(Se)?Se:{},ze=h.extendFlat({},$e,Re);for(var Ue in ze)J(he+"."+Ue,$e[Ue],Re[Ue],Me)}else void 0===Me[he]&&(Me[he]=V(me))}function G(he,me,Se){var Me,Ie=he._fullLayout,Fe=he._fullData,Ne=he.data,De=Ie._guiEditing,$e=X(Ie._preGUI,De),Re=h.extendDeepAll({},me);Z(me);var ze,Ue=T.traceFlags(),je={},rt={};function ut(){return Se.map(function(){})}function gt(ot){var dt=a.id2name(ot);-1===ze.indexOf(dt)&&ze.push(dt)}function At(ot){return"LAYOUT"+ot+".autorange"}function _t(ot){return"LAYOUT"+ot+".range"}function it(ot){for(var dt=ot;dt<Fe.length;dt++)if(Fe[dt]._input===Ne[ot])return Fe[dt]}function et(ot,dt,Lt){if(Array.isArray(ot))ot.forEach(function(Wt){et(Wt,dt,Lt)});else if(!(ot in me)&&!x.hasParent(me,ot)){var Ut;if("LAYOUT"===ot.substr(0,6))Ut=$e(he.layout,ot.replace("LAYOUT",""));else{var $t=Se[Lt];Ut=X(Ie._tracePreGUI[it($t)._fullInput.uid],De)(Ne[$t],ot)}ot in rt||(rt[ot]=ut()),void 0===rt[ot][Lt]&&(rt[ot][Lt]=V(Ut.get())),void 0!==dt&&Ut.set(dt)}}function wt(ot){return function(dt){return Fe[dt][ot]}}function Gt(ot){return function(dt,Lt){return!1===dt?Fe[Se[Lt]][ot]:null}}for(var Kt in me){if(x.hasParent(me,Kt))throw new Error("cannot set "+Kt+" and a parent attribute simultaneously");var cr,ar,hr,Xt,He,Je,pe=me[Kt];if("autobinx"!==Kt&&"autobiny"!==Kt||(Kt=Kt.charAt(Kt.length-1)+"bins",pe=Array.isArray(pe)?pe.map(Gt(Kt)):!1===pe?Se.map(wt(Kt)):null),je[Kt]=pe,"LAYOUT"!==Kt.substr(0,6)){for(rt[Kt]=ut(),Me=0;Me<Se.length;Me++)if(cr=Ne[Se[Me]],ar=it(Se[Me]),Xt=(hr=X(Ie._tracePreGUI[ar._fullInput.uid],De)(cr,Kt)).get(),void 0!==(He=Array.isArray(pe)?pe[Me%pe.length]:pe)){var we=hr.parts[hr.parts.length-1],Be=Kt.substr(0,Kt.length-we.length-1),We=Be?Be+".":"",Ke=Be?e(ar,Be).get():ar;if((Je=t.getTraceValObject(ar,hr.parts))&&Je.impliedEdits&&null!==He)for(var Ye in Je.impliedEdits)et(h.relativeAttr(Kt,Ye),Je.impliedEdits[Ye],Me);else if("thicknessmode"!==we&&"lenmode"!==we||Xt===He||"fraction"!==He&&"pixels"!==He||!Ke){if("type"===Kt&&("pie"===He!=("pie"===Xt)||"funnelarea"===He!=("funnelarea"===Xt))){var ft="x",ct="y";"bar"!==He&&"bar"!==Xt||"h"!==cr.orientation||(ft="y",ct="x"),h.swapAttrs(cr,["?","?src"],"labels",ft),h.swapAttrs(cr,["d?","?0"],"label",ft),h.swapAttrs(cr,["?","?src"],"values",ct),"pie"===Xt||"funnelarea"===Xt?(e(cr,"marker.color").set(e(cr,"marker.colors").get()),Ie._pielayer.selectAll("g.trace").remove()):o.traceIs(cr,"cartesian")&&e(cr,"marker.colors").set(e(cr,"marker.color").get())}}else{var St=Ie._size,Ft=Ke.orient,at="top"===Ft||"bottom"===Ft;if("thicknessmode"===we){var mt=at?St.h:St.w;et(We+"thickness",Ke.thickness*("fraction"===He?1/mt:mt),Me)}else{var qt=at?St.w:St.h;et(We+"len",Ke.len*("fraction"===He?1/qt:qt),Me)}}if(rt[Kt][Me]=V(Xt),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Kt)){if("orientation"===Kt){hr.set(He);var Et=cr.x&&!cr.y?"h":"v";if((hr.get()||Et)===ar.orientation)continue}else"orientationaxes"===Kt&&(cr.orientation={v:"h",h:"v"}[ar.orientation]);x.swapXYData(cr),Ue.calc=Ue.clearAxisTypes=!0}else-1!==d.dataArrayContainers.indexOf(hr.parts[0])?(x.manageArrayContainers(hr,He,rt),Ue.calc=!0):(Je?Je.arrayOk&&!o.traceIs(ar,"regl")&&(h.isArrayOrTypedArray(He)||h.isArrayOrTypedArray(Xt))?Ue.calc=!0:T.update(Ue,Je):Ue.calc=!0,hr.set(He))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Kt)&&a.swap(he,Se),"orientationaxes"===Kt){var Dt=e(he.layout,"hovermode"),Le=Dt.get();"x"===Le?Dt.set("y"):"y"===Le?Dt.set("x"):"x unified"===Le?Dt.set("y unified"):"y unified"===Le&&Dt.set("x unified")}if(-1!==["orientation","type"].indexOf(Kt)){for(ze=[],Me=0;Me<Se.length;Me++){var Xe=Ne[Se[Me]];o.traceIs(Xe,"cartesian")&&(gt(Xe.xaxis||"x"),gt(Xe.yaxis||"y"))}et(ze.map(At),!0,0),et(ze.map(_t),[0,1],0)}}else hr=$e(he.layout,Kt.replace("LAYOUT","")),rt[Kt]=[V(hr.get())],hr.set(Array.isArray(pe)?pe[0]:pe),Ue.calc=!0}return(Ue.calc||Ue.plot)&&(Ue.fullReplot=!0),{flags:Ue,undoit:rt,redoit:je,traces:Se,eventData:h.extendDeepNoArrays([],[Re,Se])}}function Z(he){var me,Se,Me,Ie=h.counterRegex("axis",".title",!1,!1),Fe=/colorbar\.title$/,Ne=Object.keys(he);for(me=0;me<Ne.length;me++)Me=he[Se=Ne[me]],"title"!==Se&&!Ie.test(Se)&&!Fe.test(Se)||"string"!=typeof Me&&"number"!=typeof Me?Se.indexOf("titlefont")>-1&&-1===Se.indexOf("grouptitlefont")?De(Se,Se.replace("titlefont","title.font")):Se.indexOf("titleposition")>-1?De(Se,Se.replace("titleposition","title.position")):Se.indexOf("titleside")>-1?De(Se,Se.replace("titleside","title.side")):Se.indexOf("titleoffset")>-1&&De(Se,Se.replace("titleoffset","title.offset")):De(Se,Se.replace("title","title.text"));function De($e,Re){he[Re]=he[$e],delete he[$e]}}function re(he,me,Se){he=h.getGraphDiv(he),x.clearPromiseQueue(he);var Me={};if("string"==typeof me)Me[me]=Se;else{if(!h.isPlainObject(me))return h.warn("Relayout fail.",me,Se),Promise.reject();Me=h.extendFlat({},me)}Object.keys(Me).length&&(he.changed=!0);var Ie=$(he,Me),Fe=Ie.flags;Fe.calc&&(he.calcdata=void 0);var Ne=[d.previousPromises];Fe.layoutReplot?Ne.push(f.layoutReplot):Object.keys(Me).length&&(j(he,Fe,Ie)||d.supplyDefaults(he),Fe.legend&&Ne.push(f.doLegend),Fe.layoutstyle&&Ne.push(f.layoutStyles),Fe.axrange&&B(Ne,Ie.rangesAltered),Fe.ticks&&Ne.push(f.doTicksRelayout),Fe.modebar&&Ne.push(f.doModeBar),Fe.camera&&Ne.push(f.doCamera),Fe.colorbars&&Ne.push(f.doColorBars),Ne.push(w)),Ne.push(d.rehover,d.redrag,d.reselect),r.add(he,re,[he,Ie.undoit],re,[he,Ie.redoit]);var De=h.syncOrAsync(Ne,he);return De&&De.then||(De=Promise.resolve(he)),De.then(function(){return he.emit("plotly_relayout",Ie.eventData),he})}function j(he,me,Se){var Me=he._fullLayout;if(!me.axrange)return!1;for(var Ie in me)if("axrange"!==Ie&&me[Ie])return!1;for(var Fe in Se.rangesAltered){var Ne=a.id2name(Fe),De=he.layout[Ne],$e=Me[Ne];if($e.autorange=De.autorange,De.range&&($e.range=De.range.slice()),$e.cleanRange(),$e._matchGroup)for(var Re in $e._matchGroup)if(Re!==Fe){var ze=Me[a.id2name(Re)];ze.autorange=$e.autorange,ze.range=$e.range.slice(),ze._input.range=$e.range.slice()}}return!0}function B(he,me){he.push(p,f.doAutoRangeAndConstraints,me?function(Me){var Ie=[],Fe=!0;for(var Ne in me){var De=a.getFromId(Me,Ne);if(Ie.push(Ne),-1!==(De.ticklabelposition||"").indexOf("inside")&&De._anchorAxis&&Ie.push(De._anchorAxis._id),De._matchGroup)for(var $e in De._matchGroup)me[$e]||Ie.push($e);De.automargin&&(Fe=!1)}return a.draw(Me,Ie,{skipTitle:Fe})}:function(Me){return a.draw(Me,"redraw")},f.drawData,f.finalDraw)}var H=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ee=/^[xyz]axis[0-9]*\.autorange$/,U=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function $(he,me){var Se,Me,Ie,Fe=he.layout,Ne=he._fullLayout,$e=X(Ne._preGUI,Ne._guiEditing),Re=Object.keys(me),ze=a.list(he),Ue=h.extendDeepAll({},me),je={};for(Z(me),Re=Object.keys(me),Me=0;Me<Re.length;Me++)if(0===Re[Me].indexOf("allaxes")){for(Ie=0;Ie<ze.length;Ie++){var rt=ze[Ie]._id.substr(1),ut=-1!==rt.indexOf("scene")?rt+".":"",gt=Re[Me].replace("allaxes",ut+ze[Ie]._name);me[gt]||(me[gt]=me[Re[Me]])}delete me[Re[Me]]}var At=T.layoutFlags(),_t={},it={};function et($t,Wt){if(Array.isArray($t))$t.forEach(function(Rr){et(Rr,Wt)});else if(!($t in me)&&!x.hasParent(me,$t)){var wr=$e(Fe,$t);$t in it||(it[$t]=V(wr.get())),void 0!==Wt&&wr.set(Wt)}}var wt,Gt={};function Kt($t){var Wt=a.name2id($t.split(".")[0]);return Gt[Wt]=1,Wt}for(var cr in me){if(x.hasParent(me,cr))throw new Error("cannot set "+cr+" and a parent attribute simultaneously");for(var ar=$e(Fe,cr),hr=me[cr],Xt=ar.parts.length-1;Xt>0&&"string"!=typeof ar.parts[Xt];)Xt--;var He=ar.parts[Xt],Je=ar.parts[Xt-1]+"."+He,pe=ar.parts.slice(0,Xt).join("."),we=e(he.layout,pe).get(),Be=e(Ne,pe).get(),We=ar.get();if(void 0!==hr){_t[cr]=hr,it[cr]="reverse"===He?hr:V(We);var Ke=t.getLayoutValObject(Ne,ar.parts);if(Ke&&Ke.impliedEdits&&null!==hr)for(var Ye in Ke.impliedEdits)et(h.relativeAttr(cr,Ye),Ke.impliedEdits[Ye]);if(-1!==["width","height"].indexOf(cr))if(hr){et("autosize",null);var ft="height"===cr?"width":"height";et(ft,Ne[ft])}else Ne[cr]=he._initialAutoSize[cr];else if("autosize"===cr)et("width",hr?null:Ne.width),et("height",hr?null:Ne.height);else if(Je.match(H))Kt(Je),e(Ne,pe+"._inputRange").set(null);else if(Je.match(ee)){Kt(Je),e(Ne,pe+"._inputRange").set(null);var ct=e(Ne,pe).get();ct._inputDomain&&(ct._input.domain=ct._inputDomain.slice())}else Je.match(U)&&e(Ne,pe+"._inputDomain").set(null);if("type"===He){wt=we;var St="linear"===Be.type&&"log"===hr;if(St||"log"===Be.type&&"linear"===hr){if(wt&&wt.range)if(Be.autorange)St&&(wt.range=wt.range[1]>wt.range[0]?[1,2]:[2,1]);else{var at=wt.range[0],mt=wt.range[1];St?(at<=0&&mt<=0&&et(pe+".autorange",!0),at<=0?at=mt/1e6:mt<=0&&(mt=at/1e6),et(pe+".range[0]",Math.log(at)/Math.LN10),et(pe+".range[1]",Math.log(mt)/Math.LN10)):(et(pe+".range[0]",Math.pow(10,at)),et(pe+".range[1]",Math.pow(10,mt)))}else et(pe+".autorange",!0);Array.isArray(Ne._subplots.polar)&&Ne._subplots.polar.length&&Ne[ar.parts[0]]&&"radialaxis"===ar.parts[1]&&delete Ne[ar.parts[0]]._subplot.viewInitial["radialaxis.range"],o.getComponentMethod("annotations","convertCoords")(he,Be,hr,et),o.getComponentMethod("images","convertCoords")(he,Be,hr,et)}else et(pe+".autorange",!0),et(pe+".range",null);e(Ne,pe+"._inputRange").set(null)}else if(He.match(_)){var qt=e(Ne,cr).get(),Et=(hr||{}).type;Et&&"-"!==Et||(Et="linear"),o.getComponentMethod("annotations","convertCoords")(he,qt,Et,et),o.getComponentMethod("images","convertCoords")(he,qt,Et,et)}var Dt=u.containerArrayMatch(cr);if(Dt){Se=Dt.array;var Le=Dt.property,Xe=Ke||{editType:"calc"};""!==(Me=Dt.index)&&""===Le&&(u.isAddVal(hr)?it[cr]=null:u.isRemoveVal(hr)?it[cr]=(e(Fe,Se).get()||[])[Me]:h.warn("unrecognized full object value",me)),T.update(At,Xe),je[Se]||(je[Se]={});var ot=je[Se][Me];ot||(ot=je[Se][Me]={}),ot[Le]=hr,delete me[cr]}else"reverse"===He?(we.range?we.range.reverse():(et(pe+".autorange",!0),we.range=[1,0]),Be.autorange?At.calc=!0:At.plot=!0):("dragmode"===cr&&(!1===hr&&!1!==We||!1!==hr&&!1===We)||Ne._has("scatter-like")&&Ne._has("regl")&&"dragmode"===cr&&("lasso"===hr||"select"===hr)&&"lasso"!==We&&"select"!==We||Ne._has("gl2d")?At.plot=!0:Ke?T.update(At,Ke):At.calc=!0,ar.set(hr))}}for(Se in je)u.applyContainerArrayChanges(he,$e(Fe,Se),je[Se],At,$e)||(At.plot=!0);for(var dt in Gt){var Lt=(wt=a.getFromId(he,dt))&&wt._constraintGroup;if(Lt)for(var Ut in At.calc=!0,Lt)Gt[Ut]||(a.getFromId(he,Ut)._constraintShrinkable=!0)}return(q(he)||me.height||me.width)&&(At.plot=!0),(At.plot||At.calc)&&(At.layoutReplot=!0),{flags:At,rangesAltered:Gt,undoit:it,redoit:_t,eventData:Ue}}function q(he){var me=he._fullLayout,Se=me.width,Me=me.height;return he.layout.autosize&&d.plotAutoSize(he,he.layout,me),me.width!==Se||me.height!==Me}function te(he,me,Se,Me){he=h.getGraphDiv(he),x.clearPromiseQueue(he),h.isPlainObject(me)||(me={}),h.isPlainObject(Se)||(Se={}),Object.keys(me).length&&(he.changed=!0),Object.keys(Se).length&&(he.changed=!0);var Ie=x.coerceTraceIndices(he,Me),Fe=G(he,h.extendFlat({},me),Ie),Ne=Fe.flags,De=$(he,h.extendFlat({},Se)),$e=De.flags;(Ne.calc||$e.calc)&&(he.calcdata=void 0),Ne.clearAxisTypes&&x.clearAxisTypes(he,Ie,Se);var Re=[];$e.layoutReplot?Re.push(f.layoutReplot):Ne.fullReplot?Re.push(K._doPlot):(Re.push(d.previousPromises),j(he,$e,De)||d.supplyDefaults(he),Ne.style&&Re.push(f.doTraceStyle),(Ne.colorbars||$e.colorbars)&&Re.push(f.doColorBars),$e.legend&&Re.push(f.doLegend),$e.layoutstyle&&Re.push(f.layoutStyles),$e.axrange&&B(Re,De.rangesAltered),$e.ticks&&Re.push(f.doTicksRelayout),$e.modebar&&Re.push(f.doModeBar),$e.camera&&Re.push(f.doCamera),Re.push(w)),Re.push(d.rehover,d.redrag,d.reselect),r.add(he,te,[he,Fe.undoit,De.undoit,Fe.traces],te,[he,Fe.redoit,De.redoit,Fe.traces]);var ze=h.syncOrAsync(Re,he);return ze&&ze.then||(ze=Promise.resolve(he)),ze.then(function(){return he.emit("plotly_update",{data:Fe.eventData,layout:De.eventData}),he})}function ne(he){return function(me){me._fullLayout._guiEditing=!0;var Se=he.apply(null,arguments);return me._fullLayout._guiEditing=!1,Se}}var se=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ie=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ue(he,me){for(var Se=0;Se<me.length;Se++){var Me=me[Se],Ie=he.match(Me.pattern);if(Ie){var Fe=Ie[1]||"";return{head:Fe,tail:he.substr(Fe.length+1),attr:Me.attr}}}}function le(he,me){var Se=e(me,he).get();if(void 0!==Se)return Se;var Me=he.split(".");for(Me.pop();Me.length>1;)if(Me.pop(),void 0!==(Se=e(me,Me.join(".")+".uirevision").get()))return Se;return me.uirevision}function de(he,me){for(var Se=0;Se<me.length;Se++)if(me[Se]._fullInput.uid===he)return Se;return-1}function be(he,me,Se){for(var Me=0;Me<me.length;Me++)if(me[Me].uid===he)return Me;return!me[Se]||me[Se].uid?-1:Se}function _e(he,me){var Se=h.isPlainObject(he),Me=Array.isArray(he);return Se||Me?(Se&&h.isPlainObject(me)||Me&&Array.isArray(me))&&JSON.stringify(he)===JSON.stringify(me):he===me}function xe(he,me,Se,Me){var Ie,Fe,Ne,De=Me.getValObject,$e=Me.flags,Re=Me.immutable,ze=Me.inArray,Ue=Me.arrayIndex;function je(){var we=Ie.editType;ze&&-1!==we.indexOf("arraydraw")?h.pushUnique($e.arrays[ze],Ue):(T.update($e,Ie),"none"!==we&&$e.nChanges++,Me.transition&&Ie.anim&&$e.nChangesAnim++,(H.test(Ne)||ee.test(Ne))&&($e.rangesAltered[Se[0]]=1),U.test(Ne)&&e(me,"_inputDomain").set(null),"datarevision"===Fe&&($e.newDataRevision=1))}function rt(we){return"data_array"===we.valType||we.arrayOk}for(Fe in he){if($e.calc&&!Me.transition)return;var ut=he[Fe],gt=me[Fe],At=Se.concat(Fe);if(Ne=At.join("."),"_"!==Fe.charAt(0)&&"function"!=typeof ut&&ut!==gt){if(("tick0"===Fe||"dtick"===Fe)&&"geo"!==Se[0]){var _t=me.tickmode;if("auto"===_t||"array"===_t||!_t)continue}if(("range"!==Fe||!me.autorange)&&("zmin"!==Fe&&"zmax"!==Fe||"contourcarpet"!==me.type)&&(Ie=De(At))&&(!Ie._compareAsJSON||JSON.stringify(ut)!==JSON.stringify(gt))){var it,et=Ie.valType,wt=rt(Ie),Gt=Array.isArray(ut),Kt=Array.isArray(gt);if(Gt&&Kt){var cr="_input_"+Fe,ar=he[cr],hr=me[cr];if(Array.isArray(ar)&&ar===hr)continue}if(void 0===gt)wt&&Gt?$e.calc=!0:je();else if(Ie._isLinkedToArray){var Xt=[],He=!1;ze||($e.arrays[Fe]=Xt);var Je=Math.min(ut.length,gt.length),pe=Math.max(ut.length,gt.length);if(Je!==pe){if("arraydraw"!==Ie.editType){je();continue}He=!0}for(it=0;it<Je;it++)xe(ut[it],gt[it],At.concat(it),h.extendFlat({inArray:Fe,arrayIndex:it},Me));if(He)for(it=Je;it<pe;it++)Xt.push(it)}else!et&&h.isPlainObject(ut)?xe(ut,gt,At,Me):wt?Gt&&Kt?(Re&&($e.calc=!0),(Re||Me.newDataRevision)&&je()):Gt!==Kt?$e.calc=!0:je():Gt&&Kt&&ut.length===gt.length&&String(ut)===String(gt)||je()}}}for(Fe in me)if(!(Fe in he)&&"_"!==Fe.charAt(0)&&"function"!=typeof me[Fe]){if(rt(Ie=De(Se.concat(Fe)))&&Array.isArray(me[Fe]))return void($e.calc=!0);je()}}function Ee(he){var me=he._fullLayout,Se=he.getBoundingClientRect();if(!h.equalDomRects(Se,me._lastBBox)){var Me=me._invTransform=h.inverseTransformMatrix(h.getFullTransformMatrix(he));me._invScaleX=Math.sqrt(Me[0][0]*Me[0][0]+Me[0][1]*Me[0][1]+Me[0][2]*Me[0][2]),me._invScaleY=Math.sqrt(Me[1][0]*Me[1][0]+Me[1][1]*Me[1][1]+Me[1][2]*Me[1][2]),me._lastBBox=Se}}K.animate=function(he,me,Se){if(he=h.getGraphDiv(he),!h.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Me=he._transitionData;Me._frameQueue||(Me._frameQueue=[]);var Ie=(Se=d.supplyAnimationDefaults(Se)).transition,Fe=Se.frame;function Ne(Re){return Array.isArray(Ie)?Re>=Ie.length?Ie[0]:Ie[Re]:Ie}function De(Re){return Array.isArray(Fe)?Re>=Fe.length?Fe[0]:Fe[Re]:Fe}function $e(Re,ze){var Ue=0;return function(){if(Re&&++Ue===ze)return Re()}}return void 0===Me._frameWaitingCnt&&(Me._frameWaitingCnt=0),new Promise(function(Re,ze){function je(){he.emit("plotly_animating"),Me._lastFrameAt=-1/0,Me._timeToNext=0,Me._runningTransitions=0,Me._currentFrame=null;var ar=function(){Me._animationRaf=window.requestAnimationFrame(ar),Date.now()-Me._lastFrameAt>Me._timeToNext&&function Ue(){Me._currentFrame&&Me._currentFrame.onComplete&&Me._currentFrame.onComplete();var ar=Me._currentFrame=Me._frameQueue.shift();if(ar){var hr=ar.name?ar.name.toString():null;he._fullLayout._currentFrame=hr,Me._lastFrameAt=Date.now(),Me._timeToNext=ar.frameOpts.duration,d.transition(he,ar.frame.data,ar.frame.layout,x.coerceTraceIndices(he,ar.frame.traces),ar.frameOpts,ar.transitionOpts).then(function(){ar.onComplete&&ar.onComplete()}),he.emit("plotly_animatingframe",{name:hr,frame:ar.frame,animation:{frame:ar.frameOpts,transition:ar.transitionOpts}})}else he.emit("plotly_animated"),window.cancelAnimationFrame(Me._animationRaf),Me._animationRaf=null}()};ar()}var rt,ut,gt=0;function At(ar){return ar.transitionOpts=Array.isArray(Ie)?gt>=Ie.length?Ie[gt]:Ie[0]:Ie,gt++,ar}var _t=[],it=null==me,et=Array.isArray(me);if(it||et||!h.isPlainObject(me)){if(it||-1!==["string","number"].indexOf(typeof me))for(rt=0;rt<Me._frames.length;rt++)(ut=Me._frames[rt])&&(it||String(ut.group)===String(me))&&_t.push({type:"byname",name:String(ut.name),data:At({name:ut.name})});else if(et)for(rt=0;rt<me.length;rt++){var wt=me[rt];-1!==["number","string"].indexOf(typeof wt)?(wt=String(wt),_t.push({type:"byname",name:wt,data:At({name:wt})})):h.isPlainObject(wt)&&_t.push({type:"object",data:At(h.extendFlat({},wt))})}}else _t.push({type:"object",data:At(h.extendFlat({},me))});for(rt=0;rt<_t.length;rt++)if("byname"===(ut=_t[rt]).type&&!Me._frameHash[ut.data.name])return h.warn('animate failure: frame not found: "'+ut.data.name+'"'),void ze();-1!==["next","immediate"].indexOf(Se.mode)&&function(){if(0!==Me._frameQueue.length){for(;Me._frameQueue.length;){var ar=Me._frameQueue.pop();ar.onInterrupt&&ar.onInterrupt()}he.emit("plotly_animationinterrupted",[])}}(),"reverse"===Se.direction&&_t.reverse();var Gt=he._fullLayout._currentFrame;if(Gt&&Se.fromcurrent){var Kt=-1;for(rt=0;rt<_t.length;rt++)if("byname"===(ut=_t[rt]).type&&ut.name===Gt){Kt=rt;break}if(Kt>0&&Kt<_t.length-1){var cr=[];for(rt=0;rt<_t.length;rt++)ut=_t[rt],("byname"!==_t[rt].type||rt>Kt)&&cr.push(ut);_t=cr}}_t.length>0?function(ar){if(0!==ar.length){for(var hr=0;hr<ar.length;hr++){var Xt;Xt="byname"===ar[hr].type?d.computeFrame(he,ar[hr].name):ar[hr].data;var He=De(hr),Je=Ne(hr);Je.duration=Math.min(Je.duration,He.duration);var pe={frame:Xt,name:ar[hr].name,frameOpts:He,transitionOpts:Je};hr===ar.length-1&&(pe.onComplete=$e(Re,2),pe.onInterrupt=ze),Me._frameQueue.push(pe)}"immediate"===Se.mode&&(Me._lastFrameAt=-1/0),Me._animationRaf||je()}}(_t):(he.emit("plotly_animated"),Re())})},K.addFrames=function(he,me,Se){if(he=h.getGraphDiv(he),null==me)return Promise.resolve();if(!h.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Me,Ie,Fe,Ne,De=he._transitionData._frames,$e=he._transitionData._frameHash;if(!Array.isArray(me))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+me);var Re=De.length+2*me.length,ze=[],Ue={};for(Me=me.length-1;Me>=0;Me--)if(h.isPlainObject(me[Me])){var je=me[Me].name,rt=($e[je]||Ue[je]||{}).name,ut=me[Me].name;rt&&ut&&"number"==typeof ut&&($e[rt]||Ue[rt])&&k<5&&(k++,h.warn('addFrames: overwriting frame "'+($e[rt]||Ue[rt]).name+'" with a frame whose name of type "number" also equates to "'+rt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===k&&h.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ue[je]={name:je},ze.push({frame:d.supplyFrameDefaults(me[Me]),index:Se&&null!=Se[Me]?Se[Me]:Re+Me})}ze.sort(function(cr,ar){return cr.index>ar.index?-1:cr.index<ar.index?1:0});var At=[],_t=[],it=De.length;for(Me=ze.length-1;Me>=0;Me--){if("number"==typeof(Ie=ze[Me].frame).name&&h.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Ie.name)for(;$e[Ie.name="frame "+he._transitionData._counter++];);if($e[Ie.name]){for(Fe=0;Fe<De.length&&(De[Fe]||{}).name!==Ie.name;Fe++);At.push({type:"replace",index:Fe,value:Ie}),_t.unshift({type:"replace",index:Fe,value:De[Fe]})}else Ne=Math.max(0,Math.min(ze[Me].index,it)),At.push({type:"insert",index:Ne,value:Ie}),_t.unshift({type:"delete",index:Ne}),it++}return r&&r.add(he,d.modifyFrames,[he,_t],d.modifyFrames,[he,At]),d.modifyFrames(he,At)},K.deleteFrames=function(he,me){if(he=h.getGraphDiv(he),!h.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he);var Se,Me,Ie=he._transitionData._frames,Fe=[],Ne=[];if(!me)for(me=[],Se=0;Se<Ie.length;Se++)me.push(Se);for((me=me.slice()).sort(),Se=me.length-1;Se>=0;Se--)Fe.push({type:"delete",index:Me=me[Se]}),Ne.unshift({type:"insert",index:Me,value:Ie[Me]});return r&&r.add(he,d.modifyFrames,[he,Ne],d.modifyFrames,[he,Fe]),d.modifyFrames(he,Fe)},K.addTraces=function he(me,Se,Me){me=h.getGraphDiv(me);var Ie,Fe,Ne=[],De=K.deleteTraces,$e=he,Re=[me,Ne],ze=[me,Se];for(function(Ue,je,rt){var ut,gt;if(!Array.isArray(Ue.data))throw new Error("gd.data must be an array.");if(void 0===je)throw new Error("traces must be defined.");for(Array.isArray(je)||(je=[je]),ut=0;ut<je.length;ut++)if("object"!=typeof(gt=je[ut])||Array.isArray(gt)||null===gt)throw new Error("all values in traces array must be non-array objects");if(void 0===rt||Array.isArray(rt)||(rt=[rt]),void 0!==rt&&rt.length!==je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(me,Se,Me),Array.isArray(Se)||(Se=[Se]),Se=Se.map(function(Ue){return h.extendFlat({},Ue)}),x.cleanData(Se),Ie=0;Ie<Se.length;Ie++)me.data.push(Se[Ie]);for(Ie=0;Ie<Se.length;Ie++)Ne.push(-Se.length+Ie);if(void 0===Me)return Fe=K.redraw(me),r.add(me,De,Re,$e,ze),Fe;Array.isArray(Me)||(Me=[Me]);try{E(me,Ne,Me)}catch(Ue){throw me.data.splice(me.data.length-Se.length,Se.length),Ue}return r.startSequence(me),r.add(me,De,Re,$e,ze),Fe=K.moveTraces(me,Ne,Me),r.stopSequence(me),Fe},K.deleteTraces=function he(me,Se){me=h.getGraphDiv(me);var Me,Ie,Fe=[],Ne=K.addTraces,De=he,$e=[me,Fe,Se],Re=[me,Se];if(void 0===Se)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Se)||(Se=[Se]),S(me,Se,"indices"),(Se=P(Se,me.data.length-1)).sort(h.sorterDes),Me=0;Me<Se.length;Me+=1)Ie=me.data.splice(Se[Me],1)[0],Fe.push(Ie);var ze=K.redraw(me);return r.add(me,Ne,$e,De,Re),ze},K.extendTraces=function he(me,Se,Me,Ie){function Fe(Re,ze,Ue){var je,rt;if(h.isTypedArray(Re))if(Ue<0){var ut=new Re.constructor(0),gt=z(Re,ze);Ue<0?(je=gt,rt=ut):(je=ut,rt=gt)}else if(je=new Re.constructor(Ue),rt=new Re.constructor(Re.length+ze.length-Ue),Ue===ze.length)je.set(ze),rt.set(Re);else if(Ue<ze.length){var At=ze.length-Ue;je.set(ze.subarray(At)),rt.set(Re),rt.set(ze.subarray(0,At),Re.length)}else{var _t=Ue-ze.length,it=Re.length-_t;je.set(Re.subarray(it)),je.set(ze,_t),rt.set(Re.subarray(0,it))}else je=Re.concat(ze),rt=Ue>=0&&Ue<je.length?je.splice(0,je.length-Ue):[];return[je,rt]}var Ne=D(me=h.getGraphDiv(me),Se,Me,Ie,Fe),De=K.redraw(me);return r.add(me,K.prependTraces,[me,Ne.update,Me,Ne.maxPoints],he,arguments),De},K.moveTraces=function he(me,Se,Me){var Ie,Fe=[],Ne=[],De=he,$e=he,Re=[me=h.getGraphDiv(me),Me,Se],ze=[me,Se,Me];if(E(me,Se,Me),Se=Array.isArray(Se)?Se:[Se],void 0===Me)for(Me=[],Ie=0;Ie<Se.length;Ie++)Me.push(-Se.length+Ie);for(Me=Array.isArray(Me)?Me:[Me],Se=P(Se,me.data.length-1),Me=P(Me,me.data.length-1),Ie=0;Ie<me.data.length;Ie++)-1===Se.indexOf(Ie)&&Fe.push(me.data[Ie]);for(Ie=0;Ie<Se.length;Ie++)Ne.push({newIndex:Me[Ie],trace:me.data[Se[Ie]]});for(Ne.sort(function(je,rt){return je.newIndex-rt.newIndex}),Ie=0;Ie<Ne.length;Ie+=1)Fe.splice(Ne[Ie].newIndex,0,Ne[Ie].trace);me.data=Fe;var Ue=K.redraw(me);return r.add(me,De,Re,$e,ze),Ue},K.prependTraces=function he(me,Se,Me,Ie){function Fe(Re,ze,Ue){var je,rt;if(h.isTypedArray(Re))if(Ue<=0){var ut=new Re.constructor(0),gt=z(ze,Re);Ue<0?(je=gt,rt=ut):(je=ut,rt=gt)}else if(je=new Re.constructor(Ue),rt=new Re.constructor(Re.length+ze.length-Ue),Ue===ze.length)je.set(ze),rt.set(Re);else if(Ue<ze.length){var At=ze.length-Ue;je.set(ze.subarray(0,At)),rt.set(ze.subarray(At)),rt.set(Re,At)}else{var _t=Ue-ze.length;je.set(ze),je.set(Re.subarray(0,_t),ze.length),rt.set(Re.subarray(_t))}else je=ze.concat(Re),rt=Ue>=0&&Ue<je.length?je.splice(Ue,je.length):[];return[je,rt]}var Ne=D(me=h.getGraphDiv(me),Se,Me,Ie,Fe),De=K.redraw(me);return r.add(me,K.extendTraces,[me,Ne.update,Me,Ne.maxPoints],he,arguments),De},K.newPlot=function(he,me,Se,Me){return he=h.getGraphDiv(he),d.cleanPlot([],{},he._fullData||[],he._fullLayout||{}),d.purge(he),K._doPlot(he,me,Se,Me)},K._doPlot=function(he,me,Se,Me){var Ie;if(he=h.getGraphDiv(he),n.init(he),h.isPlainObject(me)){var Fe=me;me=Fe.data,Se=Fe.layout,Me=Fe.config,Ie=Fe.frames}if(!1===n.triggerHandler(he,"plotly_beforeplot",[me,Se,Me]))return Promise.reject();me||Se||h.isPlotDiv(he)||h.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",he),O(he,Me),Se||(Se={}),m.select(he).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(he._promises)||(he._promises=[]);var Ne=0===(he.data||[]).length&&Array.isArray(me);Array.isArray(me)&&(x.cleanData(me),Ne?he.data=me:he.data.push.apply(he.data,me),he.empty=!1),he.layout&&!Ne||(he.layout=x.cleanLayout(Se)),d.supplyDefaults(he);var De=he._fullLayout,$e=De._has("cartesian");De._replotting=!0,(Ne||De._shouldCreateBgLayer)&&(function(_t){var it=m.select(_t),et=_t._fullLayout;if(et._calcInverseTransform=Ee,et._calcInverseTransform(_t),et._container=it.selectAll(".plot-container").data([0]),et._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),et._paperdiv=et._container.selectAll(".svg-container").data([0]),et._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),et._glcontainer=et._paperdiv.selectAll(".gl-container").data([{}]),et._glcontainer.enter().append("div").classed("gl-container",!0),et._paperdiv.selectAll(".main-svg").remove(),et._paperdiv.select(".modebar-container").remove(),et._paper=et._paperdiv.insert("svg",":first-child").classed("main-svg",!0),et._toppaper=et._paperdiv.append("svg").classed("main-svg",!0),et._modebardiv=et._paperdiv.append("div"),delete et._modeBar,et._hoverpaper=et._paperdiv.append("svg").classed("main-svg",!0),!et._uid){var wt={};m.selectAll("defs").each(function(){this.id&&(wt[this.id.split("-")[1]]=1)}),et._uid=h.randstr(wt)}et._paperdiv.selectAll(".main-svg").attr(l.svgAttrs),et._defs=et._paper.append("defs").attr("id","defs-"+et._uid),et._clips=et._defs.append("g").classed("clips",!0),et._topdefs=et._toppaper.append("defs").attr("id","topdefs-"+et._uid),et._topclips=et._topdefs.append("g").classed("clips",!0),et._bgLayer=et._paper.append("g").classed("bglayer",!0),et._draggers=et._paper.append("g").classed("draglayer",!0);var Gt=et._paper.append("g").classed("layer-below",!0);et._imageLowerLayer=Gt.append("g").classed("imagelayer",!0),et._shapeLowerLayer=Gt.append("g").classed("shapelayer",!0),et._cartesianlayer=et._paper.append("g").classed("cartesianlayer",!0),et._polarlayer=et._paper.append("g").classed("polarlayer",!0),et._smithlayer=et._paper.append("g").classed("smithlayer",!0),et._ternarylayer=et._paper.append("g").classed("ternarylayer",!0),et._geolayer=et._paper.append("g").classed("geolayer",!0),et._funnelarealayer=et._paper.append("g").classed("funnelarealayer",!0),et._pielayer=et._paper.append("g").classed("pielayer",!0),et._iciclelayer=et._paper.append("g").classed("iciclelayer",!0),et._treemaplayer=et._paper.append("g").classed("treemaplayer",!0),et._sunburstlayer=et._paper.append("g").classed("sunburstlayer",!0),et._indicatorlayer=et._toppaper.append("g").classed("indicatorlayer",!0),et._glimages=et._paper.append("g").classed("glimages",!0);var Kt=et._toppaper.append("g").classed("layer-above",!0);et._imageUpperLayer=Kt.append("g").classed("imagelayer",!0),et._shapeUpperLayer=Kt.append("g").classed("shapelayer",!0),et._selectionLayer=et._toppaper.append("g").classed("selectionlayer",!0),et._infolayer=et._toppaper.append("g").classed("infolayer",!0),et._menulayer=et._toppaper.append("g").classed("menulayer",!0),et._zoomlayer=et._toppaper.append("g").classed("zoomlayer",!0),et._hoverlayer=et._hoverpaper.append("g").classed("hoverlayer",!0),et._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),_t.emit("plotly_framework")}(he),De._shouldCreateBgLayer&&delete De._shouldCreateBgLayer),i.initGradients(he),i.initPatterns(he),Ne&&a.saveShowSpikeInitial(he);var Re=!he.calcdata||he.calcdata.length!==(he._fullData||[]).length;Re&&d.doCalcdata(he);for(var ze=0;ze<he.calcdata.length;ze++)he.calcdata[ze][0].trace=he._fullData[ze];he._context.responsive?he._responsiveChartHandler||(he._responsiveChartHandler=function(){h.isHidden(he)||d.resize(he)},window.addEventListener("resize",he._responsiveChartHandler)):h.clearResponsive(he);var Ue=h.extendFlat({},De._size),je=0;function rt(){if(d.clearAutoMarginIds(he),f.drawMarginPushers(he),a.allowAutoMargin(he),De._has("pie"))for(var _t=he._fullData,it=0;it<_t.length;it++){var et=_t[it];"pie"===et.type&&et.automargin&&d.allowAutoMargin(he,"pie."+et.uid+".automargin")}return d.doAutoMargin(he),d.previousPromises(he)}function ut(){he._transitioning||(f.doAutoRangeAndConstraints(he),Ne&&a.saveRangeInitial(he),o.getComponentMethod("rangeslider","calcAutorange")(he))}var gt=[d.previousPromises,function(){if(Ie)return K.addFrames(he,Ie)},function _t(){for(var it=De._basePlotModules,et=0;et<it.length;et++)it[et].drawFramework&&it[et].drawFramework(he);!De._glcanvas&&De._has("gl")&&(De._glcanvas=De._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(cr){return cr.key}),De._glcanvas.enter().append("canvas").attr("class",function(cr){return"gl-canvas gl-canvas-"+cr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var wt=he._context.plotGlPixelRatio;if(De._glcanvas){De._glcanvas.attr("width",De.width*wt).attr("height",De.height*wt).style("width",De.width+"px").style("height",De.height+"px");var Gt=De._glcanvas.data()[0].regl;if(Gt&&(Math.floor(De.width*wt)!==Gt._gl.drawingBufferWidth||Math.floor(De.height*wt)!==Gt._gl.drawingBufferHeight)){var Kt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!je)return h.log(Kt+" Clearing graph and plotting again."),d.cleanPlot([],{},he._fullData,De),d.supplyDefaults(he),De=he._fullLayout,d.doCalcdata(he),je++,_t();h.error(Kt)}}return"h"===De.modebar.orientation?De._modebardiv.style("height",null).style("width","100%"):De._modebardiv.style("width",null).style("height",De.height+"px"),d.previousPromises(he)},rt,function(){if(d.didMarginChange(Ue,De._size))return h.syncOrAsync([rt,f.layoutStyles],he)}];$e&&gt.push(function(){if(Re)return h.syncOrAsync([o.getComponentMethod("shapes","calcAutorange"),o.getComponentMethod("annotations","calcAutorange"),ut],he);ut()}),gt.push(f.layoutStyles),$e&&gt.push(function(){return a.draw(he,Ne?"":"redraw")},function(_t){_t._fullLayout._insideTickLabelsAutorange&&re(_t,_t._fullLayout._insideTickLabelsAutorange).then(function(){_t._fullLayout._insideTickLabelsAutorange=void 0})}),gt.push(f.drawData,f.finalDraw,c,d.addLinks,d.rehover,d.redrag,d.reselect,d.doAutoMargin,function(_t){_t._fullLayout._insideTickLabelsAutorange&&Ne&&a.saveRangeInitial(_t,!0)},d.previousPromises);var At=h.syncOrAsync(gt,he);return At&&At.then||(At=Promise.resolve()),At.then(function(){return w(he),he})},K.purge=function(he){var me=(he=h.getGraphDiv(he))._fullLayout||{};return d.cleanPlot([],{},he._fullData||[],me),d.purge(he),n.purge(he),me._container&&me._container.remove(),delete he._context,he},K.react=function(he,me,Se,Me){var Ie,Fe;he=h.getGraphDiv(he),x.clearPromiseQueue(he);var pe,we,Be,We,Ke,Ye,Ne=he._fullData,De=he._fullLayout;if(h.isPlotDiv(he)&&Ne&&De){if(h.isPlainObject(me)){var $e=me;me=$e.data,Se=$e.layout,Me=$e.config,Ie=$e.frames}var Re=!1;if(Me){var ze=h.extendDeep({},he._context);he._context=void 0,O(he,Me),Re=function pe(we,Be){var We;for(We in we)if("_"!==We.charAt(0)){var Ke=we[We],Ye=Be[We];if(Ke!==Ye)if(h.isPlainObject(Ke)&&h.isPlainObject(Ye)){if(pe(Ke,Ye))return!0}else{if(!Array.isArray(Ke)||!Array.isArray(Ye)||Ke.length!==Ye.length)return!0;for(var ft=0;ft<Ke.length;ft++)if(Ke[ft]!==Ye[ft]&&(!h.isPlainObject(Ke[ft])||!h.isPlainObject(Ye[ft])||pe(Ke[ft],Ye[ft])))return!0}}}(ze,he._context)}he.data=me||[],x.cleanData(he.data),he.layout=Se||{},x.cleanLayout(he.layout),function(pe,we,Be,We){var Ke,Ye,ft,ct,St,Ft,at,mt,qt,Et,Dt=We._preGUI,Le=[],Xe={},ot={};for(Ke in Dt){if(St=ue(Ke,se)){if(qt=St.head,Et=St.tail,(ct=(ft=e(We,Ye=St.attr||qt+".uirevision").get())&&le(Ye,we))&&ct===ft){if(null===(Ft=Dt[Ke])&&(Ft=void 0),_e(mt=(at=e(we,Ke)).get(),Ft)){void 0===mt&&"autorange"===Et&&Le.push(qt),at.set(V(e(We,Ke).get()));continue}if("autorange"===Et||"range["===Et.substr(0,6)){var Ut=Dt[qt+".autorange"];if(Ut||null===Ut&&null===Dt[qt+".range[0]"]&&null===Dt[qt+".range[1]"]){if(!(qt in Xe)){var $t=e(we,qt).get();Xe[qt]=$t&&($t.autorange||!1!==$t.autorange&&(!$t.range||2!==$t.range.length))}if(Xe[qt]){at.set(V(e(We,Ke).get()));continue}}}}}else h.warn("unrecognized GUI edit: "+Ke);delete Dt[Ke],St&&"range["===St.tail.substr(0,6)&&(ot[St.head]=1)}for(var Wt=0;Wt<Le.length;Wt++){var wr=Le[Wt];if(ot[wr]){var Rr=e(we,wr).get();Rr&&delete Rr.autorange}}var br=We._tracePreGUI;for(var nr in br){var lr,sr=br[nr],_r=null;for(Ke in sr){if(!_r){var Ar=de(nr,Be);if(Ar<0){delete br[nr];break}var zt=be(nr,pe,(lr=Be[Ar]._fullInput).index);if(zt<0){delete br[nr];break}_r=pe[zt]}if(St=ue(Ke,ie)){if(St.attr?ct=(ft=e(We,St.attr).get())&&le(St.attr,we):(ft=lr.uirevision,void 0===(ct=_r.uirevision)&&(ct=we.uirevision)),ct&&ct===ft&&(null===(Ft=sr[Ke])&&(Ft=void 0),_e(mt=(at=e(_r,Ke)).get(),Ft))){at.set(V(e(lr,Ke).get()));continue}}else h.warn("unrecognized GUI edit: "+Ke+" in trace uid "+nr);delete sr[Ke]}}}(he.data,he.layout,Ne,De),d.supplyDefaults(he,{skipUpdateCalc:!0});var Ue=he._fullData,je=he._fullLayout,rt=void 0===je.datarevision,ut=je.transition,gt=(pe=he,we=De,Be=je,We=rt,Ke=ut,(Ye=T.layoutFlags()).arrays={},Ye.rangesAltered={},Ye.nChanges=0,Ye.nChangesAnim=0,xe(we,Be,[],{getValObject:function ft(ct){return t.getLayoutValObject(Be,ct)},flags:Ye,immutable:We,transition:Ke,gd:pe}),(Ye.plot||Ye.calc)&&(Ye.layoutReplot=!0),Ke&&Ye.nChanges&&Ye.nChangesAnim&&(Ye.anim=Ye.nChanges===Ye.nChangesAnim?"all":"some"),Ye),_t=function(pe,we,Be,We,Ke,Ye){var ft=we.length===Be.length;if(!Ke&&!ft)return{fullReplot:!0,calc:!0};var ct,St,Ft=T.traceFlags();Ft.arrays={},Ft.nChanges=0,Ft.nChangesAnim=0;var at={getValObject:function(qt){var Et=t.getTraceValObject(St,qt);return!St._module.animatable&&Et.anim&&(Et.anim=!1),Et},flags:Ft,immutable:We,transition:Ke,newDataRevision:Ye,gd:pe},mt={};for(ct=0;ct<we.length;ct++)if(Be[ct]){if(d.hasMakesDataTransform(St=Be[ct]._fullInput)&&(St=Be[ct]),mt[St.uid])continue;mt[St.uid]=1,xe(we[ct]._fullInput,St,[],at)}return(Ft.calc||Ft.plot)&&(Ft.fullReplot=!0),Ke&&Ft.nChanges&&Ft.nChangesAnim&&(Ft.anim=Ft.nChanges===Ft.nChangesAnim&&ft?"all":"some"),Ft}(he,Ne,Ue,rt,ut,gt.newDataRevision);if(q(he)&&(gt.layoutReplot=!0),_t.calc||gt.calc){he.calcdata=void 0;for(var it=Object.getOwnPropertyNames(je),et=0;et<it.length;et++){var wt=it[et],Gt=wt.substring(0,5);if("xaxis"===Gt||"yaxis"===Gt){var Kt=je[wt]._emptyCategories;Kt&&Kt()}}}else d.supplyDefaultsUpdateCalc(he.calcdata,Ue);var cr=[];if(Ie&&(he._transitionData={},d.createTransitionData(he),cr.push(function(){return K.addFrames(he,Ie)})),je.transition&&!Re&&(_t.anim||gt.anim))gt.ticks&&cr.push(f.doTicksRelayout),d.doCalcdata(he),f.doAutoRangeAndConstraints(he),cr.push(function(){return d.transitionFromReact(he,_t,gt,De)});else if(_t.fullReplot||gt.layoutReplot||Re)he._fullLayout._skipDefaults=!0,cr.push(K._doPlot);else{for(var ar in gt.arrays){var hr=gt.arrays[ar];if(hr.length){var Xt=o.getComponentMethod(ar,"drawOne");if(Xt!==h.noop)for(var He=0;He<hr.length;He++)Xt(he,hr[He]);else{var Je=o.getComponentMethod(ar,"draw");if(Je===h.noop)throw new Error("cannot draw components: "+ar);Je(he)}}}cr.push(d.previousPromises),_t.style&&cr.push(f.doTraceStyle),(_t.colorbars||gt.colorbars)&&cr.push(f.doColorBars),gt.legend&&cr.push(f.doLegend),gt.layoutstyle&&cr.push(f.layoutStyles),gt.axrange&&B(cr),gt.ticks&&cr.push(f.doTicksRelayout),gt.modebar&&cr.push(f.doModeBar),gt.camera&&cr.push(f.doCamera),cr.push(w)}cr.push(d.rehover,d.redrag,d.reselect),(Fe=h.syncOrAsync(cr,he))&&Fe.then||(Fe=Promise.resolve(he))}else Fe=K.newPlot(he,me,Se,Me);return Fe.then(function(){return he.emit("plotly_react",{data:me,layout:Se}),he})},K.redraw=function(he){if(he=h.getGraphDiv(he),!h.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he);return x.cleanData(he.data),x.cleanLayout(he.layout),he.calcdata=void 0,K._doPlot(he).then(function(){return he.emit("plotly_redraw"),he})},K.relayout=re,K.restyle=N,K.setPlotConfig=function(he){return h.extendFlat(g,he)},K.update=te,K._guiRelayout=ne(re),K._guiRestyle=ne(N),K._guiUpdate=ne(te),K._storeDirectGUIEdit=function(he,me,Se){for(var Me in Se)J(Me,e(he,Me).get(),Se[Me],me)}},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(y,Q,K){"use strict";var m={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},v={};(function b(h,e){for(var n in h){var r=h[n];r.valType?e[n]=r.dflt:(e[n]||(e[n]={}),b(r,e[n]))}})(m,v),Q.exports={configAttributes:m,dfltConfig:v}},{}],554:[function(y,Q,K){"use strict";var m=y("../registry"),v=y("../lib"),b=y("../plots/attributes"),h=y("../plots/layout_attributes"),e=y("../plots/frame_attributes"),n=y("../plots/animation_attributes"),r=y("./plot_config").configAttributes,o=y("./edit_types"),t=v.extendDeepAll,d=v.isPlainObject,a=v.isArrayOrTypedArray,i=v.nestedProperty,s=v.valObjectMeta,c=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function l(_,k,w){if(!_)return!1;if(_._isLinkedToArray)if(p(k[w]))w++;else if(w<k.length)return!1;for(;w<k.length;w++){var C=_[k[w]];if(!d(C)||(_=C,w===k.length-1))break;if(_._isLinkedToArray){if(!p(k[++w]))return!1}else if("info_array"===_.valType){var A=k[++w];if(!p(A))return!1;var O=_.items;if(Array.isArray(O)){if(A>=O.length)return!1;if(2===_.dimensions){if(w++,k.length===w)return _;var P=k[w];if(!p(P))return!1;_=O[A][P]}else _=O[A]}else _=O}}return _}function p(_){return _===Math.round(_)&&_>=0}function g(){var _,k,w={};for(_ in t(w,h),m.subplotsRegistry)if((k=m.subplotsRegistry[_]).layoutAttributes)if(Array.isArray(k.attr))for(var C=0;C<k.attr.length;C++)f(w,k,k.attr[C]);else f(w,k,"subplot"===k.attr?k.name:k.attr);for(_ in m.componentsRegistry){var A=(k=m.componentsRegistry[_]).schema;if(A&&(A.subplots||A.layout)){var O=A.subplots;if(O&&O.xaxis&&!O.yaxis)for(var P in O.xaxis)delete w.yaxis[P]}else"colorscale"===k.name?t(w,k.layoutAttributes):k.layoutAttributes&&T(w,k.layoutAttributes,k.name)}return{layoutAttributes:x(w)}}function u(){var _={frames:t({},e)};return x(_),_.frames}function x(_){return K.crawl(_,function(w,C,A){K.isValObject(w)?!0!==w.arrayOk&&"data_array"!==w.valType||(A[C+"src"]={valType:"string",editType:"none"}):d(w)&&(w.role="object")}),K.crawl(_,function(w,C,A){if(w){var O=w._isLinkedToArray;O&&(delete w._isLinkedToArray,A[C]={items:{}},A[C].items[O]=w,A[C].role="object")}}),function(k){!function w(C){for(var A in C)if(d(C[A]))w(C[A]);else if(Array.isArray(C[A]))for(var O=0;O<C[A].length;O++)w(C[A][O]);else C[A]instanceof RegExp&&(C[A]=C[A].toString())}(k)}(_),_}function f(_,k,w){var C=i(_,w),A=t({},k.layoutAttributes);A._isSubplotObj=!0,C.set(A)}function T(_,k,w){var C=i(_,w);C.set(t(C.get()||{},k))}K.IS_SUBPLOT_OBJ="_isSubplotObj",K.IS_LINKED_TO_ARRAY="_isLinkedToArray",K.DEPRECATED="_deprecated",K.UNDERSCORE_ATTRS=c,K.get=function(){var _={};m.allTypes.forEach(function(w){_[w]=function(C){var A,O;O=(A=m.modules[C]._module).basePlotModule;var P={type:null},S=t({},b),E=t({},A.attributes);K.crawl(E,function(N,V,X,J,G){i(S,G).set(void 0),void 0===N&&i(E,G).set(void 0)}),t(P,S),m.traceIs(C,"noOpacity")&&delete P.opacity,m.traceIs(C,"showLegend")||(delete P.showlegend,delete P.legendgroup),m.traceIs(C,"noHover")&&(delete P.hoverinfo,delete P.hoverlabel),A.selectPoints||delete P.selectedpoints,t(P,E),O.attributes&&t(P,O.attributes),P.type=C;var D={meta:A.meta||{},categories:A.categories||{},animatable:Boolean(A.animatable),type:C,attributes:x(P)};if(A.layoutAttributes){var z={};t(z,A.layoutAttributes),D.layoutAttributes=x(z)}return A.animatable||K.crawl(D,function(N){K.isValObject(N)&&"anim"in N&&delete N.anim}),D}(w)});var k={};return Object.keys(m.transformsRegistry).forEach(function(w){var C,O;k[w]=(O=t({},m.transformsRegistry[C=w].attributes),Object.keys(m.componentsRegistry).forEach(function(P){var S=m.componentsRegistry[P];S.schema&&S.schema.transforms&&S.schema.transforms[C]&&Object.keys(S.schema.transforms[C]).forEach(function(E){T(O,S.schema.transforms[C][E],E)})}),{attributes:x(O)})}),{defs:{valObjects:s,metaKeys:c.concat(["description","role","editType","impliedEdits"]),editType:{traces:o.traces,layout:o.layout},impliedEdits:{}},traces:_,layout:g(),transforms:k,frames:u(),animation:x(n),config:x(r)}},K.crawl=function(_,k,w,C){var A=w||0;C=C||"",Object.keys(_).forEach(function(O){var P=_[O];if(-1===c.indexOf(O)){var S=(C?C+".":"")+O;k(P,O,_,A,S),K.isValObject(P)||d(P)&&"impliedEdits"!==O&&K.crawl(P,k,A+1,S)}})},K.isValObject=function(_){return _&&void 0!==_.valType},K.findArrayAttributes=function(_){var k,w,C=[],A=[],O=[];function P(N,V,X,J){A=A.slice(0,J).concat([V]),O=O.slice(0,J).concat([N&&N._isLinkedToArray]),N&&("data_array"===N.valType||!0===N.arrayOk)&&("colorbar"!==A[J-1]||"ticktext"!==V&&"tickvals"!==V)&&function G(Z,re,j){var B=Z[A[re]],H=j+A[re];if(re===A.length-1)a(B)&&C.push(w+H);else if(O[re]){if(Array.isArray(B))for(var ee=0;ee<B.length;ee++)d(B[ee])&&G(B[ee],re+1,H+"["+ee+"].")}else d(B)&&G(B,re+1,H+".")}(k,0,"")}k=_,w="",K.crawl(b,P),_._module&&_._module.attributes&&K.crawl(_._module.attributes,P);var S=_.transforms;if(S)for(var E=0;E<S.length;E++){var D=S[E],z=D._module;z&&(w="transforms["+E+"].",k=D,K.crawl(z.attributes,P))}return C},K.getTraceValObject=function(_,k){var w,C,A=k[0],O=1;if("transforms"===A){if(1===k.length)return b.transforms;var P=_.transforms;if(!Array.isArray(P)||!P.length)return!1;var S=k[1];if(!p(S)||S>=P.length)return!1;C=(w=(m.transformsRegistry[P[S].type]||{}).attributes)&&w[k[2]],O=3}else{var E=_._module;if(E||(E=(m.modules[_.type||b.type.dflt]||{})._module),!E)return!1;if(!(C=(w=E.attributes)&&w[A])){var D=E.basePlotModule;D&&D.attributes&&(C=D.attributes[A])}C||(C=b[A])}return l(C,k,O)},K.getLayoutValObject=function(_,k){return l(function(w,C){var A,O,P,S,E=w._basePlotModules;if(E){var D;for(A=0;A<E.length;A++){if((P=E[A]).attrRegex&&P.attrRegex.test(C)){if(P.layoutAttrOverrides)return P.layoutAttrOverrides;!D&&P.layoutAttributes&&(D=P.layoutAttributes)}var z=P.baseLayoutAttrOverrides;if(z&&C in z)return z[C]}if(D)return D}var N=w._modules;if(N)for(A=0;A<N.length;A++)if((S=N[A].layoutAttributes)&&C in S)return S[C];for(O in m.componentsRegistry){if("colorscale"===(P=m.componentsRegistry[O]).name&&0===C.indexOf("coloraxis"))return P.layoutAttributes[C];if(!P.schema&&C===P.name)return P.layoutAttributes}return C in h&&h[C]}(_,k[0]),k,1)}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("../plots/attributes"),b={name:{valType:"string",editType:"none"}};function h(n){return n&&"string"==typeof n}function e(n){return"s"!==n.charAt(n.length-1)&&m.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}b.templateitemname={valType:"string",editType:"calc"},K.templatedArray=function(n,r){return r._isLinkedToArray=n,r.name=b.name,r.templateitemname=b.templateitemname,r},K.traceTemplater=function(n){var r,o,t={};for(r in n)o=n[r],Array.isArray(o)&&o.length&&(t[r]=0);return{newTrace:function(d){var a={type:r=m.coerce(d,{},v,"type"),_template:null};if(r in t){var i=t[r]%(o=n[r]).length;t[r]++,a._template=o[i]}return a}}},K.newContainer=function(n,r,o){var t=n._template,d=t&&(t[r]||o&&t[o]);return m.isPlainObject(d)||(d=null),n[r]={_template:d}},K.arrayTemplater=function(n,r,o){var t=n._template,d=t&&t[e(r)],a=t&&t[r];Array.isArray(a)&&a.length||(a=[]);var i={};return{newItem:function(s){var c={name:s.name,_input:s},l=c.templateitemname=s.templateitemname;if(!h(l))return c._template=d,c;for(var p=0;p<a.length;p++){var g=a[p];if(g.name===l)return i[l]=1,c._template=g,c}return c[o]=s[o]||!1,c._template=!1,c},defaultItems:function(){for(var s=[],c=0;c<a.length;c++){var l=a[c],p=l.name;if(h(p)&&!i[p]){var g={_template:l,name:p,_input:{_templateitemname:p}};g.templateitemname=l.templateitemname,s.push(g),i[p]=1}}return s}}},K.arrayDefaultKey=e,K.arrayEditor=function(n,r,o){var t=(m.nestedProperty(n,r).get()||[]).length,d=o._index,a=d>=t&&(o._input||{})._templateitemname;a&&(d=t);var i,s=r+"["+d+"]";function c(){i={},a&&(i[s]={},i[s].templateitemname=a)}function l(g,u){a?m.nestedProperty(i[s],g).set(u):i[s+"."+g]=u}function p(){var g=i;return c(),g}return c(),{modifyBase:function(g,u){i[g]=u},modifyItem:l,getUpdateObj:p,applyUpdate:function(g,u){g&&l(g,u);var x=p();for(var f in x)m.nestedProperty(n,f).set(x[f])}}}},{"../lib":515,"../plots/attributes":562}],556:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../registry"),b=y("../plots/plots"),h=y("../lib"),e=y("../lib/clear_gl_canvases"),n=y("../components/color"),r=y("../components/drawing"),o=y("../components/titles"),t=y("../components/modebar"),d=y("../plots/cartesian/axes"),a=y("../constants/alignment"),i=y("../plots/cartesian/constraints"),s=i.enforce,c=i.clean,l=y("../plots/cartesian/autorange").doAutoRange;function p(k,w,C){for(var A=0;A<C.length;A++){var O=C[A][0],P=C[A][1];if(!(O[0]>=k[1]||O[1]<=k[0])&&P[0]<w[1]&&P[1]>w[0])return!0}return!1}function g(k){var w,C,A,O,P,S,E=k._fullLayout,D=E._size,z=D.p,N=d.list(k,"",!0);if(E._paperdiv.style({width:k._context.responsive&&E.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":E.width+"px",height:k._context.responsive&&E.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":E.height+"px"}).selectAll(".main-svg").call(r.setSize,E.width,E.height),k._context.setBackground(k,E.paper_bgcolor),K.drawMainTitle(k),t.manage(k),!E._has("cartesian"))return b.previousPromises(k);function V(je,rt,ut){var gt=je._lw/2;return"x"===je._id.charAt(0)?rt?"top"===ut?rt._offset-z-gt:rt._offset+rt._length+z+gt:D.t+D.h*(1-(je.position||0))+gt%1:rt?"right"===ut?rt._offset+rt._length+z+gt:rt._offset-z-gt:D.l+D.w*(je.position||0)+gt%1}for(w=0;w<N.length;w++){var X=(O=N[w])._anchorAxis;O._linepositions={},O._lw=r.crispRound(k,O.linewidth,1),O._mainLinePosition=V(O,X,O.side),O._mainMirrorPosition=O.mirror&&X?V(O,X,a.OPPOSITE_SIDE[O.side]):null}var J=[],G=[],Z=[],re=1===n.opacity(E.paper_bgcolor)&&1===n.opacity(E.plot_bgcolor)&&E.paper_bgcolor===E.plot_bgcolor;for(C in E._plots)if((A=E._plots[C]).mainplot)A.bg&&A.bg.remove(),A.bg=void 0;else{var j=A.xaxis.domain,B=A.yaxis.domain,H=A.plotgroup;if(p(j,B,Z)){var ee=H.node(),U=A.bg=h.ensureSingle(H,"rect","bg");ee.insertBefore(U.node(),ee.childNodes[0]),G.push(C)}else H.select("rect.bg").remove(),Z.push([j,B]),re||(J.push(C),G.push(C))}var $,q,te,ne,se,ie,ue,le,de,be,_e,xe,Ee,he=E._bgLayer.selectAll(".bg").data(J);for(he.enter().append("rect").classed("bg",!0),he.exit().remove(),he.each(function(je){E._plots[je].bg=m.select(this)}),w=0;w<G.length;w++)P=(A=E._plots[G[w]]).xaxis,S=A.yaxis,A.bg&&void 0!==P._offset&&void 0!==S._offset&&A.bg.call(r.setRect,P._offset-z,S._offset-z,P._length+2*z,S._length+2*z).call(n.fill,E.plot_bgcolor).style("stroke-width",0);if(!E._hasOnlyLargeSploms)for(C in E._plots){P=(A=E._plots[C]).xaxis,S=A.yaxis;var me,Se,Me=A.clipId="clip"+E._uid+C+"plot",Ie=h.ensureSingleById(E._clips,"clipPath",Me,function(je){je.classed("plotclip",!0).append("rect")});A.clipRect=Ie.select("rect").attr({width:P._length,height:S._length}),r.setTranslate(A.plot,P._offset,S._offset),A._hasClipOnAxisFalse?(me=null,Se=Me):(me=Me,Se=null),r.setClipUrl(A.plot,me,k),A.layerClipId=Se}function Fe(je){return"M"+$+","+je+"H"+q}function Ne(je){return"M"+P._offset+","+je+"h"+P._length}function De(je){return"M"+je+","+le+"V"+ue}function $e(je){return"M"+je+","+S._offset+"v"+S._length}function Re(je,rt,ut){if(!je.showline||C!==je._mainSubplot)return"";if(!je._anchorAxis)return ut(je._mainLinePosition);var gt=rt(je._mainLinePosition);return je.mirror&&(gt+=rt(je._mainMirrorPosition)),gt}for(C in E._plots){S=(A=E._plots[C]).yaxis;var ze="M0,0";u(P=A.xaxis,C)&&(se=f(P,"left",S,N),$=P._offset-(se?z+se:0),ie=f(P,"right",S,N),q=P._offset+P._length+(ie?z+ie:0),te=V(P,S,"bottom"),ne=V(P,S,"top"),!(Ee=!P._anchorAxis||C!==P._mainSubplot)||"allticks"!==P.mirror&&"all"!==P.mirror||(P._linepositions[C]=[te,ne]),ze=Re(P,Fe,Ne),Ee&&P.showline&&("all"===P.mirror||"allticks"===P.mirror)&&(ze+=Fe(te)+Fe(ne)),A.xlines.style("stroke-width",P._lw+"px").call(n.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),A.xlines.attr("d",ze);var Ue="M0,0";u(S,C)&&(_e=f(S,"bottom",P,N),ue=S._offset+S._length+(_e?z:0),xe=f(S,"top",P,N),le=S._offset-(xe?z:0),de=V(S,P,"left"),be=V(S,P,"right"),!(Ee=!S._anchorAxis||C!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[C]=[de,be]),Ue=Re(S,De,$e),Ee&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(Ue+=De(de)+De(be)),A.ylines.style("stroke-width",S._lw+"px").call(n.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),A.ylines.attr("d",Ue)}return d.makeClipPaths(k),b.previousPromises(k)}function u(k,w){return(k.ticks||k.showline)&&(w===k._mainSubplot||"all"===k.mirror||"allticks"===k.mirror)}function x(k,w,C){if(!C.showline||!C._lw)return!1;if("all"===C.mirror||"allticks"===C.mirror)return!0;var A=C._anchorAxis;if(!A)return!1;var O=a.FROM_BL[w];return C.side===w?A.domain[O]===k.domain[O]:C.mirror&&A.domain[1-O]===k.domain[1-O]}function f(k,w,C,A){if(x(k,w,C))return C._lw;for(var O=0;O<A.length;O++){var P=A[O];if(P._mainAxis===C._mainAxis&&x(k,w,P))return P._lw}return 0}function T(k,w){var C=k.title,A=k._size,O=0;return"paper"===("start"===w?O=C.pad.l:"end"===w&&(O=-C.pad.r),C.xref)?A.l+A.w*C.x+O:k.width*C.x+O}function _(k,w){var C=k.title,A=k._size,O=0;return"0em"!==w&&w?w===a.CAP_SHIFT+"em"&&(O=C.pad.t):O=-C.pad.b,"auto"===C.y?A.t/2:"paper"===C.yref?A.t+A.h-A.h*C.y+O:k.height-k.height*C.y+O}K.layoutStyles=function(k){return h.syncOrAsync([b.doAutoMargin,g],k)},K.drawMainTitle=function(k){var P,S,w=k._fullLayout,C=(S="middle",h.isRightAnchor(P=w.title)?S="end":h.isLeftAnchor(P)&&(S="start"),S),A=function(O){var P=O.title,S="0em";return h.isTopAnchor(P)?S=a.CAP_SHIFT+"em":h.isMiddleAnchor(P)&&(S=a.MID_SHIFT+"em"),S}(w);o.draw(k,"gtitle",{propContainer:w,propName:"title.text",placeholder:w._dfltTitle.plot,attributes:{x:T(w,C),y:_(w,A),"text-anchor":C,dy:A}})},K.doTraceStyle=function(k){var w,C=k.calcdata,A=[];for(w=0;w<C.length;w++){var O=C[w],P=O[0]||{},S=P.trace||{},E=S._module||{},D=E.arraysToCalcdata;D&&D(O,S);var z=E.editStyle;z&&A.push({fn:z,cd0:P})}if(A.length){for(w=0;w<A.length;w++){var N=A[w];N.fn(k,N.cd0)}e(k),K.redrawReglTraces(k)}return b.style(k),v.getComponentMethod("legend","draw")(k),b.previousPromises(k)},K.doColorBars=function(k){return v.getComponentMethod("colorbar","draw")(k),b.previousPromises(k)},K.layoutReplot=function(k){var w=k.layout;return k.layout=void 0,v.call("_doPlot",k,"",w)},K.doLegend=function(k){return v.getComponentMethod("legend","draw")(k),b.previousPromises(k)},K.doTicksRelayout=function(k){return d.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(v.subplotsRegistry.splom.updateGrid(k),e(k),K.redrawReglTraces(k)),K.drawMainTitle(k),b.previousPromises(k)},K.doModeBar=function(k){var w=k._fullLayout;t.manage(k);for(var C=0;C<w._basePlotModules.length;C++){var A=w._basePlotModules[C].updateFx;A&&A(k)}return b.previousPromises(k)},K.doCamera=function(k){for(var w=k._fullLayout,C=w._subplots.gl3d,A=0;A<C.length;A++){var O=w[C[A]];O._scene.setViewport(O)}},K.drawData=function(k){var w=k._fullLayout;e(k);for(var C=w._basePlotModules,A=0;A<C.length;A++)C[A].plot(k);return K.redrawReglTraces(k),b.style(k),v.getComponentMethod("selections","draw")(k),v.getComponentMethod("shapes","draw")(k),v.getComponentMethod("annotations","draw")(k),v.getComponentMethod("images","draw")(k),w._replotting=!1,b.previousPromises(k)},K.redrawReglTraces=function(k){var w=k._fullLayout;if(w._has("regl")){var C,A,O=k._fullData,P=[],S=[];for(w._hasOnlyLargeSploms&&w._splomGrid.draw(),C=0;C<O.length;C++){var E=O[C];!0===E.visible&&0!==E._length&&("splom"===E.type?w._splomScenes[E.uid].draw():"scattergl"===E.type?h.pushUnique(P,E.xaxis+E.yaxis):"scatterpolargl"===E.type&&h.pushUnique(S,E.subplot))}for(C=0;C<P.length;C++)(A=w._plots[P[C]])._scene&&A._scene.draw();for(C=0;C<S.length;C++)(A=w[S[C]]._subplot)._scene&&A._scene.draw()}},K.doAutoRangeAndConstraints=function(k){for(var w,C=d.list(k,"",!0),A={},O=0;O<C.length;O++)if(!A[(w=C[O])._id]){A[w._id]=1,c(k,w),l(k,w);var P=w._matchGroup;if(P)for(var S in P){var E=d.getFromId(k,S);l(k,E,w.range),A[S]=1}}s(k)},K.finalDraw=function(k){v.getComponentMethod("rangeslider","draw")(k),v.getComponentMethod("rangeselector","draw")(k)},K.drawMarginPushers=function(k){v.getComponentMethod("legend","draw")(k),v.getComponentMethod("rangeselector","draw")(k),v.getComponentMethod("sliders","draw")(k),v.getComponentMethod("updatemenus","draw")(k),v.getComponentMethod("colorbar","draw")(k)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(y,Q,K){"use strict";var m=y("../lib"),v=m.isPlainObject,b=y("./plot_schema"),h=y("../plots/plots"),e=y("../plots/attributes"),n=y("./plot_template"),r=y("./plot_config").dfltConfig;function o(p,g){p=m.extendDeep({},p);var u,x,f=Object.keys(p).sort();function T(A,O,P){if(v(O)&&v(A))o(A,O);else if(Array.isArray(O)&&Array.isArray(A)){var S=n.arrayTemplater({_template:p},P);for(x=0;x<O.length;x++){var E=O[x],D=S.newItem(E)._template;D&&o(D,E)}var z=S.defaultItems();for(x=0;x<z.length;x++)O.push(z[x]._template);for(x=0;x<O.length;x++)delete O[x].templateitemname}}for(u=0;u<f.length;u++){var _=f[u],k=p[_];if(_ in g?T(k,g[_],_):g[_]=k,t(_)===_)for(var w in g){var C=t(w);w===C||C!==_||w in p||T(k,g[w],_)}}}function t(p){return p.replace(/[0-9]+$/,"")}function d(p,g,u,x,f){var T=f&&u(f);for(var _ in p){var k=p[_],w=s(p,_,x),C=s(p,_,f),A=u(C);if(!A){var O=t(_);O!==_&&(A=u(C=s(p,O,f)))}if(!(T&&T===A||!A||A._noTemplating||"data_array"===A.valType||A.arrayOk&&Array.isArray(k)))if(!A.valType&&v(k))d(k,g,u,w,C);else if(A._isLinkedToArray&&Array.isArray(k))for(var P=!1,S=0,E={},D=0;D<k.length;D++){var z=k[D];if(v(z)){var N=z.name;if(N)E[N]||(d(z,g,u,s(k,S,w),s(k,S,C)),S++,E[N]=1);else if(!P){var V=s(p,n.arrayDefaultKey(_),x),X=s(k,S,w);d(z,g,u,X,s(k,S,C));var J=m.nestedProperty(g,X);m.nestedProperty(g,V).set(J.get()),J.set(null),P=!0}}}else m.nestedProperty(g,w).set(k)}}function a(p,g){return b.getLayoutValObject(p,m.nestedProperty({},g).parts)}function i(p,g){return b.getTraceValObject(p,m.nestedProperty({},g).parts)}function s(p,g,u){return u?Array.isArray(p)?u+"["+g+"]":u+"."+g:g}function c(p){for(var g=0;g<p.length;g++)if(v(p[g]))return!0}function l(p){var g;switch(p.code){case"data":g="The template has no key data.";break;case"layout":g="The template has no key layout.";break;case"missing":g=p.path?"There are no templates for item "+p.path+" with name "+p.templateitemname:"There are no templates for trace "+p.index+", of type "+p.traceType+".";break;case"unused":g=p.path?"The template item at "+p.path+" was not used in constructing the plot.":p.dataCount?"Some of the templates of type "+p.traceType+" were not used. The template has "+p.templateCount+" traces, the data only has "+p.dataCount+" of this type.":"The template has "+p.templateCount+" traces of type "+p.traceType+" but there are none in the data.";break;case"reused":g="Some of the templates of type "+p.traceType+" were used more than once. The template has "+p.templateCount+" traces, the data has "+p.dataCount+" of this type."}return p.msg=g,p}K.makeTemplate=function(p){p=m.isPlainObject(p)?p:m.getGraphDiv(p),p=m.extendDeep({_context:r},{data:p.data,layout:p.layout}),h.supplyDefaults(p);var g=p.data||[],u=p.layout||{};u._basePlotModules=p._fullLayout._basePlotModules,u._modules=p._fullLayout._modules;var x={data:{},layout:{}};g.forEach(function(S){var E={};d(S,E,i.bind(null,S));var D=m.coerce(S,{},e,"type"),z=x.data[D];z||(z=x.data[D]=[]),z.push(E)}),d(u,x.layout,a.bind(null,u)),delete x.layout.template;var f=u.template;if(v(f)){var T,_,k,w,C,A,O=f.layout;v(O)&&o(O,x.layout);var P=f.data;if(v(P)){for(_ in x.data)if(k=P[_],Array.isArray(k)){for(A=(C=x.data[_]).length,w=k.length,T=0;T<A;T++)o(k[T%w],C[T]);for(T=A;T<w;T++)C.push(m.extendDeep({},k[T]))}for(_ in P)_ in x.data||(x.data[_]=m.extendDeep([],P[_]))}}return x},K.validateTemplate=function(p,g){var u=m.extendDeep({},{_context:r,data:p.data,layout:p.layout}),x=u.layout||{};v(g)||(g=x.template||{});var f=g.layout,T=g.data,_=[];u.layout=x,u.layout.template=g,h.supplyDefaults(u);var k=u._fullLayout,w=u._fullData,C={};if(v(f)?(function z(N,V){for(var X in N)if("_"!==X.charAt(0)&&v(N[X])){var J,G=t(X),Z=[];for(J=0;J<V.length;J++)Z.push(s(N,X,V[J])),G!==X&&Z.push(s(N,G,V[J]));for(J=0;J<Z.length;J++)C[Z[J]]=1;z(N[X],Z)}}(k,["layout"]),function z(N,V){for(var X in N)if(-1===X.indexOf("defaults")&&v(N[X])){var J=s(N,X,V);C[J]?z(N[X],J):_.push({code:"unused",path:J})}}(f,"layout")):_.push({code:"layout"}),v(T)){for(var A,O={},P=0;P<w.length;P++){var S=w[P];O[A=S.type]=(O[A]||0)+1,S._fullInput._template||_.push({code:"missing",index:S._fullInput.index,traceType:A})}for(A in T){var E=T[A].length,D=O[A]||0;E>D?_.push({code:"unused",traceType:A,templateCount:E,dataCount:D}):D>E&&_.push({code:"reused",traceType:A,templateCount:E,dataCount:D})}}else _.push({code:"data"});if(function z(N,V){for(var X in N)if("_"!==X.charAt(0)){var J=N[X],G=s(N,X,V);v(J)?(Array.isArray(N)&&!1===J._template&&J.templateitemname&&_.push({code:"missing",path:G,templateitemname:J.templateitemname}),z(J,G)):Array.isArray(J)&&c(J)&&z(J,G)}}({data:w,layout:k},""),_.length)return _.map(l)}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("./plot_api"),b=y("../plots/plots"),h=y("../lib"),e=y("../snapshot/helpers"),n=y("../snapshot/tosvg"),r=y("../snapshot/svgtoimg"),o=y("../version").version,t={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};Q.exports=function(d,a){var i,s,c,l;function p(D){return!(D in a)||h.validate(a[D],t[D])}if(a=a||{},h.isPlainObject(d)?(i=d.data||[],s=d.layout||{},c=d.config||{},l={}):(d=h.getGraphDiv(d),i=h.extendDeep([],d.data),s=h.extendDeep({},d.layout),c=d._context,l=d._fullLayout||{}),!p("width")&&null!==a.width||!p("height")&&null!==a.height)throw new Error("Height and width should be pixel values.");if(!p("format"))throw new Error("Export format is not "+h.join2(t.format.values,", "," or ")+".");var g={};function u(D,z){return h.coerce(a,g,t,D,z)}var x=u("format"),f=u("width"),T=u("height"),_=u("scale"),k=u("setBackground"),w=u("imageDataOnly"),C=document.createElement("div");C.style.position="absolute",C.style.left="-5000px",document.body.appendChild(C);var A=h.extendFlat({},s);f?A.width=f:null===a.width&&m(l.width)&&(A.width=l.width),T?A.height=T:null===a.height&&m(l.height)&&(A.height=l.height);var O=h.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:k}),P=e.getRedrawFunc(C);function S(){return new Promise(function(D){setTimeout(D,e.getDelay(C._fullLayout))})}function E(){return new Promise(function(D,z){var N=n(C,x,_),V=C._fullLayout.width,X=C._fullLayout.height;function J(){v.purge(C),document.body.removeChild(C)}if("full-json"===x){var G=b.graphJson(C,!1,"keepdata","object",!0,!0);return G.version=o,G=JSON.stringify(G),J(),D(w?G:e.encodeJSON(G))}if(J(),"svg"===x)return D(w?N:e.encodeSVG(N));var Z=document.createElement("canvas");Z.id=h.randstr(),r({format:x,width:V,height:X,scale:_,canvas:Z,svg:N,promise:!0}).then(D).catch(z)})}return new Promise(function(D,z){v.newPlot(C,i,A,O).then(P).then(S).then(E).then(function(N){var V;D((V=N,w?V.replace(e.IMAGE_URL_PREFIX,""):V))}).catch(function(N){z(N)})})}},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("../plots/plots"),b=y("./plot_schema"),h=y("./plot_config").dfltConfig,e=m.isPlainObject,n=Array.isArray,r=m.isArrayOrTypedArray;function o(g,u,x,f,T,_){_=_||[];for(var k=Object.keys(g),w=0;w<k.length;w++){var C=k[w];if("transforms"!==C){var A=_.slice();A.push(C);var O=g[C],P=u[C],S=c(x,C),E=(S||{}).valType,D="info_array"===E,z="colorscale"===E,N=(S||{}).items;if(s(x,C))if(e(O)&&e(P)&&"any"!==E)o(O,P,S,f,T,A);else if(D&&n(O)){O.length>P.length&&f.push(i("unused",T,A.concat(P.length)));var V,X,G,Z,re=P.length,j=Array.isArray(N);if(j&&(re=Math.min(re,N.length)),2===S.dimensions)for(X=0;X<re;X++)if(n(O[X])){O[X].length>P[X].length&&f.push(i("unused",T,A.concat(X,P[X].length)));var B=P[X].length;for(V=0;V<(j?Math.min(B,N[X].length):B);V++)Z=P[X][V],m.validate(G=O[X][V],j?N[X][V]:N)?Z!==G&&Z!==+G&&f.push(i("dynamic",T,A.concat(X,V),G,Z)):f.push(i("value",T,A.concat(X,V),G))}else f.push(i("array",T,A.concat(X),O[X]));else for(X=0;X<re;X++)Z=P[X],m.validate(G=O[X],j?N[X]:N)?Z!==G&&Z!==+G&&f.push(i("dynamic",T,A.concat(X),G,Z)):f.push(i("value",T,A.concat(X),G))}else if(S.items&&!D&&n(O)){var H,ee,U=N[Object.keys(N)[0]],$=[];for(H=0;H<P.length;H++){var q=P[H]._index||H;if((ee=A.slice()).push(q),e(O[q])&&e(P[H])){$.push(q);var te=O[q],ne=P[H];e(te)&&!1!==te.visible&&!1===ne.visible?f.push(i("invisible",T,ee)):o(te,ne,U,f,T,ee)}}for(H=0;H<O.length;H++)(ee=A.slice()).push(H),e(O[H])?-1===$.indexOf(H)&&f.push(i("unused",T,ee)):f.push(i("object",T,ee,O[H]))}else!e(O)&&e(P)?f.push(i("object",T,A,O)):r(O)||!r(P)||D||z?C in u?m.validate(O,S)?"enumerated"===S.valType&&(S.coerceNumber&&O!==+P||O!==P)&&f.push(i("dynamic",T,A,O,P)):f.push(i("value",T,A,O)):f.push(i("unused",T,A,O)):f.push(i("array",T,A,O));else f.push(i("schema",T,A))}}return f}function t(g,u){for(var x=g.layout.layoutAttributes,f=0;f<u.length;f++){var T=u[f],_=g.traces[T.type],k=_.layoutAttributes;k&&m.extendFlat(T.subplot?x[_.attributes.subplot.dflt]:x,k)}return x}Q.exports=function(g,u){void 0===g&&(g=[]),void 0===u&&(u={});var x,f,T=b.get(),_=[],k={_context:m.extendFlat({},h)};n(g)?(k.data=m.extendDeep([],g),x=g):(k.data=[],x=[],_.push(i("array","data"))),e(u)?(k.layout=m.extendDeep({},u),f=u):(k.layout={},f={},arguments.length>1&&_.push(i("object","layout"))),v.supplyDefaults(k);for(var w=k._fullData,C=x.length,A=0;A<C;A++){var O=x[A],P=["data",A];if(e(O)){var S=w[A],E=S.type,D=T.traces[E].attributes;D.type={valType:"enumerated",values:[E]},!1===S.visible&&!1!==O.visible&&_.push(i("invisible",P)),o(O,S,D,_,P);var z=O.transforms,N=S.transforms;if(z){n(z)||_.push(i("array",P,["transforms"])),P.push("transforms");for(var V=0;V<z.length;V++){var X=["transforms",V],J=z[V].type;if(e(z[V])){var G=T.transforms[J]?T.transforms[J].attributes:{};G.type={valType:"enumerated",values:Object.keys(T.transforms)},o(z[V],N[V],G,_,P,X)}else _.push(i("object",P,X))}}}else _.push(i("object",P))}return o(f,k._fullLayout,t(T,w),_,"layout"),0===_.length?void 0:_};var d={object:function(g,u){return("layout"===g&&""===u?"The layout argument":"data"===g[0]&&""===u?"Trace "+g[1]+" in the data argument":a(g)+"key "+u)+" must be linked to an object container"},array:function(g,u){return("data"===g?"The data argument":a(g)+"key "+u)+" must be linked to an array container"},schema:function(g,u){return a(g)+"key "+u+" is not part of the schema"},unused:function(g,u,x){var f=e(x)?"container":"key";return a(g)+f+" "+u+" did not get coerced"},dynamic:function(g,u,x,f){return[a(g)+"key",u,"(set to '"+x+"')","got reset to","'"+f+"'","during defaults."].join(" ")},invisible:function(g,u){return(u?a(g)+"item "+u:"Trace "+g[1])+" got defaulted to be not visible"},value:function(g,u,x){return[a(g)+"key "+u,"is set to an invalid value ("+x+")"].join(" ")}};function a(g){return n(g)?"In data trace "+g[1]+", ":"In "+g+", "}function i(g,u,x,f,T){var _,k;x=x||"",n(u)?(_=u[0],k=u[1]):(_=u,k=null);var w=function(A){if(!n(A))return String(A);for(var O="",P=0;P<A.length;P++){var S=A[P];"number"==typeof S?O=O.substr(0,O.length-1)+"["+S+"]":O+=S,P<A.length-1&&(O+=".")}return O}(x),C=d[g](u,w,f,T);return m.log(C),{code:g,container:_,trace:k,path:x,astr:w,msg:C}}function s(g,u){var x=p(u),f=x.keyMinusId;return!!(f in g&&g[f]._isSubplotObj&&x.id)||u in g}function c(g,u){return u in g?g[u]:g[p(u).keyMinusId]}var l=m.counterRegex("([a-z]+)");function p(g){var u=g.match(l);return{keyMinusId:u&&u[1],id:u&&u[2]}}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(y,Q,K){"use strict";Q.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("../plot_api/plot_template");Q.exports=function(b,h,e){var n,r,o=e.name,t=e.inclusionAttr||"visible",d=h[o],a=m.isArrayOrTypedArray(b[o])?b[o]:[],i=h[o]=[],s=v.arrayTemplater(h,o,t);for(n=0;n<a.length;n++){var c=a[n];m.isPlainObject(c)?r=s.newItem(c):(r=s.newItem({}))[t]=!1,r._index=n,!1!==r[t]&&e.handleItemDefaults(c,r,h,e),i.push(r)}var l=s.defaultItems();for(n=0;n<l.length;n++)(r=l[n])._index=i.length,e.handleItemDefaults({},r,h,e,{}),i.push(r);if(m.isArrayOrTypedArray(d)){var p=Math.min(d.length,i.length);for(n=0;n<p;n++)m.relinkPrivateKeys(i[n],d[n])}return i}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(y,Q,K){"use strict";var m=y("./font_attributes"),v=y("../components/fx/attributes");Q.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:m({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:v.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=v.dateTime2ms,h=v.incrementMonth,e=y("../../constants/numerical").ONEAVGMONTH;Q.exports=function(n,r,o,t){if("date"!==r.type)return{vals:t};var d=n[o+"periodalignment"];if(!d)return{vals:t};var a,i=n[o+"period"];if(m(i)){if((i=+i)<=0)return{vals:t}}else if("string"==typeof i&&"M"===i.charAt(0)){var s=+i.substring(1);if(!(s>0&&Math.round(s)===s))return{vals:t};a=s}for(var c=r.calendar,l="start"===d,p="end"===d,u=b(n[o+"period0"],c)||0,x=[],f=[],T=[],_=t.length,k=0;k<_;k++){var w,C,A,O=t[k];if(a){for(w=Math.round((O-u)/(a*e)),A=h(u,a*w,c);A>O;)A=h(A,-a,c);for(;A<=O;)A=h(A,a,c);C=h(A,-a,c)}else{for(A=u+(w=Math.round((O-u)/i))*i;A>O;)A-=i;for(;A<=O;)A+=i;C=A-i}x[k]=l?C:p?A:(C+A)/2,f[k]=C,T[k]=A}return{vals:x,starts:f,ends:T}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(y,Q,K){"use strict";Q.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=y("../../lib"),h=y("../../constants/numerical").FP_SAFE,e=y("../../registry"),n=y("../../components/drawing"),r=y("./axis_ids"),o=r.getFromId,t=r.isLinked;function d(f,T){var _,k,w=[],C=f._fullLayout,A=i(C,T,0),O=i(C,T,1),P=s(f,T),S=P.min,E=P.max;if(0===S.length||0===E.length)return b.simpleMap(T.range,T.r2l);var D=S[0].val,z=E[0].val;for(_=1;_<S.length&&D===z;_++)D=Math.min(D,S[_].val);for(_=1;_<E.length&&D===z;_++)z=Math.max(z,E[_].val);var N=!1;if(T.range){var V=b.simpleMap(T.range,T.r2l);N=V[1]<V[0]}"reversed"===T.autorange&&(N=!0,T.autorange=!0);var X,J,G,Z,re,j,B=T.rangemode,H="tozero"===B,ee="nonnegative"===B,U=T._length,$=U/10,q=0;for(_=0;_<S.length;_++)for(X=S[_],k=0;k<E.length;k++)(j=(J=E[k]).val-X.val-a(T,X.val,J.val))>0&&((re=U-A(X)-O(J))>$?j/re>q&&(G=X,Z=J,q=j/re):j/U>q&&(G={val:X.val,nopad:1},Z={val:J.val,nopad:1},q=j/U));if(D===z){var te=D-1,ne=D+1;if(H)if(0===D)w=[0,1];else{var se=(D>0?E:S).reduce(function(ue,le){return Math.max(ue,O(le))},0),ie=D/(1-Math.min(.5,se/U));w=D>0?[0,ie]:[ie,0]}else w=ee?[Math.max(0,te),Math.max(1,ne)]:[te,ne]}else H?(G.val>=0&&(G={val:0,nopad:1}),Z.val<=0&&(Z={val:0,nopad:1})):ee&&(G.val-q*A(G)<0&&(G={val:0,nopad:1}),Z.val<=0&&(Z={val:1,nopad:1})),q=(Z.val-G.val-a(T,X.val,J.val))/(U-A(G)-O(Z)),w=[G.val-q*A(G),Z.val+q*O(Z)];return N&&w.reverse(),b.simpleMap(w,T.l2r||Number)}function a(f,T,_){var k=0;if(f.rangebreaks)for(var w=f.locateBreaks(T,_),C=0;C<w.length;C++){var A=w[C];k+=A.max-A.min}return k}function i(f,T,_){var k=.05*T._length,w=T._anchorAxis||{};if(-1!==(T.ticklabelposition||"").indexOf("inside")||-1!==(w.ticklabelposition||"").indexOf("inside")){var C="reversed"===T.autorange;if(!C){var A=b.simpleMap(T.range,T.r2l);C=A[1]<A[0]}C&&(_=!_)}var O=0;return t(f,T._id)||(O=function(P,S,E){var D=0,z="x"===S._id.charAt(0);for(var N in P._plots){var V=P._plots[N];if(S._id===V.xaxis._id||S._id===V.yaxis._id){var X=(z?V.yaxis:V.xaxis)||{};if(-1!==(X.ticklabelposition||"").indexOf("inside")&&(!E&&("left"===X.side||"bottom"===X.side)||E&&("top"===X.side||"right"===X.side))){if(X._vals){var J=b.deg2rad(X._tickAngles[X._id+"tick"]||0),G=Math.abs(Math.cos(J)),Z=Math.abs(Math.sin(J));X._vals[0].bb||X._selections[X._id+"tick"].each(function(U){var $=m.select(this);$.select(".text-math-group").empty()&&(U.bb=n.bBox($.node()))});for(var j=0;j<X._vals.length;j++){var B=X._vals[j].bb;if(B){var H=6+B.width,ee=6+B.height;D=Math.max(D,z?Math.max(H*G,ee*Z):Math.max(ee*G,H*Z))}}}"inside"===X.ticks&&"inside"===X.ticklabelposition&&(D+=X.ticklen||0)}}}return D}(f,T,_)),k=Math.max(O,k),"domain"===T.constrain&&T._inputDomain&&(k*=(T._inputDomain[1]-T._inputDomain[0])/(T.domain[1]-T.domain[0])),function(P){return P.nopad?0:P.pad+(P.extrapad?k:O)}}function s(f,T,_){var k,w,C,A=T._id,P=f._fullLayout,S=[],E=[];function D(J,G){for(k=0;k<G.length;k++){var Z=J[G[k]],re=(Z._extremes||{})[A];if(!0===Z.visible&&re){for(w=0;w<re.min.length;w++)c(S,(C=re.min[w]).val,C.pad,{extrapad:C.extrapad});for(w=0;w<re.max.length;w++)l(E,(C=re.max[w]).val,C.pad,{extrapad:C.extrapad})}}}if(D(f._fullData,T._traceIndices),D(P.annotations||[],T._annIndices||[]),D(P.shapes||[],T._shapeIndices||[]),T._matchGroup&&!_)for(var z in T._matchGroup)if(z!==T._id){var N=o(f,z),V=s(f,N,!0),X=T._length/N._length;for(w=0;w<V.min.length;w++)c(S,(C=V.min[w]).val,C.pad*X,{extrapad:C.extrapad});for(w=0;w<V.max.length;w++)l(E,(C=V.max[w]).val,C.pad*X,{extrapad:C.extrapad})}return{min:S,max:E}}function c(f,T,_,k){p(f,T,_,k,u)}function l(f,T,_,k){p(f,T,_,k,x)}function p(f,T,_,k,w){for(var C=k.tozero,A=k.extrapad,O=!0,P=0;P<f.length&&O;P++){var S=f[P];if(w(S.val,T)&&S.pad>=_&&(S.extrapad||!A)){O=!1;break}w(T,S.val)&&S.pad<=_&&(A||!S.extrapad)&&(f.splice(P,1),P--)}if(O){var E=C&&0===T;f.push({val:T,pad:E?0:_,extrapad:!E&&A})}}function g(f){return v(f)&&Math.abs(f)<h}function u(f,T){return f<=T}function x(f,T){return f>=T}Q.exports={getAutoRange:d,makePadFn:i,doAutoRange:function(f,T,_){if(T.setScale(),T.autorange){T.range=_?_.slice():d(f,T),T._r=T.range.slice(),T._rl=b.simpleMap(T._r,T.r2l);var k=T._input,w={};w[T._attr+".range"]=T.range,w[T._attr+".autorange"]=T.autorange,e.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,w),k.range=T.range.slice(),k.autorange=T.autorange}var C=T._anchorAxis;if(C&&C.rangeslider){var A=C.rangeslider[T._name];A&&"auto"===A.rangemode&&(A.range=d(f,T)),C._input.rangeslider[T._name]=b.extendFlat({},A)}},findExtremes:function(f,T,_){_||(_={}),f._m||f.setScale();var k,w,C,A,O,P,S,E,D,z=[],N=[],V=T.length,X=_.padded||!1,J=_.tozero&&("linear"===f.type||"-"===f.type),G="log"===f.type,Z=!1,re=_.vpadLinearized||!1;function j(ne){if(Array.isArray(ne))return Z=!0,function(ie){return Math.max(Number(ne[ie]||0),0)};var se=Math.max(Number(ne||0),0);return function(){return se}}var B=j((f._m>0?_.ppadplus:_.ppadminus)||_.ppad||0),H=j((f._m>0?_.ppadminus:_.ppadplus)||_.ppad||0),ee=j(_.vpadplus||_.vpad),U=j(_.vpadminus||_.vpad);if(!Z){if(E=1/0,D=-1/0,G)for(k=0;k<V;k++)(w=T[k])<E&&w>0&&(E=w),w>D&&w<h&&(D=w);else for(k=0;k<V;k++)(w=T[k])<E&&w>-h&&(E=w),w>D&&w<h&&(D=w);T=[E,D],V=2}var $={tozero:J,extrapad:X};function q(ne){v(C=T[ne])&&(P=B(ne),S=H(ne),re?(A=f.c2l(C)-U(ne),O=f.c2l(C)+ee(ne)):(E=C-U(ne),D=C+ee(ne),G&&E<D/10&&(E=D/10),A=f.c2l(E),O=f.c2l(D)),J&&(A=Math.min(0,A),O=Math.max(0,O)),g(A)&&c(z,A,S,$),g(O)&&l(N,O,P,$))}var te=Math.min(6,V);for(k=0;k<te;k++)q(k);for(k=V-1;k>=te;k--)q(k);return{min:z,max:N,opts:_}},concatExtremes:s}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=y("../../plots/plots"),h=y("../../registry"),e=y("../../lib"),n=e.strTranslate,r=y("../../lib/svg_text_utils"),o=y("../../components/titles"),t=y("../../components/color"),d=y("../../components/drawing"),a=y("./layout_attributes"),i=y("./clean_ticks"),s=y("../../constants/numerical"),c=s.ONEMAXYEAR,l=s.ONEAVGYEAR,p=s.ONEMINYEAR,g=s.ONEMAXQUARTER,u=s.ONEAVGQUARTER,x=s.ONEMINQUARTER,f=s.ONEMAXMONTH,T=s.ONEAVGMONTH,_=s.ONEMINMONTH,k=s.ONEWEEK,w=s.ONEDAY,C=w/2,A=s.ONEHOUR,O=s.ONEMIN,P=s.ONESEC,S=s.MINUS_SIGN,E=s.BADNUM,D={K:"zeroline"},z={K:"gridline",L:"path"},N={K:"minor-gridline",L:"path"},V={K:"tick",L:"path"},X={K:"tick",L:"text"},J={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},G=y("../../constants/alignment"),Z=G.MID_SHIFT,re=G.CAP_SHIFT,j=G.LINE_SPACING,B=G.OPPOSITE_SIDE,H=Q.exports={};H.setConvert=y("./set_convert");var ee=y("./axis_autotype"),U=y("./axis_ids"),$=U.idSort,q=U.isLinked;H.id2name=U.id2name,H.name2id=U.name2id,H.cleanId=U.cleanId,H.list=U.list,H.listIds=U.listIds,H.getFromId=U.getFromId,H.getFromTrace=U.getFromTrace;var te=y("./autorange");function ne(pe){var we=1e-4*(pe[1]-pe[0]);return[pe[0]-we,pe[1]+we]}H.getAutoRange=te.getAutoRange,H.findExtremes=te.findExtremes,H.coerceRef=function(pe,we,Be,We,Ke,Ye){var ft=We.charAt(We.length-1),ct=Be._fullLayout._subplots[ft+"axis"],St=We+"ref",Ft={};return Ke||(Ke=ct[0]||("string"==typeof Ye?Ye:Ye[0])),Ye||(Ye=Ke),ct=ct.concat(ct.map(function(at){return at+" domain"})),Ft[St]={valType:"enumerated",values:ct.concat(Ye?"string"==typeof Ye?[Ye]:Ye:[]),dflt:Ke},e.coerce(pe,we,Ft,St)},H.getRefType=function(pe){return void 0===pe?pe:"paper"===pe?"paper":"pixel"===pe?"pixel":/( domain)$/.test(pe)?"domain":"range"},H.coercePosition=function(pe,we,Be,We,Ke,Ye){var ft,ct;if("range"!==H.getRefType(We))ft=e.ensureNumber,ct=Be(Ke,Ye);else{var St=H.getFromId(we,We);ct=Be(Ke,Ye=St.fraction2r(Ye)),ft=St.cleanPos}pe[Ke]=ft(ct)},H.cleanPosition=function(pe,we,Be){return("paper"===Be||"pixel"===Be?e.ensureNumber:H.getFromId(we,Be).cleanPos)(pe)},H.redrawComponents=function(pe,we){we=we||H.listIds(pe);var Be=pe._fullLayout;function We(Ke,Ye,ft,ct){for(var St=h.getComponentMethod(Ke,Ye),Ft={},at=0;at<we.length;at++)for(var mt=Be[H.id2name(we[at])][ft],qt=0;qt<mt.length;qt++){var Et=mt[qt];if(!Ft[Et]&&(St(pe,Et),Ft[Et]=1,ct))return}}We("annotations","drawOne","_annIndices"),We("shapes","drawOne","_shapeIndices"),We("images","draw","_imgIndices",!0),We("selections","drawOne","_selectionIndices")};var se=H.getDataConversions=function(pe,we,Be,We){var Ke,Ye="x"===Be||"y"===Be||"z"===Be?Be:We;if(Array.isArray(Ye)){if(Ke={type:ee(We,void 0,{autotypenumbers:pe._fullLayout.autotypenumbers}),_categories:[]},H.setConvert(Ke),"category"===Ke.type)for(var ft=0;ft<We.length;ft++)Ke.d2c(We[ft])}else Ke=H.getFromTrace(pe,we,Ye);return Ke?{d2c:Ke.d2c,c2d:Ke.c2d}:"ids"===Ye?{d2c:ue,c2d:ue}:{d2c:ie,c2d:ie}};function ie(pe){return+pe}function ue(pe){return String(pe)}function le(pe,we){return Math.abs((pe/we+.5)%1-.5)<.001}function de(pe,we){return Math.abs(pe/we-1)<.001}function be(pe){return+pe.substring(1)}function _e(pe){var we=ne(e.simpleMap(pe.range,pe.r2l)),Be=Math.min(we[0],we[1]),We=Math.max(we[0],we[1]),Ke="category"===pe.type?pe.d2l_noadd:pe.d2l;"log"===pe.type&&"L"!==String(pe.dtick).charAt(0)&&(pe.dtick="L"+Math.pow(10,Math.floor(Math.min(pe.range[0],pe.range[1]))-1));for(var Ye=[],ft=0;ft<=1;ft++)if(!ft||pe.minor){var ct=ft?pe.minor.tickvals:pe.tickvals,St=ft?[]:pe.ticktext;if(ct){Array.isArray(St)||(St=[]);for(var Ft=0;Ft<ct.length;Ft++){var at=Ke(ct[Ft]);if(at>Be&&at<We){var mt=void 0===St[Ft]?H.tickText(pe,at):De(pe,at,String(St[Ft]));ft&&(mt.minor=!0,mt.text=""),Ye.push(mt)}}}}return pe.rangebreaks&&(Ye=Ye.filter(function(qt){return pe.maskBreaks(qt.x)!==E})),Ye}H.getDataToCoordFunc=function(pe,we,Be,We){return se(pe,we,Be,We).d2c},H.counterLetter=function(pe){var we=pe.charAt(0);return"x"===we?"y":"y"===we?"x":void 0},H.minDtick=function(pe,we,Be,We){-1===["log","category","multicategory"].indexOf(pe.type)&&We?void 0===pe._minDtick?(pe._minDtick=we,pe._forceTick0=Be):pe._minDtick&&((pe._minDtick/we+1e-6)%1<2e-6&&((Be-pe._forceTick0)/we%1+1.000001)%1<2e-6?(pe._minDtick=we,pe._forceTick0=Be):((we/pe._minDtick+1e-6)%1>2e-6||((Be-pe._forceTick0)/pe._minDtick%1+1.000001)%1>2e-6)&&(pe._minDtick=0)):pe._minDtick=0},H.saveRangeInitial=function(pe,we){for(var Be=H.list(pe,"",!0),We=!1,Ke=0;Ke<Be.length;Ke++){var Ye=Be[Ke],ft=void 0===Ye._rangeInitial;(ft&&!1===Ye.autorange||we&&(ft||Ye.range[0]!==Ye._rangeInitial[0]||Ye.range[1]!==Ye._rangeInitial[1]))&&(Ye._rangeInitial=Ye.range.slice(),We=!0)}return We},H.saveShowSpikeInitial=function(pe,we){for(var Be=H.list(pe,"",!0),We=!1,Ke="on",Ye=0;Ye<Be.length;Ye++){var ft=Be[Ye],ct=void 0===ft._showSpikeInitial;(ct||we&&(ct||ft.showspikes!==ft._showspikes))&&(ft._showSpikeInitial=ft.showspikes,We=!0),"on"!==Ke||ft.showspikes||(Ke="off")}return pe._fullLayout._cartesianSpikesEnabled=Ke,We},H.autoBin=function(pe,we,Be,We,Ke,Ye){var ft,ct=e.aggNums(Math.min,null,pe),St=e.aggNums(Math.max,null,pe);if("category"===we.type||"multicategory"===we.type)return{start:ct-.5,end:St+.5,size:Math.max(1,Math.round(Ye)||1),_dataSpan:St-ct};if(Ke||(Ke=we.calendar),ft="log"===we.type?{type:"linear",range:[ct,St]}:{type:we.type,range:e.simpleMap([ct,St],we.c2r,0,Ke),calendar:Ke},H.setConvert(ft),Ye=Ye&&i.dtick(Ye,ft.type))ft.dtick=Ye,ft.tick0=i.tick0(void 0,ft.type,Ke);else{var Ft;if(Be)Ft=(St-ct)/Be;else{var at=e.distinctVals(pe),mt=Math.pow(10,Math.floor(Math.log(at.minDiff)/Math.LN10)),qt=mt*e.roundUp(at.minDiff/mt,[.9,1.9,4.9,9.9],!0);Ft=Math.max(qt,2*e.stdev(pe)/Math.pow(pe.length,We?.25:.4)),v(Ft)||(Ft=1)}H.autoTicks(ft,Ft)}var Et,Dt=ft.dtick,Le=H.tickIncrement(H.tickFirst(ft),Dt,"reverse",Ke);if("number"==typeof Dt)Et=(Le=function(Xe,ot,dt,Lt,Ut){var $t=0,Wt=0,wr=0,Rr=0;function br(_r){return(1+100*(_r-Xe)/dt.dtick)%100<2}for(var nr=0;nr<ot.length;nr++)ot[nr]%1==0?wr++:v(ot[nr])||Rr++,br(ot[nr])&&$t++,br(ot[nr]+dt.dtick/2)&&Wt++;var lr=ot.length-Rr;if(wr===lr&&"date"!==dt.type)dt.dtick<1?Xe=Lt-.5*dt.dtick:(Xe-=.5)+dt.dtick<Lt&&(Xe+=dt.dtick);else if(Wt<.1*lr&&($t>.3*lr||br(Lt)||br(Ut))){var sr=dt.dtick/2;Xe+=Xe+sr<Lt?sr:-sr}return Xe}(Le,pe,ft,ct,St))+(1+Math.floor((St-Le)/Dt))*Dt;else for("M"===ft.dtick.charAt(0)&&(Le=function(Xe,ot,dt,Lt,Ut){var $t=e.findExactDates(ot,Ut);if($t.exactDays>.8){var Wt=Number(dt.substr(1));$t.exactYears>.8&&Wt%12==0?Xe=H.tickIncrement(Xe,"M6","reverse")+1.5*w:$t.exactMonths>.8?Xe=H.tickIncrement(Xe,"M1","reverse")+15.5*w:Xe-=C;var wr=H.tickIncrement(Xe,dt);if(wr<=Lt)return wr}return Xe}(Le,pe,Dt,ct,Ke)),Et=Le;Et<=St;)Et=H.tickIncrement(Et,Dt,!1,Ke);return{start:we.c2r(Le,0,Ke),end:we.c2r(Et,0,Ke),size:Dt,_dataSpan:St-ct}},H.prepMinorTicks=function(pe,we,Be){if(!we.minor.dtick){delete pe.dtick;var We,Ke=we.dtick&&v(we._tmin);if(Ke){var Ye=H.tickIncrement(we._tmin,we.dtick,!0);We=[we._tmin,.99*Ye+.01*we._tmin]}else{var ft=e.simpleMap(we.range,we.r2l);We=[ft[0],.8*ft[0]+.2*ft[1]]}if(pe.range=e.simpleMap(We,we.l2r),pe._isMinor=!0,H.prepTicks(pe,Be),Ke){var ct=v(we.dtick),St=v(pe.dtick),Ft=ct?we.dtick:+we.dtick.substring(1),at=St?pe.dtick:+pe.dtick.substring(1);ct&&St?le(Ft,at)?Ft===2*k&&at===2*w&&(pe.dtick=k):pe.dtick=Ft===2*k&&at===3*w?k:Ft!==k||(we._input.minor||{}).nticks?de(Ft/at,2.5)?Ft/2:Ft:w:"M"===String(we.dtick).charAt(0)?St?pe.dtick="M1":le(Ft,at)?Ft>=12&&2===at&&(pe.dtick="M3"):pe.dtick=we.dtick:"L"===String(pe.dtick).charAt(0)?"L"===String(we.dtick).charAt(0)?le(Ft,at)||(pe.dtick=de(Ft/at,2.5)?we.dtick/2:we.dtick):pe.dtick="D1":"D2"===pe.dtick&&+we.dtick>1&&(pe.dtick=1)}pe.range=we.range}void 0===we.minor._tick0Init&&(pe.tick0=we.tick0)},H.prepTicks=function(pe,we){var Be=e.simpleMap(pe.range,pe.r2l,void 0,void 0,we);if("auto"===pe.tickmode||!pe.dtick){var We,Ke=pe.nticks;Ke||("category"===pe.type||"multicategory"===pe.type?(We=pe.tickfont?e.bigFont(pe.tickfont.size||12):15,Ke=pe._length/We):(We="y"===pe._id.charAt(0)?40:80,Ke=e.constrain(pe._length/We,4,9)+1),"radialaxis"===pe._name&&(Ke*=2)),pe.minor&&"array"!==pe.minor.tickmode||"array"===pe.tickmode&&(Ke*=100),pe._roughDTick=Math.abs(Be[1]-Be[0])/Ke,H.autoTicks(pe,pe._roughDTick),pe._minDtick>0&&pe.dtick<2*pe._minDtick&&(pe.dtick=pe._minDtick,pe.tick0=pe.l2r(pe._forceTick0))}"period"===pe.ticklabelmode&&function(Ye){var ft;function ct(){return!(v(Ye.dtick)||"M"!==Ye.dtick.charAt(0))}var St=ct(),Ft=H.getTickFormat(Ye);if(Ft){var at=Ye._dtickInit!==Ye.dtick;/%[fLQsSMX]/.test(Ft)||(/%[HI]/.test(Ft)?(ft=A,at&&!St&&Ye.dtick<A&&(Ye.dtick=A)):/%p/.test(Ft)?(ft=C,at&&!St&&Ye.dtick<C&&(Ye.dtick=C)):/%[Aadejuwx]/.test(Ft)?(ft=w,at&&!St&&Ye.dtick<w&&(Ye.dtick=w)):/%[UVW]/.test(Ft)?(ft=k,at&&!St&&Ye.dtick<k&&(Ye.dtick=k)):/%[Bbm]/.test(Ft)?(ft=T,at&&(St?be(Ye.dtick)<1:Ye.dtick<_)&&(Ye.dtick="M1")):/%[q]/.test(Ft)?(ft=u,at&&(St?be(Ye.dtick)<3:Ye.dtick<x)&&(Ye.dtick="M3")):/%[Yy]/.test(Ft)&&(ft=l,at&&(St?be(Ye.dtick)<12:Ye.dtick<p)&&(Ye.dtick="M12")))}(St=ct())&&Ye.tick0===Ye._dowTick0&&(Ye.tick0=Ye._rawTick0),Ye._definedDelta=ft}(pe),pe.tick0||(pe.tick0="date"===pe.type?"2000-01-01":0),"date"===pe.type&&pe.dtick<.1&&(pe.dtick=.1),Ne(pe)},H.calcTicks=function(pe,we){for(var Be,We,Ke=pe.type,Ye=pe.calendar,ft=pe.ticklabelstep,ct="period"===pe.ticklabelmode,St=e.simpleMap(pe.range,pe.r2l,void 0,void 0,we),Ft=St[1]<St[0],at=Math.min(St[0],St[1]),mt=Math.max(St[0],St[1]),qt=Math.max(1e3,pe._length||0),Et=[],Dt=[],Le=[],Xe=[],ot=pe.minor&&(pe.minor.ticks||pe.minor.showgrid),dt=1;dt>=(ot?0:1);dt--){var Lt=!dt;dt?(pe._dtickInit=pe.dtick,pe._tick0Init=pe.tick0):(pe.minor._dtickInit=pe.minor.dtick,pe.minor._tick0Init=pe.minor.tick0);var Ut=dt?pe:e.extendFlat({},pe,pe.minor);if(Lt?H.prepMinorTicks(Ut,pe,we):H.prepTicks(Ut,we),"array"!==Ut.tickmode){var $t=ne(St),Wt=$t[0],wr=$t[1],Rr=v(Ut.dtick),br="log"===Ke&&!(Rr||"L"===Ut.dtick.charAt(0)),nr=H.tickFirst(Ut,we);if(dt){if(pe._tmin=nr,nr<Wt!==Ft)break;"category"!==Ke&&"multicategory"!==Ke||(wr=Ft?Math.max(-.5,wr):Math.min(pe._categories.length-.5,wr))}var lr,sr,_r=null,Ar=nr;dt&&(Rr?sr=pe.dtick:"date"===Ke?"string"==typeof pe.dtick&&"M"===pe.dtick.charAt(0)&&(sr=T*pe.dtick.substring(1)):sr=pe._roughDTick,lr=Math.round((pe.r2l(Ar)-pe.r2l(pe.tick0))/sr)-1);var zt=Ut.dtick;for(Ut.rangebreaks&&Ut._tick0Init!==Ut.tick0&&(Ar=Xt(Ar,pe),Ft||(Ar=H.tickIncrement(Ar,zt,!Ft,Ye))),dt&&ct&&(Ar=H.tickIncrement(Ar,zt,!Ft,Ye),lr--);Ft?Ar>=wr:Ar<=wr;Ar=H.tickIncrement(Ar,zt,Ft,Ye)){if(dt&&lr++,Ut.rangebreaks&&!Ft){if(Ar<Wt)continue;if(Ut.maskBreaks(Ar)===E&&Xt(Ar,Ut)>=mt)break}if(Le.length>qt||Ar===_r)break;_r=Ar;var ur={value:Ar};dt?(br&&Ar!==(0|Ar)&&(ur.simpleLabel=!0),ft>1&&lr%ft&&(ur.skipLabel=!0),Le.push(ur)):(ur.minor=!0,Xe.push(ur))}}else dt?(Le=[],Et=_e(pe)):(Xe=[],Dt=_e(pe))}if(ot&&!("inside"===pe.minor.ticks&&"outside"===pe.ticks||"outside"===pe.minor.ticks&&"inside"===pe.ticks)){for(var Tt=Le.map(function(Un){return Un.value}),Qt=[],Er=0;Er<Xe.length;Er++){var zr=Xe[Er],an=zr.value;if(-1===Tt.indexOf(an)){for(var Kr=!1,sn=0;!Kr&&sn<Le.length;sn++)1e7+Le[sn].value===1e7+an&&(Kr=!0);Kr||Qt.push(zr)}}Xe=Qt}if(ct&&function(Un,di,rr){for(var Sr=0;Sr<Un.length;Sr++){var Rt=Un[Sr].value,gr=Sr,xr=Sr+1;Sr<Un.length-1?(gr=Sr,xr=Sr+1):Sr>0?(gr=Sr-1,xr=Sr):(gr=Sr,xr=Sr);var Zr,Br=Math.abs(Un[xr].value-Un[gr].value),Cr=rr||Br,Or=0;Cr>=p?Or=Br>=p&&Br<=c?Br:l:rr===u&&Cr>=x?Or=Br>=x&&Br<=g?Br:u:Cr>=_?Or=Br>=_&&Br<=f?Br:T:rr===k&&Cr>=k?Or=k:Cr>=w?Or=w:rr===C&&Cr>=C?Or=C:rr===A&&Cr>=A&&(Or=A),Or>=Br&&(Or=Br,Zr=!0);var Dr=Rt+Or;if(di.rangebreaks&&Or>0){for(var Nr=0,nn=0;nn<84;nn++){var rn=(nn+.5)/84;di.maskBreaks(Rt*(1-rn)+rn*Dr)!==E&&Nr++}(Or*=Nr/84)||(Un[Sr].drop=!0),Zr&&Br>k&&(Or=Br)}(Or>0||0===Sr)&&(Un[Sr].periodX=Rt+Or/2)}}(Le,pe,pe._definedDelta),pe.rangebreaks){var gn="y"===pe._id.charAt(0),zn=1;"auto"===pe.tickmode&&(zn=pe.tickfont?pe.tickfont.size:12);var Vr=NaN;for(Be=Le.length-1;Be>-1;Be--)if(Le[Be].drop)Le.splice(Be,1);else{Le[Be].value=Xt(Le[Be].value,pe);var _n=pe.c2p(Le[Be].value);(gn?Vr>_n-zn:Vr<_n+zn)?Le.splice(Ft?Be+1:Be,1):Vr=_n}}hr(pe)&&360===Math.abs(St[1]-St[0])&&Le.pop(),pe._tmax=(Le[Le.length-1]||{}).value,pe._prevDateHead="",pe._inCalcTicks=!0;var Qr,Jr,Nn=function(Un){Un.text="",pe._prevDateHead=We};for(Le=Le.concat(Xe),Be=0;Be<Le.length;Be++){var Mn=Le[Be].value;Le[Be].minor?Dt.push({x:Mn,minor:!0}):(We=pe._prevDateHead,Qr=H.tickText(pe,Mn,!1,Le[Be].simpleLabel),void 0!==(Jr=Le[Be].periodX)&&(Qr.periodX=Jr,(Jr>mt||Jr<at)&&(Jr>mt&&(Qr.periodX=mt),Jr<at&&(Qr.periodX=at),Nn(Qr))),Le[Be].skipLabel&&Nn(Qr),Et.push(Qr))}return Et=Et.concat(Dt),pe._inCalcTicks=!1,ct&&Et.length&&(Et[0].noTick=!0),Et};var xe=[2,5,10],Ee=[1,2,3,6,12],he=[1,2,5,10,15,30],me=[1,2,3,7,14],Se=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Me=[-.301,0,.301,.699,1],Ie=[15,30,45,90,180];function Fe(pe,we,Be){return we*e.roundUp(pe/we,Be)}function Ne(pe){var we=pe.dtick;if(pe._tickexponent=0,v(we)||"string"==typeof we||(we=1),"category"!==pe.type&&"multicategory"!==pe.type||(pe._tickround=null),"date"===pe.type){var Be=pe.r2l(pe.tick0),We=pe.l2r(Be).replace(/(^-|i)/g,""),Ke=We.length;if("M"===String(we).charAt(0))pe._tickround=Ke>10||"01-01"!==We.substr(5)?"d":+we.substr(1)%12==0?"y":"m";else if(we>=w&&Ke<=10||we>=15*w)pe._tickround="d";else if(we>=O&&Ke<=16||we>=A)pe._tickround="M";else if(we>=P&&Ke<=19||we>=O)pe._tickround="S";else{var Ye=pe.l2r(Be+we).replace(/^-/,"").length;pe._tickround=Math.max(Ke,Ye)-20,pe._tickround<0&&(pe._tickround=4)}}else if(v(we)||"L"===we.charAt(0)){var ft=pe.range.map(pe.r2d||Number);v(we)||(we=Number(we.substr(1))),pe._tickround=2-Math.floor(Math.log(we)/Math.LN10+.01);var ct=Math.max(Math.abs(ft[0]),Math.abs(ft[1])),St=Math.floor(Math.log(ct)/Math.LN10+.01),Ft=void 0===pe.minexponent?3:pe.minexponent;Math.abs(St)>Ft&&(pe._tickexponent=Re(pe.exponentformat)&&!ze(St)?3*Math.round((St-1)/3):St)}else pe._tickround=null}function De(pe,we,Be){var We=pe.tickfont||{};return{x:we,dx:0,dy:0,text:Be||"",fontSize:We.size,font:We.family,fontColor:We.color}}H.autoTicks=function(pe,we,Be){var We;function Ke(mt){return Math.pow(mt,Math.floor(Math.log(we)/Math.LN10))}if("date"===pe.type){pe.tick0=e.dateTick0(pe.calendar,0);var Ye=2*we;if(Ye>l)we/=l,We=Ke(10),pe.dtick="M"+12*Fe(we,We,xe);else if(Ye>T)pe.dtick="M"+Fe(we/=T,1,Ee);else if(Ye>w){if(pe.dtick=Fe(we,w,pe._hasDayOfWeekBreaks?[1,2,7,14]:me),!Be){var ft=H.getTickFormat(pe),ct="period"===pe.ticklabelmode;ct&&(pe._rawTick0=pe.tick0),pe.tick0=/%[uVW]/.test(ft)?e.dateTick0(pe.calendar,2):e.dateTick0(pe.calendar,1),ct&&(pe._dowTick0=pe.tick0)}}else Ye>A?pe.dtick=Fe(we,A,Ee):Ye>O?pe.dtick=Fe(we,O,he):Ye>P?pe.dtick=Fe(we,P,he):(We=Ke(10),pe.dtick=Fe(we,We,xe))}else if("log"===pe.type){pe.tick0=0;var St=e.simpleMap(pe.range,pe.r2l);if(pe._isMinor&&(we*=1.5),we>.7)pe.dtick=Math.ceil(we);else if(Math.abs(St[1]-St[0])<1){var Ft=1.5*Math.abs((St[1]-St[0])/we);we=Math.abs(Math.pow(10,St[1])-Math.pow(10,St[0]))/Ft,We=Ke(10),pe.dtick="L"+Fe(we,We,xe)}else pe.dtick=we>.3?"D2":"D1"}else"category"===pe.type||"multicategory"===pe.type?(pe.tick0=0,pe.dtick=Math.ceil(Math.max(we,1))):hr(pe)?(pe.tick0=0,pe.dtick=Fe(we,We=1,Ie)):(pe.tick0=0,We=Ke(10),pe.dtick=Fe(we,We,xe));if(0===pe.dtick&&(pe.dtick=1),!v(pe.dtick)&&"string"!=typeof pe.dtick){var at=pe.dtick;throw pe.dtick=1,"ax.dtick error: "+String(at)}},H.tickIncrement=function(pe,we,Be,We){var Ke=Be?-1:1;if(v(we))return e.increment(pe,Ke*we);var Ye=we.charAt(0),ft=Ke*Number(we.substr(1));if("M"===Ye)return e.incrementMonth(pe,ft,We);if("L"===Ye)return Math.log(Math.pow(10,pe)+ft)/Math.LN10;if("D"===Ye){var ct="D2"===we?Me:Se,St=pe+.01*Ke,Ft=e.roundUp(e.mod(St,1),ct,Be);return Math.floor(St)+Math.log(m.round(Math.pow(10,Ft),1))/Math.LN10}throw"unrecognized dtick "+String(we)},H.tickFirst=function(pe,we){var Be=pe.r2l||Number,We=e.simpleMap(pe.range,Be,void 0,void 0,we),Ke=We[1]<We[0],Ye=Ke?Math.floor:Math.ceil,ft=ne(We)[0],ct=pe.dtick,St=Be(pe.tick0);if(v(ct)){var Ft=Ye((ft-St)/ct)*ct+St;return"category"!==pe.type&&"multicategory"!==pe.type||(Ft=e.constrain(Ft,0,pe._categories.length-1)),Ft}var at=ct.charAt(0),mt=Number(ct.substr(1));if("M"===at){for(var qt,Et,Dt,Le=0,Xe=St;Le<10;){if(((qt=H.tickIncrement(Xe,ct,Ke,pe.calendar))-ft)*(Xe-ft)<=0)return Ke?Math.min(Xe,qt):Math.max(Xe,qt);Et=(ft-(Xe+qt)/2)/(qt-Xe),Dt=at+(Math.abs(Math.round(Et))||1)*mt,Xe=H.tickIncrement(Xe,Dt,Et<0?!Ke:Ke,pe.calendar),Le++}return e.error("tickFirst did not converge",pe),Xe}if("L"===at)return Math.log(Ye((Math.pow(10,ft)-St)/mt)*mt+St)/Math.LN10;if("D"===at){var ot="D2"===ct?Me:Se,dt=e.roundUp(e.mod(ft,1),ot,Ke);return Math.floor(ft)+Math.log(m.round(Math.pow(10,dt),1))/Math.LN10}throw"unrecognized dtick "+String(ct)},H.tickText=function(pe,we,Be,We){var Ke,Ye=De(pe,we),ft="array"===pe.tickmode,ct=Be||ft,St=pe.type,Ft="category"===St?pe.d2l_noadd:pe.d2l;if(ft&&Array.isArray(pe.ticktext)){var at=e.simpleMap(pe.range,pe.r2l),mt=(Math.abs(at[1]-at[0])-(pe._lBreaks||0))/1e4;for(Ke=0;Ke<pe.ticktext.length&&!(Math.abs(we-Ft(pe.tickvals[Ke]))<mt);Ke++);if(Ke<pe.ticktext.length)return Ye.text=String(pe.ticktext[Ke]),Ye}function qt(Le){return void 0===Le||(Be?"none"===Le:"all"!==Le&&we!=={first:pe._tmin,last:pe._tmax}[Le])}var Xe,ot,Et=Be?"never":"none"!==pe.exponentformat&&qt(pe.showexponent)?"hide":"";if("date"===St?function(Le,Xe,ot,dt){var Lt=Le._tickround,Ut=ot&&Le.hoverformat||H.getTickFormat(Le);dt&&(Lt=v(Lt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Lt]);var $t,Wt=e.formatDate(Xe.x,Ut,Lt,Le._dateFormat,Le.calendar,Le._extraFormat),wr=Wt.indexOf("\n");if(-1!==wr&&($t=Wt.substr(wr+1),Wt=Wt.substr(0,wr)),dt&&("00:00:00"===Wt||"00:00"===Wt?(Wt=$t,$t=""):8===Wt.length&&(Wt=Wt.replace(/:00$/,""))),$t)if(ot)"d"===Lt?Wt+=", "+$t:Wt=$t+(Wt?", "+Wt:"");else if(Le._inCalcTicks&&Le._prevDateHead===$t){var Rr=He(Le),br=Le._trueSide||Le.side;(!Rr&&"top"===br||Rr&&"bottom"===br)&&(Wt+="<br> ")}else Le._prevDateHead=$t,Wt+="<br>"+$t;Xe.text=Wt}(pe,Ye,Be,ct):"log"===St?function(Le,Xe,ot,dt,Lt){var Ut=Le.dtick,$t=Xe.x,Wt=Le.tickformat,wr="string"==typeof Ut&&Ut.charAt(0);if("never"===Lt&&(Lt=""),dt&&"L"!==wr&&(Ut="L3",wr="L"),Wt||"L"===wr)Xe.text=Ue(Math.pow(10,$t),Le,Lt,dt);else if(v(Ut)||"D"===wr&&e.mod($t+.01,1)<.1){var Rr=Math.round($t),br=Math.abs(Rr),nr=Le.exponentformat;"power"===nr||Re(nr)&&ze(Rr)?(Xe.text=0===Rr?1:1===Rr?"10":"10<sup>"+(Rr>1?"":S)+br+"</sup>",Xe.fontSize*=1.25):("e"===nr||"E"===nr)&&br>2?Xe.text="1"+nr+(Rr>0?"+":S)+br:(Xe.text=Ue(Math.pow(10,$t),Le,"","fakehover"),"D1"===Ut&&"y"===Le._id.charAt(0)&&(Xe.dy-=Xe.fontSize/6))}else{if("D"!==wr)throw"unrecognized dtick "+String(Ut);Xe.text=String(Math.round(Math.pow(10,e.mod($t,1)))),Xe.fontSize*=.75}if("D1"===Le.dtick){var lr=String(Xe.text).charAt(0);"0"!==lr&&"1"!==lr||("y"===Le._id.charAt(0)?Xe.dx-=Xe.fontSize/4:(Xe.dy+=Xe.fontSize/2,Xe.dx+=(Le.range[1]>Le.range[0]?1:-1)*Xe.fontSize*($t<0?.5:.25)))}}(pe,Ye,0,ct,Et):"category"===St?(Xe=Ye,void 0===(ot=pe._categories[Math.round(Xe.x)])&&(ot=""),Xe.text=String(ot)):"multicategory"===St?function(Le,Xe,ot){var dt=Math.round(Xe.x),Lt=Le._categories[dt]||[],Ut=void 0===Lt[1]?"":String(Lt[1]),$t=void 0===Lt[0]?"":String(Lt[0]);ot?Xe.text=$t+" - "+Ut:(Xe.text=Ut,Xe.text2=$t)}(pe,Ye,Be):hr(pe)?function(Le,Xe,ot,dt,Lt){if("radians"!==Le.thetaunit||ot)Xe.text=Ue(Xe.x,Le,Lt,dt);else{var Ut=Xe.x/180;if(0===Ut)Xe.text="0";else{var $t=function(wr){function Rr(sr,_r){return Math.abs(sr-_r)<=1e-6}var br=function(sr){for(var _r=1;!Rr(Math.round(sr*_r)/_r,sr);)_r*=10;return _r}(wr),nr=wr*br,lr=Math.abs(function sr(_r,Ar){return Rr(Ar,0)?_r:sr(Ar,_r%Ar)}(nr,br));return[Math.round(nr/lr),Math.round(br/lr)]}(Ut);if($t[1]>=100)Xe.text=Ue(e.deg2rad(Xe.x),Le,Lt,dt);else{var Wt=Xe.x<0;Xe.text=1===$t[1]?1===$t[0]?"\u03c0":$t[0]+"\u03c0":["<sup>",$t[0],"</sup>","\u2044","<sub>",$t[1],"</sub>","\u03c0"].join(""),Wt&&(Xe.text=S+Xe.text)}}}}(pe,Ye,Be,ct,Et):function(Le,Xe,ot,dt,Lt){"never"===Lt?Lt="":"all"===Le.showexponent&&Math.abs(Xe.x/Le.dtick)<1e-6&&(Lt="hide"),Xe.text=Ue(Xe.x,Le,Lt,dt)}(pe,Ye,0,ct,Et),We||(pe.tickprefix&&!qt(pe.showtickprefix)&&(Ye.text=pe.tickprefix+Ye.text),pe.ticksuffix&&!qt(pe.showticksuffix)&&(Ye.text+=pe.ticksuffix)),"boundaries"===pe.tickson||pe.showdividers){var Dt=function(Le){var Xe=pe.l2p(Le);return Xe>=0&&Xe<=pe._length?Le:null};Ye.xbnd=[Dt(Ye.x-.5),Dt(Ye.x+pe.dtick-.5)]}return Ye},H.hoverLabelText=function(pe,we,Be){Be&&(pe=e.extendFlat({},pe,{hoverformat:Be}));var We=Array.isArray(we)?we[0]:we,Ke=Array.isArray(we)?we[1]:void 0;if(void 0!==Ke&&Ke!==We)return H.hoverLabelText(pe,We,Be)+" - "+H.hoverLabelText(pe,Ke,Be);var Ye="log"===pe.type&&We<=0,ft=H.tickText(pe,pe.c2l(Ye?-We:We),"hover").text;return Ye?0===We?"0":S+ft:ft};var $e=["f","p","n","\u03bc","m","","k","M","G","T"];function Re(pe){return"SI"===pe||"B"===pe}function ze(pe){return pe>14||pe<-15}function Ue(pe,we,Be,We){var Ke=pe<0,Ye=we._tickround,ft=Be||we.exponentformat||"B",ct=we._tickexponent,St=H.getTickFormat(we),Ft=we.separatethousands;if(We){var at={exponentformat:ft,minexponent:we.minexponent,dtick:"none"===we.showexponent?we.dtick:v(pe)&&Math.abs(pe)||1,range:"none"===we.showexponent?we.range.map(we.r2d):[0,pe||1]};Ne(at),Ye=(Number(at._tickround)||0)+4,ct=at._tickexponent,we.hoverformat&&(St=we.hoverformat)}if(St)return we._numFormat(St)(pe).replace(/-/g,S);var mt,qt=Math.pow(10,-Ye)/2;if("none"===ft&&(ct=0),(pe=Math.abs(pe))<qt)pe="0",Ke=!1;else{if(pe+=qt,ct&&(pe*=Math.pow(10,-ct),Ye+=ct),0===Ye)pe=String(Math.floor(pe));else if(Ye<0){pe=(pe=String(Math.round(pe))).substr(0,pe.length+Ye);for(var Et=Ye;Et<0;Et++)pe+="0"}else{var Dt=(pe=String(pe)).indexOf(".")+1;Dt&&(pe=pe.substr(0,Dt+Ye).replace(/\.?0+$/,""))}pe=e.numSeparate(pe,we._separators,Ft)}return ct&&"hide"!==ft&&(Re(ft)&&ze(ct)&&(ft="power"),mt=ct<0?S+-ct:"power"!==ft?"+"+ct:String(ct),"e"===ft||"E"===ft?pe+=ft+mt:"power"===ft?pe+="\xd710<sup>"+mt+"</sup>":"B"===ft&&9===ct?pe+="B":Re(ft)&&(pe+=$e[ct/3+5])),Ke?S+pe:pe}function je(pe,we){if(pe){var Be=Object.keys(J).reduce(function(We,Ke){return-1!==we.indexOf(Ke)&&J[Ke].forEach(function(Ye){We[Ye]=1}),We},{});Object.keys(pe).forEach(function(We){Be[We]||(1===We.length?pe[We]=0:delete pe[We])})}}function rt(pe,we){for(var Be=[],We={},Ke=0;Ke<we.length;Ke++){var Ye=we[Ke];We[Ye.text2]?We[Ye.text2].push(Ye.x):We[Ye.text2]=[Ye.x]}for(var ft in We)Be.push(De(pe,e.interp(We[ft],.5),ft));return Be}function ut(pe){return void 0!==pe.periodX?pe.periodX:pe.x}function gt(pe){return[pe.text,pe.x,pe.axInfo,pe.font,pe.fontSize,pe.fontColor].join("_")}function At(pe){var we=pe.title.font.size,Be=(pe.title.text.match(r.BR_TAG_ALL)||[]).length;return pe.title.hasOwnProperty("standoff")?Be?we*(re+Be*j):we*re:Be?we*(Be+1)*j:we}function _t(pe,we){var Be=pe.l2p(we);return Be>1&&Be<pe._length-1}function it(pe){var we=m.select(pe),Be=we.select(".text-math-group");return Be.empty()?we.select("text"):Be}function et(pe){return pe._id+".automargin"}function wt(pe){return et(pe)+".mirror"}function Gt(pe){return pe._id+".rangeslider"}function Kt(pe,we){for(var Be=0;Be<we.length;Be++)-1===pe.indexOf(we[Be])&&pe.push(we[Be])}function cr(pe,we,Be){var We,Ke,Ye=[],ft=[],ct=pe.layout;for(We=0;We<we.length;We++)Ye.push(H.getFromId(pe,we[We]));for(We=0;We<Be.length;We++)ft.push(H.getFromId(pe,Be[We]));var St=Object.keys(a),Ft=["anchor","domain","overlaying","position","side","tickangle","editType"],at=["linear","log"];for(We=0;We<St.length;We++){var mt=St[We],qt=Ye[0][mt],Et=ft[0][mt],Dt=!0,Le=!1,Xe=!1;if("_"!==mt.charAt(0)&&"function"!=typeof qt&&-1===Ft.indexOf(mt)){for(Ke=1;Ke<Ye.length&&Dt;Ke++){var ot=Ye[Ke][mt];"type"===mt&&-1!==at.indexOf(qt)&&-1!==at.indexOf(ot)&&qt!==ot?Le=!0:ot!==qt&&(Dt=!1)}for(Ke=1;Ke<ft.length&&Dt;Ke++){var dt=ft[Ke][mt];"type"===mt&&-1!==at.indexOf(Et)&&-1!==at.indexOf(dt)&&Et!==dt?Xe=!0:ft[Ke][mt]!==Et&&(Dt=!1)}Dt&&(Le&&(ct[Ye[0]._name].type="linear"),Xe&&(ct[ft[0]._name].type="linear"),ar(ct,mt,Ye,ft,pe._fullLayout._dfltTitle))}}for(We=0;We<pe._fullLayout.annotations.length;We++){var Lt=pe._fullLayout.annotations[We];-1!==we.indexOf(Lt.xref)&&-1!==Be.indexOf(Lt.yref)&&e.swapAttrs(ct.annotations[We],["?"])}}function ar(pe,we,Be,We,Ke){var Ye,ft=e.nestedProperty,ct=ft(pe[Be[0]._name],we).get(),St=ft(pe[We[0]._name],we).get();for("title"===we&&(ct&&ct.text===Ke.x&&(ct.text=Ke.y),St&&St.text===Ke.y&&(St.text=Ke.x)),Ye=0;Ye<Be.length;Ye++)ft(pe,Be[Ye]._name+"."+we).set(St);for(Ye=0;Ye<We.length;Ye++)ft(pe,We[Ye]._name+"."+we).set(ct)}function hr(pe){return"angularaxis"===pe._id}function Xt(pe,we){for(var Be=we._rangebreaks.length,We=0;We<Be;We++){var Ke=we._rangebreaks[We];if(pe>=Ke.min&&pe<Ke.max)return Ke.max}return pe}function He(pe){return-1!==(pe.ticklabelposition||"").indexOf("inside")}function Je(pe,we){He(pe._anchorAxis||{})&&pe._hideCounterAxisInsideTickLabels&&pe._hideCounterAxisInsideTickLabels(we)}H.getTickFormat=function(pe){var we,Be,We,Ke,Ye,ft,ct,St,qt,Et,Dt,Le,Xe,ot;function Ft(qt){return"string"!=typeof qt?qt:Number(qt.replace("M",""))*T}function at(qt,Et){var Dt=["L","D"];if(typeof qt==typeof Et){if("number"==typeof qt)return qt-Et;var Le=Dt.indexOf(qt.charAt(0)),Xe=Dt.indexOf(Et.charAt(0));return Le===Xe?Number(qt.replace(/(L|D)/g,""))-Number(Et.replace(/(L|D)/g,"")):Le-Xe}return"number"==typeof qt?1:-1}if(pe.tickformatstops&&pe.tickformatstops.length>0)switch(pe.type){case"date":case"linear":for(we=0;we<pe.tickformatstops.length;we++)if((We=pe.tickformatstops[we]).enabled&&(Ke=pe.dtick,ft=void 0,void 0,void 0,ft=Ft||function(qt){return qt},St=(Ye=We.dtickrange)[1],(!(ct=Ye[0])&&"number"!=typeof ct||ft(ct)<=ft(Ke))&&(!St&&"number"!=typeof St||ft(St)>=ft(Ke)))){Be=We;break}break;case"log":for(we=0;we<pe.tickformatstops.length;we++)if((We=pe.tickformatstops[we]).enabled&&(Dt=void 0,Le=void 0,Xe=void 0,ot=void 0,Dt=null===(Et=We.dtickrange)[0],Le=null===Et[1],Xe=at(qt=pe.dtick,Et[0])>=0,ot=at(qt,Et[1])<=0,(Dt||Xe)&&(Le||ot))){Be=We;break}}return Be?Be.value:pe.tickformat},H.getSubplots=function(pe,we){var Be=pe._fullLayout._subplots,We=Be.cartesian.concat(Be.gl2d||[]),Ke=we?H.findSubplotsWithAxis(We,we):We;return Ke.sort(function(Ye,ft){var ct=Ye.substr(1).split("y"),St=ft.substr(1).split("y");return ct[0]===St[0]?+ct[1]-+St[1]:+ct[0]-+St[0]}),Ke},H.findSubplotsWithAxis=function(pe,we){for(var Be=new RegExp("x"===we._id.charAt(0)?"^"+we._id+"y":we._id+"$"),We=[],Ke=0;Ke<pe.length;Ke++){var Ye=pe[Ke];Be.test(Ye)&&We.push(Ye)}return We},H.makeClipPaths=function(pe){var we=pe._fullLayout;if(!we._hasOnlyLargeSploms){var Be,We,Ke={_offset:0,_length:we.width,_id:""},Ye={_offset:0,_length:we.height,_id:""},ft=H.list(pe,"x",!0),ct=H.list(pe,"y",!0),St=[];for(Be=0;Be<ft.length;Be++)for(St.push({x:ft[Be],y:Ye}),We=0;We<ct.length;We++)0===Be&&St.push({x:Ke,y:ct[We]}),St.push({x:ft[Be],y:ct[We]});var Ft=we._clips.selectAll(".axesclip").data(St,function(at){return at.x._id+at.y._id});Ft.enter().append("clipPath").classed("axesclip",!0).attr("id",function(at){return"clip"+we._uid+at.x._id+at.y._id}).append("rect"),Ft.exit().remove(),Ft.each(function(at){m.select(this).select("rect").attr({x:at.x._offset||0,y:at.y._offset||0,width:at.x._length||1,height:at.y._length||1})})}},H.draw=function(pe,we,Be){var We=pe._fullLayout;"redraw"===we&&We._paper.selectAll("g.subplot").each(function(Ye){var ct=We._plots[Ye[0]];if(ct){var St=ct.xaxis,Ft=ct.yaxis;ct.xaxislayer.selectAll("."+St._id+"tick").remove(),ct.yaxislayer.selectAll("."+Ft._id+"tick").remove(),ct.xaxislayer.selectAll("."+St._id+"tick2").remove(),ct.yaxislayer.selectAll("."+Ft._id+"tick2").remove(),ct.xaxislayer.selectAll("."+St._id+"divider").remove(),ct.yaxislayer.selectAll("."+Ft._id+"divider").remove(),ct.minorGridlayer&&ct.minorGridlayer.selectAll("path").remove(),ct.gridlayer&&ct.gridlayer.selectAll("path").remove(),ct.zerolinelayer&&ct.zerolinelayer.selectAll("path").remove(),We._infolayer.select(".g-"+St._id+"title").remove(),We._infolayer.select(".g-"+Ft._id+"title").remove()}});var Ke=we&&"redraw"!==we?we:H.listIds(pe);return e.syncOrAsync(Ke.map(function(Ye){return function(){if(Ye){var ft=H.getFromId(pe,Ye),ct=H.drawOne(pe,ft,Be);return ft._r=ft.range.slice(),ft._rl=e.simpleMap(ft._r,ft.r2l),ct}}}))},H.drawOne=function(pe,we,Be){var We,Ke,Ye;Be=Be||{},we.setScale();var ft=pe._fullLayout,ct=we._id,St=ct.charAt(0),Ft=H.counterLetter(ct),at=ft._plots[we._mainSubplot];if(at){var mt=at[St+"axislayer"],qt=we._mainLinePosition,Et=we._mainMirrorPosition,Dt=we._vals=H.calcTicks(we),Le=[we.mirror,qt,Et].join("_");for(We=0;We<Dt.length;We++)Dt[We].axInfo=Le;we._selections={},we._tickAngles&&(we._prevTickAngles=we._tickAngles),we._tickAngles={},we._depth=null;var Xe={};if(we.visible){var ot,dt,Lt=H.makeTransTickFn(we),Ut=H.makeTransTickLabelFn(we),$t="inside"===we.ticks,Wt="outside"===we.ticks;if("boundaries"===we.tickson){var wr=function(rr,Sr){var Rt,gr=[],xr=function(Zr,Ur){var Yr=Zr.xbnd[Ur];null!==Yr&&gr.push(e.extendFlat({},Zr,{x:Yr}))};if(Sr.length){for(Rt=0;Rt<Sr.length;Rt++)xr(Sr[Rt],0);xr(Sr[Rt-1],1)}return gr}(0,Dt);dt=H.clipEnds(we,wr),ot=$t?dt:wr}else dt=H.clipEnds(we,Dt),ot=$t&&"period"!==we.ticklabelmode?dt:Dt;var Rr,br=we._gridVals=dt,nr=function(rr,Sr){var Rt,gr,xr=[],Zr=Sr.length&&Sr[Sr.length-1].x<Sr[0].x,Ur=function(Br,Cr){var Or=Br.xbnd[Cr];null!==Or&&xr.push(e.extendFlat({},Br,{x:Or}))};if(rr.showdividers&&Sr.length){for(Rt=0;Rt<Sr.length;Rt++){var Yr=Sr[Rt];Yr.text2!==gr&&Ur(Yr,Zr?1:0),gr=Yr.text2}Ur(Sr[Rt-1],Zr?0:1)}return xr}(we,Dt);if(!ft._hasOnlyLargeSploms){var lr=we._subplotsWith,sr={};for(We=0;We<lr.length;We++){var _r=(Ye=ft._plots[Ke=lr[We]])[Ft+"axis"],Ar=_r._mainAxis._id;if(!sr[Ar]){sr[Ar]=1;var zt="x"===St?"M0,"+_r._offset+"v"+_r._length:"M"+_r._offset+",0h"+_r._length;H.drawGrid(pe,we,{vals:br,counterAxis:_r,layer:Ye.gridlayer.select("."+ct),minorLayer:Ye.minorGridlayer.select("."+ct),path:zt,transFn:Lt}),H.drawZeroLine(pe,we,{counterAxis:_r,layer:Ye.zerolinelayer,path:zt,transFn:Lt})}}}var ur=H.getTickSigns(we),Tt=H.getTickSigns(we,"minor");if(we.ticks||we.minor&&we.minor.ticks){var Qt,Er,zr,an,Kr=H.makeTickPath(we,qt,ur[2]),sn=H.makeTickPath(we,qt,Tt[2],{minor:!0});if(we._anchorAxis&&we.mirror&&!0!==we.mirror?(Qt=H.makeTickPath(we,Et,ur[3]),Er=H.makeTickPath(we,Et,Tt[3],{minor:!0}),zr=Kr+Qt,an=sn+Er):(Qt="",Er="",zr=Kr,an=sn),we.showdividers&&Wt&&"boundaries"===we.tickson){var gn={};for(We=0;We<nr.length;We++)gn[nr[We].x]=1;Rr=function(rr){return gn[rr.x]?Qt:zr}}else Rr=function(rr){return rr.minor?an:zr}}if(H.drawTicks(pe,we,{vals:ot,layer:mt,path:Rr,transFn:Lt}),"allticks"===we.mirror){var zn=Object.keys(we._linepositions||{});for(We=0;We<zn.length;We++){Ye=ft._plots[Ke=zn[We]];var Vr=we._linepositions[Ke]||[],Qr=Vr[1],Jr=Vr[2],Nn=H.makeTickPath(we,Vr[0],Jr?ur[0]:Tt[0],{minor:Jr})+H.makeTickPath(we,Qr,Jr?ur[1]:Tt[1],{minor:Jr});H.drawTicks(pe,we,{vals:ot,layer:Ye[St+"axislayer"],path:Nn,transFn:Lt})}}var Hn=[];if(Hn.push(function(){return H.drawLabels(pe,we,{vals:Dt,layer:mt,plotinfo:Ye,transFn:Ut,labelFns:H.makeLabelFns(we,qt)})}),"multicategory"===we.type){var Mn={x:2,y:10}[St];Hn.push(function(){var rr={x:"height",y:"width"}[St],Sr=di()[rr]+Mn+(we._tickAngles[ct+"tick"]?we.tickfont.size*j:0);return H.drawLabels(pe,we,{vals:rt(we,Dt),layer:mt,cls:ct+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Lt,labelFns:H.makeLabelFns(we,qt+Sr*ur[4])})}),Hn.push(function(){return we._depth=ur[4]*(di("tick2")[we.side]-qt),rr=pe,Sr=we,xr=(Rt={vals:nr,layer:mt,path:H.makeTickPath(we,qt,ur[4],{len:we._depth}),transFn:Lt}).vals,(Zr=Rt.layer.selectAll("path."+(gr=Sr._id+"divider")).data(xr,gt)).exit().remove(),Zr.enter().insert("path",":first-child").classed(gr,1).classed("crisp",1).call(t.stroke,Sr.dividercolor).style("stroke-width",d.crispRound(rr,Sr.dividerwidth,1)+"px"),void Zr.attr("transform",Rt.transFn).attr("d",Rt.path);var rr,Sr,Rt,gr,xr,Zr})}else we.title.hasOwnProperty("standoff")&&Hn.push(function(){we._depth=ur[4]*(di()[we.side]-qt)});var Un=h.getComponentMethod("rangeslider","isVisible")(we);return Hn.push(function(){var rr,Sr,Rt,gr,xr=we.side.charAt(0),Zr=B[we.side].charAt(0),Ur=H.getPxPosition(pe,we),Yr=Wt?we.ticklen:0;if((we.automargin||Un)&&("multicategory"===we.type?rr=di("tick2"):(rr=di(),"x"===St&&"b"===xr&&(we._depth=Math.max(rr.width>0?rr.bottom-Ur:0,Yr)))),we.automargin){Sr={x:0,y:0,r:0,l:0,t:0,b:0};var Br=[0,1];if("x"===St){if("b"===xr?Sr[xr]=we._depth:(Sr[xr]=we._depth=Math.max(rr.width>0?Ur-rr.top:0,Yr),Br.reverse()),rr.width>0){var Cr=rr.right-(we._offset+we._length);Cr>0&&(Sr.xr=1,Sr.r=Cr);var Or=we._offset-rr.left;Or>0&&(Sr.xl=0,Sr.l=Or)}}else if("l"===xr?Sr[xr]=we._depth=Math.max(rr.height>0?Ur-rr.left:0,Yr):(Sr[xr]=we._depth=Math.max(rr.height>0?rr.right-Ur:0,Yr),Br.reverse()),rr.height>0){var Dr=rr.bottom-(we._offset+we._length);Dr>0&&(Sr.yb=0,Sr.b=Dr);var Nr=we._offset-rr.top;Nr>0&&(Sr.yt=1,Sr.t=Nr)}Sr[Ft]="free"===we.anchor?we.position:we._anchorAxis.domain[Br[0]],we.title.text!==ft._dfltTitle[St]&&(Sr[xr]+=At(we)+(we.title.standoff||0)),we.mirror&&"free"!==we.anchor&&((Rt={x:0,y:0,r:0,l:0,t:0,b:0})[Zr]=we.linewidth,we.mirror&&!0!==we.mirror&&(Rt[Zr]+=Yr),!0===we.mirror||"ticks"===we.mirror?Rt[Ft]=we._anchorAxis.domain[Br[1]]:"all"!==we.mirror&&"allticks"!==we.mirror||(Rt[Ft]=[we._counterDomainMin,we._counterDomainMax][Br[1]]))}Un&&(gr=h.getComponentMethod("rangeslider","autoMarginOpts")(pe,we)),"string"==typeof we.automargin&&(je(Sr,we.automargin),je(Rt,we.automargin)),b.autoMargin(pe,et(we),Sr),b.autoMargin(pe,wt(we),Rt),b.autoMargin(pe,Gt(we),gr)}),Be.skipTitle||Un&&"bottom"===we.side||Hn.push(function(){return function(rr,Sr){var Rt,gr=rr._fullLayout,xr=Sr._id,Zr=xr.charAt(0),Ur=Sr.title.font.size;if(Sr.title.hasOwnProperty("standoff"))Rt=Sr._depth+Sr.title.standoff+At(Sr);else{var Yr=He(Sr);if("multicategory"===Sr.type)Rt=Sr._depth;else{var Br=1.5*Ur;Yr&&(Br=.5*Ur,"outside"===Sr.ticks&&(Br+=Sr.ticklen)),Rt=10+Br+(Sr.linewidth?Sr.linewidth-1:0)}Yr||(Rt+="x"===Zr?"top"===Sr.side?Ur*(Sr.showticklabels?1:0):Ur*(Sr.showticklabels?1.5:.5):"right"===Sr.side?Ur*(Sr.showticklabels?1:.5):Ur*(Sr.showticklabels?.5:0))}var Cr,Or,Dr,Nr,nn=H.getPxPosition(rr,Sr);if("x"===Zr?(Or=Sr._offset+Sr._length/2,Dr="top"===Sr.side?nn-Rt:nn+Rt):(Dr=Sr._offset+Sr._length/2,Or="right"===Sr.side?nn+Rt:nn-Rt,Cr={rotate:"-90",offset:0}),"multicategory"!==Sr.type){var rn=Sr._selections[Sr._id+"tick"];if(Nr={selection:rn,side:Sr.side},rn&&rn.node()&&rn.node().parentNode){var pn=d.getTranslate(rn.node().parentNode);Nr.offsetLeft=pn.x,Nr.offsetTop=pn.y}Sr.title.hasOwnProperty("standoff")&&(Nr.pad=0)}return o.draw(rr,xr+"title",{propContainer:Sr,propName:Sr._name+".title.text",placeholder:gr._dfltTitle[Zr],avoid:Nr,transform:Cr,attributes:{x:Or,y:Dr,"text-anchor":"middle"}})}(pe,we)}),e.syncOrAsync(Hn)}}function di(rr){var Rt,gr,xr,Zr,Ur,Yr,Sr=ct+(rr||"tick");return Xe[Sr]||(Xe[Sr]=((Rt=we)._selections[gr=Sr].size()?(xr=1/0,Zr=-1/0,Ur=1/0,Yr=-1/0,Rt._selections[gr].each(function(){var Br=it(this),Cr=d.bBox(Br.node().parentNode);xr=Math.min(xr,Cr.top),Zr=Math.max(Zr,Cr.bottom),Ur=Math.min(Ur,Cr.left),Yr=Math.max(Yr,Cr.right)})):(xr=0,Zr=0,Ur=0,Yr=0),{top:xr,bottom:Zr,left:Ur,right:Yr,height:Zr-xr,width:Yr-Ur})),Xe[Sr]}},H.getTickSigns=function(pe,we){var Be=pe._id.charAt(0),Ke=pe.side==={x:"top",y:"right"}[Be]?1:-1,Ye=[-1,1,Ke,-Ke];return"inside"!==(we?(pe.minor||{}).ticks:pe.ticks)==("x"===Be)&&(Ye=Ye.map(function(ft){return-ft})),pe.side&&Ye.push({l:-1,t:-1,r:1,b:1}[pe.side.charAt(0)]),Ye},H.makeTransTickFn=function(pe){return"x"===pe._id.charAt(0)?function(we){return n(pe._offset+pe.l2p(we.x),0)}:function(we){return n(0,pe._offset+pe.l2p(we.x))}},H.makeTransTickLabelFn=function(pe){var we=function(Ke){var Ye=Ke.ticklabelposition||"",ft=function(ot){return-1!==Ye.indexOf(ot)},ct=ft("top"),St=ft("left"),Ft=ft("right"),at=ft("bottom"),mt=ft("inside"),qt=at||St||ct||Ft;if(!qt&&!mt)return[0,0];var Et=Ke.side,Dt=qt?(Ke.tickwidth||0)/2:0,Le=3,Xe=Ke.tickfont?Ke.tickfont.size:12;return(at||ct)&&(Dt+=Xe*re,Le+=(Ke.linewidth||0)/2),(St||Ft)&&(Dt+=(Ke.linewidth||0)/2,Le+=3),mt&&"top"===Et&&(Le-=Xe*(1-re)),(St||ct)&&(Dt=-Dt),"bottom"!==Et&&"right"!==Et||(Le=-Le),[qt?Dt:0,mt?Le:0]}(pe),Be=we[0],We=we[1];return"x"===pe._id.charAt(0)?function(Ke){return n(Be+pe._offset+pe.l2p(ut(Ke)),We)}:function(Ke){return n(We,Be+pe._offset+pe.l2p(ut(Ke)))}},H.makeTickPath=function(pe,we,Be,We){We||(We={});var Ke=We.minor;if(Ke&&!pe.minor)return"";var Ye=void 0!==We.len?We.len:Ke?pe.minor.ticklen:pe.ticklen,ft=pe._id.charAt(0),ct=(pe.linewidth||1)/2;return"x"===ft?"M0,"+(we+ct*Be)+"v"+Ye*Be:"M"+(we+ct*Be)+",0h"+Ye*Be},H.makeLabelFns=function(pe,we,Be){var We=pe.ticklabelposition||"",Ke=function(lr){return-1!==We.indexOf(lr)},Ye=Ke("top"),ft=Ke("left"),ct=Ke("right"),St=Ke("bottom")||ft||Ye||ct,Ft=Ke("inside"),at="inside"===We&&"inside"===pe.ticks||!Ft&&"outside"===pe.ticks&&"boundaries"!==pe.tickson,mt=0,qt=0,Et=at?pe.ticklen:0;if(Ft?Et*=-1:St&&(Et=0),at&&(mt+=Et,Be)){var Dt=e.deg2rad(Be);mt=Et*Math.cos(Dt)+1,qt=Et*Math.sin(Dt)}pe.showticklabels&&(at||pe.showline)&&(mt+=.2*pe.tickfont.size);var Le,Xe,ot,dt,Lt,Ut={labelStandoff:mt+=(pe.linewidth||1)/2*(Ft?-1:1),labelShift:qt},$t=0,Wt=pe.side,wr=pe._id.charAt(0),Rr=pe.tickangle;if("x"===wr)dt=(Lt=!Ft&&"bottom"===Wt||Ft&&"top"===Wt)?1:-1,Ft&&(dt*=-1),Le=qt*dt,Xe=we+mt*dt,ot=Lt?1:-.2,90===Math.abs(Rr)&&(Ft?ot+=Z:ot=-90===Rr&&"bottom"===Wt?re:90===Rr&&"top"===Wt?Z:.5,$t=Z/2*(Rr/90)),Ut.xFn=function(lr){return lr.dx+Le+$t*lr.fontSize},Ut.yFn=function(lr){return lr.dy+Xe+lr.fontSize*ot},Ut.anchorFn=function(lr,sr){if(St){if(ft)return"end";if(ct)return"start"}return v(sr)&&0!==sr&&180!==sr?sr*dt<0!==Ft?"end":"start":"middle"},Ut.heightFn=function(lr,sr,_r){return sr<-60||sr>60?-.5*_r:"top"===pe.side!==Ft?-_r:0};else if("y"===wr){if(dt=(Lt=!Ft&&"left"===Wt||Ft&&"right"===Wt)?1:-1,Ft&&(dt*=-1),Le=mt,Xe=qt*dt,ot=0,Ft||90!==Math.abs(Rr)||(ot=-90===Rr&&"left"===Wt||90===Rr&&"right"===Wt?re:.5),Ft){var br=v(Rr)?+Rr:0;if(0!==br){var nr=e.deg2rad(br);$t=Math.abs(Math.sin(nr))*re*dt,ot=0}}Ut.xFn=function(lr){return lr.dx+we-(Le+lr.fontSize*ot)*dt+$t*lr.fontSize},Ut.yFn=function(lr){return lr.dy+Xe+lr.fontSize*Z},Ut.anchorFn=function(lr,sr){return v(sr)&&90===Math.abs(sr)?"middle":Lt?"end":"start"},Ut.heightFn=function(lr,sr,_r){return"right"===pe.side&&(sr*=-1),sr<-30?-_r:sr<30?-.5*_r:0}}return Ut},H.drawTicks=function(pe,we,Be){Be=Be||{};var We=we._id+"tick",Ke=[].concat(we.minor&&we.minor.ticks?Be.vals.filter(function(ft){return ft.minor&&!ft.noTick}):[]).concat(we.ticks?Be.vals.filter(function(ft){return!ft.minor&&!ft.noTick}):[]),Ye=Be.layer.selectAll("path."+We).data(Ke,gt);Ye.exit().remove(),Ye.enter().append("path").classed(We,1).classed("ticks",1).classed("crisp",!1!==Be.crisp).each(function(ft){return t.stroke(m.select(this),ft.minor?we.minor.tickcolor:we.tickcolor)}).style("stroke-width",function(ft){return d.crispRound(pe,ft.minor?we.minor.tickwidth:we.tickwidth,1)+"px"}).attr("d",Be.path).style("display",null),Je(we,[V]),Ye.attr("transform",Be.transFn)},H.drawGrid=function(pe,we,Be){Be=Be||{};var We=we._id+"grid",Ke=we.minor&&we.minor.showgrid,Ye=Ke?Be.vals.filter(function(ot){return ot.minor}):[],ft=we.showgrid?Be.vals.filter(function(ot){return!ot.minor}):[],ct=Be.counterAxis;if(ct&&H.shouldShowZeroLine(pe,we,ct))for(var St="array"===we.tickmode,Ft=0;Ft<ft.length;Ft++){var at=ft[Ft].x;if(St?!at:Math.abs(at)<we.dtick/100){if(ft=ft.slice(0,Ft).concat(ft.slice(Ft+1)),!St)break;Ft--}}we._gw=d.crispRound(pe,we.gridwidth,1);for(var mt=Ke?d.crispRound(pe,we.minor.gridwidth,1):0,qt=Be.layer,Et=Be.minorLayer,Dt=1;Dt>=0;Dt--){var Le=Dt?qt:Et;if(Le){var Xe=Le.selectAll("path."+We).data(Dt?ft:Ye,gt);Xe.exit().remove(),Xe.enter().append("path").classed(We,1).classed("crisp",!1!==Be.crisp),Xe.attr("transform",Be.transFn).attr("d",Be.path).each(function(ot){return t.stroke(m.select(this),ot.minor?we.minor.gridcolor:we.gridcolor||"#ddd")}).style("stroke-dasharray",function(ot){return d.dashStyle(ot.minor?we.minor.griddash:we.griddash,ot.minor?we.minor.gridwidth:we.gridwidth)}).style("stroke-width",function(ot){return(ot.minor?mt:we._gw)+"px"}).style("display",null),"function"==typeof Be.path&&Xe.attr("d",Be.path)}}Je(we,[z,N])},H.drawZeroLine=function(pe,we,Be){var We=we._id+"zl",Ke=H.shouldShowZeroLine(pe,we,(Be=Be||Be).counterAxis),Ye=Be.layer.selectAll("path."+We).data(Ke?[{x:0,id:we._id}]:[]);Ye.exit().remove(),Ye.enter().append("path").classed(We,1).classed("zl",1).classed("crisp",!1!==Be.crisp).each(function(){Be.layer.selectAll("path").sort(function(ft,ct){return $(ft.id,ct.id)})}),Ye.attr("transform",Be.transFn).attr("d",Be.path).call(t.stroke,we.zerolinecolor||t.defaultLine).style("stroke-width",d.crispRound(pe,we.zerolinewidth,we._gw||1)+"px").style("display",null),Je(we,[D])},H.drawLabels=function(pe,we,Be){Be=Be||{};var We=pe._fullLayout,Ke=we._id,Ye=Ke.charAt(0),ft=Be.cls||Ke+"tick",ct=Be.vals.filter(function(dt){return dt.text}),St=Be.labelFns,Ft=Be.secondary?0:we.tickangle,at=(we._prevTickAngles||{})[ft],mt=Be.layer.selectAll("g."+ft).data(we.showticklabels?ct:[],gt),qt=[];function Et(dt,Lt){dt.each(function(Ut){var $t=m.select(this),Wt=$t.select(".text-math-group"),wr=St.anchorFn(Ut,Lt),Rr=Be.transFn.call($t.node(),Ut)+(v(Lt)&&0!=+Lt?" rotate("+Lt+","+St.xFn(Ut)+","+(St.yFn(Ut)-Ut.fontSize/2)+")":""),br=r.lineCount($t),nr=j*Ut.fontSize,lr=St.heightFn(Ut,v(Lt)?+Lt:0,(br-1)*nr);if(lr&&(Rr+=n(0,lr)),Wt.empty()){var sr=$t.select("text");sr.attr({transform:Rr,"text-anchor":wr}),sr.style("opacity",1),we._adjustTickLabelsOverflow&&we._adjustTickLabelsOverflow()}else{var _r=d.bBox(Wt.node()).width*{end:-.5,start:.5}[wr];Wt.attr("transform",Rr+n(_r,0))}})}mt.enter().append("g").classed(ft,1).append("text").attr("text-anchor","middle").each(function(dt){var Lt=m.select(this),Ut=pe._promises.length;Lt.call(r.positionText,St.xFn(dt),St.yFn(dt)).call(d.font,dt.font,dt.fontSize,dt.fontColor).text(dt.text).call(r.convertToTspans,pe),pe._promises[Ut]?qt.push(pe._promises.pop().then(function(){Et(Lt,Ft)})):Et(Lt,Ft)}),Je(we,[X]),mt.exit().remove(),Be.repositionOnUpdate&&mt.each(function(dt){m.select(this).select("text").call(r.positionText,St.xFn(dt),St.yFn(dt))}),we._adjustTickLabelsOverflow=function(){var dt=we.ticklabeloverflow;if(dt&&"allow"!==dt){var Lt=-1!==dt.indexOf("hide"),Ut="x"===we._id.charAt(0),$t=0,Wt=Ut?pe._fullLayout.width:pe._fullLayout.height;if(-1!==dt.indexOf("domain")){var wr=e.simpleMap(we.range,we.r2l);$t=we.l2p(wr[0])+we._offset,Wt=we.l2p(wr[1])+we._offset}var Rr=Math.min($t,Wt),br=Math.max($t,Wt),nr=we.side,lr=1/0,sr=-1/0;for(var _r in mt.each(function(ur){var Tt=m.select(this);if(Tt.select(".text-math-group").empty()){var Qt=d.bBox(Tt.node()),Er=0;Ut?(Qt.right>br||Qt.left<Rr)&&(Er=1):(Qt.bottom>br||Qt.top+(we.tickangle?0:ur.fontSize/4)<Rr)&&(Er=1);var zr=Tt.select("text");Er?Lt&&zr.style("opacity",0):(zr.style("opacity",1),lr="bottom"===nr||"right"===nr?Math.min(lr,Ut?Qt.top:Qt.left):-1/0,sr="top"===nr||"left"===nr?Math.max(sr,Ut?Qt.bottom:Qt.right):1/0)}}),We._plots){var Ar=We._plots[_r];if(we._id===Ar.xaxis._id||we._id===Ar.yaxis._id){var zt=Ut?Ar.yaxis:Ar.xaxis;zt&&(zt["_visibleLabelMin_"+we._id]=lr,zt["_visibleLabelMax_"+we._id]=sr)}}}},we._hideCounterAxisInsideTickLabels=function(dt){var Lt="x"===we._id.charAt(0),Ut=[];for(var $t in We._plots){var Wt=We._plots[$t];we._id!==Wt.xaxis._id&&we._id!==Wt.yaxis._id||Ut.push(Lt?Wt.yaxis:Wt.xaxis)}Ut.forEach(function(wr,Rr){wr&&He(wr)&&(dt||[D,N,z,V,X]).forEach(function(br){var nr="tick"===br.K&&"text"===br.L&&"period"===we.ticklabelmode,lr=We._plots[we._mainSubplot];(br.K===D.K?lr.zerolinelayer.selectAll("."+we._id+"zl"):br.K===N.K?lr.minorGridlayer.selectAll("."+we._id):br.K===z.K?lr.gridlayer.selectAll("."+we._id):lr[we._id.charAt(0)+"axislayer"]).each(function(){var sr=m.select(this);br.L&&(sr=sr.selectAll(br.L)),sr.each(function(_r){var Ar=we.l2p(nr?ut(_r):_r.x)+we._offset,zt=m.select(this);Ar<we["_visibleLabelMax_"+wr._id]&&Ar>we["_visibleLabelMin_"+wr._id]?zt.style("display","none"):"tick"!==br.K||Rr||zt.style("display",null)})})})})},Et(mt,at+1?at:Ft);var Dt=null;we._selections&&(we._selections[ft]=mt);var Le=[function(){return qt.length&&Promise.all(qt)}];we.automargin&&We._redrawFromAutoMarginCount&&90===at?(Dt=90,Le.push(function(){Et(mt,at)})):Le.push(function(){if(Et(mt,Ft),ct.length&&"x"===Ye&&!v(Ft)&&("log"!==we.type||"D"!==String(we.dtick).charAt(0))){Dt=0;var dt,Lt=0,Ut=[];if(mt.each(function(Tt){Lt=Math.max(Lt,Tt.fontSize);var Qt=we.l2p(Tt.x),Er=it(this),zr=d.bBox(Er.node());Ut.push({top:0,bottom:10,height:10,left:Qt-zr.width/2,right:Qt+zr.width/2+2,width:zr.width+2})}),"boundaries"!==we.tickson&&!we.showdividers||Be.secondary){var $t=ct.length,Wt=Math.abs((ct[$t-1].x-ct[0].x)*we._m)/($t-1),wr=we.ticklabelposition||"",Rr=function(Tt){return-1!==wr.indexOf(Tt)},br=Rr("top"),nr=Rr("left"),lr=Rr("right"),sr=Rr("bottom")||nr||br||lr?(we.tickwidth||0)+6:0,_r=Wt<2.5*Lt||"multicategory"===we.type||"realaxis"===we._name;for(dt=0;dt<Ut.length-1;dt++)if(e.bBoxIntersect(Ut[dt],Ut[dt+1],sr)){Dt=_r?90:30;break}}else{var Ar=2;for(we.ticks&&(Ar+=we.tickwidth/2),dt=0;dt<Ut.length;dt++){var zt=ct[dt].xbnd,ur=Ut[dt];if(null!==zt[0]&&ur.left-we.l2p(zt[0])<Ar||null!==zt[1]&&we.l2p(zt[1])-ur.right<Ar){Dt=90;break}}}Dt&&Et(mt,Dt)}}),we._tickAngles&&Le.push(function(){we._tickAngles[ft]=null===Dt?v(Ft)?Ft:0:Dt});var Xe=we._anchorAxis;Xe&&Xe.autorange&&He(we)&&!q(We,we._id)&&(We._insideTickLabelsAutorange||(We._insideTickLabelsAutorange={}),We._insideTickLabelsAutorange[Xe._name+".autorange"]=Xe.autorange,Le.push(function(){mt.each(function(dt,Lt){var Ut=it(this);Ut.select(".text-math-group").empty()&&(we._vals[Lt].bb=d.bBox(Ut.node()))})}));var ot=e.syncOrAsync(Le);return ot&&ot.then&&pe._promises.push(ot),ot},H.getPxPosition=function(pe,we){var Be,We=pe._fullLayout._size,Ke=we._id.charAt(0),Ye=we.side;return"free"!==we.anchor?Be=we._anchorAxis:"x"===Ke?Be={_offset:We.t+(1-(we.position||0))*We.h,_length:0}:"y"===Ke&&(Be={_offset:We.l+(we.position||0)*We.w,_length:0}),"top"===Ye||"left"===Ye?Be._offset:"bottom"===Ye||"right"===Ye?Be._offset+Be._length:void 0},H.shouldShowZeroLine=function(pe,we,Be){var We=e.simpleMap(we.range,we.r2l);return We[0]*We[1]<=0&&we.zeroline&&("linear"===we.type||"-"===we.type)&&!(we.rangebreaks&&we.maskBreaks(0)===E)&&(_t(we,0)||!function(Ke,Ye,ft,ct){var St=ft._mainAxis;if(St){var Ft=Ke._fullLayout,at=Ye._id.charAt(0),mt=H.counterLetter(Ye._id),qt=Ye._offset+(Math.abs(ct[0])<Math.abs(ct[1])==("x"===at)?0:Ye._length),Dt=Ft._plots[ft._mainSubplot];if(!(Dt.mainplotinfo||Dt).overlays.length)return Et(ft);for(var Le=H.list(Ke,mt),Xe=0;Xe<Le.length;Xe++){var ot=Le[Xe];if(ot._mainAxis===St&&Et(ot))return!0}}function Et(dt){if(!dt.showline||!dt.linewidth)return!1;var Lt=Math.max((dt.linewidth+Ye.zerolinewidth)/2,1);function Ut(wr){return"number"==typeof wr&&Math.abs(wr-qt)<Lt}if(Ut(dt._mainLinePosition)||Ut(dt._mainMirrorPosition))return!0;var $t=dt._linepositions||{};for(var Wt in $t)if(Ut($t[Wt][0])||Ut($t[Wt][1]))return!0}}(pe,we,Be,We)||function(Ke,Ye){for(var ft=Ke._fullData,ct=Ye._mainSubplot,St=Ye._id.charAt(0),Ft=0;Ft<ft.length;Ft++){var at=ft[Ft];if(!0===at.visible&&at.xaxis+at.yaxis===ct&&(h.traceIs(at,"bar-like")&&at.orientation==={x:"h",y:"v"}[St]||at.fill&&at.fill.charAt(at.fill.length-1)===St))return!0}return!1}(pe,we))},H.clipEnds=function(pe,we){return we.filter(function(Be){return _t(pe,Be.x)})},H.allowAutoMargin=function(pe){for(var we=H.list(pe,"",!0),Be=0;Be<we.length;Be++){var We=we[Be];We.automargin&&(b.allowAutoMargin(pe,et(We)),We.mirror&&b.allowAutoMargin(pe,wt(We))),h.getComponentMethod("rangeslider","isVisible")(We)&&b.allowAutoMargin(pe,Gt(We))}},H.swap=function(pe,we){for(var Be=function(Ke,Ye){var ft,ct,St=[];for(ft=0;ft<Ye.length;ft++){var Ft=[],at=Ke._fullData[Ye[ft]].xaxis,mt=Ke._fullData[Ye[ft]].yaxis;if(at&&mt){for(ct=0;ct<St.length;ct++)-1===St[ct].x.indexOf(at)&&-1===St[ct].y.indexOf(mt)||Ft.push(ct);if(Ft.length){var qt,Et=St[Ft[0]];if(Ft.length>1)for(ct=1;ct<Ft.length;ct++)Kt(Et.x,(qt=St[Ft[ct]]).x),Kt(Et.y,qt.y);Kt(Et.x,[at]),Kt(Et.y,[mt])}else St.push({x:[at],y:[mt]})}}return St}(pe,we),We=0;We<Be.length;We++)cr(pe,Be[We].x,Be[We].y)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../../constants/numerical").BADNUM,h=v.isArrayOrTypedArray,e=v.isDateTime,n=v.cleanNumber,r=Math.round;function o(d,a){return a?m(d):"number"==typeof d}function t(d){return Math.max(1,(d-1)/1e3)}Q.exports=function(d,a,i){var x,s=d,c=i.noMultiCategory;if(h(s)&&!s.length)return"-";if(!c&&h((x=s)[0])&&h(x[1]))return"multicategory";if(c&&Array.isArray(s[0])){for(var l=[],p=0;p<s.length;p++)if(h(s[p]))for(var g=0;g<s[p].length;g++)l.push(s[p][g]);s=l}if(function(x,f){for(var T=x.length,_=t(T),k=0,w=0,C={},A=0;A<T;A+=_){var P=x[r(A)],S=String(P);C[S]||(C[S]=1,e(P,f)&&k++,m(P)&&w++)}return k>2*w}(s,a))return"date";var u="strict"!==i.autotypenumbers;return function(x,f){for(var T=x.length,_=t(T),k=0,w=0,C={},A=0;A<T;A+=_){var P=x[r(A)],S=String(P);if(!C[S]){C[S]=1;var E=typeof P;"boolean"===E?w++:(f?n(P)!==b:"number"===E)?k++:"string"===E&&w++}}return w>2*k}(s,u)?"category":function(x,f){for(var T=x.length,_=0;_<T;_++)if(o(x[_],f))return!0;return!1}(s,u)?"linear":"-"}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../registry"),b=y("../../lib"),h=y("../../plot_api/plot_template"),e=y("../array_container_defaults"),n=y("./layout_attributes"),r=y("./tick_value_defaults"),o=y("./tick_mark_defaults"),t=y("./tick_label_defaults"),d=y("./prefix_suffix_defaults"),a=y("./category_order_defaults"),i=y("./line_grid_defaults"),s=y("./set_convert"),c=y("./constants").WEEKDAY_PATTERN,l=y("./constants").HOUR_PATTERN;function p(x,f,T){function _(E,D){return b.coerce(x,f,n.rangebreaks,E,D)}if(_("enabled")){var k=_("bounds");if(k&&k.length>=2){var w,C,A="";if(2===k.length)for(w=0;w<2;w++)if(C=u(k[w])){A=c;break}var O=_("pattern",A);if(O===c)for(w=0;w<2;w++)(C=u(k[w]))&&(f.bounds[w]=k[w]=C-1);if(O)for(w=0;w<2;w++)switch(C=k[w],O){case c:if(!m(C)||(C=+C)!==Math.floor(C)||C<0||C>=7)return void(f.enabled=!1);f.bounds[w]=k[w]=C;break;case l:if(!m(C)||(C=+C)<0||C>24)return void(f.enabled=!1);f.bounds[w]=k[w]=C}if(!1===T.autorange){var P=T.range;if(P[0]<P[1]){if(k[0]<P[0]&&k[1]>P[1])return void(f.enabled=!1)}else if(k[0]>P[0]&&k[1]<P[1])return void(f.enabled=!1)}}else{var S=_("values");if(!S||!S.length)return void(f.enabled=!1);_("dvalue")}}}Q.exports=function(x,f,T,_,k){var w,C=_.letter,A=_.font||{},O=_.splomStash||{},P=T("visible",!_.visibleDflt),E=f.type||(f._template||{}).type||"-";"date"===E&&(v.getComponentMethod("calendars","handleDefaults")(x,f,"calendar",_.calendar),_.noTicklabelmode||(w=T("ticklabelmode")));var D="";_.noTicklabelposition&&"multicategory"!==E||(D=b.coerce(x,f,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===w?["outside","inside"]:"x"===C?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||T("ticklabeloverflow",-1!==D.indexOf("inside")?"hide past domain":"category"===E||"multicategory"===E?"allow":"hide past div"),s(f,k);var z=!f.isValidRange(x.range);z&&_.reverseDflt&&(z="reversed"),!T("autorange",z)||"linear"!==E&&"-"!==E||T("rangemode"),T("range"),f.cleanRange(),a(x,f,T,_),"category"===E||_.noHover||T("hoverformat");var N=T("color"),V=N!==n.color.dflt?N:A.color,X=O.label||k._dfltTitle[C];if(d(x,f,T,E,_),!P)return f;T("title.text",X),b.coerceFont(T,"title.font",{family:A.family,size:b.bigFont(A.size),color:V}),r(x,f,T,E);var J=_.hasMinor;if(J&&(h.newContainer(f,"minor"),r(x,f,T,E,{isMinor:!0})),t(x,f,T,E,_),o(x,f,T,_),J){var G=_.isMinor;_.isMinor=!0,o(x,f,T,_),_.isMinor=G}i(x,f,T,{dfltColor:N,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:J,attributes:n}),!J||f.minor.ticks||f.minor.showgrid||delete f.minor,(f.showline||f.ticks)&&T("mirror"),_.automargin&&T("automargin");var Z,re="multicategory"===E;if(_.noTickson||"category"!==E&&!re||!f.ticks&&!f.showgrid||(re&&(Z="boundaries"),"boundaries"===T("tickson",Z)&&delete f.ticklabelposition),re&&T("showdividers")&&(T("dividercolor"),T("dividerwidth")),"date"===E)if(e(x,f,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:p}),f.rangebreaks.length){for(var j=0;j<f.rangebreaks.length;j++)if(f.rangebreaks[j].pattern===c){f._hasDayOfWeekBreaks=!0;break}if(s(f,k),k._has("scattergl")||k._has("splom"))for(var B=0;B<_.data.length;B++){var H=_.data[B];"scattergl"!==H.type&&"splom"!==H.type||(H.visible=!1,b.warn(H.type+" traces do not work on axes with rangebreaks. Setting trace "+H.index+" to `visible: false`."))}}else delete f.rangebreaks;return f};var g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function u(x){if("string"==typeof x)return g[x.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(y,Q,K){"use strict";var m=y("../../constants/docs"),v=m.FORMAT_LINK,b=m.DATE_FORMAT_LINK;function h(n,r){return["Sets the "+n+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+v+"."].join(" ")}function e(n,r){return h(n,r)+[" And for dates see: "+b+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Q.exports={axisHoverFormat:function(n,r){return{valType:"string",dflt:"",editType:"none",description:(r?h:e)("hover text",n)+["By default the values are formatted using "+(r?"generic number format":"`"+n+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:h,descriptionWithDates:e}},{"../../constants/docs":486}],570:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("./constants");function b(h,e){if(e&&e.length)for(var n=0;n<e.length;n++)if(e[n][h])return!0;return!1}K.id2name=function(h){if("string"==typeof h&&h.match(v.AX_ID_PATTERN)){var e=h.split(" ")[0].substr(1);return"1"===e&&(e=""),h.charAt(0)+"axis"+e}},K.name2id=function(h){if(h.match(v.AX_NAME_PATTERN)){var e=h.substr(5);return"1"===e&&(e=""),h.charAt(0)+e}},K.cleanId=function(h,e,n){var r=/( domain)$/.test(h);if("string"==typeof h&&h.match(v.AX_ID_PATTERN)&&(!e||h.charAt(0)===e)&&(!r||n)){var o=h.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===o&&(o=""),h.charAt(0)+o+(r&&n?" domain":"")}},K.list=function(h,e,n){var r=h._fullLayout;if(!r)return[];var o,t=K.listIds(h,e),d=new Array(t.length);for(o=0;o<t.length;o++){var a=t[o];d[o]=r[a.charAt(0)+"axis"+a.substr(1)]}if(!n){var i=r._subplots.gl3d||[];for(o=0;o<i.length;o++){var s=r[i[o]];e?d.push(s[e+"axis"]):d.push(s.xaxis,s.yaxis,s.zaxis)}}return d},K.listIds=function(h,e){var n=h._fullLayout;if(!n)return[];var r=n._subplots;return e?r[e+"axis"]:r.xaxis.concat(r.yaxis)},K.getFromId=function(h,e,n){var r=h._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===n?e=e.replace(/y[0-9]*/,""):"y"===n&&(e=e.replace(/x[0-9]*/,"")),r[K.id2name(e)]},K.getFromTrace=function(h,e,n){var r=h._fullLayout,o=null;if(m.traceIs(e,"gl3d")){var t=e.scene;"scene"===t.substr(0,5)&&(o=r[t][n+"axis"])}else o=K.getFromId(h,e[n+"axis"]||n);return o},K.idSort=function(h,e){var n=h.charAt(0),r=e.charAt(0);return n!==r?n>r?1:-1:+(h.substr(1)||1)-+(e.substr(1)||1)},K.ref2id=function(h){return!!/^[xyz]/.test(h)&&h.split(" ")[0]},K.isLinked=function(h,e){return b(e,h._axisMatchGroups)||b(e,h._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h){if("category"===v.type){var e,n=m.categoryarray,r=Array.isArray(n)&&n.length>0;r&&(e="array");var o,t=b("categoryorder",e);"array"===t&&(o=b("categoryarray")),r||"array"!==t||(t=v.categoryorder="trace"),"trace"===t?v._initialCategories=[]:"array"===t?v._initialCategories=o.slice():(o=function(d,a){var i,s,c,l=a.dataAttr||d._id.charAt(0),p={};if(a.axData)i=a.axData;else for(i=[],s=0;s<a.data.length;s++){var g=a.data[s];g[l+"axis"]===d._id&&i.push(g)}for(s=0;s<i.length;s++){var u=i[s][l];for(c=0;c<u.length;c++){var x=u[c];null!=x&&(p[x]=1)}}return Object.keys(p)}(v,h).sort(),"category ascending"===t?v._initialCategories=o:"category descending"===t&&(v._initialCategories=o.reverse()))}}},{}],572:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../../constants/numerical"),h=b.ONEDAY,e=b.ONEWEEK;K.dtick=function(n,r){var o="log"===r,t="date"===r,d="category"===r,a=t?h:1;if(!n)return a;if(m(n))return(n=Number(n))<=0?a:d?Math.max(1,Math.round(n)):t?Math.max(.1,n):n;if("string"!=typeof n||!t&&!o)return a;var i=n.charAt(0),s=n.substr(1);return(s=m(s)?Number(s):0)<=0||!(t&&"M"===i&&s===Math.round(s)||o&&"L"===i||o&&"D"===i&&(1===s||2===s))?a:n},K.tick0=function(n,r,o,t){return"date"===r?v.cleanDate(n,v.dateTick0(o,t%e==0?1:0)):"D1"!==t&&"D2"!==t?m(n)?Number(n):0:void 0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(y,Q,K){"use strict";var m=y("../../lib/regex").counter;Q.exports={idRegex:{x:m("x","( domain)?"),y:m("y","( domain)?")},attrRegex:m("[xy]axis"),xAxisMatch:m("xaxis"),yAxisMatch:m("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./autorange"),b=y("./axis_ids").id2name,h=y("./layout_attributes"),e=y("./scale_zoom"),n=y("./set_convert"),r=y("../../constants/numerical").ALMOST_EQUAL,o=y("../../constants/alignment").FROM_BL;function t(p,g,u){var x=u.axIds,f=u.layoutOut,T=u.hasImage,_=f._axisConstraintGroups,k=f._axisMatchGroups,w=g._id,C=w.charAt(0),A=((f._splomAxes||{})[C]||{})[w]||{},O=g._id,P="x"===O.charAt(0);function S(ee,U){return m.coerce(p,g,h,ee,U)}g._matchGroup=null,g._constraintGroup=null,S("constrain",T?"domain":"range"),m.coerce(p,g,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var E,D,z=g.type,N=[];for(E=0;E<x.length;E++)(D=x[E])!==O&&f[b(D)].type===z&&N.push(D);var V=a(_,O);if(V){var X=[];for(E=0;E<N.length;E++)V[D=N[E]]||X.push(D);N=X}var J,G,Z=N.length;Z&&(p.matches||A.matches)&&(J=m.coerce(p,g,{matches:{valType:"enumerated",values:N,dflt:-1!==N.indexOf(A.matches)?A.matches:void 0}},"matches"));var re=T&&!P?g.anchor:void 0;if(Z&&!J&&(p.scaleanchor||re)&&(G=m.coerce(p,g,{scaleanchor:{valType:"enumerated",values:N}},"scaleanchor",re)),J){g._matchGroup=i(k,O,J,1);var j=f[b(J)],B=d(f,g)/d(f,j);P!==("x"===J.charAt(0))&&(B=(P?"x":"y")+B),i(_,O,J,B)}else p.matches&&-1!==x.indexOf(p.matches)&&m.warn("ignored "+g._name+'.matches: "'+p.matches+'" to avoid an infinite loop');if(G){var H=S("scaleratio");H||(H=g.scaleratio=1),i(_,O,G,H)}else p.scaleanchor&&-1!==x.indexOf(p.scaleanchor)&&m.warn("ignored "+g._name+'.scaleanchor: "'+p.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function d(p,g){var u=g.domain;return u||(u=p[b(g.overlaying)].domain),u[1]-u[0]}function a(p,g){for(var u=0;u<p.length;u++)if(p[u][g])return p[u];return null}function i(p,g,u,x){var f,T,_,k,w,C=a(p,g);null===C?((C={})[g]=1,w=p.length,p.push(C)):w=p.indexOf(C);var A=Object.keys(C);for(f=0;f<p.length;f++)if(_=p[f],f!==w&&_[u]){var O=_[u];for(T=0;T<A.length;T++)_[k=A[T]]=s(O,s(x,C[k]));return void p.splice(w,1)}if(1!==x)for(T=0;T<A.length;T++){var P=A[T];C[P]=s(x,C[P])}C[u]=1}function s(p,g){var u,x,f="",T="";"string"==typeof p&&(u=(f=p.match(/^[xy]*/)[0]).length,p=+p.substr(u)),"string"==typeof g&&(x=(T=g.match(/^[xy]*/)[0]).length,g=+g.substr(x));var _=p*g;return u||x?u&&x&&f.charAt(0)!==T.charAt(0)?u===x?_:(u>x?f.substr(x):T.substr(u))+_:f+T+p*g:_}function c(p,g){for(var u=g._size,x=u.h/u.w,f={},T=Object.keys(p),_=0;_<T.length;_++){var k=T[_],w=p[k];if("string"==typeof w){var C=w.match(/^[xy]*/)[0],A=C.length;w=+w.substr(A);for(var O="y"===C.charAt(0)?x:1/x,P=0;P<A;P++)w*=O}f[k]=w}return f}function l(p,g){var u=p._inputDomain,f=u[0]+(u[1]-u[0])*o[p.constraintoward];p.domain=p._input.domain=[f+(u[0]-f)/g,f+(u[1]-f)/g],p.setScale()}K.handleDefaults=function(p,g,u){var x,f,T,_,k,w,C,A,O=u.axIds,P=u.axHasImage,S=g._axisConstraintGroups=[],E=g._axisMatchGroups=[];for(x=0;x<O.length;x++)t(k=p[_=b(O[x])],w=g[_],{axIds:O,layoutOut:g,hasImage:P[_]});function D(j,B){for(x=0;x<j.length;x++)for(T in f=j[x])g[b(T)][B]=f}for(D(E,"_matchGroup"),x=0;x<S.length;x++)for(T in f=S[x])if((w=g[b(T)]).fixedrange){for(var z in f){var N=b(z);!1===(p[N]||{}).fixedrange&&m.warn("fixedrange was specified as false for axis "+N+" but was overridden because another axis in its constraint group has fixedrange true"),g[N].fixedrange=!0}break}for(x=0;x<S.length;){for(T in f=S[x]){(w=g[b(T)])._matchGroup&&Object.keys(w._matchGroup).length===Object.keys(f).length&&(S.splice(x,1),x--);break}x++}D(S,"_constraintGroup");var V=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],X=!1,J=!1;function G(){A=w[C],"rangebreaks"===C&&(J=w._hasDayOfWeekBreaks)}for(x=0;x<E.length;x++){f=E[x];for(var Z=0;Z<V.length;Z++){var re;for(T in C=V[Z],A=null,f)if(k=p[_=b(T)],C in(w=g[_])){if(!w.matches&&(re=w,C in k)){G();break}null===A&&C in k&&G()}if("range"===C&&A&&(X=!0),"autorange"===C&&null===A&&X&&(A=!1),null===A&&C in re&&(A=re[C]),null!==A)for(T in f)(w=g[b(T)])[C]="range"===C?A.slice():A,"rangebreaks"===C&&(w._hasDayOfWeekBreaks=J,n(w,g))}}},K.enforce=function(p){var g,u,x,f,T,_,k,w,C=p._fullLayout,A=C._axisConstraintGroups||[];for(g=0;g<A.length;g++){x=c(A[g],C);var O=Object.keys(x),P=1/0,S=0,E=1/0,D={},z={},N=!1;for(u=0;u<O.length;u++)z[f=O[u]]=T=C[b(f)],T._inputDomain?T.domain=T._inputDomain.slice():T._inputDomain=T.domain.slice(),T._inputRange||(T._inputRange=T.range.slice()),T.setScale(),D[f]=_=Math.abs(T._m)/x[f],P=Math.min(P,_),"domain"!==T.constrain&&T._constraintShrinkable||(E=Math.min(E,_)),delete T._constraintShrinkable,S=Math.max(S,_),"domain"===T.constrain&&(N=!0);if(!(P>r*S)||N)for(u=0;u<O.length;u++)if(_=D[f=O[u]],k=(T=z[f]).constrain,_!==E||"domain"===k)if(w=_/E,"range"===k)e(T,w);else{var V=T._inputDomain,X=(T.domain[1]-T.domain[0])/(V[1]-V[0]),J=(T.r2l(T.range[1])-T.r2l(T.range[0]))/(T.r2l(T._inputRange[1])-T.r2l(T._inputRange[0]));if((w/=X)*J<1){T.domain=T._input.domain=V.slice(),e(T,w);continue}if(J<1&&(T.range=T._input.range=T._inputRange.slice(),w*=J),T.autorange){var G=T.r2l(T.range[0]),Z=T.r2l(T.range[1]),re=(G+Z)/2,j=re,B=re,H=Math.abs(Z-re),ee=re-H*w*1.0001,U=re+H*w*1.0001,$=v.makePadFn(C,T,0),q=v.makePadFn(C,T,1);l(T,w);var te,ne,se=Math.abs(T._m),ie=v.concatExtremes(p,T),ue=ie.min,le=ie.max;for(ne=0;ne<ue.length;ne++)(te=ue[ne].val-$(ue[ne])/se)>ee&&te<j&&(j=te);for(ne=0;ne<le.length;ne++)(te=le[ne].val+q(le[ne])/se)<U&&te>B&&(B=te);w/=(B-j)/(2*H),j=T.l2r(j),B=T.l2r(B),T.range=T._input.range=G<Z?[j,B]:[B,j]}l(T,w)}}},K.getAxisGroup=function(p,g){for(var u=p._axisMatchGroups,x=0;x<u.length;x++)if(u[x][g])return"g"+x;return g},K.clean=function(p,g){if(g._inputDomain){for(var u=!1,x=g._id,f=p._fullLayout._axisConstraintGroups,T=0;T<f.length;T++)if(f[T][x]){u=!0;break}u&&"domain"===g.constrain||(g._input.domain=g.domain=g._inputDomain,delete g._inputDomain)}}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=v.numberFormat,h=y("tinycolor2"),e=y("has-passive-events"),n=y("../../registry"),r=v.strTranslate,o=y("../../lib/svg_text_utils"),t=y("../../components/color"),d=y("../../components/drawing"),a=y("../../components/fx"),i=y("./axes"),s=y("../../lib/setcursor"),c=y("../../components/dragelement"),l=y("../../components/dragelement/helpers"),p=l.selectingOrDrawing,g=l.freeMode,u=y("../../constants/alignment").FROM_TL,x=y("../../lib/clear_gl_canvases"),f=y("../../plot_api/subroutines").redrawReglTraces,T=y("../plots"),_=y("./axis_ids").getFromId,k=y("../../components/selections").prepSelect,w=y("../../components/selections").clearOutline,C=y("../../components/selections").selectOnClick,A=y("./scale_zoom"),O=y("./constants"),P=O.MINDRAG,S=O.MINZOOM,E=!0;function D(te,ne,se,ie){var ue=v.ensureSingle(te.draglayer,ne,se,function(le){le.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",te.id)});return ue.call(s,ie),ue.node()}function z(te,ne,se,ie,ue,le,de){var be=D(te,"rect",ne,se);return m.select(be).call(d.setRect,ie,ue,le,de),be}function N(te,ne){for(var se=0;se<te.length;se++)if(!te[se].fixedrange)return ne;return""}function V(te,ne,se,ie,ue){for(var le=0;le<te.length;le++){var de=te[le];if(!de.fixedrange)if(de.rangebreaks){var be="y"===de._id.charAt(0),xe=be?1-se:se;ie[de._name+".range[0]"]=de.l2r(de.p2l((be?1-ne:ne)*de._length)),ie[de._name+".range[1]"]=de.l2r(de.p2l(xe*de._length))}else{var Ee=de._rl[0],he=de._rl[1]-Ee;ie[de._name+".range[0]"]=de.l2r(Ee+he*ne),ie[de._name+".range[1]"]=de.l2r(Ee+he*se)}}if(ue&&ue.length){var me=(ne+(1-se))/2;V(ue,me,1-me,ie,[])}}function X(te,ne){for(var se=0;se<te.length;se++){var ie=te[se];if(!ie.fixedrange)if(ie.rangebreaks){var ue=ie._length,le=(ie.p2l(0+ne)-ie.p2l(0)+(ie.p2l(ue+ne)-ie.p2l(ue)))/2;ie.range=[ie.l2r(ie._rl[0]-le),ie.l2r(ie._rl[1]-le)]}else ie.range=[ie.l2r(ie._rl[0]-ne/ie._m),ie.l2r(ie._rl[1]-ne/ie._m)]}}function J(te){return 1-(te>=0?Math.min(te,.9):1/(1/Math.max(te,-.3)+3.222))}function G(te,ne,se,ie,ue){return te.append("path").attr("class","zoombox").style({fill:ne>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",r(se,ie)).attr("d",ue+"Z")}function Z(te,ne,se){return te.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("transform",r(ne,se)).attr("d","M0,0Z")}function re(te,ne,se,ie,ue,le){te.attr("d",ie+"M"+se.l+","+se.t+"v"+se.h+"h"+se.w+"v-"+se.h+"h-"+se.w+"Z"),j(te,ne,ue,le)}function j(te,ne,se,ie){se||(te.transition().style("fill",ie>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ne.transition().style("opacity",1).duration(200))}function B(te){m.select(te).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function H(te){E&&te.data&&te._context.showTips&&(v.notifier(v._(te,"Double-click to zoom back out"),"long"),E=!1)}function ee(te){var ne=Math.floor(Math.min(te.b-te.t,te.r-te.l,S)/2);return"M"+(te.l-3.5)+","+(te.t-.5+ne)+"h3v"+-ne+"h"+ne+"v-3h-"+(ne+3)+"ZM"+(te.r+3.5)+","+(te.t-.5+ne)+"h-3v"+-ne+"h"+-ne+"v-3h"+(ne+3)+"ZM"+(te.r+3.5)+","+(te.b+.5-ne)+"h-3v"+ne+"h"+-ne+"v3h"+(ne+3)+"ZM"+(te.l-3.5)+","+(te.b+.5-ne)+"h3v"+ne+"h"+ne+"v3h-"+(ne+3)+"Z"}function U(te,ne,se,ie,ue){for(var le,de,be,_e,xe=!1,Ee={},he={},me=(ue||{}).xaHash,Se=(ue||{}).yaHash,Me=0;Me<ne.length;Me++){var Ie=ne[Me];for(le in se)if(Ie[le]){for(be in Ie)ue&&(me[be]||Se[be])||("x"===be.charAt(0)?se:ie)[be]||(Ee[be]=le);for(de in ie)ue&&(me[de]||Se[de])||!Ie[de]||(xe=!0)}for(de in ie)if(Ie[de])for(_e in Ie)ue&&(me[_e]||Se[_e])||("x"===_e.charAt(0)?se:ie)[_e]||(he[_e]=de)}xe&&(v.extendFlat(Ee,he),he={});var Fe={},Ne=[];for(be in Ee){var De=_(te,be);Ne.push(De),Fe[De._id]=De}var $e={},Re=[];for(_e in he){var ze=_(te,_e);Re.push(ze),$e[ze._id]=ze}return{xaHash:Fe,yaHash:$e,xaxes:Ne,yaxes:Re,xLinks:Ee,yLinks:he,isSubplotConstrained:xe}}function $(te,ne){if(e){var se=void 0!==te.onwheel?"wheel":"mousewheel";te._onwheel&&te.removeEventListener(se,te._onwheel),te._onwheel=ne,te.addEventListener(se,ne,{passive:!1})}else void 0!==te.onwheel?te.onwheel=ne:void 0!==te.onmousewheel?te.onmousewheel=ne:te.isAddedWheelEvent||(te.isAddedWheelEvent=!0,te.addEventListener("wheel",ne,{passive:!1}))}function q(te){var ne=[];for(var se in te)ne.push(te[se]);return ne}Q.exports={makeDragBox:function(te,ne,se,ie,ue,le,de,be){var _e,xe,Ee,he,me,Se,Me,Ie,Fe,Ne,De,$e,Re,ze,Ue,je,rt,ut,gt,At,_t,it,et,wt=te._fullLayout._zoomlayer,Gt=de+be==="nsew",Kt=1===(de+be).length;function cr(){if(Fe=(_e=ne.xaxis)._length,Ne=(xe=ne.yaxis)._length,Me=_e._offset,Ie=xe._offset,(Ee={})[_e._id]=_e,(he={})[xe._id]=xe,de&&be)for(var nr=ne.overlays,lr=0;lr<nr.length;lr++){var sr=nr[lr].xaxis;Ee[sr._id]=sr;var _r=nr[lr].yaxis;he[_r._id]=_r}me=q(Ee),Se=q(he),Re=N(me,be),ze=N(Se,de),Ue=!ze&&!Re,$e=U(te,te._fullLayout._axisMatchGroups,Ee,he);var Ar=(De=U(te,te._fullLayout._axisConstraintGroups,Ee,he,$e)).isSubplotConstrained||$e.isSubplotConstrained;je=be||Ar,rt=de||Ar;var zt=te._fullLayout;ut=zt._has("scattergl"),gt=zt._has("splom"),At=zt._has("svg")}cr();var nr,ar=(nr=ze+Re)?"nsew"===nr?Gt?"":"pan"===te._fullLayout.dragmode?"move":"crosshair":nr.toLowerCase()+"-resize":"pointer",hr=z(ne,de+be+"drag",ar,se,ie,ue,le);if(Ue&&!Gt)return hr.onmousedown=null,hr.style.pointerEvents="none",hr;var Xt,He,Je,pe,we,Be,We,Ke,Ye,ft,ct={element:hr,gd:te,plotinfo:ne};function St(){ct.plotinfo.selection=!1,w(te)}function Ft(nr,lr){var zr,an,Kr,sn,gn,sr=ct.gd;if(sr._fullLayout._activeShapeIndex>=0)sr._fullLayout._deactivateShape(sr);else{var _r=sr._fullLayout.clickmode;if(B(sr),2!==nr||Kt||function Ut(){if(!te._transitioningWithDuration){var nr=te._context.doubleClick,lr=[];Re&&(lr=lr.concat(me)),ze&&(lr=lr.concat(Se)),$e.xaxes&&(lr=lr.concat($e.xaxes)),$e.yaxes&&(lr=lr.concat($e.yaxes));var sr,_r,Ar,zt={};if("reset+autosize"===nr)for(nr="autosize",_r=0;_r<lr.length;_r++)if((sr=lr[_r])._rangeInitial&&(sr.range[0]!==sr._rangeInitial[0]||sr.range[1]!==sr._rangeInitial[1])||!sr._rangeInitial&&!sr.autorange){nr="reset";break}if("autosize"===nr)for(_r=0;_r<lr.length;_r++)(sr=lr[_r]).fixedrange||(zt[sr._name+".autorange"]=!0);else if("reset"===nr)for((Re||De.isSubplotConstrained)&&(lr=lr.concat(De.xaxes)),ze&&!De.isSubplotConstrained&&(lr=lr.concat(De.yaxes)),De.isSubplotConstrained&&(Re?ze||(lr=lr.concat(Se)):lr=lr.concat(me)),_r=0;_r<lr.length;_r++)(sr=lr[_r]).fixedrange||(sr._rangeInitial?(zt[sr._name+".range[0]"]=(Ar=sr._rangeInitial)[0],zt[sr._name+".range[1]"]=Ar[1]):zt[sr._name+".autorange"]=!0);te.emit("plotly_doubleclick",null),n.call("_guiRelayout",te,zt)}}(),Gt)_r.indexOf("select")>-1&&C(lr,sr,me,Se,ne.id,ct),_r.indexOf("event")>-1&&a.click(sr,lr,ne.id);else if(1===nr&&Kt){var Ar=de?xe:_e,zt="s"===de||"w"===be?0:1,ur=Ar._name+".range["+zt+"]",Tt=(sn=(zr=Ar).range[an=zt],gn=Math.abs(sn-zr.range[1-an]),"date"===zr.type?sn:"log"===zr.type?(Kr=Math.ceil(Math.max(0,-Math.log(gn)/Math.LN10))+3,b("."+Kr+"g")(Math.pow(10,sn))):(Kr=Math.floor(Math.log(Math.abs(sn))/Math.LN10)-Math.floor(Math.log(gn)/Math.LN10)+4,b("."+String(Kr)+"g")(sn))),Qt="left",Er="middle";if(Ar.fixedrange)return;de?(Er="n"===de?"top":"bottom","right"===Ar.side&&(Qt="right")):"e"===be&&(Qt="right"),sr._context.showAxisRangeEntryBoxes&&m.select(hr).call(o.makeEditable,{gd:sr,immediate:!0,background:sr._fullLayout.paper_bgcolor,text:String(Tt),fill:Ar.tickfont?Ar.tickfont.color:"#444",horizontalAlign:Qt,verticalAlign:Er}).on("edit",function(zr){var an=Ar.d2r(zr);void 0!==an&&n.call("_guiRelayout",sr,ur,an)})}}}function at(nr,lr){if(te._transitioningWithDuration)return!1;var Er,zr,sr=Math.max(0,Math.min(Fe,it*nr+Xt)),_r=Math.max(0,Math.min(Ne,et*lr+He)),Ar=Math.abs(sr-Xt),zt=Math.abs(_r-He);function ur(){We="",Je.r=Je.l,Je.t=Je.b,Ye.attr("d","M0,0Z")}if(Je.l=Math.min(Xt,sr),Je.r=Math.max(Xt,sr),Je.t=Math.min(He,_r),Je.b=Math.max(He,_r),De.isSubplotConstrained)Ar>S||zt>S?(We="xy",Ar/Fe>zt/Ne?(zt=Ar*Ne/Fe,He>_r?Je.t=He-zt:Je.b=He+zt):(Ar=zt*Fe/Ne,Xt>sr?Je.l=Xt-Ar:Je.r=Xt+Ar),Ye.attr("d",ee(Je))):ur();else if($e.isSubplotConstrained)if(Ar>S||zt>S){We="xy";var Tt=Math.min(Je.l/Fe,(Ne-Je.b)/Ne),Qt=Math.max(Je.r/Fe,(Ne-Je.t)/Ne);Je.l=Tt*Fe,Je.r=Qt*Fe,Je.b=(1-Tt)*Ne,Je.t=(1-Qt)*Ne,Ye.attr("d",ee(Je))}else ur();else!ze||zt<Math.min(Math.max(.6*Ar,P),S)?Ar<P||!Re?ur():(Je.t=0,Je.b=Ne,We="x",Ye.attr("d","M"+((Er=Je).l-.5)+","+((zr=He)-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(Er.r+.5)+","+(zr-S-.5)+"h3v"+(2*S+1)+"h-3Z")):!Re||Ar<Math.min(.6*zt,S)?(Je.l=0,Je.r=Fe,We="y",Ye.attr("d",function(Er,zr){return"M"+(zr-S-.5)+","+(Er.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(zr-S-.5)+","+(Er.b+.5)+"v3h"+(2*S+1)+"v-3Z"}(Je,Xt))):(We="xy",Ye.attr("d",ee(Je)));Je.w=Je.r-Je.l,Je.h=Je.b-Je.t,We&&(ft=!0),te._dragged=ft,re(Ke,Ye,Je,we,Be,pe),mt(),te.emit("plotly_relayouting",_t),Be=!0}function mt(){_t={},"xy"!==We&&"x"!==We||(V(me,Je.l/Fe,Je.r/Fe,_t,De.xaxes),dt("x",_t)),"xy"!==We&&"y"!==We||(V(Se,(Ne-Je.b)/Ne,(Ne-Je.t)/Ne,_t,De.yaxes),dt("y",_t))}function qt(){mt(),B(te),$t(),H(te)}ct.prepFn=function(nr,lr,sr){var _r=ct.dragmode,Ar=te._fullLayout.dragmode;Ar!==_r&&(ct.dragmode=Ar),cr(),it=te._fullLayout._invScaleX,et=te._fullLayout._invScaleY,Ue||(Gt?nr.shiftKey?"pan"===Ar?Ar="zoom":p(Ar)||(Ar="pan"):nr.ctrlKey&&(Ar="pan"):Ar="pan"),ct.minDrag=g(Ar)?1:void 0,p(Ar)?(ct.xaxes=me,ct.yaxes=Se,k(nr,lr,sr,ct,Ar)):(ct.clickFn=Ft,p(_r)&&St(),Ue||("zoom"===Ar?(ct.moveFn=at,ct.doneFn=qt,ct.minDrag=1,function(zt,ur,Tt){var Qt=hr.getBoundingClientRect();Xt=ur-Qt.left,He=Tt-Qt.top,te._fullLayout._calcInverseTransform(te);var Er=v.apply3DTransform(te._fullLayout._invTransform)(Xt,He);Je={l:Xt=Er[0],r:Xt,w:0,t:He=Er[1],b:He,h:0},pe=te._hmpixcount?te._hmlumcount/te._hmpixcount:h(te._fullLayout.plot_bgcolor).getLuminance(),Be=!1,We="xy",ft=!1,Ke=G(wt,pe,Me,Ie,we="M0,0H"+Fe+"V"+Ne+"H0V0"),Ye=Z(wt,Me,Ie)}(0,lr,sr)):"pan"===Ar&&(ct.moveFn=ot,ct.doneFn=$t))),te._fullLayout._redrag=function(){var zt=te._dragdata;zt&&zt.element===hr&&(p(te._fullLayout.dragmode)||(cr(),Wt([0,0,Fe,Ne]),ct.moveFn(zt.dx,zt.dy)))}},c.init(ct);var Et=[0,0,Fe,Ne],Dt=null,Le=O.REDRAWDELAY,Xe=ne.mainplot?te._fullLayout._plots[ne.mainplot]:ne;function ot(nr,lr){if(nr*=it,lr*=et,!te._transitioningWithDuration){if(te._fullLayout._replotting=!0,"ew"===Re||"ns"===ze){var sr=Re?-nr:0,_r=ze?-lr:0;if($e.isSubplotConstrained){if(Re&&ze){var Ar=(nr/Fe-lr/Ne)/2;sr=-(nr=Ar*Fe),_r=-(lr=-Ar*Ne)}ze?sr=-_r*Fe/Ne:_r=-sr*Ne/Fe}return Re&&(X(me,nr),dt("x")),ze&&(X(Se,lr),dt("y")),Wt([sr,_r,Fe,Ne]),Lt(),void te.emit("plotly_relayouting",_t)}var zt,ur,Tt="w"===Re==("n"===ze)?1:-1;if(Re&&ze&&(De.isSubplotConstrained||$e.isSubplotConstrained)){var Qt=(nr/Fe+Tt*lr/Ne)/2;nr=Qt*Fe,lr=Tt*Qt*Ne}if("w"===Re?nr=Kr(me,0,nr):"e"===Re?nr=Kr(me,1,-nr):Re||(nr=0),"n"===ze?lr=Kr(Se,1,lr):"s"===ze?lr=Kr(Se,0,-lr):ze||(lr=0),zt="w"===Re?nr:0,ur="n"===ze?lr:0,De.isSubplotConstrained&&!$e.isSubplotConstrained||$e.isSubplotConstrained&&Re&&ze&&Tt>0){var Er;if($e.isSubplotConstrained||!Re&&1===ze.length){for(Er=0;Er<me.length;Er++)me[Er].range=me[Er]._r.slice(),A(me[Er],1-lr/Ne);zt=(nr=lr*Fe/Ne)/2}if($e.isSubplotConstrained||!ze&&1===Re.length){for(Er=0;Er<Se.length;Er++)Se[Er].range=Se[Er]._r.slice(),A(Se[Er],1-nr/Fe);ur=(lr=nr*Ne/Fe)/2}}$e.isSubplotConstrained&&ze||dt("x"),$e.isSubplotConstrained&&Re||dt("y");var zr=Fe-nr,an=Ne-lr;!$e.isSubplotConstrained||Re&&ze||(Re?(ur=zt?0:nr*Ne/Fe,an=zr*Ne/Fe):(zt=ur?0:lr*Fe/Ne,zr=an*Fe/Ne)),Wt([zt,ur,zr,an]),Lt(),te.emit("plotly_relayouting",_t)}function Kr(sn,gn,zn){for(var Vr,_n,Qr=1-gn,Jr=0;Jr<sn.length;Jr++){var Nn=sn[Jr];if(!Nn.fixedrange){Vr=Nn,_n=Nn._rl[Qr]+(Nn._rl[gn]-Nn._rl[Qr])/J(zn/Nn._length);var Hn=Nn.l2r(_n);!1!==Hn&&void 0!==Hn&&(Nn.range[gn]=Hn)}}return Vr._length*(Vr._rl[gn]-_n)/(Vr._rl[gn]-Vr._rl[Qr])}}function dt(nr,lr){for(var sr=$e.isSubplotConstrained?{x:Se,y:me}[nr]:$e[nr+"axes"],_r=$e.isSubplotConstrained?{x:me,y:Se}[nr]:[],Ar=0;Ar<sr.length;Ar++){var zt=sr[Ar],ur=zt._id,Tt=$e.xLinks[ur]||$e.yLinks[ur],Qt=_r[0]||Ee[Tt]||he[Tt];Qt&&(lr?(lr[zt._name+".range[0]"]=lr[Qt._name+".range[0]"],lr[zt._name+".range[1]"]=lr[Qt._name+".range[1]"]):zt.range=Qt.range.slice())}}function Lt(){var nr,lr=[];function sr(zt){for(nr=0;nr<zt.length;nr++)zt[nr].fixedrange||lr.push(zt[nr]._id)}for(je&&(sr(me),sr(De.xaxes),sr($e.xaxes)),rt&&(sr(Se),sr(De.yaxes),sr($e.yaxes)),_t={},nr=0;nr<lr.length;nr++){var Ar=_(te,lr[nr]);i.drawOne(te,Ar,{skipTitle:!0}),_t[Ar._name+".range[0]"]=Ar.range[0],_t[Ar._name+".range[1]"]=Ar.range[1]}i.redrawComponents(te,lr)}function $t(){Wt([0,0,Fe,Ne]),v.syncOrAsync([T.previousPromises,function(){te._fullLayout._replotting=!1,n.call("_guiRelayout",te,_t)}],te)}function Wt(nr){var lr,sr,_r,Ar,zt=te._fullLayout,ur=zt._plots,Tt=zt._subplots.cartesian;if(gt&&n.subplotsRegistry.splom.drag(te),ut)for(lr=0;lr<Tt.length;lr++)if(_r=(sr=ur[Tt[lr]]).xaxis,Ar=sr.yaxis,sr._scene){var Qt=v.simpleMap(_r.range,_r.r2l),Er=v.simpleMap(Ar.range,Ar.r2l);sr._scene.update({range:[Qt[0],Er[0],Qt[1],Er[1]]})}if((gt||ut)&&(x(te),f(te)),At){var zr=nr[2]/_e._length,an=nr[3]/xe._length;for(lr=0;lr<Tt.length;lr++){_r=(sr=ur[Tt[lr]]).xaxis,Ar=sr.yaxis;var Kr,sn,gn,zn,_n=(rt||$e.isSubplotConstrained)&&!Ar.fixedrange&&he[Ar._id];if((je||$e.isSubplotConstrained)&&!_r.fixedrange&&Ee[_r._id]?(Kr=zr,gn=be||$e.isSubplotConstrained?nr[0]:br(_r,Kr)):$e.xaHash[_r._id]?(Kr=zr,gn=nr[0]*_r._length/_e._length):$e.yaHash[_r._id]?(Kr=an,gn="ns"===ze?-nr[1]*_r._length/xe._length:br(_r,Kr,{n:"top",s:"bottom"}[ze])):gn=Rr(_r,Kr=wr(_r,zr,an)),_n?(sn=an,zn=de||$e.isSubplotConstrained?nr[1]:br(Ar,sn)):$e.yaHash[Ar._id]?(sn=an,zn=nr[1]*Ar._length/xe._length):$e.xaHash[Ar._id]?(sn=zr,zn="ew"===Re?-nr[0]*Ar._length/_e._length:br(Ar,sn,{e:"right",w:"left"}[Re])):zn=Rr(Ar,sn=wr(Ar,zr,an)),Kr||sn){Kr||(Kr=1),sn||(sn=1);var Qr=_r._offset-gn/Kr,Jr=Ar._offset-zn/sn;sr.clipRect.call(d.setTranslate,gn,zn).call(d.setScale,Kr,sn),sr.plot.call(d.setTranslate,Qr,Jr).call(d.setScale,1/Kr,1/sn),Kr===sr.xScaleFactor&&sn===sr.yScaleFactor||(d.setPointGroupScale(sr.zoomScalePts,Kr,sn),d.setTextPointsScale(sr.zoomScaleTxt,Kr,sn)),d.hideOutsideRangePoints(sr.clipOnAxisFalseTraces,sr),sr.xScaleFactor=Kr,sr.yScaleFactor=sn}}}}function wr(nr,lr,sr){return nr.fixedrange?0:je&&De.xaHash[nr._id]?lr:rt&&(De.isSubplotConstrained?De.xaHash:De.yaHash)[nr._id]?sr:0}function Rr(nr,lr){return lr?(nr.range=nr._r.slice(),A(nr,lr),br(nr,lr)):0}function br(nr,lr,sr){return nr._length*(1-lr)*u[sr||nr.constraintoward||"middle"]}return de.length*be.length!=1&&$(hr,function(nr){if(te._context._scrollZoom.cartesian||te._fullLayout._enablescrollzoom){if(St(),te._transitioningWithDuration)return nr.preventDefault(),void nr.stopPropagation();cr(),clearTimeout(Dt);var lr=-nr.deltaY;if(isFinite(lr)||(lr=nr.wheelDelta/10),isFinite(lr)){var sr,_r=Math.exp(-Math.min(Math.max(lr,-20),20)/200),Ar=Xe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),zt=(nr.clientX-Ar.left)/Ar.width,ur=(Ar.bottom-nr.clientY)/Ar.height;if(je){for(be||(zt=.5),sr=0;sr<me.length;sr++)Tt(me[sr],zt,_r);dt("x"),Et[2]*=_r,Et[0]+=Et[2]*zt*(1/_r-1)}if(rt){for(de||(ur=.5),sr=0;sr<Se.length;sr++)Tt(Se[sr],ur,_r);dt("y"),Et[3]*=_r,Et[1]+=Et[3]*(1-ur)*(1/_r-1)}Wt(Et),Lt(),te.emit("plotly_relayouting",_t),Dt=setTimeout(function(){te._fullLayout&&(Et=[0,0,Fe,Ne],$t())},Le),nr.preventDefault()}else v.log("Did not find wheel motion attributes: ",nr)}function Tt(Qt,Er,zr){if(!Qt.fixedrange){var an=v.simpleMap(Qt.range,Qt.r2l),Kr=an[0]+(an[1]-an[0])*Er;Qt.range=an.map(function(sn){return Qt.l2r(Kr+(sn-Kr)*zr)})}}}),hr},makeDragger:D,makeRectDragger:z,makeZoombox:G,makeCorners:Z,updateZoombox:re,xyCorners:ee,transitionZoombox:j,removeZoombox:B,showDoubleClickNotifier:H,attachWheelEventHandler:$}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/fx"),b=y("../../components/dragelement"),h=y("../../lib/setcursor"),e=y("./dragbox").makeDragBox,n=y("./constants").DRAGGERSIZE;K.initInteractions=function(r){var o=r._fullLayout;if(r._context.staticPlot)m.select(r).selectAll(".drag").remove();else if(o._has("cartesian")||o._has("splom")){Object.keys(o._plots||{}).sort(function(d,a){if((o._plots[d].mainplot&&!0)===(o._plots[a].mainplot&&!0)){var i=d.split("y"),s=a.split("y");return i[0]===s[0]?Number(i[1]||1)-Number(s[1]||1):Number(i[0]||1)-Number(s[0]||1)}return o._plots[d].mainplot?1:-1}).forEach(function(d){var a=o._plots[d],i=a.xaxis,s=a.yaxis;if(!a.mainplot){var c=e(r,a,i._offset,s._offset,i._length,s._length,"ns","ew");c.onmousemove=function(g){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===d&&r._fullLayout._plots[d]&&v.hover(r,g,d)},v.hover(r,g,d),r._fullLayout._lasthover=c,r._fullLayout._hoversubplot=d},c.onmouseout=function(g){r._dragging||(r._fullLayout._hoversubplot=null,b.unhover(r,g))},r._context.showAxisDragHandles&&(e(r,a,i._offset-n,s._offset-n,n,n,"n","w"),e(r,a,i._offset+i._length,s._offset-n,n,n,"n","e"),e(r,a,i._offset-n,s._offset+s._length,n,n,"s","w"),e(r,a,i._offset+i._length,s._offset+s._length,n,n,"s","e"))}if(r._context.showAxisDragHandles){if(d===i._mainSubplot){var l=i._mainLinePosition;"top"===i.side&&(l-=n),e(r,a,i._offset+.1*i._length,l,.8*i._length,n,"","ew"),e(r,a,i._offset,l,.1*i._length,n,"","w"),e(r,a,i._offset+.9*i._length,l,.1*i._length,n,"","e")}if(d===s._mainSubplot){var p=s._mainLinePosition;"right"!==s.side&&(p-=n),e(r,a,p,s._offset+.1*s._length,n,.8*s._length,"ns",""),e(r,a,p,s._offset+.9*s._length,n,.1*s._length,"s",""),e(r,a,p,s._offset,n,.1*s._length,"n","")}}});var t=o._hoverlayer.node();t.onmousemove=function(d){d.target=r._fullLayout._lasthover,v.hover(r,d,o._hoversubplot)},t.onclick=function(d){d.target=r._fullLayout._lasthover,v.click(r,d)},t.onmousedown=function(d){r._fullLayout._lasthover.onmousedown(d)},K.updateFx(r)}},K.updateFx=function(r){var o=r._fullLayout;h(o._draggers,"pan"===o.dragmode?"move":"crosshair")}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("./axis_ids");Q.exports=function(h){return function(e,n){var r=e[h];if(Array.isArray(r))for(var o=m.subplotsRegistry.cartesian,t=o.idRegex,d=n._subplots,a=d.xaxis,i=d.yaxis,s=d.cartesian,c=n._has("cartesian")||n._has("gl2d"),l=0;l<r.length;l++){var p=r[l];if(v.isPlainObject(p)){var g=b.cleanId(p.xref,"x",!1),u=b.cleanId(p.yref,"y",!1),x=t.x.test(g),f=t.y.test(u);if(x||f){c||v.pushUnique(n._basePlotModules,o);var T=!1;x&&-1===a.indexOf(g)&&(a.push(g),T=!0),f&&-1===i.indexOf(u)&&(i.push(u),T=!0),T&&x&&f&&s.push(g+u)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../registry"),b=y("../../lib"),h=y("../plots"),e=y("../../components/drawing"),n=y("../get_data").getModuleCalcData,r=y("./axis_ids"),o=y("./constants"),t=y("../../constants/xmlns_namespaces"),d=b.ensureSingle;function a(p,g,u){return b.ensureSingle(p,g,u,function(x){x.datum(u)})}function i(p,g,u,x,f){for(var T,_,k,w=o.traceLayerClasses,C=p._fullLayout,A=C._modules,O=[],P=[],S=0;S<A.length;S++){var E=(T=A[S]).name,D=v.modules[E].categories;if(D.svg){var z=T.layerName||E+"layer",N=T.plot;k=(_=n(u,N))[0],u=_[1],k.length&&O.push({i:w.indexOf(z),className:z,plotMethod:N,cdModule:k}),D.zoomScale&&P.push("."+z)}}O.sort(function(J,G){return J.i-G.i});var V=g.plot.selectAll("g.mlayer").data(O,function(J){return J.className});if(V.enter().append("g").attr("class",function(J){return J.className}).classed("mlayer",!0).classed("rangeplot",g.isRangePlot),V.exit().remove(),V.order(),V.each(function(J){var G=m.select(this),Z=J.className;J.plotMethod(p,g,J.cdModule,G,x,f),-1===o.clipOnAxisFalseQuery.indexOf("."+Z)&&e.setClipUrl(G,g.layerClipId,p)}),C._has("scattergl")&&(T=v.getModule("scattergl"),k=n(u,T)[0],T.plot(p,g,k)),!p._context.staticPlot&&(g._hasClipOnAxisFalse&&(g.clipOnAxisFalseTraces=g.plot.selectAll(o.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var X=g.plot.selectAll(P.join(",")).selectAll(".trace");g.zoomScalePts=X.selectAll("path.point"),g.zoomScaleTxt=X.selectAll(".textpoint")}}function s(p,g){var u=g.plotgroup,x=g.id,f=o.layerValue2layerClass[g.xaxis.layer],T=o.layerValue2layerClass[g.yaxis.layer],_=p._fullLayout._hasOnlyLargeSploms;if(g.mainplot){var k=g.mainplotinfo,w=k.plotgroup,C=x+"-x",A=x+"-y";g.minorGridlayer=k.minorGridlayer,g.gridlayer=k.gridlayer,g.zerolinelayer=k.zerolinelayer,d(k.overlinesBelow,"path",C),d(k.overlinesBelow,"path",A),d(k.overaxesBelow,"g",C),d(k.overaxesBelow,"g",A),g.plot=d(k.overplot,"g",x),d(k.overlinesAbove,"path",C),d(k.overlinesAbove,"path",A),d(k.overaxesAbove,"g",C),d(k.overaxesAbove,"g",A),g.xlines=w.select(".overlines-"+f).select("."+C),g.ylines=w.select(".overlines-"+T).select("."+A),g.xaxislayer=w.select(".overaxes-"+f).select("."+C),g.yaxislayer=w.select(".overaxes-"+T).select("."+A)}else if(_)g.xlines=d(u,"path","xlines-above"),g.ylines=d(u,"path","ylines-above"),g.xaxislayer=d(u,"g","xaxislayer-above"),g.yaxislayer=d(u,"g","yaxislayer-above");else{var O=d(u,"g","layer-subplot");g.shapelayer=d(O,"g","shapelayer"),g.imagelayer=d(O,"g","imagelayer"),g.minorGridlayer=d(u,"g","minor-gridlayer"),g.gridlayer=d(u,"g","gridlayer"),g.zerolinelayer=d(u,"g","zerolinelayer"),d(u,"path","xlines-below"),d(u,"path","ylines-below"),g.overlinesBelow=d(u,"g","overlines-below"),d(u,"g","xaxislayer-below"),d(u,"g","yaxislayer-below"),g.overaxesBelow=d(u,"g","overaxes-below"),g.plot=d(u,"g","plot"),g.overplot=d(u,"g","overplot"),g.xlines=d(u,"path","xlines-above"),g.ylines=d(u,"path","ylines-above"),g.overlinesAbove=d(u,"g","overlines-above"),d(u,"g","xaxislayer-above"),d(u,"g","yaxislayer-above"),g.overaxesAbove=d(u,"g","overaxes-above"),g.xlines=u.select(".xlines-"+f),g.ylines=u.select(".ylines-"+T),g.xaxislayer=u.select(".xaxislayer-"+f),g.yaxislayer=u.select(".yaxislayer-"+T)}_||(a(g.minorGridlayer,"g",g.xaxis._id),a(g.minorGridlayer,"g",g.yaxis._id),g.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(r.idSort),a(g.gridlayer,"g",g.xaxis._id),a(g.gridlayer,"g",g.yaxis._id),g.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(r.idSort)),g.xlines.style("fill","none").classed("crisp",!0),g.ylines.style("fill","none").classed("crisp",!0)}function c(p,g){if(p){var u={};for(var x in p.each(function(k){var w=k[0];m.select(this).remove(),l(w,g),u[w]=!0}),g._plots)for(var f=g._plots[x].overlays||[],T=0;T<f.length;T++){var _=f[T];u[_.id]&&_.plot.selectAll(".trace").remove()}}}function l(p,g){g._draggers.selectAll("g."+p).remove(),g._defs.select("#clip"+g._uid+p+"plot").remove()}K.name="cartesian",K.attr=["xaxis","yaxis"],K.idRoot=["x","y"],K.idRegex=o.idRegex,K.attrRegex=o.attrRegex,K.attributes=y("./attributes"),K.layoutAttributes=y("./layout_attributes"),K.supplyLayoutDefaults=y("./layout_defaults"),K.transitionAxes=y("./transition_axes"),K.finalizeSubplots=function(p,g){var u,x,f,T=g._subplots,_=T.xaxis,k=T.yaxis,w=T.cartesian,C=w.concat(T.gl2d||[]),A={},O={};for(u=0;u<C.length;u++){var P=C[u].split("y");A[P[0]]=1,O["y"+P[1]]=1}for(u=0;u<_.length;u++)A[x=_[u]]||(f=(p[r.id2name(x)]||{}).anchor,o.idRegex.y.test(f)||(f="y"),w.push(x+f),C.push(x+f),O[f]||(O[f]=1,b.pushUnique(k,f)));for(u=0;u<k.length;u++)O[f=k[u]]||(x=(p[r.id2name(f)]||{}).anchor,o.idRegex.x.test(x)||(x="x"),w.push(x+f),C.push(x+f),A[x]||(A[x]=1,b.pushUnique(_,x)));if(!C.length){for(var S in x="",f="",p)o.attrRegex.test(S)&&("x"===S.charAt(0)?(!x||+S.substr(5)<+x.substr(5))&&(x=S):(!f||+S.substr(5)<+f.substr(5))&&(f=S));x=x?r.name2id(x):"x",f=f?r.name2id(f):"y",_.push(x),k.push(f),w.push(x+f)}},K.plot=function(p,g,u,x){var f,T=p._fullLayout,_=T._subplots.cartesian,k=p.calcdata;if(!Array.isArray(g))for(g=[],f=0;f<k.length;f++)g.push(f);for(f=0;f<_.length;f++){for(var w,C=_[f],A=T._plots[C],O=[],P=0;P<k.length;P++){var S=k[P],E=S[0].trace;E.xaxis+E.yaxis===C&&((-1!==g.indexOf(E.index)||E.carpet)&&(w&&w[0].trace.xaxis+w[0].trace.yaxis===C&&-1!==["tonextx","tonexty","tonext"].indexOf(E.fill)&&-1===O.indexOf(w)&&O.push(w),O.push(S)),w=S)}i(p,A,O,u,x)}},K.clean=function(p,g,u,x){var f,T,_,k=x._plots||{},w=g._plots||{},C=x._subplots||{};if(x._hasOnlyLargeSploms&&!g._hasOnlyLargeSploms)for(_ in k)(f=k[_]).plotgroup&&f.plotgroup.remove();var A=x._has&&x._has("gl"),O=g._has&&g._has("gl");if(A&&!O)for(_ in k)(f=k[_])._scene&&f._scene.destroy();if(C.xaxis&&C.yaxis){var P=r.listIds({_fullLayout:x});for(T=0;T<P.length;T++){var S=P[T];g[r.id2name(S)]||x._infolayer.selectAll(".g-"+S+"title").remove()}}var E=x._has&&x._has("cartesian"),D=g._has&&g._has("cartesian");if(E&&!D)c(x._cartesianlayer.selectAll(".subplot"),x),x._defs.selectAll(".axesclip").remove(),delete x._axisConstraintGroups,delete x._axisMatchGroups;else if(C.cartesian)for(T=0;T<C.cartesian.length;T++){var z=C.cartesian[T];w[z]||(x._cartesianlayer.selectAll("."+z+",."+z+"-x,."+z+"-y").remove(),l(z,x))}},K.drawFramework=function(p){var g=p._fullLayout,u=function(f){var T,_,k,w,C,A,O=f._fullLayout,P=O._subplots.cartesian,S=P.length,E=[],D=[];for(T=0;T<S;T++){var V=(C=(w=O._plots[k=P[T]]).xaxis)._mainAxis._id+(A=w.yaxis)._mainAxis._id,X=O._plots[V];w.overlays=[],V!==k&&X?(w.mainplot=V,w.mainplotinfo=X,D.push(k)):(w.mainplot=void 0,w.mainplotinfo=void 0,E.push(k))}for(T=0;T<D.length;T++)(w=O._plots[k=D[T]]).mainplotinfo.overlays.push(w);var J=E.concat(D),G=new Array(S);for(T=0;T<S;T++){var Z=[k=J[T],(C=(w=O._plots[k]).xaxis).layer,(A=w.yaxis).layer,C.overlaying||"",A.overlaying||""];for(_=0;_<w.overlays.length;_++)Z.push(w.overlays[_].id);G[T]=Z}return G}(p),x=g._cartesianlayer.selectAll(".subplot").data(u,String);x.enter().append("g").attr("class",function(f){return"subplot "+f[0]}),x.order(),x.exit().call(c,g),x.each(function(f){var T=f[0],_=g._plots[T];_.plotgroup=m.select(this),s(p,_),_.draglayer=d(g._draggers,"g",T)})},K.rangePlot=function(p,g,u){s(p,g),i(p,g,u),h.style(p)},K.toSVG=function(p){var g=p._fullLayout._glimages,u=m.select(p).selectAll(".svg-container");u.filter(function(x,f){return f===u.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var x=this.toDataURL("image/png");g.append("svg:image").attr({xmlns:t.svg,"xlink:href":x,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},K.updateFx=y("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(y,Q,K){"use strict";var m=y("../font_attributes"),v=y("../../components/color/attributes"),b=y("../../components/drawing/attributes").dash,h=y("../../lib/extend").extendFlat,e=y("../../plot_api/plot_template").templatedArray,n=y("../../plots/cartesian/axis_format_attributes").descriptionWithDates,r=y("../../constants/numerical").ONEDAY,o=y("./constants"),t=o.HOUR_PATTERN,d=o.WEEKDAY_PATTERN,a={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function i(w){return{valType:"integer",min:0,dflt:w?5:0,editType:"ticks"}}var s={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},l={valType:"data_array",editType:"ticks"},p={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function g(w){var C={valType:"number",min:0,editType:"ticks"};return w||(C.dflt=5),C}function u(w){var C={valType:"number",min:0,editType:"ticks"};return w||(C.dflt=1),C}var x={valType:"color",dflt:v.defaultLine,editType:"ticks"},f={valType:"color",dflt:v.lightLine,editType:"ticks"};function T(w){var C={valType:"number",min:0,editType:"ticks"};return w||(C.dflt=1),C}var _=h({},b,{editType:"ticks"}),k={valType:"boolean",editType:"ticks"};Q.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:v.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:m({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,t,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:r},editType:"calc"}),tickmode:a,nticks:i(),tick0:s,dtick:c,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:l,ticktext:{valType:"data_array",editType:"ticks"},ticks:p,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:g(),tickwidth:u(),tickcolor:x,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:h({},b,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:m({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:n("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:n("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:v.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:k,gridcolor:f,gridwidth:T(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"plot"},minor:{tickmode:a,nticks:i("minor"),tick0:s,dtick:c,tickvals:l,ticks:p,ticklen:g("minor"),tickwidth:u("minor"),tickcolor:x,gridcolor:f,gridwidth:T("minor"),griddash:_,showgrid:k,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:m({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/color"),b=y("../../components/fx/helpers").isUnifiedHover,h=y("../../components/fx/hovermode_defaults"),e=y("../../plot_api/plot_template"),n=y("../layout_attributes"),r=y("./layout_attributes"),o=y("./type_defaults"),t=y("./axis_defaults"),d=y("./constraints"),a=y("./position_defaults"),i=y("./axis_ids"),s=i.id2name,c=i.name2id,l=y("./constants").AX_ID_PATTERN,p=y("../../registry"),g=p.traceIs,u=p.getComponentMethod;function x(f,T,_){Array.isArray(f[T])?f[T].push(_):f[T]=[_]}Q.exports=function(f,T,_){var k,w,C=T.autotypenumbers,A={},O={},P={},S={},E={},D={},z={},N={},V={},X={};for(k=0;k<_.length;k++){var J=_[k];if(g(J,"cartesian")||g(J,"gl2d")){var G,Z;if(J.xaxis)G=s(J.xaxis),x(A,G,J);else if(J.xaxes)for(w=0;w<J.xaxes.length;w++)x(A,s(J.xaxes[w]),J);if(J.yaxis)Z=s(J.yaxis),x(A,Z,J);else if(J.yaxes)for(w=0;w<J.yaxes.length;w++)x(A,s(J.yaxes[w]),J);"funnel"===J.type?"h"===J.orientation?(G&&(O[G]=!0),Z&&(z[Z]=!0)):Z&&(P[Z]=!0):"image"===J.type?(Z&&(N[Z]=!0),G&&(N[G]=!0)):(Z&&(E[Z]=!0,D[Z]=!0),g(J,"carpet")&&("carpet"!==J.type||J._cheater)||G&&(S[G]=!0)),"carpet"===J.type&&J._cheater&&G&&(O[G]=!0),g(J,"2dMap")&&(V[G]=!0,V[Z]=!0),g(J,"oriented")&&(X["h"===J.orientation?Z:G]=!0)}}var re=T._subplots,j=re.xaxis,B=re.yaxis,H=m.simpleMap(j,s),ee=m.simpleMap(B,s),U=H.concat(ee),$=v.background;j.length&&B.length&&($=m.coerce(f,T,n,"plot_bgcolor"));var q,te,ne,se,ie,ue=v.combine($,T.paper_bgcolor);function le(){ie._traceIndices=(A[q]||[]).map(function(wt){return wt._expandedIndex}),ie._annIndices=[],ie._shapeIndices=[],ie._selectionIndices=[],ie._imgIndices=[],ie._subplotsWith=[],ie._counterAxes=[],ie._name=ie._attr=q,ie._id=te}function de(et,wt){return m.coerce(se,ie,r,et,wt)}function be(et,wt){return m.coerce2(se,ie,r,et,wt)}function _e(et){return"x"===et?B:j}function xe(et,wt){for(var Gt="x"===et?H:ee,Kt=[],cr=0;cr<Gt.length;cr++){var ar=Gt[cr];ar===wt||(f[ar]||{}).overlaying||Kt.push(c(ar))}return Kt}var Ee={x:_e("x"),y:_e("y")},he=Ee.x.concat(Ee.y),me={},Se=[];function Me(){var et=se.matches;l.test(et)&&-1===he.indexOf(et)&&(me[et]=se.type,Se=Object.keys(me))}var Ie=h(f,T),Fe=b(Ie);for(k=0;k<U.length;k++){te=c(q=U[k]),ne=q.charAt(0),m.isPlainObject(f[q])||(f[q]={}),se=f[q],ie=e.newContainer(T,q,ne+"axis"),le();var $e={hasMinor:!0,letter:ne,font:T.font,outerTicks:V[q],showGrid:!X[q],data:A[q]||[],bgColor:ue,calendar:T.calendar,automargin:!0,visibleDflt:"x"===ne&&!S[q]&&O[q]||"y"===ne&&!E[q]&&P[q],reverseDflt:"y"===ne&&(!D[q]&&z[q]||N[q]),autotypenumbersDflt:C,splomStash:((T._splomAxes||{})[ne]||{})[te]};de("uirevision",T.uirevision),o(se,ie,de,$e),t(se,ie,de,$e,T);var Re=Fe&&ne===Ie.charAt(0),ze=be("spikecolor",Fe?ie.color:void 0),Ue=be("spikethickness",Fe?1.5:void 0),je=be("spikedash",Fe?"dot":void 0),rt=be("spikemode",Fe?"across":void 0),ut=be("spikesnap");de("showspikes",!!(Re||ze||Ue||je||rt||ut))||(delete ie.spikecolor,delete ie.spikethickness,delete ie.spikedash,delete ie.spikemode,delete ie.spikesnap),a(se,ie,de,{letter:ne,counterAxes:Ee[ne],overlayableAxes:xe(ne,q),grid:T.grid}),de("title.standoff"),Me(),ie._input=se}for(k=0;k<Se.length;){te=Se[k++],ne=(q=s(te)).charAt(0),m.isPlainObject(f[q])||(f[q]={}),se=f[q],ie=e.newContainer(T,q,ne+"axis"),le();var gt={letter:ne,font:T.font,outerTicks:V[q],showGrid:!X[q],data:[],bgColor:ue,calendar:T.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:C,splomStash:((T._splomAxes||{})[ne]||{})[te]};de("uirevision",T.uirevision),ie.type=me[te]||"linear",t(se,ie,de,gt,T),a(se,ie,de,{letter:ne,counterAxes:Ee[ne],overlayableAxes:xe(ne,q),grid:T.grid}),de("fixedrange"),Me(),ie._input=se}var At=u("rangeslider","handleDefaults"),_t=u("rangeselector","handleDefaults");for(k=0;k<H.length;k++)se=f[q=H[k]],ie=T[q],At(f,T,q),"date"===ie.type&&_t(se,ie,T,ee,ie.calendar),de("fixedrange");for(k=0;k<ee.length;k++){se=f[q=ee[k]];var it=T[s((ie=T[q]).anchor)];de("fixedrange",u("rangeslider","isVisible")(it))}d.handleDefaults(f,T,{axIds:he.concat(Se).sort(i.idSort),axHasImage:N})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(y,Q,K){"use strict";var m=y("tinycolor2").mix,v=y("../../components/color/attributes"),b=y("../../lib");Q.exports=function(h,e,n,r){var o=(r=r||{}).dfltColor;function t(f,T){return b.coerce2(h,e,r.attributes,f,T)}var d=t("linecolor",o),a=t("linewidth");n("showline",r.showLine||!!d||!!a)||(delete e.linecolor,delete e.linewidth);var i=t("gridcolor",m(o,r.bgColor,r.blend||v.lightFraction).toRgbString()),s=t("gridwidth"),c=t("griddash");if(n("showgrid",r.showGrid||!!i||!!s||!!c)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),r.hasMinor){var l=t("minor.gridcolor",m(e.gridcolor,r.bgColor,67).toRgbString()),p=t("minor.gridwidth",e.gridwidth||1),g=t("minor.griddash",e.griddash||"solid");n("minor.showgrid",!!l||!!p||!!g)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!r.noZeroLine){var u=t("zerolinecolor",o),x=t("zerolinewidth");n("zeroline",r.showGrid||!!u||!!x)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib");Q.exports=function(b,h,e,n){var r,o,t,d,a=n.counterAxes||[],i=n.overlayableAxes||[],s=n.letter,c=n.grid;c&&(r=c._anchors[h._id],(o=c._domains[s][c._axisMap[h._id]])&&(t=c[s+"side"].split(" ")[0],d=c.domain[s]["right"===t||"top"===t?1:0])),o=o||[0,1],r=r||(m(b.position)?"free":a[0]||"free"),t=t||("x"===s?"bottom":"left"),d=d||0,"free"===v.coerce(b,h,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:r}},"anchor")&&e("position",d),v.coerce(b,h,{side:{valType:"enumerated",values:"x"===s?["bottom","top"]:["left","right"],dflt:t}},"side");var l=!1;if(i.length&&(l=v.coerce(b,h,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying")),!l){var p=e("domain",o);p[0]>p[1]-1/4096&&(h.domain=o),v.noneOrAll(b.domain,h.domain,o)}return e("layer"),h}},{"../../lib":515,"fast-isnumeric":190}],583:[function(y,Q,K){"use strict";var m=y("./show_dflt");Q.exports=function(v,b,h,e,n){n||(n={});var r=n.tickSuffixDflt,o=m(v);h("tickprefix")&&h("showtickprefix",o),h("ticksuffix",r)&&h("showticksuffix",o)}},{"./show_dflt":586}],584:[function(y,Q,K){"use strict";var m=y("../../constants/alignment").FROM_BL;Q.exports=function(v,b,h){void 0===h&&(h=m[v.constraintoward||"center"]);var e=[v.r2l(v.range[0]),v.r2l(v.range[1])],n=e[0]+(e[1]-e[0])*h;v.range=v._input.range=[v.l2r(n+(e[0]-n)*b),v.l2r(n+(e[1]-n)*b)],v.setScale()}},{"../../constants/alignment":483}],585:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("d3-time-format").utcFormat,b=y("../../lib"),h=b.numberFormat,e=y("fast-isnumeric"),n=b.cleanNumber,r=b.ms2DateTime,o=b.dateTime2ms,t=b.ensureNumber,d=b.isArrayOrTypedArray,a=y("../../constants/numerical"),i=a.FP_SAFE,s=a.BADNUM,c=a.LOG_CLIP,l=a.ONEWEEK,p=a.ONEDAY,g=a.ONEHOUR,u=a.ONEMIN,x=a.ONESEC,f=y("./axis_ids"),T=y("./constants"),_=T.HOUR_PATTERN,k=T.WEEKDAY_PATTERN;function w(A){return Math.pow(10,A)}function C(A){return null!=A}Q.exports=function(A,O){O=O||{};var P=A._id||"x",S=P.charAt(0);function E(U,$){if(U>0)return Math.log(U)/Math.LN10;if(U<=0&&$&&A.range&&2===A.range.length){var q=A.range[0],te=A.range[1];return.5*(q+te-2*c*Math.abs(q-te))}return s}function D(U,$,q,te){if((te||{}).msUTC&&e(U))return+U;var ne=o(U,q||A.calendar);if(ne===s){if(!e(U))return s;U=+U;var se=Math.floor(10*b.mod(U+.05,1)),ie=Math.round(U-se/10);ne=o(new Date(ie))+se/10}return ne}function z(U,$,q){return r(U,$,q||A.calendar)}function N(U){return A._categories[Math.round(U)]}function V(U){if(C(U)){if(void 0===A._categoriesMap&&(A._categoriesMap={}),void 0!==A._categoriesMap[U])return A._categoriesMap[U];A._categories.push("number"==typeof U?String(U):U);var $=A._categories.length-1;return A._categoriesMap[U]=$,$}return s}function X(U){if(A._categoriesMap)return A._categoriesMap[U]}function J(U){var $=X(U);return void 0!==$?$:e(U)?+U:void 0}function G(U){return e(U)?+U:X(U)}function Z(U,$,q){return m.round(q+$*U,2)}function re(U,$,q){return(U-q)/$}var j=function(U){return e(U)?Z(U,A._m,A._b):s},B=function(U){return re(U,A._m,A._b)};if(A.rangebreaks){var H="y"===S;j=function(U){if(!e(U))return s;var $=A._rangebreaks.length;if(!$)return Z(U,A._m,A._b);var q=H;A.range[0]>A.range[1]&&(q=!q);for(var te=q?-1:1,ne=te*U,se=0,ie=0;ie<$;ie++){var ue=te*A._rangebreaks[ie].min,le=te*A._rangebreaks[ie].max;if(ne<ue)break;if(!(ne>le)){se=ne<(ue+le)/2?ie:ie+1;break}se=ie+1}var de=A._B[se]||0;return isFinite(de)?Z(U,A._m2,de):0},B=function(U){var $=A._rangebreaks.length;if(!$)return re(U,A._m,A._b);for(var q=0,te=0;te<$&&!(U<A._rangebreaks[te].pmin);te++)U>A._rangebreaks[te].pmax&&(q=te+1);return re(U,A._m2,A._B[q])}}A.c2l="log"===A.type?E:t,A.l2c="log"===A.type?w:t,A.l2p=j,A.p2l=B,A.c2p="log"===A.type?function(U,$){return j(E(U,$))}:j,A.p2c="log"===A.type?function(U){return w(B(U))}:B,-1!==["linear","-"].indexOf(A.type)?(A.d2r=A.r2d=A.d2c=A.r2c=A.d2l=A.r2l=n,A.c2d=A.c2r=A.l2d=A.l2r=t,A.d2p=A.r2p=function(U){return A.l2p(n(U))},A.p2d=A.p2r=B,A.cleanPos=t):"log"===A.type?(A.d2r=A.d2l=function(U,$){return E(n(U),$)},A.r2d=A.r2c=function(U){return w(n(U))},A.d2c=A.r2l=n,A.c2d=A.l2r=t,A.c2r=E,A.l2d=w,A.d2p=function(U,$){return A.l2p(A.d2r(U,$))},A.p2d=function(U){return w(B(U))},A.r2p=function(U){return A.l2p(n(U))},A.p2r=B,A.cleanPos=t):"date"===A.type?(A.d2r=A.r2d=b.identity,A.d2c=A.r2c=A.d2l=A.r2l=D,A.c2d=A.c2r=A.l2d=A.l2r=z,A.d2p=A.r2p=function(U,$,q){return A.l2p(D(U,0,q))},A.p2d=A.p2r=function(U,$,q){return z(B(U),$,q)},A.cleanPos=function(U){return b.cleanDate(U,s,A.calendar)}):"category"===A.type?(A.d2c=A.d2l=V,A.r2d=A.c2d=A.l2d=N,A.d2r=A.d2l_noadd=J,A.r2c=function(U){var $=G(U);return void 0!==$?$:A.fraction2r(.5)},A.l2r=A.c2r=t,A.r2l=G,A.d2p=function(U){return A.l2p(A.r2c(U))},A.p2d=function(U){return N(B(U))},A.r2p=A.d2p,A.p2r=B,A.cleanPos=function(U){return"string"==typeof U&&""!==U?U:t(U)}):"multicategory"===A.type&&(A.r2d=A.c2d=A.l2d=N,A.d2r=A.d2l_noadd=J,A.r2c=function(U){var $=J(U);return void 0!==$?$:A.fraction2r(.5)},A.r2c_just_indices=X,A.l2r=A.c2r=t,A.r2l=J,A.d2p=function(U){return A.l2p(A.r2c(U))},A.p2d=function(U){return N(B(U))},A.r2p=A.d2p,A.p2r=B,A.cleanPos=function(U){return Array.isArray(U)||"string"==typeof U&&""!==U?U:t(U)},A.setupMultiCategory=function(U){var $,q,te=A._traceIndices,ne=A._matchGroup;if(ne&&0===A._categories.length)for(var se in ne)if(se!==P){var ie=O[f.id2name(se)];te=te.concat(ie._traceIndices)}var ue=[[0,{}],[0,{}]],le=[];for($=0;$<te.length;$++){var de=U[te[$]];if(S in de){var be=de[S],_e=de._length||b.minRowLength(be);if(d(be[0])&&d(be[1]))for(q=0;q<_e;q++){var xe=be[0][q],Ee=be[1][q];C(xe)&&C(Ee)&&(le.push([xe,Ee]),xe in ue[0][1]||(ue[0][1][xe]=ue[0][0]++),Ee in ue[1][1]||(ue[1][1][Ee]=ue[1][0]++))}}}for(le.sort(function(he,me){var Se=ue[0][1],Me=Se[he[0]]-Se[me[0]];if(Me)return Me;var Ie=ue[1][1];return Ie[he[1]]-Ie[me[1]]}),$=0;$<le.length;$++)V(le[$])}),A.fraction2r=function(U){var $=A.r2l(A.range[0]),q=A.r2l(A.range[1]);return A.l2r($+U*(q-$))},A.r2fraction=function(U){var $=A.r2l(A.range[0]),q=A.r2l(A.range[1]);return(A.r2l(U)-$)/(q-$)},A.cleanRange=function(U,$){$||($={}),U||(U="range");var q,te,ne=b.nestedProperty(A,U).get();if(te=(te="date"===A.type?b.dfltRange(A.calendar):"y"===S?T.DFLTRANGEY:"realaxis"===A._name?[0,1]:$.dfltRange||T.DFLTRANGEX).slice(),"tozero"!==A.rangemode&&"nonnegative"!==A.rangemode||(te[0]=0),ne&&2===ne.length)for("date"!==A.type||A.autorange||(ne[0]=b.cleanDate(ne[0],s,A.calendar),ne[1]=b.cleanDate(ne[1],s,A.calendar)),q=0;q<2;q++)if("date"===A.type){if(!b.isDateTime(ne[q],A.calendar)){A[U]=te;break}if(A.r2l(ne[0])===A.r2l(ne[1])){var se=b.constrain(A.r2l(ne[0]),b.MIN_MS+1e3,b.MAX_MS-1e3);ne[0]=A.l2r(se-1e3),ne[1]=A.l2r(se+1e3);break}}else{if(!e(ne[q])){if(!e(ne[1-q])){A[U]=te;break}ne[q]=ne[1-q]*(q?10:.1)}if(ne[q]<-i?ne[q]=-i:ne[q]>i&&(ne[q]=i),ne[0]===ne[1]){var ie=Math.max(1,Math.abs(1e-6*ne[0]));ne[0]-=ie,ne[1]+=ie}}else b.nestedProperty(A,U).set(te)},A.setScale=function(U){var $=O._size;if(A.overlaying){var q=f.getFromId({_fullLayout:O},A.overlaying);A.domain=q.domain}var te=U&&A._r?"_r":"range",ne=A.calendar;A.cleanRange(te);var se,ie,ue=A.r2l(A[te][0],ne),le=A.r2l(A[te][1],ne),de="y"===S;if(de?(A._offset=$.t+(1-A.domain[1])*$.h,A._length=$.h*(A.domain[1]-A.domain[0]),A._m=A._length/(ue-le),A._b=-A._m*le):(A._offset=$.l+A.domain[0]*$.w,A._length=$.w*(A.domain[1]-A.domain[0]),A._m=A._length/(le-ue),A._b=-A._m*ue),A._rangebreaks=[],A._lBreaks=0,A._m2=0,A._B=[],A.rangebreaks&&(A._rangebreaks=A.locateBreaks(Math.min(ue,le),Math.max(ue,le)),A._rangebreaks.length)){for(se=0;se<A._rangebreaks.length;se++)ie=A._rangebreaks[se],A._lBreaks+=Math.abs(ie.max-ie.min);var be=de;ue>le&&(be=!be),be&&A._rangebreaks.reverse();var _e=be?-1:1;for(A._m2=_e*A._length/(Math.abs(le-ue)-A._lBreaks),A._B.push(-A._m2*(de?le:ue)),se=0;se<A._rangebreaks.length;se++)A._B.push(A._B[A._B.length-1]-_e*A._m2*((ie=A._rangebreaks[se]).max-ie.min));for(se=0;se<A._rangebreaks.length;se++)(ie=A._rangebreaks[se]).pmin=j(ie.min),ie.pmax=j(ie.max)}if(!isFinite(A._m)||!isFinite(A._b)||A._length<0)throw O._replotting=!1,new Error("Something went wrong with axis scaling")},A.maskBreaks=function(U){var $,q,te,ne,se,ie=A.rangebreaks||[];ie._cachedPatterns||(ie._cachedPatterns=ie.map(function(xe){return xe.enabled&&xe.bounds?b.simpleMap(xe.bounds,xe.pattern?n:A.d2c):null})),ie._cachedValues||(ie._cachedValues=ie.map(function(xe){return xe.enabled&&xe.values?b.simpleMap(xe.values,A.d2c).sort(b.sorterAsc):null}));for(var ue=0;ue<ie.length;ue++){var le=ie[ue];if(le.enabled)if(le.bounds){switch(q=($=ie._cachedPatterns[ue])[0],te=$[1],le.pattern){case k:ne=(se=new Date(U)).getUTCDay(),q>te&&(te+=7,ne<q&&(ne+=7));break;case _:ne=(se=new Date(U)).getUTCHours()+(se.getUTCMinutes()/60+se.getUTCSeconds()/3600+se.getUTCMilliseconds()/36e5),q>te&&(te+=24,ne<q&&(ne+=24));break;case"":ne=U}if(ne>=q&&ne<te)return s}else for(var be=ie._cachedValues[ue],_e=0;_e<be.length;_e++)if(te=(q=be[_e])+le.dvalue,U>=q&&U<te)return s}return U},A.locateBreaks=function(U,$){var q,te,ne,se,ie=[];if(!A.rangebreaks)return ie;var ue=A.rangebreaks.slice().sort(function(Ie,Fe){return Ie.pattern===k&&Fe.pattern===_?-1:Fe.pattern===k&&Ie.pattern===_?1:0}),le=function(Ie,Fe){if((Ie=b.constrain(Ie,U,$))!==(Fe=b.constrain(Fe,U,$))){for(var Ne=!0,De=0;De<ie.length;De++){var $e=ie[De];Ie<$e.max&&Fe>=$e.min&&(Ie<$e.min&&($e.min=Ie),Fe>$e.max&&($e.max=Fe),Ne=!1)}Ne&&ie.push({min:Ie,max:Fe})}};for(q=0;q<ue.length;q++){var de=ue[q];if(de.enabled)if(de.bounds){var be=U,_e=$;de.pattern&&(be=Math.floor(be)),ne=(te=b.simpleMap(de.bounds,de.pattern?n:A.r2l))[0],se=te[1];var xe,Ee,he=new Date(be);switch(de.pattern){case k:Ee=l,xe=(se-ne+(se<ne?7:0))*p,be+=ne*p-(he.getUTCDay()*p+he.getUTCHours()*g+he.getUTCMinutes()*u+he.getUTCSeconds()*x+he.getUTCMilliseconds());break;case _:Ee=p,xe=(se-ne+(se<ne?24:0))*g,be+=ne*g-(he.getUTCHours()*g+he.getUTCMinutes()*u+he.getUTCSeconds()*x+he.getUTCMilliseconds());break;default:be=Math.min(te[0],te[1]),xe=Ee=(_e=Math.max(te[0],te[1]))-be}for(var me=be;me<_e;me+=Ee)le(me,me+xe)}else for(var Se=b.simpleMap(de.values,A.d2c),Me=0;Me<Se.length;Me++)le(ne=Se[Me],se=ne+de.dvalue)}return ie.sort(function(Ie,Fe){return Ie.min-Fe.min}),ie},A.makeCalcdata=function(U,$,q){var te,ne,se,ie,ue=A.type,le="date"===ue&&U[$+"calendar"];if($ in U){if(te=U[$],ie=U._length||b.minRowLength(te),b.isTypedArray(te)&&("linear"===ue||"log"===ue)){if(ie===te.length)return te;if(te.subarray)return te.subarray(0,ie)}if("multicategory"===ue)return function(_e,xe){for(var Ee=new Array(xe),he=0;he<xe;he++)Ee[he]=X([(_e[0]||[])[he],(_e[1]||[])[he]]);return Ee}(te,ie);for(ne=new Array(ie),se=0;se<ie;se++)ne[se]=A.d2c(te[se],0,le,q)}else{var de=$+"0"in U?A.d2c(U[$+"0"],0,le):0,be=U["d"+$]?Number(U["d"+$]):1;for(te=U[{x:"y",y:"x"}[$]],ie=U._length||te.length,ne=new Array(ie),se=0;se<ie;se++)ne[se]=de+se*be}if(A.rangebreaks)for(se=0;se<ie;se++)ne[se]=A.maskBreaks(ne[se]);return ne},A.isValidRange=function(U){return Array.isArray(U)&&2===U.length&&e(A.r2l(U[0]))&&e(A.r2l(U[1]))},A.isPtWithinRange=function(U,$){var q=A.c2l(U[S],null,$),te=A.r2l(A.range[0]),ne=A.r2l(A.range[1]);return te<ne?te<=q&&q<=ne:ne<=q&&q<=te},A._emptyCategories=function(){A._categories=[],A._categoriesMap={}},A.clearCalc=function(){var U=A._matchGroup;if(U){var $=null,q=null;for(var te in U){var ne=O[f.id2name(te)];if(ne._categories){$=ne._categories,q=ne._categoriesMap;break}}$&&q?(A._categories=$,A._categoriesMap=q):A._emptyCategories()}else A._emptyCategories();if(A._initialCategories)for(var se=0;se<A._initialCategories.length;se++)V(A._initialCategories[se])},A.sortByInitialCategories=function(){var U=[];if(A._emptyCategories(),A._initialCategories)for(var $=0;$<A._initialCategories.length;$++)V(A._initialCategories[$]);U=U.concat(A._traceIndices);var q=A._matchGroup;for(var te in q)if(P!==te){var ne=O[f.id2name(te)];ne._categories=A._categories,ne._categoriesMap=A._categoriesMap,U=U.concat(ne._traceIndices)}return U};var ee=O._d3locale;"date"===A.type&&(A._dateFormat=ee?ee.timeFormat:v,A._extraFormat=O._extraFormat),A._separators=O.separators,A._numFormat=ee?ee.numberFormat:h,delete A._minDtick,delete A._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(y,Q,K){"use strict";Q.exports=function(m){var v=["showexponent","showtickprefix","showticksuffix"].filter(function(b){return void 0!==m[b]});if(v.every(function(b){return m[b]===m[v[0]]})||1===v.length)return m[v[0]]}},{}],587:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/color").contrast,b=y("./layout_attributes"),h=y("./show_dflt"),e=y("../array_container_defaults");function n(r,o){function t(d,a){return m.coerce(r,o,b.tickformatstops,d,a)}t("enabled")&&(t("dtickrange"),t("value"))}Q.exports=function(r,o,t,d,a){a||(a={});var i=h(r);if(t("showticklabels")){var s=a.font||{},c=o.color,l=-1!==(o.ticklabelposition||"").indexOf("inside")?v(a.bgColor):c&&c!==b.color.dflt?c:s.color;if(m.coerceFont(t,"tickfont",{family:s.family,size:s.size,color:l}),a.noTicklabelstep||"multicategory"===d||"log"===d||t("ticklabelstep"),a.noAng||t("tickangle"),"category"!==d){var p=t("tickformat");e(r,o,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),o.tickformatstops.length||delete o.tickformatstops,a.noExp||p||"date"===d||(t("showexponent",i),t("exponentformat"),t("minexponent"),t("separatethousands"))}}}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h,e,n){var r=n.isMinor,o=r?b.minor||{}:b,t=r?h.minor:h,d=r?v.minor:v,a=r?"minor.":"",i=m.coerce2(o,t,d,"ticklen",r?.6*(h.ticklen||5):void 0),s=m.coerce2(o,t,d,"tickwidth",r?h.tickwidth||1:void 0),c=m.coerce2(o,t,d,"tickcolor",(r?h.tickcolor:void 0)||t.color);e(a+"ticks",!r&&n.outerTicks||i||s||c?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(y,Q,K){"use strict";var m=y("./clean_ticks"),v=y("../../lib").isArrayOrTypedArray;Q.exports=function(b,h,e,n,r){r||(r={});var o=r.isMinor,t=o?b.minor||{}:b,d=o?h.minor:h,a=o?"minor.":"";function i(u){var x=t[u];return void 0!==x?x:(d._template||{})[u]}var s=i("tick0"),c=i("dtick"),l=i("tickvals"),p=e(a+"tickmode",v(l)?"array":c?"linear":"auto");if("auto"===p)e(a+"nticks");else if("linear"===p){var g=d.dtick=m.dtick(c,n);d.tick0=m.tick0(s,n,h.calendar,g)}else"multicategory"!==n&&(void 0===e(a+"tickvals")?d.tickmode="auto":o||e("ticktext"))}},{"../../lib":515,"./clean_ticks":572}],590:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../registry"),b=y("../../lib"),h=y("../../components/drawing"),e=y("./axes");Q.exports=function(n,r,o,t){var d=n._fullLayout;if(0!==r.length){var a,i,s,c;t&&(a=t());var l=m.ease(o.easing);return n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var u={},x=0;x<r.length;x++){var f=r[x],_=f.plotinfo.yaxis;f.xr0&&(u[f.plotinfo.xaxis._name+".range"]=f.xr0.slice()),f.yr0&&(u[_._name+".range"]=f.yr0.slice())}return v.call("relayout",n,u).then(function(){for(var k=0;k<r.length;k++)p(r[k].plotinfo)})}()}),i=Date.now(),c=window.requestAnimationFrame(function u(){s=Date.now();for(var x=Math.min(1,(s-i)/o.duration),f=l(x),T=0;T<r.length;T++)g(r[T],f);s-i>o.duration?(function(){for(var _={},k=0;k<r.length;k++){var w=r[k],A=w.plotinfo.yaxis;w.xr1&&(_[w.plotinfo.xaxis._name+".range"]=w.xr1.slice()),w.yr1&&(_[A._name+".range"]=w.yr1.slice())}a&&a(),v.call("relayout",n,_).then(function(){for(var O=0;O<r.length;O++)p(r[O].plotinfo)})}(),c=window.cancelAnimationFrame(u)):c=window.requestAnimationFrame(u)}),Promise.resolve()}function p(u){var x=u.xaxis,f=u.yaxis;d._defs.select("#"+u.clipId+"> rect").call(h.setTranslate,0,0).call(h.setScale,1,1),u.plot.call(h.setTranslate,x._offset,f._offset).call(h.setScale,1,1);var T=u.plot.selectAll(".scatterlayer .trace");T.selectAll(".point").call(h.setPointGroupScale,1,1),T.selectAll(".textpoint").call(h.setTextPointsScale,1,1),T.call(h.hideOutsideRangePoints,u)}function g(u,x){var f=u.plotinfo,T=f.xaxis,_=f.yaxis,k=T._length,w=_._length,C=!!u.xr1,A=!!u.yr1,O=[];if(C){var P=b.simpleMap(u.xr0,T.r2l),S=b.simpleMap(u.xr1,T.r2l),E=P[1]-P[0],D=S[1]-S[0];O[0]=(P[0]*(1-x)+x*S[0]-P[0])/(P[1]-P[0])*k,O[2]=k*(1-x+x*D/E),T.range[0]=T.l2r(P[0]*(1-x)+x*S[0]),T.range[1]=T.l2r(P[1]*(1-x)+x*S[1])}else O[0]=0,O[2]=k;if(A){var z=b.simpleMap(u.yr0,_.r2l),N=b.simpleMap(u.yr1,_.r2l),V=z[1]-z[0],X=N[1]-N[0];O[1]=(z[1]*(1-x)+x*N[1]-z[1])/(z[0]-z[1])*w,O[3]=w*(1-x+x*X/V),_.range[0]=T.l2r(z[0]*(1-x)+x*N[0]),_.range[1]=_.l2r(z[1]*(1-x)+x*N[1])}else O[1]=0,O[3]=w;e.drawOne(n,T,{skipTitle:!0}),e.drawOne(n,_,{skipTitle:!0}),e.redrawComponents(n,[T._id,_._id]);var J=C?k/O[2]:1,G=A?w/O[3]:1,H=T._offset-(C?O[0]/O[2]*k:0),ee=_._offset-(A?O[1]/O[3]*w:0);f.clipRect.call(h.setTranslate,C?O[0]:0,A?O[1]:0).call(h.setScale,1/J,1/G),f.plot.call(h.setTranslate,H,ee).call(h.setScale,J,G),h.setPointGroupScale(f.zoomScalePts,1/J,1/G),h.setTextPointsScale(f.zoomScaleTxt,1/J,1/G)}e.redrawComponents(n)}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(y,Q,K){"use strict";var m=y("../../registry").traceIs,v=y("./axis_autotype");function b(e){return{v:"x",h:"y"}[e.orientation||"v"]}function h(e,n){var r=b(e),o=m(e,"box-violin"),t=m(e._fullInput||{},"candlestick");return o&&!t&&n===r&&void 0===e[r]&&void 0===e[r+"0"]}Q.exports=function(e,n,r,o){r("autotypenumbers",o.autotypenumbersDflt),"-"===r("type",(o.splomStash||{}).type)&&(function(t,d){if("-"===t.type){var a,i=t._id,s=i.charAt(0);-1!==i.indexOf("scene")&&(i=s);var c=function(_,k,w){for(var C=0;C<_.length;C++){var A=_[C];if("splom"===A.type&&A._length>0&&(A["_"+w+"axes"]||{})[k]||(A[w+"axis"]||w)===k&&(h(A,w)||(A[w]||[]).length||A[w+"0"]))return A}}(d,i,s);if(c){if("histogram"===c.type&&s==={v:"y",h:"x"}[c.orientation||"v"])return void(t.type="linear");var l=s+"calendar",p=c[l],g={noMultiCategory:!m(c,"cartesian")||m(c,"noMultiCategory")};if("box"===c.type&&c._hasPreCompStats&&s==={h:"x",v:"y"}[c.orientation||"v"]&&(g.noMultiCategory=!0),g.autotypenumbers=t.autotypenumbers,h(c,s)){var u=b(c),x=[];for(a=0;a<d.length;a++){var f=d[a];m(f,"box-violin")&&(f[s+"axis"]||s)===i&&(x.push(void 0!==f[u]?f[u][0]:void 0!==f.name?f.name:"text"),f[l]!==p&&(p=void 0))}t.type=v(x,p,g)}else if("splom"===c.type){var T=c.dimensions[c._axesDim[i]];T.visible&&(t.type=v(T.values,p,g))}else t.type=v(c[s]||[c[s+"0"]],p,g)}}}(n,o.data),"-"===n.type?n.type="linear":e.type=n.type)}},{"../../registry":647,"./axis_autotype":567}],592:[function(y,Q,K){"use strict";var m=y("../registry"),v=y("../lib");function b(r,o,t){var d,a,i,s=!1;if("data"===o.type)d=r._fullData[null!==o.traces?o.traces[0]:0];else{if("layout"!==o.type)return!1;d=r._fullLayout}return a=v.nestedProperty(d,o.prop).get(),(i=t[o.type]=t[o.type]||{}).hasOwnProperty(o.prop)&&i[o.prop]!==a&&(s=!0),i[o.prop]=a,{changed:s,value:a}}function h(r,o){var t=[],d=o[0],a={};if("string"==typeof d)a[d]=o[1];else{if(!v.isPlainObject(d))return t;a=d}return n(a,function(i,s,c){t.push({type:"layout",prop:i,value:c})},"",0),t}function e(r,o){var t,d,a,i,s=[];if(a=o[1],t=o[2],i={},"string"==typeof(d=o[0]))i[d]=a;else{if(!v.isPlainObject(d))return s;i=d,void 0===t&&(t=a)}return void 0===t&&(t=null),n(i,function(c,l,p){var g,u;if(Array.isArray(p)){u=p.slice();var x=Math.min(u.length,r.data.length);t&&(x=Math.min(x,t.length)),g=[];for(var f=0;f<x;f++)g[f]=t?t[f]:f}else u=p,g=t?t.slice():null;if(null===g)Array.isArray(u)&&(u=u[0]);else if(Array.isArray(g)){if(!Array.isArray(u)){var T=u;u=[];for(var _=0;_<g.length;_++)u[_]=T}u.length=Math.min(g.length,u.length)}s.push({type:"data",prop:c,traces:g,value:u})},"",0),s}function n(r,o,t,d){Object.keys(r).forEach(function(a){var i=r[a];if("_"!==a[0]){var s=t+(d>0?".":"")+a;v.isPlainObject(i)?n(i,o,s,d+1):o(s,a,i)}})}K.manageCommandObserver=function(r,o,t,d){var a={},i=!0;o&&o._commandObserver&&(a=o._commandObserver),a.cache||(a.cache={}),a.lookupTable={};var s=K.hasSimpleAPICommandBindings(r,t,a.lookupTable);if(o&&o._commandObserver){if(s)return a;if(o._commandObserver.remove)return o._commandObserver.remove(),o._commandObserver=null,a}if(s){b(r,s,a.cache),a.check=function(){if(i){var p=b(r,s,a.cache);return p.changed&&d&&void 0!==a.lookupTable[p.value]&&(a.disable(),Promise.resolve(d({value:p.value,type:s.type,prop:s.prop,traces:s.traces,index:a.lookupTable[p.value]})).then(a.enable,a.enable)),p.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<c.length;l++)r._internalOn(c[l],a.check);a.remove=function(){for(var p=0;p<c.length;p++)r._removeInternalListener(c[p],a.check)}}else v.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){i=!1},a.enable=function(){i=!0},o&&(o._commandObserver=a),a},K.hasSimpleAPICommandBindings=function(r,o,t){var d,a,i=o.length;for(d=0;d<i;d++){var s,c=o[d],l=c.method,p=c.args;if(Array.isArray(p)||(p=[]),!l)return!1;var g=K.computeAPICommandBindings(r,l,p);if(1!==g.length)return!1;if(a){if((s=g[0]).type!==a.type||s.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var u=0;u<a.traces.length;u++)if(a.traces[u]!==s.traces[u])return!1}else if(s.prop!==a.prop)return!1}else a=g[0],Array.isArray(a.traces)&&a.traces.sort();var x=(s=g[0]).value;if(Array.isArray(x)){if(1!==x.length)return!1;x=x[0]}t&&(t[x]=d)}return a},K.executeAPICommand=function(r,o,t){if("skip"===o)return Promise.resolve();var d=m.apiMethodRegistry[o],a=[r];Array.isArray(t)||(t=[]);for(var i=0;i<t.length;i++)a.push(t[i]);return d.apply(null,a).catch(function(s){return v.warn("API call to Plotly."+o+" rejected.",s),Promise.reject(s)})},K.computeAPICommandBindings=function(r,o,t){var d,i;switch(Array.isArray(t)||(t=[]),o){case"restyle":d=e(r,t);break;case"relayout":d=h(0,t);break;case"update":d=e(r,[t[0],t[2]]).concat(h(0,[t[1]]));break;case"animate":i=t,d=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:d=[]}return d}},{"../lib":515,"../registry":647}],593:[function(y,Q,K){"use strict";var m=y("../lib/extend").extendFlat;K.attributes=function(v,b){b=b||{};var h={valType:"info_array",editType:(v=v||{}).editType,items:[{valType:"number",min:0,max:1,editType:v.editType},{valType:"number",min:0,max:1,editType:v.editType}],dflt:[0,1]},e={x:m({},h,{}),y:m({},h,{}),editType:v.editType};return v.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:v.editType},e.column={valType:"integer",min:0,dflt:0,editType:v.editType}),e},K.defaults=function(v,b,h,e){var n=e&&e.x||[0,1],r=e&&e.y||[0,1],o=b.grid;if(o){var t=h("domain.column");void 0!==t&&(t<o.columns?n=o._domains.x[t]:delete v.domain.column);var d=h("domain.row");void 0!==d&&(d<o.rows?r=o._domains.y[d]:delete v.domain.row)}var a=h("domain.x",n),i=h("domain.y",r);a[0]<a[1]||(v.domain.x=n.slice()),i[0]<i[1]||(v.domain.y=r.slice())}},{"../lib/extend":505}],594:[function(y,Q,K){"use strict";Q.exports=function(m){var v=m.editType,b=m.colorEditType;void 0===b&&(b=v);var h={family:{valType:"string",noBlank:!0,strict:!0,editType:v},size:{valType:"number",min:1,editType:v},color:{valType:"color",editType:b},editType:v};return m.autoSize&&(h.size.dflt="auto"),m.autoColor&&(h.color.dflt="auto"),m.arrayOk&&(h.family.arrayOk=!0,h.size.arrayOk=!0,h.color.arrayOk=!0),h}},{}],595:[function(y,Q,K){"use strict";Q.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(y,Q,K){"use strict";K.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},K.axesNames=["lonaxis","lataxis"],K.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},K.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},K.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},K.clipPad=.001,K.precision=.1,K.landColor="#F0DC82",K.waterColor="#3399FF",K.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},K.sphereSVG={type:"Sphere"},K.fillLayers={ocean:1,land:1,lakes:1},K.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},K.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],K.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],K.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("d3-geo"),b=v.geoPath,h=v.geoDistance,e=y("d3-geo-projection"),n=y("../../registry"),r=y("../../lib"),o=r.strTranslate,t=y("../../components/color"),d=y("../../components/drawing"),a=y("../../components/fx"),i=y("../plots"),s=y("../cartesian/axes"),c=y("../cartesian/autorange").getAutoRange,l=y("../../components/dragelement"),p=y("../../components/selections").prepSelect,g=y("../../components/selections").clearOutline,u=y("../../components/selections").selectOnClick,x=y("./zoom"),f=y("./constants"),T=y("../../lib/geo_location_utils"),_=y("../../lib/topojson_utils"),k=y("topojson-client").feature;function w(O){this.id=O.id,this.graphDiv=O.graphDiv,this.container=O.container,this.topojsonURL=O.topojsonURL,this.isStatic=O.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var C=w.prototype;function A(O,P){var S=f.clipPad,E=O[0]+S,D=O[1]-S,z=P[0]+S,N=P[1]-S;E>0&&D<0&&(D+=360);var V=(D-E)/4;return{type:"Polygon",coordinates:[[[E,z],[E,N],[E+V,N],[E+2*V,N],[E+3*V,N],[D,N],[D,z],[D-V,z],[D-2*V,z],[D-3*V,z],[E,z]]]}}Q.exports=function(O){return new w(O)},C.plot=function(O,P,S){var E=this,D=P[this.id],z=[],N=!1;for(var V in f.layerNameToAdjective)if("frame"!==V&&D["show"+V]){N=!0;break}for(var X=0;X<O.length;X++)if(O[0][0].trace.locationmode){N=!0;break}if(N){var J=_.getTopojsonName(D);null!==E.topojson&&J===E.topojsonName||(E.topojsonName=J,void 0===PlotlyGeoAssets.topojson[E.topojsonName]&&z.push(E.fetchTopojson()))}z=z.concat(T.fetchTraceGeoData(O)),S.push(new Promise(function(G,Z){Promise.all(z).then(function(){E.topojson=PlotlyGeoAssets.topojson[E.topojsonName],E.update(O,P),G()}).catch(Z)}))},C.fetchTopojson=function(){var O=this,P=_.getTopojsonPath(O.topojsonURL,O.topojsonName);return new Promise(function(S,E){m.json(P,function(D,z){if(D)return E(404===D.status?new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[O.topojsonName]=z,S()})})},C.update=function(O,P){var S=P[this.id];this.hasChoropleth=!1;for(var E=0;E<O.length;E++){var D=O[E],z=D[0].trace;"choropleth"===z.type&&(this.hasChoropleth=!0),!0===z.visible&&z._length>0&&z._module.calcGeoJSON(D,P)}if(!this.updateProjection(O,P)){this.viewInitial&&this.scope===S.scope||this.saveViewInitial(S),this.scope=S.scope,this.updateBaseLayers(P,S),this.updateDims(P,S),this.updateFx(P,S),i.generalUpdatePerTraceModule(this.graphDiv,this,O,S);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var V=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=V.selectAll("path"),this.render()}},C.updateProjection=function(O,P){var S=this.graphDiv,E=P[this.id],D=P._size,z=E.domain,N=E.projection,V=E.lonaxis,X=E.lataxis,J=V._ax,G=X._ax,Z=this.projection=function(he){var me=he.projection,Se=me.type,Me=f.projNames[Se];Me="geo"+r.titleCase(Me);for(var Ie=(v[Me]||e[Me])(),Fe=he._isSatellite?180*Math.acos(1/me.distance)/Math.PI:he._isClipped?f.lonaxisSpan[Se]/2:null,Ne=["center","rotate","parallels","clipExtent"],De=function(ze){return ze?Ie:[]},$e=0;$e<Ne.length;$e++){var Re=Ne[$e];"function"!=typeof Ie[Re]&&(Ie[Re]=De)}return Ie.isLonLatOverEdges=function(ze){if(null===Ie(ze))return!0;if(Fe){var Ue=Ie.rotate();return h(ze,[-Ue[0],-Ue[1]])>Fe*Math.PI/180}return!1},Ie.getPath=function(){return b().projection(Ie)},Ie.getBounds=function(ze){return Ie.getPath().bounds(ze)},Ie.precision(f.precision),he._isSatellite&&Ie.tilt(me.tilt).distance(me.distance),Fe&&Ie.clipAngle(Fe-f.clipPad),Ie}(E),re=[[D.l+D.w*z.x[0],D.t+D.h*(1-z.y[1])],[D.l+D.w*z.x[1],D.t+D.h*(1-z.y[0])]],j=E.center||{},B=N.rotation||{},H=V.range||[],ee=X.range||[];if(E.fitbounds){J._length=re[1][0]-re[0][0],G._length=re[1][1]-re[0][1],J.range=c(S,J),G.range=c(S,G);var U=(J.range[0]+J.range[1])/2,$=(G.range[0]+G.range[1])/2;if(E._isScoped)j={lon:U,lat:$};else if(E._isClipped){j={lon:U,lat:$},B={lon:U,lat:$,roll:B.roll};var q=N.type,te=f.lonaxisSpan[q]/2||180,ne=f.lataxisSpan[q]/2||90;H=[U-te,U+te],ee=[$-ne,$+ne]}else j={lon:U,lat:$},B={lon:U,lat:B.lat,roll:B.roll}}Z.center([j.lon-B.lon,j.lat-B.lat]).rotate([-B.lon,-B.lat,B.roll]).parallels(N.parallels);var se=A(H,ee);Z.fitExtent(re,se);var ie=this.bounds=Z.getBounds(se),ue=this.fitScale=Z.scale(),le=Z.translate();if(E.fitbounds){var de=Z.getBounds(A(J.range,G.range)),be=Math.min((ie[1][0]-ie[0][0])/(de[1][0]-de[0][0]),(ie[1][1]-ie[0][1])/(de[1][1]-de[0][1]));isFinite(be)?Z.scale(be*ue):r.warn("Something went wrong during"+this.id+"fitbounds computations.")}else Z.scale(N.scale*ue);var _e=this.midPt=[(ie[0][0]+ie[1][0])/2,(ie[0][1]+ie[1][1])/2];if(Z.translate([le[0]+(_e[0]-le[0]),le[1]+(_e[1]-le[1])]).clipExtent(ie),E._isAlbersUsa){var xe=Z([j.lon,j.lat]),Ee=Z.translate();Z.translate([Ee[0]-(xe[0]-Ee[0]),Ee[1]-(xe[1]-Ee[1])])}},C.updateBaseLayers=function(O,P){var S=this,E=S.topojson,D=S.layers,z=S.basePaths;function N(Z){return"lonaxis"===Z||"lataxis"===Z}function V(Z){return Boolean(f.lineLayers[Z])}function X(Z){return Boolean(f.fillLayers[Z])}var J=(this.hasChoropleth?f.layersForChoropleth:f.layers).filter(function(Z){return V(Z)||X(Z)?P["show"+Z]:!N(Z)||P[Z].showgrid}),G=S.framework.selectAll(".layer").data(J,String);G.exit().each(function(Z){delete D[Z],delete z[Z],m.select(this).remove()}),G.enter().append("g").attr("class",function(Z){return"layer "+Z}).each(function(Z){var re=D[Z]=m.select(this);"bg"===Z?S.bgRect=re.append("rect").style("pointer-events","all"):N(Z)?z[Z]=re.append("path").style("fill","none"):"backplot"===Z?re.append("g").classed("choroplethlayer",!0):"frontplot"===Z?re.append("g").classed("scatterlayer",!0):V(Z)?z[Z]=re.append("path").style("fill","none").style("stroke-miterlimit",2):X(Z)&&(z[Z]=re.append("path").style("stroke","none"))}),G.order(),G.each(function(Z){var re=z[Z],j=f.layerNameToAdjective[Z];"frame"===Z?re.datum(f.sphereSVG):V(Z)||X(Z)?re.datum(k(E,E.objects[Z])):N(Z)&&re.datum(function(B,H,ee){var U,$,q,te=H[B],ne=f.scopeDefaults[H.scope];"lonaxis"===B?(U=ne.lonaxisRange,$=ne.lataxisRange,q=function(Ee,he){return[Ee,he]}):"lataxis"===B&&(U=ne.lataxisRange,$=ne.lonaxisRange,q=function(Ee,he){return[he,Ee]});var se={type:"linear",range:[U[0],U[1]-1e-6],tick0:te.tick0,dtick:te.dtick};s.setConvert(se,ee);var ie=s.calcTicks(se);H.isScoped||"lonaxis"!==B||ie.pop();for(var ue=ie.length,le=new Array(ue),de=0;de<ue;de++)for(var be=ie[de].x,_e=le[de]=[],xe=$[0];xe<$[1]+2.5;xe+=2.5)_e.push(q(be,xe));return{type:"MultiLineString",coordinates:le}}(Z,P,O)).call(t.stroke,P[Z].gridcolor).call(d.dashLine,P[Z].griddash,P[Z].gridwidth),V(Z)?re.call(t.stroke,P[j+"color"]).call(d.dashLine,"",P[j+"width"]):X(Z)&&re.call(t.fill,P[j+"color"])})},C.updateDims=function(O,P){var S=this.bounds,E=(P.framewidth||0)/2,D=S[0][0]-E,z=S[0][1]-E,N=S[1][0]-D+E,V=S[1][1]-z+E;d.setRect(this.clipRect,D,z,N,V),this.bgRect.call(d.setRect,D,z,N,V).call(t.fill,P.bgcolor),this.xaxis._offset=D,this.xaxis._length=N,this.yaxis._offset=z,this.yaxis._length=V},C.updateFx=function(O,P){var S=this,E=S.graphDiv,D=S.bgRect,z=O.dragmode,N=O.clickmode;if(!S.isStatic){var V={element:S.bgRect.node(),gd:E,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:function(J,G){G.isRect?(J.range={})[S.id]=[X([G.xmin,G.ymin]),X([G.xmax,G.ymax])]:(J.lassoPoints={})[S.id]=G.map(X)}},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(J){2===J&&g(E)}};"pan"===z?(D.node().onmousedown=null,D.call(x(S,P)),D.on("dblclick.zoom",function(){var J=S.viewInitial,G={};for(var Z in J)G[S.id+"."+Z]=J[Z];n.call("_guiRelayout",E,G),E.emit("plotly_doubleclick",null)}),E._context._scrollZoom.geo||D.on("wheel.zoom",null)):"select"!==z&&"lasso"!==z||(D.on(".zoom",null),V.prepFn=function(J,G,Z){p(J,G,Z,V,z)},l.init(V)),D.on("mousemove",function(){var J=S.projection.invert(r.getPositionFromD3Event());if(!J)return l.unhover(E,m.event);S.xaxis.p2c=function(){return J[0]},S.yaxis.p2c=function(){return J[1]},a.hover(E,m.event,S.id)}),D.on("mouseout",function(){E._dragging||l.unhover(E,m.event)}),D.on("click",function(){"select"!==z&&"lasso"!==z&&(N.indexOf("select")>-1&&u(m.event,E,[S.xaxis],[S.yaxis],S.id,V),N.indexOf("event")>-1&&a.click(E,m.event))})}function X(J){return S.projection.invert([J[0]+S.xaxis._offset,J[1]+S.yaxis._offset])}},C.makeFramework=function(){var O=this,P=O.graphDiv,S=P._fullLayout,E="clip"+S._uid+O.id;O.clipDef=S._clips.append("clipPath").attr("id",E),O.clipRect=O.clipDef.append("rect"),O.framework=m.select(O.container).append("g").attr("class","geo "+O.id).call(d.setClipUrl,E,P),O.project=function(D){var z=O.projection(D);return z?[z[0]-O.xaxis._offset,z[1]-O.yaxis._offset]:[null,null]},O.xaxis={_id:"x",c2p:function(D){return O.project(D)[0]}},O.yaxis={_id:"y",c2p:function(D){return O.project(D)[1]}},O.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(O.mockAxis,S)},C.saveViewInitial=function(O){var S=O.center||{},E=O.projection,D=E.rotation||{};this.viewInitial={fitbounds:O.fitbounds,"projection.scale":E.scale},r.extendFlat(this.viewInitial,O._isScoped?{"center.lon":S.lon,"center.lat":S.lat}:O._isClipped?{"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:{"center.lon":S.lon,"center.lat":S.lat,"projection.rotation.lon":D.lon})},C.render=function(){var O,P=this.projection,S=P.getPath();function E(z){var N=P(z.lonlat);return N?o(N[0],N[1]):null}function D(z){return P.isLonLatOverEdges(z.lonlat)?"none":null}for(O in this.basePaths)this.basePaths[O].attr("d",S);for(O in this.dataPaths)this.dataPaths[O].attr("d",function(z){return S(z.geojson)});for(O in this.dataPoints)this.dataPoints[O].attr("display",D).attr("transform",E)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(y,Q,K){"use strict";var m=y("../../plots/get_data").getSubplotCalcData,v=y("../../lib").counterRegex,b=y("./geo"),h="geo",e=v(h),n={};n.geo={valType:"subplotid",dflt:h,editType:"calc"},Q.exports={attr:h,name:h,idRoot:h,idRegex:e,attrRegex:e,attributes:n,layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),plot:function(r){for(var o=r._fullLayout,t=r.calcdata,d=o._subplots.geo,a=0;a<d.length;a++){var i=d[a],s=m(t,h,i),c=o[i]._subplot;c||(c=b({id:i,graphDiv:r,container:o._geolayer.node(),topojsonURL:r._context.topojsonURL,staticPlot:r._context.staticPlot}),o[i]._subplot=c),c.plot(s,o,r._promises)}},updateFx:function(r){for(var o=r._fullLayout,t=o._subplots.geo,d=0;d<t.length;d++){var a=o[t[d]];a._subplot.updateFx(o,a)}},clean:function(r,o,t,d){for(var a=d._subplots.geo||[],i=0;i<a.length;i++){var s=a[i],c=d[s]._subplot;!o[s]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(y,Q,K){"use strict";var m=y("../../components/color/attributes"),v=y("../domain").attributes,b=y("../../components/drawing/attributes").dash,h=y("./constants"),e=y("../../plot_api/edit_types").overrideAll,n=y("../../lib/sort_object_keys"),r={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:m.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:b};(Q.exports=e({domain:v({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:n(h.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:n(h.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:m.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:h.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:h.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:h.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:h.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:m.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:m.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:m.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:m.background},lonaxis:r,lataxis:r},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../subplot_defaults"),b=y("../get_data").getSubplotData,h=y("./constants"),e=y("./layout_attributes"),n=h.axesNames;function r(o,t,d,a){var i=b(a.fullData,"geo",a.id).map(function(B){return B._expandedIndex}),s=d("resolution"),c=d("scope"),l=h.scopeDefaults[c],p=d("projection.type",l.projType),g=t._isAlbersUsa="albers usa"===p;g&&(c=t.scope="usa");var u=t._isScoped="world"!==c,x=t._isSatellite="satellite"===p,f=t._isConic=-1!==p.indexOf("conic")||"albers"===p,T=t._isClipped=!!h.lonaxisSpan[p];if(!1===o.visible){var _=m.extendDeep({},t._template);_.showcoastlines=!1,_.showcountries=!1,_.showframe=!1,_.showlakes=!1,_.showland=!1,_.showocean=!1,_.showrivers=!1,_.showsubunits=!1,_.lonaxis&&(_.lonaxis.showgrid=!1),_.lataxis&&(_.lataxis.showgrid=!1),t._template=_}for(var k=d("visible"),w=0;w<n.length;w++){var C,A=n[w],O=[30,10][w];if(u)C=l[A+"Range"];else{var P=h[A+"Span"],S=(P[p]||P["*"])/2,E=d("projection.rotation."+A.substr(0,3),l.projRotate[w]);C=[E-S,E+S]}var D=d(A+".range",C);d(A+".tick0"),d(A+".dtick",O),d(A+".showgrid",!!k&&void 0)&&(d(A+".gridcolor"),d(A+".gridwidth"),d(A+".griddash")),t[A]._ax={type:"linear",_id:A.slice(0,3),_traceIndices:i,setScale:m.identity,c2l:m.identity,r2l:m.identity,autorange:!0,range:D.slice(),_m:1,_input:{}}}var z=t.lonaxis.range,N=t.lataxis.range,V=z[0],X=z[1];V>0&&X<0&&(X+=360);var J,G,Z,re=(V+X)/2;if(!g){var j=u?l.projRotate:[re,0,0];J=d("projection.rotation.lon",j[0]),d("projection.rotation.lat",j[1]),d("projection.rotation.roll",j[2]),d("showcoastlines",!u&&k)&&(d("coastlinecolor"),d("coastlinewidth")),d("showocean",!!k&&void 0)&&d("oceancolor")}g?(G=-96.6,Z=38.7):(G=u?re:J,Z=(N[0]+N[1])/2),d("center.lon",G),d("center.lat",Z),x&&(d("projection.tilt"),d("projection.distance")),f&&d("projection.parallels",l.projParallels||[0,60]),d("projection.scale"),d("showland",!!k&&void 0)&&d("landcolor"),d("showlakes",!!k&&void 0)&&d("lakecolor"),d("showrivers",!!k&&void 0)&&(d("rivercolor"),d("riverwidth")),d("showcountries",u&&"usa"!==c&&k)&&(d("countrycolor"),d("countrywidth")),("usa"===c||"north america"===c&&50===s)&&(d("showsubunits",k),d("subunitcolor"),d("subunitwidth")),u||d("showframe",k)&&(d("framecolor"),d("framewidth")),d("bgcolor"),d("fitbounds")&&(delete t.projection.scale,u?(delete t.center.lon,delete t.center.lat):T?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}Q.exports=function(o,t,d){v(o,t,d,{type:"geo",attributes:e,handleDefaults:r,fullData:d,partition:"y"})}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../registry"),h=Math.PI/180,e=180/Math.PI,n={cursor:"pointer"},r={cursor:"auto"};function o(k,w){return m.behavior.zoom().translate(w.translate()).scale(w.scale())}function t(k,w,C){var A=k.id,O=k.graphDiv,P=O.layout,S=P[A],E=O._fullLayout,D=E[A],z={},N={};function V(X,J){z[A+"."+X]=v.nestedProperty(S,X).get(),b.call("_storeDirectGUIEdit",P,E._preGUI,z);var G=v.nestedProperty(D,X);G.get()!==J&&(G.set(J),v.nestedProperty(S,X).set(J),N[A+"."+X]=J)}C(V),V("projection.scale",w.scale()/k.fitScale),V("fitbounds",!1),O.emit("plotly_relayout",N)}function d(k,w){var C=o(0,w);function A(O){var P=w.invert(k.midPt);O("center.lon",P[0]),O("center.lat",P[1])}return C.on("zoomstart",function(){m.select(this).style(n)}).on("zoom",function(){w.scale(m.event.scale).translate(m.event.translate),k.render();var O=w.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":w.scale()/k.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}).on("zoomend",function(){m.select(this).style(r),t(k,w,A)}),C}function a(k,w){var C,A,O,P,S,E,D,z,N,V=o(0,w);function X(G){return w.invert(G)}function J(G){var Z=w.rotate(),re=w.invert(k.midPt);G("projection.rotation.lon",-Z[0]),G("center.lon",re[0]),G("center.lat",re[1])}return V.on("zoomstart",function(){m.select(this).style(n),C=m.mouse(this),A=w.rotate(),O=w.translate(),P=A,S=X(C)}).on("zoom",function(){if(E=m.mouse(this),function(re){var j=X(re);if(!j)return!0;var B=w(j);return Math.abs(B[0]-re[0])>2||Math.abs(B[1]-re[1])>2}(C))return V.scale(w.scale()),void V.translate(w.translate());w.scale(m.event.scale),w.translate([O[0],m.event.translate[1]]),S?X(E)&&(z=X(E),w.rotate(D=[P[0]+(z[0]-S[0]),A[1],A[2]]),P=D):S=X(C=E),N=!0,k.render();var G=w.rotate(),Z=w.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":w.scale()/k.fitScale,"geo.center.lon":Z[0],"geo.center.lat":Z[1],"geo.projection.rotation.lon":-G[0]})}).on("zoomend",function(){m.select(this).style(r),N&&t(k,w,J)}),V}function i(k,w){var C,A={r:w.rotate(),k:w.scale()},O=o(0,w),P=function(X){for(var J=0,G=arguments.length,Z=[];++J<G;)Z.push(arguments[J]);var re=m.dispatch.apply(null,Z);return re.of=function(j,B){return function(H){var ee;try{ee=H.sourceEvent=m.event,H.target=X,m.event=H,re[H.type].apply(j,B)}finally{m.event=ee}}},re}(O,"zoomstart","zoom","zoomend"),S=0,E=O.on;function D(X){S++||X({type:"zoomstart"})}function z(X){X({type:"zoom"})}function N(X){--S||X({type:"zoomend"})}function V(X){var J=w.rotate();X("projection.rotation.lon",-J[0]),X("projection.rotation.lat",-J[1])}return O.on("zoomstart",function(){m.select(this).style(n);var X=m.mouse(this),J=w.rotate(),G=J,Z=w.translate(),re=c(J);C=s(w,X),E.call(O,"zoom",function(){var j=m.mouse(this);if(w.scale(A.k=m.event.scale),C){if(s(w,j)){w.rotate(J).translate(Z);var B=s(w,j),H=p(C,B),ee=T(l(re,H)),U=A.r=g(ee,C,G);isFinite(U[0])&&isFinite(U[1])&&isFinite(U[2])||(U=G),w.rotate(U),G=U}}else C=s(w,X=j);z(P.of(this,arguments))}),D(P.of(this,arguments))}).on("zoomend",function(){m.select(this).style(r),E.call(O,"zoom",null),N(P.of(this,arguments)),t(k,w,V)}).on("zoom.redraw",function(){k.render();var X=w.rotate();k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":w.scale()/k.fitScale,"geo.projection.rotation.lon":-X[0],"geo.projection.rotation.lat":-X[1]})}),m.rebind(O,P,"on")}function s(k,w){var A,O,P,S,C=k.invert(w);return C&&isFinite(C[0])&&isFinite(C[1])&&(O=(A=C)[0]*h,P=A[1]*h,[(S=Math.cos(P))*Math.cos(O),S*Math.sin(O),Math.sin(P)])}function c(k){var w=.5*k[0]*h,C=.5*k[1]*h,A=.5*k[2]*h,O=Math.sin(w),P=Math.cos(w),S=Math.sin(C),E=Math.cos(C),D=Math.sin(A),z=Math.cos(A);return[P*E*z+O*S*D,O*E*z-P*S*D,P*S*z+O*E*D,P*E*D-O*S*z]}function l(k,w){var C=k[0],A=k[1],O=k[2],P=k[3],S=w[0],E=w[1],D=w[2],z=w[3];return[C*S-A*E-O*D-P*z,C*E+A*S+O*z-P*D,C*D-A*z+O*S+P*E,C*z+A*D-O*E+P*S]}function p(k,w){if(k&&w){var C=[(S=k)[1]*(E=w)[2]-S[2]*E[1],S[2]*E[0]-S[0]*E[2],S[0]*E[1]-S[1]*E[0]],A=Math.sqrt(_(C,C)),O=.5*Math.acos(Math.max(-1,Math.min(1,_(k,w)))),P=Math.sin(O)/A;return A&&[Math.cos(O),C[2]*P,-C[1]*P,C[0]*P]}var S,E}function g(k,w,C){var A=f(w,2,k[0]);A=f(A,1,k[1]),A=f(A,0,k[2]-C[2]);var O,P,S=w[0],E=w[1],D=w[2],z=A[0],N=A[1],V=A[2],X=Math.atan2(E,S)*e,J=Math.sqrt(S*S+E*E);Math.abs(N)>J?(P=(N>0?90:-90)-X,O=0):(P=Math.asin(N/J)*e-X,O=Math.sqrt(J*J-N*N));var G=180-P-2*X,Z=(Math.atan2(V,z)-Math.atan2(D,O))*e,re=(Math.atan2(V,z)-Math.atan2(D,-O))*e;return u(C[0],C[1],P,Z)<=u(C[0],C[1],G,re)?[P,Z,C[2]]:[G,re,C[2]]}function u(k,w,C,A){var O=x(C-k),P=x(A-w);return Math.sqrt(O*O+P*P)}function x(k){return(k%360+540)%360-180}function f(k,w,C){var A=C*h,O=k.slice(),P=0===w?1:0,S=2===w?1:2,E=Math.cos(A),D=Math.sin(A);return O[P]=k[P]*E-k[S]*D,O[S]=k[S]*E+k[P]*D,O}function T(k){return[Math.atan2(2*(k[0]*k[1]+k[2]*k[3]),1-2*(k[1]*k[1]+k[2]*k[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(k[0]*k[2]-k[3]*k[1]))))*e,Math.atan2(2*(k[0]*k[3]+k[1]*k[2]),1-2*(k[2]*k[2]+k[3]*k[3]))*e]}function _(k,w){for(var C=0,A=0,O=k.length;A<O;++A)C+=k[A]*w[A];return C}Q.exports=function(k,w){return(w._isScoped?d:w._isClipped?i:a)(k,k.projection)}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(y,Q,K){"use strict";var m=y("../registry"),v=y("./cartesian/constants").SUBPLOT_PATTERN;K.getSubplotCalcData=function(b,h,e){var n=m.subplotsRegistry[h];if(!n)return[];for(var r=n.attr,o=[],t=0;t<b.length;t++){var d=b[t];d[0].trace[r]===e&&o.push(d)}return o},K.getModuleCalcData=function(b,h){var e,n=[],r=[];if(!(e="string"==typeof h?m.getModule(h).plot:"function"==typeof h?h:h.plot))return[n,b];for(var o=0;o<b.length;o++){var t=b[o],d=t[0].trace;!0===d.visible&&0!==d._length&&(d._module.plot===e?n.push(t):r.push(t))}return[n,r]},K.getSubplotData=function(b,h,e){if(!m.subplotsRegistry[h])return[];var n,r,o,t=m.subplotsRegistry[h].attr,d=[];if("gl2d"===h){var a=e.match(v);r="x"+a[1],o="y"+a[2]}for(var i=0;i<b.length;i++)n=b[i],"gl2d"===h&&m.traceIs(n,"gl2d")?n[t[0]]===r&&n[t[1]]===o&&d.push(n):n[t]===e&&d.push(n);return d}},{"../registry":647,"./cartesian/constants":573}],603:[function(y,Q,K){"use strict";var m=y("mouse-change"),v=y("mouse-wheel"),b=y("mouse-event-offset"),h=y("../cartesian/constants"),e=y("has-passive-events");function n(r,o){this.element=r,this.plot=o,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}Q.exports=function(r){var o=r.mouseContainer,t=r.glplot,d=new n(o,t);function a(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function i(s,c,l){var p,g,u=r.calcDataBox(),x=t.viewBox,f=d.lastPos[0],T=d.lastPos[1],_=h.MINDRAG*t.pixelRatio,k=h.MINZOOM*t.pixelRatio;function w(E,D,z){var N=Math.min(D,z),V=Math.max(D,z);N!==V?(u[E]=N,u[E+2]=V,d.dataBox=u,r.setRanges(u)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(c*=t.pixelRatio,l=x[3]-x[1]-(l*=t.pixelRatio),r.fullLayout.dragmode){case"zoom":if(s){var C=c/(x[2]-x[0])*(u[2]-u[0])+u[0],A=l/(x[3]-x[1])*(u[3]-u[1])+u[1];d.boxInited||(d.boxStart[0]=C,d.boxStart[1]=A,d.dragStart[0]=c,d.dragStart[1]=l),d.boxEnd[0]=C,d.boxEnd[1]=A,d.boxInited=!0,d.boxEnabled||d.boxStart[0]===d.boxEnd[0]&&d.boxStart[1]===d.boxEnd[1]||(d.boxEnabled=!0);var O=Math.abs(d.dragStart[0]-c)<k,P=Math.abs(d.dragStart[1]-l)<k;if(!function(){for(var E=r.graphDiv._fullLayout._axisConstraintGroups,D=r.xaxis._id,z=r.yaxis._id,N=0;N<E.length;N++)if(-1!==E[N][D]){if(-1!==E[N][z])return!0;break}return!1}()||O&&P)O&&(d.boxEnd[0]=d.boxStart[0]),P&&(d.boxEnd[1]=d.boxStart[1]);else{p=d.boxEnd[0]-d.boxStart[0],g=d.boxEnd[1]-d.boxStart[1];var S=(u[3]-u[1])/(u[2]-u[0]);Math.abs(p*S)>Math.abs(g)?(d.boxEnd[1]=d.boxStart[1]+Math.abs(p)*S*(g>=0?1:-1),d.boxEnd[1]<u[1]?(d.boxEnd[1]=u[1],d.boxEnd[0]=d.boxStart[0]+(u[1]-d.boxStart[1])/Math.abs(S)):d.boxEnd[1]>u[3]&&(d.boxEnd[1]=u[3],d.boxEnd[0]=d.boxStart[0]+(u[3]-d.boxStart[1])/Math.abs(S))):(d.boxEnd[0]=d.boxStart[0]+Math.abs(g)/S*(p>=0?1:-1),d.boxEnd[0]<u[0]?(d.boxEnd[0]=u[0],d.boxEnd[1]=d.boxStart[1]+(u[0]-d.boxStart[0])*Math.abs(S)):d.boxEnd[0]>u[2]&&(d.boxEnd[0]=u[2],d.boxEnd[1]=d.boxStart[1]+(u[2]-d.boxStart[0])*Math.abs(S)))}}else d.boxEnabled?(g=d.boxStart[1]!==d.boxEnd[1],(p=d.boxStart[0]!==d.boxEnd[0])||g?(p&&(w(0,d.boxStart[0],d.boxEnd[0]),r.xaxis.autorange=!1),g&&(w(1,d.boxStart[1],d.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),d.boxEnabled=!1,d.boxInited=!1):d.boxInited&&(d.boxInited=!1);break;case"pan":d.boxEnabled=!1,d.boxInited=!1,s?(d.panning||(d.dragStart[0]=c,d.dragStart[1]=l),Math.abs(d.dragStart[0]-c)<_&&(c=d.dragStart[0]),Math.abs(d.dragStart[1]-l)<_&&(l=d.dragStart[1]),g=(T-l)*(u[3]-u[1])/(t.viewBox[3]-t.viewBox[1]),u[0]+=p=(f-c)*(u[2]-u[0])/(t.viewBox[2]-t.viewBox[0]),u[2]+=p,u[1]+=g,u[3]+=g,r.setRanges(u),d.panning=!0,d.lastInputTime=Date.now(),a(),r.cameraChanged(),r.handleAnnotations()):d.panning&&(d.panning=!1,r.relayoutCallback())}d.lastPos[0]=c,d.lastPos[1]=l}return d.mouseListener=m(o,i),o.addEventListener("touchstart",function(s){var c=b(s.changedTouches[0],o);i(0,c[0],c[1]),i(1,c[0],c[1]),s.preventDefault()},!!e&&{passive:!1}),o.addEventListener("touchmove",function(s){s.preventDefault();var c=b(s.changedTouches[0],o);i(1,c[0],c[1]),s.preventDefault()},!!e&&{passive:!1}),o.addEventListener("touchend",function(s){i(0,d.lastPos[0],d.lastPos[1]),s.preventDefault()},!!e&&{passive:!1}),d.wheelListener=v(o,function(s,c){if(!r.scrollZoom)return!1;var l=r.calcDataBox(),p=t.viewBox,g=d.lastPos[0],u=d.lastPos[1],x=Math.exp(5*c/(p[3]-p[1])),f=g/(p[2]-p[0])*(l[2]-l[0])+l[0],T=u/(p[3]-p[1])*(l[3]-l[1])+l[1];return l[0]=(l[0]-f)*x+f,l[2]=(l[2]-f)*x+f,l[1]=(l[1]-T)*x+T,l[3]=(l[3]-T)*x+T,r.setRanges(l),d.lastInputTime=Date.now(),a(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),d}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(y,Q,K){"use strict";var m=y("../cartesian/axes"),v=y("../../lib/str2rgbarray");function b(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var h=b.prototype,e=["xaxis","yaxis"];h.merge=function(n){var r,o,t,d,a,i,s,c,l,p,g;for(this.titleEnable=!1,this.backgroundColor=v(n.plot_bgcolor),p=0;p<2;++p){var u=(r=e[p]).charAt(0);for(t=(o=n[this.scene[r]._name]).title.text===this.scene.fullLayout._dfltTitle[u]?"":o.title.text,g=0;g<=2;g+=2)this.labelEnable[p+g]=!1,this.labels[p+g]=t,this.labelColor[p+g]=v(o.title.font.color),this.labelFont[p+g]=o.title.font.family,this.labelSize[p+g]=o.title.font.size,this.labelPad[p+g]=this.getLabelPad(r,o),this.tickEnable[p+g]=!1,this.tickColor[p+g]=v((o.tickfont||{}).color),this.tickAngle[p+g]="auto"===o.tickangle?0:Math.PI*-o.tickangle/180,this.tickPad[p+g]=this.getTickPad(o),this.tickMarkLength[p+g]=0,this.tickMarkWidth[p+g]=o.tickwidth||0,this.tickMarkColor[p+g]=v(o.tickcolor),this.borderLineEnable[p+g]=!1,this.borderLineColor[p+g]=v(o.linecolor),this.borderLineWidth[p+g]=o.linewidth||0;s=this.hasSharedAxis(o),a=this.hasAxisInDfltPos(r,o)&&!s,i=this.hasAxisInAltrPos(r,o)&&!s,d=o.mirror||!1,c=s?-1!==String(d).indexOf("all"):!!d,l=s?"allticks"===d:-1!==String(d).indexOf("ticks"),a?this.labelEnable[p]=!0:i&&(this.labelEnable[p+2]=!0),a?this.tickEnable[p]=o.showticklabels:i&&(this.tickEnable[p+2]=o.showticklabels),(a||c)&&(this.borderLineEnable[p]=o.showline),(i||c)&&(this.borderLineEnable[p+2]=o.showline),(a||l)&&(this.tickMarkLength[p]=this.getTickMarkLength(o)),(i||l)&&(this.tickMarkLength[p+2]=this.getTickMarkLength(o)),this.gridLineEnable[p]=o.showgrid,this.gridLineColor[p]=v(o.gridcolor),this.gridLineWidth[p]=o.gridwidth,this.zeroLineEnable[p]=o.zeroline,this.zeroLineColor[p]=v(o.zerolinecolor),this.zeroLineWidth[p]=o.zerolinewidth}},h.hasSharedAxis=function(n){var r=this.scene;return 0!==m.findSubplotsWithAxis(r.fullLayout._subplots.gl2d,n).indexOf(r.id)},h.hasAxisInDfltPos=function(n,r){var o=r.side;return"xaxis"===n?"bottom"===o:"yaxis"===n?"left"===o:void 0},h.hasAxisInAltrPos=function(n,r){var o=r.side;return"xaxis"===n?"top"===o:"yaxis"===n?"right"===o:void 0},h.getLabelPad=function(n,r){var o=r.title.font.size,t=r.showticklabels;return"xaxis"===n?"top"===r.side?o*(1.5+(t?1:0))-10:o*(1.5+(t?.5:0))-10:"yaxis"===n?"right"===r.side?10+o*(1.5+(t?1:.5)):10+o*(1.5+(t?.5:0)):void 0},h.getTickPad=function(n){return"outside"===n.ticks?10+n.ticklen:15},h.getTickMarkLength=function(n){if(!n.ticks)return 0;var r=n.ticklen;return"inside"===n.ticks?-r:r},Q.exports=function(n){return new b(n)}},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(y,Q,K){"use strict";var m=y("../../plot_api/edit_types").overrideAll,v=y("./scene2d"),b=y("../layout_attributes"),h=y("../../constants/xmlns_namespaces"),e=y("../cartesian/constants"),n=y("../cartesian"),r=y("../../components/fx/layout_attributes"),o=y("../get_data").getSubplotData;K.name="gl2d",K.attr=["xaxis","yaxis"],K.idRoot=["x","y"],K.idRegex=e.idRegex,K.attrRegex=e.attrRegex,K.attributes=y("../cartesian/attributes"),K.supplyLayoutDefaults=function(t,d,a){d._has("cartesian")||n.supplyLayoutDefaults(t,d,a)},K.layoutAttrOverrides=m(n.layoutAttributes,"plot","from-root"),K.baseLayoutAttrOverrides=m({plot_bgcolor:b.plot_bgcolor,hoverlabel:r.hoverlabel},"plot","nested"),K.plot=function(t){for(var d=t._fullLayout,a=t._fullData,i=d._subplots.gl2d,s=0;s<i.length;s++){var c=i[s],l=d._plots[c],p=o(a,"gl2d",c),g=l._scene2d;void 0===g&&(g=new v({id:c,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},d),l._scene2d=g),g.plot(p,t.calcdata,d,t.layout)}},K.clean=function(t,d,a,i){for(var s=i._subplots.gl2d||[],c=0;c<s.length;c++){var l=s[c],p=i._plots[l];p._scene2d&&0===o(t,"gl2d",l).length&&(p._scene2d.destroy(),delete i._plots[l])}n.clean.apply(this,arguments)},K.drawFramework=function(t){t._context.staticPlot||n.drawFramework(t)},K.toSVG=function(t){for(var d=t._fullLayout,a=d._subplots.gl2d,i=0;i<a.length;i++){var s=d._plots[a[i]]._scene2d,c=s.toImage("png");d._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),s.destroy()}},K.updateFx=function(t){for(var d=t._fullLayout,a=d._subplots.gl2d,i=0;i<a.length;i++)d._plots[a[i]]._scene2d.updateFx(d.dragmode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(y,Q,K){"use strict";var m,v,b=y("../../registry"),h=y("../../plots/cartesian/axes"),e=y("../../components/fx"),n=y("../../../stackgl_modules").gl_plot2d,r=y("../../../stackgl_modules").gl_spikes2d,o=y("../../../stackgl_modules").gl_select_box,t=y("webgl-context"),d=y("./convert"),a=y("./camera"),i=y("../../lib/show_no_webgl_msg"),s=y("../cartesian/constraints"),c=s.enforce,l=s.clean,p=y("../cartesian/autorange").doAutoRange,g=y("../../components/dragelement/helpers"),u=g.drawMode,x=g.selectMode,f=["xaxis","yaxis"],T=y("../cartesian/constants").SUBPLOT_PATTERN;function _(w,C){this.container=w.container,this.graphDiv=w.graphDiv,this.pixelRatio=w.plotGlPixelRatio||window.devicePixelRatio,this.id=w.id,this.staticPlot=!!w.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(C),this.makeFramework(),this.stopped||(this.glplotOptions=d(this),this.glplotOptions.merge(C),this.glplot=n(this.glplotOptions),this.camera=a(this),this.traces={},this.spikes=r(this.glplot),this.selectBox=o(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}Q.exports=_;var k=_.prototype;k.makeFramework=function(){if(this.staticPlot){if(!(v||(m=document.createElement("canvas"),v=t({canvas:m,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=m,this.gl=v}else{var w=this.container.querySelector(".gl-canvas-focus"),C=t({canvas:w,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!C)return i(this),void(this.stopped=!0);this.canvas=w,this.gl=C}var A=this.canvas;A.style.width="100%",A.style.height="100%",A.style.position="absolute",A.style.top="0px",A.style.left="0px",A.style["pointer-events"]="none",this.updateSize(A);var O=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var S=this.container;S.appendChild(O),S.appendChild(P);var E=this;P.addEventListener("mouseout",function(){E.isMouseOver=!1,E.unhover()}),P.addEventListener("mouseover",function(){E.isMouseOver=!0})},k.toImage=function(w){w||(w="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(m),this.updateSize(this.canvas);var C=this.glplot.gl,A=C.drawingBufferWidth,O=C.drawingBufferHeight;C.clearColor(1,1,1,0),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),C.bindFramebuffer(C.FRAMEBUFFER,null);var P=new Uint8Array(A*O*4);C.readPixels(0,0,A,O,C.RGBA,C.UNSIGNED_BYTE,P);for(var S=0,E=O-1;S<E;++S,--E)for(var D=0;D<A;++D)for(var z=0;z<4;++z){var N=P[4*(A*S+D)+z];P[4*(A*S+D)+z]=P[4*(A*E+D)+z],P[4*(A*E+D)+z]=N}var V=document.createElement("canvas");V.width=A,V.height=O;var X,J=V.getContext("2d",{willReadFrequently:!0}),G=J.createImageData(A,O);switch(G.data.set(P),J.putImageData(G,0,0),w){case"jpeg":X=V.toDataURL("image/jpeg");break;case"webp":X=V.toDataURL("image/webp");break;default:X=V.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(m),X},k.updateSize=function(w){w||(w=this.canvas);var C=this.pixelRatio,A=this.fullLayout,P=A.height,S=0|Math.ceil(C*A.width),E=0|Math.ceil(C*P);return w.width===S&&w.height===E||(w.width=S,w.height=E),w},k.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var w=[h.calcTicks(this.xaxis),h.calcTicks(this.yaxis)],C=0;C<2;++C)for(var A=0;A<w[C].length;++A)w[C][A].text=w[C][A].text+"";return w},k.updateRefs=function(w){this.fullLayout=w;var C=this.id.match(T),O="yaxis"+C[2];this.xaxis=this.fullLayout["xaxis"+C[1]],this.yaxis=this.fullLayout[O]},k.relayoutCallback=function(){var w=this.graphDiv,C=this.xaxis,A=this.yaxis,O=w.layout,P={},S=P[C._name+".range"]=C.range.slice(),E=P[A._name+".range"]=A.range.slice();P[C._name+".autorange"]=C.autorange,P[A._name+".autorange"]=A.autorange,b.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,P);var D=O[C._name];D.range=S,D.autorange=C.autorange;var z=O[A._name];z.range=E,z.autorange=A.autorange,P.lastInputTime=this.camera.lastInputTime,w.emit("plotly_relayout",P)},k.cameraChanged=function(){var w=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks();(function(A,O){for(var P=0;P<2;++P){var S=A[P],E=O[P];if(S.length!==E.length)return!0;for(var D=0;D<S.length;++D)if(S[D].x!==E[D].x)return!0}return!1})(C,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=w.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},k.handleAnnotations=function(){for(var w=this.graphDiv,C=this.fullLayout.annotations,A=0;A<C.length;A++){var O=C[A];O.xref===this.xaxis._id&&O.yref===this.yaxis._id&&b.getComponentMethod("annotations","drawOne")(w,A)}},k.destroy=function(){if(this.glplot){var w=this.traces;w&&Object.keys(w).map(function(C){w[C].dispose(),delete w[C]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},k.plot=function(w,C,A){var O=this.glplot;this.updateRefs(A),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(w,C),this.updateFx(A.dragmode);var P=A.width,S=A.height;this.updateSize(this.canvas);var E=this.glplotOptions;E.merge(A),E.screenBox=[0,0,P,S];var D={_fullLayout:{_axisConstraintGroups:A._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:A._size}};l(D,this.xaxis),l(D,this.yaxis);var z,N,V=A._size,X=this.xaxis.domain,J=this.yaxis.domain;for(E.viewBox=[V.l+X[0]*V.w,V.b+J[0]*V.h,P-V.r-(1-X[1])*V.w,S-V.t-(1-J[1])*V.h],this.mouseContainer.style.width=V.w*(X[1]-X[0])+"px",this.mouseContainer.style.height=V.h*(J[1]-J[0])+"px",this.mouseContainer.height=V.h*(J[1]-J[0]),this.mouseContainer.style.left=V.l+X[0]*V.w+"px",this.mouseContainer.style.top=V.t+(1-J[1])*V.h+"px",N=0;N<2;++N)(z=this[f[N]])._length=E.viewBox[N+2]-E.viewBox[N],p(this.graphDiv,z),z.setScale();c(D),E.ticks=this.computeTickMarks(),E.dataBox=this.calcDataBox(),E.merge(A),O.update(E),this.glplot.draw()},k.calcDataBox=function(){var w=this.xaxis,C=this.yaxis,A=w.range,O=C.range,P=w.r2l,S=C.r2l;return[P(A[0]),S(O[0]),P(A[1]),S(O[1])]},k.setRanges=function(w){var C=this.xaxis,A=this.yaxis,O=C.l2r,P=A.l2r;C.range=[O(w[0]),O(w[2])],A.range=[P(w[1]),P(w[3])]},k.updateTraces=function(w,C){var A,O,P,S=Object.keys(this.traces);this.fullData=w;e:for(A=0;A<S.length;A++){var E=S[A],D=this.traces[E];for(O=0;O<w.length;O++)if((P=w[O]).uid===E&&P.type===D.type)continue e;D.dispose(),delete this.traces[E]}for(A=0;A<w.length;A++){var z=C[A],N=this.traces[(P=w[A]).uid];N?N.update(P,z):(N=P._module.plot(this,P,z),this.traces[P.uid]=N)}this.glplot.objects.sort(function(V,X){return V._trace.index-X._trace.index})},k.updateFx=function(w){x(w)||u(w)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===w?"move":"zoom"===w?"crosshair":null},k.emitPointAction=function(w,C){for(var A,O=w.trace.uid,P=w.pointIndex,S=0;S<this.fullData.length;S++)this.fullData[S].uid===O&&(A=this.fullData[S]);var E={x:w.traceCoord[0],y:w.traceCoord[1],curveNumber:A.index,pointNumber:P,data:A._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(E,A,P),this.graphDiv.emit(C,{points:[E]})},k.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var w=this.glplot,C=this.camera,A=C.mouseListener,O=1===this.lastButtonState&&0===A.buttons,P=this.fullLayout;this.lastButtonState=A.buttons,this.cameraChanged();var S,E=A.x*w.pixelRatio,D=this.canvas.height-w.pixelRatio*A.y;if(C.boxEnabled&&"zoom"===P.dragmode){this.selectBox.enabled=!0;for(var z=this.selectBox.selectBox=[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])],N=0;N<2;N++)C.boxStart[N]===C.boxEnd[N]&&(z[N]=w.dataBox[N],z[N+2]=w.dataBox[N+2]);w.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var V=P._size,G=(S=w.pick(E/w.pixelRatio+V.l+this.xaxis.domain[0]*V.w,D/w.pixelRatio-(V.t+(1-this.yaxis.domain[1])*V.h)))&&S.object._trace.handlePick(S);if(G&&O&&this.emitPointAction(G,"plotly_click"),S&&"skip"!==S.object._trace.hoverinfo&&P.hovermode&&G&&(!this.lastPickResult||this.lastPickResult.traceUid!==G.trace.uid||this.lastPickResult.dataCoord[0]!==G.dataCoord[0]||this.lastPickResult.dataCoord[1]!==G.dataCoord[1])){var Z=G;this.lastPickResult={traceUid:G.trace?G.trace.uid:null,dataCoord:G.dataCoord.slice()},this.spikes.update({center:S.dataCoord}),Z.screenCoord=[((w.viewBox[2]-w.viewBox[0])*(S.dataCoord[0]-w.dataBox[0])/(w.dataBox[2]-w.dataBox[0])+w.viewBox[0])/w.pixelRatio,(this.canvas.height-(w.viewBox[3]-w.viewBox[1])*(S.dataCoord[1]-w.dataBox[1])/(w.dataBox[3]-w.dataBox[1])-w.viewBox[1])/w.pixelRatio],this.emitPointAction(G,"plotly_hover");var re=this.fullData[Z.trace.index]||{},j=Z.pointIndex,B=e.castHoverinfo(re,P,j);if(B&&"all"!==B){var H=B.split("+");-1===H.indexOf("x")&&(Z.traceCoord[0]=void 0),-1===H.indexOf("y")&&(Z.traceCoord[1]=void 0),-1===H.indexOf("z")&&(Z.traceCoord[2]=void 0),-1===H.indexOf("text")&&(Z.textLabel=void 0),-1===H.indexOf("name")&&(Z.name=void 0)}e.loneHover({x:Z.screenCoord[0],y:Z.screenCoord[1],xLabel:this.hoverFormatter("xaxis",Z.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",Z.traceCoord[1]),zLabel:Z.traceCoord[2],text:Z.textLabel,name:Z.name,color:e.castHoverOption(re,j,"bgcolor")||Z.color,borderColor:e.castHoverOption(re,j,"bordercolor"),fontFamily:e.castHoverOption(re,j,"font.family"),fontSize:e.castHoverOption(re,j,"font.size"),fontColor:e.castHoverOption(re,j,"font.color"),nameLength:e.castHoverOption(re,j,"namelength"),textAlign:e.castHoverOption(re,j,"align")},{container:this.svgContainer,gd:this.graphDiv})}}S||this.unhover(),w.draw()}},k.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},k.hoverFormatter=function(w,C){if(void 0!==C){var A=this[w];return h.tickText(A,A.c2l(C),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(y,Q,K){"use strict";var m=y("../../plot_api/edit_types").overrideAll,v=y("../../components/fx/layout_attributes"),b=y("./scene"),h=y("../get_data").getSubplotData,e=y("../../lib"),n=y("../../constants/xmlns_namespaces");K.name="gl3d",K.attr="scene",K.idRoot="scene",K.idRegex=K.attrRegex=e.counterRegex("scene"),K.attributes=y("./layout/attributes"),K.layoutAttributes=y("./layout/layout_attributes"),K.baseLayoutAttrOverrides=m({hoverlabel:v.hoverlabel},"plot","nested"),K.supplyLayoutDefaults=y("./layout/defaults"),K.plot=function(r){for(var o=r._fullLayout,t=r._fullData,d=o._subplots.gl3d,a=0;a<d.length;a++){var i=d[a],s=h(t,"gl3d",i),c=o[i],l=c.camera,p=c._scene;p||(p=new b({id:i,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio,camera:l},o),c._scene=p),p.viewInitial||(p.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),p.plot(s,o,r.layout)}},K.clean=function(r,o,t,d){for(var a=d._subplots.gl3d||[],i=0;i<a.length;i++){var s=a[i];!o[s]&&d[s]._scene&&(d[s]._scene.destroy(),d._infolayer&&d._infolayer.selectAll(".annotation-"+s).remove())}},K.toSVG=function(r){for(var o=r._fullLayout,t=o._subplots.gl3d,d=o._size,a=0;a<t.length;a++){var i=o[t[a]],s=i.domain,c=i._scene,l=c.toImage("png");o._glimages.append("svg:image").attr({xmlns:n.svg,"xlink:href":l,x:d.l+d.w*s.x[0],y:d.t+d.h*(1-s.y[1]),width:d.w*(s.x[1]-s.x[0]),height:d.h*(s.y[1]-s.y[0]),preserveAspectRatio:"none"}),c.destroy()}},K.cleanId=function(r){if(r.match(/^scene[0-9]*$/)){var o=r.substr(5);return"1"===o&&(o=""),"scene"+o}},K.updateFx=function(r){for(var o=r._fullLayout,t=o._subplots.gl3d,d=0;d<t.length;d++)o[t[d]]._scene.updateFx(o.dragmode,o.hovermode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(y,Q,K){"use strict";Q.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(y,Q,K){"use strict";var m=y("../../../components/color"),v=y("../../cartesian/layout_attributes"),b=y("../../../lib/extend").extendFlat,h=y("../../../plot_api/edit_types").overrideAll;Q.exports=h({visible:v.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:m.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:v.color,categoryorder:v.categoryorder,categoryarray:v.categoryarray,title:{text:v.title.text,font:v.title.font},type:b({},v.type,{values:["-","linear","log","date","category"]}),autotypenumbers:v.autotypenumbers,autorange:v.autorange,rangemode:v.rangemode,range:b({},v.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:v.ticks,mirror:v.mirror,ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,showticklabels:v.showticklabels,tickfont:v.tickfont,tickangle:v.tickangle,tickprefix:v.tickprefix,showtickprefix:v.showtickprefix,ticksuffix:v.ticksuffix,showticksuffix:v.showticksuffix,showexponent:v.showexponent,exponentformat:v.exponentformat,minexponent:v.minexponent,separatethousands:v.separatethousands,tickformat:v.tickformat,tickformatstops:v.tickformatstops,hoverformat:v.hoverformat,showline:v.showline,linecolor:v.linecolor,linewidth:v.linewidth,showgrid:v.showgrid,gridcolor:b({},v.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:v.gridwidth,zeroline:v.zeroline,zerolinecolor:v.zerolinecolor,zerolinewidth:v.zerolinewidth,_deprecated:{title:v._deprecated.title,titlefont:v._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(y,Q,K){"use strict";var m=y("tinycolor2").mix,v=y("../../../lib"),b=y("../../../plot_api/plot_template"),h=y("./axis_attributes"),e=y("../../cartesian/type_defaults"),n=y("../../cartesian/axis_defaults"),r=["xaxis","yaxis","zaxis"];Q.exports=function(o,t,d){var a,i;function s(p,g){return v.coerce(a,i,h,p,g)}for(var c=0;c<r.length;c++){var l=r[c];a=o[l]||{},(i=b.newContainer(t,l))._id=l[0]+d.scene,i._name=l,e(a,i,s,d),n(a,i,s,{font:d.font,letter:l[0],data:d.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout),s("gridcolor",m(i.color,d.bgColor,13600/187).toRgbString()),s("title.text",l[0]),i.setScale=v.noop,s("showspikes")&&(s("spikesides"),s("spikethickness"),s("spikecolor",i.color)),s("showaxeslabels"),s("showbackground")&&s("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(y,Q,K){"use strict";var m=y("../../../lib/str2rgbarray"),v=y("../../../lib"),b=["xaxis","yaxis","zaxis"];function h(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}h.prototype.merge=function(e,n){for(var r=0;r<3;++r){var o=n[b[r]];o.visible?(this.labels[r]=e._meta?v.templateString(o.title.text,e._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(this.labelColor[r]=m(o.title.font.color)),o.title.font.family&&(this.labelFont[r]=o.title.font.family),o.title.font.size&&(this.labelSize[r]=o.title.font.size)),"showline"in o&&(this.lineEnable[r]=o.showline),"linecolor"in o&&(this.lineColor[r]=m(o.linecolor)),"linewidth"in o&&(this.lineWidth[r]=o.linewidth),"showgrid"in o&&(this.gridEnable[r]=o.showgrid),"gridcolor"in o&&(this.gridColor[r]=m(o.gridcolor)),"gridwidth"in o&&(this.gridWidth[r]=o.gridwidth),"log"===o.type?this.zeroEnable[r]=!1:"zeroline"in o&&(this.zeroEnable[r]=o.zeroline),"zerolinecolor"in o&&(this.zeroLineColor[r]=m(o.zerolinecolor)),"zerolinewidth"in o&&(this.zeroLineWidth[r]=o.zerolinewidth),this.lineTickEnable[r]=!(!("ticks"in o)||!o.ticks),"ticklen"in o&&(this.lineTickLength[r]=this._defaultLineTickLength[r]=o.ticklen),"tickcolor"in o&&(this.lineTickColor[r]=m(o.tickcolor)),"tickwidth"in o&&(this.lineTickWidth[r]=o.tickwidth),"tickangle"in o&&(this.tickAngle[r]="auto"===o.tickangle?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(this.tickEnable[r]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(this.tickColor[r]=m(o.tickfont.color)),o.tickfont.family&&(this.tickFont[r]=o.tickfont.family),o.tickfont.size&&(this.tickSize[r]=o.tickfont.size)),"mirror"in o?-1!==["ticks","all","allticks"].indexOf(o.mirror)?(this.lineTickMirror[r]=!0,this.lineMirror[r]=!0):!0===o.mirror?(this.lineTickMirror[r]=!1,this.lineMirror[r]=!0):(this.lineTickMirror[r]=!1,this.lineMirror[r]=!1):this.lineMirror[r]=!1,"showbackground"in o&&!1!==o.showbackground?(this.backgroundEnable[r]=!0,this.backgroundColor[r]=m(o.backgroundcolor)):this.backgroundEnable[r]=!1):(this.tickEnable[r]=!1,this.labelEnable[r]=!1,this.lineEnable[r]=!1,this.lineTickEnable[r]=!1,this.gridEnable[r]=!1,this.zeroEnable[r]=!1,this.backgroundEnable[r]=!1)}},Q.exports=function(e,n){var r=new h;return r.merge(e,n),r}},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(y,Q,K){"use strict";var m=y("../../../lib"),v=y("../../../components/color"),b=y("../../../registry"),h=y("../../subplot_defaults"),e=y("./axis_defaults"),n=y("./layout_attributes"),r=y("../../get_data").getSubplotData;function o(t,d,a,i){for(var s=a("bgcolor"),c=v.combine(s,i.paper_bgcolor),l=["up","center","eye"],p=0;p<l.length;p++)a("camera."+l[p]+".x"),a("camera."+l[p]+".y"),a("camera."+l[p]+".z");a("camera.projection.type");var g=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),u=a("aspectmode",g?"manual":"auto");g||(t.aspectratio=d.aspectratio={x:1,y:1,z:1},"manual"===u&&(d.aspectmode="auto"),t.aspectmode=d.aspectmode);var x=r(i.fullData,"gl3d",i.id);e(t,d,{font:i.font,scene:i.id,data:x,bgColor:c,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),b.getComponentMethod("annotations3d","handleDefaults")(t,d,i);var f=i.getDfltFromLayout("dragmode");if(!1!==f&&!f)if(f="orbit",t.camera&&t.camera.up){var T=t.camera.up.x,_=t.camera.up.y,k=t.camera.up.z;0!==k&&(T&&_&&k?k/Math.sqrt(T*T+_*_+k*k)>.999&&(f="turntable"):f="turntable")}else f="turntable";a("dragmode",f),a("hovermode",i.getDfltFromLayout("hovermode"))}Q.exports=function(t,d,a){var i=d._basePlotModules.length>1;h(t,d,a,{type:"gl3d",attributes:n,handleDefaults:o,fullLayout:d,font:d.font,fullData:a,getDfltFromLayout:function(s){if(!i)return m.validate(t[s],n[s])?t[s]:void 0},autotypenumbersDflt:d.autotypenumbers,paper_bgcolor:d.paper_bgcolor,calendar:d.calendar})}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(y,Q,K){"use strict";var m=y("./axis_attributes"),v=y("../../domain").attributes,b=y("../../../lib/extend").extendFlat,h=y("../../../lib").counterRegex;function e(n,r,o){return{x:{valType:"number",dflt:n,editType:"camera"},y:{valType:"number",dflt:r,editType:"camera"},z:{valType:"number",dflt:o,editType:"camera"},editType:"camera"}}Q.exports={_arrayAttrRegexps:[h("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:b(e(0,0,1),{}),center:b(e(0,0,0),{}),eye:b(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:v({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:m,yaxis:m,zaxis:m,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(y,Q,K){"use strict";var m=y("../../../lib/str2rgbarray"),v=["xaxis","yaxis","zaxis"];function b(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}b.prototype.merge=function(h){for(var e=0;e<3;++e){var n=h[v[e]];n.visible?(this.enabled[e]=n.showspikes,this.colors[e]=m(n.spikecolor),this.drawSides[e]=n.spikesides,this.lineWidth[e]=n.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},Q.exports=function(h){var e=new b;return e.merge(h),e}},{"../../../lib/str2rgbarray":540}],615:[function(y,Q,K){"use strict";Q.exports=function(e){for(var n=e.axesOptions,r=e.glplot.axesPixels,o=e.fullSceneLayout,t=[[],[],[]],d=0;d<3;++d){var a=o[b[d]];if(a._length=(r[d].hi-r[d].lo)*r[d].pixelsPerDataUnit/e.dataScale[d],Math.abs(a._length)===1/0||isNaN(a._length))t[d]=[];else{a._input_range=a.range.slice(),a.range[0]=r[d].lo/e.dataScale[d],a.range[1]=r[d].hi/e.dataScale[d],a._m=1/(e.dataScale[d]*r[d].pixelsPerDataUnit),a.range[0]===a.range[1]&&(a.range[0]-=1,a.range[1]+=1);var i=a.tickmode;if("auto"===a.tickmode){a.tickmode="linear";var s=a.nticks||v.constrain(a._length/40,4,9);m.autoTicks(a,Math.abs(a.range[1]-a.range[0])/s)}for(var c=m.calcTicks(a,{msUTC:!0}),l=0;l<c.length;++l)c[l].x=c[l].x*e.dataScale[d],"date"===a.type&&(c[l].text=c[l].text.replace(/\<br\>/g," "));t[d]=c,a.tickmode=i}}for(n.ticks=t,d=0;d<3;++d)for(h[d]=.5*(e.glplot.bounds[0][d]+e.glplot.bounds[1][d]),l=0;l<2;++l)n.bounds[l][d]=e.glplot.bounds[l][d];e.contourLevels=function(p){for(var g=new Array(3),u=0;u<3;++u){for(var x=p[u],f=new Array(x.length),T=0;T<x.length;++T)f[T]=x[T].x;g[u]=f}return g}(t)};var m=y("../../cartesian/axes"),v=y("../../../lib"),b=["xaxis","yaxis","zaxis"],h=[0,0,0]},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(y,Q,K){"use strict";function m(v,b){var h,e,n=[0,0,0,0];for(h=0;h<4;++h)for(e=0;e<4;++e)n[e]+=v[4*h+e]*b[h];return n}Q.exports=function(v,b){return m(v.projection,m(v.view,m(v.model,[b[0],b[1],b[2],1])))}},{}],617:[function(y,Q,K){"use strict";var m,v,b=y("../../../stackgl_modules").gl_plot3d,h=b.createCamera,e=b.createScene,n=y("webgl-context"),r=y("has-passive-events"),o=y("../../registry"),t=y("../../lib"),d=t.preserveDrawingBuffer(),a=y("../../plots/cartesian/axes"),i=y("../../components/fx"),s=y("../../lib/str2rgbarray"),c=y("../../lib/show_no_webgl_msg"),l=y("./project"),p=y("./layout/convert"),g=y("./layout/spikes"),u=y("./layout/tick_marks");function x(w,C){var A=document.createElement("div"),O=w.container;this.graphDiv=w.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",A.appendChild(P),this.svgContainer=P,A.id=w.id,A.style.position="absolute",A.style.top=A.style.left="0px",A.style.width=A.style.height="100%",O.appendChild(A),this.fullLayout=C,this.id=w.id||"scene",this.fullSceneLayout=C[this.id],this.plotArgs=[[],{},{}],this.axesOptions=p(C,C[this.id]),this.spikeOptions=g(C[this.id]),this.container=A,this.staticMode=!!w.staticPlot,this.pixelRatio=this.pixelRatio||w.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=o.getComponentMethod("annotations3d","convert"),this.drawAnnotations=o.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var f=x.prototype;f.prepareOptions=function(){var w={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(v||(m=document.createElement("canvas"),v=n({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");w.gl=v,w.canvas=m}return w};var T=!0;f.tryCreatePlot=function(){var w=this.prepareOptions(),C=!0;try{this.glplot=e(w)}catch{if(this.staticMode||!T||d)C=!1;else{t.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{d=w.glOptions.preserveDrawingBuffer=!0,this.glplot=e(w)}catch{d=w.glOptions.preserveDrawingBuffer=!1,C=!1}}}return T=!1,C},f.initializeGLCamera=function(){var w=this.fullSceneLayout.camera;this.camera=h(this.container,{center:[w.center.x,w.center.y,w.center.z],eye:[w.eye.x,w.eye.y,w.eye.z],up:[w.up.x,w.up.y,w.up.z],_ortho:"orthographic"===w.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},f.initializeGLPlot=function(){var w=this;if(w.initializeGLCamera(),!w.tryCreatePlot())return c(w);w.traces={},w.make4thDimension();var C=w.graphDiv,A=C.layout,O=function(){var S={};return w.isCameraChanged(A)&&(S[w.id+".camera"]=w.getCamera()),w.isAspectChanged(A)&&(S[w.id+".aspectratio"]=w.glplot.getAspectratio(),"manual"!==A[w.id].aspectmode&&(w.fullSceneLayout.aspectmode=A[w.id].aspectmode=S[w.id+".aspectmode"]="manual")),S},P=function(S){if(!1!==S.fullSceneLayout.dragmode){var E=O();S.saveLayout(A),S.graphDiv.emit("plotly_relayout",E)}};return w.glplot.canvas&&(w.glplot.canvas.addEventListener("mouseup",function(){P(w)}),w.glplot.canvas.addEventListener("wheel",function(S){if(C._context._scrollZoom.gl3d){if(w.camera._ortho){var E=S.deltaX>S.deltaY?1.1:.9090909090909091,D=w.glplot.getAspectratio();w.glplot.setAspectratio({x:E*D.x,y:E*D.y,z:E*D.z})}P(w)}},!!r&&{passive:!1}),w.glplot.canvas.addEventListener("mousemove",function(){if(!1!==w.fullSceneLayout.dragmode&&0!==w.camera.mouseListener.buttons){var S=O();w.graphDiv.emit("plotly_relayouting",S)}}),w.staticMode||w.glplot.canvas.addEventListener("webglcontextlost",function(S){C&&C.emit&&C.emit("plotly_webglcontextlost",{event:S,layer:w.id})},!1)),w.glplot.oncontextloss=function(){w.recoverContext()},w.glplot.onrender=function(){w.render()},!0},f.render=function(){var w,C=this,A=C.graphDiv,O=C.svgContainer,P=C.container.getBoundingClientRect();A._fullLayout._calcInverseTransform(A);var D=P.width*A._fullLayout._invScaleX,z=P.height*A._fullLayout._invScaleY;O.setAttributeNS(null,"viewBox","0 0 "+D+" "+z),O.setAttributeNS(null,"width",D),O.setAttributeNS(null,"height",z),u(C),C.glplot.axes.update(C.axesOptions);for(var N=Object.keys(C.traces),V=null,X=C.glplot.selection,J=0;J<N.length;++J)"skip"!==(w=C.traces[N[J]]).data.hoverinfo&&w.handlePick(X)&&(V=w),w.setContourLevels&&w.setContourLevels();function G(ie,ue,le){var de=C.fullSceneLayout[ie+"axis"];return"log"!==de.type&&(ue=de.d2l(ue)),a.hoverLabelText(de,ue,le)}if(null!==V){var re,Z=l(C.glplot.cameraParams,X.dataCoordinate),j=A._fullData[(w=V.data).index],B=X.index,H={xLabel:G("x",X.traceCoordinate[0],w.xhoverformat),yLabel:G("y",X.traceCoordinate[1],w.yhoverformat),zLabel:G("z",X.traceCoordinate[2],w.zhoverformat)},ee=i.castHoverinfo(j,C.fullLayout,B),U=(ee||"").split("+"),$=ee&&"all"===ee;j.hovertemplate||$||(-1===U.indexOf("x")&&(H.xLabel=void 0),-1===U.indexOf("y")&&(H.yLabel=void 0),-1===U.indexOf("z")&&(H.zLabel=void 0),-1===U.indexOf("text")&&(X.textLabel=void 0),-1===U.indexOf("name")&&(V.name=void 0));var q=[];"cone"===w.type||"streamtube"===w.type?(H.uLabel=G("x",X.traceCoordinate[3],w.uhoverformat),($||-1!==U.indexOf("u"))&&q.push("u: "+H.uLabel),H.vLabel=G("y",X.traceCoordinate[4],w.vhoverformat),($||-1!==U.indexOf("v"))&&q.push("v: "+H.vLabel),H.wLabel=G("z",X.traceCoordinate[5],w.whoverformat),($||-1!==U.indexOf("w"))&&q.push("w: "+H.wLabel),H.normLabel=X.traceCoordinate[6].toPrecision(3),($||-1!==U.indexOf("norm"))&&q.push("norm: "+H.normLabel),"streamtube"===w.type&&(H.divergenceLabel=X.traceCoordinate[7].toPrecision(3),($||-1!==U.indexOf("divergence"))&&q.push("divergence: "+H.divergenceLabel)),X.textLabel&&q.push(X.textLabel),re=q.join("<br>")):"isosurface"===w.type||"volume"===w.type?(H.valueLabel=a.hoverLabelText(C._mockAxis,C._mockAxis.d2l(X.traceCoordinate[3]),w.valuehoverformat),q.push("value: "+H.valueLabel),X.textLabel&&q.push(X.textLabel),re=q.join("<br>")):re=X.textLabel;var te={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:j._input,fullData:j,curveNumber:j.index,pointNumber:B};i.appendArrayPointValue(te,j,B),w._module.eventData&&(te=j._module.eventData(te,X,j,{},B));var ne={points:[te]};if(C.fullSceneLayout.hovermode){var se=[];i.loneHover({trace:j,x:(.5+.5*Z[0]/Z[3])*D,y:(.5-.5*Z[1]/Z[3])*z,xLabel:H.xLabel,yLabel:H.yLabel,zLabel:H.zLabel,text:re,name:V.name,color:i.castHoverOption(j,B,"bgcolor")||V.color,borderColor:i.castHoverOption(j,B,"bordercolor"),fontFamily:i.castHoverOption(j,B,"font.family"),fontSize:i.castHoverOption(j,B,"font.size"),fontColor:i.castHoverOption(j,B,"font.color"),nameLength:i.castHoverOption(j,B,"namelength"),textAlign:i.castHoverOption(j,B,"align"),hovertemplate:t.castOption(j,B,"hovertemplate"),hovertemplateLabels:t.extendFlat({},te,H),eventData:[te]},{container:O,gd:A,inOut_bbox:se}),te.bbox=se[0]}A.emit(X.buttons&&X.distance<5?"plotly_click":"plotly_hover",ne),this.oldEventData=ne}else i.loneUnhover(O),this.oldEventData&&A.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;C.drawAnnotations(C)},f.recoverContext=function(){var w=this;w.glplot.dispose();var C=function(){w.glplot.gl.isContextLost()?requestAnimationFrame(C):w.initializeGLPlot()?w.plot.apply(w,w.plotArgs):t.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(C)};var _=["xaxis","yaxis","zaxis"];function k(w,C,A){for(var O=w.fullSceneLayout,P=0;P<3;P++){var S=_[P],E=S.charAt(0),D=O[S],z=C[E],N=C[E+"calendar"],V=C["_"+E+"length"];if(t.isArrayOrTypedArray(z))for(var X,J=0;J<(V||z.length);J++)if(t.isArrayOrTypedArray(z[J]))for(var G=0;G<z[J].length;++G)X=D.d2l(z[J][G],0,N),!isNaN(X)&&isFinite(X)&&(A[0][P]=Math.min(A[0][P],X),A[1][P]=Math.max(A[1][P],X));else X=D.d2l(z[J],0,N),!isNaN(X)&&isFinite(X)&&(A[0][P]=Math.min(A[0][P],X),A[1][P]=Math.max(A[1][P],X));else A[0][P]=Math.min(A[0][P],0),A[1][P]=Math.max(A[1][P],V-1)}}f.plot=function(w,C,A){if(this.plotArgs=[w,C,A],!this.glplot.contextLost){var O,P,S,E,D,z,N=C[this.id],V=A[this.id];this.fullLayout=C,this.fullSceneLayout=N,this.axesOptions.merge(C,N),this.spikeOptions.merge(N),this.setViewport(N),this.updateFx(N.dragmode,N.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(s(N.bgcolor)),this.setConvert(D),w?Array.isArray(w)||(w=[w]):w=[];var X=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(S=0;S<w.length;++S)!0===(O=w[S]).visible&&0!==O._length&&k(this,O,X);!function(Se,Me){for(var Ie=Se.fullSceneLayout,Fe=Ie.annotations||[],Ne=0;Ne<3;Ne++)for(var De=_[Ne],$e=De.charAt(0),Re=Ie[De],ze=0;ze<Fe.length;ze++){var Ue=Fe[ze];if(Ue.visible){var je=Re.r2l(Ue[$e]);!isNaN(je)&&isFinite(je)&&(Me[0][Ne]=Math.min(Me[0][Ne],je),Me[1][Ne]=Math.max(Me[1][Ne],je))}}}(this,X);var J=[1,1,1];for(E=0;E<3;++E)J[E]=X[1][E]===X[0][E]?1:1/(X[1][E]-X[0][E]);for(this.dataScale=J,this.convertAnnotations(this),S=0;S<w.length;++S)!0===(O=w[S]).visible&&0!==O._length&&((P=this.traces[O.uid])?P.data.type===O.type?P.update(O):(P.dispose(),P=O._module.plot(this,O),this.traces[O.uid]=P):(P=O._module.plot(this,O),this.traces[O.uid]=P),P.name=O.name);var G=Object.keys(this.traces);e:for(S=0;S<G.length;++S){for(E=0;E<w.length;++E)if(w[E].uid===G[S]&&!0===w[E].visible&&0!==w[E]._length)continue e;(P=this.traces[G[S]]).dispose(),delete this.traces[G[S]]}this.glplot.objects.sort(function(Se,Me){return Se._trace.data.index-Me._trace.data.index});var Z,re=[[0,0,0],[0,0,0]],j=[],B={};for(S=0;S<3;++S){if((z=(D=N[_[S]]).type)in B?(B[z].acc*=J[S],B[z].count+=1):B[z]={acc:J[S],count:1},D.autorange){re[0][S]=1/0,re[1][S]=-1/0;var H=this.glplot.objects,ee=this.fullSceneLayout.annotations||[],U=D._name.charAt(0);for(E=0;E<H.length;E++){var $=H[E],q=$.bounds,te=$._trace.data._pad||0;re[0][S]="ErrorBars"===$.constructor.name&&D._lowerLogErrorBound?Math.min(re[0][S],D._lowerLogErrorBound):Math.min(re[0][S],q[0][S]/J[S]-te),re[1][S]=Math.max(re[1][S],q[1][S]/J[S]+te)}for(E=0;E<ee.length;E++){var ne=ee[E];if(ne.visible){var se=D.r2l(ne[U]);re[0][S]=Math.min(re[0][S],se),re[1][S]=Math.max(re[1][S],se)}}if("rangemode"in D&&"tozero"===D.rangemode&&(re[0][S]=Math.min(re[0][S],0),re[1][S]=Math.max(re[1][S],0)),re[0][S]>re[1][S])re[0][S]=-1,re[1][S]=1;else{var ie=re[1][S]-re[0][S];re[0][S]-=ie/32,re[1][S]+=ie/32}if("reversed"===D.autorange){var ue=re[0][S];re[0][S]=re[1][S],re[1][S]=ue}}else{var le=D.range;re[0][S]=D.r2l(le[0]),re[1][S]=D.r2l(le[1])}re[0][S]===re[1][S]&&(re[0][S]-=1,re[1][S]+=1),j[S]=re[1][S]-re[0][S],this.glplot.setBounds(S,{min:re[0][S]*J[S],max:re[1][S]*J[S]})}var de=N.aspectmode;if("cube"===de)Z=[1,1,1];else if("manual"===de){var be=N.aspectratio;Z=[be.x,be.y,be.z]}else{if("auto"!==de&&"data"!==de)throw new Error("scene.js aspectRatio was not one of the enumerated types");var _e=[1,1,1];for(S=0;S<3;++S){var xe=B[z=(D=N[_[S]]).type];_e[S]=Math.pow(xe.acc,1/xe.count)/J[S]}Z="data"===de||Math.max.apply(null,_e)/Math.min.apply(null,_e)<=4?_e:[1,1,1]}N.aspectratio.x=V.aspectratio.x=Z[0],N.aspectratio.y=V.aspectratio.y=Z[1],N.aspectratio.z=V.aspectratio.z=Z[2],this.glplot.setAspectratio(N.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:N.aspectratio.x,y:N.aspectratio.y,z:N.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=N.aspectmode);var Ee=N.domain||null,he=C._size||null;if(Ee&&he){var me=this.container.style;me.position="absolute",me.left=he.l+Ee.x[0]*he.w+"px",me.top=he.t+(1-Ee.y[1])*he.h+"px",me.width=he.w*(Ee.x[1]-Ee.x[0])+"px",me.height=he.h*(Ee.y[1]-Ee.y[0])+"px"}this.glplot.redraw()}},f.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},f.getCamera=function(){var w;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(w=this.camera).up[0],y:w.up[1],z:w.up[2]},center:{x:w.center[0],y:w.center[1],z:w.center[2]},eye:{x:w.eye[0],y:w.eye[1],z:w.eye[2]},projection:{type:!0===w._ortho?"orthographic":"perspective"}}},f.setViewport=function(w){var C,A=w.camera;this.camera.lookAt.apply(this,[[(C=A).eye.x,C.eye.y,C.eye.z],[C.center.x,C.center.y,C.center.z],[C.up.x,C.up.y,C.up.z]]),this.glplot.setAspectratio(w.aspectratio),"orthographic"===A.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},f.isCameraChanged=function(w){var C=this.getCamera(),A=t.nestedProperty(w,this.id+".camera").get();var D,z,N,V,X,J,P=!1;if(void 0===A)P=!0;else{for(var S=0;S<3;S++)for(var E=0;E<3;E++)if(D=C,V=E,X=void 0,J=void 0,J=["x","y","z"],!(z=A)[(X=["up","center","eye"])[N=S]]||D[X[N]][J[V]]!==z[X[N]][J[V]]){P=!0;break}(!A.projection||C.projection&&C.projection.type!==A.projection.type)&&(P=!0)}return P},f.isAspectChanged=function(w){var C=this.glplot.getAspectratio(),A=t.nestedProperty(w,this.id+".aspectratio").get();return void 0===A||A.x!==C.x||A.y!==C.y||A.z!==C.z},f.saveLayout=function(w){var C,A,O,P,S,E,D=this.fullLayout,z=this.isCameraChanged(w),N=this.isAspectChanged(w),V=z||N;if(V){var X={};z&&(C=this.getCamera(),O=(A=t.nestedProperty(w,this.id+".camera")).get(),X[this.id+".camera"]=O),N&&(P=this.glplot.getAspectratio(),E=(S=t.nestedProperty(w,this.id+".aspectratio")).get(),X[this.id+".aspectratio"]=E),o.call("_storeDirectGUIEdit",w,D._preGUI,X),z&&(A.set(C),t.nestedProperty(D,this.id+".camera").set(C)),N&&(S.set(P),t.nestedProperty(D,this.id+".aspectratio").set(P),this.glplot.redraw())}return V},f.updateFx=function(w,C){var A=this.camera;if(A)if("orbit"===w)A.mode="orbit",A.keyBindingMode="rotate";else if("turntable"===w){A.up=[0,0,1],A.mode="turntable",A.keyBindingMode="rotate";var O=this.graphDiv,P=O._fullLayout,S=this.fullSceneLayout.camera,E=S.up.x,D=S.up.y,z=S.up.z;if(z/Math.sqrt(E*E+D*D+z*z)<.999){var N=this.id+".camera.up",V={x:0,y:0,z:1},X={};X[N]=V;var J=O.layout;o.call("_storeDirectGUIEdit",J,P._preGUI,X),S.up=V,t.nestedProperty(J,N).set(V)}}else A.keyBindingMode=w;this.fullSceneLayout.hovermode=C},f.toImage=function(w){w||(w="png"),this.staticMode&&this.container.appendChild(m),this.glplot.redraw();var C=this.glplot.gl,A=C.drawingBufferWidth,O=C.drawingBufferHeight;C.bindFramebuffer(C.FRAMEBUFFER,null);var P=new Uint8Array(A*O*4);C.readPixels(0,0,A,O,C.RGBA,C.UNSIGNED_BYTE,P),function(N,V,X){for(var J=0,G=X-1;J<G;++J,--G)for(var Z=0;Z<V;++Z)for(var re=0;re<4;++re){var j=4*(V*J+Z)+re,B=4*(V*G+Z)+re,H=N[j];N[j]=N[B],N[B]=H}}(P,A,O),function(N,V,X){for(var J=0;J<X;++J)for(var G=0;G<V;++G){var Z=4*(V*J+G),re=N[Z+3];if(re>0)for(var j=255/re,B=0;B<3;++B)N[Z+B]=Math.min(j*N[Z+B],255)}}(P,A,O);var S=document.createElement("canvas");S.width=A,S.height=O;var E,D=S.getContext("2d",{willReadFrequently:!0}),z=D.createImageData(A,O);switch(z.data.set(P),D.putImageData(z,0,0),w){case"jpeg":E=S.toDataURL("image/jpeg");break;case"webp":E=S.toDataURL("image/webp");break;default:E=S.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(m),E},f.setConvert=function(){for(var w=0;w<3;w++){var C=this.fullSceneLayout[_[w]];a.setConvert(C,this.fullLayout),C.setScale=t.noop}},f.make4thDimension=function(){var w=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},a.setConvert(this._mockAxis,w)},Q.exports=x},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h){h=h||m.length;for(var e=new Array(h),n=0;n<h;n++)e[n]=[m[n],v[n],b[n]];return e}},{}],619:[function(y,Q,K){"use strict";var m=y("./font_attributes"),v=y("./animation_attributes"),b=y("../components/color/attributes"),h=y("../components/shapes/draw_newshape/attributes"),e=y("../components/selections/draw_newselection/attributes"),n=y("./pad_attributes"),r=y("../lib/extend").extendFlat,o=m({editType:"calc"});o.family.dflt='"Open Sans", verdana, arial, sans-serif',o.size.dflt=12,o.color.dflt=b.defaultLine,Q.exports={font:o,title:{text:{valType:"string",editType:"layoutstyle"},font:m({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:r(n({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:b.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:b.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:b.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:h.newshape,activeshape:h.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:r({},v.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:m({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(y,Q,K){"use strict";var m=y("../../lib/sort_object_keys"),v='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',b=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',v].join(" "),h=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:v,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:h,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:h,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=m(e);Q.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":538}],621:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b){var h=v.split(" "),e=h[0],n=h[1],r=m.isArrayOrTypedArray(b)?m.mean(b):b,o=.5+r/100,t=1.5+r/100,d=["",""],a=[0,0];switch(e){case"top":d[0]="top",a[1]=-t;break;case"bottom":d[0]="bottom",a[1]=t}switch(n){case"left":d[1]="right",a[0]=-o;break;case"right":d[1]="left",a[0]=o}return{anchor:d[0]&&d[1]?d.join("-"):d[0]?d[0]:d[1]?d[1]:"center",offset:a}}},{"../../lib":515}],622:[function(y,Q,K){"use strict";var m=y("mapbox-gl/dist/mapbox-gl-unminified"),v=y("../../lib"),b=v.strTranslate,h=v.strScale,e=y("../../plots/get_data").getSubplotCalcData,n=y("../../constants/xmlns_namespaces"),r=y("@plotly/d3"),o=y("../../components/drawing"),t=y("../../lib/svg_text_utils"),d=y("./mapbox"),a=K.constants=y("./constants");function i(s){return"string"==typeof s&&(-1!==a.styleValuesMapbox.indexOf(s)||0===s.indexOf("mapbox://"))}K.name="mapbox",K.attr="subplot",K.idRoot="mapbox",K.idRegex=K.attrRegex=v.counterRegex("mapbox"),K.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},K.layoutAttributes=y("./layout_attributes"),K.supplyLayoutDefaults=y("./layout_defaults"),K.plot=function(s){var c=s._fullLayout,l=s.calcdata,p=c._subplots.mapbox;if(m.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var g=function(k,w){var C=k._fullLayout;if(""===k._context.mapboxAccessToken)return"";for(var A=[],O=[],P=!1,S=!1,E=0;E<w.length;E++){var D=C[w[E]],z=D.accesstoken;i(D.style)&&(z?v.pushUnique(A,z):(i(D._input.style)&&(v.error("Uses Mapbox map style, but did not set an access token."),P=!0),S=!0)),z&&v.pushUnique(O,z)}if(S){var N=P?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw v.error(N),new Error(N)}return A.length?(A.length>1&&v.warn(a.multipleTokensErrorMsg),A[0]):(O.length&&v.log(["Listed mapbox access token(s)",O.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(s,p);m.accessToken=g;for(var u=0;u<p.length;u++){var x=p[u],f=e(l,"mapbox",x),T=c[x],_=T._subplot;_||(_=new d(s,x),c[x]._subplot=_),_.viewInitial||(_.viewInitial={center:v.extendFlat({},T.center),zoom:T.zoom,bearing:T.bearing,pitch:T.pitch}),_.plot(f,c,s._promises)}},K.clean=function(s,c,l,p){for(var g=p._subplots.mapbox||[],u=0;u<g.length;u++){var x=g[u];!c[x]&&p[x]._subplot&&p[x]._subplot.destroy()}},K.toSVG=function(s){for(var c=s._fullLayout,l=c._subplots.mapbox,p=c._size,g=0;g<l.length;g++){var u=c[l[g]],x=u.domain,f=u._subplot.toImage("png");c._glimages.append("svg:image").attr({xmlns:n.svg,"xlink:href":f,x:p.l+p.w*x.x[0],y:p.t+p.h*(1-x.y[1]),width:p.w*(x.x[1]-x.x[0]),height:p.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});var T=r.select(u._subplot.div);if(null!==T.select(".mapboxgl-ctrl-logo").node().offsetParent){var _=c._glimages.append("g");_.attr("transform",b(p.l+p.w*x.x[0]+10,p.t+p.h*(1-x.y[0])-31)),_.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=T.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),w=c._glimages.append("g"),C=w.append("text");C.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var A=o.bBox(C.node()),O=p.w*(x.x[1]-x.x[0]);if(A.width>O/2){var P=k.split("|").join("<br>");C.text(P).attr("data-unformatted",P).call(t.convertToTspans,s),A=o.bBox(C.node())}C.attr("transform",b(-3,8-A.height)),w.insert("rect",".static-attribution").attr({x:-A.width-6,y:-A.height-3,width:A.width+6,height:A.height+3,fill:"rgba(255, 255, 255, 0.75)"});var S=1;A.width+6>O&&(S=O/(A.width+6));var E=[p.l+p.w*x.x[1],p.t+p.h*(1-x.y[0])];w.attr("transform",b(E[0],E[1])+h(S))}},K.updateFx=function(s){for(var c=s._fullLayout,l=c._subplots.mapbox,p=0;p<l.length;p++)c[l[p]]._subplot.updateFx(c)}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../lib/svg_text_utils").sanitizeHTML,b=y("./convert_text_opts"),h=y("./constants");function e(t,d){this.subplot=t,this.uid=t.uid+"-"+d,this.index=d,this.idSource="source-"+this.uid,this.idLayer=h.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var n=e.prototype;function r(t){if(!t.visible)return!1;var d=t.source;if(Array.isArray(d)&&d.length>0){for(var a=0;a<d.length;a++)if("string"!=typeof d[a]||0===d[a].length)return!1;return!0}return m.isPlainObject(d)||"string"==typeof d&&d.length>0}function o(t){var d={},a={};switch(t.type){case"circle":m.extendFlat(a,{"circle-radius":t.circle.radius,"circle-color":t.color,"circle-opacity":t.opacity});break;case"line":m.extendFlat(a,{"line-width":t.line.width,"line-color":t.color,"line-opacity":t.opacity,"line-dasharray":t.line.dash});break;case"fill":m.extendFlat(a,{"fill-color":t.color,"fill-outline-color":t.fill.outlinecolor,"fill-opacity":t.opacity});break;case"symbol":var i=t.symbol,s=b(i.textposition,i.iconsize);m.extendFlat(d,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":s.anchor,"text-offset":s.offset,"symbol-placement":i.placement}),m.extendFlat(a,{"icon-color":t.color,"text-color":i.textfont.color,"text-opacity":t.opacity});break;case"raster":m.extendFlat(a,{"raster-fade-duration":0,"raster-opacity":t.opacity})}return{layout:d,paint:a}}n.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=r(t)},n.needsNewImage=function(t){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===t.sourcetype&&(this.source!==t.source||JSON.stringify(this.coordinates)!==JSON.stringify(t.coordinates))},n.needsNewSource=function(t){return this.sourceType!==t.sourcetype||JSON.stringify(this.source)!==JSON.stringify(t.source)||this.layerType!==t.type},n.needsNewLayer=function(t){return this.layerType!==t.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},n.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},n.updateImage=function(t){this.subplot.map.getSource(this.idSource).updateImage({url:t.source,coordinates:t.coordinates});var d=this.findFollowingMapboxLayerId(this.lookupBelow());null!==d&&this.subplot.map.moveLayer(this.idLayer,d)},n.updateSource=function(t){var i,s,c,l,p,d=this.subplot.map;if(d.getSource(this.idSource)&&d.removeSource(this.idSource),this.sourceType=t.sourcetype,this.source=t.source,r(t)){var a=(l=(i=t).source,p={type:c=i.sourcetype},"geojson"===c?s="data":"vector"===c?s="string"==typeof l?"url":"tiles":"raster"===c?(s="tiles",p.tileSize=256):"image"===c&&(s="url",p.coordinates=i.coordinates),p[s]=l,i.sourceattribution&&(p.attribution=v(i.sourceattribution)),p);d.addSource(this.idSource,a)}},n.findFollowingMapboxLayerId=function(t){if("traces"===t)for(var d=this.subplot.getMapLayers(),a=0;a<d.length;a++){var i=d[a].id;if("string"==typeof i&&0===i.indexOf(h.traceLayerPrefix)){t=i;break}}return t},n.updateLayer=function(t){var d=this.subplot,a=o(t),i=this.lookupBelow(),s=this.findFollowingMapboxLayerId(i);this.removeLayer(),r(t)&&d.addLayer({id:this.idLayer,source:this.idSource,"source-layer":t.sourcelayer||"",type:t.type,minzoom:t.minzoom,maxzoom:t.maxzoom,layout:a.layout,paint:a.paint},s),this.layerType=t.type,this.below=i},n.updateStyle=function(t){if(r(t)){var d=o(t);this.subplot.setOptions(this.idLayer,"setLayoutProperty",d.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",d.paint)}},n.removeLayer=function(){var t=this.subplot.map;t.getLayer(this.idLayer)&&t.removeLayer(this.idLayer)},n.dispose=function(){var t=this.subplot.map;t.getLayer(this.idLayer)&&t.removeLayer(this.idLayer),t.getSource(this.idSource)&&t.removeSource(this.idSource)},Q.exports=function(t,d,a){var i=new e(t,d);return i.update(a),i}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/color").defaultLine,b=y("../domain").attributes,h=y("../font_attributes"),e=y("../../traces/scatter/attributes").textposition,n=y("../../plot_api/edit_types").overrideAll,r=y("../../plot_api/plot_template").templatedArray,o=y("./constants"),t=h({});t.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(Q.exports=n({_arrayAttrRegexps:[m.counterRegex("mapbox",".layers",!0)],domain:b({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:o.styleValuesMapbox.concat(o.styleValuesNonMapbox),dflt:o.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:r("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:v},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:v}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:t,textposition:m.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../subplot_defaults"),b=y("../array_container_defaults"),h=y("./layout_attributes");function e(r,o,t,d){t("accesstoken",d.accessToken),t("style"),t("center.lon"),t("center.lat"),t("zoom"),t("bearing"),t("pitch"),b(r,o,{name:"layers",handleItemDefaults:n}),o._input=r}function n(r,o){function t(c,l){return m.coerce(r,o,h.layers,c,l)}if(t("visible")){var d,a=t("sourcetype"),i="raster"===a||"image"===a;t("source"),t("sourceattribution"),"vector"===a&&t("sourcelayer"),"image"===a&&t("coordinates"),i&&(d="raster");var s=t("type",d);i&&"raster"!==s&&(s=o.type="raster",m.log("Source types *raster* and *image* must drawn *raster* layer type.")),t("below"),t("color"),t("opacity"),t("minzoom"),t("maxzoom"),"circle"===s&&t("circle.radius"),"line"===s&&(t("line.width"),t("line.dash")),"fill"===s&&t("fill.outlinecolor"),"symbol"===s&&(t("symbol.icon"),t("symbol.iconsize"),t("symbol.text"),m.coerceFont(t,"symbol.textfont"),t("symbol.textposition"),t("symbol.placement"))}}Q.exports=function(r,o,t){v(r,o,t,{type:"mapbox",attributes:h,handleDefaults:e,partition:"y",accessToken:o._mapboxAccessToken})}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(y,Q,K){"use strict";var m=y("mapbox-gl/dist/mapbox-gl-unminified"),v=y("../../lib"),b=y("../../lib/geo_location_utils"),h=y("../../registry"),e=y("../cartesian/axes"),n=y("../../components/dragelement"),r=y("../../components/fx"),o=y("../../components/dragelement/helpers"),t=o.drawMode,d=o.selectMode,a=y("../../components/selections").prepSelect,i=y("../../components/selections").clearOutline,s=y("../../components/selections").clearSelectionsCache,c=y("../../components/selections").selectOnClick,l=y("./constants"),p=y("./layers");function g(k,w){this.id=w,this.gd=k;var C=k._fullLayout,A=k._context;this.container=C._glcontainer.node(),this.isStatic=A.staticPlot,this.uid=C._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(C),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var u=g.prototype;u.plot=function(k,w,C){var A,O=this;O.map&&w[O.id].accesstoken!==O.accessToken&&(O.map.remove(),O.map=null,O.styleObj=null,O.traceHash={},O.layerList=[]),A=new Promise(O.map?function(S,E){O.updateMap(k,w,S,E)}:function(S,E){O.createMap(k,w,S,E)}),C.push(A)},u.createMap=function(k,w,C,A){var O=this,P=w[O.id],S=O.styleObj=f(P.style);O.accessToken=P.accesstoken;var E=O.map=new m.Map({container:O.div,style:S.style,center:_(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,interactive:!O.isStatic,preserveDrawingBuffer:O.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new m.AttributionControl({compact:!0}));E._canvas.style.left="0px",E._canvas.style.top="0px",O.rejectOnError(A),O.isStatic||O.initFx(k,w);var D=[];D.push(new Promise(function(z){E.once("load",z)})),D=D.concat(b.fetchTraceGeoData(k)),Promise.all(D).then(function(){O.fillBelowLookup(k,w),O.updateData(k),O.updateLayout(w),O.resolveOnRender(C)}).catch(A)},u.updateMap=function(k,w,C,A){var O=this,P=O.map,S=w[this.id];O.rejectOnError(A);var E=[],D=f(S.style);JSON.stringify(O.styleObj)!==JSON.stringify(D)&&(O.styleObj=D,P.setStyle(D.style),O.traceHash={},E.push(new Promise(function(z){P.once("styledata",z)}))),E=E.concat(b.fetchTraceGeoData(k)),Promise.all(E).then(function(){O.fillBelowLookup(k,w),O.updateData(k),O.updateLayout(w),O.resolveOnRender(C)}).catch(A)},u.fillBelowLookup=function(k,w){var C,A,O=w[this.id].layers,P=this.belowLookup={},S=!1;for(C=0;C<k.length;C++){var E=k[C][0].trace,D=E._module;"string"==typeof E.below?A=E.below:D.getBelow&&(A=D.getBelow(E,this)),""===A&&(S=!0),P["trace-"+E.uid]=A||""}for(C=0;C<O.length;C++){var z=O[C];P["layout-"+C]=A="string"==typeof z.below?z.below:S?"traces":""}var N,V,X={};for(N in P)X[A=P[N]]?X[A].push(N):X[A]=[N];for(A in X){var J=X[A];if(J.length>1)for(C=0;C<J.length;C++)0===(N=J[C]).indexOf("trace-")?(V=N.split("trace-")[1],this.traceHash[V]&&(this.traceHash[V].below=null)):0===N.indexOf("layout-")&&(V=N.split("layout-")[1],this.layerList[V]&&(this.layerList[V].below=null))}};var x={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function f(k){var w={};return v.isPlainObject(k)?(w.id=k.id,w.style=k):"string"==typeof k?(w.id=k,w.style=-1!==l.styleValuesMapbox.indexOf(k)?T(k):l.stylesNonMapbox[k]?l.stylesNonMapbox[k]:k):(w.id=l.styleValueDflt,w.style=T(l.styleValueDflt)),w.transition={duration:0,delay:0},w}function T(k){return l.styleUrlPrefix+k+"-"+l.styleUrlSuffix}function _(k){return[k.lon,k.lat]}u.updateData=function(k){var w,C,A,O,P=this.traceHash,S=k.slice().sort(function(V,X){return x[V[0].trace.type]-x[X[0].trace.type]});for(A=0;A<S.length;A++){var E=S[A],D=!1;(w=P[(C=E[0].trace).uid])&&(w.type===C.type?(w.update(E),D=!0):w.dispose()),!D&&C._module&&(P[C.uid]=C._module.plot(this,E))}var z=Object.keys(P);e:for(A=0;A<z.length;A++){var N=z[A];for(O=0;O<k.length;O++)if(N===(C=k[O][0].trace).uid)continue e;(w=P[N]).dispose(),delete P[N]}},u.updateLayout=function(k){var w=this.map,C=k[this.id];this.dragging||this.wheeling||(w.setCenter(_(C.center)),w.setZoom(C.zoom),w.setBearing(C.bearing),w.setPitch(C.pitch)),this.updateLayers(k),this.updateFramework(k),this.updateFx(k),this.map.resize(),this.gd._context._scrollZoom.mapbox?w.scrollZoom.enable():w.scrollZoom.disable()},u.resolveOnRender=function(k){var w=this.map;w.on("render",function C(){w.loaded()&&(w.off("render",C),setTimeout(k,10))})},u.rejectOnError=function(k){var w=this.map;function C(){k(new Error(l.mapOnErrorMsg))}w.once("error",C),w.once("style.error",C),w.once("source.error",C),w.once("tile.error",C),w.once("layer.error",C)},u.createFramework=function(k){var w=this,C=w.div=document.createElement("div");C.id=w.uid,C.style.position="absolute",w.container.appendChild(C),w.xaxis={_id:"x",c2p:function(A){return w.project(A).x}},w.yaxis={_id:"y",c2p:function(A){return w.project(A).y}},w.updateFramework(k),w.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(w.mockAxis,k)},u.initFx=function(k,w){var C=this,A=C.gd,O=C.map;function P(){r.loneUnhover(w._hoverlayer)}function S(){var E=C.getView();A.emit("plotly_relayouting",C.getViewEditsWithDerived(E))}O.on("moveend",function(E){if(C.map){var D=A._fullLayout;if(E.originalEvent||C.wheeling){var z=D[C.id];h.call("_storeDirectGUIEdit",A.layout,D._preGUI,C.getViewEdits(z));var N=C.getView();z._input.center=z.center=N.center,z._input.zoom=z.zoom=N.zoom,z._input.bearing=z.bearing=N.bearing,z._input.pitch=z.pitch=N.pitch,A.emit("plotly_relayout",C.getViewEditsWithDerived(N))}E.originalEvent&&"mouseup"===E.originalEvent.type?C.dragging=!1:C.wheeling&&(C.wheeling=!1),D._rehover&&D._rehover()}}),O.on("wheel",function(){C.wheeling=!0}),O.on("mousemove",function(E){var D=C.div.getBoundingClientRect(),z=[E.originalEvent.offsetX,E.originalEvent.offsetY];E.target.getBoundingClientRect=function(){return D},C.xaxis.p2c=function(){return O.unproject(z).lng},C.yaxis.p2c=function(){return O.unproject(z).lat},A._fullLayout._rehover=function(){A._fullLayout._hoversubplot===C.id&&A._fullLayout[C.id]&&r.hover(A,E,C.id)},r.hover(A,E,C.id),A._fullLayout._hoversubplot=C.id}),O.on("dragstart",function(){C.dragging=!0,P()}),O.on("zoomstart",P),O.on("mouseout",function(){A._fullLayout._hoversubplot=null}),O.on("drag",S),O.on("zoom",S),O.on("dblclick",function(){var E=A._fullLayout[C.id];h.call("_storeDirectGUIEdit",A.layout,A._fullLayout._preGUI,C.getViewEdits(E));var D=C.viewInitial;O.setCenter(_(D.center)),O.setZoom(D.zoom),O.setBearing(D.bearing),O.setPitch(D.pitch);var z=C.getView();E._input.center=E.center=z.center,E._input.zoom=E.zoom=z.zoom,E._input.bearing=E.bearing=z.bearing,E._input.pitch=E.pitch=z.pitch,A.emit("plotly_doubleclick",null),A.emit("plotly_relayout",C.getViewEditsWithDerived(z))}),C.clearOutline=function(){s(C.dragOptions),i(C.dragOptions.gd)},C.onClickInPanFn=function(E){return function(D){var z=A._fullLayout.clickmode;z.indexOf("select")>-1&&c(D.originalEvent,A,[C.xaxis],[C.yaxis],C.id,E),z.indexOf("event")>-1&&r.click(A,D.originalEvent)}}},u.updateFx=function(k){var w=this,C=w.map;if(!w.isStatic){var P=k.dragmode;w.dragOptions=v.extendDeep(w.dragOptions||{},{dragmode:k.dragmode,element:w.div,gd:w.gd,plotinfo:{id:w.id,domain:k[w.id].domain,xaxis:w.xaxis,yaxis:w.yaxis,fillRangeItems:function(D,z){z.isRect?(D.range={})[w.id]=[E([z.xmin,z.ymin]),E([z.xmax,z.ymax])]:(D.lassoPoints={})[w.id]=z.map(E)}},xaxes:[w.xaxis],yaxes:[w.yaxis],subplot:w.id}),C.off("click",w.onClickInPanHandler),d(P)||t(P)?(C.dragPan.disable(),C.on("zoomstart",w.clearSelect),w.dragOptions.prepFn=function(D,z,N){a(D,z,N,w.dragOptions,P)},n.init(w.dragOptions)):(C.dragPan.enable(),C.off("zoomstart",w.clearSelect),w.div.onmousedown=null,w.onClickInPanHandler=w.onClickInPanFn(w.dragOptions),C.on("click",w.onClickInPanHandler))}function E(D){var z=w.map.unproject(D);return[z.lng,z.lat]}},u.updateFramework=function(k){var w=k[this.id].domain,C=k._size,A=this.div.style;A.width=C.w*(w.x[1]-w.x[0])+"px",A.height=C.h*(w.y[1]-w.y[0])+"px",A.left=C.l+w.x[0]*C.w+"px",A.top=C.t+(1-w.y[1])*C.h+"px",this.xaxis._offset=C.l+w.x[0]*C.w,this.xaxis._length=C.w*(w.x[1]-w.x[0]),this.yaxis._offset=C.t+(1-w.y[1])*C.h,this.yaxis._length=C.h*(w.y[1]-w.y[0])},u.updateLayers=function(k){var w,C=k[this.id].layers,A=this.layerList;if(C.length!==A.length){for(w=0;w<A.length;w++)A[w].dispose();for(A=this.layerList=[],w=0;w<C.length;w++)A.push(p(this,w,C[w]))}else for(w=0;w<C.length;w++)A[w].update(C[w])},u.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},u.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},u.setOptions=function(k,w,C){for(var A in C)this.map[w](k,A,C[A])},u.getMapLayers=function(){return this.map.getStyle().layers},u.addLayer=function(k,w){var C=this.map;if("string"==typeof w){if(""===w)return void C.addLayer(k,w);for(var A=this.getMapLayers(),O=0;O<A.length;O++)if(w===A[O].id)return void C.addLayer(k,w);v.warn(["Trying to add layer with *below* value",w,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}C.addLayer(k)},u.project=function(k){return this.map.project(new m.LngLat(k[0],k[1]))},u.getView=function(){var k=this.map,w=k.getCenter(),C={lon:w.lng,lat:w.lat},A=k.getCanvas(),O=parseInt(A.style.width),P=parseInt(A.style.height);return{center:C,zoom:k.getZoom(),bearing:k.getBearing(),pitch:k.getPitch(),_derived:{coordinates:[k.unproject([0,0]).toArray(),k.unproject([O,0]).toArray(),k.unproject([O,P]).toArray(),k.unproject([0,P]).toArray()]}}},u.getViewEdits=function(k){for(var w=this.id,C=["center","zoom","bearing","pitch"],A={},O=0;O<C.length;O++){var P=C[O];A[w+"."+P]=k[P]}return A},u.getViewEditsWithDerived=function(k){var w=this.id,C=this.getViewEdits(k);return C[w+"._derived"]=k._derived,C},Q.exports=g},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(y,Q,K){"use strict";Q.exports=function(m){var v=m.editType;return{t:{valType:"number",dflt:0,editType:v},r:{valType:"number",dflt:0,editType:v},b:{valType:"number",dflt:0,editType:v},l:{valType:"number",dflt:0,editType:v},editType:v}}},{}],628:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("d3-time-format").timeFormatLocale,b=y("d3-format").formatLocale,h=y("fast-isnumeric"),e=y("../registry"),n=y("../plot_api/plot_schema"),r=y("../plot_api/plot_template"),o=y("../lib"),t=y("../components/color"),d=y("../constants/numerical").BADNUM,a=y("./cartesian/axis_ids"),i=y("../components/shapes/handle_outline").clearOutline,s=y("./animation_attributes"),c=y("./frame_attributes"),l=y("../plots/get_data").getModuleCalcData,p=o.relinkPrivateKeys,g=o._,u=Q.exports={};o.extendFlat(u,e),u.attributes=y("./attributes"),u.attributes.type.values=u.allTypes,u.fontAttrs=y("./font_attributes"),u.layoutAttributes=y("./layout_attributes"),u.fontWeight="normal";var x=u.transformsRegistry,f=y("./command");u.executeAPICommand=f.executeAPICommand,u.computeAPICommandBindings=f.computeAPICommandBindings,u.manageCommandObserver=f.manageCommandObserver,u.hasSimpleAPICommandBindings=f.hasSimpleAPICommandBindings,u.redrawText=function(V){return V=o.getGraphDiv(V),new Promise(function(X){setTimeout(function(){V._fullLayout&&(e.getComponentMethod("annotations","draw")(V),e.getComponentMethod("legend","draw")(V),e.getComponentMethod("colorbar","draw")(V),X(u.previousPromises(V)))},300)})},u.resize=function(V){var X;V=o.getGraphDiv(V);var J=new Promise(function(G,Z){V&&!o.isHidden(V)||Z(new Error("Resize must be passed a displayed plot div element.")),V._redrawTimer&&clearTimeout(V._redrawTimer),V._resolveResize&&(X=V._resolveResize),V._resolveResize=G,V._redrawTimer=setTimeout(function(){if(!V.layout||V.layout.width&&V.layout.height||o.isHidden(V))G(V);else{delete V.layout.width,delete V.layout.height;var re=V.changed;V.autoplay=!0,e.call("relayout",V,{autosize:!0}).then(function(){V.changed=re,V._resolveResize===G&&(delete V._resolveResize,G(V))})}},100)});return X&&X(J),J},u.previousPromises=function(V){if((V._promises||[]).length)return Promise.all(V._promises).then(function(){V._promises=[]})},u.addLinks=function(V){if(V._context.showLink||V._context.showSources){var X=V._fullLayout,J=o.ensureSingle(X._paper,"text","js-plot-link-container",function(H){H.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:t.defaultLine,"pointer-events":"all"}).each(function(){var ee=m.select(this);ee.append("tspan").classed("js-link-to-tool",!0),ee.append("tspan").classed("js-link-spacer",!0),ee.append("tspan").classed("js-sourcelinks",!0)})}),G=J.node(),Z={y:X._paper.attr("height")-9};document.body.contains(G)&&G.getComputedTextLength()>=X.width-20?(Z["text-anchor"]="start",Z.x=5):(Z["text-anchor"]="end",Z.x=X._paper.attr("width")-7),J.attr(Z);var re=J.select(".js-link-to-tool"),j=J.select(".js-link-spacer"),B=J.select(".js-sourcelinks");V._context.showSources&&V._context.showSources(V),V._context.showLink&&function(H,ee){ee.text("");var U=ee.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(H._context.linkText+" "+String.fromCharCode(187));if(H._context.sendData)U.on("click",function(){u.sendDataToCloud(H)});else{var $=window.location.pathname.split("/"),q=window.location.search;U.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+$[2].split(".")[0]+"/"+$[1]+q})}}(V,re),j.text(re.text()&&B.text()?" - ":"")}},u.sendDataToCloud=function(V){var X=(window.PLOTLYENV||{}).BASE_URL||V._context.plotlyServerURL;if(X){V.emit("plotly_beforeexport");var J=m.select(V).append("div").attr("id","hiddenform").style("display","none"),G=J.append("form").attr({action:X+"/external",method:"post",target:"_blank"});return G.append("input").attr({type:"text",name:"data"}).node().value=u.graphJson(V,!1,"keepdata"),G.node().submit(),J.remove(),V.emit("plotly_afterexport"),!1}};var T=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function k(V,X){var J=V._context.locale;J||(J="en-US");var G=!1,Z={};function re($){for(var q=!0,te=0;te<X.length;te++){var ne=X[te];Z[ne]||($[ne]?Z[ne]=$[ne]:q=!1)}q&&(G=!0)}for(var j=0;j<2;j++){for(var B=V._context.locales,H=0;H<2;H++){var ee=(B[J]||{}).format;if(ee&&(re(ee),G))break;B=e.localeRegistry}var U=J.split("-")[0];if(G||U===J)break;J=U}return G||re(e.localeRegistry.en.format),Z}function w(V,X){var J={_fullLayout:X},G="x"===V._id.charAt(0),Z=V._mainAxis._anchorAxis,re="",j="",B="";if(Z&&(B=Z._mainAxis._id,re=G?V._id+B:B+V._id),!re||!X._plots[re]){re="";for(var H=V._counterAxes,ee=0;ee<H.length;ee++){var U=H[ee],$=G?V._id+U:U+V._id;j||(j=$);var q=a.getFromId(J,U);if(B&&q.overlaying===B){re=$;break}}}return re||j}function C(V){var X=V.transforms;if(Array.isArray(X)&&X.length)for(var J=0;J<X.length;J++){var G=X[J],Z=G._module||x[G.type];if(Z&&Z.makesData)return!0}return!1}function A(V,X,J,G){for(var Z=V.transforms,re=[V],j=0;j<Z.length;j++){var B=Z[j],H=x[B.type];H&&H.transform&&(re=H.transform(re,{transform:B,fullTrace:V,fullData:X,layout:J,fullLayout:G,transformIndex:j}))}return re}function O(V){return"string"==typeof V&&"px"===V.substr(V.length-2)&&parseFloat(V)}function P(V){var X=V.margin;if(!V._size){var J=V._size={l:Math.round(X.l),r:Math.round(X.r),t:Math.round(X.t),b:Math.round(X.b),p:Math.round(X.pad)};J.w=Math.round(V.width)-J.l-J.r,J.h=Math.round(V.height)-J.t-J.b}V._pushmargin||(V._pushmargin={}),V._pushmarginIds||(V._pushmarginIds={})}u.supplyDefaults=function(V,X){var ze,Ue,J=X&&X.skipUpdateCalc,G=V._fullLayout||{};if(G._skipDefaults)delete G._skipDefaults;else{var Z,re=V._fullLayout={},j=V.layout||{},B=V._fullData||[],H=V._fullData=[],ee=V.data||[],U=V.calcdata||[],$=V._context||{};V._transitionData||u.createTransitionData(V),re._dfltTitle={plot:g(V,"Click to enter Plot title"),x:g(V,"Click to enter X axis title"),y:g(V,"Click to enter Y axis title"),colorbar:g(V,"Click to enter Colorscale title"),annotation:g(V,"new text")},re._traceWord=g(V,"trace");var q=k(V,T);if(re._mapboxAccessToken=$.mapboxAccessToken,G._initialAutoSizeIsDone){var te=G.width,ne=G.height;u.supplyLayoutGlobalDefaults(j,re,q),j.width||(re.width=te),j.height||(re.height=ne),u.sanitizeMargins(re)}else{u.supplyLayoutGlobalDefaults(j,re,q);var se=!j.width||!j.height,ie=re.autosize;se&&(ie||$.autosizable)?u.plotAutoSize(V,j,re):se&&u.sanitizeMargins(re),!ie&&se&&(j.width=re.width,j.height=re.height)}re._d3locale=((ze=q).decimal=(Ue=re.separators).charAt(0),ze.thousands=Ue.charAt(1),{numberFormat:function(je){try{je=b(ze).format(o.adjustFormat(je))}catch{return o.warnBadFormat(je),o.noFormat}return je},timeFormat:v(ze).utcFormat}),re._extraFormat=k(V,_),re._initialAutoSizeIsDone=!0,re._dataLength=ee.length,re._modules=[],re._visibleModules=[],re._basePlotModules=[];var le=re._subplots=function(){var ze,Ue,je=e.collectableSubplotTypes,rt={};if(!je){je=[];var ut=e.subplotsRegistry;for(var gt in ut){var At=ut[gt].attr;if(At&&(je.push(gt),Array.isArray(At)))for(Ue=0;Ue<At.length;Ue++)o.pushUnique(je,At[Ue])}}for(ze=0;ze<je.length;ze++)rt[je[ze]]=[];return rt}(),de=re._splomAxes={x:{},y:{}},be=re._splomSubplots={};re._splomGridDflt={},re._scatterStackOpts={},re._firstScatter={},re._alignmentOpts={},re._colorAxes={},re._requestRangeslider={},re._traceUids=function(ze,Ue){var je,rt,ut=Ue.length,gt=[];for(je=0;je<ze.length;je++){var At=ze[je]._fullInput;At!==rt&&gt.push(At),rt=At}var _t=gt.length,it=new Array(ut),et={};function wt(cr,ar){it[ar]=cr,et[cr]=1}function Gt(cr,ar){if(cr&&"string"==typeof cr&&!et[cr])return wt(cr,ar),!0}for(je=0;je<ut;je++){var Kt=Ue[je].uid;"number"==typeof Kt&&(Kt=String(Kt)),Gt(Kt,je)||je<_t&&Gt(gt[je].uid,je)||wt(o.randstr(et),je)}return it}(B,ee),re._globalTransforms=(V._context||{}).globalTransforms,u.supplyDataDefaults(ee,H,j,re);var _e=Object.keys(de.x),xe=Object.keys(de.y);if(_e.length>1&&xe.length>1){for(e.getComponentMethod("grid","sizeDefaults")(j,re),Z=0;Z<_e.length;Z++)o.pushUnique(le.xaxis,_e[Z]);for(Z=0;Z<xe.length;Z++)o.pushUnique(le.yaxis,xe[Z]);for(var Ee in be)o.pushUnique(le.cartesian,Ee)}if(re._has=u._hasPlotType.bind(re),B.length===H.length)for(Z=0;Z<H.length;Z++)p(H[Z],B[Z]);u.supplyLayoutModuleDefaults(j,re,H,V._transitionData);var he=re._visibleModules,me=[];for(Z=0;Z<he.length;Z++){var Se=he[Z].crossTraceDefaults;Se&&o.pushUnique(me,Se)}for(Z=0;Z<me.length;Z++)me[Z](H,re);re._hasOnlyLargeSploms=1===re._basePlotModules.length&&"splom"===re._basePlotModules[0].name&&_e.length>15&&xe.length>15&&0===re.shapes.length&&0===re.images.length,u.linkSubplots(H,re,B,G),u.cleanPlot(H,re,B,G);var Me=!(!G._has||!G._has("gl2d")),Ie=!(!re._has||!re._has("gl2d")),Fe=!(!G._has||!G._has("cartesian"))||Me,Ne=!(!re._has||!re._has("cartesian"))||Ie;Fe&&!Ne?G._bgLayer.remove():Ne&&!Fe&&(re._shouldCreateBgLayer=!0),G._zoomlayer&&!V._dragging&&i({_fullLayout:G}),function(ze,Ue){var je,rt=[];Ue.meta&&(je=Ue._meta={meta:Ue.meta,layout:{meta:Ue.meta}});for(var ut=0;ut<ze.length;ut++){var gt=ze[ut];gt.meta?rt[gt.index]=gt._meta={meta:gt.meta}:Ue.meta&&(gt._meta={meta:Ue.meta}),Ue.meta&&(gt._meta.layout={meta:Ue.meta})}rt.length&&(je||(je=Ue._meta={}),je.data=rt)}(H,re),p(re,G),e.getComponentMethod("colorscale","crossTraceDefaults")(H,re),re._preGUI||(re._preGUI={}),re._tracePreGUI||(re._tracePreGUI={});var De,$e=re._tracePreGUI,Re={};for(De in $e)Re[De]="old";for(Z=0;Z<H.length;Z++)Re[De=H[Z]._fullInput.uid]||($e[De]={}),Re[De]="new";for(De in Re)"old"===Re[De]&&delete $e[De];P(re),e.getComponentMethod("rangeslider","makeData")(re),J||U.length!==H.length||u.supplyDefaultsUpdateCalc(U,H)}},u.supplyDefaultsUpdateCalc=function(V,X){for(var J=0;J<X.length;J++){var G=X[J],Z=(V[J]||[])[0];if(Z&&Z.trace){var re=Z.trace;if(re._hasCalcTransform){var j,B,H,ee=re._arrayAttrs;for(j=0;j<ee.length;j++)H=o.nestedProperty(re,B=ee[j]).get().slice(),o.nestedProperty(G,B).set(H)}Z.trace=G}}},u.createTransitionData=function(V){V._transitionData||(V._transitionData={}),V._transitionData._frames||(V._transitionData._frames=[]),V._transitionData._frameHash||(V._transitionData._frameHash={}),V._transitionData._counter||(V._transitionData._counter=0),V._transitionData._interruptCallbacks||(V._transitionData._interruptCallbacks=[])},u._hasPlotType=function(V){var X,J=this._basePlotModules||[];for(X=0;X<J.length;X++)if(J[X].name===V)return!0;var G=this._modules||[];for(X=0;X<G.length;X++){var Z=G[X].name;if(Z===V)return!0;var re=e.modules[Z];if(re&&re.categories[V])return!0}return!1},u.cleanPlot=function(V,X,J,G){var Z,re,j=G._basePlotModules||[];for(Z=0;Z<j.length;Z++){var B=j[Z];B.clean&&B.clean(V,X,J,G)}var H=G._has&&G._has("gl"),ee=X._has&&X._has("gl");H&&!ee&&void 0!==G._glcontainer&&(G._glcontainer.selectAll(".gl-canvas").remove(),G._glcontainer.selectAll(".no-webgl").remove(),G._glcanvas=null);var U=!!G._infolayer;e:for(Z=0;Z<J.length;Z++){var $=J[Z].uid;for(re=0;re<V.length;re++)if($===V[re].uid)continue e;U&&G._infolayer.select(".cb"+$).remove()}},u.linkSubplots=function(V,X,J,G){var Z,re,j=G._plots||{},B=X._plots={},H=X._subplots,ee={_fullData:V,_fullLayout:X},U=H.cartesian.concat(H.gl2d||[]);for(Z=0;Z<U.length;Z++){var $,q=U[Z],te=j[q],ne=a.getFromId(ee,q,"x"),se=a.getFromId(ee,q,"y");for(te?$=B[q]=te:($=B[q]={}).id=q,ne._counterAxes.push(se._id),se._counterAxes.push(ne._id),ne._subplotsWith.push(q),se._subplotsWith.push(q),$.xaxis=ne,$.yaxis=se,$._hasClipOnAxisFalse=!1,re=0;re<V.length;re++){var ie=V[re];if(ie.xaxis===$.xaxis._id&&ie.yaxis===$.yaxis._id&&!1===ie.cliponaxis){$._hasClipOnAxisFalse=!0;break}}}var ue,le=a.list(ee,null,!0);for(Z=0;Z<le.length;Z++){var de=null;(ue=le[Z]).overlaying&&(de=a.getFromId(ee,ue.overlaying))&&de.overlaying&&(ue.overlaying=!1,de=null),ue._mainAxis=de||ue,de&&(ue.domain=de.domain.slice()),ue._anchorAxis="free"===ue.anchor?null:a.getFromId(ee,ue.anchor)}for(Z=0;Z<le.length;Z++)if((ue=le[Z])._counterAxes.sort(a.idSort),ue._subplotsWith.sort(o.subplotSort),ue._mainSubplot=w(ue,X),ue._counterAxes.length&&(ue.spikemode&&-1!==ue.spikemode.indexOf("across")||ue.automargin&&ue.mirror&&"free"!==ue.anchor||e.getComponentMethod("rangeslider","isVisible")(ue))){var be=1,_e=0;for(re=0;re<ue._counterAxes.length;re++){var xe=a.getFromId(ee,ue._counterAxes[re]);be=Math.min(be,xe.domain[0]),_e=Math.max(_e,xe.domain[1])}be<_e&&(ue._counterDomainMin=be,ue._counterDomainMax=_e)}},u.clearExpandedTraceDefaultColors=function(V){var X,J,G;for(J=[],(X=V._module._colorAttrs)||(V._module._colorAttrs=X=[],n.crawl(V._module.attributes,function(Z,re,j,B){J[B]=re,J.length=B+1,"color"===Z.valType&&void 0===Z.dflt&&X.push(J.join("."))})),G=0;G<X.length;G++)o.nestedProperty(V,"_input."+X[G]).get()||o.nestedProperty(V,X[G]).set(null)},u.supplyDataDefaults=function(V,X,J,G){var Z,re,j,B=G._modules,H=G._visibleModules,ee=G._basePlotModules,U=0,$=0;function q(Ee){X.push(Ee);var he=Ee._module;he&&(o.pushUnique(B,he),!0===Ee.visible&&o.pushUnique(H,he),o.pushUnique(ee,Ee._module.basePlotModule),U++,!1!==Ee._input.visible&&$++)}G._transformModules=[];var te={},ne=[],ie=r.traceTemplater((J.template||{}).data||{});for(Z=0;Z<V.length;Z++){if((re=ie.newTrace(j=V[Z])).uid=G._traceUids[Z],u.supplyTraceDefaults(j,re,$,G,Z),re.index=Z,re._input=j,re._expandedIndex=U,re.transforms&&re.transforms.length)for(var ue=!1!==j.visible&&!1===re.visible,le=A(re,X,J,G),de=0;de<le.length;de++){var be=le[de],_e={_template:re._template,type:re.type,uid:re.uid+de};ue&&!1===be.visible&&delete be.visible,u.supplyTraceDefaults(be,_e,U,G,Z),p(_e,be),_e.index=Z,_e._input=j,_e._fullInput=re,_e._expandedIndex=U,_e._expandedInput=be,q(_e)}else re._fullInput=re,re._expandedInput=re,q(re);e.traceIs(re,"carpetAxis")&&(te[re.carpet]=re),e.traceIs(re,"carpetDependent")&&ne.push(Z)}for(Z=0;Z<ne.length;Z++)if((re=X[ne[Z]]).visible){var xe=te[re.carpet];re._carpet=xe,xe&&xe.visible?(re.xaxis=xe.xaxis,re.yaxis=xe.yaxis):re.visible=!1}},u.supplyAnimationDefaults=function(V){var X;V=V||{};var J={};function G(Z,re){return o.coerce(V||{},J,s,Z,re)}if(G("mode"),G("direction"),G("fromcurrent"),Array.isArray(V.frame))for(J.frame=[],X=0;X<V.frame.length;X++)J.frame[X]=u.supplyAnimationFrameDefaults(V.frame[X]||{});else J.frame=u.supplyAnimationFrameDefaults(V.frame||{});if(Array.isArray(V.transition))for(J.transition=[],X=0;X<V.transition.length;X++)J.transition[X]=u.supplyAnimationTransitionDefaults(V.transition[X]||{});else J.transition=u.supplyAnimationTransitionDefaults(V.transition||{});return J},u.supplyAnimationFrameDefaults=function(V){var X={};function J(G,Z){return o.coerce(V||{},X,s.frame,G,Z)}return J("duration"),J("redraw"),X},u.supplyAnimationTransitionDefaults=function(V){var X={};function J(G,Z){return o.coerce(V||{},X,s.transition,G,Z)}return J("duration"),J("easing"),X},u.supplyFrameDefaults=function(V){var X={};function J(G,Z){return o.coerce(V,X,c,G,Z)}return J("group"),J("name"),J("traces"),J("baseframe"),J("data"),J("layout"),X},u.supplyTraceDefaults=function(V,X,J,G,Z){var re,j=G.colorway||t.defaults,B=j[J%j.length];function H(le,de){return o.coerce(V,X,u.attributes,le,de)}var ee=H("visible");H("type"),H("name",G._traceWord+" "+Z),H("uirevision",G.uirevision);var U=u.getModule(X);if(X._module=U,U){var $=U.basePlotModule,q=$.attr,te=$.attributes;if(q&&te){var ne=G._subplots,se="";if(ee||"gl2d"!==$.name){if(Array.isArray(q))for(re=0;re<q.length;re++){var ie=q[re],ue=o.coerce(V,X,te,ie);ne[ie]&&o.pushUnique(ne[ie],ue),se+=ue}else se=o.coerce(V,X,te,q);ne[$.name]&&o.pushUnique(ne[$.name],se)}}}return ee&&(H("customdata"),H("ids"),H("meta"),e.traceIs(X,"showLegend")?(o.coerce(V,X,U.attributes.showlegend?U.attributes:u.attributes,"showlegend"),H("legendgroup"),H("legendgrouptitle.text"),H("legendrank"),X._dfltShowLegend=!0):X._dfltShowLegend=!1,U&&U.supplyDefaults(V,X,B,G),e.traceIs(X,"noOpacity")||H("opacity"),e.traceIs(X,"notLegendIsolatable")&&(X.visible=!!X.visible),e.traceIs(X,"noHover")||(X.hovertemplate||o.coerceHoverinfo(V,X,G),"parcats"!==X.type&&e.getComponentMethod("fx","supplyDefaults")(V,X,B,G)),U&&U.selectPoints&&H("selectedpoints"),u.supplyTransformDefaults(V,X,G)),X},u.hasMakesDataTransform=C,u.supplyTransformDefaults=function(V,X,J){if(X._length||C(V)){var G=J._globalTransforms||[],Z=J._transformModules||[];if(Array.isArray(V.transforms)||0!==G.length)for(var j=G.concat(V.transforms||[]),B=X.transforms=[],H=0;H<j.length;H++){var ee,U=j[H],$=U.type,q=x[$],te=!(U._module&&U._module===q),ne=q&&"function"==typeof q.transform;q||o.warn("Unrecognized transform type "+$+"."),q&&q.supplyDefaults&&(te||ne)?((ee=q.supplyDefaults(U,X,J,V)).type=$,ee._module=q,o.pushUnique(Z,q)):ee=o.extendFlat({},U),B.push(ee)}}},u.supplyLayoutGlobalDefaults=function(V,X,J){function G(H,ee){return o.coerce(V,X,u.layoutAttributes,H,ee)}var Z=V.template;o.isPlainObject(Z)&&(X.template=Z,X._template=Z.layout,X._dataTemplate=Z.data),G("autotypenumbers");var re=o.coerceFont(G,"font");o.coerceFont(G,"title.font",o.extendFlat({},re,{size:Math.round(1.4*re.size)})),G("title.text",X._dfltTitle.plot),G("title.xref"),G("title.yref"),G("title.x"),G("title.y"),G("title.xanchor"),G("title.yanchor"),G("title.pad.t"),G("title.pad.r"),G("title.pad.b"),G("title.pad.l"),G("uniformtext.mode")&&G("uniformtext.minsize"),G("autosize",!(V.width&&V.height)),G("width"),G("height"),G("margin.l"),G("margin.r"),G("margin.t"),G("margin.b"),G("margin.pad"),G("margin.autoexpand"),V.width&&V.height&&u.sanitizeMargins(X),e.getComponentMethod("grid","sizeDefaults")(V,X),G("paper_bgcolor"),G("separators",J.decimal+J.thousands),G("hidesources"),G("colorway"),G("datarevision");var B=G("uirevision");G("editrevision",B),G("selectionrevision",B),e.getComponentMethod("modebar","supplyLayoutDefaults")(V,X),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(V,X,G),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(V,X,G),G("meta"),o.isPlainObject(V.transition)&&(G("transition.duration"),G("transition.easing"),G("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(V,X,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(V,X,G)},u.plotAutoSize=function(V,X,J){var G,Z,re=V._context||{},j=re.frameMargins,B=o.isPlotDiv(V);if(B&&V.emit("plotly_autosize"),re.fillFrame)G=window.innerWidth,Z=window.innerHeight,document.body.style.overflow="hidden";else{var H=B?window.getComputedStyle(V):{};if(G=O(H.width)||O(H.maxWidth)||J.width,Z=O(H.height)||O(H.maxHeight)||J.height,h(j)&&j>0){var ee=1-2*j;G=Math.round(ee*G),Z=Math.round(ee*Z)}}var U=u.layoutAttributes.width.min,$=u.layoutAttributes.height.min;G<U&&(G=U),Z<$&&(Z=$);var q=!X.width&&Math.abs(J.width-G)>1,te=!X.height&&Math.abs(J.height-Z)>1;(te||q)&&(q&&(J.width=G),te&&(J.height=Z)),V._initialAutoSize||(V._initialAutoSize={width:G,height:Z}),u.sanitizeMargins(J)},u.supplyLayoutModuleDefaults=function(V,X,J,G){var Z,re,j,B=e.componentsRegistry,H=X._basePlotModules,ee=e.subplotsRegistry.cartesian;for(Z in B)(j=B[Z]).includeBasePlot&&j.includeBasePlot(V,X);for(var U in H.length||H.push(ee),X._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(V,X),ee.finalizeSubplots(V,X)),X._subplots)X._subplots[U].sort(o.subplotSort);for(re=0;re<H.length;re++)(j=H[re]).supplyLayoutDefaults&&j.supplyLayoutDefaults(V,X,J);var $=X._modules;for(re=0;re<$.length;re++)(j=$[re]).supplyLayoutDefaults&&j.supplyLayoutDefaults(V,X,J);var q=X._transformModules;for(re=0;re<q.length;re++)(j=q[re]).supplyLayoutDefaults&&j.supplyLayoutDefaults(V,X,J,G);for(Z in B)(j=B[Z]).supplyLayoutDefaults&&j.supplyLayoutDefaults(V,X,J)},u.purge=function(V){var X=V._fullLayout||{};void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.remove(),X._glcanvas=null),X._modeBar&&X._modeBar.destroy(),V._transitionData&&(V._transitionData._interruptCallbacks&&(V._transitionData._interruptCallbacks.length=0),V._transitionData._animationRaf&&window.cancelAnimationFrame(V._transitionData._animationRaf)),o.clearThrottle(),o.clearResponsive(V),delete V.data,delete V.layout,delete V._fullData,delete V._fullLayout,delete V.calcdata,delete V.empty,delete V.fid,delete V.undoqueue,delete V.undonum,delete V.autoplay,delete V.changed,delete V._promises,delete V._redrawTimer,delete V._hmlumcount,delete V._hmpixcount,delete V._transitionData,delete V._transitioning,delete V._initialAutoSize,delete V._transitioningWithDuration,delete V._dragging,delete V._dragged,delete V._dragdata,delete V._hoverdata,delete V._snapshotInProgress,delete V._editing,delete V._mouseDownTime,delete V._legendMouseDownTime,V.removeAllListeners&&V.removeAllListeners()},u.style=function(V){var X,J=V._fullLayout._visibleModules,G=[];for(X=0;X<J.length;X++){var Z=J[X];Z.style&&o.pushUnique(G,Z.style)}for(X=0;X<G.length;X++)G[X](V)},u.sanitizeMargins=function(V){if(V&&V.margin){var X,J=V.width,G=V.height,Z=V.margin,j=G-(Z.t+Z.b);J-(Z.l+Z.r)<0&&(X=(J-1)/(Z.l+Z.r),Z.l=Math.floor(X*Z.l),Z.r=Math.floor(X*Z.r)),j<0&&(X=(G-1)/(Z.t+Z.b),Z.t=Math.floor(X*Z.t),Z.b=Math.floor(X*Z.b))}},u.clearAutoMarginIds=function(V){V._fullLayout._pushmarginIds={}},u.allowAutoMargin=function(V,X){V._fullLayout._pushmarginIds[X]=1},u.autoMargin=function(V,X,J){var G=V._fullLayout,Z=G.width,re=G.height,j=G.margin,B=o.constrain(Z-j.l-j.r,2,64),H=o.constrain(re-j.t-j.b,2,64),ee=Math.max(0,Z-B),U=Math.max(0,re-H),$=G._pushmargin,q=G._pushmarginIds;if(!1!==j.autoexpand){if(J){var te=J.pad;if(void 0===te&&(te=Math.min(12,j.l,j.r,j.t,j.b)),ee){var ne=(J.l+J.r)/ee;ne>1&&(J.l/=ne,J.r/=ne)}if(U){var se=(J.t+J.b)/U;se>1&&(J.t/=se,J.b/=se)}$[X]={l:{val:void 0!==J.xl?J.xl:J.x,size:J.l+te},r:{val:void 0!==J.xr?J.xr:J.x,size:J.r+te},b:{val:void 0!==J.yb?J.yb:J.y,size:J.b+te},t:{val:void 0!==J.yt?J.yt:J.y,size:J.t+te}},q[X]=1}else delete $[X],delete q[X];if(!G._replotting)return u.doAutoMargin(V)}},u.doAutoMargin=function(V){var X=V._fullLayout,J=X.width,G=X.height;X._size||(X._size={}),P(X);var Z=X._size,re=X.margin,j=o.extendFlat({},Z),B=re.l,H=re.r,ee=re.t,U=re.b,$=X._pushmargin,q=X._pushmarginIds;if(!1!==X.margin.autoexpand){for(var te in $)q[te]||delete $[te];for(var ne in $.base={l:{val:0,size:B},r:{val:1,size:H},t:{val:1,size:ee},b:{val:0,size:U}},$){var se=$[ne].l||{},ie=$[ne].b||{},ue=se.val,le=se.size,de=ie.val,be=ie.size;for(var _e in $){if(h(le)&&$[_e].r){var xe=$[_e].r.val,Ee=$[_e].r.size;if(xe>ue){var he=(le*xe+(Ee-J)*ue)/(xe-ue),me=(Ee*(1-ue)+(le-J)*(1-xe))/(xe-ue);he+me>B+H&&(B=he,H=me)}}if(h(be)&&$[_e].t){var Se=$[_e].t.val,Me=$[_e].t.size;if(Se>de){var Ie=(be*Se+(Me-G)*de)/(Se-de),Fe=(Me*(1-de)+(be-G)*(1-Se))/(Se-de);Ie+Fe>U+ee&&(U=Ie,ee=Fe)}}}}}var ut,Ne=o.constrain(J-re.l-re.r,2,64),De=o.constrain(G-re.t-re.b,2,64),$e=Math.max(0,J-Ne),Re=Math.max(0,G-De);if($e){var ze=(B+H)/$e;ze>1&&(B/=ze,H/=ze)}if(Re){var Ue=(U+ee)/Re;Ue>1&&(U/=Ue,ee/=Ue)}if(Z.l=Math.round(B),Z.r=Math.round(H),Z.t=Math.round(ee),Z.b=Math.round(U),Z.p=Math.round(re.pad),Z.w=Math.round(J)-Z.l-Z.r,Z.h=Math.round(G)-Z.t-Z.b,!X._replotting&&u.didMarginChange(j,Z)){"_redrawFromAutoMarginCount"in X?X._redrawFromAutoMarginCount++:X._redrawFromAutoMarginCount=1;var je=3*(1+Object.keys(q).length);if(X._redrawFromAutoMarginCount<je)return e.call("_doPlot",V);X._size=j,o.warn("Too many auto-margin redraws.")}ut=a.list(V,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(gt){for(var At=0;At<ut.length;At++){var _t=ut[At][gt];_t&&_t()}})};var S=["l","r","t","b","p","w","h"];function E(V,X,J){var G=!1,re=o.syncOrAsync([u.previousPromises,function(){if(V._transitionData)return V._transitioning=!1,function(j){var B=Promise.resolve();if(!j)return B;for(;j.length;)B=B.then(j.shift());return B}(V._transitionData._interruptCallbacks)},J.prepareFn,u.rehover,u.reselect,function(){return V.emit("plotly_transitioning",[]),new Promise(function(j){V._transitioning=!0,X.duration>0&&(V._transitioningWithDuration=!0),V._transitionData._interruptCallbacks.push(function(){G=!0}),J.redraw&&V._transitionData._interruptCallbacks.push(function(){return e.call("redraw",V)}),V._transitionData._interruptCallbacks.push(function(){V.emit("plotly_transitioninterrupted",[])});var B=0,H=0;function ee(){return B++,function(){var U;H++,G||H!==B||(U=j,!V._transitionData||(function($){if($)for(;$.length;)$.shift()}(V._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(J.redraw)return e.call("redraw",V)}).then(function(){V._transitioning=!1,V._transitioningWithDuration=!1,V.emit("plotly_transitioned",[])}).then(U)))}}J.runFn(ee),setTimeout(ee())})}],V);return re&&re.then||(re=Promise.resolve()),re.then(function(){return V})}u.didMarginChange=function(V,X){for(var J=0;J<S.length;J++){var G=S[J],Z=V[G],re=X[G];if(!h(Z)||Math.abs(re-Z)>1)return!0}return!1},u.graphJson=function(V,X,J,G,Z,re){(Z&&X&&!V._fullData||Z&&!X&&!V._fullLayout)&&u.supplyDefaults(V);var B=Z?V._fullLayout:V.layout,H=(V._transitionData||{})._frames;function ee(q,te){if("function"==typeof q)return te?"_function_":null;if(o.isPlainObject(q)){var ne,se={};return Object.keys(q).sort().forEach(function(ie){if(-1===["_","["].indexOf(ie.charAt(0)))if("function"!=typeof q[ie]){if("keepdata"===J){if("src"===ie.substr(ie.length-3))return}else if("keepstream"===J){if("string"==typeof(ne=q[ie+"src"])&&ne.indexOf(":")>0&&!o.isPlainObject(q.stream))return}else if("keepall"!==J&&"string"==typeof(ne=q[ie+"src"])&&ne.indexOf(":")>0)return;se[ie]=ee(q[ie],te)}else te&&(se[ie]="_function")}),se}return Array.isArray(q)?q.map(function(ie){return ee(ie,te)}):o.isTypedArray(q)?o.simpleMap(q,o.identity):o.isJSDate(q)?o.ms2DateTimeLocal(+q):q}var U={data:((Z?V._fullData:V.data)||[]).map(function(q){var te=ee(q);return X&&delete te.fit,te})};if(!X&&(U.layout=ee(B),Z)){var $=B._size;U.layout.computed={margin:{b:$.b,l:$.l,r:$.r,t:$.t}}}return H&&(U.frames=ee(H)),re&&(U.config=ee(V._context,!0)),"object"===G?U:JSON.stringify(U)},u.modifyFrames=function(V,X){var J,G,Z,re=V._transitionData._frames,j=V._transitionData._frameHash;for(J=0;J<X.length;J++)switch((G=X[J]).type){case"replace":var B=(re[G.index]||{}).name,H=(Z=G.value).name;re[G.index]=j[H]=Z,H!==B&&(delete j[B],j[H]=Z);break;case"insert":j[(Z=G.value).name]=Z,re.splice(G.index,0,Z);break;case"delete":delete j[(Z=re[G.index]).name],re.splice(G.index,1)}return Promise.resolve()},u.computeFrame=function(V,X){var J,G,Z,re,j=V._transitionData._frameHash;if(!X)throw new Error("computeFrame must be given a string frame name");var B=j[X.toString()];if(!B)return!1;for(var H=[B],ee=[B.name];B.baseframe&&(B=j[B.baseframe.toString()])&&-1===ee.indexOf(B.name);)H.push(B),ee.push(B.name);for(var U={};B=H.pop();)if(B.layout&&(U.layout=u.extendLayout(U.layout,B.layout)),B.data){if(U.data||(U.data=[]),!(G=B.traces))for(G=[],J=0;J<B.data.length;J++)G[J]=J;for(U.traces||(U.traces=[]),J=0;J<B.data.length;J++)null!=(Z=G[J])&&(-1===(re=U.traces.indexOf(Z))&&(U.traces[re=U.data.length]=Z),U.data[re]=u.extendTrace(U.data[re],B.data[J]))}return U},u.recomputeFrameHash=function(V){for(var X=V._transitionData._frameHash={},J=V._transitionData._frames,G=0;G<J.length;G++){var Z=J[G];Z&&Z.name&&(X[Z.name]=Z)}},u.extendObjectWithContainers=function(V,X,J){var G,Z,re,j,B,H,ee,U=o.extendDeepNoArrays({},X||{}),$=o.expandObjectPaths(U),q={};if(J&&J.length)for(re=0;re<J.length;re++)void 0===(Z=(G=o.nestedProperty($,J[re])).get())?o.nestedProperty(q,J[re]).set(null):(G.set(null),o.nestedProperty(q,J[re]).set(Z));if(V=o.extendDeepNoArrays(V||{},$),J&&J.length)for(re=0;re<J.length;re++)if(H=o.nestedProperty(q,J[re]).get()){for(ee=(B=o.nestedProperty(V,J[re])).get(),Array.isArray(ee)||B.set(ee=[]),j=0;j<H.length;j++){var te=H[j];ee[j]=null===te?null:u.extendObjectWithContainers(ee[j],te)}B.set(ee)}return V},u.dataArrayContainers=["transforms","dimensions"],u.layoutArrayContainers=e.layoutArrayContainers,u.extendTrace=function(V,X){return u.extendObjectWithContainers(V,X,u.dataArrayContainers)},u.extendLayout=function(V,X){return u.extendObjectWithContainers(V,X,u.layoutArrayContainers)},u.transition=function(V,X,J,G,Z,re){var j={redraw:Z.redraw},B={},H=[];return j.prepareFn=function(){for(var ee=Array.isArray(X)?X.length:0,U=G.slice(0,ee),$=0;$<U.length;$++){var q=U[$],te=V._fullData[q]._module;if(te){if(te.animatable){var ne=te.basePlotModule.name;B[ne]||(B[ne]=[]),B[ne].push(q)}V.data[U[$]]=u.extendTrace(V.data[U[$]],X[$])}}var se=o.expandObjectPaths(o.extendDeepNoArrays({},J)),ie=/^[xy]axis[0-9]*$/;for(var ue in se)ie.test(ue)&&delete se[ue].range;u.extendLayout(V.layout,se),delete V.calcdata,u.supplyDefaults(V),u.doCalcdata(V);var le=o.expandObjectPaths(J);if(le){var de=V._fullLayout._plots;for(var be in de){var _e=de[be],xe=_e.xaxis,Ee=_e.yaxis,he=xe.range.slice(),me=Ee.range.slice(),Se=null,Me=null,Ie=null,Fe=null;Array.isArray(le[xe._name+".range"])?Se=le[xe._name+".range"].slice():Array.isArray((le[xe._name]||{}).range)&&(Se=le[xe._name].range.slice()),Array.isArray(le[Ee._name+".range"])?Me=le[Ee._name+".range"].slice():Array.isArray((le[Ee._name]||{}).range)&&(Me=le[Ee._name].range.slice()),he&&Se&&(xe.r2l(he[0])!==xe.r2l(Se[0])||xe.r2l(he[1])!==xe.r2l(Se[1]))&&(Ie={xr0:he,xr1:Se}),me&&Me&&(Ee.r2l(me[0])!==Ee.r2l(Me[0])||Ee.r2l(me[1])!==Ee.r2l(Me[1]))&&(Fe={yr0:me,yr1:Me}),(Ie||Fe)&&H.push(o.extendFlat({plotinfo:_e},Ie,Fe))}}return Promise.resolve()},j.runFn=function(ee){var U,$,q=V._fullLayout._basePlotModules,te=H.length;if(J)for($=0;$<q.length;$++)q[$].transitionAxes&&q[$].transitionAxes(V,H,re,ee);for(var ne in te?((U=o.extendFlat({},re)).duration=0,delete B.cartesian):U=re,B){var se=B[ne];V._fullData[se[0]]._module.basePlotModule.plot(V,se,U,ee)}},E(V,re,j)},u.transitionFromReact=function(V,X,J,G){var Z=V._fullLayout,re=Z.transition,j={},B=[];return j.prepareFn=function(){var H=Z._plots;for(var ee in j.redraw=!1,"some"===X.anim&&(j.redraw=!0),"some"===J.anim&&(j.redraw=!0),H){var U=H[ee],$=U.xaxis,q=U.yaxis,te=G[$._name].range.slice(),ne=G[q._name].range.slice(),se=$.range.slice(),ie=q.range.slice();$.setScale(),q.setScale();var ue=null,le=null;$.r2l(te[0])===$.r2l(se[0])&&$.r2l(te[1])===$.r2l(se[1])||(ue={xr0:te,xr1:se}),q.r2l(ne[0])===q.r2l(ie[0])&&q.r2l(ne[1])===q.r2l(ie[1])||(le={yr0:ne,yr1:ie}),(ue||le)&&B.push(o.extendFlat({plotinfo:U},ue,le))}return Promise.resolve()},j.runFn=function(H){for(var ee,U,$,q=V._fullData,te=V._fullLayout._basePlotModules,ne=[],se=0;se<q.length;se++)ne.push(se);function ie(){if(V._fullLayout)for(var le=0;le<te.length;le++)te[le].transitionAxes&&te[le].transitionAxes(V,B,ee,H)}function ue(){if(V._fullLayout)for(var le=0;le<te.length;le++)te[le].plot(V,$,U,H)}B.length&&X.anim?"traces first"===re.ordering?(ee=o.extendFlat({},re,{duration:0}),$=ne,U=re,setTimeout(ie,re.duration),ue()):(ee=re,$=null,U=o.extendFlat({},re,{duration:0}),setTimeout(ue,ee.duration),ie()):B.length?(ee=re,ie()):X.anim&&($=ne,U=re,ue())},E(V,re,j)},u.doCalcdata=function(V,X){var J,G,Z,re,j=a.list(V),B=V._fullData,H=V._fullLayout,ee=new Array(B.length),U=(V.calcdata||[]).slice();for(V.calcdata=ee,H._numBoxes=0,H._numViolins=0,H._violinScaleGroupStats={},V._hmpixcount=0,V._hmlumcount=0,H._piecolormap={},H._sunburstcolormap={},H._treemapcolormap={},H._iciclecolormap={},H._funnelareacolormap={},Z=0;Z<B.length;Z++)Array.isArray(X)&&-1===X.indexOf(Z)&&(ee[Z]=U[Z]);for(Z=0;Z<B.length;Z++)(J=B[Z])._arrayAttrs=n.findArrayAttributes(J),J._extremes={};var $=H._subplots.polar||[];for(Z=0;Z<$.length;Z++)j.push(H[$[Z]].radialaxis,H[$[Z]].angularaxis);for(var q in H._colorAxes){var te=H[q];!1!==te.cauto&&(delete te.cmin,delete te.cmax)}var ne=!1;function se(le){if(G=(J=B[le])._module,!0===J.visible&&J.transforms){if(G&&G.calc){var de=G.calc(V,J);de[0]&&de[0].t&&de[0].t._scene&&delete de[0].t._scene.dirty}for(re=0;re<J.transforms.length;re++){var be=J.transforms[re];(G=x[be.type])&&G.calcTransform&&(J._hasCalcTransform=!0,ne=!0,G.calcTransform(V,J,be))}}}function ie(le,de){if(!!(G=(J=B[le])._module).isContainer===de){var be=[];if(!0===J.visible&&0!==J._length){delete J._indexToPoints;var _e=J.transforms||[];for(re=_e.length-1;re>=0;re--)if(_e[re].enabled){J._indexToPoints=_e[re]._indexToPoints;break}G&&G.calc&&(be=G.calc(V,J))}Array.isArray(be)&&be[0]||(be=[{x:d,y:d}]),be[0].t||(be[0].t={}),be[0].trace=J,ee[le]=be}}for(z(j,B,H),Z=0;Z<B.length;Z++)ie(Z,!0);for(Z=0;Z<B.length;Z++)se(Z);for(ne&&z(j,B,H),Z=0;Z<B.length;Z++)ie(Z,!0);for(Z=0;Z<B.length;Z++)ie(Z,!1);N(V);var ue=function(le,de){var be,_e,xe,Ee,he,me=[];function Se(Xt,He,Je){var pe=He._id.charAt(0);if("histogram2dcontour"===Xt){var we=He._counterAxes[0],Be=a.getFromId(de,we),We="x"===pe||"x"===we&&"category"===Be.type,Ke="y"===pe||"y"===we&&"category"===Be.type;return function(Ye,ft){return 0===Ye||0===ft||We&&Ye===Je[ft].length-1||Ke&&ft===Je.length-1?-1:("y"===pe?ft:Ye)-1}}return function(Ye,ft){return"y"===pe?ft:Ye}}var Me={min:function(Xt){return o.aggNums(Math.min,null,Xt)},max:function(Xt){return o.aggNums(Math.max,null,Xt)},sum:function(Xt){return o.aggNums(function(He,Je){return He+Je},null,Xt)},total:function(Xt){return o.aggNums(function(He,Je){return He+Je},null,Xt)},mean:function(Xt){return o.mean(Xt)},median:function(Xt){return o.median(Xt)}};for(be=0;be<le.length;be++){var Ie=le[be];if("category"===Ie.type){var Fe=Ie.categoryorder.match(D);if(Fe){var Ne=Fe[1],De=Fe[2],$e=Ie._id.charAt(0),Re="x"===$e,ze=[];for(_e=0;_e<Ie._categories.length;_e++)ze.push([Ie._categories[_e],[]]);for(_e=0;_e<Ie._traceIndices.length;_e++){var Ue=Ie._traceIndices[_e],je=de._fullData[Ue];if(!0===je.visible){var rt=je.type;e.traceIs(je,"histogram")&&(delete je._xautoBinFinished,delete je._yautoBinFinished);var ut="splom"===rt,gt="scattergl"===rt,At=de.calcdata[Ue];for(xe=0;xe<At.length;xe++){var _t,it,et=At[xe];if(ut){var wt=je._axesDim[Ie._id];if(!Re){var Gt=je._diag[wt][0];Gt&&(Ie=de._fullLayout[a.id2name(Gt)])}var Kt=et.trace.dimensions[wt].values;for(Ee=0;Ee<Kt.length;Ee++)for(_t=Ie._categoriesMap[Kt[Ee]],he=0;he<et.trace.dimensions.length;he++)he!==wt&&ze[_t][1].push(et.trace.dimensions[he].values[Ee])}else if(gt){for(Ee=0;Ee<et.t.x.length;Ee++)Re?(_t=et.t.x[Ee],it=et.t.y[Ee]):(_t=et.t.y[Ee],it=et.t.x[Ee]),ze[_t][1].push(it);et.t&&et.t._scene&&delete et.t._scene.dirty}else if(et.hasOwnProperty("z")){var ar=Se(je.type,Ie,it=et.z);for(Ee=0;Ee<it.length;Ee++)for(he=0;he<it[Ee].length;he++)(_t=ar(he,Ee))+1&&ze[_t][1].push(it[Ee][he])}else for(void 0===(_t=et.p)&&(_t=et[$e]),void 0===(it=et.s)&&(it=et.v),void 0===it&&(it=Re?et.y:et.x),Array.isArray(it)||(it=void 0===it?[]:[it]),Ee=0;Ee<it.length;Ee++)ze[_t][1].push(it[Ee])}}}Ie._categoriesValue=ze;var hr=[];for(_e=0;_e<ze.length;_e++)hr.push([ze[_e][0],Me[Ne](ze[_e][1])]);hr.sort(function(Xt,He){return Xt[1]-He[1]}),Ie._categoriesAggregatedValue=hr,Ie._initialCategories=hr.map(function(Xt){return Xt[0]}),"descending"===De&&Ie._initialCategories.reverse(),me=me.concat(Ie.sortByInitialCategories())}}}return me}(j,V);if(ue.length){for(H._numBoxes=0,H._numViolins=0,Z=0;Z<ue.length;Z++)ie(ue[Z],!0);for(Z=0;Z<ue.length;Z++)ie(ue[Z],!1);N(V)}e.getComponentMethod("fx","calc")(V),e.getComponentMethod("errorbars","calc")(V)};var D=/(total|sum|min|max|mean|median) (ascending|descending)/;function z(V,X,J){var G={};function Z(H){H.clearCalc(),"multicategory"===H.type&&H.setupMultiCategory(X),G[H._id]=1}o.simpleMap(V,Z);for(var re=J._axisMatchGroups||[],j=0;j<re.length;j++)for(var B in re[j])G[B]||Z(J[a.id2name(B)])}function N(V){var X,J,G,Z=V._fullLayout,re=Z._visibleModules,j={};for(J=0;J<re.length;J++){var B=re[J],H=B.crossTraceCalc;if(H){var ee=B.basePlotModule.name;j[ee]?o.pushUnique(j[ee],H):j[ee]=[H]}}for(G in j){var U=j[G],$=Z._subplots[G];if(Array.isArray($))for(X=0;X<$.length;X++){var q=$[X],te="cartesian"===G?Z._plots[q]:Z[q];for(J=0;J<U.length;J++)U[J](V,te,q)}else for(J=0;J<U.length;J++)U[J](V)}}u.rehover=function(V){V._fullLayout._rehover&&V._fullLayout._rehover()},u.redrag=function(V){V._fullLayout._redrag&&V._fullLayout._redrag()},u.reselect=function(V){var X=V._fullLayout,J=(V.layout||{}).selections,G=X._previousSelections;X._previousSelections=J;var Z=X._reselect||JSON.stringify(J)!==JSON.stringify(G);e.getComponentMethod("selections","reselect")(V,Z)},u.generalUpdatePerTraceModule=function(V,X,J,G){var Z,re=X.traceHash,j={};for(Z=0;Z<J.length;Z++){var B=J[Z],H=B[0].trace;H.visible&&(j[H.type]=j[H.type]||[],j[H.type].push(B))}for(var ee in re)if(!j[ee]){var U=re[ee][0];U[0].trace.visible=!1,j[ee]=[U]}for(var $ in j){var q=j[$];q[0][0].trace._module.plot(V,X,o.filterVisible(q),G)}X.traceHash=j},u.plotBasePlot=function(V,X,J,G,Z){var re=e.getModule(V),j=l(X.calcdata,re)[0];re.plot(X,j,G,Z)},u.cleanBasePlot=function(V,X,J,G,Z){var re=Z._has&&Z._has(V),j=J._has&&J._has(V);re&&!j&&Z["_"+V+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(y,Q,K){"use strict";Q.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../lib/polygon").tester,b=m.findIndexOfMin,h=m.isAngleInsideSector,e=m.angleDelta,n=m.angleDist;function r(a,i,s,c){var l,p,g=c[0],u=c[1],x=t(Math.sin(i)-Math.sin(a)),f=t(Math.cos(i)-Math.cos(a)),T=Math.tan(s),_=t(1/T),k=x/f,w=u-k*g;return _?x&&f?p=T*(l=w/(T-k)):f?(l=u*_,p=u):(l=g,p=g*T):x&&f?(l=0,p=w):f?(l=0,p=u):l=p=NaN,[l,p]}function o(a,i,s,c){return m.isFullCircle([i,s])?function(l,p){var g,u=p.length,x=new Array(u+1);for(g=0;g<u;g++){var f=p[g];x[g]=[l*Math.cos(f),l*Math.sin(f)]}return x[g]=x[0].slice(),x}(a,c):function(l,p,g,u){var x,f,T=u.length,_=[];function k(z){return[l*Math.cos(z),l*Math.sin(z)]}function w(z,N,V){return r(z,N,V,k(z))}function C(z){return m.mod(z,T)}function A(z){return h(z,[p,g])}var O=b(u,function(z){return A(z)?n(z,p):1/0}),P=w(u[O],u[C(O-1)],p);for(_.push(P),x=O,f=0;f<T;x++,f++){var S=u[C(x)];if(!A(S))break;_.push(k(S))}var E=b(u,function(z){return A(z)?n(z,g):1/0}),D=w(u[E],u[C(E+1)],g);return _.push(D),_.push([0,0]),_.push(_[0].slice()),_}(a,i,s,c)}function t(a){return Math.abs(a)>1e-10?a:0}function d(a,i,s){i=i||0,s=s||0;for(var c=a.length,l=new Array(c),p=0;p<c;p++){var g=a[p];l[p]=[i+g[0],s-g[1]]}return l}Q.exports={isPtInsidePolygon:function(a,i,s,c,l){if(!h(i,c))return!1;var p,g;s[0]<s[1]?(p=s[0],g=s[1]):(p=s[1],g=s[0]);var u=v(o(p,c[0],c[1],l)),x=v(o(g,c[0],c[1],l)),f=[a*Math.cos(i),a*Math.sin(i)];return x.contains(f)&&!u.contains(f)},findPolygonOffset:function(a,i,s,c){for(var l=1/0,p=1/0,g=o(a,i,s,c),u=0;u<g.length;u++){var x=g[u];l=Math.min(l,x[0]),p=Math.min(p,-x[1])}return[l,p]},findEnclosingVertexAngles:function(a,i){var s=b(i,function(l){var p=e(l,a);return p>0?p:1/0}),c=m.mod(s+1,i.length);return[i[s],i[c]]},findIntersectionXY:r,findXYatLength:function(a,i,s,c){var l=-i*s,p=i*i+1,g=2*(i*l-s),x=Math.sqrt(g*g-4*p*(l*l+s*s-a*a)),f=(-g+x)/(2*p),T=(-g-x)/(2*p);return[[f,i*f+l+c],[T,i*T+l+c]]},clampTiny:t,pathPolygon:function(a,i,s,c,l,p){return"M"+d(o(a,i,s,c),l,p).join("L")},pathPolygonAnnulus:function(a,i,s,c,l,p,g){var u,x;a<i?(u=a,x=i):(u=i,x=a);var f=d(o(u,s,c,l),p,g);return"M"+d(o(x,s,c,l),p,g).reverse().join("L")+"M"+f.join("L")}}},{"../../lib":515,"../../lib/polygon":527}],631:[function(y,Q,K){"use strict";var m=y("../get_data").getSubplotCalcData,v=y("../../lib").counterRegex,b=y("./polar"),h=y("./constants"),e=h.attr,n=h.name,r=v(n),o={};o[e]={valType:"subplotid",dflt:n,editType:"calc"},Q.exports={attr:e,name:n,idRoot:n,idRegex:r,attrRegex:r,attributes:o,layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),plot:function(t){for(var d=t._fullLayout,a=t.calcdata,i=d._subplots[n],s=0;s<i.length;s++){var c=i[s],l=m(a,n,c),p=d[c]._subplot;p||(p=b(t,c),d[c]._subplot=p),p.plot(l,d,t._promises)}},clean:function(t,d,a,i){for(var s=i._subplots[n]||[],c=i._has&&i._has("gl"),l=d._has&&d._has("gl"),p=c&&!l,g=0;g<s.length;g++){var u=s[g],x=i[u]._subplot;if(!d[u]&&x)for(var f in x.framework.remove(),x.layers["radial-axis-title"].remove(),x.clipPaths)x.clipPaths[f].remove();p&&x._scene&&(x._scene.destroy(),x._scene=null)}},toSVG:y("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(y,Q,K){"use strict";var m=y("../../components/color/attributes"),v=y("../cartesian/layout_attributes"),b=y("../domain").attributes,h=y("../../lib").extendFlat,e=y("../../plot_api/edit_types").overrideAll,n=e({color:v.color,showline:h({},v.showline,{dflt:!0}),linecolor:v.linecolor,linewidth:v.linewidth,showgrid:h({},v.showgrid,{dflt:!0}),gridcolor:v.gridcolor,gridwidth:v.gridwidth,griddash:v.griddash},"plot","from-root"),r=e({tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:v.ticks,ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,ticklabelstep:v.ticklabelstep,showticklabels:v.showticklabels,showtickprefix:v.showtickprefix,tickprefix:v.tickprefix,showticksuffix:v.showticksuffix,ticksuffix:v.ticksuffix,showexponent:v.showexponent,exponentformat:v.exponentformat,minexponent:v.minexponent,separatethousands:v.separatethousands,tickfont:v.tickfont,tickangle:v.tickangle,tickformat:v.tickformat,tickformatstops:v.tickformatstops,layer:v.layer},"plot","from-root"),o={visible:h({},v.visible,{dflt:!0}),type:h({},v.type,{values:["-","linear","log","date","category"]}),autotypenumbers:v.autotypenumbers,autorange:h({},v.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:h({},v.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:v.categoryorder,categoryarray:v.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:h({},v.title.text,{editType:"plot",dflt:""}),font:h({},v.title.font,{editType:"plot"}),editType:"plot"},hoverformat:v.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:v._deprecated.title,titlefont:v._deprecated.titlefont}};h(o,n,r);var t={visible:h({},v.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:v.autotypenumbers,categoryorder:v.categoryorder,categoryarray:v.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:v.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};h(t,n,r),Q.exports={domain:b({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:m.background},radialaxis:o,angularaxis:t,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/color"),b=y("../../plot_api/plot_template"),h=y("../subplot_defaults"),e=y("../get_data").getSubplotData,n=y("../cartesian/tick_value_defaults"),r=y("../cartesian/tick_mark_defaults"),o=y("../cartesian/tick_label_defaults"),t=y("../cartesian/prefix_suffix_defaults"),d=y("../cartesian/category_order_defaults"),a=y("../cartesian/line_grid_defaults"),i=y("../cartesian/axis_autotype"),s=y("./layout_attributes"),c=y("./set_convert"),l=y("./constants"),p=l.axisNames;function g(x,f,T,_){var k=T("bgcolor");_.bgColor=v.combine(k,_.paper_bgcolor);var w=T("sector");T("hole");var C,A=e(_.fullData,l.name,_.id),O=_.layoutOut;function P(ee,U){return T(C+"."+ee,U)}for(var S=0;S<p.length;S++){m.isPlainObject(x[C=p[S]])||(x[C]={});var E=x[C],D=b.newContainer(f,C);D._id=D._name=C,D._attr=_.id+"."+C,D._traceIndices=A.map(function(ee){return ee._expandedIndex});var z=l.axisName2dataArray[C],N=u(E,D,P,A,z,_);d(E,D,P,{axData:A,dataAttr:z});var V=P("visible");switch(c(D,f,O),P("uirevision",f.uirevision),D._m=1,C){case"radialaxis":var X=P("autorange",!D.isValidRange(E.range));E.autorange=X,!X||"linear"!==N&&"-"!==N||P("rangemode"),"reversed"===X&&(D._m=-1),P("range"),D.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===N){m.log("Polar plots do not support date angular axes yet.");for(var J=0;J<A.length;J++)A[J].visible=!1;N=E.type=D.type="linear"}P("linear"===N?"thetaunit":"period");var G=P("direction");P("rotation",{counterclockwise:0,clockwise:90}[G])}if(t(E,D,P,D.type,{tickSuffixDflt:"degrees"===D.thetaunit?"\xb0":void 0}),V){var Z,re,j,B,H=_.font||{};re=(Z=P("color"))===E.color?Z:H.color,j=H.size,B=H.family,n(E,D,P,D.type),o(E,D,P,D.type,{font:{color:re,size:j,family:B}}),r(E,D,P,{outerTicks:!0}),a(E,D,P,{dfltColor:Z,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[C]}),P("layer"),"radialaxis"===C&&(P("side"),P("angle",w[0]),P("title.text"),m.coerceFont(P,"title.font",{color:re,size:m.bigFont(j),family:B}))}"category"!==N&&P("hoverformat"),D._input=E}"category"===f.angularaxis.type&&T("gridshape")}function u(x,f,T,_,k,w){var C=T("autotypenumbers",w.autotypenumbersDflt);if("-"===T("type")){for(var A,O=0;O<_.length;O++)if(_[O].visible){A=_[O];break}A&&A[k]&&(f.type=i(A[k],"gregorian",{noMultiCategory:!0,autotypenumbers:C})),"-"===f.type?f.type="linear":x.type=f.type}return f.type}Q.exports=function(x,f,T){h(x,f,T,{type:l.name,attributes:s,handleDefaults:g,font:f.font,autotypenumbersDflt:f.autotypenumbers,paper_bgcolor:f.paper_bgcolor,fullData:T,layoutOut:f})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("tinycolor2"),b=y("../../registry"),h=y("../../lib"),e=h.strRotate,n=h.strTranslate,r=y("../../components/color"),o=y("../../components/drawing"),t=y("../plots"),d=y("../../plots/cartesian/axes"),a=y("../cartesian/set_convert"),i=y("./set_convert"),s=y("../cartesian/autorange").doAutoRange,c=y("../cartesian/dragbox"),l=y("../../components/dragelement"),p=y("../../components/fx"),g=y("../../components/titles"),u=y("../../components/selections").prepSelect,x=y("../../components/selections").selectOnClick,f=y("../../components/selections").clearOutline,T=y("../../lib/setcursor"),_=y("../../lib/clear_gl_canvases"),k=y("../../plot_api/subroutines").redrawReglTraces,w=y("../../constants/alignment").MID_SHIFT,C=y("./constants"),A=y("./helpers"),O=y("../smith/helpers"),P=O.smith,S=O.reactanceArc,E=O.resistanceArc,D=O.smithTransform,z=h._,N=h.mod,V=h.deg2rad,X=h.rad2deg;function J(B,H,ee){this.isSmith=ee||!1,this.id=H,this.gd=B,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var U=B._fullLayout;this.clipIds.forTraces="clip"+U._uid+H+"-for-traces",this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=U["_"+(ee?"smith":"polar")+"layer"].append("g").attr("class",H),this.getHole=function(q){return this.isSmith?0:q.hole},this.getSector=function(q){return this.isSmith?[0,360]:q.sector},this.getRadial=function(q){return this.isSmith?q.realaxis:q.radialaxis},this.getAngular=function(q){return this.isSmith?q.imaginaryaxis:q.angularaxis},ee||(this.radialTickLayout=null,this.angularTickLayout=null)}var G=J.prototype;function Z(B){var H=B.ticks+String(B.ticklen)+String(B.showticklabels);return"side"in B&&(H+=B.side),H}function re(B,H){return H[h.findIndexOfMin(H,function(ee){return h.angleDist(B,ee)})]}function j(B,H,ee){return H?(B.attr("display",null),B.attr(ee)):B&&B.attr("display","none"),B}Q.exports=function(B,H,ee){return new J(B,H,ee)},G.plot=function(B,H){for(var ee=H[this.id],U=!1,$=0;$<B.length;$++)if(!1===B[$][0].trace.cliponaxis){U=!0;break}this._hasClipOnAxisFalse=U,this.updateLayers(H,ee),this.updateLayout(H,ee),t.generalUpdatePerTraceModule(this.gd,this,B,ee),this.updateFx(H,ee),this.isSmith&&(delete ee.realaxis.range,delete ee.imaginaryaxis.range)},G.updateLayers=function(B,H){var ee=this.isSmith,U=this.layers,$=this.getRadial(H),q=this.getAngular(H),te=C.layerNames,ne=te.indexOf("frontplot"),se=te.slice(0,ne),ie="below traces"===q.layer,ue="below traces"===$.layer;ie&&se.push("angular-line"),ue&&se.push("radial-line"),ie&&se.push("angular-axis"),ue&&se.push("radial-axis"),se.push("frontplot"),ie||se.push("angular-line"),ue||se.push("radial-line"),ie||se.push("angular-axis"),ue||se.push("radial-axis");var le=(ee?"smith":"polar")+"sublayer",de=this.framework.selectAll("."+le).data(se,String);de.enter().append("g").attr("class",function(be){return le+" "+be}).each(function(be){var _e=U[be]=m.select(this);switch(be){case"frontplot":ee||_e.append("g").classed("barlayer",!0),_e.append("g").classed("scatterlayer",!0);break;case"backplot":_e.append("g").classed("maplayer",!0);break;case"plotbg":U.bg=_e.append("path");break;case"radial-grid":case"angular-grid":_e.style("fill","none");break;case"radial-line":_e.append("line").style("fill","none");break;case"angular-line":_e.append("path").style("fill","none")}}),de.order()},G.updateLayout=function(B,H){var ee=this.layers,U=B._size,$=this.getRadial(H),q=this.getAngular(H),te=H.domain.x,ne=H.domain.y;this.xOffset=U.l+U.w*te[0],this.yOffset=U.t+U.h*(1-ne[1]);var se=this.xLength=U.w*(te[1]-te[0]),ie=this.yLength=U.h*(ne[1]-ne[0]),ue=this.getSector(H);this.sectorInRad=ue.map(V);var le,de,be,_e,xe,gt,et,wt,Gt,Kt,cr,ar,hr,Xt,He,Ee=this.sectorBBox=(Gt=(gt=ue)[1]-(wt=gt[0]),cr=(Kt=N(wt,360))+Gt,ar=Math.cos(V(Kt)),hr=Math.sin(V(Kt)),Xt=Math.cos(V(cr)),He=Math.sin(V(cr)),et=Kt<=90&&cr>=90||Kt>90&&cr>=450?1:hr<=0&&He<=0?0:Math.max(hr,He),[Kt<=180&&cr>=180||Kt>180&&cr>=540?-1:ar>=0&&Xt>=0?0:Math.min(ar,Xt),Kt<=270&&cr>=270||Kt>270&&cr>=630?-1:hr>=0&&He>=0?0:Math.min(hr,He),cr>=360?1:ar<=0&&Xt<=0?0:Math.max(ar,Xt),et]),he=Ee[2]-Ee[0],Se=ie/se,Me=Math.abs((Ee[3]-Ee[1])/he);Se>Me?(le=se,xe=(ie-(de=se*Me))/U.h/2,be=[te[0],te[1]],_e=[ne[0]+xe,ne[1]-xe]):(de=ie,xe=(se-(le=ie/Me))/U.w/2,be=[te[0]+xe,te[1]-xe],_e=[ne[0],ne[1]]),this.xLength2=le,this.yLength2=de,this.xDomain2=be,this.yDomain2=_e;var Ie,Fe=this.xOffset2=U.l+U.w*be[0],Ne=this.yOffset2=U.t+U.h*(1-_e[1]),De=this.radius=le/he,$e=this.innerRadius=this.getHole(H)*De,Re=this.cx=Fe-De*Ee[0],ze=this.cy=Ne+De*Ee[3],Ue=this.cxx=Re-Fe,je=this.cyy=ze-Ne,rt=$.side;"counterclockwise"===rt?(Ie=rt,rt="top"):"clockwise"===rt&&(Ie=rt,rt="bottom"),this.radialAxis=this.mockAxis(B,H,$,{_id:"x",side:rt,_trueSide:Ie,domain:[$e/U.w,De/U.w]}),this.angularAxis=this.mockAxis(B,H,q,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(B,H),this.updateAngularAxis(B,H),this.updateRadialAxis(B,H),this.updateRadialAxisTitle(B,H),this.xaxis=this.mockCartesianAxis(B,H,{_id:"x",domain:be}),this.yaxis=this.mockCartesianAxis(B,H,{_id:"y",domain:_e});var ut=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",ut).attr("transform",n(Ue,je)),ee.frontplot.attr("transform",n(Fe,Ne)).call(o.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),ee.bg.attr("d",ut).attr("transform",n(Re,ze)).call(r.fill,H.bgcolor)},G.mockAxis=function(B,H,ee,U){var $=h.extendFlat({},ee,U);return i($,H,B),$},G.mockCartesianAxis=function(B,H,ee){var U=this,$=U.isSmith,q=ee._id,te=h.extendFlat({type:"linear"},ee);a(te,B);var ne={x:[0,2],y:[1,3]};return te.setRange=function(){var se=U.sectorBBox,ie=ne[q],ue=U.radialAxis._rl,le=(ue[1]-ue[0])/(1-U.getHole(H));te.range=[se[ie[0]]*le,se[ie[1]]*le]},te.isPtWithinRange="x"!==q||$?function(){return!0}:function(se){return U.isPtInside(se)},te.setRange(),te.setScale(),te},G.doAutoRange=function(B,H){var ee=this.gd,U=this.radialAxis,$=this.getRadial(H);s(ee,U);var q=U.range;$.range=q.slice(),$._input.range=q.slice(),U._rl=[U.r2l(q[0],null,"gregorian"),U.r2l(q[1],null,"gregorian")]},G.updateRadialAxis=function(B,H){var ee=this,U=ee.gd,$=ee.layers,q=ee.radius,te=ee.innerRadius,ne=ee.cx,se=ee.cy,ie=ee.getRadial(H),ue=N(ee.getSector(H)[0],360),le=ee.radialAxis,de=te<q,be=ee.isSmith;be||(ee.fillViewInitialKey("radialaxis.angle",ie.angle),ee.fillViewInitialKey("radialaxis.range",le.range.slice()),le.setGeometry()),"auto"===le.tickangle&&ue>90&&ue<=270&&(le.tickangle=180);var _e=be?function(De){var $e=D(ee,P([De.x,0]));return n($e[0]-ne,$e[1]-se)}:function(De){return n(le.l2p(De.x)+te,0)},xe=be?function(De){return E(ee,De.x,-1/0,1/0)}:function(De){return ee.pathArc(le.r2p(De.x)+te)},Ee=Z(ie);if(ee.radialTickLayout!==Ee&&($["radial-axis"].selectAll(".xtick").remove(),ee.radialTickLayout=Ee),de){le.setScale();var he=0,me=be?(le.tickvals||[]).filter(function(De){return De>=0}).map(function(De){return d.tickText(le,De,!0,!1)}):d.calcTicks(le),Se=be?me:d.clipEnds(le,me),Me=d.getTickSigns(le)[2];be&&(("top"===le.ticks&&"bottom"===le.side||"bottom"===le.ticks&&"top"===le.side)&&(Me=-Me),"top"===le.ticks&&"top"===le.side&&(he=-le.ticklen),"bottom"===le.ticks&&"bottom"===le.side&&(he=le.ticklen)),d.drawTicks(U,le,{vals:me,layer:$["radial-axis"],path:d.makeTickPath(le,0,Me),transFn:_e,crisp:!1}),d.drawGrid(U,le,{vals:Se,layer:$["radial-grid"],path:xe,transFn:h.noop,crisp:!1}),d.drawLabels(U,le,{vals:me,layer:$["radial-axis"],transFn:_e,labelFns:d.makeLabelFns(le,he)})}var Ie=ee.radialAxisAngle=ee.vangles?X(re(V(ie.angle),ee.vangles)):ie.angle,Fe=n(ne,se),Ne=Fe+e(-Ie);j($["radial-axis"],de&&(ie.showticklabels||ie.ticks),{transform:Ne}),j($["radial-grid"],de&&ie.showgrid,{transform:be?"":Fe}),j($["radial-line"].select("line"),de&&ie.showline,{x1:be?-q:te,y1:0,x2:q,y2:0,transform:Ne}).attr("stroke-width",ie.linewidth).call(r.stroke,ie.linecolor)},G.updateRadialAxisTitle=function(B,H,ee){if(!this.isSmith){var U=this.gd,$=this.radius,q=this.cx,te=this.cy,ne=this.getRadial(H),se=this.id+"title",ie=0;if(ne.title){var ue=o.bBox(this.layers["radial-axis"].node()).height,le=ne.title.font.size,de=ne.side;ie="top"===de?le:"counterclockwise"===de?-(ue+.4*le):ue+.8*le}var be=void 0!==ee?ee:this.radialAxisAngle,_e=V(be),xe=Math.cos(_e),Ee=Math.sin(_e),he=q+$/2*xe+ie*Ee,me=te-$/2*Ee+ie*xe;this.layers["radial-axis-title"]=g.draw(U,se,{propContainer:ne,propName:this.id+".radialaxis.title",placeholder:z(U,"Click to enter radial axis title"),attributes:{x:he,y:me,"text-anchor":"middle"},transform:{rotate:-be}})}},G.updateAngularAxis=function(B,H){var ee=this,U=ee.gd,$=ee.layers,q=ee.radius,te=ee.innerRadius,ne=ee.cx,se=ee.cy,ie=ee.getAngular(H),ue=ee.angularAxis,le=ee.isSmith;le||(ee.fillViewInitialKey("angularaxis.rotation",ie.rotation),ue.setGeometry(),ue.setScale());var de=le?function(De){var $e=D(ee,P([0,De.x]));return Math.atan2($e[0]-ne,$e[1]-se)-Math.PI/2}:function(De){return ue.t2g(De.x)};"linear"===ue.type&&"radians"===ue.thetaunit&&(ue.tick0=X(ue.tick0),ue.dtick=X(ue.dtick));var be=function(De){return n(ne+q*Math.cos(De),se-q*Math.sin(De))},_e=le?function(De){var $e=D(ee,P([0,De.x]));return n($e[0],$e[1])}:function(De){return be(de(De))},xe=le?function(De){var $e=D(ee,P([0,De.x])),Re=Math.atan2($e[0]-ne,$e[1]-se)-Math.PI/2;return n($e[0],$e[1])+e(-X(Re))}:function(De){var $e=de(De);return be($e)+e(-X($e))},Ee=le?function(De){return S(ee,De.x,0,1/0)}:function(De){var $e=de(De),Re=Math.cos($e),ze=Math.sin($e);return"M"+[ne+te*Re,se-te*ze]+"L"+[ne+q*Re,se-q*ze]},he=d.makeLabelFns(ue,0).labelStandoff,me={xFn:function(De){var $e=de(De);return Math.cos($e)*he},yFn:function(De){var $e=de(De),Re=Math.sin($e)>0?.2:1;return-Math.sin($e)*(he+De.fontSize*Re)+Math.abs(Math.cos($e))*(De.fontSize*w)},anchorFn:function(De){var $e=de(De),Re=Math.cos($e);return Math.abs(Re)<.1?"middle":Re>0?"start":"end"},heightFn:function(De,$e,Re){var ze=de(De);return-.5*(1+Math.sin(ze))*Re}},Se=Z(ie);ee.angularTickLayout!==Se&&($["angular-axis"].selectAll("."+ue._id+"tick").remove(),ee.angularTickLayout=Se);var Me,Ie=le?[1/0].concat(ue.tickvals||[]).map(function(De){return d.tickText(ue,De,!0,!1)}):d.calcTicks(ue);if(le&&(Ie[0].text="\u221e",Ie[0].fontSize*=1.75),"linear"===H.gridshape?(Me=Ie.map(de),h.angleDelta(Me[0],Me[1])<0&&(Me=Me.slice().reverse())):Me=null,ee.vangles=Me,"category"===ue.type&&(Ie=Ie.filter(function(De){return h.isAngleInsideSector(de(De),ee.sectorInRad)})),ue.visible){var Fe="inside"===ue.ticks?-1:1;d.drawTicks(U,ue,{vals:Ie,layer:$["angular-axis"],path:"M"+Fe*((ue.linewidth||1)/2)+",0h"+Fe*ue.ticklen,transFn:xe,crisp:!1}),d.drawGrid(U,ue,{vals:Ie,layer:$["angular-grid"],path:Ee,transFn:h.noop,crisp:!1}),d.drawLabels(U,ue,{vals:Ie,layer:$["angular-axis"],repositionOnUpdate:!0,transFn:_e,labelFns:me})}j($["angular-line"].select("path"),ie.showline,{d:ee.pathSubplot(),transform:n(ne,se)}).attr("stroke-width",ie.linewidth).call(r.stroke,ie.linecolor)},G.updateFx=function(B,H){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(B),this.updateRadialDrag(B,H,0),this.updateRadialDrag(B,H,1)),this.updateHoverAndMainDrag(B))},G.updateHoverAndMainDrag=function(B){var H,ee,U=this,$=U.isSmith,q=U.gd,ne=B._zoomlayer,se=C.MINZOOM,ie=C.OFFEDGE,ue=U.radius,le=U.innerRadius,de=U.cx,be=U.cy,_e=U.cxx,xe=U.cyy,Ee=U.sectorInRad,he=U.vangles,me=U.radialAxis,Se=A.clampTiny,Me=A.findXYatLength,Ie=A.findEnclosingVertexAngles,Fe=C.cornerHalfWidth,Ne=C.cornerLen/2,De=c.makeDragger(U.layers,"path","maindrag",!1===B.dragmode?"none":"crosshair");m.select(De).attr("d",U.pathSubplot()).attr("transform",n(de,be)),De.onmousemove=function(We){p.hover(q,We,U.id),q._fullLayout._lasthover=De,q._fullLayout._hoversubplot=U.id},De.onmouseout=function(We){q._dragging||l.unhover(q,We)};var $e,Re,ze,Ue,je,rt,ut,gt,At,_t={element:De,gd:q,subplot:U.id,plotinfo:{id:U.id,xaxis:U.xaxis,yaxis:U.yaxis},xaxes:[U.xaxis],yaxes:[U.yaxis]};function it(We,Ke){return Math.sqrt(We*We+Ke*Ke)}function et(We,Ke){return it(We-_e,Ke-xe)}function wt(We,Ke){return Math.atan2(xe-Ke,We-_e)}function Gt(We,Ke){return[We*Math.cos(Ke),We*Math.sin(-Ke)]}function Kt(We,Ke){if(0===We)return U.pathSector(2*Fe);var Ye=Ne/We,ft=Ke-Ye,ct=Ke+Ye,St=Math.max(0,Math.min(We,ue)),Ft=St-Fe,at=St+Fe;return"M"+Gt(Ft,ft)+"A"+[Ft,Ft]+" 0,0,0 "+Gt(Ft,ct)+"L"+Gt(at,ct)+"A"+[at,at]+" 0,0,1 "+Gt(at,ft)+"Z"}function cr(We,Ke,Ye){if(0===We)return U.pathSector(2*Fe);var ft,ct,St=Gt(We,Ke),Ft=Gt(We,Ye),at=Se((St[0]+Ft[0])/2),mt=Se((St[1]+Ft[1])/2);if(at&&mt){var qt=mt/at,Et=-1/qt,Dt=Me(Fe,qt,at,mt);ft=Me(Ne,Et,Dt[0][0],Dt[0][1]),ct=Me(Ne,Et,Dt[1][0],Dt[1][1])}else{var Le,Xe;mt?(Le=Ne,Xe=Fe):(Le=Fe,Xe=Ne),ft=[[at-Le,mt-Xe],[at+Le,mt-Xe]],ct=[[at-Le,mt+Xe],[at+Le,mt+Xe]]}return"M"+ft.join("L")+"L"+ct.reverse().join("L")+"Z"}function ar(We,Ke){return Ke=Math.max(Math.min(Ke,ue),le),We<ie?We=0:ue-We<ie?We=ue:Ke<ie?Ke=0:ue-Ke<ie&&(Ke=ue),Math.abs(Ke-We)>se?(We<Ke?(ze=We,Ue=Ke):(ze=Ke,Ue=We),!0):(ze=null,Ue=null,!1)}function hr(We,Ke){Ke=Ke||"M0,0Z",gt.attr("d",We=We||je),At.attr("d",Ke),c.transitionZoombox(gt,At,rt,ut),rt=!0;var Ye={};we(Ye),q.emit("plotly_relayouting",Ye)}function Xt(We,Ke){var Ye,ft,ct=$e+(We*=H),St=Re+(Ke*=ee),Ft=et($e,Re),at=Math.min(et(ct,St),ue),mt=wt($e,Re);ar(Ft,at)&&(Ye=je+U.pathSector(Ue),ze&&(Ye+=U.pathSector(ze)),ft=Kt(ze,mt)+Kt(Ue,mt)),hr(Ye,ft)}function He(We,Ke,Ye,ft){var ct=A.findIntersectionXY(Ye,ft,Ye,[We-_e,xe-Ke]);return it(ct[0],ct[1])}function Je(We,Ke){var Ye,ft,ct=$e+We,St=Re+Ke,Ft=wt($e,Re),at=wt(ct,St),mt=Ie(Ft,he),qt=Ie(at,he);ar(He($e,Re,mt[0],mt[1]),Math.min(He(ct,St,qt[0],qt[1]),ue))&&(Ye=je+U.pathSector(Ue),ze&&(Ye+=U.pathSector(ze)),ft=[cr(ze,mt[0],mt[1]),cr(Ue,mt[0],mt[1])].join(" ")),hr(Ye,ft)}function pe(){if(c.removeZoombox(q),null!==ze&&null!==Ue){var We={};we(We),c.showDoubleClickNotifier(q),b.call("_guiRelayout",q,We)}}function we(We){var Ke=me._rl,Ye=(Ke[1]-Ke[0])/(1-le/ue)/ue;We[U.id+".radialaxis.range"]=[Ke[0]+(ze-le)*Ye,Ke[0]+(Ue-le)*Ye]}function Be(We,Ke){var Ye=q._fullLayout.clickmode;if(c.removeZoombox(q),2===We){var ft={};for(var ct in U.viewInitial)ft[U.id+"."+ct]=U.viewInitial[ct];q.emit("plotly_doubleclick",null),b.call("_guiRelayout",q,ft)}Ye.indexOf("select")>-1&&1===We&&x(Ke,q,[U.xaxis],[U.yaxis],U.id,_t),Ye.indexOf("event")>-1&&p.click(q,Ke,U.id)}_t.prepFn=function(We,Ke,Ye){var ft=q._fullLayout.dragmode,ct=De.getBoundingClientRect();q._fullLayout._calcInverseTransform(q),H=q._fullLayout._invScaleX,ee=q._fullLayout._invScaleY;var Ft=h.apply3DTransform(q._fullLayout._invTransform)(Ke-ct.left,Ye-ct.top);if($e=Ft[0],Re=Ft[1],he){var at=A.findPolygonOffset(ue,Ee[0],Ee[1],he);$e+=_e+at[0],Re+=xe+at[1]}switch(ft){case"zoom":_t.clickFn=Be,$||(_t.moveFn=he?Je:Xt,_t.doneFn=pe,ze=null,Ue=null,je=U.pathSubplot(),rt=!1,ut=v(q._fullLayout[U.id].bgcolor).getLuminance(),(gt=c.makeZoombox(ne,ut,de,be,je)).attr("fill-rule","evenodd"),At=c.makeCorners(ne,de,be),f(q));break;case"select":case"lasso":u(We,Ke,Ye,_t,ft)}},l.init(_t)},G.updateRadialDrag=function(B,H,ee){var U=this,$=U.gd,q=U.layers,te=U.radius,ne=U.innerRadius,se=U.cx,ie=U.cy,ue=U.radialAxis,le=C.radialDragBoxSize,de=le/2;if(ue.visible){var be,_e,xe,Ee=V(U.radialAxisAngle),he=ue._rl,me=he[0],Se=he[1],Me=he[ee],Ie=.75*(he[1]-he[0])/(1-U.getHole(H))/te;ee?(be=se+(te+de)*Math.cos(Ee),_e=ie-(te+de)*Math.sin(Ee),xe="radialdrag"):(be=se+(ne-de)*Math.cos(Ee),_e=ie-(ne-de)*Math.sin(Ee),xe="radialdrag-inner");var Fe,Ne,De,$e=c.makeRectDragger(q,xe,"crosshair",-de,-de,le,le),Re={element:$e,gd:$};!1===B.dragmode&&(Re.dragmode=!1),j(m.select($e),ue.visible&&ne<te,{transform:n(be,_e)}),Re.prepFn=function(){Fe=null,Ne=null,De=null,Re.moveFn=ze,Re.doneFn=Ue,f($)},Re.clampFn=function(ut,gt){return Math.sqrt(ut*ut+gt*gt)<C.MINDRAG&&(ut=0,gt=0),[ut,gt]},l.init(Re)}function ze(ut,gt){if(Fe)Fe(ut,gt);else{var At=[ut,-gt],_t=[Math.cos(Ee),Math.sin(Ee)],it=Math.abs(h.dot(At,_t)/Math.sqrt(h.dot(At,At)));isNaN(it)||(Fe=it<.5?je:rt)}var wt,et={};wt=et,null!==Ne?wt[U.id+".radialaxis.angle"]=Ne:null!==De&&(wt[U.id+".radialaxis.range["+ee+"]"]=De),$.emit("plotly_relayouting",et)}function Ue(){null!==Ne?b.call("_guiRelayout",$,U.id+".radialaxis.angle",Ne):null!==De&&b.call("_guiRelayout",$,U.id+".radialaxis.range["+ee+"]",De)}function je(ut,gt){if(0!==ee){Ne=Math.atan2(ie-(_e+gt),be+ut-se),U.vangles&&(Ne=re(Ne,U.vangles)),Ne=X(Ne);var it=n(se,ie)+e(-Ne);q["radial-axis"].attr("transform",it),q["radial-line"].select("line").attr("transform",it);var et=U.gd._fullLayout;U.updateRadialAxisTitle(et,et[U.id],Ne)}}function rt(ut,gt){var At=h.dot([ut,-gt],[Math.cos(Ee),Math.sin(Ee)]);if(De=Me-Ie*At,Ie>0==(ee?De>me:De<Se)){var _t=$._fullLayout,it=_t[U.id];ue.range[ee]=De,ue._rl[ee]=De,U.updateRadialAxis(_t,it),U.xaxis.setRange(),U.xaxis.setScale(),U.yaxis.setRange(),U.yaxis.setScale();var et=!1;for(var wt in U.traceHash){var Gt=U.traceHash[wt],Kt=h.filterVisible(Gt);Gt[0][0].trace._module.plot($,U,Kt,it),b.traceIs(wt,"gl")&&Kt.length&&(et=!0)}et&&(_($),k($))}else De=null}},G.updateAngularDrag=function(B){var H=this,ee=H.gd,U=H.layers,$=H.radius,q=H.angularAxis,te=H.cx,ne=H.cy,se=H.cxx,ie=H.cyy,ue=C.angularDragBoxSize,le=c.makeDragger(U,"path","angulardrag",!1===B.dragmode?"none":"move"),de={element:le,gd:ee};function be(Re,ze){return Math.atan2(ie+ue-ze,Re-se-ue)}!1===B.dragmode?de.dragmode=!1:m.select(le).attr("d",H.pathAnnulus($,$+ue)).attr("transform",n(te,ne)).call(T,"move");var _e,xe,Ee,he,me,Se,Me=U.frontplot.select(".scatterlayer").selectAll(".trace"),Ie=Me.selectAll(".point"),Fe=Me.selectAll(".textpoint");function Ne(Re,ze){var Ue=H.gd._fullLayout,je=Ue[H.id],rt=be(_e+Re*B._invScaleX,xe+ze*B._invScaleY),ut=X(rt-Se);if(he=Ee+ut,U.frontplot.attr("transform",n(H.xOffset2,H.yOffset2)+e([-ut,se,ie])),H.vangles){me=H.radialAxisAngle+ut;var gt=n(te,ne)+e(-ut),At=n(te,ne)+e(-me);U.bg.attr("transform",gt),U["radial-grid"].attr("transform",gt),U["radial-axis"].attr("transform",At),U["radial-line"].select("line").attr("transform",At),H.updateRadialAxisTitle(Ue,je,me)}else H.clipPaths.forTraces.select("path").attr("transform",n(se,ie)+e(ut));Ie.each(function(){var Kt=m.select(this),cr=o.getTranslate(Kt);Kt.attr("transform",n(cr.x,cr.y)+e([ut]))}),Fe.each(function(){var Kt=m.select(this),cr=Kt.select("text"),ar=o.getTranslate(Kt);Kt.attr("transform",e([ut,cr.attr("x"),cr.attr("y")])+n(ar.x,ar.y))}),q.rotation=h.modHalf(he,360),H.updateAngularAxis(Ue,je),H._hasClipOnAxisFalse&&!h.isFullCircle(H.sectorInRad)&&Me.call(o.hideOutsideRangePoints,H);var _t=!1;for(var it in H.traceHash)if(b.traceIs(it,"gl")){var et=H.traceHash[it],wt=h.filterVisible(et);et[0][0].trace._module.plot(ee,H,wt,je),wt.length&&(_t=!0)}_t&&(_(ee),k(ee));var Gt={};De(Gt),ee.emit("plotly_relayouting",Gt)}function De(Re){Re[H.id+".angularaxis.rotation"]=he,H.vangles&&(Re[H.id+".radialaxis.angle"]=me)}function $e(){Fe.select("text").attr("transform",null);var Re={};De(Re),b.call("_guiRelayout",ee,Re)}de.prepFn=function(Re,ze,Ue){Ee=B[H.id].angularaxis.rotation;var rt=le.getBoundingClientRect();_e=ze-rt.left,xe=Ue-rt.top,ee._fullLayout._calcInverseTransform(ee);var ut=h.apply3DTransform(B._invTransform)(_e,xe);Se=be(_e=ut[0],xe=ut[1]),de.moveFn=Ne,de.doneFn=$e,f(ee)},H.vangles&&!h.isFullCircle(H.sectorInRad)&&(de.prepFn=h.noop,T(m.select(le),null)),l.init(de)},G.isPtInside=function(B){if(this.isSmith)return!0;var H=this.sectorInRad,ee=this.vangles,U=this.angularAxis.c2g(B.theta),$=this.radialAxis,q=$.c2l(B.r);return(ee?A.isPtInsidePolygon:h.isPtInsideSector)(q,U,$._rl,H,ee)},G.pathArc=function(B){var H=this.sectorInRad,ee=this.vangles;return(ee?A.pathPolygon:h.pathArc)(B,H[0],H[1],ee)},G.pathSector=function(B){var H=this.sectorInRad,ee=this.vangles;return(ee?A.pathPolygon:h.pathSector)(B,H[0],H[1],ee)},G.pathAnnulus=function(B,H){var ee=this.sectorInRad,U=this.vangles;return(U?A.pathPolygonAnnulus:h.pathAnnulus)(B,H,ee[0],ee[1],U)},G.pathSubplot=function(){var B=this.innerRadius,H=this.radius;return B?this.pathAnnulus(B,H):this.pathSector(H)},G.fillViewInitialKey=function(B,H){B in this.viewInitial||(this.viewInitial[B]=H)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../cartesian/set_convert"),b=m.deg2rad,h=m.rad2deg;Q.exports=function(e,n,r){switch(v(e,r),e._id){case"x":case"radialaxis":d=n._subplot,(o=e).setGeometry=function(){var a=o._rl[0],i=o._rl[1],s=d.innerRadius,c=(d.radius-s)/(i-a),l=s/c,p=a>i?function(g){return g<=0}:function(g){return g>=0};o.c2g=function(g){var u=o.c2l(g)-a;return(p(u)?u:0)+l},o.g2c=function(g){return o.l2c(g+a-l)},o.g2p=function(g){return g*c},o.c2p=function(g){return o.g2p(o.c2g(g))}};break;case"angularaxis":!function(o,t){var d=o.type;if("linear"===d){var a=o.d2c,i=o.c2d;o.d2c=function(s,c){return l=a(s),"degrees"===c?b(l):l;var l},o.c2d=function(s,c){return i((l=s,"degrees"===c?h(l):l));var l}}o.makeCalcdata=function(s,c){var l,p,g=s[c],u=s._length,x=function(w){return o.d2c(w,s.thetaunit)};if(g){if(m.isTypedArray(g)&&"linear"===d){if(u===g.length)return g;if(g.subarray)return g.subarray(0,u)}for(l=new Array(u),p=0;p<u;p++)l[p]=x(g[p])}else{var f=c+"0",T="d"+c,_=f in s?x(s[f]):0,k=s[T]?x(s[T]):(o.period||2*Math.PI)/u;for(l=new Array(u),p=0;p<u;p++)l[p]=_+p*k}return l},o.setGeometry=function(){var s,c,l,p,g=t.sector,u=g.map(b),x={clockwise:-1,counterclockwise:1}[o.direction],f=b(o.rotation),T=function(C){return x*C+f},_=function(C){return(C-f)/x};switch(d){case"linear":c=s=m.identity,p=b,l=h,o.range=m.isFullCircle(u)?[g[0],g[0]+360]:u.map(_).map(h);break;case"category":var k=o._categories.length,w=o.period?Math.max(o.period,k):k;0===w&&(w=1),c=p=function(C){return 2*C*Math.PI/w},s=l=function(C){return C*w/Math.PI/2},o.range=[0,w]}o.c2g=function(C){return T(c(C))},o.g2c=function(C){return s(_(C))},o.t2g=function(C){return T(p(C))},o.g2t=function(C){return l(_(C))}}}(e,n)}var o,d}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(y,Q,K){"use strict";Q.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(y,Q,K){"use strict";function m(e){return e<0?-1:e>0?1:0}function v(e){var n=e[0],r=e[1];if(!isFinite(n)||!isFinite(r))return[1,0];var o=(n+1)*(n+1)+r*r;return[(n*n+r*r-1)/o,2*r/o]}function b(e,n){return[n[0]*e.radius+e.cx,-n[1]*e.radius+e.cy]}function h(e,n){return n*e.radius}Q.exports={smith:v,reactanceArc:function(e,n,r,o){var t=b(e,v([r,n])),d=t[0],a=t[1],i=b(e,v([o,n])),s=i[0],c=i[1];if(0===n)return["M"+d+","+a,"L"+s+","+c].join(" ");var l=h(e,1/Math.abs(n));return["M"+d+","+a,"A"+l+","+l+" 0 0,"+(n<0?1:0)+" "+s+","+c].join(" ")},resistanceArc:function(e,n,r,o){var t=h(e,1/(n+1)),d=b(e,v([n,r])),a=d[0],i=d[1],s=b(e,v([n,o])),c=s[0],l=s[1];if(m(r)!==m(o)){var p=b(e,v([n,0]));return["M"+a+","+i,"A"+t+","+t+" 0 0,"+(0<r?0:1)+" "+p[0]+","+p[1],"A"+t+","+t+" 0 0,"+(o<0?0:1)+c+","+l].join(" ")}return["M"+a+","+i,"A"+t+","+t+" 0 0,"+(o<r?0:1)+" "+c+","+l].join(" ")},smithTransform:b}},{}],638:[function(y,Q,K){"use strict";var m=y("../get_data").getSubplotCalcData,v=y("../../lib").counterRegex,b=y("../polar/polar"),h=y("./constants"),e=h.attr,n=h.name,r=v(n),o={};o[e]={valType:"subplotid",dflt:n,editType:"calc"},Q.exports={attr:e,name:n,idRoot:n,idRegex:r,attrRegex:r,attributes:o,layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),plot:function(t){for(var d=t._fullLayout,a=t.calcdata,i=d._subplots[n],s=0;s<i.length;s++){var c=i[s],l=m(a,n,c),p=d[c]._subplot;p||(p=b(t,c,!0),d[c]._subplot=p),p.plot(l,d,t._promises)}},clean:function(t,d,a,i){for(var s=i._subplots[n]||[],c=0;c<s.length;c++){var l=s[c],p=i[l]._subplot;if(!d[l]&&p)for(var g in p.framework.remove(),p.clipPaths)p.clipPaths[g].remove()}},toSVG:y("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(y,Q,K){"use strict";var m=y("../../components/color/attributes"),v=y("../cartesian/layout_attributes"),b=y("../domain").attributes,h=y("../../lib").extendFlat,e=y("../../plot_api/edit_types").overrideAll,n=e({color:v.color,showline:h({},v.showline,{dflt:!0}),linecolor:v.linecolor,linewidth:v.linewidth,showgrid:h({},v.showgrid,{dflt:!0}),gridcolor:v.gridcolor,gridwidth:v.gridwidth,griddash:v.griddash},"plot","from-root"),r=e({ticklen:v.ticklen,tickwidth:h({},v.tickwidth,{dflt:2}),tickcolor:v.tickcolor,showticklabels:v.showticklabels,showtickprefix:v.showtickprefix,tickprefix:v.tickprefix,showticksuffix:v.showticksuffix,ticksuffix:v.ticksuffix,tickfont:v.tickfont,tickformat:v.tickformat,hoverformat:v.hoverformat,layer:v.layer},"plot","from-root"),o=h({visible:h({},v.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:h({},v.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},n,r),t=h({visible:h({},v.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:v.ticks,editType:"calc"},n,r);Q.exports={domain:b({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:m.background},realaxis:o,imaginaryaxis:t,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(y,Q,K){"use strict";var m,v,b,h=y("../../lib"),e=y("../../components/color"),n=y("../../plot_api/plot_template"),r=y("../subplot_defaults"),o=y("../get_data").getSubplotData,t=y("../cartesian/prefix_suffix_defaults"),d=y("../cartesian/tick_label_defaults"),a=y("../cartesian/line_grid_defaults"),i=y("../cartesian/set_convert"),s=y("./layout_attributes"),c=y("./constants"),l=c.axisNames,p=(m=function(u){return u.slice().reverse().map(function(x){return-x}).concat([0]).concat(u)},v=String,b={},function(u){var x=v?v(u):u;if(x in b)return b[x];var f=m(u);return b[x]=f,f});function g(u,x,f,T){var _=f("bgcolor");T.bgColor=e.combine(_,T.paper_bgcolor);var k,w=o(T.fullData,c.name,T.id),C=T.layoutOut;function A(G,Z){return f(k+"."+G,Z)}for(var O=0;O<l.length;O++){h.isPlainObject(u[k=l[O]])||(u[k]={});var P=u[k],S=n.newContainer(x,k);S._id=S._name=k,S._attr=T.id+"."+k,S._traceIndices=w.map(function(G){return G._expandedIndex});var E=A("visible");if(S.type="linear",i(S,C),t(P,S,A,S.type),E){var D,z,N,V,X="realaxis"===k;X&&A("side"),X?A("tickvals"):A("tickvals",p(x.realaxis.tickvals||s.realaxis.tickvals.dflt));var J=T.font||{};E&&(z=(D=A("color"))===P.color?D:J.color,N=J.size,V=J.family),d(P,S,A,S.type,{noTicklabelstep:!0,noAng:!X,noExp:!0,font:{color:z,size:N,family:V}}),h.coerce2(u,x,s,k+".ticklen"),h.coerce2(u,x,s,k+".tickwidth"),h.coerce2(u,x,s,k+".tickcolor",x.color),A("ticks")||(delete x[k].ticklen,delete x[k].tickwidth,delete x[k].tickcolor),a(P,S,A,{dfltColor:D,bgColor:T.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[k]}),A("layer")}A("hoverformat"),delete S.type,S._input=P}}Q.exports=function(u,x,f){r(u,x,f,{noUirevision:!0,type:c.name,attributes:s,handleDefaults:g,font:x.font,paper_bgcolor:x.paper_bgcolor,fullData:f,layoutOut:x})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("../plot_api/plot_template"),b=y("./domain").defaults;Q.exports=function(h,e,n,r){var o,t,a=r.attributes,i=r.handleDefaults,s=r.partition||"x",c=e._subplots[r.type],l=c.length,p=l&&c[0].replace(/\d+$/,"");function g(T,_){return m.coerce(o,t,a,T,_)}for(var u=0;u<l;u++){var x=c[u];o=h[x]?h[x]:h[x]={},t=v.newContainer(e,x,p),r.noUirevision||g("uirevision",e.uirevision);var f={};f[s]=[u/l,(u+1)/l],b(t,e,g,f),r.id=x,i(o,t,g,r)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(y,Q,K){"use strict";function v(b){var h=b.description?" "+b.description:"",e=b.keys||[];if(e.length>0){for(var n=[],r=0;r<e.length;r++)n[r]="`"+e[r]+"`";h+="Finally, the template string has access to ",h=1===e.length?"variable "+n[0]:"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return h}y("../constants/docs"),K.hovertemplateAttrs=function(b,h){b=b||{},v(h=h||{});var e={valType:"string",dflt:"",editType:b.editType||"none"};return!1!==b.arrayOk&&(e.arrayOk=!0),e},K.texttemplateAttrs=function(b,h){b=b||{},v(h=h||{});var e={valType:"string",dflt:"",editType:b.editType||"calc"};return!1!==b.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(y,Q,K){"use strict";var m=y("./ternary"),v=y("../../plots/get_data").getSubplotCalcData,b=y("../../lib").counterRegex;K.name="ternary";var h=K.attr="subplot";K.idRoot="ternary",K.idRegex=K.attrRegex=b("ternary"),(K.attributes={})[h]={valType:"subplotid",dflt:"ternary",editType:"calc"},K.layoutAttributes=y("./layout_attributes"),K.supplyLayoutDefaults=y("./layout_defaults"),K.plot=function(e){for(var n=e._fullLayout,r=e.calcdata,o=n._subplots.ternary,t=0;t<o.length;t++){var d=o[t],a=v(r,"ternary",d),i=n[d]._subplot;i||(i=new m({id:d,graphDiv:e,container:n._ternarylayer.node()},n),n[d]._subplot=i),i.plot(a,n,e._promises)}},K.clean=function(e,n,r,o){for(var t=o._subplots.ternary||[],d=0;d<t.length;d++){var a=t[d],i=o[a]._subplot;!n[a]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(y,Q,K){"use strict";var m=y("../../components/color/attributes"),v=y("../domain").attributes,b=y("../cartesian/layout_attributes"),h=y("../../plot_api/edit_types").overrideAll,e=y("../../lib/extend").extendFlat,n={title:{text:b.title.text,font:b.title.font},color:b.color,tickmode:b.tickmode,nticks:e({},b.nticks,{dflt:6,min:1}),tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,ticklabelstep:b.ticklabelstep,showticklabels:b.showticklabels,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,hoverformat:b.hoverformat,showline:e({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:e({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,griddash:b.griddash,layer:b.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}},r=Q.exports=h({domain:v({name:"ternary"}),bgcolor:{valType:"color",dflt:m.background},sum:{valType:"number",dflt:1,min:0},aaxis:n,baxis:n,caxis:n},"plot","from-root");r.uirevision={valType:"any",editType:"none"},r.aaxis.uirevision=r.baxis.uirevision=r.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(y,Q,K){"use strict";var m=y("../../components/color"),v=y("../../plot_api/plot_template"),b=y("../../lib"),h=y("../subplot_defaults"),e=y("../cartesian/tick_label_defaults"),n=y("../cartesian/prefix_suffix_defaults"),r=y("../cartesian/tick_mark_defaults"),o=y("../cartesian/tick_value_defaults"),t=y("../cartesian/line_grid_defaults"),d=y("./layout_attributes"),a=["aaxis","baxis","caxis"];function i(c,l,p,g){var u,x,f,T=p("bgcolor"),_=p("sum");g.bgColor=m.combine(T,g.paper_bgcolor);for(var k=0;k<a.length;k++)x=c[u=a[k]]||{},(f=v.newContainer(l,u))._name=u,s(x,f,g,l);var w=l.aaxis,C=l.baxis,A=l.caxis;w.min+C.min+A.min>=_&&(w.min=0,C.min=0,A.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function s(c,l,p,g){var u=d[l._name];function x(C,A){return b.coerce(c,l,u,C,A)}x("uirevision",g.uirevision),l.type="linear";var f=x("color"),T=f!==u.color.dflt?f:p.font.color,_=l._name.charAt(0).toUpperCase(),k="Component "+_,w=x("title.text",k);l._hovertitle=w===k?w:_,b.coerceFont(x,"title.font",{family:p.font.family,size:b.bigFont(p.font.size),color:T}),x("min"),o(c,l,x,"linear"),n(c,l,x,"linear"),e(c,l,x,"linear"),r(c,l,x,{outerTicks:!0}),x("showticklabels")&&(b.coerceFont(x,"tickfont",{family:p.font.family,size:p.font.size,color:T}),x("tickangle"),x("tickformat")),t(c,l,x,{dfltColor:f,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u}),x("hoverformat"),x("layer")}Q.exports=function(c,l,p){h(c,l,p,{type:"ternary",attributes:d,handleDefaults:i,font:l.font,paper_bgcolor:l.paper_bgcolor})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("tinycolor2"),b=y("../../registry"),h=y("../../lib"),e=h.strTranslate,n=h._,r=y("../../components/color"),o=y("../../components/drawing"),t=y("../cartesian/set_convert"),d=y("../../lib/extend").extendFlat,a=y("../plots"),i=y("../cartesian/axes"),s=y("../../components/dragelement"),c=y("../../components/fx"),l=y("../../components/dragelement/helpers"),p=l.freeMode,g=l.rectMode,u=y("../../components/titles"),x=y("../../components/selections").prepSelect,f=y("../../components/selections").selectOnClick,T=y("../../components/selections").clearOutline,_=y("../../components/selections").clearSelectionsCache,k=y("../cartesian/constants");function w(N,V){this.id=N.id,this.graphDiv=N.graphDiv,this.init(V),this.makeFramework(V),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}Q.exports=w;var C=w.prototype;C.init=function(N){this.container=N._ternarylayer,this.defs=N._defs,this.layoutId=N._uid,this.traceHash={},this.layers={}},C.plot=function(N,V){var X=V[this.id],J=V._size;this._hasClipOnAxisFalse=!1;for(var G=0;G<N.length;G++)if(!1===N[G][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(X),this.adjustLayout(X,J),a.generalUpdatePerTraceModule(this.graphDiv,this,N,X),this.layers.plotbg.select("path").call(r.fill,X.bgcolor)},C.makeFramework=function(N){var V=this.graphDiv,X=N[this.id],J=this.clipId="clip"+this.layoutId+this.id,G=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=h.ensureSingleById(N._clips,"clipPath",J,function(Z){Z.append("path").attr("d","M0,0Z")}),this.clipDefRelative=h.ensureSingleById(N._clips,"clipPath",G,function(Z){Z.append("path").attr("d","M0,0Z")}),this.plotContainer=h.ensureSingle(this.container,"g",this.id),this.updateLayers(X),o.setClipUrl(this.layers.backplot,J,V),o.setClipUrl(this.layers.grids,J,V)},C.updateLayers=function(N){var V=this.layers,X=["draglayer","plotbg","backplot","grids"];"below traces"===N.aaxis.layer&&X.push("aaxis","aline"),"below traces"===N.baxis.layer&&X.push("baxis","bline"),"below traces"===N.caxis.layer&&X.push("caxis","cline"),X.push("frontplot"),"above traces"===N.aaxis.layer&&X.push("aaxis","aline"),"above traces"===N.baxis.layer&&X.push("baxis","bline"),"above traces"===N.caxis.layer&&X.push("caxis","cline");var J=this.plotContainer.selectAll("g.toplevel").data(X,String),G=["agrid","bgrid","cgrid"];J.enter().append("g").attr("class",function(Z){return"toplevel "+Z}).each(function(Z){var re=m.select(this);V[Z]=re,"frontplot"===Z?re.append("g").classed("scatterlayer",!0):"backplot"===Z?re.append("g").classed("maplayer",!0):"plotbg"===Z?re.append("path").attr("d","M0,0Z"):"aline"===Z||"bline"===Z||"cline"===Z?re.append("path"):"grids"===Z&&G.forEach(function(j){V[j]=re.append("g").classed("grid "+j,!0)})}),J.order()};var A=Math.sqrt(4/3);C.adjustLayout=function(N,V){var X,J,G,Z,re,j,B=this,H=N.domain,ee=(H.x[0]+H.x[1])/2,U=(H.y[0]+H.y[1])/2,$=H.x[1]-H.x[0],q=H.y[1]-H.y[0],te=$*V.w,ne=q*V.h,se=N.sum,ie=N.aaxis.min,ue=N.baxis.min,le=N.caxis.min;te>A*ne?G=(Z=ne)*A:Z=(G=te)/A,re=$*G/te,j=q*Z/ne,J=V.t+V.h*(1-U)-Z/2,B.x0=X=V.l+V.w*ee-G/2,B.y0=J,B.w=G,B.h=Z,B.sum=se,B.xaxis={type:"linear",range:[ie+2*le-se,se-ie-2*ue],domain:[ee-re/2,ee+re/2],_id:"x"},t(B.xaxis,B.graphDiv._fullLayout),B.xaxis.setScale(),B.xaxis.isPtWithinRange=function(Fe){return Fe.a>=B.aaxis.range[0]&&Fe.a<=B.aaxis.range[1]&&Fe.b>=B.baxis.range[1]&&Fe.b<=B.baxis.range[0]&&Fe.c>=B.caxis.range[1]&&Fe.c<=B.caxis.range[0]},B.yaxis={type:"linear",range:[ie,se-ue-le],domain:[U-j/2,U+j/2],_id:"y"},t(B.yaxis,B.graphDiv._fullLayout),B.yaxis.setScale(),B.yaxis.isPtWithinRange=function(){return!0};var de=B.yaxis.domain[0],be=B.aaxis=d({},N.aaxis,{range:[ie,se-ue-le],side:"left",tickangle:(+N.aaxis.tickangle||0)-30,domain:[de,de+j*A],anchor:"free",position:0,_id:"y",_length:G});t(be,B.graphDiv._fullLayout),be.setScale();var _e=B.baxis=d({},N.baxis,{range:[se-ie-le,ue],side:"bottom",domain:B.xaxis.domain,anchor:"free",position:0,_id:"x",_length:G});t(_e,B.graphDiv._fullLayout),_e.setScale();var xe=B.caxis=d({},N.caxis,{range:[se-ie-ue,le],side:"right",tickangle:(+N.caxis.tickangle||0)+30,domain:[de,de+j*A],anchor:"free",position:0,_id:"y",_length:G});t(xe,B.graphDiv._fullLayout),xe.setScale();var Ee="M"+X+","+(J+Z)+"h"+G+"l-"+G/2+",-"+Z+"Z";B.clipDef.select("path").attr("d",Ee),B.layers.plotbg.select("path").attr("d",Ee);var he="M0,"+Z+"h"+G+"l-"+G/2+",-"+Z+"Z";B.clipDefRelative.select("path").attr("d",he);var me=e(X,J);B.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",me),B.clipDefRelative.select("path").attr("transform",null);var Se=e(X-_e._offset,J+Z);B.layers.baxis.attr("transform",Se),B.layers.bgrid.attr("transform",Se);var Me=e(X+G/2,J)+"rotate(30)"+e(0,-be._offset);B.layers.aaxis.attr("transform",Me),B.layers.agrid.attr("transform",Me);var Ie=e(X+G/2,J)+"rotate(-30)"+e(0,-xe._offset);B.layers.caxis.attr("transform",Ie),B.layers.cgrid.attr("transform",Ie),B.drawAxes(!0),B.layers.aline.select("path").attr("d",be.showline?"M"+X+","+(J+Z)+"l"+G/2+",-"+Z:"M0,0").call(r.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),B.layers.bline.select("path").attr("d",_e.showline?"M"+X+","+(J+Z)+"h"+G:"M0,0").call(r.stroke,_e.linecolor||"#000").style("stroke-width",(_e.linewidth||0)+"px"),B.layers.cline.select("path").attr("d",xe.showline?"M"+(X+G/2)+","+J+"l"+G/2+","+Z:"M0,0").call(r.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),B.graphDiv._context.staticPlot||B.initInteractions(),o.setClipUrl(B.layers.frontplot,B._hasClipOnAxisFalse?null:B.clipId,B.graphDiv)},C.drawAxes=function(N){var V=this.graphDiv,X=this.id.substr(7)+"title",J=this.layers,G=this.aaxis,Z=this.baxis,re=this.caxis;if(this.drawAx(G),this.drawAx(Z),this.drawAx(re),N){var j=Math.max(G.showticklabels?G.tickfont.size/2:0,(re.showticklabels?.75*re.tickfont.size:0)+("outside"===re.ticks?.87*re.ticklen:0)),B=(Z.showticklabels?Z.tickfont.size:0)+("outside"===Z.ticks?Z.ticklen:0)+3;J["a-title"]=u.draw(V,"a"+X,{propContainer:G,propName:this.id+".aaxis.title",placeholder:n(V,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-G.title.font.size/3-j,"text-anchor":"middle"}}),J["b-title"]=u.draw(V,"b"+X,{propContainer:Z,propName:this.id+".baxis.title",placeholder:n(V,"Click to enter Component B title"),attributes:{x:this.x0-B,y:this.y0+this.h+.83*Z.title.font.size+B,"text-anchor":"middle"}}),J["c-title"]=u.draw(V,"c"+X,{propContainer:re,propName:this.id+".caxis.title",placeholder:n(V,"Click to enter Component C title"),attributes:{x:this.x0+this.w+B,y:this.y0+this.h+.83*re.title.font.size+B,"text-anchor":"middle"}})}},C.drawAx=function(N){var V,X=this.graphDiv,J=N._name,G=J.charAt(0),Z=N._id,re=this.layers[J],j=G+"tickLayout",B=(V=N).ticks+String(V.ticklen)+String(V.showticklabels);this[j]!==B&&(re.selectAll("."+Z+"tick").remove(),this[j]=B),N.setScale();var H=i.calcTicks(N),ee=i.clipEnds(N,H),U=i.makeTransTickFn(N),$=i.getTickSigns(N)[2],q=h.deg2rad(30),te=$*(N.linewidth||1)/2,ne=$*N.ticklen,se=this.w,ie=this.h,ue="b"===G?"M0,"+te+"l"+Math.sin(q)*ne+","+Math.cos(q)*ne:"M"+te+",0l"+Math.cos(q)*ne+","+-Math.sin(q)*ne,le={a:"M0,0l"+ie+",-"+se/2,b:"M0,0l-"+se/2+",-"+ie,c:"M0,0l-"+ie+","+se/2}[G];i.drawTicks(X,N,{vals:"inside"===N.ticks?ee:H,layer:re,path:ue,transFn:U,crisp:!1}),i.drawGrid(X,N,{vals:ee,layer:this.layers[G+"grid"],path:le,transFn:U,crisp:!1}),i.drawLabels(X,N,{vals:H,layer:re,transFn:U,labelFns:i.makeLabelFns(N,0,30)})};var O=k.MINZOOM/2+.87,P="m-0.87,.5h"+O+"v3h-"+(O+5.2)+"l"+(O/2+2.6)+",-"+(.87*O+4.5)+"l2.6,1.5l-"+O/2+","+.87*O+"Z",S="m0.87,.5h-"+O+"v3h"+(O+5.2)+"l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-2.6,1.5l"+O/2+","+.87*O+"Z",E="m0,1l"+O/2+","+.87*O+"l2.6,-1.5l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-"+(O/2+2.6)+","+(.87*O+4.5)+"l2.6,1.5l"+O/2+",-"+.87*O+"Z",D=!0;function z(N){m.select(N).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}C.clearOutline=function(){_(this.dragOptions),T(this.dragOptions.gd)},C.initInteractions=function(){var N,V,X,J,G,Z,re,j,B,H,ee,U,$=this,q=$.layers.plotbg.select("path").node(),te=$.graphDiv,ne=te._fullLayout._zoomlayer;function se(he){var me={};return me[$.id+".aaxis.min"]=he.a,me[$.id+".baxis.min"]=he.b,me[$.id+".caxis.min"]=he.c,me}function ie(he,me){var Se=te._fullLayout.clickmode;z(te),2===he&&(te.emit("plotly_doubleclick",null),b.call("_guiRelayout",te,se({a:0,b:0,c:0}))),Se.indexOf("select")>-1&&1===he&&f(me,te,[$.xaxis],[$.yaxis],$.id,$.dragOptions),Se.indexOf("event")>-1&&c.click(te,me,$.id)}function ue(he,me){return 1-me/$.h}function le(he,me){return 1-(he+($.h-me)/Math.sqrt(3))/$.w}function de(he,me){return(he-($.h-me)/Math.sqrt(3))/$.w}function be(he,me){var Se=X+he*N,Me=J+me*V,Ie=Math.max(0,Math.min(1,ue(0,J),ue(0,Me))),Fe=Math.max(0,Math.min(1,le(X,J),le(Se,Me))),Ne=Math.max(0,Math.min(1,de(X,J),de(Se,Me))),De=(Ie/2+Ne)*$.w,$e=(1-Ie/2-Fe)*$.w,Re=(De+$e)/2,ze=$e-De,Ue=(1-Ie)*$.h,je=Ue-ze/A;ze<k.MINZOOM?(re=G,ee.attr("d",B),U.attr("d","M0,0Z")):(re={a:G.a+Ie*Z,b:G.b+Fe*Z,c:G.c+Ne*Z},ee.attr("d",B+"M"+De+","+Ue+"H"+$e+"L"+Re+","+je+"L"+De+","+Ue+"Z"),U.attr("d","M"+X+","+J+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+De+","+Ue+P+"M"+$e+","+Ue+S+"M"+Re+","+je+E)),H||(ee.transition().style("fill",j>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),U.transition().style("opacity",1).duration(200),H=!0),te.emit("plotly_relayouting",se(re))}function _e(){z(te),re!==G&&(b.call("_guiRelayout",te,se(re)),D&&te.data&&te._context.showTips&&(h.notifier(n(te,"Double-click to zoom back out"),"long"),D=!1))}function xe(he,me){var Se=he/$.xaxis._m,Me=me/$.yaxis._m,Ie=[(re={a:G.a-Me,b:G.b+(Se+Me)/2,c:G.c-(Se-Me)/2}).a,re.b,re.c].sort(h.sorterAsc),Fe=Ie.indexOf(re.a),Ne=Ie.indexOf(re.b),De=Ie.indexOf(re.c);Ie[0]<0&&(Ie[1]+Ie[0]/2<0?(Ie[2]+=Ie[0]+Ie[1],Ie[0]=Ie[1]=0):(Ie[2]+=Ie[0]/2,Ie[1]+=Ie[0]/2,Ie[0]=0),me=(G.a-(re={a:Ie[Fe],b:Ie[Ne],c:Ie[De]}).a)*$.yaxis._m,he=(G.c-re.c-G.b+re.b)*$.xaxis._m);var $e=e($.x0+he,$.y0+me);$.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",$e);var Re=e(-he,-me);$.clipDefRelative.select("path").attr("transform",Re),$.aaxis.range=[re.a,$.sum-re.b-re.c],$.baxis.range=[$.sum-re.a-re.c,re.b],$.caxis.range=[$.sum-re.a-re.b,re.c],$.drawAxes(!1),$._hasClipOnAxisFalse&&$.plotContainer.select(".scatterlayer").selectAll(".trace").call(o.hideOutsideRangePoints,$),te.emit("plotly_relayouting",se(re))}function Ee(){b.call("_guiRelayout",te,se(re))}this.dragOptions={element:q,gd:te,plotinfo:{id:$.id,domain:te._fullLayout[$.id].domain,xaxis:$.xaxis,yaxis:$.yaxis},subplot:$.id,prepFn:function(he,me,Se){$.dragOptions.xaxes=[$.xaxis],$.dragOptions.yaxes=[$.yaxis],N=te._fullLayout._invScaleX,V=te._fullLayout._invScaleY;var Me=$.dragOptions.dragmode=te._fullLayout.dragmode;$.dragOptions.minDrag=p(Me)?1:void 0,"zoom"===Me?($.dragOptions.moveFn=be,$.dragOptions.clickFn=ie,$.dragOptions.doneFn=_e,function(Ie,Fe,Ne){var De=q.getBoundingClientRect();X=Fe-De.left,J=Ne-De.top,te._fullLayout._calcInverseTransform(te);var Re=h.apply3DTransform(te._fullLayout._invTransform)(X,J);X=Re[0],J=Re[1],re=G={a:$.aaxis.range[0],b:$.baxis.range[1],c:$.caxis.range[1]},Z=$.aaxis.range[1]-G.a,j=v($.graphDiv._fullLayout[$.id].bgcolor).getLuminance(),B="M0,"+$.h+"L"+$.w/2+", 0L"+$.w+","+$.h+"Z",H=!1,ee=ne.append("path").attr("class","zoombox").attr("transform",e($.x0,$.y0)).style({fill:j>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",B),U=ne.append("path").attr("class","zoombox-corners").attr("transform",e($.x0,$.y0)).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),$.clearOutline(te)}(0,me,Se)):"pan"===Me?($.dragOptions.moveFn=xe,$.dragOptions.clickFn=ie,$.dragOptions.doneFn=Ee,re=G={a:$.aaxis.range[0],b:$.baxis.range[1],c:$.caxis.range[1]},$.clearOutline(te)):(g(Me)||p(Me))&&x(he,me,Se,$.dragOptions,Me)}},q.onmousemove=function(he){c.hover(te,he,$.id),te._fullLayout._lasthover=q,te._fullLayout._hoversubplot=$.id},q.onmouseout=function(he){te._dragging||s.unhover(te,he)},s.init(this.dragOptions)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(y,Q,K){"use strict";var m=y("./lib/loggers"),v=y("./lib/noop"),b=y("./lib/push_unique"),h=y("./lib/is_plain_object"),e=y("./lib/dom").addStyleRule,n=y("./lib/extend"),r=y("./plots/attributes"),o=y("./plots/layout_attributes"),t=n.extendFlat,d=n.extendDeepAll;function a(f){var T=f.name,_=f.categories,k=f.meta;if(K.modules[T])m.log("Type "+T+" already registered");else{K.subplotsRegistry[f.basePlotModule.name]||function(D){var z=D.name;if(K.subplotsRegistry[z])m.log("Plot type "+z+" already registered.");else for(var N in l(D),K.subplotsRegistry[z]=D,K.componentsRegistry)u(N,D.name)}(f.basePlotModule);for(var w={},C=0;C<_.length;C++)w[_[C]]=!0,K.allCategories[_[C]]=!0;for(var A in K.modules[T]={_module:f,categories:w},k&&Object.keys(k).length&&(K.modules[T].meta=k),K.allTypes.push(T),K.componentsRegistry)p(A,T);f.layoutAttributes&&t(K.traceLayoutAttributes,f.layoutAttributes);var O=f.basePlotModule,P=O.name;if("mapbox"===P){var S=O.constants.styleRules;for(var E in S)e(".js-plotly-plot .plotly .mapboxgl-"+E,S[E])}"geo"!==P&&"mapbox"!==P||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function i(f){if("string"!=typeof f.name)throw new Error("Component module *name* must be a string.");var T=f.name;for(var _ in K.componentsRegistry[T]=f,f.layoutAttributes&&(f.layoutAttributes._isLinkedToArray&&b(K.layoutArrayContainers,T),l(f)),K.modules)p(T,_);for(var k in K.subplotsRegistry)u(T,k);for(var w in K.transformsRegistry)g(T,w);f.schema&&f.schema.layout&&d(o,f.schema.layout)}function s(f){if("string"!=typeof f.name)throw new Error("Transform module *name* must be a string.");var T="Transform module "+f.name,_="function"==typeof f.transform,k="function"==typeof f.calcTransform;if(!_&&!k)throw new Error(T+" is missing a *transform* or *calcTransform* method.");for(var w in _&&k&&m.log([T+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),h(f.attributes)||m.log(T+" registered without an *attributes* object."),"function"!=typeof f.supplyDefaults&&m.log(T+" registered without a *supplyDefaults* method."),K.transformsRegistry[f.name]=f,K.componentsRegistry)g(w,f.name)}function c(f){var T=f.name,_=T.split("-")[0],k=f.dictionary,w=f.format,C=k&&Object.keys(k).length,A=w&&Object.keys(w).length,O=K.localeRegistry,P=O[T];if(P||(O[T]=P={}),_!==T){var S=O[_];S||(O[_]=S={}),C&&S.dictionary===P.dictionary&&(S.dictionary=k),A&&S.format===P.format&&(S.format=w)}C&&(P.dictionary=k),A&&(P.format=w)}function l(f){if(f.layoutAttributes){var T=f.layoutAttributes._arrayAttrRegexps;if(T)for(var _=0;_<T.length;_++)b(K.layoutArrayRegexes,T[_])}}function p(f,T){var _=K.componentsRegistry[f].schema;if(_&&_.traces){var k=_.traces[T];k&&d(K.modules[T]._module.attributes,k)}}function g(f,T){var _=K.componentsRegistry[f].schema;if(_&&_.transforms){var k=_.transforms[T];k&&d(K.transformsRegistry[T].attributes,k)}}function u(f,T){var _=K.componentsRegistry[f].schema;if(_&&_.subplots){var k=K.subplotsRegistry[T],w=k.layoutAttributes,C="subplot"===k.attr?k.name:k.attr;Array.isArray(C)&&(C=C[0]);var A=_.subplots[C];w&&A&&d(w,A)}}function x(f){return"object"==typeof f&&(f=f.type),f}K.modules={},K.allCategories={},K.allTypes=[],K.subplotsRegistry={},K.transformsRegistry={},K.componentsRegistry={},K.layoutArrayContainers=[],K.layoutArrayRegexes=[],K.traceLayoutAttributes={},K.localeRegistry={},K.apiMethodRegistry={},K.collectableSubplotTypes=null,K.register=function(f){if(K.collectableSubplotTypes=null,!f)throw new Error("No argument passed to Plotly.register.");f&&!Array.isArray(f)&&(f=[f]);for(var T=0;T<f.length;T++){var _=f[T];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":a(_);break;case"transform":s(_);break;case"component":i(_);break;case"locale":c(_);break;case"apiMethod":K.apiMethodRegistry[_.name]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},K.getModule=function(f){var T=K.modules[x(f)];return!!T&&T._module},K.traceIs=function(f,T){if("various"===(f=x(f)))return!1;var _=K.modules[f];return _||(f&&m.log("Unrecognized trace type "+f+"."),_=K.modules[r.type.dflt]),!!_.categories[T]},K.getTransformIndices=function(f,T){for(var _=[],k=f.transforms||[],w=0;w<k.length;w++)k[w].type===T&&_.push(w);return _},K.hasTransform=function(f,T){for(var _=f.transforms||[],k=0;k<_.length;k++)if(_[k].type===T)return!0;return!1},K.getComponentMethod=function(f,T){var _=K.componentsRegistry[f];return _&&_[T]||v},K.call=function(){var f=arguments[0],T=[].slice.call(arguments,1);return K.apiMethodRegistry[f].apply(null,T)}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(y,Q,K){"use strict";var m=y("../registry"),v=y("../lib"),b=v.extendFlat,h=v.extendDeep;function e(n){var r;switch(n){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}Q.exports=function(n,r){var o,a=n.layout,i=h([],n.data),s=h({},a,e(r.tileClass)),c=n._context||{};if(r.width&&(s.width=r.width),r.height&&(s.height=r.height),"thumbnail"===r.tileClass||"themes__thumb"===r.tileClass){s.annotations=[];var l=Object.keys(s);for(o=0;o<l.length;o++)["xaxis","yaxis","zaxis"].indexOf(l[o].slice(0,5))>-1&&(s[l[o]].title={text:""});for(o=0;o<i.length;o++){var p=i[o];p.showscale=!1,p.marker&&(p.marker.showscale=!1),m.traceIs(p,"pie-like")&&(p.textposition="none")}}if(Array.isArray(r.annotations))for(o=0;o<r.annotations.length;o++)s.annotations.push(r.annotations[o]);var g=Object.keys(s).filter(function(_){return _.match(/^scene\d*$/)});if(g.length){var u={};for("thumbnail"===r.tileClass&&(u={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),o=0;o<g.length;o++){var x=s[g[o]];x.xaxis||(x.xaxis={}),x.yaxis||(x.yaxis={}),x.zaxis||(x.zaxis={}),b(x.xaxis,u),b(x.yaxis,u),b(x.zaxis,u),x._scene=null}}var f=document.createElement("div");r.tileClass&&(f.className=r.tileClass);var T={gd:f,td:f,layout:s,data:i,config:{staticPlot:void 0===r.staticPlot||r.staticPlot,plotGlPixelRatio:void 0===r.plotGlPixelRatio?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return"transparent"!==r.setBackground&&(T.config.setBackground=r.setBackground||"opaque"),T.gd.defaultLayout=e(r.tileClass),T}},{"../lib":515,"../registry":647}],649:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("../plot_api/to_image"),b=y("./filesaver"),h=y("./helpers");Q.exports=function(e,n){var r;return m.isPlainObject(e)||(r=m.getGraphDiv(e)),(n=n||{}).format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(o,t){r&&r._snapshotInProgress&&t(new Error("Snapshotting already in progress.")),m.isIE()&&"svg"!==n.format&&t(new Error(h.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var d=v(e,n),a=n.filename||e.fn||"newplot";a+="."+n.format.replace("-","."),d.then(function(i){return r&&(r._snapshotInProgress=!1),b(i,a,n.format)}).then(function(i){o(i)}).catch(function(i){r&&(r._snapshotInProgress=!1),t(i)})})}},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("./helpers");Q.exports=function(b,h,e){var n=document.createElement("a"),r="download"in n;return new Promise(function(o,t){var d,a;return m.isIE()?(d=v.createBlob(b,"svg"),window.navigator.msSaveBlob(d,h),d=null,o(h)):r?(d=v.createBlob(b,e),a=v.createObjectURL(d),n.href=a,n.download=h,document.body.appendChild(n),n.click(),document.body.removeChild(n),v.revokeObjectURL(a),d=null,o(h)):m.isSafari()?(v.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(b)),o(h)):void t(new Error("download error"))})}},{"../lib":515,"./helpers":651}],651:[function(y,Q,K){"use strict";var m=y("../registry");K.getDelay=function(b){return b._has&&(b._has("gl3d")||b._has("gl2d")||b._has("mapbox"))?500:0},K.getRedrawFunc=function(b){return function(){m.getComponentMethod("colorbar","draw")(b)}},K.encodeSVG=function(b){return"data:image/svg+xml,"+encodeURIComponent(b)},K.encodeJSON=function(b){return"data:application/json,"+encodeURIComponent(b)};var v=window.URL||window.webkitURL;K.createObjectURL=function(b){return v.createObjectURL(b)},K.revokeObjectURL=function(b){return v.revokeObjectURL(b)},K.createBlob=function(b,h){if("svg"===h)return new window.Blob([b],{type:"image/svg+xml;charset=utf-8"});if("full-json"===h)return new window.Blob([b],{type:"application/json;charset=utf-8"});var e=function(n){for(var r=n.length,o=new ArrayBuffer(r),t=new Uint8Array(o),d=0;d<r;d++)t[d]=n.charCodeAt(d);return o}(window.atob(b));return new window.Blob([e],{type:"image/"+h})},K.octetStream=function(b){document.location.href="data:application/octet-stream"+b},K.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,K.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(y,Q,K){"use strict";var m=y("./helpers"),v={getDelay:m.getDelay,getRedrawFunc:m.getRedrawFunc,clone:y("./cloneplot"),toSVG:y("./tosvg"),svgToImg:y("./svgtoimg"),toImage:y("./toimage"),downloadImage:y("./download")};Q.exports=v},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("events").EventEmitter,b=y("./helpers");Q.exports=function(h){var e=h.emitter||new v,n=new Promise(function(r,o){var t=window.Image,d=h.svg,a=h.format||"png";if(m.isIE()&&"svg"!==a){var i=new Error(b.MSG_IE_BAD_FORMAT);return o(i),h.promise?n:e.emit("error",i)}var s,c,l=h.canvas,p=h.scale||1,x=p*(h.width||300),f=p*(h.height||150),T=l.getContext("2d",{willReadFrequently:!0}),_=new t;"svg"===a||m.isSafari()?c=b.encodeSVG(d):(s=b.createBlob(d,"svg"),c=b.createObjectURL(s)),l.width=x,l.height=f,_.onload=function(){var k;switch(s=null,b.revokeObjectURL(c),"svg"!==a&&T.drawImage(_,0,0,x,f),a){case"jpeg":k=l.toDataURL("image/jpeg");break;case"png":k=l.toDataURL("image/png");break;case"webp":k=l.toDataURL("image/webp");break;case"svg":k=c;break;default:var w="Image format is not jpeg, png, svg or webp.";if(o(new Error(w)),!h.promise)return e.emit("error",w)}r(k),h.promise||e.emit("success",k)},_.onerror=function(k){if(s=null,b.revokeObjectURL(c),o(k),!h.promise)return e.emit("error",k)},_.src=c});return h.promise?n:e}},{"../lib":515,"./helpers":651,events:84}],654:[function(y,Q,K){"use strict";var m=y("events").EventEmitter,v=y("../registry"),b=y("../lib"),h=y("./helpers"),e=y("./cloneplot"),n=y("./tosvg"),r=y("./svgtoimg");Q.exports=function(o,t){var d=new m,a=e(o,{format:"png"}),i=a.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var s=h.getRedrawFunc(i);return v.call("_doPlot",i,a.data,a.layout,a.config).then(s).then(function(){var c=h.getDelay(i._fullLayout);setTimeout(function(){var l=n(i),p=document.createElement("canvas");p.id=b.randstr(),(d=r({format:t.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:p,emitter:d,svg:l})).clean=function(){i&&document.body.removeChild(i)}},c)}).catch(function(c){d.emit("error",c)}),d}},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../lib"),b=y("../components/drawing"),h=y("../components/color"),e=y("../constants/xmlns_namespaces"),n=/"/g,r=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");Q.exports=function(o,t,d){var a,i=o._fullLayout,s=i._paper,c=i._toppaper,l=i.width,p=i.height;s.insert("rect",":first-child").call(b.setRect,0,0,l,p).call(h.fill,i.paper_bgcolor);var g=i._basePlotModules||[];for(a=0;a<g.length;a++){var u=g[a];u.toSVG&&u.toSVG(o)}if(c){var x=c.node().childNodes,f=Array.prototype.slice.call(x);for(a=0;a<f.length;a++){var T=f[a];T.childNodes.length&&s.node().appendChild(T)}}i._draggers&&i._draggers.remove(),s.node().style.background="",s.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var k=m.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){k.style({visibility:null,display:null});var w=this.style.fontFamily;w&&-1!==w.indexOf('"')&&k.style("font-family",w.replace(n,"TOBESTRIPPED"))}else k.remove()}),s.selectAll(".gradient_filled,.pattern_filled").each(function(){var k=m.select(this),w=this.style.fill;w&&-1!==w.indexOf("url(")&&k.style("fill",w.replace(n,"TOBESTRIPPED"));var C=this.style.stroke;C&&-1!==C.indexOf("url(")&&k.style("stroke",C.replace(n,"TOBESTRIPPED"))}),"pdf"!==t&&"eps"!==t||s.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),s.node().setAttributeNS(e.xmlns,"xmlns",e.svg),s.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===t&&d&&(s.attr("width",d*l),s.attr("height",d*p),s.attr("viewBox","0 0 "+l+" "+p));var k,w,C,_=(new window.XMLSerializer).serializeToString(s.node());return k=_,w=m.select("body").append("div").style({display:"none"}).html(""),C=k.replace(/(&[^;]*;)/gi,function(A){return"&lt;"===A?"&#60;":"&rt;"===A?"&#62;":-1!==A.indexOf("<")||-1!==A.indexOf(">")?"":w.html(A).text()}),w.remove(),_=(_=(_=C).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(r,"'"),v.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b){for(var h=0;h<v.length;h++)v[h].i=h;m.mergeArray(b.text,v,"tx"),m.mergeArray(b.hovertext,v,"htx");var e=b.marker;if(e){m.mergeArray(e.opacity,v,"mo",!0),m.mergeArray(e.color,v,"mc");var n=e.line;n&&(m.mergeArray(n.color,v,"mlc"),m.mergeArrayCastPositive(n.width,v,"mlw"))}}},{"../../lib":515}],657:[function(y,Q,K){"use strict";var m=y("../scatter/attributes"),v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,h=y("../../plots/template_attributes").texttemplateAttrs,e=y("../../components/colorscale/attributes"),n=y("../../plots/font_attributes"),r=y("./constants"),o=y("../../components/drawing/attributes").pattern,t=y("../../lib/extend").extendFlat,d=n({editType:"calc",arrayOk:!0,colorEditType:"style"}),a=t({},m.marker.line.width,{dflt:0}),i=t({width:a,editType:"calc"},e("marker.line")),s=t({line:i,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:o});Q.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),text:m.text,texttemplate:h({editType:"plot"},{keys:r.eventDataKeys}),hovertext:m.hovertext,hovertemplate:b({},{keys:r.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:t({},d,{}),insidetextfont:t({},d,{}),outsidetextfont:t({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:t({},m.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:s,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,color:m.selected.marker.color,editType:"style"},textfont:m.selected.textfont,editType:"style"},unselected:{marker:{opacity:m.unselected.marker.opacity,color:m.unselected.marker.color,editType:"style"},textfont:m.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../plots/cartesian/align_period"),b=y("../../components/colorscale/helpers").hasColorscale,h=y("../../components/colorscale/calc"),e=y("./arrays_to_calcdata"),n=y("../scatter/calc_selection");Q.exports=function(r,o){var t,d,a,i,s,c,l=m.getFromId(r,o.xaxis||"x"),p=m.getFromId(r,o.yaxis||"y"),g={msUTC:!(!o.base&&0!==o.base)};"h"===o.orientation?(t=l.makeCalcdata(o,"x",g),a=p.makeCalcdata(o,"y"),i=v(o,p,"y",a),s=!!o.yperiodalignment,c="y"):(t=p.makeCalcdata(o,"y",g),a=l.makeCalcdata(o,"x"),i=v(o,l,"x",a),s=!!o.xperiodalignment,c="x"),d=i.vals;for(var u=Math.min(d.length,t.length),x=new Array(u),f=0;f<u;f++)x[f]={p:d[f],s:t[f]},s&&(x[f].orig_p=a[f],x[f][c+"End"]=i.ends[f],x[f][c+"Start"]=i.starts[f]),o.ids&&(x[f].id=String(o.ids[f]));return b(o,"marker")&&h(r,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),b(o,"marker.line")&&h(r,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(x,o),n(x,o),x}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(y,Q,K){"use strict";Q.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib").isArrayOrTypedArray,b=y("../../constants/numerical").BADNUM,h=y("../../registry"),e=y("../../plots/cartesian/axes"),n=y("../../plots/cartesian/constraints").getAxisGroup,r=y("./sieve.js");function o(u,x,f,T,_){if(T.length){var k,w,C,A;switch(function(O,P){var S,E;for(S=0;S<P.length;S++){var D,z=P[S],N=z[0].trace,V="funnel"===N.type?N._base:N.base,X="h"===N.orientation?N.xcalendar:N.ycalendar,J="category"===O.type||"multicategory"===O.type?function(){return null}:O.d2c;if(v(V)){for(E=0;E<Math.min(V.length,z.length);E++)D=J(V[E],0,X),m(D)?(z[E].b=+D,z[E].hasB=1):z[E].b=0;for(;E<z.length;E++)z[E].b=0}else{D=J(V,0,X);var G=m(D);for(D=G?D:0,E=0;E<z.length;E++)z[E].b=D,G&&(z[E].hasB=1)}}}(f,T),_.mode){case"overlay":t(x,f,T,_);break;case"group":for(k=[],w=[],C=0;C<T.length;C++)void 0===(A=T[C])[0].trace.offset?w.push(A):k.push(A);w.length&&(O=u,S=f,z=new r(w,{posAxis:P=x,sepNegVal:!1,overlapNoMerge:!(D=_).norm}),function(N,V,X,J){for(var G=N._fullLayout,j=X.minDiff,B=X.traces,H=B.length,ee=X.positions.length!==X.distinctPositions.length,U=j*(1-J.gap),$=n(G,V._id)+B[0][0].trace.orientation,q=G._alignmentOpts[$]||{},te=0;te<H;te++){var ne,se,ie=B[te],ue=ie[0].trace,de=Object.keys((q[ue.alignmentgroup]||{}).offsetGroups||{}).length,be=(ne=de?U/de:ee?U/H:U)*(1-(J.groupgap||0));se=de?((2*ue._offsetIndex+1-de)*ne-be)/2:ee?((2*te+1-H)*ne-be)/2:-be/2;var _e=ie[0].t;_e.barwidth=be,_e.poffset=se,_e.bargroupwidth=U,_e.bardelta=j}X.binWidth=B[0][0].t.barwidth/100,a(X),i(V,X),s(V,X,ee)}(O,P,z,D),function(N,V){for(var X=N.traces,J=0;J<X.length;J++){var G=X[J];if(void 0===G[0].trace.base)for(var Z=new r([G],{posAxis:V,sepNegVal:!0,overlapNoMerge:!0}),re=0;re<G.length;re++){var j=G[re];if(j.p!==b){var B=Z.put(j.p,j.b+j.s);B&&(j.b=B)}}}}(z,P),D.norm?(l(z),p(S,z,D)):c(S,z)),k.length&&t(x,f,k,_);break;case"stack":case"relative":for(k=[],w=[],C=0;C<T.length;C++)void 0===(A=T[C])[0].trace.base?w.push(A):k.push(A);w.length&&function(O,P,S,E,D){var z=new r(E,{posAxis:P,sepNegVal:"relative"===D.mode,overlapNoMerge:!(D.norm||"stack"===D.mode||"relative"===D.mode)});d(P,z,D),function(G,Z,re){var j,B,H,ee,U,$,q=g(G),te=Z.traces;for(ee=0;ee<te.length;ee++)if("funnel"===(B=(j=te[ee])[0].trace).type)for(U=0;U<j.length;U++)($=j[U]).s!==b&&Z.put($.p,-.5*$.s);for(ee=0;ee<te.length;ee++){H="funnel"===(B=(j=te[ee])[0].trace).type;var ne=[];for(U=0;U<j.length;U++)if(($=j[U]).s!==b){var se,ie=Z.put($.p,se=H?$.s:$.s+$.b),ue=ie+se;$.b=ie,$[q]=ue,re.norm||(ne.push(ue),$.hasB&&ne.push(ie))}re.norm||(B._extremes[G._id]=e.findExtremes(G,ne,{tozero:!0,padded:!0}))}}(S,z,D);for(var N=0;N<E.length;N++)for(var V=E[N],X=0;X<V.length;X++){var J=V[X];J.s!==b&&J.b+J.s===z.get(J.p,J.s)&&(J._outmost=!0)}D.norm&&p(S,z,D)}(0,x,f,w,_),k.length&&t(x,f,k,_)}!function(O,P){var S,E,D,z=g(P),N={},V=1/0,X=-1/0;for(S=0;S<O.length;S++)for(D=O[S],E=0;E<D.length;E++){var J=D[E].p;m(J)&&(V=Math.min(V,J),X=Math.max(X,J))}var G=1e4/(X-V),Z=N.round=function($){return String(Math.round(G*($-V)))};for(S=0;S<O.length;S++){(D=O[S])[0].t.extents=N;var re=D[0].t.poffset,j=Array.isArray(re);for(E=0;E<D.length;E++){var B=D[E],H=B[z]-B.w/2;if(m(H)){var ee=B[z]+B.w/2,U=Z(B.p);N[U]=N[U]?[Math.min(H,N[U][0]),Math.max(ee,N[U][1])]:[H,ee]}B.p0=B.p+(j?re[E]:re),B.p1=B.p0+B.w,B.s0=B.b,B.s1=B.s0+B.s}}}(T,x)}var O,P,S,D,z}function t(u,x,f,T){for(var _=0;_<f.length;_++){var w=new r([f[_]],{posAxis:u,sepNegVal:!1,overlapNoMerge:!T.norm});d(u,w,T),T.norm?(l(w),p(x,w,T)):c(x,w)}}function d(u,x,f){for(var T=x.minDiff,_=x.traces,k=T*(1-f.gap),w=k*(1-(f.groupgap||0)),C=-w/2,A=0;A<_.length;A++){var O=_[A][0].t;O.barwidth=w,O.poffset=C,O.bargroupwidth=k,O.bardelta=T}x.binWidth=_[0][0].t.barwidth/100,a(x),i(u,x),s(u,x)}function a(u){var x,f,T=u.traces;for(x=0;x<T.length;x++){var _,k=T[x],w=k[0],C=w.trace,A=w.t,O=C._offset||C.offset,P=A.poffset;if(v(O)){for(_=Array.prototype.slice.call(O,0,k.length),f=0;f<_.length;f++)m(_[f])||(_[f]=P);for(f=_.length;f<k.length;f++)_.push(P);A.poffset=_}else void 0!==O&&(A.poffset=O);var S=C._width||C.width,E=A.barwidth;if(v(S)){var D=Array.prototype.slice.call(S,0,k.length);for(f=0;f<D.length;f++)m(D[f])||(D[f]=E);for(f=D.length;f<k.length;f++)D.push(E);if(A.barwidth=D,void 0===O){for(_=[],f=0;f<k.length;f++)_.push(P+(E-D[f])/2);A.poffset=_}}else void 0!==S&&(A.barwidth=S,void 0===O&&(A.poffset=P+(E-S)/2))}}function i(u,x){for(var f=x.traces,T=g(u),_=0;_<f.length;_++)for(var k=f[_],w=k[0].t,C=w.poffset,A=Array.isArray(C),O=w.barwidth,P=Array.isArray(O),S=0;S<k.length;S++){var E=k[S],D=E.w=P?O[S]:O;E[T]=E.p+(A?C[S]:C)+D/2}}function s(u,x,f){var T=x.traces,_=x.minDiff/2;e.minDtick(u,x.minDiff,x.distinctPositions[0],f);for(var k=0;k<T.length;k++){var w,C,A,O,P=T[k],S=P[0],E=S.trace,D=[];for(O=0;O<P.length;O++)C=(w=P[O]).p-_,D.push(C,A=w.p+_);if(E.width||E.offset){var z=S.t,N=z.poffset,V=z.barwidth,X=Array.isArray(N),J=Array.isArray(V);for(O=0;O<P.length;O++)A=(C=(w=P[O]).p+(X?N[O]:N))+(J?V[O]:V),D.push(C,A)}E._extremes[u._id]=e.findExtremes(u,D,{padded:!1})}}function c(u,x){for(var f=x.traces,T=g(u),_=0;_<f.length;_++){for(var k=f[_],w=k[0].trace,C=[],A=!1,O=0;O<k.length;O++){var P=k[O],S=P.b,E=S+P.s;P[T]=E,C.push(E),P.hasB&&C.push(S),P.hasB&&P.b||(A=!0)}w._extremes[u._id]=e.findExtremes(u,C,{tozero:A,padded:!0})}}function l(u){for(var x=u.traces,f=0;f<x.length;f++)for(var T=x[f],_=0;_<T.length;_++){var k=T[_];k.s!==b&&u.put(k.p,k.b+k.s)}}function p(u,x,f){var T=x.traces,_=g(u),k="fraction"===f.norm?1:100,w=k/1e9,C=u.l2c(u.c2l(0)),A="stack"===f.mode?k:C;function O(re){return m(u.c2l(re))&&(re<C-w||re>A+w||!m(C))}for(var P=0;P<T.length;P++){for(var S=T[P],E=S[0].trace,D=[],z=!1,N=!1,V=0;V<S.length;V++){var X=S[V];if(X.s!==b){var J=Math.abs(k/x.get(X.p,X.s));X.b*=J,X.s*=J;var G=X.b,Z=G+X.s;X[_]=Z,D.push(Z),N=N||O(Z),X.hasB&&(D.push(G),N=N||O(G)),X.hasB&&X.b||(z=!0)}}E._extremes[u._id]=e.findExtremes(u,D,{tozero:z,padded:N})}}function g(u){return u._id.charAt(0)}Q.exports={crossTraceCalc:function(u,x){for(var f=x.xaxis,T=x.yaxis,_=u._fullLayout,k=u._fullData,w=u.calcdata,C=[],A=[],O=0;O<k.length;O++){var P=k[O];if(!0===P.visible&&h.traceIs(P,"bar")&&P.xaxis===f._id&&P.yaxis===T._id&&("h"===P.orientation?C.push(w[O]):A.push(w[O]),P._computePh))for(var S=u.calcdata[O],E=0;E<S.length;E++)"function"==typeof S[E].ph0&&(S[E].ph0=S[E].ph0()),"function"==typeof S[E].ph1&&(S[E].ph1=S[E].ph1())}var D={xCat:"category"===f.type||"multicategory"===f.type,yCat:"category"===T.type||"multicategory"===T.type,mode:_.barmode,norm:_.barnorm,gap:_.bargap,groupgap:_.bargroupgap};o(u,f,T,A,D),o(u,T,f,C,D)},setGroupPositions:o}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/color"),b=y("../../registry"),h=y("../scatter/xy_defaults"),e=y("../scatter/period_defaults"),n=y("./style_defaults"),r=y("../../plots/cartesian/constraints").getAxisGroup,o=y("./attributes"),t=m.coerceFont;function d(i,s,c,l){var p=s.orientation,u=r(c,s[{v:"x",h:"y"}[p]+"axis"])+p,x=c._alignmentOpts||{},f=l("alignmentgroup"),T=x[u];T||(T=x[u]={});var _=T[f];_?_.traces.push(s):_=T[f]={traces:[s],alignmentIndex:Object.keys(T).length,offsetGroups:{}};var k=l("offsetgroup"),w=_.offsetGroups,C=w[k];k&&(C||(C=w[k]={offsetIndex:Object.keys(w).length}),s._offsetIndex=C.offsetIndex)}function a(i,s,c,l,p,g){var u=!1!==(g=g||{}).moduleHasSelected,x=!1!==g.moduleHasUnselected,f=!1!==g.moduleHasConstrain,T=!1!==g.moduleHasCliponaxis,_=!1!==g.moduleHasTextangle,k=!1!==g.moduleHasInsideanchor,w=!!g.hasPathbar,C=Array.isArray(p)||"auto"===p,A=C||"inside"===p,O=C||"outside"===p;if(A||O){var P=t(l,"textfont",c.font),S=m.extendFlat({},P),E=!(i.textfont&&i.textfont.color);if(E&&delete S.color,t(l,"insidetextfont",S),w){var D=m.extendFlat({},P);E&&delete D.color,t(l,"pathbar.textfont",D)}O&&t(l,"outsidetextfont",P),u&&l("selected.textfont.color"),x&&l("unselected.textfont.color"),f&&l("constraintext"),T&&l("cliponaxis"),_&&l("textangle"),l("texttemplate")}A&&k&&l("insidetextanchor")}Q.exports={supplyDefaults:function(i,s,c,l){function p(f,T){return m.coerce(i,s,o,f,T)}if(h(i,s,l,p)){e(i,s,l,p),p("xhoverformat"),p("yhoverformat"),p("orientation",s.x&&!s.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var g=p("textposition");a(i,0,l,p,g,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n(i,s,p,c,l);var u=(s.marker.line||{}).color,x=b.getComponentMethod("errorbars","supplyDefaults");x(i,s,u||v.defaultLine,{axis:"y"}),x(i,s,u||v.defaultLine,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(s,p)}else s.visible=!1},crossTraceDefaults:function(i,s){var c;function l(g){return m.coerce(c._input,c,o,g)}if("group"===s.barmode)for(var p=0;p<i.length;p++)"bar"===(c=i[p]).type&&d(0,c,s,l)},handleGroupingDefaults:d,handleText:a}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(y,Q,K){"use strict";Q.exports=function(m,v,b){return m.x="xVal"in v?v.xVal:v.x,m.y="yVal"in v?v.yVal:v.y,v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),"h"===b.orientation?(m.label=m.y,m.value=m.x):(m.label=m.x,m.value=m.y),m}},{}],663:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("tinycolor2"),b=y("../../lib").isArrayOrTypedArray;K.coerceString=function(h,e,n){if("string"==typeof e){if(e||!h.noBlank)return e}else if(("number"==typeof e||!0===e)&&!h.strict)return String(e);return void 0!==n?n:h.dflt},K.coerceNumber=function(h,e,n){if(m(e)){e=+e;var r=h.min,o=h.max;if(!(void 0!==r&&e<r||void 0!==o&&e>o))return e}return void 0!==n?n:h.dflt},K.coerceColor=function(h,e,n){return v(e).isValid()?e:void 0!==n?n:h.dflt},K.coerceEnumerated=function(h,e,n){return h.coerceNumber&&(e=+e),-1!==h.values.indexOf(e)?e:void 0!==n?n:h.dflt},K.getValue=function(h,e){var n;return Array.isArray(h)?e<h.length&&(n=h[e]):n=h,n},K.getLineWidth=function(h,e){return 0<e.mlw?e.mlw:b(h.marker.line.width)?0:h.marker.line.width}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(y,Q,K){"use strict";var m=y("../../components/fx"),v=y("../../registry"),b=y("../../components/color"),h=y("../../lib").fillText,e=y("./helpers").getLineWidth,n=y("../../plots/cartesian/axes").hoverLabelText,r=y("../../constants/numerical").BADNUM;function o(d,a,i,s,c){var l,p,g,u,x,f,T,_=d.cd,k=_[0].trace,w=_[0].t,C="closest"===s,A="waterfall"===k.type,O=d.maxHoverDistance,P=d.maxSpikeDistance;"h"===k.orientation?(l=i,p=a,g="y",u="x",x=j,f=Z):(l=a,p=i,g="x",u="y",f=j,x=Z);var S=k[g+"period"],E=C||S;function D(ne){return N(ne,-1)}function z(ne){return N(ne,1)}function N(ne,se){return ne[g]+se*ne.w/2}function V(ne){return ne[g+"End"]-ne[g+"Start"]}var X=C?D:S?function(ne){return ne.p-V(ne)/2}:function(ne){return Math.min(D(ne),ne.p-w.bardelta/2)},J=C?z:S?function(ne){return ne.p+V(ne)/2}:function(ne){return Math.max(z(ne),ne.p+w.bardelta/2)};function G(ne,se,ie){return c.finiteRange&&(ie=0),m.inbox(ne-l,se-l,ie+Math.min(1,Math.abs(se-ne)/T)-1)}function Z(ne){return G(X(ne),J(ne),O)}function re(ne){var se=ne[u];if(A){var ie=Math.abs(ne.rawS)||0;p>0?se+=ie:p<0&&(se-=ie)}return se}function j(ne){var se=p,ie=ne.b,ue=re(ne);return m.inbox(ie-se,ue-se,O+(ue-se)/(ue-ie)-1)}var B=d[g+"a"],H=d[u+"a"];T=Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0]));var ne,se,ie,ue,ee=m.getDistanceFunction(s,x,f,function(ne){return(x(ne)+f(ne))/2});if(m.getClosest(_,ee,d),!1!==d.index&&_[d.index].p!==r){E||(X=function(ne){return Math.min(D(ne),ne.p-w.bargroupwidth/2)},J=function(ne){return Math.max(z(ne),ne.p+w.bargroupwidth/2)});var U=_[d.index],$=k.base?U.b+U.s:U.s;d[u+"0"]=d[u+"1"]=H.c2p(U[u],!0),d[u+"LabelVal"]=$;var q=w.extents[w.extents.round(U.p)];return d[g+"0"]=B.c2p(C?X(U):q[0],!0),d[g+"1"]=B.c2p(C?J(U):q[1],!0),d[g+"LabelVal"]=void 0!==U.orig_p?U.orig_p:U.p,d.labelLabel=n(B,d[g+"LabelVal"],k[g+"hoverformat"]),d.valueLabel=n(H,d[u+"LabelVal"],k[u+"hoverformat"]),d.baseLabel=n(H,U.b,k[u+"hoverformat"]),d.spikeDistance=(se=p,ie=(ne=U).b,ue=re(ne),(m.inbox(ie-se,ue-se,P+(ue-se)/(ue-ie)-1)+function(ne){return G(D(ne),z(ne),P)}(U))/2),d[g+"Spike"]=B.c2p(U.p,!0),h(U,k,d),d.hovertemplate=k.hovertemplate,d}}function t(d,a){var i=a.mcc||d.marker.color,s=a.mlcc||d.marker.line.color,c=e(d,a);return b.opacity(i)?i:b.opacity(s)&&c?s:void 0}Q.exports={hoverPoints:function(d,a,i,s,c){var l=o(d,a,i,s,c);if(l){var p=l.cd,g=p[0].trace,u=p[l.index];return l.color=t(g,u),v.getComponentMethod("errorbars","hoverInfo")(u,g,l),[l]}},hoverOnBars:o,getTraceColor:t}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc").crossTraceCalc,colorbar:y("../scatter/marker_colorbar"),arraysToCalcdata:y("./arrays_to_calcdata"),plot:y("./plot").plot,style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"bar",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(y,Q,K){"use strict";Q.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../plots/cartesian/axes"),b=y("../../lib"),h=y("./layout_attributes");Q.exports=function(e,n,r){function o(g,u){return b.coerce(e,n,h,g,u)}for(var t=!1,d=!1,a=!1,i={},s=o("barmode"),c=0;c<r.length;c++){var l=r[c];if(m.traceIs(l,"bar")&&l.visible){if(t=!0,"group"===s){var p=l.xaxis+l.yaxis;i[p]&&(a=!0),i[p]=!0}l.visible&&"histogram"===l.type&&"category"!==v.getFromId({_fullLayout:n},l["v"===l.orientation?"xaxis":"yaxis"]).type&&(d=!0)}}t?("overlay"!==s&&o("barnorm"),o("bargap",d&&!a?0:.2),o("bargroupgap")):delete n.barmode}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=y("../../lib"),h=y("../../lib/svg_text_utils"),e=y("../../components/color"),n=y("../../components/drawing"),r=y("../../registry"),o=y("../../plots/cartesian/axes").tickText,t=y("./uniform_text"),d=t.recordMinTextSize,a=t.clearMinTextSize,i=y("./style"),s=y("./helpers"),c=y("./constants"),l=y("./attributes"),p=l.text,g=l.textposition,u=y("../../components/fx/helpers").appendArrayPointValue,x=c.TEXTPAD;function f(P){return P.id}function _(P,S){return P<S?1:-1}function k(P,S,E,D){var z;return!S.uniformtext.mode&&w(E)?(D&&(z=D()),P.transition().duration(E.duration).ease(E.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()})):P}function w(P){return P&&P.duration>0}function C(P){return"auto"===P?0:P}function A(P,S){var E=Math.PI/180*S,D=Math.abs(Math.sin(E)),z=Math.abs(Math.cos(E));return{x:P.width*z+P.height*D,y:P.width*D+P.height*z}}function O(P,S,E,D,z,N){var V=!!N.isHorizontal,X=!!N.constrained,J=N.angle||0,G=N.anchor||"end",Z="end"===G,re="start"===G,j=((N.leftToRight||0)+1)/2,B=1-j,H=z.width,ee=z.height,U=Math.abs(S-P),$=Math.abs(D-E),q=U>2*x&&$>2*x?x:0;U-=2*q,$-=2*q;var te=C(J);"auto"!==J||H<=U&&ee<=$||!(H>U||ee>$)||(H>$||ee>U)&&H<ee==U<$||(te+=90);var ne=A(z,te),se=1;X&&(se=Math.min(1,U/ne.x,$/ne.y));var ie=z.left*B+z.right*j,ue=(z.top+z.bottom)/2,le=(P+x)*B+(S-x)*j,de=(E+D)/2,be=0,_e=0;if(re||Z){var xe=(V?ne.x:ne.y)/2,Ee=V?_(P,S):_(E,D);V?re?(le=P+Ee*q,be=-Ee*xe):(le=S-Ee*q,be=Ee*xe):re?(de=E+Ee*q,_e=-Ee*xe):(de=D-Ee*q,_e=Ee*xe)}return{textX:ie,textY:ue,targetX:le,targetY:de,anchorX:be,anchorY:_e,scale:se,rotate:te}}Q.exports={plot:function(P,S,E,D,z,N){var V=S.xaxis,X=S.yaxis,J=P._fullLayout;z||(z={mode:J.barmode,norm:J.barmode,gap:J.bargap,groupgap:J.bargroupgap},a("bar",J));var G=b.makeTraceGroups(D,E,"trace bars").each(function(Z){var re=m.select(this),j=Z[0].trace,ee="bar"===j.type||"funnel"===j.type,U=0;"waterfall"===j.type&&j.connector.visible&&"between"===j.connector.mode&&(U=j.connector.line.width/2);var $="h"===j.orientation,q=w(z),te=b.ensureSingle(re,"g","points"),ne=function T(P){if(P.ids)return f}(j),se=te.selectAll("g.point").data(b.identity,ne);se.enter().append("g").classed("point",!0),se.exit().remove(),se.each(function(ue,le){var de,be,Re,ze,Ue,je,rt,ut,gt,At,_e=m.select(this),xe=(ze=V,Ue=X,ut=[],At=(je=$)?Ue:ze,(rt=[])[0]=(gt=je?ze:Ue).c2p((Re=ue).s0,!0),ut[0]=At.c2p(Re.p0,!0),rt[1]=gt.c2p(Re.s1,!0),ut[1]=At.c2p(Re.p1,!0),je?[rt,ut]:[ut,rt]),Ee=xe[0][0],he=xe[0][1],me=xe[1][0],Se=xe[1][1],Me=0==($?he-Ee:Se-me);if(Me&&ee&&s.getLineWidth(j,ue)&&(Me=!1),Me||(Me=!(v(Ee)&&v(he)&&v(me)&&v(Se))),ue.isBlank=Me,Me&&($?he=Ee:Se=me),U&&!Me&&($?(Ee-=_(Ee,he)*U,he+=_(Ee,he)*U):(me-=_(me,Se)*U,Se+=_(me,Se)*U)),"waterfall"===j.type){if(!Me){var Ie=j[ue.dir].marker;de=Ie.line.width,be=Ie.color}}else de=s.getLineWidth(j,ue),be=ue.mc||j.marker.color;function Fe(Re){var ze=m.round(de/2%1,2);return 0===z.gap&&0===z.groupgap?m.round(Math.round(Re)-ze,2):Re}if(!P._context.staticPlot){var Ne=e.opacity(be)<1||de>.01?Fe:function(Re,ze,Ue){return Ue&&Re===ze?Re:Math.abs(Re-ze)>=2?Fe(Re):Re>ze?Math.ceil(Re):Math.floor(Re)};Ee=Ne(Ee,he,$),he=Ne(he,Ee,$),me=Ne(me,Se,!$),Se=Ne(Se,me,!$)}var De=k(b.ensureSingle(_e,"path"),J,z,N);if(De.style("vector-effect","non-scaling-stroke").attr("d",isNaN((he-Ee)*(Se-me))||Me&&P._context.staticPlot?"M0,0Z":"M"+Ee+","+me+"V"+Se+"H"+he+"V"+me+"Z").call(n.setClipUrl,S.layerClipId,P),!J.uniformtext.mode&&q){var $e=n.makePointStyleFns(j);n.singlePointStyle(ue,De,j,$e,P)}(function(Re,ze,Ue,je,rt,ut,gt,At,_t,it,et){var wt,Gt=ze.xaxis,Kt=ze.yaxis,cr=Re._fullLayout;function ar($t,Wt,wr){return b.ensureSingle($t,"text").text(Wt).attr({class:"bartext bartext-"+wt,"text-anchor":"middle","data-notex":1}).call(n.font,wr).call(h.convertToTspans,Re)}var Wt,wr,Rr,br,nr,lr,hr=je[0].trace,Xt="h"===hr.orientation,He=(wr=rt,Rr=Gt,br=Kt,nr=(lr=(Wt=je)[0].trace).texttemplate?function(sr,_r,Ar,zt,ur){var Tt=_r[0].trace,Qt=b.castOption(Tt,Ar,"texttemplate");if(!Qt)return"";var Er,zr,an,Kr,sn="histogram"===Tt.type,gn="waterfall"===Tt.type,zn="funnel"===Tt.type,Vr="h"===Tt.orientation;function _n(di){return o(Kr,Kr.c2l(di),!0).text}Vr?(Er="y",zr=ur,an="x",Kr=zt):(Er="x",zr=zt,an="y",Kr=ur);var Qr=_r[Ar],Jr={};Jr.label=Qr.p,Jr.labelLabel=Jr[Er+"Label"]=o(zr,zr.c2l(Qr.p),!0).text;var Hn=b.castOption(Tt,Qr.i,"text");(0===Hn||Hn)&&(Jr.text=Hn),Jr.value=Qr.s,Jr.valueLabel=Jr[an+"Label"]=_n(Qr.s);var Mn={};u(Mn,Tt,Qr.i),(sn||void 0===Mn.x)&&(Mn.x=Vr?Jr.value:Jr.label),(sn||void 0===Mn.y)&&(Mn.y=Vr?Jr.label:Jr.value),(sn||void 0===Mn.xLabel)&&(Mn.xLabel=Vr?Jr.valueLabel:Jr.labelLabel),(sn||void 0===Mn.yLabel)&&(Mn.yLabel=Vr?Jr.labelLabel:Jr.valueLabel),gn&&(Jr.delta=+Qr.rawS||Qr.s,Jr.deltaLabel=_n(Jr.delta),Jr.final=Qr.v,Jr.finalLabel=_n(Jr.final),Jr.initial=Jr.final-Jr.delta,Jr.initialLabel=_n(Jr.initial)),zn&&(Jr.value=Qr.s,Jr.valueLabel=_n(Jr.value),Jr.percentInitial=Qr.begR,Jr.percentInitialLabel=b.formatPercent(Qr.begR),Jr.percentPrevious=Qr.difR,Jr.percentPreviousLabel=b.formatPercent(Qr.difR),Jr.percentTotal=Qr.sumR,Jr.percenTotalLabel=b.formatPercent(Qr.sumR));var Un=b.castOption(Tt,Qr.i,"customdata");return Un&&(Jr.customdata=Un),b.texttemplateString(Qt,Jr,sr._d3locale,Mn,Jr,Tt._meta||{})}(cr,Wt,wr,Rr,br):lr.textinfo?function(sr,_r,Ar,zt){var ur=sr[0].trace,Tt="h"===ur.orientation,Qt="waterfall"===ur.type,Er="funnel"===ur.type;function zr(Un){return o(Tt?Ar:zt,+Un,!0).text}var an,sn=sr[_r],gn=ur.textinfo.split("+"),zn=[],Vr=function(Un){return-1!==gn.indexOf(Un)};if(Vr("label")&&zn.push(o(Tt?zt:Ar,sr[_r].p,!0).text),Vr("text")&&(0===(an=b.castOption(ur,sn.i,"text"))||an)&&zn.push(an),Qt){var Qr=+sn.rawS||sn.s,Jr=sn.v,Nn=Jr-Qr;Vr("initial")&&zn.push(zr(Nn)),Vr("delta")&&zn.push(zr(Qr)),Vr("final")&&zn.push(zr(Jr))}if(Er){Vr("value")&&zn.push(zr(sn.s));var Hn=0;Vr("percent initial")&&Hn++,Vr("percent previous")&&Hn++,Vr("percent total")&&Hn++;var Mn=Hn>1;Vr("percent initial")&&(an=b.formatPercent(sn.begR),Mn&&(an+=" of initial"),zn.push(an)),Vr("percent previous")&&(an=b.formatPercent(sn.difR),Mn&&(an+=" of previous"),zn.push(an)),Vr("percent total")&&(an=b.formatPercent(sn.sumR),Mn&&(an+=" of total"),zn.push(an))}return zn.join("<br>")}(Wt,wr,Rr,br):s.getValue(lr.text,wr),s.coerceString(p,nr));wt=function($t,Wt){var wr=s.getValue($t.textposition,Wt);return s.coerceEnumerated(g,wr)}(hr,rt);var pe=je[rt],we=!("stack"===it.mode||"relative"===it.mode)||pe._outmost;if(He&&"none"!==wt&&(!pe.isBlank&&ut!==gt&&At!==_t||"auto"!==wt&&"inside"!==wt)){var Be=cr.font,We=i.getBarColor(je[rt],hr),Ke=i.getInsideTextFont(hr,rt,Be,We),Ye=i.getOutsideTextFont(hr,rt,Be),ft=Ue.datum();Xt?"log"===Gt.type&&ft.s0<=0&&(ut=Gt.range[0]<Gt.range[1]?0:Gt._length):"log"===Kt.type&&ft.s0<=0&&(At=Kt.range[0]<Kt.range[1]?Kt._length:0);var ct,St,Ft,at,mt,qt=Math.abs(gt-ut)-2*x,Et=Math.abs(_t-At)-2*x;if("outside"===wt&&(we||pe.hasB||(wt="inside")),"auto"===wt&&(we?(wt="inside",ct=ar(Ue,He,mt=b.ensureUniformFontSize(Re,Ke)),at=(St=n.bBox(ct.node())).height,(Ft=St.width)>0&&at>0&&(Ft<=qt&&at<=Et||Ft<=Et&&at<=qt||(Xt?qt>=Ft*(Et/at):Et>=at*(qt/Ft)))?wt="inside":(wt="outside",ct.remove(),ct=null)):wt="inside"),!ct){var ot=(ct=ar(Ue,He,mt=b.ensureUniformFontSize(Re,"outside"===wt?Ye:Ke))).attr("transform");if(ct.attr("transform",""),Ft=(St=n.bBox(ct.node())).width,at=St.height,ct.attr("transform",ot),Ft<=0||at<=0)return void ct.remove()}var dt,Ut=hr.textangle;dt="outside"===wt?function($t,Wt,wr,Rr,br,nr){var lr,sr=!!nr.isHorizontal,_r=!!nr.constrained,Ar=nr.angle||0,zt=br.width,ur=br.height,Tt=Math.abs(Wt-$t),Qt=Math.abs(Rr-wr);lr=sr?Qt>2*x?x:0:Tt>2*x?x:0;var Er=1;_r&&(Er=sr?Math.min(1,Qt/ur):Math.min(1,Tt/zt));var zr=C(Ar),an=A(br,zr),Kr=(sr?an.x:an.y)/2,sn=(br.left+br.right)/2,gn=(br.top+br.bottom)/2,zn=($t+Wt)/2,Vr=(wr+Rr)/2,_n=0,Qr=0,Jr=sr?_(Wt,$t):_(wr,Rr);return sr?(zn=Wt-Jr*lr,_n=Jr*Kr):(Vr=Rr+Jr*lr,Qr=-Jr*Kr),{textX:sn,textY:gn,targetX:zn,targetY:Vr,anchorX:_n,anchorY:Qr,scale:Er,rotate:zr}}(ut,gt,At,_t,St,{isHorizontal:Xt,constrained:"both"===hr.constraintext||"outside"===hr.constraintext,angle:Ut}):O(ut,gt,At,_t,St,{isHorizontal:Xt,constrained:"both"===hr.constraintext||"inside"===hr.constraintext,angle:Ut,anchor:hr.insidetextanchor}),dt.fontSize=mt.size,d("histogram"===hr.type?"bar":hr.type,dt,cr),pe.transform=dt,k(ct,cr,it,et).attr("transform",b.getTextTransform(dt))}else Ue.select("text").remove()})(P,S,_e,Z,le,Ee,he,me,Se,z,N),S.layerClipId&&n.hideOutsideRangePoint(ue,_e.select("text"),V,X,j.xcalendar,j.ycalendar)}),n.setClipUrl(re,!1===j.cliponaxis?null:S.layerClipId,P)});r.getComponentMethod("errorbars","plot")(P,G,S,z)},toMoveInsideBar:O}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(y,Q,K){"use strict";function m(v,b,h,e,n){var r=b.c2p(e?v.s0:v.p0,!0),o=b.c2p(e?v.s1:v.p1,!0),t=h.c2p(e?v.p0:v.s0,!0),d=h.c2p(e?v.p1:v.s1,!0);return n?[(r+o)/2,(t+d)/2]:e?[o,(t+d)/2]:[(r+o)/2,d]}Q.exports=function(v,b){var h,e=v.cd,n=v.xaxis,r=v.yaxis,o=e[0].trace,t="funnel"===o.type,d="h"===o.orientation,a=[];if(!1===b)for(h=0;h<e.length;h++)e[h].selected=0;else for(h=0;h<e.length;h++){var i=e[h],s="ct"in i?i.ct:m(i,n,r,d,t);b.contains(s,!1,h,v)?(a.push({pointNumber:h,x:n.c2d(i.x),y:r.c2d(i.y)}),i.selected=1):i.selected=0}return a}},{}],670:[function(y,Q,K){"use strict";Q.exports=b;var m=y("../../lib").distinctVals,v=y("../../constants/numerical").BADNUM;function b(h,e){this.traces=h,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var n=1/0,r=[],o=0;o<h.length;o++){for(var t=h[o],d=0;d<t.length;d++){var a=t[d];a.p!==v&&r.push(a.p)}t[0]&&t[0].width1&&(n=Math.min(t[0].width1,n))}this.positions=r;var i=m(r);this.distinctPositions=i.vals,this.minDiff=1===i.vals.length&&n!==1/0?n:Math.min(i.minDiff,n);var s=(e.posAxis||{}).type;"category"!==s&&"multicategory"!==s||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}b.prototype.put=function(h,e){var n=this.getLabel(h,e),r=this.bins[n]||0;return this.bins[n]=r+e,r},b.prototype.get=function(h,e){var n=this.getLabel(h,e);return this.bins[n]||0},b.prototype.getLabel=function(h,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?h:Math.round(h/this.binWidth))}},{"../../constants/numerical":491,"../../lib":515}],671:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/color"),b=y("../../components/drawing"),h=y("../../lib"),e=y("../../registry"),n=y("./uniform_text").resizeText,r=y("./attributes"),o=r.textfont,t=r.insidetextfont,d=r.outsidetextfont,a=y("./helpers");function i(f,T,_){b.pointStyle(f.selectAll("path"),T,_),s(f,T,_)}function s(f,T,_){f.selectAll("text").each(function(k){var w=m.select(this),C=h.ensureUniformFontSize(_,c(w,k,T,_));b.font(w,C)})}function c(f,T,_,k){var w=k._fullLayout.font,C=_.textfont;if(f.classed("bartext-inside")){var A=x(T,_);C=p(_,T.i,w,A)}else f.classed("bartext-outside")&&(C=g(_,T.i,w));return C}function l(f,T,_){return u(o,f.textfont,T,_)}function p(f,T,_,k){var w=l(f,T,_);return(void 0===f._input.textfont||void 0===f._input.textfont.color||Array.isArray(f.textfont.color)&&void 0===f.textfont.color[T])&&(w={color:v.contrast(k),family:w.family,size:w.size}),u(t,f.insidetextfont,T,w)}function g(f,T,_){var k=l(f,T,_);return u(d,f.outsidetextfont,T,k)}function u(f,T,_,k){var w=a.getValue((T=T||{}).family,_),C=a.getValue(T.size,_),A=a.getValue(T.color,_);return{family:a.coerceString(f.family,w,k.family),size:a.coerceNumber(f.size,C,k.size),color:a.coerceColor(f.color,A,k.color)}}function x(f,T){return"waterfall"===T.type?T[f.dir].marker.color:f.mcc||f.mc||T.marker.color}Q.exports={style:function(f){var T=m.select(f).selectAll("g.barlayer").selectAll("g.trace");n(f,T,"bar");var _=T.size(),k=f._fullLayout;T.style("opacity",function(w){return w[0].trace.opacity}).each(function(w){("stack"===k.barmode&&_>1||0===k.bargap&&0===k.bargroupgap&&!w[0].trace.marker.line.width)&&m.select(this).attr("shape-rendering","crispEdges")}),T.selectAll("g.points").each(function(w){i(m.select(this),w[0].trace,f)}),e.getComponentMethod("errorbars","style")(T)},styleTextPoints:s,styleOnSelect:function(f,T,_){var w,C,A,O,P,S,k=T[0].trace;k.selectedpoints?(C=k,A=f,b.selectedPointStyle((w=_).selectAll("path"),C),O=w.selectAll("text"),P=C,S=A,O.each(function(E){var D,z=m.select(this);if(E.selected){D=h.ensureUniformFontSize(S,c(z,E,P,S));var N=P.selected.textfont&&P.selected.textfont.color;N&&(D.color=N),b.font(z,D)}else b.selectedTextStyle(z,P)})):(i(_,k,f),e.getComponentMethod("errorbars","style")(_))},getInsideTextFont:p,getOutsideTextFont:g,getBarColor:x,resizeText:n}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(y,Q,K){"use strict";var m=y("../../components/color"),v=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults"),h=y("../../lib").coercePattern;Q.exports=function(e,n,r,o,t){var d=r("marker.color",o),a=v(e,"marker");a&&b(e,n,t,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",m.defaultLine),v(e,"marker.line")&&b(e,n,t,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),h(r,"marker.pattern",d,a),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib");function b(h){return"_"+h+"Text_minsize"}Q.exports={recordMinTextSize:function(h,e,n){if(n.uniformtext.mode){var r=b(h),o=n.uniformtext.minsize,t=e.scale*e.fontSize;e.hide=t<o,n[r]=n[r]||1/0,e.hide||(n[r]=Math.min(n[r],Math.max(t,o)))}},clearMinTextSize:function(h,e){e[b(h)]=void 0},resizeText:function(h,e,n){var r=h._fullLayout,o=r["_"+n+"Text_minsize"];if(o){var t,d="hide"===r.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":t="g.slice";break;case"treemap":case"icicle":t="g.slice, g.pathbar";break;default:t="g.points > g.point"}e.selectAll(t).each(function(a){var i=a.transform;i&&(i.scale=d&&i.hide?0:o/i.fontSize,m.select(this).select("text").attr("transform",v.getTextTransform(i)))})}}}},{"../../lib":515,"@plotly/d3":58}],674:[function(y,Q,K){"use strict";var m=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../lib/extend").extendFlat,b=y("../scatterpolar/attributes"),h=y("../bar/attributes");Q.exports={r:b.r,theta:b.theta,r0:b.r0,dr:b.dr,theta0:b.theta0,dtheta:b.dtheta,thetaunit:b.thetaunit,base:v({},h.base,{}),offset:v({},h.offset,{}),width:v({},h.width,{}),text:v({},h.text,{}),hovertext:v({},h.hovertext,{}),marker:h.marker,hoverinfo:b.hoverinfo,hovertemplate:m(),selected:h.selected,unselected:h.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/helpers").hasColorscale,v=y("../../components/colorscale/calc"),b=y("../bar/arrays_to_calcdata"),h=y("../bar/cross_trace_calc").setGroupPositions,e=y("../scatter/calc_selection"),n=y("../../registry").traceIs,r=y("../../lib").extendFlat;Q.exports={calc:function(o,t){for(var d=o._fullLayout,a=t.subplot,s=d[a].angularaxis,c=d[a].radialaxis.makeCalcdata(t,"r"),l=s.makeCalcdata(t,"theta"),p=t._length,g=new Array(p),u=c,x=l,f=0;f<p;f++)g[f]={p:x[f],s:u[f]};function T(_){var k=t[_];void 0!==k&&(t["_"+_]=Array.isArray(k)?s.makeCalcdata(t,_):s.d2c(k,t.thetaunit))}return"linear"===s.type&&(T("width"),T("offset")),m(t,"marker")&&v(o,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),m(t,"marker.line")&&v(o,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(g,t),e(g,t),g},crossTraceCalc:function(o,t,d){for(var a=o.calcdata,i=[],s=0;s<a.length;s++){var c=a[s],l=c[0].trace;!0===l.visible&&n(l,"bar")&&l.subplot===d&&i.push(c)}var p=r({},t.radialaxis,{_id:"x"});h(o,t.angularaxis,p,i,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatterpolar/defaults").handleRThetaDefaults,b=y("../bar/style_defaults"),h=y("./attributes");Q.exports=function(e,n,r,o){function t(d,a){return m.coerce(e,n,h,d,a)}v(e,n,o,t)?(t("thetaunit"),t("base"),t("offset"),t("width"),t("text"),t("hovertext"),t("hovertemplate"),b(e,n,t,r,o),m.coerceSelectionMarkerOpacity(n,t)):n.visible=!1}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(y,Q,K){"use strict";var m=y("../../components/fx"),v=y("../../lib"),b=y("../bar/hover").getTraceColor,h=v.fillText,e=y("../scatterpolar/hover").makeHoverPointText,n=y("../../plots/polar/helpers").isPtInsidePolygon;Q.exports=function(r,o,t){var d=r.cd,a=d[0].trace,i=r.subplot,s=i.radialAxis,l=i.vangles,p=l?n:v.isPtInsideSector,g=r.maxHoverDistance,u=i.angularAxis._period||2*Math.PI,x=Math.abs(s.g2p(Math.sqrt(o*o+t*t))),f=Math.atan2(t,o);if(s.range[0]>s.range[1]&&(f+=Math.PI),m.getClosest(d,function(k){return p(x,f,[k.rp0,k.rp1],[k.thetag0,k.thetag1],l)?g+Math.min(1,Math.abs(k.thetag1-k.thetag0)/u)-1+(k.rp1-x)/(k.rp1-k.rp0)-1:1/0},r),!1!==r.index){var T=d[r.index];r.x0=r.x1=T.ct[0],r.y0=r.y1=T.ct[1];var _=v.extendFlat({},T,{r:T.s,theta:T.p});return h(T,a,r),e(_,a,i,r),r.hovertemplate=a.hovertemplate,r.color=b(a,T),r.xLabelVal=r.yLabelVal=void 0,T.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"barpolar",basePlotModule:y("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("../scatterpolar/format_labels"),style:y("../bar/style").style,styleOnSelect:y("../bar/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(y,Q,K){"use strict";Q.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h,e){var n,r={};function o(a,i){return m.coerce(b[n]||{},h[n],v,a,i)}for(var t=0;t<e.length;t++){var d=e[t];"barpolar"===d.type&&!0===d.visible&&(r[n=d.subplot]||(o("barmode"),o("bargap"),r[n]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("fast-isnumeric"),b=y("../../lib"),h=y("../../components/drawing"),e=y("../../plots/polar/helpers");Q.exports=function(n,r,o){var l,p,g,t=r.xaxis,d=r.yaxis,a=r.radialAxis,i=r.angularAxis,s=(p=(l=r).cxx,g=l.cyy,l.vangles?function(u,x,f,T){var _,k;b.angleDelta(f,T)>0?(_=f,k=T):(_=T,k=f);var w=[e.findEnclosingVertexAngles(_,l.vangles)[0],(_+k)/2,e.findEnclosingVertexAngles(k,l.vangles)[1]];return e.pathPolygonAnnulus(u,x,_,k,w,p,g)}:function(u,x,f,T){return b.pathAnnulus(u,x,f,T,p,g)}),c=r.layers.frontplot.select("g.barlayer");b.makeTraceGroups(c,o,"trace bars").each(function(){var l=m.select(this),p=b.ensureSingle(l,"g","points").selectAll("g.point").data(b.identity);p.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),p.exit().remove(),p.each(function(g){var u,x=m.select(this),f=g.rp0=a.c2p(g.s0),T=g.rp1=a.c2p(g.s1),_=g.thetag0=i.c2g(g.p0),k=g.thetag1=i.c2g(g.p1);if(v(f)&&v(T)&&v(_)&&v(k)&&f!==T&&_!==k){var w=a.c2g(g.s1),C=(_+k)/2;g.ct=[t.c2p(w*Math.cos(C)),d.c2p(w*Math.sin(C))],u=s(f,T,_,k)}else u="M0,0Z";b.ensureSingle(x,"path").attr("d",u)}),h.setClipUrl(l,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,n)})}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(y,Q,K){"use strict";var m=y("../scatter/attributes"),v=y("../bar/attributes"),b=y("../../components/color/attributes"),h=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../plots/template_attributes").hovertemplateAttrs,n=y("../../lib/extend").extendFlat,r=m.marker,o=r.line;Q.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:h("x"),yhoverformat:h("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:n({},r.symbol,{arrayOk:!1,editType:"plot"}),opacity:n({},r.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:n({},r.size,{arrayOk:!1,editType:"calc"}),color:n({},r.color,{arrayOk:!1,editType:"style"}),line:{color:n({},o.color,{arrayOk:!1,dflt:b.defaultLine,editType:"style"}),width:n({},o.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:{marker:m.selected.marker,editType:"style"},unselected:{marker:m.unselected.marker,editType:"style"},text:n({},m.text,{}),hovertext:n({},m.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../plots/cartesian/axes"),b=y("../../plots/cartesian/align_period"),h=y("../../lib"),e=y("../../constants/numerical").BADNUM,n=h._;Q.exports=function(p,g){var u,x,f,T,_,k,w,C=p._fullLayout,A=v.getFromId(p,g.xaxis||"x"),O=v.getFromId(p,g.yaxis||"y"),P=[],S="violin"===g.type?"_numViolins":"_numBoxes";"h"===g.orientation?(f=A,T="x",_=O,k="y",w=!!g.yperiodalignment):(f=O,T="y",_=A,k="x",w=!!g.xperiodalignment);var E,D,z,N,V,X,J=function(Ue,je,rt,ut){var gt,At=je+"0"in Ue;if(je in Ue||At&&"d"+je in Ue){var it=rt.makeCalcdata(Ue,je);return[b(Ue,rt,je,it).vals,it]}gt=At?Ue[je+"0"]:"name"in Ue&&("category"===rt.type||m(Ue.name)&&-1!==["linear","log"].indexOf(rt.type)||h.isDateTime(Ue.name)&&"date"===rt.type)?Ue.name:ut;for(var et="multicategory"===rt.type?rt.r2c_just_indices(gt):rt.d2c(gt,0,Ue[je+"calendar"]),wt=Ue._length,Gt=new Array(wt),Kt=0;Kt<wt;Kt++)Gt[Kt]=et;return[Gt]}(g,k,_,C[S]),G=J[0],Z=J[1],re=h.distinctVals(G,_),j=re.vals,B=re.minDiff/2,H="all"===(g.boxpoints||g.points)?h.identity:function(Ue){return Ue.v<E.lf||Ue.v>E.uf};if(g._hasPreCompStats){var ee=g[T],U=function(Ue){return f.d2c((g[Ue]||[])[u])},$=1/0,q=-1/0;for(u=0;u<g._length;u++){var te=G[u];if(m(te)){if((E={}).pos=E[k]=te,w&&Z&&(E.orig_p=Z[u]),E.q1=U("q1"),E.med=U("median"),E.q3=U("q3"),D=[],ee&&h.isArrayOrTypedArray(ee[u]))for(x=0;x<ee[u].length;x++)(X=f.d2c(ee[u][x]))!==e&&(o(V={v:X,i:[u,x]},g,[u,x]),D.push(V));if(E.pts=D.sort(t),N=(z=E[T]=D.map(d)).length,E.med!==e&&E.q1!==e&&E.q3!==e&&E.med>=E.q1&&E.q3>=E.med){var ne=U("lowerfence");E.lf=ne!==e&&ne<=E.q1?ne:a(E,z,N);var se=U("upperfence");E.uf=se!==e&&se>=E.q3?se:i(E,z,N);var ie=U("mean");E.mean=ie!==e?ie:N?h.mean(z,N):(E.q1+E.q3)/2;var ue=U("sd");E.sd=ie!==e&&ue>=0?ue:N?h.stdev(z,N,E.mean):E.q3-E.q1,E.lo=s(E),E.uo=c(E);var le=U("notchspan");le=le!==e&&le>0?le:l(E,N),E.ln=E.med-le,E.un=E.med+le;var de=E.lf,be=E.uf;g.boxpoints&&z.length&&(de=Math.min(de,z[0]),be=Math.max(be,z[N-1])),g.notched&&(de=Math.min(de,E.ln),be=Math.max(be,E.un)),E.min=de,E.max=be}else{var _e;h.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+E.q1,"median = "+E.med,"q3 = "+E.q3].join("\n")),E.med=_e=E.med!==e?E.med:E.q1!==e?E.q3!==e?(E.q1+E.q3)/2:E.q1:E.q3!==e?E.q3:0,E.q1=E.q3=_e,E.lf=E.uf=_e,E.mean=E.sd=_e,E.ln=E.un=_e,E.min=E.max=_e}$=Math.min($,E.min),q=Math.max(q,E.max),E.pts2=D.filter(H),P.push(E)}}g._extremes[f._id]=v.findExtremes(f,[$,q],{padded:!0})}else{var xe=f.makeCalcdata(g,T),Ee=function(Ue,je){for(var rt=Ue.length,ut=new Array(rt+1),gt=0;gt<rt;gt++)ut[gt]=Ue[gt]-je;return ut[rt]=Ue[rt-1]+je,ut}(j,B),he=j.length,me=function(Ue){for(var je=new Array(Ue),rt=0;rt<Ue;rt++)je[rt]=[];return je}(he);for(u=0;u<g._length;u++)if(m(X=xe[u])){var Se=h.findBin(G[u],Ee);Se>=0&&Se<he&&(o(V={v:X,i:u},g,u),me[Se].push(V))}var Me=1/0,Ie=-1/0,Fe=g.quartilemethod,Ne="exclusive"===Fe,De="inclusive"===Fe;for(u=0;u<he;u++)if(me[u].length>0){var $e,Re;(E={}).pos=E[k]=j[u],D=E.pts=me[u].sort(t),N=(z=E[T]=D.map(d)).length,E.min=z[0],E.max=z[N-1],E.mean=h.mean(z,N),E.sd=h.stdev(z,N,E.mean),E.med=h.interp(z,.5),N%2&&(Ne||De)?(Ne?($e=z.slice(0,N/2),Re=z.slice(N/2+1)):De&&($e=z.slice(0,N/2+1),Re=z.slice(N/2)),E.q1=h.interp($e,.5),E.q3=h.interp(Re,.5)):(E.q1=h.interp(z,.25),E.q3=h.interp(z,.75)),E.lf=a(E,z,N),E.uf=i(E,z,N),E.lo=s(E),E.uo=c(E);var ze=l(E,N);E.ln=E.med-ze,E.un=E.med+ze,Me=Math.min(Me,E.ln),Ie=Math.max(Ie,E.un),E.pts2=D.filter(H),P.push(E)}g._extremes[f._id]=v.findExtremes(f,g.notched?xe.concat([Me,Ie]):xe,{padded:!0})}return function(Ue,je){if(h.isArrayOrTypedArray(je.selectedpoints))for(var rt=0;rt<Ue.length;rt++){for(var ut=Ue[rt].pts||[],gt={},At=0;At<ut.length;At++)gt[ut[At].i]=At;h.tagSelected(ut,je,gt)}}(P,g),P.length>0?(P[0].t={num:C[S],dPos:B,posLetter:k,valLetter:T,labels:{med:n(p,"median:"),min:n(p,"min:"),q1:n(p,"q1:"),q3:n(p,"q3:"),max:n(p,"max:"),mean:n(p,"sd"===g.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:n(p,"lower fence:"),uf:n(p,"upper fence:")}},C[S]++,P):[{t:{empty:!0}}]};var r={text:"tx",hovertext:"htx"};function o(p,g,u){for(var x in r)h.isArrayOrTypedArray(g[x])&&(Array.isArray(u)?h.isArrayOrTypedArray(g[x][u[0]])&&(p[r[x]]=g[x][u[0]][u[1]]):p[r[x]]=g[x][u])}function t(p,g){return p.v-g.v}function d(p){return p.v}function a(p,g,u){return 0===u?p.q1:Math.min(p.q1,g[Math.min(h.findBin(2.5*p.q1-1.5*p.q3,g,!0)+1,u-1)])}function i(p,g,u){return 0===u?p.q3:Math.max(p.q3,g[Math.max(h.findBin(2.5*p.q3-1.5*p.q1,g),0)])}function s(p){return 4*p.q1-3*p.q3}function c(p){return 4*p.q3-3*p.q1}function l(p,g){return 0===g?0:1.57*(p.q3-p.q1)/Math.sqrt(g)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../lib"),b=y("../../plots/cartesian/constraints").getAxisGroup,h=["v","h"];function e(n,r,o,t){var d,a,i,s=r.calcdata,c=r._fullLayout,l=t._id,p=l.charAt(0),g=[],u=0;for(d=0;d<o.length;d++)for(i=s[o[d]],a=0;a<i.length;a++)g.push(t.c2l(i[a].pos,!0)),u+=(i[a].pts2||[]).length;if(g.length){var x=v.distinctVals(g);"category"!==t.type&&"multicategory"!==t.type||(x.minDiff=1);var f=x.minDiff/2;m.minDtick(t,x.minDiff,x.vals[0],!0);var T=c["violin"===n?"_numViolins":"_numBoxes"],_="group"===c[n+"mode"]&&T>1,k=1-c[n+"gap"],w=1-c[n+"groupgap"];for(d=0;d<o.length;d++){var C,A,O,P,S,E,D=(i=s[o[d]])[0].trace,z=i[0].t,N=D.width,V=D.side;if(N)C=A=P=N/2,O=0;else if(C=f,_){var X=b(c,t._id)+D.orientation,G=Object.keys(((c._alignmentOpts[X]||{})[D.alignmentgroup]||{}).offsetGroups||{}).length,Z=G||T;A=C*k*w/Z,O=2*C*(((G?D._offsetIndex:z.num)+.5)/Z-.5)*k,P=C*k/Z}else A=C*k*w,O=0,P=C;z.dPos=C,z.bPos=O,z.bdPos=A,z.wHover=P;var re,j,B,H,ee,U,$=O+A,q=Boolean(N);if("positive"===V?(S=C*(N?1:.5),re=$,E=re=O):"negative"===V?(S=re=O,E=C*(N?1:.5),j=$):(S=E=C,re=j=$),(D.boxpoints||D.points)&&u>0){var te=D.pointpos,ne=D.jitter,se=D.marker.size/2,ie=0;te+ne>=0&&((ie=$*(te+ne))>S?(q=!0,ee=se,B=ie):ie>re&&(ee=se,B=S)),ie<=S&&(B=S);var ue=0;te-ne<=0&&((ue=-$*(te-ne))>E?(q=!0,U=se,H=ue):ue>j&&(U=se,H=E)),ue<=E&&(H=E)}else B=S,H=E;var le=new Array(i.length);for(a=0;a<i.length;a++)le[a]=i[a].pos;D._extremes[l]=m.findExtremes(t,le,{padded:q,vpadminus:H,vpadplus:B,vpadLinearized:!0,ppadminus:{x:U,y:ee}[p],ppadplus:{x:ee,y:U}[p]})}}}Q.exports={crossTraceCalc:function(n,r){for(var o=n.calcdata,t=r.xaxis,d=r.yaxis,a=0;a<h.length;a++){for(var i=h[a],s="h"===i?d:t,c=[],l=0;l<o.length;l++){var p=o[l],u=p[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||p[0].t.empty||(u.orientation||"v")!==i||u.xaxis!==t._id||u.yaxis!==d._id||c.push(l)}e("box",n,c,s)}},setPositionOffset:e}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../registry"),b=y("../../components/color"),h=y("../scatter/period_defaults"),e=y("../bar/defaults").handleGroupingDefaults,n=y("../../plots/cartesian/axis_autotype"),r=y("./attributes");function o(d,a,i,s){function c(V){var X=0;return V&&V.length&&(X+=1,m.isArrayOrTypedArray(V[0])&&V[0].length&&(X+=1)),X}function l(V){return m.validate(d[V],r[V])}var p,g=i("y"),u=i("x");if("box"===a.type){var x=i("q1"),f=i("median"),T=i("q3");a._hasPreCompStats=x&&x.length&&f&&f.length&&T&&T.length,p=Math.min(m.minRowLength(x),m.minRowLength(f),m.minRowLength(T))}var _,k,w=c(g),C=c(u),A=w&&m.minRowLength(g),O=C&&m.minRowLength(u),P=s.calendar,S={autotypenumbers:s.autotypenumbers};if(a._hasPreCompStats)switch(String(C)+String(w)){case"00":var E=l("x0")||l("dx");_=!l("y0")&&!l("dy")||E?"v":"h",k=p;break;case"10":_="v",k=Math.min(p,O);break;case"20":_="h",k=Math.min(p,u.length);break;case"01":_="h",k=Math.min(p,A);break;case"02":_="v",k=Math.min(p,g.length);break;case"12":_="v",k=Math.min(p,O,g.length);break;case"21":_="h",k=Math.min(p,u.length,A);break;case"11":k=0;break;case"22":var D,z=!1;for(D=0;D<u.length;D++)if("category"===n(u[D],P,S)){z=!0;break}if(z)_="v",k=Math.min(p,O,g.length);else{for(D=0;D<g.length;D++)if("category"===n(g[D],P,S)){z=!0;break}z?(_="h",k=Math.min(p,u.length,A)):(_="v",k=Math.min(p,O,g.length))}}else w>0?(_="v",k=C>0?Math.min(O,A):Math.min(A)):C>0?(_="h",k=Math.min(O)):k=0;if(k){a._length=k;var N=i("orientation",_);a._hasPreCompStats?"v"===N&&0===C?(i("x0",0),i("dx",1)):"h"===N&&0===w&&(i("y0",0),i("dy",1)):"v"===N&&0===C?i("x0"):"h"===N&&0===w&&i("y0"),v.getComponentMethod("calendars","handleTraceDefaults")(d,a,["x","y"],s)}else a.visible=!1}function t(d,a,i,s){var c=s.prefix,l=m.coerce2(d,a,r,"marker.outliercolor"),p=i("marker.line.outliercolor"),g="outliers";a._hasPreCompStats?g="all":(l||p)&&(g="suspectedoutliers");var u=i(c+"points",g);u?(i("jitter","all"===u?.3:0),i("pointpos","all"===u?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.color",a.line.color),i("marker.line.color"),i("marker.line.width"),"suspectedoutliers"===u&&(i("marker.line.outliercolor",a.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete a.marker;var x=i("hoveron");"all"!==x&&-1===x.indexOf("points")||i("hovertemplate"),m.coerceSelectionMarkerOpacity(a,i)}Q.exports={supplyDefaults:function(d,a,i,s){function c(T,_){return m.coerce(d,a,r,T,_)}if(o(d,a,c,s),!1!==a.visible){h(d,a,s,c),c("xhoverformat"),c("yhoverformat");var l=a._hasPreCompStats;l&&(c("lowerfence"),c("upperfence")),c("line.color",(d.marker||{}).color||i),c("line.width"),c("fillcolor",b.addOpacity(a.line.color,.5));var p=!1;if(l){var g=c("mean"),u=c("sd");g&&g.length&&(p=!0,u&&u.length&&(p="sd"))}c("boxmean",p),c("whiskerwidth"),c("width"),c("quartilemethod");var x=!1;if(l){var f=c("notchspan");f&&f.length&&(x=!0)}else m.validate(d.notchwidth,r.notchwidth)&&(x=!0);c("notched",x)&&c("notchwidth"),t(d,a,c,{prefix:"box"})}},crossTraceDefaults:function(d,a){var s;function c(g){return m.coerce(s._input,s,r,g)}for(var l=0;l<d.length;l++){var p=(s=d[l]).type;"box"!==p&&"violin"!==p||"group"===a[p+"mode"]&&e(s._input,s,a,c)}},handleSampleDefaults:o,handlePointsDefaults:t}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(y,Q,K){"use strict";Q.exports=function(m,v){return v.hoverOnBox&&(m.hoverOnBox=v.hoverOnBox),"xVal"in v&&(m.x=v.xVal),"yVal"in v&&(m.y=v.yVal),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),m}},{}],687:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../lib"),b=y("../../components/fx"),h=y("../../components/color"),e=v.fillText;function n(o,t,d,a){var i,s,c,l,p,g,u,x,f,T,_,k,w,C,A=o.cd,O=o.xa,P=o.ya,S=A[0].trace,E=A[0].t,D="violin"===S.type,z=E.bdPos,N=E.wHover,V=function(_e){return c.c2l(_e.pos)+E.bPos-c.c2l(g)};D&&"both"!==S.side?("positive"===S.side&&(f=function(_e){var xe=V(_e);return b.inbox(xe,xe+N,T)},k=z,w=0),"negative"===S.side&&(f=function(_e){var xe=V(_e);return b.inbox(xe-N,xe,T)},k=0,w=z)):(f=function(_e){var xe=V(_e);return b.inbox(xe-N,xe+N,T)},k=w=z),C=D?function(_e){return b.inbox(_e.span[0]-p,_e.span[1]-p,T)}:function(_e){return b.inbox(_e.min-p,_e.max-p,T)},"h"===S.orientation?(p=t,g=d,u=C,x=f,i="y",c=P,s="x",l=O):(p=d,g=t,u=f,x=C,i="x",c=O,s="y",l=P);var X=Math.min(1,z/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function J(_e){return(u(_e)+x(_e))/2}T=o.maxHoverDistance-X,_=o.maxSpikeDistance-X;var G=b.getDistanceFunction(a,u,x,J);if(b.getClosest(A,G,o),!1===o.index)return[];var Z=A[o.index],re=S.line.color,j=(S.marker||{}).color;o.color=h.opacity(re)&&S.line.width?re:h.opacity(j)&&S.boxpoints?j:S.fillcolor,o[i+"0"]=c.c2p(Z.pos+E.bPos-w,!0),o[i+"1"]=c.c2p(Z.pos+E.bPos+k,!0),o[i+"LabelVal"]=void 0!==Z.orig_p?Z.orig_p:Z.pos;var B=i+"Spike";o.spikeDistance=J(Z)*_/T,o[B]=c.c2p(Z.pos,!0);var H=S.boxmean||(S.meanline||{}).visible,ee=S.boxpoints||S.points,U=ee&&H?["max","uf","q3","med","mean","q1","lf","min"]:ee&&!H?["max","uf","q3","med","q1","lf","min"]:!ee&&H?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];S.orientation===(l.range[1]<l.range[0]?"v":"h")&&U.reverse();for(var q=o.spikeDistance,te=o[B],ne=[],se=0;se<U.length;se++){var ie=U[se];if(ie in Z){var ue=Z[ie],le=l.c2p(ue,!0),de=v.extendFlat({},o);de.attr=ie,de[s+"0"]=de[s+"1"]=le,de[s+"LabelVal"]=ue,de[s+"Label"]=(E.labels?E.labels[ie]+" ":"")+m.hoverLabelText(l,ue,S[s+"hoverformat"]),de.hoverOnBox=!0,"mean"===ie&&"sd"in Z&&"sd"===S.boxmean&&(de[s+"err"]=Z.sd),de.hovertemplate=!1,ne.push(de)}}o.name="",o.spikeDistance=void 0,o[B]=void 0;for(var be=0;be<ne.length;be++)"med"!==ne[be].attr?(ne[be].name="",ne[be].spikeDistance=void 0,ne[be][B]=void 0):(ne[be].spikeDistance=q,ne[be][B]=te);return ne}function r(o,t,d){for(var a,i,s,c=o.cd,l=o.xa,p=o.ya,g=c[0].trace,u=l.c2p(t),x=p.c2p(d),f=b.quadrature(function(D){var z=Math.max(3,D.mrc||0);return Math.max(Math.abs(l.c2p(D.x)-u)-z,1-3/z)},function(D){var z=Math.max(3,D.mrc||0);return Math.max(Math.abs(p.c2p(D.y)-x)-z,1-3/z)}),T=!1,_=0;_<c.length;_++){i=c[_];for(var k=0;k<(i.pts||[]).length;k++){var w=f(s=i.pts[k]);w<=o.distance&&(o.distance=w,T=[_,k])}}if(!T)return!1;s=(i=c[T[0]]).pts[T[1]];var C=l.c2p(s.x,!0),A=p.c2p(s.y,!0),O=s.mrc||1;a=v.extendFlat({},o,{index:s.i,color:(g.marker||{}).color,name:g.name,x0:C-O,x1:C+O,y0:A-O,y1:A+O,spikeDistance:o.distance,hovertemplate:g.hovertemplate});var P,S=i.orig_p,E=void 0!==S?S:i.pos;return"h"===g.orientation?(P=p,a.xLabelVal=s.x,a.yLabelVal=E):(P=l,a.xLabelVal=E,a.yLabelVal=s.y),a[P._id.charAt(0)+"Spike"]=P.c2p(i.pos,!0),e(s,g,a),a}Q.exports={hoverPoints:function(o,t,d,a){var i,s=o.cd[0].trace.hoveron,c=[];return-1!==s.indexOf("boxes")&&(c=c.concat(n(o,t,d,a))),-1!==s.indexOf("points")&&(i=r(o,t,d)),"closest"===a?i?[i]:c:(i&&c.push(i),c)},hoverOnBoxes:n,hoverOnPoints:r}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults").supplyLayoutDefaults,calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc").crossTraceCalc,plot:y("./plot").plot,style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"box",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(y,Q,K){"use strict";Q.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("./layout_attributes");function h(e,n,r,o,t){for(var d=t+"Layout",a=!1,i=0;i<r.length;i++)if(m.traceIs(r[i],d)){a=!0;break}a&&(o(t+"mode"),o(t+"gap"),o(t+"groupgap"))}Q.exports={supplyLayoutDefaults:function(e,n,r){h(0,0,r,function(o,t){return v.coerce(e,n,b,o,t)},"box")},_supply:h}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../components/drawing");function h(r,o,t,d){var a,i,s="h"===t.orientation,c=o.val,l=o.pos,p=!!l.rangebreaks,g=d.bPos,u=d.wdPos||0,x=d.bPosPxOffset||0,f=t.whiskerwidth||0,T=t.notched||!1,_=T?1-2*t.notchwidth:1;Array.isArray(d.bdPos)?(a=d.bdPos[0],i=d.bdPos[1]):(a=d.bdPos,i=d.bdPos);var k=r.selectAll("path.box").data("violin"!==t.type||t.box.visible?v.identity:[]);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),k.exit().remove(),k.each(function(w){if(w.empty)return"M0,0Z";var C=l.c2l(w.pos+g,!0),A=l.l2p(C-a)+x,O=l.l2p(C+i)+x,P=p?(A+O)/2:l.l2p(C)+x,S=t.whiskerwidth,E=p?A*S+(1-S)*P:l.l2p(C-u)+x,D=p?O*S+(1-S)*P:l.l2p(C+u)+x,z=l.l2p(C-a*_)+x,N=l.l2p(C+i*_)+x,V=c.c2p(w.q1,!0),X=c.c2p(w.q3,!0),J=v.constrain(c.c2p(w.med,!0),Math.min(V,X)+1,Math.max(V,X)-1),G=void 0===w.lf||!1===t.boxpoints,Z=c.c2p(G?w.min:w.lf,!0),re=c.c2p(G?w.max:w.uf,!0),j=c.c2p(w.ln,!0),B=c.c2p(w.un,!0);s?m.select(this).attr("d","M"+J+","+z+"V"+N+"M"+V+","+A+"V"+O+(T?"H"+j+"L"+J+","+N+"L"+B+","+O:"")+"H"+X+"V"+A+(T?"H"+B+"L"+J+","+z+"L"+j+","+A:"")+"ZM"+V+","+P+"H"+Z+"M"+X+","+P+"H"+re+(0===f?"":"M"+Z+","+E+"V"+D+"M"+re+","+E+"V"+D)):m.select(this).attr("d","M"+z+","+J+"H"+N+"M"+A+","+V+"H"+O+(T?"V"+j+"L"+N+","+J+"L"+O+","+B:"")+"V"+X+"H"+A+(T?"V"+B+"L"+z+","+J+"L"+A+","+j:"")+"ZM"+P+","+V+"V"+Z+"M"+P+","+X+"V"+re+(0===f?"":"M"+E+","+Z+"H"+D+"M"+E+","+re+"H"+D))})}function e(r,o,t,d){var a=o.x,i=o.y,s=d.bdPos,c=d.bPos,l=t.boxpoints||t.points;v.seedPseudoRandom();var p=r.selectAll("g.points").data(l?function(u){return u.forEach(function(x){x.t=d,x.trace=t}),u}:[]);p.enter().append("g").attr("class","points"),p.exit().remove();var g=p.selectAll("path").data(function(u){var x,f,T=u.pts2,_=Math.max((u.max-u.min)/10,u.q3-u.q1),k=1e-9*_,w=.01*_,C=[],A=0;if(t.jitter){if(0===_)for(A=1,C=new Array(T.length),x=0;x<T.length;x++)C[x]=1;else for(x=0;x<T.length;x++){var O=Math.max(0,x-5),P=T[O].v,S=Math.min(T.length-1,x+5),E=T[S].v;"all"!==l&&(T[x].v<u.lf?E=Math.min(E,u.lf):P=Math.max(P,u.uf));var D=Math.sqrt(w*(S-O)/(E-P+k))||0;D=v.constrain(Math.abs(D),0,1),C.push(D),A=Math.max(D,A)}f=2*t.jitter/(A||1)}for(x=0;x<T.length;x++){var z=T[x],N=z.v,V=t.jitter?f*C[x]*(v.pseudoRandom()-.5):0,X=u.pos+c+s*(t.pointpos+V);"h"===t.orientation?(z.y=X,z.x=N):(z.x=X,z.y=N),"suspectedoutliers"===l&&N<u.uo&&N>u.lo&&(z.so=!0)}return T});g.enter().append("path").classed("point",!0),g.exit().remove(),g.call(b.translatePoints,a,i)}function n(r,o,t,d){var a,i,s=o.val,c=o.pos,l=!!c.rangebreaks,p=d.bPos,g=d.bPosPxOffset||0,u=t.boxmean||(t.meanline||{}).visible;Array.isArray(d.bdPos)?(a=d.bdPos[0],i=d.bdPos[1]):(a=d.bdPos,i=d.bdPos);var x=r.selectAll("path.mean").data("box"===t.type&&t.boxmean||"violin"===t.type&&t.box.visible&&t.meanline.visible?v.identity:[]);x.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),x.exit().remove(),x.each(function(f){var T=c.c2l(f.pos+p,!0),_=c.l2p(T-a)+g,k=c.l2p(T+i)+g,w=l?(_+k)/2:c.l2p(T)+g,C=s.c2p(f.mean,!0),A=s.c2p(f.mean-f.sd,!0),O=s.c2p(f.mean+f.sd,!0);"h"===t.orientation?m.select(this).attr("d","M"+C+","+_+"V"+k+("sd"===u?"m0,0L"+A+","+w+"L"+C+","+_+"L"+O+","+w+"Z":"")):m.select(this).attr("d","M"+_+","+C+"H"+k+("sd"===u?"m0,0L"+w+","+A+"L"+_+","+C+"L"+w+","+O+"Z":""))})}Q.exports={plot:function(r,o,t,d){var a=o.xaxis,i=o.yaxis;v.makeTraceGroups(d,t,"trace boxes").each(function(s){var c,l,p=m.select(this),g=s[0],u=g.t,x=g.trace;u.wdPos=u.bdPos*x.whiskerwidth,!0!==x.visible||u.empty?p.remove():("h"===x.orientation?(c=i,l=a):(c=a,l=i),h(p,{pos:c,val:l},x,u),e(p,{x:a,y:i},x,u),n(p,{pos:c,val:l},x,u))})},plotBoxAndWhiskers:h,plotPoints:e,plotBoxMean:n}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(y,Q,K){"use strict";Q.exports=function(m,v){var b,h,e=m.cd,n=m.xaxis,r=m.yaxis,o=[];if(!1===v)for(b=0;b<e.length;b++)for(h=0;h<(e[b].pts||[]).length;h++)e[b].pts[h].selected=0;else for(b=0;b<e.length;b++)for(h=0;h<(e[b].pts||[]).length;h++){var t=e[b].pts[h],d=n.c2p(t.x),a=r.c2p(t.y);v.contains([d,a],null,t.i,m)?(o.push({pointNumber:t.i,x:n.c2d(t.x),y:r.c2d(t.y)}),t.selected=1):t.selected=0}return o}},{}],693:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/color"),b=y("../../components/drawing");Q.exports={style:function(h,e,n){var r=n||m.select(h).selectAll("g.trace.boxes");r.style("opacity",function(o){return o[0].trace.opacity}),r.each(function(o){var t=m.select(this),d=o[0].trace,a=d.line.width;function i(l,p,g,u){l.style("stroke-width",p+"px").call(v.stroke,g).call(v.fill,u)}var s=t.selectAll("path.box");if("candlestick"===d.type)s.each(function(l){if(!l.empty){var p=m.select(this),g=d[l.dir];i(p,g.line.width,g.line.color,g.fillcolor),p.style("opacity",d.selectedpoints&&!l.selected?.3:1)}});else{i(s,a,d.line.color,d.fillcolor),t.selectAll("path.mean").style({"stroke-width":a,"stroke-dasharray":2*a+"px,"+a+"px"}).call(v.stroke,d.line.color);var c=t.selectAll("path.point");b.pointStyle(c,d,h)}})},styleOnSelect:function(h,e,n){var r=e[0].trace,o=n.selectAll("path.point");r.selectedpoints?b.selectedPointStyle(o,r):b.pointStyle(o,r,h)}}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(y,Q,K){"use strict";var m=y("../../lib").extendFlat,v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../ohlc/attributes"),h=y("../box/attributes");function e(n){return{line:{color:m({},h.line.color,{dflt:n}),width:h.line.width,editType:"style"},fillcolor:h.fillcolor,editType:"style"}}Q.exports={xperiod:b.xperiod,xperiod0:b.xperiod0,xperiodalignment:b.xperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),x:b.x,open:b.open,high:b.high,low:b.low,close:b.close,line:{width:m({},h.line.width,{}),editType:"style"},increasing:e(b.increasing.line.color.dflt),decreasing:e(b.decreasing.line.color.dflt),text:b.text,hovertext:b.hovertext,whiskerwidth:m({},h.whiskerwidth,{dflt:0}),hoverlabel:b.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("../../plots/cartesian/align_period"),h=y("../ohlc/calc").calcCommon;function e(n,r,o,t){return{min:o,q1:Math.min(n,t),med:t,q3:Math.max(n,t),max:r}}Q.exports=function(n,r){var o=n._fullLayout,t=v.getFromId(n,r.xaxis),d=v.getFromId(n,r.yaxis),a=t.makeCalcdata(r,"x"),i=b(r,t,"x",a).vals,s=h(n,r,a,i,d,e);return s.length?(m.extendFlat(s[0].t,{num:o._numBoxes,dPos:m.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),o._numBoxes++,s):[{t:{empty:!0}}]}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/color"),b=y("../ohlc/ohlc_defaults"),h=y("../scatter/period_defaults"),e=y("./attributes");function n(r,o,t,d){var a=t(d+".line.color");t(d+".line.width",o.line.width),t(d+".fillcolor",v.addOpacity(a,.5))}Q.exports=function(r,o,t,d){function a(i,s){return m.coerce(r,o,e,i,s)}b(r,o,a,d)?(h(r,o,d,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),n(0,o,a,"increasing"),n(0,o,a,"decreasing"),a("text"),a("hovertext"),a("whiskerwidth"),d._requestRangeslider[o.xaxis]=!0):o.visible=!1}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"candlestick",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:y("./attributes"),layoutAttributes:y("../box/layout_attributes"),supplyLayoutDefaults:y("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:y("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("../box/plot").plot,layerName:"boxlayer",style:y("../box/style").style,hoverPoints:y("../ohlc/hover").hoverPoints,selectPoints:y("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(y,Q,K){"use strict";var m=y("./axis_defaults"),v=y("../../plot_api/plot_template");Q.exports=function(b,h,e,n,r){var o,t,d,a;n("a")||(n("da"),n("a0")),n("b")||(n("db"),n("b0")),o=b,t=h,d=e,a=r,["aaxis","baxis"].forEach(function(i){var s=i.charAt(0),c=o[i]||{},l=v.newContainer(t,i);m(c,l,{noTicklabelstep:!0,tickfont:"x",id:s+"axis",letter:s,font:t.font,name:i,data:o[s],calendar:t.calendar,dfltColor:a,bgColor:d.paper_bgcolor,autotypenumbersDflt:d.autotypenumbers,fullLayout:d}),l._categories=l._categories||[],o[i]||"-"===c.type||(o[i]={type:c.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(y,Q,K){"use strict";var m=y("../../lib").isArrayOrTypedArray;Q.exports=function(v){return function b(h,e){if(!m(h)||e>=10)return null;for(var n=1/0,r=-1/0,o=h.length,t=0;t<o;t++){var d=h[t];if(m(d)){var a=b(d,e+1);a&&(n=Math.min(a[0],n),r=Math.max(a[1],r))}else n=Math.min(d,n),r=Math.max(d,r)}return[n,r]}(v,0)}},{"../../lib":515}],700:[function(y,Q,K){"use strict";var m=y("../../plots/font_attributes"),v=y("./axis_attributes"),b=y("../../components/color/attributes"),h=m({editType:"calc"});h.family.dflt='"Open Sans", verdana, arial, sans-serif',h.size.dflt=12,h.color.dflt=b.defaultLine,Q.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:v,baxis:v,font:h,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(y,Q,K){"use strict";var m=y("../../lib").isArrayOrTypedArray;Q.exports=function(v,b,h,e){var n,r,o,t,d,a,i,s,c,l,p,g,u,x=m(h)?"a":"b",f=("a"===x?v.aaxis:v.baxis).smoothing,T="a"===x?v.a2i:v.b2j,_="a"===x?h:e,k="a"===x?e:h,w="a"===x?b.a.length:b.b.length,C="a"===x?b.b.length:b.a.length,A=Math.floor("a"===x?v.b2j(k):v.a2i(k)),O="a"===x?function(re){return v.evalxy([],re,A)}:function(re){return v.evalxy([],A,re)};f&&(o=Math.max(0,Math.min(C-2,A)),t=A-o,r="a"===x?function(re,j){return v.dxydi([],re,o,j,t)}:function(re,j){return v.dxydj([],o,re,t,j)});var P=T(_[0]),S=T(_[1]),E=P<S?1:-1,D=1e-8*(S-P),z=E>0?Math.floor:Math.ceil,N=E>0?Math.ceil:Math.floor,V=E>0?Math.min:Math.max,X=E>0?Math.max:Math.min,J=z(P+D),G=N(S-D),Z=[[i=O(P)]];for(n=J;n*E<G*E;n+=E)d=[],p=X(P,n),u=(g=V(S,n+E))-p,a=Math.max(0,Math.min(w-2,Math.floor(.5*(p+g)))),s=O(g),f&&(c=r(a,p-a),l=r(a,g-a),d.push([i[0]+c[0]/3*u,i[1]+c[1]/3*u]),d.push([s[0]-l[0]/3*u,s[1]-l[1]/3*u])),d.push(s),Z.push(d),i=s;return Z}},{"../../lib":515}],702:[function(y,Q,K){"use strict";var m=y("../../plots/font_attributes"),v=y("../../components/color/attributes"),b=y("../../plots/cartesian/layout_attributes"),h=y("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=y("../../plot_api/edit_types").overrideAll,n=y("../../components/drawing/attributes").dash,r=y("../../lib/extend").extendFlat;Q.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:m({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:b.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:m({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:h("tick label")},tickformatstops:e(b.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:v.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:r({},n,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:r({},n,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:v.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:m({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(y,Q,K){"use strict";var m=y("./attributes"),v=y("../../components/color").addOpacity,b=y("../../registry"),h=y("../../lib"),e=y("../../plots/cartesian/tick_value_defaults"),n=y("../../plots/cartesian/tick_label_defaults"),r=y("../../plots/cartesian/prefix_suffix_defaults"),o=y("../../plots/cartesian/category_order_defaults"),t=y("../../plots/cartesian/set_convert"),d=y("../../plots/cartesian/axis_autotype");Q.exports=function(a,i,s){var c=s.letter,l=s.font||{},p=m[c+"axis"];function g(E,D){return h.coerce(a,i,p,E,D)}function u(E,D){return h.coerce2(a,i,p,E,D)}s.name&&(i._name=s.name,i._id=s.name),g("autotypenumbers",s.autotypenumbersDflt);var x=g("type");"-"===x&&(s.data&&function(E,D){if("-"===E.type){var z=E._id.charAt(0);E.type=d(D,E[z+"calendar"],{autotypenumbers:E.autotypenumbers})}}(i,s.data),"-"===i.type?i.type="linear":x=a.type=i.type),g("smoothing"),g("cheatertype"),g("showticklabels"),g("labelprefix",c+" = "),g("labelsuffix"),g("showtickprefix"),g("showticksuffix"),g("separatethousands"),g("tickformat"),g("exponentformat"),g("minexponent"),g("showexponent"),g("categoryorder"),g("tickmode"),g("tickvals"),g("ticktext"),g("tick0"),g("dtick"),"array"===i.tickmode&&(g("arraytick0"),g("arraydtick")),g("labelpadding"),i._hovertitle=c,"date"===x&&b.getComponentMethod("calendars","handleDefaults")(a,i,"calendar",s.calendar),t(i,s.fullLayout),i.c2p=h.identity;var f=g("color",s.dfltColor),T=f===a.color?f:l.color;g("title.text")&&(h.coerceFont(g,"title.font",{family:l.family,size:h.bigFont(l.size),color:T}),g("title.offset")),g("tickangle"),g("autorange",!i.isValidRange(a.range))&&g("rangemode"),g("range"),i.cleanRange(),g("fixedrange"),e(a,i,g,x),r(a,i,g,x,s),n(a,i,g,x,s),o(a,i,g,{data:s.data,dataAttr:c});var _=u("gridcolor",v(f,.3)),k=u("gridwidth"),w=u("griddash"),C=g("showgrid");C||(delete i.gridcolor,delete i.gridwidth,delete i.griddash);var A=u("startlinecolor",f),O=u("startlinewidth",k);g("startline",i.showgrid||!!A||!!O)||(delete i.startlinecolor,delete i.startlinewidth);var P=u("endlinecolor",f),S=u("endlinewidth",k);return g("endline",i.showgrid||!!P||!!S)||(delete i.endlinecolor,delete i.endlinewidth),C?(g("minorgridcount"),g("minorgridwidth",k),g("minorgriddash",w),g("minorgridcolor",v(_,.06)),i.minorgridcount||(delete i.minorgridwidth,delete i.minorgriddash,delete i.minorgridcolor)):(delete i.gridcolor,delete i.gridwidth,delete i.griddash),"none"===i.showticklabels&&(delete i.tickfont,delete i.tickangle,delete i.showexponent,delete i.exponentformat,delete i.minexponent,delete i.tickformat,delete i.showticksuffix,delete i.showtickprefix),i.showticksuffix||delete i.ticksuffix,i.showtickprefix||delete i.tickprefix,g("tickmode"),i}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../lib").isArray1D,b=y("./cheater_basis"),h=y("./array_minmax"),e=y("./calc_gridlines"),n=y("./calc_labels"),r=y("./calc_clippath"),o=y("../heatmap/clean_2d_array"),t=y("./smooth_fill_2d_array"),d=y("../heatmap/convert_column_xyz"),a=y("./set_convert");Q.exports=function(i,s){var c=m.getFromId(i,s.xaxis),l=m.getFromId(i,s.yaxis),p=s.aaxis,g=s.baxis,u=s.x,x=s.y,f=[];u&&v(u)&&f.push("x"),x&&v(x)&&f.push("y"),f.length&&d(s,p,g,"a","b",f);var T=s._a=s._a||s.a,_=s._b=s._b||s.b;u=s._x||s.x,x=s._y||s.y;var k={};s._cheater&&(u=b("index"===p.cheatertype?T.length:T,"index"===g.cheatertype?_.length:_,s.cheaterslope)),s._x=u=o(u),s._y=x=o(x),t(u,T,_),t(x,T,_),a(s),s.setScale();var A=h(u),O=h(x),P=.5*(A[1]-A[0]),S=.5*(A[1]+A[0]),E=.5*(O[1]-O[0]),D=.5*(O[1]+O[0]);return O=[D-1.3*E,D+1.3*E],s._extremes[c._id]=m.findExtremes(c,A=[S-1.3*P,S+1.3*P],{padded:!0}),s._extremes[l._id]=m.findExtremes(l,O,{padded:!0}),e(s,"a","b"),e(s,"b","a"),n(s,p),n(s,g),k.clipsegments=r(s._xctrl,s._yctrl,p,g),k.x=u,k.y=x,k.a=T,k.b=_,[k]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h){var e,n,r,o=[],t=!!b.smoothing,d=!!h.smoothing,a=m[0].length-1,i=m.length-1;for(e=0,n=[],r=[];e<=a;e++)n[e]=m[0][e],r[e]=v[0][e];for(o.push({x:n,y:r,bicubic:t}),e=0,n=[],r=[];e<=i;e++)n[e]=m[e][a],r[e]=v[e][a];for(o.push({x:n,y:r,bicubic:d}),e=a,n=[],r=[];e>=0;e--)n[a-e]=m[i][e],r[a-e]=v[i][e];for(o.push({x:n,y:r,bicubic:t}),e=i,n=[],r=[];e>=0;e--)n[i-e]=m[e][0],r[i-e]=v[e][0];return o.push({x:n,y:r,bicubic:d}),o}},{}],706:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../lib/extend").extendFlat;Q.exports=function(b,h,e){var n,r,o,t,d,a,i,s,c,l,p,g,u,x,f=b["_"+h],T=b[h+"axis"],_=T._gridlines=[],k=T._minorgridlines=[],w=T._boundarylines=[],C=b["_"+e],A=b[e+"axis"];"array"===T.tickmode&&(T.tickvals=f.slice());var O=b._xctrl,P=b._yctrl,S=O[0].length,E=O.length,D=b._a.length,z=b._b.length;m.prepTicks(T),"array"===T.tickmode&&delete T.tickvals;var N=T.smoothing?3:1;function V(J){var G,Z,re,j,B,H,ee,U,$,q,te,ne,se=[],ie=[],ue={};if("b"===h)for(Z=b.b2j(J),re=Math.floor(Math.max(0,Math.min(z-2,Z))),j=Z-re,ue.length=z,ue.crossLength=D,ue.xy=function(le){return b.evalxy([],le,Z)},ue.dxy=function(le,de){return b.dxydi([],le,re,de,j)},G=0;G<D;G++)H=Math.min(D-2,G),ee=G-H,U=b.evalxy([],G,Z),A.smoothing&&G>0&&($=b.dxydi([],G-1,re,0,j),se.push(B[0]+$[0]/3),ie.push(B[1]+$[1]/3),q=b.dxydi([],G-1,re,1,j),se.push(U[0]-q[0]/3),ie.push(U[1]-q[1]/3)),se.push(U[0]),ie.push(U[1]),B=U;else for(G=b.a2i(J),H=Math.floor(Math.max(0,Math.min(D-2,G))),ee=G-H,ue.length=D,ue.crossLength=z,ue.xy=function(le){return b.evalxy([],G,le)},ue.dxy=function(le,de){return b.dxydj([],H,le,ee,de)},Z=0;Z<z;Z++)re=Math.min(z-2,Z),j=Z-re,U=b.evalxy([],G,Z),A.smoothing&&Z>0&&(te=b.dxydj([],H,Z-1,ee,0),se.push(B[0]+te[0]/3),ie.push(B[1]+te[1]/3),ne=b.dxydj([],H,Z-1,ee,1),se.push(U[0]-ne[0]/3),ie.push(U[1]-ne[1]/3)),se.push(U[0]),ie.push(U[1]),B=U;return ue.axisLetter=h,ue.axis=T,ue.crossAxis=A,ue.value=J,ue.constvar=e,ue.index=s,ue.x=se,ue.y=ie,ue.smoothing=A.smoothing,ue}function X(J){var G,Z,re,j,B,H=[],ee=[],U={};if(U.length=f.length,U.crossLength=C.length,"b"===h)for(re=Math.max(0,Math.min(z-2,J)),B=Math.min(1,Math.max(0,J-re)),U.xy=function($){return b.evalxy([],$,J)},U.dxy=function($,q){return b.dxydi([],$,re,q,B)},G=0;G<S;G++)H[G]=O[J*N][G],ee[G]=P[J*N][G];else for(Z=Math.max(0,Math.min(D-2,J)),j=Math.min(1,Math.max(0,J-Z)),U.xy=function($){return b.evalxy([],J,$)},U.dxy=function($,q){return b.dxydj([],Z,$,j,q)},G=0;G<E;G++)H[G]=O[G][J*N],ee[G]=P[G][J*N];return U.axisLetter=h,U.axis=T,U.crossAxis=A,U.value=f[J],U.constvar=e,U.index=J,U.x=H,U.y=ee,U.smoothing=A.smoothing,U}if("array"===T.tickmode){for(t=5e-15,a=(d=[Math.floor((f.length-1-T.arraytick0)/T.arraydtick*(1+t)),Math.ceil(-T.arraytick0/T.arraydtick/(1+t))].sort(function(J,G){return J-G}))[0]-1,i=d[1]+1,s=a;s<i;s++)(r=T.arraytick0+T.arraydtick*s)<0||r>f.length-1||_.push(v(X(r),{color:T.gridcolor,width:T.gridwidth,dash:T.griddash}));for(s=a;s<i;s++)if(o=T.arraytick0+T.arraydtick*s,p=Math.min(o+T.arraydtick,f.length-1),!(o<0||o>f.length-1||p<0||p>f.length-1))for(g=f[o],u=f[p],n=0;n<T.minorgridcount;n++)(x=p-o)<=0||(l=g+(u-g)*(n+1)/(T.minorgridcount+1)*(T.arraydtick/x))<f[0]||l>f[f.length-1]||k.push(v(V(l),{color:T.minorgridcolor,width:T.minorgridwidth,dash:T.minorgriddash}));T.startline&&w.push(v(X(0),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&w.push(v(X(f.length-1),{color:T.endlinecolor,width:T.endlinewidth}))}else{for(t=5e-15,a=(d=[Math.floor((f[f.length-1]-T.tick0)/T.dtick*(1+t)),Math.ceil((f[0]-T.tick0)/T.dtick/(1+t))].sort(function(J,G){return J-G}))[0],i=d[1],s=a;s<=i;s++)_.push(v(V(c=T.tick0+T.dtick*s),{color:T.gridcolor,width:T.gridwidth,dash:T.griddash}));for(s=a-1;s<i+1;s++)for(c=T.tick0+T.dtick*s,n=0;n<T.minorgridcount;n++)(l=c+T.dtick*(n+1)/(T.minorgridcount+1))<f[0]||l>f[f.length-1]||k.push(v(V(l),{color:T.minorgridcolor,width:T.minorgridwidth,dash:T.minorgriddash}));T.startline&&w.push(v(V(f[0]),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&w.push(v(V(f[f.length-1]),{color:T.endlinecolor,width:T.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../lib/extend").extendFlat;Q.exports=function(b,h){var e,n,r,o=h._labels=[],t=h._gridlines;for(e=0;e<t.length;e++)r=t[e],-1!==["start","both"].indexOf(h.showticklabels)&&(n=m.tickText(h,r.value),v(n,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:r.xy(0),dxy:r.dxy(0,0),axis:r.axis,length:r.crossAxis.length,font:r.axis.tickfont,isFirst:0===e,isLast:e===t.length-1}),o.push(n)),-1!==["end","both"].indexOf(h.showticklabels)&&(n=m.tickText(h,r.value),v(n,{endAnchor:!1,xy:r.xy(r.crossLength-1),dxy:r.dxy(r.crossLength-2,1),axis:r.axis,length:r.crossAxis.length,font:r.axis.tickfont,isFirst:0===e,isLast:e===t.length-1}),o.push(n))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h){var e=m[0]-v[0],n=m[1]-v[1],r=b[0]-v[0],o=b[1]-v[1],t=Math.pow(e*e+n*n,.25),d=Math.pow(r*r+o*o,.25),a=(d*d*e-t*t*r)*h,i=(d*d*n-t*t*o)*h,s=d*(t+d)*3,c=t*(t+d)*3;return[[v[0]+(s&&a/s),v[1]+(s&&i/s)],[v[0]-(c&&a/c),v[1]-(c&&i/c)]]}},{}],709:[function(y,Q,K){"use strict";var m=y("../../lib").isArrayOrTypedArray;Q.exports=function(v,b,h){var e,n,r,o,t,d,a=[],i=m(v)?v.length:v,s=m(b)?b.length:b,c=m(v)?v:null,l=m(b)?b:null;c&&(r=(c.length-1)/(c[c.length-1]-c[0])/(i-1)),l&&(o=(l.length-1)/(l[l.length-1]-l[0])/(s-1));var p=1/0,g=-1/0;for(n=0;n<s;n++)for(a[n]=[],t=l?(l[n]-l[0])*o:n/(s-1),e=0;e<i;e++)d=(c?(c[e]-c[0])*r:e/(i-1))-t*h,p=Math.min(d,p),g=Math.max(d,g),a[n][e]=d;var u=1/(g-p),x=-p*u;for(n=0;n<s;n++)for(e=0;e<i;e++)a[n][e]=u*a[n][e]+x;return a}},{"../../lib":515}],710:[function(y,Q,K){"use strict";var m=y("./catmull_rom"),v=y("../../lib").ensureArray;function b(h,e,n){return[(2*(-.5*n[0]+1.5*e[0])+h[0])/3,(2*(-.5*n[1]+1.5*e[1])+h[1])/3]}Q.exports=function(h,e,n,r,o,t){var d,a,i,s,c,l,p,g,u,x,f=n[0].length,T=n.length,_=o?3*f-2:f,k=t?3*T-2:T;for(h=v(h,k),e=v(e,k),i=0;i<k;i++)h[i]=v(h[i],_),e[i]=v(e[i],_);for(a=0,s=0;a<T;a++,s+=t?3:1)for(c=h[s],l=e[s],p=n[a],g=r[a],d=0,i=0;d<f;d++,i+=o?3:1)c[i]=p[d],l[i]=g[d];if(o)for(a=0,s=0;a<T;a++,s+=t?3:1){for(d=1,i=3;d<f-1;d++,i+=3)u=m([n[a][d-1],r[a][d-1]],[n[a][d],r[a][d]],[n[a][d+1],r[a][d+1]],o),h[s][i-1]=u[0][0],e[s][i-1]=u[0][1],h[s][i+1]=u[1][0],e[s][i+1]=u[1][1];x=b([h[s][0],e[s][0]],[h[s][2],e[s][2]],[h[s][3],e[s][3]]),h[s][1]=x[0],e[s][1]=x[1],x=b([h[s][_-1],e[s][_-1]],[h[s][_-3],e[s][_-3]],[h[s][_-4],e[s][_-4]]),h[s][_-2]=x[0],e[s][_-2]=x[1]}if(t)for(i=0;i<_;i++){for(s=3;s<k-3;s+=3)u=m([h[s-3][i],e[s-3][i]],[h[s][i],e[s][i]],[h[s+3][i],e[s+3][i]],t),h[s-1][i]=u[0][0],e[s-1][i]=u[0][1],h[s+1][i]=u[1][0],e[s+1][i]=u[1][1];x=b([h[0][i],e[0][i]],[h[2][i],e[2][i]],[h[3][i],e[3][i]]),h[1][i]=x[0],e[1][i]=x[1],x=b([h[k-1][i],e[k-1][i]],[h[k-3][i],e[k-3][i]],[h[k-4][i],e[k-4][i]]),h[k-2][i]=x[0],e[k-2][i]=x[1]}if(o&&t)for(s=1;s<k;s+=(s+1)%3==0?2:1){for(i=3;i<_-3;i+=3)u=m([h[s][i-3],e[s][i-3]],[h[s][i],e[s][i]],[h[s][i+3],e[s][i+3]],o),h[s][i-1]=.5*(h[s][i-1]+u[0][0]),e[s][i-1]=.5*(e[s][i-1]+u[0][1]),h[s][i+1]=.5*(h[s][i+1]+u[1][0]),e[s][i+1]=.5*(e[s][i+1]+u[1][1]);x=b([h[s][0],e[s][0]],[h[s][2],e[s][2]],[h[s][3],e[s][3]]),h[s][1]=.5*(h[s][1]+x[0]),e[s][1]=.5*(e[s][1]+x[1]),x=b([h[s][_-1],e[s][_-1]],[h[s][_-3],e[s][_-3]],[h[s][_-4],e[s][_-4]]),h[s][_-2]=.5*(h[s][_-2]+x[0]),e[s][_-2]=.5*(e[s][_-2]+x[1])}return[h,e]}},{"../../lib":515,"./catmull_rom":708}],711:[function(y,Q,K){"use strict";Q.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(y,Q,K){"use strict";Q.exports=function(m,v,b){return v&&b?function(h,e,n,r,o){var t,s,c;h||(h=[]),e*=3,n*=3;var l=r*r,p=1-r,g=p*p,u=p*r*2,x=-3*g,f=3*(g-u),T=3*(u-l),_=3*l,k=o*o,w=k*o,C=1-o,A=C*C,O=A*C;for(c=0;c<m.length;c++)t=x*(s=m[c])[n][e]+f*s[n][e+1]+T*s[n][e+2]+_*s[n][e+3],h[c]=O*t+3*(A*o*(x*s[n+1][e]+f*s[n+1][e+1]+T*s[n+1][e+2]+_*s[n+1][e+3])+C*k*(x*s[n+2][e]+f*s[n+2][e+1]+T*s[n+2][e+2]+_*s[n+2][e+3]))+w*(x*s[n+3][e]+f*s[n+3][e+1]+T*s[n+3][e+2]+_*s[n+3][e+3]);return h}:v?function(h,e,n,r,o){var t,a,i;h||(h=[]),e*=3;var s=r*r,c=1-r,l=c*c,p=c*r*2,g=-3*l,u=3*(l-p),x=3*(p-s),f=3*s,T=1-o;for(a=0;a<m.length;a++)t=g*(i=m[a])[n][e]+u*i[n][e+1]+x*i[n][e+2]+f*i[n][e+3],h[a]=T*t+o*(g*i[n+1][e]+u*i[n+1][e+1]+x*i[n+1][e+2]+f*i[n+1][e+3]);return h}:b?function(h,e,n,r,o){var t,s,c;h||(h=[]),n*=3;var l=o*o,p=l*o,g=1-o,u=g*g,x=u*g;for(s=0;s<m.length;s++)t=(c=m[s])[n][e+1]-c[n][e],h[s]=x*t+3*(u*o*(c[n+1][e+1]-c[n+1][e])+g*l*(c[n+2][e+1]-c[n+2][e]))+p*(c[n+3][e+1]-c[n+3][e]);return h}:function(h,e,n,r,o){var t,a,i;h||(h=[]);var s=1-o;for(a=0;a<m.length;a++)t=(i=m[a])[n][e+1]-i[n][e],h[a]=s*t+o*(i[n+1][e+1]-i[n+1][e]);return h}}},{}],713:[function(y,Q,K){"use strict";Q.exports=function(m,v,b){return v&&b?function(h,e,n,r,o){var t,s,c;h||(h=[]),e*=3,n*=3;var l=r*r,p=l*r,g=1-r,u=g*g,x=u*g,f=o*o,T=1-o,_=T*T,k=T*o*2,w=-3*_,C=3*(_-k),A=3*(k-f),O=3*f;for(c=0;c<m.length;c++)t=w*(s=m[c])[n][e]+C*s[n+1][e]+A*s[n+2][e]+O*s[n+3][e],h[c]=x*t+3*(u*r*(w*s[n][e+1]+C*s[n+1][e+1]+A*s[n+2][e+1]+O*s[n+3][e+1])+g*l*(w*s[n][e+2]+C*s[n+1][e+2]+A*s[n+2][e+2]+O*s[n+3][e+2]))+p*(w*s[n][e+3]+C*s[n+1][e+3]+A*s[n+2][e+3]+O*s[n+3][e+3]);return h}:v?function(h,e,n,r,o){var t,s,c;h||(h=[]),e*=3;var l=o*o,p=l*o,g=1-o,u=g*g,x=u*g;for(s=0;s<m.length;s++)t=(c=m[s])[n+1][e]-c[n][e],h[s]=x*t+3*(u*o*(c[n+1][e+1]-c[n][e+1])+g*l*(c[n+1][e+2]-c[n][e+2]))+p*(c[n+1][e+3]-c[n][e+3]);return h}:b?function(h,e,n,r,o){var t,a,i;h||(h=[]),n*=3;var s=1-r,c=o*o,l=1-o,p=l*l,g=l*o*2,u=-3*p,x=3*(p-g),f=3*(g-c),T=3*c;for(a=0;a<m.length;a++)t=u*(i=m[a])[n][e]+x*i[n+1][e]+f*i[n+2][e]+T*i[n+3][e],h[a]=s*t+r*(u*i[n][e+1]+x*i[n+1][e+1]+f*i[n+2][e+1]+T*i[n+3][e+1]);return h}:function(h,e,n,r,o){var t,a,i;h||(h=[]);var s=1-r;for(a=0;a<m.length;a++)t=(i=m[a])[n+1][e]-i[n][e],h[a]=s*t+r*(i[n+1][e+1]-i[n][e+1]);return h}}},{}],714:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h,e){var n=v-2,r=b-2;return h&&e?function(o,t,d){var a,l,p;o||(o=[]);var g=Math.max(0,Math.min(Math.floor(t),n)),u=Math.max(0,Math.min(Math.floor(d),r)),x=Math.max(0,Math.min(1,t-g)),f=Math.max(0,Math.min(1,d-u));g*=3,u*=3;var T=x*x,_=T*x,k=1-x,w=k*k,C=w*k,A=f*f,O=A*f,P=1-f,S=P*P,E=S*P;for(p=0;p<m.length;p++)a=C*(l=m[p])[u][g]+3*(w*x*l[u][g+1]+k*T*l[u][g+2])+_*l[u][g+3],o[p]=E*a+3*(S*f*(C*l[u+1][g]+3*(w*x*l[u+1][g+1]+k*T*l[u+1][g+2])+_*l[u+1][g+3])+P*A*(C*l[u+2][g]+3*(w*x*l[u+2][g+1]+k*T*l[u+2][g+2])+_*l[u+2][g+3]))+O*(C*l[u+3][g]+3*(w*x*l[u+3][g+1]+k*T*l[u+3][g+2])+_*l[u+3][g+3]);return o}:h?function(o,t,d){o||(o=[]);var a,l,p,g=Math.max(0,Math.min(Math.floor(t),n)),u=Math.max(0,Math.min(Math.floor(d),r)),x=Math.max(0,Math.min(1,t-g)),f=Math.max(0,Math.min(1,d-u));g*=3;var T=x*x,_=T*x,k=1-x,w=k*k,C=w*k,A=1-f;for(l=0;l<m.length;l++)a=A*(p=m[l])[u][g]+f*p[u+1][g],o[l]=C*a+3*(w*x*(A*p[u][g+1]+f*p[u+1][g+1])+k*T*(A*p[u][g+2]+f*p[u+1][g+1]))+_*(A*p[u][g+3]+f*p[u+1][g+1]);return o}:e?function(o,t,d){o||(o=[]);var a,l,p,g=Math.max(0,Math.min(Math.floor(t),n)),u=Math.max(0,Math.min(Math.floor(d),r)),x=Math.max(0,Math.min(1,t-g)),f=Math.max(0,Math.min(1,d-u));u*=3;var T=f*f,_=T*f,k=1-f,w=k*k,C=w*k,A=1-x;for(l=0;l<m.length;l++)a=A*(p=m[l])[u][g]+x*p[u][g+1],o[l]=C*a+3*(w*f*(A*p[u+1][g]+x*p[u+1][g+1])+k*T*(A*p[u+2][g]+x*p[u+2][g+1]))+_*(A*p[u+3][g]+x*p[u+3][g+1]);return o}:function(o,t,d){o||(o=[]);var a,s,c,l=Math.max(0,Math.min(Math.floor(t),n)),p=Math.max(0,Math.min(Math.floor(d),r)),g=Math.max(0,Math.min(1,t-l)),u=Math.max(0,Math.min(1,d-p)),x=1-u,f=1-g;for(s=0;s<m.length;s++)a=f*(c=m[s])[p][l]+g*c[p][l+1],o[s]=x*a+u*(f*c[p+1][l]+g*c[p+1][l+1]);return o}}},{}],715:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./xy_defaults"),b=y("./ab_defaults"),h=y("./attributes"),e=y("../../components/color/attributes");Q.exports=function(n,r,o,t){function d(i,s){return m.coerce(n,r,h,i,s)}r._clipPathId="clip"+r.uid+"carpet";var a=d("color",e.defaultLine);m.coerceFont(d,"font"),d("carpet"),b(n,r,t,d,a),r.a&&r.b?(r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0),v(n,r,d)||(r.visible=!1),r._cheater&&d("cheaterslope")):r.visible=!1}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),plot:y("./plot"),calc:y("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(y,Q,K){"use strict";Q.exports=function(m,v){for(var b,h=m._fullData.length,e=0;e<h;e++){var n=m._fullData[e];if(n.index!==v.index&&"carpet"===n.type&&(b||(b=n),n.carpet===v.carpet))return n}return b}},{}],718:[function(y,Q,K){"use strict";Q.exports=function(m,v,b){if(0===m.length)return"";var h,e=[],n=b?3:1;for(h=0;h<m.length;h+=n)e.push(m[h]+","+v[h]),b&&h<m.length-n&&(e.push("C"),e.push([m[h+1]+","+v[h+1],m[h+2]+","+v[h+2]+" "].join(" ")));return e.join(b?"":"L")}},{}],719:[function(y,Q,K){"use strict";var m=y("../../lib").isArrayOrTypedArray;Q.exports=function(v,b,h){var e;for(m(v)?v.length>b.length&&(v=v.slice(0,b.length)):v=[],e=0;e<b.length;e++)v[e]=h(b[e]);return v}},{"../../lib":515}],720:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h,e,n){var r=e[0]*m.dpdx(v),o=e[1]*m.dpdy(b),t=1,d=1;if(n){var a=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);d=Math.max(0,(e[0]*n[0]+e[1]*n[1])/a/i)}var c=180*Math.atan2(o,r)/Math.PI;return c<-90?(c+=180,t=-t):c>90&&(c-=180,t=-t),{angle:c,flip:t,p:m.c2p(h,v,b),offsetMultplier:d}}},{}],721:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/drawing"),b=y("./map_1d_array"),h=y("./makepath"),e=y("./orient_text"),n=y("../../lib/svg_text_utils"),r=y("../../lib"),o=r.strRotate,t=r.strTranslate,d=y("../../constants/alignment");function a(p,g,u,x,f,T){var _="const-"+f+"-lines",k=u.selectAll("."+_).data(T);k.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),k.each(function(w){var C=w,O=C.y,P=b([],C.x,p.c2p),S=b([],O,g.c2p),E="M"+h(P,S,C.smoothing);m.select(this).attr("d",E).style("stroke-width",C.width).style("stroke",C.color).style("stroke-dasharray",v.dashStyle(C.dash,C.width)).style("fill","none")}),k.exit().remove()}function i(p,g,u,x,f,T,_,k){var w=T.selectAll("text."+k).data(_);w.enter().append("text").classed(k,!0);var C=0,A={};return w.each(function(O,P){var S;if("auto"===O.axis.tickangle)S=e(x,g,u,O.xy,O.dxy);else{var E=(O.axis.tickangle+180)*Math.PI/180;S=e(x,g,u,O.xy,[Math.cos(E),Math.sin(E)])}P||(A={angle:S.angle,flip:S.flip});var D=(O.endAnchor?-1:1)*S.flip,z=m.select(this).attr({"text-anchor":D>0?"start":"end","data-notex":1}).call(v.font,O.font).text(O.text).call(n.convertToTspans,p),N=v.bBox(this);z.attr("transform",t(S.p[0],S.p[1])+o(S.angle)+t(O.axis.labelpadding*D,.3*N.height)),C=Math.max(C,N.width+O.axis.labelpadding)}),w.exit().remove(),A.maxExtent=C,A}Q.exports=function(p,g,u,x){var f=g.xaxis,T=g.yaxis,_=p._fullLayout._clips;r.makeTraceGroups(x,u,"trace").each(function(k){var w=m.select(this),C=k[0],A=C.trace,O=A.aaxis,P=A.baxis,S=r.ensureSingle(w,"g","minorlayer"),E=r.ensureSingle(w,"g","majorlayer"),D=r.ensureSingle(w,"g","boundarylayer"),z=r.ensureSingle(w,"g","labellayer");w.style("opacity",A.opacity),a(f,T,E,0,"a",O._gridlines),a(f,T,E,0,"b",P._gridlines),a(f,T,S,0,"a",O._minorgridlines),a(f,T,S,0,"b",P._minorgridlines),a(f,T,D,0,"a-boundary",O._boundarylines),a(f,T,D,0,"b-boundary",P._boundarylines);var X,J,G,re,j,B,H,ee,U,$,q,te,ne,se,ie,N=i(p,f,T,A,0,z,O._labels,"a-label"),V=i(p,f,T,A,0,z,P._labels,"b-label");X=p,J=z,G=A,re=f,j=T,B=N,H=V,te=r.aggNums(Math.min,null,G.a),ne=r.aggNums(Math.max,null,G.a),se=r.aggNums(Math.min,null,G.b),ie=r.aggNums(Math.max,null,G.b),$=G.ab2xy(ee=.5*(te+ne),U=se,!0),q=G.dxyda_rough(ee,U),void 0===B.angle&&r.extendFlat(B,e(G,re,j,$,G.dxydb_rough(ee,U))),l(X,J,G,0,$,q,G.aaxis,re,j,B,"a-title"),$=G.ab2xy(ee=te,U=.5*(se+ie),!0),q=G.dxydb_rough(ee,U),void 0===H.angle&&r.extendFlat(H,e(G,re,j,$,G.dxyda_rough(ee,U))),l(X,J,G,0,$,q,G.baxis,re,j,H,"b-title"),function(X,J,G,Z,re){var j,B,H,ee,U=G.select("#"+X._clipPathId);U.size()||(U=G.append("clipPath").classed("carpetclip",!0));var $=r.ensureSingle(U,"path","carpetboundary"),q=J.clipsegments,te=[];for(ee=0;ee<q.length;ee++)B=b([],(j=q[ee]).x,Z.c2p),H=b([],j.y,re.c2p),te.push(h(B,H,j.bicubic));var ne="M"+te.join("L")+"Z";U.attr("id",X._clipPathId),$.attr("d",ne)}(A,C,_,f,T)})};var s=d.LINE_SPACING,c=(1-d.MID_SHIFT)/s+1;function l(p,g,u,x,f,T,_,k,w,C,A){var O=[];_.title.text&&O.push(_.title.text);var P=g.selectAll("text."+A).data(O),S=C.maxExtent;P.enter().append("text").classed(A,!0),P.each(function(){var E=e(u,k,w,f,T);-1===["start","both"].indexOf(_.showticklabels)&&(S=0);var D=_.title.font.size;S+=D+_.title.offset;var z=(C.angle+(C.flip<0?180:0)-E.angle+450)%360,N=z>90&&z<270,V=m.select(this);V.text(_.title.text).call(n.convertToTspans,p),N&&(S=(-n.lineCount(V)+c)*s*D-S),V.attr("transform",t(E.p[0],E.p[1])+o(E.angle)+t(0,S)).attr("text-anchor","middle").call(v.font,_.title.font)}),P.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(y,Q,K){"use strict";var m=y("./constants"),v=y("../../lib/search").findBin,b=y("./compute_control_points"),h=y("./create_spline_evaluator"),e=y("./create_i_derivative_evaluator"),n=y("./create_j_derivative_evaluator");Q.exports=function(r){var o=r._a,t=r._b,d=o.length,a=t.length,i=r.aaxis,s=r.baxis,c=o[0],l=o[d-1],p=t[0],g=t[a-1],u=o[o.length-1]-o[0],x=t[t.length-1]-t[0],f=u*m.RELATIVE_CULL_TOLERANCE,T=x*m.RELATIVE_CULL_TOLERANCE;c-=f,l+=f,p-=T,g+=T,r.isVisible=function(_,k){return _>c&&_<l&&k>p&&k<g},r.isOccluded=function(_,k){return _<c||_>l||k<p||k>g},r.setScale=function(){var w=b(r._xctrl,r._yctrl,r._x,r._y,i.smoothing,s.smoothing);r._xctrl=w[0],r._yctrl=w[1],r.evalxy=h([r._xctrl,r._yctrl],d,a,i.smoothing,s.smoothing),r.dxydi=e([r._xctrl,r._yctrl],i.smoothing,s.smoothing),r.dxydj=n([r._xctrl,r._yctrl],i.smoothing,s.smoothing)},r.i2a=function(_){var k=Math.max(0,Math.floor(_[0]),d-2),w=_[0]-k;return(1-w)*o[k]+w*o[k+1]},r.j2b=function(_){var k=Math.max(0,Math.floor(_[1]),d-2),w=_[1]-k;return(1-w)*t[k]+w*t[k+1]},r.ij2ab=function(_){return[r.i2a(_[0]),r.j2b(_[1])]},r.a2i=function(_){var k=Math.max(0,Math.min(v(_,o),d-2)),w=o[k];return Math.max(0,Math.min(d-1,k+(_-w)/(o[k+1]-w)))},r.b2j=function(_){var k=Math.max(0,Math.min(v(_,t),a-2)),w=t[k];return Math.max(0,Math.min(a-1,k+(_-w)/(t[k+1]-w)))},r.ab2ij=function(_){return[r.a2i(_[0]),r.b2j(_[1])]},r.i2c=function(_,k){return r.evalxy([],_,k)},r.ab2xy=function(_,k,w){if(!w&&(_<o[0]||_>o[d-1]|k<t[0]||k>t[a-1]))return[!1,!1];var C=r.a2i(_),A=r.b2j(k),O=r.evalxy([],C,A);if(w){var P,S,E,D,z=0,N=0,V=[];_<o[0]?(P=0,S=0,z=(_-o[0])/(o[1]-o[0])):_>o[d-1]?(P=d-2,S=1,z=(_-o[d-1])/(o[d-1]-o[d-2])):S=C-(P=Math.max(0,Math.min(d-2,Math.floor(C)))),k<t[0]?(E=0,D=0,N=(k-t[0])/(t[1]-t[0])):k>t[a-1]?(E=a-2,D=1,N=(k-t[a-1])/(t[a-1]-t[a-2])):D=A-(E=Math.max(0,Math.min(a-2,Math.floor(A)))),z&&(r.dxydi(V,P,E,S,D),O[0]+=V[0]*z,O[1]+=V[1]*z),N&&(r.dxydj(V,P,E,S,D),O[0]+=V[0]*N,O[1]+=V[1]*N)}return O},r.c2p=function(_,k,w){return[k.c2p(_[0]),w.c2p(_[1])]},r.p2x=function(_,k,w){return[k.p2c(_[0]),w.p2c(_[1])]},r.dadi=function(_){var k=Math.max(0,Math.min(o.length-2,_));return o[k+1]-o[k]},r.dbdj=function(_){var k=Math.max(0,Math.min(t.length-2,_));return t[k+1]-t[k]},r.dxyda=function(_,k,w,C){var A=r.dxydi(null,_,k,w,C),O=r.dadi(_,w);return[A[0]/O,A[1]/O]},r.dxydb=function(_,k,w,C){var A=r.dxydj(null,_,k,w,C),O=r.dbdj(k,C);return[A[0]/O,A[1]/O]},r.dxyda_rough=function(_,k,w){var C=u*(w||.1),A=r.ab2xy(_+C,k,!0),O=r.ab2xy(_-C,k,!0);return[.5*(A[0]-O[0])/C,.5*(A[1]-O[1])/C]},r.dxydb_rough=function(_,k,w){var C=x*(w||.1),A=r.ab2xy(_,k+C,!0),O=r.ab2xy(_,k-C,!0);return[.5*(A[0]-O[0])/C,.5*(A[1]-O[1])/C]},r.dpdx=function(_){return _._m},r.dpdy=function(_){return _._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b,h){var e,n,r,o=[],t=[],d=v[0].length,a=v.length;var s,c,l,p,g,u,x,f,T,_,J,G,Z,re,j,w=0;for(e=0;e<d;e++)for(n=0;n<a;n++)void 0===v[n][e]&&(o.push(e),t.push(n),v[n][e]=(G=n,Z=void 0,re=void 0,j=void 0,re=0,j=0,(J=e)>0&&void 0!==(Z=v[G][J-1])&&(j++,re+=Z),J<d-1&&void 0!==(Z=v[G][J+1])&&(j++,re+=Z),G>0&&void 0!==(Z=v[G-1][J])&&(j++,re+=Z),G<a-1&&void 0!==(Z=v[G+1][J])&&(j++,re+=Z),re/Math.max(1,j))),w=Math.max(w,Math.abs(v[n][e]));if(!o.length)return v;var C=0,A=0,O=o.length;do{for(C=0,r=0;r<O;r++){n=t[r];var S,E,D,z,N,V=0,X=0;0===(e=o[r])?(E=b[z=Math.min(d-1,2)],X+=(S=v[n][1])+(S-v[n][z])*(b[0]-(D=b[1]))/(D-E),V++):e===d-1&&(E=b[z=Math.max(0,d-3)],X+=(S=v[n][d-2])+(S-v[n][z])*(b[d-1]-(D=b[d-2]))/(D-E),V++),(0===e||e===d-1)&&n>0&&n<a-1&&(X+=((c=h[n]-h[n-1])*v[n+1][e]+(s=h[n+1]-h[n])*v[n-1][e])/(c+s),V++),0===n?(E=h[N=Math.min(a-1,2)],X+=(S=v[1][e])+(S-v[N][e])*(h[0]-(D=h[1]))/(D-E),V++):n===a-1&&(E=h[N=Math.max(0,a-3)],X+=(S=v[a-2][e])+(S-v[N][e])*(h[a-1]-(D=h[a-2]))/(D-E),V++),(0===n||n===a-1)&&e>0&&e<d-1&&(X+=((c=b[e]-b[e-1])*v[n][e+1]+(s=b[e+1]-b[e])*v[n][e-1])/(c+s),V++),V?X/=V:(f=(g=h[n+1]-h[n])*(u=h[n]-h[n-1])*(g+u),X=((x=(l=b[e+1]-b[e])*(p=b[e]-b[e-1])*(l+p))*(u*v[n+1][e]+g*v[n-1][e])+f*(p*v[n][e+1]+l*v[n][e-1]))/(f*(p+l)+x*(u+g))),C+=(_=(T=X-v[n][e])/w)*_,v[n][e]+=T*(1+(V?0:.85))}C=Math.sqrt(C)}while(A++<100&&C>1e-5);return m.log("Smoother converged to",C,"after",A,"iterations"),v}},{"../../lib":515}],724:[function(y,Q,K){"use strict";var m=y("../../lib").isArray1D;Q.exports=function(v,b,h){var e=h("x"),n=e&&e.length,r=h("y"),o=r&&r.length;if(!n&&!o)return!1;if(b._cheater=!e,n&&!m(e)||o&&!m(r))b._length=null;else{var t=n?e.length:1/0;o&&(t=Math.min(t,r.length)),b.a&&b.a.length&&(t=Math.min(t,b.a.length)),b.b&&b.b.length&&(t=Math.min(t,b.b.length)),b._length=t}return!0}},{"../../lib":515}],725:[function(y,Q,K){"use strict";var m=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../scattergeo/attributes"),b=y("../../components/colorscale/attributes"),h=y("../../plots/attributes"),e=y("../../components/color/attributes").defaultLine,n=y("../../lib/extend").extendFlat,r=v.marker.line;Q.exports=n({locations:{valType:"data_array",editType:"calc"},locationmode:v.locationmode,z:{valType:"data_array",editType:"calc"},geojson:n({},v.geojson,{}),featureidkey:v.featureidkey,text:n({},v.text,{}),hovertext:n({},v.hovertext,{}),marker:{line:{color:n({},r.color,{dflt:e}),width:n({},r.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:v.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:v.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:n({},h.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:m(),showlegend:n({},h.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../constants/numerical").BADNUM,b=y("../../components/colorscale/calc"),h=y("../scatter/arrays_to_calcdata"),e=y("../scatter/calc_selection");function n(r){return r&&"string"==typeof r}Q.exports=function(r,o){var t,d=o._length,a=new Array(d);t=o.geojson?function(p){return n(p)||m(p)}:n;for(var i=0;i<d;i++){var s=a[i]={},c=o.locations[i],l=o.z[i];t(c)&&m(l)?(s.loc=c,s.z=l):(s.loc=null,s.z=v),s.index=i}return h(a,o),b(r,o,{vals:o.z,containerStr:"",cLetter:"z"}),e(a,o),a}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/colorscale/defaults"),b=y("./attributes");Q.exports=function(h,e,n,r){function o(s,c){return m.coerce(h,e,b,s,c)}var t=o("locations"),d=o("z");if(t&&t.length&&m.isArrayOrTypedArray(d)&&d.length){e._length=Math.min(t.length,d.length);var a,i=o("geojson");("string"==typeof i&&""!==i||m.isPlainObject(i))&&(a="geojson-id"),"geojson-id"===o("locationmode",a)&&o("featureidkey"),o("text"),o("hovertext"),o("hovertemplate"),o("marker.line.width")&&o("marker.line.color"),o("marker.opacity"),v(h,e,r,o,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(e,o)}else e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h,e){m.location=v.location,m.z=v.z;var n=h[e];return n.fIn&&n.fIn.properties&&(m.properties=n.fIn.properties),m.ct=n.ct,m}},{}],729:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("./attributes"),b=y("../../lib").fillText;Q.exports=function(h,e,n){var r,o,t,d,a=h.cd,i=a[0].trace,s=h.subplot,c=[e,n],l=[e+360,n];for(o=0;o<a.length;o++)if(d=!1,(r=a[o])._polygons){for(t=0;t<r._polygons.length;t++)r._polygons[t].contains(c)&&(d=!d),r._polygons[t].contains(l)&&(d=!d);if(d)break}if(d&&r)return h.x0=h.x1=h.xa.c2p(r.ct),h.y0=h.y1=h.ya.c2p(r.ct),h.index=r.index,h.location=r.loc,h.z=r.z,h.zLabel=m.tickText(s.mockAxis,s.mockAxis.c2l(r.z),"hover").text,h.hovertemplate=r.hovertemplate,function(p,g,u){if(!g.hovertemplate){var x=u.hi||g.hoverinfo,f=String(u.loc),T="all"===x?v.hoverinfo.flags:x.split("+"),_=-1!==T.indexOf("name"),k=-1!==T.indexOf("location"),w=-1!==T.indexOf("z"),C=-1!==T.indexOf("text"),A=[];!_&&k?p.nameOverride=f:(_&&(p.nameOverride=g.name),k&&A.push(f)),w&&A.push(p.zLabel),C&&b(u,g,A),p.extraText=A.join("<br>")}}(h,i,r),[h]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),calc:y("./calc"),calcGeoJSON:y("./plot").calcGeoJSON,plot:y("./plot").plot,style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"choropleth",basePlotModule:y("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../lib/geo_location_utils"),h=y("../../lib/topojson_utils").getTopojsonFeatures,e=y("../../plots/cartesian/autorange").findExtremes,n=y("./style").style;Q.exports={calcGeoJSON:function(r,o){for(var t=r[0].trace,d=o[t.geo],a=d._subplot,i=t.locationmode,s=t._length,c="geojson-id"===i?b.extractTraceFeature(r):h(t,a.topojson),l=[],p=[],g=0;g<s;g++){var u=r[g],x="geojson-id"===i?u.fOut:b.locationToFeature(i,u.loc,c);if(x){u.geojson=x,u.ct=x.properties.ct,u._polygons=b.feature2polygons(x);var f=b.computeBbox(x);l.push(f[0],f[2]),p.push(f[1],f[3])}else u.geojson=null}if("geojson"===d.fitbounds&&"geojson-id"===i){var T=b.computeBbox(b.getTraceGeojson(t));l=[T[0],T[2]],p=[T[1],T[3]]}var _={padded:!0};t._extremes.lon=e(d.lonaxis._ax,l,_),t._extremes.lat=e(d.lataxis._ax,p,_)},plot:function(r,o,t){var d=o.layers.backplot.select(".choroplethlayer");v.makeTraceGroups(d,t,"trace choropleth").each(function(a){var i=m.select(this).selectAll("path.choroplethlocation").data(v.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),n(r,a)})}}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(y,Q,K){"use strict";Q.exports=function(m,v){var b,h,e,n,r,o=m.cd,t=m.xaxis,d=m.yaxis,a=[];if(!1===v)for(b=0;b<o.length;b++)o[b].selected=0;else for(b=0;b<o.length;b++)(e=(h=o[b]).ct)&&(n=t.c2p(e),r=d.c2p(e),v.contains([n,r],null,b,m)?(a.push({pointNumber:b,lon:e[0],lat:e[1]}),h.selected=1):h.selected=0);return a}},{}],733:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/color"),b=y("../../components/drawing"),h=y("../../components/colorscale");function e(n,r){var o=r[0].trace,t=r[0].node3.selectAll(".choroplethlocation"),d=o.marker||{},a=d.line||{},i=h.makeColorScaleFuncFromTrace(o);t.each(function(s){m.select(this).attr("fill",i(s.z)).call(v.stroke,s.mlc||a.color).call(b.dashLine,"",s.mlw||a.width||0).style("opacity",d.opacity)}),b.selectedPointStyle(t,o,n)}Q.exports={style:function(n,r){r&&e(n,r)},styleOnSelect:function(n,r){var t=r[0].trace;t.selectedpoints?b.selectedPointStyle(r[0].node3.selectAll(".choroplethlocation"),t,n):e(n,r)}}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(y,Q,K){"use strict";var m=y("../choropleth/attributes"),v=y("../../components/colorscale/attributes"),b=y("../../plots/template_attributes").hovertemplateAttrs,h=y("../../plots/attributes"),e=y("../../lib/extend").extendFlat;Q.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},m.featureidkey,{}),below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,marker:{line:{color:e({},m.marker.line.color,{editType:"plot"}),width:e({},m.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},m.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},m.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},m.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:m.hoverinfo,hovertemplate:b({},{keys:["properties"]}),showlegend:e({},h.showlegend,{dflt:!1})},v("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../../components/colorscale"),h=y("../../components/drawing"),e=y("../../lib/geojson_utils").makeBlank,n=y("../../lib/geo_location_utils");function r(o){var t,d=o[0].trace,a=d._opts;if(d.selectedpoints){for(var i=h.makeSelectedPointStyleFns(d),s=0;s<o.length;s++){var c=o[s];c.fOut&&(c.fOut.properties.mo2=i.selectedOpacityFn(c))}t={type:"identity",property:"mo2"}}else t=v.isArrayOrTypedArray(d.marker.opacity)?{type:"identity",property:"mo"}:d.marker.opacity;return v.extendFlat(a.fill.paint,{"fill-opacity":t}),v.extendFlat(a.line.paint,{"line-opacity":t}),a}Q.exports={convert:function(o){var t=o[0].trace,d=!0===t.visible&&0!==t._length,a={layout:{visibility:"none"},paint:{}},i={layout:{visibility:"none"},paint:{}},s=t._opts={fill:a,line:i,geojson:e()};if(!d)return s;var c=n.extractTraceFeature(o);if(!c)return s;var l,p,g,u=b.makeColorScaleFuncFromTrace(t),x=t.marker,f=x.line||{};v.isArrayOrTypedArray(x.opacity)&&(l=function(A){var O=A.mo;return m(O)?+v.constrain(O,0,1):0}),v.isArrayOrTypedArray(f.color)&&(p=function(A){return A.mlc}),v.isArrayOrTypedArray(f.width)&&(g=function(A){return A.mlw});for(var T=0;T<o.length;T++){var _=o[T],k=_.fOut;if(k){var w=k.properties;w.fc=u(_.z),l&&(w.mo=l(_)),p&&(w.mlc=p(_)),g&&(w.mlw=g(_)),_.ct=w.ct,_._polygons=n.feature2polygons(k)}}var C=l?{type:"identity",property:"mo"}:x.opacity;return v.extendFlat(a.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":C}),v.extendFlat(i.paint,{"line-color":p?{type:"identity",property:"mlc"}:f.color,"line-width":g?{type:"identity",property:"mlw"}:f.width,"line-opacity":C}),a.layout.visibility="visible",i.layout.visibility="visible",s.geojson={type:"FeatureCollection",features:c},r(o),s},convertOnSelect:r}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/colorscale/defaults"),b=y("./attributes");Q.exports=function(h,e,n,r){function o(i,s){return m.coerce(h,e,b,i,s)}var t=o("locations"),d=o("z"),a=o("geojson");m.isArrayOrTypedArray(t)&&t.length&&m.isArrayOrTypedArray(d)&&d.length&&("string"==typeof a&&""!==a||m.isPlainObject(a))?(o("featureidkey"),e._length=Math.min(t.length,d.length),o("below"),o("text"),o("hovertext"),o("hovertemplate"),o("marker.line.width")&&o("marker.line.color"),o("marker.opacity"),v(h,e,r,o,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(e,o)):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),calc:y("../choropleth/calc"),plot:y("./plot"),hoverPoints:y("../choropleth/hover"),eventData:y("../choropleth/event_data"),selectPoints:y("../choropleth/select"),styleOnSelect:function(m,v){v&&v[0].trace._glTrace.updateOnSelect(v)},getBelow:function(m,v){for(var b=v.getMapLayers(),h=b.length-2;h>=0;h--){var e=b[h].id;if("string"==typeof e&&0===e.indexOf("water"))for(var n=h+1;n<b.length;n++)if("string"==typeof(e=b[n].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:y("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(y,Q,K){"use strict";var m=y("./convert").convert,v=y("./convert").convertOnSelect,b=y("../../plots/mapbox/constants").traceLayerPrefix;function h(n,r){this.type="choroplethmapbox",this.subplot=n,this.uid=r,this.sourceId="source-"+r,this.layerList=[["fill",b+r+"-fill"],["line",b+r+"-line"]],this.below=null}var e=h.prototype;e.update=function(n){this._update(m(n))},e.updateOnSelect=function(n){this._update(v(n))},e._update=function(n){var r=this.subplot,o=this.layerList,t=r.belowLookup["trace-"+this.uid];r.map.getSource(this.sourceId).setData(n.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(n,t),this.below=t);for(var d=0;d<o.length;d++){var a=o[d],s=a[1],c=n[a[0]];r.setOptions(s,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&r.setOptions(s,"setPaintProperty",c.paint)}},e._addLayers=function(n,r){for(var o=this.subplot,t=this.layerList,d=this.sourceId,a=0;a<t.length;a++){var i=t[a],s=i[0],c=n[s];o.addLayer({type:s,id:i[1],source:d,layout:c.layout,paint:c.paint},r)}},e._removeLayers=function(){for(var n=this.subplot.map,r=this.layerList,o=r.length-1;o>=0;o--)n.removeLayer(r[o][1])},e.dispose=function(){var n=this.subplot.map;this._removeLayers(),n.removeSource(this.sourceId)},Q.exports=function(n,r){var o=r[0].trace,t=new h(n,o.uid),d=t.sourceId,a=m(r),i=t.below=n.belowLookup["trace-"+o.uid];return n.map.addSource(d,{type:"geojson",data:a.geojson}),t._addLayers(a,i),r[0].trace._glTrace=t,t}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/attributes"),v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,h=y("../mesh3d/attributes"),e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat,r={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["norm"]}),uhoverformat:v("u",1),vhoverformat:v("v",1),whoverformat:v("w",1),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),showlegend:n({},e.showlegend,{dflt:!1})};n(r,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(o){r[o]=h[o]}),r.hoverinfo=n({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),r.transforms=void 0,Q.exports=r},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/calc");Q.exports=function(v,b){for(var h=b.u,e=b.v,n=b.w,r=Math.min(b.x.length,b.y.length,b.z.length,h.length,e.length,n.length),o=-1/0,t=1/0,d=0;d<r;d++){var a=h[d],i=e[d],s=n[d],c=Math.sqrt(a*a+i*i+s*s);o=Math.max(o,c),t=Math.min(t,c)}b._len=r,b._normMax=o,m(v,b,{vals:[t,o],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(y,Q,K){"use strict";var m=y("../../../stackgl_modules").gl_cone3d,v=y("../../../stackgl_modules").gl_cone3d.createConeMesh,b=y("../../lib").simpleMap,h=y("../../lib/gl_format_color").parseColorScale,e=y("../../components/colorscale").extractOpts,n=y("../../plots/gl3d/zip3");function r(s,c){this.scene=s,this.uid=c,this.mesh=null,this.data=null}var o=r.prototype;o.handlePick=function(s){if(s.object===this.mesh){var c=s.index=s.data.index,u=this.data.u[c],x=this.data.v[c],f=this.data.w[c];s.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c],u,x,f,Math.sqrt(u*u+x*x+f*f)];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&void 0!==T[c]?s.textLabel=T[c]:T&&(s.textLabel=T),!0}};var t={xaxis:0,yaxis:1,zaxis:2},d={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function i(s,c){var l=s.fullSceneLayout,p=s.dataScale,g={};function u(_,k){var w=l[k],C=p[t[k]];return b(_,function(A){return w.d2l(A)*C})}g.vectors=n(u(c.u,"xaxis"),u(c.v,"yaxis"),u(c.w,"zaxis"),c._len),g.positions=n(u(c.x,"xaxis"),u(c.y,"yaxis"),u(c.z,"zaxis"),c._len);var x=e(c);g.colormap=h(c),g.vertexIntensityBounds=[x.min/c._normMax,x.max/c._normMax],g.coneOffset=d[c.anchor],g.coneSize="scaled"===c.sizemode?c.sizeref||.5:c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;var f=m(g),T=c.lightposition;return f.lightPosition=[T.x,T.y,T.z],f.ambient=c.lighting.ambient,f.diffuse=c.lighting.diffuse,f.specular=c.lighting.specular,f.roughness=c.lighting.roughness,f.fresnel=c.lighting.fresnel,f.opacity=c.opacity,c._pad=a[c.anchor]*f.vectorScale*f.coneScale*c._normMax,f}o.update=function(s){this.data=s;var c=i(this.scene,s);this.mesh.update(c)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(s,c){var l=s.glplot.gl,p=i(s,c),g=v(l,p),u=new r(s,c.uid);return u.mesh=g,u.data=c,g._trace=u,s.glplot.add(g),u}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/colorscale/defaults"),b=y("./attributes");Q.exports=function(h,e,n,r){function o(l,p){return m.coerce(h,e,b,l,p)}var t=o("u"),d=o("v"),a=o("w"),i=o("x"),s=o("y"),c=o("z");t&&t.length&&d&&d.length&&a&&a.length&&i&&i.length&&s&&s.length&&c&&c.length?(o("sizeref"),o("sizemode"),o("anchor"),o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("lightposition.x"),o("lightposition.y"),o("lightposition.z"),v(h,e,r,o,{prefix:"",cLetter:"c"}),o("text"),o("hovertext"),o("hovertemplate"),o("uhoverformat"),o("vhoverformat"),o("whoverformat"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"cone",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:y("./calc"),plot:y("./convert"),eventData:function(m,v){return m.norm=v.traceCoordinate[6],m},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(y,Q,K){"use strict";var m=y("../heatmap/attributes"),v=y("../scatter/attributes"),b=y("../../plots/cartesian/axis_format_attributes"),h=b.axisHoverFormat,e=b.descriptionOnlyNumbers,n=y("../../components/colorscale/attributes"),r=y("../../components/drawing/attributes").dash,o=y("../../plots/font_attributes"),t=y("../../lib/extend").extendFlat,d=y("../../constants/filter_ops"),a=d.COMPARISON_OPS2,i=d.INTERVAL_OPS,s=v.line;Q.exports=t({z:m.z,x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,text:m.text,hovertext:m.hovertext,transpose:m.transpose,xtype:m.xtype,ytype:m.ytype,xhoverformat:h("x"),yhoverformat:h("y"),zhoverformat:h("z",1),hovertemplate:m.hovertemplate,texttemplate:t({},m.texttemplate,{}),textfont:t({},m.textfont,{}),hoverongaps:m.hoverongaps,connectgaps:t({},m.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:o({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(a).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:t({},s.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:r,smoothing:t({},s.smoothing,{}),editType:"plot"}},n("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(y,Q,K){"use strict";var m=y("../../components/colorscale"),v=y("../heatmap/calc"),b=y("./set_contours"),h=y("./end_plus");Q.exports=function(e,n){var r=v(e,n),o=r[0].z;b(n,o);var t,d=n.contours,a=m.extractOpts(n);if("heatmap"===d.coloring&&a.auto&&!1===n.autocontour){var i=d.start,s=h(d),c=d.size||1,l=Math.floor((s-i)/c)+1;isFinite(c)||(c=1,l=1);var p=i-c/2;t=[p,p+l*c]}else t=o;return m.calc(e,n,{vals:t,cLetter:"z"}),r}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(y,Q,K){"use strict";Q.exports=function(m,v){var b,h=m[0],e=h.z;switch(v.type){case"levels":var n=Math.min(e[0][0],e[0][1]);for(b=0;b<m.length;b++){var r=m[b];r.prefixBoundary=!r.edgepaths.length&&(n>r.level||r.starts.length&&n===r.level)}break;case"constraint":if(h.prefixBoundary=!1,h.edgepaths.length)return;var o=h.x.length,t=h.y.length,d=-1/0,a=1/0;for(b=0;b<t;b++)a=Math.min(a,e[b][0]),a=Math.min(a,e[b][o-1]),d=Math.max(d,e[b][0]),d=Math.max(d,e[b][o-1]);for(b=1;b<o-1;b++)a=Math.min(a,e[0][b]),a=Math.min(a,e[t-1][b]),d=Math.max(d,e[0][b]),d=Math.max(d,e[t-1][b]);var i,s,c=v.value;switch(v._operation){case">":c>d&&(h.prefixBoundary=!0);break;case"<":(c<a||h.starts.length&&c===a)&&(h.prefixBoundary=!0);break;case"[]":i=Math.min(c[0],c[1]),((s=Math.max(c[0],c[1]))<a||i>d||h.starts.length&&s===a)&&(h.prefixBoundary=!0);break;case"][":i=Math.min(c[0],c[1]),s=Math.max(c[0],c[1]),i<a&&s>d&&(h.prefixBoundary=!0)}}}},{}],747:[function(y,Q,K){"use strict";var m=y("../../components/colorscale"),v=y("./make_color_map"),b=y("./end_plus");Q.exports={min:"zmin",max:"zmax",calc:function(h,e,n){var r=e.contours,o=e.line,t=r.size||1,d=r.coloring,a=v(e,{isColorbar:!0});if("heatmap"===d){var i=m.extractOpts(e);n._fillgradient=i.reversescale?m.flipScale(i.colorscale):i.colorscale,n._zrange=[i.min,i.max]}else"fill"===d&&(n._fillcolor=a);n._line={color:"lines"===d?a:o.color,width:!1!==r.showlines?o.width:0,dash:o.dash},n._levels={start:r.start,end:b(r),size:t}}}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(y,Q,K){"use strict";Q.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("./label_defaults"),b=y("../../components/color"),h=b.addOpacity,e=b.opacity,n=y("../../constants/filter_ops"),r=n.CONSTRAINT_REDUCTION,o=n.COMPARISON_OPS2;Q.exports=function(t,d,a,i,s,c){var l,p,g,f,T,_,u=d.contours,x=a("contours.operation");u._operation=r[x],f=a,-1===o.indexOf((T=u).operation)?(f("contours.value",[0,1]),Array.isArray(T.value)?T.value.length>2?T.value=T.value.slice(2):0===T.length?T.value=[0,1]:T.length<2?(_=parseFloat(T.value[0]),T.value=[_,_+1]):T.value=[parseFloat(T.value[0]),parseFloat(T.value[1])]:m(T.value)&&(_=parseFloat(T.value),T.value=[_,_+1])):(f("contours.value",0),m(T.value)||(T.value=Array.isArray(T.value)?parseFloat(T.value[0]):0)),"="===x?l=u.showlines=!0:(l=a("contours.showlines"),g=a("fillcolor",h((t.line||{}).color||s,.5))),l&&(p=a("line.color",g&&e(g)?h(d.fillcolor,1):s),a("line.width",2),a("line.dash")),a("line.smoothing"),v(a,i,p,c)}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(y,Q,K){"use strict";var m=y("../../constants/filter_ops"),v=y("fast-isnumeric");function b(n,r){var o,t=Array.isArray(r);function d(a){return v(a)?+a:null}return-1!==m.COMPARISON_OPS2.indexOf(n)?o=d(t?r[0]:r):-1!==m.INTERVAL_OPS.indexOf(n)?o=t?[d(r[0]),d(r[1])]:[d(r),d(r)]:-1!==m.SET_OPS.indexOf(n)&&(o=t?r.map(d):[d(r)]),o}function h(n){return function(r){r=b(n,r);var o=Math.min(r[0],r[1]),t=Math.max(r[0],r[1]);return{start:o,end:t,size:t-o}}}function e(n){return function(r){return{start:r=b(n,r),end:1/0,size:1/0}}}Q.exports={"[]":h("[]"),"][":h("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h){var e=h("contours.start"),n=h("contours.end"),r=!1===e||!1===n,o=b("contours.size");!(r?v.autocontour=!0:b("autocontour",!1))&&o||b("ncontours")}},{}],752:[function(y,Q,K){"use strict";var m=y("../../lib");function v(b){return m.extendFlat({},b,{edgepaths:m.extendDeep([],b.edgepaths),paths:m.extendDeep([],b.paths),starts:m.extendDeep([],b.starts)})}Q.exports=function(b,h){var e,n,r,o=function(a){return a.reverse()},t=function(a){return a};switch(h){case"=":case"<":return b;case">":for(1!==b.length&&m.warn("Contour data invalid for the specified inequality operation."),n=b[0],e=0;e<n.edgepaths.length;e++)n.edgepaths[e]=o(n.edgepaths[e]);for(e=0;e<n.paths.length;e++)n.paths[e]=o(n.paths[e]);for(e=0;e<n.starts.length;e++)n.starts[e]=o(n.starts[e]);return b;case"][":var d=o;o=t,t=d;case"[]":for(2!==b.length&&m.warn("Contour data invalid for the specified inequality range operation."),n=v(b[0]),r=v(b[1]),e=0;e<n.edgepaths.length;e++)n.edgepaths[e]=o(n.edgepaths[e]);for(e=0;e<n.paths.length;e++)n.paths[e]=o(n.paths[e]);for(e=0;e<n.starts.length;e++)n.starts[e]=o(n.starts[e]);for(;r.edgepaths.length;)n.edgepaths.push(t(r.edgepaths.shift()));for(;r.paths.length;)n.paths.push(t(r.paths.shift()));for(;r.starts.length;)n.starts.push(t(r.starts.shift()));return[n]}}},{"../../lib":515}],753:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../heatmap/xyz_defaults"),b=y("../scatter/period_defaults"),h=y("./constraint_defaults"),e=y("./contours_defaults"),n=y("./style_defaults"),r=y("../heatmap/label_defaults"),o=y("./attributes");Q.exports=function(t,d,a,i){function s(l,p){return m.coerce(t,d,o,l,p)}if(v(t,d,s,i)){b(t,d,i,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hoverongaps"),s("hovertemplate");var c="constraint"===s("contours.type");s("connectgaps",m.isArray1D(d.z)),c?h(t,d,s,i,a):(e(t,d,s,function(l){return m.coerce2(t,d,o,l)}),n(t,d,s,i)),d.contours&&"heatmap"===d.contours.coloring&&r(s,i)}else d.visible=!1}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./constraint_mapping"),b=y("./end_plus");Q.exports=function(h,e,n){for(var r="constraint"===h.type?v[h._operation](h.value):h,o=r.size,t=[],d=b(r),a=n.trace._carpetTrace,i=a?{xaxis:a.aaxis,yaxis:a.baxis,x:n.a,y:n.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:n.x,y:n.y},s=r.start;s<d;s+=o)if(t.push(m.extendFlat({level:s,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},i)),t.length>1e3){m.warn("Too many contours, clipping at 1000",h);break}return t}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(y,Q,K){"use strict";Q.exports=function(m){return m.end+m.size/1e6}},{}],756:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./constants");function b(n,r,o,t){return Math.abs(n[0]-r[0])<o&&Math.abs(n[1]-r[1])<t}function h(n,r,o,t,d){var a,$,te,ne,se,i=r.join(","),s=n.crossings[i],c=(te=r,ne=0,se=0,($=s)>20&&o?208===$||1114===$?ne=0===te[0]?1:-1:se=0===te[1]?1:-1:-1!==v.BOTTOMSTART.indexOf($)?se=1:-1!==v.LEFTSTART.indexOf($)?ne=1:-1!==v.TOPSTART.indexOf($)?se=-1:ne=-1,[ne,se]),l=[e(n,r,[-c[0],-c[1]])],p=n.z.length,g=n.z[0].length,u=r.slice(),x=c.slice();for(a=0;a<1e4;a++){if(s>20?n.crossings[i]=v.SADDLEREMAINDER[s=v.CHOOSESADDLE[s][(c[0]||c[1])<0?0:1]]:delete n.crossings[i],!(c=v.NEWDELTA[s])){m.log("Found bad marching index:",s,r,n.level);break}if(l.push(e(n,r,c)),r[0]+=c[0],r[1]+=c[1],i=r.join(","),b(l[l.length-1],l[l.length-2],t,d)&&l.pop(),r[0]===u[0]&&r[1]===u[1]&&c[0]===x[0]&&c[1]===x[1]||o&&(c[0]&&(r[0]<0||r[0]>g-2)||c[1]&&(r[1]<0||r[1]>p-2)))break;s=n.crossings[i]}1e4===a&&m.log("Infinite loop in contour?");var T,_,k,w,C,A,O,P,S,E,D,z,N,V,X,J=b(l[0],l[l.length-1],t,d),G=0,Z=.2*n.smoothing,re=[],j=0;for(a=1;a<l.length;a++)void 0,void 0,V=(z=l[a])[2]-(N=l[a-1])[2],X=z[3]-N[3],G+=O=Math.sqrt(V*V+X*X),re.push(O);var B=G/re.length*Z;function H($){return l[$%l.length]}for(a=l.length-2;a>=j;a--)if((T=re[a])<B){for(k=0,_=a-1;_>=j&&T+re[_]<B;_--)T+=re[_];if(J&&a===l.length-2)for(k=0;k<_&&T+re[k]<B;k++)T+=re[k];C=a-_+k+1,A=Math.floor((a+_+k+2)/2),w=J||a!==l.length-2?J||-1!==_?C%2?H(A):[(H(A)[0]+H(A+1)[0])/2,(H(A)[1]+H(A+1)[1])/2]:l[0]:l[l.length-1],l.splice(_+1,a-_+1,w),a=_+1,k&&(j=k),J&&(a===l.length-2?l[k]=l[l.length-1]:0===a&&(l[l.length-1]=l[0]))}for(l.splice(0,j),a=0;a<l.length;a++)l[a].length=2;if(!(l.length<2))if(J)l.pop(),n.paths.push(l);else{o||m.log("Unclosed interior contour?",n.level,u.join(","),l.join("L"));var ee=!1;for(P=0;P<n.edgepaths.length;P++)if(E=n.edgepaths[P],!ee&&b(E[0],l[l.length-1],t,d)){l.pop(),ee=!0;var U=!1;for(S=0;S<n.edgepaths.length;S++)if(b((D=n.edgepaths[S])[D.length-1],l[0],t,d)){U=!0,l.shift(),n.edgepaths.splice(P,1),S===P?n.paths.push(l.concat(D)):(S>P&&S--,n.edgepaths[S]=D.concat(l,E));break}U||(n.edgepaths[P]=l.concat(E))}for(P=0;P<n.edgepaths.length&&!ee;P++)b((E=n.edgepaths[P])[E.length-1],l[0],t,d)&&(l.shift(),n.edgepaths[P]=E.concat(l),ee=!0);ee||n.edgepaths.push(l)}}function e(n,r,o){var t=r[0]+Math.max(o[0],0),d=r[1]+Math.max(o[1],0),a=n.z[d][t],i=n.xaxis,s=n.yaxis;if(o[1]){var c=(n.level-a)/(n.z[d][t+1]-a),l=(1!==c?(1-c)*i.c2l(n.x[t]):0)+(0!==c?c*i.c2l(n.x[t+1]):0);return[i.c2p(i.l2c(l),!0),s.c2p(n.y[d],!0),t+c,d]}var p=(n.level-a)/(n.z[d+1][t]-a),g=(1!==p?(1-p)*s.c2l(n.y[d]):0)+(0!==p?p*s.c2l(n.y[d+1]):0);return[i.c2p(n.x[t],!0),s.c2p(s.l2c(g),!0),t,d+p]}Q.exports=function(n,r,o){var t,d,a,i;for(r=r||.01,o=o||.01,d=0;d<n.length;d++){for(a=n[d],i=0;i<a.starts.length;i++)h(a,a.starts[i],"edge",r,o);for(t=0;Object.keys(a.crossings).length&&t<1e4;)t++,h(a,Object.keys(a.crossings)[0].split(",").map(Number),void 0,r,o);1e4===t&&m.log("Infinite loop in contour?")}}},{"../../lib":515,"./constants":748}],757:[function(y,Q,K){"use strict";var m=y("../../components/color"),v=y("../heatmap/hover");Q.exports=function(b,h,e,n,r){r||(r={}),r.isContour=!0;var o=v(b,h,e,n,r);return o&&o.forEach(function(t){var d=t.trace;"constraint"===d.contours.type&&(d.fillcolor&&m.opacity(d.fillcolor)?t.color=m.addOpacity(d.fillcolor,1):d.contours.showlines&&m.opacity(d.line.color)&&(t.color=m.addOpacity(d.line.color,1)))}),o}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot").plot,style:y("./style"),colorbar:y("./colorbar"),hoverPoints:y("./hover"),moduleType:"trace",name:"contour",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b,h,e){if(e||(e={}),v("contours.showlabels")){var n=b.font;m.coerceFont(v,"contours.labelfont",{family:n.family,size:n.size,color:h}),v("contours.labelformat")}!1!==e.hasHover&&v("zhoverformat")}},{"../../lib":515}],760:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/colorscale"),b=y("./end_plus");Q.exports=function(h){var e=h.contours,n=e.start,r=b(e),o=e.size||1,t=Math.floor((r-n)/o)+1,d="lines"===e.coloring?0:1,a=v.extractOpts(h);isFinite(o)||(o=1,t=1);var i,s,c=a.reversescale?v.flipScale(a.colorscale):a.colorscale,l=c.length,p=new Array(l),g=new Array(l);if("heatmap"===e.coloring){var u=a.min,x=a.max;for(s=0;s<l;s++)p[s]=(i=c[s])[0]*(x-u)+u,g[s]=i[1];var f=m.extent([u,x,e.start,e.start+o*(t-1)]),T=f[u<x?0:1],_=f[u<x?1:0];T!==u&&(p.splice(0,0,T),g.splice(0,0,g[0])),_!==x&&(p.push(_),g.push(g[g.length-1]))}else for(s=0;s<l;s++)p[s]=((i=c[s])[0]*(t+d-1)-d/2)*o+n,g[s]=i[1];return v.makeColorScaleFunc({domain:p,range:g},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(y,Q,K){"use strict";var m=y("./constants");function v(b,h){var e=(h[0][0]>b?0:1)+(h[0][1]>b?0:2)+(h[1][1]>b?0:4)+(h[1][0]>b?0:8);return 5===e||10===e?b>(h[0][0]+h[0][1]+h[1][0]+h[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}Q.exports=function(b){var h,e,n,r,o,t,d,a,i,s=b[0].z,c=s.length,l=s[0].length,p=2===c||2===l;for(e=0;e<c-1;e++)for(r=[],0===e&&(r=r.concat(m.BOTTOMSTART)),e===c-2&&(r=r.concat(m.TOPSTART)),h=0;h<l-1;h++)for(n=r.slice(),0===h&&(n=n.concat(m.LEFTSTART)),h===l-2&&(n=n.concat(m.RIGHTSTART)),o=h+","+e,t=[[s[e][h],s[e][h+1]],[s[e+1][h],s[e+1][h+1]]],i=0;i<b.length;i++)(d=v((a=b[i]).level,t))&&(a.crossings[o]=d,-1!==n.indexOf(d)&&(a.starts.push([h,e]),p&&-1!==n.indexOf(d,n.indexOf(d)+1)&&a.starts.push([h,e])))}},{"./constants":748}],762:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../components/drawing"),h=y("../../components/colorscale"),e=y("../../lib/svg_text_utils"),n=y("../../plots/cartesian/axes"),r=y("../../plots/cartesian/set_convert"),o=y("../heatmap/plot"),t=y("./make_crossings"),d=y("./find_all_paths"),a=y("./empty_pathinfo"),i=y("./convert_to_constraints"),s=y("./close_boundaries"),c=y("./constants"),l=c.LABELOPTIMIZER;function p(x,f){var T,_,k,w,C,A,P="",S=0,E=x.edgepaths.map(function(J,G){return G}),D=!0;function z(J){return Math.abs(J[1]-f[2][1])<.01}function V(J){return Math.abs(J[0]-f[2][0])<.01}for(;E.length;){for(A=b.smoothopen(x.edgepaths[S],x.smoothing),P+=D?A:A.replace(/^M/,"L"),E.splice(E.indexOf(S),1),T=x.edgepaths[S][x.edgepaths[S].length-1],w=-1,k=0;k<4;k++){if(!T){v.log("Missing end?",S,x);break}for(Math.abs(T[1]-f[0][1])<.01&&!V(T)?_=f[1]:Math.abs(T[0]-f[0][0])<.01?_=f[0]:z(T)?_=f[3]:V(T)&&(_=f[2]),C=0;C<x.edgepaths.length;C++){var X=x.edgepaths[C][0];Math.abs(T[0]-_[0])<.01?Math.abs(T[0]-X[0])<.01&&(X[1]-T[1])*(_[1]-X[1])>=0&&(_=X,w=C):Math.abs(T[1]-_[1])<.01?Math.abs(T[1]-X[1])<.01&&(X[0]-T[0])*(_[0]-X[0])>=0&&(_=X,w=C):v.log("endpt to newendpt is not vert. or horz.",T,_,X)}if(T=_,w>=0)break;P+="L"+_}if(w===x.edgepaths.length){v.log("unclosed perimeter path");break}(D=-1===E.indexOf(S=w))&&(S=E[0],P+="Z")}for(S=0;S<x.paths.length;S++)P+=b.smoothclosed(x.paths[S],x.smoothing);return P}function g(x,f,T,_){var k=f.width/2,w=f.height/2,C=x.x,A=x.y,O=x.theta,P=Math.cos(O)*k,S=Math.sin(O)*k,E=(C>_.center?_.right-C:C-_.left)/(P+Math.abs(Math.sin(O)*w)),D=(A>_.middle?_.bottom-A:A-_.top)/(Math.abs(S)+Math.cos(O)*w);if(E<1||D<1)return 1/0;var z=l.EDGECOST*(1/(E-1)+1/(D-1));z+=l.ANGLECOST*O*O;for(var N=C-P,V=A-S,X=C+P,J=A+S,G=0;G<T.length;G++){var Z=T[G],re=Math.cos(Z.theta)*Z.width/2,j=Math.sin(Z.theta)*Z.width/2,B=2*v.segmentDistance(N,V,X,J,Z.x-re,Z.y-j,Z.x+re,Z.y+j)/(f.height+Z.height),H=Z.level===f.level,ee=H?l.SAMELEVELDISTANCE:1;if(B<=ee)return 1/0;z+=l.NEIGHBORCOST*(H?l.SAMELEVELFACTOR:1)/(B-ee)}return z}function u(x){var f,T,_=x.trace._emptypoints,k=[],w=x.z.length,C=x.z[0].length,A=[];for(f=0;f<C;f++)A.push(1);for(f=0;f<w;f++)k.push(A.slice());for(f=0;f<_.length;f++)k[(T=_[f])[0]][T[1]]=0;return x.zmask=k,k}K.plot=function(x,f,T,_){var k=f.xaxis,w=f.yaxis;v.makeTraceGroups(_,T,"contour").each(function(C){var A=m.select(this),O=C[0],S=O.x,E=O.y,D=O.trace.contours,z=a(D,f,O),N=v.ensureSingle(A,"g","heatmapcoloring"),V=[];"heatmap"===D.coloring&&(V=[C]),o(x,f,V,N),t(z),d(z);var H,ee,U,X=k.c2p(S[0],!0),J=k.c2p(S[S.length-1],!0),G=w.c2p(E[0],!0),Z=w.c2p(E[E.length-1],!0),re=[[X,Z],[J,Z],[J,G],[X,G]],j=z;"constraint"===D.type&&(j=i(z,D._operation)),H=re,ee=D,(U=v.ensureSingle(A,"g","contourbg").selectAll("path").data("fill"===ee.coloring?[0]:[])).enter().append("path"),U.exit().remove(),U.attr("d","M"+H.join("L")+"Z").style("stroke","none"),function(B,H,ee,U){var $="fill"===U.coloring||"constraint"===U.type&&"="!==U._operation,q="M"+ee.join("L")+"Z";$&&s(H,U);var te=v.ensureSingle(B,"g","contourfill").selectAll("path").data($?H:[]);te.enter().append("path"),te.exit().remove(),te.each(function(ne){var se=(ne.prefixBoundary?q:"")+p(ne,ee);se?m.select(this).attr("d",se).style("stroke","none"):m.select(this).remove()})}(A,j,re,D),function(B,H,ee,U,$){var q=v.ensureSingle(B,"g","contourlines"),te=!1!==$.showlines,ne=$.showlabels,se=te&&ne,ie=K.createLines(q,te||ne,H),ue=K.createLineClip(q,se,ee,U.trace.uid),le=B.selectAll("g.contourlabels").data(ne?[0]:[]);if(le.exit().remove(),le.enter().append("g").classed("contourlabels",!0),ne){var de=[],be=[];v.clearLocationCache();var _e=K.labelFormatter(ee,U),xe=b.tester.append("text").attr("data-notex",1).call(b.font,$.labelfont),Ee=H[0].xaxis,he=H[0].yaxis,me=Ee._length,Se=he._length,Me=Ee.range,Ie=he.range,Fe=v.aggNums(Math.min,null,U.x),Ne=v.aggNums(Math.max,null,U.x),De=v.aggNums(Math.min,null,U.y),$e=v.aggNums(Math.max,null,U.y),Re=Math.max(Ee.c2p(Fe,!0),0),ze=Math.min(Ee.c2p(Ne,!0),me),Ue=Math.max(he.c2p($e,!0),0),je=Math.min(he.c2p(De,!0),Se),rt={};Me[0]<Me[1]?(rt.left=Re,rt.right=ze):(rt.left=ze,rt.right=Re),Ie[0]<Ie[1]?(rt.top=Ue,rt.bottom=je):(rt.top=je,rt.bottom=Ue),rt.middle=(rt.top+rt.bottom)/2,rt.center=(rt.left+rt.right)/2,de.push([[rt.left,rt.top],[rt.right,rt.top],[rt.right,rt.bottom],[rt.left,rt.bottom]]);var ut=Math.sqrt(me*me+Se*Se),gt=c.LABELDISTANCE*ut/Math.max(1,H.length/c.LABELINCREASE);ie.each(function(At){var _t=K.calcTextOpts(At.level,_e,xe,ee);m.select(this).selectAll("path").each(function(){var it=v.getVisibleSegment(this,rt,_t.height/2);if(it&&!(it.len<(_t.width+_t.height)*c.LABELMIN))for(var et=Math.min(Math.ceil(it.len/gt),c.LABELMAX),wt=0;wt<et;wt++){var Gt=K.findBestTextLocation(this,it,_t,be,rt);if(!Gt)break;K.addLabelData(Gt,_t,be,de)}})}),xe.remove(),K.drawLabels(le,be,ee,ue,se?de:null)}ne&&!te&&ie.remove()}(A,z,x,O,D),function(B,H,ee,U,$){var q=U.trace,ne="clip"+q.uid,se=ee._fullLayout._clips.selectAll("#"+ne).data(q.connectgaps?[]:[0]);if(se.enter().append("clipPath").classed("contourclip",!0).attr("id",ne),se.exit().remove(),!1===q.connectgaps){var ie={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:H.xaxis,yaxis:H.yaxis,x:U.x,y:U.y,z:u(U),smoothing:0};t([ie]),d([ie]),s([ie],{type:"levels"}),v.ensureSingle(se,"path","").attr("d",(ie.prefixBoundary?"M"+$.join("L")+"Z":"")+p(ie,$))}else ne=null;b.setClipUrl(B,ne,ee)}(A,f,x,O,re)})},K.createLines=function(x,f,T){var _=T[0].smoothing,k=x.selectAll("g.contourlevel").data(f?T:[]);if(k.exit().remove(),k.enter().append("g").classed("contourlevel",!0),f){var w=k.selectAll("path.openline").data(function(A){return A.pedgepaths||A.edgepaths});w.exit().remove(),w.enter().append("path").classed("openline",!0),w.attr("d",function(A){return b.smoothopen(A,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var C=k.selectAll("path.closedline").data(function(A){return A.ppaths||A.paths});C.exit().remove(),C.enter().append("path").classed("closedline",!0),C.attr("d",function(A){return b.smoothclosed(A,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return k},K.createLineClip=function(x,f,T,_){var k=f?"clipline"+_:null,w=T._fullLayout._clips.selectAll("#"+k).data(f?[0]:[]);return w.exit().remove(),w.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),b.setClipUrl(x,k,T),w},K.labelFormatter=function(x,f){var T=x._fullLayout,_=f.trace,k=_.contours,w={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(k.labelformat)w.tickformat=k.labelformat,r(w,T);else{var C=h.extractOpts(_);if(C&&C.colorbar&&C.colorbar._axis)w=C.colorbar._axis;else{if("constraint"===k.type){var A=k.value;w.range=Array.isArray(A)?[A[0],A[A.length-1]]:[A,A]}else w.range=[k.start,k.end],w.nticks=(k.end-k.start)/k.size;w.range[0]===w.range[1]&&(w.range[1]+=w.range[0]||1),w.nticks||(w.nticks=1e3),r(w,T),n.prepTicks(w),w._tmin=null,w._tmax=null}}return function(O){return n.tickText(w,O).text}},K.calcTextOpts=function(x,f,T,_){var k=f(x);T.text(k).call(e.convertToTspans,_);var w=T.node(),C=b.bBox(w,!0);return{text:k,width:C.width,height:C.height,fontSize:+w.style["font-size"].replace("px",""),level:x,dy:(C.top+C.bottom)/2}},K.findBestTextLocation=function(x,f,T,_,k){var w,C,A,O,P,S=T.width;f.isClosed?(w=f.min+(C=f.len/l.INITIALSEARCHPOINTS)/2,A=f.max):(w=f.min+(C=(f.len-S)/(l.INITIALSEARCHPOINTS+1))+S/2,A=f.max-(C+S)/2);for(var E=1/0,D=0;D<l.ITERATIONS;D++){for(var z=w;z<A;z+=C){var N=v.getTextLocation(x,f.total,z,S),V=g(N,T,_,k);V<E&&(E=V,P=N,O=z)}if(E>2*l.MAXCOST)break;D&&(C/=2),A=(w=O-C/2)+1.5*C}if(E<=l.MAXCOST)return P},K.addLabelData=function(x,f,T,_){var k=f.fontSize,w=f.width+k/3,C=Math.max(0,f.height-k/3),A=x.x,O=x.y,P=x.theta,S=Math.sin(P),E=Math.cos(P),D=function(N,V){return[A+N*E-V*S,O+N*S+V*E]},z=[D(-w/2,-C/2),D(-w/2,C/2),D(w/2,C/2),D(w/2,-C/2)];T.push({text:f.text,x:A,y:O,dy:f.dy,theta:P,level:f.level,width:w,height:C}),_.push(z)},K.drawLabels=function(x,f,T,_,k){var w=x.selectAll("text").data(f,function(O){return O.text+","+O.x+","+O.y+","+O.theta});if(w.exit().remove(),w.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(O){var P=O.x+Math.sin(O.theta)*O.dy,S=O.y-Math.cos(O.theta)*O.dy;m.select(this).text(O.text).attr({x:P,y:S,transform:"rotate("+180*O.theta/Math.PI+" "+P+" "+S+")"}).call(e.convertToTspans,T)}),k){for(var C="",A=0;A<k.length;A++)C+="M"+k[A].join("L")+"Z";v.ensureSingle(_,"path","").attr("d",C)}}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../lib");function b(h,e,n){var r={type:"linear",range:[h,e]};return m.autoTicks(r,(e-h)/(n||15)),r}Q.exports=function(h,e){var n=h.contours;if(h.autocontour){var r=h.zmin,o=h.zmax;(h.zauto||void 0===r)&&(r=v.aggNums(Math.min,null,e)),(h.zauto||void 0===o)&&(o=v.aggNums(Math.max,null,e));var t=b(r,o,h.ncontours);n.size=t.dtick,n.start=m.tickFirst(t),t.range.reverse(),n.end=m.tickFirst(t),n.start===r&&(n.start+=n.size),n.end===o&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),h._input.contours||(h._input.contours={}),v.extendFlat(h._input.contours,{start:n.start,end:n.end,size:n.size}),h._input.autocontour=!0}else if("constraint"!==n.type){var d,a=n.start,i=n.end,s=h._input.contours;a>i&&(n.start=s.start=i,i=n.end=s.end=a,a=n.start),!(n.size>0)&&(d=a===i?1:b(a,i,h.ncontours).dtick,s.size=n.size=d)}}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/drawing"),b=y("../heatmap/style"),h=y("./make_color_map");Q.exports=function(e){var n=m.select(e).selectAll("g.contour");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var o=m.select(this),t=r[0].trace,d=t.contours,a=t.line,i=d.size||1,s=d.start,c="constraint"===d.type,l=!c&&"lines"===d.coloring,p=!c&&"fill"===d.coloring,g=l||p?h(t):null;o.selectAll("g.contourlevel").each(function(f){m.select(this).selectAll("path").call(v.lineGroupStyle,a.width,l?g(f.level):a.color,a.dash)});var u=d.labelfont;if(o.selectAll("g.contourlabels text").each(function(f){v.font(m.select(this),{family:u.family,size:u.size,color:u.color||(l?g(f.level):a.color)})}),c)o.selectAll("g.contourfill path").style("fill",t.fillcolor);else if(p){var x;o.selectAll("g.contourfill path").style("fill",function(f){return void 0===x&&(x=f.level),g(f.level+.5*i)}),void 0===x&&(x=s),o.selectAll("g.contourbg path").style("fill",g(x-.5*i))}}),b(e)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/defaults"),v=y("./label_defaults");Q.exports=function(b,h,e,n,r){var o,t=e("contours.coloring"),d="";"fill"===t&&(o=e("contours.showlines")),!1!==o&&("lines"!==t&&(d=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==t&&(!0!==b.showlegend&&(h.showlegend=!1),h._dfltShowLegend=!1,m(b,h,n,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),v(e,n,d,r)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(y,Q,K){"use strict";var m=y("../heatmap/attributes"),v=y("../contour/attributes"),b=y("../../components/colorscale/attributes"),h=y("../../lib/extend").extendFlat,e=v.contours;Q.exports=h({carpet:{valType:"string",editType:"calc"},z:m.z,a:m.x,a0:m.x0,da:m.dx,b:m.y,b0:m.y0,db:m.dy,text:m.text,hovertext:m.hovertext,transpose:m.transpose,atype:m.xtype,btype:m.ytype,fillcolor:v.fillcolor,autocontour:v.autocontour,ncontours:v.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:v.line.color,width:v.line.width,dash:v.line.dash,smoothing:v.line.smoothing,editType:"plot"},transforms:void 0},b("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/calc"),v=y("../../lib"),b=y("../heatmap/convert_column_xyz"),h=y("../heatmap/clean_2d_array"),e=y("../heatmap/interp2d"),n=y("../heatmap/find_empties"),r=y("../heatmap/make_bound_array"),o=y("./defaults"),t=y("../carpet/lookup_carpetid"),d=y("../contour/set_contours");Q.exports=function(a,i){var s=i._carpetTrace=t(a,i);if(s&&s.visible&&"legendonly"!==s.visible){if(!i.a||!i.b){var c=a.data[s.index],l=a.data[i.index];l.a||(l.a=c.a),l.b||(l.b=c.b),o(l,i,i._defaultColor,a._fullLayout)}var p=function(g,u){var x,f,T,_,k,w,C,A=u._carpetTrace,O=A.aaxis,P=A.baxis;O._minDtick=0,P._minDtick=0,v.isArray1D(u.z)&&b(u,O,P,"a","b",["z"]),x=u._a=u._a||u.a,_=u._b=u._b||u.b,x=x?O.makeCalcdata(u,"_a"):[],_=_?P.makeCalcdata(u,"_b"):[],f=u.a0||0,T=u.da||1,k=u.b0||0,w=u.db||1,C=u._z=h(u._z||u.z,u.transpose),u._emptypoints=n(C),e(C,u._emptypoints);var S=v.maxRowLength(C),V={a:r(u,"scaled"===u.xtype?"":x,f,T,S,O),b:r(u,"scaled"===u.ytype?"":_,k,w,C.length,P),z:C};return"levels"===u.contours.type&&"none"!==u.contours.coloring&&m(g,u,{vals:C,containerStr:"",cLetter:"z"}),[V]}(a,i);return d(i,i._z),p}}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../heatmap/xyz_defaults"),b=y("./attributes"),h=y("../contour/constraint_defaults"),e=y("../contour/contours_defaults"),n=y("../contour/style_defaults");Q.exports=function(r,o,t,d){function a(i,s){return m.coerce(r,o,b,i,s)}if(a("carpet"),r.a&&r.b){if(!v(r,o,a,d,"a","b"))return void(o.visible=!1);a("text"),"constraint"===a("contours.type")?h(r,o,a,d,t,{hasHover:!1}):(e(r,o,a,function(i){return m.coerce2(r,o,b,i)}),n(r,o,a,d,{hasHover:!1}))}else o._defaultColor=t,o._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../contour/colorbar"),calc:y("./calc"),plot:y("./plot"),style:y("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../carpet/map_1d_array"),b=y("../carpet/makepath"),h=y("../../components/drawing"),e=y("../../lib"),n=y("../contour/make_crossings"),r=y("../contour/find_all_paths"),o=y("../contour/plot"),t=y("../contour/constants"),d=y("../contour/convert_to_constraints"),a=y("../contour/empty_pathinfo"),i=y("../contour/close_boundaries"),s=y("../carpet/lookup_carpetid"),c=y("../carpet/axis_aligned_line");function l(u,x,f){var T=u.getPointAtLength(x),_=u.getPointAtLength(f),k=_.x-T.x,w=_.y-T.y,C=Math.sqrt(k*k+w*w);return[k/C,w/C]}function p(u){var x=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return[u[0]/x,u[1]/x]}function g(u,x){var f=Math.abs(u[0]*x[0]+u[1]*x[1]);return Math.sqrt(1-f*f)/f}Q.exports=function(u,x,f,T){var _=x.xaxis,k=x.yaxis;e.makeTraceGroups(T,f,"contour").each(function(w){var C=m.select(this),A=w[0],O=A.trace,P=O._carpetTrace=s(u,O),S=u.calcdata[P.index][0];if(P.visible&&"legendonly"!==P.visible){var E=A.a,D=A.b,z=O.contours,N=a(z,x,A),V="constraint"===z.type,X=z._operation,J=V?"="===X?"lines":"fill":z.coloring,G=[[E[0],D[D.length-1]],[E[E.length-1],D[D.length-1]],[E[E.length-1],D[0]],[E[0],D[0]]];n(N),r(N,1e-8*(E[E.length-1]-E[0]),1e-8*(D[D.length-1]-D[0]));var j,B,H,ee,U=N;"constraint"===z.type&&(U=d(N,X)),function(ne,se){var ie,ue,le,de,be,_e,xe,Ee,he;for(ie=0;ie<ne.length;ie++){for(be=(de=ne[ie]).pedgepaths=[],_e=de.ppaths=[],ue=0;ue<de.edgepaths.length;ue++){for(he=de.edgepaths[ue],xe=[],le=0;le<he.length;le++)xe[le]=se(he[le]);be.push(xe)}for(ue=0;ue<de.paths.length;ue++){for(he=de.paths[ue],Ee=[],le=0;le<he.length;le++)Ee[le]=se(he[le]);_e.push(Ee)}}}(N,te);var $=[];for(ee=S.clipsegments.length-1;ee>=0;ee--)B=v([],(j=S.clipsegments[ee]).x,_.c2p),H=v([],j.y,k.c2p),B.reverse(),H.reverse(),$.push(b(B,H,j.bicubic));var q="M"+$.join("L")+"Z";(function(ne,se,ie,ue,le,de){var be,_e,xe,Ee,he=e.ensureSingle(ne,"g","contourbg").selectAll("path").data("fill"!==de||le?[]:[0]);he.enter().append("path"),he.exit().remove();var me=[];for(Ee=0;Ee<se.length;Ee++)_e=v([],(be=se[Ee]).x,ie.c2p),xe=v([],be.y,ue.c2p),me.push(b(_e,xe,be.bicubic));he.attr("d","M"+me.join("L")+"Z").style("stroke","none")})(C,S.clipsegments,_,k,V,J),function(ne,se,ie,ue,le,de,be,_e,xe,Ee,he){var me="fill"===Ee;me&&i(le,ne.contours);var Se=e.ensureSingle(se,"g","contourfill").selectAll("path").data(me?le:[]);Se.enter().append("path"),Se.exit().remove(),Se.each(function(Me){var Ie=(Me.prefixBoundary?he:"")+function(Fe,Ne,De,$e,Re,ze,Ue,je){var rt,ut,gt,At,_t,it,et,wt="",Gt=Ne.edgepaths.map(function(We,Ke){return Ke}),Kt=!0,cr=1e-4*Math.abs(De[0][0]-De[2][0]),ar=1e-4*Math.abs(De[0][1]-De[2][1]);function hr(We){return Math.abs(We[1]-De[0][1])<ar}function Xt(We){return Math.abs(We[1]-De[2][1])<ar}function He(We){return Math.abs(We[0]-De[0][0])<cr}function Je(We){return Math.abs(We[0]-De[2][0])<cr}function pe(We,Ke){var Ye,ft,ct,St,Ft="";for(hr(We)&&!Je(We)||Xt(We)&&!He(We)?(St=Re.aaxis,ct=c(Re,ze,[We[0],Ke[0]],.5*(We[1]+Ke[1]))):(St=Re.baxis,ct=c(Re,ze,.5*(We[0]+Ke[0]),[We[1],Ke[1]])),Ye=1;Ye<ct.length;Ye++)for(Ft+=St.smoothing?"C":"L",ft=0;ft<ct[Ye].length;ft++){var at=ct[Ye][ft];Ft+=[Ue.c2p(at[0]),je.c2p(at[1])]+" "}return Ft}for(rt=0,ut=null;Gt.length;){for(ut&&(wt+=pe(ut,Ne.edgepaths[rt][0])),et=h.smoothopen(Ne.edgepaths[rt].map($e),Ne.smoothing),wt+=Kt?et:et.replace(/^M/,"L"),Gt.splice(Gt.indexOf(rt),1),ut=Ne.edgepaths[rt][Ne.edgepaths[rt].length-1],_t=-1,At=0;At<4;At++){if(!ut){e.log("Missing end?",rt,Ne);break}for(hr(ut)&&!Je(ut)?gt=De[1]:He(ut)?gt=De[0]:Xt(ut)?gt=De[3]:Je(ut)&&(gt=De[2]),it=0;it<Ne.edgepaths.length;it++){var Be=Ne.edgepaths[it][0];Math.abs(ut[0]-gt[0])<cr?Math.abs(ut[0]-Be[0])<cr&&(Be[1]-ut[1])*(gt[1]-Be[1])>=0&&(gt=Be,_t=it):Math.abs(ut[1]-gt[1])<ar?Math.abs(ut[1]-Be[1])<ar&&(Be[0]-ut[0])*(gt[0]-Be[0])>=0&&(gt=Be,_t=it):e.log("endpt to newendpt is not vert. or horz.",ut,gt,Be)}if(_t>=0)break;wt+=pe(ut,gt),ut=gt}if(_t===Ne.edgepaths.length){e.log("unclosed perimeter path");break}(Kt=-1===Gt.indexOf(rt=_t))&&(rt=Gt[0],wt+=pe(ut,gt)+"Z",ut=null)}for(rt=0;rt<Ne.paths.length;rt++)wt+=h.smoothclosed(Ne.paths[rt].map($e),Ne.smoothing);return wt}(0,Me,de,be,_e,xe,ie,ue);Ie?m.select(this).attr("d",Ie).style("stroke","none"):m.select(this).remove()})}(O,C,_,k,U,G,te,P,S,J,q),function(ne,se,ie,ue,le,de,be){var _e=e.ensureSingle(ne,"g","contourlines"),xe=!1!==le.showlines,Ee=le.showlabels,he=xe&&Ee,me=o.createLines(_e,xe||Ee,se),Se=o.createLineClip(_e,he,ie,ue.trace.uid),Me=ne.selectAll("g.contourlabels").data(Ee?[0]:[]);if(Me.exit().remove(),Me.enter().append("g").classed("contourlabels",!0),Ee){var Ne=de.xaxis._length,De=de.yaxis._length,$e=[[[0,0],[Ne,0],[Ne,De],[0,De]]],Re=[];e.clearLocationCache();var ze=o.labelFormatter(ie,ue),Ue=h.tester.append("text").attr("data-notex",1).call(h.font,le.labelfont),je={left:0,right:Ne,center:Ne/2,top:0,bottom:De,middle:De/2},rt=Math.sqrt(Ne*Ne+De*De),ut=t.LABELDISTANCE*rt/Math.max(1,se.length/t.LABELINCREASE);me.each(function(gt){var At=o.calcTextOpts(gt.level,ze,Ue,ie);m.select(this).selectAll("path").each(function(_t){var it=e.getVisibleSegment(this,je,At.height/2);if(it&&(function(Kt,cr,ar,hr,Xt,He){for(var Je,pe=0;pe<ar.pedgepaths.length;pe++)cr===ar.pedgepaths[pe]&&(Je=ar.edgepaths[pe]);if(Je){var we=Xt.a[0],Be=Xt.a[Xt.a.length-1],We=Xt.b[0],Ke=Xt.b[Xt.b.length-1],ft=l(Kt,0,1),ct=l(Kt,hr.total,hr.total-1),St=Ye(Je[0],ft),Ft=hr.total-Ye(Je[Je.length-1],ct);hr.min<St&&(hr.min=St),hr.max>Ft&&(hr.max=Ft),hr.len=hr.max-hr.min}function Ye(at,mt){var qt,Et=0;return(Math.abs(at[0]-we)<.1||Math.abs(at[0]-Be)<.1)&&(qt=p(Xt.dxydb_rough(at[0],at[1],.1)),Et=Math.max(Et,He*g(mt,qt)/2)),(Math.abs(at[1]-We)<.1||Math.abs(at[1]-Ke)<.1)&&(qt=p(Xt.dxyda_rough(at[0],at[1],.1)),Et=Math.max(Et,He*g(mt,qt)/2)),Et}}(this,_t,gt,it,be,At.height),!(it.len<(At.width+At.height)*t.LABELMIN)))for(var et=Math.min(Math.ceil(it.len/ut),t.LABELMAX),wt=0;wt<et;wt++){var Gt=o.findBestTextLocation(this,it,At,Re,je);if(!Gt)break;o.addLabelData(Gt,At,Re,$e)}})}),Ue.remove(),o.drawLabels(Me,Re,ie,Se,he?$e:null)}Ee&&!xe&&me.remove()}(C,N,u,A,z,x,P),h.setClipUrl(C,P._clipPathId,u)}function te(ne){var se=P.ab2xy(ne[0],ne[1],!0);return[_.c2p(se[0]),k.c2p(se[1])]}})}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/attributes"),v=y("../../plots/template_attributes").hovertemplateAttrs,b=y("../../plots/attributes"),h=y("../scattermapbox/attributes"),e=y("../../lib/extend").extendFlat;Q.exports=e({lon:h.lon,lat:h.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:h.text,hovertext:h.hovertext,hoverinfo:e({},b.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:v(),showlegend:e({},b.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib").isArrayOrTypedArray,b=y("../../constants/numerical").BADNUM,h=y("../../components/colorscale/calc"),e=y("../../lib")._;Q.exports=function(n,r){for(var o=r._length,t=new Array(o),d=r.z,a=v(d)&&d.length,i=0;i<o;i++){var s=t[i]={},c=r.lon[i],l=r.lat[i];if(s.lonlat=m(c)&&m(l)?[+c,+l]:[b,b],a){var p=d[i];s.z=m(p)?p:b}}return h(n,r,{vals:a?d:[0,1],containerStr:"",cLetter:"z"}),o&&(t[0].t={labels:{lat:e(n,"lat:")+" ",lon:e(n,"lon:")+" "}}),t}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../../components/color"),h=y("../../components/colorscale"),e=y("../../constants/numerical").BADNUM,n=y("../../lib/geojson_utils").makeBlank;Q.exports=function(r){var o=r[0].trace,t=!0===o.visible&&0!==o._length,d=o._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:n()};if(!t)return d;var a,i=[],s=o.z,c=o.radius,l=v.isArrayOrTypedArray(s)&&s.length,p=v.isArrayOrTypedArray(c);for(a=0;a<r.length;a++){var g=r[a],u=g.lonlat;if(u[0]!==e){var x={};if(l){var f=g.z;x.z=f!==e?f:0}p&&(x.r=m(c[a])&&c[a]>0?+c[a]:0),i.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:x})}}var T=h.extractOpts(o),_=T.reversescale?h.flipScale(T.colorscale):T.colorscale,k=_[0][1],w=["interpolate",["linear"],["heatmap-density"],0,b.opacity(k)<1?k:b.addOpacity(k,0)];for(a=1;a<_.length;a++)w.push(_[a][0],_[a][1]);return v.extendFlat(d.heatmap.paint,{"heatmap-weight":l?["interpolate",["linear"],["get","z"],T.min,0,T.max,1]:1/(T.max-T.min),"heatmap-color":w,"heatmap-radius":p?{type:"identity",property:"r"}:o.radius,"heatmap-opacity":o.opacity}),d.geojson={type:"FeatureCollection",features:i},d.heatmap.layout.visibility="visible",d}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/colorscale/defaults"),b=y("./attributes");Q.exports=function(h,e,n,r){function o(i,s){return m.coerce(h,e,b,i,s)}var t=o("lon")||[],d=o("lat")||[],a=Math.min(t.length,d.length);a?(e._length=a,o("z"),o("radius"),o("below"),o("text"),o("hovertext"),o("hovertemplate"),v(h,e,r,o,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(y,Q,K){"use strict";Q.exports=function(m,v){return m.lon=v.lon,m.lat=v.lat,m.z=v.z,m}},{}],776:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../scattermapbox/hover").hoverPoints,b=y("../scattermapbox/hover").getExtraText;Q.exports=function(h,e,n){var r=v(h,e,n);if(r){var o=r[0],t=o.cd,d=t[0].trace,a=t[o.index];if(delete o.color,"z"in a){var i=o.subplot.mockAxis;o.z=a.z,o.zLabel=m.tickText(i,i.c2l(a.z),"hover").text}return o.extraText=b(d,a,t[0].t.labels),[o]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),formatLabels:y("../scattermapbox/format_labels"),calc:y("./calc"),plot:y("./plot"),hoverPoints:y("./hover"),eventData:y("./event_data"),getBelow:function(m,v){for(var b=v.getMapLayers(),h=0;h<b.length;h++){var e=b[h],n=e.id;if("symbol"===e.type&&"string"==typeof n&&-1===n.indexOf("plotly-"))return n}},moduleType:"trace",name:"densitymapbox",basePlotModule:y("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(y,Q,K){"use strict";var m=y("./convert"),v=y("../../plots/mapbox/constants").traceLayerPrefix;function b(e,n){this.type="densitymapbox",this.subplot=e,this.uid=n,this.sourceId="source-"+n,this.layerList=[["heatmap",v+n+"-heatmap"]],this.below=null}var h=b.prototype;h.update=function(e){var n=this.subplot,r=this.layerList,o=m(e),t=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(o.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(o,t),this.below=t);for(var d=0;d<r.length;d++){var a=r[d],s=a[1],c=o[a[0]];n.setOptions(s,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&n.setOptions(s,"setPaintProperty",c.paint)}},h._addLayers=function(e,n){for(var r=this.subplot,o=this.layerList,t=this.sourceId,d=0;d<o.length;d++){var a=o[d],i=a[0],s=e[i];r.addLayer({type:i,id:a[1],source:t,layout:s.layout,paint:s.paint},n)}},h._removeLayers=function(){for(var e=this.subplot.map,n=this.layerList,r=n.length-1;r>=0;r--)e.removeLayer(n[r][1])},h.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},Q.exports=function(e,n){var r=n[0].trace,o=new b(e,r.uid),t=o.sourceId,d=m(n),a=o.below=e.belowLookup["trace-"+r.uid];return e.map.addSource(t,{type:"geojson",data:d.geojson}),o._addLayers(d,a),o}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b){for(var h=0;h<v.length;h++)v[h].i=h;m.mergeArray(b.text,v,"tx"),m.mergeArray(b.hovertext,v,"htx");var e=b.marker;if(e){m.mergeArray(e.opacity,v,"mo"),m.mergeArray(e.color,v,"mc");var n=e.line;n&&(m.mergeArray(n.color,v,"mlc"),m.mergeArrayCastPositive(n.width,v,"mlw"))}}},{"../../lib":515}],780:[function(y,Q,K){"use strict";var m,v=y("../bar/attributes"),b=y("../scatter/attributes").line,h=y("../../plots/attributes"),e=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=y("../../plots/template_attributes").hovertemplateAttrs,r=y("../../plots/template_attributes").texttemplateAttrs,o=y("./constants"),t=y("../../lib/extend").extendFlat,d=y("../../components/color");Q.exports={x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:v.hovertext,hovertemplate:n({},{keys:o.eventDataKeys}),hoverinfo:t({},h.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:r({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),text:v.text,textposition:v.textposition,insidetextanchor:t({},v.insidetextanchor,{dflt:"middle"}),textangle:t({},v.textangle,{dflt:0}),textfont:v.textfont,insidetextfont:v.insidetextfont,outsidetextfont:v.outsidetextfont,constraintext:v.constraintext,cliponaxis:v.cliponaxis,orientation:t({},v.orientation,{}),offset:t({},v.offset,{arrayOk:!1}),width:t({},v.width,{arrayOk:!1}),marker:(m=t({},v.marker),delete m.pattern,m),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:t({},b.color,{dflt:d.defaultLine}),width:t({},b.width,{dflt:0,editType:"plot"}),dash:b.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../plots/cartesian/align_period"),b=y("./arrays_to_calcdata"),h=y("../scatter/calc_selection"),e=y("../../constants/numerical").BADNUM;function n(r){return r===e?0:r}Q.exports=function(r,o){var t,d,a,i,s,c,l,p,g=m.getFromId(r,o.xaxis||"x"),u=m.getFromId(r,o.yaxis||"y");"h"===o.orientation?(t=g.makeCalcdata(o,"x"),a=u.makeCalcdata(o,"y"),i=v(o,u,"y",a),s=!!o.yperiodalignment,c="y"):(t=u.makeCalcdata(o,"y"),a=g.makeCalcdata(o,"x"),i=v(o,g,"x",a),s=!!o.xperiodalignment,c="x"),d=i.vals;var x,f=Math.min(d.length,t.length),T=new Array(f);for(o._base=[],l=0;l<f;l++){t[l]<0&&(t[l]=e);var _=!1;t[l]!==e&&l+1<f&&t[l+1]!==e&&(_=!0),p=T[l]={p:d[l],s:t[l],cNext:_},o._base[l]=-.5*p.s,s&&(T[l].orig_p=a[l],T[l][c+"End"]=i.ends[l],T[l][c+"Start"]=i.starts[l]),o.ids&&(p.id=String(o.ids[l])),0===l&&(T[0].vTotal=0),T[0].vTotal+=n(p.s),p.begR=n(p.s)/n(T[0].s)}for(l=0;l<f;l++)(p=T[l]).s!==e&&(p.sumR=p.s/T[0].vTotal,p.difR=void 0!==x?p.s/x:1,x=p.s);return b(T,o),h(T,o),T}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(y,Q,K){"use strict";Q.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(y,Q,K){"use strict";var m=y("../bar/cross_trace_calc").setGroupPositions;Q.exports=function(v,b){var h,e,n=v._fullLayout,r=v._fullData,o=v.calcdata,t=b.xaxis,d=b.yaxis,a=[],i=[],s=[];for(e=0;e<r.length;e++){var c=r[e];!0===c.visible&&c.xaxis===t._id&&c.yaxis===d._id&&"funnel"===c.type&&(h=o[e],"h"===c.orientation?s.push(h):i.push(h),a.push(h))}var p={mode:n.funnelmode,norm:n.funnelnorm,gap:n.funnelgap,groupgap:n.funnelgroupgap};for(m(v,t,d,i,p),m(v,d,t,s,p),e=0;e<a.length;e++){h=a[e];for(var g=0;g<h.length;g++)g+1<h.length&&(h[g].nextP0=h[g+1].p0,h[g].nextS0=h[g+1].s0,h[g].nextP1=h[g+1].p1,h[g].nextS1=h[g+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../bar/defaults").handleGroupingDefaults,b=y("../bar/defaults").handleText,h=y("../scatter/xy_defaults"),e=y("../scatter/period_defaults"),n=y("./attributes"),r=y("../../components/color");Q.exports={supplyDefaults:function(o,t,d,a){function i(p,g){return m.coerce(o,t,n,p,g)}if(h(o,t,a,i)){e(o,t,a,i),i("xhoverformat"),i("yhoverformat"),i("orientation",t.y&&!t.x?"v":"h"),i("offset"),i("width");var s=i("text");i("hovertext"),i("hovertemplate");var c=i("textposition");b(o,t,a,i,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===t.textposition||t.texttemplate||i("textinfo",Array.isArray(s)?"text+value":"value");var l=i("marker.color",d);i("marker.line.color",r.defaultLine),i("marker.line.width"),i("connector.visible")&&(i("connector.fillcolor",(g=m.isArrayOrTypedArray(p=l)?"#000":p,r.addOpacity(g,.5*r.opacity(g)))),i("connector.line.width")&&(i("connector.line.color"),i("connector.line.dash")))}else t.visible=!1;var p,g},crossTraceDefaults:function(o,t){var d,a;function i(c){return m.coerce(a._input,a,n,c)}if("group"===t.funnelmode)for(var s=0;s<o.length;s++)d=(a=o[s])._input,v(d,a,t,i)}}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(y,Q,K){"use strict";Q.exports=function(m,v){return m.x="xVal"in v?v.xVal:v.x,m.y="yVal"in v?v.yVal:v.y,"percentInitial"in v&&(m.percentInitial=v.percentInitial),"percentPrevious"in v&&(m.percentPrevious=v.percentPrevious),"percentTotal"in v&&(m.percentTotal=v.percentTotal),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),m}},{}],786:[function(y,Q,K){"use strict";var m=y("../../components/color").opacity,v=y("../bar/hover").hoverOnBars,b=y("../../lib").formatPercent;Q.exports=function(h,e,n,r,o){var f,T,_,k,w,t=v(h,e,n,r,o);if(t){var d=t.cd,a=d[0].trace,s=d[t.index];t[("h"===a.orientation?"x":"y")+"LabelVal"]=s.s,t.percentInitial=s.begR,t.percentInitialLabel=b(s.begR,1),t.percentPrevious=s.difR,t.percentPreviousLabel=b(s.difR,1),t.percentTotal=s.sumR,t.percentTotalLabel=b(s.sumR,1);var c=s.hi||a.hoverinfo,l=[];if(c&&"none"!==c&&"skip"!==c){var p="all"===c,g=c.split("+"),u=function(x){return p||-1!==g.indexOf(x)};u("percent initial")&&l.push(t.percentInitialLabel+" of initial"),u("percent previous")&&l.push(t.percentPreviousLabel+" of previous"),u("percent total")&&l.push(t.percentTotalLabel+" of total")}return t.extraText=l.join("<br>"),t.color=(T=a.marker,k=(f=s).mlc||T.line.color,w=f.mlw||T.line.width,m(_=f.mc||T.color)?_:m(k)&&w?k:void 0),[t]}}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc"),plot:y("./plot"),style:y("./style").style,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(y,Q,K){"use strict";Q.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h,e){var n=!1;function r(d,a){return m.coerce(b,h,v,d,a)}for(var o=0;o<e.length;o++){var t=e[o];if(t.visible&&"funnel"===t.type){n=!0;break}}n&&(r("funnelmode"),r("funnelgap",.2),r("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../components/drawing"),h=y("../../constants/numerical").BADNUM,e=y("../bar/plot"),n=y("../bar/uniform_text").clearMinTextSize;function r(o,t,d,a){var i=[],s=[],c=a?t:d,l=a?d:t;return i[0]=c.c2p(o.s0,!0),s[0]=l.c2p(o.p0,!0),i[1]=c.c2p(o.s1,!0),s[1]=l.c2p(o.p1,!0),i[2]=c.c2p(o.nextS0,!0),s[2]=l.c2p(o.nextP0,!0),i[3]=c.c2p(o.nextS1,!0),s[3]=l.c2p(o.nextP1,!0),a?[i,s]:[s,i]}Q.exports=function(o,t,d,a){var s,c,g,u,i=o._fullLayout;n("funnel",i),s=o,g=(c=t).xaxis,u=c.yaxis,v.makeTraceGroups(a,d,"trace bars").each(function(x){var f=m.select(this),T=x[0].trace,_=v.ensureSingle(f,"g","regions");if(T.connector&&T.connector.visible){var k="h"===T.orientation,w=_.selectAll("g.region").data(v.identity);w.enter().append("g").classed("region",!0),w.exit().remove();var C=w.size();w.each(function(A,O){if(O===C-1||A.cNext){var P=r(A,g,u,k),S=P[0],E=P[1],D="";S[0]!==h&&E[0]!==h&&S[1]!==h&&E[1]!==h&&S[2]!==h&&E[2]!==h&&S[3]!==h&&E[3]!==h&&(D+=k?"M"+S[0]+","+E[1]+"L"+S[2]+","+E[2]+"H"+S[3]+"L"+S[1]+","+E[1]+"Z":"M"+S[1]+","+E[1]+"L"+S[2]+","+E[3]+"V"+E[2]+"L"+S[1]+","+E[0]+"Z"),""===D&&(D="M0,0Z"),v.ensureSingle(m.select(this),"path").attr("d",D).call(b.setClipUrl,c.layerClipId,s)}})}else _.remove()}),function(s,c,l,p){var g=c.xaxis,u=c.yaxis;v.makeTraceGroups(p,l,"trace bars").each(function(x){var f=m.select(this),T=x[0].trace,_=v.ensureSingle(f,"g","lines");if(T.connector&&T.connector.visible&&T.connector.line.width){var k="h"===T.orientation,w=_.selectAll("g.line").data(v.identity);w.enter().append("g").classed("line",!0),w.exit().remove();var C=w.size();w.each(function(A,O){if(O===C-1||A.cNext){var P=r(A,g,u,k),S=P[0],E=P[1],D="";void 0!==S[3]&&void 0!==E[3]&&(k?(D+="M"+S[0]+","+E[1]+"L"+S[2]+","+E[2],D+="M"+S[1]+","+E[1]+"L"+S[3]+","+E[2]):(D+="M"+S[1]+","+E[1]+"L"+S[2]+","+E[3],D+="M"+S[1]+","+E[0]+"L"+S[2]+","+E[2])),""===D&&(D="M0,0Z"),v.ensureSingle(m.select(this),"path").attr("d",D).call(b.setClipUrl,c.layerClipId,s)}})}else _.remove()})}(o,t,d,a),e.plot(o,t,d,a,{mode:i.funnelmode,norm:i.funnelmode,gap:i.funnelgap,groupgap:i.funnelgroupgap})}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/drawing"),b=y("../../components/color"),h=y("../../constants/interactions").DESELECTDIM,e=y("../bar/style"),n=y("../bar/uniform_text").resizeText,r=e.styleTextPoints;Q.exports={style:function(o,t,d){var a=d||m.select(o).selectAll("g.funnellayer").selectAll("g.trace");n(o,a,"funnel"),a.style("opacity",function(i){return i[0].trace.opacity}),a.each(function(i){var s=m.select(this),c=i[0].trace;s.selectAll(".point > path").each(function(l){if(!l.isBlank){var p=c.marker;m.select(this).call(b.fill,l.mc||p.color).call(b.stroke,l.mlc||p.line.color).call(v.dashLine,p.line.dash,l.mlw||p.line.width).style("opacity",c.selectedpoints&&!l.selected?h:1)}}),r(s,c,o),s.selectAll(".regions").each(function(){m.select(this).selectAll("path").style("stroke-width",0).call(b.fill,c.connector.fillcolor)}),s.selectAll(".lines").each(function(){var l=c.connector.line;v.lineGroupStyle(m.select(this).selectAll("path"),l.width,l.color,l.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(y,Q,K){"use strict";var m=y("../pie/attributes"),v=y("../../plots/attributes"),b=y("../../plots/domain").attributes,h=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../plots/template_attributes").texttemplateAttrs,n=y("../../lib/extend").extendFlat;Q.exports={labels:m.labels,label0:m.label0,dlabel:m.dlabel,values:m.values,marker:{colors:m.marker.colors,line:{color:n({},m.marker.line.color,{dflt:null}),width:n({},m.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:m.text,hovertext:m.hovertext,scalegroup:n({},m.scalegroup,{}),textinfo:n({},m.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:n({},v.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:h({},{keys:["label","color","value","text","percent"]}),textposition:n({},m.textposition,{values:["inside","none"],dflt:"inside"}),textfont:m.textfont,insidetextfont:m.insidetextfont,title:{text:m.title.text,font:m.title.font,position:n({},m.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:b({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(y,Q,K){"use strict";var m=y("../../plots/plots");K.name="funnelarea",K.plot=function(v,b,h,e){m.plotBasePlot(K.name,v,b,h,e)},K.clean=function(v,b,h,e){m.cleanBasePlot(K.name,v,b,h,e)}},{"../../plots/plots":628}],794:[function(y,Q,K){"use strict";var m=y("../pie/calc");Q.exports={calc:function(v,b){return m.calc(v,b)},crossTraceCalc:function(v){m.crossTraceCalc(v,{type:"funnelarea"})}}},{"../pie/calc":912}],795:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("../../plots/domain").defaults,h=y("../bar/defaults").handleText,e=y("../pie/defaults").handleLabelsAndValues;Q.exports=function(n,r,o,t){function d(x,f){return m.coerce(n,r,v,x,f)}var a=d("labels"),i=d("values"),s=e(a,i),c=s.len;if(r._hasLabels=s.hasLabels,r._hasValues=s.hasValues,!r._hasLabels&&r._hasValues&&(d("label0"),d("dlabel")),c){r._length=c,d("marker.line.width")&&d("marker.line.color",t.paper_bgcolor),d("marker.colors"),d("scalegroup");var l,p=d("text"),g=d("texttemplate");if(g||(l=d("textinfo",Array.isArray(p)?"text+percent":"percent")),d("hovertext"),d("hovertemplate"),g||l&&"none"!==l){var u=d("textposition");h(n,r,t,d,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}b(r,t,d),d("title.text")&&(d("title.position"),m.coerceFont(d,"title.font",t.font)),d("aspectratio"),d("baseratio")}else r.visible=!1}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"funnelarea",basePlotModule:y("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),style:y("./style"),styleOne:y("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(y,Q,K){"use strict";var m=y("../pie/layout_attributes").hiddenlabels;Q.exports={hiddenlabels:m,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h){function e(n,r){return m.coerce(b,h,v,n,r)}e("hiddenlabels"),e("funnelareacolorway",h.colorway),e("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/drawing"),b=y("../../lib"),h=b.strScale,e=b.strTranslate,n=y("../../lib/svg_text_utils"),r=y("../bar/plot").toMoveInsideBar,o=y("../bar/uniform_text"),t=o.recordMinTextSize,d=o.clearMinTextSize,a=y("../pie/helpers"),i=y("../pie/plot"),s=i.attachFxHandlers,c=i.determineInsideTextFont,l=i.layoutAreas,p=i.prerenderTitles,g=i.positionTitleOutside,u=i.formatSliceLabel;function x(f,T){return"l"+(T[0]-f[0])+","+(T[1]-f[1])}Q.exports=function(f,T){var _=f._fullLayout;d("funnelarea",_),p(T,f),l(T,_._size),b.makeTraceGroups(_._funnelarealayer,T,"trace").each(function(k){var w=m.select(this),C=k[0],A=C.trace;(function(O){if(O.length){var P=O[0],S=P.trace,E=S.aspectratio,D=S.baseratio;D>.999&&(D=.999);var z,Z,re,N=Math.pow(D,2),V=P.vTotal,X=V,J=V*N/(1-N)/V,j=[];for(j.push(G()),Z=O.length-1;Z>-1;Z--)(re=O[Z]).hidden||(J+=re.v/X,j.push(G()));var H=1/0,ee=-1/0;for(Z=0;Z<j.length;Z++)z=j[Z],H=Math.min(H,z[1]),ee=Math.max(ee,z[1]);for(Z=0;Z<j.length;Z++)j[Z][1]-=(ee+H)/2;var $=P.r,q=(ee-H)/2,te=$/j[j.length-1][0],ne=$/q*E;for(P.r=ne*q,Z=0;Z<j.length;Z++)j[Z][0]*=te,j[Z][1]*=ne;var be,_e,se=[-(z=j[0])[0],z[1]],ie=[z[0],z[1]],ue=0;for(Z=O.length-1;Z>-1;Z--)if(!(re=O[Z]).hidden){var le=j[ue+=1][0],de=j[ue][1];re.TL=[-le,de],re.TR=[le,de],re.BL=se,re.BR=ie,re.pxmid=[.5*((be=re.TR)[0]+(_e=re.BR)[0]),.5*(be[1]+_e[1])],se=re.TL,ie=re.TR}}function G(){var xe,Ee={x:xe=Math.sqrt(J),y:-xe};return[Ee.x,Ee.y]}})(k),w.each(function(){var O=m.select(this).selectAll("g.slice").data(k);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(S,E){if(S.hidden)m.select(this).selectAll("path,g").remove();else{S.pointNumber=S.i,S.curveNumber=A.index;var D=C.cx,z=C.cy,N=m.select(this),V=N.selectAll("path.surface").data([S]);V.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),N.call(s,f,k);var X="M"+(D+S.TR[0])+","+(z+S.TR[1])+x(S.TR,S.BR)+x(S.BR,S.BL)+x(S.BL,S.TL)+"Z";V.attr("d",X),u(f,S,C);var J=a.castOption(A.textposition,S.pts),G=N.selectAll("g.slicetext").data(S.text&&"none"!==J?[0]:[]);G.enter().append("g").classed("slicetext",!0),G.exit().remove(),G.each(function(){var Z=b.ensureSingle(m.select(this),"text","",function(q){q.attr("data-notex",1)}),re=b.ensureUniformFontSize(f,c(A,S,_.font));Z.text(S.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,re).call(n.convertToTspans,f);var j,B,H,ee=v.bBox(Z.node()),U=Math.min(S.BL[1],S.BR[1])+z,$=Math.max(S.TL[1],S.TR[1])+z;B=Math.max(S.TL[0],S.BL[0])+D,H=Math.min(S.TR[0],S.BR[0])+D,(j=r(B,H,U,$,ee,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=re.size,t(A.type,j,_),k[E].transform=j,Z.attr("transform",b.getTextTransform(j))})}});var P=m.select(this).selectAll("g.titletext").data(A.title.text?[0]:[]);P.enter().append("g").classed("titletext",!0),P.exit().remove(),P.each(function(){var S=b.ensureSingle(m.select(this),"text","",function(z){z.attr("data-notex",1)}),E=A.title.text;A._meta&&(E=b.templateString(E,A._meta)),S.text(E).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,A.title.font).call(n.convertToTspans,f);var D=g(C,_._size);S.attr("transform",e(D.x,D.y)+h(Math.min(1,D.scale))+e(D.tx,D.ty))})})})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../pie/style_one"),b=y("../bar/uniform_text").resizeText;Q.exports=function(h){var e=h._fullLayout._funnelarealayer.selectAll(".trace");b(h,e,"funnelarea"),e.each(function(n){var r=n[0].trace,o=m.select(this);o.style({opacity:r.opacity}),o.selectAll("path.surface").each(function(t){m.select(this).call(v,t,r)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(y,Q,K){"use strict";var m=y("../scatter/attributes"),v=y("../../plots/attributes"),b=y("../../plots/font_attributes"),h=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../plots/template_attributes").hovertemplateAttrs,n=y("../../plots/template_attributes").texttemplateAttrs,r=y("../../components/colorscale/attributes"),o=y("../../lib/extend").extendFlat;Q.exports=o({z:{valType:"data_array",editType:"calc"},x:o({},m.x,{impliedEdits:{xtype:"array"}}),x0:o({},m.x0,{impliedEdits:{xtype:"scaled"}}),dx:o({},m.dx,{impliedEdits:{xtype:"scaled"}}),y:o({},m.y,{impliedEdits:{ytype:"array"}}),y0:o({},m.y0,{impliedEdits:{ytype:"scaled"}}),dy:o({},m.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:o({},m.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:o({},m.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:o({},m.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:o({},m.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:o({},m.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:o({},m.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:h("x"),yhoverformat:h("y"),zhoverformat:h("z",1),hovertemplate:e(),texttemplate:n({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:b({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:o({},v.showlegend,{dflt:!1})},{transforms:void 0},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("../../plots/cartesian/axes"),h=y("../../plots/cartesian/align_period"),e=y("../histogram2d/calc"),n=y("../../components/colorscale/calc"),r=y("./convert_column_xyz"),o=y("./clean_2d_array"),t=y("./interp2d"),d=y("./find_empties"),a=y("./make_bound_array"),i=y("../../constants/numerical").BADNUM;function s(c){for(var l=[],p=c.length,g=0;g<p;g++){var u=c[g];u!==i&&l.push(u)}return l}Q.exports=function(c,l){var p,g,u,x,f,T,_,k,w,C,A,O=b.getFromId(c,l.xaxis||"x"),P=b.getFromId(c,l.yaxis||"y"),S=m.traceIs(l,"contour"),E=m.traceIs(l,"histogram"),D=m.traceIs(l,"gl2d"),z=S?"best":l.zsmooth;if(O._minDtick=0,P._minDtick=0,E)x=(A=e(c,l)).orig_x,p=A.x,g=A.x0,u=A.dx,k=A.orig_y,f=A.y,T=A.y0,_=A.dy,w=A.z;else{var N=l.z;v.isArray1D(N)?(r(l,O,P,"x","y",["z"]),p=l._x,f=l._y,N=l._z):(x=l.x?O.makeCalcdata(l,"x"):[],k=l.y?P.makeCalcdata(l,"y"):[],p=h(l,O,"x",x).vals,f=h(l,P,"y",k).vals,l._x=p,l._y=f),g=l.x0,u=l.dx,T=l.y0,_=l.dy,w=o(N,l,O,P)}function V(q){z=l._input.zsmooth=l.zsmooth=!1,v.warn('cannot use zsmooth: "fast": '+q)}if((O.rangebreaks||P.rangebreaks)&&(w=function(q,te,ne){for(var se=[],ie=-1,ue=0;ue<ne.length;ue++)if(te[ue]!==i){se[++ie]=[];for(var le=0;le<ne[ue].length;le++)q[le]!==i&&se[ie].push(ne[ue][le])}return se}(p,f,w),E||(p=s(p),f=s(f),l._x=p,l._y=f)),E||!S&&!l.connectgaps||(l._emptypoints=d(w),t(w,l._emptypoints)),"fast"===z)if("log"===O.type||"log"===P.type)V("log axis found");else if(!E){if(p.length){var X=(p[p.length-1]-p[0])/(p.length-1),J=Math.abs(X/100);for(C=0;C<p.length-1;C++)if(Math.abs(p[C+1]-p[C]-X)>J){V("x scale is not linear");break}}if(f.length&&"fast"===z){var G=(f[f.length-1]-f[0])/(f.length-1),Z=Math.abs(G/100);for(C=0;C<f.length-1;C++)if(Math.abs(f[C+1]-f[C]-G)>Z){V("y scale is not linear");break}}}var re=v.maxRowLength(w),j="scaled"===l.xtype?"":p,B=a(l,j,g,u,re,O),H="scaled"===l.ytype?"":f,ee=a(l,H,T,_,w.length,P);D||(l._extremes[O._id]=b.findExtremes(O,B),l._extremes[P._id]=b.findExtremes(P,ee));var U={x:B,y:ee,z:w,text:l._text||l.text,hovertext:l._hovertext||l.hovertext};if(l.xperiodalignment&&x&&(U.orig_x=x),l.yperiodalignment&&k&&(U.orig_y=k),j&&j.length===B.length-1&&(U.xCenter=j),H&&H.length===ee.length-1&&(U.yCenter=H),E&&(U.xRanges=A.xRanges,U.yRanges=A.yRanges,U.pts=A.pts),S||n(c,l,{vals:w,cLetter:"z"}),S&&l.contours&&"heatmap"===l.contours.coloring){var $={type:"contour"===l.type?"heatmap":"histogram2d",xcalendar:l.xcalendar,ycalendar:l.ycalendar};U.xfill=a($,j,g,u,re,O),U.yfill=a($,H,T,_,w.length,P)}return[U]}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../../constants/numerical").BADNUM;Q.exports=function(h,e,n,r){var o,t,d,a,i,s;function c(f){if(m(f))return+f}if(e&&e.transpose){for(o=0,i=0;i<h.length;i++)o=Math.max(o,h[i].length);if(0===o)return!1;d=function(f){return f.length},a=function(f,T,_){return(f[_]||[])[T]}}else o=h.length,d=function(f,T){return f[T].length},a=function(f,T,_){return(f[T]||[])[_]};function p(f){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&f&&"category"===f.type&&e["_"+f._id.charAt(0)].length){var T=f._id.charAt(0),_={},k=e["_"+T+"CategoryMap"]||e[T];for(i=0;i<k.length;i++)_[k[i]]=i;return function(w){var C=_[f._categories[w]];return C+1?C:b}}return v.identity}var g=p(n),u=p(r);r&&"category"===r.type&&(o=r._categories.length);var f,T,_,x=new Array(o);for(i=0;i<o;i++)for(t=n&&"category"===n.type?n._categories.length:d(h,i),x[i]=new Array(t),s=0;s<t;s++)x[i][s]=c((f=h,T=u(i),_=g(s),T===b||_===b?b:a(f,T,_)));return x}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(y,Q,K){"use strict";Q.exports={min:"zmin",max:"zmax"}},{}],805:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../constants/numerical").BADNUM,b=y("../../plots/cartesian/align_period");Q.exports=function(h,e,n,r,o,t){var d=h._length,a=e.makeCalcdata(h,r),i=n.makeCalcdata(h,o);a=b(h,e,r,a).vals,i=b(h,n,o,i).vals;var s,c,l,p,g=h.text,u=void 0!==g&&m.isArray1D(g),x=h.hovertext,f=void 0!==x&&m.isArray1D(x),T=m.distinctVals(a),_=T.vals,k=m.distinctVals(i),w=k.vals,C=[],A=w.length,O=_.length;for(s=0;s<t.length;s++)C[s]=m.init2dArray(A,O);u&&(l=m.init2dArray(A,O)),f&&(p=m.init2dArray(A,O));var P=m.init2dArray(A,O);for(s=0;s<d;s++)if(a[s]!==v&&i[s]!==v){var S=m.findBin(a[s]+T.minDiff/2,_),E=m.findBin(i[s]+k.minDiff/2,w);for(c=0;c<t.length;c++)C[c][E][S]=h[t[c]][s],P[E][S]=s;u&&(l[E][S]=g[s]),f&&(p[E][S]=x[s])}for(h["_"+r]=_,h["_"+o]=w,c=0;c<t.length;c++)h["_"+t[c]]=C[c];u&&(h._text=l),f&&(h._hovertext=p),e&&"category"===e.type&&(h["_"+r+"CategoryMap"]=_.map(function(z){return e._categories[z]})),n&&"category"===n.type&&(h["_"+o+"CategoryMap"]=w.map(function(z){return n._categories[z]})),h._after2before=P}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./xyz_defaults"),b=y("./label_defaults"),h=y("../scatter/period_defaults"),e=y("./style_defaults"),n=y("../../components/colorscale/defaults"),r=y("./attributes");Q.exports=function(o,t,d,a){function i(s,c){return m.coerce(o,t,r,s,c)}v(o,t,i,a)?(h(o,t,a,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),b(i,a),e(o,t,i,a),i("hoverongaps"),i("connectgaps",m.isArray1D(t.z)&&!1!==t.zsmooth),n(o,t,a,i,{prefix:"",cLetter:"z"})):t.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(y,Q,K){"use strict";var m=y("../../lib").maxRowLength;Q.exports=function(v){var b,h,e,n,r,o,t,d,a=[],i={},s=[],c=v[0],l=[],p=[0,0,0],g=m(v);for(h=0;h<v.length;h++)for(b=l,l=c,c=v[h+1]||[],e=0;e<g;e++)void 0===l[e]&&((o=(void 0!==l[e-1]?1:0)+(void 0!==l[e+1]?1:0)+(void 0!==b[e]?1:0)+(void 0!==c[e]?1:0))?(0===h&&o++,0===e&&o++,h===v.length-1&&o++,e===l.length-1&&o++,o<4&&(i[[h,e]]=[h,e,o]),a.push([h,e,o])):s.push([h,e]));for(;s.length;){for(t={},d=!1,r=s.length-1;r>=0;r--)(o=((i[[(h=(n=s[r])[0])-1,e=n[1]]]||p)[2]+(i[[h+1,e]]||p)[2]+(i[[h,e-1]]||p)[2]+(i[[h,e+1]]||p)[2])/20)&&(t[n]=[h,e,o],s.splice(r,1),d=!0);if(!d)throw"findEmpties iterated with no new neighbors";for(n in t)i[n]=t[n],a.push(t[n])}return a.sort(function(u,x){return x[2]-u[2]})}},{"../../lib":515}],808:[function(y,Q,K){"use strict";var m=y("../../components/fx"),v=y("../../lib"),b=y("../../plots/cartesian/axes"),h=y("../../components/colorscale").extractOpts;Q.exports=function(e,n,r,o,t){t||(t={});var d,a,i,s,c=t.isContour,l=e.cd[0],p=l.trace,g=e.xa,u=e.ya,x=l.x,f=l.y,T=l.z,_=l.xCenter,k=l.yCenter,w=l.zmask,C=p.zhoverformat,A=x,O=f;if(!1!==e.index){try{i=Math.round(e.index[1]),s=Math.round(e.index[0])}catch{return void v.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(i<0||i>=T[0].length||s<0||s>T.length)return}else{if(m.inbox(n-x[0],n-x[x.length-1],0)>0||m.inbox(r-f[0],r-f[f.length-1],0)>0)return;if(c){var P;for(A=[2*x[0]-x[1]],P=1;P<x.length;P++)A.push((x[P]+x[P-1])/2);for(A.push([2*x[x.length-1]-x[x.length-2]]),O=[2*f[0]-f[1]],P=1;P<f.length;P++)O.push((f[P]+f[P-1])/2);O.push([2*f[f.length-1]-f[f.length-2]])}i=Math.max(0,Math.min(A.length-2,v.findBin(n,A))),s=Math.max(0,Math.min(O.length-2,v.findBin(r,O)))}var S,E,D=g.c2p(x[i]),z=g.c2p(x[i+1]),N=u.c2p(f[s]),V=u.c2p(f[s+1]);c?(z=D,d=(S=l.orig_x||x)[i],V=N,a=(E=l.orig_y||f)[s]):(S=l.orig_x||_||x,E=l.orig_y||k||f,d=_?S[i]:(S[i]+S[i+1])/2,a=k?E[s]:(E[s]+E[s+1])/2,g&&"category"===g.type&&(d=x[i]),u&&"category"===u.type&&(a=f[s]),p.zsmooth&&(D=z=g.c2p(d),N=V=u.c2p(a)));var X=T[s][i];if(w&&!w[s][i]&&(X=void 0),void 0!==X||p.hoverongaps){var J;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[s])?J=l.hovertext[s][i]:Array.isArray(l.text)&&Array.isArray(l.text[s])&&(J=l.text[s][i]);var G=h(p),re=b.tickText({type:"linear",range:[G.min,G.max],hoverformat:C,_separators:g._separators,_numFormat:g._numFormat},X,"hover").text;return[v.extendFlat(e,{index:p._after2before?p._after2before[s][i]:[s,i],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:D,x1:z,y0:N,y1:V,xLabelVal:d,yLabelVal:a,zLabelVal:X,zLabel:re,text:J})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),colorbar:y("./colorbar"),style:y("./style"),hoverPoints:y("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(y,Q,K){"use strict";var m=y("../../lib"),v=[[-1,0],[1,0],[0,-1],[0,1]];function b(e){return.5-.25*Math.min(1,.5*e)}function h(e,n,r){var o,t,d,a,i,s,c,l,p,g,u,x,f,T=0;for(a=0;a<n.length;a++){for(u=e[t=(o=n[a])[0]][d=o[1]],g=0,p=0,i=0;i<4;i++)(c=e[t+(s=v[i])[0]])&&void 0!==(l=c[d+s[1]])&&(0===g?x=f=l:(x=Math.min(x,l),f=Math.max(f,l)),p++,g+=l);if(0===p)throw"iterateInterp2d order is wrong: no defined neighbors";e[t][d]=g/p,void 0===u?p<4&&(T=1):(e[t][d]=(1+r)*e[t][d]-r*u,f>x&&(T=Math.max(T,Math.abs(e[t][d]-u)/(f-x))))}return T}Q.exports=function(e,n){var r,o=1;for(h(e,n),r=0;r<n.length&&!(n[r][2]<4);r++);for(n=n.slice(r),r=0;r<100&&o>.01;r++)o=h(e,n,b(o));return o>.01&&m.log("interp2d didn't converge quickly",o),e}},{"../../lib":515}],811:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b){v("texttemplate");var h=m.extendFlat({},b.font,{color:"auto",size:"auto"});m.coerceFont(v,"textfont",h)}},{"../../lib":515}],812:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib").isArrayOrTypedArray;Q.exports=function(b,h,e,n,r,o){var t,d,a,i=[],s=m.traceIs(b,"contour"),c=m.traceIs(b,"histogram"),l=m.traceIs(b,"gl2d");if(v(h)&&h.length>1&&!c&&"category"!==o.type){var p=h.length;if(!(p<=r))return h.slice(0,s?r:r+1);if(s||l)i=h.slice(0,r);else if(1===r)i=[h[0]-.5,h[0]+.5];else{for(i=[1.5*h[0]-.5*h[1]],a=1;a<p;a++)i.push(.5*(h[a-1]+h[a]));i.push(1.5*h[p-1]-.5*h[p-2])}if(p<r){var g=i[i.length-1],u=g-i[i.length-2];for(a=p;a<r;a++)i.push(g+=u)}}else{var x=b[o._id.charAt(0)+"calendar"];for(t=c?o.r2c(e,0,x):v(h)&&1===h.length?h[0]:void 0===e?0:("log"===o.type?o.d2c:o.r2c)(e,0,x),d=n||1,a=s||l?0:-.5;a<r;a++)i.push(t+d*a)}return i}},{"../../lib":515,"../../registry":647}],813:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("tinycolor2"),b=y("../../registry"),h=y("../../components/drawing"),e=y("../../plots/cartesian/axes"),n=y("../../lib"),r=y("../../lib/svg_text_utils"),o=y("../scatter/format_labels"),t=y("../../components/color"),d=y("../../components/colorscale").extractOpts,a=y("../../components/colorscale").makeColorScaleFuncFromTrace,i=y("../../constants/xmlns_namespaces"),s=y("../../constants/alignment").LINE_SPACING;function c(x){return x.selectAll("g.heatmap-label")}function l(x){c(x).remove()}function p(x,f){var T=f.length-2,_=n.constrain(n.findBin(x,f),0,T),k=f[_],C=n.constrain(_+(x-k)/(f[_+1]-k)-.5,0,T),A=Math.round(C),O=Math.abs(C-A);return C&&C!==T&&O?{bin0:A,frac:O,bin1:Math.round(A+O/(C-A))}:{bin0:A,bin1:A,frac:0}}function g(x,f){var T=f.length-1,_=n.constrain(n.findBin(x,f),0,T),k=f[_],w=(x-k)/(f[_+1]-k)||0;return w<=0?{bin0:_,bin1:_,frac:0}:w<.5?{bin0:_,bin1:_+1,frac:w}:{bin0:_+1,bin1:_,frac:1-w}}function u(x,f,T){x[f]=T[0],x[f+1]=T[1],x[f+2]=T[2],x[f+3]=Math.round(255*T[3])}Q.exports=function(x,f,T,_){var k=f.xaxis,w=f.yaxis;n.makeTraceGroups(_,T,"hm").each(function(C){var A,O,P,S,E,D,z,N,V=m.select(this),X=C[0],J=X.trace,G=J.xgap||0,Z=J.ygap||0,re=X.z,j=X.x,B=X.y,H=X.xCenter,ee=X.yCenter,U=b.traceIs(J,"contour"),$=U?"best":J.zsmooth,q=re.length,te=n.maxRowLength(re),ne=!1,se=!1;for(D=0;void 0===A&&D<j.length-1;)A=k.c2p(j[D]),D++;for(D=j.length-1;void 0===O&&D>0;)O=k.c2p(j[D]),D--;for(O<A&&(P=O,O=A,A=P,ne=!0),D=0;void 0===S&&D<B.length-1;)S=w.c2p(B[D]),D++;for(D=B.length-1;void 0===E&&D>0;)E=w.c2p(B[D]),D--;if(E<S&&(P=S,S=E,E=P,se=!0),U&&(H=j,ee=B,j=X.xfill,B=X.yfill),"fast"!==$){var ie="best"===$?0:.5;A=Math.max(-ie*k._length,A),O=Math.min((1+ie)*k._length,O),S=Math.max(-ie*w._length,S),E=Math.min((1+ie)*w._length,E)}var ue,le,de=Math.round(O-A),be=Math.round(E-S);if(de<=0||be<=0)return V.selectAll("image").data([]).exit().remove(),void l(V);"fast"===$?(ue=te,le=q):(ue=de,le=be);var _e=document.createElement("canvas");_e.width=ue,_e.height=le;var xe,Ee,he=_e.getContext("2d"),me=a(J,{noNumericCheck:!0,returnArray:!0});"fast"===$?(xe=ne?function(Kr){return te-1-Kr}:n.identity,Ee=se?function(Kr){return q-1-Kr}:n.identity):(xe=function(Kr){return n.constrain(Math.round(k.c2p(j[Kr])-A),0,de)},Ee=function(Kr){return n.constrain(Math.round(w.c2p(B[Kr])-S),0,be)});var Se,Me,Ie,Fe,Ne=Ee(0),De=[Ne,Ne],$e=ne?0:1,Re=se?0:1,ze=0,Ue=0,je=0,rt=0;function ut(Kr,sn){if(void 0!==Kr){var gn=me(Kr);return gn[0]=Math.round(gn[0]),gn[1]=Math.round(gn[1]),gn[2]=Math.round(gn[2]),ze+=sn,Ue+=gn[0]*sn,je+=gn[1]*sn,rt+=gn[2]*sn,gn}return[0,0,0,0]}function gt(Kr,sn,gn,zn){var Vr=Kr[gn.bin0];if(void 0===Vr)return ut(void 0,1);var Qr=Kr[gn.bin1],Jr=sn[gn.bin0],Nn=sn[gn.bin1];return ut(Vr+gn.frac*(Qr-Vr||0)+zn.frac*((Jr-Vr||0)+gn.frac*(void 0===Qr?void 0===Nn?0:void 0===Jr?2*(Nn-Vr):2*(2*Nn-Jr-Vr)/3:void 0===Nn?void 0===Jr?0:2*(2*Vr-Qr-Jr)/3:void 0===Jr?2*(2*Nn-Qr-Vr)/3:Nn+Vr-Qr-Jr)))}if($){var At,_t=0;try{At=new Uint8Array(de*be*4)}catch{At=new Array(de*be*4)}if("best"===$){var it,et,wt,Gt=H||j,Kt=ee||B,cr=new Array(Gt.length),ar=new Array(Kt.length),hr=new Array(de),Xt=H?g:p,He=ee?g:p;for(D=0;D<Gt.length;D++)cr[D]=Math.round(k.c2p(Gt[D])-A);for(D=0;D<Kt.length;D++)ar[D]=Math.round(w.c2p(Kt[D])-S);for(D=0;D<de;D++)hr[D]=Xt(D,cr);for(z=0;z<be;z++)for(et=re[(it=He(z,ar)).bin0],wt=re[it.bin1],D=0;D<de;D++,_t+=4)u(At,_t,Fe=gt(et,wt,hr[D],it))}else for(z=0;z<q;z++)for(Ie=re[z],De=Ee(z),D=0;D<de;D++)Fe=ut(Ie[D],1),u(At,_t=4*(De*de+xe(D)),Fe);var Je=he.createImageData(de,be);try{Je.data.set(At)}catch{var pe=Je.data,we=pe.length;for(z=0;z<we;z++)pe[z]=At[z]}he.putImageData(Je,0,0)}else{var Be=Math.floor(G/2),We=Math.floor(Z/2);for(z=0;z<q;z++)if(Ie=re[z],De.reverse(),De[Re]=Ee(z+1),De[0]!==De[1]&&void 0!==De[0]&&void 0!==De[1])for(Se=[Me=xe(0),Me],D=0;D<te;D++)Se.reverse(),Se[$e]=xe(D+1),Se[0]!==Se[1]&&void 0!==Se[0]&&void 0!==Se[1]&&(Fe=ut(Ie[D],(Se[1]-Se[0])*(De[1]-De[0])),he.fillStyle="rgba("+Fe.join(",")+")",he.fillRect(Se[0]+Be,De[0]+We,Se[1]-Se[0]-G,De[1]-De[0]-Z))}Ue=Math.round(Ue/ze),je=Math.round(je/ze),rt=Math.round(rt/ze);var Ke=v("rgb("+Ue+","+je+","+rt+")");x._hmpixcount=(x._hmpixcount||0)+ze,x._hmlumcount=(x._hmlumcount||0)+ze*Ke.getLuminance();var Ye=V.selectAll("image").data(C);Ye.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),Ye.attr({height:be,width:de,x:A,y:S,"xlink:href":_e.toDataURL("image/png")}),l(V);var ft=J.texttemplate;if(ft){var ct=d(J),St={type:"linear",range:[ct.min,ct.max],_separators:k._separators,_numFormat:k._numFormat},Ft="histogram2dcontour"===J.type,at="contour"===J.type,mt=at?q-1:q,qt=at?1:0,Et=at?te-1:te,Dt=[];for(D=at?1:0;D<mt;D++){var Le;if(at)Le=X.y[D];else if(Ft){if(0===D||D===q-1)continue;Le=X.y[D]}else if(X.yCenter)Le=X.yCenter[D];else{if(D+1===q&&void 0===X.y[D+1])continue;Le=(X.y[D]+X.y[D+1])/2}var Xe=Math.round(w.c2p(Le));if(!(0>Xe||Xe>w._length))for(z=qt;z<Et;z++){var ot;if(at)ot=X.x[z];else if(Ft){if(0===z||z===te-1)continue;ot=X.x[z]}else if(X.xCenter)ot=X.xCenter[z];else{if(z+1===te&&void 0===X.x[z+1])continue;ot=(X.x[z]+X.x[z+1])/2}var dt=Math.round(k.c2p(ot));if(!(0>dt||dt>k._length)){var Lt=o({x:ot,y:Le},J,x._fullLayout);Lt.x=ot,Lt.y=Le;var Ut=X.z[D][z];void 0===Ut?(Lt.z="",Lt.zLabel=""):(Lt.z=Ut,Lt.zLabel=e.tickText(St,Ut,"hover").text);var $t=X.text&&X.text[D]&&X.text[D][z];void 0!==$t&&!1!==$t||($t=""),Lt.text=$t;var Wt=n.texttemplateString(ft,Lt,x._fullLayout._d3locale,Lt,J._meta||{});if(Wt){var wr=Wt.split("<br>"),Rr=wr.length,br=0;for(N=0;N<Rr;N++)br=Math.max(br,wr[N].length);Dt.push({l:Rr,c:br,t:Wt,x:dt,y:Xe,z:Ut})}}}}var nr=J.textfont,lr=nr.family,sr=nr.size,_r=x._fullLayout.font.size;if(!sr||"auto"===sr){var Ar=1/0,zt=1/0,ur=0,Tt=0;for(N=0;N<Dt.length;N++){var Qt=Dt[N];if(ur=Math.max(ur,Qt.l),Tt=Math.max(Tt,Qt.c),N<Dt.length-1){var Er=Dt[N+1],zr=Math.abs(Er.x-Qt.x),an=Math.abs(Er.y-Qt.y);zr&&(Ar=Math.min(Ar,zr)),an&&(zt=Math.min(zt,an))}}isFinite(Ar)&&isFinite(zt)?(Ar-=G,zt-=Z,Ar/=Tt,zt/=ur,Ar/=s/2,zt/=s,sr=Math.min(Math.floor(Ar),Math.floor(zt),_r)):sr=_r}if(sr<=0||!isFinite(sr))return;c(V).data(Dt).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(Kr){var zn,sn=m.select(this),gn=nr.color;gn&&"auto"!==gn||(gn=t.contrast("rgba("+me(Kr.z).join()+")")),sn.attr("data-notex",1).call(r.positionText,(zn=Kr,zn.x),function(zn){return zn.y-sr*(zn.l*s/2-1)}(Kr)).call(h.font,lr,sr,gn).text(Kr.t).call(r.convertToTspans,x)})}})}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(y,Q,K){"use strict";var m=y("@plotly/d3");Q.exports=function(v){m.select(v).selectAll(".hm image").style("opacity",function(b){return b.trace.opacity})}},{"@plotly/d3":58}],815:[function(y,Q,K){"use strict";Q.exports=function(m,v,b){!1===b("zsmooth")&&(b("xgap"),b("ygap")),b("zhoverformat")}},{}],816:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../../registry");function h(e,n){var r=n(e);return"scaled"===(r?n(e+"type","array"):"scaled")&&(n(e+"0"),n("d"+e)),r}Q.exports=function(e,n,r,o,t,d){var a,i,s=r("z");if(t=t||"x",d=d||"y",void 0===s||!s.length)return 0;if(v.isArray1D(e.z)){a=r(t),i=r(d);var c=v.minRowLength(a),l=v.minRowLength(i);if(0===c||0===l)return 0;n._length=Math.min(c,l,s.length)}else{if(a=h(t,r),i=h(d,r),!function(p){for(var g,u=!0,x=!1,f=!1,T=0;T<p.length;T++){if(!v.isArrayOrTypedArray(g=p[T])){u=!1;break}g.length>0&&(x=!0);for(var _=0;_<g.length;_++)if(m(g[_])){f=!0;break}}return u&&x&&f}(s))return 0;r("transpose"),n._length=null}return"heatmapgl"===e.type||b.getComponentMethod("calendars","handleTraceDefaults")(e,n,[t,d],o),!0}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(y,Q,K){"use strict";for(var m=y("../heatmap/attributes"),v=y("../../components/colorscale/attributes"),b=y("../../lib/extend").extendFlat,h=y("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],n={},r=0;r<e.length;r++){var o=e[r];n[o]=m[o]}n.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},b(n,v("",{cLetter:"z",autoColorDflt:!1})),Q.exports=h(n,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(y,Q,K){"use strict";var m=y("../../../stackgl_modules").gl_heatmap2d,v=y("../../plots/cartesian/axes"),b=y("../../lib/str2rgbarray");function h(n,r){this.scene=n,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=m(n.glplot,this.options),this.heatmap._trace=this}var e=h.prototype;e.handlePick=function(n){var r=this.options,o=r.shape,t=n.pointId,d=t%o[0],a=Math.floor(t/o[0]);return{trace:this,dataCoord:n.dataCoord,traceCoord:[r.x[d],r.y[a],r.z[t]],textLabel:this.textLabels[t],name:this.name,pointIndex:[a,d],hoverinfo:this.hoverinfo}},e.update=function(n,r){var o=r[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var t=o.z;this.options.z=[].concat.apply([],t),this.options.shape=[t[0].length,t.length],this.options.x=o.x,this.options.y=o.y,this.options.zsmooth=n.zsmooth;var i=function(g){for(var u=g.colorscale,x=g.zmin,f=g.zmax,T=u.length,_=new Array(T),k=new Array(4*T),w=0;w<T;w++){var C=u[w],A=b(C[1]);_[w]=x+C[0]*(f-x);for(var O=0;O<4;O++)k[4*w+O]=A[O]}return{colorLevels:_,colorValues:k}}(n);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var s,c,l=this.scene.xaxis,p=this.scene.yaxis;!1===n.zsmooth&&(s={ppad:o.x[1]-o.x[0]},c={ppad:o.y[1]-o.y[0]}),n._extremes[l._id]=v.findExtremes(l,o.x,s),n._extremes[p._id]=v.findExtremes(p,o.y,c)},e.dispose=function(){this.heatmap.dispose()},Q.exports=function(n,r,o){var t=new h(n,r.uid);return t.update(r,o),t}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../heatmap/xyz_defaults"),b=y("../../components/colorscale/defaults"),h=y("./attributes");Q.exports=function(e,n,r,o){function t(d,a){return m.coerce(e,n,h,d,a)}v(e,n,t,o)?(t("text"),t("zsmooth"),b(e,n,o,t,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(y,Q,K){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),calc:y("../heatmap/calc"),plot:y("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:y("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(y,Q,K){"use strict";var m=y("../bar/attributes"),v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,h=y("../../plots/template_attributes").texttemplateAttrs,e=y("../../plots/font_attributes"),n=y("./bin_attributes"),r=y("./constants"),o=y("../../lib/extend").extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:v("x"),yhoverformat:v("y"),text:o({},m.text,{}),hovertext:o({},m.hovertext,{}),orientation:m.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:n("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:n("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({},{keys:r.eventDataKeys}),texttemplate:h({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:o({},m.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:m.insidetextanchor,textangle:m.textangle,cliponaxis:m.cliponaxis,constraintext:m.constraintext,marker:m.marker,offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,_deprecated:{bardir:m._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(y,Q,K){"use strict";Q.exports=function(m,v){for(var b=m.length,h=0,e=0;e<b;e++)v[e]?(m[e]/=v[e],h+=m[e]):m[e]=null;return h}},{}],823:[function(y,Q,K){"use strict";Q.exports=function(m,v){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(y,Q,K){"use strict";var m=y("fast-isnumeric");Q.exports={count:function(v,b,h){return h[v]++,1},sum:function(v,b,h,e){var n=e[b];return m(n)?(n=Number(n),h[v]+=n,n):0},avg:function(v,b,h,e,n){var r=e[b];return m(r)&&(r=Number(r),h[v]+=r,n[v]++),0},min:function(v,b,h,e){var n=e[b];if(m(n)){if(n=Number(n),!m(h[v]))return h[v]=n,n;if(h[v]>n){var r=n-h[v];return h[v]=n,r}}return 0},max:function(v,b,h,e){var n=e[b];if(m(n)){if(n=Number(n),!m(h[v]))return h[v]=n,n;if(h[v]<n){var r=n-h[v];return h[v]=n,r}}return 0}}},{"fast-isnumeric":190}],825:[function(y,Q,K){"use strict";var m=y("../../constants/numerical"),v=m.ONEAVGYEAR,b=m.ONEAVGMONTH,h=m.ONEDAY,e=m.ONEHOUR,n=m.ONEMIN,r=m.ONESEC,o=y("../../plots/cartesian/axes").tickIncrement;function t(s,c,l,p){if(s*c<=0)return 1/0;for(var g=Math.abs(c-s),u="date"===l.type,x=d(g,u),f=0;f<10;f++){var T=d(80*x,u);if(x===T||!a(T,s,c,u,l,p))break;x=T}return x}function d(s,c){return c&&s>r?s>h?s>1.1*v?v:s>1.1*b?b:h:s>e?e:s>n?n:r:Math.pow(10,Math.floor(Math.log(s)/Math.LN10))}function a(s,c,l,p,g,u){if(p&&s>h){var x=i(c,g,u),f=i(l,g,u),T=s===v?0:1;return x[T]!==f[T]}return Math.floor(l/s)-Math.floor(c/s)>.1}function i(s,c,l){var p=c.c2d(s,v,l).split("-");return""===p[0]&&(p.unshift(),p[0]="-"+p[0]),p}Q.exports=function(s,c,l,p,g){var u,x,f=-1.1*c,T=-.1*c,_=s-T,k=l[0],w=l[1],C=Math.min(t(k+T,k+_,p,g),t(w+T,w+_,p,g)),A=Math.min(t(k+f,k+T,p,g),t(w+f,w+T,p,g));if(C>A&&A<Math.abs(w-k)/4e3?(u=C,x=!1):(u=Math.min(C,A),x=!0),"date"===p.type&&u>h){var O=u===v?1:6,P=u===v?"M12":"M1";return function(S,E){var D=p.c2d(S,v,g),z=D.indexOf("-",O);z>0&&(D=D.substr(0,z));var N=p.d2c(D,0,g);if(N<S){var V=o(N,P,!1,g);(N+V)/2<S+s&&(N=V)}return E&&x?o(N,P,!0,g):N}}return function(S,E){var D=u*Math.round(S/u);return D+u/10<S&&D+.9*u<S+s&&(D+=u),E&&x&&(D-=u),D}}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../../registry"),h=y("../../plots/cartesian/axes"),e=y("../bar/arrays_to_calcdata"),n=y("./bin_functions"),r=y("./norm_functions"),o=y("./average"),t=y("./bin_label_vals");function d(a,i,s,c,l){var p,g,u,x,f,T,_,k=c+"bins",w=a._fullLayout,A=w._histogramBinOpts[i["_"+c+"bingroup"]],O="overlay"===w.barmode,P=function(le){return s.r2c(le,0,x)},S=function(le){return s.c2r(le,0,x)},E="date"===s.type?function(le){return le||0===le?v.cleanDate(le,null,x):null}:function(le){return m(le)?Number(le):null};function D(le,de,be){de[le+"Found"]?(de[le]=E(de[le]),null===de[le]&&(de[le]=be[le])):(T[le]=de[le]=be[le],v.nestedProperty(g[0],k+"."+le).set(be[le]))}if(i["_"+c+"autoBinFinished"])delete i["_"+c+"autoBinFinished"];else{g=A.traces;var z=[],N=!0,V=!1,X=!1;for(p=0;p<g.length;p++)if((u=g[p]).visible){var J=A.dirs[p];f=u["_"+J+"pos0"]=s.makeCalcdata(u,J),z=v.concat(z,f),delete u["_"+c+"autoBinFinished"],!0===i.visible&&(N?N=!1:(delete u._autoBin,u["_"+c+"autoBinFinished"]=1),b.traceIs(u,"2dMap")&&(V=!0),"histogram2dcontour"===u.type&&(X=!0))}var G=h.autoBin(z,s,A.nbins,V,x=g[0][c+"calendar"],A.sizeFound&&A.size),Z=g[0]._autoBin={};if(T=Z[A.dirs[0]]={},X&&(A.size||(G.start=S(h.tickIncrement(P(G.start),G.size,!0,x))),void 0===A.end&&(G.end=S(h.tickIncrement(P(G.end),G.size,!1,x)))),O&&!b.traceIs(i,"2dMap")&&0===G._dataSpan&&"category"!==s.type&&"multicategory"!==s.type){if(l)return[G,f,!0];G=function(le,de,be,_e,xe){var Ee,he,me,Se=le._fullLayout,Me=function(gt,At){for(var _t=At.xaxis,it=At.yaxis,et=At.orientation,wt=[],Gt=gt._fullData,Kt=0;Kt<Gt.length;Kt++){var cr=Gt[Kt];"histogram"===cr.type&&!0===cr.visible&&cr.orientation===et&&cr.xaxis===_t&&cr.yaxis===it&&wt.push(cr)}return wt}(le,de),Ie=!1,Fe=1/0,Ne=[de];for(Ee=0;Ee<Me.length;Ee++)if((he=Me[Ee])===de)Ie=!0;else if(Ie){var De=d(le,he,be,_e,!0),$e=De[0],Re=De[2];he["_"+_e+"autoBinFinished"]=1,he["_"+_e+"pos0"]=De[1],Re?Ne.push(he):Fe=Math.min(Fe,$e.size)}else me=Se._histogramBinOpts[he["_"+_e+"bingroup"]],Fe=Math.min(Fe,me.size||he[xe].size);var ze=new Array(Ne.length);for(Ee=0;Ee<Ne.length;Ee++)for(var Ue=Ne[Ee]["_"+_e+"pos0"],je=0;je<Ue.length;je++)if(void 0!==Ue[je]){ze[Ee]=Ue[je];break}for(isFinite(Fe)||(Fe=v.distinctVals(ze).minDiff),Ee=0;Ee<Ne.length;Ee++){var rt=(he=Ne[Ee])[_e+"calendar"],ut={start:be.c2r(ze[Ee]-Fe/2,0,rt),end:be.c2r(ze[Ee]+Fe/2,0,rt),size:Fe};he._input[xe]=he[xe]=ut,(me=Se._histogramBinOpts[he["_"+_e+"bingroup"]])&&v.extendFlat(me,ut)}return de[xe]}(a,i,s,c,k)}(_=u.cumulative||{}).enabled&&"include"!==_.currentbin&&("decreasing"===_.direction?G.start=S(h.tickIncrement(P(G.start),G.size,!0,x)):G.end=S(h.tickIncrement(P(G.end),G.size,!1,x))),A.size=G.size,A.sizeFound||(T.size=G.size,v.nestedProperty(g[0],k+".size").set(G.size)),D("start",A,G),D("end",A,G)}f=i["_"+c+"pos0"],delete i["_"+c+"pos0"];var re=i._input[k]||{},j=v.extendFlat({},A),B=A.start,H=s.r2l(re.start),ee=void 0!==H;if((A.startFound||ee)&&H!==s.r2l(B)){var U=ee?H:v.aggNums(Math.min,null,f),$={type:"category"===s.type||"multicategory"===s.type?"linear":s.type,r2l:s.r2l,dtick:A.size,tick0:B,calendar:x,range:[U,h.tickIncrement(U,A.size,!1,x)].map(s.l2r)},q=h.tickFirst($);q>s.r2l(U)&&(q=h.tickIncrement(q,A.size,!0,x)),j.start=s.l2r(q),ee||v.nestedProperty(i,k+".start").set(j.start)}var te=A.end,ne=s.r2l(re.end),se=void 0!==ne;if((A.endFound||se)&&ne!==s.r2l(te)){var ie=se?ne:v.aggNums(Math.max,null,f);j.end=s.l2r(ie),se||v.nestedProperty(i,k+".start").set(j.end)}var ue="autobin"+c;return!1===i._input[ue]&&(i._input[k]=v.extendFlat({},i[k]||{}),delete i._input[ue],delete i[ue]),[j,f]}Q.exports={calc:function(a,i){var s,c,l,p,g=[],u=[],x="h"===i.orientation,f=h.getFromId(a,x?i.yaxis:i.xaxis),T=x?"y":"x",_={x:"y",y:"x"}[T],k=i[T+"calendar"],w=i.cumulative,C=d(a,i,f,T),A=C[0],O=C[1],P="string"==typeof A.size,S=[],E=P?S:A,D=[],z=[],N=[],V=0,X=i.histnorm,J=i.histfunc,G=-1!==X.indexOf("density");w.enabled&&G&&(X=X.replace(/ ?density$/,""),G=!1);var Z,re="max"===J||"min"===J?null:0,j=n.count,B=r[X],H=!1,ee=function(he){return f.r2c(he,0,k)};for(v.isArrayOrTypedArray(i[_])&&"count"!==J&&(Z=i[_],H="avg"===J,j=n[J]),s=ee(A.start),l=ee(A.end)+(s-h.tickIncrement(s,A.size,!1,k))/1e6;s<l&&g.length<1e6&&(c=h.tickIncrement(s,A.size,!1,k),g.push((s+c)/2),u.push(re),N.push([]),S.push(s),G&&D.push(1/(c-s)),H&&z.push(0),!(c<=s));)s=c;S.push(s),P||"date"!==f.type||(E={start:ee(E.start),end:ee(E.end),size:E.size}),a._fullLayout._roundFnOpts||(a._fullLayout._roundFnOpts={});var U=i["_"+T+"bingroup"],$={leftGap:1/0,rightGap:1/0};U&&(a._fullLayout._roundFnOpts[U]||(a._fullLayout._roundFnOpts[U]=$),$=a._fullLayout._roundFnOpts[U]);var q,te=u.length,ne=!0,se=$.leftGap,ie=$.rightGap,ue={};for(s=0;s<O.length;s++){var le=O[s];(p=v.findBin(le,E))>=0&&p<te&&(V+=j(p,s,u,Z,z),ne&&N[p].length&&le!==O[N[p][0]]&&(ne=!1),N[p].push(s),ue[s]=p,se=Math.min(se,le-S[p]),ie=Math.min(ie,S[p+1]-le))}$.leftGap=se,$.rightGap=ie,ne||(q=function(he,me){return function(){var Se=a._fullLayout._roundFnOpts[U];return t(Se.leftGap,Se.rightGap,S,f,k)(he,me)}}),H&&(V=o(u,z)),B&&B(u,V,D),w.enabled&&function(he,me,Se){var Me,Ie,Fe;function Ne($e){Fe=he[$e],he[$e]/=2}function De($e){he[$e]=Fe+(Ie=he[$e])/2,Fe+=Ie}if("half"===Se)if("increasing"===me)for(Ne(0),Me=1;Me<he.length;Me++)De(Me);else for(Ne(he.length-1),Me=he.length-2;Me>=0;Me--)De(Me);else if("increasing"===me){for(Me=1;Me<he.length;Me++)he[Me]+=he[Me-1];"exclude"===Se&&(he.unshift(0),he.pop())}else{for(Me=he.length-2;Me>=0;Me--)he[Me]+=he[Me+1];"exclude"===Se&&(he.push(0),he.shift())}}(u,w.direction,w.currentbin);var de=Math.min(g.length,u.length),be=[],_e=0,xe=de-1;for(s=0;s<de;s++)if(u[s]){_e=s;break}for(s=de-1;s>=_e;s--)if(u[s]){xe=s;break}for(s=_e;s<=xe;s++)if(m(g[s])&&m(u[s])){var Ee={p:g[s],s:u[s],b:0};w.enabled||(Ee.pts=N[s],ne?Ee.ph0=Ee.ph1=N[s].length?O[N[s][0]]:g[s]:(i._computePh=!0,Ee.ph0=q(S[s]),Ee.ph1=q(S[s+1],!0))),be.push(Ee)}return 1===be.length&&(be[0].width1=h.tickIncrement(be[0].p,A.size,!1,k)-be[0].p),e(be,i),v.isArrayOrTypedArray(i.selectedpoints)&&v.tagSelected(be,i,ue),be},calcAllAutoBins:d}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(y,Q,K){"use strict";Q.exports={eventDataKeys:["binNumber"]}},{}],828:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axis_ids"),b=y("../../registry").traceIs,h=y("../bar/defaults").handleGroupingDefaults,e=m.nestedProperty,n=y("../../plots/cartesian/constraints").getAxisGroup,r=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],o=["x","y"];Q.exports=function(t,d){var a,i,s,c,l,p,g,u=d._histogramBinOpts={},x=[],f={},T=[];function _(G,Z){return m.coerce(a._input,a,a._module.attributes,G,Z)}function k(G){return"v"===G.orientation?"x":"y"}function w(G,Z,re){var j=G.uid+"__"+re;Z||(Z=j);var B=v.getFromTrace({_fullLayout:d},G,re).type,H=G[re+"calendar"]||"",ee=u[Z],U=!0;ee&&(B===ee.axType&&H===ee.calendar?(U=!1,ee.traces.push(G),ee.dirs.push(re)):(Z=j,B!==ee.axType&&m.warn(["Attempted to group the bins of trace",G.index,"set on a","type:"+B,"axis","with bins on","type:"+ee.axType,"axis."].join(" ")),H!==ee.calendar&&m.warn(["Attempted to group the bins of trace",G.index,"set with a",H,"calendar","with bins",ee.calendar?"on a "+ee.calendar+" calendar":"w/o a set calendar"].join(" ")))),U&&(u[Z]={traces:[G],dirs:[re],axType:B,calendar:G[re+"calendar"]||""}),G["_"+re+"bingroup"]=Z}for(l=0;l<t.length;l++)b(a=t[l],"histogram")&&(x.push(a),delete a._xautoBinFinished,delete a._yautoBinFinished,b(a,"2dMap")||h(a._input,a,d,_));var C=d._alignmentOpts||{};for(l=0;l<x.length;l++){if(s="",!b(a=x[l],"2dMap")){if(c=k(a),"group"===d.barmode&&a.alignmentgroup){var O=n(d,a[c+"axis"])+a.orientation;(C[O]||{})[a.alignmentgroup]&&(s=O)}s||"overlay"===d.barmode||(s=n(d,a.xaxis)+n(d,a.yaxis)+k(a))}s?(f[s]||(f[s]=[]),f[s].push(a)):T.push(a)}for(s in f)if(1!==(i=f[s]).length){var P=!1;for(i.length&&(a=i[0],P=_("bingroup")),s=P||s,l=0;l<i.length;l++){var S=(a=i[l])._input.bingroup;S&&S!==s&&m.warn(["Trace",a.index,"must match","within bingroup",s+".","Ignoring its bingroup:",S,"setting."].join(" ")),a.bingroup=s,w(a,s,k(a))}}else T.push(i[0]);for(l=0;l<T.length;l++){a=T[l];var E=_("bingroup");if(b(a,"2dMap"))for(g=0;g<2;g++){var D=_((c=o[g])+"bingroup",E?E+"__"+c:null);w(a,D,c)}else w(a,E,k(a))}for(s in u){var z=u[s];for(i=z.traces,p=0;p<r.length;p++){var N,V,X=r[p],J=X.name;if("nbins"!==J||!z.sizeFound){for(l=0;l<i.length;l++){if(void 0!==e((a=i[l])._input,N=X.aStr[c=z.dirs[l]]).get()){z[J]=_(N),z[J+"Found"]=!0;break}(V=(a._autoBin||{})[c]||{})[J]&&e(a,N).set(V[J])}if("start"===J||"end"===J)for(;l<i.length;l++)(a=i[l])["_"+c+"bingroup"]&&_(N,(V=(a._autoBin||{})[c]||{})[J]);"nbins"!==J||z.sizeFound||z.nbinsFound||(a=i[0],z[J]=_(N))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("../../components/color"),h=y("../bar/defaults").handleText,e=y("../bar/style_defaults"),n=y("./attributes");Q.exports=function(r,o,t,d){function a(T,_){return v.coerce(r,o,n,T,_)}var i=a("x"),s=a("y");a("cumulative.enabled")&&(a("cumulative.direction"),a("cumulative.currentbin")),a("text");var c=a("textposition");h(r,o,d,a,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat");var l=a("orientation",s&&!i?"h":"v"),p="v"===l?"x":"y",g="v"===l?"y":"x",u=i&&s?Math.min(v.minRowLength(i)&&v.minRowLength(s)):v.minRowLength(o[p]||[]);if(u){o._length=u,m.getComponentMethod("calendars","handleTraceDefaults")(r,o,["x","y"],d),o[g]&&a("histfunc"),a("histnorm"),a("autobin"+p),e(r,o,a,t,d),v.coerceSelectionMarkerOpacity(o,a);var x=(o.marker.line||{}).color,f=m.getComponentMethod("errorbars","supplyDefaults");f(r,o,x||b.defaultLine,{axis:"y"}),f(r,o,x||b.defaultLine,{axis:"x",inherit:"y"})}else o.visible=!1}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h,e){if(m.x="xVal"in v?v.xVal:v.x,m.y="yVal"in v?v.yVal:v.y,"zLabelVal"in v&&(m.z=v.zLabelVal),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),!(b.cumulative||{}).enabled){var n,r=Array.isArray(e)?h[0].pts[e[0]][e[1]]:h[e].pts;if(m.pointNumbers=r,m.binNumber=m.pointNumber,delete m.pointNumber,delete m.pointIndex,b._indexToPoints){n=[];for(var o=0;o<r.length;o++)n=n.concat(b._indexToPoints[r[o]])}else n=r;m.pointIndices=n}return m}},{}],831:[function(y,Q,K){"use strict";var m=y("../bar/hover").hoverPoints,v=y("../../plots/cartesian/axes").hoverLabelText;Q.exports=function(b,h,e,n,r){var o=m(b,h,e,n,r);if(o){var t=(b=o[0]).cd[b.index],d=b.cd[0].trace;if(!d.cumulative.enabled){var a="h"===d.orientation?"y":"x";b[a+"Label"]=v(b[a+"a"],[t.ph0,t.ph1],d[a+"hoverformat"])}return o}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),layoutAttributes:y("../bar/layout_attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("./cross_trace_defaults"),supplyLayoutDefaults:y("../bar/layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("../bar/cross_trace_calc").crossTraceCalc,plot:y("../bar/plot").plot,layerName:"barlayer",style:y("../bar/style").style,styleOnSelect:y("../bar/style").styleOnSelect,colorbar:y("../scatter/marker_colorbar"),hoverPoints:y("./hover"),selectPoints:y("../bar/select"),eventData:y("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(y,Q,K){"use strict";Q.exports={percent:function(m,v){for(var b=m.length,h=100/v,e=0;e<b;e++)m[e]*=h},probability:function(m,v){for(var b=m.length,h=0;h<b;h++)m[h]/=v},density:function(m,v,b,h){var e=m.length;h=h||1;for(var n=0;n<e;n++)m[n]*=b[n]*h},"probability density":function(m,v,b,h){var e=m.length;h&&(v/=h);for(var n=0;n<e;n++)m[n]*=b[n]/v}}},{}],834:[function(y,Q,K){"use strict";var m=y("../histogram/attributes"),v=y("../histogram/bin_attributes"),b=y("../heatmap/attributes"),h=y("../../plots/attributes"),e=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=y("../../plots/template_attributes").hovertemplateAttrs,r=y("../../plots/template_attributes").texttemplateAttrs,o=y("../../components/colorscale/attributes"),t=y("../../lib/extend").extendFlat;Q.exports=t({x:m.x,y:m.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:v("x"),nbinsy:m.nbinsy,ybins:v("y"),autobinx:m.autobinx,autobiny:m.autobiny,bingroup:t({},m.bingroup,{}),xbingroup:t({},m.bingroup,{}),ybingroup:t({},m.bingroup,{}),xgap:b.xgap,ygap:b.ygap,zsmooth:b.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:n({},{keys:"z"}),texttemplate:r({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:b.textfont,showlegend:t({},h.showlegend,{dflt:!1})},o("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("../histogram/bin_functions"),h=y("../histogram/norm_functions"),e=y("../histogram/average"),n=y("../histogram/bin_label_vals"),r=y("../histogram/calc").calcAllAutoBins;function o(a,i,s,c){var l,p=new Array(a);if(c)for(l=0;l<a;l++)p[l]=1/(i[l+1]-i[l]);else{var g=1/s;for(l=0;l<a;l++)p[l]=g}return p}function t(a,i){return{start:a(i.start),end:a(i.end),size:i.size}}function d(a,i,s,c,l,p){var g,u=a.length-1,x=new Array(u),f=n(s,c,a,l,p);for(g=0;g<u;g++){var T=(i||[])[g];x[g]=void 0===T?[f(a[g]),f(a[g+1],!0)]:[T,T]}return x}Q.exports=function(a,i){var s,c,l,p,g=v.getFromId(a,i.xaxis),u=v.getFromId(a,i.yaxis),x=i.xcalendar,f=i.ycalendar,T=function(it){return g.r2c(it,0,x)},_=function(it){return u.r2c(it,0,f)},k=r(a,i,g,"x"),w=k[0],C=k[1],A=r(a,i,u,"y"),O=A[0],P=A[1],S=i._length;C.length>S&&C.splice(S,C.length-S),P.length>S&&P.splice(S,P.length-S);var E=[],D=[],z=[],N="string"==typeof w.size,V="string"==typeof O.size,X=[],J=[],G=N?X:w,Z=V?J:O,re=0,j=[],B=[],H=i.histnorm,ee=i.histfunc,U=-1!==H.indexOf("density"),$="max"===ee||"min"===ee?null:0,q=b.count,te=h[H],ne=!1,se=[],ie=[],ue="z"in i?i.z:"marker"in i&&Array.isArray(i.marker.color)?i.marker.color:"";ue&&"count"!==ee&&(ne="avg"===ee,q=b[ee]);var le=w.size,de=T(w.start),be=T(w.end)+(de-v.tickIncrement(de,le,!1,x))/1e6;for(s=de;s<be;s=v.tickIncrement(s,le,!1,x))D.push($),X.push(s),ne&&z.push(0);X.push(s);var xe=D.length,Ee=(s-de)/xe,he=g.c2r(de+Ee/2,0,x),me=O.size,Se=_(O.start),Me=_(O.end)+(Se-v.tickIncrement(Se,me,!1,f))/1e6;for(s=Se;s<Me;s=v.tickIncrement(s,me,!1,f)){E.push(D.slice()),J.push(s);var Ie=new Array(xe);for(c=0;c<xe;c++)Ie[c]=[];B.push(Ie),ne&&j.push(z.slice())}J.push(s);var Fe=E.length,Ne=(s-Se)/Fe,De=u.c2r(Se+Ne/2,0,f);U&&(se=o(D.length,G,Ee,N),ie=o(E.length,Z,Ne,V)),N||"date"!==g.type||(G=t(T,G)),V||"date"!==u.type||(Z=t(_,Z));var $e=!0,Re=!0,ze=new Array(xe),Ue=new Array(Fe),je=1/0,rt=1/0,ut=1/0,gt=1/0;for(s=0;s<S;s++){var At=C[s],_t=P[s];l=m.findBin(At,G),p=m.findBin(_t,Z),l>=0&&l<xe&&p>=0&&p<Fe&&(re+=q(l,s,E[p],ue,j[p]),B[p][l].push(s),$e&&(void 0===ze[l]?ze[l]=At:ze[l]!==At&&($e=!1)),Re&&(void 0===Ue[p]?Ue[p]=_t:Ue[p]!==_t&&(Re=!1)),je=Math.min(je,At-X[l]),rt=Math.min(rt,X[l+1]-At),ut=Math.min(ut,_t-J[p]),gt=Math.min(gt,J[p+1]-_t))}if(ne)for(p=0;p<Fe;p++)re+=e(E[p],j[p]);if(te)for(p=0;p<Fe;p++)te(E[p],re,se,ie[p]);return{x:C,xRanges:d(X,$e&&ze,je,rt,g,x),x0:he,dx:Ee,y:P,yRanges:d(J,Re&&Ue,ut,gt,u,f),y0:De,dy:Ne,z:E,pts:B}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./sample_defaults"),b=y("../heatmap/style_defaults"),h=y("../../components/colorscale/defaults"),e=y("../heatmap/label_defaults"),n=y("./attributes");Q.exports=function(r,o,t,d){function a(i,s){return m.coerce(r,o,n,i,s)}v(r,o,a,d),!1!==o.visible&&(b(r,o,a,d),h(r,o,d,a,{prefix:"",cLetter:"z"}),a("hovertemplate"),e(a,d),a("xhoverformat"),a("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(y,Q,K){"use strict";var m=y("../heatmap/hover"),v=y("../../plots/cartesian/axes").hoverLabelText;Q.exports=function(b,h,e,n,r){var o=m(b,h,e,n,r);if(o){var t=(b=o[0]).index,i=b.cd[0],s=i.trace,c=i.xRanges[t[1]],l=i.yRanges[t[0]];return b.xLabel=v(b.xa,[c[0],c[1]],s.xhoverformat),b.yLabel=v(b.ya,[l[0],l[1]],s.yhoverformat),o}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../histogram/cross_trace_defaults"),calc:y("../heatmap/calc"),plot:y("../heatmap/plot"),layerName:"heatmaplayer",colorbar:y("../heatmap/colorbar"),style:y("../heatmap/style"),hoverPoints:y("./hover"),eventData:y("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib");Q.exports=function(b,h,e,n){var r=e("x"),o=e("y"),t=v.minRowLength(r),d=v.minRowLength(o);t&&d?(h._length=Math.min(t,d),m.getComponentMethod("calendars","handleTraceDefaults")(b,h,["x","y"],n),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):h.visible=!1}},{"../../lib":515,"../../registry":647}],840:[function(y,Q,K){"use strict";var m=y("../histogram2d/attributes"),v=y("../contour/attributes"),b=y("../../components/colorscale/attributes"),h=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../lib/extend").extendFlat;Q.exports=e({x:m.x,y:m.y,z:m.z,marker:m.marker,histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:m.xbins,nbinsy:m.nbinsy,ybins:m.ybins,autobinx:m.autobinx,autobiny:m.autobiny,bingroup:m.bingroup,xbingroup:m.xbingroup,ybingroup:m.ybingroup,autocontour:v.autocontour,ncontours:v.ncontours,contours:v.contours,line:{color:v.line.color,width:e({},v.line.width,{dflt:.5}),dash:v.line.dash,smoothing:v.line.smoothing,editType:"plot"},xhoverformat:h("x"),yhoverformat:h("y"),zhoverformat:h("z",1),hovertemplate:m.hovertemplate,texttemplate:v.texttemplate,textfont:v.textfont},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../histogram2d/sample_defaults"),b=y("../contour/contours_defaults"),h=y("../contour/style_defaults"),e=y("../heatmap/label_defaults"),n=y("./attributes");Q.exports=function(r,o,t,d){function a(i,s){return m.coerce(r,o,n,i,s)}v(r,o,a,d),!1!==o.visible&&(b(r,o,a,function(i){return m.coerce2(r,o,n,i)}),h(r,o,a,d),a("xhoverformat"),a("yhoverformat"),a("hovertemplate"),o.contours&&"heatmap"===o.contours.coloring&&e(a,d))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../histogram/cross_trace_defaults"),calc:y("../contour/calc"),plot:y("../contour/plot").plot,layerName:"contourlayer",style:y("../contour/style"),colorbar:y("../contour/colorbar"),hoverPoints:y("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(y,Q,K){"use strict";var m=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../components/colorscale/attributes"),h=y("../../plots/domain").attributes,e=y("../pie/attributes"),n=y("../sunburst/attributes"),r=y("../treemap/attributes"),o=y("../treemap/constants"),t=y("../../lib/extend").extendFlat;Q.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:r.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:t({colors:n.marker.colors,line:n.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:n.leaf,pathbar:r.pathbar,text:e.text,textinfo:n.textinfo,texttemplate:v({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:n.hoverinfo,hovertemplate:m({},{keys:o.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:r.outsidetextfont,textposition:r.textposition,sort:e.sort,root:n.root,domain:h({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(y,Q,K){"use strict";var m=y("../../plots/plots");K.name="icicle",K.plot=function(v,b,h,e){m.plotBasePlot(K.name,v,b,h,e)},K.clean=function(v,b,h,e){m.cleanBasePlot(K.name,v,b,h,e)}},{"../../plots/plots":628}],845:[function(y,Q,K){"use strict";var m=y("../sunburst/calc");K.calc=function(v,b){return m.calc(v,b)},K.crossTraceCalc=function(v){return m._runCrossTraceCalc("icicle",v)}},{"../sunburst/calc":1060}],846:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("../../components/color"),h=y("../../plots/domain").defaults,e=y("../bar/defaults").handleText,n=y("../bar/constants").TEXTPAD,r=y("../../components/colorscale"),o=r.hasColorscale,t=r.handleDefaults;Q.exports=function(d,a,i,s){function c(T,_){return m.coerce(d,a,v,T,_)}var l=c("labels"),p=c("parents");if(l&&l.length&&p&&p.length){var g=c("values");c(g&&g.length?"branchvalues":"count"),c("level"),c("maxdepth"),c("tiling.orientation"),c("tiling.flip"),c("tiling.pad");var u=c("text");c("texttemplate"),a.texttemplate||c("textinfo",Array.isArray(u)?"text+label":"label"),c("hovertext"),c("hovertemplate");var x=c("pathbar.visible");e(d,a,s,c,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition"),c("marker.line.width")&&c("marker.line.color",s.paper_bgcolor),c("marker.colors");var f=a._hasColorscale=o(d,"marker","colors")||(d.marker||{}).coloraxis;f&&t(d,a,s,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",f?1:.7),a._hovered={marker:{line:{width:2,color:b.contrast(s.paper_bgcolor)}}},x&&(c("pathbar.thickness",a.pathbar.textfont.size+2*n),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),h(a,s,c),a._length=null}else a.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../components/drawing"),h=y("../../lib/svg_text_utils"),e=y("./partition"),n=y("./style").styleOne,r=y("../treemap/constants"),o=y("../sunburst/helpers"),t=y("../sunburst/fx"),d=y("../sunburst/plot").formatSliceLabel;Q.exports=function(a,i,s,c,l){var p=l.width,g=l.height,u=l.viewX,x=l.viewY,f=l.pathSlice,T=l.toMoveInsideSlice,_=l.strTransform,k=l.hasTransition,w=l.handleSlicesExit,C=l.makeUpdateSliceInterpolator,A=l.makeUpdateTextInterpolator,O=l.prevEntry,P=a._fullLayout,S=i[0].trace,E=-1!==S.textposition.indexOf("left"),D=-1!==S.textposition.indexOf("right"),z=-1!==S.textposition.indexOf("bottom"),N=e(s,[p,g],{flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,orientation:S.tiling.orientation,pad:{inner:S.tiling.pad},maxDepth:S._maxDepth}).descendants(),V=1/0,X=-1/0;N.forEach(function(j){var B=j.depth;B>=S._maxDepth?(j.x0=j.x1=(j.x0+j.x1)/2,j.y0=j.y1=(j.y0+j.y1)/2):(V=Math.min(V,B),X=Math.max(X,B))}),c=c.data(N,o.getPtId),S._maxVisibleLayers=isFinite(X)?X-V+1:0,c.enter().append("g").classed("slice",!0),w(c,!1,{},[p,g],f),c.order();var J=null;if(k&&O){var G=o.getPtId(O);c.each(function(j){null===J&&o.getPtId(j)===G&&(J={x0:j.x0,x1:j.x1,y0:j.y0,y1:j.y1})})}var Z=function(){return J||{x0:0,x1:p,y0:0,y1:g}},re=c;return k&&(re=re.transition().each("end",function(){var j=m.select(this);o.setSliceCursor(j,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),re.each(function(j){j._x0=u(j.x0),j._x1=u(j.x1),j._y0=x(j.y0),j._y1=x(j.y1),j._hoverX=u(j.x1-S.tiling.pad),j._hoverY=x(z?j.y1-S.tiling.pad/2:j.y0+S.tiling.pad/2);var B=m.select(this),H=v.ensureSingle(B,"path","surface",function(q){q.style("pointer-events","all")});k?H.transition().attrTween("d",function(q){var te=C(q,!1,Z(),[p,g],{orientation:S.tiling.orientation,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1});return function(ne){return f(te(ne))}}):H.attr("d",f),B.call(t,s,a,i,{styleOne:n,eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,a,{isTransitioning:a._transitioning}),H.call(n,j,S,{hovered:!1}),j._text=j.x0===j.x1||j.y0===j.y1?"":d(j,s,S,i,P)||"";var ee=v.ensureSingle(B,"g","slicetext"),U=v.ensureSingle(ee,"text","",function(q){q.attr("data-notex",1)}),$=v.ensureUniformFontSize(a,o.determineTextFont(S,j,P.font));U.text(j._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":E?"start":"middle").call(b.font,$).call(h.convertToTspans,a),j.textBB=b.bBox(U.node()),j.transform=T(j,{fontSize:$.size}),j.transform.fontSize=$.size,k?U.transition().attrTween("transform",function(q){var te=A(q,!1,Z(),[p,g]);return function(ne){return _(te(ne))}}):U.attr("transform",_(j))}),J}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"icicle",basePlotModule:y("./base_plot"),categories:[],animatable:!0,attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),style:y("./style").style,colorbar:y("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(y,Q,K){"use strict";Q.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h){function e(n,r){return m.coerce(b,h,v,n,r)}e("iciclecolorway",h.colorway),e("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(y,Q,K){"use strict";var m=y("d3-hierarchy"),v=y("../treemap/flip_tree");Q.exports=function(b,h,e){var n=e.flipX,r=e.flipY,o="h"===e.orientation,t=e.maxDepth,d=h[0],a=h[1];t&&(d=(b.height+1)*h[0]/Math.min(b.height+1,t),a=(b.height+1)*h[1]/Math.min(b.height+1,t));var i=m.partition().padding(e.pad.inner).size(o?[h[1],d]:[h[0],a])(b);return(o||n||r)&&v(i,h,{swapXY:o,flipX:n,flipY:r}),i}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(y,Q,K){"use strict";var m=y("../treemap/draw"),v=y("./draw_descendants");Q.exports=function(b,h,e,n){return m(b,h,e,n,{type:"icicle",drawDescendants:v})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/color"),b=y("../../lib"),h=y("../bar/uniform_text").resizeText;function e(n,r,o){var t=r.data.data,d=!r.children,a=t.i,i=b.castOption(o,a,"marker.line.color")||v.defaultLine,s=b.castOption(o,a,"marker.line.width")||0;n.style("stroke-width",s).call(v.fill,t.color).call(v.stroke,i).style("opacity",d?o.leaf.opacity:null)}Q.exports={style:function(n){var r=n._fullLayout._iciclelayer.selectAll(".trace");h(n,r,"icicle"),r.each(function(o){var t=m.select(this),d=o[0].trace;t.style("opacity",d.opacity),t.selectAll("path.surface").each(function(a){m.select(this).call(e,a,d)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(y,Q,K){"use strict";for(var m=y("../../plots/attributes"),v=y("../../plots/template_attributes").hovertemplateAttrs,b=y("../../lib/extend").extendFlat,h=y("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],n=[],r=[],o=0;o<e.length;o++){var t=h[e[o]];n.push("For the `"+e[o]+"` colormodel, it is ["+(t.zminDflt||t.min).join(", ")+"]."),r.push("For the `"+e[o]+"` colormodel, it is ["+(t.zmaxDflt||t.max).join(", ")+"].")}Q.exports=b({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:b({},m.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:v({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./constants"),b=y("fast-isnumeric"),h=y("../../plots/cartesian/axes"),e=y("../../lib").maxRowLength,n=y("./helpers").getImageSize;function r(t,d,a,i){return function(s){return m.constrain((s-t)*d,a,i)}}function o(t,d){return function(a){return m.constrain(a,t,d)}}Q.exports=function(t,d){var a,i;if(d._hasZ)a=d.z.length,i=e(d.z);else if(d._hasSource){var s=n(d.source);a=s.height,i=s.width}var c,l=h.getFromId(t,d.xaxis||"x"),p=h.getFromId(t,d.yaxis||"y"),g=l.d2c(d.x0)-d.dx/2,u=p.d2c(d.y0)-d.dy/2,x=[g,g+i*d.dx],f=[u,u+a*d.dy];if(l&&"log"===l.type)for(c=0;c<i;c++)x.push(g+c*d.dx);if(p&&"log"===p.type)for(c=0;c<a;c++)f.push(u+c*d.dy);return d._extremes[l._id]=h.findExtremes(l,x),d._extremes[p._id]=h.findExtremes(p,f),d._scaler=function(T){var _=v.colormodel[T.colormodel],k=(_.colormodel||T.colormodel).length;T._sArray=[];for(var w=0;w<k;w++)T._sArray.push(_.min[w]!==T.zmin[w]||_.max[w]!==T.zmax[w]?r(T.zmin[w],(_.max[w]-_.min[w])/(T.zmax[w]-T.zmin[w]),_.min[w],_.max[w]):o(_.min[w],_.max[w]));return function(C){for(var A=C.slice(0,k),O=0;O<k;O++){var P=A[O];if(!b(P))return!1;A[O]=T._sArray[O](P)}return A}}(d),[{x0:g,y0:u,z:d.z,w:i,h:a}]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(y,Q,K){"use strict";Q.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(m){return m.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(m){var v=m.slice(0,3);return v[1]=v[1]+"%",v[2]=v[2]+"%",v},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(m){var v=m.slice(0,4);return v[1]=v[1]+"%",v[2]=v[2]+"%",v},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("./constants"),h=y("../../snapshot/helpers").IMAGE_URL_PREFIX;Q.exports=function(e,n){function r(d,a){return m.coerce(e,n,v,d,a)}r("source"),n.source&&!n.source.match(h)&&delete n.source,n._hasSource=!!n.source;var o,t=r("z");n._hasZ=!(void 0===t||!t.length||!t[0]||!t[0].length),n._hasZ||n._hasSource?(r("x0"),r("y0"),r("dx"),r("dy"),n._hasZ?(r("colormodel","rgb"),r("zmin",(o=b.colormodel[n.colormodel]).zminDflt||o.min),r("zmax",o.zmaxDflt||o.max)):n._hasSource&&(n.colormodel="rgba256",n.zmin=(o=b.colormodel[n.colormodel]).zminDflt,n.zmax=o.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),n._length=null):n.visible=!1}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(y,Q,K){"use strict";Q.exports=function(m,v){return"xVal"in v&&(m.x=v.xVal),"yVal"in v&&(m.y=v.yVal),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),m.color=v.color,m.colormodel=v.trace.colormodel,m.z||(m.z=v.color),m}},{}],859:[function(y,Q,K){"use strict";var m=y("probe-image-size/sync"),v=y("../../snapshot/helpers").IMAGE_URL_PREFIX,b=y("buffer/").Buffer;K.getImageSize=function(h){var e=h.replace(v,""),n=new b(e,"base64");return m(n)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(y,Q,K){"use strict";var m=y("../../components/fx"),v=y("../../lib"),b=y("./constants");Q.exports=function(h,e,n){var r=h.cd[0],o=r.trace,t=h.xa,d=h.ya;if(!(m.inbox(e-r.x0,e-(r.x0+r.w*o.dx),0)>0||m.inbox(n-r.y0,n-(r.y0+r.h*o.dy),0)>0)){var a,i=Math.floor((e-r.x0)/o.dx),s=Math.floor(Math.abs(n-r.y0)/o.dy);if(o._hasZ?a=r.z[s][i]:o._hasSource&&(a=o._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(i,s,1,1).data),a){var c,l=r.hi||o.hoverinfo;if(l){var p=l.split("+");-1!==p.indexOf("all")&&(p=["color"]),-1!==p.indexOf("color")&&(c=!0)}var g,u=b.colormodel[o.colormodel],x=u.colormodel||o.colormodel,f=x.length,T=o._scaler(a),_=u.suffix,k=[];(o.hovertemplate||c)&&(k.push("["+[T[0]+_[0],T[1]+_[1],T[2]+_[2]].join(", ")),4===f&&k.push(", "+T[3]+_[3]),k.push("]"),k=k.join(""),h.extraText=x.toUpperCase()+": "+k),Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[s])?g=o.hovertext[s][i]:Array.isArray(o.text)&&Array.isArray(o.text[s])&&(g=o.text[s][i]);var w=d.c2p(r.y0+(s+.5)*o.dy),C=r.x0+(i+.5)*o.dx,A=r.y0+(s+.5)*o.dy,O="["+a.slice(0,o.colormodel.length).join(", ")+"]";return[v.extendFlat(h,{index:[s,i],x0:t.c2p(r.x0+i*o.dx),x1:t.c2p(r.x0+(i+1)*o.dx),y0:w,y1:w,color:T,xVal:C,xLabelVal:C,yVal:A,yLabelVal:A,zLabelVal:O,text:g,hovertemplateLabels:{zLabel:O,colorLabel:k,"color[0]Label":T[0]+_[0],"color[1]Label":T[1]+_[1],"color[2]Label":T[2]+_[2],"color[3]Label":T[3]+_[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),style:y("./style"),hoverPoints:y("./hover"),eventData:y("./event_data"),moduleType:"trace",name:"image",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=v.strTranslate,h=y("../../constants/xmlns_namespaces"),e=y("./constants"),n=v.isIOS()||v.isSafari()||v.isIE();Q.exports=function(r,o,t,d){var a=o.xaxis,i=o.yaxis,s=!(n||r._context._exportedPlot);v.makeTraceGroups(d,t,"im").each(function(c){var l=m.select(this),p=c[0],g=p.trace,u=("fast"===g.zsmooth||!1===g.zsmooth&&s)&&!g._hasZ&&g._hasSource&&"linear"===a.type&&"linear"===i.type;g._realImage=u;var x,f,T,_,k,w,C=p.z,A=p.x0,O=p.y0,P=p.w,S=p.h,E=g.dx,D=g.dy;for(w=0;void 0===x&&w<P;)x=a.c2p(A+w*E),w++;for(w=P;void 0===f&&w>0;)f=a.c2p(A+w*E),w--;for(w=0;void 0===_&&w<S;)_=i.c2p(O+w*D),w++;for(w=S;void 0===k&&w>0;)k=i.c2p(O+w*D),w--;f<x&&(T=f,f=x,x=T),k<_&&(T=_,_=k,k=T),!u&&(x=Math.max(-.5*a._length,x),f=Math.min(1.5*a._length,f),_=Math.max(-.5*i._length,_),k=Math.min(1.5*i._length,k));var z=Math.round(f-x),N=Math.round(k-_);if(z<=0||N<=0)l.selectAll("image").data([]).exit().remove();else{var V=l.selectAll("image").data([c]);V.enter().append("svg:image").attr({xmlns:h.svg,preserveAspectRatio:"none"}),V.exit().remove();var X=!1===g.zsmooth?e.pixelatedStyle:"";if(u){var J=v.simpleMap(a.range,a.r2l),G=v.simpleMap(i.range,i.r2l),Z=J[1]<J[0],re=G[1]>G[0];if(Z||re){var j=x+z/2,B=_+N/2;X+="transform:"+b(j+"px",B+"px")+"scale("+(Z?-1:1)+","+(re?-1:1)+")"+b(-j+"px",-B+"px")+";"}}V.attr("style",X);var H=new Promise(function(U){if(g._hasZ)U();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===P&&g._canvas.el.height===S&&g._canvas.source===g.source)U();else{var $=document.createElement("canvas");$.width=P,$.height=S;var q=$.getContext("2d",{willReadFrequently:!0});g._image=g._image||new Image;var te=g._image;te.onload=function(){q.drawImage(te,0,0),g._canvas={el:$,source:g.source},U()},te.setAttribute("src",g.source)}}).then(function(){var U;if(g._hasZ)U=ee(function(q,te){return C[te][q]}).toDataURL("image/png");else if(g._hasSource)if(u)U=g.source;else{var $=g._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,P,S).data;U=ee(function(q,te){var ne=4*(te*P+q);return[$[ne],$[ne+1],$[ne+2],$[ne+3]]}).toDataURL("image/png")}V.attr({"xlink:href":U,height:N,width:z,x,y:_})});r._promises.push(H)}function ee(U){var $=document.createElement("canvas");$.width=z,$.height=N;var q,te=$.getContext("2d",{willReadFrequently:!0}),ne=function(he){return v.constrain(Math.round(a.c2p(A+he*E)-x),0,z)},se=function(he){return v.constrain(Math.round(i.c2p(O+he*D)-_),0,N)},ie=e.colormodel[g.colormodel],ue=ie.colormodel||g.colormodel,le=ie.fmt;for(w=0;w<p.w;w++){var de=ne(w),be=ne(w+1);if(be!==de&&!isNaN(be)&&!isNaN(de))for(var _e=0;_e<p.h;_e++){var xe=se(_e),Ee=se(_e+1);Ee===xe||isNaN(Ee)||isNaN(xe)||!U(w,_e)||(q=g._scaler(U(w,_e)),te.fillStyle=q?ue+"("+le(q).join(",")+")":"rgba(0,0,0,0)",te.fillRect(de,xe,be-de,Ee-xe))}}return $}})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(y,Q,K){"use strict";var m=y("@plotly/d3");Q.exports=function(v){m.select(v).selectAll(".im image").style("opacity",function(b){return b[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(y,Q,K){"use strict";var m=y("../../lib/extend").extendFlat,v=y("../../lib/extend").extendDeep,b=y("../../plot_api/edit_types").overrideAll,h=y("../../plots/font_attributes"),e=y("../../components/color/attributes"),n=y("../../plots/domain").attributes,r=y("../../plots/cartesian/layout_attributes"),o=y("../../plot_api/plot_template").templatedArray,t=y("../../constants/delta.js"),d=y("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,a=h({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},s={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=o("step",v({},i,{range:s}));Q.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:n({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:m({},a,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:d("value")},font:m({},a,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:d("value")},increasing:{symbol:{valType:"string",dflt:t.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:t.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:m({},a,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:v({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:b({range:s,visible:m({},r.visible,{dflt:!0}),tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:m({},r.ticks,{dflt:"outside"}),ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,ticklabelstep:r.ticklabelstep,showticklabels:r.showticklabels,tickfont:h({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:m({},i.line.color,{}),width:m({},i.line.width,{dflt:1}),editType:"plot"},thickness:m({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(y,Q,K){"use strict";var m=y("../../plots/plots");K.name="indicator",K.plot=function(v,b,h,e){m.plotBasePlot(K.name,v,b,h,e)},K.clean=function(v,b,h,e){m.cleanBasePlot(K.name,v,b,h,e)}},{"../../plots/plots":628}],866:[function(y,Q,K){"use strict";Q.exports={calc:function(m,v){var b=[],h=v.value;"number"!=typeof v._lastValue&&(v._lastValue=v.value);var e=v._lastValue,n=e;return v._hasDelta&&"number"==typeof v.delta.reference&&(n=v.delta.reference),b[0]={y:h,lastY:e,delta:h-n,relativeDelta:(h-n)/n},b}}},{}],867:[function(y,Q,K){"use strict";Q.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("../../plots/domain").defaults,h=y("../../plot_api/plot_template"),e=y("../../plots/array_container_defaults"),n=y("./constants.js"),r=y("../../plots/cartesian/tick_value_defaults"),o=y("../../plots/cartesian/tick_mark_defaults"),t=y("../../plots/cartesian/tick_label_defaults"),d=y("../../plots/cartesian/prefix_suffix_defaults");function a(i,s){function c(l,p){return m.coerce(i,s,v.gauge.steps,l,p)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}Q.exports={supplyDefaults:function(i,s,c,l){function p(P,S){return m.coerce(i,s,v,P,S)}b(s,l,p),p("mode"),s._hasNumber=-1!==s.mode.indexOf("number"),s._hasDelta=-1!==s.mode.indexOf("delta"),s._hasGauge=-1!==s.mode.indexOf("gauge");var g=p("value");s._range=[0,"number"==typeof g?1.5*g:1];var u,x,f,T,_,k,w=new Array(2);function C(P,S){return m.coerce(f,T,v.gauge,P,S)}function A(P,S){return m.coerce(_,k,v.gauge.axis,P,S)}if(s._hasNumber&&(p("number.valueformat"),p("number.font.color",l.font.color),p("number.font.family",l.font.family),p("number.font.size"),void 0===s.number.font.size&&(s.number.font.size=n.defaultNumberFontSize,w[0]=!0),p("number.prefix"),p("number.suffix"),u=s.number.font.size),s._hasDelta&&(p("delta.font.color",l.font.color),p("delta.font.family",l.font.family),p("delta.font.size"),void 0===s.delta.font.size&&(s.delta.font.size=(s._hasNumber?.5:1)*(u||n.defaultNumberFontSize),w[1]=!0),p("delta.reference",s.value),p("delta.relative"),p("delta.valueformat",s.delta.relative?"2%":""),p("delta.increasing.symbol"),p("delta.increasing.color"),p("delta.decreasing.symbol"),p("delta.decreasing.color"),p("delta.position"),p("delta.prefix"),p("delta.suffix"),x=s.delta.font.size),s._scaleNumbers=(!s._hasNumber||w[0])&&(!s._hasDelta||w[1])||!1,p("title.font.color",l.font.color),p("title.font.family",l.font.family),p("title.font.size",.25*(u||x||n.defaultNumberFontSize)),p("title.text"),s._hasGauge){(f=i.gauge)||(f={}),T=h.newContainer(s,"gauge"),C("shape"),(s._isBullet="bullet"===s.gauge.shape)||p("title.align","center"),(s._isAngular="angular"===s.gauge.shape)||p("align","center"),C("bgcolor",l.paper_bgcolor),C("borderwidth"),C("bordercolor"),C("bar.color"),C("bar.line.color"),C("bar.line.width"),C("bar.thickness",n.valueThickness*("bullet"===s.gauge.shape?.5:1)),e(f,T,{name:"steps",handleItemDefaults:a}),C("threshold.value"),C("threshold.thickness"),C("threshold.line.width"),C("threshold.line.color"),_={},f&&(_=f.axis||{}),k=h.newContainer(T,"axis"),A("visible"),s._range=A("range",s._range);var O={outerTicks:!0};r(_,k,A,"linear"),d(_,k,A,"linear",O),t(_,k,A,"linear",O),o(_,k,A,O)}else p("title.align","center"),p("align","center"),s._isAngular=s._isBullet=!1;s._length=null}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"indicator",basePlotModule:y("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,calc:y("./calc").calc,plot:y("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("d3-interpolate").interpolate,b=y("d3-interpolate").interpolateNumber,h=y("../../lib"),e=h.strScale,n=h.strTranslate,r=h.rad2deg,o=y("../../constants/alignment").MID_SHIFT,t=y("../../components/drawing"),d=y("./constants"),a=y("../../lib/svg_text_utils"),i=y("../../plots/cartesian/axes"),s=y("../../plots/cartesian/axis_defaults"),c=y("../../plots/cartesian/position_defaults"),l=y("../../plots/cartesian/layout_attributes"),p=y("../../components/color"),g={left:"start",center:"middle",right:"end"},u={left:0,center:.5,right:1},x=/[yzafpn\xb5mkMGTPEZY]/;function f(A){return A&&A.duration>0}function T(A){A.each(function(O){p.stroke(m.select(this),O.line.color)}).each(function(O){p.fill(m.select(this),O.color)}).style("stroke-width",function(O){return O.line.width})}function _(A,O,P){var S=A._fullLayout,E=h.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},O),D={type:"linear",_id:"x"+O._id},z={letter:"x",font:S.font,noHover:!0,noTickson:!0};function N(V,X){return h.coerce(E,D,l,V,X)}return s(E,D,N,z,S),c(E,D,N,z),D}function k(A,O,P){return[Math.min(O/A.width,P/A.height),A,O+"x"+P]}function w(A,O,P,S){var E=document.createElementNS("http://www.w3.org/2000/svg","text"),D=m.select(E);return D.text(A).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",A).call(a.convertToTspans,S).call(t.font,O),t.bBox(D.node())}function C(A,O,P,S,E,D){var z="_cache"+O;A[z]&&A[z].key===E||(A[z]={key:E,value:P});var N=h.aggNums(D,null,[A[z].value,S],2);return A[z].value=N,N}Q.exports=function(A,O,P,S){var E,D=A._fullLayout;f(P)&&S&&(E=S()),h.makeTraceGroups(D._indicatorlayer,O,"trace").each(function(z){var N,V,X,J,G,Z=z[0].trace,re=m.select(this),j=Z._hasGauge,B=Z._isAngular,H=Z._isBullet,ee=Z.domain,U={w:D._size.w*(ee.x[1]-ee.x[0]),h:D._size.h*(ee.y[1]-ee.y[0]),l:D._size.l+D._size.w*ee.x[0],r:D._size.r+D._size.w*(1-ee.x[1]),t:D._size.t+D._size.h*(1-ee.y[1]),b:D._size.b+D._size.h*ee.y[0]},$=U.l+U.w/2,q=U.t+U.h/2,te=Math.min(U.w/2,U.h),ne=d.innerRadius*te,se=Z.align||"center";if(V=q,j){if(B&&(N=$,V=q+te/2,X=function(Ee){return he=Ee,[(me=.9*ne)/Math.sqrt(he.width/2*(he.width/2)+he.height*he.height),he,me];var he,me}),H){var ie=d.bulletPadding,ue=1-d.bulletNumberDomainSize+ie;N=U.l+(ue+(1-ue)*u[se])*U.w,X=function(Ee){return k(Ee,(d.bulletNumberDomainSize-ie)*U.w,U.h)}}}else N=U.l+u[se]*U.w,X=function(Ee){return k(Ee,U.w,U.h)};(function(Ee,he,me,Se){var Me,Ie,Fe,Ne=me[0].trace,De=Se.numbersX,$e=Se.numbersY,Re=Ne.align||"center",ze=g[Re],Ue=Se.transitionOpts,je=Se.onComplete,rt=h.ensureSingle(he,"g","numbers"),ut=[];Ne._hasNumber&&ut.push("number"),Ne._hasDelta&&(ut.push("delta"),"left"===Ne.delta.position&&ut.reverse());var gt=rt.selectAll("text").data(ut);function At(ar,hr,Xt,He){if(!ar.match("s")||Xt>=0==He>=0||hr(Xt).slice(-1).match(x)||hr(He).slice(-1).match(x))return hr;var Je=ar.slice().replace("s","f").replace(/\d+/,function(we){return parseInt(we)-1}),pe=_(Ee,{tickformat:Je});return function(we){return Math.abs(we)<1?i.tickText(pe,we).text:hr(we)}}gt.enter().append("text"),gt.attr("text-anchor",function(){return ze}).attr("class",function(ar){return ar}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),gt.exit().remove();var _t,it=Ne.mode+Ne.align;if(Ne._hasDelta&&(_t=function(){var ar=_(Ee,{tickformat:Ne.delta.valueformat},Ne._range);ar.setScale(),i.prepTicks(ar);var hr=function(Ke){return i.tickText(ar,Ke).text},Xt=Ne.delta.suffix,He=Ne.delta.prefix,Je=function(Ke){return Ne.delta.relative?Ke.relativeDelta:Ke.delta},pe=function(Ke,Ye){return 0===Ke||"number"!=typeof Ke||isNaN(Ke)?"-":(Ke>0?Ne.delta.increasing.symbol:Ne.delta.decreasing.symbol)+He+Ye(Ke)+Xt},we=function(Ke){return Ke.delta>=0?Ne.delta.increasing.color:Ne.delta.decreasing.color};void 0===Ne._deltaLastValue&&(Ne._deltaLastValue=Je(me[0]));var Be=rt.select("text.delta");function We(){Be.text(pe(Je(me[0]),hr)).call(p.fill,we(me[0])).call(a.convertToTspans,Ee)}return Be.call(t.font,Ne.delta.font).call(p.fill,we({delta:Ne._deltaLastValue})),f(Ue)?Be.transition().duration(Ue.duration).ease(Ue.easing).tween("text",function(){var Ke=m.select(this),Ye=Je(me[0]),ft=Ne._deltaLastValue,ct=At(Ne.delta.valueformat,hr,ft,Ye),St=b(ft,Ye);return Ne._deltaLastValue=Ye,function(Ft){Ke.text(pe(St(Ft),ct)),Ke.call(p.fill,we({delta:St(Ft)}))}}).each("end",function(){We(),je&&je()}).each("interrupt",function(){We(),je&&je()}):We(),Ie=w(pe(Je(me[0]),hr),Ne.delta.font,ze,Ee),Be}(),it+=Ne.delta.position+Ne.delta.font.size+Ne.delta.font.family+Ne.delta.valueformat,it+=Ne.delta.increasing.symbol+Ne.delta.decreasing.symbol,Fe=Ie),Ne._hasNumber&&(function(){var ar=_(Ee,{tickformat:Ne.number.valueformat},Ne._range);ar.setScale(),i.prepTicks(ar);var hr=function(we){return i.tickText(ar,we).text},Xt=Ne.number.suffix,He=Ne.number.prefix,Je=rt.select("text.number");function pe(){var we="number"==typeof me[0].y?He+hr(me[0].y)+Xt:"-";Je.text(we).call(t.font,Ne.number.font).call(a.convertToTspans,Ee)}f(Ue)?Je.transition().duration(Ue.duration).ease(Ue.easing).each("end",function(){pe(),je&&je()}).each("interrupt",function(){pe(),je&&je()}).attrTween("text",function(){var we=m.select(this),Be=b(me[0].lastY,me[0].y);Ne._lastValue=me[0].y;var We=At(Ne.number.valueformat,hr,me[0].lastY,me[0].y);return function(Ke){we.text(He+We(Be(Ke))+Xt)}}):pe(),Me=w(He+hr(me[0].y)+Xt,Ne.number.font,ze,Ee)}(),it+=Ne.number.font.size+Ne.number.font.family+Ne.number.valueformat+Ne.number.suffix+Ne.number.prefix,Fe=Me),Ne._hasDelta&&Ne._hasNumber){var et,wt,Gt=[(Me.left+Me.right)/2,(Me.top+Me.bottom)/2],Kt=[(Ie.left+Ie.right)/2,(Ie.top+Ie.bottom)/2],cr=.75*Ne.delta.font.size;"left"===Ne.delta.position&&(et=C(Ne,"deltaPos",0,-1*(Me.width*u[Ne.align]+Ie.width*(1-u[Ne.align])+cr),it,Math.min),wt=Gt[1]-Kt[1],Fe={width:Me.width+Ie.width+cr,height:Math.max(Me.height,Ie.height),left:Ie.left+et,right:Me.right,top:Math.min(Me.top,Ie.top+wt),bottom:Math.max(Me.bottom,Ie.bottom+wt)}),"right"===Ne.delta.position&&(et=C(Ne,"deltaPos",0,Me.width*(1-u[Ne.align])+Ie.width*u[Ne.align]+cr,it,Math.max),wt=Gt[1]-Kt[1],Fe={width:Me.width+Ie.width+cr,height:Math.max(Me.height,Ie.height),left:Me.left,right:Ie.right+et,top:Math.min(Me.top,Ie.top+wt),bottom:Math.max(Me.bottom,Ie.bottom+wt)}),"bottom"===Ne.delta.position&&(et=null,wt=Ie.height,Fe={width:Math.max(Me.width,Ie.width),height:Me.height+Ie.height,left:Math.min(Me.left,Ie.left),right:Math.max(Me.right,Ie.right),top:Me.bottom-Me.height,bottom:Me.bottom+Ie.height}),"top"===Ne.delta.position&&(et=null,wt=Me.top,Fe={width:Math.max(Me.width,Ie.width),height:Me.height+Ie.height,left:Math.min(Me.left,Ie.left),right:Math.max(Me.right,Ie.right),top:Me.bottom-Me.height-Ie.height,bottom:Me.bottom}),_t.attr({dx:et,dy:wt})}(Ne._hasNumber||Ne._hasDelta)&&rt.attr("transform",function(){var hr,ar=Se.numbersScaler(Fe),Xt=C(Ne,"numbersScale",1,ar[0],it+=ar[2],Math.min);Ne._scaleNumbers||(Xt=1),Ne._numbersTop=Xt*Fe.top+(hr=Ne._isAngular?$e-Xt*Fe.bottom:$e-Xt*(Fe.top+Fe.bottom)/2);var He=Fe[Re];"center"===Re&&(He=(Fe.left+Fe.right)/2);var Je=De-Xt*He;return Je=C(Ne,"numbersTranslate",0,Je,it,Math.max),n(Je,hr)+e(Xt)})})(A,re,z,{numbersX:N,numbersY:V,numbersScaler:X,transitionOpts:P,onComplete:E}),j&&(J={range:Z.gauge.axis.range,color:Z.gauge.bgcolor,line:{color:Z.gauge.bordercolor,width:0},thickness:1},G={range:Z.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:Z.gauge.bordercolor,width:Z.gauge.borderwidth},thickness:1});var le=re.selectAll("g.angular").data(B?z:[]);le.exit().remove();var de=re.selectAll("g.angularaxis").data(B?z:[]);de.exit().remove(),B&&function(Ee,he,me,Se){var Me,Ie,Fe,Ne,De=me[0].trace,$e=Se.size,Re=Se.radius,ze=Se.innerRadius,Ue=Se.gaugeBg,je=Se.gaugeOutline,rt=[$e.l+$e.w/2,$e.t+$e.h/2+Re/2],ut=Se.gauge,gt=Se.layer,At=Se.transitionOpts,_t=Se.onComplete,it=Math.PI/2;function et(Ft){var at=De.gauge.axis.range[0],mt=(Ft-at)/(De.gauge.axis.range[1]-at)*Math.PI-it;return mt<-it?-it:mt>it?it:mt}function wt(Ft){return m.svg.arc().innerRadius((ze+Re)/2-Ft/2*(Re-ze)).outerRadius((ze+Re)/2+Ft/2*(Re-ze)).startAngle(-it)}function Gt(Ft){Ft.attr("d",function(at){return wt(at.thickness).startAngle(et(at.range[0])).endAngle(et(at.range[1]))()})}ut.enter().append("g").classed("angular",!0),ut.attr("transform",n(rt[0],rt[1])),gt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),gt.selectAll("g.xangularaxistick,path,text").remove(),(Me=_(Ee,De.gauge.axis)).type="linear",Me.range=De.gauge.axis.range,Me._id="xangularaxis",Me.ticklabeloverflow="allow",Me.setScale();var Kt=function(Ft){return(Me.range[0]-Ft.x)/(Me.range[1]-Me.range[0])*Math.PI+Math.PI},cr={},ar=i.makeLabelFns(Me,0).labelStandoff;cr.xFn=function(Ft){var at=Kt(Ft);return Math.cos(at)*ar},cr.yFn=function(Ft){var at=Kt(Ft),mt=Math.sin(at)>0?.2:1;return-Math.sin(at)*(ar+Ft.fontSize*mt)+Math.abs(Math.cos(at))*(Ft.fontSize*o)},cr.anchorFn=function(Ft){var at=Kt(Ft),mt=Math.cos(at);return Math.abs(mt)<.1?"middle":mt>0?"start":"end"},cr.heightFn=function(Ft,at,mt){var qt=Kt(Ft);return-.5*(1+Math.sin(qt))*mt};var hr=function(Ft){return n(rt[0]+Re*Math.cos(Ft),rt[1]-Re*Math.sin(Ft))};Fe=function(Ft){return hr(Kt(Ft))},Ie=i.calcTicks(Me),Ne=i.getTickSigns(Me)[2],Me.visible&&(i.drawTicks(Ee,Me,{vals:Ie,layer:gt,path:"M"+(Ne="inside"===Me.ticks?-1:1)*((Me.linewidth||1)/2)+",0h"+Ne*Me.ticklen,transFn:function(Ft){var at=Kt(Ft);return hr(at)+"rotate("+-r(at)+")"}}),i.drawLabels(Ee,Me,{vals:Ie,layer:gt,transFn:Fe,labelFns:cr}));var He=[Ue].concat(De.gauge.steps),Je=ut.selectAll("g.bg-arc").data(He);Je.enter().append("g").classed("bg-arc",!0).append("path"),Je.select("path").call(Gt).call(T),Je.exit().remove();var pe=wt(De.gauge.bar.thickness),we=ut.selectAll("g.value-arc").data([De.gauge.bar]);we.enter().append("g").classed("value-arc",!0).append("path");var We,Ke,Ye,Be=we.select("path");f(At)?(Be.transition().duration(At.duration).ease(At.easing).each("end",function(){_t&&_t()}).each("interrupt",function(){_t&&_t()}).attrTween("d",(We=pe,Ke=et(me[0].lastY),Ye=et(me[0].y),function(){var Ft=v(Ke,Ye);return function(at){return We.endAngle(Ft(at))()}})),De._lastValue=me[0].y):Be.attr("d","number"==typeof me[0].y?pe.endAngle(et(me[0].y)):"M0,0Z"),Be.call(T),we.exit().remove(),He=[];var ft=De.gauge.threshold.value;(ft||0===ft)&&He.push({range:[ft,ft],color:De.gauge.threshold.color,line:{color:De.gauge.threshold.line.color,width:De.gauge.threshold.line.width},thickness:De.gauge.threshold.thickness});var ct=ut.selectAll("g.threshold-arc").data(He);ct.enter().append("g").classed("threshold-arc",!0).append("path"),ct.select("path").call(Gt).call(T),ct.exit().remove();var St=ut.selectAll("g.gauge-outline").data([je]);St.enter().append("g").classed("gauge-outline",!0).append("path"),St.select("path").call(Gt).call(T),St.exit().remove()}(A,0,z,{radius:te,innerRadius:ne,gauge:le,layer:de,size:U,gaugeBg:J,gaugeOutline:G,transitionOpts:P,onComplete:E});var be=re.selectAll("g.bullet").data(H?z:[]);be.exit().remove();var _e=re.selectAll("g.bulletaxis").data(H?z:[]);_e.exit().remove(),H&&function(Ee,he,me,Se){var Me,Ie,Fe,Ne,De,$e=me[0].trace,Re=Se.gauge,ze=Se.layer,Ue=Se.gaugeBg,je=Se.gaugeOutline,rt=Se.size,ut=$e.domain,gt=Se.transitionOpts,At=Se.onComplete;Re.enter().append("g").classed("bullet",!0),Re.attr("transform",n(rt.l,rt.t)),ze.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),ze.selectAll("g.xbulletaxistick,path,text").remove();var _t=rt.h,it=$e.gauge.bar.thickness*_t,et=ut.x[0],wt=ut.x[0]+(ut.x[1]-ut.x[0])*($e._hasNumber||$e._hasDelta?1-d.bulletNumberDomainSize:1);function Gt(Je){Je.attr("width",function(pe){return Math.max(0,Me.c2p(pe.range[1])-Me.c2p(pe.range[0]))}).attr("x",function(pe){return Me.c2p(pe.range[0])}).attr("y",function(pe){return.5*(1-pe.thickness)*_t}).attr("height",function(pe){return pe.thickness*_t})}(Me=_(Ee,$e.gauge.axis))._id="xbulletaxis",Me.domain=[et,wt],Me.setScale(),Ie=i.calcTicks(Me),Fe=i.makeTransTickFn(Me),Ne=i.getTickSigns(Me)[2],De=rt.t+rt.h,Me.visible&&(i.drawTicks(Ee,Me,{vals:"inside"===Me.ticks?i.clipEnds(Me,Ie):Ie,layer:ze,path:i.makeTickPath(Me,De,Ne),transFn:Fe}),i.drawLabels(Ee,Me,{vals:Ie,layer:ze,transFn:Fe,labelFns:i.makeLabelFns(Me,De)}));var Kt=[Ue].concat($e.gauge.steps),cr=Re.selectAll("g.bg-bullet").data(Kt);cr.enter().append("g").classed("bg-bullet",!0).append("rect"),cr.select("rect").call(Gt).call(T),cr.exit().remove();var ar=Re.selectAll("g.value-bullet").data([$e.gauge.bar]);ar.enter().append("g").classed("value-bullet",!0).append("rect"),ar.select("rect").attr("height",it).attr("y",(_t-it)/2).call(T),f(gt)?ar.select("rect").transition().duration(gt.duration).ease(gt.easing).each("end",function(){At&&At()}).each("interrupt",function(){At&&At()}).attr("width",Math.max(0,Me.c2p(Math.min($e.gauge.axis.range[1],me[0].y)))):ar.select("rect").attr("width","number"==typeof me[0].y?Math.max(0,Me.c2p(Math.min($e.gauge.axis.range[1],me[0].y))):0),ar.exit().remove();var hr=me.filter(function(){return $e.gauge.threshold.value||0===$e.gauge.threshold.value}),Xt=Re.selectAll("g.threshold-bullet").data(hr);Xt.enter().append("g").classed("threshold-bullet",!0).append("line"),Xt.select("line").attr("x1",Me.c2p($e.gauge.threshold.value)).attr("x2",Me.c2p($e.gauge.threshold.value)).attr("y1",(1-$e.gauge.threshold.thickness)/2*_t).attr("y2",(1-(1-$e.gauge.threshold.thickness)/2)*_t).call(p.stroke,$e.gauge.threshold.line.color).style("stroke-width",$e.gauge.threshold.line.width),Xt.exit().remove();var He=Re.selectAll("g.gauge-outline").data([je]);He.enter().append("g").classed("gauge-outline",!0).append("rect"),He.select("rect").call(Gt).call(T),He.exit().remove()}(A,0,z,{gauge:be,layer:_e,size:U,gaugeBg:J,gaugeOutline:G,transitionOpts:P,onComplete:E});var xe=re.selectAll("text.title").data(z);xe.exit().remove(),xe.enter().append("text").classed("title",!0),xe.attr("text-anchor",function(){return H?g.right:g[Z.title.align]}).text(Z.title.text).call(t.font,Z.title.font).call(a.convertToTspans,A),xe.attr("transform",function(){var Ee,he=U.l+U.w*u[Z.title.align],me=d.titlePadding,Se=t.bBox(xe.node());return j?(B&&(Ee=Z.gauge.axis.visible?t.bBox(de.node()).top-me-Se.bottom:U.t+U.h/2-te/2-Se.bottom-me),H&&(Ee=V-(Se.top+Se.bottom)/2,he=U.l-d.bulletPadding*U.w)):Ee=Z._numbersTop-me-Se.bottom,n(he,Ee)})})}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/attributes"),v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,h=y("../mesh3d/attributes"),e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat,r=y("../../plot_api/edit_types").overrideAll,o=Q.exports=r(n({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),valuehoverformat:v("value",1),showlegend:n({},e.showlegend,{dflt:!1})},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:h.opacity,lightposition:h.lightposition,lighting:h.lighting,flatshading:h.flatshading,contour:h.contour,hoverinfo:n({},e.hoverinfo)}),"calc","nested");o.flatshading.dflt=!0,o.lighting.facenormalsepsilon.dflt=0,o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/calc"),v=y("../streamtube/calc").processGrid,b=y("../streamtube/calc").filter;Q.exports=function(h,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=b(e.x,e._len),e._y=b(e.y,e._len),e._z=b(e.z,e._len),e._value=b(e.value,e._len);var n=v(e);e._gridFill=n.fill,e._Xs=n.Xs,e._Ys=n.Ys,e._Zs=n.Zs,e._len=n.len;for(var r=1/0,o=-1/0,t=0;t<e._len;t++){var d=e._value[t];r=Math.min(r,d),o=Math.max(o,d)}e._minValues=r,e._maxValues=o,e._vMin=e.isomin??r,e._vMax=void 0===e.isomax||null===e.isomin?o:e.isomax,m(h,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(y,Q,K){"use strict";var m=y("../../../stackgl_modules").gl_mesh3d,v=y("../../lib/gl_format_color").parseColorScale,b=y("../../lib/str2rgbarray"),h=y("../../components/colorscale").extractOpts,e=y("../../plots/gl3d/zip3"),n=function(a,i){for(var s=i.length-1;s>0;s--){var c=Math.min(i[s],i[s-1]),l=Math.max(i[s],i[s-1]);if(l>c&&c<a&&a<=l)return{id:s,distRatio:(l-a)/(l-c)}}return{id:0,distRatio:0}};function r(a,i,s){this.scene=a,this.uid=s,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var o=r.prototype;o.handlePick=function(a){if(a.object===this.mesh){var i=a.data.index,c=this.data._meshY[i],l=this.data._meshZ[i],p=this.data._Ys.length,g=this.data._Zs.length,u=n(this.data._meshX[i],this.data._Xs).id,x=n(c,this.data._Ys).id,f=n(l,this.data._Zs).id,T=a.index=f+g*x+g*p*u;a.traceCoordinate=[this.data._meshX[T],this.data._meshY[T],this.data._meshZ[T],this.data._value[T]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&void 0!==_[T]?a.textLabel=_[T]:_&&(a.textLabel=_),!0}},o.update=function(a){var i=this.scene,s=i.fullSceneLayout;function c(g,u,x,f){return u.map(function(T){return g.d2l(T,0,f)*x})}this.data=d(a);var l={positions:e(c(s.xaxis,a._meshX,i.dataScale[0],a.xcalendar),c(s.yaxis,a._meshY,i.dataScale[1],a.ycalendar),c(s.zaxis,a._meshZ,i.dataScale[2],a.zcalendar)),cells:e(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:b(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},p=h(a);l.vertexIntensity=a._meshIntensity,l.vertexIntensityBounds=[p.min,p.max],l.colormap=v(a),this.mesh.update(l)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var t=["xyz","xzy","yxz","yzx","zxy","zyx"];function d(a){a._meshI=[],a._meshJ=[],a._meshK=[];var i,s,c,l,p,g,u,x=a.surface.show,f=a.spaceframe.show,T=a.surface.fill,_=a.spaceframe.fill,k=!1,w=!1,C=0,A=a._Xs,O=a._Ys,P=a._Zs,S=A.length,E=O.length,D=P.length,z=t.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),N=function(Re,ze,Ue){switch(z){case 5:return Ue+D*ze+D*E*Re;case 4:return Ue+D*Re+D*S*ze;case 3:return ze+E*Ue+E*D*Re;case 2:return ze+E*Re+E*S*Ue;case 1:return Re+S*Ue+S*D*ze;default:return Re+S*ze+S*E*Ue}},V=a._minValues,X=a._maxValues,J=a._vMin,G=a._vMax;function Z(Re,ze,Ue){for(var je=g.length,rt=s;rt<je;rt++)if(Re===c[rt]&&ze===l[rt]&&Ue===p[rt])return rt;return-1}function re(){s=i}function j(){c=[],l=[],p=[],g=[],i=0,re()}function B(Re,ze,Ue,je){return c.push(Re),l.push(ze),p.push(Ue),g.push(je),++i-1}function H(Re,ze,Ue){for(var je=[],rt=0;rt<Re.length;rt++)je[rt]=Re[rt]*(1-Ue)+Ue*ze[rt];return je}function ee(Re){u=Re}function U(Re,ze){return"all"===Re||null===Re||Re.indexOf(ze)>-1}function $(Re,ze){return null===Re?ze:Re}function q(Re,ze,Ue){re();var rt,ut,Xt,He,Je,pe,we,Be,We,Ke,Ye,ft,ct,St,Ft,gt=[ze],At=[Ue];if(u>=1)gt=[ze],At=[Ue];else if(u>0){var _t=(He=Ue,Ke=H(Be=function(at,mt,qt){for(var Et=[],Dt=0;Dt<at.length;Dt++)Et[Dt]=(at[Dt]+mt[Dt]+qt[Dt])/3;return Et}(Je=(Xt=ze)[0],pe=Xt[1],we=Xt[2]),Je,We=Math.sqrt(1-u)),{xyzv:[[Je,pe,Ye=H(Be,pe,We)],[Ye,Ke,Je],[pe,we,ft=H(Be,we,We)],[ft,Ye,pe],[we,Je,Ke],[Ke,ft,we]],abc:[[ct=He[0],St=He[1],-1],[-1,-1,ct],[St,Ft=He[2],-1],[-1,-1,St],[Ft,ct,-1],[-1,-1,Ft]]});gt=_t.xyzv,At=_t.abc}for(var it=0;it<gt.length;it++){ze=gt[it],Ue=At[it];for(var et=[],wt=0;wt<3;wt++){var Gt=ze[wt][0],Kt=ze[wt][1],cr=ze[wt][2],ar=ze[wt][3],hr=Ue[wt]>-1?Ue[wt]:Z(Gt,Kt,cr);et[wt]=hr>-1?hr:B(Gt,Kt,cr,$(Re,ar))}rt=et[1],ut=et[2],a._meshI.push(et[0]),a._meshJ.push(rt),a._meshK.push(ut),++C}}function te(Re,ze,Ue,je){var rt=Re[3];rt<Ue&&(rt=Ue),rt>je&&(rt=je);for(var ut=(Re[3]-rt)/(Re[3]-ze[3]+1e-9),gt=[],At=0;At<4;At++)gt[At]=(1-ut)*Re[At]+ut*ze[At];return gt}function ne(Re,ze,Ue){return Re>=ze&&Re<=Ue}function se(Re){var ze=.001*(G-J);return Re>=J-ze&&Re<=G+ze}function ie(Re){for(var ze=[],Ue=0;Ue<4;Ue++){var je=Re[Ue];ze.push([a._x[je],a._y[je],a._z[je],a._value[je]])}return ze}function ue(Re,ze,Ue,je,rt,ut){ut||(ut=1),Ue=[-1,-1,-1];var gt=!1,At=[ne(ze[0][3],je,rt),ne(ze[1][3],je,rt),ne(ze[2][3],je,rt)];if(!At[0]&&!At[1]&&!At[2])return!1;var _t=function(et,wt,Gt){return se(wt[0][3])&&se(wt[1][3])&&se(wt[2][3])?(q(et,wt,Gt),!0):ut<3&&ue(et,wt,Gt,J,G,++ut)};if(At[0]&&At[1]&&At[2])return _t(Re,ze,Ue)||gt;var it=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(et){if(At[et[0]]&&At[et[1]]&&!At[et[2]]){var wt=ze[et[0]],Gt=ze[et[1]],Kt=ze[et[2]],cr=te(Kt,wt,je,rt),ar=te(Kt,Gt,je,rt);gt=_t(Re,[ar,cr,wt],[-1,-1,Ue[et[0]]])||gt,gt=_t(Re,[wt,Gt,ar],[Ue[et[0]],Ue[et[1]],-1])||gt,it=!0}}),it||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(et){if(At[et[0]]&&!At[et[1]]&&!At[et[2]]){var wt=ze[et[0]],Kt=ze[et[2]],cr=te(ze[et[1]],wt,je,rt),ar=te(Kt,wt,je,rt);gt=_t(Re,[ar,cr,wt],[-1,-1,Ue[et[0]]])||gt,it=!0}}),gt}function le(Re,ze,Ue,je){var _t,it,et,wt,rt=!1,ut=ie(ze),gt=[ne(ut[0][3],Ue,je),ne(ut[1][3],Ue,je),ne(ut[2][3],Ue,je),ne(ut[3][3],Ue,je)];if(!(gt[0]||gt[1]||gt[2]||gt[3]))return rt;if(gt[0]&&gt[1]&&gt[2]&&gt[3])return w&&(_t=Re,it=ut,et=ze,(wt=function(Gt,Kt,cr){q(_t,[it[Gt],it[Kt],it[cr]],[et[Gt],et[Kt],et[cr]])})(0,1,2),wt(3,0,1),wt(2,3,0),rt=void wt(1,2,3)||rt),rt;var At=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(_t){if(gt[_t[0]]&&gt[_t[1]]&&gt[_t[2]]&&!gt[_t[3]]){var it=ut[_t[0]],et=ut[_t[1]],wt=ut[_t[2]],Gt=ut[_t[3]];if(w)rt=q(Re,[it,et,wt],[ze[_t[0]],ze[_t[1]],ze[_t[2]]])||rt;else{var Kt=te(Gt,it,Ue,je),cr=te(Gt,et,Ue,je),ar=te(Gt,wt,Ue,je);rt=q(null,[Kt,cr,ar],[-1,-1,-1])||rt}At=!0}}),At||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(_t){if(gt[_t[0]]&&gt[_t[1]]&&!gt[_t[2]]&&!gt[_t[3]]){var it=ut[_t[0]],et=ut[_t[1]],wt=ut[_t[2]],Gt=ut[_t[3]],Kt=te(wt,it,Ue,je),cr=te(wt,et,Ue,je),ar=te(Gt,et,Ue,je),hr=te(Gt,it,Ue,je);w?(rt=q(Re,[it,hr,Kt],[ze[_t[0]],-1,-1])||rt,rt=q(Re,[et,cr,ar],[ze[_t[1]],-1,-1])||rt):(null,He=[Kt,cr,ar,hr],Je=[-1,-1,-1,-1],(pe=function(we,Be,We){q(null,[He[we],He[Be],He[We]],[Je[we],Je[Be],Je[We]])})(0,1,2),rt=void pe(2,3,0)||rt),At=!0}var He,Je,pe}),At||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(_t){if(gt[_t[0]]&&!gt[_t[1]]&&!gt[_t[2]]&&!gt[_t[3]]){var it=ut[_t[0]],wt=ut[_t[2]],Gt=ut[_t[3]],Kt=te(ut[_t[1]],it,Ue,je),cr=te(wt,it,Ue,je),ar=te(Gt,it,Ue,je);w?(rt=q(Re,[it,Kt,cr],[ze[_t[0]],-1,-1])||rt,rt=q(Re,[it,cr,ar],[ze[_t[0]],-1,-1])||rt,rt=q(Re,[it,ar,Kt],[ze[_t[0]],-1,-1])||rt):rt=q(null,[Kt,cr,ar],[-1,-1,-1])||rt,At=!0}})),rt}function de(Re,ze,Ue,je,rt,ut,gt,At,_t,it,et){var wt=!1;return k&&(U(Re,"A")&&(wt=le(null,[ze,Ue,je,ut],it,et)||wt),U(Re,"B")&&(wt=le(null,[Ue,je,rt,_t],it,et)||wt),U(Re,"C")&&(wt=le(null,[Ue,ut,gt,_t],it,et)||wt),U(Re,"D")&&(wt=le(null,[je,ut,At,_t],it,et)||wt),U(Re,"E")&&(wt=le(null,[Ue,je,ut,_t],it,et)||wt)),w&&(wt=le(Re,[Ue,je,ut,_t],it,et)||wt),wt}function be(Re,ze,Ue,je,rt,ut,gt,At){return[!0===At[0]||ue(Re,ie([ze,Ue,je]),[ze,Ue,je],ut,gt),!0===At[1]||ue(Re,ie([je,rt,ze]),[je,rt,ze],ut,gt)]}function _e(Re,ze,Ue,je,rt,ut,gt,At,_t){return At?be(Re,ze,Ue,rt,je,ut,gt,_t):be(Re,Ue,rt,je,ze,ut,gt,_t)}function xe(Re,ze,Ue,je,rt,ut,gt){var At,_t,it,et,wt=!1,Gt=function(){wt=ue(Re,[At,_t,it],[-1,-1,-1],rt,ut)||wt,wt=ue(Re,[it,et,At],[-1,-1,-1],rt,ut)||wt},Kt=gt[0],cr=gt[1],ar=gt[2];return Kt&&(At=H(ie([N(ze,Ue-0,je-0)])[0],ie([N(ze-1,Ue-0,je-0)])[0],Kt),_t=H(ie([N(ze,Ue-0,je-1)])[0],ie([N(ze-1,Ue-0,je-1)])[0],Kt),it=H(ie([N(ze,Ue-1,je-1)])[0],ie([N(ze-1,Ue-1,je-1)])[0],Kt),et=H(ie([N(ze,Ue-1,je-0)])[0],ie([N(ze-1,Ue-1,je-0)])[0],Kt),Gt()),cr&&(At=H(ie([N(ze-0,Ue,je-0)])[0],ie([N(ze-0,Ue-1,je-0)])[0],cr),_t=H(ie([N(ze-0,Ue,je-1)])[0],ie([N(ze-0,Ue-1,je-1)])[0],cr),it=H(ie([N(ze-1,Ue,je-1)])[0],ie([N(ze-1,Ue-1,je-1)])[0],cr),et=H(ie([N(ze-1,Ue,je-0)])[0],ie([N(ze-1,Ue-1,je-0)])[0],cr),Gt()),ar&&(At=H(ie([N(ze-0,Ue-0,je)])[0],ie([N(ze-0,Ue-0,je-1)])[0],ar),_t=H(ie([N(ze-0,Ue-1,je)])[0],ie([N(ze-0,Ue-1,je-1)])[0],ar),it=H(ie([N(ze-1,Ue-1,je)])[0],ie([N(ze-1,Ue-1,je-1)])[0],ar),et=H(ie([N(ze-1,Ue-0,je)])[0],ie([N(ze-1,Ue-0,je-1)])[0],ar),Gt()),wt}function Ee(Re,ze,Ue,je,rt,ut,gt,At,_t,it,et,wt){var Gt=Re;return wt?(k&&"even"===Re&&(Gt=null),de(Gt,ze,Ue,je,rt,ut,gt,At,_t,it,et)):(k&&"odd"===Re&&(Gt=null),de(Gt,_t,At,gt,ut,rt,je,Ue,ze,it,et))}function he(Re,ze,Ue,je,rt){for(var ut=[],gt=0,At=0;At<ze.length;At++)for(var _t=ze[At],it=1;it<D;it++)for(var et=1;et<E;et++)ut.push(_e(Re,N(_t,et-1,it-1),N(_t,et-1,it),N(_t,et,it-1),N(_t,et,it),Ue,je,(_t+et+it)%2,rt&&rt[gt]?rt[gt]:[])),gt++;return ut}function me(Re,ze,Ue,je,rt){for(var ut=[],gt=0,At=0;At<ze.length;At++)for(var _t=ze[At],it=1;it<S;it++)for(var et=1;et<D;et++)ut.push(_e(Re,N(it-1,_t,et-1),N(it,_t,et-1),N(it-1,_t,et),N(it,_t,et),Ue,je,(it+_t+et)%2,rt&&rt[gt]?rt[gt]:[])),gt++;return ut}function Se(Re,ze,Ue,je,rt){for(var ut=[],gt=0,At=0;At<ze.length;At++)for(var _t=ze[At],it=1;it<E;it++)for(var et=1;et<S;et++)ut.push(_e(Re,N(et-1,it-1,_t),N(et-1,it,_t),N(et,it-1,_t),N(et,it,_t),Ue,je,(et+it+_t)%2,rt&&rt[gt]?rt[gt]:[])),gt++;return ut}function Me(Re,ze,Ue){for(var je=1;je<D;je++)for(var rt=1;rt<E;rt++)for(var ut=1;ut<S;ut++)Ee(Re,N(ut-1,rt-1,je-1),N(ut-1,rt-1,je),N(ut-1,rt,je-1),N(ut-1,rt,je),N(ut,rt-1,je-1),N(ut,rt-1,je),N(ut,rt,je-1),N(ut,rt,je),ze,Ue,(ut+rt+je)%2)}function Ie(Re,ze,Ue){k=!0,Me(Re,ze,Ue),k=!1}function Fe(Re,ze,Ue,je,rt,ut){for(var gt=[],_t=0;_t<ze.length;_t++)for(var it=ze[_t],et=1;et<D;et++)for(var wt=1;wt<E;wt++)gt.push(xe(Re,it,wt,et,Ue,je,rt[_t]));return gt}function Ne(Re,ze,Ue,je,rt,ut){for(var gt=[],_t=0;_t<ze.length;_t++)for(var it=ze[_t],et=1;et<S;et++)for(var wt=1;wt<D;wt++)gt.push(xe(Re,et,it,wt,Ue,je,rt[_t]));return gt}function De(Re,ze,Ue,je,rt,ut){for(var gt=[],_t=0;_t<ze.length;_t++)for(var it=ze[_t],et=1;et<E;et++)for(var wt=1;wt<S;wt++)gt.push(xe(Re,wt,et,it,Ue,je,rt[_t]));return gt}function $e(Re,ze){for(var Ue=[],je=Re;je<ze;je++)Ue.push(je);return Ue}return function(){if(j(),function(){for(var At=0;At<S;At++)for(var _t=0;_t<E;_t++)for(var it=0;it<D;it++){var et=N(At,_t,it);B(a._x[et],a._y[et],a._z[et],a._value[et])}}(),f&&_&&(ee(_),w=!0,Me(null,J,G),w=!1),x&&T){ee(T);for(var Re=a.surface.pattern,ze=a.surface.count,Ue=0;Ue<ze;Ue++){var je=1===ze?.5:Ue/(ze-1),rt=(1-je)*J+je*G,ut=Math.abs(rt-V)>Math.abs(rt-X)?[V,rt]:[rt,X];Ie(Re,ut[0],ut[1])}}var gt=[[Math.min(J,X),Math.max(J,X)],[Math.min(V,G),Math.max(V,G)]];["x","y","z"].forEach(function(At){for(var _t=[],it=0;it<gt.length;it++){var et=0,wt=gt[it][0],Gt=gt[it][1],Kt=a.slices[At];if(Kt.show&&Kt.fill){ee(Kt.fill);var cr=[],ar=[],hr=[];if(Kt.locations.length)for(var Xt=0;Xt<Kt.locations.length;Xt++){var He=n(Kt.locations[Xt],"x"===At?A:"y"===At?O:P);0===He.distRatio?cr.push(He.id):He.id>0&&(ar.push(He.id),hr.push("x"===At?[He.distRatio,0,0]:"y"===At?[0,He.distRatio,0]:[0,0,He.distRatio]))}else cr=$e(1,"x"===At?S-1:"y"===At?E-1:D-1);ar.length>0&&(_t[et]="x"===At?Fe(null,ar,wt,Gt,hr):"y"===At?Ne(null,ar,wt,Gt,hr):De(null,ar,wt,Gt,hr),et++),cr.length>0&&(_t[et]="x"===At?he(null,cr,wt,Gt,_t[et]):"y"===At?me(null,cr,wt,Gt,_t[et]):Se(null,cr,wt,Gt,_t[et]),et++)}var Je=a.caps[At];Je.show&&Je.fill&&(ee(Je.fill),_t[et]="x"===At?he(null,[0,S-1],wt,Gt,_t[et]):"y"===At?me(null,[0,E-1],wt,Gt,_t[et]):Se(null,[0,D-1],wt,Gt,_t[et]),et++)}}),0===C&&j(),a._meshX=c,a._meshY=l,a._meshZ=p,a._meshIntensity=g,a._Xs=A,a._Ys=O,a._Zs=P}(),a}Q.exports={findNearestOnAxis:n,generateIsoMeshes:d,createIsosurfaceTrace:function(a,i){var c=m({gl:a.glplot.gl}),l=new r(a,c,i.uid);return c._trace=l,l.update(i),a.glplot.add(c),l}}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../registry"),b=y("./attributes"),h=y("../../components/colorscale/defaults");function e(n,r,o,t,d){var a=d("isomin"),i=d("isomax");null!=i&&null!=a&&a>i&&(r.isomin=null,r.isomax=null);var s=d("x"),c=d("y"),l=d("z"),p=d("value");s&&s.length&&c&&c.length&&l&&l.length&&p&&p.length?(v.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y","z"],t),d("valuehoverformat"),["x","y","z"].forEach(function(g){d(g+"hoverformat");var u="caps."+g;d(u+".show")&&d(u+".fill");var x="slices."+g;d(x+".show")&&(d(x+".fill"),d(x+".locations"))}),d("spaceframe.show")&&d("spaceframe.fill"),d("surface.show")&&(d("surface.count"),d("surface.fill"),d("surface.pattern")),d("contour.show")&&(d("contour.color"),d("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(g){d(g)}),h(n,r,t,d,{prefix:"",cLetter:"c"}),r._length=null):r.visible=!1}Q.exports={supplyDefaults:function(n,r,o,t){e(n,r,0,t,function(d,a){return m.coerce(n,r,b,d,a)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,calc:y("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:y("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/attributes"),v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,h=y("../surface/attributes"),e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat;Q.exports=n({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"}),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},m("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:h.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:n({},h.contours.x.show,{}),color:h.contours.x.color,width:h.contours.x.width,editType:"calc"},lightposition:{x:n({},h.lightposition.x,{dflt:1e5}),y:n({},h.lightposition.y,{dflt:1e5}),z:n({},h.lightposition.z,{dflt:0}),editType:"calc"},lighting:n({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},h.lighting),hoverinfo:n({},e.hoverinfo,{editType:"calc"}),showlegend:n({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/calc");Q.exports=function(v,b){b.intensity&&m(v,b,{vals:b.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(y,Q,K){"use strict";var m=y("../../../stackgl_modules").gl_mesh3d,v=y("../../../stackgl_modules").delaunay_triangulate,b=y("../../../stackgl_modules").alpha_shape,h=y("../../../stackgl_modules").convex_hull,e=y("../../lib/gl_format_color").parseColorScale,n=y("../../lib/str2rgbarray"),r=y("../../components/colorscale").extractOpts,o=y("../../plots/gl3d/zip3");function t(l,p,g){this.scene=l,this.uid=g,this.mesh=p,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var d=t.prototype;function a(l){for(var p=[],g=l.length,u=0;u<g;u++)p[u]=n(l[u]);return p}function i(l,p,g,u){for(var x=[],f=p.length,T=0;T<f;T++)x[T]=l.d2l(p[T],0,u)*g;return x}function s(l){for(var p=[],g=l.length,u=0;u<g;u++)p[u]=Math.round(l[u]);return p}function c(l,p){for(var g=l.length,u=0;u<g;u++)if(l[u]<=-.5||l[u]>=p-.5)return!1;return!0}d.handlePick=function(l){if(l.object===this.mesh){var p=l.index=l.data.index;l.traceCoordinate=l.data._cellCenter?l.data.dataCoordinate:[this.data.x[p],this.data.y[p],this.data.z[p]];var g=this.data.hovertext||this.data.text;return Array.isArray(g)&&void 0!==g[p]?l.textLabel=g[p]:g&&(l.textLabel=g),!0}},d.update=function(l){var p=this.scene,g=p.fullSceneLayout;this.data=l;var u,x=l.x.length,f=o(i(g.xaxis,l.x,p.dataScale[0],l.xcalendar),i(g.yaxis,l.y,p.dataScale[1],l.ycalendar),i(g.zaxis,l.z,p.dataScale[2],l.zcalendar));if(l.i&&l.j&&l.k){if(l.i.length!==l.j.length||l.j.length!==l.k.length||!c(l.i,x)||!c(l.j,x)||!c(l.k,x))return;u=o(s(l.i),s(l.j),s(l.k))}else u=0===l.alphahull?h(f):l.alphahull>0?b(l.alphahull,f):function(w,C){for(var A=["x","y","z"].indexOf(w),O=[],P=C.length,S=0;S<P;S++)O[S]=[C[S][(A+1)%3],C[S][(A+2)%3]];return v(O)}(l.delaunayaxis,f);var T={positions:f,cells:u,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,contourEnable:l.contour.show,contourColor:n(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading};if(l.intensity){var _=r(l);this.color="#fff";var k=l.intensitymode;T[k+"Intensity"]=l.intensity,T[k+"IntensityBounds"]=[_.min,_.max],T.colormap=e(l)}else l.vertexcolor?(this.color=l.vertexcolor[0],T.vertexColors=a(l.vertexcolor)):l.facecolor?(this.color=l.facecolor[0],T.cellColors=a(l.facecolor)):(this.color=l.color,T.meshColor=n(l.color));this.mesh.update(T)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(l,p){var u=m({gl:l.glplot.gl}),x=new t(l,u,p.uid);return u._trace=x,x.update(p),l.glplot.add(u),x}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("../../components/colorscale/defaults"),h=y("./attributes");Q.exports=function(e,n,r,o){function t(a,i){return v.coerce(e,n,h,a,i)}function d(a){var i=a.map(function(s){var c=t(s);return c&&v.isArrayOrTypedArray(c)?c:null});return i.every(function(s){return s&&s.length===i[0].length})&&i}d(["x","y","z"])?(d(["i","j","k"]),(!n.i||n.j&&n.k)&&(!n.j||n.k&&n.i)&&(!n.k||n.i&&n.j)?(m.getComponentMethod("calendars","handleTraceDefaults")(e,n,["x","y","z"],o),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(a){t(a)}),t("contour.show")&&(t("contour.color"),t("contour.width")),"intensity"in e?(t("intensity"),t("intensitymode"),b(e,n,o,t,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in e?t("facecolor"):"vertexcolor"in e?t("vertexcolor"):t("color",r)),t("text"),t("hovertext"),t("hovertemplate"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),n._length=null):n.visible=!1):n.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:y("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(y,Q,K){"use strict";var m=y("../../lib").extendFlat,v=y("../scatter/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=y("../../components/drawing/attributes").dash,e=y("../../components/fx/attributes"),n=y("../../constants/delta.js"),r=n.INCREASING.COLOR,o=n.DECREASING.COLOR,t=v.line;function d(a){return{line:{color:m({},t.color,{dflt:a}),width:t.width,dash:h,editType:"style"},editType:"style"}}Q.exports={xperiod:v.xperiod,xperiod0:v.xperiod0,xperiodalignment:v.xperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:m({},t.width,{}),dash:m({},h,{}),editType:"style"},increasing:d(r),decreasing:d(o),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:m({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(y,Q,K){"use strict";var m=y("../../lib"),v=m._,b=y("../../plots/cartesian/axes"),h=y("../../plots/cartesian/align_period"),e=y("../../constants/numerical").BADNUM;function n(o,t,d,a){return{o,h:t,l:d,c:a}}function r(o,t,d,a,i,s){for(var c=i.makeCalcdata(t,"open"),l=i.makeCalcdata(t,"high"),p=i.makeCalcdata(t,"low"),g=i.makeCalcdata(t,"close"),u=Array.isArray(t.text),x=Array.isArray(t.hovertext),f=!0,T=null,_=!!t.xperiodalignment,k=[],w=0;w<a.length;w++){var C=a[w],A=c[w],O=l[w],P=p[w],S=g[w];if(C!==e&&A!==e&&O!==e&&P!==e&&S!==e){S===A?null!==T&&S!==T&&(f=S>T):f=S>A,T=S;var E=s(A,O,P,S);E.pos=C,E.yc=(A+S)/2,E.i=w,E.dir=f?"increasing":"decreasing",E.x=E.pos,E.y=[P,O],_&&(E.orig_p=d[w]),u&&(E.tx=t.text[w]),x&&(E.htx=t.hovertext[w]),k.push(E)}else k.push({pos:C,empty:!0})}return t._extremes[i._id]=b.findExtremes(i,m.concat(p,l),{padded:!0}),k.length&&(k[0].t={labels:{open:v(o,"open:")+" ",high:v(o,"high:")+" ",low:v(o,"low:")+" ",close:v(o,"close:")+" "}}),k}Q.exports={calc:function(o,t){var d=b.getFromId(o,t.xaxis),a=b.getFromId(o,t.yaxis),i=function(g,u,x){var f=x._minDiff;if(!f){var T,_=g._fullData,k=[];for(f=1/0,T=0;T<_.length;T++){var w=_[T];if("ohlc"===w.type&&!0===w.visible&&w.xaxis===u._id){k.push(w);var C=u.makeCalcdata(w,"x");w._origX=C;var A=h(x,u,"x",C).vals;w._xcalc=A;var O=m.distinctVals(A).minDiff;O&&isFinite(O)&&(f=Math.min(f,O))}}for(f===1/0&&(f=1),T=0;T<k.length;T++)k[T]._minDiff=f}return f*x.tickwidth}(o,d,t),s=t._minDiff;t._minDiff=null;var c=t._origX;t._origX=null;var l=t._xcalc;t._xcalc=null;var p=r(o,t,c,l,a,n);return t._extremes[d._id]=b.findExtremes(d,l,{vpad:s/2}),p.length?(m.extendFlat(p[0].t,{wHover:s/2,tickLen:i}),p):[{t:{empty:!0}}]},calcCommon:r}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./ohlc_defaults"),b=y("../scatter/period_defaults"),h=y("./attributes");function e(n,r,o,t){o(t+".line.color"),o(t+".line.width",r.line.width),o(t+".line.dash",r.line.dash)}Q.exports=function(n,r,o,t){function d(a,i){return m.coerce(n,r,h,a,i)}v(n,r,d,t)?(b(n,r,t,d,{x:!0}),d("xhoverformat"),d("yhoverformat"),d("line.width"),d("line.dash"),e(0,r,d,"increasing"),e(0,r,d,"decreasing"),d("text"),d("hovertext"),d("tickwidth"),t._requestRangeslider[r.xaxis]=!0):r.visible=!1}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../lib"),b=y("../../components/fx"),h=y("../../components/color"),e=y("../../lib").fillText,n=y("../../constants/delta.js"),r={increasing:n.INCREASING.SYMBOL,decreasing:n.DECREASING.SYMBOL};function o(a,i,s,c){var l,p,g=a.cd,u=a.xa,x=g[0].trace,f=g[0].t,T=x.type,_="ohlc"===T?"l":"min",k="ohlc"===T?"h":"max",w=f.bPos||0,C=f.bdPos||f.tickLen,A=f.wHover,O=Math.min(1,C/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function P(X){var J=X.pos+w-i;return b.inbox(J-A,J+A,l)}function S(X){var J=X[_],G=X[k];return J===G||b.inbox(J-s,G-s,l)}function E(X){return(P(X)+S(X))/2}l=a.maxHoverDistance-O,p=a.maxSpikeDistance-O;var D=b.getDistanceFunction(c,P,S,E);if(b.getClosest(g,D,a),!1===a.index)return null;var z=g[a.index];if(z.empty)return null;var N=x[z.dir],V=N.line.color;return a.color=h.opacity(V)&&N.line.width?V:N.fillcolor,a.x0=u.c2p(z.pos+w-C,!0),a.x1=u.c2p(z.pos+w+C,!0),a.xLabelVal=void 0!==z.orig_p?z.orig_p:z.pos,a.spikeDistance=E(z)*p/l,a.xSpike=u.c2p(z.pos,!0),a}function t(a,i,s,c){var l=a.cd,p=a.ya,g=l[0].trace,u=l[0].t,x=[],f=o(a,i,s,c);if(!f)return[];var T=l[f.index].hi||g.hoverinfo,_=T.split("+");if("all"!==T&&-1===_.indexOf("y"))return[];for(var k=["high","open","close","low"],w={},C=0;C<k.length;C++){var A,O=k[C],P=g[O][f.index],S=p.c2p(P,!0);P in w?(A=w[P]).yLabel+="<br>"+u.labels[O]+m.hoverLabelText(p,P,g.yhoverformat):((A=v.extendFlat({},f)).y0=A.y1=S,A.yLabelVal=P,A.yLabel=u.labels[O]+m.hoverLabelText(p,P,g.yhoverformat),A.name="",x.push(A),w[P]=A)}return x}function d(a,i,s,c){var l=a.cd,p=a.ya,g=l[0].trace,u=l[0].t,x=o(a,i,s,c);if(!x)return[];var f=l[x.index],T=x.index=f.i,_=f.dir;function k(E){return u.labels[E]+m.hoverLabelText(p,g[E][T],g.yhoverformat)}var w=f.hi||g.hoverinfo,C=w.split("+"),A="all"===w,O=A||-1!==C.indexOf("y"),P=A||-1!==C.indexOf("text"),S=O?[k("open"),k("high"),k("low"),k("close")+"  "+r[_]]:[];return P&&e(f,g,S),x.extraText=S.join("<br>"),x.y0=x.y1=p.c2p(f.yc,!0),[x]}Q.exports={hoverPoints:function(a,i,s,c){return a.cd[0].trace.hoverlabel.split?t(a,i,s,c):d(a,i,s,c)},hoverSplit:t,hoverOnPoints:d}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"ohlc",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc").calc,plot:y("./plot"),style:y("./style"),hoverPoints:y("./hover").hoverPoints,selectPoints:y("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib");Q.exports=function(b,h,e,n){var r=e("x"),o=e("open"),t=e("high"),d=e("low"),a=e("close");if(e("hoverlabel.split"),m.getComponentMethod("calendars","handleTraceDefaults")(b,h,["x"],n),o&&t&&d&&a){var i=Math.min(o.length,t.length,d.length,a.length);return r&&(i=Math.min(i,v.minRowLength(r))),h._length=i,i}}},{"../../lib":515,"../../registry":647}],887:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib");Q.exports=function(b,h,e,n){var r=h.yaxis,o=h.xaxis,t=!!o.rangebreaks;v.makeTraceGroups(n,e,"trace ohlc").each(function(d){var a=m.select(this),i=d[0],s=i.t;if(!0!==i.trace.visible||s.empty)a.remove();else{var c=s.tickLen,l=a.selectAll("path").data(v.identity);l.enter().append("path"),l.exit().remove(),l.attr("d",function(p){if(p.empty)return"M0,0Z";var g=o.c2p(p.pos-c,!0),u=o.c2p(p.pos+c,!0),x=t?(g+u)/2:o.c2p(p.pos,!0);return"M"+g+","+r.c2p(p.o,!0)+"H"+x+"M"+x+","+r.c2p(p.h,!0)+"V"+r.c2p(p.l,!0)+"M"+u+","+r.c2p(p.c,!0)+"H"+x})}})}},{"../../lib":515,"@plotly/d3":58}],888:[function(y,Q,K){"use strict";Q.exports=function(m,v){var b,h=m.cd,e=m.xaxis,n=m.yaxis,r=[],o=h[0].t.bPos||0;if(!1===v)for(b=0;b<h.length;b++)h[b].selected=0;else for(b=0;b<h.length;b++){var t=h[b];v.contains([e.c2p(t.pos+o),n.c2p(t.yc)],null,t.i,m)?(r.push({pointNumber:t.i,x:e.c2d(t.pos),y:n.c2d(t.yc)}),t.selected=1):t.selected=0}return r}},{}],889:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/drawing"),b=y("../../components/color");Q.exports=function(h,e,n){var r=n||m.select(h).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(o){return o[0].trace.opacity}),r.each(function(o){var t=o[0].trace;m.select(this).selectAll("path").each(function(d){if(!d.empty){var a=t[d.dir].line;m.select(this).style("fill","none").call(b.stroke,a.color).call(v.dashLine,a.dash,a.width).style("opacity",t.selectedpoints&&!d.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(y,Q,K){"use strict";var m=y("../../lib/extend").extendFlat,v=y("../../plots/attributes"),b=y("../../plots/font_attributes"),h=y("../../components/colorscale/attributes"),e=y("../../plots/template_attributes").hovertemplateAttrs,n=y("../../plots/domain").attributes,r=m({editType:"calc"},h("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});Q.exports={domain:n({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:m({},v.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:b({editType:"calc"}),tickfont:b({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:r,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(y,Q,K){"use strict";var m=y("../../plots/get_data").getModuleCalcData,v=y("./plot");K.name="parcats",K.plot=function(b,h,e,n){var r=m(b.calcdata,"parcats");r.length&&v(b,r[0],e,n)},K.clean=function(b,h,e,n){var r=n._has&&n._has("parcats"),o=h._has&&h._has("parcats");r&&!o&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(y,Q,K){"use strict";var m=y("../../lib/gup").wrap,v=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/calc"),h=y("../../lib/filter_unique.js"),e=y("../../components/drawing"),n=y("../../lib"),r=y("fast-isnumeric");function o(a,i,s){a.valueInds.push(i),a.count+=s}function t(a,i,s){return{categoryInds:a,color:i,rawColor:s,valueInds:[],count:0}}function d(a,i,s){a.valueInds.push(i),a.count+=s}Q.exports=function(a,i){var s=n.filterVisible(i.dimensions);if(0===s.length)return[];var c,l,p,g=s.map(function(Z){var re;if("trace"===Z.categoryorder)re=null;else if("array"===Z.categoryorder)re=Z.categoryarray;else{re=h(Z.values);for(var j=!0,B=0;B<re.length;B++)if(!r(re[B])){j=!1;break}re.sort(j?n.sorterAsc:void 0),"category descending"===Z.categoryorder&&(re=re.reverse())}return function(H,ee){ee=null==ee?[]:ee.map(function(ue){return ue});var U={},$={},q=[];ee.forEach(function(ue,le){U[ue]=0,$[ue]=le});for(var te=0;te<H.length;te++){var ne,se=H[te];void 0===U[se]?(U[se]=1,ne=ee.push(se)-1,$[se]=ne):(U[se]++,ne=$[se]),q.push(ne)}var ie=ee.map(function(ue){return U[ue]});return{uniqueValues:ee,uniqueCounts:ie,inds:q}}(Z.values,re)});c=n.isArrayOrTypedArray(i.counts)?i.counts:[i.counts],function(Z){var re;if(function(j){for(var B=new Array(j.length),H=0;H<j.length;H++){if(j[H]<0||j[H]>=j.length||void 0!==B[j[H]])return!1;B[j[H]]=!0}return!0}(Z.map(function(j){return j.displayindex})))for(re=0;re<Z.length;re++)Z[re]._displayindex=Z[re].displayindex;else for(re=0;re<Z.length;re++)Z[re]._displayindex=re}(s),s.forEach(function(Z,re){!function(j,B){j._categoryarray=B.uniqueValues,j._ticktext=null==j.ticktext?[]:j.ticktext.slice();for(var H=j._ticktext.length;H<B.uniqueValues.length;H++)j._ticktext.push(B.uniqueValues[H])}(Z,g[re])});var u,x=i.line;x?(v(i,"line")&&b(a,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),u=e.tryColorscale(x)):u=n.identity;var f,T,_,k,w,C=s[0].values.length,A={},O=g.map(function(Z){return Z.inds});for(p=0,f=0;f<C;f++){var P=[];for(T=0;T<O.length;T++)P.push(O[T][f]);p+=l=c[f%c.length];var S=(_=f,k=void 0,w=void 0,n.isArrayOrTypedArray(x.color)?w=k=x.color[_%x.color.length]:k=x.color,{color:u(k),rawColor:w}),E=P+"-"+S.rawColor;void 0===A[E]&&(A[E]=t(P,S.color,S.rawColor)),d(A[E],f,l)}var D,Z,re,j,B,z=s.map(function(Z,re){return{dimensionInd:re,containerInd:Z._index,displayInd:Z._displayindex,dimensionLabel:Z.label,count:p,categories:[],dragX:null}});for(f=0;f<C;f++)for(l=c[f%c.length],T=0;T<z.length;T++){var N=z[T].containerInd,V=g[T].inds[f],X=z[T].categories;void 0===X[V]&&(X[V]={dimensionInd:T,categoryInd:D=V,categoryValue:i.dimensions[N]._categoryarray[V],displayInd:D,categoryLabel:i.dimensions[N]._ticktext[V],valueInds:[],count:0,dragY:null}),o(X[V],f,l)}return m((re=A,j=p,B=(Z=z).map(function(H){return H.categories.length}).reduce(function(H,ee){return Math.max(H,ee)}),{dimensions:Z,paths:re,trace:void 0,maxCats:B,count:j}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults"),h=y("../../plots/domain").defaults,e=y("../../plots/array_container_defaults"),n=y("./attributes"),r=y("../parcoords/merge_length");function o(t,d){function a(u,x){return m.coerce(t,d,n.dimensions,u,x)}var i=a("values"),s=a("visible");if(i&&i.length||(s=d.visible=!1),s){a("label"),a("displayindex",d._index);var c,l=t.categoryarray,p=Array.isArray(l)&&l.length>0;p&&(c="array");var g=a("categoryorder",c);"array"===g?(a("categoryarray"),a("ticktext")):(delete t.categoryarray,delete t.ticktext),p||"array"!==g||(d.categoryorder="trace")}}Q.exports=function(t,d,a,i){function s(u,x){return m.coerce(t,d,n,u,x)}var c=e(t,d,{name:"dimensions",handleItemDefaults:o}),l=function(u,x,f,T,_){_("line.shape"),_("line.hovertemplate");var k=_("line.color",T.colorway[0]);if(v(u,"line")&&m.isArrayOrTypedArray(k)){if(k.length)return _("line.colorscale"),b(u,x,T,_,{prefix:"line.",cLetter:"c"}),k.length;x.line.color=f}return 1/0}(t,d,a,i,s);h(d,i,s),Array.isArray(c)&&c.length||(d.visible=!1),r(d,c,"values",l),s("hoveron"),s("hovertemplate"),s("arrangement"),s("bundlecolors"),s("sortpaths"),s("counts");var p={family:i.font.family,size:Math.round(i.font.size),color:i.font.color};m.coerceFont(s,"labelfont",p);var g={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};m.coerceFont(s,"tickfont",g)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:y("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("d3-interpolate").interpolateNumber,b=y("../../plot_api/plot_api"),h=y("../../components/fx"),e=y("../../lib"),n=e.strTranslate,r=y("../../components/drawing"),o=y("tinycolor2"),t=y("../../lib/svg_text_utils");function d(j,B,H,ee){var U=j.map(X.bind(0,B,H)),$=ee.selectAll("g.parcatslayer").data([null]);$.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var q=$.selectAll("g.trace.parcats").data(U,a),te=q.enter().append("g").attr("class","trace parcats");q.attr("transform",function(xe){return n(xe.x,xe.y)}),te.append("g").attr("class","paths");var ne=q.select("g.paths").selectAll("path.path").data(function(xe){return xe.paths},a);ne.attr("fill",function(xe){return xe.model.color});var se=ne.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(xe){return xe.model.color}).attr("fill-opacity",0);x(se),ne.attr("d",function(xe){return xe.svgD}),se.empty()||ne.sort(s),ne.exit().remove(),ne.on("mouseover",c).on("mouseout",l).on("click",u),te.append("g").attr("class","dimensions");var ie=q.select("g.dimensions").selectAll("g.dimension").data(function(xe){return xe.dimensions},a);ie.enter().append("g").attr("class","dimension"),ie.attr("transform",function(xe){return n(xe.x,0)}),ie.exit().remove();var ue=ie.selectAll("g.category").data(function(xe){return xe.categories},a),le=ue.enter().append("g").attr("class","category");ue.attr("transform",function(xe){return n(0,xe.y)}),le.append("rect").attr("class","catrect").attr("pointer-events","none"),ue.select("rect.catrect").attr("fill","none").attr("width",function(xe){return xe.width}).attr("height",function(xe){return xe.height}),T(le);var de=ue.selectAll("rect.bandrect").data(function(xe){return xe.bands},a);de.each(function(){e.raiseToTop(this)}),de.attr("fill",function(xe){return xe.color});var be=de.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(xe){return xe.color}).attr("fill-opacity",0);de.attr("fill",function(xe){return xe.color}).attr("width",function(xe){return xe.width}).attr("height",function(xe){return xe.height}).attr("y",function(xe){return xe.y}).attr("cursor",function(xe){return"fixed"===xe.parcatsViewModel.arrangement?"default":"perpendicular"===xe.parcatsViewModel.arrangement?"ns-resize":"move"}),_(be),de.exit().remove(),le.append("text").attr("class","catlabel").attr("pointer-events","none");var _e=B._fullLayout.paper_bgcolor;ue.select("text.catlabel").attr("text-anchor",function(xe){return i(xe)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",t.makeTextShadow(_e)).style("fill","rgb(0, 0, 0)").attr("x",function(xe){return i(xe)?xe.width+5:-5}).attr("y",function(xe){return xe.height/2}).text(function(xe){return xe.model.categoryLabel}).each(function(xe){r.font(m.select(this),xe.parcatsViewModel.categorylabelfont),t.convertToTspans(m.select(this),B)}),le.append("text").attr("class","dimlabel"),ue.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(xe){return"fixed"===xe.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(xe){return xe.width/2}).attr("y",-5).text(function(xe,Ee){return 0===Ee?xe.parcatsViewModel.model.dimensions[xe.model.dimensionInd].dimensionLabel:null}).each(function(xe){r.font(m.select(this),xe.parcatsViewModel.labelfont)}),ue.selectAll("rect.bandrect").on("mouseover",O).on("mouseout",P),ue.exit().remove(),ie.call(m.behavior.drag().origin(function(xe){return{x:xe.x,y:0}}).on("dragstart",S).on("drag",E).on("dragend",D)),q.each(function(xe){xe.traceSelection=m.select(this),xe.pathSelection=m.select(this).selectAll("g.paths").selectAll("path.path"),xe.dimensionSelection=m.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),q.exit().remove()}function a(j){return j.key}function i(j){return j.model.dimensionInd===j.parcatsViewModel.dimensions[j.parcatsViewModel.dimensions.length-1].model.dimensionInd}function s(j,B){return j.model.rawColor>B.model.rawColor?1:j.model.rawColor<B.model.rawColor?-1:0}function c(j){if(!j.parcatsViewModel.dragDimension&&-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),f(m.select(this));var B=p(j),H=g(j);if(j.parcatsViewModel.graphDiv.emit("plotly_hover",{points:B,event:m.event,constraints:H}),-1===j.parcatsViewModel.hoverinfoItems.indexOf("none")){var ee,U,$,q=m.mouse(this)[0],te=j.parcatsViewModel.graphDiv,ne=j.parcatsViewModel.trace,se=te._fullLayout,ie=se._paperdiv.node().getBoundingClientRect(),ue=j.parcatsViewModel.graphDiv.getBoundingClientRect();for($=0;$<j.leftXs.length-1;$++)if(j.leftXs[$]+j.dimWidths[$]-2<=q&&q<=j.leftXs[$+1]+2){var le=j.parcatsViewModel.dimensions[$];ee=(le.x+le.width+j.parcatsViewModel.dimensions[$+1].x)/2,U=(j.topYs[$]+j.topYs[$+1]+j.height)/2;break}var be=j.parcatsViewModel.x+ee,_e=j.parcatsViewModel.y+U,xe=o.mostReadable(j.model.color,["black","white"]),Ee=j.model.count,he=Ee/j.parcatsViewModel.model.count,me={countLabel:Ee,probabilityLabel:he.toFixed(3)},Se=[];-1!==j.parcatsViewModel.hoverinfoItems.indexOf("count")&&Se.push(["Count:",me.countLabel].join(" ")),-1!==j.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Se.push(["P:",me.probabilityLabel].join(" "));var Me=Se.join("<br>"),Ie=m.mouse(te)[0];h.loneHover({trace:ne,x:be-ie.left+ue.left,y:_e-ie.top+ue.top,text:Me,color:j.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:xe,idealAlign:Ie<be?"right":"left",hovertemplate:(ne.line||{}).hovertemplate,hovertemplateLabels:me,eventData:[{data:ne._input,fullData:ne,count:Ee,probability:he}]},{container:se._hoverlayer.node(),outerContainer:se._paper.node(),gd:te})}}}function l(j){if(!j.parcatsViewModel.dragDimension&&(x(m.select(this)),h.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),j.parcatsViewModel.pathSelection.sort(s),-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var B=p(j),H=g(j);j.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:B,event:m.event,constraints:H})}}function p(j){for(var B=[],H=z(j.parcatsViewModel),ee=0;ee<j.model.valueInds.length;ee++)B.push({curveNumber:H,pointNumber:j.model.valueInds[ee]});return B}function g(j){for(var B={},H=j.parcatsViewModel.model.dimensions,ee=0;ee<H.length;ee++){var U=H[ee];B[U.containerInd]=U.categories[j.model.categoryInds[ee]].categoryValue}return void 0!==j.model.rawColor&&(B.color=j.model.rawColor),B}function u(j){if(-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){var B=p(j),H=g(j);j.parcatsViewModel.graphDiv.emit("plotly_click",{points:B,event:m.event,constraints:H})}}function x(j){j.attr("fill",function(B){return B.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function f(j){j.attr("fill-opacity",.8).attr("stroke",function(B){return o.mostReadable(B.model.color,["black","white"])}).attr("stroke-width",.3)}function T(j){j.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function _(j){j.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function k(j){var H=j.categoryViewModel.model.dimensionInd,ee=j.categoryViewModel.model.categoryInd;return j.parcatsViewModel.pathSelection.filter(function(U){return U.model.categoryInds[H]===ee&&U.model.color===j.color})}function w(j,B,H){var ee=m.select(j).datum(),U=ee.categoryViewModel.model,$=ee.parcatsViewModel.graphDiv,q=m.select(j.parentNode).selectAll("rect.bandrect"),te=[];q.each(function(se){k(se).each(function(ie){Array.prototype.push.apply(te,p(ie))})});var ne={};ne[U.dimensionInd]=U.categoryValue,$.emit(B,{points:te,event:H,constraints:ne})}function C(j,B,H){var ee=m.select(j).datum(),U=ee.categoryViewModel.model,$=ee.parcatsViewModel.graphDiv,q=k(ee),te=[];q.each(function(se){Array.prototype.push.apply(te,p(se))});var ne={};ne[U.dimensionInd]=U.categoryValue,void 0!==ee.rawColor&&(ne.color=ee.rawColor),$.emit(B,{points:te,event:H,constraints:ne})}function A(j,B,H){j._fullLayout._calcInverseTransform(j);var ee,U,$=j._fullLayout._invScaleX,q=j._fullLayout._invScaleY,te=m.select(H.parentNode).select("rect.catrect"),ne=te.node().getBoundingClientRect(),se=te.datum(),ie=se.parcatsViewModel,le=ie.trace,de=ne.top+ne.height/2;ie.dimensions.length>1&&ie.model.dimensions[se.model.dimensionInd].displayInd===ie.dimensions.length-1?(ee=ne.left,U="left"):(ee=ne.left+ne.width,U="right");var be=se.model.count,_e=se.model.categoryLabel,xe=be/se.parcatsViewModel.model.count,Ee={countLabel:be,categoryLabel:_e,probabilityLabel:xe.toFixed(3)},he=[];-1!==se.parcatsViewModel.hoverinfoItems.indexOf("count")&&he.push(["Count:",Ee.countLabel].join(" ")),-1!==se.parcatsViewModel.hoverinfoItems.indexOf("probability")&&he.push(["P("+Ee.categoryLabel+"):",Ee.probabilityLabel].join(" "));var me=he.join("<br>");return{trace:le,x:$*(ee-B.left),y:q*(de-B.top),text:me,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:U,hovertemplate:le.hovertemplate,hovertemplateLabels:Ee,eventData:[{data:le._input,fullData:le,count:be,category:_e,probability:xe}]}}function O(j){if(!j.parcatsViewModel.dragDimension&&-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(m.mouse(this)[1]<-1)return;var B,H=j.parcatsViewModel.graphDiv,ee=H._fullLayout,U=ee._paperdiv.node().getBoundingClientRect(),$=j.parcatsViewModel.hoveron;"color"===$?(f(ne=k(te=m.select(this).datum())),ne.each(function(){e.raiseToTop(this)}),m.select(this.parentNode).selectAll("rect.bandrect").filter(function(se){return se.color===te.color}).each(function(){e.raiseToTop(this),m.select(this).attr("stroke","black").attr("stroke-width",1.5)}),C(this,"plotly_hover",m.event)):(function(q){m.select(q.parentNode).selectAll("rect.bandrect").each(function(te){var ne=k(te);f(ne),ne.each(function(){e.raiseToTop(this)})}),m.select(q.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),w(this,"plotly_hover",m.event)),-1===j.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===$?B=A(H,U,this):"color"===$?B=function(q,te,ne){q._fullLayout._calcInverseTransform(q);var se,ie,ue=q._fullLayout._invScaleX,le=q._fullLayout._invScaleY,de=ne.getBoundingClientRect(),be=m.select(ne).datum(),_e=be.categoryViewModel,xe=_e.parcatsViewModel,he=xe.trace,me=de.y+de.height/2;xe.dimensions.length>1&&xe.model.dimensions[_e.model.dimensionInd].displayInd===xe.dimensions.length-1?(se=de.left,ie="left"):(se=de.left+de.width,ie="right");var Se=_e.model.categoryLabel,Me=be.parcatsViewModel.model.count,Ie=0;be.categoryViewModel.bands.forEach(function(ut){ut.color===be.color&&(Ie+=ut.count)});var Fe=_e.model.count,Ne=0;xe.pathSelection.each(function(ut){ut.model.color===be.color&&(Ne+=ut.model.count)});var De=Ie/Me,$e=Ie/Ne,Re=Ie/Fe,ze={countLabel:Me,categoryLabel:Se,probabilityLabel:De.toFixed(3)},Ue=[];-1!==_e.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ue.push(["Count:",ze.countLabel].join(" ")),-1!==_e.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Ue.push("P(color \u2229 "+Se+"): "+ze.probabilityLabel),Ue.push("P("+Se+" | color): "+$e.toFixed(3)),Ue.push("P(color | "+Se+"): "+Re.toFixed(3)));var je=Ue.join("<br>"),rt=o.mostReadable(be.color,["black","white"]);return{trace:he,x:ue*(se-te.left),y:le*(me-te.top),text:je,color:be.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:rt,fontSize:10,idealAlign:ie,hovertemplate:he.hovertemplate,hovertemplateLabels:ze,eventData:[{data:he._input,fullData:he,category:Se,count:Me,probability:De,categorycount:Fe,colorcount:Ne,bandcolorcount:Ie}]}}(H,U,this):"dimension"===$&&(B=function(q,te,ne){var se=[];return m.select(ne.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){se.push(A(q,te,this))}),se}(H,U,this)),B&&h.loneHover(B,{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:H}))}var te,ne}function P(j){var B=j.parcatsViewModel;!B.dragDimension&&(x(B.pathSelection),T(B.dimensionSelection.selectAll("g.category")),_(B.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),h.loneUnhover(B.graphDiv._fullLayout._hoverlayer.node()),B.pathSelection.sort(s),-1===B.hoverinfoItems.indexOf("skip"))&&("color"===j.parcatsViewModel.hoveron?C(this,"plotly_unhover",m.event):w(this,"plotly_unhover",m.event))}function S(j){"fixed"!==j.parcatsViewModel.arrangement&&(j.dragDimensionDisplayInd=j.model.displayInd,j.initialDragDimensionDisplayInds=j.parcatsViewModel.model.dimensions.map(function(B){return B.displayInd}),j.dragHasMoved=!1,j.dragCategoryDisplayInd=null,m.select(this).selectAll("g.category").select("rect.catrect").each(function(B){var H=m.mouse(this)[0],ee=m.mouse(this)[1];-2<=H&&H<=B.width+2&&-2<=ee&&ee<=B.height+2&&(j.dragCategoryDisplayInd=B.model.displayInd,j.initialDragCategoryDisplayInds=j.model.categories.map(function(U){return U.displayInd}),B.model.dragY=B.y,e.raiseToTop(this.parentNode),m.select(this.parentNode).selectAll("rect.bandrect").each(function(U){U.y<ee&&ee<=U.y+U.height&&(j.potentialClickBand=this)}))}),j.parcatsViewModel.dragDimension=j,h.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function E(j){if("fixed"!==j.parcatsViewModel.arrangement&&(j.dragHasMoved=!0,null!==j.dragDimensionDisplayInd)){var B=j.dragDimensionDisplayInd,H=B-1,ee=B+1,U=j.parcatsViewModel.dimensions[B];if(null!==j.dragCategoryDisplayInd){var $=U.categories[j.dragCategoryDisplayInd];$.model.dragY+=m.event.dy;var q=$.model.dragY,te=$.model.displayInd,ne=U.categories,se=ne[te-1],ie=ne[te+1];void 0!==se&&q<se.y+se.height/2&&($.model.displayInd=se.model.displayInd,se.model.displayInd=te),void 0!==ie&&q+$.height>ie.y+ie.height/2&&($.model.displayInd=ie.model.displayInd,ie.model.displayInd=te),j.dragCategoryDisplayInd=$.model.displayInd}if(null===j.dragCategoryDisplayInd||"freeform"===j.parcatsViewModel.arrangement){U.model.dragX=m.event.x;var ue=j.parcatsViewModel.dimensions[H],le=j.parcatsViewModel.dimensions[ee];void 0!==ue&&U.model.dragX<ue.x+ue.width&&(U.model.displayInd=ue.model.displayInd,ue.model.displayInd=B),void 0!==le&&U.model.dragX+U.width>le.x&&(U.model.displayInd=le.model.displayInd,le.model.displayInd=j.dragDimensionDisplayInd),j.dragDimensionDisplayInd=U.model.displayInd}Z(j.parcatsViewModel),G(j.parcatsViewModel),V(j.parcatsViewModel),N(j.parcatsViewModel)}}function D(j){if("fixed"!==j.parcatsViewModel.arrangement&&null!==j.dragDimensionDisplayInd){m.select(this).selectAll("text").attr("font-weight","normal");var B={},H=z(j.parcatsViewModel),ee=j.parcatsViewModel.model.dimensions.map(function(ie){return ie.displayInd}),U=j.initialDragDimensionDisplayInds.some(function(ie,ue){return ie!==ee[ue]});U&&ee.forEach(function(ie,ue){B["dimensions["+j.parcatsViewModel.model.dimensions[ue].containerInd+"].displayindex"]=ie});var $=!1;if(null!==j.dragCategoryDisplayInd){var q=j.model.categories.map(function(ie){return ie.displayInd});if($=j.initialDragCategoryDisplayInds.some(function(ie,ue){return ie!==q[ue]})){var te=j.model.categories.slice().sort(function(ie,ue){return ie.displayInd-ue.displayInd}),ne=te.map(function(ie){return ie.categoryValue}),se=te.map(function(ie){return ie.categoryLabel});B["dimensions["+j.model.containerInd+"].categoryarray"]=[ne],B["dimensions["+j.model.containerInd+"].ticktext"]=[se],B["dimensions["+j.model.containerInd+"].categoryorder"]="array"}}-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!j.dragHasMoved&&j.potentialClickBand&&("color"===j.parcatsViewModel.hoveron?C(j.potentialClickBand,"plotly_click",m.event.sourceEvent):w(j.potentialClickBand,"plotly_click",m.event.sourceEvent)),j.model.dragX=null,null!==j.dragCategoryDisplayInd&&(j.parcatsViewModel.dimensions[j.dragDimensionDisplayInd].categories[j.dragCategoryDisplayInd].model.dragY=null,j.dragCategoryDisplayInd=null),j.dragDimensionDisplayInd=null,j.parcatsViewModel.dragDimension=null,j.dragHasMoved=null,j.potentialClickBand=null,Z(j.parcatsViewModel),G(j.parcatsViewModel),m.transition().duration(300).ease("cubic-in-out").each(function(){V(j.parcatsViewModel,!0),N(j.parcatsViewModel,!0)}).each("end",function(){(U||$)&&b.restyle(j.parcatsViewModel.graphDiv,B,[H])})}}function z(j){for(var B,H=j.graphDiv._fullData,ee=0;ee<H.length;ee++)if(j.key===H[ee].uid){B=ee;break}return B}function N(j,B){var H;void 0===B&&(B=!1),j.pathSelection.data(function(ee){return ee.paths},a),(H=j.pathSelection,B?H.transition():H).attr("d",function(ee){return ee.svgD})}function V(j,B){function H(q){return B?q.transition():q}void 0===B&&(B=!1),j.dimensionSelection.data(function(q){return q.dimensions},a);var ee=j.dimensionSelection.selectAll("g.category").data(function(q){return q.categories},a);H(j.dimensionSelection).attr("transform",function(q){return n(q.x,0)}),H(ee).attr("transform",function(q){return n(0,q.y)}),ee.select(".dimlabel").text(function(q,te){return 0===te?q.parcatsViewModel.model.dimensions[q.model.dimensionInd].dimensionLabel:null}),ee.select(".catlabel").attr("text-anchor",function(q){return i(q)?"start":"end"}).attr("x",function(q){return i(q)?q.width+5:-5}).each(function(q){var te,ne;i(q)?(te=q.width+5,ne="start"):(te=-5,ne="end"),m.select(this).selectAll("tspan").attr("x",te).attr("text-anchor",ne)});var U=ee.selectAll("rect.bandrect").data(function(q){return q.bands},a),$=U.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(q){return q.color}).attr("fill-opacity",0);U.attr("fill",function(q){return q.color}).attr("width",function(q){return q.width}).attr("height",function(q){return q.height}).attr("y",function(q){return q.y}),_($),U.each(function(){e.raiseToTop(this)}),U.exit().remove()}function X(j,B,H){var ee,U=H[0],$=B.margin||{l:80,r:80,t:100,b:80},q=U.trace,te=q.domain,ne=B.width,se=B.height,ie=Math.floor(ne*(te.x[1]-te.x[0])),ue=Math.floor(se*(te.y[1]-te.y[0])),le=te.x[0]*ne+$.l,de=B.height-te.y[1]*B.height+$.t,be=q.line.shape;ee="all"===q.hoverinfo?["count","probability"]:(q.hoverinfo||"").split("+");var _e={trace:q,key:q.uid,model:U,x:le,y:de,width:ie,height:ue,hoveron:q.hoveron,hoverinfoItems:ee,arrangement:q.arrangement,bundlecolors:q.bundlecolors,sortpaths:q.sortpaths,labelfont:q.labelfont,categorylabelfont:q.tickfont,pathShape:be,dragDimension:null,margin:$,paths:[],dimensions:[],graphDiv:j,traceSelection:null,pathSelection:null,dimensionSelection:null};return U.dimensions&&(Z(_e),G(_e)),_e}function J(j,B,H,ee,U){var $,q,te=[],ne=[];for(q=0;q<H.length-1;q++)$=v(H[q]+j[q],j[q+1]),te.push($(U)),ne.push($(1-U));var se="M "+j[0]+","+B[0];for(se+="l"+H[0]+",0 ",q=1;q<H.length;q++)se+="C"+te[q-1]+","+B[q-1]+" "+ne[q-1]+","+B[q]+" "+j[q]+","+B[q],se+="l"+H[q]+",0 ";for(se+="l0,"+ee+" ",se+="l -"+H[H.length-1]+",0 ",q=H.length-2;q>=0;q--)se+="C"+ne[q]+","+(B[q+1]+ee)+" "+te[q]+","+(B[q]+ee)+" "+(j[q]+H[q])+","+(B[q]+ee),se+="l-"+H[q]+",0 ";return se+"Z"}function G(j){var B=j.dimensions,H=j.model,ee=B.map(function(Ue){return Ue.categories.map(function(je){return je.y})}),U=j.model.dimensions.map(function(Ue){return Ue.categories.map(function(je){return je.displayInd})}),$=j.model.dimensions.map(function(Ue){return Ue.displayInd}),q=j.dimensions.map(function(Ue){return Ue.model.dimensionInd}),te=B.map(function(Ue){return Ue.x}),ne=B.map(function(Ue){return Ue.width}),se=[];for(var ie in H.paths)H.paths.hasOwnProperty(ie)&&se.push(H.paths[ie]);function ue(Ue){var je=Ue.categoryInds.map(function(rt,ut){return U[ut][rt]});return q.map(function(rt){return je[rt]})}se.sort(function(Ue,je){var rt=ue(Ue),ut=ue(je);return"backward"===j.sortpaths&&(rt.reverse(),ut.reverse()),rt.push(Ue.valueInds[0]),ut.push(je.valueInds[0]),j.bundlecolors&&(rt.unshift(Ue.rawColor),ut.unshift(je.rawColor)),rt<ut?-1:rt>ut?1:0});for(var le=new Array(se.length),de=B[0].model.count,be=B[0].categories.map(function(Ue){return Ue.height}).reduce(function(Ue,je){return Ue+je}),_e=0;_e<se.length;_e++){var xe,Ee=se[_e];xe=de>0?be*(Ee.count/de):0;for(var he,me=new Array(ee.length),Se=0;Se<Ee.categoryInds.length;Se++){var Ie=U[Se][Ee.categoryInds[Se]],Fe=$[Se];me[Fe]=ee[Fe][Ie],ee[Fe][Ie]+=xe;var Ne=j.dimensions[Fe].categories[Ie],De=Ne.bands.length,$e=Ne.bands[De-1];if(void 0===$e||Ee.rawColor!==$e.rawColor){var Re=void 0===$e?0:$e.y+$e.height;Ne.bands.push({key:Re,color:Ee.color,rawColor:Ee.rawColor,height:xe,width:Ne.width,count:Ee.count,y:Re,categoryViewModel:Ne,parcatsViewModel:j})}else{var ze=Ne.bands[De-1];ze.height+=xe,ze.count+=Ee.count}}he=J(te,me,ne,xe,"hspline"===j.pathShape?.5:0),le[_e]={key:Ee.valueInds[0],model:Ee,height:xe,leftXs:te,topYs:me,dimWidths:ne,svgD:he,parcatsViewModel:j}}j.paths=le}function Z(j){var B=j.model.dimensions.map(function(q){return{displayInd:q.displayInd,dimensionInd:q.dimensionInd}});B.sort(function(q,te){return q.displayInd-te.displayInd});var H=[];for(var ee in B)H.push(re(j,j.model.dimensions[B[ee].dimensionInd]));j.dimensions=H}function re(j,B){var H,ee=j.model.dimensions.length;H=40+(ee>1?(j.width-80-16)/(ee-1):0)*B.displayInd;var $,q,te,se,ie=[],ue=j.model.maxCats,le=B.categories.length,de=B.count,be=j.height-8*(ue-1),_e=8*(ue-le)/2,xe=B.categories.map(function(Ee){return{displayInd:Ee.displayInd,categoryInd:Ee.categoryInd}});for(xe.sort(function(Ee,he){return Ee.displayInd-he.displayInd}),se=0;se<le;se++)te={key:(q=B.categories[xe[se].categoryInd]).valueInds[0],model:q,width:16,height:$=de>0?q.count/de*be:0,y:null!==q.dragY?q.dragY:_e,bands:[],parcatsViewModel:j},_e=_e+$+8,ie.push(te);return{key:B.dimensionInd,x:null!==B.dragX?B.dragX:H,y:0,width:16,model:B,categories:ie,parcatsViewModel:j,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}Q.exports=function(j,B,H,ee){d(H,j,ee,B)}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(y,Q,K){"use strict";var m=y("./parcats");Q.exports=function(v,b,h,e){var n=v._fullLayout,o=n._size;m(v,n._paper,b,{width:o.w,height:o.h,margin:{t:o.t,r:o.r,b:o.b,l:o.l}},h,e)}},{"./parcats":895}],897:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/attributes"),v=y("../../plots/cartesian/layout_attributes"),b=y("../../plots/font_attributes"),h=y("../../plots/domain").attributes,e=y("../../lib/extend").extendFlat,n=y("../../plot_api/plot_template").templatedArray;Q.exports={domain:h({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:b({editType:"plot"}),tickfont:b({editType:"plot"}),rangefont:b({editType:"plot"}),dimensions:n("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},v.tickvals,{editType:"plot"}),ticktext:e({},v.ticktext,{editType:"plot"}),tickformat:e({},v.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},m("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(y,Q,K){"use strict";var m=y("./constants"),v=y("@plotly/d3"),b=y("../../lib/gup").keyFun,h=y("../../lib/gup").repeat,e=y("../../lib").sorterAsc,n=y("../../lib").strTranslate,r=m.bar.snapRatio;function o(A,O){return A*(1-r)+O*r}var t=m.bar.snapClose;function d(A,O){return A*(1-t)+O*t}function a(A,O,P,S){if(function(re,j){for(var B=0;B<j.length;B++)if(re>=j[B][0]&&re<=j[B][1])return!0;return!1}(P,S))return P;var E=A?-1:1,D=0,z=O.length-1;if(E<0){var N=D;D=z,z=N}for(var V=O[D],X=V,J=D;E*J<E*z;J+=E){var G=J+E,Z=O[G];if(E*P<E*d(V,Z))return o(V,X);if(E*P<E*Z||G===z)return o(Z,V);X=V,V=Z}}function i(A){A.attr("x",-m.bar.captureWidth/2).attr("width",m.bar.captureWidth)}function s(A){A.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(A){if(!A.brush.filterSpecified)return"0,"+A.height;for(var O,P,S,E=l(A.brush.filter.getConsolidated(),A.height),D=[0],z=E.length?E[0][0]:null,N=0;N<E.length;N++)P=(O=E[N])[1]-O[0],D.push(z),D.push(P),(S=N+1)<E.length&&(z=E[S][0]-O[1]);return D.push(A.height),D}function l(A,O){return A.map(function(P){return P.map(function(S){return Math.max(0,S*O)}).sort(e)})}function p(){v.select(document.body).style("cursor",null)}function g(A){A.attr("stroke-dasharray",c)}function u(A,O){var P=v.select(A).selectAll(".highlight, .highlight-shadow");g(O?P.transition().duration(m.bar.snapDuration).each("end",O):P)}function x(A,O){var P,S=A.brush,E=NaN,D={};if(S.filterSpecified){var z=A.height,N=S.filter.getConsolidated(),V=l(N,z),X=NaN,J=NaN,G=NaN;for(P=0;P<=V.length;P++){var Z=V[P];if(Z&&Z[0]<=O&&O<=Z[1]){X=P;break}if(J=P?P-1:NaN,Z&&Z[0]>O){G=P;break}}if(E=X,isNaN(E)&&(E=isNaN(J)||isNaN(G)?isNaN(J)?G:J:O-V[J][1]<V[G][0]-O?J:G),!isNaN(E)){var re=V[E],j=function(U,$){var q=m.bar.handleHeight;if(!($>U[1]+q||$<U[0]-q))return $>=.9*U[1]+.1*U[0]?"n":$<=.9*U[0]+.1*U[1]?"s":"ns"}(re,O);j&&(D.interval=N[E],D.intervalPix=re,D.region=j)}}if(A.ordinal&&!D.region){var B=A.unitTickvals,H=A.unitToPaddedPx.invert(O);for(P=0;P<B.length;P++){var ee=[.25*B[Math.max(P-1,0)]+.75*B[P],.25*B[Math.min(P+1,B.length-1)]+.75*B[P]];if(H>=ee[0]&&H<=ee[1]){D.clickableOrdinalRange=ee;break}}}return D}function f(A,O){v.event.sourceEvent.stopPropagation();var P=O.height-v.mouse(A)[1]-2*m.verticalPadding,S=O.brush.svgBrush;S.wasDragged=!0,S._dragging=!0,S.newExtent=S.grabbingBar?[P-S.grabPoint,P+S.barLength-S.grabPoint].map(O.unitToPaddedPx.invert):[S.startExtent,O.unitToPaddedPx.invert(P)].sort(e),O.brush.filterSpecified=!0,S.extent=S.stayingIntervals.concat([S.newExtent]),S.brushCallback(O),u(A.parentNode)}function T(A,O){var P=x(O,O.height-v.mouse(A)[1]-2*m.verticalPadding),S="crosshair";P.clickableOrdinalRange?S="pointer":P.region&&(S=P.region+"-resize"),v.select(document.body).style("cursor",S)}function _(A){A.on("mousemove",function(O){v.event.preventDefault(),O.parent.inBrushDrag||T(this,O)}).on("mouseleave",function(O){O.parent.inBrushDrag||p()}).call(v.behavior.drag().on("dragstart",function(O){!function(P,S){v.event.sourceEvent.stopPropagation();var E=S.height-v.mouse(P)[1]-2*m.verticalPadding,D=S.unitToPaddedPx.invert(E),z=S.brush,N=x(S,E),V=N.interval,X=z.svgBrush;if(X.wasDragged=!1,X.grabbingBar="ns"===N.region,X.grabbingBar){var J=V.map(S.unitToPaddedPx);X.grabPoint=E-J[0]-m.verticalPadding,X.barLength=J[1]-J[0]}X.clickableOrdinalRange=N.clickableOrdinalRange,X.stayingIntervals=S.multiselect&&z.filterSpecified?z.filter.getConsolidated():[],V&&(X.stayingIntervals=X.stayingIntervals.filter(function(G){return G[0]!==V[0]&&G[1]!==V[1]})),X.startExtent=N.region?V["s"===N.region?1:0]:D,S.parent.inBrushDrag=!0,X.brushStartCallback()}(this,O)}).on("drag",function(O){f(this,O)}).on("dragend",function(O){!function(P,S){var E=S.brush,D=E.filter,z=E.svgBrush;z._dragging||(T(P,S),f(P,S),S.brush.svgBrush.wasDragged=!1),z._dragging=!1,v.event.sourceEvent.stopPropagation();var N=z.grabbingBar;if(z.grabbingBar=!1,z.grabLocation=void 0,S.parent.inBrushDrag=!1,p(),!z.wasDragged)return z.wasDragged=void 0,z.clickableOrdinalRange?E.filterSpecified&&S.multiselect?z.extent.push(z.clickableOrdinalRange):(z.extent=[z.clickableOrdinalRange],E.filterSpecified=!0):N?(z.extent=z.stayingIntervals,0===z.extent.length&&w(E)):w(E),z.brushCallback(S),u(P.parentNode),void z.brushEndCallback(E.filterSpecified?D.getConsolidated():[]);var V=function(){D.set(D.getConsolidated())};if(S.ordinal){var X=S.unitTickvals;X[X.length-1]<X[0]&&X.reverse(),z.newExtent=[a(0,X,z.newExtent[0],z.stayingIntervals),a(1,X,z.newExtent[1],z.stayingIntervals)];var J=z.newExtent[1]>z.newExtent[0];z.extent=z.stayingIntervals.concat(J?[z.newExtent]:[]),z.extent.length||w(E),z.brushCallback(S),J?u(P.parentNode,V):(V(),u(P.parentNode))}else V();z.brushEndCallback(E.filterSpecified?D.getConsolidated():[])}(this,O)}))}function k(A,O){return A[0]-O[0]}function w(A){A.filterSpecified=!1,A.svgBrush.extent=[[-1/0,1/0]]}function C(A){for(var O,P=A.slice(),S=[],E=P.shift();E;){for(O=E.slice();(E=P.shift())&&E[0]<=O[1];)O[1]=Math.max(O[1],E[1]);S.push(O)}return 1===S.length&&S[0][0]>S[0][1]&&(S=[]),S}Q.exports={makeBrush:function(A,O,P,S,E,D){var z,V,X,J,N=(J=[],{set:function(G){1===(J=G.map(function(Z){return Z.slice().sort(e)}).sort(k)).length&&J[0][0]===-1/0&&J[0][1]===1/0&&(J=[[0,-1]]),V=C(J),X=J.reduce(function(Z,re){return[Math.min(Z[0],re[0]),Math.max(Z[1],re[1])]},[1/0,-1/0])},get:function(){return J.slice()},getConsolidated:function(){return V},getBounds:function(){return X}});return N.set(P),{filter:N,filterSpecified:O,svgBrush:{extent:[],brushStartCallback:S,brushCallback:(z=E,function(V){var G,X=V.brush,J=(G=X,G.svgBrush.extent.map(function(Z){return Z.slice()})).slice();X.filter.set(J),z()}),brushEndCallback:D}}},ensureAxisBrush:function(A,O){var P=A.selectAll("."+m.cn.axisBrush).data(h,b);P.enter().append("g").classed(m.cn.axisBrush,!0),function(S,E){var D=S.selectAll(".background").data(h);D.enter().append("rect").classed("background",!0).call(i).call(s).style("pointer-events","auto").attr("transform",n(0,m.verticalPadding)),D.call(_).attr("height",function(V){return V.height-m.verticalPadding});var z=S.selectAll(".highlight-shadow").data(h);z.enter().append("line").classed("highlight-shadow",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width+m.bar.strokeWidth).attr("stroke",E).attr("opacity",m.bar.strokeOpacity).attr("stroke-linecap","butt"),z.attr("y1",function(V){return V.height}).call(g);var N=S.selectAll(".highlight").data(h);N.enter().append("line").classed("highlight",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width-m.bar.strokeWidth).attr("stroke",m.bar.fillColor).attr("opacity",m.bar.fillOpacity).attr("stroke-linecap","butt"),N.attr("y1",function(V){return V.height}).call(g)}(P,O)},cleanRanges:function(A,O){if(Array.isArray(A[0])?(A=A.map(function(S){return S.sort(e)}),A=O.multiselect?C(A.sort(k)):[A[0]]):A=[A.sort(e)],O.tickvals){var P=O.tickvals.slice().sort(e);if(!(A=A.map(function(S){var E=[a(0,P,S[0],[]),a(1,P,S[1],[])];if(E[1]>E[0])return E}).filter(function(S){return S})).length)return}return A.length>1?A:A[0]}}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:y("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../plots/get_data").getModuleCalcData,b=y("./plot"),h=y("../../constants/xmlns_namespaces");K.name="parcoords",K.plot=function(e){var n=v(e.calcdata,"parcoords")[0];n.length&&b(e,n)},K.clean=function(e,n,r,o){var t=o._has&&o._has("parcoords"),d=n._has&&n._has("parcoords");t&&!d&&(o._paperdiv.selectAll(".parcoords").remove(),o._glimages.selectAll("*").remove())},K.toSVG=function(e){var n=e._fullLayout._glimages,r=m.select(e).selectAll(".svg-container");r.filter(function(o,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var o=this.toDataURL("image/png");n.append("svg:image").attr({xmlns:h.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){m.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(y,Q,K){"use strict";var m=y("../../lib").isArrayOrTypedArray,v=y("../../components/colorscale"),b=y("../../lib/gup").wrap;Q.exports=function(h,e){var n,r;return v.hasColorscale(e,"line")&&m(e.line.color)?(n=e.line.color,r=v.extractOpts(e.line).colorscale,v.calc(h,e,{vals:n,containerStr:"line",cLetter:"c"})):(n=function(o){for(var t=new Array(o),d=0;d<o;d++)t[d]=.5;return t}(e._length),r=[[0,e.line.color],[1,e.line.color]]),b({lineColor:n,cscale:r})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(y,Q,K){"use strict";Q.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults"),h=y("../../plots/domain").defaults,e=y("../../plots/array_container_defaults"),n=y("../../plots/cartesian/axes"),r=y("./attributes"),o=y("./axisbrush"),t=y("./constants").maxDimensionCount,d=y("./merge_length");function a(i,s,c,l){function p(T,_){return m.coerce(i,s,r.dimensions,T,_)}var g=p("values"),u=p("visible");if(g&&g.length||(u=s.visible=!1),u){p("label"),p("tickvals"),p("ticktext"),p("tickformat");var x=p("range");s._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:x},n.setConvert(s._ax,l.layout),p("multiselect");var f=p("constraintrange");f&&(s.constraintrange=o.cleanRanges(f,s))}}Q.exports=function(i,s,c,l){function p(T,_){return m.coerce(i,s,r,T,_)}var g=i.dimensions;Array.isArray(g)&&g.length>t&&(m.log("parcoords traces support up to "+t+" dimensions at the moment"),g.splice(t));var u=e(i,s,{name:"dimensions",layout:l,handleItemDefaults:a}),x=function(T,_,k,w,C){var A=C("line.color",k);if(v(T,"line")&&m.isArrayOrTypedArray(A)){if(A.length)return C("line.colorscale"),b(T,_,w,C,{prefix:"line.",cLetter:"c"}),A.length;_.line.color=k}return 1/0}(i,s,c,l,p);h(s,l,p),Array.isArray(u)&&u.length||(s.visible=!1),d(s,u,"values",x);var f={family:l.font.family,size:Math.round(l.font.size/1.2),color:l.font.color};m.coerceFont(p,"labelfont",f),m.coerceFont(p,"tickfont",f),m.coerceFont(p,"rangefont",f),p("labelangle"),p("labelside"),p("unselected.line.color"),p("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(y,Q,K){"use strict";var m=y("../../lib").isTypedArray;K.convertTypedArray=function(v){return m(v)?Array.prototype.slice.call(v):v},K.isOrdinal=function(v){return!!v.tickvals},K.isVisible=function(v){return v.visible||!("visible"in v)}},{"../../lib":515}],905:[function(y,Q,K){"use strict";var m=y("./base_index");m.plot=y("./plot"),Q.exports=m},{"./base_index":899,"./plot":909}],906:[function(y,Q,K){"use strict";var m=y("glslify"),v=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),b=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),h=y("./constants").maxDimensionCount,e=y("../../lib"),n=new Uint8Array(4),r=new Uint8Array(4),o={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function t(u,x,f,T,_){var k=u._gl;k.enable(k.SCISSOR_TEST),k.scissor(x,f,T,_),u.clear({color:[0,0,0,0],depth:1})}function d(u,x,f,T,_,k){var w=k.key;f.drawCompleted||(u.read({x:0,y:0,width:1,height:1,data:n}),f.drawCompleted=!0),function C(A){var O=Math.min(T,_-A*T);0===A&&(window.cancelAnimationFrame(f.currentRafs[w]),delete f.currentRafs[w],t(u,k.scissorX,k.scissorY,k.scissorWidth,k.viewBoxSize[1])),f.clearOnly||(k.count=2*O,k.offset=2*A*T,x(k),A*T+O<_&&(f.currentRafs[w]=window.requestAnimationFrame(function(){C(A+1)})),f.drawCompleted=!1)}(0)}function a(u,x){for(var f=new Array(256),T=0;T<256;T++)f[T]=u(T/255).concat(x);return f}function i(u,x){return(u>>>8*x)%256/255}function s(u,x,f){for(var T=new Array(8*x),_=0,k=0;k<x;k++)for(var w=0;w<2;w++)for(var C=0;C<4;C++){var A=4*u+C,O=f[64*k+A];63===A&&0===w&&(O*=-1),T[_++]=O}return T}function c(u){var x="0"+u;return x.substr(x.length-2)}function l(u){return u<h?"p"+c(u+1)+"_"+c(u+4):"colors"}function p(u,x,f,T,_,k,w,C,A,O,P,S,E,D){for(var z=[[],[]],N=0;N<64;N++)z[0][N]=N===_?1:0,z[1][N]=N===k?1:0;var V=u.lines.canvasOverdrag*D,X=u.domain,J=u.canvasWidth*D,G=u.canvasHeight*D,Z=u.pad.l*D,re=u.pad.b*D,j=u.layoutHeight*D,B=u.layoutWidth*D,H=u.deselectedLines.color,ee=u.deselectedLines.opacity;return e.extendFlat({key:P,resolution:[J,G],viewBoxPos:[(w*=D)+V,C*=D],viewBoxSize:[A*=D,O*=D],i0:_,i1:k,dim0A:z[0].slice(0,16),dim0B:z[0].slice(16,32),dim0C:z[0].slice(32,48),dim0D:z[0].slice(48,64),dim1A:z[1].slice(0,16),dim1B:z[1].slice(16,32),dim1C:z[1].slice(32,48),dim1D:z[1].slice(48,64),drwLayer:S,contextColor:[H[0]/255,H[1]/255,H[2]/255,"auto"!==ee?H[3]*ee:Math.max(1/255,Math.pow(1/u.lines.color.length,1/3))],scissorX:(T===x?0:w+V)+(Z-V)+B*X.x[0],scissorWidth:(T===f?J-w+V:A+.5)+(T===x?w+V:0),scissorY:C+re+j*X.y[0],scissorHeight:O,viewportX:Z-V+B*X.x[0],viewportY:re+j*X.y[0],viewportWidth:J,viewportHeight:G},E)}function g(u){var x=Math.max(0,Math.floor(2047*u[0]),0),f=Math.min(2047,Math.ceil(2047*u[1]),2047);return[Math.min(x,f),Math.max(x,f)]}Q.exports=function(u,x){var f,_,k,w,C=x.context,A=x.pick,O=x.regl,P=O._gl,S=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),E=Math.max(S[0],Math.min(S[1],x.viewModel.plotGlPixelRatio)),D={currentRafs:{},drawCompleted:!0,clearOnly:!1},z=function(G){for(var Z={},re=0;re<=h;re+=4)Z[l(re)]=G.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return Z}(O),N=O.texture(o),V=[];J(x);var X=O({profile:!1,blend:{enable:C,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!C,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:O.prop("scissorX"),y:O.prop("scissorY"),width:O.prop("scissorWidth"),height:O.prop("scissorHeight")}},viewport:{x:O.prop("viewportX"),y:O.prop("viewportY"),width:O.prop("viewportWidth"),height:O.prop("viewportHeight")},dither:!1,vert:v,frag:b,primitive:"lines",lineWidth:E,attributes:z,uniforms:{resolution:O.prop("resolution"),viewBoxPos:O.prop("viewBoxPos"),viewBoxSize:O.prop("viewBoxSize"),dim0A:O.prop("dim0A"),dim1A:O.prop("dim1A"),dim0B:O.prop("dim0B"),dim1B:O.prop("dim1B"),dim0C:O.prop("dim0C"),dim1C:O.prop("dim1C"),dim0D:O.prop("dim0D"),dim1D:O.prop("dim1D"),loA:O.prop("loA"),hiA:O.prop("hiA"),loB:O.prop("loB"),hiB:O.prop("hiB"),loC:O.prop("loC"),hiC:O.prop("hiC"),loD:O.prop("loD"),hiD:O.prop("hiD"),palette:N,contextColor:O.prop("contextColor"),maskTexture:O.prop("maskTexture"),drwLayer:O.prop("drwLayer"),maskHeight:O.prop("maskHeight")},offset:O.prop("offset"),count:O.prop("count")});function J(G){f=G.model,_=G.viewModel.dimensions.slice(),k=_[0]?_[0].values.length:0;var Z=f.lines,re=A?Z.color.map(function(B,H){return H/Z.color.length}):Z.color,j=function(B,H,ee){for(var $=new Array(B*(h+4)),q=0,te=0;te<B;te++){for(var ne=0;ne<h;ne++)$[q++]=ne<H.length?H[ne].paddedUnitValues[te]:.5;$[q++]=i(te,2),$[q++]=i(te,1),$[q++]=i(te,0),$[q++]=Math.max(1e-6,Math.min(.999999,ee[te]))}return $}(k,_,re);(function(B,H,ee){for(var U=0;U<=h;U+=4)B[l(U)](s(U/4,H,ee))})(z,k,j),C||A||(N=O.texture(e.extendFlat({data:a(f.unitToColor,255)},o)))}return{render:function(G,Z,re){var j,B,H,ee=G.length,U=1/0,$=-1/0;for(j=0;j<ee;j++)G[j].dim0.canvasX<U&&(U=G[j].dim0.canvasX,B=j),G[j].dim1.canvasX>$&&($=G[j].dim1.canvasX,H=j);0===ee&&t(O,0,0,f.canvasWidth,f.canvasHeight);var q=function(xe){var Ee,he,me,Se=[[],[]];for(me=0;me<64;me++){var Me=!xe&&me<_.length?_[me].brush.filter.getBounds():[-1/0,1/0];Se[0][me]=Me[0],Se[1][me]=Me[1]}var Ie=new Array(16384);for(Ee=0;Ee<16384;Ee++)Ie[Ee]=255;if(!xe)for(Ee=0;Ee<_.length;Ee++){var Fe=Ee%8,Ne=(Ee-Fe)/8,De=Math.pow(2,Fe),$e=_[Ee].brush.filter.get();if(!($e.length<2)){var Re=g($e[0])[1];for(he=1;he<$e.length;he++){var ze=g($e[he]);for(me=Re+1;me<ze[0];me++)Ie[8*me+Ne]&=~De;Re=Math.max(Re,ze[1])}}}var Ue={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ie};return w?w(Ue):w=O.texture(Ue),{maskTexture:w,maskHeight:2048,loA:Se[0].slice(0,16),loB:Se[0].slice(16,32),loC:Se[0].slice(32,48),loD:Se[0].slice(48,64),hiA:Se[1].slice(0,16),hiB:Se[1].slice(16,32),hiC:Se[1].slice(32,48),hiD:Se[1].slice(48,64)}}(C);for(j=0;j<ee;j++){var te=G[j],ne=te.dim0.crossfilterDimensionIndex,se=te.dim1.crossfilterDimensionIndex,ie=te.canvasX,ue=te.canvasY,le=ie+te.panelSizeX,de=te.plotGlPixelRatio;if(Z||!V[ne]||V[ne][0]!==ie||V[ne][1]!==le){V[ne]=[ie,le];var be=p(f,B,H,j,ne,se,ie,ue,te.panelSizeX,te.panelSizeY,te.dim0.crossfilterDimensionIndex,C?0:A?2:1,q,de);D.clearOnly=re,d(O,X,D,Z?f.lines.blockLineCount:k,k,be)}}},readPixel:function(G,Z){return O.read({x:G,y:Z,width:1,height:1,data:r}),r},readPixels:function(G,Z,re,j){var B=new Uint8Array(4*re*j);return O.read({x:G,y:Z,width:re,height:j,data:B}),B},destroy:function(){for(var G in u.style["pointer-events"]="none",N.destroy(),w&&w.destroy(),z)z[G].destroy()},update:J}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h){var e,n;for(h||(h=1/0),e=0;e<v.length;e++)(n=v[e]).visible&&(h=Math.min(h,n[b].length));for(h===1/0&&(h=0),m._length=h,e=0;e<v.length;e++)(n=v[e]).visible&&(n._length=h);return h}},{}],908:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=v.numberFormat,h=y("color-rgba"),e=y("../../plots/cartesian/axes"),n=v.strRotate,r=v.strTranslate,o=y("../../lib/svg_text_utils"),t=y("../../components/drawing"),d=y("../../components/colorscale"),a=y("../../lib/gup"),i=a.keyFun,s=a.repeat,c=a.unwrap,l=y("./helpers"),p=y("./constants"),g=y("./axisbrush"),u=y("./lines");function x(V,X,J){return v.aggNums(V,null,X,J)}function f(V,X){return _(x(Math.min,V,X),x(Math.max,V,X))}function T(V){var X=V.range;return X?_(X[0],X[1]):f(V.values,V._length)}function _(V,X){return!isNaN(V)&&isFinite(V)||(V=0),!isNaN(X)&&isFinite(X)||(X=0),V===X&&(0===V?(V-=1,X+=1):(V*=.9,X*=1.1)),[V,X]}function k(V,X,J,G,Z){var re,j,B=T(J);return G?m.scale.ordinal().domain(G.map((re=b(J.tickformat),j=Z,j?function(H,ee){return j[ee]??re(H)}:re))).range(G.map(function(H){return V-X+(H-B[0])/(B[1]-B[0])*(2*X-V)})):m.scale.linear().domain(B).range([V-X,X])}function w(V){if(V.tickvals){var X=T(V);return m.scale.ordinal().domain(V.tickvals).range(V.tickvals.map(function(J){return(J-X[0])/(X[1]-X[0])}))}}function C(V){var X=V.map(function(Z){return Z[0]}),J=V.map(function(Z){var re=h(Z[1]);return m.rgb("rgb("+re[0]+","+re[1]+","+re[2]+")")}),G="rgb".split("").map(function(Z){return m.scale.linear().clamp(!0).domain(X).range(J.map((re=Z,function(j){return j[re]})));var re});return function(Z){return G.map(function(re){return re(Z)})}}function A(V){return V.dimensions.some(function(X){return X.brush.filterSpecified})}function O(V,X,J){var G=c(X),Z=G.trace,re=l.convertTypedArray(G.lineColor),j=Z.line,B={color:h(Z.unselected.line.color),opacity:Z.unselected.line.opacity},H=d.extractOpts(j),ee=H.reversescale?d.flipScale(G.cscale):G.cscale,U=Z.domain,$=Z.dimensions,q=V.width,te=Z.labelangle,ne=Z.labelside,se=Z.labelfont,ie=Z.tickfont,ue=Z.rangefont,le=v.extendDeepNoArrays({},j,{color:re.map(m.scale.linear().domain(T({values:re,range:[H.min,H.max],_length:Z._length}))),blockLineCount:p.blockLineCount,canvasOverdrag:p.overdrag*p.canvasPixelRatio}),de=Math.floor(q*(U.x[1]-U.x[0])),be=Math.floor(V.height*(U.y[1]-U.y[0])),_e=V.margin||{l:80,r:80,t:100,b:80},xe=de,Ee=be;return{key:J,colCount:$.filter(l.isVisible).length,dimensions:$,tickDistance:p.tickDistance,unitToColor:C(ee),lines:le,deselectedLines:B,labelAngle:te,labelSide:ne,labelFont:se,tickFont:ie,rangeFont:ue,layoutWidth:q,layoutHeight:V.height,domain:U,translateX:U.x[0]*q,translateY:V.height-U.y[1]*V.height,pad:_e,canvasWidth:xe*p.canvasPixelRatio+2*le.canvasOverdrag,canvasHeight:Ee*p.canvasPixelRatio,width:xe,height:Ee,canvasPixelRatio:p.canvasPixelRatio}}function P(V,X,J){var q,te,G=J.width,Z=J.height,re=J.dimensions,j=J.canvasPixelRatio,B=function(q){return G*q/Math.max(1,J.colCount-1)},H=p.verticalPadding/Z,ee=(q=Z,te=p.verticalPadding,m.scale.linear().range([te,q-te])),U={key:J.key,xScale:B,model:J,inBrushDrag:!1},$={};return U.dimensions=re.filter(l.isVisible).map(function(q,te){var Ie,Fe,ne=(Ie=q,Fe=H,m.scale.linear().domain(T(Ie)).range([Fe,1-Fe])),se=$[q.label];$[q.label]=(se||0)+1;var ie=q.label+(se?"__"+se:""),ue=q.constraintrange,le=ue&&ue.length;le&&!Array.isArray(ue[0])&&(ue=[ue]);var de=le?ue.map(function(Ie){return Ie.map(ne)}):[[-1/0,1/0]],be=q.values;be.length>q._length&&(be=be.slice(0,q._length));var _e,xe=q.tickvals;function Ee(Ie,Fe){return{val:Ie,text:_e[Fe]}}function he(Ie,Fe){return Ie.val-Fe.val}if(Array.isArray(xe)&&xe.length){_e=q.ticktext,Array.isArray(_e)&&_e.length?_e.length>xe.length?_e=_e.slice(0,xe.length):xe.length>_e.length&&(xe=xe.slice(0,_e.length)):_e=xe.map(b(q.tickformat));for(var me=1;me<xe.length;me++)if(xe[me]<xe[me-1]){for(var Se=xe.map(Ee).sort(he),Me=0;Me<xe.length;Me++)xe[Me]=Se[Me].val,_e[Me]=Se[Me].text;break}}else xe=void 0;return be=l.convertTypedArray(be),{key:ie,label:q.label,tickFormat:q.tickformat,tickvals:xe,ticktext:_e,ordinal:l.isOrdinal(q),multiselect:q.multiselect,xIndex:te,crossfilterDimensionIndex:te,visibleIndex:q._index,height:Z,values:be,paddedUnitValues:be.map(ne),unitTickvals:xe&&xe.map(ne),xScale:B,x:B(te),canvasX:B(te)*j,unitToPaddedPx:ee,domainScale:k(Z,p.verticalPadding,q,xe,_e),ordinalScale:w(q),parent:U,model:J,brush:g.makeBrush(V,le,de,function(){V.linePickActive(!1)},function(){var Ie=U;Ie.focusLayer&&Ie.focusLayer.render(Ie.panels,!0);var Fe=A(Ie);!V.contextShown()&&Fe?(Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!0),V.contextShown(!0)):V.contextShown()&&!Fe&&(Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!0,!0),V.contextShown(!1))},function(Ie){if(U.focusLayer.render(U.panels,!0),U.pickLayer&&U.pickLayer.render(U.panels,!0),V.linePickActive(!0),X&&X.filterChanged){var Fe=ne.invert,Ne=Ie.map(function(De){return De.map(Fe).sort(v.sorterAsc)}).sort(function(De,$e){return De[0]-$e[0]});X.filterChanged(U.key,q._index,Ne)}})}}),U}function S(V){V.classed(p.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function E(V,X){var G=V*Math.PI/180;return{dir:"top"===X?1:-1,dx:Math.sin(G),dy:Math.cos(G),degrees:V}}function D(V,X,J){for(var G=X.panels||(X.panels=[]),Z=V.data(),re=0;re<Z.length-1;re++){var j=G[re]||(G[re]={}),B=Z[re],H=Z[re+1];j.dim0=B,j.dim1=H,j.canvasX=B.canvasX,j.panelSizeX=H.canvasX-B.canvasX,j.panelSizeY=X.model.canvasHeight,j.y=0,j.canvasY=0,j.plotGlPixelRatio=J}}function z(V,X){return e.tickText(V._ax,X,!1).text}function N(V,X){if(V.ordinal)return"";var J=V.domainScale.domain();return z(V.model.dimensions[V.visibleIndex],J[X?J.length-1:0])}Q.exports=function(V,X,J,G){var Z=V._fullLayout,re=Z._toppaper,j=Z._glcontainer,B=V._context.plotGlPixelRatio,H=V._fullLayout.paper_bgcolor;!function(Me){for(var Ie=0;Ie<Me.length;Ie++)for(var Fe=0;Fe<Me[Ie].length;Fe++)for(var Ne=Me[Ie][Fe].trace,De=Ne.dimensions,$e=0;$e<De.length;$e++){var Re=De[$e].values,ze=De[$e]._ax;ze&&(ze.range=ze.range?_(ze.range[0],ze.range[1]):f(Re,Ne._length),ze.dtick||(ze.dtick=.01*(Math.abs(ze.range[1]-ze.range[0])||1)),ze.tickformat=De[$e].tickformat,e.calcTicks(ze),ze.cleanRange())}}(X);var ee,U,$=(ee=!0,U=!1,{linePickActive:function(Me){return arguments.length?ee=!!Me:ee},contextShown:function(Me){return arguments.length?U=!!Me:U}}),q=X.filter(function(Me){return c(Me).trace.visible}).map(O.bind(0,J)).map(P.bind(0,$,G));j.each(function(Me,Ie){return v.extendFlat(Me,q[Ie])});var te=j.selectAll(".gl-canvas").each(function(Me){Me.viewModel=q[0],Me.viewModel.plotGlPixelRatio=B,Me.viewModel.paperColor=H,Me.model=Me.viewModel?Me.viewModel.model:null}),ne=null;te.filter(function(Me){return Me.pick}).style("pointer-events","auto").on("mousemove",function(Me){if($.linePickActive()&&Me.lineLayer&&G&&G.hover){var Ie=m.event,Fe=this.width,Ne=this.height,De=m.mouse(this),$e=De[0],Re=De[1];if($e<0||Re<0||$e>=Fe||Re>=Ne)return;var ze=Me.lineLayer.readPixel($e,Ne-1-Re),Ue=0!==ze[3],je=Ue?ze[2]+256*(ze[1]+256*ze[0]):null,rt={x:$e,y:Re,clientX:Ie.clientX,clientY:Ie.clientY,dataIndex:Me.model.key,curveNumber:je};je!==ne&&(Ue?G.hover(rt):G.unhover&&G.unhover(rt),ne=je)}}),te.style("opacity",function(Me){return Me.pick?0:1}),re.style("background","rgba(255, 255, 255, 0)");var se=re.selectAll("."+p.cn.parcoords).data(q,i);se.exit().remove(),se.enter().append("g").classed(p.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),se.attr("transform",function(Me){return r(Me.model.translateX,Me.model.translateY)});var ie=se.selectAll("."+p.cn.parcoordsControlView).data(s,i);ie.enter().append("g").classed(p.cn.parcoordsControlView,!0),ie.attr("transform",function(Me){return r(Me.model.pad.l,Me.model.pad.t)});var ue=ie.selectAll("."+p.cn.yAxis).data(function(Me){return Me.dimensions},i);ue.enter().append("g").classed(p.cn.yAxis,!0),ie.each(function(Me){D(ue,Me,B)}),te.each(function(Me){Me.viewModel&&(!Me.lineLayer||G?Me.lineLayer=u(this,Me):Me.lineLayer.update(Me),(Me.key||0===Me.key)&&(Me.viewModel[Me.key]=Me.lineLayer),Me.lineLayer.render(Me.viewModel.panels,!Me.context||G))}),ue.attr("transform",function(Me){return r(Me.xScale(Me.xIndex),0)}),ue.call(m.behavior.drag().origin(function(Me){return Me}).on("drag",function(Me){var Ie=Me.parent;$.linePickActive(!1),Me.x=Math.max(-p.overdrag,Math.min(Me.model.width+p.overdrag,m.event.x)),Me.canvasX=Me.x*Me.model.canvasPixelRatio,ue.sort(function(Fe,Ne){return Fe.x-Ne.x}).each(function(Fe,Ne){Fe.xIndex=Ne,Fe.x=Me===Fe?Fe.x:Fe.xScale(Fe.xIndex),Fe.canvasX=Fe.x*Fe.model.canvasPixelRatio}),D(ue,Ie,B),ue.filter(function(Fe){return 0!==Math.abs(Me.xIndex-Fe.xIndex)}).attr("transform",function(Fe){return r(Fe.xScale(Fe.xIndex),0)}),m.select(this).attr("transform",r(Me.x,0)),ue.each(function(Fe,Ne,De){De===Me.parent.key&&(Ie.dimensions[Ne]=Fe)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!A(Ie)),Ie.focusLayer.render&&Ie.focusLayer.render(Ie.panels)}).on("dragend",function(Me){var Ie=Me.parent;Me.x=Me.xScale(Me.xIndex),Me.canvasX=Me.x*Me.model.canvasPixelRatio,D(ue,Ie,B),m.select(this).attr("transform",function(Fe){return r(Fe.x,0)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!A(Ie)),Ie.focusLayer&&Ie.focusLayer.render(Ie.panels),Ie.pickLayer&&Ie.pickLayer.render(Ie.panels,!0),$.linePickActive(!0),G&&G.axesMoved&&G.axesMoved(Ie.key,Ie.dimensions.map(function(Fe){return Fe.crossfilterDimensionIndex}))})),ue.exit().remove();var le=ue.selectAll("."+p.cn.axisOverlays).data(s,i);le.enter().append("g").classed(p.cn.axisOverlays,!0),le.selectAll("."+p.cn.axis).remove();var de=le.selectAll("."+p.cn.axis).data(s,i);de.enter().append("g").classed(p.cn.axis,!0),de.each(function(Me){var Ie=Me.model.height/Me.model.tickDistance,Fe=Me.domainScale,Ne=Fe.domain();m.select(this).call(m.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ie,Me.tickFormat).tickValues(Me.ordinal?Ne:null).tickFormat(function(De){return l.isOrdinal(Me)?De:z(Me.model.dimensions[Me.visibleIndex],De)}).scale(Fe)),t.font(de.selectAll("text"),Me.model.tickFont)}),de.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),de.selectAll("text").style("text-shadow",o.makeTextShadow(H)).style("cursor","default");var be=le.selectAll("."+p.cn.axisHeading).data(s,i);be.enter().append("g").classed(p.cn.axisHeading,!0);var _e=be.selectAll("."+p.cn.axisTitle).data(s,i);_e.enter().append("text").classed(p.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),_e.text(function(Me){return Me.label}).each(function(Me){var Ie=m.select(this);t.font(Ie,Me.model.labelFont),o.convertToTspans(Ie,V)}).attr("transform",function(Me){var Ie=E(Me.model.labelAngle,Me.model.labelSide),Fe=p.axisTitleOffset;return(Ie.dir>0?"":r(0,2*Fe+Me.model.height))+n(Ie.degrees)+r(-Fe*Ie.dx,-Fe*Ie.dy)}).attr("text-anchor",function(Me){var Ie=E(Me.model.labelAngle,Me.model.labelSide);return 2*Math.abs(Ie.dx)>Math.abs(Ie.dy)?Ie.dir*Ie.dx<0?"start":"end":"middle"});var xe=le.selectAll("."+p.cn.axisExtent).data(s,i);xe.enter().append("g").classed(p.cn.axisExtent,!0);var Ee=xe.selectAll("."+p.cn.axisExtentTop).data(s,i);Ee.enter().append("g").classed(p.cn.axisExtentTop,!0),Ee.attr("transform",r(0,-p.axisExtentOffset));var he=Ee.selectAll("."+p.cn.axisExtentTopText).data(s,i);he.enter().append("text").classed(p.cn.axisExtentTopText,!0).call(S),he.text(function(Me){return N(Me,!0)}).each(function(Me){t.font(m.select(this),Me.model.rangeFont)});var me=xe.selectAll("."+p.cn.axisExtentBottom).data(s,i);me.enter().append("g").classed(p.cn.axisExtentBottom,!0),me.attr("transform",function(Me){return r(0,Me.model.height+p.axisExtentOffset)});var Se=me.selectAll("."+p.cn.axisExtentBottomText).data(s,i);Se.enter().append("text").classed(p.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(S),Se.text(function(Me){return N(Me,!1)}).each(function(Me){t.font(m.select(this),Me.model.rangeFont)}),g.ensureAxisBrush(le,H)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(y,Q,K){"use strict";var m=y("./parcoords"),v=y("../../lib/prepare_regl"),b=y("./helpers").isVisible,h={};function e(n,r,o){var t=r.indexOf(o),d=n.indexOf(t);return-1===d&&(d+=r.length),d}(Q.exports=function(n,r){var o=n._fullLayout;if(v(n,[],h)){var t={},d={},a={},i={},s=o._size;r.forEach(function(c,l){var p=c[0].trace;a[l]=p.index;var g=i[l]=p._fullInput.index;t[l]=n.data[g].dimensions,d[l]=n.data[g].dimensions.slice()}),m(n,r,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}},{filterChanged:function(c,l,p){var g=d[c][l],u=p.map(function(w){return w.slice()}),x="dimensions["+l+"].constraintrange",f=o._tracePreGUI[n._fullData[a[c]]._fullInput.uid];void 0===f[x]&&(f[x]=g.constraintrange||null);var _=n._fullData[a[c]].dimensions[l];u.length?(1===u.length&&(u=u[0]),g.constraintrange=u,_.constraintrange=u.slice(),u=[u]):(delete g.constraintrange,delete _.constraintrange,u=null);var k={};k[x]=u,n.emit("plotly_restyle",[k,[i[c]]])},hover:function(c){n.emit("plotly_hover",c)},unhover:function(c){n.emit("plotly_unhover",c)},axesMoved:function(c,l){var g,u,p=(g=l,u=d[c].filter(b),function(x,f){return e(g,u,x)-e(g,u,f)});t[c].sort(p),d[c].filter(function(g){return!b(g)}).sort(function(g){return d[c].indexOf(g)}).forEach(function(g){t[c].splice(t[c].indexOf(g),1),t[c].splice(d[c].indexOf(g),0,g)}),n.emit("plotly_restyle",[{dimensions:[t[c]]},[i[c]]])}})}}).reglPrecompiled=h},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(y,Q,K){"use strict";var m=y("../../plots/attributes"),v=y("../../plots/domain").attributes,b=y("../../plots/font_attributes"),h=y("../../components/color/attributes"),e=y("../../plots/template_attributes").hovertemplateAttrs,n=y("../../plots/template_attributes").texttemplateAttrs,r=y("../../lib/extend").extendFlat,o=b({editType:"plot",arrayOk:!0,colorEditType:"plot"});Q.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:h.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:r({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:n({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:r({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:r({},o,{}),outsidetextfont:r({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:r({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:v({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:r({},o,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(y,Q,K){"use strict";var m=y("../../plots/plots");K.name="pie",K.plot=function(v,b,h,e){m.plotBasePlot(K.name,v,b,h,e)},K.clean=function(v,b,h,e){m.cleanBasePlot(K.name,v,b,h,e)}},{"../../plots/plots":628}],912:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("tinycolor2"),b=y("../../components/color"),h={};function e(r){return function(o,t){return!!o&&!!(o=v(o)).isValid()&&(o=b.addOpacity(o,o.getAlpha()),r[t]||(r[t]=o),o)}}function n(r,o){var t,d=JSON.stringify(r),a=o[d];if(!a){for(a=r.slice(),t=0;t<r.length;t++)a.push(v(r[t]).lighten(20).toHexString());for(t=0;t<r.length;t++)a.push(v(r[t]).darken(20).toHexString());o[d]=a}return a}Q.exports={calc:function(r,o){var t,d,a=[],i=r._fullLayout,s=i.hiddenlabels||[],c=o.labels,l=o.marker.colors||[],p=o.values,g=o._length,u=o._hasValues&&g;if(o.dlabel)for(c=new Array(g),t=0;t<g;t++)c[t]=String(o.label0+t*o.dlabel);var x={},f=e(i["_"+o.type+"colormap"]),T=0,_=!1;for(t=0;t<g;t++){var k,w,C;if(u){if(!m(k=p[t]))continue;k=+k}else k=1;void 0!==(w=c[t])&&""!==w||(w=t);var A=x[w=String(w)];void 0===A?(x[w]=a.length,(C=-1!==s.indexOf(w))||(T+=k),a.push({v:k,label:w,color:f(l[t],w),i:t,pts:[t],hidden:C})):(_=!0,(d=a[A]).v+=k,d.pts.push(t),d.hidden||(T+=k),!1===d.color&&l[t]&&(d.color=f(l[t],w)))}return a=a.filter(function(O){return O.v>=0}),("funnelarea"===o.type?_:o.sort)&&a.sort(function(O,P){return P.v-O.v}),a[0]&&(a[0].vTotal=T),a},crossTraceCalc:function(r,o){var t=(o||{}).type;t||(t="pie");var d=r._fullLayout,a=r.calcdata,i=d[t+"colorway"],s=d["_"+t+"colormap"];d["extend"+t+"colors"]&&(i=n(i,h));for(var c=0,l=0;l<a.length;l++){var p=a[l];if(p[0].trace.type===t)for(var g=0;g<p.length;g++){var u=p[g];!1===u.color&&(s[u.label]?u.color=s[u.label]:(s[u.label]=u.color=i[c%i.length],c++))}}},makePullColorFn:e,generateExtendedColors:n}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("./attributes"),h=y("../../plots/domain").defaults,e=y("../bar/defaults").handleText;function n(r,o){var t=Array.isArray(r),d=v.isArrayOrTypedArray(o),a=Math.min(t?r.length:1/0,d?o.length:1/0);if(isFinite(a)||(a=0),a&&d){for(var i,s=0;s<a;s++){var c=o[s];if(m(c)&&c>0){i=!0;break}}i||(a=0)}return{hasLabels:t,hasValues:d,len:a}}Q.exports={handleLabelsAndValues:n,supplyDefaults:function(r,o,t,d){function a(f,T){return v.coerce(r,o,b,f,T)}var i=n(a("labels"),a("values")),s=i.len;if(o._hasLabels=i.hasLabels,o._hasValues=i.hasValues,!o._hasLabels&&o._hasValues&&(a("label0"),a("dlabel")),s){o._length=s,a("marker.line.width")&&a("marker.line.color"),a("marker.colors"),a("scalegroup");var c,l=a("text"),p=a("texttemplate");if(p||(c=a("textinfo",Array.isArray(l)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),p||c&&"none"!==c){var g=a("textposition");e(r,o,d,a,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(g)||"auto"===g||"outside"===g)&&a("automargin"),("inside"===g||"auto"===g||Array.isArray(g))&&a("insidetextorientation")}h(o,d,a);var u=a("hole");if(a("title.text")){var x=a("title.position",u?"middle center":"top center");u||"middle center"!==x||(o.title.position="top center"),v.coerceFont(a,"title.font",d.font)}a("sort"),a("direction"),a("rotation"),a("pull")}else o.visible=!1}}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(y,Q,K){"use strict";var m=y("../../components/fx/helpers").appendArrayMultiPointValues;Q.exports=function(v,b){var h={curveNumber:b.index,pointNumbers:v.pts,data:b._input,fullData:b,label:v.label,color:v.color,value:v.v,percent:v.percent,text:v.text,bbox:v.bbox,v:v.v};return 1===v.pts.length&&(h.pointNumber=h.i=v.pts[0]),m(h,b,v.pts),"funnelarea"===b.type&&(delete h.v,delete h.i),h}},{"../../components/fx/helpers":403}],915:[function(y,Q,K){"use strict";var m=y("../../lib");function v(b){return-1!==b.indexOf("e")?b.replace(/[.]?0+e/,"e"):-1!==b.indexOf(".")?b.replace(/[.]?0+$/,""):b}K.formatPiePercent=function(b,h){var e=v((100*b).toPrecision(3));return m.numSeparate(e,h)+"%"},K.formatPieValue=function(b,h){var e=v(b.toPrecision(10));return m.numSeparate(e,h)},K.getFirstFilled=function(b,h){if(Array.isArray(b))for(var e=0;e<h.length;e++){var n=b[h[e]];if(n||0===n||""===n)return n}},K.castOption=function(b,h){return Array.isArray(b)?K.getFirstFilled(b,h):b||void 0},K.getRotationAngle=function(b){return("auto"===b?0:b)*Math.PI/180}},{"../../lib":515}],916:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,supplyLayoutDefaults:y("./layout_defaults"),layoutAttributes:y("./layout_attributes"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot").plot,style:y("./style"),styleOne:y("./style_one"),moduleType:"trace",name:"pie",basePlotModule:y("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(y,Q,K){"use strict";Q.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h){function e(n,r){return m.coerce(b,h,v,n,r)}e("hiddenlabels"),e("piecolorway",h.colorway),e("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../plots/plots"),b=y("../../components/fx"),h=y("../../components/color"),e=y("../../components/drawing"),n=y("../../lib"),r=n.strScale,o=n.strTranslate,t=y("../../lib/svg_text_utils"),d=y("../bar/uniform_text"),a=d.recordMinTextSize,i=d.clearMinTextSize,s=y("../bar/constants").TEXTPAD,c=y("./helpers"),l=y("./event_data"),p=y("../../lib").isValidTextValue;function g(X,J,G){var Z=G[0],re=Z.cx,j=Z.cy,B=Z.trace,H="funnelarea"===B.type;"_hasHoverLabel"in B||(B._hasHoverLabel=!1),"_hasHoverEvent"in B||(B._hasHoverEvent=!1),X.on("mouseover",function(ee){var U=J._fullLayout,$=J._fullData[B.index];if(!J._dragging&&!1!==U.hovermode){var q=$.hoverinfo;if(Array.isArray(q)&&(q=b.castHoverinfo({hoverinfo:[c.castOption(q,ee.pts)],_module:B._module},U,0)),"all"===q&&(q="label+text+value+percent+name"),$.hovertemplate||"none"!==q&&"skip"!==q&&q){var te=ee.rInscribed||0,ne=re+ee.pxmid[0]*(1-te),se=j+ee.pxmid[1]*(1-te),ie=U.separators,ue=[];if(q&&-1!==q.indexOf("label")&&ue.push(ee.label),ee.text=c.castOption($.hovertext||$.text,ee.pts),q&&-1!==q.indexOf("text")){var le=ee.text;n.isValidTextValue(le)&&ue.push(le)}ee.value=ee.v,ee.valueLabel=c.formatPieValue(ee.v,ie),q&&-1!==q.indexOf("value")&&ue.push(ee.valueLabel),ee.percent=ee.v/Z.vTotal,ee.percentLabel=c.formatPiePercent(ee.percent,ie),q&&-1!==q.indexOf("percent")&&ue.push(ee.percentLabel);var de=$.hoverlabel,be=de.font,_e=[];b.loneHover({trace:B,x0:ne-te*Z.r,x1:ne+te*Z.r,y:se,_x0:H?re+ee.TL[0]:ne-te*Z.r,_x1:H?re+ee.TR[0]:ne+te*Z.r,_y0:H?j+ee.TL[1]:se-te*Z.r,_y1:H?j+ee.BL[1]:se+te*Z.r,text:ue.join("<br>"),name:$.hovertemplate||-1!==q.indexOf("name")?$.name:void 0,idealAlign:ee.pxmid[0]<0?"left":"right",color:c.castOption(de.bgcolor,ee.pts)||ee.color,borderColor:c.castOption(de.bordercolor,ee.pts),fontFamily:c.castOption(be.family,ee.pts),fontSize:c.castOption(be.size,ee.pts),fontColor:c.castOption(be.color,ee.pts),nameLength:c.castOption(de.namelength,ee.pts),textAlign:c.castOption(de.align,ee.pts),hovertemplate:c.castOption($.hovertemplate,ee.pts),hovertemplateLabels:ee,eventData:[l(ee,$)]},{container:U._hoverlayer.node(),outerContainer:U._paper.node(),gd:J,inOut_bbox:_e}),ee.bbox=_e[0],B._hasHoverLabel=!0}B._hasHoverEvent=!0,J.emit("plotly_hover",{points:[l(ee,$)],event:m.event})}}),X.on("mouseout",function(ee){var U=J._fullLayout,$=J._fullData[B.index],q=m.select(this).datum();B._hasHoverEvent&&(ee.originalEvent=m.event,J.emit("plotly_unhover",{points:[l(q,$)],event:m.event}),B._hasHoverEvent=!1),B._hasHoverLabel&&(b.loneUnhover(U._hoverlayer.node()),B._hasHoverLabel=!1)}),X.on("click",function(ee){J._dragging||!1===J._fullLayout.hovermode||(J._hoverdata=[l(ee,J._fullData[B.index])],b.click(J,m.event))})}function u(X,J,G){var Z=c.castOption(X.insidetextfont.color,J.pts);!Z&&X._input.textfont&&(Z=c.castOption(X._input.textfont.color,J.pts));var re=c.castOption(X.insidetextfont.family,J.pts)||c.castOption(X.textfont.family,J.pts)||G.family,j=c.castOption(X.insidetextfont.size,J.pts)||c.castOption(X.textfont.size,J.pts)||G.size;return{color:Z||h.contrast(J.color),family:re,size:j}}function x(X,J){for(var G,Z,re=0;re<X.length;re++)if((Z=(G=X[re][0]).trace).title.text){var j=Z.title.text;Z._meta&&(j=n.templateString(j,Z._meta));var B=e.tester.append("text").attr("data-notex",1).text(j).call(e.font,Z.title.font).call(t.convertToTspans,J),H=e.bBox(B.node(),!0);G.titleBox={width:H.width,height:H.height},B.remove()}}function f(X,J,G){var Z=G.r||J.rpx1,re=J.rInscribed;if(J.startangle===J.stopangle)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var j,B=J.ring,H=1===B&&Math.abs(J.startangle-J.stopangle)===2*Math.PI,ee=J.halfangle,U=J.midangle,$=G.trace.insidetextorientation,q="horizontal"===$,te="tangential"===$,ne="radial"===$,se="auto"===$,ie=[];if(!se){var ue,le=function(he,me){if($e=(Fe=J).stopangle,(De=Fe.startangle)>(Ne=he)&&Ne>$e||De<Ne&&Ne<$e){var Se=Math.abs(he-J.startangle),Me=Math.abs(he-J.stopangle),Ie=Se<Me?Se:Me;(j="tan"===me?_(X,Z,B,Ie,0):T(X,Z,B,Ie,Math.PI/2)).textPosAngle=he,ie.push(j)}var Fe,Ne,De,$e};if(q||te){for(ue=4;ue>=-4;ue-=2)le(Math.PI*ue,"tan");for(ue=4;ue>=-4;ue-=2)le(Math.PI*(ue+1),"tan")}if(q||ne){for(ue=4;ue>=-4;ue-=2)le(Math.PI*(ue+1.5),"rad");for(ue=4;ue>=-4;ue-=2)le(Math.PI*(ue+.5),"rad")}}if(H||se||q){var de=Math.sqrt(X.width*X.width+X.height*X.height);if((j={scale:re*Z*2/de,rCenter:1-re,rotate:0}).textPosAngle=(J.startangle+J.stopangle)/2,j.scale>=1)return j;ie.push(j)}(se||ne)&&((j=T(X,Z,B,ee,U)).textPosAngle=(J.startangle+J.stopangle)/2,ie.push(j)),(se||te)&&((j=_(X,Z,B,ee,U)).textPosAngle=(J.startangle+J.stopangle)/2,ie.push(j));for(var be=0,_e=0,xe=0;xe<ie.length;xe++){var Ee=ie[xe].scale;if(_e<Ee&&(_e=Ee,be=xe),!se&&_e>=1)break}return ie[be]}function T(X,J,G,Z,re){J=Math.max(0,J-2*s);var j=X.width/X.height,B=C(j,Z,J,G);return{scale:2*B/X.height,rCenter:k(j,B/J),rotate:w(re)}}function _(X,J,G,Z,re){J=Math.max(0,J-2*s);var j=X.height/X.width,B=C(j,Z,J,G);return{scale:2*B/X.width,rCenter:k(j,B/J),rotate:w(re+Math.PI/2)}}function k(X,J){return Math.cos(J)-X*J}function w(X){return(180/Math.PI*X+720)%180-90}function C(X,J,G,Z){var re=X+1/(2*Math.tan(J));return G*Math.min(1/(Math.sqrt(re*re+.5)+re),Z/(Math.sqrt(X*X+Z/2)+X))}function A(X,J){return X.v!==J.vTotal||J.trace.hole?Math.min(1/(1+1/Math.sin(X.halfangle)),X.ring/2):1}function O(X,J){var G=J.pxmid[0],Z=J.pxmid[1],re=X.width/2,j=X.height/2;return G<0&&(re*=-1),Z<0&&(j*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(j)*(re>0?1:-1)/2,y:j/(1+G*G/(Z*Z)),outside:!0}}function P(X,J){var G,Z,re,j=X.trace,B={x:X.cx,y:X.cy},H={tx:0,ty:0};H.ty+=j.title.font.size,re=E(j),-1!==j.title.position.indexOf("top")?(B.y-=(1+re)*X.r,H.ty-=X.titleBox.height):-1!==j.title.position.indexOf("bottom")&&(B.y+=(1+re)*X.r);var U,$=X.r/(void 0===(U=X.trace.aspectratio)?1:U),q=J.w*(j.domain.x[1]-j.domain.x[0])/2;return-1!==j.title.position.indexOf("left")?(q+=$,B.x-=(1+re)*$,H.tx+=X.titleBox.width/2):-1!==j.title.position.indexOf("center")?q*=2:-1!==j.title.position.indexOf("right")&&(q+=$,B.x+=(1+re)*$,H.tx-=X.titleBox.width/2),G=q/X.titleBox.width,Z=S(X,J)/X.titleBox.height,{x:B.x,y:B.y,scale:Math.min(G,Z),tx:H.tx,ty:H.ty}}function S(X,J){var G=X.trace;return Math.min(X.titleBox.height,J.h*(G.domain.y[1]-G.domain.y[0])/2)}function E(X){var J,G=X.pull;if(!G)return 0;if(Array.isArray(G))for(G=0,J=0;J<X.pull.length;J++)X.pull[J]>G&&(G=X.pull[J]);return G}function D(X,J){for(var G=[],Z=0;Z<X.length;Z++){var re=X[Z][0],j=re.trace,B=j.domain,H=J.w*(B.x[1]-B.x[0]),ee=J.h*(B.y[1]-B.y[0]);j.title.text&&"middle center"!==j.title.position&&(ee-=S(re,J));var $=ee/2;"funnelarea"!==j.type||j.scalegroup||($/=j.aspectratio),re.r=Math.min(H/2,$)/(1+E(j)),re.cx=J.l+J.w*(j.domain.x[1]+j.domain.x[0])/2,re.cy=J.t+J.h*(1-j.domain.y[0])-ee/2,j.title.text&&-1!==j.title.position.indexOf("bottom")&&(re.cy-=S(re,J)),j.scalegroup&&-1===G.indexOf(j.scalegroup)&&G.push(j.scalegroup)}!function(q,te){for(var ne,se,ie,ue=0;ue<te.length;ue++){var le=1/0,de=te[ue];for(se=0;se<q.length;se++)if((ie=(ne=q[se][0]).trace).scalegroup===de){var be;if("pie"===ie.type)be=ne.r*ne.r;else if("funnelarea"===ie.type){var _e,xe;ie.aspectratio>1?xe=(_e=ne.r)/ie.aspectratio:_e=(xe=ne.r)*ie.aspectratio,be=(_e*=(1+ie.baseratio)/2)*xe}le=Math.min(le,be/ne.vTotal)}for(se=0;se<q.length;se++)if((ie=(ne=q[se][0]).trace).scalegroup===de){var Ee=le*ne.vTotal;"funnelarea"===ie.type&&(Ee/=(1+ie.baseratio)/2,Ee/=ie.aspectratio),ne.r=Math.sqrt(Ee)}}}(X,G)}function z(X,J){return[X*Math.sin(J),-X*Math.cos(J)]}function N(X,J,G){var be,Z=X._fullLayout,re=G.trace,j=re.texttemplate,B=re.textinfo;if(!j&&B&&"none"!==B){var H,ee=B.split("+"),U=function(be){return-1!==ee.indexOf(be)},$=U("label"),q=U("text"),te=U("value"),ne=U("percent"),se=Z.separators;if(H=$?[J.label]:[],q){var ie=c.getFirstFilled(re.text,J.pts);p(ie)&&H.push(ie)}te&&H.push(c.formatPieValue(J.v,se)),ne&&H.push(c.formatPiePercent(J.v/G.vTotal,se)),J.text=H.join("<br>")}if(j){var ue=n.castOption(re,J.i,"texttemplate");if(ue){var le={label:(be=J).label,value:be.v,valueLabel:c.formatPieValue(be.v,Z.separators),percent:be.v/G.vTotal,percentLabel:c.formatPiePercent(be.v/G.vTotal,Z.separators),color:be.color,text:be.text,customdata:n.castOption(re,be.i,"customdata")},de=c.getFirstFilled(re.text,J.pts);(p(de)||""===de)&&(le.text=de),J.text=n.texttemplateString(ue,le,X._fullLayout._d3locale,le,re._meta||{})}else J.text=""}}function V(X,J){var G=X.rotate*Math.PI/180,Z=Math.cos(G),re=Math.sin(G),j=(J.left+J.right)/2,B=(J.top+J.bottom)/2;X.textX=j*Z-B*re,X.textY=j*re+B*Z,X.noCenter=!0}Q.exports={plot:function(X,J){var G=X._fullLayout,Z=G._size;i("pie",G),x(J,X),D(J,Z);var re=n.makeTraceGroups(G._pielayer,J,"trace").each(function(j){var B=m.select(this),H=j[0],ee=H.trace;(function(U){var $,q,te,ne=U[0],se=ne.r,ie=ne.trace,ue=c.getRotationAngle(ie.rotation),le=2*Math.PI/ne.vTotal,de="px0",be="px1";if("counterclockwise"===ie.direction){for($=0;$<U.length&&U[$].hidden;$++);if($===U.length)return;ue+=le*U[$].v,le*=-1,de="px1",be="px0"}for(te=z(se,ue),$=0;$<U.length;$++)(q=U[$]).hidden||(q[de]=te,q.startangle=ue,q.pxmid=z(se,ue+=le*q.v/2),q.midangle=ue,te=z(se,ue+=le*q.v/2),q.stopangle=ue,q[be]=te,q.largeArc=q.v>ne.vTotal/2?1:0,q.halfangle=Math.PI*Math.min(q.v/ne.vTotal,.5),q.ring=1-ie.hole,q.rInscribed=A(q,ne))})(j),B.attr("stroke-linejoin","round"),B.each(function(){var U=m.select(this).selectAll("g.slice").data(j);U.enter().append("g").classed("slice",!0),U.exit().remove();var $=[[[],[]],[[],[]]],q=!1;U.each(function(be,_e){if(be.hidden)m.select(this).selectAll("path,g").remove();else{be.pointNumber=be.i,be.curveNumber=ee.index,$[be.pxmid[1]<0?0:1][be.pxmid[0]<0?0:1].push(be);var xe=H.cx,Ee=H.cy,he=m.select(this),me=he.selectAll("path.surface").data([be]);if(me.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),he.call(g,X,j),ee.pull){var Se=+c.castOption(ee.pull,be.pts)||0;Se>0&&(xe+=Se*be.pxmid[0],Ee+=Se*be.pxmid[1])}be.cxFinal=xe,be.cyFinal=Ee;var Me=ee.hole;if(be.v===H.vTotal){var Ie="M"+(xe+be.px0[0])+","+(Ee+be.px0[1])+Re(be.px0,be.pxmid,!0,1)+Re(be.pxmid,be.px0,!0,1)+"Z";me.attr("d",Me?"M"+(xe+Me*be.px0[0])+","+(Ee+Me*be.px0[1])+Re(be.px0,be.pxmid,!1,Me)+Re(be.pxmid,be.px0,!1,Me)+"Z"+Ie:Ie)}else{var Fe=Re(be.px0,be.px1,!0,1);if(Me){var Ne=1-Me;me.attr("d","M"+(xe+Me*be.px1[0])+","+(Ee+Me*be.px1[1])+Re(be.px1,be.px0,!1,Me)+"l"+Ne*be.px0[0]+","+Ne*be.px0[1]+Fe+"Z")}else me.attr("d","M"+xe+","+Ee+"l"+be.px0[0]+","+be.px0[1]+Fe+"Z")}N(X,be,H);var De=c.castOption(ee.textposition,be.pts),$e=he.selectAll("g.slicetext").data(be.text&&"none"!==De?[0]:[]);$e.enter().append("g").classed("slicetext",!0),$e.exit().remove(),$e.each(function(){var it,et,wt,ze=n.ensureSingle(m.select(this),"text","",function(it){it.attr("data-notex",1)}),Ue=n.ensureUniformFontSize(X,"outside"===De?(wt=G.font,{color:c.castOption((it=ee).outsidetextfont.color,(et=be).pts)||c.castOption(it.textfont.color,et.pts)||wt.color,family:c.castOption(it.outsidetextfont.family,et.pts)||c.castOption(it.textfont.family,et.pts)||wt.family,size:c.castOption(it.outsidetextfont.size,et.pts)||c.castOption(it.textfont.size,et.pts)||wt.size}):u(ee,be,G.font));ze.text(be.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Ue).call(t.convertToTspans,X);var je,rt=e.bBox(ze.node());if("outside"===De)je=O(rt,be);else if(je=f(rt,be,H),"auto"===De&&je.scale<1){var ut=n.ensureUniformFontSize(X,ee.outsidetextfont);ze.call(e.font,ut),je=O(rt=e.bBox(ze.node()),be)}var gt=je.textPosAngle,At=void 0===gt?be.pxmid:z(H.r,gt);if(je.targetX=xe+At[0]*je.rCenter+(je.x||0),je.targetY=Ee+At[1]*je.rCenter+(je.y||0),V(je,rt),je.outside){var _t=je.targetY;be.yLabelMin=_t-rt.height/2,be.yLabelMid=_t,be.yLabelMax=_t+rt.height/2,be.labelExtraX=0,be.labelExtraY=0,q=!0}je.fontSize=Ue.size,a(ee.type,je,G),j[_e].transform=je,ze.attr("transform",n.getTextTransform(je))})}function Re(ze,Ue,je,rt){return"a"+rt*H.r+","+rt*H.r+" 0 "+be.largeArc+(je?" 1 ":" 0 ")+rt*(Ue[0]-ze[0])+","+rt*(Ue[1]-ze[1])}});var _e,te=m.select(this).selectAll("g.titletext").data(ee.title.text?[0]:[]);if(te.enter().append("g").classed("titletext",!0),te.exit().remove(),te.each(function(){var be,Ee,he,_e=n.ensureSingle(m.select(this),"text","",function(Ee){Ee.attr("data-notex",1)}),xe=ee.title.text;ee._meta&&(xe=n.templateString(xe,ee._meta)),_e.text(xe).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ee.title.font).call(t.convertToTspans,X),be="middle center"===ee.title.position?(Ee=H,he=Math.sqrt(Ee.titleBox.width*Ee.titleBox.width+Ee.titleBox.height*Ee.titleBox.height),{x:Ee.cx,y:Ee.cy,scale:Ee.trace.hole*Ee.r*2/he,tx:0,ty:-Ee.titleBox.height/2+Ee.trace.title.font.size}):P(H,Z),_e.attr("transform",o(be.x,be.y)+r(Math.min(1,be.scale))+o(be.tx,be.ty))}),q&&function(be,_e){var xe,Ee,he,me,Se,Me,Ie,Fe,Ne,De,$e,Re,ze;function Ue(gt,At){return gt.pxmid[1]-At.pxmid[1]}function je(gt,At){return At.pxmid[1]-gt.pxmid[1]}function rt(gt,At){At||(At={});var _t,it,et,wt,Gt=At.labelExtraY+(Ee?At.yLabelMax:At.yLabelMin),Kt=Ee?gt.yLabelMin:gt.yLabelMax,cr=Ee?gt.yLabelMax:gt.yLabelMin,ar=gt.cyFinal+Se(gt.px0[1],gt.px1[1]),hr=Gt-Kt;if(hr*Ie>0&&(gt.labelExtraY=hr),Array.isArray(_e.pull))for(it=0;it<De.length;it++)(et=De[it])===gt||(c.castOption(_e.pull,gt.pts)||0)>=(c.castOption(_e.pull,et.pts)||0)||((gt.pxmid[1]-et.pxmid[1])*Ie>0?(hr=et.cyFinal+Se(et.px0[1],et.px1[1])-Kt-gt.labelExtraY)*Ie>0&&(gt.labelExtraY+=hr):(cr+gt.labelExtraY-ar)*Ie>0&&(_t=3*Me*Math.abs(it-De.indexOf(gt)),(wt=et.cxFinal+me(et.px0[0],et.px1[0])+_t-(gt.cxFinal+gt.pxmid[0])-gt.labelExtraX)*Me>0&&(gt.labelExtraX+=wt)))}for(Ee=0;Ee<2;Ee++)for(he=Ee?Ue:je,Se=Ee?Math.max:Math.min,Ie=Ee?1:-1,xe=0;xe<2;xe++){for(me=xe?Math.max:Math.min,Me=xe?1:-1,(Fe=be[Ee][xe]).sort(he),De=(Ne=be[1-Ee][xe]).concat(Fe),Re=[],$e=0;$e<Fe.length;$e++)void 0!==Fe[$e].yLabelMid&&Re.push(Fe[$e]);for(ze=!1,$e=0;Ee&&$e<Ne.length;$e++)if(void 0!==Ne[$e].yLabelMid){ze=Ne[$e];break}for($e=0;$e<Re.length;$e++){var ut=$e&&Re[$e-1];ze&&!$e&&(ut=ze),rt(Re[$e],ut)}}}($,ee),_e=ee,U.each(function(xe){var Ee=m.select(this);if(xe.labelExtraX||xe.labelExtraY){var he=Ee.select("g.slicetext text");xe.transform.targetX+=xe.labelExtraX,xe.transform.targetY+=xe.labelExtraY,he.attr("transform",n.getTextTransform(xe.transform));var me=xe.cxFinal+xe.pxmid[0],Se="M"+me+","+(xe.cyFinal+xe.pxmid[1]),Me=(xe.yLabelMax-xe.yLabelMin)*(xe.pxmid[0]<0?-1:1)/4;if(xe.labelExtraX){var Ie=xe.labelExtraX*xe.pxmid[1]/xe.pxmid[0],Fe=xe.yLabelMid+xe.labelExtraY-(xe.cyFinal+xe.pxmid[1]);Math.abs(Ie)>Math.abs(Fe)?Se+="l"+Fe*xe.pxmid[0]/xe.pxmid[1]+","+Fe+"H"+(me+xe.labelExtraX+Me):Se+="l"+xe.labelExtraX+","+Ie+"v"+(Fe-Ie)+"h"+Me}else Se+="V"+(xe.yLabelMid+xe.labelExtraY)+"h"+Me;n.ensureSingle(Ee,"path","textline").call(h.stroke,_e.outsidetextfont.color).attr({"stroke-width":Math.min(2,_e.outsidetextfont.size/8),d:Se,fill:"none"})}else Ee.select("path.textline").remove()}),q&&ee.automargin){var ne=e.bBox(B.node()),se=ee.domain,le=(Z.w*(se.x[1]-se.x[0])*.5-H.r)/Z.w,de=(Z.h*(se.y[1]-se.y[0])*.5-H.r)/Z.h;v.autoMargin(X,"pie."+ee.uid+".automargin",{xl:se.x[0]-le,xr:se.x[1]+le,yb:se.y[0]-de,yt:se.y[1]+de,l:Math.max(H.cx-H.r-ne.left,0),r:Math.max(ne.right-(H.cx+H.r),0),b:Math.max(ne.bottom-(H.cy+H.r),0),t:Math.max(H.cy-H.r-ne.top,0),pad:5})}})});setTimeout(function(){re.selectAll("tspan").each(function(){var j=m.select(this);j.attr("dy")&&j.attr("dy",j.attr("dy"))})},0)},formatSliceLabel:N,transformInsideText:f,determineInsideTextFont:u,positionTitleOutside:P,prerenderTitles:x,layoutAreas:D,attachFxHandlers:g,computeTransform:V}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("./style_one"),b=y("../bar/uniform_text").resizeText;Q.exports=function(h){var e=h._fullLayout._pielayer.selectAll(".trace");b(h,e,"pie"),e.each(function(n){var r=n[0].trace,o=m.select(this);o.style({opacity:r.opacity}),o.selectAll("path.surface").each(function(t){m.select(this).call(v,t,r)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(y,Q,K){"use strict";var m=y("../../components/color"),v=y("./helpers").castOption;Q.exports=function(b,h,e){var n=e.marker.line,r=v(n.color,h.pts)||m.defaultLine,o=v(n.width,h.pts)||0;b.style("stroke-width",o).call(m.fill,h.color).call(m.stroke,r)}},{"../../components/color":367,"./helpers":915}],922:[function(y,Q,K){"use strict";var m=y("../scatter/attributes");Q.exports={x:m.x,y:m.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:m.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(y,Q,K){"use strict";var m=y("../../../stackgl_modules").gl_pointcloud2d,v=y("../../lib/str2rgbarray"),b=y("../../plots/cartesian/autorange").findExtremes,h=y("../scatter/get_trace_color");function e(r,o){this.scene=r,this.uid=o,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=m(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var n=e.prototype;n.handlePick=function(r){var o=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*o],this.pickXYData[2*o+1]]:[this.pickXData[o],this.pickYData[o]],textLabel:Array.isArray(this.textLabels)?this.textLabels[o]:this.textLabels,color:this.color,name:this.name,pointIndex:o,hoverinfo:this.hoverinfo}},n.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=h(r,{})},n.updateFast=function(r){var o,t,d,a,i,s,c=this.xData=this.pickXData=r.x,l=this.yData=this.pickYData=r.y,p=this.pickXYData=r.xy,u=r.indices,x=this.bounds;if(p){if(d=p,o=p.length>>>1,r.xbounds&&r.ybounds)x[0]=r.xbounds[0],x[2]=r.xbounds[1],x[1]=r.ybounds[0],x[3]=r.ybounds[1];else for(s=0;s<o;s++)i=d[2*s+1],(a=d[2*s])<x[0]&&(x[0]=a),a>x[2]&&(x[2]=a),i<x[1]&&(x[1]=i),i>x[3]&&(x[3]=i);if(u)t=u;else for(t=new Int32Array(o),s=0;s<o;s++)t[s]=s}else for(o=c.length,d=new Float32Array(2*o),t=new Int32Array(o),s=0;s<o;s++)a=c[s],i=l[s],t[s]=s,d[2*s]=a,d[2*s+1]=i,a<x[0]&&(x[0]=a),a>x[2]&&(x[2]=a),i<x[1]&&(x[1]=i),i>x[3]&&(x[3]=i);this.idToIndex=t,this.pointcloudOptions.idToIndex=t,this.pointcloudOptions.positions=d;var f=v(r.marker.color),T=v(r.marker.border.color),_=r.opacity*r.marker.opacity;f[3]*=_,this.pointcloudOptions.color=f;var k=r.marker.blend;null===k&&(k=c.length<100||l.length<100),this.pointcloudOptions.blend=k,T[3]*=_,this.pointcloudOptions.borderColor=T;var w=r.marker.sizemin,C=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=w,this.pointcloudOptions.sizeMax=C,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var A=this.scene.xaxis,O=this.scene.yaxis,P=C/2||.5;r._extremes[A._id]=b(A,[x[0],x[2]],{ppad:P}),r._extremes[O._id]=b(O,[x[1],x[3]],{ppad:P})},n.dispose=function(){this.pointcloud.dispose()},Q.exports=function(r,o){var t=new e(r,o.uid);return t.update(o),t}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes");Q.exports=function(b,h,e){function n(r,o){return m.coerce(b,h,v,r,o)}n("x"),n("y"),n("xbounds"),n("ybounds"),b.xy&&b.xy instanceof Float32Array&&(h.xy=b.xy),b.indices&&b.indices instanceof Int32Array&&(h.indices=b.indices),n("text"),n("marker.color",e),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",e),n("marker.border.arearatio"),h._length=null}},{"../../lib":515,"./attributes":922}],925:[function(y,Q,K){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("../scatter3d/calc"),plot:y("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:y("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(y,Q,K){"use strict";var m=y("../../plots/font_attributes"),v=y("../../plots/attributes"),b=y("../../components/color/attributes"),h=y("../../components/fx/attributes"),e=y("../../plots/domain").attributes,n=y("../../plots/template_attributes").hovertemplateAttrs,r=y("../../components/colorscale/attributes"),o=y("../../plot_api/plot_template").templatedArray,t=y("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,d=y("../../lib/extend").extendFlat,a=y("../../plot_api/edit_types").overrideAll;(Q.exports=a({hoverinfo:d({},v.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:h.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:t("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:m({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:h.hoverlabel,hovertemplate:n({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:h.hoverlabel,hovertemplate:n({},{keys:["value","label"]}),colorscales:o("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:d(r().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(y,Q,K){"use strict";var m=y("../../plot_api/edit_types").overrideAll,v=y("../../plots/get_data").getModuleCalcData,b=y("./plot"),h=y("../../components/fx/layout_attributes"),e=y("../../lib/setcursor"),n=y("../../components/dragelement"),r=y("../../components/selections").prepSelect,o=y("../../lib"),t=y("../../registry");function d(a,i){var s=a._fullData[i],c=a._fullLayout,l=c.dragmode,g=s._bgRect;if(g&&"pan"!==l&&"zoom"!==l){e(g,"pan"===c.dragmode?"move":"crosshair");var u={_id:"x",c2p:o.identity,_offset:s._sankey.translateX,_length:s._sankey.width},x={_id:"y",c2p:o.identity,_offset:s._sankey.translateY,_length:s._sankey.height},f={gd:a,element:g.node(),plotinfo:{id:i,xaxis:u,yaxis:x,fillRangeItems:o.noop},subplot:i,xaxes:[u],yaxes:[x],doneFnCompleted:function(T){var _,k=a._fullData[i],w=k.node.groups.slice(),C=[];function A(E){for(var D=k._sankey.graph.nodes,z=0;z<D.length;z++)if(D[z].pointNumber===E)return D[z]}for(var O=0;O<T.length;O++){var P=A(T[O].pointNumber);if(P)if(P.group){for(var S=0;S<P.childrenNodes.length;S++)C.push(P.childrenNodes[S].pointNumber);w[P.pointNumber-k.node._count]=!1}else C.push(P.pointNumber)}_=w.filter(Boolean).concat([C]),t.call("_guiRestyle",a,{"node.groups":[_]},i)},prepFn:function(T,_,k){r(T,_,k,f,l)}};n.init(f)}}K.name="sankey",K.baseLayoutAttrOverrides=m({hoverlabel:h.hoverlabel},"plot","nested"),K.plot=function(a){var i=v(a.calcdata,"sankey")[0];b(a,i),K.updateFx(a)},K.clean=function(a,i,s,c){var l=c._has&&c._has("sankey"),p=i._has&&i._has("sankey");l&&!p&&(c._paperdiv.selectAll(".sankey").remove(),c._paperdiv.selectAll(".bgsankey").remove())},K.updateFx=function(a){for(var i=0;i<a._fullData.length;i++)d(a,i)}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(y,Q,K){"use strict";var m=y("strongly-connected-components"),v=y("../../lib"),b=y("../../lib/gup").wrap,h=v.isArrayOrTypedArray,e=v.isIndex,n=y("../../components/colorscale");Q.exports=function(o,t){var d=function r(o){var t,d=o.node,a=o.link,i=[],s=h(a.color),c=h(a.customdata),l={},p={},g=a.colorscales.length;for(t=0;t<g;t++){var u=a.colorscales[t],x=n.extractScale(u,{cLetter:"c"}),f=n.makeColorScaleFunc(x);p[u.label]=f}var T=0;for(t=0;t<a.value.length;t++)a.source[t]>T&&(T=a.source[t]),a.target[t]>T&&(T=a.target[t]);var _,k=T+1;o.node._count=k;var w=o.node.groups,C={};for(t=0;t<w.length;t++){var A=w[t];for(_=0;_<A.length;_++){var O=A[_],P=k+t;C.hasOwnProperty(O)?v.warn("Node "+O+" is already part of a group."):C[O]=P}}var S={source:[],target:[]};for(t=0;t<a.value.length;t++){var E=a.value[t],D=a.source[t],z=a.target[t];if(E>0&&e(D,k)&&e(z,k)&&(!C.hasOwnProperty(D)||!C.hasOwnProperty(z)||C[D]!==C[z])){C.hasOwnProperty(z)&&(z=C[z]),C.hasOwnProperty(D)&&(D=C[D]),l[D=+D]=l[z=+z]=!0;var N="";a.label&&a.label[t]&&(N=a.label[t]);var V=null;N&&p.hasOwnProperty(N)&&(V=p[N]),i.push({pointNumber:t,label:N,color:s?a.color[t]:a.color,customdata:c?a.customdata[t]:a.customdata,concentrationscale:V,source:D,target:z,value:+E}),S.source.push(D),S.target.push(z)}}var X=k+w.length,J=h(d.color),G=h(d.customdata),Z=[];for(t=0;t<X;t++)l[t]&&Z.push({group:t>k-1,childrenNodes:[],pointNumber:t,label:d.label[t],color:J?d.color[t]:d.color,customdata:G?d.customdata[t]:d.customdata});var j=!1;return function(B,H,ee){for(var U=v.init2dArray(B,0),$=0;$<Math.min(H.length,ee.length);$++)if(v.isIndex(H[$],B)&&v.isIndex(ee[$],B)){if(H[$]===ee[$])return!0;U[H[$]].push(ee[$])}return m(U).components.some(function(q){return q.length>1})}(X,S.source,S.target)&&(j=!0),{circular:j,links:i,nodes:Z,groups:w,groupLookup:C}}(t);return b({circular:d.circular,_nodes:d.nodes,_links:d.links,_groups:d.groups,_groupLookup:d.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(y,Q,K){"use strict";Q.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("../../components/color"),h=y("tinycolor2"),e=y("../../plots/domain").defaults,n=y("../../components/fx/hoverlabel_defaults"),r=y("../../plot_api/plot_template"),o=y("../../plots/array_container_defaults");function t(d,a){function i(s,c){return m.coerce(d,a,v.link.colorscales,s,c)}i("label"),i("cmin"),i("cmax"),i("colorscale")}Q.exports=function(d,a,i,s){function c(C,A){return m.coerce(d,a,v,C,A)}var l=m.extendDeep(s.hoverlabel,d.hoverlabel),p=d.node,g=r.newContainer(a,"node");function u(C,A){return m.coerce(p,g,v.node,C,A)}u("label"),u("groups"),u("x"),u("y"),u("pad"),u("thickness"),u("line.color"),u("line.width"),u("hoverinfo",d.hoverinfo),n(p,g,u,l),u("hovertemplate");var x=s.colorway;u("color",g.label.map(function(C,A){return b.addOpacity(x[A%x.length],.8)})),u("customdata");var f=d.link||{},T=r.newContainer(a,"link");function _(C,A){return m.coerce(f,T,v.link,C,A)}_("label"),_("arrowlen"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",d.hoverinfo),n(f,T,_,l),_("hovertemplate");var k,w=h(s.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",m.repeat(w,T.value.length)),_("customdata"),o(f,T,{name:"colorscales",handleItemDefaults:t}),e(a,s,c),c("orientation"),c("valueformat"),c("valuesuffix"),g.x.length&&g.y.length&&(k="freeform"),c("arrangement",k),m.coerceFont(c,"textfont",m.extendFlat({},s.font)),a._length=null}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),moduleType:"trace",name:"sankey",basePlotModule:y("./base_plot"),selectPoints:y("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=v.numberFormat,h=y("./render"),e=y("../../components/fx"),n=y("../../components/color"),r=y("./constants").cn,o=v._;function t(f){return""!==f}function d(f,T){return f.filter(function(_){return _.key===T.traceId})}function a(f,T){m.select(f).select("path").style("fill-opacity",T),m.select(f).select("rect").style("fill-opacity",T)}function i(f){m.select(f).select("text.name").style("fill","black")}function s(f){return function(T){return-1!==f.node.sourceLinks.indexOf(T.link)||-1!==f.node.targetLinks.indexOf(T.link)}}function c(f){return function(T){return-1!==T.node.sourceLinks.indexOf(f.link)||-1!==T.node.targetLinks.indexOf(f.link)}}function l(f,T,_){T&&_&&d(_,T).selectAll("."+r.sankeyLink).filter(s(T)).call(g.bind(0,T,_,!1))}function p(f,T,_){T&&_&&d(_,T).selectAll("."+r.sankeyLink).filter(s(T)).call(u.bind(0,T,_,!1))}function g(f,T,_,k){var w=k.datum().link.label;k.style("fill-opacity",function(C){if(!C.link.concentrationscale)return.4}),w&&d(T,f).selectAll("."+r.sankeyLink).filter(function(C){return C.link.label===w}).style("fill-opacity",function(C){if(!C.link.concentrationscale)return.4}),_&&d(T,f).selectAll("."+r.sankeyNode).filter(c(f)).call(l)}function u(f,T,_,k){var w=k.datum().link.label;k.style("fill-opacity",function(C){return C.tinyColorAlpha}),w&&d(T,f).selectAll("."+r.sankeyLink).filter(function(C){return C.link.label===w}).style("fill-opacity",function(C){return C.tinyColorAlpha}),_&&d(T,f).selectAll(r.sankeyNode).filter(c(f)).call(p)}function x(f,T){var k=v.nestedProperty(f.hoverlabel||{},T).get();return!Array.isArray(k)&&k}Q.exports=function(f,T){for(var _=f._fullLayout,k=_._paper,w=_._size,C=0;C<f._fullData.length;C++)if(f._fullData[C].visible&&f._fullData[C].type===r.sankey&&!f._fullData[C]._viewInitial){var A=f._fullData[C].node;f._fullData[C]._viewInitial={node:{groups:A.groups.slice(),x:A.x.slice(),y:A.y.slice()}}}var O=o(f,"source:")+" ",P=o(f,"target:")+" ",S=o(f,"concentration:")+" ",E=o(f,"incoming flow count:")+" ",D=o(f,"outgoing flow count:")+" ";h(f,k,T,{width:w.w,height:w.h,margin:{t:w.t,r:w.r,b:w.b,l:w.l}},{linkEvents:{hover:function(z,N,V){!1!==f._fullLayout.hovermode&&(m.select(z).call(g.bind(0,N,V,!0)),"skip"!==N.link.trace.link.hoverinfo&&(N.link.fullData=N.link.trace,f.emit("plotly_hover",{event:m.event,points:[N.link]})))},follow:function(z,N){if(!1!==f._fullLayout.hovermode){var V=N.link.trace.link;if("none"!==V.hoverinfo&&"skip"!==V.hoverinfo){for(var X=[],J=0,G=0;G<N.flow.links.length;G++){var Z=N.flow.links[G];if("closest"!==f._fullLayout.hovermode||N.link.pointNumber===Z.pointNumber){N.link.pointNumber===Z.pointNumber&&(J=G),Z.fullData=Z.trace,V=N.link.trace.link;var re=B(Z),j={valueLabel:b(N.valueFormat)(Z.value)+N.valueSuffix};X.push({x:re[0],y:re[1],name:j.valueLabel,text:[Z.label||"",O+Z.source.label,P+Z.target.label,Z.concentrationscale?S+b("%0.2f")(Z.flow.labelConcentration):""].filter(t).join("<br>"),color:x(V,"bgcolor")||n.addOpacity(Z.color,1),borderColor:x(V,"bordercolor"),fontFamily:x(V,"font.family"),fontSize:x(V,"font.size"),fontColor:x(V,"font.color"),nameLength:x(V,"namelength"),textAlign:x(V,"align"),idealAlign:m.event.x<re[0]?"right":"left",hovertemplate:V.hovertemplate,hovertemplateLabels:j,eventData:[Z]})}}e.loneHover(X,{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:f,anchorIndex:J}).each(function(){N.link.concentrationscale||a(this,.65),i(this)})}}function B(H){var ee,U;H.circular?(ee=(H.circularPathData.leftInnerExtent+H.circularPathData.rightInnerExtent)/2,U=H.circularPathData.verticalFullExtent):(ee=(H.source.x1+H.target.x0)/2,U=(H.y0+H.y1)/2);var $=[ee,U];return"v"===H.trace.orientation&&$.reverse(),$[0]+=N.parent.translateX,$[1]+=N.parent.translateY,$}},unhover:function(z,N,V){!1!==f._fullLayout.hovermode&&(m.select(z).call(u.bind(0,N,V,!0)),"skip"!==N.link.trace.link.hoverinfo&&(N.link.fullData=N.link.trace,f.emit("plotly_unhover",{event:m.event,points:[N.link]})),e.loneUnhover(_._hoverlayer.node()))},select:function(z,N){var V=N.link;V.originalEvent=m.event,f._hoverdata=[V],e.click(f,{target:!0})}},nodeEvents:{hover:function(z,N,V){!1!==f._fullLayout.hovermode&&(m.select(z).call(l,N,V),"skip"!==N.node.trace.node.hoverinfo&&(N.node.fullData=N.node.trace,f.emit("plotly_hover",{event:m.event,points:[N.node]})))},follow:function(z,N){if(!1!==f._fullLayout.hovermode){var V=N.node.trace.node;if("none"!==V.hoverinfo&&"skip"!==V.hoverinfo){var X=m.select(z).select("."+r.nodeRect),J=f._fullLayout._paperdiv.node().getBoundingClientRect(),G=X.node().getBoundingClientRect(),Z=G.left-2-J.left,re=G.right+2-J.left,j=G.top+G.height/4-J.top,B={valueLabel:b(N.valueFormat)(N.node.value)+N.valueSuffix};N.node.fullData=N.node.trace,f._fullLayout._calcInverseTransform(f);var H=f._fullLayout._invScaleX,U=e.loneHover({x0:H*Z,x1:H*re,y:f._fullLayout._invScaleY*j,name:b(N.valueFormat)(N.node.value)+N.valueSuffix,text:[N.node.label,E+N.node.targetLinks.length,D+N.node.sourceLinks.length].filter(t).join("<br>"),color:x(V,"bgcolor")||N.tinyColorHue,borderColor:x(V,"bordercolor"),fontFamily:x(V,"font.family"),fontSize:x(V,"font.size"),fontColor:x(V,"font.color"),nameLength:x(V,"namelength"),textAlign:x(V,"align"),idealAlign:"left",hovertemplate:V.hovertemplate,hovertemplateLabels:B,eventData:[N.node]},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:f});a(U,.85),i(U)}}},unhover:function(z,N,V){!1!==f._fullLayout.hovermode&&(m.select(z).call(p,N,V),"skip"!==N.node.trace.node.hoverinfo&&(N.node.fullData=N.node.trace,f.emit("plotly_unhover",{event:m.event,points:[N.node]})),e.loneUnhover(_._hoverlayer.node()))},select:function(z,N,V){var X=N.node;X.originalEvent=m.event,f._hoverdata=[X],m.select(z).call(p,N,V),e.click(f,{target:!0})}}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(y,Q,K){"use strict";var m=y("d3-force"),v=y("d3-interpolate").interpolateNumber,b=y("@plotly/d3"),h=y("@plotly/d3-sankey"),e=y("@plotly/d3-sankey-circular"),n=y("./constants"),r=y("tinycolor2"),o=y("../../components/color"),t=y("../../components/drawing"),d=y("../../lib"),a=d.strTranslate,i=d.strRotate,s=y("../../lib/gup"),c=s.keyFun,l=s.repeat,p=s.unwrap,g=y("../../lib/svg_text_utils"),u=y("../../registry"),x=y("../../constants/alignment"),f=x.CAP_SHIFT,T=x.LINE_SPACING;function _(G,Z,re){var j,B=p(Z),H=B.trace,ee=H.domain,U="h"===H.orientation,$=H.node.pad,q=H.node.thickness,te=G.width*(ee.x[1]-ee.x[0]),ne=G.height*(ee.y[1]-ee.y[0]),se=B._nodes,ie=B._links,ue=B.circular;(j=ue?e.sankeyCircular().circularLinkGap(0):h.sankey()).iterations(n.sankeyIterations).size(U?[te,ne]:[ne,te]).nodeWidth(q).nodePadding($).nodeId(function(Ie){return Ie.pointNumber}).nodes(se).links(ie);var le,de,be,_e=j();for(var xe in j.nodePadding()<$&&d.warn("node.pad was reduced to ",j.nodePadding()," to fit within the figure."),B._groupLookup){var Ee,he=parseInt(B._groupLookup[xe]);for(le=0;le<_e.nodes.length;le++)if(_e.nodes[le].pointNumber===he){Ee=_e.nodes[le];break}if(Ee){var me={pointNumber:parseInt(xe),x0:Ee.x0,x1:Ee.x1,y0:Ee.y0,y1:Ee.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};_e.nodes.unshift(me),Ee.childrenNodes.unshift(me)}}if(function(){for(le=0;le<_e.nodes.length;le++){var Ie,Fe,Ne=_e.nodes[le],De={};for(de=0;de<Ne.targetLinks.length;de++)Ie=(Fe=Ne.targetLinks[de]).source.pointNumber+":"+Fe.target.pointNumber,De.hasOwnProperty(Ie)||(De[Ie]=[]),De[Ie].push(Fe);var $e=Object.keys(De);for(de=0;de<$e.length;de++){var Re=De[Ie=$e[de]],ze=0,Ue={};for(be=0;be<Re.length;be++)Ue[(Fe=Re[be]).label]||(Ue[Fe.label]=0),Ue[Fe.label]+=Fe.value,ze+=Fe.value;for(be=0;be<Re.length;be++)(Fe=Re[be]).flow={value:ze,labelConcentration:Ue[Fe.label]/ze,concentration:Fe.value/ze,links:Re},Fe.concentrationscale&&(Fe.color=r(Fe.concentrationscale(Fe.flow.labelConcentration)))}var je=0;for(de=0;de<Ne.sourceLinks.length;de++)je+=Ne.sourceLinks[de].value;for(de=0;de<Ne.sourceLinks.length;de++)(Fe=Ne.sourceLinks[de]).concentrationOut=Fe.value/je;var rt=0;for(de=0;de<Ne.targetLinks.length;de++)rt+=Ne.targetLinks[de].value;for(de=0;de<Ne.targetLinks.length;de++)(Fe=Ne.targetLinks[de]).concenrationIn=Fe.value/rt}}(),H.node.x.length&&H.node.y.length){for(le=0;le<Math.min(H.node.x.length,H.node.y.length,_e.nodes.length);le++)if(H.node.x[le]&&H.node.y[le]){var Se=[H.node.x[le]*te,H.node.y[le]*ne];_e.nodes[le].x0=Se[0]-q/2,_e.nodes[le].x1=Se[0]+q/2;var Me=_e.nodes[le].y1-_e.nodes[le].y0;_e.nodes[le].y0=Se[1]-Me/2,_e.nodes[le].y1=Se[1]+Me/2}"snap"===H.arrangement&&function(Ie){var Fe,Ne,De=Ie.map(function(je,rt){return{x0:je.x0,index:rt}}).sort(function(je,rt){return je.x0-rt.x0}),$e=[],Re=-1,ze=-1/0;for(le=0;le<De.length;le++){var Ue=Ie[De[le].index];Ue.x0>ze+q&&(Re+=1,Fe=Ue.x0),ze=Ue.x0,$e[Re]||($e[Re]=[]),$e[Re].push(Ue),Ue.x0+=Ne=Fe-Ue.x0,Ue.x1+=Ne}return $e}(se=_e.nodes).forEach(function(Fe){var Ne,De,$e,Re=0,ze=Fe.length;for(Fe.sort(function(Ue,je){return Ue.y0-je.y0}),$e=0;$e<ze;++$e)(Ne=Fe[$e]).y0>=Re||(De=Re-Ne.y0)>1e-6&&(Ne.y0+=De,Ne.y1+=De),Re=Ne.y1+$}),j.update(_e)}return{circular:ue,key:re,trace:H,guid:d.randstr(),horizontal:U,width:te,height:ne,nodePad:H.node.pad,nodeLineColor:H.node.line.color,nodeLineWidth:H.node.line.width,linkLineColor:H.link.line.color,linkLineWidth:H.link.line.width,linkArrowLength:H.link.arrowlen,valueFormat:H.valueformat,valueSuffix:H.valuesuffix,textFont:H.textfont,translateX:ee.x[0]*G.width+G.margin.l,translateY:G.height-ee.y[1]*G.height+G.margin.t,dragParallel:U?ne:te,dragPerpendicular:U?te:ne,arrangement:H.arrangement,sankey:j,graph:_e,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function k(G,Z,re){var j=r(Z.color),B=Z.source.label+"|"+Z.target.label+"__"+re;return Z.trace=G.trace,Z.curveNumber=G.trace.index,{circular:G.circular,key:B,traceId:G.key,pointNumber:Z.pointNumber,link:Z,tinyColorHue:o.tinyRGB(j),tinyColorAlpha:j.getAlpha(),linkPath:w,linkLineColor:G.linkLineColor,linkLineWidth:G.linkLineWidth,linkArrowLength:G.linkArrowLength,valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,parent:G,interactionState:G.interactionState,flow:Z.flow}}function w(){return function(G){var de,be,_e,xe,Z=G.linkArrowLength;if(G.link.circular)return be=Z,_e=(de=G.link).width/2,xe=de.circularPathData,"top"===de.circularLinkType?"M "+(xe.targetX-be)+" "+(xe.targetY+_e)+" L"+(xe.rightInnerExtent-be)+" "+(xe.targetY+_e)+"A"+(xe.rightLargeArcRadius+_e)+" "+(xe.rightSmallArcRadius+_e)+" 0 0 1 "+(xe.rightFullExtent-_e-be)+" "+(xe.targetY-xe.rightSmallArcRadius)+"L"+(xe.rightFullExtent-_e-be)+" "+xe.verticalRightInnerExtent+"A"+(xe.rightLargeArcRadius+_e)+" "+(xe.rightLargeArcRadius+_e)+" 0 0 1 "+(xe.rightInnerExtent-be)+" "+(xe.verticalFullExtent-_e)+"L"+xe.leftInnerExtent+" "+(xe.verticalFullExtent-_e)+"A"+(xe.leftLargeArcRadius+_e)+" "+(xe.leftLargeArcRadius+_e)+" 0 0 1 "+(xe.leftFullExtent+_e)+" "+xe.verticalLeftInnerExtent+"L"+(xe.leftFullExtent+_e)+" "+(xe.sourceY-xe.leftSmallArcRadius)+"A"+(xe.leftLargeArcRadius+_e)+" "+(xe.leftSmallArcRadius+_e)+" 0 0 1 "+xe.leftInnerExtent+" "+(xe.sourceY+_e)+"L"+xe.sourceX+" "+(xe.sourceY+_e)+"L"+xe.sourceX+" "+(xe.sourceY-_e)+"L"+xe.leftInnerExtent+" "+(xe.sourceY-_e)+"A"+(xe.leftLargeArcRadius-_e)+" "+(xe.leftSmallArcRadius-_e)+" 0 0 0 "+(xe.leftFullExtent-_e)+" "+(xe.sourceY-xe.leftSmallArcRadius)+"L"+(xe.leftFullExtent-_e)+" "+xe.verticalLeftInnerExtent+"A"+(xe.leftLargeArcRadius-_e)+" "+(xe.leftLargeArcRadius-_e)+" 0 0 0 "+xe.leftInnerExtent+" "+(xe.verticalFullExtent+_e)+"L"+(xe.rightInnerExtent-be)+" "+(xe.verticalFullExtent+_e)+"A"+(xe.rightLargeArcRadius-_e)+" "+(xe.rightLargeArcRadius-_e)+" 0 0 0 "+(xe.rightFullExtent+_e-be)+" "+xe.verticalRightInnerExtent+"L"+(xe.rightFullExtent+_e-be)+" "+(xe.targetY-xe.rightSmallArcRadius)+"A"+(xe.rightLargeArcRadius-_e)+" "+(xe.rightSmallArcRadius-_e)+" 0 0 0 "+(xe.rightInnerExtent-be)+" "+(xe.targetY-_e)+"L"+(xe.targetX-be)+" "+(xe.targetY-_e)+(be>0?"L"+xe.targetX+" "+xe.targetY:"")+"Z":"M "+(xe.targetX-be)+" "+(xe.targetY-_e)+" L"+(xe.rightInnerExtent-be)+" "+(xe.targetY-_e)+"A"+(xe.rightLargeArcRadius+_e)+" "+(xe.rightSmallArcRadius+_e)+" 0 0 0 "+(xe.rightFullExtent-_e-be)+" "+(xe.targetY+xe.rightSmallArcRadius)+"L"+(xe.rightFullExtent-_e-be)+" "+xe.verticalRightInnerExtent+"A"+(xe.rightLargeArcRadius+_e)+" "+(xe.rightLargeArcRadius+_e)+" 0 0 0 "+(xe.rightInnerExtent-be)+" "+(xe.verticalFullExtent+_e)+"L"+xe.leftInnerExtent+" "+(xe.verticalFullExtent+_e)+"A"+(xe.leftLargeArcRadius+_e)+" "+(xe.leftLargeArcRadius+_e)+" 0 0 0 "+(xe.leftFullExtent+_e)+" "+xe.verticalLeftInnerExtent+"L"+(xe.leftFullExtent+_e)+" "+(xe.sourceY+xe.leftSmallArcRadius)+"A"+(xe.leftLargeArcRadius+_e)+" "+(xe.leftSmallArcRadius+_e)+" 0 0 0 "+xe.leftInnerExtent+" "+(xe.sourceY-_e)+"L"+xe.sourceX+" "+(xe.sourceY-_e)+"L"+xe.sourceX+" "+(xe.sourceY+_e)+"L"+xe.leftInnerExtent+" "+(xe.sourceY+_e)+"A"+(xe.leftLargeArcRadius-_e)+" "+(xe.leftSmallArcRadius-_e)+" 0 0 1 "+(xe.leftFullExtent-_e)+" "+(xe.sourceY+xe.leftSmallArcRadius)+"L"+(xe.leftFullExtent-_e)+" "+xe.verticalLeftInnerExtent+"A"+(xe.leftLargeArcRadius-_e)+" "+(xe.leftLargeArcRadius-_e)+" 0 0 1 "+xe.leftInnerExtent+" "+(xe.verticalFullExtent-_e)+"L"+(xe.rightInnerExtent-be)+" "+(xe.verticalFullExtent-_e)+"A"+(xe.rightLargeArcRadius-_e)+" "+(xe.rightLargeArcRadius-_e)+" 0 0 1 "+(xe.rightFullExtent+_e-be)+" "+xe.verticalRightInnerExtent+"L"+(xe.rightFullExtent+_e-be)+" "+(xe.targetY+xe.rightSmallArcRadius)+"A"+(xe.rightLargeArcRadius-_e)+" "+(xe.rightSmallArcRadius-_e)+" 0 0 1 "+(xe.rightInnerExtent-be)+" "+(xe.targetY+_e)+"L"+(xe.targetX-be)+" "+(xe.targetY+_e)+(be>0?"L"+xe.targetX+" "+xe.targetY:"")+"Z";var re=Math.abs((G.link.target.x0-G.link.source.x1)/2);Z>re&&(Z=re);var j=G.link.source.x1,B=G.link.target.x0-Z,H=v(j,B),ee=H(.5),U=H(.5),$=G.link.y0-G.link.width/2,q=G.link.y0+G.link.width/2,te=G.link.y1-G.link.width/2,ne=G.link.y1+G.link.width/2,le=Z>0?"L"+(B+Z)+","+(te+G.link.width/2):"";return"M"+j+","+$+"C"+ee+","+$+" "+U+","+te+" "+B+","+te+(le+="L"+B+","+ne)+"C"+U+","+ne+" "+ee+","+q+" "+j+","+q+"Z"}}function C(G,Z){var re=r(Z.color),j=n.nodePadAcross,B=G.nodePad/2;Z.dx=Z.x1-Z.x0,Z.dy=Z.y1-Z.y0;var H=Z.dx,ee=Math.max(.5,Z.dy),U="node_"+Z.pointNumber;return Z.group&&(U=d.randstr()),Z.trace=G.trace,Z.curveNumber=G.trace.index,{index:Z.pointNumber,key:U,partOfGroup:Z.partOfGroup||!1,group:Z.group,traceId:G.key,trace:G.trace,node:Z,nodePad:G.nodePad,nodeLineColor:G.nodeLineColor,nodeLineWidth:G.nodeLineWidth,textFont:G.textFont,size:G.horizontal?G.height:G.width,visibleWidth:Math.ceil(H),visibleHeight:ee,zoneX:-j,zoneY:-B,zoneWidth:H+2*j,zoneHeight:ee+2*B,labelY:G.horizontal?Z.dy/2+1:Z.dx/2+1,left:1===Z.originalLayer,sizeAcross:G.width,forceLayouts:G.forceLayouts,horizontal:G.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:o.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,graph:G.graph,arrangement:G.arrangement,uniqueNodeLabelPathId:[G.guid,G.key,U].join("_"),interactionState:G.interactionState,figure:G}}function A(G){G.attr("transform",function(Z){return a(Z.node.x0.toFixed(3),Z.node.y0.toFixed(3))})}function O(G){G.call(A)}function P(G,Z){G.call(O),Z.attr("d",w())}function S(G){G.attr("width",function(Z){return Z.node.x1-Z.node.x0}).attr("height",function(Z){return Z.visibleHeight})}function E(G){return G.link.width>1||G.linkLineWidth>0}function D(G){return a(G.translateX,G.translateY)+(G.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function z(G,Z,re){G.on(".basic",null).on("mouseover.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(re.hover(this,j,Z),j.interactionState.hovered=[this,j])}).on("mousemove.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(re.follow(this,j),j.interactionState.hovered=[this,j])}).on("mouseout.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(re.unhover(this,j,Z),j.interactionState.hovered=!1)}).on("click.basic",function(j){j.interactionState.hovered&&(re.unhover(this,j,Z),j.interactionState.hovered=!1),j.interactionState.dragInProgress||j.partOfGroup||re.select(this,j,Z)})}function N(G,Z,re,j){var B=b.behavior.drag().origin(function(H){return{x:H.node.x0+H.visibleWidth/2,y:H.node.y0+H.visibleHeight/2}}).on("dragstart",function(H){if("fixed"!==H.arrangement&&(d.ensureSingle(j._fullLayout._infolayer,"g","dragcover",function(U){j._fullLayout._dragCover=U}),d.raiseToTop(this),H.interactionState.dragInProgress=H.node,X(H.node),H.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,H.interactionState.hovered),H.interactionState.hovered=!1),"snap"===H.arrangement)){var ee=H.traceId+"|"+H.key;H.forceLayouts[ee]?H.forceLayouts[ee].alpha(1):function(U,$,q,te){!function(se){for(var ie=0;ie<se.length;ie++)se[ie].y=(se[ie].y0+se[ie].y1)/2,se[ie].x=(se[ie].x0+se[ie].x1)/2}(q.graph.nodes);var ie,ue,le,ne=q.graph.nodes.filter(function(se){return se.originalX===q.node.originalX}).filter(function(se){return!se.partOfGroup});q.forceLayouts[$]=m.forceSimulation(ne).alphaDecay(0).force("collide",m.forceCollide().radius(function(se){return se.dy/2+q.nodePad/2}).strength(1).iterations(n.forceIterations)).force("constrain",(ie=$,ue=ne,le=q,function(){for(var de=0,be=0;be<ue.length;be++){var _e=ue[be];_e===le.interactionState.dragInProgress?(_e.x=_e.lastDraggedX,_e.y=_e.lastDraggedY):(_e.vx=(_e.originalX-_e.x)/n.forceTicksPerFrame,_e.y=Math.min(le.size-_e.dy/2,Math.max(_e.dy/2,_e.y))),de=Math.max(de,Math.abs(_e.vx),Math.abs(_e.vy))}!le.interactionState.dragInProgress&&de<.1&&le.forceLayouts[ie].alpha()>0&&le.forceLayouts[ie].alpha(0)})).stop()}(0,ee,H),U=G,$=Z,q=H,te=ee,ne=j,window.requestAnimationFrame(function se(){var ie;for(ie=0;ie<n.forceTicksPerFrame;ie++)q.forceLayouts[te].tick();if(function(le){for(var de=0;de<le.length;de++)le[de].y0=le[de].y-le[de].dy/2,le[de].y1=le[de].y0+le[de].dy,le[de].x0=le[de].x-le[de].dx/2,le[de].x1=le[de].x0+le[de].dx}(q.graph.nodes),q.sankey.update(q.graph),P(U.filter(J(q)),$),q.forceLayouts[te].alpha()>0)window.requestAnimationFrame(se);else{var ue=q.node.originalX;q.node.x0=ue-q.visibleWidth/2,q.node.x1=ue+q.visibleWidth/2,V(q,ne)}})}var U,$,q,te,ne}).on("drag",function(H){if("fixed"!==H.arrangement){var ee=b.event.x,U=b.event.y;"snap"===H.arrangement?(H.node.x0=ee-H.visibleWidth/2,H.node.x1=ee+H.visibleWidth/2,H.node.y0=U-H.visibleHeight/2,H.node.y1=U+H.visibleHeight/2):("freeform"===H.arrangement&&(H.node.x0=ee-H.visibleWidth/2,H.node.x1=ee+H.visibleWidth/2),U=Math.max(0,Math.min(H.size-H.visibleHeight/2,U)),H.node.y0=U-H.visibleHeight/2,H.node.y1=U+H.visibleHeight/2),X(H.node),"snap"!==H.arrangement&&(H.sankey.update(H.graph),P(G.filter(J(H)),Z))}}).on("dragend",function(H){if("fixed"!==H.arrangement){H.interactionState.dragInProgress=!1;for(var ee=0;ee<H.node.childrenNodes.length;ee++)H.node.childrenNodes[ee].x=H.node.x,H.node.childrenNodes[ee].y=H.node.y;"snap"!==H.arrangement&&V(H,j)}});G.on(".drag",null).call(B)}function V(G,Z){for(var re=[],j=[],B=0;B<G.graph.nodes.length;B++){var ee=(G.graph.nodes[B].y0+G.graph.nodes[B].y1)/2;re.push((G.graph.nodes[B].x0+G.graph.nodes[B].x1)/2/G.figure.width),j.push(ee/G.figure.height)}u.call("_guiRestyle",Z,{"node.x":[re],"node.y":[j]},G.trace.index).then(function(){Z._fullLayout._dragCover&&Z._fullLayout._dragCover.remove()})}function X(G){G.lastDraggedX=G.x0+G.dx/2,G.lastDraggedY=G.y0+G.dy/2}function J(G){return function(Z){return Z.node.originalX===G.node.originalX}}Q.exports=function(G,Z,re,j,B){var H=!1;d.ensureSingle(G._fullLayout._infolayer,"g","first-render",function(){H=!0});var ee=G._fullLayout._dragCover,U=re.filter(function(le){return p(le).trace.visible}).map(_.bind(null,j)),$=Z.selectAll("."+n.cn.sankey).data(U,c);$.exit().remove(),$.enter().append("g").classed(n.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",D),$.each(function(le,de){G._fullData[de]._sankey=le;var be="bgsankey-"+le.trace.uid+"-"+de;d.ensureSingle(G._fullLayout._draggers,"rect",be),G._fullData[de]._bgRect=b.select("."+be),G._fullData[de]._bgRect.style("pointer-events","all").attr("width",le.width).attr("height",le.height).attr("x",le.translateX).attr("y",le.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),$.transition().ease(n.ease).duration(n.duration).attr("transform",D);var q=$.selectAll("."+n.cn.sankeyLinks).data(l,c);q.enter().append("g").classed(n.cn.sankeyLinks,!0).style("fill","none");var te=q.selectAll("."+n.cn.sankeyLink).data(function(le){return le.graph.links.filter(function(de){return de.value}).map(k.bind(null,le))},c);te.enter().append("path").classed(n.cn.sankeyLink,!0).call(z,$,B.linkEvents),te.style("stroke",function(le){return E(le)?o.tinyRGB(r(le.linkLineColor)):le.tinyColorHue}).style("stroke-opacity",function(le){return E(le)?o.opacity(le.linkLineColor):le.tinyColorAlpha}).style("fill",function(le){return le.tinyColorHue}).style("fill-opacity",function(le){return le.tinyColorAlpha}).style("stroke-width",function(le){return E(le)?le.linkLineWidth:1}).attr("d",w()),te.style("opacity",function(){return G._context.staticPlot||H||ee?1:0}).transition().ease(n.ease).duration(n.duration).style("opacity",1),te.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var ne=$.selectAll("."+n.cn.sankeyNodeSet).data(l,c);ne.enter().append("g").classed(n.cn.sankeyNodeSet,!0),ne.style("cursor",function(le){switch(le.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var se=ne.selectAll("."+n.cn.sankeyNode).data(function(le){var de=le.graph.nodes;return function(be){var _e,xe=[];for(_e=0;_e<be.length;_e++)be[_e].originalX=(be[_e].x0+be[_e].x1)/2,be[_e].originalY=(be[_e].y0+be[_e].y1)/2,-1===xe.indexOf(be[_e].originalX)&&xe.push(be[_e].originalX);for(xe.sort(function(Ee,he){return Ee-he}),_e=0;_e<be.length;_e++)be[_e].originalLayerIndex=xe.indexOf(be[_e].originalX),be[_e].originalLayer=be[_e].originalLayerIndex/(xe.length-1)}(de),de.map(C.bind(null,le))},c);se.enter().append("g").classed(n.cn.sankeyNode,!0).call(A).style("opacity",function(le){return!G._context.staticPlot&&!H||le.partOfGroup?0:1}),se.call(z,$,B.nodeEvents).call(N,te,B,G),se.transition().ease(n.ease).duration(n.duration).call(A).style("opacity",function(le){return le.partOfGroup?0:1}),se.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var ie=se.selectAll("."+n.cn.nodeRect).data(l);ie.enter().append("rect").classed(n.cn.nodeRect,!0).call(S),ie.style("stroke-width",function(le){return le.nodeLineWidth}).style("stroke",function(le){return o.tinyRGB(r(le.nodeLineColor))}).style("stroke-opacity",function(le){return o.opacity(le.nodeLineColor)}).style("fill",function(le){return le.tinyColorHue}).style("fill-opacity",function(le){return le.tinyColorAlpha}),ie.transition().ease(n.ease).duration(n.duration).call(S);var ue=se.selectAll("."+n.cn.nodeLabel).data(l);ue.enter().append("text").classed(n.cn.nodeLabel,!0).style("cursor","default"),ue.attr("data-notex",1).text(function(le){return le.node.label}).each(function(le){var de=b.select(this);t.font(de,le.textFont),g.convertToTspans(de,G)}).style("text-shadow",g.makeTextShadow(G._fullLayout.paper_bgcolor)).attr("text-anchor",function(le){return le.horizontal&&le.left?"end":"start"}).attr("transform",function(le){var de=b.select(this),be=g.lineCount(de),xe=le.nodeLineWidth/2+3,Ee=((le.horizontal?le.visibleHeight:le.visibleWidth)-le.textFont.size*((be-1)*T-f))/2;le.horizontal&&(le.left?xe=-xe:xe+=le.visibleWidth);var he=le.horizontal?"":"scale(-1,1)"+i(90);return a(le.horizontal?xe:Ee,le.horizontal?Ee:xe)+he}),ue.transition().ease(n.ease).duration(n.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(y,Q,K){"use strict";Q.exports=function(m,v){for(var b=[],h=m.cd[0].trace,e=h._sankey.graph.nodes,n=0;n<e.length;n++){var r=e[n];if(!r.partOfGroup){var o=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];"v"===h.orientation&&o.reverse(),v&&v.contains(o,!1,n,m)&&b.push({pointNumber:r.pointNumber})}}return b}},{}],935:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b){for(var h=0;h<v.length;h++)v[h].i=h;m.mergeArray(b.text,v,"tx"),m.mergeArray(b.texttemplate,v,"txt"),m.mergeArray(b.hovertext,v,"htx"),m.mergeArray(b.customdata,v,"data"),m.mergeArray(b.textposition,v,"tp"),b.textfont&&(m.mergeArrayCastPositive(b.textfont.size,v,"ts"),m.mergeArray(b.textfont.color,v,"tc"),m.mergeArray(b.textfont.family,v,"tf"));var e=b.marker;if(e){m.mergeArrayCastPositive(e.size,v,"ms"),m.mergeArrayCastPositive(e.opacity,v,"mo"),m.mergeArray(e.symbol,v,"mx"),m.mergeArray(e.color,v,"mc");var n=e.line;e.line&&(m.mergeArray(n.color,v,"mlc"),m.mergeArrayCastPositive(n.width,v,"mlw"));var r=e.gradient;r&&"none"!==r.type&&(m.mergeArray(r.type,v,"mgt"),m.mergeArray(r.color,v,"mgc"))}}},{"../../lib":515}],936:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../plots/template_attributes").hovertemplateAttrs,h=y("../../components/colorscale/attributes"),e=y("../../plots/font_attributes"),n=y("../../components/drawing/attributes").dash,r=y("../../components/drawing/attributes").pattern,o=y("../../components/drawing"),t=y("./constants"),d=y("../../lib/extend").extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:m("x"),yhoverformat:m("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:v({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:b({},{keys:t.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:d({},n,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:r,marker:d({symbol:{valType:"enumerated",values:o.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:d({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},h("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},h("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../../plots/cartesian/axes"),h=y("../../plots/cartesian/align_period"),e=y("../../constants/numerical").BADNUM,n=y("./subtypes"),r=y("./colorscale_calc"),o=y("./arrays_to_calcdata"),t=y("./calc_selection");function d(l,p,g,u,x,f,T){var _=p._length,k=l._fullLayout,w=g._id,C=u._id,A=k._firstScatter[s(p)]===p.uid,O=(c(p,k,g,u)||{}).orientation,P=p.fill;g._minDtick=0,u._minDtick=0;var S={padded:!0},E={padded:!0};T&&(S.ppad=E.ppad=T);var D=_<2||x[0]!==x[_-1]||f[0]!==f[_-1];D&&("tozerox"===P||"tonextx"===P&&(A||"h"===O))?S.tozero=!0:(p.error_y||{}).visible||"tonexty"!==P&&"tozeroy"!==P&&(n.hasMarkers(p)||n.hasText(p))||(S.padded=!1,S.ppad=0),D&&("tozeroy"===P||"tonexty"===P&&(A||"v"===O))?E.tozero=!0:"tonextx"!==P&&"tozerox"!==P||(E.padded=!1),w&&(p._extremes[w]=b.findExtremes(g,x,S)),C&&(p._extremes[C]=b.findExtremes(u,f,E))}function a(l,p){if(n.hasMarkers(l)){var g,u=l.marker,x=1.6*(l.marker.sizeref||1);if(g="area"===l.marker.sizemode?function(w){return Math.max(Math.sqrt((w||0)/x),3)}:function(w){return Math.max((w||0)/x,3)},v.isArrayOrTypedArray(u.size)){var f={type:"linear"};b.setConvert(f);for(var T=f.makeCalcdata(l.marker,"size"),_=new Array(p),k=0;k<p;k++)_[k]=g(T[k]);return _}return g(u.size)}}function i(l,p){var g=s(p),u=l._firstScatter;u[g]||(u[g]=p.uid)}function s(l){var p=l.stackgroup;return l.xaxis+l.yaxis+l.type+(p?"-"+p:"")}function c(l,p,g,u){var x=l.stackgroup;if(x){var f=p._scatterStackOpts[g._id+u._id][x],T="v"===f.orientation?u:g;return"linear"===T.type||"log"===T.type?f:void 0}}Q.exports={calc:function(l,p){var g,u,x,f,T,_,k=l._fullLayout,w=b.getFromId(l,p.xaxis||"x"),C=b.getFromId(l,p.yaxis||"y"),A=w.makeCalcdata(p,"x"),O=C.makeCalcdata(p,"y"),P=h(p,w,"x",A),S=h(p,C,"y",O),E=P.vals,D=S.vals,z=p._length,N=new Array(z),V=p.ids,X=c(p,k,w,C),J=!1;i(k,p);var G,Z="x",re="y";X?(v.pushUnique(X.traceIndices,p._expandedIndex),(g="v"===X.orientation)?(re="s",G="x"):(Z="s",G="y"),T="interpolate"===X.stackgaps):d(l,p,w,C,E,D,a(p,z));var j=!!p.xperiodalignment,B=!!p.yperiodalignment;for(u=0;u<z;u++){var H=N[u]={},ee=m(E[u]),U=m(D[u]);ee&&U?(H[Z]=E[u],H[re]=D[u],j&&(H.orig_x=A[u],H.xEnd=P.ends[u],H.xStart=P.starts[u]),B&&(H.orig_y=O[u],H.yEnd=S.ends[u],H.yStart=S.starts[u])):X&&(g?ee:U)?(H[G]=g?E[u]:D[u],H.gap=!0,T?(H.s=e,J=!0):H.s=0):H[Z]=H[re]=e,V&&(H.id=String(V[u]))}if(o(N,p),r(l,p),t(N,p),X){for(u=0;u<N.length;)N[u][G]===e?N.splice(u,1):u++;if(v.sort(N,function(ne,se){return ne[G]-se[G]||ne.i-se.i}),J){for(u=0;u<N.length-1&&N[u].gap;)u++;for((_=N[u].s)||(_=N[u].s=0),x=0;x<u;x++)N[x].s=_;for(f=N.length-1;f>u&&N[f].gap;)f--;for(_=N[f].s,x=N.length-1;x>f;x--)N[x].s=_;for(;u<f;)if(N[++u].gap){for(x=u+1;N[x].gap;)x++;for(var $=N[u-1][G],q=N[u-1].s,te=(N[x].s-q)/(N[x][G]-$);u<x;)N[u].s=q+(N[u][G]-$)*te,u++}}}return N},calcMarkerSize:a,calcAxisExpansion:d,setFirstScatter:i,getStackOpts:c}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b){m.isArrayOrTypedArray(b.selectedpoints)&&m.tagSelected(v,b)}},{"../../lib":515}],939:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/helpers").hasColorscale,v=y("../../components/colorscale/calc"),b=y("./subtypes");Q.exports=function(h,e){b.hasLines(e)&&m(e,"line")&&v(h,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),b.hasMarkers(e)&&(m(e,"marker")&&v(h,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),m(e,"marker.line")&&v(h,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(y,Q,K){"use strict";Q.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(y,Q,K){"use strict";var m=y("./calc");function v(b,h,e,n,r,o,t){r[n]=!0;var i,s,l,p,g,d={i:null,gap:!0,s:0};if(d[t]=e,b.splice(h,0,d),h&&e===b[h-1][t]){var a=b[h-1];d.s=a.s,d.i=a.i,d.gap=a.gap}else o&&(d.s=(l=t,p=(i=b)[(s=h)-1],(g=i[s+1])?p?p.s+(g.s-p.s)*(e-p[l])/(g[l]-p[l]):g.s:p.s));h||(b[0].t=b[1].t,b[0].trace=b[1].trace,delete b[1].t,delete b[1].trace)}Q.exports=function(b,h){var e=h.xaxis,n=h.yaxis,o=b._fullLayout._scatterStackOpts[e._id+n._id];if(o){var t,d,a,i,s,c,l,p,g,u,x,f,T,_,k,w=b.calcdata;for(var C in o){var A=(u=o[C]).traceIndices;if(A.length){for(x="interpolate"===u.stackgaps,f=u.groupnorm,"v"===u.orientation?(T="x",_="y"):(T="y",_="x"),k=new Array(A.length),t=0;t<k.length;t++)k[t]=!1;c=w[A[0]];var O=new Array(c.length);for(t=0;t<c.length;t++)O[t]=c[t][T];for(t=1;t<A.length;t++){for(s=w[A[t]],d=a=0;d<s.length;d++){for(l=s[d][T];l>O[a]&&a<O.length;a++)v(s,d,O[a],t,k,x,T),d++;if(l!==O[a]){for(i=0;i<t;i++)v(w[A[i]],a,l,i,k,x,T);O.splice(a,0,l)}a++}for(;a<O.length;a++)v(s,d,O[a],t,k,x,T),d++}var P=O.length;for(d=0;d<c.length;d++){for(p=c[d][_]=c[d].s,t=1;t<A.length;t++)(s=w[A[t]])[0].trace._rawLength=s[0].trace._length,s[0].trace._length=P,s[d][_]=p+=s[d].s;if(f)for(g=("fraction"===f?p:p/100)||1,t=0;t<A.length;t++){var S=w[A[t]][d];S[_]/=g,S.sNorm=S.s/g}}for(t=0;t<A.length;t++){var E=(s=w[A[t]])[0].trace,D=m.calcMarkerSize(E,E._rawLength),z=Array.isArray(D);if(D&&k[t]||z){var N=D;for(D=new Array(P),d=0;d<P;d++)D[d]=s[d].gap?0:z?N[s[d].i]:N}var V=new Array(P),X=new Array(P);for(d=0;d<P;d++)V[d]=s[d].x,X[d]=s[d].y;m.calcAxisExpansion(b,E,e,n,V,X,D),s[0].t.orientation=u.orientation}}}}}},{"./calc":937}],942:[function(y,Q,K){"use strict";Q.exports=function(m){for(var v=0;v<m.length;v++){var b=m[v];if("scatter"===b.type){var h=b.fill;if("none"!==h&&"toself"!==h&&(b.opacity=void 0,"tonexty"===h||"tonextx"===h))for(var e=v-1;e>=0;e--){var n=m[e];if("scatter"===n.type&&n.xaxis===b.xaxis&&n.yaxis===b.yaxis){n.opacity=void 0;break}}}}}},{}],943:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../registry"),b=y("./attributes"),h=y("./constants"),e=y("./subtypes"),n=y("./xy_defaults"),r=y("./period_defaults"),o=y("./stack_defaults"),t=y("./marker_defaults"),d=y("./line_defaults"),a=y("./line_shape_defaults"),i=y("./text_defaults"),s=y("./fillcolor_defaults"),c=y("../../lib").coercePattern;Q.exports=function(l,p,g,u){function x(O,P){return m.coerce(l,p,b,O,P)}var f=n(l,p,u,x);if(f||(p.visible=!1),p.visible){r(l,p,u,x),x("xhoverformat"),x("yhoverformat");var T=o(l,p,u,x),_=!T&&f<h.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("mode",_),e.hasLines(p)&&(d(l,p,g,u,x),a(l,p,x),x("connectgaps"),x("line.simplify")),e.hasMarkers(p)&&t(l,p,g,u,x,{gradient:!0}),e.hasText(p)&&(x("texttemplate"),i(l,p,u,x));var k=[];(e.hasMarkers(p)||e.hasText(p))&&(x("cliponaxis"),x("marker.maxdisplayed"),k.push("points")),x("fill",T?T.fillDflt:"none"),"none"!==p.fill&&(s(l,p,g,x),e.hasLines(p)||a(l,p,x),c(x,"fillpattern",p.fillcolor,!1));var w=(p.line||{}).color,C=(p.marker||{}).color;"tonext"!==p.fill&&"toself"!==p.fill||k.push("fills"),x("hoveron",k.join("+")||"points"),"fills"!==p.hoveron&&x("hovertemplate");var A=v.getComponentMethod("errorbars","supplyDefaults");A(l,p,w||C||g,{axis:"y"}),A(l,p,w||C||g,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(p,x)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(y,Q,K){"use strict";var m=y("../../components/color"),v=y("../../lib").isArrayOrTypedArray;Q.exports=function(b,h,e,n){var r=!1;if(h.marker){var o=h.marker.color,t=(h.marker.line||{}).color;o&&!v(o)?r=o:t&&!v(t)&&(r=t)}n("fillcolor",m.addOpacity((h.line||{}).color||r||e,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes");Q.exports=function(v,b,h){var e={},n={_fullLayout:h},r=m.getFromTrace(n,b,"x"),o=m.getFromTrace(n,b,"y");return e.xLabel=m.tickText(r,r.c2l(v.x),!0).text,e.yLabel=m.tickText(o,o.c2l(v.y),!0).text,e}},{"../../plots/cartesian/axes":566}],946:[function(y,Q,K){"use strict";var m=y("../../components/color"),v=y("./subtypes");Q.exports=function(b,h){var e,n;if("lines"===b.mode)return(e=b.line.color)&&m.opacity(e)?e:b.fillcolor;if("none"===b.mode)return b.fill?b.fillcolor:"";var r=h.mcc||(b.marker||{}).color,o=h.mlcc||((b.marker||{}).line||{}).color;return(n=r&&m.opacity(r)?r:o&&m.opacity(o)&&(h.mlw||((b.marker||{}).line||{}).width)?o:"")?m.opacity(n)<.3?m.addOpacity(n,.3):n:(e=(b.line||{}).color)&&m.opacity(e)&&v.hasLines(b)&&b.line.width?e:b.fillcolor}},{"../../components/color":367,"./subtypes":961}],947:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/fx"),b=y("../../registry"),h=y("./get_trace_color"),e=y("../../components/color"),n=m.fillText;Q.exports=function(r,o,t,d){var a=r.cd,i=a[0].trace,s=r.xa,c=r.ya,l=s.c2p(o),p=c.c2p(t),g=[l,p],u=i.hoveron||"",x=-1!==i.mode.indexOf("markers")?3:.5,f=!!i.xperiodalignment,T=!!i.yperiodalignment;if(-1!==u.indexOf("points")){var _=function(ie){var ue=Math.max(x,ie.mrc||0),le=s.c2p(ie.x)-l,de=c.c2p(ie.y)-p;return Math.max(Math.sqrt(le*le+de*de)-ue,1-x/ue)},k=v.getDistanceFunction(d,function(ie){if(f){var ue=s.c2p(ie.xStart),le=s.c2p(ie.xEnd);return l>=Math.min(ue,le)&&l<=Math.max(ue,le)?0:1/0}var de=Math.max(3,ie.mrc||0),be=1-1/de,_e=Math.abs(s.c2p(ie.x)-l);return _e<de?be*_e/de:_e-de+be},function(ie){if(T){var ue=c.c2p(ie.yStart),le=c.c2p(ie.yEnd);return p>=Math.min(ue,le)&&p<=Math.max(ue,le)?0:1/0}var de=Math.max(3,ie.mrc||0),be=1-1/de,_e=Math.abs(c.c2p(ie.y)-p);return _e<de?be*_e/de:_e-de+be},_);if(v.getClosest(a,k,r),!1!==r.index){var w=a[r.index],C=s.c2p(w.x,!0),A=c.c2p(w.y,!0),O=w.mrc||1;r.index=w.i;var P=a[0].t.orientation,S=P&&(w.sNorm||w.s),E="h"===P?S:void 0!==w.orig_x?w.orig_x:w.x,D="v"===P?S:void 0!==w.orig_y?w.orig_y:w.y;return m.extendFlat(r,{color:h(i,w),x0:C-O,x1:C+O,xLabelVal:E,y0:A-O,y1:A+O,yLabelVal:D,spikeDistance:_(w),hovertemplate:i.hovertemplate}),n(w,i,r),b.getComponentMethod("errorbars","hoverInfo")(w,i,r),[r]}}if(-1!==u.indexOf("fills")&&i._polygons){var z,N,V,X,J,G,re,j,B=i._polygons,H=[],ee=!1,U=1/0,$=-1/0,q=1/0,te=-1/0;for(z=0;z<B.length;z++)(V=B[z]).contains(g)&&(ee=!ee,H.push(V),q=Math.min(q,V.ymin),te=Math.max(te,V.ymax));if(ee){var ne=((q=Math.max(q,0))+(te=Math.min(te,c._length)))/2;for(z=0;z<H.length;z++)for(X=H[z].pts,N=1;N<X.length;N++)(re=X[N-1][1])>ne!=(j=X[N][1])>=ne&&(G=X[N-1][0],j-re&&(J=G+(X[N][0]-G)*(ne-re)/(j-re),U=Math.min(U,J),$=Math.max($,J)));U=Math.max(U,0),$=Math.min($,s._length);var se=e.defaultLine;return e.opacity(i.fillcolor)?se=i.fillcolor:e.opacity((i.line||{}).color)&&(se=i.line.color),m.extendFlat(r,{distance:r.maxHoverDistance,x0:U,x1:$,y0:ne,y1:ne,color:se,hovertemplate:!1}),delete r.index,r.text=i.text&&!Array.isArray(i.text)?String(i.text):i.name,[r]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(y,Q,K){"use strict";var m=y("./subtypes");Q.exports={hasLines:m.hasLines,hasMarkers:m.hasMarkers,hasText:m.hasText,isBubble:m.isBubble,attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("./cross_trace_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./cross_trace_calc"),arraysToCalcdata:y("./arrays_to_calcdata"),plot:y("./plot"),colorbar:y("./marker_colorbar"),formatLabels:y("./format_labels"),style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(y,Q,K){"use strict";var m=y("../../lib").isArrayOrTypedArray,v=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults");Q.exports=function(h,e,n,r,o,t){var d=(h.marker||{}).color;o("line.color",n),v(h,"line")?b(h,e,r,o,{prefix:"line.",cLetter:"c"}):o("line.color",!m(d)&&d||n),o("line.width"),(t||{}).noDash||o("line.dash")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(y,Q,K){"use strict";var m=y("../../constants/numerical"),v=m.BADNUM,b=m.LOG_CLIP,h=b+.5,e=b-.5,n=y("../../lib"),r=n.segmentsIntersect,o=n.constrain,t=y("./constants");Q.exports=function(d,a){var i,s,c,l,p,g,u,x,f,T,_,k,w,C,A,O,P,S,E=a.xaxis,D=a.yaxis,z="log"===E.type,N="log"===D.type,V=E._length,X=D._length,J=a.connectGaps,G=a.baseTolerance,Z=a.shape,re="linear"===Z,j=a.fill&&"none"!==a.fill,B=[],H=t.minTolerance,ee=d.length,U=new Array(ee),$=0;function q(je){var rt=d[je];if(!rt)return!1;var ut=a.linearized?E.l2p(rt.x):E.c2p(rt.x),gt=a.linearized?D.l2p(rt.y):D.c2p(rt.y);if(ut===v){if(z&&(ut=E.c2p(rt.x,!0)),ut===v)return!1;N&&gt===v&&(ut*=Math.abs(E._m*X*(E._m>0?h:e)/(D._m*V*(D._m>0?h:e)))),ut*=1e3}if(gt===v){if(N&&(gt=D.c2p(rt.y,!0)),gt===v)return!1;gt*=1e3}return[ut,gt]}function te(je,rt,ut,gt){var At=ut-je,_t=gt-rt,it=.5-je,et=.5-rt,wt=At*At+_t*_t,Gt=At*it+_t*et;if(Gt>0&&Gt<wt){var Kt=it*_t-et*At;if(Kt*Kt<wt)return!0}}function ne(je,rt){var ut=je[0]/V,gt=je[1]/X,At=Math.max(0,-ut,ut-1,-gt,gt-1);return At&&void 0!==P&&te(ut,gt,P,S)&&(At=0),At&&rt&&te(ut,gt,rt[0]/V,rt[1]/X)&&(At=0),(1+t.toleranceGrowth*At)*G}function se(je,rt){var ut=je[0]-rt[0],gt=je[1]-rt[1];return Math.sqrt(ut*ut+gt*gt)}var ie,ue,le,de,be,_e,xe,Ee=t.maxScreensAway,he=-V*Ee,me=V*(1+Ee),Se=-X*Ee,Me=X*(1+Ee),Ie=[[he,Se,me,Se],[me,Se,me,Me],[me,Me,he,Me],[he,Me,he,Se]];function Fe(je){if(je[0]<he||je[0]>me||je[1]<Se||je[1]>Me)return[o(je[0],he,me),o(je[1],Se,Me)]}function Ne(je,rt){return je[0]===rt[0]&&(je[0]===he||je[0]===me)||je[1]===rt[1]&&(je[1]===Se||je[1]===Me)||void 0}function De(je,rt,ut){return function(gt,At){var _t=Fe(gt),it=Fe(At),et=[];if(_t&&it&&Ne(_t,it))return et;_t&&et.push(_t),it&&et.push(it);var wt=2*n.constrain((gt[je]+At[je])/2,rt,ut)-((_t||gt)[je]+(it||At)[je]);return wt&&((_t&&it?wt>0==_t[je]>it[je]?_t:it:_t||it)[je]+=wt),et}}function $e(je){var rt=je[0],ut=je[1],gt=rt===U[$-1][0],At=ut===U[$-1][1];if(!gt||!At)if($>1){var _t=rt===U[$-2][0],it=ut===U[$-2][1];gt&&(rt===he||rt===me)&&_t?it?$--:U[$-1]=je:At&&(ut===Se||ut===Me)&&it?_t?$--:U[$-1]=je:U[$++]=je}else U[$++]=je}function Re(je){U[$-1][0]!==je[0]&&U[$-1][1]!==je[1]&&$e([le,de]),$e(je),be=null,le=de=0}function ze(je){if(P=je[0]/V,S=je[1]/X,ue=je[1]<Se?Se:je[1]>Me?Me:0,(ie=je[0]<he?he:je[0]>me?me:0)||ue){if($)if(be){var rt=xe(be,je);rt.length>1&&(Re(rt[0]),U[$++]=rt[1])}else _e=xe(U[$-1],je)[0],U[$++]=_e;else U[$++]=[ie||je[0],ue||je[1]];var ut=U[$-1];ie&&ue&&(ut[0]!==ie||ut[1]!==ue)?(be&&(le!==ie&&de!==ue?$e(le&&de?(_t=(At=je)[0]-(gt=be)[0],it=(At[1]-gt[1])/_t,(gt[1]*At[0]-At[1]*gt[0])/_t>0?[it>0?he:me,Me]:[it>0?me:he,Se]):[le||ie,de||ue]):le&&de&&$e([le,de])),$e([ie,ue])):le-ie&&de-ue&&$e([ie||le,ue||de]),be=je,le=ie,de=ue}else be&&Re(xe(be,je)[0]),U[$++]=je;var gt,At,_t,it}for("linear"===Z||"spline"===Z?xe=function(je,rt){for(var ut=[],gt=0,At=0;At<4;At++){var _t=Ie[At],it=r(je[0],je[1],rt[0],rt[1],_t[0],_t[1],_t[2],_t[3]);it&&(!gt||Math.abs(it.x-ut[0][0])>1||Math.abs(it.y-ut[0][1])>1)&&(it=[it.x,it.y],gt&&se(it,je)<se(ut[0],je)?ut.unshift(it):ut.push(it),gt++)}return ut}:"hv"===Z||"vh"===Z?xe=function(je,rt){var ut=[],gt=Fe(je),At=Fe(rt);return gt&&At&&Ne(gt,At)||(gt&&ut.push(gt),At&&ut.push(At)),ut}:"hvh"===Z?xe=De(0,he,me):"vhv"===Z&&(xe=De(1,Se,Me)),i=0;i<ee;i++)if(s=q(i)){for($=0,be=null,ze(s),i++;i<ee;i++){if(!(l=q(i))){if(J)continue;break}if(re&&a.simplify){var Ue=q(i+1);if(T=se(l,s),j&&(0===$||$===ee-1)||!(T<ne(l,Ue)*H)){for(x=[(l[0]-s[0])/T,(l[1]-s[1])/T],p=s,_=T,k=C=A=0,u=!1,c=l,i++;i<d.length;i++){if(g=Ue,Ue=q(i+1),!g){if(J)continue;break}if(O=(f=[g[0]-s[0],g[1]-s[1]])[0]*x[1]-f[1]*x[0],C=Math.min(C,O),(A=Math.max(A,O))-C>ne(g,Ue))break;c=g,(w=f[0]*x[0]+f[1]*x[1])>_?(_=w,l=g,u=!1):w<k&&(k=w,p=g,u=!0)}if(u?(ze(l),c!==p&&ze(p)):(p!==s&&ze(p),c!==l&&ze(l)),ze(c),i>=d.length||!g)break;ze(g),s=g}}else ze(l)}be&&$e([le||be[0],de||be[1]]),B.push(U.slice(0,$))}return B}},{"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(y,Q,K){"use strict";Q.exports=function(m,v,b){"spline"===b("line.shape")&&b("line.smoothing")}},{}],952:[function(y,Q,K){"use strict";var m={tonextx:1,tonexty:1,tonext:1};Q.exports=function(v,b,h){var e,n,r,o,t,d={},a=!1,i=-1,s=0,c=-1;for(n=0;n<h.length;n++)(r=(e=h[n][0].trace).stackgroup||"")?r in d?t=d[r]:(t=d[r]=s,s++):e.fill in m&&c>=0?t=c:(t=c=s,s++),t<i&&(a=!0),e._groupIndex=i=t;var l=h.slice();a&&l.sort(function(g,u){var x=g[0].trace,f=u[0].trace;return x._groupIndex-f._groupIndex||x.index-f.index});var p={};for(n=0;n<l.length;n++)r=(e=l[n][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in m&&(e._prevtrace=(o=p[r])||null,o&&(o._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),p[r]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return l}},{}],953:[function(y,Q,K){"use strict";var m=y("fast-isnumeric");Q.exports=function(v,b){b||(b=2);var h=v.marker,e=h.sizeref||1,n=h.sizemin||0,r="area"===h.sizemode?function(o){return Math.sqrt(o/e)}:function(o){return o/e};return function(o){var t=r(o/b);return m(t)&&t>0?Math.max(t,n):0}}},{"fast-isnumeric":190}],954:[function(y,Q,K){"use strict";Q.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(y,Q,K){"use strict";var m=y("../../components/color"),v=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults"),h=y("./subtypes");Q.exports=function(e,n,r,o,t,d){var a=h.isBubble(e),i=(e.line||{}).color;d=d||{},i&&(r=i),t("marker.symbol"),t("marker.opacity",a?.7:1),t("marker.size"),t("marker.color",r),v(e,"marker")&&b(e,n,o,t,{prefix:"marker.",cLetter:"c"}),d.noSelect||(t("selected.marker.color"),t("unselected.marker.color"),t("selected.marker.size"),t("unselected.marker.size")),d.noLine||(t("marker.line.color",i&&!Array.isArray(i)&&n.marker.color!==i?i:a?m.background:m.defaultLine),v(e,"marker.line")&&b(e,n,o,t,{prefix:"marker.line.",cLetter:"c"}),t("marker.line.width",a?1:0)),a&&(t("marker.sizeref"),t("marker.sizemin"),t("marker.sizemode")),d.gradient&&"none"!==t("marker.gradient.type")&&t("marker.gradient.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(y,Q,K){"use strict";var m=y("../../lib").dateTick0,v=y("../../constants/numerical").ONEWEEK;function b(h,e){return m(e,h%v==0?1:0)}Q.exports=function(h,e,n,r,o){if(o||(o={x:!0,y:!0}),o.x){var t=r("xperiod");t&&(r("xperiod0",b(t,e.xcalendar)),r("xperiodalignment"))}if(o.y){var d=r("yperiod");d&&(r("yperiod0",b(d,e.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../registry"),b=y("../../lib"),h=b.ensureSingle,e=b.identity,n=y("../../components/drawing"),r=y("./subtypes"),o=y("./line_points"),t=y("./link_traces"),d=y("../../lib/polygon").tester;function a(i,s,c,l,p,g,u){var x;!function(me,Se,Me,Ie,Fe){var Ne=Me.xaxis,De=Me.yaxis,$e=m.extent(b.simpleMap(Ne.range,Ne.r2c)),Re=m.extent(b.simpleMap(De.range,De.r2c)),ze=Ie[0].trace;if(r.hasMarkers(ze)){var Ue=ze.marker.maxdisplayed;if(0!==Ue){var je=Ie.filter(function(At){return At.x>=$e[0]&&At.x<=$e[1]&&At.y>=Re[0]&&At.y<=Re[1]}),rt=Math.ceil(je.length/Ue),ut=0;Fe.forEach(function(At,_t){var it=At[0].trace;r.hasMarkers(it)&&it.marker.maxdisplayed>0&&_t<Se&&ut++});var gt=Math.round(ut*rt/3+Math.floor(ut/3)*rt/7.1);Ie.forEach(function(At){delete At.vis}),je.forEach(function(At,_t){0===Math.round((_t+gt)%rt)&&(At.vis=!0)})}}}(0,s,c,l,p);var f=!!u&&u.duration>0;function T(me){return f?me.transition():me}var _=c.xaxis,k=c.yaxis,w=l[0].trace,C=w.line,A=m.select(g),O=h(A,"g","errorbars"),P=h(A,"g","lines"),S=h(A,"g","points"),E=h(A,"g","text");if(v.getComponentMethod("errorbars","plot")(i,O,c,u),!0===w.visible){var D,z;T(A).style("opacity",w.opacity);var N=w.fill.charAt(w.fill.length-1);"x"!==N&&"y"!==N&&(N=""),l[0][c.isRangePlot?"nodeRangePlot3":"node3"]=A;var V,X,J="",G=[],Z=w._prevtrace;Z&&(J=Z._prevRevpath||"",z=Z._nextFill,G=Z._polygons);var re,j,B,H,ee,U,$,q="",te="",ne=[],se=b.noop;if(D=w._ownFill,r.hasLines(w)||"none"!==w.fill){for(z&&z.datum(l),-1!==["hv","vh","hvh","vhv"].indexOf(C.shape)?(re=n.steps(C.shape),j=n.steps(C.shape.split("").reverse().join(""))):re=j="spline"===C.shape?function(me){var Se=me[me.length-1];return me.length>1&&me[0][0]===Se[0]&&me[0][1]===Se[1]?n.smoothclosed(me.slice(1),C.smoothing):n.smoothopen(me,C.smoothing)}:function(me){return"M"+me.join("L")},B=function(me){return j(me.reverse())},ne=o(l,{xaxis:_,yaxis:k,connectGaps:w.connectgaps,baseTolerance:Math.max(C.width||1,3)/4,shape:C.shape,simplify:C.simplify,fill:w.fill}),$=w._polygons=new Array(ne.length),x=0;x<ne.length;x++)w._polygons[x]=d(ne[x]);ne.length&&(H=ne[0][0],U=(ee=ne[ne.length-1])[ee.length-1]),se=function(me){return function(Se){if(V=re(Se),X=B(Se),q?N?(q+="L"+V.substr(1),te=X+"L"+te.substr(1)):(q+="Z"+V,te=X+"Z"+te):(q=V,te=X),r.hasLines(w)&&Se.length>1){var Me=m.select(this);if(Me.datum(l),me)T(Me.style("opacity",0).attr("d",V).call(n.lineGroupStyle)).style("opacity",1);else{var Ie=T(Me);Ie.attr("d",V),n.singleLineStyle(l,Ie)}}}}}var ie=P.selectAll(".js-line").data(ne);T(ie.exit()).style("opacity",0).remove(),ie.each(se(!1)),ie.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(n.lineGroupStyle).each(se(!0)),n.setClipUrl(ie,c.layerClipId,i),ne.length?(D?(D.datum(l),H&&U&&(N?("y"===N?H[1]=U[1]=k.c2p(0,!0):"x"===N&&(H[0]=U[0]=_.c2p(0,!0)),T(D).attr("d","M"+U+"L"+H+"L"+q.substr(1)).call(n.singleFillStyle,i)):T(D).attr("d",q+"Z").call(n.singleFillStyle,i))):z&&("tonext"===w.fill.substr(0,6)&&q&&J?("tonext"===w.fill?T(z).attr("d",q+"Z"+J+"Z").call(n.singleFillStyle,i):T(z).attr("d",q+"L"+J.substr(1)+"Z").call(n.singleFillStyle,i),w._polygons=w._polygons.concat(G)):(le(z),w._polygons=null)),w._prevRevpath=te,w._prevPolygons=$):(D?le(D):z&&le(z),w._polygons=w._prevRevpath=w._prevPolygons=null),S.datum(l),E.datum(l),function(me,Se,Me){var Ie,Fe=Me[0].trace,Ne=r.hasMarkers(Fe),De=r.hasText(Fe),$e=function Ee(me){if(me.ids)return xe}(Fe),Re=he,ze=he;if(Ne||De){var Ue=e,je=Fe.stackgroup,rt=je&&"infer zero"===i._fullLayout._scatterStackOpts[_._id+k._id][je].stackgaps;Fe.marker.maxdisplayed||Fe._needsCull?Ue=rt?be:de:je&&!rt&&(Ue=_e),Ne&&(Re=Ue),De&&(ze=Ue)}var ut,gt=(Ie=me.selectAll("path.point").data(Re,$e)).enter().append("path").classed("point",!0);f&&gt.call(n.pointStyle,Fe,i).call(n.translatePoints,_,k).style("opacity",0).transition().style("opacity",1),Ie.order(),Ne&&(ut=n.makePointStyleFns(Fe)),Ie.each(function(At){var _t=m.select(this),it=T(_t);n.translatePoint(At,it,_,k)?(n.singlePointStyle(At,it,Fe,ut,i),c.layerClipId&&n.hideOutsideRangePoint(At,it,_,k,Fe.xcalendar,Fe.ycalendar),Fe.customdata&&_t.classed("plotly-customdata",null!=At.data)):it.remove()}),f?Ie.exit().transition().style("opacity",0).remove():Ie.exit().remove(),(Ie=Se.selectAll("g").data(ze,$e)).enter().append("g").classed("textpoint",!0).append("text"),Ie.order(),Ie.each(function(At){var _t=m.select(this),it=T(_t.select("text"));n.translatePoint(At,it,_,k)?c.layerClipId&&n.hideOutsideRangePoint(At,_t,_,k,Fe.xcalendar,Fe.ycalendar):_t.remove()}),Ie.selectAll("text").call(n.textPointStyle,Fe,i).each(function(At){var _t=_.c2p(At.x),it=k.c2p(At.y);m.select(this).selectAll("tspan.line").each(function(){T(m.select(this)).attr({x:_t,y:it})})}),Ie.exit().remove()}(S,E,l);var ue=!1===w.cliponaxis?null:c.layerClipId;n.setClipUrl(S,ue,i),n.setClipUrl(E,ue,i)}function le(me){T(me).attr("d","M0,0Z")}function de(me){return me.filter(function(Se){return!Se.gap&&Se.vis})}function be(me){return me.filter(function(Se){return Se.vis})}function _e(me){return me.filter(function(Se){return!Se.gap})}function xe(me){return me.id}function he(){return!1}}Q.exports=function(i,s,c,l,p,g){var u,x,k,C,f=!p,T=!!p&&p.duration>0,_=t(i,s,c);(u=l.selectAll("g.trace").data(_,function(k){return k[0].trace.uid})).enter().append("g").attr("class",function(k){return"trace scatter trace"+k[0].trace.uid}).style("stroke-miterlimit",2),u.order(),k=i,C=s,u.each(function(A){var O=h(m.select(this),"g","fills");n.setClipUrl(O,C.layerClipId,k);var P=A[0].trace,S=[];P._ownfill&&S.push("_ownFill"),P._nexttrace&&S.push("_nextFill");var E=O.selectAll("g").data(S,e);E.enter().append("g"),E.exit().each(function(D){P[D]=null}).remove(),E.order().each(function(D){P[D]=h(m.select(this),"path","js-fill")})}),T?(g&&(x=g()),m.transition().duration(p.duration).ease(p.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&x()}).each(function(){l.selectAll("g.trace").each(function(k,w){a(i,w,s,k,_,this,p)})})):u.each(function(k,w){a(i,w,s,k,_,this,p)}),f&&u.exit().remove(),l.selectAll("path:not([d])").remove()}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(y,Q,K){"use strict";var m=y("./subtypes");Q.exports=function(v,b){var h,e,n,r,o=v.cd,t=v.xaxis,d=v.yaxis,a=[],i=o[0].trace;if(!m.hasMarkers(i)&&!m.hasText(i))return[];if(!1===b)for(h=0;h<o.length;h++)o[h].selected=0;else for(h=0;h<o.length;h++)n=t.c2p((e=o[h]).x),r=d.c2p(e.y),null!==e.i&&b.contains([n,r],!1,h,v)?(a.push({pointNumber:e.i,x:t.c2d(e.x),y:d.c2d(e.y)}),e.selected=1):e.selected=0;return a}},{"./subtypes":961}],959:[function(y,Q,K){"use strict";var m=["orientation","groupnorm","stackgaps"];Q.exports=function(v,b,h,e){var n=h._scatterStackOpts,r=e("stackgroup");if(r){var o=b.xaxis+b.yaxis,t=n[o];t||(t=n[o]={});var d=t[r],a=!1;d?d.traces.push(b):(d=t[r]={traceIndices:[],traces:[b]},a=!0);for(var i={orientation:b.x&&!b.y?"h":"v"},s=0;s<m.length;s++){var c=m[s],l=c+"Found";if(!d[l]){var p=void 0!==v[c],g="orientation"===c;if((p||a)&&(d[c]=e(c,i[c]),g&&(d.fillDflt="h"===d[c]?"tonextx":"tonexty"),p&&(d[l]=!0,!a&&(delete d.traces[0][c],g))))for(var u=0;u<d.traces.length-1;u++){var x=d.traces[u];x._input.fill!==x.fill&&(x.fill=d.fillDflt)}}}return d}}},{}],960:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/drawing"),b=y("../../registry");function h(n,r,o){v.pointStyle(n.selectAll("path.point"),r,o)}function e(n,r,o){v.textPointStyle(n.selectAll("text"),r,o)}Q.exports={style:function(n){var r=m.select(n).selectAll("g.trace.scatter");r.style("opacity",function(o){return o[0].trace.opacity}),r.selectAll("g.points").each(function(o){h(m.select(this),o.trace||o[0].trace,n)}),r.selectAll("g.text").each(function(o){e(m.select(this),o.trace||o[0].trace,n)}),r.selectAll("g.trace path.js-line").call(v.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(v.fillGroupStyle,n),b.getComponentMethod("errorbars","style")(r)},stylePoints:h,styleText:e,styleOnSelect:function(n,r,o){var t=r[0].trace;t.selectedpoints?(v.selectedPointStyle(o.selectAll("path.point"),t),v.selectedTextStyle(o.selectAll("text"),t)):(h(o,t,n),e(o,t,n))}}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports={hasLines:function(v){return v.visible&&v.mode&&-1!==v.mode.indexOf("lines")},hasMarkers:function(v){return v.visible&&(v.mode&&-1!==v.mode.indexOf("markers")||"splom"===v.type)},hasText:function(v){return v.visible&&v.mode&&-1!==v.mode.indexOf("text")},isBubble:function(v){return m.isPlainObject(v.marker)&&m.isArrayOrTypedArray(v.marker.size)}}},{"../../lib":515}],962:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b,h,e,n){n=n||{},e("textposition"),m.coerceFont(e,"textfont",h.font),n.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../registry");Q.exports=function(b,h,e,n){var r,o=n("x"),t=n("y");if(v.getComponentMethod("calendars","handleTraceDefaults")(b,h,["x","y"],e),o){var d=m.minRowLength(o);t?r=Math.min(d,m.minRowLength(t)):(r=d,n("y0"),n("dy"))}else{if(!t)return 0;r=m.minRowLength(t),n("x0"),n("dx")}return h._length=r,r}},{"../../lib":515,"../../registry":647}],964:[function(y,Q,K){"use strict";var m=y("../scatter/attributes"),v=y("../../components/colorscale/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../plots/template_attributes").texttemplateAttrs,n=y("../../plots/attributes"),r=y("../../constants/gl3d_dashes"),o=y("../../constants/gl3d_markers"),t=y("../../lib/extend").extendFlat,d=y("../../plot_api/edit_types").overrideAll,a=y("../../lib/sort_object_keys"),s=m.marker,c=s.line,l=t({width:m.line.width,dash:{valType:"enumerated",values:a(r),dflt:"solid"}},v("line")),p=Q.exports=d({x:m.x,y:m.y,z:{valType:"data_array"},text:t({},m.text,{}),texttemplate:e({},{}),hovertext:t({},m.hovertext,{}),hovertemplate:h(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),mode:t({},m.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:m.connectgaps,line:l,marker:t({symbol:{valType:"enumerated",values:a(o),dflt:"circle",arrayOk:!0},size:t({},s.size,{dflt:8}),sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,opacity:t({},s.opacity,{arrayOk:!1}),colorbar:s.colorbar,line:t({width:t({},c.width,{arrayOk:!1})},v("marker.line"))},v("marker")),textposition:t({},m.textposition,{dflt:"top center"}),textfont:{color:m.textfont.color,size:m.textfont.size,family:t({},m.textfont.family,{arrayOk:!1})},opacity:n.opacity,hoverinfo:t({},n.hoverinfo)},"calc","nested");p.x.editType=p.y.editType=p.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(y,Q,K){"use strict";var m=y("../scatter/arrays_to_calcdata"),v=y("../scatter/colorscale_calc");Q.exports=function(b,h){var e=[{x:!1,y:!1,trace:h,t:{}}];return m(e,h),v(b,h),e}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(y,Q,K){"use strict";var m=y("../../registry");function v(b,h,e,n){if(!h||!h.visible)return null;for(var r=m.getComponentMethod("errorbars","makeComputeError")(h),o=new Array(b.length),t=0;t<b.length;t++){var d=r(+b[t],t);if("log"===n.type){var a=n.c2l(b[t]),i=b[t]-d[0],s=b[t]+d[1];if(o[t]=[(n.c2l(i,!0)-a)*e,(n.c2l(s,!0)-a)*e],i>0){var c=n.c2l(i);n._lowerLogErrorBound||(n._lowerLogErrorBound=c),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,c)}}else o[t]=[-d[0]*e,d[1]*e]}return o}Q.exports=function(b,h,e){var n=[v(b.x,b.error_x,h[0],e.xaxis),v(b.y,b.error_y,h[1],e.yaxis),v(b.z,b.error_z,h[2],e.zaxis)],r=function(s){for(var c=0;c<s.length;c++)if(s[c])return s[c].length;return 0}(n);if(0===r)return null;for(var o=new Array(r),t=0;t<r;t++){for(var d=[[0,0,0],[0,0,0]],a=0;a<3;a++)if(n[a])for(var i=0;i<2;i++)d[i][a]=n[a][t][i];o[t]=d}return o}},{"../../registry":647}],967:[function(y,Q,K){"use strict";var m=y("../../../stackgl_modules").gl_line3d,v=y("../../../stackgl_modules").gl_scatter3d,b=y("../../../stackgl_modules").gl_error3d,h=y("../../../stackgl_modules").gl_mesh3d,e=y("../../../stackgl_modules").delaunay_triangulate,n=y("../../lib"),r=y("../../lib/str2rgbarray"),o=y("../../lib/gl_format_color").formatColor,t=y("../scatter/make_bubble_size_func"),d=y("../../constants/gl3d_dashes"),a=y("../../constants/gl3d_markers"),i=y("../../plots/cartesian/axes"),s=y("../../components/fx/helpers").appendArrayPointValue,c=y("./calc_errors");function l(C,A){this.scene=C,this.uid=A,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var p=l.prototype;function g(C){return null==C?0:C.indexOf("left")>-1?-1:C.indexOf("right")>-1?1:0}function u(C){return null==C?0:C.indexOf("top")>-1?-1:C.indexOf("bottom")>-1?1:0}function x(C,A){return A(4*C)}function f(C){return a[C]}function T(C,A,O,P,S){var E=null;if(n.isArrayOrTypedArray(C)){E=[];for(var D=0;D<A;D++)E[D]=void 0===C[D]?P:O(C[D],S)}else E=O(C,n.identity);return E}function k(C){if(n.isArrayOrTypedArray(C)){var A=C[0];return n.isArrayOrTypedArray(A)&&(C=A),"rgb("+C.slice(0,3).map(function(O){return Math.round(255*O)})+")"}return null}function w(C){return n.isArrayOrTypedArray(C)?4===C.length&&"number"==typeof C[0]?k(C):C.map(k):null}p.handlePick=function(C){if(C.object&&(C.object===this.linePlot||C.object===this.delaunayMesh||C.object===this.textMarkers||C.object===this.scatterPlot)){var A=C.index=C.data.index;return C.object.highlight&&C.object.highlight(null),this.scatterPlot&&(C.object=this.scatterPlot,this.scatterPlot.highlight(C.data)),C.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[A]||0===this.textLabels[A])&&(C.textLabel=this.textLabels[A]):C.textLabel=this.textLabels),C.traceCoordinate=[this.data.x[A],this.data.y[A],this.data.z[A]],!0}},p.update=function(C){var A,O,P,S,E=this.scene.glplot.gl,D=d.solid;this.data=C;var z=function _(C,A){var O,P,S,E,D,z,N=[],V=C.fullSceneLayout,X=C.dataScale,J=V.xaxis,G=V.yaxis,Z=V.zaxis,re=A.marker,j=A.line,B=A.x||[],H=A.y||[],ee=A.z||[],U=B.length,$=A.xcalendar,q=A.ycalendar,te=A.zcalendar;for(D=0;D<U;D++)O=J.d2l(B[D],0,$)*X[0],P=G.d2l(H[D],0,q)*X[1],S=Z.d2l(ee[D],0,te)*X[2],N[D]=[O,P,S];if(Array.isArray(A.text))z=A.text;else if(void 0!==A.text)for(z=new Array(U),D=0;D<U;D++)z[D]=A.text;function ne(Ie,Fe){var Ne=V[Ie];return i.tickText(Ne,Ne.d2l(Fe),!0).text}var se=A.texttemplate;if(se){var ie=C.fullLayout._d3locale,ue=Array.isArray(se),le=ue?Math.min(se.length,U):U,de=ue?function(Ie){return se[Ie]}:function(){return se};for(z=new Array(le),D=0;D<le;D++){var be={x:B[D],y:H[D],z:ee[D]},_e={xLabel:ne("xaxis",B[D]),yLabel:ne("yaxis",H[D]),zLabel:ne("zaxis",ee[D])},xe={};s(xe,A,D);var Ee=A._meta||{};z[D]=n.texttemplateString(de(D),_e,ie,xe,be,Ee)}}if(E={position:N,mode:A.mode,text:z},"line"in A&&(E.lineColor=o(j,1,U),E.lineWidth=j.width,E.lineDashes=j.dash),"marker"in A){var he=t(A);E.scatterColor=o(re,1,U),E.scatterSize=T(re.size,U,x,20,he),E.scatterMarker=T(re.symbol,U,f,"\u25cf"),E.scatterLineWidth=re.line.width,E.scatterLineColor=o(re.line,1,U),E.scatterAngle=0}"textposition"in A&&(E.textOffset=function(Ie){var Fe=[0,0];if(Array.isArray(Ie))for(var Ne=0;Ne<Ie.length;Ne++)Fe[Ne]=[0,0],Ie[Ne]&&(Fe[Ne][0]=g(Ie[Ne]),Fe[Ne][1]=u(Ie[Ne]));else Fe[0]=g(Ie),Fe[1]=u(Ie);return Fe}(A.textposition),E.textColor=o(A.textfont,1,U),E.textSize=T(A.textfont.size,U,n.identity,12),E.textFont=A.textfont.family,E.textAngle=0);var me=["x","y","z"];for(E.project=[!1,!1,!1],E.projectScale=[1,1,1],E.projectOpacity=[1,1,1],D=0;D<3;++D){var Se=A.projection[me[D]];(E.project[D]=Se.show)&&(E.projectOpacity[D]=Se.opacity,E.projectScale[D]=Se.scale)}E.errorBounds=c(A,X,V);var Me=function(Ie){for(var Fe=[0,0,0],Ne=[[0,0,0],[0,0,0],[0,0,0]],De=[1,1,1],$e=0;$e<3;$e++){var Re=Ie[$e];Re&&!1!==Re.copy_zstyle&&!1!==Ie[2].visible&&(Re=Ie[2]),Re&&Re.visible&&(Fe[$e]=Re.width/2,Ne[$e]=r(Re.color),De[$e]=Re.thickness)}return{capSize:Fe,color:Ne,lineWidth:De}}([A.error_x,A.error_y,A.error_z]);return E.errorColor=Me.color,E.errorLineWidth=Me.lineWidth,E.errorCapSize=Me.capSize,E.delaunayAxis=A.surfaceaxis,E.delaunayColor=r(A.surfacecolor),E}(this.scene,C);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in d&&(D=d[z.lineDashes]),this.color=w(z.scatterColor)||w(z.lineColor),this.dataPoints=z.position,A={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:D[0],dashScale:D[1],opacity:C.opacity,connectGaps:C.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(A):(this.linePlot=m(A),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var N=C.opacity;if(C.marker&&C.marker.opacity&&(N*=C.marker.opacity),O={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:N,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(O):(this.scatterPlot=v(O),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),S={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:C.opacity},this.textLabels=C.hovertext||C.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(S):(this.textMarkers=v(S),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),P={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:C.opacity},this.errorBars?z.errorBounds?this.errorBars.update(P):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=b(P),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var V=function(X,J,G){var Z,re=(G+1)%3,j=(G+2)%3,B=[],H=[];for(Z=0;Z<X.length;++Z){var ee=X[Z];!isNaN(ee[re])&&isFinite(ee[re])&&!isNaN(ee[j])&&isFinite(ee[j])&&(B.push([ee[re],ee[j]]),H.push(Z))}var U=e(B);for(Z=0;Z<U.length;++Z)for(var $=U[Z],q=0;q<$.length;++q)$[q]=H[$[q]];return{positions:X,cells:U,meshColor:J}}(z.position,z.delaunayColor,z.delaunayAxis);V.opacity=C.opacity,this.delaunayMesh?this.delaunayMesh.update(V):(V.gl=E,this.delaunayMesh=h(V),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},p.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},Q.exports=function(C,A){var O=new l(C,A.uid);return O.update(A),O}},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("../scatter/subtypes"),h=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),n=y("../scatter/text_defaults"),r=y("./attributes");Q.exports=function(o,t,d,a){function i(x,f){return v.coerce(o,t,r,x,f)}if(x=o,f=t,_=a,k=0,w=(T=i)("x"),C=T("y"),A=T("z"),m.getComponentMethod("calendars","handleTraceDefaults")(x,f,["x","y","z"],_),w&&C&&A&&(k=Math.min(w.length,C.length,A.length),f._length=f._xlength=f._ylength=f._zlength=k),k){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),b.hasLines(t)&&(i("connectgaps"),e(o,t,d,a,i)),b.hasMarkers(t)&&h(o,t,d,a,i,{noSelect:!0}),b.hasText(t)&&(i("texttemplate"),n(o,t,a,i,{noSelect:!0}));var s=(t.line||{}).color,c=(t.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",s||c);for(var l=["x","y","z"],p=0;p<3;++p){var g="projection."+l[p];i(g+".show")&&(i(g+".opacity"),i(g+".scale"))}var u=m.getComponentMethod("errorbars","supplyDefaults");u(o,t,s||c||d,{axis:"z"}),u(o,t,s||c||d,{axis:"y",inherit:"z"}),u(o,t,s||c||d,{axis:"x",inherit:"z"})}else t.visible=!1;var x,f,T,_,k,w,C,A}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(y,Q,K){"use strict";Q.exports={plot:y("./convert"),attributes:y("./attributes"),markerSymbols:y("../../constants/gl3d_markers"),supplyDefaults:y("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:y("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(y,Q,K){"use strict";var m=y("../scatter/attributes"),v=y("../../plots/attributes"),b=y("../../plots/template_attributes").hovertemplateAttrs,h=y("../../plots/template_attributes").texttemplateAttrs,e=y("../../components/colorscale/attributes"),n=y("../../lib/extend").extendFlat,r=m.marker,o=m.line,t=r.line;Q.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:n({},m.mode,{dflt:"markers"}),text:n({},m.text,{}),texttemplate:h({editType:"plot"},{keys:["a","b","text"]}),hovertext:n({},m.hovertext,{}),line:{color:o.color,width:o.width,dash:o.dash,shape:n({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:m.connectgaps,fill:n({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:n({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:n({width:t.width,editType:"calc"},e("marker.line")),gradient:r.gradient,editType:"calc"},e("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:n({},v.hoverinfo,{flags:["a","b","text","name"]}),hoveron:m.hoveron,hovertemplate:b()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../scatter/colorscale_calc"),b=y("../scatter/arrays_to_calcdata"),h=y("../scatter/calc_selection"),e=y("../scatter/calc").calcMarkerSize,n=y("../carpet/lookup_carpetid");Q.exports=function(r,o){var t=o._carpetTrace=n(r,o);if(t&&t.visible&&"legendonly"!==t.visible){var d;o.xaxis=t.xaxis,o.yaxis=t.yaxis;var a,i,s=o._length,c=new Array(s),l=!1;for(d=0;d<s;d++)if(i=o.b[d],m(a=o.a[d])&&m(i)){var p=t.ab2xy(+a,+i,!0),g=t.isVisible(+a,+i);g||(l=!0),c[d]={x:p[0],y:p[1],a,b:i,vis:g}}else c[d]={x:!1,y:!1};return o._needsCull=l,c[0].carpet=t,c[0].trace=o,e(o,s),v(r,o),b(c,o),h(c,o),c}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatter/constants"),b=y("../scatter/subtypes"),h=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),n=y("../scatter/line_shape_defaults"),r=y("../scatter/text_defaults"),o=y("../scatter/fillcolor_defaults"),t=y("./attributes");Q.exports=function(d,a,i,s){function c(x,f){return m.coerce(d,a,t,x,f)}c("carpet"),a.xaxis="x",a.yaxis="y";var l=c("a"),p=c("b"),g=Math.min(l.length,p.length);if(g){a._length=g,c("text"),c("texttemplate"),c("hovertext"),c("mode",g<v.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(a)&&(e(d,a,i,s,c),n(d,a,c),c("connectgaps")),b.hasMarkers(a)&&h(d,a,i,s,c,{gradient:!0}),b.hasText(a)&&r(d,a,s,c);var u=[];(b.hasMarkers(a)||b.hasText(a))&&(c("marker.maxdisplayed"),u.push("points")),c("fill"),"none"!==a.fill&&(o(d,a,i,c),b.hasLines(a)||n(d,a,c)),"tonext"!==a.fill&&"toself"!==a.fill||u.push("fills"),"fills"!==c("hoveron",u.join("+")||"points")&&c("hovertemplate"),m.coerceSelectionMarkerOpacity(a,c)}else a.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h,e){var n=h[e];return m.a=n.a,m.b=n.b,m.y=n.y,m}},{}],974:[function(y,Q,K){"use strict";Q.exports=function(m,v){var b={},h=v._carpet,e=h.ab2ij([m.a,m.b]),n=Math.floor(e[0]),r=e[0]-n,o=Math.floor(e[1]),d=h.evalxy([],n,o,r,e[1]-o);return b.yLabel=d[1].toFixed(3),b}},{}],975:[function(y,Q,K){"use strict";var m=y("../scatter/hover"),v=y("../../lib").fillText;Q.exports=function(b,h,e,n){var r=m(b,h,e,n);if(r&&!1!==r[0].index){var o=r[0];if(void 0===o.index){var d=b.xa._length,a=d*(1-o.y0/b.ya._length)/2,i=d-a;return o.x0=Math.max(Math.min(o.x0,i),a),o.x1=Math.max(Math.min(o.x1,i),a),r}var s=o.cd[o.index];o.a=s.a,o.b=s.b,o.xLabelVal=void 0,o.yLabelVal=void 0;var c=o.trace,l=c._carpet,p=c._module.formatLabels(s,c);o.yLabel=p.yLabel,delete o.text;var g=[];if(!c.hovertemplate){var u=(s.hi||c.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["a","b","text"]),-1!==u.indexOf("a")&&x(l.aaxis,s.a),-1!==u.indexOf("b")&&x(l.baxis,s.b),g.push("y: "+o.yLabel),-1!==u.indexOf("text")&&v(s,c,g),o.extraText=g.join("<br>")}return r}function x(f,T){var _;_=f.labelprefix&&f.labelprefix.length>0?f.labelprefix.replace(/ = $/,""):f._hovertitle,g.push(_+": "+T.toFixed(3)+f.labelsuffix)}}},{"../../lib":515,"../scatter/hover":947}],976:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../scatter/select"),eventData:y("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:y("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(y,Q,K){"use strict";var m=y("../scatter/plot"),v=y("../../plots/cartesian/axes"),b=y("../../components/drawing");Q.exports=function(h,e,n,r){var o,d,a=n[0][0].carpet,i={xaxis:v.getFromId(h,a.xaxis||"x"),yaxis:v.getFromId(h,a.yaxis||"y"),plot:e.plot};for(m(h,i,n,r),o=0;o<n.length;o++)d=r.selectAll("g.trace"+n[o][0].trace.uid+" .js-line"),b.setClipUrl(d,n[o][0].carpet._clipPathId,h)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(y,Q,K){"use strict";var m=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,b=y("../scatter/attributes"),h=y("../../plots/attributes"),e=y("../../components/colorscale/attributes"),n=y("../../components/drawing/attributes").dash,r=y("../../lib/extend").extendFlat,o=y("../../plot_api/edit_types").overrideAll,t=b.marker,d=b.line,a=t.line;Q.exports=o({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:r({},b.mode,{dflt:"markers"}),text:r({},b.text,{}),texttemplate:v({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:r({},b.hovertext,{}),textfont:b.textfont,textposition:b.textposition,line:{color:d.color,width:d.width,dash:n},connectgaps:b.connectgaps,marker:r({symbol:t.symbol,opacity:t.opacity,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,colorbar:t.colorbar,line:r({width:a.width},e("marker.line")),gradient:t.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:b.fillcolor,selected:b.selected,unselected:b.unselected,hoverinfo:r({},h.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../constants/numerical").BADNUM,b=y("../scatter/colorscale_calc"),h=y("../scatter/arrays_to_calcdata"),e=y("../scatter/calc_selection"),n=y("../../lib")._;function r(o){return o&&"string"==typeof o}Q.exports=function(o,t){var d,a=Array.isArray(t.locations),i=a?t.locations.length:t._length,s=new Array(i);d=t.geojson?function(x){return r(x)||m(x)}:r;for(var c=0;c<i;c++){var l=s[c]={};if(a){var p=t.locations[c];l.loc=d(p)?p:null}else{var g=t.lon[c],u=t.lat[c];l.lonlat=m(g)&&m(u)?[+g,+u]:[v,v]}}return h(s,t),b(o,t),e(s,t),i&&(s[0].t={labels:{lat:n(o,"lat:")+" ",lon:n(o,"lon:")+" "}}),s}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatter/subtypes"),b=y("../scatter/marker_defaults"),h=y("../scatter/line_defaults"),e=y("../scatter/text_defaults"),n=y("../scatter/fillcolor_defaults"),r=y("./attributes");Q.exports=function(o,t,d,a){function i(x,f){return m.coerce(o,t,r,x,f)}var s,c=i("locations");if(c&&c.length){var l,p=i("geojson");("string"==typeof p&&""!==p||m.isPlainObject(p))&&(l="geojson-id"),"geojson-id"===i("locationmode",l)&&i("featureidkey"),s=c.length}else{var g=i("lon")||[],u=i("lat")||[];s=Math.min(g.length,u.length)}s?(t._length=s,i("text"),i("hovertext"),i("hovertemplate"),i("mode"),v.hasLines(t)&&(h(o,t,d,a,i),i("connectgaps")),v.hasMarkers(t)&&b(o,t,d,a,i,{gradient:!0}),v.hasText(t)&&(i("texttemplate"),e(o,t,a,i)),i("fill"),"none"!==t.fill&&n(o,t,d,i),m.coerceSelectionMarkerOpacity(t,i)):t.visible=!1}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h,e){m.lon=v.lon,m.lat=v.lat,m.location=v.loc?v.loc:null;var n=h[e];return n.fIn&&n.fIn.properties&&(m.properties=n.fIn.properties),m}},{}],982:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes");Q.exports=function(v,b,h){var e={},n=h[b.geo]._subplot.mockAxis,r=v.lonlat;return e.lonLabel=m.tickText(n,n.c2l(r[0]),!0).text,e.latLabel=m.tickText(n,n.c2l(r[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],983:[function(y,Q,K){"use strict";var m=y("../../components/fx"),v=y("../../constants/numerical").BADNUM,b=y("../scatter/get_trace_color"),h=y("../../lib").fillText,e=y("./attributes");Q.exports=function(n,r,o){var t=n.cd,d=t[0].trace,a=n.xa,i=n.ya,s=n.subplot,c=s.projection.isLonLatOverEdges,l=s.project;if(m.getClosest(t,function(_){var k=_.lonlat;if(k[0]===v||c(k))return 1/0;var w=l(k),C=l([r,o]),A=Math.abs(w[0]-C[0]),O=Math.abs(w[1]-C[1]),P=Math.max(3,_.mrc||0);return Math.max(Math.sqrt(A*A+O*O)-P,1-3/P)},n),!1!==n.index){var p=t[n.index],g=p.lonlat,u=[a.c2p(g),i.c2p(g)],x=p.mrc||1;n.x0=u[0]-x,n.x1=u[0]+x,n.y0=u[1]-x,n.y1=u[1]+x,n.loc=p.loc,n.lon=g[0],n.lat=g[1];var f={};f[d.geo]={_subplot:s};var T=d._module.formatLabels(p,d,f);return n.lonLabel=T.lonLabel,n.latLabel=T.latLabel,n.color=b(d,p),n.extraText=function(_,k,w,C){if(!_.hovertemplate){var A=k.hi||_.hoverinfo,O="all"===A?e.hoverinfo.flags:A.split("+"),P=-1!==O.indexOf("location")&&Array.isArray(_.locations),S=-1!==O.indexOf("lon"),E=-1!==O.indexOf("lat"),D=-1!==O.indexOf("text"),z=[];return P?z.push(k.loc):S&&E?z.push("("+N(w.latLabel)+", "+N(w.lonLabel)+")"):S?z.push(C.lon+N(w.lonLabel)):E&&z.push(C.lat+N(w.latLabel)),D&&h(k,_,z),z.join("<br>")}function N(V){return V+"\xb0"}}(d,p,n,t[0].t.labels),n.hovertemplate=d.hovertemplate,[n]}}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),calcGeoJSON:y("./plot").calcGeoJSON,plot:y("./plot").plot,style:y("./style"),styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:y("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../lib/topojson_utils").getTopojsonFeatures,h=y("../../lib/geojson_utils"),e=y("../../lib/geo_location_utils"),n=y("../../plots/cartesian/autorange").findExtremes,r=y("../../constants/numerical").BADNUM,o=y("../scatter/calc").calcMarkerSize,t=y("../scatter/subtypes"),d=y("./style");Q.exports={calcGeoJSON:function(a,i){var s,c,l=a[0].trace,p=i[l.geo],g=p._subplot,u=l._length;if(Array.isArray(l.locations)){var x=l.locationmode,f="geojson-id"===x?e.extractTraceFeature(a):b(l,g.topojson);for(s=0;s<u;s++){c=a[s];var T="geojson-id"===x?c.fOut:e.locationToFeature(x,c.loc,f);c.lonlat=T?T.properties.ct:[r,r]}}var _,k,w={padded:!0};if("geojson"===p.fitbounds&&"geojson-id"===l.locationmode){var C=e.computeBbox(e.getTraceGeojson(l));_=[C[0],C[2]],k=[C[1],C[3]]}else{for(_=new Array(u),k=new Array(u),s=0;s<u;s++)_[s]=(c=a[s]).lonlat[0],k[s]=c.lonlat[1];w.ppad=o(l,u)}l._extremes.lon=n(p.lonaxis._ax,_,w),l._extremes.lat=n(p.lataxis._ax,k,w)},plot:function(a,i,s){var c=i.layers.frontplot.select(".scatterlayer"),l=v.makeTraceGroups(c,s,"trace scattergeo");function p(g,u){g.lonlat[0]===r&&m.select(u).remove()}l.selectAll("*").remove(),l.each(function(g){var u=m.select(this),x=g[0].trace;if(t.hasLines(x)||"none"!==x.fill){var f=h.calcTraceToLineCoords(g),T="none"!==x.fill?h.makePolygon(f):h.makeLine(f);u.selectAll("path.js-line").data([{geojson:T,trace:x}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}t.hasMarkers(x)&&u.selectAll("path.point").data(v.identity).enter().append("path").classed("point",!0).each(function(_){p(_,this)}),t.hasText(x)&&u.selectAll("g").data(v.identity).enter().append("g").append("text").each(function(_){p(_,this)}),d(a,g)})}}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(y,Q,K){"use strict";var m=y("../scatter/subtypes"),v=y("../../constants/numerical").BADNUM;Q.exports=function(b,h){var e,n,r,o,t,d=b.cd,a=b.xaxis,i=b.yaxis,s=[],c=d[0].trace;if(!m.hasMarkers(c)&&!m.hasText(c))return[];if(!1===h)for(t=0;t<d.length;t++)d[t].selected=0;else for(t=0;t<d.length;t++)(n=(e=d[t]).lonlat)[0]!==v&&(r=a.c2p(n),o=i.c2p(n),h.contains([r,o],null,t,b)?(s.push({pointNumber:t,lon:n[0],lat:n[1]}),e.selected=1):e.selected=0);return s}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/drawing"),b=y("../../components/color"),h=y("../scatter/style"),e=h.stylePoints,n=h.styleText;Q.exports=function(r,o){var t,d,a,i;o&&(t=r,a=(d=o)[0].trace,(i=d[0].node3).style("opacity",d[0].trace.opacity),e(i,a,t),n(i,a,t),i.selectAll("path.js-line").style("fill","none").each(function(s){var c=m.select(this),l=s.trace,p=l.line||{};c.call(b.stroke,p.color).call(v.dashLine,p.dash||"",p.width||0),"none"!==l.fill&&c.call(b.fill,l.fillcolor)}))}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(y,Q,K){"use strict";var m=y("../../plots/attributes"),v=y("../scatter/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=y("../../components/colorscale/attributes"),e=y("../../lib/sort_object_keys"),n=y("../../lib/extend").extendFlat,r=y("../../plot_api/edit_types").overrideAll,o=y("./constants").DASHES,t=v.line,d=v.marker,a=d.line,i=Q.exports=r({x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:v.text,hovertext:v.hovertext,textposition:v.textposition,textfont:v.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:t.color,width:t.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(o),dflt:"solid"}},marker:n({},h("marker"),{symbol:d.symbol,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:d.opacity,colorbar:d.colorbar,line:n({},h("marker.line"),{width:a.width})}),connectgaps:v.connectgaps,fill:n({},v.fill,{dflt:"none"}),fillcolor:v.fillcolor,selected:{marker:v.selected.marker,textfont:v.selected.textfont},unselected:{marker:v.unselected.marker,textfont:v.unselected.textfont},opacity:m.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=v.hovertemplate,i.texttemplate=v.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(y,Q,K){"use strict";var m=y("./hover");Q.exports={moduleType:"trace",name:"scattergl",basePlotModule:y("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../scatter/cross_trace_defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),hoverPoints:m.hoverPoints,selectPoints:y("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(y,Q,K){"use strict";var m=y("@plotly/point-cluster"),v=y("../../lib"),b=y("../../plots/cartesian/axis_ids"),h=y("../../plots/cartesian/autorange").findExtremes,e=y("../../plots/cartesian/align_period"),n=y("../scatter/calc"),r=n.calcMarkerSize,o=n.calcAxisExpansion,t=n.setFirstScatter,d=y("../scatter/colorscale_calc"),a=y("./convert"),i=y("./scene_update"),s=y("../../constants/numerical").BADNUM,c=y("./constants").TOO_MANY_POINTS;function l(p,g,u){var x=p._extremes[g._id],f=h(g,u._bnds,{padded:!0});x.min=x.min.concat(f.min),x.max=x.max.concat(f.max)}Q.exports=function(p,g){var u,x=p._fullLayout,f=b.getFromId(p,g.xaxis),T=b.getFromId(p,g.yaxis),_=x._plots[g.xaxis+g.yaxis],k=g._length,w=k>=c,C=2*k,A={},O=f.makeCalcdata(g,"x"),P=T.makeCalcdata(g,"y"),S=e(g,f,"x",O),E=e(g,T,"y",P),D=S.vals,z=E.vals;g._x=D,g._y=z,g.xperiodalignment&&(g._origX=O,g._xStarts=S.starts,g._xEnds=S.ends),g.yperiodalignment&&(g._origY=P,g._yStarts=E.starts,g._yEnds=E.ends);var N=new Array(C),V=new Array(k);for(u=0;u<k;u++)N[2*u]=D[u]===s?NaN:D[u],N[2*u+1]=z[u]===s?NaN:z[u],V[u]=u;if("log"===f.type)for(u=0;u<C;u+=2)N[u]=f.c2l(N[u]);if("log"===T.type)for(u=1;u<C;u+=2)N[u]=T.c2l(N[u]);w&&"log"!==f.type&&"log"!==T.type?A.tree=m(N):A.ids=V,d(p,g);var X,J=function(Z,re,j,B,H,ee){var U=a.style(Z,j);if(U.marker&&(U.marker.positions=B),U.line&&B.length>1&&v.extendFlat(U.line,a.linePositions(Z,j,B)),U.errorX||U.errorY){var $=a.errorBarPositions(Z,j,B,H,ee);U.errorX&&v.extendFlat(U.errorX,$.x),U.errorY&&v.extendFlat(U.errorY,$.y)}return U.text&&(v.extendFlat(U.text,{positions:B},a.textPosition(Z,j,U.text,U.marker)),v.extendFlat(U.textSel,{positions:B},a.textPosition(Z,j,U.text,U.markerSel)),v.extendFlat(U.textUnsel,{positions:B},a.textPosition(Z,j,U.text,U.markerUnsel))),U}(p,0,g,N,D,z),G=i(p,_);return t(x,g),w?J.marker&&(X=J.marker.sizeAvg||Math.max(J.marker.size,3)):X=r(g,k),o(p,g,f,T,D,z,X),J.errorX&&l(g,f,J.errorX),J.errorY&&l(g,T,J.errorY),J.fill&&!G.fill2d&&(G.fill2d=!0),J.marker&&!G.scatter2d&&(G.scatter2d=!0),J.line&&!G.line2d&&(G.line2d=!0),!J.errorX&&!J.errorY||G.error2d||(G.error2d=!0),J.text&&!G.glText&&(G.glText=!0),J.marker&&(J.marker.snap=k),G.lineOptions.push(J.line),G.errorXOptions.push(J.errorX),G.errorYOptions.push(J.errorY),G.fillOptions.push(J.fill),G.markerOptions.push(J.marker),G.markerSelectedOptions.push(J.markerSel),G.markerUnselectedOptions.push(J.markerUnsel),G.textOptions.push(J.text),G.textSelectedOptions.push(J.textSel),G.textUnselectedOptions.push(J.textUnsel),G.selectBatch.push([]),G.unselectBatch.push([]),A._scene=G,A.index=G.count,A.x=D,A.y=z,A.positions=N,G.count++,[{x:!1,y:!1,t:A,trace:g}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(y,Q,K){"use strict";Q.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("svg-path-sdf"),b=y("color-normalize"),h=y("../../registry"),e=y("../../lib"),n=y("../../components/drawing"),r=y("../../plots/cartesian/axis_ids"),o=y("../../lib/gl_format_color").formatColor,t=y("../scatter/subtypes"),d=y("../scatter/make_bubble_size_func"),a=y("./helpers"),i=y("./constants"),s=y("../../constants/interactions").DESELECTDIM,c={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},l=y("../../components/fx/helpers").appendArrayPointValue;function p(O,P){var S,E=O._fullLayout,D=P._length,z=P.textfont,N=P.textposition,V=Array.isArray(N)?N:[N],X=z.color,J=z.size,G=z.family,Z={},re=O._context.plotGlPixelRatio,j=P.texttemplate;if(j){Z.text=[];var B=E._d3locale,H=Array.isArray(j),ee=H?Math.min(j.length,D):D,U=H?function(ue){return j[ue]}:function(){return j};for(S=0;S<ee;S++){var $={i:S},q=P._module.formatLabels($,P,E),te={};l(te,P,S);var ne=P._meta||{};Z.text.push(e.texttemplateString(U(S),q,B,te,$,ne))}}else Z.text=Array.isArray(P.text)&&P.text.length<D?P.text.slice():P.text;if(Array.isArray(Z.text))for(S=Z.text.length;S<D;S++)Z.text[S]="";for(Z.opacity=P.opacity,Z.font={},Z.align=[],Z.baseline=[],S=0;S<V.length;S++){var se=V[S].split(/\s+/);switch(se[1]){case"left":Z.align.push("right");break;case"right":Z.align.push("left");break;default:Z.align.push(se[1])}switch(se[0]){case"top":Z.baseline.push("bottom");break;case"bottom":Z.baseline.push("top");break;default:Z.baseline.push(se[0])}}if(Array.isArray(X))for(Z.color=new Array(D),S=0;S<D;S++)Z.color[S]=X[S];else Z.color=X;if(e.isArrayOrTypedArray(J)||Array.isArray(G))for(Z.font=new Array(D),S=0;S<D;S++){var ie=Z.font[S]={};ie.size=(e.isTypedArray(J)?J[S]:Array.isArray(J)?m(J[S])?J[S]:0:J)*re,ie.family=Array.isArray(G)?G[S]:G}else Z.font={size:J*re,family:G};return Z}function g(O){var P,S,E=O._length,D=O.marker,z={},N=e.isArrayOrTypedArray(D.symbol),V=e.isArrayOrTypedArray(D.color),X=e.isArrayOrTypedArray(D.line.color),J=e.isArrayOrTypedArray(D.opacity),G=e.isArrayOrTypedArray(D.size),Z=e.isArrayOrTypedArray(D.line.width);if(N||(S=a.isOpenSymbol(D.symbol)),N||V||X||J){z.colors=new Array(E),z.borderColors=new Array(E);var re=o(D,D.opacity,E),j=o(D.line,D.opacity,E);if(!Array.isArray(j[0])){var B=j;for(j=Array(E),P=0;P<E;P++)j[P]=B}if(!Array.isArray(re[0])){var H=re;for(re=Array(E),P=0;P<E;P++)re[P]=H}for(z.colors=re,z.borderColors=j,P=0;P<E;P++)N&&(S=a.isOpenSymbol(D.symbol[P])),S&&(j[P]=re[P].slice(),re[P]=re[P].slice(),re[P][3]=0);z.opacity=O.opacity}else S?(z.color=b(D.color,"uint8"),z.color[3]=0,z.borderColor=b(D.color,"uint8")):(z.color=b(D.color,"uint8"),z.borderColor=b(D.line.color,"uint8")),z.opacity=O.opacity*D.opacity;if(N)for(z.markers=new Array(E),P=0;P<E;P++)z.markers[P]=A(D.symbol[P]);else z.marker=A(D.symbol);var U,$=d(O,1);if(G||Z){var q,te=z.sizes=new Array(E),ne=z.borderSizes=new Array(E),se=0;if(G){for(P=0;P<E;P++)te[P]=$(D.size[P]),se+=te[P];q=se/E}else for(U=$(D.size),P=0;P<E;P++)te[P]=U;if(Z)for(P=0;P<E;P++)ne[P]=D.line.width[P];else for(U=D.line.width,P=0;P<E;P++)ne[P]=U;z.sizeAvg=q}else z.size=$(D&&D.size||10),z.borderSizes=$(D.line.width);return z}function u(O,P){var E={};return P&&(P.marker&&P.marker.symbol?E=g(e.extendFlat({},O.marker,P.marker)):P.marker&&(P.marker.size&&(E.size=P.marker.size),P.marker.color&&(E.colors=P.marker.color),void 0!==P.marker.opacity&&(E.opacity=P.marker.opacity))),E}function x(O,P,S){var E={};if(!S)return E;if(S.textfont){var D={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:e.extendFlat({},P.textfont)};S.textfont&&e.extendFlat(D.textfont,S.textfont),E=p(O,D)}return E}function f(O,P,S){var E={capSize:2*P.width*S,lineWidth:P.thickness*S,color:P.color};return P.copy_ystyle&&(E=O.error_y),E}var T=i.SYMBOL_SDF_SIZE,_=i.SYMBOL_SIZE,k=i.SYMBOL_STROKE,w={},C=n.symbolFuncs[0](.05*_);function A(O){if("circle"===O)return null;var P,S,E=n.symbolNumber(O),D=n.symbolFuncs[E%100],z=!!n.symbolNoDot[E%100],N=!!n.symbolNoFill[E%100],V=a.isDotSymbol(O);return w[O]?w[O]:(P=V&&!z?D(1.1*_)+C:D(_),S=v(P,{w:T,h:T,viewBox:[-_,-_,_,_],stroke:N?k:-k}),w[O]=S,S||null)}Q.exports={style:function(O,P){var S,E={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},D=O._context.plotGlPixelRatio;if(!0!==P.visible)return E;if(t.hasText(P)&&(E.text=p(O,P),E.textSel=x(O,P,P.selected),E.textUnsel=x(O,P,P.unselected)),t.hasMarkers(P)&&(E.marker=g(P),E.markerSel=u(P,P.selected),E.markerUnsel=u(P,P.unselected),!P.unselected&&e.isArrayOrTypedArray(P.marker.opacity))){var z=P.marker.opacity;for(E.markerUnsel.opacity=new Array(z.length),S=0;S<z.length;S++)E.markerUnsel.opacity[S]=s*z[S]}if(t.hasLines(P)){E.line={overlay:!0,thickness:P.line.width*D,color:P.line.color,opacity:P.opacity};var N=(i.DASHES[P.line.dash]||[1]).slice();for(S=0;S<N.length;++S)N[S]*=P.line.width*D;E.line.dashes=N}return P.error_x&&P.error_x.visible&&(E.errorX=f(P,P.error_x,D)),P.error_y&&P.error_y.visible&&(E.errorY=f(P,P.error_y,D)),P.fill&&"none"!==P.fill&&(E.fill={closed:!0,fill:P.fillcolor,thickness:0}),E},markerStyle:g,markerSelection:u,linePositions:function(O,P,S){var E,D,z=S.length,N=z/2;if(t.hasLines(P)&&N)if("hv"===P.line.shape){for(E=[],D=0;D<N-1;D++)isNaN(S[2*D])||isNaN(S[2*D+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*D],S[2*D+1]),isNaN(S[2*D+2])||isNaN(S[2*D+3])?E.push(NaN,NaN):E.push(S[2*D+2],S[2*D+1]));E.push(S[z-2],S[z-1])}else if("hvh"===P.line.shape){for(E=[],D=0;D<N-1;D++)if(isNaN(S[2*D])||isNaN(S[2*D+1])||isNaN(S[2*D+2])||isNaN(S[2*D+3]))isNaN(S[2*D])||isNaN(S[2*D+1])?E.push(NaN,NaN):E.push(S[2*D],S[2*D+1]),E.push(NaN,NaN);else{var V=(S[2*D]+S[2*D+2])/2;E.push(S[2*D],S[2*D+1],V,S[2*D+1],V,S[2*D+3])}E.push(S[z-2],S[z-1])}else if("vhv"===P.line.shape){for(E=[],D=0;D<N-1;D++)if(isNaN(S[2*D])||isNaN(S[2*D+1])||isNaN(S[2*D+2])||isNaN(S[2*D+3]))isNaN(S[2*D])||isNaN(S[2*D+1])?E.push(NaN,NaN):E.push(S[2*D],S[2*D+1]),E.push(NaN,NaN);else{var X=(S[2*D+1]+S[2*D+3])/2;E.push(S[2*D],S[2*D+1],S[2*D],X,S[2*D+2],X)}E.push(S[z-2],S[z-1])}else if("vh"===P.line.shape){for(E=[],D=0;D<N-1;D++)isNaN(S[2*D])||isNaN(S[2*D+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*D],S[2*D+1]),isNaN(S[2*D+2])||isNaN(S[2*D+3])?E.push(NaN,NaN):E.push(S[2*D],S[2*D+3]));E.push(S[z-2],S[z-1])}else E=S;var J=!1;for(D=0;D<E.length;D++)if(isNaN(E[D])){J=!0;break}var G=J||E.length>i.TOO_MANY_POINTS||t.hasMarkers(P)?"rect":"round";if(J&&P.connectgaps){var Z=E[0],re=E[1];for(D=0;D<E.length;D+=2)isNaN(E[D])||isNaN(E[D+1])?(E[D]=Z,E[D+1]=re):(Z=E[D],re=E[D+1])}return{join:G,positions:E}},errorBarPositions:function(O,P,S,E,D){var z=h.getComponentMethod("errorbars","makeComputeError"),N=r.getFromId(O,P.xaxis),V=r.getFromId(O,P.yaxis),X=S.length/2,J={};function G(Z,re){var j=re._id.charAt(0),B=P["error_"+j];if(B&&B.visible&&("linear"===re.type||"log"===re.type)){for(var H=z(B),ee={x:0,y:1}[j],U={x:[0,1,2,3],y:[2,3,0,1]}[j],$=new Float64Array(4*X),q=1/0,te=-1/0,ne=0,se=0;ne<X;ne++,se+=4){var ie=Z[ne];if(m(ie)){var ue=S[2*ne+ee],le=H(ie,ne),de=le[0],be=le[1];if(m(de)&&m(be)){var xe=ie+be;$[se+U[0]]=ue-re.c2l(ie-de),$[se+U[1]]=re.c2l(xe)-ue,$[se+U[2]]=0,$[se+U[3]]=0,q=Math.min(q,ie-de),te=Math.max(te,ie+be)}}}J[j]={positions:S,errors:$,_bnds:[q,te]}}}return G(E,N),G(D,V),J},textPosition:function(O,P,S,E){var D,z=P._length,N={};if(t.hasMarkers(P)){var V=S.font,X=S.align,J=S.baseline;for(N.offset=new Array(z),D=0;D<z;D++){var G=E.sizes?E.sizes[D]:E.size,Z=Array.isArray(V)?V[D].size:V.size,re=Array.isArray(X)?X.length>1?X[D]:X[0]:X,j=Array.isArray(J)?J.length>1?J[D]:J[0]:J,H=c[j],ee=G?G/.8+1:0;N.offset[D]=[c[re]*ee/Z,(-H*ee-.5*H)/Z]}}return N}}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../registry"),b=y("./helpers"),h=y("./attributes"),e=y("../scatter/constants"),n=y("../scatter/subtypes"),r=y("../scatter/xy_defaults"),o=y("../scatter/period_defaults"),t=y("../scatter/marker_defaults"),d=y("../scatter/line_defaults"),a=y("../scatter/fillcolor_defaults"),i=y("../scatter/text_defaults");Q.exports=function(s,c,l,p){function g(C,A){return m.coerce(s,c,h,C,A)}var u=!!s.marker&&b.isOpenSymbol(s.marker.symbol),x=n.isBubble(s),f=r(s,c,p,g);if(f){o(s,c,p,g),g("xhoverformat"),g("yhoverformat");var T=f<e.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("hovertemplate"),g("mode",T),n.hasLines(c)&&(g("connectgaps"),d(s,c,l,p,g),g("line.shape")),n.hasMarkers(c)&&(t(s,c,l,p,g),g("marker.line.width",u||x?1:0)),n.hasText(c)&&(g("texttemplate"),i(s,c,p,g));var _=(c.line||{}).color,k=(c.marker||{}).color;g("fill"),"none"!==c.fill&&a(s,c,l,g);var w=v.getComponentMethod("errorbars","supplyDefaults");w(s,c,_||k||l,{axis:"y"}),w(s,c,_||k||l,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(c,g)}else c.visible=!1}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/color"),b=y("../../constants/interactions").DESELECTDIM;Q.exports={styleTextSelection:function(h){var e,n,r=h[0],o=r.trace,t=r.t,d=t._scene,a=t.index,i=d.selectBatch[a],s=d.unselectBatch[a],c=d.textOptions[a],l=d.textSelectedOptions[a]||{},p=d.textUnselectedOptions[a]||{},g=m.extendFlat({},c);if(i.length||s.length){var u=l.color,x=p.color,f=c.color,T=Array.isArray(f);for(g.color=new Array(o._length),e=0;e<i.length;e++)g.color[n=i[e]]=u||(T?f[n]:f);for(e=0;e<s.length;e++){n=s[e];var _=T?f[n]:f;g.color[n]=x||(u?_:v.addOpacity(_,b))}}d.glText[a].update(g)}}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(y,Q,K){"use strict";var m=y("../scatter/format_labels");Q.exports=function(v,b,h){var e=v.i;return"x"in v||(v.x=b._x[e]),"y"in v||(v.y=b._y[e]),m(v,b,h)}},{"../scatter/format_labels":945}],996:[function(y,Q,K){"use strict";var m=y("./constants");K.isOpenSymbol=function(v){return"string"==typeof v?m.OPEN_RE.test(v):v%200>100},K.isDotSymbol=function(v){return"string"==typeof v?m.DOT_RE.test(v):v>200}},{"./constants":991}],997:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("../scatter/get_trace_color");function h(e,n,r,o){var t=e.xa,d=e.ya,a=e.distance,i=e.dxy,s=e.index,c={pointNumber:s,x:n[s],y:r[s]};c.tx=Array.isArray(o.text)?o.text[s]:o.text,c.htx=Array.isArray(o.hovertext)?o.hovertext[s]:o.hovertext,c.data=Array.isArray(o.customdata)?o.customdata[s]:o.customdata,c.tp=Array.isArray(o.textposition)?o.textposition[s]:o.textposition;var l=o.textfont;l&&(c.ts=v.isArrayOrTypedArray(l.size)?l.size[s]:l.size,c.tc=Array.isArray(l.color)?l.color[s]:l.color,c.tf=Array.isArray(l.family)?l.family[s]:l.family);var p=o.marker;p&&(c.ms=v.isArrayOrTypedArray(p.size)?p.size[s]:p.size,c.mo=v.isArrayOrTypedArray(p.opacity)?p.opacity[s]:p.opacity,c.mx=v.isArrayOrTypedArray(p.symbol)?p.symbol[s]:p.symbol,c.mc=v.isArrayOrTypedArray(p.color)?p.color[s]:p.color);var g=p&&p.line;g&&(c.mlc=Array.isArray(g.color)?g.color[s]:g.color,c.mlw=v.isArrayOrTypedArray(g.width)?g.width[s]:g.width);var u=p&&p.gradient;u&&"none"!==u.type&&(c.mgt=Array.isArray(u.type)?u.type[s]:u.type,c.mgc=Array.isArray(u.color)?u.color[s]:u.color);var x=t.c2p(c.x,!0),f=d.c2p(c.y,!0),T=c.mrc||1,_=o.hoverlabel;_&&(c.hbg=Array.isArray(_.bgcolor)?_.bgcolor[s]:_.bgcolor,c.hbc=Array.isArray(_.bordercolor)?_.bordercolor[s]:_.bordercolor,c.hts=v.isArrayOrTypedArray(_.font.size)?_.font.size[s]:_.font.size,c.htc=Array.isArray(_.font.color)?_.font.color[s]:_.font.color,c.htf=Array.isArray(_.font.family)?_.font.family[s]:_.font.family,c.hnl=v.isArrayOrTypedArray(_.namelength)?_.namelength[s]:_.namelength);var k=o.hoverinfo;k&&(c.hi=Array.isArray(k)?k[s]:k);var w=o.hovertemplate;w&&(c.ht=Array.isArray(w)?w[s]:w);var C={};C[e.index]=c;var A=o._origX,O=o._origY,P=v.extendFlat({},e,{color:b(o,c),x0:x-T,x1:x+T,xLabelVal:A?A[s]:c.x,y0:f-T,y1:f+T,yLabelVal:O?O[s]:c.y,cd:C,distance:a,spikeDistance:i,hovertemplate:c.ht});return c.htx?P.text=c.htx:c.tx?P.text=c.tx:o.text&&(P.text=o.text),v.fillText(c,o,P),m.getComponentMethod("errorbars","hoverInfo")(c,o,P),P}Q.exports={hoverPoints:function(e,n,r,o){var t,d,a,i,s,c,l,p,g,u,x=e.cd,f=x[0].t,T=x[0].trace,_=e.xa,k=e.ya,w=f.x,C=f.y,A=_.c2p(n),O=k.c2p(r),P=e.distance;if(f.tree){var S=_.p2c(A-P),E=_.p2c(A+P),D=k.p2c(O-P),z=k.p2c(O+P);t="x"===o?f.tree.range(Math.min(S,E),Math.min(k._rl[0],k._rl[1]),Math.max(S,E),Math.max(k._rl[0],k._rl[1])):f.tree.range(Math.min(S,E),Math.min(D,z),Math.max(S,E),Math.max(D,z))}else t=f.ids;var N=P;if("x"===o){var V=!!T.xperiodalignment,X=!!T.yperiodalignment;for(c=0;c<t.length;c++){if(i=w[d=t[c]],l=Math.abs(_.c2p(i)-A),V){var J=_.c2p(T._xStarts[d]),G=_.c2p(T._xEnds[d]);l=A>=Math.min(J,G)&&A<=Math.max(J,G)?0:1/0}if(l<N){if(N=l,p=k.c2p(s=C[d])-O,X){var Z=k.c2p(T._yStarts[d]),re=k.c2p(T._yEnds[d]);p=O>=Math.min(Z,re)&&O<=Math.max(Z,re)?0:1/0}u=Math.sqrt(l*l+p*p),a=t[c]}}}else for(c=t.length-1;c>-1;c--)i=w[d=t[c]],s=C[d],l=_.c2p(i)-A,p=k.c2p(s)-O,(g=Math.sqrt(l*l+p*p))<N&&(N=u=g,a=d);return e.index=a,e.distance=N,e.dxy=u,void 0===a?[e]:[h(e,w,C,T)]},calcHover:h}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(y,Q,K){arguments[4][905][0].apply(K,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(y,Q,K){"use strict";var m=y("regl-scatter2d"),v=y("regl-line2d"),b=y("regl-error2d"),h=y("gl-text"),e=y("../../lib"),n=y("../../components/dragelement/helpers").selectMode,r=y("../../lib/prepare_regl"),o=y("../scatter/subtypes"),t=y("../scatter/link_traces"),d=y("./edit_style").styleTextSelection,a={};function i(s,c,l,p){var g=s._size,w=g.w*p,C=g.h*p;return[g.l*p+c.domain[0]*w,g.b*p+l.domain[0]*C,s.width*p-g.r*p-(1-c.domain[1])*w,s.height*p-g.t*p-(1-l.domain[1])*C]}(Q.exports=function(s,c,l){if(l.length){var p,g,u=s._fullLayout,x=c._scene,f=c.xaxis,T=c.yaxis;if(x)if(r(s,["ANGLE_instanced_arrays","OES_element_index_uint"],a)){var _=x.count,k=u._glcanvas.data()[0].regl;if(t(s,c,l),x.dirty){if(!0===x.error2d&&(x.error2d=b(k)),!0===x.line2d&&(x.line2d=v(k)),!0===x.scatter2d&&(x.scatter2d=m(k)),!0===x.fill2d&&(x.fill2d=v(k)),!0===x.glText)for(x.glText=new Array(_),p=0;p<_;p++)x.glText[p]=new h(k);if(x.glText){if(_>x.glText.length){var w=_-x.glText.length;for(p=0;p<w;p++)x.glText.push(new h(k))}else _<x.glText.length&&x.glText.splice(_,x.glText.length-_).forEach(function($){$.destroy()});for(p=0;p<_;p++)x.glText[p].update(x.textOptions[p])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function($){if($&&$.positions){for(var q=$.positions,te=0;te<q.length&&(isNaN(q[te])||isNaN(q[te+1]));)te+=2;for(var ne=q.length-2;ne>te&&(isNaN(q[ne])||isNaN(q[ne+1]));)ne-=2;$.positions=q.slice(te,ne+2)}return $}),x.line2d.update(x.lineOptions)),x.error2d){var A=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(A)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=e.repeat(null,_),x.fill2d&&(x.fillOptions=x.fillOptions.map(function($,q){var te=l[q];if($&&te&&te[0]&&te[0].trace){var ne,se,ie=te[0],ue=ie.trace,le=ie.t,de=x.lineOptions[q],be=[];ue._ownfill&&be.push(q),ue._nexttrace&&be.push(q+1),be.length&&(x.fillOrder[q]=be);var _e,xe,Ee=[],he=de&&de.positions||le.positions;if("tozeroy"===ue.fill){for(_e=0;_e<he.length&&isNaN(he[_e+1]);)_e+=2;for(xe=he.length-2;xe>_e&&isNaN(he[xe+1]);)xe-=2;0!==he[_e+1]&&(Ee=[he[_e],0]),Ee=Ee.concat(he.slice(_e,xe+2)),0!==he[xe+1]&&(Ee=Ee.concat([he[xe],0]))}else if("tozerox"===ue.fill){for(_e=0;_e<he.length&&isNaN(he[_e]);)_e+=2;for(xe=he.length-2;xe>_e&&isNaN(he[xe]);)xe-=2;0!==he[_e]&&(Ee=[0,he[_e+1]]),Ee=Ee.concat(he.slice(_e,xe+2)),0!==he[xe]&&(Ee=Ee.concat([0,he[xe+1]]))}else if("toself"===ue.fill||"tonext"===ue.fill){for(Ee=[],ne=0,$.splitNull=!0,se=0;se<he.length;se+=2)(isNaN(he[se])||isNaN(he[se+1]))&&((Ee=Ee.concat(he.slice(ne,se))).push(he[ne],he[ne+1]),Ee.push(null,null),ne=se+2);Ee=Ee.concat(he.slice(ne)),ne&&Ee.push(he[ne],he[ne+1])}else{var me=ue._nexttrace;if(me){var Se=x.lineOptions[q+1];if(Se){var Me=Se.positions;if("tonexty"===ue.fill){for(Ee=he.slice(),q=Math.floor(Me.length/2);q--;){var Ie=Me[2*q],Fe=Me[2*q+1];isNaN(Ie)||isNaN(Fe)||Ee.push(Ie,Fe)}$.fill=me.fillcolor}}}}if(ue._prevtrace&&"tonext"===ue._prevtrace.fill){var Ne=x.lineOptions[q-1].positions,De=Ee.length/2,$e=[ne=De];for(se=0;se<Ne.length;se+=2)(isNaN(Ne[se])||isNaN(Ne[se+1]))&&($e.push(se/2+De+1),ne=se+2);Ee=Ee.concat(Ne),$.hole=$e}return $.fillmode=ue.fill,$.opacity=ue.opacity,$.positions=Ee,$}}),x.fill2d.update(x.fillOptions))}var P=n(u.dragmode),S=u.clickmode.indexOf("select")>-1;for(p=0;p<_;p++){var E=l[p][0],D=E.trace,z=E.t,N=z.index,V=D._length,X=z.x,J=z.y;if(D.selectedpoints||P||S){if(P||(P=!0),D.selectedpoints){var G=x.selectBatch[N]=e.selIndices2selPoints(D),Z={};for(g=0;g<G.length;g++)Z[G[g]]=1;var re=[];for(g=0;g<V;g++)Z[g]||re.push(g);x.unselectBatch[N]=re}var j=z.xpx=new Array(V),B=z.ypx=new Array(V);for(g=0;g<V;g++)j[g]=f.c2p(X[g]),B[g]=T.c2p(J[g])}else z.xpx=z.ypx=null}if(P){if(x.select2d||(x.select2d=m(u._glcanvas.data()[1].regl)),x.scatter2d){var H=new Array(_);for(p=0;p<_;p++)H[p]=x.selectBatch[p].length||x.unselectBatch[p].length?x.markerUnselectedOptions[p]:{};x.scatter2d.update(H)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&l.forEach(function($){o.hasText((($||[])[0]||{}).trace||{})&&d($)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var ee={viewport:i(u,f,T,s._context.plotGlPixelRatio),range:[(f._rl||f.range)[0],(T._rl||T.range)[0],(f._rl||f.range)[1],(T._rl||T.range)[1]]},U=e.repeat(ee,x.count);x.fill2d&&x.fill2d.update(U),x.line2d&&x.line2d.update(U),x.error2d&&x.error2d.update(U.concat(U)),x.scatter2d&&x.scatter2d.update(U),x.select2d&&x.select2d.update(U),x.glText&&x.glText.forEach(function($){$.update(ee)})}else x.init()}}).reglPrecompiled=a},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b){var h=b._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return b._scene||((h=b._scene={}).init=function(){m.extendFlat(h,n,e)},h.init(),h.update=function(r){var o=m.repeat(r,h.count);if(h.fill2d&&h.fill2d.update(o),h.scatter2d&&h.scatter2d.update(o),h.line2d&&h.line2d.update(o),h.error2d&&h.error2d.update(o.concat(o)),h.select2d&&h.select2d.update(o),h.glText)for(var t=0;t<h.count;t++)h.glText[t].update(r)},h.draw=function(){for(var r=h.count,o=h.fill2d,t=h.error2d,d=h.line2d,a=h.scatter2d,i=h.glText,s=h.select2d,c=h.selectBatch,l=h.unselectBatch,p=0;p<r;p++){if(o&&h.fillOrder[p]&&o.draw(h.fillOrder[p]),d&&h.lineOptions[p]&&d.draw(p),t&&(h.errorXOptions[p]&&t.draw(p),h.errorYOptions[p]&&t.draw(p+r)),a&&h.markerOptions[p])if(l[p].length){var g=m.repeat([],h.count);g[p]=l[p],a.draw(g)}else c[p].length||a.draw(p);i[p]&&h.textOptions[p]&&i[p].render()}s&&s.draw(c),h.dirty=!1},h.destroy=function(){h.fill2d&&h.fill2d.destroy&&h.fill2d.destroy(),h.scatter2d&&h.scatter2d.destroy&&h.scatter2d.destroy(),h.error2d&&h.error2d.destroy&&h.error2d.destroy(),h.line2d&&h.line2d.destroy&&h.line2d.destroy(),h.select2d&&h.select2d.destroy&&h.select2d.destroy(),h.glText&&h.glText.forEach(function(r){r.destroy&&r.destroy()}),h.lineOptions=null,h.fillOptions=null,h.markerOptions=null,h.markerSelectedOptions=null,h.markerUnselectedOptions=null,h.errorXOptions=null,h.errorYOptions=null,h.textOptions=null,h.textSelectedOptions=null,h.textUnselectedOptions=null,h.selectBatch=null,h.unselectBatch=null,b._scene=null}),h.dirty||m.extendFlat(h,e),h}},{"../../lib":515}],1001:[function(y,Q,K){"use strict";var m=y("../scatter/subtypes"),v=y("./edit_style").styleTextSelection;Q.exports=function(b,h){var e=b.cd,n=b.xaxis,r=b.yaxis,o=[],t=e[0].trace,d=e[0].t,a=t._length,i=d.x,s=d.y,c=d._scene,l=d.index;if(!c)return o;var p=m.hasText(t),g=m.hasMarkers(t);if(!0!==t.visible||!g&&!p)return o;var x=[],f=[];if(!1!==h&&!h.degenerate)for(var T=0;T<a;T++)h.contains([d.xpx[T],d.ypx[T]],!1,T,b)?(x.push(T),o.push({pointNumber:T,x:n.c2d(i[T]),y:r.c2d(s[T])})):f.push(T);if(g){var _=c.scatter2d;if(x.length||f.length){if(!c.selectBatch[l].length&&!c.unselectBatch[l].length){var k=new Array(c.count);k[l]=c.markerUnselectedOptions[l],_.update.apply(_,k)}}else{var w=new Array(c.count);w[l]=c.markerOptions[l],_.update.apply(_,w)}}return c.selectBatch[l]=x,c.unselectBatch[l]=f,p&&v(e),o}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(y,Q,K){"use strict";var m=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,b=y("../scattergeo/attributes"),h=y("../scatter/attributes"),e=y("../../plots/mapbox/layout_attributes"),n=y("../../plots/attributes"),r=y("../../components/colorscale/attributes"),o=y("../../lib/extend").extendFlat,t=y("../../plot_api/edit_types").overrideAll,d=b.line,a=b.marker;Q.exports=t({lon:b.lon,lat:b.lat,mode:o({},h.mode,{dflt:"markers"}),text:o({},h.text,{}),texttemplate:v({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:o({},h.hovertext,{}),line:{color:d.color,width:d.width},connectgaps:h.connectgaps,marker:o({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:a.opacity,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode},r("marker")),fill:b.fill,fillcolor:h.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:h.selected.marker},unselected:{marker:h.unselected.marker},hoverinfo:o({},n.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../lib"),b=y("../../constants/numerical").BADNUM,h=y("../../lib/geojson_utils"),e=y("../../components/colorscale"),n=y("../../components/drawing"),r=y("../scatter/make_bubble_size_func"),o=y("../scatter/subtypes"),t=y("../../plots/mapbox/convert_text_opts"),d=y("../../components/fx/helpers").appendArrayPointValue,a=y("../../lib/svg_text_utils").NEWLINES,i=y("../../lib/svg_text_utils").BR_TAG_ALL;function s(){return{geojson:h.makeBlank(),layout:{visibility:"none"},paint:{}}}function c(g,u){return v.isArrayOrTypedArray(g)?u?function(x){return m(g[x])?+g[x]:0}:function(x){return g[x]}:g?function(){return g}:l}function l(){return""}function p(g){return g[0]===b}Q.exports=function(g,u){var x,f=u[0].trace,T=!0===f.visible&&0!==f._length,_="none"!==f.fill,k=o.hasLines(f),w=o.hasMarkers(f),C=o.hasText(f),A=w&&"circle"===f.marker.symbol,O=w&&"circle"!==f.marker.symbol,P=s(),S=s(),E=s(),D=s(),z={fill:P,line:S,circle:E,symbol:D};if(!T)return z;if((_||k)&&(x=h.calcTraceToLineCoords(u)),_&&(P.geojson=h.makePolygon(x),P.layout.visibility="visible",v.extendFlat(P.paint,{"fill-color":f.fillcolor})),k&&(S.geojson=h.makeLine(x),S.layout.visibility="visible",v.extendFlat(S.paint,{"line-width":f.line.width,"line-color":f.line.color,"line-opacity":f.opacity})),A){var N=function(J){var G,Z,re,j,B=J[0].trace,H=B.marker,ee=B.selectedpoints,U=v.isArrayOrTypedArray(H.color),$=v.isArrayOrTypedArray(H.size),q=v.isArrayOrTypedArray(H.opacity);function te(_e){return B.opacity*_e}U&&(Z=e.hasColorscale(B,"marker")?e.makeColorScaleFuncFromTrace(H):v.identity),$&&(re=r(B)),q&&(j=function(_e){return te(m(_e)?+v.constrain(_e,0,1):0)});var ne,be,se=[];for(G=0;G<J.length;G++){var ie=J[G],ue=ie.lonlat;if(!p(ue)){var le={};Z&&(le.mcc=ie.mcc=Z(ie.mc)),re&&(le.mrc=ie.mrc=re(ie.ms)),j&&(le.mo=j(ie.mo)),ee&&(le.selected=ie.selected||0),se.push({type:"Feature",geometry:{type:"Point",coordinates:ue},properties:le})}}if(ee)for(ne=n.makeSelectedPointStyleFns(B),G=0;G<se.length;G++){var de=se[G].properties;ne.selectedOpacityFn&&(de.mo=te(ne.selectedOpacityFn(de))),ne.selectedColorFn&&(de.mcc=ne.selectedColorFn(de)),ne.selectedSizeFn&&(de.mrc=ne.selectedSizeFn(de))}return{geojson:{type:"FeatureCollection",features:se},mcc:U||ne&&ne.selectedColorFn?{type:"identity",property:"mcc"}:H.color,mrc:$||ne&&ne.selectedSizeFn?{type:"identity",property:"mrc"}:(be=H.size,be/2),mo:q||ne&&ne.selectedOpacityFn?{type:"identity",property:"mo"}:te(H.opacity)}}(u);E.geojson=N.geojson,E.layout.visibility="visible",v.extendFlat(E.paint,{"circle-color":N.mcc,"circle-radius":N.mrc,"circle-opacity":N.mo})}if((O||C)&&(D.geojson=function(J,G){for(var Z=G._fullLayout,re=J[0].trace,j=re.marker||{},B=j.symbol,H=j.angle,ee="circle"!==B?c(B):l,U="auto"!==H?c(H,!0):l,$=o.hasText(re)?c(re.text):l,q=[],te=0;te<J.length;te++){var ne=J[te];if(!p(ne.lonlat)){var se,ie=re.texttemplate;if(ie){var ue=Array.isArray(ie)?ie[te]||"":ie,le=re._module.formatLabels(ne,re,Z),de={};d(de,re,ne.i),se=v.texttemplateString(ue,le,Z._d3locale,de,ne,re._meta||{})}else se=$(te);se&&(se=se.replace(a,"").replace(i,"\n")),q.push({type:"Feature",geometry:{type:"Point",coordinates:ne.lonlat},properties:{symbol:ee(te),angle:U(te),text:se}})}}return{type:"FeatureCollection",features:q}}(u,g),v.extendFlat(D.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),O&&(v.extendFlat(D.layout,{"icon-size":f.marker.size/10}),"angle"in f.marker&&"auto"!==f.marker.angle&&v.extendFlat(D.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),D.layout["icon-allow-overlap"]=f.marker.allowoverlap,v.extendFlat(D.paint,{"icon-opacity":f.opacity*f.marker.opacity,"icon-color":f.marker.color})),C)){var X=t(f.textposition,(f.marker||{}).size);v.extendFlat(D.layout,{"text-size":f.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset}),v.extendFlat(D.paint,{"text-color":f.textfont.color,"text-opacity":f.opacity})}return z}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatter/subtypes"),b=y("../scatter/marker_defaults"),h=y("../scatter/line_defaults"),e=y("../scatter/text_defaults"),n=y("../scatter/fillcolor_defaults"),r=y("./attributes");Q.exports=function(o,t,d,a){function i(c,l){return m.coerce(o,t,r,c,l)}if(l=t,g=(p=i)("lon")||[],u=p("lat")||[],x=Math.min(g.length,u.length),l._length=x,x){if(i("text"),i("texttemplate"),i("hovertext"),i("hovertemplate"),i("mode"),i("below"),v.hasLines(t)&&(h(o,t,d,a,i,{noDash:!0}),i("connectgaps")),v.hasMarkers(t)){b(o,t,d,a,i,{noLine:!0}),i("marker.allowoverlap"),i("marker.angle");var s=t.marker;"circle"!==s.symbol&&(m.isArrayOrTypedArray(s.size)&&(s.size=s.size[0]),m.isArrayOrTypedArray(s.color)&&(s.color=s.color[0]))}v.hasText(t)&&e(o,t,a,i,{noSelect:!0}),i("fill"),"none"!==t.fill&&n(o,t,d,i),m.coerceSelectionMarkerOpacity(t,i)}else t.visible=!1;var l,p,g,u,x}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(y,Q,K){"use strict";Q.exports=function(m,v){return m.lon=v.lon,m.lat=v.lat,m}},{}],1006:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes");Q.exports=function(v,b,h){var e={},n=h[b.subplot]._subplot.mockAxis,r=v.lonlat;return e.lonLabel=m.tickText(n,n.c2l(r[0]),!0).text,e.latLabel=m.tickText(n,n.c2l(r[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],1007:[function(y,Q,K){"use strict";var m=y("../../components/fx"),v=y("../../lib"),b=y("../scatter/get_trace_color"),h=v.fillText,e=y("../../constants/numerical").BADNUM;function n(r,o,t){if(!r.hovertemplate){var d=(o.hi||r.hoverinfo).split("+"),a=-1!==d.indexOf("all"),i=-1!==d.indexOf("lon"),s=-1!==d.indexOf("lat"),c=o.lonlat,l=[];return a||i&&s?l.push("("+p(c[1])+", "+p(c[0])+")"):i?l.push(t.lon+p(c[0])):s&&l.push(t.lat+p(c[1])),(a||-1!==d.indexOf("text"))&&h(o,r,l),l.join("<br>")}function p(g){return g+"\xb0"}}Q.exports={hoverPoints:function(r,o,t){var d=r.cd,a=d[0].trace,i=r.xa,s=r.ya,c=r.subplot,l=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),p=o-l;if(m.getClosest(d,function(C){var A=C.lonlat;if(A[0]===e)return 1/0;var O=v.modHalf(A[0],360),P=A[1],S=c.project([O,P]),E=S.x-i.c2p([p,P]),D=S.y-s.c2p([O,t]),z=Math.max(3,C.mrc||0);return Math.max(Math.sqrt(E*E+D*D)-z,1-3/z)},r),!1!==r.index){var g=d[r.index],u=g.lonlat,x=[v.modHalf(u[0],360)+l,u[1]],f=i.c2p(x),T=s.c2p(x),_=g.mrc||1;r.x0=f-_,r.x1=f+_,r.y0=T-_,r.y1=T+_;var k={};k[a.subplot]={_subplot:c};var w=a._module.formatLabels(g,a,k);return r.lonLabel=w.lonLabel,r.latLabel=w.latLabel,r.color=b(a,g),r.extraText=n(a,g,d[0].t.labels),r.hovertemplate=a.hovertemplate,[r]}},getExtraText:n}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946}],1008:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("../scattergeo/calc"),plot:y("./plot"),hoverPoints:y("./hover").hoverPoints,eventData:y("./event_data"),selectPoints:y("./select"),styleOnSelect:function(m,v){v&&v[0].trace._glTrace.update(v)},moduleType:"trace",name:"scattermapbox",basePlotModule:y("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(y,Q,K){"use strict";var m=y("./convert"),v=y("../../plots/mapbox/constants").traceLayerPrefix,b=["fill","line","circle","symbol"];function h(n,r){this.type="scattermapbox",this.subplot=n,this.uid=r,this.sourceIds={fill:"source-"+r+"-fill",line:"source-"+r+"-line",circle:"source-"+r+"-circle",symbol:"source-"+r+"-symbol"},this.layerIds={fill:v+r+"-fill",line:v+r+"-line",circle:v+r+"-circle",symbol:v+r+"-symbol"},this.below=null}var e=h.prototype;e.addSource=function(n,r){this.subplot.map.addSource(this.sourceIds[n],{type:"geojson",data:r.geojson})},e.setSourceData=function(n,r){this.subplot.map.getSource(this.sourceIds[n]).setData(r.geojson)},e.addLayer=function(n,r,o){this.subplot.addLayer({type:n,id:this.layerIds[n],source:this.sourceIds[n],layout:r.layout,paint:r.paint},o)},e.update=function(n){var r,o,t,d=this.subplot,a=d.map,i=m(d.gd,n),s=d.belowLookup["trace-"+this.uid];if(s!==this.below){for(r=b.length-1;r>=0;r--)a.removeLayer(this.layerIds[o=b[r]]);for(r=0;r<b.length;r++)t=i[o=b[r]],this.addLayer(o,t,s);this.below=s}for(r=0;r<b.length;r++)t=i[o=b[r]],d.setOptions(this.layerIds[o],"setLayoutProperty",t.layout),"visible"===t.layout.visibility&&(this.setSourceData(o,t),d.setOptions(this.layerIds[o],"setPaintProperty",t.paint));n[0].trace._glTrace=this},e.dispose=function(){for(var n=this.subplot.map,r=b.length-1;r>=0;r--){var o=b[r];n.removeLayer(this.layerIds[o]),n.removeSource(this.sourceIds[o])}},Q.exports=function(n,r){for(var o=r[0].trace,t=new h(n,o.uid),d=m(n.gd,r),a=t.below=n.belowLookup["trace-"+o.uid],i=0;i<b.length;i++){var s=b[i],c=d[s];t.addSource(s,c),t.addLayer(s,c,a)}return r[0].trace._glTrace=t,t}},{"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatter/subtypes"),b=y("../../constants/numerical").BADNUM;Q.exports=function(h,e){var n,r=h.cd,o=h.xaxis,t=h.yaxis,d=[];if(!v.hasMarkers(r[0].trace))return[];if(!1===e)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++){var i=r[n],s=i.lonlat;if(s[0]!==b){var c=[m.modHalf(s[0],360),s[1]],l=[o.c2p(c),t.c2p(c)];e.contains(l,null,n,h)?(d.push({pointNumber:n,lon:s[0],lat:s[1]}),i.selected=1):i.selected=0}}return d}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(y,Q,K){"use strict";var m=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../lib/extend").extendFlat,h=y("../scatter/attributes"),e=y("../../plots/attributes"),n=h.line;Q.exports={mode:h.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:h.text,texttemplate:v({editType:"plot"},{keys:["r","theta","text"]}),hovertext:h.hovertext,line:{color:n.color,width:n.width,dash:n.dash,shape:b({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:h.connectgaps,marker:h.marker,cliponaxis:b({},h.cliponaxis,{dflt:!1}),textposition:h.textposition,textfont:h.textfont,fill:b({},h.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:h.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:h.hoveron,hovertemplate:m(),selected:h.selected,unselected:h.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../constants/numerical").BADNUM,b=y("../../plots/cartesian/axes"),h=y("../scatter/colorscale_calc"),e=y("../scatter/arrays_to_calcdata"),n=y("../scatter/calc_selection"),r=y("../scatter/calc").calcMarkerSize;Q.exports=function(o,t){for(var d=o._fullLayout,a=t.subplot,i=d[a].radialaxis,s=d[a].angularaxis,c=i.makeCalcdata(t,"r"),l=s.makeCalcdata(t,"theta"),p=t._length,g=new Array(p),u=0;u<p;u++){var x=c[u],f=l[u],T=g[u]={};m(x)&&m(f)?(T.r=x,T.theta=f):T.r=v}var _=r(t,p);return t._extremes.x=b.findExtremes(i,c,{ppad:_}),h(o,t),e(g,t),n(g,t),g}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatter/subtypes"),b=y("../scatter/marker_defaults"),h=y("../scatter/line_defaults"),e=y("../scatter/line_shape_defaults"),n=y("../scatter/text_defaults"),r=y("../scatter/fillcolor_defaults"),o=y("../scatter/constants").PTS_LINESONLY,t=y("./attributes");function d(a,i,s,c){var l,p=c("r"),g=c("theta");if(p)g?l=Math.min(p.length,g.length):(l=p.length,c("theta0"),c("dtheta"));else{if(!g)return 0;l=i.theta.length,c("r0"),c("dr")}return i._length=l,l}Q.exports={handleRThetaDefaults:d,supplyDefaults:function(a,i,s,c){function l(u,x){return m.coerce(a,i,t,u,x)}var p=d(0,i,0,l);if(p){l("thetaunit"),l("mode",p<o?"lines+markers":"lines"),l("text"),l("hovertext"),"fills"!==i.hoveron&&l("hovertemplate"),v.hasLines(i)&&(h(a,i,s,c,l),e(a,i,l),l("connectgaps")),v.hasMarkers(i)&&b(a,i,s,c,l,{gradient:!0}),v.hasText(i)&&(l("texttemplate"),n(a,i,c,l));var g=[];(v.hasMarkers(i)||v.hasText(i))&&(l("cliponaxis"),l("marker.maxdisplayed"),g.push("points")),l("fill"),"none"!==i.fill&&(r(a,i,s,l),v.hasLines(i)||e(a,i,l)),"tonext"!==i.fill&&"toself"!==i.fill||g.push("fills"),l("hoveron",g.join("+")||"points"),m.coerceSelectionMarkerOpacity(i,l)}else i.visible=!1}}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes");Q.exports=function(b,h,e){var n,r,o={},t=e[h.subplot]._subplot;t?(n=t.radialAxis,r=t.angularAxis):(n=(t=e[h.subplot]).radialaxis,r=t.angularaxis);var d=n.c2l(b.r);o.rLabel=v.tickText(n,d,!0).text;var a="degrees"===r.thetaunit?m.rad2deg(b.theta):b.theta;return o.thetaLabel=v.tickText(r,a,!0).text,o}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(y,Q,K){"use strict";var m=y("../scatter/hover");function v(b,h,e,n){var r=e.radialAxis,o=e.angularAxis;r._hovertitle="r",o._hovertitle="\u03b8";var t={};t[h.subplot]={_subplot:e};var d=h._module.formatLabels(b,h,t);n.rLabel=d.rLabel,n.thetaLabel=d.thetaLabel;var i=[];function s(l,p){i.push(l._hovertitle+": "+p)}if(!h.hovertemplate){var c=(b.hi||h.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["r","theta","text"]),-1!==c.indexOf("r")&&s(r,n.rLabel),-1!==c.indexOf("theta")&&s(o,n.thetaLabel),-1!==c.indexOf("text")&&n.text&&(i.push(n.text),delete n.text),n.extraText=i.join("<br>")}}Q.exports={hoverPoints:function(b,h,e,n){var r=m(b,h,e,n);if(r&&!1!==r[0].index){var o=r[0];if(void 0===o.index)return r;var t=b.subplot,d=o.cd[o.index],a=o.trace;if(t.isPtInside(d))return o.xLabelVal=void 0,o.yLabelVal=void 0,v(d,a,t,o),o.hovertemplate=a.hovertemplate,r}},makeHoverPointText:v}},{"../scatter/hover":947}],1016:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:y("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,selectPoints:y("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(y,Q,K){"use strict";var m=y("../scatter/plot"),v=y("../../constants/numerical").BADNUM;Q.exports=function(b,h,e){for(var n=h.layers.frontplot.select("g.scatterlayer"),r={xaxis:h.xaxis,yaxis:h.yaxis,plot:h.framework,layerClipId:h._hasClipOnAxisFalse?h.clipIds.forTraces:null},o=h.radialAxis,t=h.angularAxis,d=0;d<e.length;d++)for(var a=e[d],i=0;i<a.length;i++){var s=a[i],c=s.r;if(c===v)s.x=s.y=v;else{var l=o.c2g(c),p=t.c2g(s.theta);s.x=l*Math.cos(p),s.y=l*Math.sin(p)}}m(b,r,e,n)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(y,Q,K){"use strict";var m=y("../scatterpolar/attributes"),v=y("../scattergl/attributes"),b=y("../../plots/template_attributes").texttemplateAttrs;Q.exports={mode:m.mode,r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,text:m.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,hovertemplate:m.hovertemplate,line:v.line,connectgaps:v.connectgaps,marker:v.marker,fill:v.fill,fillcolor:v.fillcolor,textposition:v.textposition,textfont:v.textfont,hoverinfo:m.hoverinfo,selected:m.selected,unselected:m.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:y("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),hoverPoints:y("./hover").hoverPoints,selectPoints:y("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(y,Q,K){"use strict";var m=y("../scatter/colorscale_calc"),v=y("../scatter/calc").calcMarkerSize,b=y("../scattergl/convert"),h=y("../../plots/cartesian/axes"),e=y("../scattergl/constants").TOO_MANY_POINTS;Q.exports=function(n,r){var o=n._fullLayout,t=r.subplot,d=o[t].radialaxis,a=o[t].angularaxis,i=r._r=d.makeCalcdata(r,"r"),s=r._theta=a.makeCalcdata(r,"theta"),c=r._length,l={};c<i.length&&(i=i.slice(0,c)),c<s.length&&(s=s.slice(0,c)),l.r=i,l.theta=s,m(n,r);var p,g=l.opts=b.style(n,r);return c<e?p=v(r,c):g.marker&&(p=2*(g.marker.sizeAvg||Math.max(g.marker.size,3))),r._extremes.x=h.findExtremes(d,i,{ppad:p}),[{x:!1,y:!1,t:l,trace:r}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatter/subtypes"),b=y("../scatterpolar/defaults").handleRThetaDefaults,h=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),n=y("../scatter/text_defaults"),r=y("../scatter/fillcolor_defaults"),o=y("../scatter/constants").PTS_LINESONLY,t=y("./attributes");Q.exports=function(d,a,i,s){function c(p,g){return m.coerce(d,a,t,p,g)}var l=b(d,a,s,c);l?(c("thetaunit"),c("mode",l<o?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==a.hoveron&&c("hovertemplate"),v.hasLines(a)&&(e(d,a,i,s,c),c("connectgaps")),v.hasMarkers(a)&&h(d,a,i,s,c),v.hasText(a)&&(c("texttemplate"),n(d,a,s,c)),c("fill"),"none"!==a.fill&&r(d,a,i,c),m.coerceSelectionMarkerOpacity(a,c)):a.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(y,Q,K){"use strict";var m=y("../scatterpolar/format_labels");Q.exports=function(v,b,h){var e=v.i;return"r"in v||(v.r=b._r[e]),"theta"in v||(v.theta=b._theta[e]),m(v,b,h)}},{"../scatterpolar/format_labels":1014}],1023:[function(y,Q,K){"use strict";var m=y("../scattergl/hover"),v=y("../scatterpolar/hover").makeHoverPointText;Q.exports={hoverPoints:function(b,h,e,n){var r=b.cd[0].t,o=r.r,t=r.theta,d=m.hoverPoints(b,h,e,n);if(d&&!1!==d[0].index){var a=d[0];if(void 0===a.index)return d;var i=b.subplot,s=a.cd[a.index],c=a.trace;if(s.r=o[a.index],s.theta=t[a.index],i.isPtInside(s))return a.xLabelVal=void 0,a.yLabelVal=void 0,v(s,c,i,a),d}}}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(y,Q,K){arguments[4][905][0].apply(K,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(y,Q,K){"use strict";var m=y("@plotly/point-cluster"),v=y("fast-isnumeric"),b=y("../scattergl/plot"),h=y("../scattergl/scene_update"),e=y("../scattergl/convert"),n=y("../../lib"),r=y("../scattergl/constants").TOO_MANY_POINTS;Q.exports=function(o,t,d){if(d.length){var a=t.radialAxis,i=t.angularAxis,s=h(o,t);return d.forEach(function(c){if(c&&c[0]&&c[0].trace){var l,p=c[0],g=p.trace,u=p.t,x=g._length,f=u.r,T=u.theta,_=u.opts,k=f.slice(),w=T.slice();for(l=0;l<f.length;l++)t.isPtInside({r:f[l],theta:T[l]})||(k[l]=NaN,w[l]=NaN);var C=new Array(2*x),A=Array(x),O=Array(x);for(l=0;l<x;l++){var P,S,E=k[l];if(v(E)){var D=a.c2g(E),z=i.c2g(w[l],g.thetaunit);P=D*Math.cos(z),S=D*Math.sin(z)}else P=S=NaN;A[l]=C[2*l]=P,O[l]=C[2*l+1]=S}u.tree=m(C),_.marker&&x>=r&&(_.marker.cluster=u.tree),_.marker&&(_.markerSel.positions=_.markerUnsel.positions=_.marker.positions=C),_.line&&C.length>1&&n.extendFlat(_.line,e.linePositions(o,g,C)),_.text&&(n.extendFlat(_.text,{positions:C},e.textPosition(o,g,_.text,_.marker)),n.extendFlat(_.textSel,{positions:C},e.textPosition(o,g,_.text,_.markerSel)),n.extendFlat(_.textUnsel,{positions:C},e.textPosition(o,g,_.text,_.markerUnsel))),_.fill&&!s.fill2d&&(s.fill2d=!0),_.marker&&!s.scatter2d&&(s.scatter2d=!0),_.line&&!s.line2d&&(s.line2d=!0),_.text&&!s.glText&&(s.glText=!0),s.lineOptions.push(_.line),s.fillOptions.push(_.fill),s.markerOptions.push(_.marker),s.markerSelectedOptions.push(_.markerSel),s.markerUnselectedOptions.push(_.markerUnsel),s.textOptions.push(_.text),s.textSelectedOptions.push(_.textSel),s.textUnselectedOptions.push(_.textUnsel),s.selectBatch.push([]),s.unselectBatch.push([]),u.x=A,u.y=O,u.rawx=A,u.rawy=O,u.r=f,u.theta=T,u.positions=C,u._scene=s,u.index=s.count,s.count++}}),b(o,t,d)}},Q.exports.reglPrecompiled={}},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(y,Q,K){"use strict";var m=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../lib/extend").extendFlat,h=y("../scatter/attributes"),e=y("../../plots/attributes"),n=h.line;Q.exports={mode:h.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:h.text,texttemplate:v({editType:"plot"},{keys:["real","imag","text"]}),hovertext:h.hovertext,line:{color:n.color,width:n.width,dash:n.dash,shape:b({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:h.connectgaps,marker:h.marker,cliponaxis:b({},h.cliponaxis,{dflt:!1}),textposition:h.textposition,textfont:h.textfont,fill:b({},h.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:h.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:h.hoveron,hovertemplate:m(),selected:h.selected,unselected:h.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../../constants/numerical").BADNUM,b=y("../scatter/colorscale_calc"),h=y("../scatter/arrays_to_calcdata"),e=y("../scatter/calc_selection"),n=y("../scatter/calc").calcMarkerSize;Q.exports=function(r,o){for(var t=r._fullLayout,d=o.subplot,i=t[d].imaginaryaxis,s=t[d].realaxis.makeCalcdata(o,"real"),c=i.makeCalcdata(o,"imag"),l=o._length,p=new Array(l),g=0;g<l;g++){var u=s[g],x=c[g],f=p[g]={};m(u)&&m(x)?(f.real=u,f.imag=x):f.real=v}return n(o,l),b(r,o),h(p,o),e(p,o),p}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatter/subtypes"),b=y("../scatter/marker_defaults"),h=y("../scatter/line_defaults"),e=y("../scatter/line_shape_defaults"),n=y("../scatter/text_defaults"),r=y("../scatter/fillcolor_defaults"),o=y("../scatter/constants").PTS_LINESONLY,t=y("./attributes");Q.exports=function(d,a,i,s){function c(g,u){return m.coerce(d,a,t,g,u)}var u,f,T,_,k,l=(u=a,_=(f=c)("real"),k=f("imag"),_&&k&&(T=Math.min(_.length,k.length)),u._length=T,T);if(l){c("mode",l<o?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==a.hoveron&&c("hovertemplate"),v.hasLines(a)&&(h(d,a,i,s,c),e(d,a,c),c("connectgaps")),v.hasMarkers(a)&&b(d,a,i,s,c,{gradient:!0}),v.hasText(a)&&(c("texttemplate"),n(d,a,s,c));var p=[];(v.hasMarkers(a)||v.hasText(a))&&(c("cliponaxis"),c("marker.maxdisplayed"),p.push("points")),c("fill"),"none"!==a.fill&&(r(d,a,i,c),v.hasLines(a)||e(d,a,c)),"tonext"!==a.fill&&"toself"!==a.fill||p.push("fills"),c("hoveron",p.join("+")||"points"),m.coerceSelectionMarkerOpacity(a,c)}else a.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes");Q.exports=function(v,b,h){var e={},n=h[b.subplot]._subplot;return e.realLabel=m.tickText(n.radialAxis,v.real,!0).text,e.imagLabel=m.tickText(n.angularAxis,v.imag,!0).text,e}},{"../../plots/cartesian/axes":566}],1030:[function(y,Q,K){"use strict";var m=y("../scatter/hover");function v(b,h,e,n){var r=e.radialAxis,o=e.angularAxis;r._hovertitle="real",o._hovertitle="imag";var t={};t[h.subplot]={_subplot:e};var d=h._module.formatLabels(b,h,t);n.realLabel=d.realLabel,n.imagLabel=d.imagLabel;var i=[];function s(l,p){i.push(l._hovertitle+": "+p)}if(!h.hovertemplate){var c=(b.hi||h.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["real","imag","text"]),-1!==c.indexOf("real")&&s(r,n.realLabel),-1!==c.indexOf("imag")&&s(o,n.imagLabel),-1!==c.indexOf("text")&&n.text&&(i.push(n.text),delete n.text),n.extraText=i.join("<br>")}}Q.exports={hoverPoints:function(b,h,e,n){var r=m(b,h,e,n);if(r&&!1!==r[0].index){var o=r[0];if(void 0===o.index)return r;var t=b.subplot,d=o.cd[o.index],a=o.trace;if(t.isPtInside(d))return o.xLabelVal=void 0,o.yLabelVal=void 0,v(d,a,t,o),o.hovertemplate=a.hovertemplate,r}},makeHoverPointText:v}},{"../scatter/hover":947}],1031:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"scattersmith",basePlotModule:y("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,selectPoints:y("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(y,Q,K){"use strict";var m=y("../scatter/plot"),v=y("../../constants/numerical").BADNUM,b=y("../../plots/smith/helpers").smith;Q.exports=function(h,e,n){for(var r=e.layers.frontplot.select("g.scatterlayer"),o={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},t=0;t<n.length;t++)for(var d=n[t],a=0;a<d.length;a++){var i=d[a],s=i.real;if(s===v)i.x=i.y=v;else{var c=b([s,i.imag]);i.x=c[0],i.y=c[1]}}m(h,o,n,r)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(y,Q,K){"use strict";var m=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,b=y("../scatter/attributes"),h=y("../../plots/attributes"),e=y("../../components/colorscale/attributes"),n=y("../../components/drawing/attributes").dash,r=y("../../lib/extend").extendFlat,o=b.marker,t=b.line,d=o.line;Q.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:r({},b.mode,{dflt:"markers"}),text:r({},b.text,{}),texttemplate:v({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:r({},b.hovertext,{}),line:{color:t.color,width:t.width,dash:n,shape:r({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:b.connectgaps,cliponaxis:b.cliponaxis,fill:r({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,marker:r({symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:r({width:d.width,editType:"calc"},e("marker.line")),gradient:o.gradient,editType:"calc"},e("marker")),textfont:b.textfont,textposition:b.textposition,selected:b.selected,unselected:b.unselected,hoverinfo:r({},h.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:b.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(y,Q,K){"use strict";var m=y("fast-isnumeric"),v=y("../scatter/colorscale_calc"),b=y("../scatter/arrays_to_calcdata"),h=y("../scatter/calc_selection"),e=y("../scatter/calc").calcMarkerSize,n=["a","b","c"],r={a:["b","c"],b:["a","c"],c:["a","b"]};Q.exports=function(o,t){var d,a,i,s,c,l,p=o._fullLayout[t.subplot].sum,g=t.sum||p,u={a:t.a,b:t.b,c:t.c};for(d=0;d<n.length;d++)if(!u[i=n[d]]){for(c=u[r[i][0]],l=u[r[i][1]],s=new Array(c.length),a=0;a<c.length;a++)s[a]=g-c[a]-l[a];u[i]=s}var x,f,T,_,C=t._length,A=new Array(C);for(d=0;d<C;d++)f=u.b[d],T=u.c[d],m(x=u.a[d])&&m(f)&&m(T)?(1!=(_=p/((x=+x)+(f=+f)+(T=+T)))&&(x*=_,f*=_,T*=_),A[d]={x:T-f,y:x,a:x,b:f,c:T}):A[d]={x:!1,y:!1};return e(t,C),v(o,t),b(A,t),h(A,t),A}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatter/constants"),b=y("../scatter/subtypes"),h=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),n=y("../scatter/line_shape_defaults"),r=y("../scatter/text_defaults"),o=y("../scatter/fillcolor_defaults"),t=y("./attributes");Q.exports=function(d,a,i,s){function c(f,T){return m.coerce(d,a,t,f,T)}var l,p=c("a"),g=c("b"),u=c("c");if(p?(l=p.length,g?(l=Math.min(l,g.length),u&&(l=Math.min(l,u.length))):l=u?Math.min(l,u.length):0):g&&u&&(l=Math.min(g.length,u.length)),l){a._length=l,c("sum"),c("text"),c("hovertext"),"fills"!==a.hoveron&&c("hovertemplate"),c("mode",l<v.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(a)&&(e(d,a,i,s,c),n(d,a,c),c("connectgaps")),b.hasMarkers(a)&&h(d,a,i,s,c,{gradient:!0}),b.hasText(a)&&(c("texttemplate"),r(d,a,s,c));var x=[];(b.hasMarkers(a)||b.hasText(a))&&(c("cliponaxis"),c("marker.maxdisplayed"),x.push("points")),c("fill"),"none"!==a.fill&&(o(d,a,i,c),b.hasLines(a)||n(d,a,c)),"tonext"!==a.fill&&"toself"!==a.fill||x.push("fills"),c("hoveron",x.join("+")||"points"),m.coerceSelectionMarkerOpacity(a,c)}else a.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(y,Q,K){"use strict";Q.exports=function(m,v,b,h,e){if(v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),h[e]){var n=h[e];m.a=n.a,m.b=n.b,m.c=n.c}else m.a=v.a,m.b=v.b,m.c=v.c;return m}},{}],1037:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes");Q.exports=function(v,b,h){var e={},n=h[b.subplot]._subplot;return e.aLabel=m.tickText(n.aaxis,v.a,!0).text,e.bLabel=m.tickText(n.baxis,v.b,!0).text,e.cLabel=m.tickText(n.caxis,v.c,!0).text,e}},{"../../plots/cartesian/axes":566}],1038:[function(y,Q,K){"use strict";var m=y("../scatter/hover");Q.exports=function(v,b,h,e){var n=m(v,b,h,e);if(n&&!1!==n[0].index){var r=n[0];if(void 0===r.index){var t=v.xa._length,d=t*(1-r.y0/v.ya._length)/2,a=t-d;return r.x0=Math.max(Math.min(r.x0,a),d),r.x1=Math.max(Math.min(r.x1,a),d),n}var i=r.cd[r.index],s=r.trace,c=r.subplot;r.a=i.a,r.b=i.b,r.c=i.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var l={};l[s.subplot]={_subplot:c};var p=s._module.formatLabels(i,s,l);r.aLabel=p.aLabel,r.bLabel=p.bLabel,r.cLabel=p.cLabel;var u=[];if(!s.hovertemplate){var x=(i.hi||s.hoverinfo).split("+");-1!==x.indexOf("all")&&(x=["a","b","c"]),-1!==x.indexOf("a")&&f(c.aaxis,r.aLabel),-1!==x.indexOf("b")&&f(c.baxis,r.bLabel),-1!==x.indexOf("c")&&f(c.caxis,r.cLabel)}return r.extraText=u.join("<br>"),r.hovertemplate=s.hovertemplate,n}function f(T,_){u.push(T._hovertitle+": "+_)}}},{"../scatter/hover":947}],1039:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../scatter/select"),eventData:y("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:y("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(y,Q,K){"use strict";var m=y("../scatter/plot");Q.exports=function(v,b,h){var e=b.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var n={xaxis:b.xaxis,yaxis:b.yaxis,plot:e,layerClipId:b._hasClipOnAxisFalse?b.clipIdRelative:null},r=b.layers.frontplot.select("g.scatterlayer");m(v,n,h,r)}},{"../scatter/plot":957}],1041:[function(y,Q,K){"use strict";var m=y("../scatter/attributes"),v=y("../../components/colorscale/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../scattergl/attributes"),n=y("../../plots/cartesian/constants").idRegex,r=y("../../plot_api/plot_template").templatedArray,o=y("../../lib/extend").extendFlat,t=m.marker,d=t.line,a=o(v("marker.line",{editTypeOverride:"calc"}),{width:o({},d.width,{editType:"calc"}),editType:"calc"}),i=o(v("marker"),{symbol:t.symbol,size:o({},t.size,{editType:"markerSize"}),sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,opacity:t.opacity,colorbar:t.colorbar,line:a,editType:"calc"});function s(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:n[c],editType:"plot"}}}i.color.editType=i.cmin.editType=i.cmax.editType="style",Q.exports={dimensions:r("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:o({},e.text,{}),hovertext:o({},e.hovertext,{}),hovertemplate:h(),xhoverformat:b("x"),yhoverformat:b("y"),marker:i,xaxes:s("x"),yaxes:s("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../components/grid");Q.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),calc:y("./calc"),plot:y("./plot"),hoverPoints:y("./hover").hoverPoints,selectPoints:y("./select"),editStyle:y("./edit_style"),meta:{}},m.register(v)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(y,Q,K){"use strict";var m=y("regl-line2d"),v=y("../../registry"),b=y("../../lib/prepare_regl"),h=y("../../plots/get_data").getModuleCalcData,e=y("../../plots/cartesian"),n=y("../../plots/cartesian/axis_ids").getFromId,r=y("../../plots/cartesian/axes").shouldShowZeroLine,o={};function t(a,i,s){for(var l=i._visibleDims,p=s.viewOpts.ranges=new Array(s.matrixOptions.data.length),g=0;g<l.length;g++){var u=l[g],x=p[g]=new Array(4),f=n(a,i._diag[u][0]);f&&(x[0]=f.r2l(f.range[0]),x[2]=f.r2l(f.range[1]));var T=n(a,i._diag[u][1]);T&&(x[1]=T.r2l(T.range[0]),x[3]=T.r2l(T.range[1]))}s.selectBatch.length||s.unselectBatch.length?s.matrix.update({ranges:p},{ranges:p}):s.matrix.update({ranges:p})}function d(a){var i=a._fullLayout,s=i._glcanvas.data()[0].regl,c=i._splomGrid;c||(c=i._splomGrid=m(s)),c.update(function(l){var p,g=l._context.plotGlPixelRatio,u=l._fullLayout,x=u._size,f=[0,0,u.width*g,u.height*g],T={};function _(G,Z,re,j,B,H){re*=g,j*=g,B*=g,H*=g;var ee=Z[G+"color"],U=Z[G+"width"],$=String(ee+U);$ in T?T[$].data.push(NaN,NaN,re,j,B,H):T[$]={data:[re,j,B,H],join:"rect",thickness:U*g,color:ee,viewport:f,range:f,overlay:!1}}for(p in u._splomSubplots){var k,w,C=u._plots[p],A=C.xaxis,O=C.yaxis,P=A._gridVals,S=O._gridVals,E=A._offset,D=A._length,z=O._length,N=x.b+O.domain[0]*x.h,V=-O._m,X=-V*O.r2l(O.range[0],O.calendar);if(A.showgrid)for(p=0;p<P.length;p++)k=E+A.l2p(P[p].x),_("grid",A,k,N,k,N+z);if(O.showgrid)for(p=0;p<S.length;p++)_("grid",O,E,w=N+X+V*S[p].x,E+D,w);r(l,A,O)&&(k=E+A.l2p(0),_("zeroline",A,k,N,k,N+z)),r(l,O,A)&&_("zeroline",O,E,w=N+X+0,E+D,w)}var J=[];for(p in T)J.push(T[p]);return J}(a))}Q.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(a){var i=a._fullLayout,s=v.getModule("splom"),c=h(a.calcdata,s)[0];b(a,["ANGLE_instanced_arrays","OES_element_index_uint"],o)&&(i._hasOnlyLargeSploms&&d(a),s.plot(a,{},c))},drag:function(a){var i=a.calcdata,s=a._fullLayout;s._hasOnlyLargeSploms&&d(a);for(var c=0;c<i.length;c++){var l=i[c][0].trace,p=s._splomScenes[l.uid];"splom"===l.type&&p&&p.matrix&&t(a,l,p)}},updateGrid:d,clean:function(a,i,s,c){var l,p={};if(c._splomScenes){for(l=0;l<a.length;l++){var g=a[l];"splom"===g.type&&(p[g.uid]=1)}for(l=0;l<s.length;l++){var u=s[l];if(!p[u.uid]){var x=c._splomScenes[u.uid];x&&x.destroy&&x.destroy(),c._splomScenes[u.uid]=null,delete c._splomScenes[u.uid]}}}0===Object.keys(c._splomScenes||{}).length&&delete c._splomScenes,c._splomGrid&&!i._hasOnlyLargeSploms&&c._hasOnlyLargeSploms&&(c._splomGrid.destroy(),c._splomGrid=null,delete c._splomGrid),e.clean(a,i,s,c)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:o}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axis_ids"),b=y("../scatter/calc").calcMarkerSize,h=y("../scatter/calc").calcAxisExpansion,e=y("../scatter/colorscale_calc"),n=y("../scattergl/convert").markerSelection,r=y("../scattergl/convert").markerStyle,o=y("./scene_update"),t=y("../../constants/numerical").BADNUM,d=y("../scattergl/constants").TOO_MANY_POINTS;Q.exports=function(a,i){var s,c,l,p,g,u,x=i.dimensions,f=i._length,T={},_=T.cdata=[],k=T.data=[],w=i._visibleDims=[];function C(O,P){for(var S=O.makeCalcdata({v:P.values,vcalendar:i.calendar},"v"),E=0;E<S.length;E++)S[E]=S[E]===t?NaN:S[E];_.push(S),k.push("log"===O.type?m.simpleMap(S,O.c2l):S)}for(s=0;s<x.length;s++)if((l=x[s]).visible){if(p=v.getFromId(a,i._diag[s][0]),g=v.getFromId(a,i._diag[s][1]),p&&g&&p.type!==g.type){m.log("Skipping splom dimension "+s+" with conflicting axis types");continue}p?(C(p,l),g&&"category"===g.type&&(g._categories=p._categories.slice())):C(g,l),w.push(s)}for(e(a,i),m.extendFlat(T,r(i)),u=_.length*f>d?T.sizeAvg||Math.max(T.size,3):b(i,f),c=0;c<w.length;c++)l=x[s=w[c]],p=v.getFromId(a,i._diag[s][0])||{},g=v.getFromId(a,i._diag[s][1])||{},h(a,i,p,g,_[c],_[c],u);var A=o(a,i);return A.matrix||(A.matrix=!0),A.matrixOptions=T,A.selectedOptions=n(i,i.selected),A.unselectedOptions=n(i,i.unselected),[{x:!1,y:!1,t:{},trace:i}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/array_container_defaults"),b=y("./attributes"),h=y("../scatter/subtypes"),e=y("../scatter/marker_defaults"),n=y("../parcoords/merge_length"),r=y("../scattergl/helpers").isOpenSymbol;function o(t,d){function a(s,c){return m.coerce(t,d,b.dimensions,s,c)}a("label");var i=a("values");i&&i.length?a("visible"):d.visible=!1,a("axis.type"),a("axis.matches")}Q.exports=function(t,d,a,i){function s(f,T){return m.coerce(t,d,b,f,T)}var c=v(t,d,{name:"dimensions",handleItemDefaults:o}),l=s("diagonal.visible"),p=s("showupperhalf"),g=s("showlowerhalf");if(n(d,c,"values")&&(l||p||g)){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),e(t,d,a,i,s);var u=r(d.marker.symbol),x=h.isBubble(d);s("marker.line.width",u||x?1:0),function(f,T,_,k){var w,C,A=T.dimensions,O=A.length,P=T.showupperhalf,S=T.showlowerhalf,E=T.diagonal.visible,D=new Array(O),z=new Array(O);for(w=0;w<O;w++){var N=w?w+1:"";D[w]="x"+N,z[w]="y"+N}var V=k("xaxes",D),X=k("yaxes",z),J=T._diag=new Array(O);T._xaxes={},T._yaxes={};var G=[],Z=[];function re(ne,se,ie,ue){if(ne){var le=ne.charAt(0),de=_._splomAxes[le];if(T["_"+le+"axes"][ne]=1,ue.push(ne),!(ne in de)){var be=de[ne]={};ie&&(be.label=ie.label||"",ie.visible&&ie.axis&&(ie.axis.type&&(be.type=ie.axis.type),ie.axis.matches&&(be.matches=se)))}}}var j=!E&&!S,B=!E&&!P;for(T._axesDim={},w=0;w<O;w++){var H=A[w],ee=0===w,U=w===O-1,$=ee&&j||U&&B?void 0:V[w],q=ee&&B||U&&j?void 0:X[w];re($,q,H,G),re(q,$,H,Z),J[w]=[$,q],T._axesDim[$]=w,T._axesDim[q]=w}for(w=0;w<G.length;w++)for(C=0;C<Z.length;C++){var te=G[w]+Z[C];w>C&&P||w<C&&S?_._splomSubplots[te]=1:w!==C||!E&&S&&P||(_._splomSubplots[te]=1)}(!S||!E&&P&&S)&&(_._splomGridDflt.xside="bottom",_._splomGridDflt.yside="left")}(0,d,i,s),m.coerceSelectionMarkerOpacity(d,s)}else d.visible=!1}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../scatter/colorscale_calc"),b=y("../scattergl/convert").markerStyle;Q.exports=function(h,e){var n=e.trace,r=h._fullLayout._splomScenes[n.uid];if(r){v(h,n),m.extendFlat(r.matrixOptions,b(n));var o=m.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(o,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(y,Q,K){"use strict";K.getDimIndex=function(m,v){for(var b=v._id,h={x:0,y:1}[b.charAt(0)],e=m._visibleDims,n=0;n<e.length;n++)if(m._diag[e[n]][h]===b)return n;return!1}},{}],1048:[function(y,Q,K){"use strict";var m=y("./helpers"),v=y("../scattergl/hover").calcHover;Q.exports={hoverPoints:function(b,h,e){var n=b.cd[0].trace,r=b.scene.matrixOptions.cdata,o=b.xa,t=b.ya,d=o.c2p(h),a=t.c2p(e),i=b.distance,s=m.getDimIndex(n,o),c=m.getDimIndex(n,t);if(!1===s||!1===c)return[b];for(var l,p,g=r[s],u=r[c],x=i,f=0;f<g.length;f++){var _=u[f],k=o.c2p(g[f])-d,w=t.c2p(_)-a,C=Math.sqrt(k*k+w*w);C<x&&(x=p=C,l=f)}return b.index=l,b.distance=x,b.dxy=p,void 0===l?[b]:[v(b,g,u,n)]}}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(y,Q,K){"use strict";var m=y("./base_index");m.basePlotModule=y("./base_plot"),Q.exports=m},{"./base_index":1042,"./base_plot":1043}],1050:[function(y,Q,K){"use strict";var m=y("regl-splom"),v=y("../../lib"),b=y("../../plots/cartesian/axis_ids"),h=y("../../components/dragelement/helpers").selectMode;function e(n,r){var o,t,d,a,i,s=n._fullLayout,c=s._size,l=r.trace,p=r.t,g=s._splomScenes[l.uid],u=g.matrixOptions,x=u.cdata,f=s._glcanvas.data()[0].regl,T=s.dragmode;if(0!==x.length){u.lower=l.showupperhalf,u.upper=l.showlowerhalf,u.diagonal=l.diagonal.visible;var _=l._visibleDims,k=x.length,w=g.viewOpts={};for(w.ranges=new Array(k),w.domains=new Array(k),i=0;i<_.length;i++){d=_[i];var C=w.ranges[i]=new Array(4),A=w.domains[i]=new Array(4);(o=b.getFromId(n,l._diag[d][0]))&&(C[0]=o._rl[0],C[2]=o._rl[1],A[0]=o.domain[0],A[2]=o.domain[1]),(t=b.getFromId(n,l._diag[d][1]))&&(C[1]=t._rl[0],C[3]=t._rl[1],A[1]=t.domain[0],A[3]=t.domain[1])}var O=n._context.plotGlPixelRatio,P=c.l*O,S=c.b*O;w.viewport=[P,S,c.w*O+P,c.h*O+S],!0===g.matrix&&(g.matrix=m(f));var z=s.clickmode.indexOf("select")>-1,N=!0;if(h(T)||l.selectedpoints||z){var V=l._length;if(l.selectedpoints){g.selectBatch=l.selectedpoints;var X=l.selectedpoints,J={};for(d=0;d<X.length;d++)J[X[d]]=!0;var G=[];for(d=0;d<V;d++)J[d]||G.push(d);g.unselectBatch=G}var Z=p.xpx=new Array(k),re=p.ypx=new Array(k);for(i=0;i<_.length;i++){if(o=b.getFromId(n,l._diag[d=_[i]][0]))for(Z[i]=new Array(V),a=0;a<V;a++)Z[i][a]=o.c2p(x[i][a]);if(t=b.getFromId(n,l._diag[d][1]))for(re[i]=new Array(V),a=0;a<V;a++)re[i][a]=t.c2p(x[i][a])}if(g.selectBatch.length||g.unselectBatch.length){var j=v.extendFlat({},u,g.unselectedOptions,w),B=v.extendFlat({},u,g.selectedOptions,w);g.matrix.update(j,B),N=!1}}else p.xpx=p.ypx=null;if(N){var H=v.extendFlat({},u,w);g.matrix.update(H,null)}}}Q.exports=function(n,r,o){if(o.length)for(var t=0;t<o.length;t++)e(n,o[t][0])}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(y,Q,K){"use strict";var m=y("../../lib");Q.exports=function(v,b){var h=v._fullLayout,e=b.uid,n=h._splomScenes;n||(n=h._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},o=n[b.uid];return o||((o=n[e]=m.extendFlat({},r,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){o.matrix&&o.matrix.draw&&(o.selectBatch.length||o.unselectBatch.length?o.matrix.draw(o.unselectBatch,o.selectBatch):o.matrix.draw()),o.dirty=!1},o.destroy=function(){o.matrix&&o.matrix.destroy&&o.matrix.destroy(),o.matrixOptions=null,o.selectBatch=null,o.unselectBatch=null,o=null}),o.dirty||m.extendFlat(o,r),o}},{"../../lib":515}],1052:[function(y,Q,K){"use strict";var m=y("../../lib"),v=m.pushUnique,b=y("../scatter/subtypes"),h=y("./helpers");Q.exports=function(e,n){var r=e.cd,o=r[0].trace,t=r[0].t,d=e.scene,a=d.matrixOptions.cdata,i=e.xaxis,s=e.yaxis,c=[];if(!d)return c;var l=!b.hasMarkers(o)&&!b.hasText(o);if(!0!==o.visible||l)return c;var p=h.getDimIndex(o,i),g=h.getDimIndex(o,s);if(!1===p||!1===g)return c;var u=t.xpx[p],x=t.ypx[g],f=a[p],T=a[g],_=(e.scene.selectBatch||[]).slice(),k=[];if(!1!==n&&!n.degenerate)for(var w=0;w<f.length;w++)n.contains([u[w],x[w]],null,w,e)?(c.push({pointNumber:w,x:f[w],y:T[w]}),v(_,w)):-1!==_.indexOf(w)?v(_,w):k.push(w);var C=d.matrixOptions;return _.length||k.length?d.selectBatch.length||d.unselectBatch.length||d.matrix.update(d.unselectedOptions,m.extendFlat({},C,d.selectedOptions,d.viewOpts)):d.matrix.update(C,null),d.selectBatch=_,d.unselectBatch=k,c}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/attributes"),v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,h=y("../mesh3d/attributes"),e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat,r={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:v("u",1),vhoverformat:v("v",1),whoverformat:v("w",1),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),showlegend:n({},e.showlegend,{dflt:!1})};n(r,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(o){r[o]=h[o]}),r.hoverinfo=n({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),r.transforms=void 0,Q.exports=r},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/colorscale/calc");function b(n){var r,o,t,d,a,i,s,c,l,p,g,u,x=n._x,f=n._y,T=n._z,_=n._len,k=-1/0,w=1/0,C=-1/0,A=1/0,O=-1/0,P=1/0,S="";for(_&&(s=x[0],l=f[0],g=T[0]),_>1&&(c=x[_-1],p=f[_-1],u=T[_-1]),r=0;r<_;r++)k=Math.max(k,x[r]),w=Math.min(w,x[r]),C=Math.max(C,f[r]),A=Math.min(A,f[r]),O=Math.max(O,T[r]),P=Math.min(P,T[r]),d||x[r]===s||(d=!0,S+="x"),a||f[r]===l||(a=!0,S+="y"),i||T[r]===g||(i=!0,S+="z");d||(S+="x"),a||(S+="y"),i||(S+="z");var E=h(n._x),D=h(n._y),z=h(n._z);S=(S=(S=S.replace("x",(s>c?"-":"+")+"x")).replace("y",(l>p?"-":"+")+"y")).replace("z",(g>u?"-":"+")+"z");var N=function(){_=0,E=[],D=[],z=[]};(!_||_<E.length*D.length*z.length)&&N();var V=function(le){return"x"===le?x:"y"===le?f:T},X=function(le){return"x"===le?E:"y"===le?D:z},J=function(le){return le[_-1]<le[0]?-1:1},G=V(S[1]),Z=V(S[3]),re=V(S[5]),j=X(S[1]).length,B=X(S[3]).length,H=X(S[5]).length,ee=!1,U=function(le,de,be){return j*(B*le+de)+be},$=J(V(S[1])),q=J(V(S[3])),te=J(V(S[5]));for(r=0;r<H-1;r++){for(o=0;o<B-1;o++){for(t=0;t<j-1;t++){var ne=U(r,o,t),se=U(r,o,t+1),ie=U(r,o+1,t),ue=U(r+1,o,t);if(G[ne]*$<G[se]*$&&Z[ne]*q<Z[ie]*q&&re[ne]*te<re[ue]*te||(ee=!0),ee)break}if(ee)break}if(ee)break}return ee&&(m.warn("Encountered arbitrary coordinates! Unable to input data grid."),N()),{xMin:w,yMin:A,zMin:P,xMax:k,yMax:C,zMax:O,Xs:E,Ys:D,Zs:z,len:_,fill:S}}function h(n){return m.distinctVals(n).vals}function e(n,r){if(void 0===r&&(r=n.length),m.isTypedArray(n))return n.subarray(0,r);for(var o=[],t=0;t<r;t++)o[t]=+n[t];return o}Q.exports={calc:function(n,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=e(r.u,r._len),r._v=e(r.v,r._len),r._w=e(r.w,r._len),r._x=e(r.x,r._len),r._y=e(r.y,r._len),r._z=e(r.z,r._len);var o=b(r);r._gridFill=o.fill,r._Xs=o.Xs,r._Ys=o.Ys,r._Zs=o.Zs,r._len=o.len;var t,d,a,i=0;r.starts&&(t=e(r.starts.x||[]),d=e(r.starts.y||[]),a=e(r.starts.z||[]),i=Math.min(t.length,d.length,a.length)),r._startsX=t||[],r._startsY=d||[],r._startsZ=a||[];var s,c=0,l=1/0;for(s=0;s<r._len;s++){var p=r._u[s],g=r._v[s],u=r._w[s],x=Math.sqrt(p*p+g*g+u*u);c=Math.max(c,x),l=Math.min(l,x)}for(v(n,r,{vals:[l,c],containerStr:"",cLetter:"c"}),s=0;s<i;s++){var f=t[s];o.xMax=Math.max(o.xMax,f),o.xMin=Math.min(o.xMin,f);var T=d[s];o.yMax=Math.max(o.yMax,T),o.yMin=Math.min(o.yMin,T);var _=a[s];o.zMax=Math.max(o.zMax,_),o.zMin=Math.min(o.zMin,_)}r._slen=i,r._normMax=c,r._xbnds=[o.xMin,o.xMax],r._ybnds=[o.yMin,o.yMax],r._zbnds=[o.zMin,o.zMax]},filter:e,processGrid:b}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(y,Q,K){"use strict";var m=y("../../../stackgl_modules").gl_streamtube3d,v=m.createTubeMesh,b=y("../../lib"),h=y("../../lib/gl_format_color").parseColorScale,e=y("../../components/colorscale").extractOpts,n=y("../../plots/gl3d/zip3"),r={xaxis:0,yaxis:1,zaxis:2};function o(s,c){this.scene=s,this.uid=c,this.mesh=null,this.data=null}var t=o.prototype;function d(s){var c=s.length;return c>2?s.slice(1,c-1):2===c?[(s[0]+s[1])/2]:s}function a(s){var c=s.length;return 1===c?[.5,.5]:[s[1]-s[0],s[c-1]-s[c-2]]}function i(s,c){var l=s.fullSceneLayout,p=s.dataScale,g=c._len,u={};function x(j,B){var H=l[B],ee=p[r[B]];return b.simpleMap(j,function(U){return H.d2l(U)*ee})}if(u.vectors=n(x(c._u,"xaxis"),x(c._v,"yaxis"),x(c._w,"zaxis"),g),!g)return{positions:[],cells:[]};var f=x(c._Xs,"xaxis"),T=x(c._Ys,"yaxis"),_=x(c._Zs,"zaxis");if(u.meshgrid=[f,T,_],u.gridFill=c._gridFill,c._slen)u.startingPositions=n(x(c._startsX,"xaxis"),x(c._startsY,"yaxis"),x(c._startsZ,"zaxis"));else{for(var k=T[0],w=d(f),C=d(_),A=new Array(w.length*C.length),O=0,P=0;P<w.length;P++)for(var S=0;S<C.length;S++)A[O++]=[w[P],k,C[S]];u.startingPositions=A}u.colormap=h(c),u.tubeSize=c.sizeref,u.maxLength=c.maxdisplayed;var E=x(c._xbnds,"xaxis"),D=x(c._ybnds,"yaxis"),z=x(c._zbnds,"zaxis"),N=a(f),V=a(T),X=a(_),G=m(u,[[E[0]-N[0],D[0]-V[0],z[0]-X[0]],[E[1]+N[1],D[1]+V[1],z[1]+X[1]]]),Z=e(c);G.vertexIntensityBounds=[Z.min/c._normMax,Z.max/c._normMax];var re=c.lightposition;return G.lightPosition=[re.x,re.y,re.z],G.ambient=c.lighting.ambient,G.diffuse=c.lighting.diffuse,G.specular=c.lighting.specular,G.roughness=c.lighting.roughness,G.fresnel=c.lighting.fresnel,G.opacity=c.opacity,c._pad=G.tubeScale*c.sizeref*2,G}t.handlePick=function(s){var c=this.scene.fullSceneLayout,l=this.scene.dataScale;function p(x,f){var _=l[r[f]];return c[f].l2c(x)/_}if(s.object===this.mesh){var g=s.data.position,u=s.data.velocity;return s.traceCoordinate=[p(g[0],"xaxis"),p(g[1],"yaxis"),p(g[2],"zaxis"),p(u[0],"xaxis"),p(u[1],"yaxis"),p(u[2],"zaxis"),s.data.intensity*this.data._normMax,s.data.divergence],s.textLabel=this.data.hovertext||this.data.text,!0}},t.update=function(s){this.data=s;var c=i(this.scene,s);this.mesh.update(c)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(s,c){var l=s.glplot.gl,p=i(s,c),g=v(l,p),u=new o(s,c.uid);return u.mesh=g,u.data=c,g._trace=u,s.glplot.add(g),u}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/colorscale/defaults"),b=y("./attributes");Q.exports=function(h,e,n,r){function o(l,p){return m.coerce(h,e,b,l,p)}var t=o("u"),d=o("v"),a=o("w"),i=o("x"),s=o("y"),c=o("z");t&&t.length&&d&&d.length&&a&&a.length&&i&&i.length&&s&&s.length&&c&&c.length?(o("starts.x"),o("starts.y"),o("starts.z"),o("maxdisplayed"),o("sizeref"),o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("lightposition.x"),o("lightposition.y"),o("lightposition.z"),v(h,e,r,o,{prefix:"",cLetter:"c"}),o("text"),o("hovertext"),o("hovertemplate"),o("uhoverformat"),o("vhoverformat"),o("whoverformat"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"streamtube",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:y("./calc").calc,plot:y("./convert"),eventData:function(m,v){return m.tubex=m.x,m.tubey=m.y,m.tubez=m.z,m.tubeu=v.traceCoordinate[3],m.tubev=v.traceCoordinate[4],m.tubew=v.traceCoordinate[5],m.norm=v.traceCoordinate[6],m.divergence=v.traceCoordinate[7],delete m.x,delete m.y,delete m.z,m},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(y,Q,K){"use strict";var m=y("../../plots/attributes"),v=y("../../plots/template_attributes").hovertemplateAttrs,b=y("../../plots/template_attributes").texttemplateAttrs,h=y("../../components/colorscale/attributes"),e=y("../../plots/domain").attributes,n=y("../pie/attributes"),r=y("./constants"),o=y("../../lib/extend").extendFlat;Q.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:o({colors:{valType:"data_array",editType:"calc"},line:{color:o({},n.marker.line.color,{dflt:null}),width:o({},n.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},h("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:n.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:b({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:n.hovertext,hoverinfo:o({},m.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:v({},{keys:r.eventDataKeys}),textfont:n.textfont,insidetextorientation:n.insidetextorientation,insidetextfont:n.insidetextfont,outsidetextfont:o({},n.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:n.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(y,Q,K){"use strict";var m=y("../../plots/plots");K.name="sunburst",K.plot=function(v,b,h,e){m.plotBasePlot(K.name,v,b,h,e)},K.clean=function(v,b,h,e){m.cleanBasePlot(K.name,v,b,h,e)}},{"../../plots/plots":628}],1060:[function(y,Q,K){"use strict";var m=y("d3-hierarchy"),v=y("fast-isnumeric"),b=y("../../lib"),h=y("../../components/colorscale").makeColorScaleFuncFromTrace,e=y("../pie/calc").makePullColorFn,n=y("../pie/calc").generateExtendedColors,r=y("../../components/colorscale").calc,o=y("../../constants/numerical").ALMOST_EQUAL,t={},d={},a={};K.calc=function(i,s){var c,l,p,g,u,x,f=i._fullLayout,T=s.ids,_=b.isArrayOrTypedArray(T),k=s.labels,w=s.parents,C=s.values,A=b.isArrayOrTypedArray(C),O=[],P={},S={},E=function(q){return q||"number"==typeof q},D=function(q){return!A||v(C[q])&&C[q]>=0};_?(c=Math.min(T.length,w.length),l=function(q){return E(T[q])&&D(q)},p=function(q){return String(T[q])}):(c=Math.min(k.length,w.length),l=function(q){return E(k[q])&&D(q)},p=function(q){return String(k[q])}),A&&(c=Math.min(c,C.length));for(var z=0;z<c;z++)if(l(z)){var N=p(z),V=E(w[z])?String(w[z]):"",X={i:z,id:N,pid:V,label:E(k[z])?String(k[z]):""};A&&(X.v=+C[z]),O.push(X),u=N,P[g=V]?P[g].push(u):P[g]=[u],S[u]=1}if(P[""]){if(P[""].length>1){for(var J=b.randstr(),G=0;G<O.length;G++)""===O[G].pid&&(O[G].pid=J);O.unshift({hasMultipleRoots:!0,id:J,pid:"",label:""})}}else{var Z,re=[];for(Z in P)S[Z]||re.push(Z);if(1!==re.length)return b.warn(["Multiple implied roots, cannot build",s.type,"hierarchy of",s.name+".","These roots include:",re.join(", ")].join(" "));O.unshift({hasImpliedRoot:!0,id:Z=re[0],pid:"",label:Z})}try{x=m.stratify().id(function(q){return q.id}).parentId(function(q){return q.pid})(O)}catch(q){return b.warn(["Failed to build",s.type,"hierarchy of",s.name+".","Error:",q.message].join(" "))}var j=m.hierarchy(x),B=!1;if(A)switch(s.branchvalues){case"remainder":j.sum(function(q){return q.data.v});break;case"total":j.each(function(q){var te=q.data.data,ne=te.v;if(q.children){var se=q.children.reduce(function(ie,ue){return ie+ue.data.data.v},0);if((te.hasImpliedRoot||te.hasMultipleRoots)&&(ne=se),ne<se*o)return B=!0,b.warn(["Total value for node",q.data.data.id,"of",s.name,"is smaller than the sum of its children.","\nparent value =",ne,"\nchildren sum =",se].join(" "))}q.value=ne})}else!function q(te,ne,se){var ie=0,ue=te.children;if(ue){for(var le=ue.length,de=0;de<le;de++)ie+=q(ue[de],ne,se);se.branches&&ie++}else se.leaves&&ie++;return te.value=te.data.data.value=ie,ne._values||(ne._values=[]),ne._values[te.data.data.i]=ie,ie}(j,s,{branches:-1!==s.count.indexOf("branches"),leaves:-1!==s.count.indexOf("leaves")});if(!B){var H,ee;s.sort&&j.sort(function(q,te){return te.value-q.value});var U=s.marker.colors||[];return s._hasColorscale?(!!U.length||(U=A?s.values:s._values),r(i,s,{vals:U,containerStr:"marker",cLetter:"c"}),ee=h(s.marker)):H=e(f["_"+s.type+"colormap"]),j.each(function(q){var te=q.data.data;te.color=s._hasColorscale?ee(U[te.i]):H(U[te.i],te.id)}),O[0].hierarchy=j,O}},K._runCrossTraceCalc=function(i,s){var c=s._fullLayout,l=s.calcdata,p=c[i+"colorway"],g=c["_"+i+"colormap"];c["extend"+i+"colors"]&&(p=n(p,"icicle"===i?a:"treemap"===i?d:t));var u,x=0;function f(k){var w=k.data.data,C=w.id;!1===w.color&&(g[C]?w.color=g[C]:k.parent?k.parent.parent?w.color=k.parent.data.data.color:(g[C]=w.color=p[x%p.length],x++):w.color=u)}for(var T=0;T<l.length;T++){var _=l[T][0];_.trace.type===i&&_.hierarchy&&(u=_.trace.root.color,_.hierarchy.each(f))}},K.crossTraceCalc=function(i){return K._runCrossTraceCalc("sunburst",i)}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(y,Q,K){"use strict";Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("../../plots/domain").defaults,h=y("../bar/defaults").handleText,e=y("../../components/colorscale"),n=e.hasColorscale,r=e.handleDefaults;Q.exports=function(o,t,d,a){function i(u,x){return m.coerce(o,t,v,u,x)}var s=i("labels"),c=i("parents");if(s&&s.length&&c&&c.length){var l=i("values");i(l&&l.length?"branchvalues":"count"),i("level"),i("maxdepth"),i("marker.line.width")&&i("marker.line.color",a.paper_bgcolor),i("marker.colors");var p=t._hasColorscale=n(o,"marker","colors")||(o.marker||{}).coloraxis;p&&r(o,t,a,i,{prefix:"marker.",cLetter:"c"}),i("leaf.opacity",p?1:.7);var g=i("text");i("texttemplate"),t.texttemplate||i("textinfo",Array.isArray(g)?"text+label":"label"),i("hovertext"),i("hovertemplate"),h(o,t,a,i,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),i("insidetextorientation"),i("sort"),i("rotation"),i("root.color"),b(t,a,i),t._length=null}else t.visible=!1}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../registry"),b=y("../../components/fx/helpers").appendArrayPointValue,h=y("../../components/fx"),e=y("../../lib"),n=y("../../lib/events"),r=y("./helpers"),o=y("../pie/helpers").formatPieValue;function t(d,a,i){for(var s=d.data.data,c={curveNumber:a.index,pointNumber:s.i,data:a._input,fullData:a},l=0;l<i.length;l++){var p=i[l];p in d&&(c[p]=d[p])}return"parentString"in d&&!r.isHierarchyRoot(d)&&(c.parent=d.parentString),b(c,a,s.i),c}Q.exports=function(d,a,i,s,c){var l=s[0],p=l.trace,g=l.hierarchy,u="sunburst"===p.type,x="treemap"===p.type||"icicle"===p.type;"_hasHoverLabel"in p||(p._hasHoverLabel=!1),"_hasHoverEvent"in p||(p._hasHoverEvent=!1),d.on("mouseover",function(f){var T=i._fullLayout;if(!i._dragging&&!1!==T.hovermode){var _,k=i._fullData[p.index],w=f.data.data,C=w.i,A=r.isHierarchyRoot(f),O=r.getParent(g,f),P=r.getValue(f),S=function($){return e.castOption(k,C,$)},E=S("hovertemplate"),D=h.castHoverinfo(k,T,C),z=T.separators;if(E||D&&"none"!==D&&"skip"!==D){var N,V;u&&(N=l.cx+f.pxmid[0]*(1-f.rInscribed),V=l.cy+f.pxmid[1]*(1-f.rInscribed)),x&&(N=f._hoverX,V=f._hoverY);var X,J={},G=[],Z=[],re=function($){return-1!==G.indexOf($)};D&&(G="all"===D?k._module.attributes.hoverinfo.flags:D.split("+")),J.label=w.label,re("label")&&J.label&&Z.push(J.label),w.hasOwnProperty("v")&&(J.value=w.v,J.valueLabel=o(J.value,z),re("value")&&Z.push(J.valueLabel)),J.currentPath=f.currentPath=r.getPath(f.data),re("current path")&&!A&&Z.push(J.currentPath);var j=[],B=function(){-1===j.indexOf(X)&&(Z.push(X),j.push(X))};J.percentParent=f.percentParent=P/r.getValue(O),J.parent=f.parentString=r.getPtLabel(O),re("percent parent")&&(X=r.formatPercent(J.percentParent,z)+" of "+J.parent,B()),J.percentEntry=f.percentEntry=P/r.getValue(a),J.entry=f.entry=r.getPtLabel(a),!re("percent entry")||A||f.onPathbar||(X=r.formatPercent(J.percentEntry,z)+" of "+J.entry,B()),J.percentRoot=f.percentRoot=P/r.getValue(g),J.root=f.root=r.getPtLabel(g),re("percent root")&&!A&&(X=r.formatPercent(J.percentRoot,z)+" of "+J.root,B()),J.text=S("hovertext")||S("text"),re("text")&&e.isValidTextValue(X=J.text)&&Z.push(X),_=[t(f,k,c.eventDataKeys)];var H={trace:k,y:V,_x0:f._x0,_x1:f._x1,_y0:f._y0,_y1:f._y1,text:Z.join("<br>"),name:E||re("name")?k.name:void 0,color:S("hoverlabel.bgcolor")||w.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:J,eventData:_};u&&(H.x0=N-f.rInscribed*f.rpx1,H.x1=N+f.rInscribed*f.rpx1,H.idealAlign=f.pxmid[0]<0?"left":"right"),x&&(H.x=N,H.idealAlign=N<0?"left":"right");var ee=[];h.loneHover(H,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:i,inOut_bbox:ee}),_[0].bbox=ee[0],p._hasHoverLabel=!0}if(x){var U=d.select("path.surface");c.styleOne(U,f,k,{hovered:!0})}p._hasHoverEvent=!0,i.emit("plotly_hover",{points:_||[t(f,k,c.eventDataKeys)],event:m.event})}}),d.on("mouseout",function(f){var T=i._fullLayout,_=i._fullData[p.index],k=m.select(this).datum();if(p._hasHoverEvent&&(f.originalEvent=m.event,i.emit("plotly_unhover",{points:[t(k,_,c.eventDataKeys)],event:m.event}),p._hasHoverEvent=!1),p._hasHoverLabel&&(h.loneUnhover(T._hoverlayer.node()),p._hasHoverLabel=!1),x){var w=d.select("path.surface");c.styleOne(w,k,_,{hovered:!1})}}),d.on("click",function(f){var T=i._fullLayout,_=i._fullData[p.index],k=u&&(r.isHierarchyRoot(f)||r.isLeaf(f)),w=r.getPtId(f),C=r.isEntry(f)?r.findEntryWithChild(g,w):r.findEntryWithLevel(g,w),A=r.getPtId(C),O={points:[t(f,_,c.eventDataKeys)],event:m.event};k||(O.nextLevel=A);var P=n.triggerHandler(i,"plotly_"+p.type+"click",O);if(!1!==P&&T.hovermode&&(i._hoverdata=[t(f,_,c.eventDataKeys)],h.click(i,m.event)),!k&&!1!==P&&!i._dragging&&!i._transitioning){v.call("_storeDirectGUIEdit",_,T._tracePreGUI[_.uid],{level:_.level});var S={data:[{level:A}],traces:[p.index]},E={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};h.loneUnhover(T._hoverlayer.node()),v.call("animate",i,S,E)}})}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/color"),b=y("../../lib/setcursor"),h=y("../pie/helpers");function e(n){return n.data.data.pid}K.findEntryWithLevel=function(n,r){var o;return r&&n.eachAfter(function(t){if(K.getPtId(t)===r)return o=t.copy()}),o||n},K.findEntryWithChild=function(n,r){var o;return n.eachAfter(function(t){for(var d=t.children||[],a=0;a<d.length;a++)if(K.getPtId(d[a])===r)return o=t.copy()}),o||n},K.isEntry=function(n){return!n.parent},K.isLeaf=function(n){return!n.children},K.getPtId=function(n){return n.data.data.id},K.getPtLabel=function(n){return n.data.data.label},K.getValue=function(n){return n.value},K.isHierarchyRoot=function(n){return""===e(n)},K.setSliceCursor=function(n,r,o){var t=o.isTransitioning;if(!t){var d=n.datum();t=o.hideOnRoot&&K.isHierarchyRoot(d)||o.hideOnLeaves&&K.isLeaf(d)}b(n,t?null:"pointer")},K.getInsideTextFontKey=function(n,r,o,t,d){var i=o.data.data.i;return m.castOption(r,i,((d||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+n)||m.castOption(r,i,"textfont."+n)||t.size},K.getOutsideTextFontKey=function(n,r,o,t){var d=o.data.data.i;return m.castOption(r,d,"outsidetextfont."+n)||m.castOption(r,d,"textfont."+n)||t.size},K.isOutsideText=function(n,r){return!n._hasColorscale&&K.isHierarchyRoot(r)},K.determineTextFont=function(n,r,o,t){return K.isOutsideText(n,r)?{color:K.getOutsideTextFontKey("color",d=n,a=r,i=o),family:K.getOutsideTextFontKey("family",d,a,i),size:K.getOutsideTextFontKey("size",d,a,i)}:function(d,a,i,s){var l=a.data.data,p=l.i,g=m.castOption(d,p,((s||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!g&&d._input.textfont&&(g=m.castOption(d._input,p,"textfont.color")),{color:g||v.contrast(l.color),family:K.getInsideTextFontKey("family",d,a,i,s),size:K.getInsideTextFontKey("size",d,a,i,s)}}(n,r,o,t);var d,a,i},K.hasTransition=function(n){return!!(n&&n.duration>0)},K.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},K.isHeader=function(n,r){return!(K.isLeaf(n)||n.depth===r._maxDepth-1)},K.getParent=function(n,r){return K.findEntryWithLevel(n,e(r))},K.listPath=function(n,r){var o=n.parent;if(!o)return[];var t=r?[o.data[r]]:[o];return K.listPath(o,r).concat(t)},K.getPath=function(n){return K.listPath(n,"label").join("/")+"/"},K.formatValue=h.formatPieValue,K.formatPercent=function(n,r){var o=m.formatPercent(n,0);return"0%"===o&&(o=h.formatPiePercent(n,r)),o}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"sunburst",basePlotModule:y("./base_plot"),categories:[],animatable:!0,attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot").plot,style:y("./style").style,colorbar:y("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(y,Q,K){"use strict";Q.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h){function e(n,r){return m.coerce(b,h,v,n,r)}e("sunburstcolorway",h.colorway),e("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("d3-hierarchy"),b=y("d3-interpolate").interpolate,h=y("../../components/drawing"),e=y("../../lib"),n=y("../../lib/svg_text_utils"),r=y("../bar/uniform_text"),o=r.recordMinTextSize,t=r.clearMinTextSize,d=y("../pie/plot"),a=y("../pie/helpers").getRotationAngle,i=d.computeTransform,s=d.transformInsideText,c=y("./style").styleOne,l=y("../bar/style").resizeText,p=y("./fx"),g=y("./constants"),u=y("./helpers");function x(T,_,k,w){var C=T._fullLayout,A=!C.uniformtext.mode&&u.hasTransition(w),O=m.select(k).selectAll("g.slice"),P=_[0],S=P.trace,D=u.findEntryWithLevel(P.hierarchy,S.level),z=u.getMaxDepth(S),N=C._size,V=S.domain,J=N.h*(V.y[1]-V.y[0]),G=.5*Math.min(N.w*(V.x[1]-V.x[0]),J),Z=P.cx=N.l+N.w*(V.x[1]+V.x[0])/2,re=P.cy=N.t+N.h*(1-V.y[0])-J/2;if(!D)return O.remove();var j=null,B={};A&&O.each(function(Ee){B[u.getPtId(Ee)]={rpx0:Ee.rpx0,rpx1:Ee.rpx1,x0:Ee.x0,x1:Ee.x1,transform:Ee.transform},!j&&u.isEntry(Ee)&&(j=Ee)});var Ee,H=(Ee=D,v.partition().size([2*Math.PI,Ee.height+1])(Ee)).descendants(),ee=D.height+1,U=0,$=z;P.hasMultipleRoots&&u.isHierarchyRoot(D)&&(H=H.slice(1),ee-=1,U=1,$+=1),H=H.filter(function(Ee){return Ee.y1<=$});var q=a(S.rotation);q&&H.forEach(function(Ee){Ee.x0+=q,Ee.x1+=q});var te=Math.min(ee,z),ne=function(Ee){return(Ee-U)/te*G},se=function(Ee,he){return[Ee*Math.cos(he),-Ee*Math.sin(he)]},ie=function(Ee){return e.pathAnnulus(Ee.rpx0,Ee.rpx1,Ee.x0,Ee.x1,Z,re)},ue=function(Ee){return Z+f(Ee)[0]*(Ee.transform.rCenter||0)+(Ee.transform.x||0)},le=function(Ee){return re+f(Ee)[1]*(Ee.transform.rCenter||0)+(Ee.transform.y||0)};(O=O.data(H,u.getPtId)).enter().append("g").classed("slice",!0),A?O.exit().transition().each(function(){var Ee=m.select(this);Ee.select("path.surface").transition().attrTween("d",function(he){var me=function(Se){var Me,Ie=u.getPtId(Se),Fe=B[Ie],Ne=B[u.getPtId(D)];if(Ne){var De=(Se.x1>Ne.x1?2*Math.PI:0)+q;Me=Se.rpx1<Ne.rpx1?{x0:Se.x0,x1:Se.x1,rpx0:0,rpx1:0}:{x0:De,x1:De,rpx0:Se.rpx0,rpx1:Se.rpx1}}else{var $e,Re=u.getPtId(Se.parent);O.each(function(ut){if(u.getPtId(ut)===Re)return $e=ut});var ze,Ue=$e.children;Ue.forEach(function(ut,gt){if(u.getPtId(ut)===Ie)return ze=gt});var je=Ue.length,rt=b($e.x0,$e.x1);Me={rpx0:G,rpx1:G,x0:rt(ze/je),x1:rt((ze+1)/je)}}return b(Fe,Me)}(he);return function(Se){return ie(me(Se))}}),Ee.select("g.slicetext").attr("opacity",0)}).remove():O.exit().remove(),O.order();var de=null;if(A&&j){var be=u.getPtId(j);O.each(function(Ee){null===de&&u.getPtId(Ee)===be&&(de=Ee.x1)})}var _e=O;function xe(Ee){var he=Ee.parent,me=B[u.getPtId(he)],Se={};if(me){var Me=he.children,Ie=Me.indexOf(Ee),Fe=Me.length,Ne=b(me.x0,me.x1);Se.x0=Ne(Ie/Fe),Se.x1=Ne(Ie/Fe)}else Se.x0=Se.x1=0;return Se}A&&(_e=_e.transition().each("end",function(){var Ee=m.select(this);u.setSliceCursor(Ee,T,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),_e.each(function(Ee){var De,he=m.select(this),me=e.ensureSingle(he,"path","surface",function(De){De.style("pointer-events","all")});Ee.rpx0=ne(Ee.y0),Ee.rpx1=ne(Ee.y1),Ee.xmid=(Ee.x0+Ee.x1)/2,Ee.pxmid=se(Ee.rpx1,Ee.xmid),Ee.midangle=-(Ee.xmid-Math.PI/2),Ee.startangle=-(Ee.x0-Math.PI/2),Ee.stopangle=-(Ee.x1-Math.PI/2),Ee.halfangle=.5*Math.min(e.angleDelta(Ee.x0,Ee.x1)||Math.PI,Math.PI),Ee.ring=1-Ee.rpx0/Ee.rpx1,Ee.rInscribed=0===(De=Ee).rpx0&&e.isFullCircle([De.x0,De.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(De.halfangle)),De.ring/2)),A?me.transition().attrTween("d",function(De){var $e=function(Re){var ze,Ue=B[u.getPtId(Re)],je={x0:Re.x0,x1:Re.x1,rpx0:Re.rpx0,rpx1:Re.rpx1};if(Ue)ze=Ue;else if(j)if(Re.parent)if(de){var rt=(Re.x1>de?2*Math.PI:0)+q;ze={x0:rt,x1:rt}}else e.extendFlat(ze={rpx0:G,rpx1:G},xe(Re));else ze={rpx0:0,rpx1:0};else ze={x0:q,x1:q};return b(ze,je)}(De);return function(Re){return ie($e(Re))}}):me.attr("d",ie),he.call(p,D,T,_,{eventDataKeys:g.eventDataKeys,transitionTime:g.CLICK_TRANSITION_TIME,transitionEasing:g.CLICK_TRANSITION_EASING}).call(u.setSliceCursor,T,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:T._transitioning}),me.call(c,Ee,S);var Se=e.ensureSingle(he,"g","slicetext"),Me=e.ensureSingle(Se,"text","",function(De){De.attr("data-notex",1)}),Ie=e.ensureUniformFontSize(T,u.determineTextFont(S,Ee,C.font));Me.text(K.formatSliceLabel(Ee,D,S,_,C)).classed("slicetext",!0).attr("text-anchor","middle").call(h.font,Ie).call(n.convertToTspans,T);var Fe=h.bBox(Me.node());Ee.transform=s(Fe,Ee,P),Ee.transform.targetX=ue(Ee),Ee.transform.targetY=le(Ee);var Ne=function(De,$e){var Re=De.transform;return i(Re,$e),Re.fontSize=Ie.size,o(S.type,Re,C),e.getTextTransform(Re)};A?Me.transition().attrTween("transform",function(De){var $e=function(Re){var ze,Ue=B[u.getPtId(Re)],je=Re.transform;if(Ue)ze=Ue;else if(ze={rpx1:Re.rpx1,transform:{textPosAngle:je.textPosAngle,scale:0,rotate:je.rotate,rCenter:je.rCenter,x:je.x,y:je.y}},j)if(Re.parent)if(de){var rt=Re.x1>de?2*Math.PI:0;ze.x0=ze.x1=rt}else e.extendFlat(ze,xe(Re));else ze.x0=ze.x1=q;else ze.x0=ze.x1=q;var ut=b(ze.transform.textPosAngle,Re.transform.textPosAngle),gt=b(ze.rpx1,Re.rpx1),At=b(ze.x0,Re.x0),_t=b(ze.x1,Re.x1),it=b(ze.transform.scale,je.scale),et=b(ze.transform.rotate,je.rotate),wt=0===je.rCenter?3:0===ze.transform.rCenter?1/3:1,Gt=b(ze.transform.rCenter,je.rCenter);return function(Kt){var cr=gt(Kt),ar=At(Kt),hr=_t(Kt),Xt=Gt(Math.pow(Kt,wt)),He={pxmid:se(cr,(ar+hr)/2),rpx1:cr,transform:{textPosAngle:ut(Kt),rCenter:Xt,x:je.x,y:je.y}};return o(S.type,je,C),{transform:{targetX:ue(He),targetY:le(He),scale:it(Kt),rotate:et(Kt),rCenter:Xt}}}}(De);return function(Re){return Ne($e(Re),Fe)}}):Me.attr("transform",Ne(Ee,Fe))})}function f(T){return k=T.transform.textPosAngle,[(_=T.rpx1)*Math.sin(k),-_*Math.cos(k)];var _,k}K.plot=function(T,_,k,w){var C,A,O=T._fullLayout,P=O._sunburstlayer,S=!k,E=!O.uniformtext.mode&&u.hasTransition(k);t("sunburst",O),(C=P.selectAll("g.trace.sunburst").data(_,function(D){return D[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),C.order(),E?(w&&(A=w()),m.transition().duration(k.duration).ease(k.easing).each("end",function(){A&&A()}).each("interrupt",function(){A&&A()}).each(function(){P.selectAll("g.trace").each(function(D){x(T,D,this,k)})})):(C.each(function(D){x(T,D,this,k)}),O.uniformtext.mode&&l(T,O._sunburstlayer.selectAll(".trace"),"sunburst")),S&&C.exit().remove()},K.formatSliceLabel=function(T,_,k,w,C){var A=k.texttemplate,O=k.textinfo;if(!(A||O&&"none"!==O))return"";var P=C.separators,E=T.data.data,D=w[0].hierarchy,z=u.isHierarchyRoot(T),N=u.getParent(D,T),V=u.getValue(T);if(!A){var X,J=O.split("+"),G=function(q){return-1!==J.indexOf(q)},Z=[];if(G("label")&&E.label&&Z.push(E.label),E.hasOwnProperty("v")&&G("value")&&Z.push(u.formatValue(E.v,P)),!z){G("current path")&&Z.push(u.getPath(T.data));var re=0;G("percent parent")&&re++,G("percent entry")&&re++,G("percent root")&&re++;var j=re>1;if(re){var B,H=function(q){X=u.formatPercent(B,P),j&&(X+=" of "+q),Z.push(X)};G("percent parent")&&!z&&(B=V/u.getValue(N),H("parent")),G("percent entry")&&(B=V/u.getValue(_),H("entry")),G("percent root")&&(B=V/u.getValue(D),H("root"))}}return G("text")&&(X=e.castOption(k,E.i,"text"),e.isValidTextValue(X)&&Z.push(X)),Z.join("<br>")}var ee=e.castOption(k,E.i,"texttemplate");if(!ee)return"";var U={};E.label&&(U.label=E.label),E.hasOwnProperty("v")&&(U.value=E.v,U.valueLabel=u.formatValue(E.v,P)),U.currentPath=u.getPath(T.data),z||(U.percentParent=V/u.getValue(N),U.percentParentLabel=u.formatPercent(U.percentParent,P),U.parent=u.getPtLabel(N)),U.percentEntry=V/u.getValue(_),U.percentEntryLabel=u.formatPercent(U.percentEntry,P),U.entry=u.getPtLabel(_),U.percentRoot=V/u.getValue(D),U.percentRootLabel=u.formatPercent(U.percentRoot,P),U.root=u.getPtLabel(D),E.hasOwnProperty("color")&&(U.color=E.color);var $=e.castOption(k,E.i,"text");return(e.isValidTextValue($)||""===$)&&(U.text=$),U.customdata=e.castOption(k,E.i,"customdata"),e.texttemplateString(ee,U,C._d3locale,U,k._meta||{})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/color"),b=y("../../lib"),h=y("../bar/uniform_text").resizeText;function e(n,r,o){var t=r.data.data,d=!r.children,a=t.i,i=b.castOption(o,a,"marker.line.color")||v.defaultLine,s=b.castOption(o,a,"marker.line.width")||0;n.style("stroke-width",s).call(v.fill,t.color).call(v.stroke,i).style("opacity",d?o.leaf.opacity:null)}Q.exports={style:function(n){var r=n._fullLayout._sunburstlayer.selectAll(".trace");h(n,r,"sunburst"),r.each(function(o){var t=m.select(this),d=o[0].trace;t.style("opacity",d.opacity),t.selectAll("path.surface").each(function(a){m.select(this).call(e,a,d)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(y,Q,K){"use strict";var m=y("../../components/color"),v=y("../../components/colorscale/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,h=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat,r=y("../../plot_api/edit_types").overrideAll;function o(d){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:m.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:m.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var t=Q.exports=r(n({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:h(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},v("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:o(),y:o(),z:o()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:n({},v.zauto,{}),zmin:n({},v.zmin,{}),zmax:n({},v.zmax,{})},hoverinfo:n({},e.hoverinfo),showlegend:n({},e.showlegend,{dflt:!1})}),"calc","nested");t.x.editType=t.y.editType=t.z.editType="calc+clearAxisTypes",t.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/calc");Q.exports=function(v,b){m(v,b,b.surfacecolor?{vals:b.surfacecolor,containerStr:"",cLetter:"c"}:{vals:b.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(y,Q,K){"use strict";var m=y("../../../stackgl_modules").gl_surface3d,v=y("../../../stackgl_modules").ndarray,b=y("../../../stackgl_modules").ndarray_linear_interpolate.d2,h=y("../heatmap/interp2d"),e=y("../heatmap/find_empties"),n=y("../../lib").isArrayOrTypedArray,r=y("../../lib/gl_format_color").parseColorScale,o=y("../../lib/str2rgbarray"),t=y("../../components/colorscale").extractOpts;function d(k,w,C){this.scene=k,this.uid=C,this.surface=w,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var a=d.prototype;a.getXat=function(k,w,C,A){var O=n(this.data.x)?n(this.data.x[0])?this.data.x[w][k]:this.data.x[k]:k;return void 0===C?O:A.d2l(O,0,C)},a.getYat=function(k,w,C,A){var O=n(this.data.y)?n(this.data.y[0])?this.data.y[w][k]:this.data.y[w]:w;return void 0===C?O:A.d2l(O,0,C)},a.getZat=function(k,w,C,A){var O=this.data.z[w][k];return null===O&&this.data.connectgaps&&this.data._interpolatedZ&&(O=this.data._interpolatedZ[w][k]),void 0===C?O:A.d2l(O,0,C)},a.handlePick=function(k){if(k.object===this.surface){var C=(k.data.index[1]-1)/this.dataScaleY-1,A=Math.max(Math.min(Math.round((k.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),O=Math.max(Math.min(Math.round(C),this.data._ylength-1),0);k.index=[A,O],k.traceCoordinate=[this.getXat(A,O),this.getYat(A,O),this.getZat(A,O)],k.dataCoordinate=[this.getXat(A,O,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(A,O,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(A,O,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)null!=k.dataCoordinate[P]&&(k.dataCoordinate[P]*=this.scene.dataScale[P]);var E=this.data.hovertext||this.data.text;return k.textLabel=Array.isArray(E)&&E[O]&&void 0!==E[O][A]?E[O][A]:E||"",k.data.dataCoordinate=k.dataCoordinate.slice(),this.surface.highlight(k.data),this.scene.glplot.spikes.position=k.dataCoordinate,!0}};var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function s(k,w){if(k<w)return 0;for(var C=0;0===Math.floor(k%w);)k/=w,C++;return C}function c(k){for(var w=[],C=0;C<i.length;C++)w.push(s(k,i[C]));return w}function l(k){for(var w=c(k),C=k,A=0;A<i.length;A++)if(w[A]>0){C=i[A];break}return C}function p(k,w){if(!(k<1||w<1)){for(var C=c(k),A=c(w),O=1,P=0;P<i.length;P++)O*=Math.pow(i[P],Math.max(C[P],A[P]));return O}}a.calcXnums=function(k){var w,C=[];for(w=1;w<k;w++){var A=this.getXat(w-1,0),O=this.getXat(w,0);C[w-1]=O!==A&&null!=A&&null!=O?Math.abs(O-A):0}var P=0;for(w=1;w<k;w++)P+=C[w-1];for(w=1;w<k;w++)C[w-1]=0===C[w-1]?1:Math.round(P/C[w-1]);return C},a.calcYnums=function(k){var w,C=[];for(w=1;w<k;w++){var A=this.getYat(0,w-1),O=this.getYat(0,w);C[w-1]=O!==A&&null!=A&&null!=O?Math.abs(O-A):0}var P=0;for(w=1;w<k;w++)P+=C[w-1];for(w=1;w<k;w++)C[w-1]=0===C[w-1]?1:Math.round(P/C[w-1]);return C};var g=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],u=g[9],x=g[13];function f(k,w,C){var A=C[8]+C[2]*w[0]+C[5]*w[1];return k[0]=(C[6]+C[0]*w[0]+C[3]*w[1])/A,k[1]=(C[7]+C[1]*w[0]+C[4]*w[1])/A,k}function T(k,w,C){return function(A,O,P,S){for(var E=[0,0],D=A.shape[0],z=A.shape[1],N=0;N<D;N++)for(var V=0;V<z;V++)P(E,[N,V],S),A.set(N,V,b(O,E[0],E[1]))}(k,w,f,C),k}function _(k,w){for(var C=!1,A=0;A<k.length;A++)if(w===k[A]){C=!0;break}!1===C&&k.push(w)}a.estimateScale=function(k,w){for(var C=1+function(O){if(0!==O.length){for(var P=1,S=0;S<O.length;S++)P=p(P,O[S]);return P}}(0===w?this.calcXnums(k):this.calcYnums(k));C<u;)C*=2;for(;C>x;)C--,C/=l(C),++C<u&&(C=x);var A=Math.round(C/k);return A>1?A:1},a.refineCoords=function(k){for(var w=this.dataScaleX,C=this.dataScaleY,A=k[0].shape[0],O=k[0].shape[1],P=0|Math.floor(k[0].shape[0]*w+1),S=0|Math.floor(k[0].shape[1]*C+1),E=1+A+1,D=1+O+1,z=v(new Float32Array(E*D),[E,D]),N=[1/w,0,0,0,1/C,0,0,0,1],V=0;V<k.length;++V){this.surface.padField(z,k[V]);var X=v(new Float32Array(P*S),[P,S]);T(X,z,N),k[V]=X}},a.setContourLevels=function(){var k,w,A=[[],[],[]],O=[!1,!1,!1],P=!1;for(k=0;k<3;++k)if(this.showContour[k]&&(P=!0,this.contourSize[k]>0&&null!==this.contourStart[k]&&null!==this.contourEnd[k]&&this.contourEnd[k]>this.contourStart[k]))for(O[k]=!0,w=this.contourStart[k];w<this.contourEnd[k];w+=this.contourSize[k])_(A[k],w*this.scene.dataScale[k]);if(P){var S=[[],[],[]];for(k=0;k<3;++k)this.showContour[k]&&(S[k]=O[k]?A[k]:this.scene.contourLevels[k]);this.surface.update({levels:S})}},a.update=function(k){var w,C,A,O,P=this.scene,S=P.fullSceneLayout,E=this.surface,D=r(k),z=P.dataScale,N=k.z[0].length,V=k._ylength,X=P.contourLevels;this.data=k;var J=[];for(w=0;w<3;w++)for(J[w]=[],C=0;C<N;C++)J[w][C]=[];for(C=0;C<N;C++)for(A=0;A<V;A++)J[0][C][A]=this.getXat(C,A,k.xcalendar,S.xaxis),J[1][C][A]=this.getYat(C,A,k.ycalendar,S.yaxis),J[2][C][A]=this.getZat(C,A,k.zcalendar,S.zaxis);if(k.connectgaps)for(k._emptypoints=e(J[2]),h(J[2],k._emptypoints),k._interpolatedZ=[],C=0;C<N;C++)for(k._interpolatedZ[C]=[],A=0;A<V;A++)k._interpolatedZ[C][A]=J[2][C][A];for(w=0;w<3;w++)for(C=0;C<N;C++)for(A=0;A<V;A++)null==(O=J[w][C][A])?J[w][C][A]=NaN:O=J[w][C][A]*=z[w];for(w=0;w<3;w++)for(C=0;C<N;C++)for(A=0;A<V;A++)null!=(O=J[w][C][A])&&(this.minValues[w]>O&&(this.minValues[w]=O),this.maxValues[w]<O&&(this.maxValues[w]=O));for(w=0;w<3;w++)this.objectOffset[w]=.5*(this.minValues[w]+this.maxValues[w]);for(w=0;w<3;w++)for(C=0;C<N;C++)for(A=0;A<V;A++)null!=(O=J[w][C][A])&&(J[w][C][A]-=this.objectOffset[w]);var G=[v(new Float32Array(N*V),[N,V]),v(new Float32Array(N*V),[N,V]),v(new Float32Array(N*V),[N,V])];for(w=0;w<3;w++)for(C=0;C<N;C++)for(A=0;A<V;A++)G[w].set(C,A,J[w][C][A]);J=[];var Z={colormap:D,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!k.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:k.opacityscale,opacity:k.opacity},re=t(k);if(Z.intensityBounds=[re.min,re.max],k.surfacecolor){var j=v(new Float32Array(N*V),[N,V]);for(C=0;C<N;C++)for(A=0;A<V;A++)j.set(C,A,k.surfacecolor[A][C]);G.push(j)}else Z.intensityBounds[0]*=z[2],Z.intensityBounds[1]*=z[2];(x<G[0].shape[0]||x<G[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(G[0].shape[0],0),this.dataScaleY=this.estimateScale(G[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(G)),k.surfacecolor&&(Z.intensity=G.pop());var U,$,q,B=[!0,!0,!0],H=["x","y","z"];for(w=0;w<3;++w){var ee=k.contours[H[w]];B[w]=ee.highlight,Z.showContour[w]=ee.show||ee.highlight,Z.showContour[w]&&(Z.contourProject[w]=[ee.project.x,ee.project.y,ee.project.z],ee.show?(this.showContour[w]=!0,Z.levels[w]=X[w],E.highlightColor[w]=Z.contourColor[w]=o(ee.color),E.highlightTint[w]=Z.contourTint[w]=ee.usecolormap?0:1,Z.contourWidth[w]=ee.width,this.contourStart[w]=ee.start,this.contourEnd[w]=ee.end,this.contourSize[w]=ee.size):(this.showContour[w]=!1,this.contourStart[w]=null,this.contourEnd[w]=null,this.contourSize[w]=0),ee.highlight&&(Z.dynamicColor[w]=o(ee.highlightcolor),Z.dynamicWidth[w]=ee.highlightwidth))}($=(U=D)[0].rgb)[0]===(q=U[U.length-1].rgb)[0]&&$[1]===q[1]&&$[2]===q[2]&&$[3]===q[3]&&(Z.vertexColor=!0),Z.objectOffset=this.objectOffset,Z.coords=G,E.update(Z),E.visible=k.visible,E.enableDynamic=B,E.enableHighlight=B,E.snapToData=!0,"lighting"in k&&(E.ambientLight=k.lighting.ambient,E.diffuseLight=k.lighting.diffuse,E.specularLight=k.lighting.specular,E.roughness=k.lighting.roughness,E.fresnel=k.lighting.fresnel),"lightposition"in k&&(E.lightPosition=[k.lightposition.x,k.lightposition.y,k.lightposition.z])},a.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},Q.exports=function(k,w){var A=m({gl:k.glplot.gl}),O=new d(k,A,w.uid);return A._trace=O,O.update(w),k.glplot.add(A),O}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(y,Q,K){"use strict";var m=y("../../registry"),v=y("../../lib"),b=y("../../components/colorscale/defaults"),h=y("./attributes");function e(r,o,t,d){var a=d("opacityscale");"max"===a?o.opacityscale=[[0,.1],[1,1]]:"min"===a?o.opacityscale=[[0,1],[1,.1]]:"extremes"===a?o.opacityscale=function(i,s){for(var c=[],l=0;l<32;l++){var p=l/31,g=.1+.9*(1-Math.pow(Math.sin(1*p*Math.PI),2));c.push([p,Math.max(0,Math.min(1,g))])}return c}():function(i){var s=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var c=0;c<i.length;c++){var l=i[c];if(2!==l.length||+l[0]<s)return!1;s=+l[0]}return!0}(a)||(o.opacityscale=void 0)}function n(r,o,t){o in r&&!(t in r)&&(r[t]=r[o])}Q.exports={supplyDefaults:function(r,o,t,d){var a,i;function s(_,k){return v.coerce(r,o,h,_,k)}var c=s("x"),l=s("y"),p=s("z");if(!p||!p.length||c&&c.length<1||l&&l.length<1)o.visible=!1;else{o._xlength=Array.isArray(c)&&v.isArrayOrTypedArray(c[0])?p.length:p[0].length,o._ylength=p.length,m.getComponentMethod("calendars","handleTraceDefaults")(r,o,["x","y","z"],d),s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(_){s(_)});var g=s("surfacecolor"),u=["x","y","z"];for(a=0;a<3;++a){var x="contours."+u[a],f=s(x+".show"),T=s(x+".highlight");if(f||T)for(i=0;i<3;++i)s(x+".project."+u[i]);f&&(s(x+".color"),s(x+".width"),s(x+".usecolormap")),T&&(s(x+".highlightcolor"),s(x+".highlightwidth")),s(x+".start"),s(x+".end"),s(x+".size")}g||(n(r,"zmin","cmin"),n(r,"zmax","cmax"),n(r,"zauto","cauto")),b(r,o,d,s,{prefix:"",cLetter:"c"}),e(0,o,0,s),o._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:y("./calc"),plot:y("./convert"),moduleType:"trace",name:"surface",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(y,Q,K){"use strict";var m=y("../../components/annotations/attributes"),v=y("../../lib/extend").extendFlat,b=y("../../plot_api/edit_types").overrideAll,h=y("../../plots/font_attributes"),e=y("../../plots/domain").attributes,n=y("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(Q.exports=b({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:v({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:v({},h({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:v({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:v({},h({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(y,Q,K){"use strict";var m=y("../../plots/get_data").getModuleCalcData,v=y("./plot");K.name="table",K.plot=function(b){var h=m(b.calcdata,"table")[0];h.length&&v(b,h)},K.clean=function(b,h,e,n){var r=n._has&&n._has("table"),o=h._has&&h._has("table");r&&!o&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(y,Q,K){"use strict";var m=y("../../lib/gup").wrap;Q.exports=function(){return m({})}},{"../../lib/gup":512}],1078:[function(y,Q,K){"use strict";Q.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(y,Q,K){"use strict";var m=y("./constants"),v=y("../../lib/extend").extendFlat,b=y("fast-isnumeric");function h(a){if(Array.isArray(a)){for(var i=0,s=0;s<a.length;s++)i=Math.max(i,h(a[s]));return i}return a}function e(a,i){return a+i}function n(a){var i,s=a.slice(),c=1/0,l=0;for(i=0;i<s.length;i++)Array.isArray(s[i])||(s[i]=[s[i]]),c=Math.min(c,s[i].length),l=Math.max(l,s[i].length);if(c!==l)for(i=0;i<s.length;i++){var p=l-s[i].length;p&&(s[i]=s[i].concat(r(p)))}return s}function r(a){for(var i=new Array(a),s=0;s<a;s++)i[s]="";return i}function o(a){return a.calcdata.columns.reduce(function(i,s){return s.xIndex<a.xIndex?i+s.columnWidth:i},0)}function t(a,i){return Object.keys(a).map(function(s){return v({},a[s],{auxiliaryBlocks:i})})}function d(a,i){for(var s,c={},l=0,p=0,g={firstRowIndex:null,lastRowIndex:null,rows:[]},u=0,x=0,f=0;f<a.length;f++)g.rows.push({rowIndex:f,rowHeight:s=a[f]}),((p+=s)>=i||f===a.length-1)&&(c[l]=g,g.key=x++,g.firstRowIndex=u,g.lastRowIndex=f,g={firstRowIndex:null,lastRowIndex:null,rows:[]},l+=p,u=f+1,p=0);return c}Q.exports=function(a,i){var s=n(i.cells.values),c=function(z){return z.slice(i.header.values.length,z.length)},l=n(i.header.values);l.length&&!l[0].length&&(l[0]=[""],l=n(l));var p=l.concat(c(s).map(function(){return r((l[0]||[""]).length)})),g=i.domain,u=Math.floor(a._fullLayout._size.w*(g.x[1]-g.x[0])),x=Math.floor(a._fullLayout._size.h*(g.y[1]-g.y[0])),f=i.header.values.length?p[0].map(function(){return i.header.height}):[m.emptyHeaderHeight],T=s.length?s[0].map(function(){return i.cells.height}):[],_=f.reduce(e,0),k=d(T,x-_+m.uplift),w=t(d(f,_),[]),C=t(k,w),A={},O=i._fullInput.columnorder.concat(c(s.map(function(z,N){return N}))),P=p.map(function(z,N){var V=Array.isArray(i.columnwidth)?i.columnwidth[Math.min(N,i.columnwidth.length-1)]:i.columnwidth;return b(V)?Number(V):1}),S=P.reduce(e,0);P=P.map(function(z){return z/S*u});var E=Math.max(h(i.header.line.width),h(i.cells.line.width)),D={key:i.uid+a._context.staticPlot,translateX:g.x[0]*a._fullLayout._size.w,translateY:a._fullLayout._size.h*(1-g.y[1]),size:a._fullLayout._size,width:u,maxLineWidth:E,height:x,columnOrder:O,groupHeight:x,rowBlocks:C,headerRowBlocks:w,scrollY:0,cells:v({},i.cells,{values:s}),headerCells:v({},i.header,{values:p}),gdColumns:p.map(function(z){return z[0]}),gdColumnsOriginalOrder:p.map(function(z){return z[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(z,N){return A[z]=(A[z]||0)+1,{key:z+"__"+A[z],label:z,specIndex:N,xIndex:O[N],xScale:o,x:void 0,calcdata:void 0,columnWidth:P[N]}})};return D.columns.forEach(function(z){z.calcdata=D,z.x=o(z)}),D}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(y,Q,K){"use strict";var m=y("../../lib/extend").extendFlat;K.splitToPanels=function(v){var b=[0,0],h=m({},v,{key:"header",type:"header",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!0,values:v.calcdata.headerCells.values[v.specIndex],rowBlocks:v.calcdata.headerRowBlocks,calcdata:m({},v.calcdata,{cells:v.calcdata.headerCells})});return[m({},v,{key:"cells1",type:"cells",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:v.calcdata.cells.values[v.specIndex],rowBlocks:v.calcdata.rowBlocks}),m({},v,{key:"cells2",type:"cells",page:1,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:v.calcdata.cells.values[v.specIndex],rowBlocks:v.calcdata.rowBlocks}),h]},K.splitToCells=function(v){var h,e,n,b=[n=(e=(h=v).rowBlocks[h.page])?e.rows[0].rowIndex:0,e?n+e.rows.length:0];return(v.values||[]).slice(b[0],b[1]).map(function(h,e){return{keyWithinBlock:e+("string"==typeof h&&h.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:b[0]+e,column:v,calcdata:v.calcdata,page:v.page,rowBlocks:v.rowBlocks,value:h}})}},{"../../lib/extend":505}],1081:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("../../plots/domain").defaults;Q.exports=function(h,e,n,r){function o(t,d){return m.coerce(h,e,v,t,d)}b(e,r,o),o("columnwidth"),o("header.values"),o("header.format"),o("header.align"),o("header.prefix"),o("header.suffix"),o("header.height"),o("header.line.width"),o("header.line.color"),o("header.fill.color"),m.coerceFont(o,"header.font",m.extendFlat({},r.font)),function(t,d){for(var i=t.header.values.length,s=(t.columnorder||[]).slice(0,i),c=s.slice().sort(function(g,u){return g-u}),l=s.map(function(g){return c.indexOf(g)}),p=l.length;p<i;p++)l.push(p);d("columnorder",l)}(e,o),o("cells.values"),o("cells.format"),o("cells.align"),o("cells.prefix"),o("cells.suffix"),o("cells.height"),o("cells.line.width"),o("cells.line.color"),o("cells.fill.color"),m.coerceFont(o,"cells.font",m.extendFlat({},r.font)),e._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),moduleType:"trace",name:"table",basePlotModule:y("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(y,Q,K){"use strict";var m=y("./constants"),v=y("@plotly/d3"),b=y("../../lib").numberFormat,h=y("../../lib/gup"),e=y("../../components/drawing"),n=y("../../lib/svg_text_utils"),r=y("../../lib").raiseToTop,o=y("../../lib").strTranslate,t=y("../../lib").cancelTransition,d=y("./data_preparation_helper"),a=y("./data_split_helpers"),i=y("../../components/color");function s(G){return Math.ceil(G.calcdata.maxLineWidth/2)}function c(G,Z){return"clip"+G._fullLayout._uid+"_scrollAreaBottomClip_"+Z.key}function l(G,Z){return"clip"+G._fullLayout._uid+"_columnBoundaryClippath_"+Z.calcdata.key+"_"+Z.specIndex}function p(G){return[].concat.apply([],G.map(function(Z){return Z})).map(function(Z){return Z.__data__})}function g(G,Z,re){var j=G.selectAll("."+m.cn.scrollbarKit).data(h.repeat,h.keyFun);j.enter().append("g").classed(m.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),j.each(function($){var ne,q=$.scrollbarState;q.totalHeight=N(ne=$.rowBlocks,ne.length-1)+(ne.length?V(ne[ne.length-1],1/0):1),q.scrollableAreaHeight=$.groupHeight-C($),q.currentlyVisibleHeight=Math.min(q.totalHeight,q.scrollableAreaHeight),q.ratio=q.currentlyVisibleHeight/q.totalHeight,q.barLength=Math.max(q.ratio*q.currentlyVisibleHeight,m.goldenRatio*m.scrollbarWidth),q.barWiggleRoom=q.currentlyVisibleHeight-q.barLength,q.wiggleRoom=Math.max(0,q.totalHeight-q.scrollableAreaHeight),q.topY=0===q.barWiggleRoom?0:$.scrollY/q.wiggleRoom*q.barWiggleRoom,q.bottomY=q.topY+q.barLength,q.dragMultiplier=q.wiggleRoom/q.barWiggleRoom}).attr("transform",function($){return o($.width+m.scrollbarWidth/2+m.scrollbarOffset,C($))});var B=j.selectAll("."+m.cn.scrollbar).data(h.repeat,h.keyFun);B.enter().append("g").classed(m.cn.scrollbar,!0);var H=B.selectAll("."+m.cn.scrollbarSlider).data(h.repeat,h.keyFun);H.enter().append("g").classed(m.cn.scrollbarSlider,!0),H.attr("transform",function($){return o(0,$.scrollbarState.topY||0)});var ee=H.selectAll("."+m.cn.scrollbarGlyph).data(h.repeat,h.keyFun);ee.enter().append("line").classed(m.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",m.scrollbarWidth).attr("stroke-linecap","round").attr("y1",m.scrollbarWidth/2),ee.attr("y2",function($){return $.scrollbarState.barLength-m.scrollbarWidth/2}).attr("stroke-opacity",function($){return $.columnDragInProgress||!$.scrollbarState.barWiggleRoom||re?0:.4}),ee.transition().delay(0).duration(0),ee.transition().delay(m.scrollbarHideDelay).duration(m.scrollbarHideDuration).attr("stroke-opacity",0);var U=B.selectAll("."+m.cn.scrollbarCaptureZone).data(h.repeat,h.keyFun);U.enter().append("line").classed(m.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",m.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function($){var q=v.event.y,te=this.getBoundingClientRect(),ne=$.scrollbarState,se=q-te.top,ie=v.scale.linear().domain([0,ne.scrollableAreaHeight]).range([0,ne.totalHeight]).clamp(!0);ne.topY<=se&&se<=ne.bottomY||O(Z,G,null,ie(se-ne.barLength/2))($)}).call(v.behavior.drag().origin(function($){return v.event.stopPropagation(),$.scrollbarState.scrollbarScrollInProgress=!0,$}).on("drag",O(Z,G)).on("dragend",function(){})),U.attr("y2",function($){return $.scrollbarState.scrollableAreaHeight}),Z._context.staticPlot&&(ee.remove(),U.remove())}function u(G,Z,re,j){var U,B=function(ee){var U=ee.selectAll("."+m.cn.columnCell).data(a.splitToCells,function($){return $.keyWithinBlock});return U.enter().append("g").classed(m.cn.columnCell,!0),U.exit().remove(),U}(((U=re.selectAll("."+m.cn.columnCells).data(h.repeat,h.keyFun)).enter().append("g").classed(m.cn.columnCells,!0),U.exit().remove(),U));B.each(function(U,$){var q=U.calcdata.cells.font,te=U.column.specIndex,ne={size:T(q.size,te,$),color:T(q.color,te,$),family:T(q.family,te,$)};U.rowNumber=U.key,U.align=T(U.calcdata.cells.align,te,$),U.cellBorderWidth=T(U.calcdata.cells.line.width,te,$),U.font=ne}),function(ee){ee.attr("width",function(U){return U.column.columnWidth}).attr("stroke-width",function(U){return U.cellBorderWidth}).each(function(U){var $=v.select(this);i.stroke($,T(U.calcdata.cells.line.color,U.column.specIndex,U.rowNumber)),i.fill($,T(U.calcdata.cells.fill.color,U.column.specIndex,U.rowNumber))})}(function(ee){var U=ee.selectAll("."+m.cn.cellRect).data(h.repeat,function($){return $.keyWithinBlock});return U.enter().append("rect").classed(m.cn.cellRect,!0),U}(B));var H=function(ee){var U=ee.selectAll("."+m.cn.cellText).data(h.repeat,function($){return $.keyWithinBlock});return U.enter().append("text").classed(m.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){v.event.stopPropagation()}),U}(function(ee){var U=ee.selectAll("."+m.cn.cellTextHolder).data(h.repeat,function($){return $.keyWithinBlock});return U.enter().append("g").classed(m.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),U}(B));(function(ee){ee.each(function(U){e.font(v.select(this),U.font)})})(H),x(H,Z,j,G),z(B)}function x(G,Z,re,j){G.text(function(B){var H=B.column.specIndex,ee=B.rowNumber,U=B.value,$="string"==typeof U,q=$&&U.match(/<br>/i),te=!$||q;B.mayHaveMarkup=$&&U.match(/[<&>]/);var ne,se="string"==typeof(ne=U)&&ne.match(m.latexCheck);B.latex=se;var ie,ue,le=se?"":T(B.calcdata.cells.prefix,H,ee)||"",de=se?"":T(B.calcdata.cells.suffix,H,ee)||"",be=se?null:T(B.calcdata.cells.format,H,ee)||null,_e=le+(be?b(be)(B.value):B.value)+de;if(B.wrappingNeeded=!B.wrapped&&!te&&!se&&(ie=f(_e)),B.cellHeightMayIncrease=q||se||B.mayHaveMarkup||(void 0===ie?f(_e):ie),B.needsConvertToTspans=B.mayHaveMarkup||B.wrappingNeeded||B.latex,B.wrappingNeeded){var xe=(" "===m.wrapSplitCharacter?_e.replace(/<a href=/gi,"<a_href="):_e).split(m.wrapSplitCharacter),Ee=" "===m.wrapSplitCharacter?xe.map(function(he){return he.replace(/<a_href=/gi,"<a href=")}):xe;B.fragments=Ee.map(function(he){return{text:he,width:null}}),B.fragments.push({fragment:m.wrapSpacer,width:null}),ue=Ee.join(m.lineBreaker)+m.lineBreaker+m.wrapSpacer}else delete B.fragments,ue=_e;return ue}).attr("dy",function(B){return B.needsConvertToTspans?0:"0.75em"}).each(function(B){var H=v.select(this);B.needsConvertToTspans?n.convertToTspans(H,j,(B.wrappingNeeded?S:E)(re,this,Z,j,B)):v.select(this.parentNode).attr("transform",function(U){return o(D(U),m.cellPad)}).attr("text-anchor",function(U){return{left:"start",center:"middle",right:"end"}[U.align]})})}function f(G){return-1!==G.indexOf(m.wrapSplitCharacter)}function T(G,Z,re){if(Array.isArray(G)){var j=G[Math.min(Z,G.length-1)];return Array.isArray(j)?j[Math.min(re,j.length-1)]:j}return G}function _(G,Z,re){G.transition().ease(m.releaseTransitionEase).duration(m.releaseTransitionDuration).attr("transform",o(Z.x,re))}function k(G){return"cells"===G.type}function w(G){return"header"===G.type}function C(G){return(G.rowBlocks.length?G.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(Z,re){return Z+V(re,1/0)},0)}function A(G,Z,re){var j=p(Z)[0];if(void 0!==j){var B=j.rowBlocks,H=j.calcdata,ee=N(B,B.length),U=j.calcdata.groupHeight-C(j),$=H.scrollY=Math.max(0,Math.min(ee-U,H.scrollY)),q=function(te,ne,se){for(var ie=[],ue=0,le=0;le<te.length;le++){for(var de=te[le],be=de.rows,_e=0,xe=0;xe<be.length;xe++)_e+=be[xe].rowHeight;de.allRowsHeight=_e,ne<ue+_e&&ne+se>ue&&ie.push(le),ue+=_e}return ie}(B,$,U);1===q.length&&(q[0]===B.length-1?q.unshift(q[0]-1):q.push(q[0]+1)),q[0]%2&&q.reverse(),Z.each(function(te,ne){te.page=q[ne],te.scrollY=$}),Z.attr("transform",function(te){var ne=N(te.rowBlocks,te.page)-te.scrollY;return o(0,ne)}),G&&(P(G,re,Z,q,j.prevPages,j,0),P(G,re,Z,q,j.prevPages,j,1),g(re,G))}}function O(G,Z,re,j){return function(B){var H=B.calcdata?B.calcdata:B,ee=Z.filter(function(te){return H.key===te.key}),$=H.scrollY;H.scrollY=void 0===j?H.scrollY+(re||H.scrollbarState.dragMultiplier)*v.event.dy:j;var q=ee.selectAll("."+m.cn.yColumn).selectAll("."+m.cn.columnBlock).filter(k);return A(G,q,ee),H.scrollY===$}}function P(G,Z,re,j,B,H,ee){j[ee]!==B[ee]&&(clearTimeout(H.currentRepaint[ee]),H.currentRepaint[ee]=setTimeout(function(){var U=re.filter(function($,q){return q===ee&&j[q]!==B[q]});u(G,Z,U,re),B[ee]=j[ee]}))}function S(G,Z,re,j){return function(){var B=v.select(Z.parentNode);B.each(function(H){var ee=H.fragments;B.selectAll("tspan.line").each(function(ue,le){ee[le].width=this.getComputedTextLength()});var U,$,q=ee[ee.length-1].width,te=ee.slice(0,-1),ne=[],se=0,ie=H.column.columnWidth-2*m.cellPad;for(H.value="";te.length;)se+($=(U=te.shift()).width+q)>ie&&(H.value+=ne.join(m.wrapSpacer)+m.lineBreaker,ne=[],se=0),ne.push(U.text),se+=$;se&&(H.value+=ne.join(m.wrapSpacer)),H.wrapped=!0}),B.selectAll("tspan.line").remove(),x(B.select("."+m.cn.cellText),re,G,j),v.select(Z.parentNode.parentNode).call(z)}}function E(G,Z,re,j,B){return function(){if(!B.settledY){var H=v.select(Z.parentNode),ee=J(B),U=B.key-ee.firstRowIndex,$=ee.rows[U].rowHeight,q=B.cellHeightMayIncrease?Z.parentNode.getBoundingClientRect().height+2*m.cellPad:$,te=Math.max(q,$);te-ee.rows[U].rowHeight&&(ee.rows[U].rowHeight=te,G.selectAll("."+m.cn.columnCell).call(z),A(null,G.filter(k),0),g(re,j,!0)),H.attr("transform",function(){var ne=this.parentNode.getBoundingClientRect(),se=v.select(this.parentNode).select("."+m.cn.cellRect).node().getBoundingClientRect(),ie=this.transform.baseVal.consolidate(),ue=se.top-ne.top+(ie?ie.matrix.f:m.cellPad);return o(D(B,v.select(this.parentNode).select("."+m.cn.cellTextHolder).node().getBoundingClientRect().width),ue)}),B.settledY=!0}}}function D(G,Z){switch(G.align){case"left":default:return m.cellPad;case"right":return G.column.columnWidth-(Z||0)-m.cellPad;case"center":return(G.column.columnWidth-(Z||0))/2}}function z(G){G.attr("transform",function(Z){var re=Z.rowBlocks[0].auxiliaryBlocks.reduce(function(B,H){return B+V(H,1/0)},0),j=V(J(Z),Z.key);return o(0,j+re)}).selectAll("."+m.cn.cellRect).attr("height",function(Z){return(re=J(Z),j=Z.key,re.rows[j-re.firstRowIndex]).rowHeight;var re,j})}function N(G,Z){for(var re=0,j=Z-1;j>=0;j--)re+=X(G[j]);return re}function V(G,Z){for(var re=0,j=0;j<G.rows.length&&G.rows[j].rowIndex<Z;j++)re+=G.rows[j].rowHeight;return re}function X(G){var Z=G.allRowsHeight;if(void 0!==Z)return Z;for(var re=0,j=0;j<G.rows.length;j++)re+=G.rows[j].rowHeight;return G.allRowsHeight=re,re}function J(G){return G.rowBlocks[G.page]}Q.exports=function(G,Z){var re=!G._context.staticPlot,j=G._fullLayout._paper.selectAll("."+m.cn.table).data(Z.map(function(de){var be=h.unwrap(de).trace;return d(G,be)}),h.keyFun);j.exit().remove(),j.enter().append("g").classed(m.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),j.attr("width",function(de){return de.width+de.size.l+de.size.r}).attr("height",function(de){return de.height+de.size.t+de.size.b}).attr("transform",function(de){return o(de.translateX,de.translateY)});var B=j.selectAll("."+m.cn.tableControlView).data(h.repeat,h.keyFun),H=B.enter().append("g").classed(m.cn.tableControlView,!0).style("box-sizing","content-box");if(re){var ee="onwheel"in document?"wheel":"mousewheel";H.on("mousemove",function(de){B.filter(function(be){return de===be}).call(g,G)}).on(ee,function(de){de.scrollbarState.wheeling||(de.scrollbarState.wheeling=!0,O(G,B,null,de.scrollY+v.event.deltaY)(de)||(v.event.stopPropagation(),v.event.preventDefault()),de.scrollbarState.wheeling=!1)}).call(g,G,!0)}B.attr("transform",function(de){return o(de.size.l,de.size.t)});var U=B.selectAll("."+m.cn.scrollBackground).data(h.repeat,h.keyFun);U.enter().append("rect").classed(m.cn.scrollBackground,!0).attr("fill","none"),U.attr("width",function(de){return de.width}).attr("height",function(de){return de.height}),B.each(function(de){e.setClipUrl(v.select(this),c(G,de),G)});var $=B.selectAll("."+m.cn.yColumn).data(function(de){return de.columns},h.keyFun);$.enter().append("g").classed(m.cn.yColumn,!0),$.exit().remove(),$.attr("transform",function(de){return o(de.x,0)}),re&&$.call(v.behavior.drag().origin(function(de){return _(v.select(this),de,-m.uplift),r(this),de.calcdata.columnDragInProgress=!0,g(B.filter(function(be){return de.calcdata.key===be.key}),G),de}).on("drag",function(de){var be=v.select(this),_e=function(xe){return(de===xe?v.event.x:xe.x)+xe.columnWidth/2};de.x=Math.max(-m.overdrag,Math.min(de.calcdata.width+m.overdrag-de.columnWidth,v.event.x)),p($).filter(function(xe){return xe.calcdata.key===de.calcdata.key}).sort(function(xe,Ee){return _e(xe)-_e(Ee)}).forEach(function(xe,Ee){xe.xIndex=Ee,xe.x=de===xe?xe.x:xe.xScale(xe)}),$.filter(function(xe){return de!==xe}).transition().ease(m.transitionEase).duration(m.transitionDuration).attr("transform",function(xe){return o(xe.x,0)}),be.call(t).attr("transform",o(de.x,-m.uplift))}).on("dragend",function(de){var xe,Ee,he,me,be=v.select(this),_e=de.calcdata;de.x=de.xScale(de),de.calcdata.columnDragInProgress=!1,_(be,de,0),xe=G,Ee=_e,he=_e.columns.map(function(xe){return xe.xIndex}),me=Ee.gdColumnsOriginalOrder,Ee.gdColumns.sort(function(Se,Me){return he[me.indexOf(Se)]-he[me.indexOf(Me)]}),Ee.columnorder=he,xe.emit("plotly_restyle")})),$.each(function(de){e.setClipUrl(v.select(this),l(G,de),G)});var q=$.selectAll("."+m.cn.columnBlock).data(a.splitToPanels,h.keyFun);q.enter().append("g").classed(m.cn.columnBlock,!0).attr("id",function(de){return de.key}),q.style("cursor",function(de){return de.dragHandle?"ew-resize":de.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var te=q.filter(w),ne=q.filter(k);re&&ne.call(v.behavior.drag().origin(function(de){return v.event.stopPropagation(),de}).on("drag",O(G,B,-1)).on("dragend",function(){})),u(G,B,te,q),u(G,B,ne,q);var se=B.selectAll("."+m.cn.scrollAreaClip).data(h.repeat,h.keyFun);se.enter().append("clipPath").classed(m.cn.scrollAreaClip,!0).attr("id",function(de){return c(G,de)});var ie=se.selectAll("."+m.cn.scrollAreaClipRect).data(h.repeat,h.keyFun);ie.enter().append("rect").classed(m.cn.scrollAreaClipRect,!0).attr("x",-m.overdrag).attr("y",-m.uplift).attr("fill","none"),ie.attr("width",function(de){return de.width+2*m.overdrag}).attr("height",function(de){return de.height+m.uplift}),$.selectAll("."+m.cn.columnBoundary).data(h.repeat,h.keyFun).enter().append("g").classed(m.cn.columnBoundary,!0);var ue=$.selectAll("."+m.cn.columnBoundaryClippath).data(h.repeat,h.keyFun);ue.enter().append("clipPath").classed(m.cn.columnBoundaryClippath,!0),ue.attr("id",function(de){return l(G,de)});var le=ue.selectAll("."+m.cn.columnBoundaryRect).data(h.repeat,h.keyFun);le.enter().append("rect").classed(m.cn.columnBoundaryRect,!0).attr("fill","none"),le.attr("width",function(de){return de.columnWidth+2*s(de)}).attr("height",function(de){return de.calcdata.height+2*s(de)+m.uplift}).attr("x",function(de){return-s(de)}).attr("y",function(de){return-s(de)}),A(null,ne,B)}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(y,Q,K){"use strict";var m=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../components/colorscale/attributes"),h=y("../../plots/domain").attributes,e=y("../pie/attributes"),n=y("../sunburst/attributes"),r=y("./constants"),o=y("../../lib/extend").extendFlat;Q.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:o({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:n.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:n.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:o({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:n.textinfo,texttemplate:v({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:n.hoverinfo,hovertemplate:m({},{keys:r.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:o({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:n.root,domain:h({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(y,Q,K){"use strict";var m=y("../../plots/plots");K.name="treemap",K.plot=function(v,b,h,e){m.plotBasePlot(K.name,v,b,h,e)},K.clean=function(v,b,h,e){m.cleanBasePlot(K.name,v,b,h,e)}},{"../../plots/plots":628}],1086:[function(y,Q,K){"use strict";var m=y("../sunburst/calc");K.calc=function(v,b){return m.calc(v,b)},K.crossTraceCalc=function(v){return m._runCrossTraceCalc("treemap",v)}},{"../sunburst/calc":1060}],1087:[function(y,Q,K){"use strict";Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("../../components/color"),h=y("../../plots/domain").defaults,e=y("../bar/defaults").handleText,n=y("../bar/constants").TEXTPAD,r=y("../../components/colorscale"),o=r.hasColorscale,t=r.handleDefaults;Q.exports=function(d,a,i,s){function c(k,w){return m.coerce(d,a,v,k,w)}var l=c("labels"),p=c("parents");if(l&&l.length&&p&&p.length){var g=c("values");c(g&&g.length?"branchvalues":"count"),c("level"),c("maxdepth"),"squarify"===c("tiling.packing")&&c("tiling.squarifyratio"),c("tiling.flip"),c("tiling.pad");var u=c("text");c("texttemplate"),a.texttemplate||c("textinfo",Array.isArray(u)?"text+label":"label"),c("hovertext"),c("hovertemplate");var x=c("pathbar.visible");e(d,a,s,c,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition");var f=-1!==a.textposition.indexOf("bottom");c("marker.line.width")&&c("marker.line.color",s.paper_bgcolor);var T=c("marker.colors");(a._hasColorscale=o(d,"marker","colors")||(d.marker||{}).coloraxis)?t(d,a,s,c,{prefix:"marker.",cLetter:"c"}):c("marker.depthfade",!(T||[]).length);var _=2*a.textfont.size;c("marker.pad.t",f?_/4:_),c("marker.pad.l",_/4),c("marker.pad.r",_/4),c("marker.pad.b",f?_:_/4),a._hovered={marker:{line:{width:2,color:b.contrast(s.paper_bgcolor)}}},x&&(c("pathbar.thickness",a.pathbar.textfont.size+2*n),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),h(a,s,c),a._length=null}else a.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../sunburst/helpers"),b=y("../bar/uniform_text").clearMinTextSize,h=y("../bar/style").resizeText,e=y("./plot_one");Q.exports=function(n,r,o,t,d){var a,i,s=d.type,c=d.drawDescendants,l=n._fullLayout,p=l["_"+s+"layer"],g=!o;b(s,l),(a=p.selectAll("g.trace."+s).data(r,function(u){return u[0].trace.uid})).enter().append("g").classed("trace",!0).classed(s,!0),a.order(),!l.uniformtext.mode&&v.hasTransition(o)?(t&&(i=t()),m.transition().duration(o.duration).ease(o.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}).each(function(){p.selectAll("g.trace").each(function(u){e(n,u,this,o,c)})})):(a.each(function(u){e(n,u,this,o,c)}),l.uniformtext.mode&&h(n,p.selectAll(".trace"),s)),g&&a.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../components/drawing"),h=y("../../lib/svg_text_utils"),e=y("./partition"),n=y("./style").styleOne,r=y("./constants"),o=y("../sunburst/helpers"),t=y("../sunburst/fx");Q.exports=function(d,a,i,s,c){var l=c.barDifY,p=c.width,g=c.height,u=c.viewX,x=c.viewY,f=c.pathSlice,T=c.toMoveInsideSlice,_=c.strTransform,k=c.hasTransition,w=c.handleSlicesExit,C=c.makeUpdateSliceInterpolator,A=c.makeUpdateTextInterpolator,O={},P=d._fullLayout,S=a[0],E=S.trace,D=S.hierarchy,z=p/E._entryDepth,N=o.listPath(i.data,"id"),V=e(D.copy(),[p,g],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(V=V.filter(function(J){var G=N.indexOf(J.data.id);return-1!==G&&(J.x0=z*G,J.x1=z*(G+1),J.y0=l,J.y1=l+g,J.onPathbar=!0,!0)})).reverse(),(s=s.data(V,o.getPtId)).enter().append("g").classed("pathbar",!0),w(s,!0,O,[p,g],f),s.order();var X=s;k&&(X=X.transition().each("end",function(){var J=m.select(this);o.setSliceCursor(J,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(J){J._x0=u(J.x0),J._x1=u(J.x1),J._y0=x(J.y0),J._y1=x(J.y1),J._hoverX=u(J.x1-Math.min(p,g)/2),J._hoverY=x(J.y1-g/2);var G=m.select(this),Z=v.ensureSingle(G,"path","surface",function(H){H.style("pointer-events","all")});k?Z.transition().attrTween("d",function(H){var ee=C(H,!0,O,[p,g]);return function(U){return f(ee(U))}}):Z.attr("d",f),G.call(t,i,d,a,{styleOne:n,eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:d._transitioning}),Z.call(n,J,E,{hovered:!1}),J._text=(o.getPtLabel(J)||"").split("<br>").join(" ")||"";var re=v.ensureSingle(G,"g","slicetext"),j=v.ensureSingle(re,"text","",function(H){H.attr("data-notex",1)}),B=v.ensureUniformFontSize(d,o.determineTextFont(E,J,P.font,{onPathbar:!0}));j.text(J._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(b.font,B).call(h.convertToTspans,d),J.textBB=b.bBox(j.node()),J.transform=T(J,{fontSize:B.size,onPathbar:!0}),J.transform.fontSize=B.size,k?j.transition().attrTween("transform",function(H){var ee=A(H,!0,O,[p,g]);return function(U){return _(ee(U))}}):j.attr("transform",_(J))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../components/drawing"),h=y("../../lib/svg_text_utils"),e=y("./partition"),n=y("./style").styleOne,r=y("./constants"),o=y("../sunburst/helpers"),t=y("../sunburst/fx"),d=y("../sunburst/plot").formatSliceLabel;Q.exports=function(a,i,s,c,l){var p=l.width,g=l.height,u=l.viewX,x=l.viewY,f=l.pathSlice,T=l.toMoveInsideSlice,_=l.strTransform,k=l.hasTransition,w=l.handleSlicesExit,C=l.makeUpdateSliceInterpolator,A=l.makeUpdateTextInterpolator,O=l.prevEntry,P=a._fullLayout,S=i[0].trace,E=-1!==S.textposition.indexOf("left"),D=-1!==S.textposition.indexOf("right"),z=-1!==S.textposition.indexOf("bottom"),N=!z&&!S.marker.pad.t||z&&!S.marker.pad.b,V=e(s,[p,g],{packing:S.tiling.packing,squarifyratio:S.tiling.squarifyratio,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,pad:{inner:S.tiling.pad,top:S.marker.pad.t,left:S.marker.pad.l,right:S.marker.pad.r,bottom:S.marker.pad.b}}).descendants(),X=1/0,J=-1/0;V.forEach(function(B){var H=B.depth;H>=S._maxDepth?(B.x0=B.x1=(B.x0+B.x1)/2,B.y0=B.y1=(B.y0+B.y1)/2):(X=Math.min(X,H),J=Math.max(J,H))}),c=c.data(V,o.getPtId),S._maxVisibleLayers=isFinite(J)?J-X+1:0,c.enter().append("g").classed("slice",!0),w(c,!1,{},[p,g],f),c.order();var G=null;if(k&&O){var Z=o.getPtId(O);c.each(function(B){null===G&&o.getPtId(B)===Z&&(G={x0:B.x0,x1:B.x1,y0:B.y0,y1:B.y1})})}var re=function(){return G||{x0:0,x1:p,y0:0,y1:g}},j=c;return k&&(j=j.transition().each("end",function(){var B=m.select(this);o.setSliceCursor(B,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(B){var H=o.isHeader(B,S);B._x0=u(B.x0),B._x1=u(B.x1),B._y0=x(B.y0),B._y1=x(B.y1),B._hoverX=u(B.x1-S.marker.pad.r),B._hoverY=x(z?B.y1-S.marker.pad.b/2:B.y0+S.marker.pad.t/2);var ee=m.select(this),U=v.ensureSingle(ee,"path","surface",function(ne){ne.style("pointer-events","all")});k?U.transition().attrTween("d",function(ne){var se=C(ne,!1,re(),[p,g]);return function(ie){return f(se(ie))}}):U.attr("d",f),ee.call(t,s,a,i,{styleOne:n,eventDataKeys:r.eventDataKeys,transitionTime:r.CLICK_TRANSITION_TIME,transitionEasing:r.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,a,{isTransitioning:a._transitioning}),U.call(n,B,S,{hovered:!1}),B._text=B.x0===B.x1||B.y0===B.y1?"":H?N?"":o.getPtLabel(B)||"":d(B,s,S,i,P)||"";var $=v.ensureSingle(ee,"g","slicetext"),q=v.ensureSingle($,"text","",function(ne){ne.attr("data-notex",1)}),te=v.ensureUniformFontSize(a,o.determineTextFont(S,B,P.font));q.text(B._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":E||H?"start":"middle").call(b.font,te).call(h.convertToTspans,a),B.textBB=b.bBox(q.node()),B.transform=T(B,{fontSize:te.size,isHeader:H}),B.transform.fontSize=te.size,k?q.transition().attrTween("transform",function(ne){var se=A(ne,!1,re(),[p,g]);return function(ie){return _(se(ie))}}):q.attr("transform",_(B))}),G}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(y,Q,K){"use strict";Q.exports=function m(v,b,h){var e;h.swapXY&&(e=v.x0,v.x0=v.y0,v.y0=e,e=v.x1,v.x1=v.y1,v.y1=e),h.flipX&&(e=v.x0,v.x0=b[0]-v.x1,v.x1=b[0]-e),h.flipY&&(e=v.y0,v.y0=b[1]-v.y1,v.y1=b[1]-e);var n=v.children;if(n)for(var r=0;r<n.length;r++)m(n[r],b,h)}},{}],1093:[function(y,Q,K){"use strict";Q.exports={moduleType:"trace",name:"treemap",basePlotModule:y("./base_plot"),categories:[],animatable:!0,attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),style:y("./style").style,colorbar:y("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(y,Q,K){"use strict";Q.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h){function e(n,r){return m.coerce(b,h,v,n,r)}e("treemapcolorway",h.colorway),e("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(y,Q,K){"use strict";var m=y("d3-hierarchy"),v=y("./flip_tree");Q.exports=function(b,h,e){var n,r=e.flipX,o=e.flipY,t="dice-slice"===e.packing,d=e.pad[o?"bottom":"top"],a=e.pad[r?"right":"left"],i=e.pad[r?"left":"right"],s=e.pad[o?"top":"bottom"];t&&(n=a,a=d,d=n,n=i,i=s,s=n);var c=m.treemap().tile(function(l,p){switch(l){case"squarify":return m.treemapSquarify.ratio(p);case"binary":return m.treemapBinary;case"dice":return m.treemapDice;case"slice":return m.treemapSlice;default:return m.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(a).paddingRight(i).paddingTop(d).paddingBottom(s).size(t?[h[1],h[0]]:h)(b);return(t||r||o)&&v(c,h,{swapXY:t,flipX:r,flipY:o}),c}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(y,Q,K){"use strict";var m=y("./draw"),v=y("./draw_descendants");Q.exports=function(b,h,e,n){return m(b,h,e,n,{type:"treemap",drawDescendants:v})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("d3-interpolate").interpolate,b=y("../sunburst/helpers"),h=y("../../lib"),e=y("../bar/constants").TEXTPAD,n=y("../bar/plot").toMoveInsideBar,r=y("../bar/uniform_text").recordMinTextSize,o=y("./constants"),t=y("./draw_ancestors");function d(a){return b.isHierarchyRoot(a)?"":b.getPtId(a)}Q.exports=function(a,i,s,c,l){var p=a._fullLayout,g=i[0],u=g.trace,x="icicle"===u.type,f=g.hierarchy,T=b.findEntryWithLevel(f,u.level),_=m.select(s),k=_.selectAll("g.pathbar"),w=_.selectAll("g.slice");if(!T)return k.remove(),void w.remove();var C=b.isHierarchyRoot(T),A=!p.uniformtext.mode&&b.hasTransition(c),O=b.getMaxDepth(u),P=p._size,S=u.domain,E=P.w*(S.x[1]-S.x[0]),D=P.h*(S.y[1]-S.y[0]),z=E,N=u.pathbar.thickness,V=u.marker.line.width+o.gapWithPathbar,X=u.pathbar.visible?u.pathbar.side.indexOf("bottom")>-1?D+V:-(N+V):0,J={x0:z,x1:z,y0:X,y1:X+N},G=function(Ie,Fe,Ne){var De=u.tiling.pad,$e=function(je){return je-De<=Fe.x0},Re=function(je){return je+De>=Fe.x1},ze=function(je){return je-De<=Fe.y0},Ue=function(je){return je+De>=Fe.y1};return Ie.x0===Fe.x0&&Ie.x1===Fe.x1&&Ie.y0===Fe.y0&&Ie.y1===Fe.y1?{x0:Ie.x0,x1:Ie.x1,y0:Ie.y0,y1:Ie.y1}:{x0:$e(Ie.x0-De)?0:Re(Ie.x0-De)?Ne[0]:Ie.x0,x1:$e(Ie.x1+De)?0:Re(Ie.x1+De)?Ne[0]:Ie.x1,y0:ze(Ie.y0-De)?0:Ue(Ie.y0-De)?Ne[1]:Ie.y0,y1:ze(Ie.y1+De)?0:Ue(Ie.y1+De)?Ne[1]:Ie.y1}},Z=null,re={},j={},B=null,H=function(Ie,Fe){return Fe?re[d(Ie)]:j[d(Ie)]};g.hasMultipleRoots&&C&&O++,u._maxDepth=O,u._backgroundColor=p.paper_bgcolor,u._entryDepth=T.data.depth,u._atRootLevel=C;var U=-E/2+P.l+P.w*(S.x[1]+S.x[0])/2,$=-D/2+P.t+P.h*(1-(S.y[1]+S.y[0])/2),q=function(Ie){return U+Ie},te=function(Ie){return $+Ie},ne=te(0),se=q(0),ie=function(Ie){return se+Ie},ue=function(Ie){return ne+Ie};function le(Ie,Fe){return Ie+","+Fe}var de=ie(0),be=function(Ie){Ie.x=Math.max(de,Ie.x)},_e=u.pathbar.edgeshape,xe=function(Ie,Fe){var Ne=Ie.x0,De=Ie.x1,$e=Ie.y0,Re=Ie.y1,ze=Ie.textBB,Ue=function(wt){return-1!==u.textposition.indexOf(wt)},je=Ue("bottom"),rt=Ue("top")||Fe.isHeader&&!je?"start":je?"end":"middle",ut=Ue("right"),gt=Ue("left")||Fe.onPathbar?-1:ut?1:0,At=u[x?"tiling":"marker"].pad;if(Fe.isHeader){if((Ne+=(x?At:At.l)-e)>=(De-=(x?At:At.r)-e)){var _t=(Ne+De)/2;Ne=_t,De=_t}var it;je?$e<(it=Re-(x?At:At.b))&&it<Re&&($e=it):$e<(it=$e+(x?At:At.t))&&it<Re&&(Re=it)}var et=n(Ne,De,$e,Re,ze,{isHorizontal:!1,constrained:!0,angle:0,anchor:rt,leftToRight:gt});return et.fontSize=Fe.fontSize,et.targetX=q(et.targetX),et.targetY=te(et.targetY),isNaN(et.targetX)||isNaN(et.targetY)?{}:(Ne!==De&&$e!==Re&&r(u.type,et,p),{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY})},Ee=function(Ie,Fe){for(var Ne,De=0,$e=Ie;!Ne&&De<O;)De++,($e=$e.parent)?Ne=H($e,Fe):De=O;return Ne||{}},he=function(Ie,Fe,Ne,De,$e){var Re,ze=H(Ie,Fe);if(ze)Re=ze;else if(Fe)Re=J;else if(Z)if(Ie.parent){var Ue=B||Ne;Ue&&!Fe?Re=G(Ie,Ue,De):h.extendFlat(Re={},Ee(Ie,Fe))}else Re=h.extendFlat({},Ie),x&&("h"===$e.orientation?$e.flipX?Re.x0=Ie.x1:Re.x1=0:$e.flipY?Re.y0=Ie.y1:Re.y1=0);else Re={};return v(Re,{x0:Ie.x0,x1:Ie.x1,y0:Ie.y0,y1:Ie.y1})},me=function(Ie,Fe,Ne,De){var $e=H(Ie,Fe),Re={},ze=function(Ie,Fe,Ne,De){return Fe?re[d(f)]||J:Ie.data.depth-T.data.depth<O?G(Ie,j[u.level]||Ne,De):{}}(Ie,Fe,Ne,De);h.extendFlat(Re,{transform:xe({x0:ze.x0,x1:ze.x1,y0:ze.y0,y1:ze.y1,textBB:Ie.textBB,_text:Ie._text},{isHeader:b.isHeader(Ie,u)})}),$e?Re=$e:Ie.parent&&h.extendFlat(Re,Ee(Ie,Fe));var Ue=Ie.transform;return Ie.x0!==Ie.x1&&Ie.y0!==Ie.y1&&r(u.type,Ue,p),v(Re,{transform:{scale:Ue.scale,rotate:Ue.rotate,textX:Ue.textX,textY:Ue.textY,anchorX:Ue.anchorX,anchorY:Ue.anchorY,targetX:Ue.targetX,targetY:Ue.targetY}})},Se=function(Ie,Fe,Ne,De,$e){var Re=De[0],ze=De[1];A?Ie.exit().transition().each(function(){var Ue=m.select(this);Ue.select("path.surface").transition().attrTween("d",function(je){var rt=function(ut,gt,At,_t){var it,et=H(ut,gt);if(gt)it=J;else{var wt=H(T,gt);it=wt?G(ut,wt,_t):{}}return v(et,it)}(je,Fe,0,[Re,ze]);return function(ut){return $e(rt(ut))}}),Ue.select("g.slicetext").attr("opacity",0)}).remove():Ie.exit().remove()},Me=function(Ie){var Fe=Ie.transform;return Ie.x0!==Ie.x1&&Ie.y0!==Ie.y1&&r(u.type,Fe,p),h.getTextTransform({textX:Fe.textX,textY:Fe.textY,anchorX:Fe.anchorX,anchorY:Fe.anchorY,targetX:Fe.targetX,targetY:Fe.targetY,scale:Fe.scale,rotate:Fe.rotate})};A&&(k.each(function(Ie){re[d(Ie)]={x0:Ie.x0,x1:Ie.x1,y0:Ie.y0,y1:Ie.y1},Ie.transform&&(re[d(Ie)].transform={textX:Ie.transform.textX,textY:Ie.transform.textY,anchorX:Ie.transform.anchorX,anchorY:Ie.transform.anchorY,targetX:Ie.transform.targetX,targetY:Ie.transform.targetY,scale:Ie.transform.scale,rotate:Ie.transform.rotate})}),w.each(function(Ie){j[d(Ie)]={x0:Ie.x0,x1:Ie.x1,y0:Ie.y0,y1:Ie.y1},Ie.transform&&(j[d(Ie)].transform={textX:Ie.transform.textX,textY:Ie.transform.textY,anchorX:Ie.transform.anchorX,anchorY:Ie.transform.anchorY,targetX:Ie.transform.targetX,targetY:Ie.transform.targetY,scale:Ie.transform.scale,rotate:Ie.transform.rotate}),!Z&&b.isEntry(Ie)&&(Z=Ie)})),B=l(a,i,T,w,{width:E,height:D,viewX:q,viewY:te,pathSlice:function(Ie){var Fe=q(Ie.x0),Ne=q(Ie.x1),De=te(Ie.y0),$e=te(Ie.y1);return Ne-Fe&&$e-De?"M"+le(Fe,De+0)+"L"+le(Ne-0,De)+"L"+le(Ne,$e-0)+"L"+le(Fe+0,$e)+"Z":""},toMoveInsideSlice:xe,prevEntry:Z,makeUpdateSliceInterpolator:he,makeUpdateTextInterpolator:me,handleSlicesExit:Se,hasTransition:A,strTransform:Me}),u.pathbar.visible?t(a,i,T,k,{barDifY:X,width:z,height:N,viewX:ie,viewY:ue,pathSlice:function(Ie){var Fe=ie(Math.max(Math.min(Ie.x0,Ie.x0),0)),Ne=ie(Math.min(Math.max(Ie.x1,Ie.x1),z)),De=ue(Ie.y0),$e=ue(Ie.y1),Re=N/2,ze={},Ue={};ze.x=Fe,Ue.x=Ne,ze.y=Ue.y=(De+$e)/2;var je={x:Fe,y:De},rt={x:Ne,y:De},ut={x:Ne,y:$e},gt={x:Fe,y:$e};return">"===_e?(je.x-=Re,rt.x-=Re,ut.x-=Re,gt.x-=Re):"/"===_e?(ut.x-=Re,gt.x-=Re,ze.x-=Re/2,Ue.x-=Re/2):"\\"===_e?(je.x-=Re,rt.x-=Re,ze.x-=Re/2,Ue.x-=Re/2):"<"===_e&&(ze.x-=Re,Ue.x-=Re),be(je),be(gt),be(ze),be(rt),be(ut),be(Ue),"M"+le(je.x,je.y)+"L"+le(rt.x,rt.y)+"L"+le(Ue.x,Ue.y)+"L"+le(ut.x,ut.y)+"L"+le(gt.x,gt.y)+"L"+le(ze.x,ze.y)+"Z"},toMoveInsideSlice:xe,makeUpdateSliceInterpolator:he,makeUpdateTextInterpolator:me,handleSlicesExit:Se,hasTransition:A,strTransform:Me}):k.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/color"),b=y("../../lib"),h=y("../sunburst/helpers"),e=y("../bar/uniform_text").resizeText;function n(r,o,t,d){var a,i,s=(d||{}).hovered,c=o.data.data,l=c.i,p=c.color,g=h.isHierarchyRoot(o),u=1;if(s)a=t._hovered.marker.line.color,i=t._hovered.marker.line.width;else if(g&&p===t.root.color)u=100,a="rgba(0,0,0,0)",i=0;else if(a=b.castOption(t,l,"marker.line.color")||v.defaultLine,i=b.castOption(t,l,"marker.line.width")||0,!t._hasColorscale&&!o.onPathbar){var x=t.marker.depthfade;if(x){var f,T=v.combine(v.addOpacity(t._backgroundColor,.75),p);if(!0===x){var _=h.getMaxDepth(t);f=isFinite(_)?h.isLeaf(o)?0:t._maxVisibleLayers-(o.data.depth-t._entryDepth):o.data.height+1}else f=o.data.depth-t._entryDepth,t._atRootLevel||f++;if(f>0)for(var k=0;k<f;k++)p=v.combine(v.addOpacity(T,.5*k/f),p)}}r.style("stroke-width",i).call(v.fill,p).call(v.stroke,a).style("opacity",u)}Q.exports={style:function(r){var o=r._fullLayout._treemaplayer.selectAll(".trace");e(r,o,"treemap"),o.each(function(t){var d=m.select(this),a=t[0].trace;d.style("opacity",a.opacity),d.selectAll("path.surface").each(function(i){m.select(this).call(n,i,a,{hovered:!1})})})},styleOne:n}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(y,Q,K){"use strict";var m=y("../box/attributes"),v=y("../../lib/extend").extendFlat,b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat;Q.exports={y:m.y,x:m.x,x0:m.x0,y0:m.y0,xhoverformat:b("x"),yhoverformat:b("y"),name:v({},m.name,{}),orientation:v({},m.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,points:v({},m.boxpoints,{}),jitter:v({},m.jitter,{}),pointpos:v({},m.pointpos,{}),width:v({},m.width,{}),marker:m.marker,text:m.text,hovertext:m.hovertext,hovertemplate:m.hovertemplate,quartilemethod:m.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("../box/calc"),h=y("./helpers"),e=y("../../constants/numerical").BADNUM;function n(o,t,d){var a=t.max-t.min;if(!a)return o.bandwidth?o.bandwidth:0;if(o.bandwidth)return Math.max(o.bandwidth,a/1e4);var c,i=d.length,s=m.stdev(d,i-1,t.mean);return Math.max((c=i,1.059*Math.min(s,(t.q3-t.q1)/1.349)*Math.pow(c,-.2)),a/100)}function r(o,t,d,a){var i,s=o.spanmode,c=o.span||[],p=[t.min-2*a,t.max+2*a];function g(x){var f=c[x],T="multicategory"===d.type?d.r2c(f):d.d2c(f,0,o[t.valLetter+"calendar"]);return T===e?p[x]:T}var u={type:"linear",range:i="soft"===s?p:"hard"===s?[t.min,t.max]:[g(0),g(1)]};return v.setConvert(u),u.cleanRange(),i}Q.exports=function(o,t){var d=b(o,t);if(d[0].t.empty)return d;for(var a=o._fullLayout,i=v.getFromId(o,t["h"===t.orientation?"xaxis":"yaxis"]),s=1/0,c=-1/0,l=0,p=0,g=0;g<d.length;g++){var u=d[g],x=u.pts.map(h.extractVal),f=u.bandwidth=n(t,u,x),T=u.span=r(t,u,i,f);if(u.min===u.max&&0===f)T=u.span=[u.min,u.max],u.density=[{v:1,t:T[0]}],u.bandwidth=f,l=Math.max(l,1);else{var _=T[1]-T[0],k=Math.ceil(_/(f/3)),w=_/k;if(!isFinite(w)||!isFinite(k))return m.error("Something went wrong with computing the violin span"),d[0].t.empty=!0,d;var C=h.makeKDE(u,t,x);u.density=new Array(k);for(var A=0,O=T[0];O<T[1]+w/2;A++,O+=w){var P=C(O);u.density[A]={v:P,t:O},l=Math.max(l,P)}}p=Math.max(p,x.length),s=Math.min(s,T[0]),c=Math.max(c,T[1])}var S=v.findExtremes(i,[s,c],{padded:!0});if(t._extremes[i._id]=S,t.width)d[0].t.maxKDE=l;else{var E=a._violinScaleGroupStats,D=t.scalegroup,z=E[D];z?(z.maxKDE=Math.max(z.maxKDE,l),z.maxCount=Math.max(z.maxCount,p)):E[D]={maxKDE:l,maxCount:p}}return d[0].t.labels.kde=m._(o,"kde:"),d}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(y,Q,K){"use strict";var m=y("../box/cross_trace_calc").setPositionOffset,v=["v","h"];Q.exports=function(b,h){for(var e=b.calcdata,n=h.xaxis,r=h.yaxis,o=0;o<v.length;o++){for(var t=v[o],d="h"===t?r:n,a=[],i=0;i<e.length;i++){var s=e[i],l=s[0].trace;!0!==l.visible||"violin"!==l.type||s[0].t.empty||l.orientation!==t||l.xaxis!==n._id||l.yaxis!==r._id||a.push(i)}m("violin",b,a,d)}}},{"../box/cross_trace_calc":684}],1103:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../components/color"),b=y("../box/defaults"),h=y("./attributes");Q.exports=function(e,n,r,o){function t(_,k){return m.coerce(e,n,h,_,k)}function d(_,k){return m.coerce2(e,n,h,_,k)}if(b.handleSampleDefaults(e,n,t,o),!1!==n.visible){t("bandwidth"),t("side"),t("width")||(t("scalegroup",n.name),t("scalemode"));var a,i=t("span");Array.isArray(i)&&(a="manual"),t("spanmode",a);var s=t("line.color",(e.marker||{}).color||r),c=t("line.width"),l=t("fillcolor",v.addOpacity(n.line.color,.5));b.handlePointsDefaults(e,n,t,{prefix:""});var p=d("box.width"),g=d("box.fillcolor",l),u=d("box.line.color",s),x=d("box.line.width",c);t("box.visible",Boolean(p||g||u||x))||(n.box={visible:!1});var f=d("meanline.color",s),T=d("meanline.width",c);t("meanline.visible",Boolean(f||T))||(n.meanline={visible:!1}),t("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(y,Q,K){"use strict";var m=y("../../lib"),v=function(b){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*b*b)};K.makeKDE=function(b,h,e){var n=e.length,r=v,o=b.bandwidth,t=1/(n*o);return function(d){for(var a=0,i=0;i<n;i++)a+=r((d-e[i])/o);return t*a}},K.getPositionOnKdePath=function(b,h,e){var n,r;"h"===h.orientation?(n="y",r="x"):(n="x",r="y");var o=m.findPointOnPath(b.path,e,r,{pathLength:b.pathLength}),t=b.posCenterPx,d=o[n];return[d,"both"===h.side?2*t-d:t]},K.getKdeValue=function(b,h,e){var n=b.pts.map(K.extractVal);return K.makeKDE(b,h,n)(e)/b.posDensityScale},K.extractVal=function(b){return b.v}},{"../../lib":515}],1105:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../../plots/cartesian/axes"),b=y("../box/hover"),h=y("./helpers");Q.exports=function(e,n,r,o,t){t||(t={});var d,a,i=t.hoverLayer,s=e.cd,c=s[0].trace,l=c.hoveron,p=-1!==l.indexOf("violins"),g=-1!==l.indexOf("kde"),u=[];if(p||g){var x=b.hoverOnBoxes(e,n,r,o);if(g&&x.length>0){var f,T,_,k,w,C=e.xa,A=e.ya;"h"===c.orientation?(w=n,f="y",_=A,T="x",k=C):(w=r,f="x",_=C,T="y",k=A);var O=s[e.index];if(w>=O.span[0]&&w<=O.span[1]){var P=m.extendFlat({},e),S=k.c2p(w,!0),E=h.getKdeValue(O,c,w),D=h.getPositionOnKdePath(O,c,S),z=_._offset,N=_._length;P[f+"0"]=D[0],P[f+"1"]=D[1],P[T+"0"]=P[T+"1"]=S,P[T+"Label"]=T+": "+v.hoverLabelText(k,w,c[T+"hoverformat"])+", "+s[0].t.labels.kde+" "+E.toFixed(3);for(var V=0,X=0;X<x.length;X++)if("med"===x[X].attr){V=X;break}P.spikeDistance=x[V].spikeDistance;var J=f+"Spike";P[J]=x[V][J],x[V].spikeDistance=void 0,x[V][J]=void 0,P.hovertemplate=!1,u.push(P),(a={stroke:e.color})[f+"1"]=m.constrain(z+D[0],z,z+N),a[f+"2"]=m.constrain(z+D[1],z,z+N),a[T+"1"]=a[T+"2"]=k._offset+S}}p&&(u=u.concat(x))}-1!==l.indexOf("points")&&(d=b.hoverOnPoints(e,n,r));var G=i.selectAll(".violinline-"+c.uid).data(a?[0]:[]);return G.enter().append("line").classed("violinline-"+c.uid,!0).attr("stroke-width",1.5),G.exit().remove(),G.attr(a),"closest"===o?d?[d]:u:(d&&u.push(d),u)}},{"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc"),plot:y("./plot"),style:y("./style"),styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../box/select"),moduleType:"trace",name:"violin",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(y,Q,K){"use strict";var m=y("../box/layout_attributes"),v=y("../../lib").extendFlat;Q.exports={violinmode:v({},m.boxmode,{}),violingap:v({},m.boxgap,{}),violingroupgap:v({},m.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes"),b=y("../box/layout_defaults");Q.exports=function(h,e,n){b._supply(h,e,n,function(r,o){return m.coerce(h,e,v,r,o)},"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../components/drawing"),h=y("../box/plot"),e=y("../scatter/line_points"),n=y("./helpers");Q.exports=function(r,o,t,d){var a=r._fullLayout,i=o.xaxis,s=o.yaxis;function c(l){var p=e(l,{xaxis:i,yaxis:s,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return b.smoothopen(p[0],1)}v.makeTraceGroups(d,t,"trace violins").each(function(l){var p=m.select(this),g=l[0],u=g.t,x=g.trace;if(!0!==x.visible||u.empty)p.remove();else{var f=u.bPos,T=u.bdPos,_=o[u.valLetter+"axis"],k=o[u.posLetter+"axis"],w="both"===x.side,C=w||"positive"===x.side,A=w||"negative"===x.side,O=p.selectAll("path.violin").data(v.identity);O.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),O.exit().remove(),O.each(function(X){var J,G,Z,re,j,B,H,ee,U=m.select(this),$=X.density,q=$.length,te=k.c2l(X.pos+f,!0),ne=k.l2p(te);if(x.width)J=u.maxKDE/T;else{var se=a._violinScaleGroupStats[x.scalegroup];J="count"===x.scalemode?se.maxKDE/T*(se.maxCount/X.pts.length):se.maxKDE/T}if(C){for(H=new Array(q),j=0;j<q;j++)(ee=H[j]={})[u.posLetter]=te+$[j].v/J,ee[u.valLetter]=_.c2l($[j].t,!0);G=c(H)}if(A){for(H=new Array(q),B=0,j=q-1;B<q;B++,j--)(ee=H[B]={})[u.posLetter]=te-$[j].v/J,ee[u.valLetter]=_.c2l($[j].t,!0);Z=c(H)}if(w)re=G+"L"+Z.substr(1)+"Z";else{var ie=[ne,_.c2p($[0].t)],ue=[ne,_.c2p($[q-1].t)];"h"===x.orientation&&(ie.reverse(),ue.reverse()),re=C?"M"+ie+"L"+G.substr(1)+"L"+ue:"M"+ue+"L"+Z.substr(1)+"L"+ie}U.attr("d",re),X.posCenterPx=ne,X.posDensityScale=J*T,X.path=U.node(),X.pathLength=X.path.getTotalLength()/(w?2:1)});var P,S,E,D=x.box,z=D.width,N=(D.line||{}).width;w?(P=T*z,S=0):C?(P=[0,T*z/2],S=N*{x:1,y:-1}[u.posLetter]):(P=[T*z/2,0],S=N*{x:-1,y:1}[u.posLetter]),h.plotBoxAndWhiskers(p,{pos:k,val:_},x,{bPos:f,bdPos:P,bPosPxOffset:S}),h.plotBoxMean(p,{pos:k,val:_},x,{bPos:f,bdPos:P,bPosPxOffset:S}),!x.box.visible&&x.meanline.visible&&(E=v.identity);var V=p.selectAll("path.meanline").data(E||[]);V.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),V.exit().remove(),V.each(function(X){var J=_.c2p(X.mean,!0),G=n.getPositionOnKdePath(X,x,J);m.select(this).attr("d","h"===x.orientation?"M"+J+","+G[0]+"V"+G[1]:"M"+G[0]+","+J+"H"+G[1])}),h.plotPoints(p,{x:i,y:s},x,u)}})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/color"),b=y("../scatter/style").stylePoints;Q.exports=function(h){var e=m.select(h).selectAll("g.trace.violins");e.style("opacity",function(n){return n[0].trace.opacity}),e.each(function(n){var r=n[0].trace,o=m.select(this),t=r.box||{},d=t.line||{},a=r.meanline||{},i=a.width;o.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(v.stroke,r.line.color).call(v.fill,r.fillcolor),o.selectAll("path.box").style("stroke-width",d.width+"px").call(v.stroke,d.color).call(v.fill,t.fillcolor);var s={"stroke-width":i+"px","stroke-dasharray":2*i+"px,"+i+"px"};o.selectAll("path.mean").style(s).call(v.stroke,a.color),o.selectAll("path.meanline").style(s).call(v.stroke,a.color),b(o,r,h)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(y,Q,K){"use strict";var m=y("../../components/colorscale/attributes"),v=y("../isosurface/attributes"),b=y("../surface/attributes"),h=y("../../plots/attributes"),e=y("../../lib/extend").extendFlat,n=y("../../plot_api/edit_types").overrideAll,r=Q.exports=n(e({x:v.x,y:v.y,z:v.z,value:v.value,isomin:v.isomin,isomax:v.isomax,surface:v.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:v.slices,caps:v.caps,text:v.text,hovertext:v.hovertext,xhoverformat:v.xhoverformat,yhoverformat:v.yhoverformat,zhoverformat:v.zhoverformat,valuehoverformat:v.valuehoverformat,hovertemplate:v.hovertemplate},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:v.colorbar,opacity:v.opacity,opacityscale:b.opacityscale,lightposition:v.lightposition,lighting:v.lighting,flatshading:v.flatshading,contour:v.contour,hoverinfo:e({},h.hoverinfo),showlegend:e({},h.showlegend,{dflt:!1})}),"calc","nested");r.x.editType=r.y.editType=r.z.editType=r.value.editType="calc+clearAxisTypes",r.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(y,Q,K){"use strict";var m=y("../../../stackgl_modules").gl_mesh3d,v=y("../../lib/gl_format_color").parseColorScale,b=y("../../lib/str2rgbarray"),h=y("../../components/colorscale").extractOpts,e=y("../../plots/gl3d/zip3"),n=y("../isosurface/convert").findNearestOnAxis,r=y("../isosurface/convert").generateIsoMeshes;function o(d,a,i){this.scene=d,this.uid=i,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var t=o.prototype;t.handlePick=function(d){if(d.object===this.mesh){var a=d.data.index,s=this.data._meshY[a],c=this.data._meshZ[a],l=this.data._Ys.length,p=this.data._Zs.length,g=n(this.data._meshX[a],this.data._Xs).id,u=n(s,this.data._Ys).id,x=n(c,this.data._Zs).id,f=d.index=x+p*u+p*l*g;d.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&void 0!==T[f]?d.textLabel=T[f]:T&&(d.textLabel=T),!0}},t.update=function(d){var a=this.scene,i=a.fullSceneLayout;function s(p,g,u,x){return g.map(function(f){return p.d2l(f,0,x)*u})}this.data=r(d);var c={positions:e(s(i.xaxis,d._meshX,a.dataScale[0],d.xcalendar),s(i.yaxis,d._meshY,a.dataScale[1],d.ycalendar),s(i.zaxis,d._meshZ,a.dataScale[2],d.zcalendar)),cells:e(d._meshI,d._meshJ,d._meshK),lightPosition:[d.lightposition.x,d.lightposition.y,d.lightposition.z],ambient:d.lighting.ambient,diffuse:d.lighting.diffuse,specular:d.lighting.specular,roughness:d.lighting.roughness,fresnel:d.lighting.fresnel,vertexNormalsEpsilon:d.lighting.vertexnormalsepsilon,faceNormalsEpsilon:d.lighting.facenormalsepsilon,opacity:d.opacity,opacityscale:d.opacityscale,contourEnable:d.contour.show,contourColor:b(d.contour.color).slice(0,3),contourWidth:d.contour.width,useFacetNormals:d.flatshading},l=h(d);c.vertexIntensity=d._meshIntensity,c.vertexIntensityBounds=[l.min,l.max],c.colormap=v(d),this.mesh.update(c)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(d,a){var s=m({gl:d.glplot.gl}),c=new o(d,s,a.uid);return s._trace=c,c.update(a),d.glplot.add(s),c}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./attributes"),b=y("../isosurface/defaults").supplyIsoDefaults,h=y("../surface/defaults").opacityscaleDefaults;Q.exports=function(e,n,r,o){function t(d,a){return m.coerce(e,n,v,d,a)}b(e,n,r,o,t),h(e,n,o,t)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:y("./convert"),moduleType:"trace",name:"volume",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(y,Q,K){"use strict";var m=y("../bar/attributes"),v=y("../scatter/attributes").line,b=y("../../plots/attributes"),h=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../plots/template_attributes").hovertemplateAttrs,n=y("../../plots/template_attributes").texttemplateAttrs,r=y("./constants"),o=y("../../lib/extend").extendFlat,t=y("../../components/color");function d(a){return{marker:{color:o({},m.marker.color,{arrayOk:!1,editType:"style"}),line:{color:o({},m.marker.line.color,{arrayOk:!1,editType:"style"}),width:o({},m.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}Q.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:h("x"),yhoverformat:h("y"),hovertext:m.hovertext,hovertemplate:e({},{keys:r.eventDataKeys}),hoverinfo:o({},b.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:n({editType:"plot"},{keys:r.eventDataKeys.concat(["label"])}),text:m.text,textposition:m.textposition,insidetextanchor:m.insidetextanchor,textangle:m.textangle,textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:m.orientation,offset:m.offset,width:m.width,increasing:d(),decreasing:d(),totals:d(),connector:{line:{color:o({},v.color,{dflt:t.defaultLine}),width:o({},v.width,{editType:"plot"}),dash:v.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes"),v=y("../../plots/cartesian/align_period"),b=y("../../lib").mergeArray,h=y("../scatter/calc_selection"),e=y("../../constants/numerical").BADNUM;function n(o){return"a"===o||"absolute"===o}function r(o){return"t"===o||"total"===o}Q.exports=function(o,t){var d,a,i,s,c,l,p=m.getFromId(o,t.xaxis||"x"),g=m.getFromId(o,t.yaxis||"y");"h"===t.orientation?(d=p.makeCalcdata(t,"x"),i=g.makeCalcdata(t,"y"),s=v(t,g,"y",i),c=!!t.yperiodalignment,l="y"):(d=g.makeCalcdata(t,"y"),i=p.makeCalcdata(t,"x"),s=v(t,p,"x",i),c=!!t.xperiodalignment,l="x"),a=s.vals;for(var u,x=Math.min(a.length,d.length),f=new Array(x),T=0,_=!1,k=0;k<x;k++){var w=d[k]||0,C=!1;(d[k]!==e||r(t.measure[k])||n(t.measure[k]))&&k+1<x&&(d[k+1]!==e||r(t.measure[k+1])||n(t.measure[k+1]))&&(C=!0);var A=f[k]={i:k,p:a[k],s:w,rawS:w,cNext:C};n(t.measure[k])?(T=A.s,A.isSum=!0,A.dir="totals",A.s=T):r(t.measure[k])?(A.isSum=!0,A.dir="totals",A.s=T):(A.isSum=!1,A.dir=A.rawS<0?"decreasing":"increasing",A.s=T+(u=A.s),T+=u),"totals"===A.dir&&(_=!0),c&&(f[k].orig_p=i[k],f[k][l+"End"]=s.ends[k],f[k][l+"Start"]=s.starts[k]),t.ids&&(A.id=String(t.ids[k])),A.v=(t.base||0)+T}return f.length&&(f[0].hasTotals=_),b(t.text,f,"tx"),b(t.hovertext,f,"htx"),h(f,t),f}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(y,Q,K){"use strict";Q.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(y,Q,K){"use strict";var m=y("../bar/cross_trace_calc").setGroupPositions;Q.exports=function(v,b){var h,e,n=v._fullLayout,r=v._fullData,o=v.calcdata,t=b.xaxis,d=b.yaxis,a=[],i=[],s=[];for(e=0;e<r.length;e++){var c=r[e];!0===c.visible&&c.xaxis===t._id&&c.yaxis===d._id&&"waterfall"===c.type&&(h=o[e],"h"===c.orientation?s.push(h):i.push(h),a.push(h))}var l={mode:n.waterfallmode,norm:n.waterfallnorm,gap:n.waterfallgap,groupgap:n.waterfallgroupgap};for(m(v,t,d,i,l),m(v,d,t,s,l),e=0;e<a.length;e++){h=a[e];for(var p=0;p<h.length;p++){var g=h[p];!1===g.isSum&&(g.s0+=0===p?0:h[p-1].s),p+1<h.length&&(h[p].nextP0=h[p+1].p0,h[p].nextS0=h[p+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("../bar/defaults").handleGroupingDefaults,b=y("../bar/defaults").handleText,h=y("../scatter/xy_defaults"),e=y("../scatter/period_defaults"),n=y("./attributes"),r=y("../../components/color"),o=y("../../constants/delta.js"),t=o.INCREASING.COLOR,d=o.DECREASING.COLOR;function a(i,s,c){i(s+".marker.color",c),i(s+".marker.line.color",r.defaultLine),i(s+".marker.line.width")}Q.exports={supplyDefaults:function(i,s,c,l){function p(u,x){return m.coerce(i,s,n,u,x)}if(h(i,s,l,p)){e(i,s,l,p),p("xhoverformat"),p("yhoverformat"),p("measure"),p("orientation",s.x&&!s.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var g=p("textposition");b(i,s,l,p,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==s.textposition&&(p("texttemplate"),s.texttemplate||p("textinfo")),a(p,"increasing",t),a(p,"decreasing",d),a(p,"totals","#4499FF"),p("connector.visible")&&(p("connector.mode"),p("connector.line.width")&&(p("connector.line.color"),p("connector.line.dash")))}else s.visible=!1},crossTraceDefaults:function(i,s){var c,l;function p(u){return m.coerce(l._input,l,n,u)}if("group"===s.waterfallmode)for(var g=0;g<i.length;g++)c=(l=i[g])._input,v(c,l,s,p)}}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(y,Q,K){"use strict";Q.exports=function(m,v){return m.x="xVal"in v?v.xVal:v.x,m.y="yVal"in v?v.yVal:v.y,"initial"in v&&(m.initial=v.initial),"delta"in v&&(m.delta=v.delta),"final"in v&&(m.final=v.final),v.xa&&(m.xaxis=v.xa),v.ya&&(m.yaxis=v.ya),m}},{}],1121:[function(y,Q,K){"use strict";var m=y("../../plots/cartesian/axes").hoverLabelText,v=y("../../components/color").opacity,b=y("../bar/hover").hoverOnBars,h=y("../../constants/delta.js"),e=h.INCREASING.SYMBOL,n=h.DECREASING.SYMBOL;Q.exports=function(r,o,t,d,a){var S,E,D,z,i=b(r,o,t,d,a);if(i){var s=i.cd,c=s[0].trace,l="h"===c.orientation,p=l?"x":"y",g=l?r.xa:r.ya,u=s[i.index],x=u.isSum?u.b+u.s:u.rawS;if(!u.isSum){i.initial=u.b+u.s-x,i.delta=x,i.final=i.initial+i.delta;var f=A(Math.abs(i.delta));i.deltaLabel=x<0?"("+f+")":f,i.finalLabel=A(i.final),i.initialLabel=A(i.initial)}var T=u.hi||c.hoverinfo,_=[];if(T&&"none"!==T&&"skip"!==T){var k="all"===T,w=T.split("+"),C=function(O){return k||-1!==w.indexOf(O)};u.isSum||(!C("final")||C(l?"x":"y")||_.push(i.finalLabel),C("delta")&&_.push(x<0?i.deltaLabel+" "+n:i.deltaLabel+" "+e),C("initial")&&_.push("Initial: "+i.initialLabel))}return _.length&&(i.extraText=_.join("<br>")),i.color=(D=(S=c[u.dir].marker).line.color,z=S.line.width,v(E=S.color)?E:v(D)&&z?D:void 0),[i]}function A(O){return m(g,O,c[p+"hoverformat"])}}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(y,Q,K){"use strict";Q.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc"),plot:y("./plot"),style:y("./style").style,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(y,Q,K){"use strict";Q.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(y,Q,K){"use strict";var m=y("../../lib"),v=y("./layout_attributes");Q.exports=function(b,h,e){var n=!1;function r(d,a){return m.coerce(b,h,v,d,a)}for(var o=0;o<e.length;o++){var t=e[o];if(t.visible&&"waterfall"===t.type){n=!0;break}}n&&(r("waterfallmode"),r("waterfallgap",.2),r("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../lib"),b=y("../../components/drawing"),h=y("../../constants/numerical").BADNUM,e=y("../bar/plot"),n=y("../bar/uniform_text").clearMinTextSize;Q.exports=function(r,o,t,d){var i,s,p,g,a=r._fullLayout;n("waterfall",a),e.plot(r,o,t,d,{mode:a.waterfallmode,norm:a.waterfallmode,gap:a.waterfallgap,groupgap:a.waterfallgroupgap}),i=r,p=(s=o).xaxis,g=s.yaxis,v.makeTraceGroups(d,t,"trace bars").each(function(u){var x=m.select(this),f=u[0].trace,T=v.ensureSingle(x,"g","lines");if(f.connector&&f.connector.visible){var _="h"===f.orientation,k=f.connector.mode,w=T.selectAll("g.line").data(v.identity);w.enter().append("g").classed("line",!0),w.exit().remove();var C=w.size();w.each(function(A,O){if(O===C-1||A.cNext){var P=(N=p,V=g,G=[],re=(X=_)?V:N,(J=[])[0]=(Z=X?N:V).c2p((z=A).s0,!0),G[0]=re.c2p(z.p0,!0),J[1]=Z.c2p(z.s1,!0),G[1]=re.c2p(z.p1,!0),J[2]=Z.c2p(z.nextS0,!0),G[2]=re.c2p(z.nextP0,!0),X?[J,G]:[G,J]),S=P[0],E=P[1],D="";S[0]!==h&&E[0]!==h&&S[1]!==h&&E[1]!==h&&("spanning"===k&&!A.isSum&&O>0&&(D+=_?"M"+S[0]+","+E[1]+"V"+E[0]:"M"+S[1]+","+E[0]+"H"+S[0]),"between"!==k&&(A.isSum||O<C-1)&&(D+=_?"M"+S[1]+","+E[0]+"V"+E[1]:"M"+S[0]+","+E[1]+"H"+S[1]),S[2]!==h&&E[2]!==h&&(D+=_?"M"+S[1]+","+E[1]+"V"+E[2]:"M"+S[1]+","+E[1]+"H"+S[2])),""===D&&(D="M0,0Z"),v.ensureSingle(m.select(this),"path").attr("d",D).call(b.setClipUrl,s.layerClipId,i)}var z,N,V,X,J,G,Z,re})}else T.remove()})}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(y,Q,K){"use strict";var m=y("@plotly/d3"),v=y("../../components/drawing"),b=y("../../components/color"),h=y("../../constants/interactions").DESELECTDIM,e=y("../bar/style"),n=y("../bar/uniform_text").resizeText,r=e.styleTextPoints;Q.exports={style:function(o,t,d){var a=d||m.select(o).selectAll("g.waterfalllayer").selectAll("g.trace");n(o,a,"waterfall"),a.style("opacity",function(i){return i[0].trace.opacity}),a.each(function(i){var s=m.select(this),c=i[0].trace;s.selectAll(".point > path").each(function(l){if(!l.isBlank){var p=c[l.dir].marker;m.select(this).call(b.fill,p.color).call(b.stroke,p.line.color).call(v.dashLine,p.line.dash,p.line.width).style("opacity",c.selectedpoints&&!l.selected?h:1)}}),r(s,c,o),s.selectAll(".lines").each(function(){var l=c.connector.line;v.lineGroupStyle(m.select(this).selectAll("path"),l.width,l.color,l.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(y,Q,K){"use strict";var m=y("../plots/cartesian/axes"),v=y("../lib"),b=y("../plot_api/plot_schema"),h=y("./helpers").pointsAccessorFunction,e=y("../constants/numerical").BADNUM;K.moduleType="transform",K.name="aggregate";var n=K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},r=n.aggregations;function o(i,s,c,l){if(l.enabled){for(var p=l.target,g=v.nestedProperty(s,p),u=g.get(),x=function(_,k){var C=k.d2c,A=k.c2d;switch(_.func){case"count":return t;case"first":return d;case"last":return a;case"sum":return function(O,P){for(var S=0,E=0;E<P.length;E++){var D=C(O[P[E]]);D!==e&&(S+=D)}return A(S)};case"avg":return function(O,P){for(var S=0,E=0,D=0;D<P.length;D++){var z=C(O[P[D]]);z!==e&&(S+=z,E++)}return E?A(S/E):e};case"min":return function(O,P){for(var S=1/0,E=0;E<P.length;E++){var D=C(O[P[E]]);D!==e&&(S=Math.min(S,D))}return S===1/0?e:A(S)};case"max":return function(O,P){for(var S=-1/0,E=0;E<P.length;E++){var D=C(O[P[E]]);D!==e&&(S=Math.max(S,D))}return S===-1/0?e:A(S)};case"range":return function(O,P){for(var S=1/0,E=-1/0,D=0;D<P.length;D++){var z=C(O[P[D]]);z!==e&&(S=Math.min(S,z),E=Math.max(E,z))}return E===-1/0||S===1/0?e:A(E-S)};case"change":return function(O,P){var S=C(O[P[0]]),E=C(O[P[P.length-1]]);return S===e||E===e?e:A(E-S)};case"median":return function(O,P){for(var S=[],E=0;E<P.length;E++){var D=C(O[P[E]]);D!==e&&S.push(D)}if(!S.length)return e;S.sort(v.sorterAsc);var z=(S.length-1)/2;return A((S[Math.floor(z)]+S[Math.ceil(z)])/2)};case"mode":return function(O,P){for(var S={},E=0,D=e,z=0;z<P.length;z++){var N=C(O[P[z]]);if(N!==e){var V=S[N]=(S[N]||0)+1;V>E&&(E=V,D=N)}}return E?A(D):e};case"rms":return function(O,P){for(var S=0,E=0,D=0;D<P.length;D++){var z=C(O[P[D]]);z!==e&&(S+=z*z,E++)}return E?A(Math.sqrt(S/E)):e};case"stddev":return function(O,P){var S,E=0,D=0,z=1,N=e;for(S=0;S<P.length&&N===e;S++)N=C(O[P[S]]);if(N===e)return e;for(;S<P.length;S++){var V=C(O[P[S]]);if(V!==e){var X=V-N;E+=X,D+=X*X,z++}}var J="sample"===_.funcmode?z-1:z;return J?Math.sqrt((D-E*E/z)/J):0}}}(l,m.getDataConversions(i,s,p,u)),f=new Array(c.length),T=0;T<c.length;T++)f[T]=x(u,c[T]);g.set(f),"count"===l.func&&v.pushUnique(s._arrayAttrs,p)}}function t(i,s){return s.length}function d(i,s){return i[s[0]]}function a(i,s){return i[s[s.length-1]]}K.supplyDefaults=function(i,s){var c,l={};function p(A,O){return v.coerce(i,l,n,A,O)}if(!p("enabled"))return l;var g=b.findArrayAttributes(s),u={};for(c=0;c<g.length;c++)u[g[c]]=1;var x=p("groups");if(!Array.isArray(x)){if(!u[x])return l.enabled=!1,l;u[x]=0}var f,T=i.aggregations||[],_=l.aggregations=new Array(T.length);function k(A,O){return v.coerce(T[c],f,r,A,O)}for(c=0;c<T.length;c++){f={_index:c};var w=k("target"),C=k("func");k("enabled")&&w&&(u[w]||"count"===C&&void 0===u[w])?("stddev"===C&&k("funcmode"),u[w]=0,_[c]=f):_[c]={enabled:!1,_index:c}}for(c=0;c<g.length;c++)u[g[c]]&&_.push({target:g[c],func:r.func.dflt,enabled:!0,_index:-1});return l},K.calcTransform=function(i,s,c){if(c.enabled){var l=c.groups,p=v.getTargetArray(s,{target:l});if(p){var g,u,x,T={},_={},k=[],w=h(s.transforms,c),C=p.length;for(s._length&&(C=Math.min(C,s._length)),g=0;g<C;g++)void 0===(x=T[u=p[g]])?(T[u]=k.length,k.push([g]),_[T[u]]=w(g)):(k[x].push(g),_[T[u]]=(_[T[u]]||[]).concat(w(g)));c._indexToPoints=_;var A=c.aggregations;for(g=0;g<A.length;g++)o(i,s,k,A[g]);"string"==typeof l&&o(i,s,k,{target:l,func:"first",enabled:!0}),s._length=k.length}}}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("../registry"),b=y("../plots/cartesian/axes"),h=y("./helpers").pointsAccessorFunction,e=y("../constants/filter_ops"),n=e.COMPARISON_OPS,r=e.INTERVAL_OPS,o=e.SET_OPS;K.moduleType="transform",K.name="filter",K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(n).concat(r).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},K.supplyDefaults=function(t){var d={};function a(c,l){return m.coerce(t,d,K.attributes,c,l)}if(a("enabled")){var i=a("target");if(m.isArrayOrTypedArray(i)&&0===i.length)return d.enabled=!1,d;a("preservegaps"),a("operation"),a("value");var s=v.getComponentMethod("calendars","handleDefaults");s(t,d,"valuecalendar",null),s(t,d,"targetcalendar",null)}return d},K.calcTransform=function(t,d,a){if(a.enabled){var i=m.getTargetArray(d,a);if(i){var s=a.target,c=i.length;d._length&&(c=Math.min(c,d._length));var l=a.targetcalendar,p=d._arrayAttrs,g=a.preservegaps;if("string"==typeof s){var u=m.nestedProperty(d,s+"calendar").get();u&&(l=u)}var x,f,T=function(P,S,E){var D=P.operation,z=P.value,N=Array.isArray(z);function V(Z){return-1!==Z.indexOf(D)}var X,J=function(Z){return S(Z,0,P.valuecalendar)},G=function(Z){return S(Z,0,E)};switch(V(n)?X=J(N?z[0]:z):V(r)?X=N?[J(z[0]),J(z[1])]:[J(z),J(z)]:V(o)&&(X=N?z.map(J):[J(z)]),D){case"=":return function(Z){return G(Z)===X};case"!=":return function(Z){return G(Z)!==X};case"<":return function(Z){return G(Z)<X};case"<=":return function(Z){return G(Z)<=X};case">":return function(Z){return G(Z)>X};case">=":return function(Z){return G(Z)>=X};case"[]":return function(Z){var re=G(Z);return re>=X[0]&&re<=X[1]};case"()":return function(Z){var re=G(Z);return re>X[0]&&re<X[1]};case"[)":return function(Z){var re=G(Z);return re>=X[0]&&re<X[1]};case"(]":return function(Z){var re=G(Z);return re>X[0]&&re<=X[1]};case"][":return function(Z){var re=G(Z);return re<=X[0]||re>=X[1]};case")(":return function(Z){var re=G(Z);return re<X[0]||re>X[1]};case"](":return function(Z){var re=G(Z);return re<=X[0]||re>X[1]};case")[":return function(Z){var re=G(Z);return re<X[0]||re>=X[1]};case"{}":return function(Z){return-1!==X.indexOf(G(Z))};case"}{":return function(Z){return-1===X.indexOf(G(Z))}}}(a,b.getDataToCoordFunc(t,d,s,i),l),_={},k={},w=0;g?(x=function(P){_[P.astr]=m.extendDeep([],P.get()),P.set(new Array(c))},f=function(P,S){var E=_[P.astr][S];P.get()[S]=E}):(x=function(P){_[P.astr]=m.extendDeep([],P.get()),P.set([])},f=function(P,S){var E=_[P.astr][S];P.get().push(E)}),O(x);for(var C=h(d.transforms,a),A=0;A<c;A++)T(i[A])?(O(f,A),k[w++]=C(A)):g&&w++;a._indexToPoints=k,d._length=w}}function O(P,S){for(var E=0;E<p.length;E++)P(m.nestedProperty(d,p[E]),S)}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("../plot_api/plot_schema"),b=y("../plots/plots"),h=y("./helpers").pointsAccessorFunction;function e(n,r){var o,t,d,a,i,s,c,l,p,g,u=r.transform,x=r.transformIndex,f=n.transforms[x].groups,T=h(n.transforms,u);if(!m.isArrayOrTypedArray(f)||0===f.length)return[n];var _=m.filterUnique(f),k=new Array(_.length),w=f.length,C=v.findArrayAttributes(n),A=u.styles||[],O={};for(o=0;o<A.length;o++)O[A[o].target]=A[o].value;u.styles&&(g=m.keyedContainer(u,"styles","target","value.name"));var P={},S={};for(o=0;o<_.length;o++){P[s=_[o]]=o,S[s]=0,(c=k[o]=m.extendDeepNoArrays({},n))._group=s,c.transforms[x]._indexToPoints={};var E=null;for(g&&(E=g.get(s)),c.name=E||""===E?E:m.templateString(u.nameformat,{trace:n.name,group:s}),l=c.transforms,c.transforms=[],t=0;t<l.length;t++)c.transforms[t]=m.extendDeepNoArrays({},l[t]);for(t=0;t<C.length;t++)m.nestedProperty(c,C[t]).set([])}for(d=0;d<C.length;d++){for(a=C[d],t=0,p=[];t<_.length;t++)p[t]=m.nestedProperty(k[t],a).get();for(i=m.nestedProperty(n,a).get(),t=0;t<w;t++)p[P[f[t]]].push(i[t])}for(t=0;t<w;t++)(c=k[P[f[t]]]).transforms[x]._indexToPoints[S[f[t]]]=T(t),S[f[t]]++;for(o=0;o<_.length;o++)s=_[o],b.clearExpandedTraceDefaultColors(c=k[o]),c=m.extendDeepNoArrays(c,O[s]||{});return k}K.moduleType="transform",K.name="groupby",K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},K.supplyDefaults=function(n,r,o){var t,d={};function a(p,g){return m.coerce(n,d,K.attributes,p,g)}if(!a("enabled"))return d;a("groups"),a("nameformat",o._dataLength>1?"%{group} (%{trace})":"%{group}");var i=n.styles,s=d.styles=[];if(i)for(t=0;t<i.length;t++){var c=s[t]={};m.coerce(i[t],s[t],K.attributes.styles,"target");var l=m.coerce(i[t],s[t],K.attributes.styles,"value");m.isPlainObject(l)?c.value=m.extendDeep({},l):l&&delete c.value}return d},K.transform=function(n,r){var o,t,d,a=[];for(t=0;t<n.length;t++)for(o=e(n[t],r),d=0;d<o.length;d++)a.push(o[d]);return a}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(y,Q,K){"use strict";K.pointsAccessorFunction=function(m,v){for(var b,h,e=0;e<m.length&&(b=m[e])!==v;e++)b._indexToPoints&&!1!==b.enabled&&(h=b._indexToPoints);return h?function(n){return h[n]}:function(n){return[n]}}},{}],1131:[function(y,Q,K){"use strict";var m=y("../lib"),v=y("../plots/cartesian/axes"),b=y("./helpers").pointsAccessorFunction,h=y("../constants/numerical").BADNUM;K.moduleType="transform",K.name="sort",K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},K.supplyDefaults=function(e){var n={};function r(o,t){return m.coerce(e,n,K.attributes,o,t)}return r("enabled")&&(r("target"),r("order")),n},K.calcTransform=function(e,n,r){if(r.enabled){var o=m.getTargetArray(n,r);if(o){var t=r.target,d=o.length;n._length&&(d=Math.min(d,n._length));var a,i,s=n._arrayAttrs,c=function(f,T,_,k){var w,C=new Array(k),A=new Array(k);for(w=0;w<k;w++)C[w]={v:T[w],i:w};for(C.sort(function(O,P){switch(O.order){case"ascending":return function(S,E){var D=P(S.v),z=P(E.v);return D===h?1:z===h?-1:D-z};case"descending":return function(S,E){var D=P(S.v),z=P(E.v);return D===h?1:z===h?-1:z-D}}}(f,_)),w=0;w<k;w++)A[w]=C[w].i;return A}(r,o,v.getDataToCoordFunc(e,n,t,o),d),l=b(n.transforms,r),p={};for(a=0;a<s.length;a++){var g=m.nestedProperty(n,s[a]),u=g.get(),x=new Array(d);for(i=0;i<d;i++)x[i]=u[c[i]];g.set(x)}for(i=0;i<d;i++)p[i]=l(c[i]);r._indexToPoints=p,n._length=d}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(y,Q,K){"use strict";K.version="2.14.0"},{}],1133:[function(y,Q,K){(function(m){(function(){!function(v){"object"==typeof K&&void 0!==Q?Q.exports=v():(typeof window<"u"?window:void 0!==m?m:typeof self<"u"?self:this).stackgl=v()}(function(){return function v(b,h,e){function n(t,d){if(!h[t]){if(!b[t]){var a="function"==typeof y&&y;if(!d&&a)return a(t,!0);if(r)return r(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var s=h[t]={exports:{}};b[t][0].call(s.exports,function(c){return n(b[t][1][c]||c)},s,s.exports,v,b,h,e)}return h[t].exports}for(var r="function"==typeof y&&y,o=0;o<e.length;o++)n(e[o]);return n}({1:[function(v,b,h){"use strict";h.byteLength=function(s){var c=a(s),p=c[1];return 3*(c[0]+p)/4-p},h.toByteArray=function(s){var c,l,w,p=a(s),g=p[0],u=p[1],x=new r(3*(g+(w=u))/4-w),f=0,T=u>0?g-4:g;for(l=0;l<T;l+=4)c=n[s.charCodeAt(l)]<<18|n[s.charCodeAt(l+1)]<<12|n[s.charCodeAt(l+2)]<<6|n[s.charCodeAt(l+3)],x[f++]=c>>16&255,x[f++]=c>>8&255,x[f++]=255&c;return 2===u&&(c=n[s.charCodeAt(l)]<<2|n[s.charCodeAt(l+1)]>>4,x[f++]=255&c),1===u&&(c=n[s.charCodeAt(l)]<<10|n[s.charCodeAt(l+1)]<<4|n[s.charCodeAt(l+2)]>>2,x[f++]=c>>8&255,x[f++]=255&c),x},h.fromByteArray=function(s){for(var c,l=s.length,p=l%3,g=[],u=0,x=l-p;u<x;u+=16383)g.push(i(s,u,u+16383>x?x:u+16383));return 1===p?g.push(e[(c=s[l-1])>>2]+e[c<<4&63]+"=="):2===p&&g.push(e[(c=(s[l-2]<<8)+s[l-1])>>10]+e[c>>4&63]+e[c<<2&63]+"="),g.join("")};for(var e=[],n=[],r=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,d=o.length;t<d;++t)e[t]=o[t],n[o.charCodeAt(t)]=t;function a(s){var c=s.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=s.indexOf("=");return-1===l&&(l=c),[l,l===c?0:4-l%4]}function i(s,c,l){for(var g,u=[],x=c;x<l;x+=3)u.push(e[(g=(s[x]<<16&16711680)+(s[x+1]<<8&65280)+(255&s[x+2]))>>18&63]+e[g>>12&63]+e[g>>6&63]+e[63&g]);return u.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(v,b,h){},{}],3:[function(v,b,h){(function(e){(function(){"use strict";var n=v("base64-js"),r=v("ieee754");function o(U){if(U>2147483647)throw new RangeError('The value "'+U+'" is invalid for option "size"');var $=new Uint8Array(U);return $.__proto__=t.prototype,$}function t(U,$,q){if("number"==typeof U){if("string"==typeof $)throw new TypeError('The "string" argument must be of type string. Received type number');return i(U)}return d(U,$,q)}function d(U,$,q){if("string"==typeof U)return function(se,ie){if("string"==typeof ie&&""!==ie||(ie="utf8"),!t.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);var ue=0|l(se,ie),le=o(ue),de=le.write(se,ie);return de!==ue&&(le=le.slice(0,de)),le}(U,$);if(ArrayBuffer.isView(U))return s(U);if(null==U)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(H(U,ArrayBuffer)||U&&H(U.buffer,ArrayBuffer))return function(se,ie,ue){if(ie<0||se.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<ie+(ue||0))throw new RangeError('"length" is outside of buffer bounds');var le;return(le=void 0===ie&&void 0===ue?new Uint8Array(se):void 0===ue?new Uint8Array(se,ie):new Uint8Array(se,ie,ue)).__proto__=t.prototype,le}(U,$,q);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');var te=U.valueOf&&U.valueOf();if(null!=te&&te!==U)return t.from(te,$,q);var ne=function(se){if(t.isBuffer(se)){var ie=0|c(se.length),ue=o(ie);return 0===ue.length||se.copy(ue,0,0,ie),ue}return void 0!==se.length?"number"!=typeof se.length||ee(se.length)?o(0):s(se):"Buffer"===se.type&&Array.isArray(se.data)?s(se.data):void 0}(U);if(ne)return ne;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return t.from(U[Symbol.toPrimitive]("string"),$,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function a(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function i(U){return a(U),o(U<0?0:0|c(U))}function s(U){for(var $=U.length<0?0:0|c(U.length),q=o($),te=0;te<$;te+=1)q[te]=255&U[te];return q}function c(U){if(U>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|U}function l(U,$){if(t.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||H(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);var q=U.length,te=arguments.length>2&&!0===arguments[2];if(!te&&0===q)return 0;for(var ne=!1;;)switch($){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return re(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return j(U).length;default:if(ne)return te?-1:re(U).length;$=(""+$).toLowerCase(),ne=!0}}function p(U,$,q){var te=!1;if((void 0===$||$<0)&&($=0),$>this.length||((void 0===q||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=($>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return E(this,$,q);case"utf8":case"utf-8":return O(this,$,q);case"ascii":return P(this,$,q);case"latin1":case"binary":return S(this,$,q);case"base64":return A(this,$,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,$,q);default:if(te)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),te=!0}}function g(U,$,q){var te=U[$];U[$]=U[q],U[q]=te}function u(U,$,q,te,ne){if(0===U.length)return-1;if("string"==typeof q?(te=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),ee(q=+q)&&(q=ne?0:U.length-1),q<0&&(q=U.length+q),q>=U.length){if(ne)return-1;q=U.length-1}else if(q<0){if(!ne)return-1;q=0}if("string"==typeof $&&($=t.from($,te)),t.isBuffer($))return 0===$.length?-1:x(U,$,q,te,ne);if("number"==typeof $)return $&=255,"function"==typeof Uint8Array.prototype.indexOf?ne?Uint8Array.prototype.indexOf.call(U,$,q):Uint8Array.prototype.lastIndexOf.call(U,$,q):x(U,[$],q,te,ne);throw new TypeError("val must be string, number or Buffer")}function x(U,$,q,te,ne){var se,ie=1,ue=U.length,le=$.length;if(void 0!==te&&("ucs2"===(te=String(te).toLowerCase())||"ucs-2"===te||"utf16le"===te||"utf-16le"===te)){if(U.length<2||$.length<2)return-1;ie=2,ue/=2,le/=2,q/=2}function de(Ee,he){return 1===ie?Ee[he]:Ee.readUInt16BE(he*ie)}if(ne){var be=-1;for(se=q;se<ue;se++)if(de(U,se)===de($,-1===be?0:se-be)){if(-1===be&&(be=se),se-be+1===le)return be*ie}else-1!==be&&(se-=se-be),be=-1}else for(q+le>ue&&(q=ue-le),se=q;se>=0;se--){for(var _e=!0,xe=0;xe<le;xe++)if(de(U,se+xe)!==de($,xe)){_e=!1;break}if(_e)return se}return-1}function f(U,$,q,te){q=Number(q)||0;var ne=U.length-q;te?(te=Number(te))>ne&&(te=ne):te=ne;var se=$.length;te>se/2&&(te=se/2);for(var ie=0;ie<te;++ie){var ue=parseInt($.substr(2*ie,2),16);if(ee(ue))return ie;U[q+ie]=ue}return ie}function T(U,$,q,te){return B(re($,U.length-q),U,q,te)}function _(U,$,q,te){return B(function(ne){for(var se=[],ie=0;ie<ne.length;++ie)se.push(255&ne.charCodeAt(ie));return se}($),U,q,te)}function k(U,$,q,te){return _(U,$,q,te)}function w(U,$,q,te){return B(j($),U,q,te)}function C(U,$,q,te){return B(function(ne,se){for(var ie,ue,de=[],be=0;be<ne.length&&!((se-=2)<0);++be)ue=(ie=ne.charCodeAt(be))>>8,de.push(ie%256),de.push(ue);return de}($,U.length-q),U,q,te)}function A(U,$,q){return n.fromByteArray(0===$&&q===U.length?U:U.slice($,q))}function O(U,$,q){q=Math.min(U.length,q);for(var te=[],ne=$;ne<q;){var se,ie,ue,le,de=U[ne],be=null,_e=de>239?4:de>223?3:de>191?2:1;if(ne+_e<=q)switch(_e){case 1:de<128&&(be=de);break;case 2:128==(192&(se=U[ne+1]))&&(le=(31&de)<<6|63&se)>127&&(be=le);break;case 3:ie=U[ne+2],128==(192&(se=U[ne+1]))&&128==(192&ie)&&(le=(15&de)<<12|(63&se)<<6|63&ie)>2047&&(le<55296||le>57343)&&(be=le);break;case 4:ie=U[ne+2],ue=U[ne+3],128==(192&(se=U[ne+1]))&&128==(192&ie)&&128==(192&ue)&&(le=(15&de)<<18|(63&se)<<12|(63&ie)<<6|63&ue)>65535&&le<1114112&&(be=le)}null===be?(be=65533,_e=1):be>65535&&(te.push((be-=65536)>>>10&1023|55296),be=56320|1023&be),te.push(be),ne+=_e}return function(xe){var Ee=xe.length;if(Ee<=4096)return String.fromCharCode.apply(String,xe);for(var he="",me=0;me<Ee;)he+=String.fromCharCode.apply(String,xe.slice(me,me+=4096));return he}(te)}function P(U,$,q){var te="";q=Math.min(U.length,q);for(var ne=$;ne<q;++ne)te+=String.fromCharCode(127&U[ne]);return te}function S(U,$,q){var te="";q=Math.min(U.length,q);for(var ne=$;ne<q;++ne)te+=String.fromCharCode(U[ne]);return te}function E(U,$,q){var te=U.length;(!$||$<0)&&($=0),(!q||q<0||q>te)&&(q=te);for(var ne="",se=$;se<q;++se)ne+=Z(U[se]);return ne}function D(U,$,q){for(var te=U.slice($,q),ne="",se=0;se<te.length;se+=2)ne+=String.fromCharCode(te[se]+256*te[se+1]);return ne}function z(U,$,q){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+$>q)throw new RangeError("Trying to access beyond buffer length")}function N(U,$,q,te,ne,se){if(!t.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if($>ne||$<se)throw new RangeError('"value" argument is out of bounds');if(q+te>U.length)throw new RangeError("Index out of range")}function V(U,$,q,te,ne,se){if(q+te>U.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function X(U,$,q,te,ne){return $=+$,q>>>=0,ne||V(U,0,q,4),r.write(U,$,q,te,23,4),q+4}function J(U,$,q,te,ne){return $=+$,q>>>=0,ne||V(U,0,q,8),r.write(U,$,q,te,52,8),q+8}h.Buffer=t,h.SlowBuffer=function(U){return+U!=U&&(U=0),t.alloc(+U)},h.INSPECT_MAX_BYTES=50,h.kMaxLength=2147483647,(t.TYPED_ARRAY_SUPPORT=function(){try{var U=new Uint8Array(1);return U.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===U.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(U,$,q){return d(U,$,q)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(U,$,q){return ne=$,se=q,a(te=U),te<=0?o(te):void 0!==ne?"string"==typeof se?o(te).fill(ne,se):o(te).fill(ne):o(te);var te,ne,se},t.allocUnsafe=function(U){return i(U)},t.allocUnsafeSlow=function(U){return i(U)},t.isBuffer=function(U){return null!=U&&!0===U._isBuffer&&U!==t.prototype},t.compare=function(U,$){if(H(U,Uint8Array)&&(U=t.from(U,U.offset,U.byteLength)),H($,Uint8Array)&&($=t.from($,$.offset,$.byteLength)),!t.isBuffer(U)||!t.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===$)return 0;for(var q=U.length,te=$.length,ne=0,se=Math.min(q,te);ne<se;++ne)if(U[ne]!==$[ne]){q=U[ne],te=$[ne];break}return q<te?-1:te<q?1:0},t.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(U,$){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(0===U.length)return t.alloc(0);var q;if(void 0===$)for($=0,q=0;q<U.length;++q)$+=U[q].length;var te=t.allocUnsafe($),ne=0;for(q=0;q<U.length;++q){var se=U[q];if(H(se,Uint8Array)&&(se=t.from(se)),!t.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(te,ne),ne+=se.length}return te},t.byteLength=l,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var U=this.length;if(U%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var $=0;$<U;$+=2)g(this,$,$+1);return this},t.prototype.swap32=function(){var U=this.length;if(U%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var $=0;$<U;$+=4)g(this,$,$+3),g(this,$+1,$+2);return this},t.prototype.swap64=function(){var U=this.length;if(U%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var $=0;$<U;$+=8)g(this,$,$+7),g(this,$+1,$+6),g(this,$+2,$+5),g(this,$+3,$+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var U=this.length;return 0===U?"":0===arguments.length?O(this,0,U):p.apply(this,arguments)},t.prototype.equals=function(U){if(!t.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U||0===t.compare(this,U)},t.prototype.inspect=function(){var U="",$=h.INSPECT_MAX_BYTES;return U=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(U+=" ... "),"<Buffer "+U+">"},t.prototype.compare=function(U,$,q,te,ne){if(H(U,Uint8Array)&&(U=t.from(U,U.offset,U.byteLength)),!t.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(void 0===$&&($=0),void 0===q&&(q=U?U.length:0),void 0===te&&(te=0),void 0===ne&&(ne=this.length),$<0||q>U.length||te<0||ne>this.length)throw new RangeError("out of range index");if(te>=ne&&$>=q)return 0;if(te>=ne)return-1;if($>=q)return 1;if(this===U)return 0;for(var se=(ne>>>=0)-(te>>>=0),ie=(q>>>=0)-($>>>=0),ue=Math.min(se,ie),le=this.slice(te,ne),de=U.slice($,q),be=0;be<ue;++be)if(le[be]!==de[be]){se=le[be],ie=de[be];break}return se<ie?-1:ie<se?1:0},t.prototype.includes=function(U,$,q){return-1!==this.indexOf(U,$,q)},t.prototype.indexOf=function(U,$,q){return u(this,U,$,q,!0)},t.prototype.lastIndexOf=function(U,$,q){return u(this,U,$,q,!1)},t.prototype.write=function(U,$,q,te){if(void 0===$)te="utf8",q=this.length,$=0;else if(void 0===q&&"string"==typeof $)te=$,q=this.length,$=0;else{if(!isFinite($))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");$>>>=0,isFinite(q)?(q>>>=0,void 0===te&&(te="utf8")):(te=q,q=void 0)}var ne=this.length-$;if((void 0===q||q>ne)&&(q=ne),U.length>0&&(q<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var se=!1;;)switch(te){case"hex":return f(this,U,$,q);case"utf8":case"utf-8":return T(this,U,$,q);case"ascii":return _(this,U,$,q);case"latin1":case"binary":return k(this,U,$,q);case"base64":return w(this,U,$,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,U,$,q);default:if(se)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),se=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(U,$){var q=this.length;(U=~~U)<0?(U+=q)<0&&(U=0):U>q&&(U=q),($=void 0===$?q:~~$)<0?($+=q)<0&&($=0):$>q&&($=q),$<U&&($=U);var te=this.subarray(U,$);return te.__proto__=t.prototype,te},t.prototype.readUIntLE=function(U,$,q){U>>>=0,$>>>=0,q||z(U,$,this.length);for(var te=this[U],ne=1,se=0;++se<$&&(ne*=256);)te+=this[U+se]*ne;return te},t.prototype.readUIntBE=function(U,$,q){U>>>=0,$>>>=0,q||z(U,$,this.length);for(var te=this[U+--$],ne=1;$>0&&(ne*=256);)te+=this[U+--$]*ne;return te},t.prototype.readUInt8=function(U,$){return U>>>=0,$||z(U,1,this.length),this[U]},t.prototype.readUInt16LE=function(U,$){return U>>>=0,$||z(U,2,this.length),this[U]|this[U+1]<<8},t.prototype.readUInt16BE=function(U,$){return U>>>=0,$||z(U,2,this.length),this[U]<<8|this[U+1]},t.prototype.readUInt32LE=function(U,$){return U>>>=0,$||z(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+16777216*this[U+3]},t.prototype.readUInt32BE=function(U,$){return U>>>=0,$||z(U,4,this.length),16777216*this[U]+(this[U+1]<<16|this[U+2]<<8|this[U+3])},t.prototype.readIntLE=function(U,$,q){U>>>=0,$>>>=0,q||z(U,$,this.length);for(var te=this[U],ne=1,se=0;++se<$&&(ne*=256);)te+=this[U+se]*ne;return te>=(ne*=128)&&(te-=Math.pow(2,8*$)),te},t.prototype.readIntBE=function(U,$,q){U>>>=0,$>>>=0,q||z(U,$,this.length);for(var te=$,ne=1,se=this[U+--te];te>0&&(ne*=256);)se+=this[U+--te]*ne;return se>=(ne*=128)&&(se-=Math.pow(2,8*$)),se},t.prototype.readInt8=function(U,$){return U>>>=0,$||z(U,1,this.length),128&this[U]?-1*(255-this[U]+1):this[U]},t.prototype.readInt16LE=function(U,$){U>>>=0,$||z(U,2,this.length);var q=this[U]|this[U+1]<<8;return 32768&q?4294901760|q:q},t.prototype.readInt16BE=function(U,$){U>>>=0,$||z(U,2,this.length);var q=this[U+1]|this[U]<<8;return 32768&q?4294901760|q:q},t.prototype.readInt32LE=function(U,$){return U>>>=0,$||z(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},t.prototype.readInt32BE=function(U,$){return U>>>=0,$||z(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},t.prototype.readFloatLE=function(U,$){return U>>>=0,$||z(U,4,this.length),r.read(this,U,!0,23,4)},t.prototype.readFloatBE=function(U,$){return U>>>=0,$||z(U,4,this.length),r.read(this,U,!1,23,4)},t.prototype.readDoubleLE=function(U,$){return U>>>=0,$||z(U,8,this.length),r.read(this,U,!0,52,8)},t.prototype.readDoubleBE=function(U,$){return U>>>=0,$||z(U,8,this.length),r.read(this,U,!1,52,8)},t.prototype.writeUIntLE=function(U,$,q,te){U=+U,$>>>=0,q>>>=0,te||N(this,U,$,q,Math.pow(2,8*q)-1,0);var ne=1,se=0;for(this[$]=255&U;++se<q&&(ne*=256);)this[$+se]=U/ne&255;return $+q},t.prototype.writeUIntBE=function(U,$,q,te){U=+U,$>>>=0,q>>>=0,te||N(this,U,$,q,Math.pow(2,8*q)-1,0);var ne=q-1,se=1;for(this[$+ne]=255&U;--ne>=0&&(se*=256);)this[$+ne]=U/se&255;return $+q},t.prototype.writeUInt8=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,1,255,0),this[$]=255&U,$+1},t.prototype.writeUInt16LE=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,2,65535,0),this[$]=255&U,this[$+1]=U>>>8,$+2},t.prototype.writeUInt16BE=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,2,65535,0),this[$]=U>>>8,this[$+1]=255&U,$+2},t.prototype.writeUInt32LE=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,4,4294967295,0),this[$+3]=U>>>24,this[$+2]=U>>>16,this[$+1]=U>>>8,this[$]=255&U,$+4},t.prototype.writeUInt32BE=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,4,4294967295,0),this[$]=U>>>24,this[$+1]=U>>>16,this[$+2]=U>>>8,this[$+3]=255&U,$+4},t.prototype.writeIntLE=function(U,$,q,te){if(U=+U,$>>>=0,!te){var ne=Math.pow(2,8*q-1);N(this,U,$,q,ne-1,-ne)}var se=0,ie=1,ue=0;for(this[$]=255&U;++se<q&&(ie*=256);)U<0&&0===ue&&0!==this[$+se-1]&&(ue=1),this[$+se]=(U/ie>>0)-ue&255;return $+q},t.prototype.writeIntBE=function(U,$,q,te){if(U=+U,$>>>=0,!te){var ne=Math.pow(2,8*q-1);N(this,U,$,q,ne-1,-ne)}var se=q-1,ie=1,ue=0;for(this[$+se]=255&U;--se>=0&&(ie*=256);)U<0&&0===ue&&0!==this[$+se+1]&&(ue=1),this[$+se]=(U/ie>>0)-ue&255;return $+q},t.prototype.writeInt8=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,1,127,-128),U<0&&(U=255+U+1),this[$]=255&U,$+1},t.prototype.writeInt16LE=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,2,32767,-32768),this[$]=255&U,this[$+1]=U>>>8,$+2},t.prototype.writeInt16BE=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,2,32767,-32768),this[$]=U>>>8,this[$+1]=255&U,$+2},t.prototype.writeInt32LE=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,4,2147483647,-2147483648),this[$]=255&U,this[$+1]=U>>>8,this[$+2]=U>>>16,this[$+3]=U>>>24,$+4},t.prototype.writeInt32BE=function(U,$,q){return U=+U,$>>>=0,q||N(this,U,$,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[$]=U>>>24,this[$+1]=U>>>16,this[$+2]=U>>>8,this[$+3]=255&U,$+4},t.prototype.writeFloatLE=function(U,$,q){return X(this,U,$,!0,q)},t.prototype.writeFloatBE=function(U,$,q){return X(this,U,$,!1,q)},t.prototype.writeDoubleLE=function(U,$,q){return J(this,U,$,!0,q)},t.prototype.writeDoubleBE=function(U,$,q){return J(this,U,$,!1,q)},t.prototype.copy=function(U,$,q,te){if(!t.isBuffer(U))throw new TypeError("argument should be a Buffer");if(q||(q=0),te||0===te||(te=this.length),$>=U.length&&($=U.length),$||($=0),te>0&&te<q&&(te=q),te===q||0===U.length||0===this.length)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),U.length-$<te-q&&(te=U.length-$+q);var ne=te-q;if(this===U&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin($,q,te);else if(this===U&&q<$&&$<te)for(var se=ne-1;se>=0;--se)U[se+$]=this[se+q];else Uint8Array.prototype.set.call(U,this.subarray(q,te),$);return ne},t.prototype.fill=function(U,$,q,te){if("string"==typeof U){if("string"==typeof $?(te=$,$=0,q=this.length):"string"==typeof q&&(te=q,q=this.length),void 0!==te&&"string"!=typeof te)throw new TypeError("encoding must be a string");if("string"==typeof te&&!t.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(1===U.length){var ne=U.charCodeAt(0);("utf8"===te&&ne<128||"latin1"===te)&&(U=ne)}}else"number"==typeof U&&(U&=255);if($<0||this.length<$||this.length<q)throw new RangeError("Out of range index");if(q<=$)return this;var se;if($>>>=0,q=void 0===q?this.length:q>>>0,U||(U=0),"number"==typeof U)for(se=$;se<q;++se)this[se]=U;else{var ie=t.isBuffer(U)?U:t.from(U,te),ue=ie.length;if(0===ue)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(se=0;se<q-$;++se)this[se+$]=ie[se%ue]}return this};var G=/[^+/0-9A-Za-z-_]/g;function Z(U){return U<16?"0"+U.toString(16):U.toString(16)}function re(U,$){var q;$=$||1/0;for(var te=U.length,ne=null,se=[],ie=0;ie<te;++ie){if((q=U.charCodeAt(ie))>55295&&q<57344){if(!ne){if(q>56319){($-=3)>-1&&se.push(239,191,189);continue}if(ie+1===te){($-=3)>-1&&se.push(239,191,189);continue}ne=q;continue}if(q<56320){($-=3)>-1&&se.push(239,191,189),ne=q;continue}q=65536+(ne-55296<<10|q-56320)}else ne&&($-=3)>-1&&se.push(239,191,189);if(ne=null,q<128){if(($-=1)<0)break;se.push(q)}else if(q<2048){if(($-=2)<0)break;se.push(q>>6|192,63&q|128)}else if(q<65536){if(($-=3)<0)break;se.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if(($-=4)<0)break;se.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return se}function j(U){return n.toByteArray(function($){if(($=($=$.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;$.length%4!=0;)$+="=";return $}(U))}function B(U,$,q,te){for(var ne=0;ne<te&&!(ne+q>=$.length||ne>=U.length);++ne)$[ne+q]=U[ne];return ne}function H(U,$){return U instanceof $||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===$.name}function ee(U){return U!=U}}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(v,b,h){h.read=function(e,n,r,o,t){var d,a,i=8*t-o-1,s=(1<<i)-1,c=s>>1,l=-7,p=r?t-1:0,g=r?-1:1,u=e[n+p];for(p+=g,d=u&(1<<-l)-1,u>>=-l,l+=i;l>0;d=256*d+e[n+p],p+=g,l-=8);for(a=d&(1<<-l)-1,d>>=-l,l+=o;l>0;a=256*a+e[n+p],p+=g,l-=8);if(0===d)d=1-c;else{if(d===s)return a?NaN:1/0*(u?-1:1);a+=Math.pow(2,o),d-=c}return(u?-1:1)*a*Math.pow(2,d-o)},h.write=function(e,n,r,o,t,d){var a,i,s,c=8*d-t-1,l=(1<<c)-1,p=l>>1,g=23===t?Math.pow(2,-24)-Math.pow(2,-77):0,u=o?0:d-1,x=o?1:-1,f=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(i=isNaN(n)?1:0,a=l):(a=Math.floor(Math.log(n)/Math.LN2),n*(s=Math.pow(2,-a))<1&&(a--,s*=2),(n+=a+p>=1?g/s:g*Math.pow(2,1-p))*s>=2&&(a++,s/=2),a+p>=l?(i=0,a=l):a+p>=1?(i=(n*s-1)*Math.pow(2,t),a+=p):(i=n*Math.pow(2,p-1)*Math.pow(2,t),a=0));t>=8;e[r+u]=255&i,u+=x,i/=256,t-=8);for(a=a<<t|i,c+=t;c>0;e[r+u]=255&a,u+=x,a/=256,c-=8);e[r+u-x]|=128*f}},{}],5:[function(v,b,h){var e,n,r=b.exports={};function o(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}function d(x){if(e===setTimeout)return setTimeout(x,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(x,0);try{return e(x,0)}catch{try{return e.call(null,x,0)}catch{return e.call(this,x,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch{e=o}try{n="function"==typeof clearTimeout?clearTimeout:t}catch{n=t}}();var a,i=[],s=!1,c=-1;function l(){s&&a&&(s=!1,a.length?i=a.concat(i):c=-1,i.length&&p())}function p(){if(!s){var x=d(l);s=!0;for(var f=i.length;f;){for(a=i,i=[];++c<f;)a&&a[c].run();c=-1,f=i.length}a=null,s=!1,function(T){if(n===clearTimeout)return clearTimeout(T);if((n===t||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(T);try{n(T)}catch{try{return n.call(null,T)}catch{return n.call(this,T)}}}(x)}}function g(x,f){this.fun=x,this.array=f}function u(){}r.nextTick=function(x){var f=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)f[T-1]=arguments[T];i.push(new g(x,f)),1!==i.length||s||d(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=u,r.addListener=u,r.once=u,r.off=u,r.removeListener=u,r.removeAllListeners=u,r.emit=u,r.prependListener=u,r.prependOnceListener=u,r.listeners=function(x){return[]},r.binding=function(x){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(x){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],6:[function(v,b,h){b.exports={alpha_shape:v("alpha-shape"),convex_hull:v("convex-hull"),delaunay_triangulate:v("delaunay-triangulate"),gl_cone3d:v("gl-cone3d"),gl_error3d:v("gl-error3d"),gl_heatmap2d:v("gl-heatmap2d"),gl_line3d:v("gl-line3d"),gl_mesh3d:v("gl-mesh3d"),gl_plot2d:v("gl-plot2d"),gl_plot3d:v("gl-plot3d"),gl_pointcloud2d:v("gl-pointcloud2d"),gl_scatter3d:v("gl-scatter3d"),gl_select_box:v("gl-select-box"),gl_spikes2d:v("gl-spikes2d"),gl_streamtube3d:v("gl-streamtube3d"),gl_surface3d:v("gl-surface3d"),ndarray:v("ndarray"),ndarray_linear_interpolate:v("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(v,b,h){"use strict";b.exports=function(d){var a=(d=d||{}).eye||[0,0,1],i=d.center||[0,0,0],s=d.up||[0,1,0],c=d.distanceLimits||[0,1/0],l=d.mode||"turntable",p=e(),g=n(),u=r();return p.setDistanceLimits(c[0],c[1]),p.lookAt(0,a,i,s),g.setDistanceLimits(c[0],c[1]),g.lookAt(0,a,i,s),u.setDistanceLimits(c[0],c[1]),u.lookAt(0,a,i,s),new o({turntable:p,orbit:g,matrix:u},l)};var e=v("turntable-camera-controller"),n=v("orbit-camera-controller"),r=v("matrix-camera-controller");function o(d,a){this._controllerNames=Object.keys(d),this._controllerList=this._controllerNames.map(function(i){return d[i]}),this._mode=a,this._active=d[a],this._active||(this._mode="turntable",this._active=d.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var t=o.prototype;t.flush=function(d){for(var a=this._controllerList,i=0;i<a.length;++i)a[i].flush(d)},t.idle=function(d){for(var a=this._controllerList,i=0;i<a.length;++i)a[i].idle(d)},t.lookAt=function(d,a,i,s){for(var c=this._controllerList,l=0;l<c.length;++l)c[l].lookAt(d,a,i,s)},t.rotate=function(d,a,i,s){for(var c=this._controllerList,l=0;l<c.length;++l)c[l].rotate(d,a,i,s)},t.pan=function(d,a,i,s){for(var c=this._controllerList,l=0;l<c.length;++l)c[l].pan(d,a,i,s)},t.translate=function(d,a,i,s){for(var c=this._controllerList,l=0;l<c.length;++l)c[l].translate(d,a,i,s)},t.setMatrix=function(d,a){for(var i=this._controllerList,s=0;s<i.length;++s)i[s].setMatrix(d,a)},t.setDistanceLimits=function(d,a){for(var i=this._controllerList,s=0;s<i.length;++s)i[s].setDistanceLimits(d,a)},t.setDistance=function(d,a){for(var i=this._controllerList,s=0;s<i.length;++s)i[s].setDistance(d,a)},t.recalcMatrix=function(d){this._active.recalcMatrix(d)},t.getDistance=function(d){return this._active.getDistance(d)},t.getDistanceLimits=function(d){return this._active.getDistanceLimits(d)},t.lastT=function(){return this._active.lastT()},t.setMode=function(d){if(d!==this._mode){var a=this._controllerNames.indexOf(d);if(!(a<0)){var i=this._active,s=this._controllerList[a],c=Math.max(i.lastT(),s.lastT());i.recalcMatrix(c),s.setMatrix(c,i.computedMatrix),this._active=s,this._mode=d,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},t.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(v,b,h){"use strict";var e=typeof WeakMap>"u"?v("weak-map"):WeakMap,n=v("gl-buffer"),r=v("gl-vao"),o=new e;b.exports=function(t){var d=o.get(t),a=d&&(d._triangleBuffer.handle||d._triangleBuffer.buffer);if(!a||!t.isBuffer(a)){var i=n(t,new Float32Array([-1,-1,-1,4,4,-1]));(d=r(t,[{buffer:i,type:t.FLOAT,size:2}]))._triangleBuffer=i,o.set(t,d)}d.bind(),t.drawArrays(t.TRIANGLES,0,3),d.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(v,b,h){var e=v("pad-left");b.exports=function(n,r,o){r="number"==typeof r?r:1,o=o||": ";var t=n.split(/\r?\n/),d=String(t.length+r-1).length;return t.map(function(a,i){var s=i+r,c=String(s).length;return e(s,d-c)+o+a}).join("\n")}},{"pad-left":264}],10:[function(v,b,h){"use strict";b.exports=function(r){var o=r.length;if(0===o)return[];if(1===o)return[0];for(var t=r[0].length,d=[r[0]],a=[0],i=1;i<o;++i)if(d.push(r[i]),n(d,t)){if(a.push(i),a.length===t+1)return a}else d.pop();return a};var e=v("robust-orientation");function n(r,o){for(var t=new Array(o+1),d=0;d<r.length;++d)t[d]=r[d];for(d=0;d<=r.length;++d){for(var a=r.length;a<=o;++a){for(var i=new Array(o),s=0;s<o;++s)i[s]=Math.pow(a+1-d,s);t[a]=i}if(e.apply(void 0,t))return!0}return!1}},{"robust-orientation":284}],11:[function(v,b,h){"use strict";b.exports=function(r,o){return e(o).filter(function(t){for(var d=new Array(t.length),a=0;a<t.length;++a)d[a]=o[t[a]];return n(d)*r<1})};var e=v("delaunay-triangulate"),n=v("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(v,b,h){b.exports=function(r,o){return n(e(r,o))};var e=v("alpha-complex"),n=v("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(v,b,h){b.exports=function(e){return atob(e)}},{}],14:[function(v,b,h){"use strict";b.exports=function(r,o){for(var t=o.length,d=new Array(t+1),a=0;a<t;++a){for(var i=new Array(t+1),s=0;s<=t;++s)i[s]=r[s][a];d[a]=i}for(d[t]=new Array(t+1),a=0;a<=t;++a)d[t][a]=1;var c=new Array(t+1);for(a=0;a<t;++a)c[a]=o[a];c[t]=1;var l=e(d,c),p=n(l[t+1]);0===p&&(p=1);var g=new Array(t+1);for(a=0;a<=t;++a)g[a]=n(l[a])/p;return g};var e=v("robust-linear-solve");function n(r){for(var o=0,t=0;t<r.length;++t)o+=r[t];return o}},{"robust-linear-solve":283}],15:[function(v,b,h){"use strict";var e=v("./lib/rationalize");b.exports=function(n,r){return e(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(v,b,h){"use strict";b.exports=function(e,n){return e[0].mul(n[1]).cmp(n[0].mul(e[1]))}},{}],17:[function(v,b,h){"use strict";var e=v("./lib/rationalize");b.exports=function(n,r){return e(n[0].mul(r[1]),n[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(v,b,h){"use strict";var e=v("./is-rat"),n=v("./lib/is-bn"),r=v("./lib/num-to-bn"),o=v("./lib/str-to-bn"),t=v("./lib/rationalize"),d=v("./div");b.exports=function a(i,s){if(e(i))return s?d(i,a(s)):[i[0].clone(),i[1].clone()];var c,l,p=0;if(n(i))c=i.clone();else if("string"==typeof i)c=o(i);else{if(0===i)return[r(0),r(1)];if(i===Math.floor(i))c=r(i);else{for(;i!==Math.floor(i);)i*=Math.pow(2,256),p-=256;c=r(i)}}if(e(s))c.mul(s[1]),l=s[0].clone();else if(n(s))l=s.clone();else if("string"==typeof s)l=o(s);else if(s)if(s===Math.floor(s))l=r(s);else{for(;s!==Math.floor(s);)s*=Math.pow(2,256),p+=256;l=r(s)}else l=r(1);return p>0?c=c.ushln(p):p<0&&(l=l.ushln(-p)),t(c,l)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(v,b,h){"use strict";var e=v("./lib/is-bn");b.exports=function(n){return Array.isArray(n)&&2===n.length&&e(n[0])&&e(n[1])}},{"./lib/is-bn":23}],20:[function(v,b,h){"use strict";var e=v("bn.js");b.exports=function(n){return n.cmp(new e(0))}},{"bn.js":33}],21:[function(v,b,h){"use strict";var e=v("./bn-sign");b.exports=function(n){var r=n.length,o=n.words,t=0;if(1===r)t=o[0];else if(2===r)t=o[0]+67108864*o[1];else for(var d=0;d<r;d++)t+=o[d]*Math.pow(67108864,d);return e(n)*t}},{"./bn-sign":20}],22:[function(v,b,h){"use strict";var e=v("double-bits"),n=v("bit-twiddle").countTrailingZeros;b.exports=function(r){var o=n(e.lo(r));if(o<32)return o;var t=n(e.hi(r));return t>20?52:t+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(v,b,h){"use strict";v("bn.js"),b.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(v,b,h){"use strict";var e=v("bn.js"),n=v("double-bits");b.exports=function(r){var o=n.exponent(r);return o<52?new e(r):new e(r*Math.pow(2,52-o)).ushln(o-52)}},{"bn.js":33,"double-bits":64}],25:[function(v,b,h){"use strict";var e=v("./num-to-bn"),n=v("./bn-sign");b.exports=function(r,o){var t=n(r),d=n(o);if(0===t)return[e(0),e(1)];if(0===d)return[e(0),e(0)];d<0&&(r=r.neg(),o=o.neg());var a=r.gcd(o);return a.cmpn(1)?[r.div(a),o.div(a)]:[r,o]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(v,b,h){"use strict";var e=v("bn.js");b.exports=function(n){return new e(n)}},{"bn.js":33}],27:[function(v,b,h){"use strict";var e=v("./lib/rationalize");b.exports=function(n,r){return e(n[0].mul(r[0]),n[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(v,b,h){"use strict";var e=v("./lib/bn-sign");b.exports=function(n){return e(n[0])*e(n[1])}},{"./lib/bn-sign":20}],29:[function(v,b,h){"use strict";var e=v("./lib/rationalize");b.exports=function(n,r){return e(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(v,b,h){"use strict";var e=v("./lib/bn-to-num"),n=v("./lib/ctz");b.exports=function(r){var o=r[0],t=r[1];if(0===o.cmpn(0))return 0;var d=o.abs().divmod(t.abs()),i=e(d.div),s=d.mod,c=o.negative!==t.negative?-1:1;if(0===s.cmpn(0))return c*i;if(i){var l=n(i)+4,p=e(s.ushln(l).divRound(t));return c*(i+p*Math.pow(2,-l))}var g=t.bitLength()-s.bitLength()+53;return p=e(s.ushln(g).divRound(t)),g<1023?c*p*Math.pow(2,-g):c*(p*=Math.pow(2,-1023))*Math.pow(2,1023-g)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(v,b,h){"use strict";function e(a,i,s,c,l){for(var p=l+1;c<=l;){var g=c+l>>>1,u=a[g];(void 0!==s?s(u,i):u-i)>=0?(p=g,l=g-1):c=g+1}return p}function n(a,i,s,c,l){for(var p=l+1;c<=l;){var g=c+l>>>1,u=a[g];(void 0!==s?s(u,i):u-i)>0?(p=g,l=g-1):c=g+1}return p}function r(a,i,s,c,l){for(var p=c-1;c<=l;){var g=c+l>>>1,u=a[g];(void 0!==s?s(u,i):u-i)<0?(p=g,c=g+1):l=g-1}return p}function o(a,i,s,c,l){for(var p=c-1;c<=l;){var g=c+l>>>1,u=a[g];(void 0!==s?s(u,i):u-i)<=0?(p=g,c=g+1):l=g-1}return p}function t(a,i,s,c,l){for(;c<=l;){var p=c+l>>>1,g=a[p],u=void 0!==s?s(g,i):g-i;if(0===u)return p;u<=0?c=p+1:l=p-1}return-1}function d(a,i,s,c,l,p){return"function"==typeof s?p(a,i,s,void 0===c?0:0|c,void 0===l?a.length-1:0|l):p(a,i,void 0,void 0===s?0:0|s,void 0===c?a.length-1:0|c)}b.exports={ge:function(a,i,s,c,l){return d(a,i,s,c,l,e)},gt:function(a,i,s,c,l){return d(a,i,s,c,l,n)},lt:function(a,i,s,c,l){return d(a,i,s,c,l,r)},le:function(a,i,s,c,l){return d(a,i,s,c,l,o)},eq:function(a,i,s,c,l){return d(a,i,s,c,l,t)}}},{}],32:[function(v,b,h){"use strict";function e(r){var o=32;return(r&=-r)&&o--,65535&r&&(o-=16),16711935&r&&(o-=8),252645135&r&&(o-=4),858993459&r&&(o-=2),1431655765&r&&(o-=1),o}h.INT_BITS=32,h.INT_MAX=2147483647,h.INT_MIN=-1<<31,h.sign=function(r){return(r>0)-(r<0)},h.abs=function(r){var o=r>>31;return(r^o)-o},h.min=function(r,o){return o^(r^o)&-(r<o)},h.max=function(r,o){return r^(r^o)&-(r<o)},h.isPow2=function(r){return!(r&r-1||!r)},h.log2=function(r){var o,t;return o=(r>65535)<<4,o|=t=((r>>>=o)>255)<<3,o|=t=((r>>>=t)>15)<<2,(o|=t=((r>>>=t)>3)<<1)|(r>>>=t)>>1},h.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},h.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},h.countTrailingZeros=e,h.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},h.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},h.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var n=new Array(256);(function(r){for(var o=0;o<256;++o){var t=o,d=o,a=7;for(t>>>=1;t;t>>>=1)d<<=1,d|=1&t,--a;r[o]=d<<a&255}})(n),h.reverse=function(r){return n[255&r]<<24|n[r>>>8&255]<<16|n[r>>>16&255]<<8|n[r>>>24&255]},h.interleave2=function(r,o){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},h.deinterleave2=function(r,o){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>o&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},h.interleave3=function(r,o,t){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<2},h.deinterleave3=function(r,o){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>o&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},h.nextCombination=function(r){var o=r|r-1;return o+1|(~o&-~o)-1>>>e(r)+1}},{}],33:[function(v,b,h){!function(e,n){"use strict";function r(S,E){if(!S)throw new Error(E||"Assertion failed")}function o(S,E){S.super_=E;var D=function(){};D.prototype=E.prototype,S.prototype=new D,S.prototype.constructor=S}function t(S,E,D){if(t.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,null!==S&&("le"!==E&&"be"!==E||(D=E,E=10),this._init(S||0,E||10,D||"be"))}var d;"object"==typeof e?e.exports=t:n.BN=t,t.BN=t,t.wordSize=26;try{d=typeof window<"u"&&void 0!==window.Buffer?window.Buffer:v("buffer").Buffer}catch{}function a(S,E){var D=S.charCodeAt(E);return D>=65&&D<=70?D-55:D>=97&&D<=102?D-87:D-48&15}function i(S,E,D){var z=a(S,D);return D-1>=E&&(z|=a(S,D-1)<<4),z}function s(S,E,D,z){for(var N=0,V=Math.min(S.length,D),X=E;X<V;X++){var J=S.charCodeAt(X)-48;N*=z,N+=J>=49?J-49+10:J>=17?J-17+10:J}return N}t.isBN=function(S){return S instanceof t||null!==S&&"object"==typeof S&&S.constructor.wordSize===t.wordSize&&Array.isArray(S.words)},t.max=function(S,E){return S.cmp(E)>0?S:E},t.min=function(S,E){return S.cmp(E)<0?S:E},t.prototype._init=function(S,E,D){if("number"==typeof S)return this._initNumber(S,E,D);if("object"==typeof S)return this._initArray(S,E,D);"hex"===E&&(E=16),r(E===(0|E)&&E>=2&&E<=36);var z=0;"-"===(S=S.toString().replace(/\s+/g,""))[0]&&(z++,this.negative=1),z<S.length&&(16===E?this._parseHex(S,z,D):(this._parseBase(S,E,z),"le"===D&&this._initArray(this.toArray(),E,D)))},t.prototype._initNumber=function(S,E,D){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(r(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),"le"===D&&this._initArray(this.toArray(),E,D)},t.prototype._initArray=function(S,E,D){if(r("number"==typeof S.length),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var N,V,X=0;if("be"===D)for(z=S.length-1,N=0;z>=0;z-=3)this.words[N]|=(V=S[z]|S[z-1]<<8|S[z-2]<<16)<<X&67108863,this.words[N+1]=V>>>26-X&67108863,(X+=24)>=26&&(X-=26,N++);else if("le"===D)for(z=0,N=0;z<S.length;z+=3)this.words[N]|=(V=S[z]|S[z+1]<<8|S[z+2]<<16)<<X&67108863,this.words[N+1]=V>>>26-X&67108863,(X+=24)>=26&&(X-=26,N++);return this.strip()},t.prototype._parseHex=function(S,E,D){this.length=Math.ceil((S.length-E)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var N,V=0,X=0;if("be"===D)for(z=S.length-1;z>=E;z-=2)N=i(S,E,z)<<V,this.words[X]|=67108863&N,V>=18?(V-=18,this.words[X+=1]|=N>>>26):V+=8;else for(z=(S.length-E)%2==0?E+1:E;z<S.length;z+=2)N=i(S,E,z)<<V,this.words[X]|=67108863&N,V>=18?(V-=18,this.words[X+=1]|=N>>>26):V+=8;this.strip()},t.prototype._parseBase=function(S,E,D){this.words=[0],this.length=1;for(var z=0,N=1;N<=67108863;N*=E)z++;z--,N=N/E|0;for(var V=S.length-D,X=V%z,J=Math.min(V,V-X)+D,G=0,Z=D;Z<J;Z+=z)G=s(S,Z,Z+z,E),this.imuln(N),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G);if(0!==X){var re=1;for(G=s(S,Z,S.length,E),Z=0;Z<X;Z++)re*=E;this.imuln(re),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G)}this.strip()},t.prototype.copy=function(S){S.words=new Array(this.length);for(var E=0;E<this.length;E++)S.words[E]=this.words[E];S.length=this.length,S.negative=this.negative,S.red=this.red},t.prototype.clone=function(){var S=new t(null);return this.copy(S),S},t.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},t.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(S,E,D){D.negative=E.negative^S.negative;var z=S.length+E.length|0;D.length=z,z=z-1|0;var N=0|S.words[0],V=0|E.words[0],X=N*V,G=X/67108864|0;D.words[0]=67108863&X;for(var Z=1;Z<z;Z++){for(var re=G>>>26,j=67108863&G,B=Math.min(Z,E.length-1),H=Math.max(0,Z-S.length+1);H<=B;H++)re+=(X=(N=0|S.words[Z-H|0])*(V=0|E.words[H])+j)/67108864|0,j=67108863&X;D.words[Z]=0|j,G=0|re}return 0!==G?D.words[Z]=0|G:D.length--,D.strip()}t.prototype.toString=function(S,E){var D;if(E=0|E||1,16===(S=S||10)||"hex"===S){D="";for(var z=0,N=0,V=0;V<this.length;V++){var X=this.words[V],J=(16777215&(X<<z|N)).toString(16);D=0!=(N=X>>>24-z&16777215)||V!==this.length-1?c[6-J.length]+J+D:J+D,(z+=2)>=26&&(z-=26,V--)}for(0!==N&&(D=N.toString(16)+D);D.length%E!=0;)D="0"+D;return 0!==this.negative&&(D="-"+D),D}if(S===(0|S)&&S>=2&&S<=36){var G=l[S],Z=p[S];D="";var re=this.clone();for(re.negative=0;!re.isZero();){var j=re.modn(Z).toString(S);D=(re=re.idivn(Z)).isZero()?j+D:c[G-j.length]+j+D}for(this.isZero()&&(D="0"+D);D.length%E!=0;)D="0"+D;return 0!==this.negative&&(D="-"+D),D}r(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var S=this.words[0];return 2===this.length?S+=67108864*this.words[1]:3===this.length&&1===this.words[2]?S+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-S:S},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(S,E){return r(void 0!==d),this.toArrayLike(d,S,E)},t.prototype.toArray=function(S,E){return this.toArrayLike(Array,S,E)},t.prototype.toArrayLike=function(S,E,D){var z=this.byteLength(),N=D||Math.max(1,z);r(z<=N,"byte array longer than desired length"),r(N>0,"Requested array length <= 0"),this.strip();var V,X,J="le"===E,G=new S(N),Z=this.clone();if(J){for(X=0;!Z.isZero();X++)V=Z.andln(255),Z.iushrn(8),G[X]=V;for(;X<N;X++)G[X]=0}else{for(X=0;X<N-z;X++)G[X]=0;for(X=0;!Z.isZero();X++)V=Z.andln(255),Z.iushrn(8),G[N-X-1]=V}return G},t.prototype._countBits=Math.clz32?function(S){return 32-Math.clz32(S)}:function(S){var E=S,D=0;return E>=4096&&(D+=13,E>>>=13),E>=64&&(D+=7,E>>>=7),E>=8&&(D+=4,E>>>=4),E>=2&&(D+=2,E>>>=2),D+E},t.prototype._zeroBits=function(S){if(0===S)return 26;var E=S,D=0;return 0==(8191&E)&&(D+=13,E>>>=13),0==(127&E)&&(D+=7,E>>>=7),0==(15&E)&&(D+=4,E>>>=4),0==(3&E)&&(D+=2,E>>>=2),0==(1&E)&&D++,D},t.prototype.bitLength=function(){var E=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+E},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,E=0;E<this.length;E++){var D=this._zeroBits(this.words[E]);if(S+=D,26!==D)break}return S},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(S){return 0!==this.negative?this.abs().inotn(S).iaddn(1):this.clone()},t.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return 0!==this.negative},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var E=0;E<S.length;E++)this.words[E]=this.words[E]|S.words[E];return this.strip()},t.prototype.ior=function(S){return r(0==(this.negative|S.negative)),this.iuor(S)},t.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},t.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},t.prototype.iuand=function(S){var E;E=this.length>S.length?S:this;for(var D=0;D<E.length;D++)this.words[D]=this.words[D]&S.words[D];return this.length=E.length,this.strip()},t.prototype.iand=function(S){return r(0==(this.negative|S.negative)),this.iuand(S)},t.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},t.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},t.prototype.iuxor=function(S){var E,D;this.length>S.length?(E=this,D=S):(E=S,D=this);for(var z=0;z<D.length;z++)this.words[z]=E.words[z]^D.words[z];if(this!==E)for(;z<E.length;z++)this.words[z]=E.words[z];return this.length=E.length,this.strip()},t.prototype.ixor=function(S){return r(0==(this.negative|S.negative)),this.iuxor(S)},t.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},t.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},t.prototype.inotn=function(S){r("number"==typeof S&&S>=0);var E=0|Math.ceil(S/26),D=S%26;this._expand(E),D>0&&E--;for(var z=0;z<E;z++)this.words[z]=67108863&~this.words[z];return D>0&&(this.words[z]=~this.words[z]&67108863>>26-D),this.strip()},t.prototype.notn=function(S){return this.clone().inotn(S)},t.prototype.setn=function(S,E){r("number"==typeof S&&S>=0);var D=S/26|0,z=S%26;return this._expand(D+1),this.words[D]=E?this.words[D]|1<<z:this.words[D]&~(1<<z),this.strip()},t.prototype.iadd=function(S){var E,D,z;if(0!==this.negative&&0===S.negative)return this.negative=0,E=this.isub(S),this.negative^=1,this._normSign();if(0===this.negative&&0!==S.negative)return S.negative=0,E=this.isub(S),S.negative=1,E._normSign();this.length>S.length?(D=this,z=S):(D=S,z=this);for(var N=0,V=0;V<z.length;V++)this.words[V]=67108863&(E=(0|D.words[V])+(0|z.words[V])+N),N=E>>>26;for(;0!==N&&V<D.length;V++)this.words[V]=67108863&(E=(0|D.words[V])+N),N=E>>>26;if(this.length=D.length,0!==N)this.words[this.length]=N,this.length++;else if(D!==this)for(;V<D.length;V++)this.words[V]=D.words[V];return this},t.prototype.add=function(S){var E;return 0!==S.negative&&0===this.negative?(S.negative=0,E=this.sub(S),S.negative^=1,E):0===S.negative&&0!==this.negative?(this.negative=0,E=S.sub(this),this.negative=1,E):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},t.prototype.isub=function(S){if(0!==S.negative){S.negative=0;var E=this.iadd(S);return S.negative=1,E._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var D,z,N=this.cmp(S);if(0===N)return this.negative=0,this.length=1,this.words[0]=0,this;N>0?(D=this,z=S):(D=S,z=this);for(var V=0,X=0;X<z.length;X++)V=(E=(0|D.words[X])-(0|z.words[X])+V)>>26,this.words[X]=67108863&E;for(;0!==V&&X<D.length;X++)V=(E=(0|D.words[X])+V)>>26,this.words[X]=67108863&E;if(0===V&&X<D.length&&D!==this)for(;X<D.length;X++)this.words[X]=D.words[X];return this.length=Math.max(this.length,X),D!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(S){return this.clone().isub(S)};var u=function(S,E,D){var z,N,V,X=S.words,J=E.words,G=D.words,Z=0,re=0|X[0],j=8191&re,B=re>>>13,H=0|X[1],ee=8191&H,U=H>>>13,$=0|X[2],q=8191&$,te=$>>>13,ne=0|X[3],se=8191&ne,ie=ne>>>13,ue=0|X[4],le=8191&ue,de=ue>>>13,be=0|X[5],_e=8191&be,xe=be>>>13,Ee=0|X[6],he=8191&Ee,me=Ee>>>13,Se=0|X[7],Me=8191&Se,Ie=Se>>>13,Fe=0|X[8],Ne=8191&Fe,De=Fe>>>13,$e=0|X[9],Re=8191&$e,ze=$e>>>13,Ue=0|J[0],je=8191&Ue,rt=Ue>>>13,ut=0|J[1],gt=8191&ut,At=ut>>>13,_t=0|J[2],it=8191&_t,et=_t>>>13,wt=0|J[3],Gt=8191&wt,Kt=wt>>>13,cr=0|J[4],ar=8191&cr,hr=cr>>>13,Xt=0|J[5],He=8191&Xt,Je=Xt>>>13,pe=0|J[6],we=8191&pe,Be=pe>>>13,We=0|J[7],Ke=8191&We,Ye=We>>>13,ft=0|J[8],ct=8191&ft,St=ft>>>13,Ft=0|J[9],at=8191&Ft,mt=Ft>>>13;D.negative=S.negative^E.negative,D.length=19;var qt=(Z+(z=Math.imul(j,je))|0)+((8191&(N=(N=Math.imul(j,rt))+Math.imul(B,je)|0))<<13)|0;Z=((V=Math.imul(B,rt))+(N>>>13)|0)+(qt>>>26)|0,qt&=67108863,z=Math.imul(ee,je),N=(N=Math.imul(ee,rt))+Math.imul(U,je)|0,V=Math.imul(U,rt);var Et=(Z+(z=z+Math.imul(j,gt)|0)|0)+((8191&(N=(N=N+Math.imul(j,At)|0)+Math.imul(B,gt)|0))<<13)|0;Z=((V=V+Math.imul(B,At)|0)+(N>>>13)|0)+(Et>>>26)|0,Et&=67108863,z=Math.imul(q,je),N=(N=Math.imul(q,rt))+Math.imul(te,je)|0,V=Math.imul(te,rt),z=z+Math.imul(ee,gt)|0,N=(N=N+Math.imul(ee,At)|0)+Math.imul(U,gt)|0,V=V+Math.imul(U,At)|0;var Dt=(Z+(z=z+Math.imul(j,it)|0)|0)+((8191&(N=(N=N+Math.imul(j,et)|0)+Math.imul(B,it)|0))<<13)|0;Z=((V=V+Math.imul(B,et)|0)+(N>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,z=Math.imul(se,je),N=(N=Math.imul(se,rt))+Math.imul(ie,je)|0,V=Math.imul(ie,rt),z=z+Math.imul(q,gt)|0,N=(N=N+Math.imul(q,At)|0)+Math.imul(te,gt)|0,V=V+Math.imul(te,At)|0,z=z+Math.imul(ee,it)|0,N=(N=N+Math.imul(ee,et)|0)+Math.imul(U,it)|0,V=V+Math.imul(U,et)|0;var Le=(Z+(z=z+Math.imul(j,Gt)|0)|0)+((8191&(N=(N=N+Math.imul(j,Kt)|0)+Math.imul(B,Gt)|0))<<13)|0;Z=((V=V+Math.imul(B,Kt)|0)+(N>>>13)|0)+(Le>>>26)|0,Le&=67108863,z=Math.imul(le,je),N=(N=Math.imul(le,rt))+Math.imul(de,je)|0,V=Math.imul(de,rt),z=z+Math.imul(se,gt)|0,N=(N=N+Math.imul(se,At)|0)+Math.imul(ie,gt)|0,V=V+Math.imul(ie,At)|0,z=z+Math.imul(q,it)|0,N=(N=N+Math.imul(q,et)|0)+Math.imul(te,it)|0,V=V+Math.imul(te,et)|0,z=z+Math.imul(ee,Gt)|0,N=(N=N+Math.imul(ee,Kt)|0)+Math.imul(U,Gt)|0,V=V+Math.imul(U,Kt)|0;var Xe=(Z+(z=z+Math.imul(j,ar)|0)|0)+((8191&(N=(N=N+Math.imul(j,hr)|0)+Math.imul(B,ar)|0))<<13)|0;Z=((V=V+Math.imul(B,hr)|0)+(N>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,z=Math.imul(_e,je),N=(N=Math.imul(_e,rt))+Math.imul(xe,je)|0,V=Math.imul(xe,rt),z=z+Math.imul(le,gt)|0,N=(N=N+Math.imul(le,At)|0)+Math.imul(de,gt)|0,V=V+Math.imul(de,At)|0,z=z+Math.imul(se,it)|0,N=(N=N+Math.imul(se,et)|0)+Math.imul(ie,it)|0,V=V+Math.imul(ie,et)|0,z=z+Math.imul(q,Gt)|0,N=(N=N+Math.imul(q,Kt)|0)+Math.imul(te,Gt)|0,V=V+Math.imul(te,Kt)|0,z=z+Math.imul(ee,ar)|0,N=(N=N+Math.imul(ee,hr)|0)+Math.imul(U,ar)|0,V=V+Math.imul(U,hr)|0;var ot=(Z+(z=z+Math.imul(j,He)|0)|0)+((8191&(N=(N=N+Math.imul(j,Je)|0)+Math.imul(B,He)|0))<<13)|0;Z=((V=V+Math.imul(B,Je)|0)+(N>>>13)|0)+(ot>>>26)|0,ot&=67108863,z=Math.imul(he,je),N=(N=Math.imul(he,rt))+Math.imul(me,je)|0,V=Math.imul(me,rt),z=z+Math.imul(_e,gt)|0,N=(N=N+Math.imul(_e,At)|0)+Math.imul(xe,gt)|0,V=V+Math.imul(xe,At)|0,z=z+Math.imul(le,it)|0,N=(N=N+Math.imul(le,et)|0)+Math.imul(de,it)|0,V=V+Math.imul(de,et)|0,z=z+Math.imul(se,Gt)|0,N=(N=N+Math.imul(se,Kt)|0)+Math.imul(ie,Gt)|0,V=V+Math.imul(ie,Kt)|0,z=z+Math.imul(q,ar)|0,N=(N=N+Math.imul(q,hr)|0)+Math.imul(te,ar)|0,V=V+Math.imul(te,hr)|0,z=z+Math.imul(ee,He)|0,N=(N=N+Math.imul(ee,Je)|0)+Math.imul(U,He)|0,V=V+Math.imul(U,Je)|0;var dt=(Z+(z=z+Math.imul(j,we)|0)|0)+((8191&(N=(N=N+Math.imul(j,Be)|0)+Math.imul(B,we)|0))<<13)|0;Z=((V=V+Math.imul(B,Be)|0)+(N>>>13)|0)+(dt>>>26)|0,dt&=67108863,z=Math.imul(Me,je),N=(N=Math.imul(Me,rt))+Math.imul(Ie,je)|0,V=Math.imul(Ie,rt),z=z+Math.imul(he,gt)|0,N=(N=N+Math.imul(he,At)|0)+Math.imul(me,gt)|0,V=V+Math.imul(me,At)|0,z=z+Math.imul(_e,it)|0,N=(N=N+Math.imul(_e,et)|0)+Math.imul(xe,it)|0,V=V+Math.imul(xe,et)|0,z=z+Math.imul(le,Gt)|0,N=(N=N+Math.imul(le,Kt)|0)+Math.imul(de,Gt)|0,V=V+Math.imul(de,Kt)|0,z=z+Math.imul(se,ar)|0,N=(N=N+Math.imul(se,hr)|0)+Math.imul(ie,ar)|0,V=V+Math.imul(ie,hr)|0,z=z+Math.imul(q,He)|0,N=(N=N+Math.imul(q,Je)|0)+Math.imul(te,He)|0,V=V+Math.imul(te,Je)|0,z=z+Math.imul(ee,we)|0,N=(N=N+Math.imul(ee,Be)|0)+Math.imul(U,we)|0,V=V+Math.imul(U,Be)|0;var Lt=(Z+(z=z+Math.imul(j,Ke)|0)|0)+((8191&(N=(N=N+Math.imul(j,Ye)|0)+Math.imul(B,Ke)|0))<<13)|0;Z=((V=V+Math.imul(B,Ye)|0)+(N>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,z=Math.imul(Ne,je),N=(N=Math.imul(Ne,rt))+Math.imul(De,je)|0,V=Math.imul(De,rt),z=z+Math.imul(Me,gt)|0,N=(N=N+Math.imul(Me,At)|0)+Math.imul(Ie,gt)|0,V=V+Math.imul(Ie,At)|0,z=z+Math.imul(he,it)|0,N=(N=N+Math.imul(he,et)|0)+Math.imul(me,it)|0,V=V+Math.imul(me,et)|0,z=z+Math.imul(_e,Gt)|0,N=(N=N+Math.imul(_e,Kt)|0)+Math.imul(xe,Gt)|0,V=V+Math.imul(xe,Kt)|0,z=z+Math.imul(le,ar)|0,N=(N=N+Math.imul(le,hr)|0)+Math.imul(de,ar)|0,V=V+Math.imul(de,hr)|0,z=z+Math.imul(se,He)|0,N=(N=N+Math.imul(se,Je)|0)+Math.imul(ie,He)|0,V=V+Math.imul(ie,Je)|0,z=z+Math.imul(q,we)|0,N=(N=N+Math.imul(q,Be)|0)+Math.imul(te,we)|0,V=V+Math.imul(te,Be)|0,z=z+Math.imul(ee,Ke)|0,N=(N=N+Math.imul(ee,Ye)|0)+Math.imul(U,Ke)|0,V=V+Math.imul(U,Ye)|0;var Ut=(Z+(z=z+Math.imul(j,ct)|0)|0)+((8191&(N=(N=N+Math.imul(j,St)|0)+Math.imul(B,ct)|0))<<13)|0;Z=((V=V+Math.imul(B,St)|0)+(N>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,z=Math.imul(Re,je),N=(N=Math.imul(Re,rt))+Math.imul(ze,je)|0,V=Math.imul(ze,rt),z=z+Math.imul(Ne,gt)|0,N=(N=N+Math.imul(Ne,At)|0)+Math.imul(De,gt)|0,V=V+Math.imul(De,At)|0,z=z+Math.imul(Me,it)|0,N=(N=N+Math.imul(Me,et)|0)+Math.imul(Ie,it)|0,V=V+Math.imul(Ie,et)|0,z=z+Math.imul(he,Gt)|0,N=(N=N+Math.imul(he,Kt)|0)+Math.imul(me,Gt)|0,V=V+Math.imul(me,Kt)|0,z=z+Math.imul(_e,ar)|0,N=(N=N+Math.imul(_e,hr)|0)+Math.imul(xe,ar)|0,V=V+Math.imul(xe,hr)|0,z=z+Math.imul(le,He)|0,N=(N=N+Math.imul(le,Je)|0)+Math.imul(de,He)|0,V=V+Math.imul(de,Je)|0,z=z+Math.imul(se,we)|0,N=(N=N+Math.imul(se,Be)|0)+Math.imul(ie,we)|0,V=V+Math.imul(ie,Be)|0,z=z+Math.imul(q,Ke)|0,N=(N=N+Math.imul(q,Ye)|0)+Math.imul(te,Ke)|0,V=V+Math.imul(te,Ye)|0,z=z+Math.imul(ee,ct)|0,N=(N=N+Math.imul(ee,St)|0)+Math.imul(U,ct)|0,V=V+Math.imul(U,St)|0;var $t=(Z+(z=z+Math.imul(j,at)|0)|0)+((8191&(N=(N=N+Math.imul(j,mt)|0)+Math.imul(B,at)|0))<<13)|0;Z=((V=V+Math.imul(B,mt)|0)+(N>>>13)|0)+($t>>>26)|0,$t&=67108863,z=Math.imul(Re,gt),N=(N=Math.imul(Re,At))+Math.imul(ze,gt)|0,V=Math.imul(ze,At),z=z+Math.imul(Ne,it)|0,N=(N=N+Math.imul(Ne,et)|0)+Math.imul(De,it)|0,V=V+Math.imul(De,et)|0,z=z+Math.imul(Me,Gt)|0,N=(N=N+Math.imul(Me,Kt)|0)+Math.imul(Ie,Gt)|0,V=V+Math.imul(Ie,Kt)|0,z=z+Math.imul(he,ar)|0,N=(N=N+Math.imul(he,hr)|0)+Math.imul(me,ar)|0,V=V+Math.imul(me,hr)|0,z=z+Math.imul(_e,He)|0,N=(N=N+Math.imul(_e,Je)|0)+Math.imul(xe,He)|0,V=V+Math.imul(xe,Je)|0,z=z+Math.imul(le,we)|0,N=(N=N+Math.imul(le,Be)|0)+Math.imul(de,we)|0,V=V+Math.imul(de,Be)|0,z=z+Math.imul(se,Ke)|0,N=(N=N+Math.imul(se,Ye)|0)+Math.imul(ie,Ke)|0,V=V+Math.imul(ie,Ye)|0,z=z+Math.imul(q,ct)|0,N=(N=N+Math.imul(q,St)|0)+Math.imul(te,ct)|0,V=V+Math.imul(te,St)|0;var Wt=(Z+(z=z+Math.imul(ee,at)|0)|0)+((8191&(N=(N=N+Math.imul(ee,mt)|0)+Math.imul(U,at)|0))<<13)|0;Z=((V=V+Math.imul(U,mt)|0)+(N>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,z=Math.imul(Re,it),N=(N=Math.imul(Re,et))+Math.imul(ze,it)|0,V=Math.imul(ze,et),z=z+Math.imul(Ne,Gt)|0,N=(N=N+Math.imul(Ne,Kt)|0)+Math.imul(De,Gt)|0,V=V+Math.imul(De,Kt)|0,z=z+Math.imul(Me,ar)|0,N=(N=N+Math.imul(Me,hr)|0)+Math.imul(Ie,ar)|0,V=V+Math.imul(Ie,hr)|0,z=z+Math.imul(he,He)|0,N=(N=N+Math.imul(he,Je)|0)+Math.imul(me,He)|0,V=V+Math.imul(me,Je)|0,z=z+Math.imul(_e,we)|0,N=(N=N+Math.imul(_e,Be)|0)+Math.imul(xe,we)|0,V=V+Math.imul(xe,Be)|0,z=z+Math.imul(le,Ke)|0,N=(N=N+Math.imul(le,Ye)|0)+Math.imul(de,Ke)|0,V=V+Math.imul(de,Ye)|0,z=z+Math.imul(se,ct)|0,N=(N=N+Math.imul(se,St)|0)+Math.imul(ie,ct)|0,V=V+Math.imul(ie,St)|0;var wr=(Z+(z=z+Math.imul(q,at)|0)|0)+((8191&(N=(N=N+Math.imul(q,mt)|0)+Math.imul(te,at)|0))<<13)|0;Z=((V=V+Math.imul(te,mt)|0)+(N>>>13)|0)+(wr>>>26)|0,wr&=67108863,z=Math.imul(Re,Gt),N=(N=Math.imul(Re,Kt))+Math.imul(ze,Gt)|0,V=Math.imul(ze,Kt),z=z+Math.imul(Ne,ar)|0,N=(N=N+Math.imul(Ne,hr)|0)+Math.imul(De,ar)|0,V=V+Math.imul(De,hr)|0,z=z+Math.imul(Me,He)|0,N=(N=N+Math.imul(Me,Je)|0)+Math.imul(Ie,He)|0,V=V+Math.imul(Ie,Je)|0,z=z+Math.imul(he,we)|0,N=(N=N+Math.imul(he,Be)|0)+Math.imul(me,we)|0,V=V+Math.imul(me,Be)|0,z=z+Math.imul(_e,Ke)|0,N=(N=N+Math.imul(_e,Ye)|0)+Math.imul(xe,Ke)|0,V=V+Math.imul(xe,Ye)|0,z=z+Math.imul(le,ct)|0,N=(N=N+Math.imul(le,St)|0)+Math.imul(de,ct)|0,V=V+Math.imul(de,St)|0;var Rr=(Z+(z=z+Math.imul(se,at)|0)|0)+((8191&(N=(N=N+Math.imul(se,mt)|0)+Math.imul(ie,at)|0))<<13)|0;Z=((V=V+Math.imul(ie,mt)|0)+(N>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,z=Math.imul(Re,ar),N=(N=Math.imul(Re,hr))+Math.imul(ze,ar)|0,V=Math.imul(ze,hr),z=z+Math.imul(Ne,He)|0,N=(N=N+Math.imul(Ne,Je)|0)+Math.imul(De,He)|0,V=V+Math.imul(De,Je)|0,z=z+Math.imul(Me,we)|0,N=(N=N+Math.imul(Me,Be)|0)+Math.imul(Ie,we)|0,V=V+Math.imul(Ie,Be)|0,z=z+Math.imul(he,Ke)|0,N=(N=N+Math.imul(he,Ye)|0)+Math.imul(me,Ke)|0,V=V+Math.imul(me,Ye)|0,z=z+Math.imul(_e,ct)|0,N=(N=N+Math.imul(_e,St)|0)+Math.imul(xe,ct)|0,V=V+Math.imul(xe,St)|0;var br=(Z+(z=z+Math.imul(le,at)|0)|0)+((8191&(N=(N=N+Math.imul(le,mt)|0)+Math.imul(de,at)|0))<<13)|0;Z=((V=V+Math.imul(de,mt)|0)+(N>>>13)|0)+(br>>>26)|0,br&=67108863,z=Math.imul(Re,He),N=(N=Math.imul(Re,Je))+Math.imul(ze,He)|0,V=Math.imul(ze,Je),z=z+Math.imul(Ne,we)|0,N=(N=N+Math.imul(Ne,Be)|0)+Math.imul(De,we)|0,V=V+Math.imul(De,Be)|0,z=z+Math.imul(Me,Ke)|0,N=(N=N+Math.imul(Me,Ye)|0)+Math.imul(Ie,Ke)|0,V=V+Math.imul(Ie,Ye)|0,z=z+Math.imul(he,ct)|0,N=(N=N+Math.imul(he,St)|0)+Math.imul(me,ct)|0,V=V+Math.imul(me,St)|0;var nr=(Z+(z=z+Math.imul(_e,at)|0)|0)+((8191&(N=(N=N+Math.imul(_e,mt)|0)+Math.imul(xe,at)|0))<<13)|0;Z=((V=V+Math.imul(xe,mt)|0)+(N>>>13)|0)+(nr>>>26)|0,nr&=67108863,z=Math.imul(Re,we),N=(N=Math.imul(Re,Be))+Math.imul(ze,we)|0,V=Math.imul(ze,Be),z=z+Math.imul(Ne,Ke)|0,N=(N=N+Math.imul(Ne,Ye)|0)+Math.imul(De,Ke)|0,V=V+Math.imul(De,Ye)|0,z=z+Math.imul(Me,ct)|0,N=(N=N+Math.imul(Me,St)|0)+Math.imul(Ie,ct)|0,V=V+Math.imul(Ie,St)|0;var lr=(Z+(z=z+Math.imul(he,at)|0)|0)+((8191&(N=(N=N+Math.imul(he,mt)|0)+Math.imul(me,at)|0))<<13)|0;Z=((V=V+Math.imul(me,mt)|0)+(N>>>13)|0)+(lr>>>26)|0,lr&=67108863,z=Math.imul(Re,Ke),N=(N=Math.imul(Re,Ye))+Math.imul(ze,Ke)|0,V=Math.imul(ze,Ye),z=z+Math.imul(Ne,ct)|0,N=(N=N+Math.imul(Ne,St)|0)+Math.imul(De,ct)|0,V=V+Math.imul(De,St)|0;var sr=(Z+(z=z+Math.imul(Me,at)|0)|0)+((8191&(N=(N=N+Math.imul(Me,mt)|0)+Math.imul(Ie,at)|0))<<13)|0;Z=((V=V+Math.imul(Ie,mt)|0)+(N>>>13)|0)+(sr>>>26)|0,sr&=67108863,z=Math.imul(Re,ct),N=(N=Math.imul(Re,St))+Math.imul(ze,ct)|0,V=Math.imul(ze,St);var _r=(Z+(z=z+Math.imul(Ne,at)|0)|0)+((8191&(N=(N=N+Math.imul(Ne,mt)|0)+Math.imul(De,at)|0))<<13)|0;Z=((V=V+Math.imul(De,mt)|0)+(N>>>13)|0)+(_r>>>26)|0,_r&=67108863;var Ar=(Z+(z=Math.imul(Re,at))|0)+((8191&(N=(N=Math.imul(Re,mt))+Math.imul(ze,at)|0))<<13)|0;return Z=((V=Math.imul(ze,mt))+(N>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,G[0]=qt,G[1]=Et,G[2]=Dt,G[3]=Le,G[4]=Xe,G[5]=ot,G[6]=dt,G[7]=Lt,G[8]=Ut,G[9]=$t,G[10]=Wt,G[11]=wr,G[12]=Rr,G[13]=br,G[14]=nr,G[15]=lr,G[16]=sr,G[17]=_r,G[18]=Ar,0!==Z&&(G[19]=Z,D.length++),D};function x(S,E,D){return(new f).mulp(S,E,D)}function f(S,E){this.x=S,this.y=E}Math.imul||(u=g),t.prototype.mulTo=function(S,E){var D=this.length+S.length;return 10===this.length&&10===S.length?u(this,S,E):D<63?g(this,S,E):D<1024?function(z,N,V){V.negative=N.negative^z.negative,V.length=z.length+N.length;for(var X=0,J=0,G=0;G<V.length-1;G++){var Z=J;J=0;for(var re=67108863&X,j=Math.min(G,N.length-1),B=Math.max(0,G-z.length+1);B<=j;B++){var ee=(0|z.words[G-B])*(0|N.words[B]),U=67108863&ee;re=67108863&(U=U+re|0),J+=(Z=(Z=Z+(ee/67108864|0)|0)+(U>>>26)|0)>>>26,Z&=67108863}V.words[G]=re,X=Z,Z=J}return 0!==X?V.words[G]=X:V.length--,V.strip()}(this,S,E):x(this,S,E)},f.prototype.makeRBT=function(S){for(var E=new Array(S),D=t.prototype._countBits(S)-1,z=0;z<S;z++)E[z]=this.revBin(z,D,S);return E},f.prototype.revBin=function(S,E,D){if(0===S||S===D-1)return S;for(var z=0,N=0;N<E;N++)z|=(1&S)<<E-N-1,S>>=1;return z},f.prototype.permute=function(S,E,D,z,N,V){for(var X=0;X<V;X++)z[X]=E[S[X]],N[X]=D[S[X]]},f.prototype.transform=function(S,E,D,z,N,V){this.permute(V,S,E,D,z,N);for(var X=1;X<N;X<<=1)for(var J=X<<1,G=Math.cos(2*Math.PI/J),Z=Math.sin(2*Math.PI/J),re=0;re<N;re+=J)for(var j=G,B=Z,H=0;H<X;H++){var ee=D[re+H],U=z[re+H],$=D[re+H+X],q=z[re+H+X],te=j*$-B*q;q=j*q+B*$,D[re+H]=ee+($=te),z[re+H]=U+q,D[re+H+X]=ee-$,z[re+H+X]=U-q,H!==J&&(te=G*j-Z*B,B=G*B+Z*j,j=te)}},f.prototype.guessLen13b=function(S,E){var D=1|Math.max(E,S),z=1&D,N=0;for(D=D/2|0;D;D>>>=1)N++;return 1<<N+1+z},f.prototype.conjugate=function(S,E,D){if(!(D<=1))for(var z=0;z<D/2;z++){var N=S[z];S[z]=S[D-z-1],S[D-z-1]=N,N=E[z],E[z]=-E[D-z-1],E[D-z-1]=-N}},f.prototype.normalize13b=function(S,E){for(var D=0,z=0;z<E/2;z++){var N=8192*Math.round(S[2*z+1]/E)+Math.round(S[2*z]/E)+D;S[z]=67108863&N,D=N<67108864?0:N/67108864|0}return S},f.prototype.convert13b=function(S,E,D,z){for(var N=0,V=0;V<E;V++)D[2*V]=8191&(N+=0|S[V]),D[2*V+1]=8191&(N>>>=13),N>>>=13;for(V=2*E;V<z;++V)D[V]=0;r(0===N),r(0==(-8192&N))},f.prototype.stub=function(S){for(var E=new Array(S),D=0;D<S;D++)E[D]=0;return E},f.prototype.mulp=function(S,E,D){var z=2*this.guessLen13b(S.length,E.length),N=this.makeRBT(z),V=this.stub(z),X=new Array(z),J=new Array(z),G=new Array(z),Z=new Array(z),re=new Array(z),j=new Array(z),B=D.words;B.length=z,this.convert13b(S.words,S.length,X,z),this.convert13b(E.words,E.length,Z,z),this.transform(X,V,J,G,z,N),this.transform(Z,V,re,j,z,N);for(var H=0;H<z;H++){var ee=J[H]*re[H]-G[H]*j[H];G[H]=J[H]*j[H]+G[H]*re[H],J[H]=ee}return this.conjugate(J,G,z),this.transform(J,G,B,V,z,N),this.conjugate(B,V,z),this.normalize13b(B,z),D.negative=S.negative^E.negative,D.length=S.length+E.length,D.strip()},t.prototype.mul=function(S){var E=new t(null);return E.words=new Array(this.length+S.length),this.mulTo(S,E)},t.prototype.mulf=function(S){var E=new t(null);return E.words=new Array(this.length+S.length),x(this,S,E)},t.prototype.imul=function(S){return this.clone().mulTo(S,this)},t.prototype.imuln=function(S){r("number"==typeof S),r(S<67108864);for(var E=0,D=0;D<this.length;D++){var z=(0|this.words[D])*S,N=(67108863&z)+(67108863&E);E>>=26,E+=z/67108864|0,E+=N>>>26,this.words[D]=67108863&N}return 0!==E&&(this.words[D]=E,this.length++),this},t.prototype.muln=function(S){return this.clone().imuln(S)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(S){var E=function(V){for(var X=new Array(V.bitLength()),J=0;J<X.length;J++){var Z=J%26;X[J]=(V.words[J/26|0]&1<<Z)>>>Z}return X}(S);if(0===E.length)return new t(1);for(var D=this,z=0;z<E.length&&0===E[z];z++,D=D.sqr());if(++z<E.length)for(var N=D.sqr();z<E.length;z++,N=N.sqr())0!==E[z]&&(D=D.mul(N));return D},t.prototype.iushln=function(S){r("number"==typeof S&&S>=0);var E,D=S%26,z=(S-D)/26,N=67108863>>>26-D<<26-D;if(0!==D){var V=0;for(E=0;E<this.length;E++){var X=this.words[E]&N;this.words[E]=(0|this.words[E])-X<<D|V,V=X>>>26-D}V&&(this.words[E]=V,this.length++)}if(0!==z){for(E=this.length-1;E>=0;E--)this.words[E+z]=this.words[E];for(E=0;E<z;E++)this.words[E]=0;this.length+=z}return this.strip()},t.prototype.ishln=function(S){return r(0===this.negative),this.iushln(S)},t.prototype.iushrn=function(S,E,D){var z;r("number"==typeof S&&S>=0),z=E?(E-E%26)/26:0;var N=S%26,V=Math.min((S-N)/26,this.length),X=67108863^67108863>>>N<<N,J=D;if(z-=V,z=Math.max(0,z),J){for(var G=0;G<V;G++)J.words[G]=this.words[G];J.length=V}if(0!==V)if(this.length>V)for(this.length-=V,G=0;G<this.length;G++)this.words[G]=this.words[G+V];else this.words[0]=0,this.length=1;var Z=0;for(G=this.length-1;G>=0&&(0!==Z||G>=z);G--){var re=0|this.words[G];this.words[G]=Z<<26-N|re>>>N,Z=re&X}return J&&0!==Z&&(J.words[J.length++]=Z),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(S,E,D){return r(0===this.negative),this.iushrn(S,E,D)},t.prototype.shln=function(S){return this.clone().ishln(S)},t.prototype.ushln=function(S){return this.clone().iushln(S)},t.prototype.shrn=function(S){return this.clone().ishrn(S)},t.prototype.ushrn=function(S){return this.clone().iushrn(S)},t.prototype.testn=function(S){r("number"==typeof S&&S>=0);var E=S%26,D=(S-E)/26;return!(this.length<=D||!(this.words[D]&1<<E))},t.prototype.imaskn=function(S){r("number"==typeof S&&S>=0);var E=S%26,D=(S-E)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=D?this:(0!==E&&D++,this.length=Math.min(D,this.length),0!==E&&(this.words[this.length-1]&=67108863^67108863>>>E<<E),this.strip())},t.prototype.maskn=function(S){return this.clone().imaskn(S)},t.prototype.iaddn=function(S){return r("number"==typeof S),r(S<67108864),S<0?this.isubn(-S):0!==this.negative?1===this.length&&(0|this.words[0])<S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},t.prototype._iaddn=function(S){this.words[0]+=S;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},t.prototype.isubn=function(S){if(r("number"==typeof S),r(S<67108864),S<0)return this.iaddn(-S);if(0!==this.negative)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},t.prototype.addn=function(S){return this.clone().iaddn(S)},t.prototype.subn=function(S){return this.clone().isubn(S)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(S,E,D){var z,N;this._expand(S.length+D);var X=0;for(z=0;z<S.length;z++){N=(0|this.words[z+D])+X;var J=(0|S.words[z])*E;X=((N-=67108863&J)>>26)-(J/67108864|0),this.words[z+D]=67108863&N}for(;z<this.length-D;z++)X=(N=(0|this.words[z+D])+X)>>26,this.words[z+D]=67108863&N;if(0===X)return this.strip();for(r(-1===X),X=0,z=0;z<this.length;z++)X=(N=-(0|this.words[z])+X)>>26,this.words[z]=67108863&N;return this.negative=1,this.strip()},t.prototype._wordDiv=function(S,E){var D,z=this.clone(),N=S,V=0|N.words[N.length-1];0!=(D=26-this._countBits(V))&&(N=N.ushln(D),z.iushln(D),V=0|N.words[N.length-1]);var X,J=z.length-N.length;if("mod"!==E){(X=new t(null)).length=J+1,X.words=new Array(X.length);for(var G=0;G<X.length;G++)X.words[G]=0}var Z=z.clone()._ishlnsubmul(N,1,J);0===Z.negative&&(z=Z,X&&(X.words[J]=1));for(var re=J-1;re>=0;re--){var j=67108864*(0|z.words[N.length+re])+(0|z.words[N.length+re-1]);for(j=Math.min(j/V|0,67108863),z._ishlnsubmul(N,j,re);0!==z.negative;)j--,z.negative=0,z._ishlnsubmul(N,1,re),z.isZero()||(z.negative^=1);X&&(X.words[re]=j)}return X&&X.strip(),z.strip(),"div"!==E&&0!==D&&z.iushrn(D),{div:X||null,mod:z}},t.prototype.divmod=function(S,E,D){return r(!S.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:0!==this.negative&&0===S.negative?(V=this.neg().divmod(S,E),"mod"!==E&&(z=V.div.neg()),"div"!==E&&(N=V.mod.neg(),D&&0!==N.negative&&N.iadd(S)),{div:z,mod:N}):0===this.negative&&0!==S.negative?(V=this.divmod(S.neg(),E),"mod"!==E&&(z=V.div.neg()),{div:z,mod:V.mod}):0!=(this.negative&S.negative)?(V=this.neg().divmod(S.neg(),E),"div"!==E&&(N=V.mod.neg(),D&&0!==N.negative&&N.isub(S)),{div:V.div,mod:N}):S.length>this.length||this.cmp(S)<0?{div:new t(0),mod:this}:1===S.length?"div"===E?{div:this.divn(S.words[0]),mod:null}:"mod"===E?{div:null,mod:new t(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new t(this.modn(S.words[0]))}:this._wordDiv(S,E);var z,N,V},t.prototype.div=function(S){return this.divmod(S,"div",!1).div},t.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},t.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},t.prototype.divRound=function(S){var E=this.divmod(S);if(E.mod.isZero())return E.div;var D=0!==E.div.negative?E.mod.isub(S):E.mod,z=S.ushrn(1),N=S.andln(1),V=D.cmp(z);return V<0||1===N&&0===V?E.div:0!==E.div.negative?E.div.isubn(1):E.div.iaddn(1)},t.prototype.modn=function(S){r(S<=67108863);for(var E=(1<<26)%S,D=0,z=this.length-1;z>=0;z--)D=(E*D+(0|this.words[z]))%S;return D},t.prototype.idivn=function(S){r(S<=67108863);for(var E=0,D=this.length-1;D>=0;D--){var z=(0|this.words[D])+67108864*E;this.words[D]=z/S|0,E=z%S}return this.strip()},t.prototype.divn=function(S){return this.clone().idivn(S)},t.prototype.egcd=function(S){r(0===S.negative),r(!S.isZero());var E=this,D=S.clone();E=0!==E.negative?E.umod(S):E.clone();for(var z=new t(1),N=new t(0),V=new t(0),X=new t(1),J=0;E.isEven()&&D.isEven();)E.iushrn(1),D.iushrn(1),++J;for(var G=D.clone(),Z=E.clone();!E.isZero();){for(var re=0,j=1;0==(E.words[0]&j)&&re<26;++re,j<<=1);if(re>0)for(E.iushrn(re);re-- >0;)(z.isOdd()||N.isOdd())&&(z.iadd(G),N.isub(Z)),z.iushrn(1),N.iushrn(1);for(var B=0,H=1;0==(D.words[0]&H)&&B<26;++B,H<<=1);if(B>0)for(D.iushrn(B);B-- >0;)(V.isOdd()||X.isOdd())&&(V.iadd(G),X.isub(Z)),V.iushrn(1),X.iushrn(1);E.cmp(D)>=0?(E.isub(D),z.isub(V),N.isub(X)):(D.isub(E),V.isub(z),X.isub(N))}return{a:V,b:X,gcd:D.iushln(J)}},t.prototype._invmp=function(S){r(0===S.negative),r(!S.isZero());var E=this,D=S.clone();E=0!==E.negative?E.umod(S):E.clone();for(var z,N=new t(1),V=new t(0),X=D.clone();E.cmpn(1)>0&&D.cmpn(1)>0;){for(var J=0,G=1;0==(E.words[0]&G)&&J<26;++J,G<<=1);if(J>0)for(E.iushrn(J);J-- >0;)N.isOdd()&&N.iadd(X),N.iushrn(1);for(var Z=0,re=1;0==(D.words[0]&re)&&Z<26;++Z,re<<=1);if(Z>0)for(D.iushrn(Z);Z-- >0;)V.isOdd()&&V.iadd(X),V.iushrn(1);E.cmp(D)>=0?(E.isub(D),N.isub(V)):(D.isub(E),V.isub(N))}return(z=0===E.cmpn(1)?N:V).cmpn(0)<0&&z.iadd(S),z},t.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var E=this.clone(),D=S.clone();E.negative=0,D.negative=0;for(var z=0;E.isEven()&&D.isEven();z++)E.iushrn(1),D.iushrn(1);for(;;){for(;E.isEven();)E.iushrn(1);for(;D.isEven();)D.iushrn(1);var N=E.cmp(D);if(N<0){var V=E;E=D,D=V}else if(0===N||0===D.cmpn(1))break;E.isub(D)}return D.iushln(z)},t.prototype.invm=function(S){return this.egcd(S).a.umod(S)},t.prototype.isEven=function(){return 0==(1&this.words[0])},t.prototype.isOdd=function(){return 1==(1&this.words[0])},t.prototype.andln=function(S){return this.words[0]&S},t.prototype.bincn=function(S){r("number"==typeof S);var E=S%26,D=(S-E)/26,z=1<<E;if(this.length<=D)return this._expand(D+1),this.words[D]|=z,this;for(var N=z,V=D;0!==N&&V<this.length;V++){var X=0|this.words[V];N=(X+=N)>>>26,this.words[V]=X&=67108863}return 0!==N&&(this.words[V]=N,this.length++),this},t.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},t.prototype.cmpn=function(S){var E,D=S<0;if(0!==this.negative&&!D)return-1;if(0===this.negative&&D)return 1;if(this.strip(),this.length>1)E=1;else{D&&(S=-S),r(S<=67108863,"Number is too big");var z=0|this.words[0];E=z===S?0:z<S?-1:1}return 0!==this.negative?0|-E:E},t.prototype.cmp=function(S){if(0!==this.negative&&0===S.negative)return-1;if(0===this.negative&&0!==S.negative)return 1;var E=this.ucmp(S);return 0!==this.negative?0|-E:E},t.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var E=0,D=this.length-1;D>=0;D--){var z=0|this.words[D],N=0|S.words[D];if(z!==N){z<N?E=-1:z>N&&(E=1);break}}return E},t.prototype.gtn=function(S){return 1===this.cmpn(S)},t.prototype.gt=function(S){return 1===this.cmp(S)},t.prototype.gten=function(S){return this.cmpn(S)>=0},t.prototype.gte=function(S){return this.cmp(S)>=0},t.prototype.ltn=function(S){return-1===this.cmpn(S)},t.prototype.lt=function(S){return-1===this.cmp(S)},t.prototype.lten=function(S){return this.cmpn(S)<=0},t.prototype.lte=function(S){return this.cmp(S)<=0},t.prototype.eqn=function(S){return 0===this.cmpn(S)},t.prototype.eq=function(S){return 0===this.cmp(S)},t.red=function(S){return new O(S)},t.prototype.toRed=function(S){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),S.convertTo(this)._forceRed(S)},t.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(S){return this.red=S,this},t.prototype.forceRed=function(S){return r(!this.red,"Already a number in reduction context"),this._forceRed(S)},t.prototype.redAdd=function(S){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},t.prototype.redIAdd=function(S){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},t.prototype.redSub=function(S){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},t.prototype.redISub=function(S){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},t.prototype.redShl=function(S){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},t.prototype.redMul=function(S){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},t.prototype.redIMul=function(S){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},t.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(S){return r(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var T={k256:null,p224:null,p192:null,p25519:null};function _(S,E){this.name=S,this.p=new t(E,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(S){if("string"==typeof S){var E=t._prime(S);this.m=E.p,this.prime=E}else r(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function P(S){O.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var S=new t(null);return S.words=new Array(Math.ceil(this.n/13)),S},_.prototype.ireduce=function(S){var E,D=S;do{this.split(D,this.tmp),E=(D=(D=this.imulK(D)).iadd(this.tmp)).bitLength()}while(E>this.n);var z=E<this.n?-1:D.ucmp(this.p);return 0===z?(D.words[0]=0,D.length=1):z>0?D.isub(this.p):void 0!==D.strip?D.strip():D._strip(),D},_.prototype.split=function(S,E){S.iushrn(this.n,0,E)},_.prototype.imulK=function(S){return S.imul(this.k)},o(k,_),k.prototype.split=function(S,E){for(var D=Math.min(S.length,9),z=0;z<D;z++)E.words[z]=S.words[z];if(E.length=D,S.length<=9)return S.words[0]=0,void(S.length=1);var N=S.words[9];for(E.words[E.length++]=4194303&N,z=10;z<S.length;z++){var V=0|S.words[z];S.words[z-10]=(4194303&V)<<4|N>>>22,N=V}S.words[z-10]=N>>>=22,S.length-=0===N&&S.length>10?10:9},k.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var E=0,D=0;D<S.length;D++){var z=0|S.words[D];S.words[D]=67108863&(E+=977*z),E=64*z+(E/67108864|0)}return 0===S.words[S.length-1]&&(S.length--,0===S.words[S.length-1]&&S.length--),S},o(w,_),o(C,_),o(A,_),A.prototype.imulK=function(S){for(var E=0,D=0;D<S.length;D++){var z=19*(0|S.words[D])+E,N=67108863&z;z>>>=26,S.words[D]=N,E=z}return 0!==E&&(S.words[S.length++]=E),S},t._prime=function(S){if(T[S])return T[S];var E;if("k256"===S)E=new k;else if("p224"===S)E=new w;else if("p192"===S)E=new C;else{if("p25519"!==S)throw new Error("Unknown prime "+S);E=new A}return T[S]=E,E},O.prototype._verify1=function(S){r(0===S.negative,"red works only with positives"),r(S.red,"red works only with red numbers")},O.prototype._verify2=function(S,E){r(0==(S.negative|E.negative),"red works only with positives"),r(S.red&&S.red===E.red,"red works only with red numbers")},O.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},O.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},O.prototype.add=function(S,E){this._verify2(S,E);var D=S.add(E);return D.cmp(this.m)>=0&&D.isub(this.m),D._forceRed(this)},O.prototype.iadd=function(S,E){this._verify2(S,E);var D=S.iadd(E);return D.cmp(this.m)>=0&&D.isub(this.m),D},O.prototype.sub=function(S,E){this._verify2(S,E);var D=S.sub(E);return D.cmpn(0)<0&&D.iadd(this.m),D._forceRed(this)},O.prototype.isub=function(S,E){this._verify2(S,E);var D=S.isub(E);return D.cmpn(0)<0&&D.iadd(this.m),D},O.prototype.shl=function(S,E){return this._verify1(S),this.imod(S.ushln(E))},O.prototype.imul=function(S,E){return this._verify2(S,E),this.imod(S.imul(E))},O.prototype.mul=function(S,E){return this._verify2(S,E),this.imod(S.mul(E))},O.prototype.isqr=function(S){return this.imul(S,S.clone())},O.prototype.sqr=function(S){return this.mul(S,S)},O.prototype.sqrt=function(S){if(S.isZero())return S.clone();var E=this.m.andln(3);if(r(E%2==1),3===E){var D=this.m.add(new t(1)).iushrn(2);return this.pow(S,D)}for(var z=this.m.subn(1),N=0;!z.isZero()&&0===z.andln(1);)N++,z.iushrn(1);r(!z.isZero());var V=new t(1).toRed(this),X=V.redNeg(),J=this.m.subn(1).iushrn(1),G=this.m.bitLength();for(G=new t(2*G*G).toRed(this);0!==this.pow(G,J).cmp(X);)G.redIAdd(X);for(var Z=this.pow(G,z),re=this.pow(S,z.addn(1).iushrn(1)),j=this.pow(S,z),B=N;0!==j.cmp(V);){for(var H=j,ee=0;0!==H.cmp(V);ee++)H=H.redSqr();r(ee<B);var U=this.pow(Z,new t(1).iushln(B-ee-1));re=re.redMul(U),Z=U.redSqr(),j=j.redMul(Z),B=ee}return re},O.prototype.invm=function(S){var E=S._invmp(this.m);return 0!==E.negative?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},O.prototype.pow=function(S,E){if(E.isZero())return new t(1).toRed(this);if(0===E.cmpn(1))return S.clone();var D=new Array(16);D[0]=new t(1).toRed(this),D[1]=S;for(var z=2;z<D.length;z++)D[z]=this.mul(D[z-1],S);var N=D[0],V=0,X=0,J=E.bitLength()%26;for(0===J&&(J=26),z=E.length-1;z>=0;z--){for(var G=E.words[z],Z=J-1;Z>=0;Z--){var re=G>>Z&1;N!==D[0]&&(N=this.sqr(N)),0!==re||0!==V?(V<<=1,V|=re,(4==++X||0===z&&0===Z)&&(N=this.mul(N,D[V]),X=0,V=0)):X=0}J=26}return N},O.prototype.convertTo=function(S){var E=S.umod(this.m);return E===S?E.clone():E},O.prototype.convertFrom=function(S){var E=S.clone();return E.red=null,E},t.mont=function(S){return new P(S)},o(P,O),P.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},P.prototype.convertFrom=function(S){var E=this.imod(S.mul(this.rinv));return E.red=null,E},P.prototype.imul=function(S,E){if(S.isZero()||E.isZero())return S.words[0]=0,S.length=1,S;var D=S.imul(E),z=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=D.isub(z).iushrn(this.shift),V=N;return N.cmp(this.m)>=0?V=N.isub(this.m):N.cmpn(0)<0&&(V=N.iadd(this.m)),V._forceRed(this)},P.prototype.mul=function(S,E){if(S.isZero()||E.isZero())return new t(0)._forceRed(this);var D=S.mul(E),z=D.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=D.isub(z).iushrn(this.shift),V=N;return N.cmp(this.m)>=0?V=N.isub(this.m):N.cmpn(0)<0&&(V=N.iadd(this.m)),V._forceRed(this)},P.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===b||b,this)},{buffer:2}],34:[function(v,b,h){"use strict";b.exports=function(e){var n,r,o,t=e.length,d=0;for(n=0;n<t;++n)d+=e[n].length;var a=new Array(d),i=0;for(n=0;n<t;++n){var s=e[n],c=s.length;for(r=0;r<c;++r){var l=a[i++]=new Array(c-1),p=0;for(o=0;o<c;++o)o!==r&&(l[p++]=s[o]);if(1&r){var g=l[1];l[1]=l[0],l[0]=g}}}return a}},{}],35:[function(v,b,h){"use strict";b.exports=function(l,p,g){switch(arguments.length){case 1:return s(l);case 2:return"function"==typeof p?a(l,l,p,!0):c(l,p);case 3:return a(l,p,g,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,n=v("typedarray-pool"),r=v("./lib/sweep"),o=v("./lib/intersect");function t(l,p){for(var g=0;g<l;++g)if(!(p[g]<=p[g+l]))return!0;return!1}function d(l,p,g,u){for(var x=0,f=0,T=0,_=l.length;T<_;++T){var k=l[T];if(!t(p,k)){for(var w=0;w<2*p;++w)g[x++]=k[w];u[f++]=T}}return f}function a(l,p,g,u){var x=l.length,f=p.length;if(!(x<=0||f<=0)){var T=l[0].length>>>1;if(!(T<=0)){var _,k=n.mallocDouble(2*T*x),w=n.mallocInt32(x);if((x=d(l,T,k,w))>0){if(1===T&&u)r.init(x),_=r.sweepComplete(T,g,0,x,k,w,0,x,k,w);else{var C=n.mallocDouble(2*T*f),A=n.mallocInt32(f);(f=d(p,T,C,A))>0&&(r.init(x+f),_=1===T?r.sweepBipartite(T,g,0,x,k,w,0,f,C,A):o(T,g,u,x,k,w,f,C,A),n.free(C),n.free(A))}n.free(k),n.free(w)}return _}}}function i(l,p){e.push([l,p])}function s(l){return e=[],a(l,l,i,!0),e}function c(l,p){return e=[],a(l,p,i,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(v,b,h){"use strict";function e(n){return n?function(r,o,t,d,a,i,s,c,l,p,g){return a-d>l-c?function(u,x,f,T,_,k,w,C,A,O,P){for(var S=2*u,E=T,D=S*T;E<_;++E,D+=S){var z=k[x+D],N=k[x+D+u],V=w[E];e:for(var X=C,J=S*C;X<A;++X,J+=S){var re=P[X];if(!(O[x+J+u]<z||N<O[x+J])){for(var j=x+1;j<u;++j)if(k[j+u+D]<O[j+J]||O[j+u+J]<k[j+D])continue e;var $=f(V,re);if(void 0!==$)return $}}}}(r,o,t,d,a,i,s,c,l,p,g):function(u,x,f,T,_,k,w,C,A,O,P){for(var S=2*u,E=C,D=S*C;E<A;++E,D+=S){var z=O[x+D],N=O[x+D+u],V=P[E];e:for(var X=T,J=S*T;X<_;++X,J+=S){var re=w[X];if(!(N<k[x+J]||k[x+J+u]<z)){for(var j=x+1;j<u;++j)if(k[j+u+J]<O[j+D]||O[j+u+D]<k[j+J])continue e;var $=f(re,V);if(void 0!==$)return $}}}}(r,o,t,d,a,i,s,c,l,p,g)}:function(r,o,t,d,a,i,s,c,l,p,g,u){return i-a>p-l?d?function(x,f,T,_,k,w,C,A,O,P,S){for(var E=2*x,D=_,z=E*_;D<k;++D,z+=E){var N=w[f+z],V=w[f+z+x],X=C[D];e:for(var J=A,G=E*A;J<O;++J,G+=E){var Z=P[f+G],re=S[J];if(!(Z<=N||V<Z)){for(var j=f+1;j<x;++j)if(w[j+x+z]<P[j+G]||P[j+x+G]<w[j+z])continue e;var $=T(re,X);if(void 0!==$)return $}}}}(r,o,t,a,i,s,c,l,p,g,u):function(x,f,T,_,k,w,C,A,O,P,S){for(var E=2*x,D=_,z=E*_;D<k;++D,z+=E){var N=w[f+z],V=w[f+z+x],X=C[D];e:for(var J=A,G=E*A;J<O;++J,G+=E){var Z=P[f+G],re=S[J];if(!(Z<N||V<Z)){for(var j=f+1;j<x;++j)if(w[j+x+z]<P[j+G]||P[j+x+G]<w[j+z])continue e;var $=T(X,re);if(void 0!==$)return $}}}}(r,o,t,a,i,s,c,l,p,g,u):d?function(x,f,T,_,k,w,C,A,O,P,S){for(var E=2*x,D=A,z=E*A;D<O;++D,z+=E){var N=P[f+z],V=S[D];e:for(var X=_,J=E*_;X<k;++X,J+=E){var re=C[X];if(!(N<=w[f+J]||w[f+J+x]<N)){for(var j=f+1;j<x;++j)if(w[j+x+J]<P[j+z]||P[j+x+z]<w[j+J])continue e;var $=T(V,re);if(void 0!==$)return $}}}}(r,o,t,a,i,s,c,l,p,g,u):function(x,f,T,_,k,w,C,A,O,P,S){for(var E=2*x,D=A,z=E*A;D<O;++D,z+=E){var N=P[f+z],V=S[D];e:for(var X=_,J=E*_;X<k;++X,J+=E){var re=C[X];if(!(N<w[f+J]||w[f+J+x]<N)){for(var j=f+1;j<x;++j)if(w[j+x+J]<P[j+z]||P[j+x+z]<w[j+J])continue e;var $=T(re,V);if(void 0!==$)return $}}}}(r,o,t,a,i,s,c,l,p,g,u)}}h.partial=e(!1),h.full=e(!0)},{}],37:[function(v,b,h){"use strict";b.exports=function(w,C,A,O,P,S,E,D,z){!function(Se,Me){var Ie=8*n.log2(Me+1)*(Se+1)|0,Fe=n.nextPow2(6*Ie);x.length<Fe&&(e.free(x),x=e.mallocInt32(Fe));var Ne=n.nextPow2(2*Ie);f.length<Ne&&(e.free(f),f=e.mallocDouble(Ne))}(w,O+E);var N,V=0,X=2*w;for(T(V++,0,0,O,0,E,A?16:0,-1/0,1/0),A||T(V++,0,0,E,0,O,1,-1/0,1/0);V>0;){var J=6*(V-=1),G=x[J],Z=x[J+1],re=x[J+2],j=x[J+3],B=x[J+4],H=x[J+5],ee=2*V,U=f[ee],$=f[ee+1],q=1&H,te=!!(16&H),ne=P,se=S,ie=D,ue=z;if(q&&(ne=D,se=z,ie=P,ue=S),!(2&H&&(re=l(w,G,Z,re,ne,se,$),Z>=re)||4&H&&(Z=p(w,G,Z,re,ne,se,U))>=re)){var le=re-Z,de=B-j;if(te){if(w*le*(le+de)<1<<22){if(void 0!==(N=d.scanComplete(w,G,C,Z,re,ne,se,j,B,ie,ue)))return N;continue}}else{if(w*Math.min(le,de)<128){if(void 0!==(N=o(w,G,C,q,Z,re,ne,se,j,B,ie,ue)))return N;continue}if(w*le*de<1<<22){if(void 0!==(N=d.scanBipartite(w,G,C,q,Z,re,ne,se,j,B,ie,ue)))return N;continue}}var be=s(w,G,Z,re,ne,se,U,$);if(Z<be)if(w*(be-Z)<128){if(void 0!==(N=t(w,G+1,C,Z,be,ne,se,j,B,ie,ue)))return N}else if(G===w-2){if(void 0!==(N=q?d.sweepBipartite(w,C,j,B,ie,ue,Z,be,ne,se):d.sweepBipartite(w,C,Z,be,ne,se,j,B,ie,ue)))return N}else T(V++,G+1,Z,be,j,B,q,-1/0,1/0),T(V++,G+1,j,B,Z,be,1^q,-1/0,1/0);if(be<re){var _e=a(w,G,j,B,ie,ue),xe=ie[X*_e+G],Ee=c(w,G,_e,B,ie,ue,xe);if(Ee<B&&T(V++,G,be,re,Ee,B,(4|q)+(te?16:0),xe,$),j<_e&&T(V++,G,be,re,j,_e,(2|q)+(te?16:0),U,xe),_e+1===Ee){if(void 0!==(N=te?k(w,G,C,be,re,ne,se,_e,ie,ue[_e]):_(w,G,C,q,be,re,ne,se,_e,ie,ue[_e])))return N}else if(_e<Ee){var he;if(te){if(be<(he=g(w,G,be,re,ne,se,xe))){var me=c(w,G,be,he,ne,se,xe);if(G===w-2){if(be<me&&void 0!==(N=d.sweepComplete(w,C,be,me,ne,se,_e,Ee,ie,ue))||me<he&&void 0!==(N=d.sweepBipartite(w,C,me,he,ne,se,_e,Ee,ie,ue)))return N}else be<me&&T(V++,G+1,be,me,_e,Ee,16,-1/0,1/0),me<he&&(T(V++,G+1,me,he,_e,Ee,0,-1/0,1/0),T(V++,G+1,_e,Ee,me,he,1,-1/0,1/0))}}else be<(he=q?u(w,G,be,re,ne,se,xe):g(w,G,be,re,ne,se,xe))&&(G===w-2?N=q?d.sweepBipartite(w,C,_e,Ee,ie,ue,be,he,ne,se):d.sweepBipartite(w,C,be,he,ne,se,_e,Ee,ie,ue):(T(V++,G+1,be,he,_e,Ee,q,-1/0,1/0),T(V++,G+1,_e,Ee,be,he,1^q,-1/0,1/0)))}}}}};var e=v("typedarray-pool"),n=v("bit-twiddle"),r=v("./brute"),o=r.partial,t=r.full,d=v("./sweep"),a=v("./median"),i=v("./partition"),s=i("!(lo>=p0)&&!(p1>=hi)"),c=i("lo===p0"),l=i("lo<p0"),p=i("hi<=p0"),g=i("lo<=p0&&p0<=hi"),u=i("lo<p0&&p0<=hi"),x=e.mallocInt32(1024),f=e.mallocDouble(1024);function T(w,C,A,O,P,S,E,D,z){var N=6*w;x[N]=C,x[N+1]=A,x[N+2]=O,x[N+3]=P,x[N+4]=S,x[N+5]=E;var V=2*w;f[V]=D,f[V+1]=z}function _(w,C,A,O,P,S,E,D,z,N,V){var X=2*w,J=z*X,G=N[J+C];e:for(var Z=P,re=P*X;Z<S;++Z,re+=X){var j=E[re+C],B=E[re+C+w];if(!(G<j||B<G||O&&G===j)){for(var H,ee=D[Z],U=C+1;U<w;++U)if(j=E[re+U],(B=E[re+U+w])<N[J+U]||N[J+U+w]<j)continue e;if(void 0!==(H=O?A(V,ee):A(ee,V)))return H}}}function k(w,C,A,O,P,S,E,D,z,N){var V=2*w,X=D*V,J=z[X+C];e:for(var G=O,Z=O*V;G<P;++G,Z+=V){var re=E[G];if(re!==N){var j=S[Z+C],B=S[Z+C+w];if(!(J<j||B<J)){for(var H=C+1;H<w;++H)if(j=S[Z+H],(B=S[Z+H+w])<z[X+H]||z[X+H+w]<j)continue e;var $=A(re,N);if(void 0!==$)return $}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(v,b,h){"use strict";b.exports=function(r,o,t,d,a,i){if(d<=t+1)return t;for(var s=t,c=d,l=d+t>>>1,p=2*r,g=l,u=a[p*l+o];s<c;){if(c-s<8){n(r,o,s,c,a,i),u=a[p*l+o];break}var x=c-s,f=Math.random()*x+s|0,T=a[p*f+o],_=Math.random()*x+s|0,k=a[p*_+o],w=Math.random()*x+s|0,C=a[p*w+o];T<=k?C>=k?(g=_,u=k):T>=C?(g=f,u=T):(g=w,u=C):k>=C?(g=_,u=k):C>=T?(g=f,u=T):(g=w,u=C);for(var A=p*(c-1),O=p*g,P=0;P<p;++P,++A,++O){var S=a[A];a[A]=a[O],a[O]=S}var E=i[c-1];for(i[c-1]=i[g],i[g]=E,A=p*(c-1),O=p*(g=e(r,o,s,c-1,a,i,u)),P=0;P<p;++P,++A,++O)S=a[A],a[A]=a[O],a[O]=S;if(E=i[c-1],i[c-1]=i[g],i[g]=E,l<g){for(c=g-1;s<c&&a[p*(c-1)+o]===u;)c-=1;c+=1}else{if(!(g<l))break;for(s=g+1;s<c&&a[p*s+o]===u;)s+=1}}return e(r,o,t,l,a,i,a[p*l+o])};var e=v("./partition")("lo<p0");function n(r,o,t,d,a,i){for(var s=2*r,c=s*(t+1)+o,l=t+1;l<d;++l,c+=s)for(var p=a[c],g=l,u=s*(l-1);g>t&&a[u+o]>p;--g,u-=s){for(var x=u,f=u+s,T=0;T<s;++T,++x,++f){var _=a[x];a[x]=a[f],a[f]=_}var k=i[g];i[g]=i[g-1],i[g-1]=k}}},{"./partition":39}],39:[function(v,b,h){"use strict";b.exports=function(n){return e[n]};var e={"lo===p0":function(n,r,o,t,d,a,i){for(var s=2*n,c=s*o,l=c,p=o,g=r,u=o;t>u;++u,c+=s)if(d[c+g]===i)if(p===u)p+=1,l+=s;else{for(var x=0;s>x;++x){var f=d[c+x];d[c+x]=d[l],d[l++]=f}var T=a[u];a[u]=a[p],a[p++]=T}return p},"lo<p0":function(n,r,o,t,d,a,i){for(var s=2*n,c=s*o,l=c,p=o,g=r,u=o;t>u;++u,c+=s)if(d[c+g]<i)if(p===u)p+=1,l+=s;else{for(var x=0;s>x;++x){var f=d[c+x];d[c+x]=d[l],d[l++]=f}var T=a[u];a[u]=a[p],a[p++]=T}return p},"lo<=p0":function(n,r,o,t,d,a,i){for(var s=2*n,c=s*o,l=c,p=o,g=n+r,u=o;t>u;++u,c+=s)if(d[c+g]<=i)if(p===u)p+=1,l+=s;else{for(var x=0;s>x;++x){var f=d[c+x];d[c+x]=d[l],d[l++]=f}var T=a[u];a[u]=a[p],a[p++]=T}return p},"hi<=p0":function(n,r,o,t,d,a,i){for(var s=2*n,c=s*o,l=c,p=o,g=n+r,u=o;t>u;++u,c+=s)if(d[c+g]<=i)if(p===u)p+=1,l+=s;else{for(var x=0;s>x;++x){var f=d[c+x];d[c+x]=d[l],d[l++]=f}var T=a[u];a[u]=a[p],a[p++]=T}return p},"lo<p0&&p0<=hi":function(n,r,o,t,d,a,i){for(var s=2*n,c=s*o,l=c,p=o,g=r,u=n+r,x=o;t>x;++x,c+=s)if(d[c+g]<i&&i<=d[c+u])if(p===x)p+=1,l+=s;else{for(var _=0;s>_;++_){var k=d[c+_];d[c+_]=d[l],d[l++]=k}var w=a[x];a[x]=a[p],a[p++]=w}return p},"lo<=p0&&p0<=hi":function(n,r,o,t,d,a,i){for(var s=2*n,c=s*o,l=c,p=o,g=r,u=n+r,x=o;t>x;++x,c+=s)if(d[c+g]<=i&&i<=d[c+u])if(p===x)p+=1,l+=s;else{for(var _=0;s>_;++_){var k=d[c+_];d[c+_]=d[l],d[l++]=k}var w=a[x];a[x]=a[p],a[p++]=w}return p},"!(lo>=p0)&&!(p1>=hi)":function(n,r,o,t,d,a,i,s){for(var c=2*n,l=c*o,p=l,g=o,u=r,x=n+r,f=o;t>f;++f,l+=c)if(!(d[l+u]>=i||s>=d[l+x]))if(g===f)g+=1,p+=c;else{for(var k=0;c>k;++k){var w=d[l+k];d[l+k]=d[p],d[p++]=w}var C=a[f];a[f]=a[g],a[g++]=C}return g}}},{}],40:[function(v,b,h){"use strict";function e(i,s,c){for(var l=2*(i+1),p=i+1;p<=s;++p){for(var g=c[l++],u=c[l++],x=p,f=l-2;x-- >i;){var T=c[f-2],_=c[f-1];if(T<g||T===g&&_<u)break;c[f]=T,c[f+1]=_,f-=2}c[f]=g,c[f+1]=u}}function n(i,s,c){var l=c[i*=2],p=c[i+1];c[i]=c[s*=2],c[i+1]=c[s+1],c[s]=l,c[s+1]=p}function r(i,s,c){c[i*=2]=c[s*=2],c[i+1]=c[s+1]}function o(i,s,c,l){c*=2;var p=l[i*=2],g=l[i+1];l[i]=l[s*=2],l[i+1]=l[s+1],l[s]=l[c],l[s+1]=l[c+1],l[c]=p,l[c+1]=g}function t(i,s,c,l,p){p[i*=2]=p[s*=2],p[s]=c,p[i+1]=p[s+1],p[s+1]=l}function d(i,s,c){var l=c[i*=2],p=c[s*=2];return!(l<p)&&(l!==p||c[i+1]>c[s+1])}function a(i,s,c,l){var p=l[i*=2];return p<s||p===s&&l[i+1]<c}b.exports=function(i,s){s<=128?e(0,s-1,i):function c(l,p,g){var u=(p-l+1)/6|0,x=l+u,f=p-u,T=l+p>>1,_=T-u,k=T+u,w=x,C=_,A=T,O=k,P=f,S=l+1,E=p-1,D=0;d(w,C,g)&&(D=w,w=C,C=D),d(O,P,g)&&(D=O,O=P,P=D),d(w,A,g)&&(D=w,w=A,A=D),d(C,A,g)&&(D=C,C=A,A=D),d(w,O,g)&&(D=w,w=O,O=D),d(A,O,g)&&(D=A,A=O,O=D),d(C,P,g)&&(D=C,C=P,P=D),d(C,A,g)&&(D=C,C=A,A=D),d(O,P,g)&&(D=O,O=P,P=D);for(var z=g[2*C],N=g[2*C+1],V=g[2*O],X=g[2*O+1],J=2*w,G=2*A,Z=2*P,re=2*x,j=2*T,B=2*f,H=0;H<2;++H){var U=g[G+H],$=g[Z+H];g[re+H]=g[J+H],g[j+H]=U,g[B+H]=$}r(_,l,g),r(k,p,g);for(var q=S;q<=E;++q)if(a(q,z,N,g))q!==S&&n(q,S,g),++S;else if(!a(q,V,X,g))for(;;){if(a(E,V,X,g)){a(E,z,N,g)?(o(q,S,E,g),++S,--E):(n(q,E,g),--E);break}if(--E<q)break}t(l,S-1,z,N,g),t(p,E+1,V,X,g),S-2-l<=32?e(l,S-2,g):c(l,S-2,g),p-(E+2)<=32?e(E+2,p,g):c(E+2,p,g),E-S<=32?e(S,E,g):c(S,E,g)}(0,s-1,i)}},{}],41:[function(v,b,h){"use strict";b.exports={init:function(g){var u=n.nextPow2(g);o.length<u&&(e.free(o),o=e.mallocInt32(u)),t.length<u&&(e.free(t),t=e.mallocInt32(u)),d.length<u&&(e.free(d),d=e.mallocInt32(u)),a.length<u&&(e.free(a),a=e.mallocInt32(u)),i.length<u&&(e.free(i),i=e.mallocInt32(u)),s.length<u&&(e.free(s),s=e.mallocInt32(u));var x=8*u;c.length<x&&(e.free(c),c=e.mallocDouble(x))},sweepBipartite:function(g,u,x,f,T,_,k,w,C,A){for(var O=0,P=2*g,S=g-1,E=P-1,D=x;D<f;++D){var z=_[D],N=P*D;c[O++]=T[N+S],c[O++]=-(z+1),c[O++]=T[N+E],c[O++]=z}for(D=k;D<w;++D){z=A[D]+(1<<28);var V=P*D;c[O++]=C[V+S],c[O++]=-z,c[O++]=C[V+E],c[O++]=z}var X=O>>>1;r(c,X);var J=0,G=0;for(D=0;D<X;++D){var Z=0|c[2*D+1];if(Z>=1<<28)l(d,a,G--,Z=Z-(1<<28)|0);else if(Z>=0)l(o,t,J--,Z);else if(Z<=-(1<<28)){Z=-Z-(1<<28)|0;for(var re=0;re<J;++re)if(void 0!==(j=u(o[re],Z)))return j;p(d,a,G++,Z)}else{for(Z=-Z-1|0,re=0;re<G;++re){var j;if(void 0!==(j=u(Z,d[re])))return j}p(o,t,J++,Z)}}},sweepComplete:function(g,u,x,f,T,_,k,w,C,A){for(var O=0,P=2*g,S=g-1,E=P-1,D=x;D<f;++D){var z=_[D]+1<<1,N=P*D;c[O++]=T[N+S],c[O++]=-z,c[O++]=T[N+E],c[O++]=z}for(D=k;D<w;++D){z=A[D]+1<<1;var V=P*D;c[O++]=C[V+S],c[O++]=1|-z,c[O++]=C[V+E],c[O++]=1|z}var X=O>>>1;r(c,X);var J=0,G=0,Z=0;for(D=0;D<X;++D){var re=0|c[2*D+1],j=1&re;if(D<X-1&&re>>1==c[2*D+3]>>1&&(j=2,D+=1),re<0){for(var B=-(re>>1)-1,H=0;H<Z;++H)if(void 0!==(ee=u(i[H],B)))return ee;if(0!==j)for(H=0;H<J;++H)if(void 0!==(ee=u(o[H],B)))return ee;if(1!==j)for(H=0;H<G;++H){var ee;if(void 0!==(ee=u(d[H],B)))return ee}0===j?p(o,t,J++,B):1===j?p(d,a,G++,B):2===j&&p(i,s,Z++,B)}else B=(re>>1)-1,0===j?l(o,t,J--,B):1===j?l(d,a,G--,B):2===j&&l(i,s,Z--,B)}},scanBipartite:function(g,u,x,f,T,_,k,w,C,A,O,P){var S=0,E=2*g,D=u,z=u+g,N=1,V=1;f?V=1<<28:N=1<<28;for(var X=T;X<_;++X){var J=X+N,G=E*X;c[S++]=k[G+D],c[S++]=-J,c[S++]=k[G+z],c[S++]=J}for(X=C;X<A;++X)J=X+V,c[S++]=O[E*X+D],c[S++]=-J;var re=S>>>1;r(c,re);var j=0;for(X=0;X<re;++X){var B=0|c[2*X+1];if(B<0){var H=!1;if((J=-B)>=1<<28?(H=!f,J-=1<<28):(H=!!f,J-=1),H)p(o,t,j++,J);else{var ee=P[J],U=E*J,$=O[U+u+1],q=O[U+u+1+g];e:for(var te=0;te<j;++te){var ne=o[te],se=E*ne;if(!(q<k[se+u+1]||k[se+u+1+g]<$)){for(var ie=u+2;ie<g;++ie)if(O[U+ie+g]<k[se+ie]||k[se+ie+g]<O[U+ie])continue e;var ue,le=w[ne];if(void 0!==(ue=f?x(ee,le):x(le,ee)))return ue}}}}else l(o,t,j--,B-N)}},scanComplete:function(g,u,x,f,T,_,k,w,C,A,O){for(var P=0,S=2*g,E=u,D=u+g,z=f;z<T;++z){var N=z+268435456,V=S*z;c[P++]=_[V+E],c[P++]=-N,c[P++]=_[V+D],c[P++]=N}for(z=w;z<C;++z)N=z+1,c[P++]=A[S*z+E],c[P++]=-N;var J=P>>>1;r(c,J);var G=0;for(z=0;z<J;++z){var Z=0|c[2*z+1];if(Z<0)if((N=-Z)>=1<<28)o[G++]=N-(1<<28);else{var re=O[N-=1],j=S*N,B=A[j+u+1],H=A[j+u+1+g];e:for(var ee=0;ee<G;++ee){var U=o[ee],$=k[U];if($===re)break;var q=S*U;if(!(H<_[q+u+1]||_[q+u+1+g]<B)){for(var te=u+2;te<g;++te)if(A[j+te+g]<_[q+te]||_[q+te+g]<A[j+te])continue e;var ne=x($,re);if(void 0!==ne)return ne}}}else{for(N=Z-(1<<28),ee=G-1;ee>=0;--ee)if(o[ee]===N){for(te=ee+1;te<G;++te)o[te-1]=o[te];break}--G}}}};var e=v("typedarray-pool"),n=v("bit-twiddle"),r=v("./sort"),o=e.mallocInt32(1024),t=e.mallocInt32(1024),d=e.mallocInt32(1024),a=e.mallocInt32(1024),i=e.mallocInt32(1024),s=e.mallocInt32(1024),c=e.mallocDouble(8192);function l(g,u,x,f){var T=u[f],_=g[x-1];g[T]=_,u[_]=T}function p(g,u,x,f){g[x]=f,u[f]=x}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(v,b,h){"use strict";var e=v("./lib/monotone"),n=v("./lib/triangulation"),r=v("./lib/delaunay"),o=v("./lib/filter");function t(i){return[Math.min(i[0],i[1]),Math.max(i[0],i[1])]}function d(i,s){return i[0]-s[0]||i[1]-s[1]}function a(i,s,c){return s in i?i[s]:c}b.exports=function(i,s,c){Array.isArray(s)?(c=c||{},s=s||[]):(c=s||{},s=[]);var l=!!a(c,"delaunay",!0),p=!!a(c,"interior",!0),g=!!a(c,"exterior",!0),u=!!a(c,"infinity",!1);if(!p&&!g||0===i.length)return[];var x=e(i,s);if(l||p!==g||u){for(var f=n(i.length,s.map(t).sort(d)),T=0;T<x.length;++T){var _=x[T];f.addTriangle(_[0],_[1],_[2])}return l&&r(i,f),g?p?u?o(f,0,u):f.cells():o(f,1,u):o(f,-1)}return x}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(v,b,h){"use strict";var e=v("robust-in-sphere")[4];function n(r,o,t,d,a,i){var s=o.opposite(d,a);if(!(s<0)){if(a<d){var c=d;d=a,a=c,c=i,i=s,s=c}o.isConstraint(d,a)||e(r[d],r[a],r[i],r[s])<0&&t.push(d,a)}}v("binary-search-bounds"),b.exports=function(r,o){for(var t=[],d=r.length,a=o.stars,i=0;i<d;++i)for(var s=a[i],c=1;c<s.length;c+=2)if(!((u=s[c])<i||o.isConstraint(i,u))){for(var l=s[c-1],p=-1,g=1;g<s.length;g+=2)if(s[g-1]===u){p=s[g];break}p<0||e(r[i],r[u],r[l],r[p])<0&&t.push(i,u)}for(;t.length>0;){for(var u=t.pop(),x=(l=-1,p=-1,s=a[i=t.pop()],1);x<s.length;x+=2){var f=s[x-1],T=s[x];f===u?p=T:T===u&&(l=f)}l<0||p<0||e(r[i],r[u],r[l],r[p])>=0||(o.flip(i,u),n(r,o,t,l,i,p),n(r,o,t,i,p,l),n(r,o,t,p,u,l),n(r,o,t,u,l,p))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(v,b,h){"use strict";var e,n=v("binary-search-bounds");function r(t,d,a,i,s,c,l){this.cells=t,this.neighbor=d,this.flags=i,this.constraint=a,this.active=s,this.next=c,this.boundary=l}function o(t,d){return t[0]-d[0]||t[1]-d[1]||t[2]-d[2]}b.exports=function(t,d,a){var i=function(C,A){for(var O=C.cells(),P=O.length,S=0;S<P;++S){var E=(j=O[S])[0],D=j[1],z=j[2];D<z?D<E&&(j[0]=D,j[1]=z,j[2]=E):z<E&&(j[0]=z,j[1]=E,j[2]=D)}O.sort(o);var N=new Array(P);for(S=0;S<N.length;++S)N[S]=0;var V=[],X=[],J=new Array(3*P),G=new Array(3*P),Z=null;A&&(Z=[]);var re=new r(O,J,G,N,V,X,Z);for(S=0;S<P;++S)for(var j=O[S],B=0;B<3;++B){var H=J[3*S+B]=re.locate(D=j[(B+1)%3],E=j[B],C.opposite(D,E)),ee=G[3*S+B]=C.isConstraint(E,D);H<0&&(ee?X.push(S):(V.push(S),N[S]=1),A&&Z.push([D,E,-1]))}return re}(t,a);if(0===d)return a?i.cells.concat(i.boundary):i.cells;for(var s=1,c=i.active,l=i.next,p=i.flags,g=i.cells,u=i.constraint,x=i.neighbor;c.length>0||l.length>0;){for(;c.length>0;){var f=c.pop();if(p[f]!==-s){p[f]=s;for(var T=0;T<3;++T){var _=x[3*f+T];_>=0&&0===p[_]&&(u[3*f+T]?l.push(_):(c.push(_),p[_]=s))}}}var k=l;l=c,c=k,l.length=0,s=-s}var w=function(C,A,O){for(var P=0,S=0;S<C.length;++S)A[S]===O&&(C[P++]=C[S]);return C.length=P,C}(g,p,d);return a?w.concat(i.boundary):w},r.prototype.locate=(e=[0,0,0],function(t,d,a){var i=t,s=d,c=a;return d<a?d<t&&(i=d,s=a,c=t):a<t&&(i=a,s=t,c=d),i<0?-1:(e[0]=i,e[1]=s,e[2]=c,n.eq(this.cells,e,o))})},{"binary-search-bounds":31}],45:[function(v,b,h){"use strict";var e=v("binary-search-bounds"),n=v("robust-orientation")[3];function r(l,p,g,u,x){this.a=l,this.b=p,this.idx=g,this.lowerIds=u,this.upperIds=x}function o(l,p,g,u){this.a=l,this.b=p,this.type=g,this.idx=u}function t(l,p){var g=l.a[0]-p.a[0]||l.a[1]-p.a[1]||l.type-p.type;return g||(0!==l.type&&(g=n(l.a,l.b,p.b))?g:l.idx-p.idx)}function d(l,p){return n(l.a,l.b,p)}function a(l,p,g,u,x){for(var f=e.lt(p,u,d),T=e.gt(p,u,d),_=f;_<T;++_){for(var k=p[_],w=k.lowerIds,C=w.length;C>1&&n(g[w[C-2]],g[w[C-1]],u)>0;)l.push([w[C-1],w[C-2],x]),C-=1;w.length=C,w.push(x);var A=k.upperIds;for(C=A.length;C>1&&n(g[A[C-2]],g[A[C-1]],u)<0;)l.push([A[C-2],A[C-1],x]),C-=1;A.length=C,A.push(x)}}function i(l,p){var g;return(g=l.a[0]<p.a[0]?n(l.a,l.b,p.a):n(p.b,p.a,l.a))?g:(g=p.b[0]<l.b[0]?n(l.a,l.b,p.b):n(p.b,p.a,l.b))||l.idx-p.idx}function s(l,p,g){var u=e.le(l,g,i),x=l[u],f=x.upperIds,T=f[f.length-1];x.upperIds=[T],l.splice(u+1,0,new r(g.a,g.b,g.idx,[T],f))}function c(l,p,g){var u=g.a;g.a=g.b,g.b=u;var x=e.eq(l,g,i);l[x-1].upperIds=l[x].upperIds,l.splice(x,1)}b.exports=function(l,p){for(var g=l.length,u=p.length,x=[],f=0;f<g;++f)x.push(new o(l[f],null,0,f));for(f=0;f<u;++f){var T=p[f],_=l[T[0]],k=l[T[1]];_[0]<k[0]?x.push(new o(_,k,2,f),new o(k,_,1,f)):_[0]>k[0]&&x.push(new o(k,_,2,f),new o(_,k,1,f))}x.sort(t);for(var w=x[0].a[0]-(1+Math.abs(x[0].a[0]))*Math.pow(2,-52),C=[new r([w,1],[w,0],-1,[],[],[],[])],A=[],O=(f=0,x.length);f<O;++f){var P=x[f],S=P.type;0===S?a(A,C,l,P.a,P.idx):2===S?s(C,0,P):c(C,0,P)}return A}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(v,b,h){"use strict";var e=v("binary-search-bounds");function n(t,d){this.stars=t,this.edges=d}b.exports=function(t,d){for(var a=new Array(t),i=0;i<t;++i)a[i]=[];return new n(a,d)};var r=n.prototype;function o(t,d,a){for(var i=1,s=t.length;i<s;i+=2)if(t[i-1]===d&&t[i]===a)return t[i-1]=t[s-2],t[i]=t[s-1],void(t.length=s-2)}r.isConstraint=function(){var t=[0,0];function d(a,i){return a[0]-i[0]||a[1]-i[1]}return function(a,i){return t[0]=Math.min(a,i),t[1]=Math.max(a,i),e.eq(this.edges,t,d)>=0}}(),r.removeTriangle=function(t,d,a){var i=this.stars;o(i[t],d,a),o(i[d],a,t),o(i[a],t,d)},r.addTriangle=function(t,d,a){var i=this.stars;i[t].push(d,a),i[d].push(a,t),i[a].push(t,d)},r.opposite=function(t,d){for(var a=this.stars[d],i=1,s=a.length;i<s;i+=2)if(a[i]===t)return a[i-1];return-1},r.flip=function(t,d){var a=this.opposite(t,d),i=this.opposite(d,t);this.removeTriangle(t,d,a),this.removeTriangle(d,t,i),this.addTriangle(t,i,a),this.addTriangle(d,a,i)},r.edges=function(){for(var t=this.stars,d=[],a=0,i=t.length;a<i;++a)for(var s=t[a],c=0,l=s.length;c<l;c+=2)d.push([s[c],s[c+1]]);return d},r.cells=function(){for(var t=this.stars,d=[],a=0,i=t.length;a<i;++a)for(var s=t[a],c=0,l=s.length;c<l;c+=2){var p=s[c],g=s[c+1];a<Math.min(p,g)&&d.push([a,p,g])}return d}},{"binary-search-bounds":31}],47:[function(v,b,h){"use strict";b.exports=function(e){for(var n=1,r=1;r<e.length;++r)for(var o=0;o<r;++o)if(e[r]<e[o])n=-n;else if(e[o]===e[r])return 0;return n}},{}],48:[function(v,b,h){"use strict";var e=v("dup"),n=v("robust-linear-solve");function r(d,a){for(var i=0,s=d.length,c=0;c<s;++c)i+=d[c]*a[c];return i}function o(d){var a=d.length;if(0===a)return[];var i=e([d.length+1,d.length+1],1),s=e([d.length+1],1);i[a][a]=0;for(var c=0;c<a;++c){for(var l=0;l<=c;++l)i[l][c]=i[c][l]=2*r(d[c],d[l]);s[c]=r(d[c],d[c])}var p=n(i,s),g=0,u=p[a+1];for(c=0;c<u.length;++c)g+=u[c];var x=new Array(a);for(c=0;c<a;++c){u=p[c];var f=0;for(l=0;l<u.length;++l)f+=u[l];x[c]=f/g}return x}function t(d){if(0===d.length)return[];for(var a=d[0].length,i=e([a]),s=o(d),c=0;c<d.length;++c)for(var l=0;l<a;++l)i[l]+=d[c][l]*s[c];return i}t.barycenetric=o,b.exports=t},{dup:65,"robust-linear-solve":283}],49:[function(v,b,h){b.exports=function(n){for(var r=e(n),o=0,t=0;t<n.length;++t)for(var d=n[t],a=0;a<r.length;++a)o+=Math.pow(d[a]-r[a],2);return Math.sqrt(o/n.length)};var e=v("circumcenter")},{circumcenter:48}],50:[function(v,b,h){"use strict";b.exports=function(T,_,k){var w,S,D,z;if(k){w=_;for(var C=new Array(_.length),A=0;A<_.length;++A){var O=_[A];C[A]=[O[0],O[1],k[A]]}_=C}for(var P=(D=!!k,void 0,x(_,z=p(S=T,[],l(S)),D),!!z);f(T,_,!!k);)P=!0;if(k&&P)for(w.length=0,k.length=0,A=0;A<_.length;++A)w.push([(O=_[A])[0],O[1]]),k.push(O[2]);return P};var e=v("union-find"),n=v("box-intersect"),r=v("robust-segment-intersect"),o=v("big-rat"),t=v("big-rat/cmp"),d=v("big-rat/to-float"),a=v("rat-vec"),i=v("nextafter"),s=v("./lib/rat-seg-intersect");function c(T){var _=d(T);return[i(_,-1/0),i(_,1/0)]}function l(T){for(var _=new Array(T.length),k=0;k<T.length;++k){var w=T[k];_[k]=[i(w[0],-1/0),i(w[1],-1/0),i(w[0],1/0),i(w[1],1/0)]}return _}function p(T,_,k){for(var w=_.length,C=new e(w),A=[],O=0;O<_.length;++O){var P=_[O],S=c(P[0]),E=c(P[1]);A.push([i(S[0],-1/0),i(E[0],-1/0),i(S[1],1/0),i(E[1],1/0)])}n(A,function(X,J){C.link(X,J)});var D=!0,z=new Array(w);for(O=0;O<w;++O)(V=C.find(O))!==O&&(D=!1,T[V]=[Math.min(T[O][0],T[V][0]),Math.min(T[O][1],T[V][1])]);if(D)return null;var N=0;for(O=0;O<w;++O){var V;(V=C.find(O))===O?(z[O]=N,T[N++]=T[O]):z[O]=-1}for(T.length=N,O=0;O<w;++O)z[O]<0&&(z[O]=z[C.find(O)]);return z}function g(T,_){return T[0]-_[0]||T[1]-_[1]}function u(T,_){return T[0]-_[0]||T[1]-_[1]||(T[2]<_[2]?-1:T[2]>_[2]?1:0)}function x(T,_,k){if(0!==T.length){if(_)for(var w=0;w<T.length;++w){var C=_[(O=T[w])[0]],A=_[O[1]];O[0]=Math.min(C,A),O[1]=Math.max(C,A)}else for(w=0;w<T.length;++w){var O;C=(O=T[w])[0],A=O[1],O[0]=Math.min(C,A),O[1]=Math.max(C,A)}T.sort(k?u:g);var P=1;for(w=1;w<T.length;++w){var S=T[w-1],E=T[w];(E[0]!==S[0]||E[1]!==S[1]||k&&E[2]!==S[2])&&(T[P++]=E)}T.length=P}}function f(T,_,k){var S,E,z,w=function(S,E){for(var D=new Array(E.length),z=0;z<E.length;++z){var N=E[z],V=S[N[0]],X=S[N[1]];D[z]=[i(Math.min(V[0],X[0]),-1/0),i(Math.min(V[1],X[1]),-1/0),i(Math.max(V[0],X[0]),1/0),i(Math.max(V[1],X[1]),1/0)]}return D}(T,_),C=(S=T,E=_,z=[],n(w,function(N,V){var X=E[N],J=E[V];X[0]!==J[0]&&X[0]!==J[1]&&X[1]!==J[0]&&X[1]!==J[1]&&r(S[X[0]],S[X[1]],S[J[0]],S[J[1]])&&z.push([N,V])}),z),O=function(S,E,D,z){var N=[];return n(D,z,function(V,X){var J=E[V];if(J[0]!==X&&J[1]!==X){var G=S[X];r(S[J[0]],S[J[1]],G,G)&&N.push([V,X])}}),N}(T,_,w,l(T)),P=p(T,function(S,E,D,z,N){var V,X,J=S.map(function(de){return[o(de[0]),o(de[1])]});for(V=0;V<D.length;++V){var G=D[V],Z=G[1],re=E[X=G[0]],j=E[Z],B=s(a(S[re[0]]),a(S[re[1]]),a(S[j[0]]),a(S[j[1]]));if(B){var H=S.length;S.push([d(B[0]),d(B[1])]),J.push(B),z.push([X,H],[Z,H])}}for(z.sort(function(de,be){if(de[0]!==be[0])return de[0]-be[0];var _e=J[de[1]],xe=J[be[1]];return t(_e[0],xe[0])||t(_e[1],xe[1])}),V=z.length-1;V>=0;--V){var ee=E[X=(ue=z[V])[0]],U=ee[0],$=ee[1],q=S[U],te=S[$];if((q[0]-te[0]||q[1]-te[1])<0){var ne=U;U=$,$=ne}ee[0]=U;var se,ie=ee[1]=ue[1];for(N&&(se=ee[2]);V>0&&z[V-1][0]===X;){var ue,le=(ue=z[--V])[1];E.push(N?[ie,le,se]:[ie,le]),ie=le}E.push(N?[ie,$,se]:[ie,$])}return J}(T,_,C,O,k));return x(_,P,k),!!P||C.length>0||O.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(v,b,h){"use strict";b.exports=function(s,c,l,p){var g=t(c,s),u=t(p,l),x=i(g,u);if(0===o(x))return null;var T=i(u,t(s,l)),_=n(T,x),k=a(g,_);return d(s,k)};var e=v("big-rat/mul"),n=v("big-rat/div"),r=v("big-rat/sub"),o=v("big-rat/sign"),t=v("rat-vec/sub"),d=v("rat-vec/add"),a=v("rat-vec/muls");function i(s,c){return r(e(s[0],c[1]),e(s[1],c[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(v,b,h){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(v,b,h){"use strict";var e=v("./colorScale"),n=v("lerp");function r(d){return[d[0]/255,d[1]/255,d[2]/255,d[3]]}function o(d){for(var a,i="#",s=0;s<3;++s)i+=("00"+(a=(a=d[s]).toString(16))).substr(a.length);return i}function t(d){return"rgba("+d.join(",")+")"}b.exports=function(d){var a,i,s,c,l,p,g,u,x,f;if(d||(d={}),u=(d.nshades||72)-1,g=d.format||"hex",(p=d.colormap)||(p="jet"),"string"==typeof p){if(p=p.toLowerCase(),!e[p])throw Error(p+" not a supported colorscale");l=e[p]}else{if(!Array.isArray(p))throw Error("unsupported colormap option",p);l=p.slice()}if(l.length>u+1)throw new Error(p+" map requires nshades to be at least size "+l.length);x=Array.isArray(d.alpha)?2!==d.alpha.length?[1,1]:d.alpha.slice():"number"==typeof d.alpha?[d.alpha,d.alpha]:[1,1],a=l.map(function(C){return Math.round(C.index*u)}),x[0]=Math.min(Math.max(x[0],0),1),x[1]=Math.min(Math.max(x[1],0),1);var T=l.map(function(C,A){var O=l[A].index,P=l[A].rgb.slice();return 4===P.length&&P[3]>=0&&P[3]<=1||(P[3]=x[0]+(x[1]-x[0])*O),P}),_=[];for(f=0;f<a.length-1;++f){c=a[f+1]-a[f],i=T[f],s=T[f+1];for(var k=0;k<c;k++){var w=k/c;_.push([Math.round(n(i[0],s[0],w)),Math.round(n(i[1],s[1],w)),Math.round(n(i[2],s[2],w)),n(i[3],s[3],w)])}}return _.push(l[l.length-1].rgb.concat(x[1])),"hex"===g?_=_.map(o):"rgbaString"===g?_=_.map(t):"float"===g&&(_=_.map(r)),_}},{"./colorScale":52,lerp:240}],54:[function(v,b,h){"use strict";b.exports=function(a,i,s,c){var l=e(i,s,c);if(0===l){var p=n(e(a,i,s)),g=n(e(a,i,c));if(p===g){if(0===p){var u=d(a,i,s);return u===d(a,i,c)?0:u?1:-1}return 0}return 0===g?p>0||d(a,i,c)?-1:1:0===p?g>0||d(a,i,s)?1:-1:n(g-p)}var f=e(a,i,s);return f>0?l>0&&e(a,i,c)>0?1:-1:f<0?l>0||e(a,i,c)>0?1:-1:e(a,i,c)>0||d(a,i,s)?1:-1};var e=v("robust-orientation"),n=v("signum"),r=v("two-sum"),o=v("robust-product"),t=v("robust-sum");function d(a,i,s){var c=r(a[0],-i[0]),l=r(a[1],-i[1]),p=r(s[0],-i[0]),g=r(s[1],-i[1]),u=t(o(c,p),o(l,g));return u[u.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(v,b,h){"use strict";b.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(v,b,h){b.exports=function(r,o){var t=r.length,d=r.length-o.length;if(d)return d;switch(t){case 0:return 0;case 1:return r[0]-o[0];case 2:return r[0]+r[1]-o[0]-o[1]||e(r[0],r[1])-e(o[0],o[1]);case 3:var a=r[0]+r[1],i=o[0]+o[1];if(d=a+r[2]-(i+o[2]))return d;var s=e(r[0],r[1]),c=e(o[0],o[1]);return e(s,r[2])-e(c,o[2])||e(s+r[2],a)-e(c+o[2],i);case 4:var l=r[0],p=r[1],g=r[2],u=r[3],x=o[0],f=o[1],T=o[2],_=o[3];return l+p+g+u-(x+f+T+_)||e(l,p,g,u)-e(x,f,T,_,x)||e(l+p,l+g,l+u,p+g,p+u,g+u)-e(x+f,x+T,x+_,f+T,f+_,T+_)||e(l+p+g,l+p+u,l+g+u,p+g+u)-e(x+f+T,x+f+_,x+T+_,f+T+_);default:for(var k=r.slice().sort(n),w=o.slice().sort(n),C=0;C<t;++C)if(d=k[C]-w[C])return d;return 0}};var e=Math.min;function n(r,o){return r-o}},{}],57:[function(v,b,h){"use strict";var e=v("compare-cell"),n=v("cell-orientation");b.exports=function(r,o){return e(r,o)||n(r)-n(o)}},{"cell-orientation":47,"compare-cell":56}],58:[function(v,b,h){"use strict";var e=v("./lib/ch1d"),n=v("./lib/ch2d"),r=v("./lib/chnd");b.exports=function(o){var t=o.length;if(0===t)return[];if(1===t)return[[0]];var d=o[0].length;return 0===d?[]:1===d?e(o):2===d?n(o):r(o,d)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(v,b,h){"use strict";b.exports=function(e){for(var n=0,r=0,o=1;o<e.length;++o)e[o][0]<e[n][0]&&(n=o),e[o][0]>e[r][0]&&(r=o);return n<r?[[n],[r]]:n>r?[[r],[n]]:[[n]]}},{}],60:[function(v,b,h){"use strict";b.exports=function(n){var r=e(n),o=r.length;if(o<=2)return[];for(var t=new Array(o),d=r[o-1],a=0;a<o;++a){var i=r[a];t[a]=[d,i],d=i}return t};var e=v("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(v,b,h){"use strict";b.exports=function(r,o){try{return e(r,!0)}catch{var t=n(r);if(t.length<=o)return[];var d=function(i,s){for(var c=i.length,l=new Array(c),p=0;p<s.length;++p)l[p]=i[s[p]];var g=s.length;for(p=0;p<c;++p)s.indexOf(p)<0&&(l[g++]=i[p]);return l}(r,t);return function(i,s){for(var c=i.length,l=s.length,p=0;p<c;++p)for(var g=i[p],u=0;u<g.length;++u){var x=g[u];if(x<l)g[u]=s[x];else{x-=l;for(var f=0;f<l;++f)x>=s[f]&&(x+=1);g[u]=x}}return i}(e(d,!0),t)}};var e=v("incremental-convex-hull"),n=v("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(v,b,h){"use strict";b.exports=function(e,n,r,o,t,d){var a=t-1,i=t*t,s=a*a,c=(1+2*t)*s,l=t*s,p=i*(3-2*t),g=i*a;if(e.length){d||(d=new Array(e.length));for(var u=e.length-1;u>=0;--u)d[u]=c*e[u]+l*n[u]+p*r[u]+g*o[u];return d}return c*e+l*n+p*r+g*o},b.exports.derivative=function(e,n,r,o,t,d){var a=6*t*t-6*t,i=3*t*t-4*t+1,s=-6*t*t+6*t,c=3*t*t-2*t;if(e.length){d||(d=new Array(e.length));for(var l=e.length-1;l>=0;--l)d[l]=a*e[l]+i*n[l]+s*r[l]+c*o[l];return d}return a*e+i*n+s*r[l]+c*o}},{}],63:[function(v,b,h){"use strict";var e=v("incremental-convex-hull"),n=v("uniq");function r(t,d){this.point=t,this.index=d}function o(t,d){for(var a=t.point,i=d.point,s=a.length,c=0;c<s;++c){var l=i[c]-a[c];if(l)return l}return 0}b.exports=function(t,d){var a=t.length;if(0===a)return[];var i=t[0].length;if(i<1)return[];if(1===i)return function(O,P,S){if(1===O)return S?[[-1,0]]:[];var E=P.map(function(X,J){return[X[0],J]});E.sort(function(X,J){return X[0]-J[0]});for(var D=new Array(O-1),z=1;z<O;++z)D[z-1]=[E[z-1][1],E[z][1]];return S&&D.push([-1,D[0][1]],[D[O-1][1],-1]),D}(a,t,d);for(var s=new Array(a),c=1,l=0;l<a;++l){for(var p=t[l],g=new Array(i+1),u=0,x=0;x<i;++x){var f=p[x];g[x]=f,u+=f*f}g[i]=u,s[l]=new r(g,l),c=Math.max(u,c)}n(s,o),a=s.length;var T=new Array(a+i+1),_=new Array(a+i+1),k=(i+1)*(i+1)*c,w=new Array(i+1);for(l=0;l<=i;++l)w[l]=0;for(w[i]=k,T[0]=w.slice(),_[0]=-1,l=0;l<=i;++l)(g=w.slice())[l]=1,T[l+1]=g,_[l+1]=-1;for(l=0;l<a;++l){var C=s[l];T[l+i+1]=C.point,_[l+i+1]=C.index}var A=e(T,!1);if(A=A.filter(d?function(O){for(var P=0,S=0;S<=i;++S){var E=_[O[S]];if(E<0&&++P>=2)return!1;O[S]=E}return!0}:function(O){for(var P=0;P<=i;++P){var S=_[O[P]];if(S<0)return!1;O[P]=S}return!0}),1&i)for(l=0;l<A.length;++l)g=(C=A[l])[0],C[0]=C[1],C[1]=g;return A}},{"incremental-convex-hull":233,uniq:310}],64:[function(v,b,h){(function(e){(function(){var n=!1;if(typeof Float64Array<"u"){var r=new Float64Array(1),o=new Uint32Array(r.buffer);r[0]=1,n=!0,1072693248===o[1]?(b.exports=function(d){return r[0]=d,[o[0],o[1]]},b.exports.pack=function(d,a){return o[0]=d,o[1]=a,r[0]},b.exports.lo=function(d){return r[0]=d,o[0]},b.exports.hi=function(d){return r[0]=d,o[1]}):1072693248===o[0]?(b.exports=function(d){return r[0]=d,[o[1],o[0]]},b.exports.pack=function(d,a){return o[1]=d,o[0]=a,r[0]},b.exports.lo=function(d){return r[0]=d,o[1]},b.exports.hi=function(d){return r[0]=d,o[0]}):n=!1}if(!n){var t=new e(8);b.exports=function(d){return t.writeDoubleLE(d,0,!0),[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]},b.exports.pack=function(d,a){return t.writeUInt32LE(d,0,!0),t.writeUInt32LE(a,4,!0),t.readDoubleLE(0,!0)},b.exports.lo=function(d){return t.writeDoubleLE(d,0,!0),t.readUInt32LE(0,!0)},b.exports.hi=function(d){return t.writeDoubleLE(d,0,!0),t.readUInt32LE(4,!0)}}b.exports.sign=function(d){return b.exports.hi(d)>>>31},b.exports.exponent=function(d){return(b.exports.hi(d)<<1>>>21)-1023},b.exports.fraction=function(d){var a=b.exports.lo(d),i=b.exports.hi(d),s=1048575&i;return 2146435072&i&&(s+=1<<20),[a,s]},b.exports.denormalized=function(d){return!(2146435072&b.exports.hi(d))}}).call(this)}).call(this,v("buffer").Buffer)},{buffer:3}],65:[function(v,b,h){"use strict";b.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(r,o){var t,d;for(t=new Array(r),d=0;d<r;++d)t[d]=o;return t}(0|e,n);break;case"object":if("number"==typeof e.length)return function r(o,t,d){var a=0|o[d];if(a<=0)return[];var i,s=new Array(a);if(d===o.length-1)for(i=0;i<a;++i)s[i]=t;else for(i=0;i<a;++i)s[i]=r(o,t,d+1);return s}(e,n,0)}return[]}},{}],66:[function(v,b,h){"use strict";b.exports=function(n,r){var o=n.length;if("number"!=typeof r){r=0;for(var t=0;t<o;++t){var d=n[t];r=Math.max(r,d[0],d[1])}r=1+(0|r)}r|=0;var a=new Array(r);for(t=0;t<r;++t)a[t]=[];for(t=0;t<o;++t)a[(d=n[t])[0]].push(d[1]),a[d[1]].push(d[0]);for(var i=0;i<r;++i)e(a[i],function(s,c){return s-c});return a};var e=v("uniq")},{uniq:310}],67:[function(v,b,h){"use strict";b.exports=function(e,n,r){var o=n||0,t=r||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[o*e[12]+e[8],o*e[13]+e[9],o*e[14]+e[10],o*e[15]+e[11]],[t*e[12]-e[8],t*e[13]-e[9],t*e[14]-e[10],t*e[15]-e[11]]]}},{}],68:[function(v,b,h){"use strict";b.exports=function(a,i,s){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof a?new o(c=d(a),c,0):new o(a,d(a.length),0);case 2:if("number"==typeof i){var c=d(a.length);return new o(a,c,+i)}s=0;case 3:if(a.length!==i.length)throw new Error("state and velocity lengths must match");return new o(a,i,s)}};var e=v("cubic-hermite"),n=v("binary-search-bounds");function r(a,i,s){return Math.min(i,Math.max(a,s))}function o(a,i,s){this.dimension=a.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var c=0;c<this.dimension;++c)this.bounds[0][c]=-1/0,this.bounds[1][c]=1/0;this._state=a.slice().reverse(),this._velocity=i.slice().reverse(),this._time=[s],this._scratch=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice()]}var t=o.prototype;function d(a){for(var i=new Array(a),s=0;s<a;++s)i[s]=0;return i}t.flush=function(a){var i=n.gt(this._time,a)-1;i<=0||(this._time.splice(0,i),this._state.splice(0,i*this.dimension),this._velocity.splice(0,i*this.dimension))},t.curve=function(a){var i=this._time,s=i.length,c=n.le(i,a),l=this._scratch[0],p=this._state,g=this._velocity,u=this.dimension,x=this.bounds;if(c<0)for(var f=u-1,T=0;T<u;++T,--f)l[T]=p[f];else if(c>=s-1){f=p.length-1;var _=a-i[s-1];for(T=0;T<u;++T,--f)l[T]=p[f]+_*g[f]}else{f=u*(c+1)-1;var k=i[c],w=i[c+1]-k||1,C=this._scratch[1],A=this._scratch[2],O=this._scratch[3],P=this._scratch[4],S=!0;for(T=0;T<u;++T,--f)C[T]=p[f],O[T]=g[f]*w,A[T]=p[f+u],P[T]=g[f+u]*w,S=S&&C[T]===A[T]&&O[T]===P[T]&&0===O[T];if(S)for(T=0;T<u;++T)l[T]=C[T];else e(C,O,A,P,(a-k)/w,l)}var E=x[0],D=x[1];for(T=0;T<u;++T)l[T]=r(E[T],D[T],l[T]);return l},t.dcurve=function(a){var i=this._time,s=i.length,c=n.le(i,a),l=this._scratch[0],p=this._state,g=this._velocity,u=this.dimension;if(c>=s-1)for(var x=p.length-1,f=0;f<u;++f,--x)l[f]=g[x];else{x=u*(c+1)-1;var T=i[c],_=i[c+1]-T||1,k=this._scratch[1],w=this._scratch[2],C=this._scratch[3],A=this._scratch[4],O=!0;for(f=0;f<u;++f,--x)k[f]=p[x],C[f]=g[x]*_,w[f]=p[x+u],A[f]=g[x+u]*_,O=O&&k[f]===w[f]&&C[f]===A[f]&&0===C[f];if(O)for(f=0;f<u;++f)l[f]=0;else for(e.derivative(k,C,w,A,(a-T)/_,l),f=0;f<u;++f)l[f]/=_}return l},t.lastT=function(){var a=this._time;return a[a.length-1]},t.stable=function(){for(var a=this._velocity,i=a.length,s=this.dimension-1;s>=0;--s)if(a[--i])return!1;return!0},t.jump=function(a){var i=this.lastT(),s=this.dimension;if(!(a<i||arguments.length!==s+1)){var c=this._state,l=this._velocity,p=c.length-this.dimension,g=this.bounds,u=g[0],x=g[1];this._time.push(i,a);for(var f=0;f<2;++f)for(var T=0;T<s;++T)c.push(c[p++]),l.push(0);for(this._time.push(a),T=s;T>0;--T)c.push(r(u[T-1],x[T-1],arguments[T])),l.push(0)}},t.push=function(a){var i=this.lastT(),s=this.dimension;if(!(a<i||arguments.length!==s+1)){var c=this._state,l=this._velocity,p=c.length-this.dimension,g=a-i,u=this.bounds,x=u[0],f=u[1],T=g>1e-6?1/g:0;this._time.push(a);for(var _=s;_>0;--_){var k=r(x[_-1],f[_-1],arguments[_]);c.push(k),l.push((k-c[p++])*T)}}},t.set=function(a){var i=this.dimension;if(!(a<this.lastT()||arguments.length!==i+1)){var s=this._state,c=this._velocity,l=this.bounds,p=l[0],g=l[1];this._time.push(a);for(var u=i;u>0;--u)s.push(r(p[u-1],g[u-1],arguments[u])),c.push(0)}},t.move=function(a){var i=this.lastT(),s=this.dimension;if(!(a<=i||arguments.length!==s+1)){var c=this._state,l=this._velocity,p=c.length-this.dimension,g=this.bounds,u=g[0],x=g[1],f=a-i,T=f>1e-6?1/f:0;this._time.push(a);for(var _=s;_>0;--_){var k=arguments[_];c.push(r(u[_-1],x[_-1],c[p++]+k)),l.push(k*T)}}},t.idle=function(a){var i=this.lastT();if(!(a<i)){var s=this.dimension,c=this._state,l=this._velocity,p=c.length-s,g=this.bounds,u=g[0],x=g[1],f=a-i;this._time.push(a);for(var T=s-1;T>=0;--T)c.push(r(u[T],x[T],c[p]+f*l[p])),l.push(0),p+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(v,b,h){"use strict";function e(u,x,f,T,_,k){this._color=u,this.key=x,this.value=f,this.left=T,this.right=_,this._count=k}function n(u){return new e(u._color,u.key,u.value,u.left,u.right,u._count)}function r(u,x){return new e(u,x.key,x.value,x.left,x.right,x._count)}function o(u){u._count=1+(u.left?u.left._count:0)+(u.right?u.right._count:0)}function t(u,x){this._compare=u,this.root=x}b.exports=function(u){return new t(u||g,null)};var d=t.prototype;function a(u,x){var f;return x.left&&(f=a(u,x.left))?f:(f=u(x.key,x.value))||(x.right?a(u,x.right):void 0)}function i(u,x,f,T){var _;return x(u,T.key)<=0&&(T.left&&(_=i(u,x,f,T.left))||(_=f(T.key,T.value)))?_:T.right?i(u,x,f,T.right):void 0}function s(u,x,f,T,_){var k,w=f(u,_.key),C=f(x,_.key);return w<=0&&(_.left&&(k=s(u,x,f,T,_.left))||C>0&&(k=T(_.key,_.value)))?k:C>0&&_.right?s(u,x,f,T,_.right):void 0}function c(u,x){this.tree=u,this._stack=x}Object.defineProperty(d,"keys",{get:function(){var u=[];return this.forEach(function(x,f){u.push(x)}),u}}),Object.defineProperty(d,"values",{get:function(){var u=[];return this.forEach(function(x,f){u.push(f)}),u}}),Object.defineProperty(d,"length",{get:function(){return this.root?this.root._count:0}}),d.insert=function(u,x){for(var f=this._compare,T=this.root,_=[],k=[];T;){var w=f(u,T.key);_.push(T),k.push(w),T=w<=0?T.left:T.right}_.push(new e(0,u,x,null,null,1));for(var C=_.length-2;C>=0;--C)T=_[C],_[C]=k[C]<=0?new e(T._color,T.key,T.value,_[C+1],T.right,T._count+1):new e(T._color,T.key,T.value,T.left,_[C+1],T._count+1);for(C=_.length-1;C>1;--C){var A=_[C-1];if(T=_[C],1===A._color||1===T._color)break;var O=_[C-2];if(O.left===A)if(A.left===T){if(!(P=O.right)||0!==P._color){O._color=0,O.left=A.right,A._color=1,A.right=O,_[C-2]=A,_[C-1]=T,o(O),o(A),C>=3&&((S=_[C-3]).left===O?S.left=A:S.right=A);break}A._color=1,O.right=r(1,P),O._color=0,C-=1}else{if(!(P=O.right)||0!==P._color){A.right=T.left,O._color=0,O.left=T.right,T._color=1,T.left=A,T.right=O,_[C-2]=T,_[C-1]=A,o(O),o(A),o(T),C>=3&&((S=_[C-3]).left===O?S.left=T:S.right=T);break}A._color=1,O.right=r(1,P),O._color=0,C-=1}else if(A.right===T){if(!(P=O.left)||0!==P._color){O._color=0,O.right=A.left,A._color=1,A.left=O,_[C-2]=A,_[C-1]=T,o(O),o(A),C>=3&&((S=_[C-3]).right===O?S.right=A:S.left=A);break}A._color=1,O.left=r(1,P),O._color=0,C-=1}else{var P;if(!(P=O.left)||0!==P._color){var S;A.left=T.right,O._color=0,O.right=T.left,T._color=1,T.right=A,T.left=O,_[C-2]=T,_[C-1]=A,o(O),o(A),o(T),C>=3&&((S=_[C-3]).right===O?S.right=T:S.left=T);break}A._color=1,O.left=r(1,P),O._color=0,C-=1}}return _[0]._color=1,new t(f,_[0])},d.forEach=function(u,x,f){if(this.root)switch(arguments.length){case 1:return a(u,this.root);case 2:return i(x,this._compare,u,this.root);case 3:return this._compare(x,f)>=0?void 0:s(x,f,this._compare,u,this.root)}},Object.defineProperty(d,"begin",{get:function(){for(var u=[],x=this.root;x;)u.push(x),x=x.left;return new c(this,u)}}),Object.defineProperty(d,"end",{get:function(){for(var u=[],x=this.root;x;)u.push(x),x=x.right;return new c(this,u)}}),d.at=function(u){if(u<0)return new c(this,[]);for(var x=this.root,f=[];;){if(f.push(x),x.left){if(u<x.left._count){x=x.left;continue}u-=x.left._count}if(!u)return new c(this,f);if(u-=1,!x.right||u>=x.right._count)break;x=x.right}return new c(this,[])},d.ge=function(u){for(var x=this._compare,f=this.root,T=[],_=0;f;){var k=x(u,f.key);T.push(f),k<=0&&(_=T.length),f=k<=0?f.left:f.right}return T.length=_,new c(this,T)},d.gt=function(u){for(var x=this._compare,f=this.root,T=[],_=0;f;){var k=x(u,f.key);T.push(f),k<0&&(_=T.length),f=k<0?f.left:f.right}return T.length=_,new c(this,T)},d.lt=function(u){for(var x=this._compare,f=this.root,T=[],_=0;f;){var k=x(u,f.key);T.push(f),k>0&&(_=T.length),f=k<=0?f.left:f.right}return T.length=_,new c(this,T)},d.le=function(u){for(var x=this._compare,f=this.root,T=[],_=0;f;){var k=x(u,f.key);T.push(f),k>=0&&(_=T.length),f=k<0?f.left:f.right}return T.length=_,new c(this,T)},d.find=function(u){for(var x=this._compare,f=this.root,T=[];f;){var _=x(u,f.key);if(T.push(f),0===_)return new c(this,T);f=_<=0?f.left:f.right}return new c(this,[])},d.remove=function(u){var x=this.find(u);return x?x.remove():this},d.get=function(u){for(var x=this._compare,f=this.root;f;){var T=x(u,f.key);if(0===T)return f.value;f=T<=0?f.left:f.right}};var l=c.prototype;function p(u,x){u.key=x.key,u.value=x.value,u.left=x.left,u.right=x.right,u._color=x._color,u._count=x._count}function g(u,x){return u<x?-1:u>x?1:0}Object.defineProperty(l,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(l,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),l.clone=function(){return new c(this.tree,this._stack.slice())},l.remove=function(){var u=this._stack;if(0===u.length)return this.tree;var x=new Array(u.length),f=u[u.length-1];x[x.length-1]=new e(f._color,f.key,f.value,f.left,f.right,f._count);for(var T=u.length-2;T>=0;--T)x[T]=(f=u[T]).left===u[T+1]?new e(f._color,f.key,f.value,x[T+1],f.right,f._count):new e(f._color,f.key,f.value,f.left,x[T+1],f._count);if((f=x[x.length-1]).left&&f.right){var _=x.length;for(f=f.left;f.right;)x.push(f),f=f.right;var k=x[_-1];for(x.push(new e(f._color,k.key,k.value,f.left,f.right,f._count)),x[_-1].key=f.key,x[_-1].value=f.value,T=x.length-2;T>=_;--T)x[T]=new e((f=x[T])._color,f.key,f.value,f.left,x[T+1],f._count);x[_-1].left=x[_]}if(0===(f=x[x.length-1])._color){var w=x[x.length-2];for(w.left===f?w.left=null:w.right===f&&(w.right=null),x.pop(),T=0;T<x.length;++T)x[T]._count--;return new t(this.tree._compare,x[0])}if(f.left||f.right){for(f.left?p(f,f.left):f.right&&p(f,f.right),f._color=1,T=0;T<x.length-1;++T)x[T]._count--;return new t(this.tree._compare,x[0])}if(1===x.length)return new t(this.tree._compare,null);for(T=0;T<x.length;++T)x[T]._count--;var C=x[x.length-2];return function(A){for(var O,P,S,E,D=A.length-1;D>=0;--D){if(O=A[D],0===D)return void(O._color=1);if((P=A[D-1]).left===O){if((S=P.right).right&&0===S.right._color)return E=(S=P.right=n(S)).right=n(S.right),P.right=S.left,S.left=P,S.right=E,S._color=P._color,O._color=1,P._color=1,E._color=1,o(P),o(S),D>1&&((z=A[D-2]).left===P?z.left=S:z.right=S),void(A[D-1]=S);if(S.left&&0===S.left._color)return E=(S=P.right=n(S)).left=n(S.left),P.right=E.left,S.left=E.right,E.left=P,E.right=S,E._color=P._color,P._color=1,S._color=1,O._color=1,o(P),o(S),o(E),D>1&&((z=A[D-2]).left===P?z.left=E:z.right=E),void(A[D-1]=E);if(1===S._color){if(0===P._color)return P._color=1,void(P.right=r(0,S));P.right=r(0,S);continue}S=n(S),P.right=S.left,S.left=P,S._color=P._color,P._color=0,o(P),o(S),D>1&&((z=A[D-2]).left===P?z.left=S:z.right=S),A[D-1]=S,A[D]=P,D+1<A.length?A[D+1]=O:A.push(O),D+=2}else{if((S=P.left).left&&0===S.left._color)return E=(S=P.left=n(S)).left=n(S.left),P.left=S.right,S.right=P,S.left=E,S._color=P._color,O._color=1,P._color=1,E._color=1,o(P),o(S),D>1&&((z=A[D-2]).right===P?z.right=S:z.left=S),void(A[D-1]=S);if(S.right&&0===S.right._color)return E=(S=P.left=n(S)).right=n(S.right),P.left=E.right,S.right=E.left,E.right=P,E.left=S,E._color=P._color,P._color=1,S._color=1,O._color=1,o(P),o(S),o(E),D>1&&((z=A[D-2]).right===P?z.right=E:z.left=E),void(A[D-1]=E);if(1===S._color){if(0===P._color)return P._color=1,void(P.left=r(0,S));P.left=r(0,S);continue}var z;S=n(S),P.left=S.right,S.right=P,S._color=P._color,P._color=0,o(P),o(S),D>1&&((z=A[D-2]).right===P?z.right=S:z.left=S),A[D-1]=S,A[D]=P,D+1<A.length?A[D+1]=O:A.push(O),D+=2}}}(x),C.left===f?C.left=null:C.right=null,new t(this.tree._compare,x[0])},Object.defineProperty(l,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(l,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(l,"index",{get:function(){var u=0,x=this._stack;if(0===x.length){var f=this.tree.root;return f?f._count:0}x[x.length-1].left&&(u=x[x.length-1].left._count);for(var T=x.length-2;T>=0;--T)x[T+1]===x[T].right&&(++u,x[T].left&&(u+=x[T].left._count));return u},enumerable:!0}),l.next=function(){var u=this._stack;if(0!==u.length){var x=u[u.length-1];if(x.right)for(x=x.right;x;)u.push(x),x=x.left;else for(u.pop();u.length>0&&u[u.length-1].right===x;)x=u[u.length-1],u.pop()}},Object.defineProperty(l,"hasNext",{get:function(){var u=this._stack;if(0===u.length)return!1;if(u[u.length-1].right)return!0;for(var x=u.length-1;x>0;--x)if(u[x-1].left===u[x])return!0;return!1}}),l.update=function(u){var x=this._stack;if(0===x.length)throw new Error("Can't update empty node!");var f=new Array(x.length),T=x[x.length-1];f[f.length-1]=new e(T._color,T.key,u,T.left,T.right,T._count);for(var _=x.length-2;_>=0;--_)f[_]=(T=x[_]).left===x[_+1]?new e(T._color,T.key,T.value,f[_+1],T.right,T._count):new e(T._color,T.key,T.value,T.left,f[_+1],T._count);return new t(this.tree._compare,f[0])},l.prev=function(){var u=this._stack;if(0!==u.length){var x=u[u.length-1];if(x.left)for(x=x.left;x;)u.push(x),x=x.right;else for(u.pop();u.length>0&&u[u.length-1].left===x;)x=u[u.length-1],u.pop()}},Object.defineProperty(l,"hasPrev",{get:function(){var u=this._stack;if(0===u.length)return!1;if(u[u.length-1].left)return!0;for(var x=u.length-1;x>0;--x)if(u[x-1].right===u[x])return!0;return!1}})},{}],70:[function(v,b,h){"use strict";b.exports=function(_,k){var w=new i(_);return w.update(k),w};var e=v("./lib/text.js"),n=v("./lib/lines.js"),r=v("./lib/background.js"),o=v("./lib/cube.js"),t=v("./lib/ticks.js"),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function a(_,k){return _[0]=k[0],_[1]=k[1],_[2]=k[2],_}function i(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(_)}var s=i.prototype;function c(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}s.update=function(_){function k(X,J,G){if(G in _){var Z,re=_[G],j=this[G];this[G]=Z=(X?Array.isArray(re)&&Array.isArray(re[0]):Array.isArray(re))?[J(re[0]),J(re[1]),J(re[2])]:[J(re),J(re),J(re)];for(var B=0;B<3;++B)if(Z[B]!==j[B])return!0}return!1}_=_||{};var w,C=k.bind(this,!1,Number),A=k.bind(this,!1,Boolean),O=k.bind(this,!1,String),P=k.bind(this,!0,function(X){if(Array.isArray(X)){if(3===X.length)return[+X[0],+X[1],+X[2],1];if(4===X.length)return[+X[0],+X[1],+X[2],+X[3]]}return[0,0,0,1]}),S=!1,E=!1;if("bounds"in _)for(var D=_.bounds,z=0;z<2;++z)for(var N=0;N<3;++N)D[z][N]!==this.bounds[z][N]&&(E=!0),this.bounds[z][N]=D[z][N];if("ticks"in _)for(w=_.ticks,S=!0,this.autoTicks=!1,z=0;z<3;++z)this.tickSpacing[z]=0;else C("tickSpacing")&&(this.autoTicks=!0,E=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),E=!0,S=!0,this._firstInit=!1),E&&this.autoTicks&&(w=t.create(this.bounds,this.tickSpacing),S=!0),S){for(z=0;z<3;++z)w[z].sort(function(X,J){return X.x-J.x});t.equal(w,this.ticks)?S=!1:this.ticks=w}A("tickEnable"),O("tickFont")&&(S=!0),C("tickSize"),C("tickAngle"),C("tickPad"),P("tickColor");var V=O("labels");O("labelFont")&&(V=!0),A("labelEnable"),C("labelSize"),C("labelPad"),P("labelColor"),A("lineEnable"),A("lineMirror"),C("lineWidth"),P("lineColor"),A("lineTickEnable"),A("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),P("lineTickColor"),A("gridEnable"),C("gridWidth"),P("gridColor"),A("zeroEnable"),P("zeroLineColor"),C("zeroLineWidth"),A("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(V||S)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&S&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var l=[new c,new c,new c];function p(_,k,w,C,A){for(var O=_.primalOffset,P=_.primalMinor,S=_.mirrorOffset,E=_.mirrorMinor,D=C[k],z=0;z<3;++z)if(k!==z){var N=O,V=S,X=P,J=E;D&1<<z&&(N=S,V=O,X=E,J=P),N[z]=w[0][z],V[z]=w[1][z],A[z]>0?(X[z]=-1,J[z]=0):(X[z]=0,J[z]=1)}}var g=[0,0,0],u={model:d,view:d,projection:d,_ortho:!1};s.isOpaque=function(){return!0},s.isTransparent=function(){return!1},s.drawTransparent=function(_){};var x=[0,0,0],f=[0,0,0],T=[0,0,0];s.draw=function(_){for(var k=this.gl,w=(_=_||u).model||d,C=_.view||d,A=_.projection||d,O=this.bounds,P=_._ortho||!1,S=o(w,C,A,O,P),E=S.cubeEdges,D=S.axis,J=(P?2:1)*this.pixelRatio*(A[3]*C[12]+A[7]*C[13]+A[11]*C[14]+A[15]*C[15])/k.drawingBufferHeight,G=0;G<3;++G)this.lastCubeProps.cubeEdges[G]=E[G],this.lastCubeProps.axis[G]=D[G];var Z=l;for(G=0;G<3;++G)p(l[G],G,this.bounds,E,D);k=this.gl;var re,se,ie,Ee,he,me,Se,Me,Ie,Fe,Ne,De,j=g;for(G=0;G<3;++G)j[G]=this.backgroundEnable[G]?D[G]:0;for(this._background.draw(w,C,A,O,j,this.backgroundColor),this._lines.bind(w,C,A,this),G=0;G<3;++G){var B=[0,0,0];B[G]=D[G]>0?O[1][G]:O[0][G];for(var H=0;H<2;++H){var ee=(G+1+H)%3,U=(G+1+(1^H))%3;this.gridEnable[ee]&&this._lines.drawGrid(ee,U,this.bounds,B,this.gridColor[ee],this.gridWidth[ee]*this.pixelRatio)}for(H=0;H<2;++H)ee=(G+1+H)%3,this.zeroEnable[U=(G+1+(1^H))%3]&&Math.min(O[0][U],O[1][U])<=0&&Math.max(O[0][U],O[1][U])>=0&&this._lines.drawZero(ee,U,this.bounds,B,this.zeroLineColor[U],this.zeroLineWidth[U]*this.pixelRatio)}for(G=0;G<3;++G){this.lineEnable[G]&&this._lines.drawAxisLine(G,this.bounds,Z[G].primalOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio),this.lineMirror[G]&&this._lines.drawAxisLine(G,this.bounds,Z[G].mirrorOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio);var $=a(x,Z[G].primalMinor),q=a(f,Z[G].mirrorMinor),te=this.lineTickLength;for(H=0;H<3;++H){var ne=J/w[5*H];$[H]*=te[H]*ne,q[H]*=te[H]*ne}this.lineTickEnable[G]&&this._lines.drawAxisTicks(G,Z[G].primalOffset,$,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio),this.lineTickMirror[G]&&this._lines.drawAxisTicks(G,Z[G].mirrorOffset,q,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio)}function ue(Ee){(ie=[0,0,0])[Ee]=1}for(this._lines.unbind(),this._text.bind(w,C,A,this.pixelRatio),G=0;G<3;++G){var de=Z[G].primalMinor,be=Z[G].mirrorMinor,_e=a(T,Z[G].primalOffset);for(H=0;H<3;++H)this.lineTickEnable[G]&&(_e[H]+=J*de[H]*Math.max(this.lineTickLength[H],0)/w[5*H]);var xe=[0,0,0];if(xe[G]=1,this.tickEnable[G]){for(-3600===this.tickAngle[G]?(this.tickAngle[G]=0,this.tickAlign[G]="auto"):this.tickAlign[G]=-1,re[0]="auto"===(re=[this.tickAlign[G],.5,se=1])[0]?0:parseInt(""+re[0]),ie=[0,0,0],Se=void 0,Me=void 0,Ie=void 0,Fe=void 0,Ne=void 0,De=void 0,Fe=(he=de)[Me=((Ee=G)+2)%3],Ne=(me=be)[Se=(Ee+1)%3],De=me[Me],(Ie=he[Se])>0&&De>0||Ie>0&&De<0||Ie<0&&De>0||Ie<0&&De<0?ue(Se):(Fe>0&&Ne>0||Fe>0&&Ne<0||Fe<0&&Ne>0||Fe<0&&Ne<0)&&ue(Me),H=0;H<3;++H)_e[H]+=J*de[H]*this.tickPad[H]/w[5*H];this._text.drawTicks(G,this.tickSize[G],this.tickAngle[G],_e,this.tickColor[G],xe,ie,re)}if(this.labelEnable[G]){for(se=0,ie=[0,0,0],this.labels[G].length>4&&(ue(G),se=1),re[0]="auto"===(re=[this.labelAlign[G],.5,se])[0]?0:parseInt(""+re[0]),H=0;H<3;++H)_e[H]+=J*de[H]*this.labelPad[H]/w[5*H];_e[G]+=.5*(O[0][G]+O[1][G]),this._text.drawLabel(G,this.labelSize[G],this.labelAngle[G],_e,this.labelColor[G],[0,0,0],ie,re)}}this._text.unbind()},s.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(v,b,h){"use strict";b.exports=function(d){for(var a=[],i=[],s=0,c=0;c<3;++c)for(var l=(c+1)%3,p=(c+2)%3,g=[0,0,0],u=[0,0,0],x=-1;x<=1;x+=2){i.push(s,s+2,s+1,s+1,s+2,s+3),g[c]=x,u[c]=x;for(var f=-1;f<=1;f+=2){g[l]=f;for(var T=-1;T<=1;T+=2)g[p]=T,a.push(g[0],g[1],g[2],u[0],u[1],u[2]),s+=1}var _=l;l=p,p=_}var k=e(d,new Float32Array(a)),w=e(d,new Uint16Array(i),d.ELEMENT_ARRAY_BUFFER),C=n(d,[{buffer:k,type:d.FLOAT,size:3,offset:0,stride:24},{buffer:k,type:d.FLOAT,size:3,offset:12,stride:24}],w),A=r(d);return A.attributes.position.location=0,A.attributes.normal.location=1,new o(d,k,C,A)};var e=v("gl-buffer"),n=v("gl-vao"),r=v("./shaders").bg;function o(d,a,i,s){this.gl=d,this.buffer=a,this.vao=i,this.shader=s}var t=o.prototype;t.draw=function(d,a,i,s,c,l){for(var p=!1,g=0;g<3;++g)p=p||c[g];if(p){var u=this.gl;u.enable(u.POLYGON_OFFSET_FILL),u.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:d,view:a,projection:i,bounds:s,enable:c,colors:l},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),u.disable(u.POLYGON_OFFSET_FILL)}},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(v,b,h){"use strict";b.exports=function(f,T,_,k,w){n(t,T,f),n(t,_,t);for(var C=0,A=0;A<2;++A){i[2]=k[A][2];for(var O=0;O<2;++O){i[1]=k[O][1];for(var P=0;P<2;++P)i[0]=k[P][0],c(d[C],i,t),C+=1}}var S=-1;for(A=0;A<8;++A){for(var E=d[A][3],D=0;D<3;++D)a[A][D]=d[A][D]/E;w&&(a[A][2]*=-1),E<0&&(S<0||a[A][2]<a[S][2])&&(S=A)}if(S<0){S=0;for(var z=0;z<3;++z){for(var N=(z+2)%3,V=(z+1)%3,X=-1,J=-1,G=0;G<2;++G){var Z=(j=G<<z)+(G<<N)+(1-G<<V),re=j+(1-G<<N)+(G<<V);o(a[j],a[Z],a[re],s)<0||(G?X=1:J=1)}if(X<0||J<0)J>X&&(S|=1<<z);else{for(G=0;G<2;++G){Z=(j=G<<z)+(G<<N)+(1-G<<V);var j,B=p([d[j],d[Z],d[re=j+(1-G<<N)+(G<<V)],d[j+(1<<N)+(1<<V)]]);G?X=B:J=B}J>X&&(S|=1<<z)}}}var H=7^S,ee=-1;for(A=0;A<8;++A)A!==S&&A!==H&&(ee<0||a[ee][1]>a[A][1])&&(ee=A);var U=-1;for(A=0;A<3;++A)(q=ee^1<<A)!==S&&q!==H&&(U<0&&(U=q),(V=a[q])[0]<a[U][0]&&(U=q));var $=-1;for(A=0;A<3;++A){var q;(q=ee^1<<A)!==S&&q!==H&&q!==U&&($<0&&($=q),(V=a[q])[0]>a[$][0]&&($=q))}var te=g;te[0]=te[1]=te[2]=0,te[e.log2(U^ee)]=ee&U,te[e.log2(ee^$)]=ee&$;var ne=7^$;ne===S||ne===H?te[e.log2($^(ne=7^U))]=ne&$:te[e.log2(U^ne)]=ne&U;var se=u,ie=S;for(z=0;z<3;++z)se[z]=ie&1<<z?-1:1;return x};var e=v("bit-twiddle"),n=v("gl-mat4/multiply"),r=v("split-polygon"),o=v("robust-orientation"),t=new Array(16),d=new Array(8),a=new Array(8),i=new Array(3),s=[0,0,0];function c(f,T,_){for(var k=0;k<4;++k){f[k]=_[12+k];for(var w=0;w<3;++w)f[k]+=T[w]*_[4*w+k]}}!function(){for(var f=0;f<8;++f)d[f]=[1,1,1,1],a[f]=[1,1,1]}();var l=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(f){for(var T=0;T<l.length;++T)if((f=r.positive(f,l[T])).length<3)return 0;var _=f[0],k=_[0]/_[3],w=_[1]/_[3],C=0;for(T=1;T+1<f.length;++T){var A=f[T],O=f[T+1];C+=Math.abs((A[0]/A[3]-k)*(O[1]/O[3]-w)-(A[1]/A[3]-w)*(O[0]/O[3]-k))}return C}var g=[1,1,1],u=[0,0,0],x={cubeEdges:g,axis:u}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(v,b,h){"use strict";b.exports=function(g,u,x){var f=[],T=[0,0,0],_=[0,0,0],k=[0,0,0],w=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var A=f.length/3|0,O=0;O<x[C].length;++O){var P=+x[C][O].x;f.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var S=f.length/3|0;T[C]=A,_[C]=S-A,A=f.length/3|0;for(var E=0;E<x[C].length;++E)f.push(P=+x[C][E].x,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1);S=f.length/3|0,k[C]=A,w[C]=S-A}var D=e(g,new Float32Array(f)),z=n(g,[{buffer:D,type:g.FLOAT,size:3,stride:0,offset:0}]),N=r(g);return N.attributes.position.location=0,new l(g,D,z,N,_,T,w,k)};var e=v("gl-buffer"),n=v("gl-vao"),r=v("./shaders").line,o=[0,0,0],t=[0,0,0],d=[0,0,0],a=[0,0,0],i=[1,1];function s(g){return g[0]=g[1]=g[2]=0,g}function c(g,u){return g[0]=u[0],g[1]=u[1],g[2]=u[2],g}function l(g,u,x,f,T,_,k,w){this.gl=g,this.vertBuffer=u,this.vao=x,this.shader=f,this.tickCount=T,this.tickOffset=_,this.gridCount=k,this.gridOffset=w}var p=l.prototype;p.bind=function(g,u,x){this.shader.bind(),this.shader.uniforms.model=g,this.shader.uniforms.view=u,this.shader.uniforms.projection=x,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(g,u,x,f,T){var _=s(t);this.shader.uniforms.majorAxis=t,_[g]=u[1][g]-u[0][g],this.shader.uniforms.minorAxis=_;var k,w=c(a,x);w[g]+=u[0][g],this.shader.uniforms.offset=w,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=f,(k=s(d))[(g+2)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6),(k=s(d))[(g+1)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(g,u,x,f,T){if(this.tickCount[g]){var _=s(o);_[g]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=u,this.shader.uniforms.minorAxis=x,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=T;var k=s(d);k[g]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}},p.drawGrid=function(g,u,x,f,T,_){if(this.gridCount[g]){var k=s(t);k[u]=x[1][u]-x[0][u],this.shader.uniforms.minorAxis=k;var w=c(a,f);w[u]+=x[0][u],this.shader.uniforms.offset=w;var C=s(o);C[g]=1,this.shader.uniforms.majorAxis=C;var A=s(d);A[g]=1,this.shader.uniforms.screenAxis=A,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}},p.drawZero=function(g,u,x,f,T,_){var k=s(t);this.shader.uniforms.majorAxis=k,k[g]=x[1][g]-x[0][g],this.shader.uniforms.minorAxis=k;var w=c(a,f);w[g]+=x[0][g],this.shader.uniforms.offset=w;var C=s(d);C[u]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(v,b,h){"use strict";var e=v("glslify"),n=v("gl-shader"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);h.line=function(s){return n(s,r,o,null,[{name:"position",type:"vec3"}])};var t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);h.text=function(s){return n(s,t,d,null,[{name:"position",type:"vec3"}])};var a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);h.bg=function(s){return n(s,a,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(v,b,h){(function(e){(function(){"use strict";b.exports=function(l,p,g,u,x,f){var T=n(l),_=r(l,[{buffer:T,size:3}]),k=t(l);k.attributes.position.location=0;var w=new i(l,k,T,_);return w.update(p,g,u,x,f),w};var n=v("gl-buffer"),r=v("gl-vao"),o=v("vectorize-text"),t=v("./shaders").text,d=window||e.global||{},a=d.__TEXT_CACHE||{};function i(l,p,g,u){this.gl=l,this.shader=p,this.buffer=g,this.vao=u,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}d.__TEXT_CACHE={};var s=i.prototype,c=[0,0];s.bind=function(l,p,g,u){this.vao.bind(),this.shader.bind();var x=this.shader.uniforms;x.model=l,x.view=p,x.projection=g,x.pixelScale=u,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=c},s.unbind=function(){this.vao.unbind()},s.update=function(l,p,g,u,x){var f=[];function T(S,E,D,z,N,V){var X=a[D];X||(X=a[D]={});var J=X[E];J||(J=X[E]=function($,q){try{return o($,q)}catch(te){return console.warn('error vectorizing text:"'+$+'" error:',te),{cells:[],positions:[]}}}(E,{triangles:!0,font:D,textAlign:"center",textBaseline:"middle",lineSpacing:N,styletags:V}));for(var G=(z||12)/12,Z=J.positions,re=J.cells,j=0,B=re.length;j<B;++j)for(var H=re[j],ee=2;ee>=0;--ee){var U=Z[H[ee]];f.push(G*U[0],-G*U[1],S)}}for(var _=[0,0,0],k=[0,0,0],w=[0,0,0],C=[0,0,0],A={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){w[O]=f.length/3|0,T(.5*(l[0][O]+l[1][O]),p[O],g[O],12,1.25,A),C[O]=(f.length/3|0)-w[O],_[O]=f.length/3|0;for(var P=0;P<u[O].length;++P)u[O][P].text&&T(u[O][P].x,u[O][P].text,u[O][P].font||x,u[O][P].fontSize||12,1.25,A);k[O]=(f.length/3|0)-_[O]}this.buffer.update(f),this.tickOffset=_,this.tickCount=k,this.labelOffset=w,this.labelCount=C},s.drawTicks=function(l,p,g,u,x,f,T,_){this.tickCount[l]&&(this.shader.uniforms.axis=f,this.shader.uniforms.color=x,this.shader.uniforms.angle=g,this.shader.uniforms.scale=p,this.shader.uniforms.offset=u,this.shader.uniforms.alignDir=T,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},s.drawLabel=function(l,p,g,u,x,f,T,_){this.labelCount[l]&&(this.shader.uniforms.axis=f,this.shader.uniforms.color=x,this.shader.uniforms.angle=g,this.shader.uniforms.scale=p,this.shader.uniforms.offset=u,this.shader.uniforms.alignDir=T,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},s.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,v("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(v,b,h){"use strict";function e(n,r){var o=n+"",t=o.indexOf("."),d=0;t>=0&&(d=o.length-t-1);var a=Math.pow(10,d),i=Math.round(n*r*a),s=i+"";if(s.indexOf("e")>=0)return s;var c=i/a,l=i%a;i<0?(c=0|-Math.ceil(c),l=0|-l):(c=0|Math.floor(c),l|=0);var p=""+c;if(i<0&&(p="-"+p),d){for(var g=""+l;g.length<d;)g="0"+g;return p+"."+g}return p}h.create=function(n,r){for(var o=[],t=0;t<3;++t){for(var d=[],a=0;a*r[t]<=n[1][t];++a)d.push({x:a*r[t],text:e(r[t],a)});for(a=-1;a*r[t]>=n[0][t];--a)d.push({x:a*r[t],text:e(r[t],a)});o.push(d)}return o},h.equal=function(n,r){for(var o=0;o<3;++o){if(n[o].length!==r[o].length)return!1;for(var t=0;t<n[o].length;++t){var d=n[o][t],a=r[o][t];if(d.x!==a.x||d.text!==a.text||d.font!==a.font||d.fontColor!==a.fontColor||d.fontSize!==a.fontSize||d.dx!==a.dx||d.dy!==a.dy)return!1}}return!0}},{}],77:[function(v,b,h){"use strict";b.exports=function(x,f,T,_,k){var w=f.model||a,C=f.view||a,A=f.projection||a,O=f._ortho||!1,P=x.bounds,S=(k=k||r(w,C,A,P,O)).axis;o(i,C,w),o(i,A,i);for(var E=g,D=0;D<3;++D)E[D].lo=1/0,E[D].hi=-1/0,E[D].pixelsPerDataUnit=1/0;var z=e(t(i,i));t(i,i);for(var N=0;N<3;++N){var V=(N+1)%3,X=(N+2)%3,J=u;e:for(D=0;D<2;++D){var G=[];if(S[N]<0!=!!D){J[N]=P[D][N];for(var Z=0;Z<2;++Z){J[V]=P[Z^D][V];for(var re=0;re<2;++re)J[X]=P[re^Z^D][X],G.push(J.slice())}var j=O?5:4;for(Z=j;Z===j;++Z){if(0===G.length)continue e;G=n.positive(G,z[Z])}for(Z=0;Z<G.length;++Z){var B=p(u,i,X=G[Z],T,_);for(re=0;re<3;++re)E[re].lo=Math.min(E[re].lo,X[re]),E[re].hi=Math.max(E[re].hi,X[re]),re!==N&&(E[re].pixelsPerDataUnit=Math.min(E[re].pixelsPerDataUnit,Math.abs(B[re])))}}}}return E};var e=v("extract-frustum-planes"),n=v("split-polygon"),r=v("./lib/cube.js"),o=v("gl-mat4/multiply"),t=v("gl-mat4/transpose"),d=v("gl-vec4/transformMat4"),a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function s(x,f,T){this.lo=x,this.hi=f,this.pixelsPerDataUnit=T}var c=[0,0,0,1],l=[0,0,0,1];function p(x,f,T,_,k){for(var w=0;w<3;++w){for(var C=c,A=l,O=0;O<3;++O)A[O]=C[O]=T[O];A[3]=C[3]=1,A[w]+=1,d(A,A,f),A[3]<0&&(x[w]=1/0),C[w]-=1,d(C,C,f),C[3]<0&&(x[w]=1/0);var P=(C[0]/C[3]-A[0]/A[3])*_,S=(C[1]/C[3]-A[1]/A[3])*k;x[w]=.25*Math.sqrt(P*P+S*S)}return x}var g=[new s(1/0,-1/0,1/0),new s(1/0,-1/0,1/0),new s(1/0,-1/0,1/0)],u=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(v,b,h){"use strict";var e=v("typedarray-pool"),n=v("ndarray-ops"),r=v("ndarray"),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function t(s,c,l,p,g){this.gl=s,this.type=c,this.handle=l,this.length=p,this.usage=g}var d=t.prototype;function a(s,c,l,p,g,u){var x=g.length*g.BYTES_PER_ELEMENT;if(u<0)return s.bufferData(c,g,p),x;if(x+u>l)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return s.bufferSubData(c,u,g),l}d.bind=function(){this.gl.bindBuffer(this.type,this.handle)},d.unbind=function(){this.gl.bindBuffer(this.type,null)},d.dispose=function(){this.gl.deleteBuffer(this.handle)},d.update=function(s,c){if("number"!=typeof c&&(c=-1),this.bind(),"object"==typeof s&&void 0!==s.shape){var l=s.dtype;if(o.indexOf(l)<0&&(l="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(l=gl.getExtension("OES_element_index_uint")&&"uint16"!==l?"uint32":"uint16"),l===s.dtype&&function(x,f){for(var T=1,_=f.length-1;_>=0;--_){if(f[_]!==T)return!1;T*=x[_]}return!0}(s.shape,s.stride))this.length=a(this.gl,this.type,this.length,this.usage,0===s.offset&&s.data.length===s.shape[0]?s.data:s.data.subarray(s.offset,s.shape[0]),c);else{var p=e.malloc(s.size,l),g=r(p,s.shape);n.assign(g,s),this.length=a(this.gl,this.type,this.length,this.usage,c<0?p:p.subarray(0,s.size),c),e.free(p)}}else if(Array.isArray(s)){var u;u=function i(s,c){for(var l=e.malloc(s.length,c),p=s.length,g=0;g<p;++g)l[g]=s[g];return l}(s,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=a(this.gl,this.type,this.length,this.usage,c<0?u:u.subarray(0,s.length),c),e.free(u)}else if("object"==typeof s&&"number"==typeof s.length)this.length=a(this.gl,this.type,this.length,this.usage,s,c);else{if("number"!=typeof s&&void 0!==s)throw new Error("gl-buffer: Invalid data type");if(c>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(s|=0)<=0&&(s=1),this.gl.bufferData(this.type,0|s,this.usage),this.length=s}},b.exports=function(s,c,l,p){if(p=p||s.DYNAMIC_DRAW,(l=l||s.ARRAY_BUFFER)!==s.ARRAY_BUFFER&&l!==s.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(p!==s.DYNAMIC_DRAW&&p!==s.STATIC_DRAW&&p!==s.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var g=s.createBuffer(),u=new t(s,l,g,0,p);return u.update(c),u}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(v,b,h){"use strict";var e=v("gl-vec3");b.exports=function(r,o){var t=r.positions,d=r.vectors,a={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(0===r.positions.length)return o&&(o[0]=[0,0,0],o[1]=[0,0,0]),a;for(var i=0,s=1/0,c=-1/0,l=1/0,p=-1/0,g=1/0,u=-1/0,x=null,f=null,T=[],_=1/0,k=!1,w=0;w<t.length;w++){var C=t[w];s=Math.min(C[0],s),c=Math.max(C[0],c),l=Math.min(C[1],l),p=Math.max(C[1],p),g=Math.min(C[2],g),u=Math.max(C[2],u);var A=d[w];if(e.length(A)>i&&(i=e.length(A)),w){var O=2*e.distance(x,C)/(e.length(f)+e.length(A));O?(_=Math.min(_,O),k=!1):k=!0}k||(x=C,f=A),T.push(A)}var S=[c,p,u];o&&(o[0]=[s,l,g],o[1]=S),0===i&&(i=1);var E=1/i;isFinite(_)||(_=1),a.vectorScale=_;var D=r.coneSize||.5;r.absoluteConeSize&&(D=r.absoluteConeSize*E),a.coneScale=D,w=0;for(var z=0;w<t.length;w++)for(var N=(C=t[w])[0],V=C[1],X=C[2],J=T[w],G=e.length(J)*E,Z=0;Z<8;Z++){a.positions.push([N,V,X,z++]),a.positions.push([N,V,X,z++]),a.positions.push([N,V,X,z++]),a.positions.push([N,V,X,z++]),a.positions.push([N,V,X,z++]),a.positions.push([N,V,X,z++]),a.vectors.push(J),a.vectors.push(J),a.vectors.push(J),a.vectors.push(J),a.vectors.push(J),a.vectors.push(J),a.vertexIntensity.push(G,G,G),a.vertexIntensity.push(G,G,G);var re=a.positions.length;a.cells.push([re-6,re-5,re-4],[re-3,re-2,re-1])}return a};var n=v("./lib/shaders");b.exports.createMesh=v("./create_mesh"),b.exports.createConeMesh=function(r,o){return b.exports.createMesh(r,o,{shaders:n,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(v,b,h){"use strict";var e=v("gl-shader"),n=v("gl-buffer"),r=v("gl-vao"),o=v("gl-texture2d"),t=v("gl-mat4/multiply"),d=v("gl-mat4/invert"),a=v("ndarray"),i=v("colormap"),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(u,x,f,T,_,k,w,C,A,O,P){this.gl=u,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=f,this.pickShader=T,this.trianglePositions=_,this.triangleVectors=k,this.triangleColors=C,this.triangleUVs=A,this.triangleIds=w,this.triangleVAO=O,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=s,this._view=s,this._projection=s,this._resolution=[1,1]}var l=c.prototype;function p(u,x){var f=e(u,x.meshShader.vertex,x.meshShader.fragment,null,x.meshShader.attributes);return f.attributes.position.location=0,f.attributes.color.location=2,f.attributes.uv.location=3,f.attributes.vector.location=4,f}function g(u,x){var f=e(u,x.pickShader.vertex,x.pickShader.fragment,null,x.pickShader.attributes);return f.attributes.position.location=0,f.attributes.id.location=1,f.attributes.vector.location=4,f}l.isOpaque=function(){return this.opacity>=1},l.isTransparent=function(){return this.opacity<1},l.pickSlots=1,l.setPickBase=function(u){this.pickId=u},l.update=function(u){u=u||{};var x=this.gl;this.dirty=!0,"lightPosition"in u&&(this.lightPosition=u.lightPosition),"opacity"in u&&(this.opacity=u.opacity),"ambient"in u&&(this.ambientLight=u.ambient),"diffuse"in u&&(this.diffuseLight=u.diffuse),"specular"in u&&(this.specularLight=u.specular),"roughness"in u&&(this.roughness=u.roughness),"fresnel"in u&&(this.fresnel=u.fresnel),void 0!==u.tubeScale&&(this.tubeScale=u.tubeScale),void 0!==u.vectorScale&&(this.vectorScale=u.vectorScale),void 0!==u.coneScale&&(this.coneScale=u.coneScale),void 0!==u.coneOffset&&(this.coneOffset=u.coneOffset),u.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(ee){for(var U=i({colormap:ee,nshades:256,format:"rgba"}),$=new Uint8Array(1024),q=0;q<256;++q){for(var te=U[q],ne=0;ne<3;++ne)$[4*q+ne]=te[ne];$[4*q+3]=255*te[3]}return a($,[256,256,4],[4,0,1])}(u.colormap)),this.texture.generateMipmap());var f=u.cells,T=u.positions,_=u.vectors;if(T&&f&&_){var k=[],w=[],C=[],A=[],O=[];this.cells=f,this.positions=T,this.vectors=_;var P=u.meshColor||[1,1,1,1],S=u.vertexIntensity,E=1/0,D=-1/0;if(S)if(u.vertexIntensityBounds)E=+u.vertexIntensityBounds[0],D=+u.vertexIntensityBounds[1];else for(var z=0;z<S.length;++z){var N=S[z];E=Math.min(E,N),D=Math.max(D,N)}else for(z=0;z<T.length;++z)N=T[z][2],E=Math.min(E,N),D=Math.max(D,N);for(this.intensity=S||function(ee){for(var U=ee.length,$=new Array(U),q=0;q<U;++q)$[q]=ee[q][2];return $}(T),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],z=0;z<T.length;++z)for(var V=T[z],X=0;X<3;++X)!isNaN(V[X])&&isFinite(V[X])&&(this.bounds[0][X]=Math.min(this.bounds[0][X],V[X]),this.bounds[1][X]=Math.max(this.bounds[1][X],V[X]));var J=0;e:for(z=0;z<f.length;++z){var G=f[z];if(3===G.length){for(X=0;X<3;++X){V=T[re=G[X]];for(var Z=0;Z<3;++Z)if(isNaN(V[Z])||!isFinite(V[Z]))continue e}for(X=0;X<3;++X){var re;V=T[re=G[2-X]],k.push(V[0],V[1],V[2],V[3]);var j=_[re];w.push(j[0],j[1],j[2],j[3]||0);var B;C.push(P[0],P[1],P[2],3===P.length?1:P[3]),A.push((B=S?[(S[re]-E)/(D-E),0]:[(V[2]-E)/(D-E),0])[0],B[1]),O.push(z)}J+=1}}this.triangleCount=J,this.trianglePositions.update(k),this.triangleVectors.update(w),this.triangleColors.update(C),this.triangleUVs.update(A),this.triangleIds.update(new Uint32Array(O))}},l.drawTransparent=l.draw=function(u){for(var x=this.gl,f=(u=u||{}).model||s,T=u.view||s,_=u.projection||s,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)k[0][w]=Math.max(k[0][w],this.clipBounds[0][w]),k[1][w]=Math.min(k[1][w],this.clipBounds[1][w]);var C={model:f,view:T,projection:_,inverseModel:s.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};C.inverseModel=d(C.inverseModel,C.model),x.disable(x.CULL_FACE),this.texture.bind(0);var A=new Array(16);for(t(A,C.view,C.model),t(A,C.projection,A),d(A,A),w=0;w<3;++w)C.eyePosition[w]=A[12+w]/A[15];var O=A[15];for(w=0;w<3;++w)O+=this.lightPosition[w]*A[4*w+3];for(w=0;w<3;++w){for(var P=A[12+w],S=0;S<3;++S)P+=A[4*S+w]*this.lightPosition[S];C.lightPosition[w]=P/O}if(this.triangleCount>0){var E=this.triShader;E.bind(),E.uniforms=C,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},l.drawPick=function(u){for(var x=this.gl,f=(u=u||{}).model||s,T=u.view||s,_=u.projection||s,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)k[0][w]=Math.max(k[0][w],this.clipBounds[0][w]),k[1][w]=Math.min(k[1][w],this.clipBounds[1][w]);this._model=[].slice.call(f),this._view=[].slice.call(T),this._projection=[].slice.call(_),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var C={model:f,view:T,projection:_,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},A=this.pickShader;A.bind(),A.uniforms=C,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},l.pick=function(u){if(!u||u.id!==this.pickId)return null;var x=u.value[0]+256*u.value[1]+65536*u.value[2],f=this.cells[x],T=this.positions[f[1]].slice(0,3),_={position:T,dataCoordinate:T,index:Math.floor(f[1]/48)};return"cone"===this.traceType?_.index=Math.floor(f[1]/48):"streamtube"===this.traceType&&(_.intensity=this.intensity[f[1]],_.velocity=this.vectors[f[1]].slice(0,3),_.divergence=this.vectors[f[1]][3],_.index=x),_},l.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},b.exports=function(u,x,f){var T=f.shaders;1===arguments.length&&(u=(x=u).gl);var _=p(u,T),k=g(u,T),w=o(u,a(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=u.LINEAR_MIPMAP_LINEAR,w.magFilter=u.LINEAR;var C=n(u),A=n(u),O=n(u),P=n(u),S=n(u),D=new c(u,w,_,k,C,A,S,O,P,r(u,[{buffer:C,type:u.FLOAT,size:4},{buffer:S,type:u.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:u.FLOAT,size:4},{buffer:P,type:u.FLOAT,size:2},{buffer:A,type:u.FLOAT,size:4}]),f.traceType||"cone");return D.update(x),D}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(v,b,h){var e=v("glslify"),n=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),r=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);h.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},h.pickShader={vertex:o,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(v,b,h){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(v,b,h){var e=v("./1.0/numbers");b.exports=function(n){return e[n]}},{"./1.0/numbers":82}],84:[function(v,b,h){"use strict";b.exports=function(c){var l=c.gl,p=e(l),g=n(l,[{buffer:p,type:l.FLOAT,size:3,offset:0,stride:40},{buffer:p,type:l.FLOAT,size:4,offset:12,stride:40},{buffer:p,type:l.FLOAT,size:3,offset:28,stride:40}]),u=r(l);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.offset.location=2;var x=new t(l,p,g,u);return x.update(c),x};var e=v("gl-buffer"),n=v("gl-vao"),r=v("./shaders/index"),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(c,l,p,g){this.gl=c,this.shader=g,this.buffer=l,this.vao=p,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var d=t.prototype;function a(c,l){for(var p=0;p<3;++p)c[0][p]=Math.min(c[0][p],l[p]),c[1][p]=Math.max(c[1][p],l[p])}d.isOpaque=function(){return!this.hasAlpha},d.isTransparent=function(){return this.hasAlpha},d.drawTransparent=d.draw=function(c){var l=this.gl,p=this.shader.uniforms;this.shader.bind();var g=p.view=c.view||o,u=p.projection=c.projection||o;p.model=c.model||o,p.clipBounds=this.clipBounds,p.opacity=this.opacity;var k=(c._ortho?2:1)*this.pixelRatio*(u[3]*g[12]+u[7]*g[13]+u[11]*g[14]+u[15]*g[15])/l.drawingBufferHeight;this.vao.bind();for(var w=0;w<3;++w)l.lineWidth(this.lineWidth[w]*this.pixelRatio),p.capSize=this.capSize[w]*k,this.lineCount[w]&&l.drawArrays(l.LINES,this.lineOffset[w],this.lineCount[w]);this.vao.unbind()};var i=function(){for(var c=new Array(3),l=0;l<3;++l){for(var p=[],g=1;g<=2;++g)for(var u=-1;u<=1;u+=2){var x=[0,0,0];x[(g+l)%3]=u,p.push(x)}c[l]=p}return c}();function s(c,l,p,g){for(var u=i[g],x=0;x<u.length;++x){var f=u[x];c.push(l[0],l[1],l[2],p[0],p[1],p[2],p[3],f[0],f[1],f[2])}return u.length}d.update=function(c){"lineWidth"in(c=c||{})&&(this.lineWidth=c.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in c&&(this.capSize=c.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in c&&(this.opacity=+c.opacity,this.opacity<1&&(this.hasAlpha=!0));var l=c.color||[[0,0,0],[0,0,0],[0,0,0]],p=c.position,g=c.error;if(Array.isArray(l[0])||(l=[l,l,l]),p&&g){var u=[],x=p.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var T=0;T<3;++T){this.lineOffset[T]=f;e:for(var _=0;_<x;++_){for(var k=p[_],w=0;w<3;++w)if(isNaN(k[w])||!isFinite(k[w]))continue e;var O,C=g[_],A=l[T];Array.isArray(A[0])&&(A=l[_]),3===A.length?A=[A[0],A[1],A[2],1]:4===A.length&&(A=[A[0],A[1],A[2],A[3]],!this.hasAlpha&&A[3]<1&&(this.hasAlpha=!0)),isNaN(C[0][T])||isNaN(C[1][T])||(C[0][T]<0&&((O=k.slice())[T]+=C[0][T],u.push(k[0],k[1],k[2],A[0],A[1],A[2],A[3],0,0,0,O[0],O[1],O[2],A[0],A[1],A[2],A[3],0,0,0),a(this.bounds,O),f+=2+s(u,O,A,T)),C[1][T]>0&&((O=k.slice())[T]+=C[1][T],u.push(k[0],k[1],k[2],A[0],A[1],A[2],A[3],0,0,0,O[0],O[1],O[2],A[0],A[1],A[2],A[3],0,0,0),a(this.bounds,O),f+=2+s(u,O,A,T)))}this.lineCount[T]=f-this.lineOffset[T]}this.buffer.update(u)}},d.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(v,b,h){"use strict";var e=v("glslify"),n=v("gl-shader"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);b.exports=function(t){return n(t,r,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(v,b,h){"use strict";var e=v("gl-texture2d");b.exports=function(x,f,T,_){n||(n=x.FRAMEBUFFER_UNSUPPORTED,r=x.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=x.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,t=x.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=x.getExtension("WEBGL_draw_buffers");if(!d&&k&&function(E,D){var z=E.getParameter(D.MAX_COLOR_ATTACHMENTS_WEBGL);d=new Array(z+1);for(var N=0;N<=z;++N){for(var V=new Array(z),X=0;X<N;++X)V[X]=E.COLOR_ATTACHMENT0+X;for(X=N;X<z;++X)V[X]=E.NONE;d[N]=V}}(x,k),Array.isArray(f)&&(_=T,T=0|f[1],f=0|f[0]),"number"!=typeof f)throw new Error("gl-fbo: Missing shape parameter");var w=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(f<0||f>w||T<0||T>w)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(_=_||{})){if((C=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!k)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>x.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var A=x.UNSIGNED_BYTE,O=x.getExtension("OES_texture_float");if(_.float&&C>0){if(!O)throw new Error("gl-fbo: Context does not support floating point textures");A=x.FLOAT}else _.preferFloat&&C>0&&O&&(A=x.FLOAT);var P=!0;"depth"in _&&(P=!!_.depth);var S=!1;return"stencil"in _&&(S=!!_.stencil),new p(x,f,T,A,C,P,S,k)};var n,r,o,t,d=null;function a(x){return[x.getParameter(x.FRAMEBUFFER_BINDING),x.getParameter(x.RENDERBUFFER_BINDING),x.getParameter(x.TEXTURE_BINDING_2D)]}function i(x,f){x.bindFramebuffer(x.FRAMEBUFFER,f[0]),x.bindRenderbuffer(x.RENDERBUFFER,f[1]),x.bindTexture(x.TEXTURE_2D,f[2])}function s(x){switch(x){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case t:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function c(x,f,T,_,k,w){if(!_)return null;var C=e(x,f,T,k,_);return C.magFilter=x.NEAREST,C.minFilter=x.NEAREST,C.mipSamples=1,C.bind(),x.framebufferTexture2D(x.FRAMEBUFFER,w,x.TEXTURE_2D,C.handle,0),C}function l(x,f,T,_,k){var w=x.createRenderbuffer();return x.bindRenderbuffer(x.RENDERBUFFER,w),x.renderbufferStorage(x.RENDERBUFFER,_,f,T),x.framebufferRenderbuffer(x.FRAMEBUFFER,k,x.RENDERBUFFER,w),w}function p(x,f,T,_,k,w,C,A){this.gl=x,this._shape=[0|f,0|T],this._destroyed=!1,this._ext=A,this.color=new Array(k);for(var O=0;O<k;++O)this.color[O]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=w,this._useStencil=C;var P=this,S=[0|f,0|T];Object.defineProperties(S,{0:{get:function(){return P._shape[0]},set:function(E){return P.width=E}},1:{get:function(){return P._shape[1]},set:function(E){return P.height=E}}}),this._shapeVector=S,function(E){var D=a(E.gl),z=E.gl,N=E.handle=z.createFramebuffer(),V=E._shape[0],X=E._shape[1],J=E.color.length,G=E._ext,Z=E._useStencil,re=E._useDepth,j=E._colorType;z.bindFramebuffer(z.FRAMEBUFFER,N);for(var B=0;B<J;++B)E.color[B]=c(z,V,X,j,z.RGBA,z.COLOR_ATTACHMENT0+B);0===J?(E._color_rb=l(z,V,X,z.RGBA4,z.COLOR_ATTACHMENT0),G&&G.drawBuffersWEBGL(d[0])):J>1&&G.drawBuffersWEBGL(d[J]);var H=z.getExtension("WEBGL_depth_texture");H?Z?E.depth=c(z,V,X,H.UNSIGNED_INT_24_8_WEBGL,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):re&&(E.depth=c(z,V,X,z.UNSIGNED_SHORT,z.DEPTH_COMPONENT,z.DEPTH_ATTACHMENT)):re&&Z?E._depth_rb=l(z,V,X,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):re?E._depth_rb=l(z,V,X,z.DEPTH_COMPONENT16,z.DEPTH_ATTACHMENT):Z&&(E._depth_rb=l(z,V,X,z.STENCIL_INDEX,z.STENCIL_ATTACHMENT));var ee=z.checkFramebufferStatus(z.FRAMEBUFFER);if(ee!==z.FRAMEBUFFER_COMPLETE){for(E._destroyed=!0,z.bindFramebuffer(z.FRAMEBUFFER,null),z.deleteFramebuffer(E.handle),E.handle=null,E.depth&&(E.depth.dispose(),E.depth=null),E._depth_rb&&(z.deleteRenderbuffer(E._depth_rb),E._depth_rb=null),B=0;B<E.color.length;++B)E.color[B].dispose(),E.color[B]=null;E._color_rb&&(z.deleteRenderbuffer(E._color_rb),E._color_rb=null),i(z,D),s(ee)}i(z,D)}(this)}var g=p.prototype;function u(x,f,T){if(x._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(x._shape[0]!==f||x._shape[1]!==T){var _=x.gl,k=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(f<0||f>k||T<0||T>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");x._shape[0]=f,x._shape[1]=T;for(var w=a(_),C=0;C<x.color.length;++C)x.color[C].shape=x._shape;x._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,x._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,x._shape[0],x._shape[1])),x.depth&&(x.depth.shape=x._shape),x._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,x._depth_rb),x._useDepth&&x._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,x._shape[0],x._shape[1]):x._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,x._shape[0],x._shape[1]):x._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,x._shape[0],x._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,x.handle);var A=_.checkFramebufferStatus(_.FRAMEBUFFER);A!==_.FRAMEBUFFER_COMPLETE&&(x.dispose(),i(_,w),s(A)),i(_,w)}}Object.defineProperties(g,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(x){if(Array.isArray(x)||(x=[0|x,0|x]),2!==x.length)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|x[0],T=0|x[1];return u(this,f,T),[f,T]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(x){return u(this,x|=0,this._shape[1]),x},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(x){return u(this,this._shape[0],x|=0),x},enumerable:!1}}),g.bind=function(){if(!this._destroyed){var x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,this.handle),x.viewport(0,0,this._shape[0],this._shape[1])}},g.dispose=function(){if(!this._destroyed){this._destroyed=!0;var x=this.gl;x.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(x.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(x.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(v,b,h){var e=v("sprintf-js").sprintf,n=v("gl-constants/lookup"),r=v("glsl-shader-name"),o=v("add-line-numbers");b.exports=function(t,d,a){"use strict";var i=r(d)||"of unknown name (see npm glsl-shader-name)",s="unknown type";void 0!==a&&(s=a===n.FRAGMENT_SHADER?"fragment":"vertex");for(var c=e("Error compiling %s shader %s:\n",s,i),l=e("%s%s",c,t),p=t.split("\n"),g={},u=0;u<p.length;u++){var x=p[u];if(""!==x&&"\0"!==x){var f=parseInt(x.split(":")[2]);if(isNaN(f))throw new Error(e("Could not parse error: %s",x));g[f]=x}}var T=o(d).split("\n");for(u=0;u<T.length;u++)if((g[u+3]||g[u+2]||g[u+1])&&(c+=T[u]+"\n",g[u+1])){var k=g[u+1];k=k.substr(k.split(":",3).join(":").length+1).trim(),c+=e("^^^ %s\n\n",k)}return{long:c.trim(),short:l.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(v,b,h){"use strict";b.exports=function(l,p){var g=l.gl,w=new a(l,o(g,d.vertex,d.fragment),o(g,d.pickVertex,d.pickFragment),t(g),t(g),t(g),t(g));return w.update(p),l.addObject(w),w};var e=v("binary-search-bounds"),n=v("iota-array"),r=v("typedarray-pool"),o=v("gl-shader"),t=v("gl-buffer"),d=v("./lib/shaders");function a(l,p,g,u,x,f,T){this.plot=l,this.shader=p,this.pickShader=g,this.positionBuffer=u,this.weightBuffer=x,this.colorBuffer=f,this.idBuffer=T,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i,l,p,s=a.prototype,c=[0,0,1,0,0,1,1,0,1,1,0,1];s.draw=(i=[1,0,0,0,1,0,0,0,1],function(){var l=this.plot,p=this.shader,g=this.bounds,u=this.numVertices;if(!(u<=0)){var x=l.gl,f=l.dataBox,_=g[3]-g[1],k=f[2]-f[0],w=f[3]-f[1];i[0]=2*(g[2]-g[0])/k,i[4]=2*_/w,i[6]=2*(g[0]-f[0])/k-1,i[7]=2*(g[1]-f[1])/w-1,p.bind();var C=p.uniforms;C.viewTransform=i,C.shape=this.shape;var A=p.attributes;this.positionBuffer.bind(),A.position.pointer(),this.weightBuffer.bind(),A.weight.pointer(x.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),A.color.pointer(x.UNSIGNED_BYTE,!0),x.drawArrays(x.TRIANGLES,0,u)}}),s.drawPick=(l=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(g){var u=this.plot,x=this.pickShader,f=this.bounds,T=this.numVertices;if(!(T<=0)){var _=u.gl,k=u.dataBox,C=f[3]-f[1],A=k[2]-k[0],O=k[3]-k[1];l[0]=2*(f[2]-f[0])/A,l[4]=2*C/O,l[6]=2*(f[0]-k[0])/A-1,l[7]=2*(f[1]-k[1])/O-1;for(var P=0;P<4;++P)p[P]=g>>8*P&255;this.pickOffset=g,x.bind();var S=x.uniforms;S.viewTransform=l,S.pickOffset=p,S.shape=this.shape;var E=x.attributes;return this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),E.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,T),g+this.shape[0]*this.shape[1]}}),s.pick=function(l,p,g){var u=this.pickOffset;if(g<u||g>=u+this.shape[0]*this.shape[1])return null;var f=g-u;return{object:this,pointId:f,dataCoord:[this.xData[f%this.shape[0]],this.yData[f/this.shape[0]|0]]}},s.update=function(l){var p=(l=l||{}).shape||[0,0],g=l.x||n(p[0]),u=l.y||n(p[1]),x=l.z||new Float32Array(p[0]*p[1]),f=!1!==l.zsmooth;this.xData=g,this.yData=u;var T,_,k,w,C=l.colorLevels||[0],A=l.colorValues||[0,0,0,1],O=C.length,P=this.bounds;f?(T=P[0]=g[0],_=P[1]=u[0],k=P[2]=g[g.length-1],w=P[3]=u[u.length-1]):(T=P[0]=g[0]+(g[1]-g[0])/2,_=P[1]=u[0]+(u[1]-u[0])/2,k=P[2]=g[g.length-1]+(g[g.length-1]-g[g.length-2])/2,w=P[3]=u[u.length-1]+(u[u.length-1]-u[u.length-2])/2);var S=1/(k-T),E=1/(w-_),D=p[0],z=p[1];this.shape=[D,z];var N=(f?(D-1)*(z-1):D*z)*(c.length>>>1);this.numVertices=N;for(var V=r.mallocUint8(4*N),X=r.mallocFloat32(2*N),J=r.mallocUint8(2*N),G=r.mallocUint32(N),Z=0,re=f?D-1:D,j=f?z-1:z,B=0;B<j;++B){var H,ee;f?(H=E*(u[B]-_),ee=E*(u[B+1]-_)):(H=B<z-1?E*(u[B]-(u[B+1]-u[B])/2-_):E*(u[B]-(u[B]-u[B-1])/2-_),ee=B<z-1?E*(u[B]+(u[B+1]-u[B])/2-_):E*(u[B]+(u[B]-u[B-1])/2-_));for(var U=0;U<re;++U){var $,q;f?($=S*(g[U]-T),q=S*(g[U+1]-T)):($=U<D-1?S*(g[U]-(g[U+1]-g[U])/2-T):S*(g[U]-(g[U]-g[U-1])/2-T),q=U<D-1?S*(g[U]+(g[U+1]-g[U])/2-T):S*(g[U]+(g[U]-g[U-1])/2-T));for(var te=0;te<c.length;te+=2){var ne,se,ie,ue,le=c[te],de=c[te+1],be=x[f?(B+de)*D+(U+le):B*D+U],_e=e.le(C,be);if(_e<0)ne=A[0],se=A[1],ie=A[2],ue=A[3];else if(_e===O-1)ne=A[4*O-4],se=A[4*O-3],ie=A[4*O-2],ue=A[4*O-1];else{var xe=(be-C[_e])/(C[_e+1]-C[_e]),Ee=1-xe,he=4*_e,me=4*(_e+1);ne=Ee*A[he]+xe*A[me],se=Ee*A[he+1]+xe*A[me+1],ie=Ee*A[he+2]+xe*A[me+2],ue=Ee*A[he+3]+xe*A[me+3]}V[4*Z]=255*ne,V[4*Z+1]=255*se,V[4*Z+2]=255*ie,V[4*Z+3]=255*ue,X[2*Z]=.5*$+.5*q,X[2*Z+1]=.5*H+.5*ee,J[2*Z]=le,J[2*Z+1]=de,G[Z]=B*D+U,Z+=1}}}this.positionBuffer.update(X),this.weightBuffer.update(J),this.colorBuffer.update(V),this.idBuffer.update(G),r.free(X),r.free(V),r.free(J),r.free(G)},s.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(v,b,h){"use strict";var e=v("glslify");b.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(v,b,h){var e=v("glslify"),n=v("gl-shader"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),d=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];h.createShader=function(a){return n(a,r,o,null,d)},h.createPickShader=function(a){return n(a,r,t,null,d)}},{"gl-shader":132,glslify:231}],91:[function(v,b,h){"use strict";b.exports=function(T){var _=T.gl||T.scene&&T.scene.gl,k=s(_);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;var w=c(_);w.attributes.position.location=0,w.attributes.nextPosition.location=1,w.attributes.arcLength.location=2,w.attributes.lineWidth.location=3,w.attributes.color.location=4;for(var C=e(_),A=n(_,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),O=a(new Array(1024),[256,1,4]),P=0;P<1024;++P)O.data[P]=255;var S=r(_,O);S.wrap=_.REPEAT;var E=new x(_,k,w,C,A,S);return E.update(T),E};var e=v("gl-buffer"),n=v("gl-vao"),r=v("gl-texture2d"),o=new Uint8Array(4),t=new Float32Array(o.buffer),d=v("binary-search-bounds"),a=v("ndarray"),i=v("./lib/shaders"),s=i.createShader,c=i.createPickShader,l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(T,_){for(var k=0,w=0;w<3;++w){var C=T[w]-_[w];k+=C*C}return Math.sqrt(k)}function g(T){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)_[0][k]=Math.max(T[0][k],_[0][k]),_[1][k]=Math.min(T[1][k],_[1][k]);return _}function u(T,_,k,w){this.arcLength=T,this.position=_,this.index=k,this.dataCoordinate=w}function x(T,_,k,w,C,A){this.gl=T,this.shader=_,this.pickShader=k,this.buffer=w,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=A,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=x.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(T){this.pickId=T},f.drawTransparent=f.draw=function(T){if(this.vertexCount){var _=this.gl,k=this.shader,w=this.vao;k.bind(),k.uniforms={model:T.model||l,view:T.view||l,projection:T.projection||l,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},w.bind(),w.draw(_.TRIANGLE_STRIP,this.vertexCount),w.unbind()}},f.drawPick=function(T){if(this.vertexCount){var _=this.gl,k=this.pickShader,w=this.vao;k.bind(),k.uniforms={model:T.model||l,view:T.view||l,projection:T.projection||l,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},w.bind(),w.draw(_.TRIANGLE_STRIP,this.vertexCount),w.unbind()}},f.update=function(T){var _,k;this.dirty=!0;var w=!!T.connectGaps;"dashScale"in T&&(this.dashScale=T.dashScale),this.hasAlpha=!1,"opacity"in T&&(this.opacity=+T.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],A=[],O=[],P=0,S=0,E=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=T.position||T.positions;if(D){var z=T.color||T.colors||[0,0,0,1],N=T.lineWidth||1,V=!1;e:for(_=1;_<D.length;++_){var X,J,G,Z=D[_-1],re=D[_];for(A.push(P),O.push(Z.slice()),k=0;k<3;++k){if(isNaN(Z[k])||isNaN(re[k])||!isFinite(Z[k])||!isFinite(re[k])){if(!w&&C.length>0){for(var j=0;j<24;++j)C.push(C[C.length-12]);S+=2,V=!0}continue e}E[0][k]=Math.min(E[0][k],Z[k],re[k]),E[1][k]=Math.max(E[1][k],Z[k],re[k])}Array.isArray(z[0])?(X=z.length>_-1?z[_-1]:z.length>0?z[z.length-1]:[0,0,0,1],J=z.length>_?z[_]:z.length>0?z[z.length-1]:[0,0,0,1]):X=J=z,3===X.length&&(X=[X[0],X[1],X[2],1]),3===J.length&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0),G=Array.isArray(N)?N.length>_-1?N[_-1]:N.length>0?N[N.length-1]:[0,0,0,1]:N;var B=P;if(P+=p(Z,re),V){for(k=0;k<2;++k)C.push(Z[0],Z[1],Z[2],re[0],re[1],re[2],B,G,X[0],X[1],X[2],X[3]);S+=2,V=!1}C.push(Z[0],Z[1],Z[2],re[0],re[1],re[2],B,G,X[0],X[1],X[2],X[3],Z[0],Z[1],Z[2],re[0],re[1],re[2],B,-G,X[0],X[1],X[2],X[3],re[0],re[1],re[2],Z[0],Z[1],Z[2],P,-G,J[0],J[1],J[2],J[3],re[0],re[1],re[2],Z[0],Z[1],Z[2],P,G,J[0],J[1],J[2],J[3]),S+=4}}if(this.buffer.update(C),A.push(P),O.push(D[D.length-1].slice()),this.bounds=E,this.vertexCount=S,this.points=O,this.arcLength=A,"dashes"in T){var H=T.dashes.slice();for(H.unshift(0),_=1;_<H.length;++_)H[_]=H[_-1]+H[_];var ee=a(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(k=0;k<4;++k)ee.set(_,0,k,0);1&d.le(H,H[H.length-1]*_/255)?ee.set(_,0,0,0):ee.set(_,0,0,255)}this.texture.setPixels(ee)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(T){if(!T||T.id!==this.pickId)return null;var D,z,N,_=(D=T.value[0],z=T.value[1],N=T.value[2],o[0]=0,o[1]=N,o[2]=z,o[3]=D,t[0]),k=d.le(this.arcLength,_);if(k<0)return null;if(k===this.arcLength.length-1)return new u(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),k);for(var w=this.points[k],C=this.points[Math.min(k+1,this.points.length-1)],A=(_-this.arcLength[k])/(this.arcLength[k+1]-this.arcLength[k]),O=1-A,P=[0,0,0],S=0;S<3;++S)P[S]=O*w[S]+A*C[S];var E=Math.min(A<.5?k:k+1,this.points.length-1);return new u(_,P,E,this.points[E])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(v,b,h){b.exports=function(e){var n=new Float32Array(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}},{}],93:[function(v,b,h){b.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(v,b,h){b.exports=function(e){var n=e[0],r=e[1],o=e[2],t=e[3],d=e[4],a=e[5],i=e[6],s=e[7],c=e[8],l=e[9],p=e[10],g=e[11],u=e[12],x=e[13],f=e[14],T=e[15];return(n*a-r*d)*(p*T-g*f)-(n*i-o*d)*(l*T-g*x)+(n*s-t*d)*(l*f-p*x)+(r*i-o*a)*(c*T-g*u)-(r*s-t*a)*(c*f-p*u)+(o*s-t*i)*(c*x-l*u)}},{}],95:[function(v,b,h){b.exports=function(e,n){var r=n[0],o=n[1],t=n[2],d=n[3],a=r+r,i=o+o,s=t+t,c=r*a,l=o*a,p=o*i,g=t*a,u=t*i,x=t*s,f=d*a,T=d*i,_=d*s;return e[0]=1-p-x,e[1]=l+_,e[2]=g-T,e[3]=0,e[4]=l-_,e[5]=1-c-x,e[6]=u+f,e[7]=0,e[8]=g+T,e[9]=u-f,e[10]=1-c-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(v,b,h){b.exports=function(e,n,r){var o=n[0],t=n[1],d=n[2],a=n[3],i=o+o,s=t+t,c=d+d,l=o*i,p=o*s,g=o*c,u=t*s,x=t*c,f=d*c,T=a*i,_=a*s,k=a*c;return e[0]=1-(u+f),e[1]=p+k,e[2]=g-_,e[3]=0,e[4]=p-k,e[5]=1-(l+f),e[6]=x+T,e[7]=0,e[8]=g+_,e[9]=x-T,e[10]=1-(l+u),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}},{}],97:[function(v,b,h){b.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(v,b,h){b.exports=function(e,n){var r=n[0],o=n[1],t=n[2],d=n[3],a=n[4],i=n[5],s=n[6],c=n[7],l=n[8],p=n[9],g=n[10],u=n[11],x=n[12],f=n[13],T=n[14],_=n[15],k=r*i-o*a,w=r*s-t*a,C=r*c-d*a,A=o*s-t*i,O=o*c-d*i,P=t*c-d*s,S=l*f-p*x,E=l*T-g*x,D=l*_-u*x,z=p*T-g*f,N=p*_-u*f,V=g*_-u*T,X=k*V-w*N+C*z+A*D-O*E+P*S;return X?(e[0]=(i*V-s*N+c*z)*(X=1/X),e[1]=(t*N-o*V-d*z)*X,e[2]=(f*P-T*O+_*A)*X,e[3]=(g*O-p*P-u*A)*X,e[4]=(s*D-a*V-c*E)*X,e[5]=(r*V-t*D+d*E)*X,e[6]=(T*C-x*P-_*w)*X,e[7]=(l*P-g*C+u*w)*X,e[8]=(a*N-i*D+c*S)*X,e[9]=(o*D-r*N-d*S)*X,e[10]=(x*O-f*C+_*k)*X,e[11]=(p*C-l*O-u*k)*X,e[12]=(i*E-a*z-s*S)*X,e[13]=(r*z-o*E+t*S)*X,e[14]=(f*w-x*A-T*k)*X,e[15]=(l*A-p*w+g*k)*X,e):null}},{}],99:[function(v,b,h){var e=v("./identity");b.exports=function(n,r,o,t){var d,a,i,s,c,l,p,g,u,x,f=r[0],T=r[1],_=r[2],k=t[0],w=t[1],C=t[2],A=o[0],O=o[1],P=o[2];return Math.abs(f-A)<1e-6&&Math.abs(T-O)<1e-6&&Math.abs(_-P)<1e-6?e(n):(p=f-A,g=T-O,u=_-P,d=w*(u*=x=1/Math.sqrt(p*p+g*g+u*u))-C*(g*=x),a=C*(p*=x)-k*u,i=k*g-w*p,(x=Math.sqrt(d*d+a*a+i*i))?(d*=x=1/x,a*=x,i*=x):(d=0,a=0,i=0),s=g*i-u*a,c=u*d-p*i,l=p*a-g*d,(x=Math.sqrt(s*s+c*c+l*l))?(s*=x=1/x,c*=x,l*=x):(s=0,c=0,l=0),n[0]=d,n[1]=s,n[2]=p,n[3]=0,n[4]=a,n[5]=c,n[6]=g,n[7]=0,n[8]=i,n[9]=l,n[10]=u,n[11]=0,n[12]=-(d*f+a*T+i*_),n[13]=-(s*f+c*T+l*_),n[14]=-(p*f+g*T+u*_),n[15]=1,n)}},{"./identity":97}],100:[function(v,b,h){b.exports=function(e,n,r){var o=n[0],t=n[1],d=n[2],a=n[3],i=n[4],s=n[5],c=n[6],l=n[7],p=n[8],g=n[9],u=n[10],x=n[11],f=n[12],T=n[13],_=n[14],k=n[15],w=r[0],C=r[1],A=r[2],O=r[3];return e[0]=w*o+C*i+A*p+O*f,e[1]=w*t+C*s+A*g+O*T,e[2]=w*d+C*c+A*u+O*_,e[3]=w*a+C*l+A*x+O*k,e[4]=(w=r[4])*o+(C=r[5])*i+(A=r[6])*p+(O=r[7])*f,e[5]=w*t+C*s+A*g+O*T,e[6]=w*d+C*c+A*u+O*_,e[7]=w*a+C*l+A*x+O*k,e[8]=(w=r[8])*o+(C=r[9])*i+(A=r[10])*p+(O=r[11])*f,e[9]=w*t+C*s+A*g+O*T,e[10]=w*d+C*c+A*u+O*_,e[11]=w*a+C*l+A*x+O*k,e[12]=(w=r[12])*o+(C=r[13])*i+(A=r[14])*p+(O=r[15])*f,e[13]=w*t+C*s+A*g+O*T,e[14]=w*d+C*c+A*u+O*_,e[15]=w*a+C*l+A*x+O*k,e}},{}],101:[function(v,b,h){b.exports=function(e,n,r,o,t,d,a){var i=1/(n-r),s=1/(o-t),c=1/(d-a);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(n+r)*i,e[13]=(t+o)*s,e[14]=(a+d)*c,e[15]=1,e}},{}],102:[function(v,b,h){b.exports=function(e,n,r,o,t){var d=1/Math.tan(n/2),a=1/(o-t);return e[0]=d/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(t+o)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*t*o*a,e[15]=0,e}},{}],103:[function(v,b,h){b.exports=function(e,n,r,o){var t,d,a,i,s,c,l,p,g,u,x,f,T,_,k,w,C,A,O,P,S,E,D,z,N=o[0],V=o[1],X=o[2],J=Math.sqrt(N*N+V*V+X*X);return Math.abs(J)<1e-6?null:(N*=J=1/J,V*=J,X*=J,t=Math.sin(r),d=Math.cos(r),s=n[1],c=n[2],l=n[3],g=n[5],u=n[6],x=n[7],T=n[9],_=n[10],k=n[11],O=N*V*(a=1-d)-X*t,P=V*V*a+d,S=X*V*a+N*t,E=N*X*a+V*t,D=V*X*a-N*t,z=X*X*a+d,e[0]=(i=n[0])*(w=N*N*a+d)+(p=n[4])*(C=V*N*a+X*t)+(f=n[8])*(A=X*N*a-V*t),e[1]=s*w+g*C+T*A,e[2]=c*w+u*C+_*A,e[3]=l*w+x*C+k*A,e[4]=i*O+p*P+f*S,e[5]=s*O+g*P+T*S,e[6]=c*O+u*P+_*S,e[7]=l*O+x*P+k*S,e[8]=i*E+p*D+f*z,e[9]=s*E+g*D+T*z,e[10]=c*E+u*D+_*z,e[11]=l*E+x*D+k*z,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)}},{}],104:[function(v,b,h){b.exports=function(e,n,r){var o=Math.sin(r),t=Math.cos(r),d=n[4],a=n[5],i=n[6],s=n[7],c=n[8],l=n[9],p=n[10],g=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=d*t+c*o,e[5]=a*t+l*o,e[6]=i*t+p*o,e[7]=s*t+g*o,e[8]=c*t-d*o,e[9]=l*t-a*o,e[10]=p*t-i*o,e[11]=g*t-s*o,e}},{}],105:[function(v,b,h){b.exports=function(e,n,r){var o=Math.sin(r),t=Math.cos(r),d=n[0],a=n[1],i=n[2],s=n[3],c=n[8],l=n[9],p=n[10],g=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=d*t-c*o,e[1]=a*t-l*o,e[2]=i*t-p*o,e[3]=s*t-g*o,e[8]=d*o+c*t,e[9]=a*o+l*t,e[10]=i*o+p*t,e[11]=s*o+g*t,e}},{}],106:[function(v,b,h){b.exports=function(e,n,r){var o=Math.sin(r),t=Math.cos(r),d=n[0],a=n[1],i=n[2],s=n[3],c=n[4],l=n[5],p=n[6],g=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=d*t+c*o,e[1]=a*t+l*o,e[2]=i*t+p*o,e[3]=s*t+g*o,e[4]=c*t-d*o,e[5]=l*t-a*o,e[6]=p*t-i*o,e[7]=g*t-s*o,e}},{}],107:[function(v,b,h){b.exports=function(e,n,r){var o=r[0],t=r[1],d=r[2];return e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e[3]=n[3]*o,e[4]=n[4]*t,e[5]=n[5]*t,e[6]=n[6]*t,e[7]=n[7]*t,e[8]=n[8]*d,e[9]=n[9]*d,e[10]=n[10]*d,e[11]=n[11]*d,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}},{}],108:[function(v,b,h){b.exports=function(e,n,r){var o,t,d,a,i,s,c,l,p,g,u,x,f=r[0],T=r[1],_=r[2];return n===e?(e[12]=n[0]*f+n[4]*T+n[8]*_+n[12],e[13]=n[1]*f+n[5]*T+n[9]*_+n[13],e[14]=n[2]*f+n[6]*T+n[10]*_+n[14],e[15]=n[3]*f+n[7]*T+n[11]*_+n[15]):(t=n[1],d=n[2],a=n[3],i=n[4],s=n[5],c=n[6],l=n[7],p=n[8],g=n[9],u=n[10],x=n[11],e[0]=o=n[0],e[1]=t,e[2]=d,e[3]=a,e[4]=i,e[5]=s,e[6]=c,e[7]=l,e[8]=p,e[9]=g,e[10]=u,e[11]=x,e[12]=o*f+i*T+p*_+n[12],e[13]=t*f+s*T+g*_+n[13],e[14]=d*f+c*T+u*_+n[14],e[15]=a*f+l*T+x*_+n[15]),e}},{}],109:[function(v,b,h){b.exports=function(e,n){if(e===n){var r=n[1],o=n[2],t=n[3],d=n[6],a=n[7],i=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=r,e[6]=n[9],e[7]=n[13],e[8]=o,e[9]=d,e[11]=n[14],e[12]=t,e[13]=a,e[14]=i}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e}},{}],110:[function(v,b,h){"use strict";var e=v("barycentric"),n=v("polytope-closest-point/lib/closest_point_2d.js");function r(d,a){for(var i=[0,0,0,0],s=0;s<4;++s)for(var c=0;c<4;++c)i[c]+=d[4*s+c]*a[s];return i}function o(d,a,i,s,c){for(var l=r(s,r(i,r(a,[d[0],d[1],d[2],1]))),p=0;p<3;++p)l[p]/=l[3];return[.5*c[0]*(1+l[0]),.5*c[1]*(1-l[1])]}function t(d,a){for(var i=[0,0,0],s=0;s<d.length;++s)for(var c=d[s],l=a[s],p=0;p<3;++p)i[p]+=l*c[p];return i}b.exports=function(d,a,i,s,c,l){if(1===d.length)return[0,d[0].slice()];for(var p=new Array(d.length),g=0;g<d.length;++g)p[g]=o(d[g],i,s,c,l);var u=0,x=1/0;for(g=0;g<p.length;++g){for(var f=0,T=0;T<2;++T)f+=Math.pow(p[g][T]-a[T],2);f<x&&(x=f,u=g)}var _=function(w,C){if(2===w.length){for(var A=0,O=0,P=0;P<2;++P)A+=Math.pow(C[P]-w[0][P],2),O+=Math.pow(C[P]-w[1][P],2);return(A=Math.sqrt(A))+(O=Math.sqrt(O))<1e-6?[1,0]:[O/(A+O),A/(O+A)]}if(3===w.length){var S=[0,0];return n(w[0],w[1],w[2],C,S),e(w,S)}return[]}(p,a),k=0;for(g=0;g<3;++g){if(_[g]<-.001||_[g]>1.0001)return null;k+=_[g]}return Math.abs(k-1)>.001?null:[u,t(d,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(v,b,h){var e=v("glslify"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),r=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),c=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);h.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},h.wireShader={vertex:o,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},h.pointShader={vertex:d,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},h.pickShader={vertex:i,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},h.pointPickShader={vertex:c,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},h.contourShader={vertex:l,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(v,b,h){"use strict";var e=v("gl-shader"),n=v("gl-buffer"),r=v("gl-vao"),o=v("gl-texture2d"),t=v("normals"),d=v("gl-mat4/multiply"),a=v("gl-mat4/invert"),i=v("ndarray"),s=v("colormap"),c=v("simplicial-complex-contour"),l=v("typedarray-pool"),p=v("./lib/shaders"),g=v("./lib/closest-point"),u=p.meshShader,x=p.wireShader,f=p.pointShader,T=p.pickShader,_=p.pointPickShader,k=p.contourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(V,X,J,G,Z,re,j,B,H,ee,U,$,q,te,ne,se,ie,ue,le,de,be,_e,xe,Ee,he,me,Se){this.gl=V,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=J,this.lineShader=G,this.pointShader=Z,this.pickShader=re,this.pointPickShader=j,this.contourShader=B,this.trianglePositions=H,this.triangleColors=U,this.triangleNormals=q,this.triangleUVs=$,this.triangleIds=ee,this.triangleVAO=te,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ne,this.edgeColors=ie,this.edgeUVs=ue,this.edgeIds=se,this.edgeVAO=le,this.edgeCount=0,this.pointPositions=de,this.pointColors=_e,this.pointUVs=xe,this.pointSizes=Ee,this.pointIds=be,this.pointVAO=he,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=me,this.contourVAO=Se,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var A=C.prototype;function O(V,X){if(!X||!X.length)return 1;for(var J=0;J<X.length;++J){if(X.length<2)return 1;if(X[J][0]===V)return X[J][1];if(X[J][0]>V&&J>0){var G=(X[J][0]-V)/(X[J][0]-X[J-1][0]);return X[J][1]*(1-G)+G*X[J-1][1]}}return 1}function P(V){var X=e(V,u.vertex,u.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function S(V){var X=e(V,x.vertex,x.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function E(V){var X=e(V,f.vertex,f.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function D(V){var X=e(V,T.vertex,T.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function z(V){var X=e(V,_.vertex,_.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function N(V){var X=e(V,k.vertex,k.fragment);return X.attributes.position.location=0,X}A.isOpaque=function(){return!this.hasAlpha},A.isTransparent=function(){return this.hasAlpha},A.pickSlots=1,A.setPickBase=function(V){this.pickId=V},A.highlight=function(V){if(V&&this.contourEnable){for(var X=c(this.cells,this.intensity,V.intensity),J=X.cells,G=X.vertexIds,Z=X.vertexWeights,re=J.length,j=l.mallocFloat32(6*re),B=0,H=0;H<re;++H)for(var ee=J[H],U=0;U<2;++U){var $=ee[0];2===ee.length&&($=ee[U]);for(var ne=Z[$],se=1-ne,ie=this.positions[G[$][0]],ue=this.positions[G[$][1]],le=0;le<3;++le)j[B++]=ne*ie[le]+se*ue[le]}this.contourCount=B/3|0,this.contourPositions.update(j.subarray(0,B)),l.free(j)}else this.contourCount=0},A.update=function(V){V=V||{};var X=this.gl;this.dirty=!0,"contourEnable"in V&&(this.contourEnable=V.contourEnable),"contourColor"in V&&(this.contourColor=V.contourColor),"lineWidth"in V&&(this.lineWidth=V.lineWidth),"lightPosition"in V&&(this.lightPosition=V.lightPosition),this.hasAlpha=!1,"opacity"in V&&(this.opacity=V.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in V&&(this.opacityscale=V.opacityscale,this.hasAlpha=!0),"ambient"in V&&(this.ambientLight=V.ambient),"diffuse"in V&&(this.diffuseLight=V.diffuse),"specular"in V&&(this.specularLight=V.specular),"roughness"in V&&(this.roughness=V.roughness),"fresnel"in V&&(this.fresnel=V.fresnel),V.texture?(this.texture.dispose(),this.texture=o(X,V.texture)):V.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(function(Kt,cr){for(var ar=s({colormap:Kt,nshades:256,format:"rgba"}),hr=new Uint8Array(1024),Xt=0;Xt<256;++Xt){for(var He=ar[Xt],Je=0;Je<3;++Je)hr[4*Xt+Je]=He[Je];hr[4*Xt+3]=cr?255*O(Xt/255,cr):255*He[3]}return i(hr,[256,256,4],[4,0,1])}(V.colormap,this.opacityscale)),this.texture.generateMipmap());var J=V.cells,G=V.positions;if(G&&J){var Z=[],re=[],j=[],B=[],H=[],ee=[],U=[],$=[],q=[],te=[],ne=[],se=[],ie=[],ue=[];this.cells=J,this.positions=G;var le=V.vertexNormals,de=V.cellNormals,be=void 0===V.vertexNormalsEpsilon?1e-6:V.vertexNormalsEpsilon;V.useFacetNormals&&!de&&(de=t.faceNormals(J,G,void 0===V.faceNormalsEpsilon?1e-6:V.faceNormalsEpsilon)),de||le||(le=t.vertexNormals(J,G,be));var xe=V.vertexColors,Ee=V.cellColors,he=V.meshColor||[1,1,1,1],me=V.vertexUVs,Se=V.vertexIntensity,Me=V.cellUVs,Ie=V.cellIntensity,Fe=1/0,Ne=-1/0;if(!me&&!Me)if(Se)if(V.vertexIntensityBounds)Fe=+V.vertexIntensityBounds[0],Ne=+V.vertexIntensityBounds[1];else for(var De=0;De<Se.length;++De){var $e=Se[De];Fe=Math.min(Fe,$e),Ne=Math.max(Ne,$e)}else if(Ie)if(V.cellIntensityBounds)Fe=+V.cellIntensityBounds[0],Ne=+V.cellIntensityBounds[1];else for(De=0;De<Ie.length;++De)$e=Ie[De],Fe=Math.min(Fe,$e),Ne=Math.max(Ne,$e);else for(De=0;De<G.length;++De)$e=G[De][2],Fe=Math.min(Fe,$e),Ne=Math.max(Ne,$e);this.intensity=Se||Ie||function(Kt){for(var cr=Kt.length,ar=new Array(cr),hr=0;hr<cr;++hr)ar[hr]=Kt[hr][2];return ar}(G),this.pickVertex=!(Ie||Ee);var Re=V.pointSizes,ze=V.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],De=0;De<G.length;++De)for(var Ue=G[De],je=0;je<3;++je)!isNaN(Ue[je])&&isFinite(Ue[je])&&(this.bounds[0][je]=Math.min(this.bounds[0][je],Ue[je]),this.bounds[1][je]=Math.max(this.bounds[1][je],Ue[je]));var rt=0,ut=0,gt=0;e:for(De=0;De<J.length;++De){var At=J[De];switch(At.length){case 1:for(Ue=G[it=At[0]],je=0;je<3;++je)if(isNaN(Ue[je])||!isFinite(Ue[je]))continue e;te.push(Ue[0],Ue[1],Ue[2]),et=xe?xe[it]:Ee?Ee[De]:he,this.opacityscale&&Se?re.push(et[0],et[1],et[2],this.opacity*O((Se[it]-Fe)/(Ne-Fe),this.opacityscale)):3===et.length?ne.push(et[0],et[1],et[2],this.opacity):(ne.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),se.push((wt=me?me[it]:Se?[(Se[it]-Fe)/(Ne-Fe),0]:Me?Me[De]:Ie?[(Ie[De]-Fe)/(Ne-Fe),0]:[(Ue[2]-Fe)/(Ne-Fe),0])[0],wt[1]),ie.push(Re?Re[it]:ze),ue.push(De),gt+=1;break;case 2:for(je=0;je<2;++je){Ue=G[it=At[je]];for(var _t=0;_t<3;++_t)if(isNaN(Ue[_t])||!isFinite(Ue[_t]))continue e}for(je=0;je<2;++je)Ue=G[it=At[je]],ee.push(Ue[0],Ue[1],Ue[2]),et=xe?xe[it]:Ee?Ee[De]:he,this.opacityscale&&Se?re.push(et[0],et[1],et[2],this.opacity*O((Se[it]-Fe)/(Ne-Fe),this.opacityscale)):3===et.length?U.push(et[0],et[1],et[2],this.opacity):(U.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),$.push((wt=me?me[it]:Se?[(Se[it]-Fe)/(Ne-Fe),0]:Me?Me[De]:Ie?[(Ie[De]-Fe)/(Ne-Fe),0]:[(Ue[2]-Fe)/(Ne-Fe),0])[0],wt[1]),q.push(De);ut+=1;break;case 3:for(je=0;je<3;++je)for(Ue=G[it=At[je]],_t=0;_t<3;++_t)if(isNaN(Ue[_t])||!isFinite(Ue[_t]))continue e;for(je=0;je<3;++je){var it,et,wt,Gt;Ue=G[it=At[2-je]],Z.push(Ue[0],Ue[1],Ue[2]),(et=xe?xe[it]:Ee?Ee[De]:he)?this.opacityscale&&Se?re.push(et[0],et[1],et[2],this.opacity*O((Se[it]-Fe)/(Ne-Fe),this.opacityscale)):3===et.length?re.push(et[0],et[1],et[2],this.opacity):(re.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)):re.push(.5,.5,.5,1),B.push((wt=me?me[it]:Se?[(Se[it]-Fe)/(Ne-Fe),0]:Me?Me[De]:Ie?[(Ie[De]-Fe)/(Ne-Fe),0]:[(Ue[2]-Fe)/(Ne-Fe),0])[0],wt[1]),j.push((Gt=le?le[it]:de[De])[0],Gt[1],Gt[2]),H.push(De)}rt+=1}}this.pointCount=gt,this.edgeCount=ut,this.triangleCount=rt,this.pointPositions.update(te),this.pointColors.update(ne),this.pointUVs.update(se),this.pointSizes.update(ie),this.pointIds.update(new Uint32Array(ue)),this.edgePositions.update(ee),this.edgeColors.update(U),this.edgeUVs.update($),this.edgeIds.update(new Uint32Array(q)),this.trianglePositions.update(Z),this.triangleColors.update(re),this.triangleUVs.update(B),this.triangleNormals.update(j),this.triangleIds.update(new Uint32Array(H))}},A.drawTransparent=A.draw=function(V){for(var X=this.gl,J=(V=V||{}).model||w,G=V.view||w,Z=V.projection||w,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)re[0][j]=Math.max(re[0][j],this.clipBounds[0][j]),re[1][j]=Math.min(re[1][j],this.clipBounds[1][j]);var B={model:J,view:G,projection:Z,inverseModel:w.slice(),clipBounds:re,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};B.inverseModel=a(B.inverseModel,B.model),X.disable(X.CULL_FACE),this.texture.bind(0);var H=new Array(16);for(d(H,B.view,B.model),d(H,B.projection,H),a(H,H),j=0;j<3;++j)B.eyePosition[j]=H[12+j]/H[15];var ee,U=H[15];for(j=0;j<3;++j)U+=this.lightPosition[j]*H[4*j+3];for(j=0;j<3;++j){for(var $=H[12+j],q=0;q<3;++q)$+=H[4*q+j]*this.lightPosition[q];B.lightPosition[j]=$/U}this.triangleCount>0&&((ee=this.triShader).bind(),ee.uniforms=B,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ee=this.lineShader).bind(),ee.uniforms=B,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ee=this.pointShader).bind(),ee.uniforms=B,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ee=this.contourShader).bind(),ee.uniforms=B,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind())},A.drawPick=function(V){for(var X=this.gl,J=(V=V||{}).model||w,G=V.view||w,Z=V.projection||w,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)re[0][j]=Math.max(re[0][j],this.clipBounds[0][j]),re[1][j]=Math.min(re[1][j],this.clipBounds[1][j]);this._model=[].slice.call(J),this._view=[].slice.call(G),this._projection=[].slice.call(Z),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var B,H={model:J,view:G,projection:Z,clipBounds:re,pickId:this.pickId/255};(B=this.pickShader).bind(),B.uniforms=H,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((B=this.pointPickShader).bind(),B.uniforms=H,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind())},A.pick=function(V){if(!V||V.id!==this.pickId)return null;for(var X=V.value[0]+256*V.value[1]+65536*V.value[2],J=this.cells[X],G=this.positions,Z=new Array(J.length),re=0;re<J.length;++re)Z[re]=G[J[re]];var j=V.coord[0],B=V.coord[1];if(!this.pickVertex){var H=this.positions[J[0]],ee=this.positions[J[1]],U=this.positions[J[2]];return{_cellCenter:!0,position:[j,B],index:X,cell:J,cellId:X,intensity:this.intensity[X],dataCoordinate:[(H[0]+ee[0]+U[0])/3,(H[1]+ee[1]+U[1])/3,(H[2]+ee[2]+U[2])/3]}}var q=g(Z,[j*this.pixelRatio,this._resolution[1]-B*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!q)return null;var te=q[2],ne=0;for(re=0;re<J.length;++re)ne+=te[re]*this.intensity[J[re]];return{position:q[1],index:J[q[0]],cell:J,cellId:X,intensity:ne,dataCoordinate:this.positions[J[q[0]]]}},A.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},b.exports=function(V,X){if(1===arguments.length&&(V=(X=V).gl),!(V.getExtension("OES_standard_derivatives")||V.getExtension("MOZ_OES_standard_derivatives")||V.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var G=P(V),Z=S(V),re=E(V),j=D(V),B=z(V),H=N(V),ee=o(V,i(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=V.LINEAR_MIPMAP_LINEAR,ee.magFilter=V.LINEAR;var U=n(V),$=n(V),q=n(V),te=n(V),ne=n(V),se=r(V,[{buffer:U,type:V.FLOAT,size:3},{buffer:ne,type:V.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:$,type:V.FLOAT,size:4},{buffer:q,type:V.FLOAT,size:2},{buffer:te,type:V.FLOAT,size:3}]),ie=n(V),ue=n(V),le=n(V),de=n(V),be=r(V,[{buffer:ie,type:V.FLOAT,size:3},{buffer:de,type:V.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ue,type:V.FLOAT,size:4},{buffer:le,type:V.FLOAT,size:2}]),_e=n(V),xe=n(V),Ee=n(V),he=n(V),me=n(V),Se=r(V,[{buffer:_e,type:V.FLOAT,size:3},{buffer:me,type:V.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:xe,type:V.FLOAT,size:4},{buffer:Ee,type:V.FLOAT,size:2},{buffer:he,type:V.FLOAT,size:1}]),Me=n(V),Fe=new C(V,ee,G,Z,re,j,B,H,U,ne,$,q,te,se,ie,de,ue,le,be,_e,me,xe,Ee,he,Se,Me,r(V,[{buffer:Me,type:V.FLOAT,size:3}]));return Fe.update(X),Fe}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(v,b,h){"use strict";b.exports=function(i){var s=i.gl;return new o(i,e(s,[0,0,0,1,1,0,1,1]),n(s,r.boxVert,r.lineFrag))};var e=v("gl-buffer"),n=v("gl-shader"),r=v("./shaders");function o(i,s,c){this.plot=i,this.vbo=s,this.shader=c}var t,d,a=o.prototype;a.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},a.drawBox=(t=[0,0],d=[0,0],function(i,s,c,l,p){var u=this.shader,x=this.plot.gl;t[0]=i,t[1]=s,d[0]=c,d[1]=l,u.uniforms.lo=t,u.uniforms.hi=d,u.uniforms.color=p,x.drawArrays(x.TRIANGLE_STRIP,0,4)}),a.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(v,b,h){"use strict";b.exports=function(g){var u=g.gl;return new t(g,e(u),n(u,o.gridVert,o.gridFrag),n(u,o.tickVert,o.gridFrag))};var e=v("gl-buffer"),n=v("gl-shader"),r=v("binary-search-bounds"),o=v("./shaders");function t(g,u,x,f){this.plot=g,this.vbo=u,this.shader=x,this.tickShader=f,this.ticks=[[],[]]}function d(g,u){return g-u}var a,i,s,c,l,g,u,x,f,T,_,p=t.prototype;p.draw=(a=[0,0],i=[0,0],s=[0,0],function(){for(var g=this.plot,u=this.vbo,x=this.shader,f=this.ticks,T=g.gl,_=g._tickBounds,k=g.dataBox,w=g.viewBox,C=g.gridLineWidth,A=g.gridLineColor,O=g.gridLineEnable,P=g.pixelRatio,S=0;S<2;++S){var E=_[S],z=.5*(k[S+2]+k[S]),N=k[S+2]-k[S];i[S]=2*(_[S+2]-E)/N,a[S]=2*(E-z)/N}x.bind(),u.bind(),x.attributes.dataCoord.pointer(),x.uniforms.dataShift=a,x.uniforms.dataScale=i;var V=0;for(S=0;S<2;++S){s[0]=s[1]=0,s[S]=1,x.uniforms.dataAxis=s,x.uniforms.lineWidth=C[S]/(w[S+2]-w[S])*P,x.uniforms.color=A[S];var X=6*f[S].length;O[S]&&X&&T.drawArrays(T.TRIANGLES,V,X),V+=X}}),p.drawTickMarks=(g=[0,0],u=[0,0],x=[1,0],f=[0,1],T=[0,0],_=[0,0],function(){for(var k=this.plot,w=this.vbo,C=this.tickShader,A=this.ticks,O=k.gl,P=k._tickBounds,S=k.dataBox,E=k.viewBox,D=k.pixelRatio,z=k.screenBox,N=z[2]-z[0],V=z[3]-z[1],X=E[2]-E[0],J=E[3]-E[1],G=0;G<2;++G){var Z=P[G],j=.5*(S[G+2]+S[G]),B=S[G+2]-S[G];u[G]=2*(P[G+2]-Z)/B,g[G]=2*(Z-j)/B}u[0]*=X/N,g[0]*=X/N,u[1]*=J/V,g[1]*=J/V,C.bind(),w.bind(),C.attributes.dataCoord.pointer();var H=C.uniforms;H.dataShift=g,H.dataScale=u;var ee=k.tickMarkLength,U=k.tickMarkWidth,$=k.tickMarkColor,q=6*A[0].length,te=Math.min(r.ge(A[0],(S[0]-P[0])/(P[2]-P[0]),d),A[0].length),ne=Math.min(r.gt(A[0],(S[2]-P[0])/(P[2]-P[0]),d),A[0].length),se=0+6*te,ie=6*Math.max(0,ne-te),ue=Math.min(r.ge(A[1],(S[1]-P[1])/(P[3]-P[1]),d),A[1].length),le=Math.min(r.gt(A[1],(S[3]-P[1])/(P[3]-P[1]),d),A[1].length),de=q+6*ue,be=6*Math.max(0,le-ue);T[0]=2*(E[0]-ee[1])/N-1,T[1]=(E[3]+E[1])/V-1,_[0]=ee[1]*D/N,_[1]=U[1]*D/V,be&&(H.color=$[1],H.tickScale=_,H.dataAxis=f,H.screenOffset=T,O.drawArrays(O.TRIANGLES,de,be)),T[0]=(E[2]+E[0])/N-1,T[1]=2*(E[1]-ee[0])/V-1,_[0]=U[0]*D/N,_[1]=ee[0]*D/V,ie&&(H.color=$[0],H.tickScale=_,H.dataAxis=x,H.screenOffset=T,O.drawArrays(O.TRIANGLES,se,ie)),T[0]=2*(E[2]+ee[3])/N-1,T[1]=(E[3]+E[1])/V-1,_[0]=ee[3]*D/N,_[1]=U[3]*D/V,be&&(H.color=$[3],H.tickScale=_,H.dataAxis=f,H.screenOffset=T,O.drawArrays(O.TRIANGLES,de,be)),T[0]=(E[2]+E[0])/N-1,T[1]=2*(E[3]+ee[2])/V-1,_[0]=U[2]*D/N,_[1]=ee[2]*D/V,ie&&(H.color=$[2],H.tickScale=_,H.dataAxis=x,H.screenOffset=T,O.drawArrays(O.TRIANGLES,se,ie))}),p.update=(c=[1,1,-1,-1,1,-1],l=[1,-1,1,1,-1,-1],function(g){for(var u=g.ticks,x=g.bounds,f=new Float32Array(18*(u[0].length+u[1].length)),T=0,_=[[],[]],k=0;k<2;++k)for(var w=_[k],C=u[k],A=x[k],O=x[k+2],P=0;P<C.length;++P){var S=(C[P].x-A)/(O-A);w.push(S);for(var E=0;E<6;++E)f[T++]=S,f[T++]=c[E],f[T++]=l[E]}this.ticks=_,this.vbo.update(f)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(v,b,h){"use strict";b.exports=function(i){var s=i.gl;return new o(i,e(s,[-1,-1,-1,1,1,-1,1,1]),n(s,r.lineVert,r.lineFrag))};var e=v("gl-buffer"),n=v("gl-shader"),r=v("./shaders");function o(i,s,c){this.plot=i,this.vbo=s,this.shader=c}var t,d,a=o.prototype;a.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},a.drawLine=(t=[0,0],d=[0,0],function(i,s,c,l,p,g){var u=this.plot,x=this.shader,f=u.gl;t[0]=i,t[1]=s,d[0]=c,d[1]=l,x.uniforms.start=t,x.uniforms.end=d,x.uniforms.width=p*u.pixelRatio,x.uniforms.color=g,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),a.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(v,b,h){"use strict";var e=v("glslify"),n=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);b.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:n,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:n,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:n,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(v,b,h){"use strict";b.exports=function(u){var x=u.gl;return new d(u,e(x),n(x,t.textVert,t.textFrag))};var e=v("gl-buffer"),n=v("gl-shader"),r=v("text-cache"),o=v("binary-search-bounds"),t=v("./shaders");function d(u,x,f){this.plot=u,this.vbo=x,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var a,i,s,c,l,p,u,x,g=d.prototype;g.drawTicks=(a=[0,0],i=[0,0],s=[0,0],function(u){var x=this.plot,f=this.shader,T=this.tickX[u],_=this.tickOffset[u],k=x.gl,w=x.viewBox,C=x.dataBox,A=x.screenBox,O=x.pixelRatio,P=x.tickEnable,S=x.tickPad,E=x.tickColor,D=x.tickAngle,z=x.labelEnable,N=x.labelPad,V=x.labelColor,X=x.labelAngle,J=this.labelOffset[u],G=this.labelCount[u],Z=o.lt(T,C[u]),re=o.le(T,C[u+2]);a[0]=a[1]=0,a[u]=1,i[u]=(w[2+u]+w[u])/(A[2+u]-A[u])-1;var j=2/A[2+(1^u)]-A[1^u];i[1^u]=j*w[1^u]-1,P[u]&&(i[1^u]-=j*O*S[u],Z<re&&_[re]>_[Z]&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=i,f.uniforms.color=E[u],f.uniforms.angle=D[u],k.drawArrays(k.TRIANGLES,_[Z],_[re]-_[Z]))),z[u]&&G&&(i[1^u]-=j*O*N[u],f.uniforms.dataAxis=s,f.uniforms.screenOffset=i,f.uniforms.color=V[u],f.uniforms.angle=X[u],k.drawArrays(k.TRIANGLES,J,G)),i[1^u]=j*w[2+(1^u)]-1,P[u+2]&&(i[1^u]+=j*O*S[u+2],Z<re&&_[re]>_[Z]&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=i,f.uniforms.color=E[u+2],f.uniforms.angle=D[u+2],k.drawArrays(k.TRIANGLES,_[Z],_[re]-_[Z]))),z[u+2]&&G&&(i[1^u]+=j*O*N[u+2],f.uniforms.dataAxis=s,f.uniforms.screenOffset=i,f.uniforms.color=V[u+2],f.uniforms.angle=X[u+2],k.drawArrays(k.TRIANGLES,J,G))}),g.drawTitle=(u=[0,0],x=[0,0],function(){var f=this.plot,T=this.shader,_=f.gl,k=f.screenBox,w=f.titleCenter,C=f.titleAngle,A=f.titleColor,O=f.pixelRatio;if(this.titleCount){for(var P=0;P<2;++P)x[P]=2*(w[P]*O-k[P])/(k[2+P]-k[P])-1;T.bind(),T.uniforms.dataAxis=u,T.uniforms.screenOffset=x,T.uniforms.angle=C,T.uniforms.color=A,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}),g.bind=(c=[0,0],l=[0,0],p=[0,0],function(){var u=this.plot,x=this.shader,f=u._tickBounds,T=u.dataBox,_=u.screenBox,k=u.viewBox;x.bind();for(var w=0;w<2;++w){var C=f[w],O=.5*(T[w+2]+T[w]),P=T[w+2]-T[w],E=k[w+2]-k[w],z=_[w+2]-_[w];l[w]=2*(f[w+2]-C)/P*E/z,c[w]=2*(C-O)/P*E/z}p[1]=2*u.pixelRatio/(_[3]-_[1]),p[0]=p[1]*(_[3]-_[1])/(_[2]-_[0]),x.uniforms.dataScale=l,x.uniforms.dataShift=c,x.uniforms.textScale=p,this.vbo.bind(),x.attributes.textCoordinate.pointer()}),g.update=function(u){var x,f,T,_,k,w=[],C=u.ticks,A=u.bounds;for(k=0;k<2;++k){var O=[Math.floor(w.length/3)],P=[-1/0],S=C[k];for(x=0;x<S.length;++x){var E=S[x],D=E.x,N=E.font||"sans-serif";_=E.fontSize||12;for(var V=1/(A[k+2]-A[k]),X=A[k],J=E.text.split("\n"),G=0;G<J.length;G++)for(T=r(N,J[G]).data,f=0;f<T.length;f+=2)w.push(T[f]*_,-T[f+1]*_-G*_*1.2,(D-X)*V);O.push(Math.floor(w.length/3)),P.push(D)}this.tickOffset[k]=O,this.tickX[k]=P}for(k=0;k<2;++k){for(this.labelOffset[k]=Math.floor(w.length/3),T=r(u.labelFont[k],u.labels[k],{textAlign:"center"}).data,_=u.labelSize[k],x=0;x<T.length;x+=2)w.push(T[x]*_,-T[x+1]*_,0);this.labelCount[k]=Math.floor(w.length/3)-this.labelOffset[k]}for(this.titleOffset=Math.floor(w.length/3),T=r(u.titleFont,u.title).data,_=u.titleSize,x=0;x<T.length;x+=2)w.push(T[x]*_,-T[x+1]*_,0);this.titleCount=Math.floor(w.length/3)-this.titleOffset,this.vbo.update(w)},g.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(v,b,h){"use strict";b.exports=function(c){var l=c.gl,g=new d(l,e(l,[l.drawingBufferWidth,l.drawingBufferHeight]));return g.grid=n(g),g.text=r(g),g.line=o(g),g.box=t(g),g.update(c),g};var e=v("gl-select-static"),n=v("./lib/grid"),r=v("./lib/text"),o=v("./lib/line"),t=v("./lib/box");function d(c,l){this.gl=c,this.pickBuffer=l,this.screenBox=[0,0,c.drawingBufferWidth,c.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var a=d.prototype;function i(c){for(var l=c.slice(),p=0;p<l.length;++p)l[p]=l[p].slice();return l}function s(c,l){return c.x-l.x}a.setDirty=function(){this.dirty=this.pickDirty=!0},a.setOverlayDirty=function(){this.dirty=!0},a.nextDepthValue=function(){return this._depthCounter++/65536},a.draw=function(){var c=this.gl,l=this.screenBox,p=this.viewBox,g=this.dataBox,u=this.pixelRatio,x=this.grid,f=this.line,T=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,c.bindFramebuffer(c.FRAMEBUFFER,null),c.enable(c.SCISSOR_TEST),c.disable(c.DEPTH_TEST),c.depthFunc(c.LESS),c.depthMask(!1),c.enable(c.BLEND),c.blendEquation(c.FUNC_ADD,c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),this.borderColor){c.scissor(l[0],l[1],l[2]-l[0],l[3]-l[1]);var k=this.borderColor;c.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)}c.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),c.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]);var w=this.backgroundColor;c.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),c.clear(c.COLOR_BUFFER_BIT),x.draw();var C=this.zeroLineEnable,A=this.zeroLineColor,O=this.zeroLineWidth;if(C[0]||C[1]){f.bind();for(var P=0;P<2;++P)if(C[P]&&g[P]<=0&&g[P+2]>=0){var S=l[P]-g[P]*(l[P+2]-l[P])/(g[P+2]-g[P]);0===P?f.drawLine(S,l[1],S,l[3],O[P],A[P]):f.drawLine(l[0],S,l[2],S,O[P],A[P])}}for(P=0;P<_.length;++P)_[P].draw();c.viewport(l[0],l[1],l[2]-l[0],l[3]-l[1]),c.scissor(l[0],l[1],l[2]-l[0],l[3]-l[1]),this.grid.drawTickMarks(),f.bind();var E=this.borderLineEnable,D=this.borderLineWidth,z=this.borderLineColor;for(E[1]&&f.drawLine(p[0],p[1]-.5*D[1]*u,p[0],p[3]+.5*D[3]*u,D[1],z[1]),E[0]&&f.drawLine(p[0]-.5*D[0]*u,p[1],p[2]+.5*D[2]*u,p[1],D[0],z[0]),E[3]&&f.drawLine(p[2],p[1]-.5*D[1]*u,p[2],p[3]+.5*D[3]*u,D[3],z[3]),E[2]&&f.drawLine(p[0]-.5*D[0]*u,p[3],p[2]+.5*D[2]*u,p[3],D[2],z[2]),T.bind(),P=0;P<2;++P)T.drawTicks(P);this.titleEnable&&T.drawTitle();var N=this.overlays;for(P=0;P<N.length;++P)N[P].draw();c.disable(c.SCISSOR_TEST),c.disable(c.BLEND),c.depthMask(!0)}},a.drawPick=function(){if(!this.static){var c=this.pickBuffer;this._pickTimeout=null,c.begin();for(var l=1,p=this.objects,g=0;g<p.length;++g)l=p[g].drawPick(l);c.end()}},a.pick=function(c,l){if(!this.static){var p=this.pixelRatio,g=this.pickPixelRatio,u=this.viewBox,x=0|Math.round((c-u[0]/p)*g),f=0|Math.round((l-u[1]/p)*g),T=this.pickBuffer.query(x,f,this.pickRadius);if(!T)return null;for(var _=T.id+(T.value[0]<<8)+(T.value[1]<<16)+(T.value[2]<<24),k=this.objects,w=0;w<k.length;++w){var C=k[w].pick(x,f,_);if(C)return C}return null}},a.setScreenBox=function(c){var l=this.screenBox,p=this.pixelRatio;l[0]=0|Math.round(c[0]*p),l[1]=0|Math.round(c[1]*p),l[2]=0|Math.round(c[2]*p),l[3]=0|Math.round(c[3]*p),this.setDirty()},a.setDataBox=function(c){var l=this.dataBox;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3])&&(l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],this.setDirty())},a.setViewBox=function(c){var l=this.pixelRatio,p=this.viewBox;p[0]=0|Math.round(c[0]*l),p[1]=0|Math.round(c[1]*l),p[2]=0|Math.round(c[2]*l),p[3]=0|Math.round(c[3]*l);var g=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((c[2]-c[0])*g),0|Math.round((c[3]-c[1])*g)],this.setDirty()},a.update=function(c){var l=this.gl;this.pixelRatio=(c=c||{}).pixelRatio||1;var p=this.pixelRatio;this.pickPixelRatio=Math.max(p,1),this.setScreenBox(c.screenBox||[0,0,l.drawingBufferWidth/p,l.drawingBufferHeight/p]),this.setViewBox(c.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/p,.125*(this.screenBox[3]-this.screenBox[1])/p,.875*(this.screenBox[2]-this.screenBox[0])/p,.875*(this.screenBox[3]-this.screenBox[1])/p]);var g=this.viewBox,u=(g[2]-g[0])/(g[3]-g[1]);this.setDataBox(c.dataBox||[-10,-10/u,10,10/u]),this.borderColor=!1!==c.borderColor&&(c.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(c.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(c.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(c.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(c.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(c.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(c.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(c.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(c.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(c.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(c.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(c.titleCenter||[.5*(g[0]+g[2])/p,(g[3]+120)/p]).slice(),this.titleEnable=!("titleEnable"in c)||!!c.titleEnable,this.titleAngle=c.titleAngle||0,this.titleColor=(c.titleColor||[0,0,0,1]).slice(),this.labelPad=(c.labelPad||[15,15,15,15]).slice(),this.labelAngle=(c.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(c.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(c.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(c.tickPad||[15,15,15,15]).slice(),this.tickAngle=(c.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(c.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(c.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(c.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(c.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(c.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var x=c.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var T=0;T<2;++T){var _=x[T].slice(0);0!==_.length&&(_.sort(s),f[T]=Math.min(f[T],_[0].x),f[T+2]=Math.max(f[T+2],_[_.length-1].x))}this.grid.update({bounds:f,ticks:x}),this.text.update({bounds:f,ticks:x,labels:c.labels||["x","y"],labelSize:c.labelSize||[12,12],labelFont:c.labelFont||["sans-serif","sans-serif"],title:c.title||"",titleSize:c.titleSize||18,titleFont:c.titleFont||"sans-serif"}),this.static=!!c.static,this.setDirty()},a.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var c=this.objects.length-1;c>=0;--c)this.objects[c].dispose();for(this.objects.length=0,c=this.overlays.length-1;c>=0;--c)this.overlays[c].dispose();this.overlays.length=0,this.gl=null},a.addObject=function(c){this.objects.indexOf(c)<0&&(this.objects.push(c),this.setDirty())},a.removeObject=function(c){for(var l=this.objects,p=0;p<l.length;++p)if(l[p]===c){l.splice(p,1),this.setDirty();break}},a.addOverlay=function(c){this.overlays.indexOf(c)<0&&(this.overlays.push(c),this.setOverlayDirty())},a.removeOverlay=function(c){for(var l=this.overlays,p=0;p<l.length;++p)if(l[p]===c){l.splice(p,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(v,b,h){"use strict";b.exports=function(a,i){a=a||document.body;var s=[.01,1/0];"distanceLimits"in(i=i||{})&&(s[0]=i.distanceLimits[0],s[1]=i.distanceLimits[1]),"zoomMin"in i&&(s[0]=i.zoomMin),"zoomMax"in i&&(s[1]=i.zoomMax);var c=n({center:i.center||[0,0,0],up:i.up||[0,1,0],eye:i.eye||[0,0,10],mode:i.mode||"orbit",distanceLimits:s}),l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0,g=a.clientWidth,u=a.clientHeight,x={keyBindingMode:"rotate",enableWheel:!0,view:c,element:a,delay:i.delay||16,rotateSpeed:i.rotateSpeed||1,zoomSpeed:i.zoomSpeed||1,translateSpeed:i.translateSpeed||1,flipX:!!i.flipX,flipY:!!i.flipY,modes:c.modes,_ortho:i._ortho||i.projection&&"orthographic"===i.projection.type||!1,tick:function(){var f=e(),T=this.delay,_=f-2*T;c.idle(f-T),c.recalcMatrix(_),c.flush(f-(100+2*T));for(var k=!0,w=c.computedMatrix,C=0;C<16;++C)k=k&&l[C]===w[C],l[C]=w[C];var A=a.clientWidth===g&&a.clientHeight===u;return g=a.clientWidth,u=a.clientHeight,k?!A:(p=Math.exp(c.computedRadius[0]),!0)},lookAt:function(f,T,_){c.lookAt(c.lastT(),f,T,_)},rotate:function(f,T,_){c.rotate(c.lastT(),f,T,_)},pan:function(f,T,_){c.pan(c.lastT(),f,T,_)},translate:function(f,T,_){c.translate(c.lastT(),f,T,_)}};return Object.defineProperties(x,{matrix:{get:function(){return c.computedMatrix},set:function(f){return c.setMatrix(c.lastT(),f),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(f){var T=c.computedUp.slice(),_=c.computedEye.slice(),k=c.computedCenter.slice();if(c.setMode(f),"turntable"===f){var w=e();c._active.lookAt(w,_,k,T),c._active.lookAt(w+500,_,k,[0,0,1]),c._active.flush(w)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(f){return c.lookAt(c.lastT(),null,f),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(f){return c.lookAt(c.lastT(),f),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(f){return c.lookAt(c.lastT(),null,null,f),c.computedUp},enumerable:!0},distance:{get:function(){return p},set:function(f){return c.setDistance(c.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(s)},set:function(f){return c.setDistanceLimits(f),f},enumerable:!0}}),a.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),x._lastX=-1,x._lastY=-1,x._lastMods={shift:!1,control:!1,alt:!1,meta:!1},x.enableMouseListeners=function(){function f(T,_,k,w){var C=x.keyBindingMode;if(!1!==C){var A="rotate"===C,O="pan"===C,P="zoom"===C,S=!!w.control,E=!!w.alt,D=!!w.shift,z=!!(1&T),N=!!(2&T),V=!!(4&T),X=1/a.clientHeight,J=X*(_-x._lastX),G=X*(k-x._lastY),Z=x.flipX?1:-1,re=x.flipY?1:-1,j=Math.PI*x.rotateSpeed,B=e();if(-1!==x._lastX&&-1!==x._lastY&&((A&&z&&!S&&!E&&!D||z&&!S&&!E&&D)&&c.rotate(B,Z*j*J,-re*j*G,0),(O&&z&&!S&&!E&&!D||N||z&&S&&!E&&!D)&&c.pan(B,-x.translateSpeed*J*p,x.translateSpeed*G*p,0),P&&z&&!S&&!E&&!D||V||z&&!S&&E&&!D)){var H=-x.zoomSpeed*G/window.innerHeight*(B-c.lastT())*100;c.pan(B,0,0,p*(Math.exp(H)-1))}return x._lastX=_,x._lastY=k,x._lastMods=w,!0}}x.mouseListener=r(a,f),a.addEventListener("touchstart",function(T){var _=t(T.changedTouches[0],a);f(0,_[0],_[1],x._lastMods),f(1,_[0],_[1],x._lastMods)},!!d&&{passive:!0}),a.addEventListener("touchmove",function(T){var _=t(T.changedTouches[0],a);f(1,_[0],_[1],x._lastMods),T.preventDefault()},!!d&&{passive:!1}),a.addEventListener("touchend",function(T){f(0,x._lastX,x._lastY,x._lastMods)},!!d&&{passive:!0}),x.wheelListener=o(a,function(T,_){if(!1!==x.keyBindingMode&&x.enableWheel){var k=x.flipX?1:-1,w=x.flipY?1:-1,C=e();if(Math.abs(T)>Math.abs(_))c.rotate(C,0,0,-T*k*Math.PI*x.rotateSpeed/window.innerWidth);else if(!x._ortho){var A=-x.zoomSpeed*w*_/window.innerHeight*(C-c.lastT())/20;c.pan(C,0,0,p*(Math.exp(A)-1))}}},!0)},x.enableMouseListeners(),x};var e=v("right-now"),n=v("3d-view"),r=v("mouse-change"),o=v("mouse-wheel"),t=v("mouse-event-offset"),d=v("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(v,b,h){var e=v("glslify"),n=v("gl-shader"),r=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);b.exports=function(t){return n(t,r,o,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(v,b,h){"use strict";var e=v("./camera.js"),n=v("gl-axes3d"),r=v("gl-axes3d/properties"),o=v("gl-spikes3d"),t=v("gl-select-static"),d=v("gl-fbo"),a=v("a-big-triangle"),i=v("mouse-change"),s=v("gl-mat4/perspective"),c=v("gl-mat4/ortho"),l=v("./lib/shader"),p=v("is-mobile")({tablet:!0,featureDetect:!0});function g(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function u(f){var T=Math.round(Math.log(Math.abs(f))/Math.log(10));if(T<0){var _=Math.round(Math.pow(10,-T));return Math.ceil(f*_)/_}return T>0?(_=Math.round(Math.pow(10,T)),Math.ceil(f/_)*_):Math.ceil(f)}function x(f){return"boolean"!=typeof f||f}b.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var T=f.canvas;T||(T=document.createElement("canvas"),f.container?f.container.appendChild(T):document.body.appendChild(T));var _=f.gl;if(_||(f.glOptions&&(p=!!f.glOptions.preserveDrawingBuffer),_=function(le,de){var be=null;try{(be=le.getContext("webgl",de))||(be=le.getContext("experimental-webgl",de))}catch{return null}return be}(T,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p})),!_)throw new Error("webgl not supported");var k=f.bounds||[[-10,-10,-10],[10,10,10]],w=new g,C=d(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!p}),A=l(_),O=f.cameraObject&&!0===f.cameraObject._ortho||f.camera.projection&&"orthographic"===f.camera.projection.type||!1,P={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:O},S=f.axes||{},E=n(_,S);E.enable=!S.disable;var z=o(_,f.spikes||{}),N=[],V=[],X=[],J=[],G=!0,Z=!0,B={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},H=(Z=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),ee=f.cameraObject||e(T,P),U={gl:_,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:T,selection:w,camera:ee,axes:E,axesPixels:null,spikes:z,bounds:k,objects:N,shape:H,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:x(f.autoResize),autoBounds:x(f.autoBounds),autoScale:!!f.autoScale,autoCenter:x(f.autoCenter),clipToBounds:x(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:B,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(le){this.aspect[0]=le.x,this.aspect[1]=le.y,this.aspect[2]=le.z,Z=!0},setBounds:function(le,de){this.bounds[0][le]=de.min,this.bounds[1][le]=de.max},setClearColor:function(le){this.clearColor=le},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},$=[_.drawingBufferWidth/U.pixelRatio|0,_.drawingBufferHeight/U.pixelRatio|0];function q(){if(!U._stopped&&U.autoResize){var le=T.parentNode,de=1,be=1;le&&le!==document.body?(de=le.clientWidth,be=le.clientHeight):(de=window.innerWidth,be=window.innerHeight);var _e=0|Math.ceil(de*U.pixelRatio),xe=0|Math.ceil(be*U.pixelRatio);if(_e!==T.width||xe!==T.height){T.width=_e,T.height=xe;var Ee=T.style;Ee.position=Ee.position||"absolute",Ee.left="0px",Ee.top="0px",Ee.width=de+"px",Ee.height=be+"px",G=!0}}}function te(){for(var le=N.length,de=J.length,be=0;be<de;++be)X[be]=0;e:for(be=0;be<le;++be){var _e=N[be],xe=_e.pickSlots;if(xe){for(var Ee=0;Ee<de;++Ee)if(X[Ee]+xe<255){V[be]=Ee,_e.setPickBase(X[Ee]+1),X[Ee]+=xe;continue e}var he=t(_,H);V[be]=de,J.push(he),X.push(xe),_e.setPickBase(1),de+=1}else V[be]=-1}for(;de>0&&0===X[de-1];)X.pop(),J.pop().dispose()}function ne(){if(U.contextLost)return!0;_.isContextLost()&&(U.contextLost=!0,U.mouseListener.enabled=!1,U.selection.object=null,U.oncontextloss&&U.oncontextloss())}U.autoResize&&q(),window.addEventListener("resize",q),U.update=function(le){U._stopped||(le=le||{},G=!0,Z=!0)},U.add=function(le){U._stopped||(le.axes=E,N.push(le),V.push(-1),G=!0,Z=!0,te())},U.remove=function(le){if(!U._stopped){var de=N.indexOf(le);de<0||(N.splice(de,1),V.pop(),G=!0,Z=!0,te())}},U.dispose=function(){if(!U._stopped&&(U._stopped=!0,window.removeEventListener("resize",q),T.removeEventListener("webglcontextlost",ne),U.mouseListener.enabled=!1,!U.contextLost)){E.dispose(),z.dispose();for(var le=0;le<N.length;++le)N[le].dispose();for(C.dispose(),le=0;le<J.length;++le)J[le].dispose();A.dispose(),_=null,E=null,z=null,N=[]}},U._mouseRotating=!1,U._prevButtons=0,U.enableMouseListeners=function(){U.mouseListener=i(T,function(le,de,be){if(!U._stopped){var _e=J.length,xe=N.length,Ee=w.object;w.distance=1/0,w.mouse[0]=de,w.mouse[1]=be,w.object=null,w.screen=null,w.dataCoordinate=w.dataPosition=null;var he=!1;if(le&&U._prevButtons)U._mouseRotating=!0;else{U._mouseRotating&&(Z=!0),U._mouseRotating=!1;for(var me=0;me<_e;++me){var Se=J[me].query(de,$[1]-be-1,U.pickRadius);if(Se){if(Se.distance>w.distance)continue;for(var Me=0;Me<xe;++Me){var Ie=N[Me];if(V[Me]===me){var Fe=Ie.pick(Se);Fe&&(w.buttons=le,w.screen=Se.coord,w.distance=Se.distance,w.object=Ie,w.index=Fe.distance,w.dataPosition=Fe.position,w.dataCoordinate=Fe.dataCoordinate,w.data=Fe,he=!0)}}}}}Ee&&Ee!==w.object&&(Ee.highlight&&Ee.highlight(null),G=!0),w.object&&(w.object.highlight&&w.object.highlight(w.data),G=!0),(he=he||w.object!==Ee)&&U.onselect&&U.onselect(w),1&le&&!(1&U._prevButtons)&&U.onclick&&U.onclick(w),U._prevButtons=le}})},T.addEventListener("webglcontextlost",ne);var se=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ie=[se[0].slice(),se[1].slice()];function ue(){if(!ne()){q();var le=U.camera.tick();B.view=U.camera.matrix,G=G||le,Z=Z||le,E.pixelRatio=U.pixelRatio,z.pixelRatio=U.pixelRatio;var de=N.length,be=se[0],_e=se[1];be[0]=be[1]=be[2]=1/0,_e[0]=_e[1]=_e[2]=-1/0;for(var xe=0;xe<de;++xe){(ze=N[xe]).pixelRatio=U.pixelRatio,ze.axes=U.axes,G=G||!!ze.dirty,Z=Z||!!ze.dirty;var Ee=ze.bounds;if(Ee)for(var he=Ee[0],me=Ee[1],Se=0;Se<3;++Se)be[Se]=Math.min(be[Se],he[Se]),_e[Se]=Math.max(_e[Se],me[Se])}var Me=U.bounds;if(U.autoBounds)for(Se=0;Se<3;++Se){if(_e[Se]<be[Se])be[Se]=-1,_e[Se]=1;else{be[Se]===_e[Se]&&(be[Se]-=1,_e[Se]+=1);var Ie=.05*(_e[Se]-be[Se]);be[Se]=be[Se]-Ie,_e[Se]=_e[Se]+Ie}Me[0][Se]=be[Se],Me[1][Se]=_e[Se]}var Fe=!1;for(Se=0;Se<3;++Se)Fe=Fe||ie[0][Se]!==Me[0][Se]||ie[1][Se]!==Me[1][Se],ie[0][Se]=Me[0][Se],ie[1][Se]=Me[1][Se];if(Z=Z||Fe,G=G||Fe){if(Fe){var Ne=[0,0,0];for(xe=0;xe<3;++xe)Ne[xe]=u((Me[1][xe]-Me[0][xe])/10);E.update(E.autoTicks?{bounds:Me,tickSpacing:Ne}:{bounds:Me})}var De=_.drawingBufferWidth,$e=_.drawingBufferHeight;for(H[0]=De,H[1]=$e,$[0]=0|Math.max(De/U.pixelRatio,1),$[1]=0|Math.max($e/U.pixelRatio,1),function(Ue,je){var rt=Ue.bounds,ut=Ue.cameraParams,gt=ut.projection,At=ut.model,et=Ue.zNear,wt=Ue.zFar,Gt=Ue.fovy,Kt=Ue.gl.drawingBufferWidth/Ue.gl.drawingBufferHeight;je?(c(gt,-Kt,Kt,-1,1,et,wt),ut._ortho=!0):(s(gt,Gt,Kt,et,wt),ut._ortho=!1);for(var cr=0;cr<16;++cr)At[cr]=0;At[15]=1;var ar=0;for(cr=0;cr<3;++cr)ar=Math.max(ar,rt[1][cr]-rt[0][cr]);for(cr=0;cr<3;++cr)At[5*cr]=Ue.autoScale?Ue.aspect[cr]/(rt[1][cr]-rt[0][cr]):1/ar,Ue.autoCenter&&(At[12+cr]=.5*-At[5*cr]*(rt[0][cr]+rt[1][cr]))}(U,O),xe=0;xe<de;++xe)(ze=N[xe]).axesBounds=Me,U.clipToBounds&&(ze.clipBounds=Me);w.object&&(z.position=U.snapToData?w.dataCoordinate:w.dataPosition,z.bounds=Me),Z&&(Z=!1,function(){if(!ne()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var Ue=N.length,je=J.length,rt=0;rt<je;++rt){var ut=J[rt];ut.shape=$,ut.begin();for(var gt=0;gt<Ue;++gt)if(V[gt]===rt){var At=N[gt];At.drawPick&&(At.pixelRatio=1,At.drawPick(B))}ut.end()}}}()),U.axesPixels=r(U.axes,B,De,$e),U.onrender&&U.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,De,$e),U.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var Re=!1;for(E.enable&&(Re=Re||E.isTransparent(),E.draw(B)),z.axes=E,w.object&&z.draw(B),_.disable(_.CULL_FACE),xe=0;xe<de;++xe)(ze=N[xe]).axes=E,ze.pixelRatio=U.pixelRatio,ze.isOpaque&&ze.isOpaque()&&ze.draw(B),ze.isTransparent&&ze.isTransparent()&&(Re=!0);if(Re){for(C.shape=H,C.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),E.enable&&E.isTransparent()&&E.drawTransparent(B),xe=0;xe<de;++xe)(ze=N[xe]).isOpaque&&ze.isOpaque()&&ze.draw(B);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),E.isTransparent()&&E.drawTransparent(B),xe=0;xe<de;++xe){var ze;(ze=N[xe]).isTransparent&&ze.isTransparent()&&ze.drawTransparent(B)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),A.bind(),C.color[0].bind(0),A.uniforms.accumBuffer=0,a(_),_.disable(_.BLEND)}for(G=!1,xe=0;xe<de;++xe)N[xe].dirty=!1}}}return U.enableMouseListeners(),function le(){U._stopped||U.contextLost||(ue(),requestAnimationFrame(le))}(),U.redraw=function(){U._stopped||(G=!0,ue())},U},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(v,b,h){var e=v("glslify");h.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),h.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),h.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),h.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(v,b,h){"use strict";var e=v("gl-shader"),n=v("gl-buffer"),r=v("typedarray-pool"),o=v("./lib/shader");function t(s,c,l,p,g){this.plot=s,this.offsetBuffer=c,this.pickBuffer=l,this.shader=p,this.pickShader=g,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}b.exports=function(s,c){var l=s.gl,f=new t(s,n(l),n(l),e(l,o.pointVertex,o.pointFragment),e(l,o.pickVertex,o.pickFragment));return f.update(c),s.addObject(f),f};var d,a,i=t.prototype;i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},i.update=function(s){var c;function l(_,k){return _ in s?s[_]:k}s=s||{},this.sizeMin=l("sizeMin",.5),this.sizeMax=l("sizeMax",20),this.color=l("color",[1,0,0,1]).slice(),this.areaRatio=l("areaRatio",1),this.borderColor=l("borderColor",[0,0,0,1]).slice(),this.blend=l("blend",!1);var p=s.positions.length>>>1,g=s.positions instanceof Float32Array,u=s.idToIndex instanceof Int32Array&&s.idToIndex.length>=p,x=s.positions,f=g?x:r.mallocFloat32(x.length),T=u?s.idToIndex:r.mallocInt32(p);if(g||f.set(x),!u)for(f.set(x),c=0;c<p;c++)T[c]=c;this.points=x,this.offsetBuffer.update(f),this.pickBuffer.update(T),g||r.free(f),u||r.free(T),this.pointCount=p,this.pickOffset=0},i.unifiedDraw=(d=[1,0,0,0,1,0,0,0,1],a=[0,0,0,0],function(s){var c=void 0!==s,l=c?this.pickShader:this.shader,p=this.plot.gl,g=this.plot.dataBox;if(0===this.pointCount)return s;var u=g[2]-g[0],x=g[3]-g[1],f=function(w,C){var A,O=0,P=w.length>>>1;for(A=0;A<P;A++){var S=w[2*A],E=w[2*A+1];S>=C[0]&&S<=C[2]&&E>=C[1]&&E<=C[3]&&O++}return O}(this.points,g),T=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));d[0]=2/u,d[4]=2/x,d[6]=-2*g[0]/u-1,d[7]=-2*g[1]/x-1,this.offsetBuffer.bind(),l.bind(),l.attributes.position.pointer(),l.uniforms.matrix=d,l.uniforms.color=this.color,l.uniforms.borderColor=this.borderColor,l.uniforms.pointCloud=T<5,l.uniforms.pointSize=T,l.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(a[0]=255&s,a[1]=s>>8&255,a[2]=s>>16&255,a[3]=s>>24&255,this.pickBuffer.bind(),l.attributes.pickId.pointer(p.UNSIGNED_BYTE),l.uniforms.pickOffset=a,this.pickOffset=s);var _=p.getParameter(p.BLEND),k=p.getParameter(p.DITHER);return _&&!this.blend&&p.disable(p.BLEND),k&&p.disable(p.DITHER),p.drawArrays(p.POINTS,0,this.pointCount),_&&!this.blend&&p.enable(p.BLEND),k&&p.enable(p.DITHER),s+this.pointCount}),i.draw=i.unifiedDraw,i.drawPick=i.unifiedDraw,i.pick=function(s,c,l){var p=this.pickOffset;if(l<p||l>=p+this.pointCount)return null;var u=l-p,x=this.points;return{object:this,pointId:u,dataCoord:[x[2*u],x[2*u+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(v,b,h){b.exports=function(e,n,r,o){var t,d,a,i,s,c=n[0],l=n[1],p=n[2],g=n[3],u=r[0],x=r[1],f=r[2],T=r[3];return(d=c*u+l*x+p*f+g*T)<0&&(d=-d,u=-u,x=-x,f=-f,T=-T),1-d>1e-6?(t=Math.acos(d),a=Math.sin(t),i=Math.sin((1-o)*t)/a,s=Math.sin(o*t)/a):(i=1-o,s=o),e[0]=i*c+s*u,e[1]=i*l+s*x,e[2]=i*p+s*f,e[3]=i*g+s*T,e}},{}],125:[function(v,b,h){"use strict";b.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(v,b,h){"use strict";var e=v("vectorize-text");b.exports=function(r,o,t){var d=n[o];if(d||(d=n[o]={}),r in d)return d[r];var a={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},i=e(r,a);a.triangles=!1;var s,c,l=e(r,a);if(t&&1!==t){for(s=0;s<i.positions.length;++s)for(c=0;c<i.positions[s].length;++c)i.positions[s][c]/=t;for(s=0;s<l.positions.length;++s)for(c=0;c<l.positions[s].length;++c)l.positions[s][c]/=t}var p=[[1/0,1/0],[-1/0,-1/0]],g=l.positions.length;for(s=0;s<g;++s){var u=l.positions[s];for(c=0;c<2;++c)p[0][c]=Math.min(p[0][c],u[c]),p[1][c]=Math.max(p[1][c],u[c])}return d[r]=[i,l,p]};var n={}},{"vectorize-text":311}],127:[function(v,b,h){var e=v("gl-shader"),n=v("glslify"),r=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),t=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],s={vertex:r,fragment:d,attributes:i},c={vertex:o,fragment:d,attributes:i},l={vertex:t,fragment:d,attributes:i},p={vertex:r,fragment:a,attributes:i},g={vertex:o,fragment:a,attributes:i},u={vertex:t,fragment:a,attributes:i};function x(f,T){var _=e(f,T),k=_.attributes;return k.position.location=0,k.color.location=1,k.glyph.location=2,k.id.location=3,_}h.createPerspective=function(f){return x(f,s)},h.createOrtho=function(f){return x(f,c)},h.createProject=function(f){return x(f,l)},h.createPickPerspective=function(f){return x(f,p)},h.createPickOrtho=function(f){return x(f,g)},h.createPickProject=function(f){return x(f,u)}},{"gl-shader":132,glslify:231}],128:[function(v,b,h){"use strict";var e=v("is-string-blank"),n=v("gl-buffer"),r=v("gl-vao"),o=v("typedarray-pool"),t=v("gl-mat4/multiply"),d=v("./lib/shaders"),a=v("./lib/glyphs"),i=v("./lib/get-simple-string"),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(X,J){var G=X[0],Z=X[1],re=X[2],j=X[3];return X[0]=J[0]*G+J[4]*Z+J[8]*re+J[12]*j,X[1]=J[1]*G+J[5]*Z+J[9]*re+J[13]*j,X[2]=J[2]*G+J[6]*Z+J[10]*re+J[14]*j,X[3]=J[3]*G+J[7]*Z+J[11]*re+J[15]*j,X}function l(X,J,G,Z){return c(Z,Z),c(Z,Z),c(Z,Z)}function p(X,J){this.index=X,this.dataCoordinate=this.position=J}function g(X){return!0===X||X>1?1:X}function u(X,J,G,Z,re,j,B,H,ee,U,$,q){this.gl=X,this.pixelRatio=1,this.shader=J,this.orthoShader=G,this.projectShader=Z,this.pointBuffer=re,this.colorBuffer=j,this.glyphBuffer=B,this.idBuffer=H,this.vao=ee,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=U,this.pickOrthoShader=$,this.pickProjectShader=q,this.points=[],this._selectResult=new p(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}b.exports=function(X){var J=X.gl,G=d.createPerspective(J),Z=d.createOrtho(J),re=d.createProject(J),j=d.createPickPerspective(J),B=d.createPickOrtho(J),H=d.createPickProject(J),ee=n(J),U=n(J),$=n(J),q=n(J),ne=new u(J,G,Z,re,ee,U,$,q,r(J,[{buffer:ee,size:3,type:J.FLOAT},{buffer:U,size:4,type:J.FLOAT},{buffer:$,size:2,type:J.FLOAT},{buffer:q,size:4,type:J.UNSIGNED_BYTE,normalized:!0}]),j,B,H);return ne.update(X),ne};var x=u.prototype;x.pickSlots=1,x.setPickBase=function(X){this.pickId=X},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&!this.projectHasAlpha)return!0;return!1};var f=[0,0],T=[0,0,0],_=[0,0,0],k=[0,0,0,1],w=[0,0,0,1],C=s.slice(),A=[0,0,0],O=[[0,0,0],[0,0,0]];function P(X){return X[0]=X[1]=X[2]=0,X}function S(X,J){return X[0]=J[0],X[1]=J[1],X[2]=J[2],X[3]=1,X}function E(X,J,G,Z){return X[0]=J[0],X[1]=J[1],X[2]=J[2],X[G]=Z,X}var z=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function N(X,J,G,Z,re,j,B){var H=G.gl;if((j===G.projectHasAlpha||B)&&function D(X,J,G,Z){var re,j=J.axesProject,B=J.gl,H=X.uniforms,ee=G.model||s,U=G.view||s,$=G.projection||s,q=J.axesBounds,te=function(Me){for(var Ie=O,Fe=0;Fe<2;++Fe)for(var Ne=0;Ne<3;++Ne)Ie[Fe][Ne]=Math.max(Math.min(Me[Fe][Ne],1e8),-1e8);return Ie}(J.clipBounds);re=J.axes&&J.axes.lastCubeProps?J.axes.lastCubeProps.axis:[1,1,1],f[0]=2/B.drawingBufferWidth,f[1]=2/B.drawingBufferHeight,X.bind(),H.view=U,H.projection=$,H.screenSize=f,H.highlightId=J.highlightId,H.highlightScale=J.highlightScale,H.clipBounds=te,H.pickGroup=J.pickId/255,H.pixelRatio=Z;for(var ne=0;ne<3;++ne)if(j[ne]){H.scale=J.projectScale[ne],H.opacity=J.projectOpacity[ne];for(var se=C,ie=0;ie<16;++ie)se[ie]=0;for(ie=0;ie<4;++ie)se[5*ie]=1;se[5*ne]=0,se[12+ne]=re[ne]<0?q[0][ne]:q[1][ne],t(se,ee,se),H.model=se;var ue=(ne+1)%3,le=(ne+2)%3,de=P(T),be=P(_);de[ue]=1,be[le]=1;var _e=l(0,0,0,S(k,de)),xe=l(0,0,0,S(w,be));if(Math.abs(_e[1])>Math.abs(xe[1])){var Ee=_e;_e=xe,xe=Ee,Ee=de,de=be,be=Ee;var he=ue;ue=le,le=he}_e[0]<0&&(de[ue]=-1),xe[1]>0&&(be[le]=-1);var me=0,Se=0;for(ie=0;ie<4;++ie)me+=Math.pow(ee[4*ue+ie],2),Se+=Math.pow(ee[4*le+ie],2);de[ue]/=Math.sqrt(me),be[le]/=Math.sqrt(Se),H.axes[0]=de,H.axes[1]=be,H.fragClipBounds[0]=E(A,te[0],ne,-1e8),H.fragClipBounds[1]=E(A,te[1],ne,1e8),J.vao.bind(),J.vao.draw(B.TRIANGLES,J.vertexCount),J.lineWidth>0&&(B.lineWidth(J.lineWidth*Z),J.vao.draw(B.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}(J,G,Z,re),j===G.hasAlpha||B){X.bind();var ee=X.uniforms;ee.model=Z.model||s,ee.view=Z.view||s,ee.projection=Z.projection||s,f[0]=2/H.drawingBufferWidth,f[1]=2/H.drawingBufferHeight,ee.screenSize=f,ee.highlightId=G.highlightId,ee.highlightScale=G.highlightScale,ee.fragClipBounds=z,ee.clipBounds=G.axes.bounds,ee.opacity=G.opacity,ee.pickGroup=G.pickId/255,ee.pixelRatio=re,G.vao.bind(),G.vao.draw(H.TRIANGLES,G.vertexCount),G.lineWidth>0&&(H.lineWidth(G.lineWidth*re),G.vao.draw(H.LINES,G.lineVertexCount,G.vertexCount)),G.vao.unbind()}}function V(X,J,G,Z){var re;re=Array.isArray(X)?J<X.length?X[J]:void 0:X,re=i(re);var j=!0;e(re)&&(re="\u25bc",j=!1);var B=a(re,G,Z);return{mesh:B[0],lines:B[1],bounds:B[2],visible:j}}x.draw=function(X){N(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,X,this.pixelRatio,!1,!1)},x.drawTransparent=function(X){N(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,X,this.pixelRatio,!0,!1)},x.drawPick=function(X){N(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,X,1,!0,!0)},x.pick=function(X){if(!X||X.id!==this.pickId)return null;var J=X.value[2]+(X.value[1]<<8)+(X.value[0]<<16);if(J>=this.pointCount||J<0)return null;var G=this.points[J],Z=this._selectResult;Z.index=J;for(var re=0;re<3;++re)Z.position[re]=Z.dataCoordinate[re]=G[re];return Z},x.highlight=function(X){if(X){var J=X.index;this.highlightId=[(255&J)/255,(J>>8&255)/255,(J>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},x.update=function(X){if("perspective"in(X=X||{})&&(this.useOrtho=!X.perspective),"orthographic"in X&&(this.useOrtho=!!X.orthographic),"lineWidth"in X&&(this.lineWidth=X.lineWidth),"project"in X)if(Array.isArray(X.project))this.axesProject=X.project;else{var J=!!X.project;this.axesProject=[J,J,J]}if("projectScale"in X)if(Array.isArray(X.projectScale))this.projectScale=X.projectScale.slice();else{var G=+X.projectScale;this.projectScale=[G,G,G]}if(this.projectHasAlpha=!1,"projectOpacity"in X){this.projectOpacity=Array.isArray(X.projectOpacity)?X.projectOpacity.slice():[G=+X.projectOpacity,G,G];for(var Z=0;Z<3;++Z)this.projectOpacity[Z]=g(this.projectOpacity[Z]),this.projectOpacity[Z]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in X&&(this.opacity=g(X.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var re,j,B=X.position,H=X.font||"normal",ee=X.alignment||[0,0];if(2===ee.length)re=ee[0],j=ee[1];else for(re=[],j=[],Z=0;Z<ee.length;++Z)re[Z]=ee[Z][0],j[Z]=ee[Z][1];var U=[1/0,1/0,1/0],$=[-1/0,-1/0,-1/0],q=X.glyph,te=X.color,ne=X.size,se=X.angle,ie=X.lineColor,ue=-1,le=0,de=0,be=0;if(B.length){be=B.length;e:for(Z=0;Z<be;++Z){for(var _e=B[Z],xe=0;xe<3;++xe)if(isNaN(_e[xe])||!isFinite(_e[xe]))continue e;var Ee=(rt=V(q,Z,H,this.pixelRatio)).mesh,he=rt.lines,me=rt.bounds;le+=3*Ee.cells.length,de+=2*he.edges.length}}var Se=le+de,Me=o.mallocFloat(3*Se),Ie=o.mallocFloat(4*Se),Fe=o.mallocFloat(2*Se),Ne=o.mallocUint32(Se);if(Se>0){var De=0,$e=le,Re=[0,0,0,1],ze=[0,0,0,1],Ue=Array.isArray(te)&&Array.isArray(te[0]),je=Array.isArray(ie)&&Array.isArray(ie[0]);e:for(Z=0;Z<be;++Z){for(ue+=1,_e=B[Z],xe=0;xe<3;++xe){if(isNaN(_e[xe])||!isFinite(_e[xe]))continue e;$[xe]=Math.max($[xe],_e[xe]),U[xe]=Math.min(U[xe],_e[xe])}Ee=(rt=V(q,Z,H,this.pixelRatio)).mesh,he=rt.lines,me=rt.bounds;var rt,ut=rt.visible;if(ut)if(Array.isArray(te)){if(3===(gt=Ue?Z<te.length?te[Z]:[0,0,0,0]:te).length){for(xe=0;xe<3;++xe)Re[xe]=gt[xe];Re[3]=1}else if(4===gt.length){for(xe=0;xe<4;++xe)Re[xe]=gt[xe];!this.hasAlpha&&gt[3]<1&&(this.hasAlpha=!0)}}else Re[0]=Re[1]=Re[2]=0,Re[3]=1;else Re=[1,1,1,0];if(ut)if(Array.isArray(ie)){var gt;if(3===(gt=je?Z<ie.length?ie[Z]:[0,0,0,0]:ie).length){for(xe=0;xe<3;++xe)ze[xe]=gt[xe];ze[xe]=1}else if(4===gt.length){for(xe=0;xe<4;++xe)ze[xe]=gt[xe];!this.hasAlpha&&gt[3]<1&&(this.hasAlpha=!0)}}else ze[0]=ze[1]=ze[2]=0,ze[3]=1;else ze=[1,1,1,0];var At=.5;ut?Array.isArray(ne)?At=Z<ne.length?+ne[Z]:12:ne?At=+ne:this.useOrtho&&(At=12):At=0;var _t=0;Array.isArray(se)?_t=Z<se.length?+se[Z]:0:se&&(_t=+se);var it=Math.cos(_t),et=Math.sin(_t);for(_e=B[Z],xe=0;xe<3;++xe)$[xe]=Math.max($[xe],_e[xe]),U[xe]=Math.min(U[xe],_e[xe]);var wt=re,Gt=j;wt=0,Array.isArray(re)?wt=Z<re.length?re[Z]:0:re&&(wt=re),Gt=0,Array.isArray(j)?Gt=Z<j.length?j[Z]:0:j&&(Gt=j);var Kt=[wt*=wt>0?1-me[0][0]:wt<0?1+me[1][0]:1,Gt*=Gt>0?1-me[0][1]:Gt<0?1+me[1][1]:1],cr=Ee.cells||[],ar=Ee.positions||[];for(xe=0;xe<cr.length;++xe)for(var hr=cr[xe],Xt=0;Xt<3;++Xt){for(var He=0;He<3;++He)Me[3*De+He]=_e[He];for(He=0;He<4;++He)Ie[4*De+He]=Re[He];Ne[De]=ue;var Je=ar[hr[Xt]];Fe[2*De]=At*(it*Je[0]-et*Je[1]+Kt[0]),Fe[2*De+1]=At*(et*Je[0]+it*Je[1]+Kt[1]),De+=1}for(cr=he.edges,ar=he.positions,xe=0;xe<cr.length;++xe)for(hr=cr[xe],Xt=0;Xt<2;++Xt){for(He=0;He<3;++He)Me[3*$e+He]=_e[He];for(He=0;He<4;++He)Ie[4*$e+He]=ze[He];Ne[$e]=ue,Fe[2*$e]=At*(it*(Je=ar[hr[Xt]])[0]-et*Je[1]+Kt[0]),Fe[2*$e+1]=At*(et*Je[0]+it*Je[1]+Kt[1]),$e+=1}}}this.bounds=[U,$],this.points=B,this.pointCount=B.length,this.vertexCount=le,this.lineVertexCount=de,this.pointBuffer.update(Me),this.colorBuffer.update(Ie),this.glyphBuffer.update(Fe),this.idBuffer.update(Ne),o.free(Me),o.free(Ie),o.free(Fe),o.free(Ne)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(v,b,h){"use strict";var e=v("glslify");h.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),h.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(v,b,h){"use strict";var e=v("gl-shader"),n=v("gl-buffer"),r=v("./lib/shaders");function o(d,a,i){this.plot=d,this.boxBuffer=a,this.boxShader=i,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}b.exports=function(d,a){var i=d.gl,l=new o(d,n(i,[0,0,0,1,1,0,1,1]),e(i,r.boxVertex,r.boxFragment));return l.update(a),d.addOverlay(l),l};var t=o.prototype;t.draw=function(){if(this.enabled){var d=this.plot,a=this.selectBox,i=this.borderWidth,s=this.innerColor,c=this.outerColor,l=this.borderColor,p=d.box,g=d.screenBox,u=d.dataBox,x=d.viewBox,f=d.pixelRatio,T=(a[0]-u[0])*(x[2]-x[0])/(u[2]-u[0])+x[0],_=(a[1]-u[1])*(x[3]-x[1])/(u[3]-u[1])+x[1],k=(a[2]-u[0])*(x[2]-x[0])/(u[2]-u[0])+x[0],w=(a[3]-u[1])*(x[3]-x[1])/(u[3]-u[1])+x[1];if(T=Math.max(T,x[0]),_=Math.max(_,x[1]),k=Math.min(k,x[2]),w=Math.min(w,x[3]),!(k<T||w<_)){p.bind();var C=g[2]-g[0],A=g[3]-g[1];if(this.outerFill&&(p.drawBox(0,0,C,_,c),p.drawBox(0,_,T,w,c),p.drawBox(0,w,C,A,c),p.drawBox(k,_,C,w,c)),this.innerFill&&p.drawBox(T,_,k,w,s),i>0){var O=i*f;p.drawBox(T-O,_-O,k+O,_+O,l),p.drawBox(T-O,w-O,k+O,w+O,l),p.drawBox(T-O,_-O,T+O,w+O,l),p.drawBox(k-O,_-O,k+O,w+O,l)}}}},t.update=function(d){this.innerFill=!!(d=d||{}).innerFill,this.outerFill=!!d.outerFill,this.innerColor=(d.innerColor||[0,0,0,.5]).slice(),this.outerColor=(d.outerColor||[0,0,0,.5]).slice(),this.borderColor=(d.borderColor||[0,0,0,1]).slice(),this.borderWidth=d.borderWidth||0,this.selectBox=(d.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(v,b,h){"use strict";b.exports=function(i,s){var c=s[0],l=s[1];return new d(i,e(i,c,l,{}),n.mallocUint8(c*l*4))};var e=v("gl-fbo"),n=v("typedarray-pool"),r=v("ndarray"),o=v("bit-twiddle").nextPow2;function t(i,s,c,l,p){this.coord=[i,s],this.id=c,this.value=l,this.distance=p}function d(i,s,c){this.gl=i,this.fbo=s,this.buffer=c,this._readTimeout=null;var l=this;this._readCallback=function(){l.gl&&(s.bind(),i.readPixels(0,0,s.shape[0],s.shape[1],i.RGBA,i.UNSIGNED_BYTE,l.buffer),l._readTimeout=null)}}var a=d.prototype;Object.defineProperty(a,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(i){if(this.gl){this.fbo.shape=i;var s=this.fbo.shape[0],c=this.fbo.shape[1];if(c*s*4>this.buffer.length){n.free(this.buffer);for(var l=this.buffer=n.mallocUint8(o(c*s*4)),p=0;p<c*s*4;++p)l[p]=255}return i}}}),a.begin=function(){var i=this.gl;i&&(this.fbo.bind(),i.clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT))},a.end=function(){var i=this.gl;i&&(i.bindFramebuffer(i.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},a.query=function(i,s,c){if(!this.gl)return null;var l=this.fbo.shape.slice();i|=0,s|=0,"number"!=typeof c&&(c=1);var p=0|Math.min(Math.max(i-c,0),l[0]),g=0|Math.min(Math.max(i+c,0),l[0]),u=0|Math.min(Math.max(s-c,0),l[1]),x=0|Math.min(Math.max(s+c,0),l[1]);if(g<=p||x<=u)return null;var f=[g-p,x-u],T=r(this.buffer,[f[0],f[1],4],[4,4*l[0],1],4*(p+l[0]*u)),_=function(C,A,O){for(var P=1e8,S=-1,E=-1,D=C.shape[0],z=C.shape[1],N=0;N<D;N++)for(var V=0;V<z;V++){var X=C.get(N,V,0),J=C.get(N,V,1),G=C.get(N,V,2),Z=C.get(N,V,3);if(X<255||J<255||G<255||Z<255){var re=A-N,j=O-V,B=re*re+j*j;B<P&&(P=B,S=N,E=V)}}return[S,E,P]}(T.hi(f[0],f[1],1),c,c),k=_[0],w=_[1];return k<0||Math.pow(this.radius,2)<_[2]?null:new t(k+p|0,w+u|0,T.get(k,w,0),[T.get(k,w,1),T.get(k,w,2),T.get(k,w,3)],Math.sqrt(_[2]))},a.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(v,b,h){"use strict";var e=v("./lib/create-uniforms"),n=v("./lib/create-attributes"),r=v("./lib/reflect"),o=v("./lib/shader-cache"),t=v("./lib/runtime-reflect"),d=v("./lib/GLError");function a(c){this.gl=c,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=a.prototype;function s(c,l){return c.name<l.name?-1:1}i.bind=function(){var c;this.program||this._relink();var l=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),p=this.gl.lastAttribCount;if(l>p)for(c=p;c<l;c++)this.gl.enableVertexAttribArray(c);else if(p>l)for(c=l;c<p;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=l,this.gl.useProgram(this.program)},i.dispose=function(){for(var c=this.gl.lastAttribCount,l=0;l<c;l++)this.gl.disableVertexAttribArray(l);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},i.update=function(c,l,p,g){if(!l||1===arguments.length){var u=c;c=u.vertex,l=u.fragment,p=u.uniforms,g=u.attributes}var x=this,f=x.gl,T=x._vref;x._vref=o.shader(f,f.VERTEX_SHADER,c),T&&T.dispose(),x.vertShader=x._vref.shader;var _=this._fref;if(x._fref=o.shader(f,f.FRAGMENT_SHADER,l),_&&_.dispose(),x.fragShader=x._fref.shader,!p||!g){var k=f.createProgram();if(f.attachShader(k,x.fragShader),f.attachShader(k,x.vertShader),f.linkProgram(k),!f.getProgramParameter(k,f.LINK_STATUS)){var w=f.getProgramInfoLog(k);throw new d(w,"Error linking program:"+w)}p=p||t.uniforms(f,k),g=g||t.attributes(f,k),f.deleteProgram(k)}(g=g.slice()).sort(s);var C,A=[],O=[],P=[];for(C=0;C<g.length;++C){var S=g[C];if(S.type.indexOf("mat")>=0){for(var E=0|S.type.charAt(S.type.length-1),D=new Array(E),z=0;z<E;++z)D[z]=P.length,O.push(S.name+"["+z+"]"),"number"==typeof S.location?P.push(S.location+z):Array.isArray(S.location)&&S.location.length===E&&"number"==typeof S.location[z]?P.push(0|S.location[z]):P.push(-1);A.push({name:S.name,type:S.type,locations:D})}else A.push({name:S.name,type:S.type,locations:[P.length]}),O.push(S.name),P.push("number"==typeof S.location?0|S.location:-1)}var N=0;for(C=0;C<P.length;++C)if(P[C]<0){for(;P.indexOf(N)>=0;)N+=1;P[C]=N}var V=new Array(p.length);function X(){x.program=o.program(f,x._vref,x._fref,O,P);for(var J=0;J<p.length;++J)V[J]=f.getUniformLocation(x.program,p[J].name)}X(),x._relink=X,x.types={uniforms:r(p),attributes:r(g)},x.attributes=n(f,x,A,P),Object.defineProperty(x,"uniforms",e(f,x,p,V))},b.exports=function(c,l,p,g,u){var x=new a(c);return x.update(l,p,g,u),x}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(v,b,h){function e(n,r,o){this.shortMessage=r||"",this.longMessage=o||"",this.rawError=n||"",this.message="gl-shader: "+(r||n||"")+(o?"\n"+o:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,b.exports=e},{}],134:[function(v,b,h){"use strict";b.exports=function(a,i,s,c){for(var l={},p=0,g=s.length;p<g;++p){var u=s[p],x=u.name,f=u.type,T=u.locations;switch(f){case"bool":case"int":case"float":t(a,i,T[0],c,1,l,x);break;default:if(f.indexOf("vec")>=0){if((_=f.charCodeAt(f.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+x+": "+f);t(a,i,T[0],c,_,l,x)}else{if(!(f.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+x+": "+f);var _;if((_=f.charCodeAt(f.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+x+": "+f);d(a,i,T,c,_,l,x)}}}return l};var e=v("./GLError");function n(a,i,s,c,l,p){this._gl=a,this._wrapper=i,this._index=s,this._locations=c,this._dimension=l,this._constFunc=p}var r=n.prototype;r.pointer=function(a,i,s,c){var l=this._gl,p=this._locations[this._index];l.vertexAttribPointer(p,this._dimension,a||l.FLOAT,!!i,s||0,c||0),l.enableVertexAttribArray(p)},r.set=function(a,i,s,c){return this._constFunc(this._locations[this._index],a,i,s,c)},Object.defineProperty(r,"location",{get:function(){return this._locations[this._index]},set:function(a){return a!==this._locations[this._index]&&(this._locations[this._index]=0|a,this._wrapper.program=null),0|a}});var o=[function(a,i,s){return void 0===s.length?a.vertexAttrib1f(i,s):a.vertexAttrib1fv(i,s)},function(a,i,s,c){return void 0===s.length?a.vertexAttrib2f(i,s,c):a.vertexAttrib2fv(i,s)},function(a,i,s,c,l){return void 0===s.length?a.vertexAttrib3f(i,s,c,l):a.vertexAttrib3fv(i,s)},function(a,i,s,c,l,p){return void 0===s.length?a.vertexAttrib4f(i,s,c,l,p):a.vertexAttrib4fv(i,s)}];function t(a,i,s,c,l,p,g){var u=o[l],x=new n(a,i,s,c,l,u);Object.defineProperty(p,g,{set:function(f){return a.disableVertexAttribArray(c[s]),u(a,c[s],f),f},get:function(){return x},enumerable:!0})}function d(a,i,s,c,l,p,g){for(var u=new Array(l),x=new Array(l),f=0;f<l;++f)t(a,i,s[f],c,l,u,f),x[f]=u[f];Object.defineProperty(u,"location",{set:function(k){if(Array.isArray(k))for(var w=0;w<l;++w)x[w].location=k[w];else for(w=0;w<l;++w)x[w].location=k+w;return k},get:function(){for(var k=new Array(l),w=0;w<l;++w)k[w]=c[s[w]];return k},enumerable:!0}),u.pointer=function(k,w,C,A){k=k||a.FLOAT,w=!!w,C=C||l*l,A=A||0;for(var O=0;O<l;++O){var P=c[s[O]];a.vertexAttribPointer(P,l,k,w,C,A+O*l),a.enableVertexAttribArray(P)}};var T=new Array(l),_=a["vertexAttrib"+l+"fv"];Object.defineProperty(p,g,{set:function(k){for(var w=0;w<l;++w){var C=c[s[w]];if(a.disableVertexAttribArray(C),Array.isArray(k[0]))_.call(a,C,k[w]);else{for(var A=0;A<l;++A)T[A]=k[l*w+A];_.call(a,C,T)}}return k},get:function(){return u},enumerable:!0})}},{"./GLError":133}],135:[function(v,b,h){"use strict";var e=v("./reflect"),n=v("./GLError");function r(t){return function(){return t}}function o(t,d){for(var a=new Array(t),i=0;i<t;++i)a[i]=d;return a}b.exports=function(t,d,a,i){function s(g){return function(u){for(var x=function z(N,V){if("object"!=typeof V)return[[N,V]];var X=[];for(var J in V){var G=V[J],Z=N;parseInt(J)+""===J?Z+="["+J+"]":Z+="."+J,"object"==typeof G?X.push.apply(X,z(Z,G)):X.push([Z,G])}return X}("",g),f=0;f<x.length;++f){var T=x[f],_=T[0],k=T[1];if(i[k]){var w=u;if("string"==typeof _&&(0===_.indexOf(".")||0===_.indexOf("["))){var C=_;if(0===_.indexOf(".")&&(C=_.slice(1)),C.indexOf("]")===C.length-1){var A=C.indexOf("["),O=C.slice(0,A),P=C.slice(A+1,C.length-1);w=O?u[O][P]:u[P]}else w=u[C]}var S,E=a[k].type;switch(E){case"bool":case"int":case"sampler2D":case"samplerCube":t.uniform1i(i[k],w);break;case"float":t.uniform1f(i[k],w);break;default:var D=E.indexOf("vec");if(!(0<=D&&D<=1&&E.length===4+D)){if(0===E.indexOf("mat")&&4===E.length){if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+E);t["uniformMatrix"+S+"fv"](i[k],!1,w);break}throw new n("","Unknown uniform data type for "+name+": "+E)}if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new n("","Invalid data type");switch(E.charAt(0)){case"b":case"i":t["uniform"+S+"iv"](i[k],w);break;case"v":t["uniform"+S+"fv"](i[k],w);break;default:throw new n("","Unrecognized data type for vector "+name+": "+E)}}}}}}function c(g,u,x){if("object"==typeof x){var f=l(x);Object.defineProperty(g,u,{get:r(f),set:s(x),enumerable:!0,configurable:!1})}else i[x]?Object.defineProperty(g,u,{get:(T=x,function(_,k,w){return _.getUniform(k.program,w[T])}),set:s(x),enumerable:!0,configurable:!1}):g[u]=function(_){switch(_){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var k=_.indexOf("vec");if(0<=k&&k<=1&&_.length===4+k){if((w=_.charCodeAt(_.length-1)-48)<2||w>4)throw new n("","Invalid data type");return"b"===_.charAt(0)?o(w,!1):o(w,0)}if(0===_.indexOf("mat")&&4===_.length){var w;if((w=_.charCodeAt(_.length-1)-48)<2||w>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+_);return o(w*w,0)}throw new n("","Unknown uniform data type for "+name+": "+_)}}(a[x].type);var T}function l(g){var u;if(Array.isArray(g)){u=new Array(g.length);for(var x=0;x<g.length;++x)c(u,x,g[x])}else for(var f in u={},g)c(u,f,g[f]);return u}var p=e(a,!0);return{get:r(l(p)),set:s(p),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(v,b,h){"use strict";b.exports=function(e,n){for(var r={},o=0;o<e.length;++o)for(var t=e[o].name.split("."),d=r,a=0;a<t.length;++a){var i=t[a].split("[");if(i.length>1){i[0]in d||(d[i[0]]=[]),d=d[i[0]];for(var s=1;s<i.length;++s){var c=parseInt(i[s]);s<i.length-1||a<t.length-1?(c in d||(d[c]=s<i.length-1?[]:{}),d=d[c]):d[c]=n?o:e[o].type}}else a<t.length-1?(i[0]in d||(d[i[0]]={}),d=d[i[0]]):d[i[0]]=n?o:e[o].type}return r}},{}],137:[function(v,b,h){"use strict";h.uniforms=function(o,t){for(var d=o.getProgramParameter(t,o.ACTIVE_UNIFORMS),a=[],i=0;i<d;++i){var s=o.getActiveUniform(t,i);if(s){var c=r(o,s.type);if(s.size>1)for(var l=0;l<s.size;++l)a.push({name:s.name.replace("[0]","["+l+"]"),type:c});else a.push({name:s.name,type:c})}}return a},h.attributes=function(o,t){for(var d=o.getProgramParameter(t,o.ACTIVE_ATTRIBUTES),a=[],i=0;i<d;++i){var s=o.getActiveAttrib(t,i);s&&a.push({name:s.name,type:r(o,s.type)})}return a};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function r(o,t){if(!n){var d=Object.keys(e);n={};for(var a=0;a<d.length;++a){var i=d[a];n[o[i]]=e[i]}}return n[t]}},{}],138:[function(v,b,h){"use strict";h.shader=function(s,c,l){return i(s).getShaderReference(c,l)},h.program=function(s,c,l,p,g){return i(s).getProgram(c,l,p,g)};var e=v("./GLError"),n=v("gl-format-compiler-error"),r=new(typeof WeakMap>"u"?v("weakmap-shim"):WeakMap),o=0;function t(s,c,l,p,g,u,x){this.id=s,this.src=c,this.type=l,this.shader=p,this.count=u,this.programs=[],this.cache=x}function d(s){this.gl=s,this.shaders=[{},{}],this.programs={}}t.prototype.dispose=function(){if(0==--this.count){for(var s=this.cache,c=s.gl,l=this.programs,p=0,g=l.length;p<g;++p){var u=s.programs[l[p]];u&&(delete s.programs[p],c.deleteProgram(u))}c.deleteShader(this.shader),delete s.shaders[this.type===c.FRAGMENT_SHADER|0][this.src]}};var a=d.prototype;function i(s){var c=r.get(s);return c||(c=new d(s),r.set(s,c)),c}a.getShaderReference=function(s,c){var l=this.gl,p=this.shaders[s===l.FRAGMENT_SHADER|0],g=p[c];if(g&&l.isShader(g.shader))g.count+=1;else{var u=function(x,f,T){var _=x.createShader(f);if(x.shaderSource(_,T),x.compileShader(_),!x.getShaderParameter(_,x.COMPILE_STATUS)){var k=x.getShaderInfoLog(_);try{var w=n(k,T,f)}catch(C){throw console.warn("Failed to format compiler error: "+C),new e(k,"Error compiling shader:\n"+k)}throw new e(k,w.short,w.long)}return _}(l,s,c);g=p[c]=new t(o++,c,s,u,[],1,this)}return g},a.getProgram=function(s,c,l,p){var g=[s.id,c.id,l.join(":"),p.join(":")].join("@"),u=this.programs[g];return u&&this.gl.isProgram(u)||(this.programs[g]=u=function(x,f,T,_,k){var w=x.createProgram();x.attachShader(w,f),x.attachShader(w,T);for(var C=0;C<_.length;++C)x.bindAttribLocation(w,k[C],_[C]);if(x.linkProgram(w),!x.getProgramParameter(w,x.LINK_STATUS)){var A=x.getProgramInfoLog(w);throw new e(A,"Error linking program: "+A)}return w}(this.gl,s.shader,c.shader,l,p),s.programs.push(g),c.programs.push(g)),u}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(v,b,h){"use strict";function e(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}b.exports=function(r,o){var t=new e(r);return t.update(o),r.addOverlay(t),t};var n=e.prototype;n.update=function(r){this.enable=((r=r||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(o){return o.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var r=this.enable,o=this.width,t=this.color,d=this.center,a=this.plot,i=a.line,s=a.dataBox,c=a.viewBox;if(i.bind(),s[0]<=d[0]&&d[0]<=s[2]&&s[1]<=d[1]&&d[1]<=s[3]){var l=c[0]+(d[0]-s[0])/(s[2]-s[0])*(c[2]-c[0]),p=c[1]+(d[1]-s[1])/(s[3]-s[1])*(c[3]-c[1]);r[0]&&i.drawLine(l,p,c[0],p,o[0],t[0]),r[1]&&i.drawLine(l,p,l,c[1],o[1],t[1]),r[2]&&i.drawLine(l,p,c[2],p,o[2],t[2]),r[3]&&i.drawLine(l,p,l,c[3],o[3],t[3])}},n.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(v,b,h){"use strict";var e=v("glslify"),n=v("gl-shader"),r=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);b.exports=function(t){return n(t,r,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(v,b,h){"use strict";var e=v("gl-buffer"),n=v("gl-vao"),r=v("./shaders/index");b.exports=function(c,l){var p=[];function g(_,k,w,C,A,O){var P=[_,k,w,0,0,0,1];P[C+3]=1,P[C]=A,p.push.apply(p,P),P[6]=-1,p.push.apply(p,P),P[C]=O,p.push.apply(p,P),p.push.apply(p,P),P[6]=1,p.push.apply(p,P),P[C]=A,p.push.apply(p,P)}g(0,0,0,0,0,1),g(0,0,0,1,0,1),g(0,0,0,2,0,1),g(1,0,0,1,-1,1),g(1,0,0,2,-1,1),g(0,1,0,0,-1,1),g(0,1,0,2,-1,1),g(0,0,1,0,-1,1),g(0,0,1,1,-1,1);var u=e(c,p),x=n(c,[{type:c.FLOAT,buffer:u,size:3,offset:0,stride:28},{type:c.FLOAT,buffer:u,size:3,offset:12,stride:28},{type:c.FLOAT,buffer:u,size:1,offset:24,stride:28}]),f=r(c);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var T=new t(c,u,x,f);return T.update(l),T};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(c,l,p,g){this.gl=c,this.buffer=l,this.vao=p,this.shader=g,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var d=t.prototype,a=[0,0,0],i=[0,0,0],s=[0,0];d.isTransparent=function(){return!1},d.drawTransparent=function(c){},d.draw=function(c){var l=this.gl,p=this.vao,g=this.shader;p.bind(),g.bind();var u,x=c.model||o,f=c.view||o,T=c.projection||o;this.axes&&(u=this.axes.lastCubeProps.axis);for(var _=a,k=i,w=0;w<3;++w)u&&u[w]<0?(_[w]=this.bounds[0][w],k[w]=this.bounds[1][w]):(_[w]=this.bounds[1][w],k[w]=this.bounds[0][w]);for(s[0]=l.drawingBufferWidth,s[1]=l.drawingBufferHeight,g.uniforms.model=x,g.uniforms.view=f,g.uniforms.projection=T,g.uniforms.coordinates=[this.position,_,k],g.uniforms.colors=this.colors,g.uniforms.screenShape=s,w=0;w<3;++w)g.uniforms.lineWidth=this.lineWidth[w]*this.pixelRatio,this.enabled[w]&&(p.draw(l.TRIANGLES,6,6*w),this.drawSides[w]&&p.draw(l.TRIANGLES,12,18+12*w));p.unbind()},d.update=function(c){c&&("bounds"in c&&(this.bounds=c.bounds),"position"in c&&(this.position=c.position),"lineWidth"in c&&(this.lineWidth=c.lineWidth),"colors"in c&&(this.colors=c.colors),"enabled"in c&&(this.enabled=c.enabled),"drawSides"in c&&(this.drawSides=c.drawSides))},d.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(v,b,h){var e=v("glslify"),n=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),r=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);h.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},h.pickShader={vertex:o,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(v,b,h){"use strict";var e=v("gl-vec3"),n=v("gl-vec4"),r=["xyz","xzy","yxz","yzx","zxy","zyx"],t=function(c,l){var p,g=c.length;for(p=0;p<g;p++){var u=c[p];if(u===l)return p;if(u>l)return p-1}return p},d=function(c,l,p){return c<l?l:c>p?p:c},a=function(c){var l=1/0;c.sort(function(x,f){return x-f});for(var p=c.length,g=1;g<p;g++){var u=Math.abs(c[g]-c[g-1]);u<l&&(l=u)}return l};b.exports=function(c,l){var p=c.startingPositions,g=c.maxLength||1e3,u=c.tubeSize||1,x=c.absoluteTubeSize,f=c.gridFill||"+x+y+z",T={};-1!==f.indexOf("-x")&&(T.reversedX=!0),-1!==f.indexOf("-y")&&(T.reversedY=!0),-1!==f.indexOf("-z")&&(T.reversedZ=!0),T.filled=r.indexOf(f.replace(/-/g,"").replace(/\+/g,""));var ie,ue,le,de,_=c.getVelocity||function(ie){return function(ue,le,de){var be=le.vectors,_e=le.meshgrid,xe=ue[0],Ee=ue[1],he=ue[2],me=_e[0].length,Se=_e[1].length,Me=_e[2].length,Ie=t(_e[0],xe),Fe=t(_e[1],Ee),Ne=t(_e[2],he),De=Ie+1,$e=Fe+1,Re=Ne+1;if(Ie=d(Ie,0,me-1),De=d(De,0,me-1),Fe=d(Fe,0,Se-1),$e=d($e,0,Se-1),Ne=d(Ne,0,Me-1),Re=d(Re,0,Me-1),Ie<0||Fe<0||Ne<0||De>me-1||$e>Se-1||Re>Me-1)return e.create();var ze,Ue,je,rt,ut,gt,At=_e[0][Ie],it=_e[1][Fe],wt=_e[2][Ne],Gt=(xe-At)/(_e[0][De]-At),Kt=(Ee-it)/(_e[1][$e]-it),cr=(he-wt)/(_e[2][Re]-wt);switch(isFinite(Gt)||(Gt=.5),isFinite(Kt)||(Kt=.5),isFinite(cr)||(cr=.5),de.reversedX&&(Ie=me-1-Ie,De=me-1-De),de.reversedY&&(Fe=Se-1-Fe,$e=Se-1-$e),de.reversedZ&&(Ne=Me-1-Ne,Re=Me-1-Re),de.filled){case 5:ut=Ne,gt=Re,je=Fe*Me,rt=$e*Me,ze=Ie*Me*Se,Ue=De*Me*Se;break;case 4:ut=Ne,gt=Re,ze=Ie*Me,Ue=De*Me,je=Fe*Me*me,rt=$e*Me*me;break;case 3:je=Fe,rt=$e,ut=Ne*Se,gt=Re*Se,ze=Ie*Se*Me,Ue=De*Se*Me;break;case 2:je=Fe,rt=$e,ze=Ie*Se,Ue=De*Se,ut=Ne*Se*me,gt=Re*Se*me;break;case 1:ze=Ie,Ue=De,ut=Ne*me,gt=Re*me,je=Fe*me*Me,rt=$e*me*Me;break;default:ze=Ie,Ue=De,je=Fe*me,rt=$e*me,ut=Ne*me*Se,gt=Re*me*Se}var ar=be[ze+je+ut],hr=be[ze+je+gt],Xt=be[ze+rt+ut],He=be[ze+rt+gt],Je=be[Ue+je+ut],pe=be[Ue+je+gt],we=be[Ue+rt+ut],Be=be[Ue+rt+gt],We=e.create(),Ke=e.create(),Ye=e.create(),ft=e.create();e.lerp(We,ar,Je,Gt),e.lerp(Ke,hr,pe,Gt),e.lerp(Ye,Xt,we,Gt),e.lerp(ft,He,Be,Gt);var ct=e.create(),St=e.create();e.lerp(ct,We,Ye,Kt),e.lerp(St,Ke,ft,Kt);var Ft=e.create();return e.lerp(Ft,ct,St,cr),Ft}(ie,c,T)},k=c.getDivergence||function(ie,ue){var le=e.create(),de=1e-4;e.add(le,ie,[de,0,0]);var be=_(le);e.subtract(be,be,ue),e.scale(be,be,1/de),e.add(le,ie,[0,de,0]);var _e=_(le);e.subtract(_e,_e,ue),e.scale(_e,_e,1/de),e.add(le,ie,[0,0,de]);var xe=_(le);return e.subtract(xe,xe,ue),e.scale(xe,xe,1/de),e.add(le,be,_e),e.add(le,le,xe),le},w=[],C=l[0][0],A=l[0][1],O=l[0][2],P=l[1][0],S=l[1][1],E=l[1][2],z=10*e.distance(l[0],l[1])/g,N=z*z,V=1,X=0,J=p.length;J>1&&(V=function(ie){for(var ue=[],le=[],de=[],be={},_e={},xe={},Ee=ie.length,he=0;he<Ee;he++){var me=ie[he],Se=me[0],Me=me[1],Ie=me[2];be[Se]||(ue.push(Se),be[Se]=!0),_e[Me]||(le.push(Me),_e[Me]=!0),xe[Ie]||(de.push(Ie),xe[Ie]=!0)}var Fe=a(ue),Ne=a(le),De=a(de),$e=Math.min(Fe,Ne,De);return isFinite($e)?$e:1}(p));for(var G=0;G<J;G++){var Z=e.create();e.copy(Z,p[G]);var re=[Z],j=[],B=_(Z),H=Z;j.push(B);var ee=[],U=k(Z,B),$=e.length(U);isFinite($)&&$>X&&(X=$),ee.push($),w.push({points:re,velocities:j,divergences:ee});for(var q=0;q<100*g&&re.length<g&&(ue=void 0,le=void 0,de=void 0,le=(ie=Z)[1],de=ie[2],!((ue=ie[0])<C||ue>P||le<A||le>S||de<O||de>E));){q++;var te=e.clone(B),ne=e.squaredLength(te);if(0===ne)break;ne>N&&e.scale(te,te,z/Math.sqrt(ne)),e.add(te,te,Z),B=_(te),e.squaredDistance(H,te)-N>-1e-4*N&&(re.push(te),H=te,j.push(B),U=k(te,B),$=e.length(U),isFinite($)&&$>X&&(X=$),ee.push($)),Z=te}}var se=function(c,l,p,g){for(var u=0,x=0;x<c.length;x++)for(var f=c[x].velocities,T=0;T<f.length;T++)u=Math.max(u,e.length(f[T]));var _=c.map(function(z){return function(N,V,X,J){for(var G=N.points,Z=N.velocities,re=N.divergences,j=[],B=[],H=[],ee=[],U=[],$=[],q=0,te=0,ne=n.create(),se=n.create(),ie=0;ie<G.length;ie++){var ue=G[ie],le=Z[ie],de=re[ie];0===V&&(de=.05*X),te=e.length(le)/J,ne=n.create(),e.copy(ne,le),ne[3]=de;for(var be=0;be<8;be++)U[be]=[ue[0],ue[1],ue[2],be];if(ee.length>0)for(be=0;be<8;be++){var _e=(be+1)%8;j.push(ee[be],U[be],U[_e],U[_e],ee[_e],ee[be]),H.push(se,ne,ne,ne,se,se),$.push(q,te,te,te,q,q);var xe=j.length;B.push([xe-6,xe-5,xe-4],[xe-3,xe-2,xe-1])}var Ee=ee;ee=U,U=Ee;var he=se;se=ne,ne=he;var me=q;q=te,te=me}return{positions:j,cells:B,vectors:H,vertexIntensity:$}}(z,p,g,u)}),k=[],w=[],C=[],A=[];for(x=0;x<_.length;x++){var O=_[x],P=k.length;for(k=k.concat(O.positions),C=C.concat(O.vectors),A=A.concat(O.vertexIntensity),T=0;T<O.cells.length;T++){var S=O.cells[T],E=[];w.push(E);for(var D=0;D<S.length;D++)E.push(S[D]+P)}}return{positions:k,cells:w,vectors:C,vertexIntensity:A,colormap:l}}(w,c.colormap,X,V);return x?se.tubeScale=x:(0===X&&(X=1),se.tubeScale=.5*u*V/X),se};var i=v("./lib/shaders"),s=v("gl-cone3d").createMesh;b.exports.createTubeMesh=function(c,l){return s(c,l,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(v,b,h){var e=v("gl-shader"),n=v("glslify"),r=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),t=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);h.createShader=function(a){var i=e(a,r,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},h.createPickShader=function(a){var i=e(a,r,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},h.createContourShader=function(a){var i=e(a,t,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},h.createPickContourShader=function(a){var i=e(a,t,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(v,b,h){"use strict";b.exports=function(B){var H=B.gl,ee=f(H),U=_(H),$=T(H),q=k(H),te=n(H),ne=r(H,[{buffer:te,size:4,stride:40,offset:0},{buffer:te,size:3,stride:40,offset:16},{buffer:te,size:3,stride:40,offset:28}]),se=n(H),ie=r(H,[{buffer:se,size:4,stride:20,offset:0},{buffer:se,size:1,stride:20,offset:16}]),ue=n(H),le=r(H,[{buffer:ue,size:2,type:H.FLOAT}]),de=o(H,1,256,H.RGBA,H.UNSIGNED_BYTE);de.minFilter=H.LINEAR,de.magFilter=H.LINEAR;var be=new P(H,[0,0],[[0,0,0],[0,0,0]],ee,U,te,ne,de,$,q,se,ie,ue,le,[0,0,0]),_e={levels:[[],[],[]]};for(var xe in B)_e[xe]=B[xe];return _e.colormap=_e.colormap||"jet",be.update(_e),be};var e=v("bit-twiddle"),n=v("gl-buffer"),r=v("gl-vao"),o=v("gl-texture2d"),t=v("typedarray-pool"),d=v("colormap"),a=v("ndarray-ops"),i=v("ndarray-pack"),s=v("ndarray"),c=v("surface-nets"),l=v("gl-mat4/multiply"),p=v("gl-mat4/invert"),g=v("binary-search-bounds"),u=v("ndarray-gradient"),x=v("./lib/shaders"),f=x.createShader,T=x.createContourShader,_=x.createPickShader,k=x.createPickContourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],A=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function O(B,H,ee,U,$){this.position=B,this.index=H,this.uv=ee,this.level=U,this.dataCoordinate=$}function P(B,H,ee,U,$,q,te,ne,se,ie,ue,le,de,be,_e){this.gl=B,this.shape=H,this.bounds=ee,this.objectOffset=_e,this.intensityBounds=[],this._shader=U,this._pickShader=$,this._coordinateBuffer=q,this._vao=te,this._colorMap=ne,this._contourShader=se,this._contourPickShader=ie,this._contourBuffer=ue,this._contourVAO=le,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new O([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=de,this._dynamicVAO=be,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[s(t.mallocFloat(1024),[0,0]),s(t.mallocFloat(1024),[0,0]),s(t.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var B=0;B<3;++B){var H=A[B],ee=(B+2)%3;H[(B+1)%3+0]=1,H[ee+3]=1,H[B+6]=1}}();var S=P.prototype;S.genColormap=function(B,H){var ee=!1,U=i([d({colormap:B,nshades:256,format:"rgba"}).map(function($,q){var te=H?function(ne,se){if(!se||!se.length)return 1;for(var ie=0;ie<se.length;++ie){if(se.length<2)return 1;if(se[ie][0]===ne)return se[ie][1];if(se[ie][0]>ne&&ie>0){var ue=(se[ie][0]-ne)/(se[ie][0]-se[ie-1][0]);return se[ie][1]*(1-ue)+ue*se[ie-1][1]}}return 1}(q/255,H):$[3];return te<1&&(ee=!0),[$[0],$[1],$[2],255*te]})]);return a.divseq(U,255),this.hasAlphaScale=ee,U},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(B){this.pickId=B};var E=[0,0,0],D={showSurface:!1,showContour:!1,projections:[w.slice(),w.slice(),w.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function z(B,H){var ee,U,$,q=H.axes&&H.axes.lastCubeProps.axis||E,te=H.showSurface,ne=H.showContour;for(ee=0;ee<3;++ee)for(te=te||H.surfaceProject[ee],U=0;U<3;++U)ne=ne||H.contourProject[ee][U];for(ee=0;ee<3;++ee){var se=D.projections[ee];for(U=0;U<16;++U)se[U]=0;for(U=0;U<4;++U)se[5*U]=1;se[5*ee]=0,se[12+ee]=H.axesBounds[+(q[ee]>0)][ee],l(se,B.model,se);var ie=D.clipBounds[ee];for($=0;$<2;++$)for(U=0;U<3;++U)ie[$][U]=B.clipBounds[$][U];ie[0][ee]=-1e8,ie[1][ee]=1e8}return D.showSurface=te,D.showContour=ne,D}var N={model:w,view:w,projection:w,inverseModel:w.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},V=w.slice(),X=[1,0,0,0,1,0,0,0,1];function J(B,H){B=B||{};var ee=this.gl;ee.disable(ee.CULL_FACE),this._colorMap.bind(0);var U=N;U.model=B.model||w,U.view=B.view||w,U.projection=B.projection||w,U.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],U.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],U.objectOffset=this.objectOffset,U.contourColor=this.contourColor[0],U.inverseModel=p(U.inverseModel,U.model);for(var $=0;$<2;++$)for(var q=U.clipBounds[$],te=0;te<3;++te)q[te]=Math.min(Math.max(this.clipBounds[$][te],-1e8),1e8);U.kambient=this.ambientLight,U.kdiffuse=this.diffuseLight,U.kspecular=this.specularLight,U.roughness=this.roughness,U.fresnel=this.fresnel,U.opacity=this.opacity,U.height=0,U.permutation=X,U.vertexColor=this.vertexColor;var ne=V;for(l(ne,U.view,U.model),l(ne,U.projection,ne),p(ne,ne),$=0;$<3;++$)U.eyePosition[$]=ne[12+$]/ne[15];var se=ne[15];for($=0;$<3;++$)se+=this.lightPosition[$]*ne[4*$+3];for($=0;$<3;++$){var ie=ne[12+$];for(te=0;te<3;++te)ie+=ne[4*te+$]*this.lightPosition[te];U.lightPosition[$]=ie/se}var ue=z(U,this);if(ue.showSurface){for(this._shader.bind(),this._shader.uniforms=U,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ee.TRIANGLES,this._vertexCount),$=0;$<3;++$)this.surfaceProject[$]&&this.vertexCount&&(this._shader.uniforms.model=ue.projections[$],this._shader.uniforms.clipBounds=ue.clipBounds[$],this._vao.draw(ee.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ue.showContour){var le=this._contourShader;U.kambient=1,U.kdiffuse=0,U.kspecular=0,U.opacity=1,le.bind(),le.uniforms=U;var de=this._contourVAO;for(de.bind(),$=0;$<3;++$)for(le.uniforms.permutation=A[$],ee.lineWidth(this.contourWidth[$]*this.pixelRatio),te=0;te<this.contourLevels[$].length;++te)te===this.highlightLevel[$]?(le.uniforms.contourColor=this.highlightColor[$],le.uniforms.contourTint=this.highlightTint[$]):0!==te&&te-1!==this.highlightLevel[$]||(le.uniforms.contourColor=this.contourColor[$],le.uniforms.contourTint=this.contourTint[$]),this._contourCounts[$][te]&&(le.uniforms.height=this.contourLevels[$][te],de.draw(ee.LINES,this._contourCounts[$][te],this._contourOffsets[$][te]));for($=0;$<3;++$)for(le.uniforms.model=ue.projections[$],le.uniforms.clipBounds=ue.clipBounds[$],te=0;te<3;++te)if(this.contourProject[$][te]){le.uniforms.permutation=A[te],ee.lineWidth(this.contourWidth[te]*this.pixelRatio);for(var be=0;be<this.contourLevels[te].length;++be)be===this.highlightLevel[te]?(le.uniforms.contourColor=this.highlightColor[te],le.uniforms.contourTint=this.highlightTint[te]):0!==be&&be-1!==this.highlightLevel[te]||(le.uniforms.contourColor=this.contourColor[te],le.uniforms.contourTint=this.contourTint[te]),this._contourCounts[te][be]&&(le.uniforms.height=this.contourLevels[te][be],de.draw(ee.LINES,this._contourCounts[te][be],this._contourOffsets[te][be]))}for(de.unbind(),(de=this._dynamicVAO).bind(),$=0;$<3;++$)if(0!==this._dynamicCounts[$])for(le.uniforms.model=U.model,le.uniforms.clipBounds=U.clipBounds,le.uniforms.permutation=A[$],ee.lineWidth(this.dynamicWidth[$]*this.pixelRatio),le.uniforms.contourColor=this.dynamicColor[$],le.uniforms.contourTint=this.dynamicTint[$],le.uniforms.height=this.dynamicLevel[$],de.draw(ee.LINES,this._dynamicCounts[$],this._dynamicOffsets[$]),te=0;te<3;++te)this.contourProject[te][$]&&(le.uniforms.model=ue.projections[te],le.uniforms.clipBounds=ue.clipBounds[te],de.draw(ee.LINES,this._dynamicCounts[$],this._dynamicOffsets[$]));de.unbind()}}S.draw=function(B){return J.call(this,B,!1)},S.drawTransparent=function(B){return J.call(this,B,!0)};var G={model:w,view:w,projection:w,inverseModel:w,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Z(B,H){return Array.isArray(B)?[H(B[0]),H(B[1]),H(B[2])]:[H(B),H(B),H(B)]}function re(B){return Array.isArray(B)?3===B.length?[B[0],B[1],B[2],1]:[B[0],B[1],B[2],B[3]]:[0,0,0,1]}function j(B){if(Array.isArray(B)){if(Array.isArray(B))return[re(B[0]),re(B[1]),re(B[2])];var H=re(B);return[H.slice(),H.slice(),H.slice()]}}S.drawPick=function(B){B=B||{};var H=this.gl;H.disable(H.CULL_FACE);var ee=G;ee.model=B.model||w,ee.view=B.view||w,ee.projection=B.projection||w,ee.shape=this._field[2].shape,ee.pickId=this.pickId/255,ee.lowerBound=this.bounds[0],ee.upperBound=this.bounds[1],ee.objectOffset=this.objectOffset,ee.permutation=X;for(var U=0;U<2;++U)for(var $=ee.clipBounds[U],q=0;q<3;++q)$[q]=Math.min(Math.max(this.clipBounds[U][q],-1e8),1e8);var te=z(ee,this);if(te.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ee,this._vao.bind(),this._vao.draw(H.TRIANGLES,this._vertexCount),U=0;U<3;++U)this.surfaceProject[U]&&(this._pickShader.uniforms.model=te.projections[U],this._pickShader.uniforms.clipBounds=te.clipBounds[U],this._vao.draw(H.TRIANGLES,this._vertexCount));this._vao.unbind()}if(te.showContour){var ne=this._contourPickShader;ne.bind(),ne.uniforms=ee;var se=this._contourVAO;for(se.bind(),q=0;q<3;++q)for(H.lineWidth(this.contourWidth[q]*this.pixelRatio),ne.uniforms.permutation=A[q],U=0;U<this.contourLevels[q].length;++U)this._contourCounts[q][U]&&(ne.uniforms.height=this.contourLevels[q][U],se.draw(H.LINES,this._contourCounts[q][U],this._contourOffsets[q][U]));for(U=0;U<3;++U)for(ne.uniforms.model=te.projections[U],ne.uniforms.clipBounds=te.clipBounds[U],q=0;q<3;++q)if(this.contourProject[U][q]){ne.uniforms.permutation=A[q],H.lineWidth(this.contourWidth[q]*this.pixelRatio);for(var ie=0;ie<this.contourLevels[q].length;++ie)this._contourCounts[q][ie]&&(ne.uniforms.height=this.contourLevels[q][ie],se.draw(H.LINES,this._contourCounts[q][ie],this._contourOffsets[q][ie]))}se.unbind()}},S.pick=function(B){if(!B||B.id!==this.pickId)return null;var H=this._field[2].shape,ee=this._pickResult,U=H[0]*(B.value[0]+(B.value[2]>>4)/16)/255,$=Math.floor(U),q=U-$,te=H[1]*(B.value[1]+(15&B.value[2])/16)/255,ne=Math.floor(te),se=te-ne;$+=1,ne+=1;var ie=ee.position;ie[0]=ie[1]=ie[2]=0;for(var ue=0;ue<2;++ue)for(var le=ue?q:1-q,de=0;de<2;++de)for(var be=$+ue,_e=ne+de,xe=le*(de?se:1-se),Ee=0;Ee<3;++Ee)ie[Ee]+=this._field[Ee].get(be,_e)*xe;for(var he=this._pickResult.level,me=0;me<3;++me)if(he[me]=g.le(this.contourLevels[me],ie[me]),he[me]<0)this.contourLevels[me].length>0&&(he[me]=0);else if(he[me]<this.contourLevels[me].length-1){var Me=this.contourLevels[me][he[me]+1];Math.abs(this.contourLevels[me][he[me]]-ie[me])>Math.abs(Me-ie[me])&&(he[me]+=1)}for(ee.index[0]=q<.5?$:$+1,ee.index[1]=se<.5?ne:ne+1,ee.uv[0]=U/H[0],ee.uv[1]=te/H[1],Ee=0;Ee<3;++Ee)ee.dataCoordinate[Ee]=this._field[Ee].get(ee.index[0],ee.index[1]);return ee},S.padField=function(B,H){var ee=H.shape.slice(),U=B.shape.slice();a.assign(B.lo(1,1).hi(ee[0],ee[1]),H),a.assign(B.lo(1).hi(ee[0],1),H.hi(ee[0],1)),a.assign(B.lo(1,U[1]-1).hi(ee[0],1),H.lo(0,ee[1]-1).hi(ee[0],1)),a.assign(B.lo(0,1).hi(1,ee[1]),H.hi(1)),a.assign(B.lo(U[0]-1,1).hi(1,ee[1]),H.lo(ee[0]-1)),B.set(0,0,H.get(0,0)),B.set(0,U[1]-1,H.get(0,ee[1]-1)),B.set(U[0]-1,0,H.get(ee[0]-1,0)),B.set(U[0]-1,U[1]-1,H.get(ee[0]-1,ee[1]-1))},S.update=function(B){this.objectOffset=(B=B||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in B&&(this.contourWidth=Z(B.contourWidth,Number)),"showContour"in B&&(this.showContour=Z(B.showContour,Boolean)),"showSurface"in B&&(this.showSurface=!!B.showSurface),"contourTint"in B&&(this.contourTint=Z(B.contourTint,Boolean)),"contourColor"in B&&(this.contourColor=j(B.contourColor)),"contourProject"in B&&(this.contourProject=Z(B.contourProject,function($t){return Z($t,Boolean)})),"surfaceProject"in B&&(this.surfaceProject=B.surfaceProject),"dynamicColor"in B&&(this.dynamicColor=j(B.dynamicColor)),"dynamicTint"in B&&(this.dynamicTint=Z(B.dynamicTint,Number)),"dynamicWidth"in B&&(this.dynamicWidth=Z(B.dynamicWidth,Number)),"opacity"in B&&(this.opacity=B.opacity),"opacityscale"in B&&(this.opacityscale=B.opacityscale),"colorBounds"in B&&(this.colorBounds=B.colorBounds),"vertexColor"in B&&(this.vertexColor=B.vertexColor?1:0),"colormap"in B&&this._colorMap.setPixels(this.genColormap(B.colormap,this.opacityscale));var H=B.field||B.coords&&B.coords[2]||null,ee=!1;if(H||(H=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in B||"coords"in B){var U=(H.shape[0]+2)*(H.shape[1]+2);U>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(e.nextPow2(U))),this._field[2]=s(this._field[2].data,[H.shape[0]+2,H.shape[1]+2]),this.padField(this._field[2],H),this.shape=H.shape.slice();for(var $=this.shape,q=0;q<2;++q)this._field[2].size>this._field[q].data.length&&(t.freeFloat(this._field[q].data),this._field[q].data=t.mallocFloat(this._field[2].size)),this._field[q]=s(this._field[q].data,[$[0]+2,$[1]+2]);if(B.coords){var te=B.coords;if(!Array.isArray(te)||3!==te.length)throw new Error("gl-surface: invalid coordinates for x/y");for(q=0;q<2;++q){var ne=te[q];for(de=0;de<2;++de)if(ne.shape[de]!==$[de])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[q],ne)}}else if(B.ticks){var se=B.ticks;if(!Array.isArray(se)||2!==se.length)throw new Error("gl-surface: invalid ticks");for(q=0;q<2;++q){var ie=se[q];if((Array.isArray(ie)||ie.length)&&(ie=s(ie)),ie.shape[0]!==$[q])throw new Error("gl-surface: invalid tick length");var ue=s(ie.data,$);ue.stride[q]=ie.stride[0],ue.stride[1^q]=0,this.padField(this._field[q],ue)}}else{for(q=0;q<2;++q){var le=[0,0];le[q]=1,this._field[q]=s(this._field[q].data,[$[0]+2,$[1]+2],le,0)}this._field[0].set(0,0,0);for(var de=0;de<$[0];++de)this._field[0].set(de+1,0,de);for(this._field[0].set($[0]+1,0,$[0]-1),this._field[1].set(0,0,0),de=0;de<$[1];++de)this._field[1].set(0,de+1,de);this._field[1].set(0,$[1]+1,$[1]-1)}var be=this._field,_e=s(t.mallocFloat(3*be[2].size*2),[3,$[0]+2,$[1]+2,2]);for(q=0;q<3;++q)u(_e.pick(q),be[q],"mirror");var xe=s(t.mallocFloat(3*be[2].size),[$[0]+2,$[1]+2,3]);for(q=0;q<$[0]+2;++q)for(de=0;de<$[1]+2;++de){var Ee=_e.get(0,q,de,0),he=_e.get(0,q,de,1),me=_e.get(1,q,de,0),Se=_e.get(1,q,de,1),Me=_e.get(2,q,de,0),Ie=_e.get(2,q,de,1),Fe=me*Ie-Se*Me,Ne=Me*he-Ie*Ee,De=Ee*Se-he*me,$e=Math.sqrt(Fe*Fe+Ne*Ne+De*De);$e<1e-8?($e=Math.max(Math.abs(Fe),Math.abs(Ne),Math.abs(De)))<1e-8?(De=1,Ne=Fe=0,$e=1):$e=1/$e:$e=1/Math.sqrt($e),xe.set(q,de,0,Fe*$e),xe.set(q,de,1,Ne*$e),xe.set(q,de,2,De*$e)}t.free(_e.data);var Re=[1/0,1/0,1/0],ze=[-1/0,-1/0,-1/0],Ue=1/0,je=-1/0,ut=t.mallocFloat(e.nextPow2(($[0]-1)*($[1]-1)*6*10)),gt=0,At=0;for(q=0;q<$[0]-1;++q)e:for(de=0;de<$[1]-1;++de){for(var _t=0;_t<2;++_t)for(var it=0;it<2;++it)for(var et=0;et<3;++et){var wt=this._field[et].get(1+q+_t,1+de+it);if(isNaN(wt)||!isFinite(wt))continue e}for(et=0;et<6;++et){var Gt=q+C[et][0],Kt=de+C[et][1],cr=this._field[0].get(Gt+1,Kt+1),ar=this._field[1].get(Gt+1,Kt+1);wt=this._field[2].get(Gt+1,Kt+1),Fe=xe.get(Gt+1,Kt+1,0),Ne=xe.get(Gt+1,Kt+1,1),De=xe.get(Gt+1,Kt+1,2),B.intensity&&(hr=B.intensity.get(Gt,Kt));var hr=B.intensity?B.intensity.get(Gt,Kt):wt+this.objectOffset[2];ut[gt++]=Gt,ut[gt++]=Kt,ut[gt++]=cr,ut[gt++]=ar,ut[gt++]=wt,ut[gt++]=0,ut[gt++]=hr,ut[gt++]=Fe,ut[gt++]=Ne,ut[gt++]=De,Re[0]=Math.min(Re[0],cr+this.objectOffset[0]),Re[1]=Math.min(Re[1],ar+this.objectOffset[1]),Re[2]=Math.min(Re[2],wt+this.objectOffset[2]),Ue=Math.min(Ue,hr),ze[0]=Math.max(ze[0],cr+this.objectOffset[0]),ze[1]=Math.max(ze[1],ar+this.objectOffset[1]),ze[2]=Math.max(ze[2],wt+this.objectOffset[2]),je=Math.max(je,hr),At+=1}}for(B.intensityBounds&&(Ue=+B.intensityBounds[0],je=+B.intensityBounds[1]),q=6;q<gt;q+=10)ut[q]=(ut[q]-Ue)/(je-Ue);this._vertexCount=At,this._coordinateBuffer.update(ut.subarray(0,gt)),t.freeFloat(ut),t.free(xe.data),this.bounds=[Re,ze],this.intensity=B.intensity||this._field[2],this.intensityBounds[0]===Ue&&this.intensityBounds[1]===je||(ee=!0),this.intensityBounds=[Ue,je]}if("levels"in B){var Xt=B.levels;for(Xt=Array.isArray(Xt[0])?Xt.slice():[[],[],Xt],q=0;q<3;++q)Xt[q]=Xt[q].slice(),Xt[q].sort(function($t,Wt){return $t-Wt});for(q=0;q<3;++q)for(de=0;de<Xt[q].length;++de)Xt[q][de]-=this.objectOffset[q];e:for(q=0;q<3;++q){if(Xt[q].length!==this.contourLevels[q].length){ee=!0;break}for(de=0;de<Xt[q].length;++de)if(Xt[q][de]!==this.contourLevels[q][de]){ee=!0;break e}}this.contourLevels=Xt}if(ee){be=this._field,$=this.shape;for(var He=[],Je=0;Je<3;++Je){var pe=this.contourLevels[Je],we=[],Be=[],We=[0,0,0];for(q=0;q<pe.length;++q){var Ke=c(this._field[Je],pe[q]);we.push(He.length/5|0),At=0;e:for(de=0;de<Ke.cells.length;++de){var Ye=Ke.cells[de];for(et=0;et<2;++et){var ft=Ke.positions[Ye[et]],ct=ft[0],St=0|Math.floor(ct),Ft=ct-St,at=ft[1],mt=0|Math.floor(at),qt=at-mt,Et=!1;t:for(var Dt=0;Dt<3;++Dt){We[Dt]=0;var Le=(Je+Dt+1)%3;for(_t=0;_t<2;++_t){var Xe=_t?Ft:1-Ft;for(Gt=0|Math.min(Math.max(St+_t,0),$[0]),it=0;it<2;++it){var ot=it?qt:1-qt;if(Kt=0|Math.min(Math.max(mt+it,0),$[1]),wt=Dt<2?this._field[Le].get(Gt,Kt):(this.intensity.get(Gt,Kt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(wt)||isNaN(wt)){Et=!0;break t}We[Dt]+=Xe*ot*wt}}}if(Et){if(et>0){for(var Lt=0;Lt<5;++Lt)He.pop();At-=1}continue e}He.push(We[0],We[1],ft[0],ft[1],We[2]),At+=1}}Be.push(At)}this._contourOffsets[Je]=we,this._contourCounts[Je]=Be}var Ut=t.mallocFloat(He.length);for(q=0;q<He.length;++q)Ut[q]=He[q];this._contourBuffer.update(Ut),t.freeFloat(Ut)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var B=0;B<3;++B)t.freeFloat(this._field[B].data)},S.highlight=function(B){var H,ee;if(!B)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(H=0;H<3;++H)this.highlightLevel[H]=this.enableHighlight[H]?B.level[H]:-1;for(ee=this.snapToData?B.dataCoordinate:B.position,H=0;H<3;++H)ee[H]-=this.objectOffset[H];if(this.enableDynamic[0]&&ee[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ee[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ee[2]!==this.dynamicLevel[2]){for(var U=0,$=this.shape,q=t.mallocFloat(12*$[0]*$[1]),te=0;te<3;++te)if(this.enableDynamic[te]){this.dynamicLevel[te]=ee[te];var ue=this._field[(te+1)%3],le=this._field[(te+2)%3],de=c(this._field[te],ee[te]),be=de.cells,_e=de.positions;for(this._dynamicOffsets[te]=U,H=0;H<be.length;++H)for(var xe=be[H],Ee=0;Ee<2;++Ee){var he=_e[xe[Ee]],me=+he[0],Se=0|me,Me=0|Math.min(Se+1,$[0]),Ie=me-Se,Fe=1-Ie,Ne=+he[1],De=0|Ne,$e=0|Math.min(De+1,$[1]),Re=Ne-De,ze=1-Re,Ue=Fe*ze,je=Fe*Re,rt=Ie*ze,ut=Ie*Re,gt=Ue*ue.get(Se,De)+je*ue.get(Se,$e)+rt*ue.get(Me,De)+ut*ue.get(Me,$e),At=Ue*le.get(Se,De)+je*le.get(Se,$e)+rt*le.get(Me,De)+ut*le.get(Me,$e);if(isNaN(gt)||isNaN(At)){Ee&&(U-=1);break}q[2*U+0]=gt,q[2*U+1]=At,U+=1}this._dynamicCounts[te]=U-this._dynamicOffsets[te]}else this.dynamicLevel[te]=NaN,this._dynamicCounts[te]=0;this._dynamicBuffer.update(q.subarray(0,2*U)),t.freeFloat(q)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(v,b,h){"use strict";var e=v("ndarray"),n=v("ndarray-ops"),r=v("typedarray-pool");b.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(o||a(_),"number"==typeof arguments[1])return x(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return x(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var k=arguments[1],w=i(k)?k:k.raw;if(w)return f(_,w,0|k.width,0|k.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(k.shape&&k.data&&k.stride)return T(_,k)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,t=null,d=null;function a(_){o=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],t=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],d=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function i(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var s=function(_,k){n.muls(_,k,255)};function c(_,k,w){var C=_.gl,A=C.getParameter(C.MAX_TEXTURE_SIZE);if(k<0||k>A||w<0||w>A)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[k,w],_.bind(),C.texImage2D(C.TEXTURE_2D,0,_.format,k,w,0,_.format,_.type,null),_._mipLevels=[0],_}function l(_,k,w,C,A,O){this.gl=_,this.handle=k,this.format=A,this.type=O,this._shape=[w,C],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var P=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return P._wrapS},set:function(D){return P.wrapS=D}},{get:function(){return P._wrapT},set:function(D){return P.wrapT=D}}]),this._wrapVector=S;var E=[this._shape[0],this._shape[1]];Object.defineProperties(E,[{get:function(){return P._shape[0]},set:function(D){return P.width=D}},{get:function(){return P._shape[1]},set:function(D){return P.height=D}}]),this._shapeVector=E}var p=l.prototype;function g(_,k){return 3===_.length?1===k[2]&&k[1]===_[0]*_[2]&&k[0]===_[2]:1===k[0]&&k[1]===_[0]}function u(_){var k=_.createTexture();return _.bindTexture(_.TEXTURE_2D,k),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),k}function x(_,k,w,C,A){var O=_.getParameter(_.MAX_TEXTURE_SIZE);if(k<0||k>O||w<0||w>O)throw new Error("gl-texture2d: Invalid texture shape");if(A===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var P=u(_);return _.texImage2D(_.TEXTURE_2D,0,C,k,w,0,C,A,null),new l(_,P,k,w,C,A)}function f(_,k,w,C,A,O){var P=u(_);return _.texImage2D(_.TEXTURE_2D,0,A,A,O,k),new l(_,P,w,C,A,O)}function T(_,k){var w=k.dtype,C=k.shape.slice(),A=_.getParameter(_.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>A||C[1]<0||C[1]>A)throw new Error("gl-texture2d: Invalid texture size");var O=g(C,k.stride.slice()),P=0;"float32"===w?P=_.FLOAT:"float64"===w?(P=_.FLOAT,O=!1,w="float32"):"uint8"===w?P=_.UNSIGNED_BYTE:(P=_.UNSIGNED_BYTE,O=!1,w="uint8");var S,E,D=0;if(2===C.length)D=_.LUMINANCE,k=e(k.data,C=[C[0],C[1],1],[k.stride[0],k.stride[1],1],k.offset);else{if(3!==C.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===C[2])D=_.ALPHA;else if(2===C[2])D=_.LUMINANCE_ALPHA;else if(3===C[2])D=_.RGB;else{if(4!==C[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");D=_.RGBA}}P!==_.FLOAT||_.getExtension("OES_texture_float")||(P=_.UNSIGNED_BYTE,O=!1);var z=k.size;if(O)S=0===k.offset&&k.data.length===z?k.data:k.data.subarray(k.offset,k.offset+z);else{var N=[C[2],C[2]*C[0],1];E=r.malloc(z,w);var V=e(E,C,N,0);"float32"!==w&&"float64"!==w||P!==_.UNSIGNED_BYTE?n.assign(V,k):s(V,k),S=E.subarray(0,z)}var X=u(_);return _.texImage2D(_.TEXTURE_2D,0,D,C[0],C[1],0,D,P,S),O||r.free(E),new l(_,X,C[0],C[1],D,P)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var k=this.gl;if(this.type===k.FLOAT&&o.indexOf(_)>=0&&(k.getExtension("OES_texture_float_linear")||(_=k.NEAREST)),t.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var k=this.gl;if(this.type===k.FLOAT&&o.indexOf(_)>=0&&(k.getExtension("OES_texture_float_linear")||(_=k.NEAREST)),t.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var k=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),k!==this._anisoSamples){var w=this.gl.getExtension("EXT_texture_filter_anisotropic");w&&this.gl.texParameterf(this.gl.TEXTURE_2D,w.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),d.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),d.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),2!==_.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var k=0;k<2;++k)if(d.indexOf(_[k])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var w=this.gl;return this.bind(),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,this._wrapS),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(2!==_.length)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return c(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return c(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return c(this,this._shape[0],_|=0),_}}}),p.bind=function(_){var k=this.gl;return void 0!==_&&k.activeTexture(k.TEXTURE0+(0|_)),k.bindTexture(k.TEXTURE_2D,this.handle),void 0!==_?0|_:k.getParameter(k.ACTIVE_TEXTURE)-k.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),k=0;_>0;++k,_>>>=1)this._mipLevels.indexOf(k)<0&&this._mipLevels.push(k)},p.setPixels=function(_,k,w,C){var A=this.gl;this.bind(),Array.isArray(k)?(C=w,w=0|k[1],k=0|k[0]):(k=k||0,w=w||0),C=C||0;var O=i(_)?_:_.raw;if(O)this._mipLevels.indexOf(C)<0?(A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(C)):A.texSubImage2D(A.TEXTURE_2D,C,k,w,this.format,this.type,O);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||k+_.shape[1]>this._shape[1]>>>C||w+_.shape[0]>this._shape[0]>>>C||k<0||w<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(P,S,E,D,z,N,V,X){var J=X.dtype,G=X.shape.slice();if(G.length<2||G.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var Z=0,re=0,j=g(G,X.stride.slice());if("float32"===J?Z=P.FLOAT:"float64"===J?(Z=P.FLOAT,j=!1,J="float32"):"uint8"===J?Z=P.UNSIGNED_BYTE:(Z=P.UNSIGNED_BYTE,j=!1,J="uint8"),2===G.length)re=P.LUMINANCE,X=e(X.data,G=[G[0],G[1],1],[X.stride[0],X.stride[1],1],X.offset);else{if(3!==G.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===G[2])re=P.ALPHA;else if(2===G[2])re=P.LUMINANCE_ALPHA;else if(3===G[2])re=P.RGB;else{if(4!==G[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");re=P.RGBA}}if(re!==P.LUMINANCE&&re!==P.ALPHA||z!==P.LUMINANCE&&z!==P.ALPHA||(re=z),re!==z)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var B=X.size,H=V.indexOf(D)<0;if(H&&V.push(D),Z===N&&j)0===X.offset&&X.data.length===B?H?P.texImage2D(P.TEXTURE_2D,D,z,G[0],G[1],0,z,N,X.data):P.texSubImage2D(P.TEXTURE_2D,D,S,E,G[0],G[1],z,N,X.data):H?P.texImage2D(P.TEXTURE_2D,D,z,G[0],G[1],0,z,N,X.data.subarray(X.offset,X.offset+B)):P.texSubImage2D(P.TEXTURE_2D,D,S,E,G[0],G[1],z,N,X.data.subarray(X.offset,X.offset+B));else{var ee;ee=N===P.FLOAT?r.mallocFloat32(B):r.mallocUint8(B);var U=e(ee,G,[G[2],G[2]*G[0],1]);Z===P.FLOAT&&N===P.UNSIGNED_BYTE?s(U,X):n.assign(U,X),H?P.texImage2D(P.TEXTURE_2D,D,z,G[0],G[1],0,z,N,ee.subarray(0,B)):P.texSubImage2D(P.TEXTURE_2D,D,S,E,G[0],G[1],z,N,ee.subarray(0,B)),N===P.FLOAT?r.freeFloat32(ee):r.freeUint8(ee)}}(A,k,w,C,this.format,this.type,this._mipLevels,_)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(v,b,h){"use strict";b.exports=function(e,n,r){n?n.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var o=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(r){if(r.length>o)throw new Error("gl-vao: Too many vertex attributes");for(var t=0;t<r.length;++t){var d=r[t];if(d.buffer){var i=d.size||4,s=d.type||e.FLOAT,c=!!d.normalized,l=d.stride||0,p=d.offset||0;d.buffer.bind(),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,i,s,c,l,p)}else{if("number"==typeof d)e.vertexAttrib1f(t,d);else if(1===d.length)e.vertexAttrib1f(t,d[0]);else if(2===d.length)e.vertexAttrib2f(t,d[0],d[1]);else if(3===d.length)e.vertexAttrib3f(t,d[0],d[1],d[2]);else{if(4!==d.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(t,d[0],d[1],d[2],d[3])}e.disableVertexAttribArray(t)}}for(;t<o;++t)e.disableVertexAttribArray(t)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),t=0;t<o;++t)e.disableVertexAttribArray(t)}},{}],148:[function(v,b,h){"use strict";var e=v("./do-bind.js");function n(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}n.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},n.prototype.update=function(r,o,t){this._elements=o,this._attributes=r,this._elementsType=t||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(r,o,t){t=t||0;var d=this.gl;this._elements?d.drawElements(r,o,this._elementsType,t):d.drawArrays(r,t,o)},b.exports=function(r){return new n(r)}},{"./do-bind.js":147}],149:[function(v,b,h){"use strict";var e=v("./do-bind.js");function n(o,t,d,a,i,s){this.location=o,this.dimension=t,this.a=d,this.b=a,this.c=i,this.d=s}function r(o,t,d){this.gl=o,this._ext=t,this.handle=d,this._attribs=[],this._useElements=!1,this._elementsType=o.UNSIGNED_SHORT}n.prototype.bind=function(o){switch(this.dimension){case 1:o.vertexAttrib1f(this.location,this.a);break;case 2:o.vertexAttrib2f(this.location,this.a,this.b);break;case 3:o.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:o.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var o=0;o<this._attribs.length;++o)this._attribs[o].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(o,t,d){if(this.bind(),e(this.gl,t,o),this.unbind(),this._attribs.length=0,o)for(var a=0;a<o.length;++a){var i=o[a];"number"==typeof i?this._attribs.push(new n(a,1,i)):Array.isArray(i)&&this._attribs.push(new n(a,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!t,this._elementsType=d||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(o,t,d){d=d||0;var a=this.gl;this._useElements?a.drawElements(o,t,this._elementsType,d):a.drawArrays(o,d,t)},b.exports=function(o,t){return new r(o,t,t.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(v,b,h){"use strict";var e=v("./lib/vao-native.js"),n=v("./lib/vao-emulated.js");function r(o){this.bindVertexArrayOES=o.bindVertexArray.bind(o),this.createVertexArrayOES=o.createVertexArray.bind(o),this.deleteVertexArrayOES=o.deleteVertexArray.bind(o)}b.exports=function(o,t,d,a){var i,s=o.createVertexArray?new r(o):o.getExtension("OES_vertex_array_object");return(i=s?e(o,s):n(o)).update(t,d,a),i}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}},{}],152:[function(v,b,h){b.exports=function(o,t){var d=e(o[0],o[1],o[2]),a=e(t[0],t[1],t[2]);n(d,d),n(a,a);var i=r(d,a);return i>1?0:Math.acos(i)};var e=v("./fromValues"),n=v("./normalize"),r=v("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(v,b,h){b.exports=function(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e}},{}],154:[function(v,b,h){b.exports=function(e){var n=new Float32Array(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}},{}],155:[function(v,b,h){b.exports=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}},{}],156:[function(v,b,h){b.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(v,b,h){b.exports=function(e,n,r){var o=n[0],t=n[1],d=n[2],a=r[0],i=r[1],s=r[2];return e[0]=t*s-d*i,e[1]=d*a-o*s,e[2]=o*i-t*a,e}},{}],158:[function(v,b,h){b.exports=v("./distance")},{"./distance":159}],159:[function(v,b,h){b.exports=function(e,n){var r=n[0]-e[0],o=n[1]-e[1],t=n[2]-e[2];return Math.sqrt(r*r+o*o+t*t)}},{}],160:[function(v,b,h){b.exports=v("./divide")},{"./divide":161}],161:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]/r[0],e[1]=n[1]/r[1],e[2]=n[2]/r[2],e}},{}],162:[function(v,b,h){b.exports=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}},{}],163:[function(v,b,h){b.exports=1e-6},{}],164:[function(v,b,h){b.exports=function(n,r){var o=n[0],t=n[1],d=n[2],a=r[0],i=r[1],s=r[2];return Math.abs(o-a)<=e*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(t-i)<=e*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(d-s)<=e*Math.max(1,Math.abs(d),Math.abs(s))};var e=v("./epsilon")},{"./epsilon":163}],165:[function(v,b,h){b.exports=function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}},{}],166:[function(v,b,h){b.exports=function(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e}},{}],167:[function(v,b,h){b.exports=function(n,r,o,t,d,a){var i,s;for(r||(r=3),o||(o=0),s=t?Math.min(t*r+o,n.length):n.length,i=o;i<s;i+=r)e[0]=n[i],e[1]=n[i+1],e[2]=n[i+2],d(e,e,a),n[i]=e[0],n[i+1]=e[1],n[i+2]=e[2];return n};var e=v("./create")()},{"./create":156}],168:[function(v,b,h){b.exports=function(e,n,r){var o=new Float32Array(3);return o[0]=e,o[1]=n,o[2]=r,o}},{}],169:[function(v,b,h){b.exports={EPSILON:v("./epsilon"),create:v("./create"),clone:v("./clone"),angle:v("./angle"),fromValues:v("./fromValues"),copy:v("./copy"),set:v("./set"),equals:v("./equals"),exactEquals:v("./exactEquals"),add:v("./add"),subtract:v("./subtract"),sub:v("./sub"),multiply:v("./multiply"),mul:v("./mul"),divide:v("./divide"),div:v("./div"),min:v("./min"),max:v("./max"),floor:v("./floor"),ceil:v("./ceil"),round:v("./round"),scale:v("./scale"),scaleAndAdd:v("./scaleAndAdd"),distance:v("./distance"),dist:v("./dist"),squaredDistance:v("./squaredDistance"),sqrDist:v("./sqrDist"),length:v("./length"),len:v("./len"),squaredLength:v("./squaredLength"),sqrLen:v("./sqrLen"),negate:v("./negate"),inverse:v("./inverse"),normalize:v("./normalize"),dot:v("./dot"),cross:v("./cross"),lerp:v("./lerp"),random:v("./random"),transformMat4:v("./transformMat4"),transformMat3:v("./transformMat3"),transformQuat:v("./transformQuat"),rotateX:v("./rotateX"),rotateY:v("./rotateY"),rotateZ:v("./rotateZ"),forEach:v("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(v,b,h){b.exports=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e}},{}],171:[function(v,b,h){b.exports=v("./length")},{"./length":172}],172:[function(v,b,h){b.exports=function(e){var n=e[0],r=e[1],o=e[2];return Math.sqrt(n*n+r*r+o*o)}},{}],173:[function(v,b,h){b.exports=function(e,n,r,o){var t=n[0],d=n[1],a=n[2];return e[0]=t+o*(r[0]-t),e[1]=d+o*(r[1]-d),e[2]=a+o*(r[2]-a),e}},{}],174:[function(v,b,h){b.exports=function(e,n,r){return e[0]=Math.max(n[0],r[0]),e[1]=Math.max(n[1],r[1]),e[2]=Math.max(n[2],r[2]),e}},{}],175:[function(v,b,h){b.exports=function(e,n,r){return e[0]=Math.min(n[0],r[0]),e[1]=Math.min(n[1],r[1]),e[2]=Math.min(n[2],r[2]),e}},{}],176:[function(v,b,h){b.exports=v("./multiply")},{"./multiply":177}],177:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]*r[0],e[1]=n[1]*r[1],e[2]=n[2]*r[2],e}},{}],178:[function(v,b,h){b.exports=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e}},{}],179:[function(v,b,h){b.exports=function(e,n){var r=n[0],o=n[1],t=n[2],d=r*r+o*o+t*t;return d>0&&(d=1/Math.sqrt(d),e[0]=n[0]*d,e[1]=n[1]*d,e[2]=n[2]*d),e}},{}],180:[function(v,b,h){b.exports=function(e,n){n=n||1;var r=2*Math.random()*Math.PI,o=2*Math.random()-1,t=Math.sqrt(1-o*o)*n;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e[2]=o*n,e}},{}],181:[function(v,b,h){b.exports=function(e,n,r,o){var t=r[1],d=r[2],a=n[1]-t,i=n[2]-d,s=Math.sin(o),c=Math.cos(o);return e[0]=n[0],e[1]=t+a*c-i*s,e[2]=d+a*s+i*c,e}},{}],182:[function(v,b,h){b.exports=function(e,n,r,o){var t=r[0],d=r[2],a=n[0]-t,i=n[2]-d,s=Math.sin(o),c=Math.cos(o);return e[0]=t+i*s+a*c,e[1]=n[1],e[2]=d+i*c-a*s,e}},{}],183:[function(v,b,h){b.exports=function(e,n,r,o){var t=r[0],d=r[1],a=n[0]-t,i=n[1]-d,s=Math.sin(o),c=Math.cos(o);return e[0]=t+a*c-i*s,e[1]=d+a*s+i*c,e[2]=n[2],e}},{}],184:[function(v,b,h){b.exports=function(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e}},{}],185:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e}},{}],186:[function(v,b,h){b.exports=function(e,n,r,o){return e[0]=n[0]+r[0]*o,e[1]=n[1]+r[1]*o,e[2]=n[2]+r[2]*o,e}},{}],187:[function(v,b,h){b.exports=function(e,n,r,o){return e[0]=n,e[1]=r,e[2]=o,e}},{}],188:[function(v,b,h){b.exports=v("./squaredDistance")},{"./squaredDistance":190}],189:[function(v,b,h){b.exports=v("./squaredLength")},{"./squaredLength":191}],190:[function(v,b,h){b.exports=function(e,n){var r=n[0]-e[0],o=n[1]-e[1],t=n[2]-e[2];return r*r+o*o+t*t}},{}],191:[function(v,b,h){b.exports=function(e){var n=e[0],r=e[1],o=e[2];return n*n+r*r+o*o}},{}],192:[function(v,b,h){b.exports=v("./subtract")},{"./subtract":193}],193:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],e}},{}],194:[function(v,b,h){b.exports=function(e,n,r){var o=n[0],t=n[1],d=n[2];return e[0]=o*r[0]+t*r[3]+d*r[6],e[1]=o*r[1]+t*r[4]+d*r[7],e[2]=o*r[2]+t*r[5]+d*r[8],e}},{}],195:[function(v,b,h){b.exports=function(e,n,r){var o=n[0],t=n[1],d=n[2],a=r[3]*o+r[7]*t+r[11]*d+r[15];return e[0]=(r[0]*o+r[4]*t+r[8]*d+r[12])/(a=a||1),e[1]=(r[1]*o+r[5]*t+r[9]*d+r[13])/a,e[2]=(r[2]*o+r[6]*t+r[10]*d+r[14])/a,e}},{}],196:[function(v,b,h){b.exports=function(e,n,r){var o=n[0],t=n[1],d=n[2],a=r[0],i=r[1],s=r[2],c=r[3],l=c*o+i*d-s*t,p=c*t+s*o-a*d,g=c*d+a*t-i*o,u=-a*o-i*t-s*d;return e[0]=l*c+u*-a+p*-s-g*-i,e[1]=p*c+u*-i+g*-a-l*-s,e[2]=g*c+u*-s+l*-i-p*-a,e}},{}],197:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e[3]=n[3]+r[3],e}},{}],198:[function(v,b,h){b.exports=function(e){var n=new Float32Array(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}},{}],199:[function(v,b,h){b.exports=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}},{}],200:[function(v,b,h){b.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(v,b,h){b.exports=function(e,n){var r=n[0]-e[0],o=n[1]-e[1],t=n[2]-e[2],d=n[3]-e[3];return Math.sqrt(r*r+o*o+t*t+d*d)}},{}],202:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]/r[0],e[1]=n[1]/r[1],e[2]=n[2]/r[2],e[3]=n[3]/r[3],e}},{}],203:[function(v,b,h){b.exports=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}},{}],204:[function(v,b,h){b.exports=function(e,n,r,o){var t=new Float32Array(4);return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}},{}],205:[function(v,b,h){b.exports={create:v("./create"),clone:v("./clone"),fromValues:v("./fromValues"),copy:v("./copy"),set:v("./set"),add:v("./add"),subtract:v("./subtract"),multiply:v("./multiply"),divide:v("./divide"),min:v("./min"),max:v("./max"),scale:v("./scale"),scaleAndAdd:v("./scaleAndAdd"),distance:v("./distance"),squaredDistance:v("./squaredDistance"),length:v("./length"),squaredLength:v("./squaredLength"),negate:v("./negate"),inverse:v("./inverse"),normalize:v("./normalize"),dot:v("./dot"),lerp:v("./lerp"),random:v("./random"),transformMat4:v("./transformMat4"),transformQuat:v("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(v,b,h){b.exports=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e}},{}],207:[function(v,b,h){b.exports=function(e){var n=e[0],r=e[1],o=e[2],t=e[3];return Math.sqrt(n*n+r*r+o*o+t*t)}},{}],208:[function(v,b,h){b.exports=function(e,n,r,o){var t=n[0],d=n[1],a=n[2],i=n[3];return e[0]=t+o*(r[0]-t),e[1]=d+o*(r[1]-d),e[2]=a+o*(r[2]-a),e[3]=i+o*(r[3]-i),e}},{}],209:[function(v,b,h){b.exports=function(e,n,r){return e[0]=Math.max(n[0],r[0]),e[1]=Math.max(n[1],r[1]),e[2]=Math.max(n[2],r[2]),e[3]=Math.max(n[3],r[3]),e}},{}],210:[function(v,b,h){b.exports=function(e,n,r){return e[0]=Math.min(n[0],r[0]),e[1]=Math.min(n[1],r[1]),e[2]=Math.min(n[2],r[2]),e[3]=Math.min(n[3],r[3]),e}},{}],211:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]*r[0],e[1]=n[1]*r[1],e[2]=n[2]*r[2],e[3]=n[3]*r[3],e}},{}],212:[function(v,b,h){b.exports=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e}},{}],213:[function(v,b,h){b.exports=function(e,n){var r=n[0],o=n[1],t=n[2],d=n[3],a=r*r+o*o+t*t+d*d;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=o*a,e[2]=t*a,e[3]=d*a),e}},{}],214:[function(v,b,h){var e=v("./normalize"),n=v("./scale");b.exports=function(r,o){return o=o||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),e(r,r),n(r,r,o),r}},{"./normalize":213,"./scale":215}],215:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e}},{}],216:[function(v,b,h){b.exports=function(e,n,r,o){return e[0]=n[0]+r[0]*o,e[1]=n[1]+r[1]*o,e[2]=n[2]+r[2]*o,e[3]=n[3]+r[3]*o,e}},{}],217:[function(v,b,h){b.exports=function(e,n,r,o,t){return e[0]=n,e[1]=r,e[2]=o,e[3]=t,e}},{}],218:[function(v,b,h){b.exports=function(e,n){var r=n[0]-e[0],o=n[1]-e[1],t=n[2]-e[2],d=n[3]-e[3];return r*r+o*o+t*t+d*d}},{}],219:[function(v,b,h){b.exports=function(e){var n=e[0],r=e[1],o=e[2],t=e[3];return n*n+r*r+o*o+t*t}},{}],220:[function(v,b,h){b.exports=function(e,n,r){return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],e[3]=n[3]-r[3],e}},{}],221:[function(v,b,h){b.exports=function(e,n,r){var o=n[0],t=n[1],d=n[2],a=n[3];return e[0]=r[0]*o+r[4]*t+r[8]*d+r[12]*a,e[1]=r[1]*o+r[5]*t+r[9]*d+r[13]*a,e[2]=r[2]*o+r[6]*t+r[10]*d+r[14]*a,e[3]=r[3]*o+r[7]*t+r[11]*d+r[15]*a,e}},{}],222:[function(v,b,h){b.exports=function(e,n,r){var o=n[0],t=n[1],d=n[2],a=r[0],i=r[1],s=r[2],c=r[3],l=c*o+i*d-s*t,p=c*t+s*o-a*d,g=c*d+a*t-i*o,u=-a*o-i*t-s*d;return e[0]=l*c+u*-a+p*-s-g*-i,e[1]=p*c+u*-i+g*-a-l*-s,e[2]=g*c+u*-s+l*-i-p*-a,e[3]=n[3],e}},{}],223:[function(v,b,h){var e=v("glsl-tokenizer"),n=v("atob-lite");b.exports=function(r){for(var o=Array.isArray(r)?r:e(r),t=0;t<o.length;t++){var d=o[t];if("preprocessor"===d.type){var a=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(a&&a[2]){var s=a[2];return(a[1]?n(s):s).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(v,b,h){b.exports=function(a){var i,s,c,l=0,p=0,g=999,u=[],x=[],f=1,T=0,_=0,k=!1,w=!1,C="",A=r,O=e;"300 es"===(a=a||{}).version&&(A=t,O=o);var P={},S={};for(l=0;l<A.length;l++)P[A[l]]=!0;for(l=0;l<O.length;l++)S[O[l]]=!0;return function(B){return x=[],null!==B?function(H){var ee;for(l=0,H.toString&&(H=H.toString()),C+=H.replace(/\r\n/g,"\n"),c=C.length;i=C[l],l<c;){switch(ee=l,g){case 0:l="/"===i&&"*"===s?(u.push(i),E(u.join("")),g=999,l+1):(u.push(i),s=i,l+1);break;case 1:case 2:l="\r"!==i&&"\n"!==i||"\\"===s?(u.push(i),s=i,l+1):(E(u.join("")),g=999,l);break;case 3:l=X();break;case 4:l="."===i||/[eE]/.test(i)?(u.push(i),g=5,s=i,l+1):"x"===i&&1===u.length&&"0"===u[0]?(g=11,u.push(i),s=i,l+1):/[^\d]/.test(i)?(E(u.join("")),g=999,l):(u.push(i),s=i,l+1);break;case 11:l=/[^a-fA-F0-9]/.test(i)?(E(u.join("")),g=999,l):(u.push(i),s=i,l+1);break;case 5:"f"===i&&(u.push(i),s=i,l+=1),l=/[eE]/.test(i)?(u.push(i),s=i,l+1):("-"!==i&&"+"!==i||!/[eE]/.test(s))&&/[^\d]/.test(i)?(E(u.join("")),g=999,l):(u.push(i),s=i,l+1);break;case 9999:l=j();break;case 9:l=/[^\s]/g.test(i)?(E(u.join("")),g=999,l):(u.push(i),s=i,l+1);break;case 999:u=u.length?[]:u,l="/"===s&&"*"===i?(_=p+l-1,g=0,s=i,l+1):"/"===s&&"/"===i?(_=p+l-1,g=1,s=i,l+1):"#"===i?(g=2,_=p+l,l):/\s/.test(i)?(g=9,_=p+l,l):(k=/\d/.test(i),w=/[^\w_]/.test(i),_=p+l,g=k?4:w?3:9999,l)}ee!==l&&("\n"===C[ee]?(T=0,++f):++T)}return p+=l,C=C.slice(l),x}(B):(u.length&&E(u.join("")),g=10,E("(eof)"),x)};function E(B){B.length&&x.push({type:d[g],data:B,position:_,line:f,column:T})}function X(){if("."===s&&/\d/.test(i))return g=5,l;if("/"===s&&"*"===i)return g=0,l;if("/"===s&&"/"===i)return g=1,l;if("."===i&&u.length){for(;J(u););return g=5,l}if(";"===i||")"===i||"("===i){if(u.length)for(;J(u););return E(i),g=999,l+1}var B=2===u.length&&"="!==i;if(/[\w_\d\s]/.test(i)||B){for(;J(u););return g=999,l}return u.push(i),s=i,l+1}function J(B){for(var H,ee,U=0;;){if(H=n.indexOf(B.slice(0,B.length+U).join("")),ee=n[H],-1===H){if(U--+B.length>0)continue;ee=B.slice(0,1).join("")}return E(ee),_+=ee.length,(u=u.slice(ee.length)).length}}function j(){if(/[^\d\w_]/.test(i)){var B=u.join("");return g=S[B]?8:P[B]?7:6,E(u.join("")),g=999,l}return u.push(i),s=i,l+1}};var e=v("./lib/literals"),n=v("./lib/operators"),r=v("./lib/builtins"),o=v("./lib/literals-300es"),t=v("./lib/builtins-300es"),d=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(v,b,h){var e=v("./builtins");e=e.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),b.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(v,b,h){b.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(v,b,h){var e=v("./literals");b.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(v,b,h){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(v,b,h){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(v,b,h){var e=v("./index");b.exports=function(n,r){var o=e(r),t=[];return(t=t.concat(o(n))).concat(o(null))}},{"./index":224}],231:[function(v,b,h){b.exports=function(e){"string"==typeof e&&(e=[e]);for(var n=[].slice.call(arguments,1),r=[],o=0;o<e.length-1;o++)r.push(e[o],n[o]||"");return r.push(e[o]),r.join("")}},{}],232:[function(v,b,h){"use strict";var e=v("is-browser");b.exports=e&&function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{n=!1}return n}()},{"is-browser":236}],233:[function(v,b,h){"use strict";b.exports=function(s,c){var l=s.length;if(0===l)throw new Error("Must have at least d+1 points");var p=s[0].length;if(l<=p)throw new Error("Must input at least d+1 points");var g=s.slice(0,p+1),u=e.apply(void 0,g);if(0===u)throw new Error("Input not in general position");for(var x=new Array(p+1),f=0;f<=p;++f)x[f]=f;u<0&&(x[0]=1,x[1]=0);var T=new r(x,new Array(p+1),!1),_=T.adjacent,k=new Array(p+2);for(f=0;f<=p;++f){for(var w=x.slice(),C=0;C<=p;++C)C===f&&(w[C]=-1);var A=w[0];w[0]=w[1],w[1]=A;var O=new r(w,new Array(p+1),!0);_[f]=O,k[f]=O}for(k[p+1]=T,f=0;f<=p;++f){w=_[f].vertices;var P=_[f].adjacent;for(C=0;C<=p;++C){var S=w[C];if(S<0)P[C]=T;else for(var E=0;E<=p;++E)_[E].vertices.indexOf(S)<0&&(P[C]=_[E])}}var D=new a(p,g,k),z=!!c;for(f=p+1;f<l;++f)D.insert(s[f],z);return D.boundary()};var e=v("robust-orientation"),n=v("simplicial-complex").compareCells;function r(s,c,l){this.vertices=s,this.adjacent=c,this.boundary=l,this.lastVisited=-1}function o(s,c,l){this.vertices=s,this.cell=c,this.index=l}function t(s,c){return n(s.vertices,c.vertices)}r.prototype.flip=function(){var s=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=s;var c=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=c};var d=[];function a(s,c,l){this.dimension=s,this.vertices=c,this.simplices=l,this.interior=l.filter(function(x){return!x.boundary}),this.tuple=new Array(s+1);for(var p=0;p<=s;++p)this.tuple[p]=this.vertices[p];var g,x,u=d[s];u||(u=d[s]=((g=e[s+1])||(g=e),x=g,function(){return x.apply(this,this.tuple)})),this.orient=u}var i=a.prototype;i.handleBoundaryDegeneracy=function(s,c){var l=this.dimension,p=this.vertices.length-1,g=this.tuple,u=this.vertices,x=[s];for(s.lastVisited=-p;x.length>0;)for(var f=(s=x.pop()).adjacent,T=0;T<=l;++T){var _=f[T];if(_.boundary&&!(_.lastVisited<=-p)){for(var k=_.vertices,w=0;w<=l;++w){var C=k[w];g[w]=C<0?c:u[C]}var A=this.orient();if(A>0)return _;_.lastVisited=-p,0===A&&x.push(_)}}return null},i.walk=function(s,c){var l=this.vertices.length-1,p=this.dimension,g=this.vertices,u=this.tuple,x=c?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[x];e:for(;!f.boundary;){for(var T=f.vertices,_=f.adjacent,k=0;k<=p;++k)u[k]=g[T[k]];for(f.lastVisited=l,k=0;k<=p;++k){var w=_[k];if(!(w.lastVisited>=l)){var C=u[k];u[k]=s;var A=this.orient();if(u[k]=C,A<0){f=w;continue e}w.lastVisited=w.boundary?-l:l}}return}return f},i.addPeaks=function(s,c){var l=this.vertices.length-1,p=this.dimension,g=this.vertices,u=this.tuple,x=this.interior,f=this.simplices,T=[c];c.lastVisited=l,c.vertices[c.vertices.indexOf(-1)]=l,c.boundary=!1,x.push(c);for(var _=[];T.length>0;){var k=(c=T.pop()).vertices,w=c.adjacent,C=k.indexOf(l);if(!(C<0))for(var A=0;A<=p;++A)if(A!==C){var O=w[A];if(O.boundary&&!(O.lastVisited>=l)){var P=O.vertices;if(O.lastVisited!==-l){for(var S=0,E=0;E<=p;++E)P[E]<0?(S=E,u[E]=s):u[E]=g[P[E]];if(this.orient()>0){P[S]=l,O.boundary=!1,x.push(O),T.push(O),O.lastVisited=l;continue}O.lastVisited=-l}var D=O.adjacent,z=k.slice(),N=w.slice(),V=new r(z,N,!0);f.push(V);var X=D.indexOf(c);if(!(X<0))for(D[X]=V,N[C]=O,z[A]=-1,N[A]=c,w[A]=V,V.flip(),E=0;E<=p;++E){var J=z[E];if(!(J<0||J===l)){for(var G=new Array(p-1),Z=0,re=0;re<=p;++re){var j=z[re];j<0||re===E||(G[Z++]=j)}_.push(new o(G,V,E))}}}}}for(_.sort(t),A=0;A+1<_.length;A+=2){var B=_[A],H=_[A+1];B.index<0||H.index<0||(B.cell.adjacent[B.index]=H.cell,H.cell.adjacent[H.index]=B.cell)}},i.insert=function(s,c){var l=this.vertices;l.push(s);var p=this.walk(s,c);if(p){for(var g=this.dimension,u=this.tuple,x=0;x<=g;++x){var f=p.vertices[x];u[x]=f<0?s:l[f]}var T=this.orient(u);T<0||(0!==T||(p=this.handleBoundaryDegeneracy(p,s)))&&this.addPeaks(s,p)}},i.boundary=function(){for(var s=this.dimension,c=[],l=this.simplices,p=l.length,g=0;g<p;++g){var u=l[g];if(u.boundary){for(var x=new Array(s),f=u.vertices,T=0,_=0,k=0;k<=s;++k)f[k]>=0?x[T++]=f[k]:_=1&k;if(_===(1&s)){var w=x[0];x[0]=x[1],x[1]=w}c.push(x)}}return c}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(v,b,h){"use strict";var e=v("binary-search-bounds");function n(T,_,k,w,C){this.mid=T,this.left=_,this.right=k,this.leftPoints=w,this.rightPoints=C,this.count=(_?_.count:0)+(k?k.count:0)+w.length}b.exports=function(T){return new x(T&&0!==T.length?u(T):null)};var r=n.prototype;function o(T,_){T.mid=_.mid,T.left=_.left,T.right=_.right,T.leftPoints=_.leftPoints,T.rightPoints=_.rightPoints,T.count=_.count}function t(T,_){var k=u(_);T.mid=k.mid,T.left=k.left,T.right=k.right,T.leftPoints=k.leftPoints,T.rightPoints=k.rightPoints,T.count=k.count}function d(T,_){var k=T.intervals([]);k.push(_),t(T,k)}function a(T,_){var k=T.intervals([]),w=k.indexOf(_);return w<0?0:(k.splice(w,1),t(T,k),1)}function i(T,_,k){for(var w=0;w<T.length&&T[w][0]<=_;++w){var C=k(T[w]);if(C)return C}}function s(T,_,k){for(var w=T.length-1;w>=0&&T[w][1]>=_;--w){var C=k(T[w]);if(C)return C}}function c(T,_){for(var k=0;k<T.length;++k){var w=_(T[k]);if(w)return w}}function l(T,_){return T-_}function p(T,_){return T[0]-_[0]||T[1]-_[1]}function g(T,_){return T[1]-_[1]||T[0]-_[0]}function u(T){if(0===T.length)return null;for(var _=[],k=0;k<T.length;++k)_.push(T[k][0],T[k][1]);_.sort(l);var w=_[_.length>>1],C=[],A=[],O=[];for(k=0;k<T.length;++k){var P=T[k];P[1]<w?C.push(P):w<P[0]?A.push(P):O.push(P)}var S=O,E=O.slice();return S.sort(p),E.sort(g),new n(w,u(C),u(A),S,E)}function x(T){this.root=T}r.intervals=function(T){return T.push.apply(T,this.leftPoints),this.left&&this.left.intervals(T),this.right&&this.right.intervals(T),T},r.insert=function(T){var _=this.count-this.leftPoints.length;if(this.count+=1,T[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?d(this,T):this.left.insert(T):this.left=u([T]);else if(T[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?d(this,T):this.right.insert(T):this.right=u([T]);else{var k=e.ge(this.leftPoints,T,p),w=e.ge(this.rightPoints,T,g);this.leftPoints.splice(k,0,T),this.rightPoints.splice(w,0,T)}},r.remove=function(T){var _=this.count-this.leftPoints;if(T[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?a(this,T):2===(A=this.left.remove(T))?(this.left=null,this.count-=1,1):(1===A&&(this.count-=1),A):0;if(T[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?a(this,T):2===(A=this.right.remove(T))?(this.right=null,this.count-=1,1):(1===A&&(this.count-=1),A):0;if(1===this.count)return this.leftPoints[0]===T?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===T){if(this.left&&this.right){for(var k=this,w=this.left;w.right;)k=w,w=w.right;if(k===this)w.right=this.right;else{var C=this.left,A=this.right;k.count-=w.count,k.right=w.left,w.left=C,w.right=A}o(this,w),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else o(this,this.left?this.left:this.right);return 1}for(C=e.ge(this.leftPoints,T,p);C<this.leftPoints.length&&this.leftPoints[C][0]===T[0];++C)if(this.leftPoints[C]===T)for(this.count-=1,this.leftPoints.splice(C,1),A=e.ge(this.rightPoints,T,g);A<this.rightPoints.length&&this.rightPoints[A][1]===T[1];++A)if(this.rightPoints[A]===T)return this.rightPoints.splice(A,1),1;return 0},r.queryPoint=function(T,_){return T<this.mid?this.left&&(k=this.left.queryPoint(T,_))?k:i(this.leftPoints,T,_):T>this.mid?this.right&&(k=this.right.queryPoint(T,_))?k:s(this.rightPoints,T,_):c(this.leftPoints,_);var k},r.queryInterval=function(T,_,k){var w;return T<this.mid&&this.left&&(w=this.left.queryInterval(T,_,k))||_>this.mid&&this.right&&(w=this.right.queryInterval(T,_,k))?w:_<this.mid?i(this.leftPoints,_,k):T>this.mid?s(this.rightPoints,T,k):c(this.leftPoints,k)};var f=x.prototype;f.insert=function(T){this.root?this.root.insert(T):this.root=new n(T[0],null,null,[T],[T])},f.remove=function(T){if(this.root){var _=this.root.remove(T);return 2===_&&(this.root=null),0!==_}return!1},f.queryPoint=function(T,_){if(this.root)return this.root.queryPoint(T,_)},f.queryInterval=function(T,_,k){if(T<=_&&this.root)return this.root.queryInterval(T,_,k)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(v,b,h){"use strict";b.exports=function(e){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return n}},{}],236:[function(v,b,h){b.exports=!0},{}],237:[function(v,b,h){function e(n){return!!n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}b.exports=function(n){return null!=n&&(e(n)||"function"==typeof(r=n).readFloatLE&&"function"==typeof r.slice&&e(r.slice(0,0))||!!n._isBuffer);var r}},{}],238:[function(v,b,h){"use strict";b.exports=r,b.exports.isMobile=r,b.exports.default=r;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function r(o){o||(o={});var t=o.ua;if(t||typeof navigator>"u"||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var d=o.tablet?n.test(t):e.test(t);return!d&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(d=!0),d}},{}],239:[function(v,b,h){"use strict";b.exports=function(e){for(var n,r=e.length,o=0;o<r;o++)if(((n=e.charCodeAt(o))<9||n>13)&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&(n<8192||n>8205)&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&8288!==n&&12288!==n&&65279!==n)return!1;return!0}},{}],240:[function(v,b,h){b.exports=function(e,n,r){return e*(1-r)+n*r}},{}],241:[function(v,b,h){var e=v("./normalize"),n=v("gl-mat4/create"),r=v("gl-mat4/clone"),o=v("gl-mat4/determinant"),t=v("gl-mat4/invert"),d=v("gl-mat4/transpose"),a={length:v("gl-vec3/length"),normalize:v("gl-vec3/normalize"),dot:v("gl-vec3/dot"),cross:v("gl-vec3/cross")},i=n(),s=n(),c=[0,0,0,0],l=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function g(u,x,f,T,_){u[0]=x[0]*T+f[0]*_,u[1]=x[1]*T+f[1]*_,u[2]=x[2]*T+f[2]*_}b.exports=function(u,x,f,T,_,k){if(x||(x=[0,0,0]),f||(f=[0,0,0]),T||(T=[0,0,0]),_||(_=[0,0,0,1]),k||(k=[0,0,0,1]),!e(i,u)||(r(s,i),s[3]=0,s[7]=0,s[11]=0,s[15]=1,Math.abs(o(s)<1e-8)))return!1;var w,C,A,O,P,S,E,re,j,D=i[3],z=i[7],N=i[11],V=i[12],X=i[13],J=i[14],G=i[15];if(0!==D||0!==z||0!==N){if(c[0]=D,c[1]=z,c[2]=N,c[3]=G,!t(s,s))return!1;d(s,s),O=(C=c)[0],(w=_)[0]=(A=s)[0]*O+A[4]*(P=C[1])+A[8]*(S=C[2])+A[12]*(E=C[3]),w[1]=A[1]*O+A[5]*P+A[9]*S+A[13]*E,w[2]=A[2]*O+A[6]*P+A[10]*S+A[14]*E,w[3]=A[3]*O+A[7]*P+A[11]*S+A[15]*E}else _[0]=_[1]=_[2]=0,_[3]=1;if(x[0]=V,x[1]=X,x[2]=J,(re=l)[0][0]=(j=i)[0],re[0][1]=j[1],re[0][2]=j[2],re[1][0]=j[4],re[1][1]=j[5],re[1][2]=j[6],re[2][0]=j[8],re[2][1]=j[9],re[2][2]=j[10],f[0]=a.length(l[0]),a.normalize(l[0],l[0]),T[0]=a.dot(l[0],l[1]),g(l[1],l[1],l[0],1,-T[0]),f[1]=a.length(l[1]),a.normalize(l[1],l[1]),T[0]/=f[1],T[1]=a.dot(l[0],l[2]),g(l[2],l[2],l[0],1,-T[1]),T[2]=a.dot(l[1],l[2]),g(l[2],l[2],l[1],1,-T[2]),f[2]=a.length(l[2]),a.normalize(l[2],l[2]),T[1]/=f[2],T[2]/=f[2],a.cross(p,l[1],l[2]),a.dot(l[0],p)<0)for(var Z=0;Z<3;Z++)f[Z]*=-1,l[Z][0]*=-1,l[Z][1]*=-1,l[Z][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+l[0][0]-l[1][1]-l[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-l[0][0]+l[1][1]-l[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-l[0][0]-l[1][1]+l[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+l[0][0]+l[1][1]+l[2][2],0)),l[2][1]>l[1][2]&&(k[0]=-k[0]),l[0][2]>l[2][0]&&(k[1]=-k[1]),l[1][0]>l[0][1]&&(k[2]=-k[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(v,b,h){b.exports=function(e,n){var r=n[15];if(0===r)return!1;for(var o=1/r,t=0;t<16;t++)e[t]=n[t]*o;return!0}},{}],243:[function(v,b,h){var e=v("gl-vec3/lerp"),n=v("mat4-recompose"),r=v("mat4-decompose"),o=v("gl-mat4/determinant"),t=v("quat-slerp"),d=s(),a=s(),i=s();function s(){return{translate:c(),scale:c(1),skew:c(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function c(l){return[l||0,l||0,l||0]}b.exports=function(l,p,g,u){if(0===o(p)||0===o(g))return!1;var x=r(p,d.translate,d.scale,d.skew,d.perspective,d.quaternion),f=r(g,a.translate,a.scale,a.skew,a.perspective,a.quaternion);return!(!x||!f||(e(i.translate,d.translate,a.translate,u),e(i.skew,d.skew,a.skew,u),e(i.scale,d.scale,a.scale,u),e(i.perspective,d.perspective,a.perspective,u),t(i.quaternion,d.quaternion,a.quaternion,u),n(l,i.translate,i.scale,i.skew,i.perspective,i.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(v,b,h){var e={identity:v("gl-mat4/identity"),translate:v("gl-mat4/translate"),multiply:v("gl-mat4/multiply"),create:v("gl-mat4/create"),scale:v("gl-mat4/scale"),fromRotationTranslation:v("gl-mat4/fromRotationTranslation")},n=(e.create(),e.create());b.exports=function(r,o,t,d,a,i){return e.identity(r),e.fromRotationTranslation(r,i,o),r[3]=a[0],r[7]=a[1],r[11]=a[2],r[15]=a[3],e.identity(n),0!==d[2]&&(n[9]=d[2],e.multiply(r,r,n)),0!==d[1]&&(n[9]=0,n[8]=d[1],e.multiply(r,r,n)),0!==d[0]&&(n[8]=0,n[4]=d[0],e.multiply(r,r,n)),e.scale(r,r,t),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(v,b,h){"use strict";var e=v("binary-search-bounds"),n=v("mat4-interpolate"),r=v("gl-mat4/invert"),o=v("gl-mat4/rotateX"),t=v("gl-mat4/rotateY"),d=v("gl-mat4/rotateZ"),a=v("gl-mat4/lookAt"),i=v("gl-mat4/translate"),s=(v("gl-mat4/scale"),v("gl-vec3/normalize")),c=[0,0,0];function l(u){this._components=u.slice(),this._time=[0],this.prevMatrix=u.slice(),this.nextMatrix=u.slice(),this.computedMatrix=u.slice(),this.computedInverse=u.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}b.exports=function(u){return new l((u=u||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var p=l.prototype;p.recalcMatrix=function(u){var x=this._time,f=e.le(x,u),T=this.computedMatrix;if(!(f<0)){var _=this._components;if(f===x.length-1)for(var k=16*f,w=0;w<16;++w)T[w]=_[k++];else{var C=x[f+1]-x[f],A=(k=16*f,this.prevMatrix),O=!0;for(w=0;w<16;++w)A[w]=_[k++];var P=this.nextMatrix;for(w=0;w<16;++w)P[w]=_[k++],O=O&&A[w]===P[w];if(C<1e-6||O)for(w=0;w<16;++w)T[w]=A[w];else n(T,A,P,(u-x[f])/C)}var S=this.computedUp;S[0]=T[1],S[1]=T[5],S[2]=T[9],s(S,S);var E=this.computedInverse;r(E,T);var D=this.computedEye,z=E[15];D[0]=E[12]/z,D[1]=E[13]/z,D[2]=E[14]/z;var N=this.computedCenter,V=Math.exp(this.computedRadius[0]);for(w=0;w<3;++w)N[w]=D[w]-T[2+4*w]*V}},p.idle=function(u){if(!(u<this.lastT())){for(var x=this._components,f=x.length-16,T=0;T<16;++T)x.push(x[f++]);this._time.push(u)}},p.flush=function(u){var x=e.gt(this._time,u)-2;x<0||(this._time.splice(0,x),this._components.splice(0,16*x))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(u,x,f,T){this.recalcMatrix(u),this.setMatrix(u,a(this.computedMatrix,x=x||this.computedEye,f=f||c,T=T||this.computedUp));for(var _=0,k=0;k<3;++k)_+=Math.pow(f[k]-x[k],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},p.rotate=function(u,x,f,T){this.recalcMatrix(u);var _=this.computedInverse;x&&t(_,_,x),f&&o(_,_,f),T&&d(_,_,T),this.setMatrix(u,r(this.computedMatrix,_))};var g=[0,0,0];p.pan=function(u,x,f,T){g[0]=-(x||0),g[1]=-(f||0),g[2]=-(T||0),this.recalcMatrix(u);var _=this.computedInverse;i(_,_,g),this.setMatrix(u,r(_,_))},p.translate=function(u,x,f,T){g[0]=x||0,g[1]=f||0,g[2]=T||0,this.recalcMatrix(u);var _=this.computedMatrix;i(_,_,g),this.setMatrix(u,_)},p.setMatrix=function(u,x){if(!(u<this.lastT())){this._time.push(u);for(var f=0;f<16;++f)this._components.push(x[f])}},p.setDistance=function(u,x){this.computedRadius[0]=x},p.setDistanceLimits=function(u,x){var f=this._limits;f[0]=u,f[1]=x},p.getDistanceLimits=function(u){var x=this._limits;return u?(u[0]=x[0],u[1]=x[1],u):x}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(v,b,h){"use strict";b.exports=function(n){var r=n.length;if(r<3){for(var o=new Array(r),t=0;t<r;++t)o[t]=t;return 2===r&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:o}var d=new Array(r);for(t=0;t<r;++t)d[t]=t;d.sort(function(x,f){return n[x][0]-n[f][0]||n[x][1]-n[f][1]});var a=[d[0],d[1]],i=[d[0],d[1]];for(t=2;t<r;++t){for(var s=d[t],c=n[s],l=a.length;l>1&&e(n[a[l-2]],n[a[l-1]],c)<=0;)l-=1,a.pop();for(a.push(s),l=i.length;l>1&&e(n[i[l-2]],n[i[l-1]],c)>=0;)l-=1,i.pop();i.push(s)}o=new Array(i.length+a.length-2);for(var p=0,g=(t=0,a.length);t<g;++t)o[p++]=a[t];for(var u=i.length-2;u>0;--u)o[p++]=i[u];return o};var e=v("robust-orientation")[3]},{"robust-orientation":284}],247:[function(v,b,h){"use strict";b.exports=function(n,r){r||(r=n,n=window);var o=0,t=0,d=0,a={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function s(k){var w=!1;return"altKey"in k&&(w=w||k.altKey!==a.alt,a.alt=!!k.altKey),"shiftKey"in k&&(w=w||k.shiftKey!==a.shift,a.shift=!!k.shiftKey),"ctrlKey"in k&&(w=w||k.ctrlKey!==a.control,a.control=!!k.ctrlKey),"metaKey"in k&&(w=w||k.metaKey!==a.meta,a.meta=!!k.metaKey),w}function c(k,w){var C=e.x(w),A=e.y(w);"buttons"in w&&(k=0|w.buttons),(k!==o||C!==t||A!==d||s(w))&&(o=0|k,t=C||0,d=A||0,r&&r(o,t,d,a))}function l(k){c(0,k)}function p(){(o||t||d||a.shift||a.alt||a.meta||a.control)&&(t=d=0,o=0,a.shift=a.alt=a.control=a.meta=!1,r&&r(0,0,0,a))}function g(k){s(k)&&r&&r(o,t,d,a)}function u(k){0===e.buttons(k)?c(0,k):c(o,k)}function x(k){c(o|e.buttons(k),k)}function f(k){c(o&~e.buttons(k),k)}function T(){i||(i=!0,n.addEventListener("mousemove",u),n.addEventListener("mousedown",x),n.addEventListener("mouseup",f),n.addEventListener("mouseleave",l),n.addEventListener("mouseenter",l),n.addEventListener("mouseout",l),n.addEventListener("mouseover",l),n.addEventListener("blur",p),n.addEventListener("keyup",g),n.addEventListener("keydown",g),n.addEventListener("keypress",g),n!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}T();var _={element:n};return Object.defineProperties(_,{enabled:{get:function(){return i},set:function(k){k?T():!i||(i=!1,n.removeEventListener("mousemove",u),n.removeEventListener("mousedown",x),n.removeEventListener("mouseup",f),n.removeEventListener("mouseleave",l),n.removeEventListener("mouseenter",l),n.removeEventListener("mouseout",l),n.removeEventListener("mouseover",l),n.removeEventListener("blur",p),n.removeEventListener("keyup",g),n.removeEventListener("keydown",g),n.removeEventListener("keypress",g),n!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))},enumerable:!0},buttons:{get:function(){return o},enumerable:!0},x:{get:function(){return t},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),_};var e=v("mouse-event")},{"mouse-event":249}],248:[function(v,b,h){var e={left:0,top:0};b.exports=function(n,r,o){r=r||n.currentTarget||n.srcElement,Array.isArray(o)||(o=[0,0]);var i,t=n.clientX||0,d=n.clientY||0,a=(i=r)===window||i===document||i===document.body?e:i.getBoundingClientRect();return o[0]=t-a.left,o[1]=d-a.top,o}},{}],249:[function(v,b,h){"use strict";function e(n){return n.target||n.srcElement||window}h.buttons=function(n){if("object"==typeof n){if("buttons"in n)return n.buttons;if("which"in n){if(2===(r=n.which))return 4;if(3===r)return 2;if(r>0)return 1<<r-1}else if("button"in n){var r;if(1===(r=n.button))return 4;if(2===r)return 2;if(r>=0)return 1<<r}}return 0},h.element=e,h.x=function(n){if("object"==typeof n){if("offsetX"in n)return n.offsetX;var r=e(n).getBoundingClientRect();return n.clientX-r.left}return 0},h.y=function(n){if("object"==typeof n){if("offsetY"in n)return n.offsetY;var r=e(n).getBoundingClientRect();return n.clientY-r.top}return 0}},{}],250:[function(v,b,h){"use strict";var e=v("to-px");b.exports=function(n,r,o){"function"==typeof n&&(o=!!r,r=n,n=window);var t=e("ex",n),d=function(a){o&&a.preventDefault();var i=a.deltaX||0,s=a.deltaY||0,c=a.deltaZ||0,l=1;switch(a.deltaMode){case 1:l=t;break;case 2:l=window.innerHeight}if(s*=l,c*=l,(i*=l)||s||c)return r(i,s,c,a)};return n.addEventListener("wheel",d),d}},{"to-px":304}],251:[function(v,b,h){"use strict";var e=v("typedarray-pool");b.exports=function(r){function o(l){throw new Error("ndarray-extract-contour: "+l)}"object"!=typeof r&&o("Must specify arguments");var t=r.order;Array.isArray(t)||o("Must specify order");var l,p,g,T,d=r.arrayArguments||1;d<1&&o("Must have at least one array argument"),(r.scalarArguments||0)<0&&o("Scalar arg count must be > 0"),"function"!=typeof r.vertex&&o("Must specify vertex creation function"),"function"!=typeof r.cell&&o("Must specify cell creation function"),"function"!=typeof r.phase&&o("Must specify phase function");for(var i=r.getters||[],s=new Array(d),c=0;c<d;++c)s[c]=i.indexOf(c)>=0;return l=r.vertex,p=r.cell,g=r.phase,T=[s,t].join(","),(0,n[T])(l,p,g,e.mallocUint32,e.freeUint32)};var n={"false,0,1":function(r,o,t,d,a){return function(i,s,c,l){var p,g=0|i.shape[0],u=0|i.shape[1],x=i.data,T=0|i.stride[0],_=0|i.stride[1],k=0|i.offset,w=0|-T,C=0,A=0|-_,O=0,P=-T-_|0,S=0,E=0|T,D=_-T*g|0,z=0,N=0,V=0,X=2*g|0,J=d(X),G=d(X),Z=0,re=0,j=-1,B=-1,H=0,ee=0|-g,U=0|g,$=0,q=-g-1|0,te=g-1|0,ne=0,se=0,ie=0;for(z=0;z<g;++z)J[Z++]=t(x[k],s,c,l),k+=E;if(k+=D,u>0){if(N=1,J[Z++]=t(x[k],s,c,l),k+=E,g>0)for(z=1,re=J[Z]=t(p=x[k],s,c,l),$=J[Z+ee],ne=J[Z+q],re===(H=J[Z+j])&&re===$&&re===ne||(r(z,N,p,C=x[k+w],O=x[k+A],S=x[k+P],re,H,$,ne,s,c,l),se=G[Z]=V++),Z+=1,k+=E,z=2;z<g;++z)re=J[Z]=t(p=x[k],s,c,l),$=J[Z+ee],ne=J[Z+q],re===(H=J[Z+j])&&re===$&&re===ne||(r(z,N,p,C=x[k+w],O=x[k+A],S=x[k+P],re,H,$,ne,s,c,l),se=G[Z]=V++,ne!==H&&o(G[Z+j],se,S,C,ne,H,s,c,l)),Z+=1,k+=E;for(k+=D,Z=0,ie=j,j=B,B=ie,ie=ee,ee=U,U=ie,ie=q,q=te,te=ie,N=2;N<u;++N){if(J[Z++]=t(x[k],s,c,l),k+=E,g>0)for(z=1,re=J[Z]=t(p=x[k],s,c,l),$=J[Z+ee],ne=J[Z+q],re===(H=J[Z+j])&&re===$&&re===ne||(r(z,N,p,C=x[k+w],O=x[k+A],S=x[k+P],re,H,$,ne,s,c,l),se=G[Z]=V++,ne!==$&&o(G[Z+ee],se,O,S,$,ne,s,c,l)),Z+=1,k+=E,z=2;z<g;++z)re=J[Z]=t(p=x[k],s,c,l),$=J[Z+ee],ne=J[Z+q],re===(H=J[Z+j])&&re===$&&re===ne||(r(z,N,p,C=x[k+w],O=x[k+A],S=x[k+P],re,H,$,ne,s,c,l),se=G[Z]=V++,ne!==$&&o(G[Z+ee],se,O,S,$,ne,s,c,l),ne!==H&&o(G[Z+j],se,S,C,ne,H,s,c,l)),Z+=1,k+=E;1&N&&(Z=0),ie=j,j=B,B=ie,ie=ee,ee=U,U=ie,ie=q,q=te,te=ie,k+=D}}a(G),a(J)}},"false,1,0":function(r,o,t,d,a){return function(i,s,c,l){var p,g=0|i.shape[0],u=0|i.shape[1],x=i.data,T=0|i.stride[0],_=0|i.stride[1],k=0|i.offset,w=0|-T,C=0,A=0|-_,O=0,P=-T-_|0,S=0,E=0|_,D=T-_*u|0,z=0,N=0,V=0,X=2*u|0,J=d(X),G=d(X),Z=0,re=0,j=-1,B=-1,H=0,ee=0|-u,U=0|u,$=0,q=-u-1|0,te=u-1|0,ne=0,se=0,ie=0;for(N=0;N<u;++N)J[Z++]=t(x[k],s,c,l),k+=E;if(k+=D,g>0){if(z=1,J[Z++]=t(x[k],s,c,l),k+=E,u>0)for(N=1,re=J[Z]=t(p=x[k],s,c,l),H=J[Z+j],ne=J[Z+q],re===($=J[Z+ee])&&re===H&&re===ne||(r(z,N,p,C=x[k+w],O=x[k+A],S=x[k+P],re,$,H,ne,s,c,l),se=G[Z]=V++),Z+=1,k+=E,N=2;N<u;++N)re=J[Z]=t(p=x[k],s,c,l),H=J[Z+j],ne=J[Z+q],re===($=J[Z+ee])&&re===H&&re===ne||(r(z,N,p,C=x[k+w],O=x[k+A],S=x[k+P],re,$,H,ne,s,c,l),se=G[Z]=V++,ne!==H&&o(G[Z+j],se,O,S,H,ne,s,c,l)),Z+=1,k+=E;for(k+=D,Z=0,ie=ee,ee=U,U=ie,ie=j,j=B,B=ie,ie=q,q=te,te=ie,z=2;z<g;++z){if(J[Z++]=t(x[k],s,c,l),k+=E,u>0)for(N=1,re=J[Z]=t(p=x[k],s,c,l),H=J[Z+j],ne=J[Z+q],re===($=J[Z+ee])&&re===H&&re===ne||(r(z,N,p,C=x[k+w],O=x[k+A],S=x[k+P],re,$,H,ne,s,c,l),se=G[Z]=V++,ne!==$&&o(G[Z+ee],se,S,C,ne,$,s,c,l)),Z+=1,k+=E,N=2;N<u;++N)re=J[Z]=t(p=x[k],s,c,l),H=J[Z+j],ne=J[Z+q],re===($=J[Z+ee])&&re===H&&re===ne||(r(z,N,p,C=x[k+w],O=x[k+A],S=x[k+P],re,$,H,ne,s,c,l),se=G[Z]=V++,ne!==H&&o(G[Z+j],se,O,S,H,ne,s,c,l),ne!==$&&o(G[Z+ee],se,S,C,ne,$,s,c,l)),Z+=1,k+=E;1&z&&(Z=0),ie=ee,ee=U,U=ie,ie=j,j=B,B=ie,ie=q,q=te,te=ie,k+=D}}a(G),a(J)}}}},{"typedarray-pool":308}],252:[function(v,b,h){"use strict";var e=v("dup"),n={zero:function(g,u,x,f){var T=g[0];f|=0;var _=0,k=x[0];for(_=0;_<T;++_)u[f]=0,f+=k},fdTemplate1:function(g,u,x,f,T,_,k){var w=g[0],C=x[0],A=-1*C,O=C;f|=0,k|=0;var P=0,S=C,E=_[0];for(P=0;P<w;++P)T[k]=.5*(u[f+A]-u[f+O]),f+=S,k+=E},fdTemplate2:function(g,u,x,f,T,_,k,w,C,A){var O=g[0],P=g[1],S=x[0],E=x[1],z=_[1],V=C[1],X=-1*S,J=S,G=-1*E,Z=E;f|=0,k|=0,A|=0;var re=0,j=0,B=E,H=S-P*E,ee=z,U=_[0]-P*z,$=V,q=C[0]-P*V;for(j=0;j<O;++j){for(re=0;re<P;++re)T[k]=.5*(u[f+X]-u[f+J]),w[A]=.5*(u[f+G]-u[f+Z]),f+=B,k+=ee,A+=$;f+=H,k+=U,A+=q}}},r={cdiff:function(g){var u={};return function(x,f,T){var _=x.dtype,k=x.order,w=f.dtype,C=f.order,A=T.dtype,O=T.order,P=[_,k.join(),w,C.join(),A,O.join()].join(),S=u[P];return S||(u[P]=S=g([_,k,w,C,A,O])),S(x.shape.slice(0),x.data,x.stride,0|x.offset,f.data,f.stride,0|f.offset,T.data,T.stride,0|T.offset)}},zero:function(g){var u={};return function(x){var f=x.dtype,T=x.order,_=[f,T.join()].join(),k=u[_];return k||(u[_]=k=g([f,T])),k(x.shape.slice(0),x.data,x.stride,0|x.offset)}},fdTemplate1:function(g){var u={};return function(x,f){var T=x.dtype,_=x.order,k=f.dtype,w=f.order,C=[T,_.join(),k,w.join()].join(),A=u[C];return A||(u[C]=A=g([T,_,k,w])),A(x.shape.slice(0),x.data,x.stride,0|x.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(g){var u={};return function(x,f,T){var _=x.dtype,k=x.order,w=f.dtype,C=f.order,A=T.dtype,O=T.order,P=[_,k.join(),w,C.join(),A,O.join()].join(),S=u[P];return S||(u[P]=S=g([_,k,w,C,A,O])),S(x.shape.slice(0),x.data,x.stride,0|x.offset,f.data,f.stride,0|f.offset,T.data,T.stride,0|T.offset)}}};function o(g){return(0,r[g.funcName])(t.bind(void 0,g))}function t(g){return n[g.funcName]}function d(g){return o({funcName:g.funcName})}var a={},i={},s=d({funcName:"cdiff"}),c=d({funcName:"zero"});function l(g){return g in a?a[g]:a[g]=d({funcName:"fdTemplate"+g})}function p(g,u,x,f){return function(T,_){var k=_.shape.slice();return k[0]>2&&k[1]>2&&f(_.pick(-1,-1).lo(1,1).hi(k[0]-2,k[1]-2),T.pick(-1,-1,0).lo(1,1).hi(k[0]-2,k[1]-2),T.pick(-1,-1,1).lo(1,1).hi(k[0]-2,k[1]-2)),k[1]>2&&(x(_.pick(0,-1).lo(1).hi(k[1]-2),T.pick(0,-1,1).lo(1).hi(k[1]-2)),u(T.pick(0,-1,0).lo(1).hi(k[1]-2))),k[1]>2&&(x(_.pick(k[0]-1,-1).lo(1).hi(k[1]-2),T.pick(k[0]-1,-1,1).lo(1).hi(k[1]-2)),u(T.pick(k[0]-1,-1,0).lo(1).hi(k[1]-2))),k[0]>2&&(x(_.pick(-1,0).lo(1).hi(k[0]-2),T.pick(-1,0,0).lo(1).hi(k[0]-2)),u(T.pick(-1,0,1).lo(1).hi(k[0]-2))),k[0]>2&&(x(_.pick(-1,k[1]-1).lo(1).hi(k[0]-2),T.pick(-1,k[1]-1,0).lo(1).hi(k[0]-2)),u(T.pick(-1,k[1]-1,1).lo(1).hi(k[0]-2))),T.set(0,0,0,0),T.set(0,0,1,0),T.set(k[0]-1,0,0,0),T.set(k[0]-1,0,1,0),T.set(0,k[1]-1,0,0),T.set(0,k[1]-1,1,0),T.set(k[0]-1,k[1]-1,0,0),T.set(k[0]-1,k[1]-1,1,0),T}}b.exports=function(g,u,x){return Array.isArray(x)||(x=e(u.dimension,"string"==typeof x?x:"clamp")),0===u.size?g:0===u.dimension?(g.set(0),g):function(f){var T=f.join();if(C=i[T])return C;for(var _=f.length,k=[s,c],w=1;w<=_;++w)k.push(l(w));var C=p.apply(void 0,k);return i[T]=C,C}(x)(g,u)}},{dup:65}],253:[function(v,b,h){"use strict";function e(t,d){var a=Math.floor(d),i=d-a,c=0<=a+1&&a+1<t.shape[0];return(1-i)*(0<=a&&a<t.shape[0]?+t.get(a):0)+i*(c?+t.get(a+1):0)}function n(t,d,a){var i=Math.floor(d),s=d-i,c=0<=i&&i<t.shape[0],l=0<=i+1&&i+1<t.shape[0],p=Math.floor(a),g=a-p,u=0<=p&&p<t.shape[1],x=0<=p+1&&p+1<t.shape[1],f=c&&u?t.get(i,p):0,T=c&&x?t.get(i,p+1):0;return(1-g)*((1-s)*f+s*(l&&u?t.get(i+1,p):0))+g*((1-s)*T+s*(l&&x?t.get(i+1,p+1):0))}function r(t,d,a,i){var s=Math.floor(d),c=d-s,l=0<=s&&s<t.shape[0],p=0<=s+1&&s+1<t.shape[0],g=Math.floor(a),u=a-g,x=0<=g&&g<t.shape[1],f=0<=g+1&&g+1<t.shape[1],T=Math.floor(i),_=i-T,k=0<=T&&T<t.shape[2],w=0<=T+1&&T+1<t.shape[2],C=l&&x&&k?t.get(s,g,T):0,A=l&&f&&k?t.get(s,g+1,T):0,O=p&&x&&k?t.get(s+1,g,T):0,P=p&&f&&k?t.get(s+1,g+1,T):0,S=l&&x&&w?t.get(s,g,T+1):0,E=l&&f&&w?t.get(s,g+1,T+1):0;return(1-_)*((1-u)*((1-c)*C+c*O)+u*((1-c)*A+c*P))+_*((1-u)*((1-c)*S+c*(p&&x&&w?t.get(s+1,g,T+1):0))+u*((1-c)*E+c*(p&&f&&w?t.get(s+1,g+1,T+1):0)))}function o(t){var d,a,i=0|t.shape.length,s=new Array(i),c=new Array(i),l=new Array(i),p=new Array(i);for(d=0;d<i;++d)a=+arguments[d+1],s[d]=Math.floor(a),c[d]=a-s[d],l[d]=0<=s[d]&&s[d]<t.shape[d],p[d]=0<=s[d]+1&&s[d]+1<t.shape[d];var g,u,x,f=0;e:for(d=0;d<1<<i;++d){for(u=1,x=t.offset,g=0;g<i;++g)if(d&1<<g){if(!p[g])continue e;u*=c[g],x+=t.stride[g]*(s[g]+1)}else{if(!l[g])continue e;u*=1-c[g],x+=t.stride[g]*s[g]}f+=u*t.data[x]}return f}b.exports=function(t,d,a,i){switch(t.shape.length){case 0:return 0;case 1:return e(t,d);case 2:return n(t,d,a);case 3:return r(t,d,a,i);default:return o.apply(void 0,arguments)}},b.exports.d1=e,b.exports.d2=n,b.exports.d3=r},{}],254:[function(v,b,h){"use strict";var e={"float64,2,1,0":function(){return function(d,a,i,s,c){var l=d[0],p=d[1],g=d[2],x=i[1],f=i[2];s|=0;var T=0,_=0,k=0,w=f,C=x-g*f,A=i[0]-p*x;for(k=0;k<l;++k){for(_=0;_<p;++_){for(T=0;T<g;++T)a[s]/=c,s+=w;s+=C}s+=A}}},"uint8,2,0,1,float64,2,1,0":function(){return function(d,a,i,s,c,l,p,g){for(var u=d[0],x=d[1],f=d[2],T=i[0],_=i[1],k=i[2],w=l[0],C=l[1],A=l[2],O=s|=0,P=p|=0,S=0|d[0];S>0;){S<64?(u=S,S=0):(u=64,S-=64);for(var E=0|d[1];E>0;){E<64?(x=E,E=0):(x=64,E-=64),s=O+S*T+E*_,p=P+S*w+E*C;var D=0,z=0,N=0,V=k,X=T-f*k,J=_-u*T,G=A,Z=w-f*A,re=C-u*w;for(N=0;N<x;++N){for(z=0;z<u;++z){for(D=0;D<f;++D)a[s]=c[p]*g,s+=V,p+=G;s+=X,p+=Z}s+=J,p+=re}}}}},"float32,1,0,float32,1,0":function(){return function(d,a,i,s,c,l,p){var g=d[0],u=d[1],f=i[1],_=l[1];s|=0,p|=0;var k=0,w=0,C=f,A=i[0]-u*f,O=_,P=l[0]-u*_;for(w=0;w<g;++w){for(k=0;k<u;++k)a[s]=c[p],s+=C,p+=O;s+=A,p+=P}}},"float32,1,0,float32,0,1":function(){return function(d,a,i,s,c,l,p){for(var g=d[0],u=d[1],x=i[0],f=i[1],T=l[0],_=l[1],k=s|=0,w=p|=0,C=0|d[1];C>0;){C<64?(u=C,C=0):(u=64,C-=64);for(var A=0|d[0];A>0;){A<64?(g=A,A=0):(g=64,A-=64),s=k+C*f+A*x,p=w+C*_+A*T;var O=0,P=0,S=f,E=x-u*f,D=_,z=T-u*_;for(P=0;P<g;++P){for(O=0;O<u;++O)a[s]=c[p],s+=S,p+=D;s+=E,p+=z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(d,a,i,s,c,l,p){for(var g=d[0],u=d[1],x=d[2],f=i[0],T=i[1],_=i[2],k=l[0],w=l[1],C=l[2],A=s|=0,O=p|=0,P=0|d[2];P>0;){P<64?(x=P,P=0):(x=64,P-=64);for(var S=0|d[0];S>0;){S<64?(g=S,S=0):(g=64,S-=64);for(var E=0|d[1];E>0;){E<64?(u=E,E=0):(u=64,E-=64),s=A+P*_+S*f+E*T,p=O+P*C+S*k+E*w;var D=0,z=0,N=0,V=_,X=f-x*_,J=T-g*f,G=C,Z=k-x*C,re=w-g*k;for(N=0;N<u;++N){for(z=0;z<g;++z){for(D=0;D<x;++D)a[s]=c[p],s+=V,p+=G;s+=X,p+=Z}s+=J,p+=re}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(d,a,i,s,c,l,p){var g=d[0],u=d[1],x=d[2],f=i[0],_=i[2],k=l[0],C=l[2];s|=0,p|=0;var A=0,O=0,P=0,S=_,E=f-x*_,D=i[1]-g*f,z=C,N=k-x*C,V=l[1]-g*k;for(P=0;P<u;++P){for(O=0;O<g;++O){for(A=0;A<x;++A)a[s]=c[p],s+=S,p+=z;s+=E,p+=N}s+=D,p+=V}}}},n=function(d,a){var i=a.join(",");return(0,e[i])()},r={mul:function(d){var a={};return function(i,s,c){var l=i.dtype,p=i.order,g=s.dtype,u=s.order,x=c.dtype,f=c.order,T=[l,p.join(),g,u.join(),x,f.join()].join(),_=a[T];return _||(a[T]=_=d([l,p,g,u,x,f])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,s.data,s.stride,0|s.offset,c.data,c.stride,0|c.offset)}},muls:function(d){var a={};return function(i,s,c){var l=i.dtype,p=i.order,g=s.dtype,u=s.order,x=[l,p.join(),g,u.join()].join(),f=a[x];return f||(a[x]=f=d([l,p,g,u])),f(i.shape.slice(0),i.data,i.stride,0|i.offset,s.data,s.stride,0|s.offset,c)}},mulseq:function(d){var a={};return function(i,s){var c=i.dtype,l=i.order,p=[c,l.join()].join(),g=a[p];return g||(a[p]=g=d([c,l])),g(i.shape.slice(0),i.data,i.stride,0|i.offset,s)}},div:function(d){var a={};return function(i,s,c){var l=i.dtype,p=i.order,g=s.dtype,u=s.order,x=c.dtype,f=c.order,T=[l,p.join(),g,u.join(),x,f.join()].join(),_=a[T];return _||(a[T]=_=d([l,p,g,u,x,f])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,s.data,s.stride,0|s.offset,c.data,c.stride,0|c.offset)}},divs:function(d){var a={};return function(i,s,c){var l=i.dtype,p=i.order,g=s.dtype,u=s.order,x=[l,p.join(),g,u.join()].join(),f=a[x];return f||(a[x]=f=d([l,p,g,u])),f(i.shape.slice(0),i.data,i.stride,0|i.offset,s.data,s.stride,0|s.offset,c)}},divseq:function(d){var a={};return function(i,s){var c=i.dtype,l=i.order,p=[c,l.join()].join(),g=a[p];return g||(a[p]=g=d([c,l])),g(i.shape.slice(0),i.data,i.stride,0|i.offset,s)}},assign:function(d){var a={};return function(i,s){var c=i.dtype,l=i.order,p=s.dtype,g=s.order,u=[c,l.join(),p,g.join()].join(),x=a[u];return x||(a[u]=x=d([c,l,p,g])),x(i.shape.slice(0),i.data,i.stride,0|i.offset,s.data,s.stride,0|s.offset)}}};function o(d){return(0,r[(a={funcName:d.funcName}).funcName])(n.bind(void 0,a));var a}var t={mul:"*",div:"/"};(function(){for(var d in t)h[d]=o({funcName:d}),h[d+"s"]=o({funcName:d+"s"}),h[d+"seq"]=o({funcName:d+"seq"})})(),h.assign=o({funcName:"assign"})},{}],255:[function(v,b,h){"use strict";var e=v("ndarray"),n=v("./doConvert.js");b.exports=function(r,o){for(var t=[],d=r,a=1;Array.isArray(d);)t.push(d.length),a*=d.length,d=d[0];return 0===t.length?e():(o||(o=e(new Float64Array(a),t)),n(o,r),o)}},{"./doConvert.js":256,ndarray:259}],256:[function(v,b,h){"use strict";var r,o;b.exports=(r=function(){return function(r,o,t,d,a){var i=r[0],s=r[1],c=r[2],p=t[1],g=t[2],u=[0,0,0];d|=0;var x=0,f=0,T=0,_=g,k=p-c*g,w=t[0]-s*p;for(T=0;T<i;++T){for(f=0;f<s;++f){for(x=0;x<c;++x){var C,A=a;for(C=0;C<u.length-1;++C)A=A[u[C]];o[d]=A[u[u.length-1]],d+=_,++u[2]}d+=k,u[2]-=c,++u[1]}d+=w,u[1]-=s,++u[0]}}}.bind(void 0,{funcName:"convert"}),o={},function(t,d){var a=t.dtype,i=t.order,s=[a,i.join()].join(),c=o[s];return c||(o[s]=c=r([a,i])),c(t.shape.slice(0),t.data,t.stride,0|t.offset,d)})},{}],257:[function(v,b,h){"use strict";var e=v("typedarray-pool");function n(d){return"uint32"===d?[e.mallocUint32,e.freeUint32]:null}var r={"uint32,1,0":function(d,a){return function(i,s,c,l,p,g,u,x,f,T,_){var k,w,C,A,O,P,S,E,D=i*p+l,z=d(x);for(k=i+1;k<=s;++k){for(w=k,C=D+=p,O=0,P=D,A=0;A<x;++A)z[O++]=c[P],P+=f;e:for(;w-- >i;){O=0,P=C-p;t:for(A=0;A<x;++A){if((S=c[P])<(E=z[O]))break e;if(S>E)break t;P+=T,O+=_}for(O=C,P=C-p,A=0;A<x;++A)c[O]=c[P],O+=f,P+=f;C-=p}for(O=C,P=0,A=0;A<x;++A)c[O]=z[P++],O+=f}a(z)}}},o={"uint32,1,0":function(d,a,i){return function s(c,l,p,g,u,x,f,T,_,k,w){var C,A,P,S,E,D,z,N,V,X,J,G,Z,re,j,B,H,ee,U,$,q,te,ne,se,ie=(l-c+1)/6|0,ue=c+ie,le=l-ie,de=c+l>>1,be=de-ie,_e=de+ie,xe=ue,Ee=be,he=de,me=_e,Se=le,Me=c+1,Ie=l-1,Fe=!0,Ne=0,De=0,$e=0,Re=T,ze=a(Re),Ue=a(Re);X=u*xe,J=u*Ee,se=g;e:for(V=0;V<T;++V){if(($e=p[D=X+se]-p[z=J+se])>0){A=xe,xe=Ee,Ee=A;break e}if($e<0)break e;se+=k}X=u*me,J=u*Se,se=g;e:for(V=0;V<T;++V){if(($e=p[D=X+se]-p[z=J+se])>0){A=me,me=Se,Se=A;break e}if($e<0)break e;se+=k}X=u*xe,J=u*he,se=g;e:for(V=0;V<T;++V){if(($e=p[D=X+se]-p[z=J+se])>0){A=xe,xe=he,he=A;break e}if($e<0)break e;se+=k}X=u*Ee,J=u*he,se=g;e:for(V=0;V<T;++V){if(($e=p[D=X+se]-p[z=J+se])>0){A=Ee,Ee=he,he=A;break e}if($e<0)break e;se+=k}X=u*xe,J=u*me,se=g;e:for(V=0;V<T;++V){if(($e=p[D=X+se]-p[z=J+se])>0){A=xe,xe=me,me=A;break e}if($e<0)break e;se+=k}X=u*he,J=u*me,se=g;e:for(V=0;V<T;++V){if(($e=p[D=X+se]-p[z=J+se])>0){A=he,he=me,me=A;break e}if($e<0)break e;se+=k}X=u*Ee,J=u*Se,se=g;e:for(V=0;V<T;++V){if(($e=p[D=X+se]-p[z=J+se])>0){A=Ee,Ee=Se,Se=A;break e}if($e<0)break e;se+=k}X=u*Ee,J=u*he,se=g;e:for(V=0;V<T;++V){if(($e=p[D=X+se]-p[z=J+se])>0){A=Ee,Ee=he,he=A;break e}if($e<0)break e;se+=k}X=u*me,J=u*Se,se=g;e:for(V=0;V<T;++V){if(($e=p[D=X+se]-p[z=J+se])>0){A=me,me=Se,Se=A;break e}if($e<0)break e;se+=k}for(X=u*xe,J=u*Ee,G=u*he,Z=u*me,re=u*Se,j=u*ue,B=u*de,H=u*le,ne=0,se=g,V=0;V<T;++V)D=X+se,N=G+se,ee=Z+se,U=re+se,$=j+se,q=B+se,te=H+se,ze[ne]=p[z=J+se],Ue[ne]=p[ee],Fe=Fe&&ze[ne]===Ue[ne],P=p[N],S=p[U],p[$]=p[D],p[q]=P,p[te]=S,++ne,se+=_;for(X=u*be,J=u*c,se=g,V=0;V<T;++V)p[D=X+se]=p[z=J+se],se+=_;for(X=u*_e,J=u*l,se=g,V=0;V<T;++V)p[D=X+se]=p[z=J+se],se+=_;if(Fe)for(E=Me;E<=Ie;++E){for(D=g+E*u,ne=0,V=0;V<T&&0==($e=p[D]-ze[ne]);++V)ne+=w,D+=k;if(0!==$e)if($e<0){if(E!==Me)for(X=u*E,J=u*Me,se=g,V=0;V<T;++V)C=p[D=X+se],p[D]=p[z=J+se],p[z]=C,se+=_;++Me}else for(;;){for(D=g+Ie*u,ne=0,V=0;V<T&&0==($e=p[D]-ze[ne]);++V)ne+=w,D+=k;if(!($e>0)){if($e<0){for(X=u*E,J=u*Me,G=u*Ie,se=g,V=0;V<T;++V)N=G+se,C=p[D=X+se],p[D]=p[z=J+se],p[z]=p[N],p[N]=C,se+=_;++Me,--Ie;break}for(X=u*E,J=u*Ie,se=g,V=0;V<T;++V)C=p[D=X+se],p[D]=p[z=J+se],p[z]=C,se+=_;--Ie;break}Ie--}}else for(E=Me;E<=Ie;++E){for(D=g+E*u,ne=0,V=0;V<T&&0==(Ne=p[D]-ze[ne]);++V)ne+=w,D+=k;if(Ne<0){if(E!==Me)for(X=u*E,J=u*Me,se=g,V=0;V<T;++V)C=p[D=X+se],p[D]=p[z=J+se],p[z]=C,se+=_;++Me}else{for(D=g+E*u,ne=0,V=0;V<T&&0==(De=p[D]-Ue[ne]);++V)ne+=w,D+=k;if(De>0)for(;;){for(D=g+Ie*u,ne=0,V=0;V<T&&0==($e=p[D]-Ue[ne]);++V)ne+=w,D+=k;if(!($e>0)){for(D=g+Ie*u,ne=0,V=0;V<T&&0==($e=p[D]-ze[ne]);++V)ne+=w,D+=k;if($e<0){for(X=u*E,J=u*Me,G=u*Ie,se=g,V=0;V<T;++V)N=G+se,C=p[D=X+se],p[D]=p[z=J+se],p[z]=p[N],p[N]=C,se+=_;++Me,--Ie}else{for(X=u*E,J=u*Ie,se=g,V=0;V<T;++V)C=p[D=X+se],p[D]=p[z=J+se],p[z]=C,se+=_;--Ie}break}if(--Ie<E)break}}}for(X=u*c,J=u*(Me-1),ne=0,se=g,V=0;V<T;++V)p[D=X+se]=p[z=J+se],p[z]=ze[ne],++ne,se+=_;for(X=u*l,J=u*(Ie+1),ne=0,se=g,V=0;V<T;++V)p[D=X+se]=p[z=J+se],p[z]=Ue[ne],++ne,se+=_;if(Me-2-c<=32?d(c,Me-2,p,g,u,x,f,T,_,k,w):s(c,Me-2,p,g,u,x,f,T,_,k,w),l-(Ie+2)<=32?d(Ie+2,l,p,g,u,x,f,T,_,k,w):s(Ie+2,l,p,g,u,x,f,T,_,k,w),Fe)return i(ze),void i(Ue);if(Me<ue&&Ie>le){e:for(;;){for(D=g+Me*u,ne=0,se=g,V=0;V<T;++V){if(p[D]!==ze[ne])break e;++ne,D+=_}++Me}e:for(;;){for(D=g+Ie*u,ne=0,se=g,V=0;V<T;++V){if(p[D]!==Ue[ne])break e;++ne,D+=_}--Ie}for(E=Me;E<=Ie;++E){for(D=g+E*u,ne=0,V=0;V<T&&0==(Ne=p[D]-ze[ne]);++V)ne+=w,D+=k;if(0===Ne){if(E!==Me)for(X=u*E,J=u*Me,se=g,V=0;V<T;++V)C=p[D=X+se],p[D]=p[z=J+se],p[z]=C,se+=_;++Me}else{for(D=g+E*u,ne=0,V=0;V<T&&0==(De=p[D]-Ue[ne]);++V)ne+=w,D+=k;if(0===De)for(;;){for(D=g+Ie*u,ne=0,V=0;V<T&&0==($e=p[D]-Ue[ne]);++V)ne+=w,D+=k;if(0!==$e){for(D=g+Ie*u,ne=0,V=0;V<T&&0==($e=p[D]-ze[ne]);++V)ne+=w,D+=k;if($e<0){for(X=u*E,J=u*Me,G=u*Ie,se=g,V=0;V<T;++V)N=G+se,C=p[D=X+se],p[D]=p[z=J+se],p[z]=p[N],p[N]=C,se+=_;++Me,--Ie}else{for(X=u*E,J=u*Ie,se=g,V=0;V<T;++V)C=p[D=X+se],p[D]=p[z=J+se],p[z]=C,se+=_;--Ie}break}if(--Ie<E)break}}}}i(ze),i(Ue),Ie-Me<=32?d(Me,Ie,p,g,u,x,f,T,_,k,w):s(Me,Ie,p,g,u,x,f,T,_,k,w)}}},t={"uint32,1,0":function(d,a){return function(i){var s=i.data,c=0|i.offset,l=i.shape,p=i.stride,g=0|p[0],u=0|l[0],x=0|p[1],f=0|l[1],T=x,_=x;u<=32?d(0,u-1,s,c,g,x,u,f,T,_,1):a(0,u-1,s,c,g,x,u,f,T,_,1)}}};b.exports=function(d,a){var p,g,u,x,f,i=[a,d].join(","),s=t[i],c=(p=d,u=n(g=a),x=[g,p].join(","),f=r[x],u?f(u[0],u[1]):f()),l=function(p,g,u){var x=n(g),f=[g,p].join(","),T=o[f];return p.length>1&&x?T(u,x[0],x[1]):T(u)}(d,a,c);return s(c,l)}},{"typedarray-pool":308}],258:[function(v,b,h){"use strict";var e=v("./lib/compile_sort.js"),n={};b.exports=function(r){var o=r.order,t=r.dtype,d=[o,t].join(":"),a=n[d];return a||(n[d]=a=e(o,t)),a(r),r}},{"./lib/compile_sort.js":257}],259:[function(v,b,h){var e=v("is-buffer"),n=typeof Float64Array<"u";function r(i,s){return i[0]-s[0]}function o(){var i,s=this.stride,c=new Array(s.length);for(i=0;i<c.length;++i)c[i]=[Math.abs(s[i]),i];c.sort(r);var l=new Array(c.length);for(i=0;i<l.length;++i)l[i]=c[i][1];return l}var t={T:function(i){function s(l){this.data=l}var c=s.prototype;return c.dtype=i,c.index=function(){return-1},c.size=0,c.dimension=-1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new s(this.data)},c.get=c.set=function(){},c.pick=function(){return null},function(l){return new s(l)}},0:function(i,s){function c(p,g){this.data=p,this.offset=g}var l=c.prototype;return l.dtype=i,l.index=function(){return this.offset},l.dimension=0,l.size=1,l.shape=l.stride=l.order=[],l.lo=l.hi=l.transpose=l.step=function(){return new c(this.data,this.offset)},l.pick=function(){return s(this.data)},l.valueOf=l.get=function(){return"generic"===i?this.data.get(this.offset):this.data[this.offset]},l.set=function(p){return"generic"===i?this.data.set(this.offset,p):this.data[this.offset]=p},function(p,g,u,x){return new c(p,x)}},1:function(i,s,c){function l(g,u,x,f){this.data=g,this.shape=[u],this.stride=[x],this.offset=0|f}var p=l.prototype;return p.dtype=i,p.dimension=1,Object.defineProperty(p,"size",{get:function(){return this.shape[0]}}),p.order=[0],p.set=function(g,u){return"generic"===i?this.data.set(this.offset+this.stride[0]*g,u):this.data[this.offset+this.stride[0]*g]=u},p.get=function(g){return"generic"===i?this.data.get(this.offset+this.stride[0]*g):this.data[this.offset+this.stride[0]*g]},p.index=function(g){return this.offset+this.stride[0]*g},p.hi=function(g){return new l(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,this.stride[0],this.offset)},p.lo=function(g){var u=this.offset,x=0,f=this.shape[0],T=this.stride[0];return"number"==typeof g&&g>=0&&(u+=T*(x=0|g),f-=x),new l(this.data,f,T,u)},p.step=function(g){var u=this.shape[0],x=this.stride[0],f=this.offset,T=0,_=Math.ceil;return"number"==typeof g&&((T=0|g)<0?(f+=x*(u-1),u=_(-u/T)):u=_(u/T),x*=T),new l(this.data,u,x,f)},p.transpose=function(g){return new l(this.data,this.shape[g=void 0===g?0:0|g],this.stride[g],this.offset)},p.pick=function(g){var u=[],x=[],f=this.offset;return"number"==typeof g&&g>=0?f=f+this.stride[0]*g|0:(u.push(this.shape[0]),x.push(this.stride[0])),(0,s[u.length+1])(this.data,u,x,f)},function(g,u,x,f){return new l(g,u[0],x[0],f)}},2:function(i,s,c){function l(g,u,x,f,T,_){this.data=g,this.shape=[u,x],this.stride=[f,T],this.offset=0|_}var p=l.prototype;return p.dtype=i,p.dimension=2,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(p,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),p.set=function(g,u,x){return"generic"===i?this.data.set(this.offset+this.stride[0]*g+this.stride[1]*u,x):this.data[this.offset+this.stride[0]*g+this.stride[1]*u]=x},p.get=function(g,u){return"generic"===i?this.data.get(this.offset+this.stride[0]*g+this.stride[1]*u):this.data[this.offset+this.stride[0]*g+this.stride[1]*u]},p.index=function(g,u){return this.offset+this.stride[0]*g+this.stride[1]*u},p.hi=function(g,u){return new l(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,"number"!=typeof u||u<0?this.shape[1]:0|u,this.stride[0],this.stride[1],this.offset)},p.lo=function(g,u){var x=this.offset,f=0,T=this.shape[0],_=this.shape[1],k=this.stride[0],w=this.stride[1];return"number"==typeof g&&g>=0&&(x+=k*(f=0|g),T-=f),"number"==typeof u&&u>=0&&(x+=w*(f=0|u),_-=f),new l(this.data,T,_,k,w,x)},p.step=function(g,u){var x=this.shape[0],f=this.shape[1],T=this.stride[0],_=this.stride[1],k=this.offset,w=0,C=Math.ceil;return"number"==typeof g&&((w=0|g)<0?(k+=T*(x-1),x=C(-x/w)):x=C(x/w),T*=w),"number"==typeof u&&((w=0|u)<0?(k+=_*(f-1),f=C(-f/w)):f=C(f/w),_*=w),new l(this.data,x,f,T,_,k)},p.transpose=function(g,u){var x=this.shape,f=this.stride;return new l(this.data,x[g=void 0===g?0:0|g],x[u=void 0===u?1:0|u],f[g],f[u],this.offset)},p.pick=function(g,u){var x=[],f=[],T=this.offset;return"number"==typeof g&&g>=0?T=T+this.stride[0]*g|0:(x.push(this.shape[0]),f.push(this.stride[0])),"number"==typeof u&&u>=0?T=T+this.stride[1]*u|0:(x.push(this.shape[1]),f.push(this.stride[1])),(0,s[x.length+1])(this.data,x,f,T)},function(g,u,x,f){return new l(g,u[0],u[1],x[0],x[1],f)}},3:function(i,s,c){function l(g,u,x,f,T,_,k,w){this.data=g,this.shape=[u,x,f],this.stride=[T,_,k],this.offset=0|w}var p=l.prototype;return p.dtype=i,p.dimension=3,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(p,"order",{get:function(){var g=Math.abs(this.stride[0]),u=Math.abs(this.stride[1]),x=Math.abs(this.stride[2]);return g>u?u>x?[2,1,0]:g>x?[1,2,0]:[1,0,2]:g>x?[2,0,1]:x>u?[0,1,2]:[0,2,1]}}),p.set=function(g,u,x,f){return"generic"===i?this.data.set(this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x,f):this.data[this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x]=f},p.get=function(g,u,x){return"generic"===i?this.data.get(this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x):this.data[this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x]},p.index=function(g,u,x){return this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x},p.hi=function(g,u,x){return new l(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof x||x<0?this.shape[2]:0|x,this.stride[0],this.stride[1],this.stride[2],this.offset)},p.lo=function(g,u,x){var f=this.offset,T=0,_=this.shape[0],k=this.shape[1],w=this.shape[2],C=this.stride[0],A=this.stride[1],O=this.stride[2];return"number"==typeof g&&g>=0&&(f+=C*(T=0|g),_-=T),"number"==typeof u&&u>=0&&(f+=A*(T=0|u),k-=T),"number"==typeof x&&x>=0&&(f+=O*(T=0|x),w-=T),new l(this.data,_,k,w,C,A,O,f)},p.step=function(g,u,x){var f=this.shape[0],T=this.shape[1],_=this.shape[2],k=this.stride[0],w=this.stride[1],C=this.stride[2],A=this.offset,O=0,P=Math.ceil;return"number"==typeof g&&((O=0|g)<0?(A+=k*(f-1),f=P(-f/O)):f=P(f/O),k*=O),"number"==typeof u&&((O=0|u)<0?(A+=w*(T-1),T=P(-T/O)):T=P(T/O),w*=O),"number"==typeof x&&((O=0|x)<0?(A+=C*(_-1),_=P(-_/O)):_=P(_/O),C*=O),new l(this.data,f,T,_,k,w,C,A)},p.transpose=function(g,u,x){var f=this.shape,T=this.stride;return new l(this.data,f[g=void 0===g?0:0|g],f[u=void 0===u?1:0|u],f[x=void 0===x?2:0|x],T[g],T[u],T[x],this.offset)},p.pick=function(g,u,x){var f=[],T=[],_=this.offset;return"number"==typeof g&&g>=0?_=_+this.stride[0]*g|0:(f.push(this.shape[0]),T.push(this.stride[0])),"number"==typeof u&&u>=0?_=_+this.stride[1]*u|0:(f.push(this.shape[1]),T.push(this.stride[1])),"number"==typeof x&&x>=0?_=_+this.stride[2]*x|0:(f.push(this.shape[2]),T.push(this.stride[2])),(0,s[f.length+1])(this.data,f,T,_)},function(g,u,x,f){return new l(g,u[0],u[1],u[2],x[0],x[1],x[2],f)}},4:function(i,s,c){function l(g,u,x,f,T,_,k,w,C,A){this.data=g,this.shape=[u,x,f,T],this.stride=[_,k,w,C],this.offset=0|A}var p=l.prototype;return p.dtype=i,p.dimension=4,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(p,"order",{get:c}),p.set=function(g,u,x,f,T){return"generic"===i?this.data.set(this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f,T):this.data[this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f]=T},p.get=function(g,u,x,f){return"generic"===i?this.data.get(this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f):this.data[this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f]},p.index=function(g,u,x,f){return this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f},p.hi=function(g,u,x,f){return new l(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof x||x<0?this.shape[2]:0|x,"number"!=typeof f||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},p.lo=function(g,u,x,f){var T=this.offset,_=0,k=this.shape[0],w=this.shape[1],C=this.shape[2],A=this.shape[3],O=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3];return"number"==typeof g&&g>=0&&(T+=O*(_=0|g),k-=_),"number"==typeof u&&u>=0&&(T+=P*(_=0|u),w-=_),"number"==typeof x&&x>=0&&(T+=S*(_=0|x),C-=_),"number"==typeof f&&f>=0&&(T+=E*(_=0|f),A-=_),new l(this.data,k,w,C,A,O,P,S,E,T)},p.step=function(g,u,x,f){var T=this.shape[0],_=this.shape[1],k=this.shape[2],w=this.shape[3],C=this.stride[0],A=this.stride[1],O=this.stride[2],P=this.stride[3],S=this.offset,E=0,D=Math.ceil;return"number"==typeof g&&((E=0|g)<0?(S+=C*(T-1),T=D(-T/E)):T=D(T/E),C*=E),"number"==typeof u&&((E=0|u)<0?(S+=A*(_-1),_=D(-_/E)):_=D(_/E),A*=E),"number"==typeof x&&((E=0|x)<0?(S+=O*(k-1),k=D(-k/E)):k=D(k/E),O*=E),"number"==typeof f&&((E=0|f)<0?(S+=P*(w-1),w=D(-w/E)):w=D(w/E),P*=E),new l(this.data,T,_,k,w,C,A,O,P,S)},p.transpose=function(g,u,x,f){var T=this.shape,_=this.stride;return new l(this.data,T[g=void 0===g?0:0|g],T[u=void 0===u?1:0|u],T[x=void 0===x?2:0|x],T[f=void 0===f?3:0|f],_[g],_[u],_[x],_[f],this.offset)},p.pick=function(g,u,x,f){var T=[],_=[],k=this.offset;return"number"==typeof g&&g>=0?k=k+this.stride[0]*g|0:(T.push(this.shape[0]),_.push(this.stride[0])),"number"==typeof u&&u>=0?k=k+this.stride[1]*u|0:(T.push(this.shape[1]),_.push(this.stride[1])),"number"==typeof x&&x>=0?k=k+this.stride[2]*x|0:(T.push(this.shape[2]),_.push(this.stride[2])),"number"==typeof f&&f>=0?k=k+this.stride[3]*f|0:(T.push(this.shape[3]),_.push(this.stride[3])),(0,s[T.length+1])(this.data,T,_,k)},function(g,u,x,f){return new l(g,u[0],u[1],u[2],u[3],x[0],x[1],x[2],x[3],f)}},5:function(i,s,c){function l(g,u,x,f,T,_,k,w,C,A,O,P){this.data=g,this.shape=[u,x,f,T,_],this.stride=[k,w,C,A,O],this.offset=0|P}var p=l.prototype;return p.dtype=i,p.dimension=5,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(p,"order",{get:c}),p.set=function(g,u,x,f,T,_){return"generic"===i?this.data.set(this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f+this.stride[4]*T,_):this.data[this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f+this.stride[4]*T]=_},p.get=function(g,u,x,f,T){return"generic"===i?this.data.get(this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f+this.stride[4]*T):this.data[this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f+this.stride[4]*T]},p.index=function(g,u,x,f,T){return this.offset+this.stride[0]*g+this.stride[1]*u+this.stride[2]*x+this.stride[3]*f+this.stride[4]*T},p.hi=function(g,u,x,f,T){return new l(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof x||x<0?this.shape[2]:0|x,"number"!=typeof f||f<0?this.shape[3]:0|f,"number"!=typeof T||T<0?this.shape[4]:0|T,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},p.lo=function(g,u,x,f,T){var _=this.offset,k=0,w=this.shape[0],C=this.shape[1],A=this.shape[2],O=this.shape[3],P=this.shape[4],S=this.stride[0],E=this.stride[1],D=this.stride[2],z=this.stride[3],N=this.stride[4];return"number"==typeof g&&g>=0&&(_+=S*(k=0|g),w-=k),"number"==typeof u&&u>=0&&(_+=E*(k=0|u),C-=k),"number"==typeof x&&x>=0&&(_+=D*(k=0|x),A-=k),"number"==typeof f&&f>=0&&(_+=z*(k=0|f),O-=k),"number"==typeof T&&T>=0&&(_+=N*(k=0|T),P-=k),new l(this.data,w,C,A,O,P,S,E,D,z,N,_)},p.step=function(g,u,x,f,T){var _=this.shape[0],k=this.shape[1],w=this.shape[2],C=this.shape[3],A=this.shape[4],O=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3],D=this.stride[4],z=this.offset,N=0,V=Math.ceil;return"number"==typeof g&&((N=0|g)<0?(z+=O*(_-1),_=V(-_/N)):_=V(_/N),O*=N),"number"==typeof u&&((N=0|u)<0?(z+=P*(k-1),k=V(-k/N)):k=V(k/N),P*=N),"number"==typeof x&&((N=0|x)<0?(z+=S*(w-1),w=V(-w/N)):w=V(w/N),S*=N),"number"==typeof f&&((N=0|f)<0?(z+=E*(C-1),C=V(-C/N)):C=V(C/N),E*=N),"number"==typeof T&&((N=0|T)<0?(z+=D*(A-1),A=V(-A/N)):A=V(A/N),D*=N),new l(this.data,_,k,w,C,A,O,P,S,E,D,z)},p.transpose=function(g,u,x,f,T){var _=this.shape,k=this.stride;return new l(this.data,_[g=void 0===g?0:0|g],_[u=void 0===u?1:0|u],_[x=void 0===x?2:0|x],_[f=void 0===f?3:0|f],_[T=void 0===T?4:0|T],k[g],k[u],k[x],k[f],k[T],this.offset)},p.pick=function(g,u,x,f,T){var _=[],k=[],w=this.offset;return"number"==typeof g&&g>=0?w=w+this.stride[0]*g|0:(_.push(this.shape[0]),k.push(this.stride[0])),"number"==typeof u&&u>=0?w=w+this.stride[1]*u|0:(_.push(this.shape[1]),k.push(this.stride[1])),"number"==typeof x&&x>=0?w=w+this.stride[2]*x|0:(_.push(this.shape[2]),k.push(this.stride[2])),"number"==typeof f&&f>=0?w=w+this.stride[3]*f|0:(_.push(this.shape[3]),k.push(this.stride[3])),"number"==typeof T&&T>=0?w=w+this.stride[4]*T|0:(_.push(this.shape[4]),k.push(this.stride[4])),(0,s[_.length+1])(this.data,_,k,w)},function(g,u,x,f){return new l(g,u[0],u[1],u[2],u[3],u[4],x[0],x[1],x[2],x[3],x[4],f)}}};function d(i,s){var c=-1===s?"T":String(s),l=t[c];return-1===s?l(i):0===s?l(i,a[i][0]):l(i,a[i],o)}var a={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};b.exports=function(i,s,c,l){if(void 0===i)return(0,a.array[0])([]);"number"==typeof i&&(i=[i]),void 0===s&&(s=[i.length]);var p=s.length;if(void 0===c){c=new Array(p);for(var g=p-1,u=1;g>=0;--g)c[g]=u,u*=s[g]}if(void 0===l)for(l=0,g=0;g<p;++g)c[g]<0&&(l-=(s[g]-1)*c[g]);for(var x=function(T){if(e(T))return"buffer";if(n)switch(Object.prototype.toString.call(T)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(T)?"array":"generic"}(i),f=a[x];f.length<=p+1;)f.push(d(x,f.length-1));return(0,f[p+1])(i,s,c,l)}},{"is-buffer":237}],260:[function(v,b,h){"use strict";var e=v("double-bits"),n=Math.pow(2,-1074);b.exports=function(r,o){if(isNaN(r)||isNaN(o))return NaN;if(r===o)return r;if(0===r)return o<0?-n:n;var t=e.hi(r),d=e.lo(r);return o>r==r>0?d===-1>>>0?(t+=1,d=0):d+=1:0===d?(d=-1>>>0,t-=1):d-=1,e.pack(d,t)}},{"double-bits":64}],261:[function(v,b,h){h.vertexNormals=function(e,n,r){for(var o=n.length,t=new Array(o),d=void 0===r?1e-6:r,a=0;a<o;++a)t[a]=[0,0,0];for(a=0;a<e.length;++a)for(var i=e[a],c=i[i.length-1],l=i[0],p=0;p<i.length;++p){for(var g=n[c],u=n[c=l],x=n[l=i[(p+1)%i.length]],f=new Array(3),T=0,_=new Array(3),k=0,w=0;w<3;++w)f[w]=g[w]-u[w],T+=f[w]*f[w],_[w]=x[w]-u[w],k+=_[w]*_[w];if(T*k>d){var C=t[c],A=1/Math.sqrt(T*k);for(w=0;w<3;++w){var O=(w+1)%3,P=(w+2)%3;C[w]+=A*(_[O]*f[P]-_[P]*f[O])}}}for(a=0;a<o;++a){C=t[a];var S=0;for(w=0;w<3;++w)S+=C[w]*C[w];if(S>d)for(A=1/Math.sqrt(S),w=0;w<3;++w)C[w]*=A;else for(w=0;w<3;++w)C[w]=0}return t},h.faceNormals=function(e,n,r){for(var o=e.length,t=new Array(o),d=void 0===r?1e-6:r,a=0;a<o;++a){for(var i=e[a],s=new Array(3),c=0;c<3;++c)s[c]=n[i[c]];var l=new Array(3),p=new Array(3);for(c=0;c<3;++c)l[c]=s[1][c]-s[0][c],p[c]=s[2][c]-s[0][c];var g=new Array(3),u=0;for(c=0;c<3;++c){var x=(c+1)%3,f=(c+2)%3;g[c]=l[x]*p[f]-l[f]*p[x],u+=g[c]*g[c]}for(u=u>d?1/Math.sqrt(u):0,c=0;c<3;++c)g[c]*=u;t[a]=g}return t}},{}],262:[function(v,b,h){"use strict";b.exports=function(e,n,r,o,t,d,a,i,s,c){var l=n+d+c;if(p>0){var p=Math.sqrt(l+1);e[0]=.5*(a-s)/p,e[1]=.5*(i-o)/p,e[2]=.5*(r-d)/p,e[3]=.5*p}else{var g=Math.max(n,d,c);p=Math.sqrt(2*g-l+1),n>=g?(e[0]=.5*p,e[1]=.5*(t+r)/p,e[2]=.5*(i+o)/p,e[3]=.5*(a-s)/p):d>=g?(e[0]=.5*(r+t)/p,e[1]=.5*p,e[2]=.5*(s+a)/p,e[3]=.5*(i-o)/p):(e[0]=.5*(o+i)/p,e[1]=.5*(a+s)/p,e[2]=.5*p,e[3]=.5*(r-t)/p)}return e}},{}],263:[function(v,b,h){"use strict";b.exports=function(l){var p=(l=l||{}).center||[0,0,0],g=l.rotation||[0,0,0,1],u=l.radius||1;p=[].slice.call(p,0,3),i(g=[].slice.call(g,0,4),g);var x=new s(g,p,Math.log(u));return x.setDistanceLimits(l.zoomMin,l.zoomMax),("eye"in l||"up"in l)&&x.lookAt(0,l.eye,l.center,l.up),x};var e=v("filtered-vector"),n=v("gl-mat4/lookAt"),r=v("gl-mat4/fromQuat"),o=v("gl-mat4/invert"),t=v("./lib/quatFromFrame");function d(l,p,g){return Math.sqrt(Math.pow(l,2)+Math.pow(p,2)+Math.pow(g,2))}function a(l,p,g,u){return Math.sqrt(Math.pow(l,2)+Math.pow(p,2)+Math.pow(g,2)+Math.pow(u,2))}function i(l,p){var g=p[0],u=p[1],x=p[2],f=p[3],T=a(g,u,x,f);T>1e-6?(l[0]=g/T,l[1]=u/T,l[2]=x/T,l[3]=f/T):(l[0]=l[1]=l[2]=0,l[3]=1)}function s(l,p,g){this.radius=e([g]),this.center=e(p),this.rotation=e(l),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var c=s.prototype;c.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},c.recalcMatrix=function(l){this.radius.curve(l),this.center.curve(l),this.rotation.curve(l);var p=this.computedRotation;i(p,p);var g=this.computedMatrix;r(g,p);var u=this.computedCenter,x=this.computedEye,f=this.computedUp,T=Math.exp(this.computedRadius[0]);x[0]=u[0]+T*g[2],x[1]=u[1]+T*g[6],x[2]=u[2]+T*g[10],f[0]=g[1],f[1]=g[5],f[2]=g[9];for(var _=0;_<3;++_){for(var k=0,w=0;w<3;++w)k+=g[_+4*w]*x[w];g[12+_]=-k}},c.getMatrix=function(l,p){this.recalcMatrix(l);var g=this.computedMatrix;if(p){for(var u=0;u<16;++u)p[u]=g[u];return p}return g},c.idle=function(l){this.center.idle(l),this.radius.idle(l),this.rotation.idle(l)},c.flush=function(l){this.center.flush(l),this.radius.flush(l),this.rotation.flush(l)},c.pan=function(l,p,g,u){p=p||0,g=g||0,u=u||0,this.recalcMatrix(l);var x=this.computedMatrix,f=x[1],T=x[5],_=x[9],k=d(f,T,_),w=x[0],C=x[4],A=x[8],O=w*(f/=k)+C*(T/=k)+A*(_/=k),P=d(w-=f*O,C-=T*O,A-=_*O),S=x[2],E=x[6],D=x[10],z=S*f+E*T+D*_,N=S*(w/=P)+E*(C/=P)+D*(A/=P),V=d(S-=z*f+N*w,E-=z*T+N*C,D-=z*_+N*A);S/=V,E/=V,D/=V,this.center.move(l,w*p+f*g,C*p+T*g,A*p+_*g);var Z=Math.exp(this.computedRadius[0]);Z=Math.max(1e-4,Z+u),this.radius.set(l,Math.log(Z))},c.rotate=function(l,p,g,u){this.recalcMatrix(l);var x=this.computedMatrix,A=x[2],O=x[6],P=x[10],S=(p=p||0)*x[0]+(g=g||0)*x[1],E=p*x[4]+g*x[5],D=p*x[8]+g*x[9],z=-(O*D-P*E),N=-(P*S-A*D),V=-(A*E-O*S),X=Math.sqrt(Math.max(0,1-Math.pow(z,2)-Math.pow(N,2)-Math.pow(V,2))),J=a(z,N,V,X);J>1e-6?(z/=J,N/=J,V/=J,X/=J):(z=N=V=0,X=1);var G=this.computedRotation,Z=G[0],re=G[1],j=G[2],B=G[3],H=Z*X+B*z+re*V-j*N,ee=re*X+B*N+j*z-Z*V,U=j*X+B*V+Z*N-re*z,$=B*X-Z*z-re*N-j*V;if(u){z=A,N=O,V=P;var q=Math.sin(u)/d(z,N,V);z*=q,N*=q,V*=q,$=$*(X=Math.cos(p))-(H=H*X+$*z+ee*V-U*N)*z-(ee=ee*X+$*N+U*z-H*V)*N-(U=U*X+$*V+H*N-ee*z)*V}var te=a(H,ee,U,$);te>1e-6?(H/=te,ee/=te,U/=te,$/=te):(H=ee=U=0,$=1),this.rotation.set(l,H,ee,U,$)},c.lookAt=function(l,p,g,u){this.recalcMatrix(l);var x=this.computedMatrix;n(x,p=p||this.computedEye,g=g||this.computedCenter,u=u||this.computedUp);var f=this.computedRotation;t(f,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),i(f,f),this.rotation.set(l,f[0],f[1],f[2],f[3]);for(var T=0,_=0;_<3;++_)T+=Math.pow(g[_]-p[_],2);this.radius.set(l,.5*Math.log(Math.max(T,1e-6))),this.center.set(l,g[0],g[1],g[2])},c.translate=function(l,p,g,u){this.center.move(l,p||0,g||0,u||0)},c.setMatrix=function(l,p){var g=this.computedRotation;t(g,p[0],p[1],p[2],p[4],p[5],p[6],p[8],p[9],p[10]),i(g,g),this.rotation.set(l,g[0],g[1],g[2],g[3]);var u=this.computedMatrix;o(u,p);var x=u[15];if(Math.abs(x)>1e-6){var f=u[12]/x,T=u[13]/x,_=u[14]/x;this.recalcMatrix(l);var k=Math.exp(this.computedRadius[0]);this.center.set(l,f-u[2]*k,T-u[6]*k,_-u[10]*k),this.radius.idle(l)}else this.center.idle(l),this.radius.idle(l)},c.setDistance=function(l,p){p>0&&this.radius.set(l,Math.log(p))},c.setDistanceLimits=function(l,p){l=l>0?Math.log(l):-1/0,p=p>0?Math.log(p):1/0,p=Math.max(p,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=p},c.getDistanceLimits=function(l){var p=this.radius.bounds;return l?(l[0]=Math.exp(p[0][0]),l[1]=Math.exp(p[1][0]),l):[Math.exp(p[0][0]),Math.exp(p[1][0])]},c.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},c.fromJSON=function(l){var p=this.lastT(),g=l.center;g&&this.center.set(p,g[0],g[1],g[2]);var u=l.rotation;u&&this.rotation.set(p,u[0],u[1],u[2],u[3]);var x=l.distance;x&&x>0&&this.radius.set(p,Math.log(x)),this.setDistanceLimits(l.zoomMin,l.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(v,b,h){"use strict";var e=v("repeat-string");b.exports=function(n,r,o){return e(o=void 0!==o?o+"":" ",r)+n}},{"repeat-string":277}],265:[function(v,b,h){b.exports=function(e,n){n||(n=[0,""]),e=String(e);var r=parseFloat(e,10);return n[0]=r,n[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},{}],266:[function(v,b,h){"use strict";b.exports=function(n,r){for(var o=0|r.length,t=n.length,d=[new Array(o),new Array(o)],a=0;a<o;++a)d[0][a]=[],d[1][a]=[];for(a=0;a<t;++a){var i=n[a];d[0][i[0]].push(i),d[1][i[1]].push(i)}var _,s=[];for(a=0;a<o;++a)d[0][a].length+d[1][a].length===0&&s.push([a]);function c(T,_){var k=d[_][T[_]];k.splice(k.indexOf(T),1)}function l(T,_,k){for(var w,C,A,O=0;O<2;++O)if(d[O][_].length>0){w=d[O][_][0],A=O;break}C=w[1^A];for(var P=0;P<2;++P)for(var S=d[P][_],E=0;E<S.length;++E){var D=S[E],z=D[1^P];e(r[T],r[_],r[C],r[z])>0&&(w=D,C=z,A=P)}return k||w&&c(w,A),C}function p(T,_){var k=d[_][T][0],w=[T];c(k,_);for(var C=k[1^_];;){for(;C!==T;)w.push(C),C=l(w[w.length-2],C,!1);if(d[0][T].length+d[1][T].length===0)break;var A=w[w.length-1],O=T,P=w[1],S=l(A,O,!0);if(e(r[A],r[O],r[P],r[S])<0)break;w.push(T),C=l(A,O)}return w}for(a=0;a<o;++a)for(var u=0;u<2;++u){for(var x=[];d[u][a].length>0;){var f=p(a,u);(_=f)[1]===_[_.length-1]?x.push.apply(x,f):(x.length>0&&s.push(x),x=f)}x.length>0&&s.push(x)}return s};var e=v("compare-angle")},{"compare-angle":54}],267:[function(v,b,h){"use strict";b.exports=function(n,r){for(var o=e(n,r.length),t=new Array(r.length),d=new Array(r.length),a=[],i=0;i<r.length;++i){var s=o[i].length;d[i]=s,t[i]=!0,s<=1&&a.push(i)}for(;a.length>0;){var c=a.pop();t[c]=!1;var l=o[c];for(i=0;i<l.length;++i){var p=l[i];0==--d[p]&&a.push(p)}}var g=new Array(r.length),u=[];for(i=0;i<r.length;++i)t[i]?(g[i]=c=u.length,u.push(r[i])):g[i]=-1;var x=[];for(i=0;i<n.length;++i){var f=n[i];t[f[0]]&&t[f[1]]&&x.push([g[f[0]],g[f[1]]])}return[x,u]};var e=v("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(v,b,h){"use strict";b.exports=function(s,c){for(var l=a(s,c),p=(c=l[1]).length,g=e(s=l[0],c.length),u=0;u<p;++u)if(g[u].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var x=n(s,c),f=(x=x.filter(function(ie){for(var ue=ie.length,le=[0],de=0;de<ue;++de){var be=c[ie[de]],_e=c[ie[(de+1)%ue]],xe=o(-be[0],be[1]),Ee=o(-be[0],_e[1]),he=o(_e[0],be[1]),me=o(_e[0],_e[1]);le=t(le,t(t(xe,Ee),t(he,me)))}return le[le.length-1]>0})).length,T=new Array(f),_=new Array(f);for(u=0;u<f;++u){T[u]=u;var k=new Array(f),w=x[u].map(function(ie){return c[ie]}),C=r([w]),A=0;e:for(var O=0;O<f;++O)if(k[O]=0,u!==O){for(var P=(ne=x[O]).length,S=0;S<P;++S){var E=C(c[ne[S]]);if(0!==E){E<0&&(k[O]=1,A+=1);continue e}}k[O]=1,A+=1}_[u]=[A,u,k]}for(_.sort(function(ie,ue){return ue[0]-ie[0]}),u=0;u<f;++u){var D=(k=_[u])[1],z=k[2];for(O=0;O<f;++O)z[O]&&(T[O]=D)}var N=function(ie){for(var ue=new Array(ie),le=0;le<ie;++le)ue[le]=[];return ue}(f);for(u=0;u<f;++u)N[u].push(T[u]),N[T[u]].push(u);var V={},X=i(p,!1);for(u=0;u<f;++u)for(P=(ne=x[u]).length,O=0;O<P;++O){var J=ne[O],G=ne[(O+1)%P],Z=Math.min(J,G)+":"+Math.max(J,G);if(Z in V){var re=V[Z];N[re].push(u),N[u].push(re),X[J]=X[G]=!0}else V[Z]=u}function j(ie){for(var ue=ie.length,le=0;le<ue;++le)if(!X[ie[le]])return!1;return!0}var B=[],H=i(f,-1);for(u=0;u<f;++u)T[u]!==u||j(x[u])?H[u]=-1:(B.push(u),H[u]=0);for(l=[];B.length>0;){var ee=B.pop(),U=N[ee];d(U,function(ie,ue){return ie-ue});var $,q=U.length,te=H[ee];if(0===te){var ne=x[ee];$=[ne]}for(u=0;u<q;++u){var se=U[u];H[se]>=0||(H[se]=1^te,B.push(se),0===te&&(j(ne=x[se])||(ne.reverse(),$.push(ne))))}0===te&&l.push($)}return l};var e=v("edges-to-adjacency-list"),n=v("planar-dual"),r=v("point-in-big-polygon"),o=v("two-product"),t=v("robust-sum"),d=v("uniq"),a=v("./lib/trim-leaves");function i(s,c){for(var l=new Array(s),p=0;p<s;++p)l[p]=c;return l}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(v,b,h){b.exports=function(i){for(var s=i.length,c=[],l=[],p=0;p<s;++p)for(var g=i[p],u=g.length,x=u-1,f=0;f<u;x=f++){var T=g[x],_=g[f];T[0]===_[0]?l.push([T,_]):c.push([T,_])}if(0===c.length)return 0===l.length?a:(k=d(l),function(A){return k(A[0],A[1])?0:1});var k,A,O,w=n(c),C=(A=w.slabs,O=w.coordinates,function(P){var S=o.le(O,P[0]);if(S<0)return 1;var E=A[S];if(!E){if(!(S>0&&O[S]===P[0]))return 1;E=A[S-1]}for(var D=1;E;){var z=E.key,N=e(P,z[0],z[1]);if(z[0][0]<z[1][0])if(N<0)E=E.left;else{if(!(N>0))return 0;D=-1,E=E.right}else if(N>0)E=E.left;else{if(!(N<0))return 0;D=1,E=E.right}}return D});return 0===l.length?C:function(A,O){return function(P){return A(P[0],P[1])?0:O(P)}}(d(l),C)};var e=v("robust-orientation")[3],n=v("slab-decomposition"),r=v("interval-tree-1d"),o=v("binary-search-bounds");function t(){return!0}function d(i){for(var s={},c=0;c<i.length;++c){var l=i[c],p=l[0][0],g=l[0][1],u=l[1][1],x=[Math.min(g,u),Math.max(g,u)];p in s?s[p].push(x):s[p]=[x]}var k,f={},T=Object.keys(s);for(c=0;c<T.length;++c)f[T[c]]=r(s[T[c]]);return k=f,function(w,C){var A=k[w];return!!A&&!!A.queryPoint(C,t)}}function a(i){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(v,b,h){"use strict";var e=new Float64Array(4),n=new Float64Array(4),r=new Float64Array(4);b.exports=function(o,t,d,a,i){e.length<a.length&&(e=new Float64Array(a.length),n=new Float64Array(a.length),r=new Float64Array(a.length));for(var s=0;s<a.length;++s)e[s]=o[s]-a[s],n[s]=t[s]-o[s],r[s]=d[s]-o[s];var c=0,l=0,p=0,g=0,u=0,x=0;for(s=0;s<a.length;++s){var f=n[s],T=r[s],_=e[s];c+=f*f,l+=f*T,p+=T*T,g+=_*f,u+=_*T,x+=_*_}var k,w,C,A,O,P=Math.abs(c*p-l*l),S=l*u-p*g,E=l*g-c*u;if(S+E<=P)if(S<0)E<0&&g<0?(E=0,-g>=c?(S=1,k=c+2*g+x):k=g*(S=-g/c)+x):(S=0,u>=0?(E=0,k=x):-u>=p?(E=1,k=p+2*u+x):k=u*(E=-u/p)+x);else if(E<0)E=0,g>=0?(S=0,k=x):-g>=c?(S=1,k=c+2*g+x):k=g*(S=-g/c)+x;else{var D=1/P;k=(S*=D)*(c*S+l*(E*=D)+2*g)+E*(l*S+p*E+2*u)+x}else S<0?(C=p+u)>(w=l+g)?(A=C-w)>=(O=c-2*l+p)?(S=1,E=0,k=c+2*g+x):k=(S=A/O)*(c*S+l*(E=1-S)+2*g)+E*(l*S+p*E+2*u)+x:(S=0,C<=0?(E=1,k=p+2*u+x):u>=0?(E=0,k=x):k=u*(E=-u/p)+x):E<0?(C=c+g)>(w=l+u)?(A=C-w)>=(O=c-2*l+p)?(E=1,S=0,k=p+2*u+x):k=(S=1-(E=A/O))*(c*S+l*E+2*g)+E*(l*S+p*E+2*u)+x:(E=0,C<=0?(S=1,k=c+2*g+x):g>=0?(S=0,k=x):k=g*(S=-g/c)+x):(A=p+u-l-g)<=0?(S=0,E=1,k=p+2*u+x):A>=(O=c-2*l+p)?(S=1,E=0,k=c+2*g+x):k=(S=A/O)*(c*S+l*(E=1-S)+2*g)+E*(l*S+p*E+2*u)+x;var z=1-S-E;for(s=0;s<a.length;++s)i[s]=z*o[s]+S*t[s]+E*d[s];return k<0?0:k}},{}],271:[function(v,b,h){b.exports=v("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(v,b,h){"use strict";var e=v("big-rat/add");b.exports=function(n,r){for(var o=n.length,t=new Array(o),d=0;d<o;++d)t[d]=e(n[d],r[d]);return t}},{"big-rat/add":15}],273:[function(v,b,h){"use strict";b.exports=function(n){for(var r=new Array(n.length),o=0;o<n.length;++o)r[o]=e(n[o]);return r};var e=v("big-rat")},{"big-rat":18}],274:[function(v,b,h){"use strict";var e=v("big-rat"),n=v("big-rat/mul");b.exports=function(r,o){for(var t=e(o),d=r.length,a=new Array(d),i=0;i<d;++i)a[i]=n(r[i],t);return a}},{"big-rat":18,"big-rat/mul":27}],275:[function(v,b,h){"use strict";var e=v("big-rat/sub");b.exports=function(n,r){for(var o=n.length,t=new Array(o),d=0;d<o;++d)t[d]=e(n[d],r[d]);return t}},{"big-rat/sub":29}],276:[function(v,b,h){"use strict";var e=v("compare-cell"),n=v("compare-oriented-cell"),r=v("cell-orientation");b.exports=function(o){o.sort(n);for(var t=o.length,d=0,a=0;a<t;++a){var i=o[a],s=r(i);if(0!==s){if(d>0){var c=o[d-1];if(0===e(i,c)&&r(c)!==s){d-=1;continue}}o[d++]=i}}return o.length=d,o}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(v,b,h){"use strict";var e,n="";b.exports=function(r,o){if("string"!=typeof r)throw new TypeError("expected a string");if(1===o)return r;if(2===o)return r+r;var t=r.length*o;if(e!==r||void 0===e)e=r,n="";else if(n.length>=t)return n.substr(0,t);for(;t>n.length&&o>1;)1&o&&(n+=r),o>>=1,r+=r;return n=(n+=r).substr(0,t)}},{}],278:[function(v,b,h){(function(e){(function(){b.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==m?m:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(v,b,h){"use strict";b.exports=function(e){for(var n=e.length,r=e[e.length-1],o=n,t=n-2;t>=0;--t){var d=r,a=e[t];(s=a-((r=d+a)-d))&&(e[--o]=r,r=s)}var i=0;for(t=o;t<n;++t){var s;(s=(a=r)-((r=(d=e[t])+a)-d))&&(e[i++]=s)}return e[i++]=r,e.length=i,e}},{}],280:[function(v,b,h){"use strict";var e=v("two-product"),n=v("robust-sum"),r=v("robust-scale"),o=v("robust-compress");function t(p,g,u,x){return function(f){return x(p(u(f[0][0],f[1][1]),u(-f[0][1],f[1][0])))}}function d(p,g,u,x){return function(f){return x(p(g(p(u(f[1][1],f[2][2]),u(-f[1][2],f[2][1])),f[0][0]),p(g(p(u(f[1][0],f[2][2]),u(-f[1][2],f[2][0])),-f[0][1]),g(p(u(f[1][0],f[2][1]),u(-f[1][1],f[2][0])),f[0][2]))))}}function a(p,g,u,x){return function(f){return x(p(p(g(p(g(p(u(f[2][2],f[3][3]),u(-f[2][3],f[3][2])),f[1][1]),p(g(p(u(f[2][1],f[3][3]),u(-f[2][3],f[3][1])),-f[1][2]),g(p(u(f[2][1],f[3][2]),u(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),g(p(g(p(u(f[2][2],f[3][3]),u(-f[2][3],f[3][2])),f[1][0]),p(g(p(u(f[2][0],f[3][3]),u(-f[2][3],f[3][0])),-f[1][2]),g(p(u(f[2][0],f[3][2]),u(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),p(g(p(g(p(u(f[2][1],f[3][3]),u(-f[2][3],f[3][1])),f[1][0]),p(g(p(u(f[2][0],f[3][3]),u(-f[2][3],f[3][0])),-f[1][1]),g(p(u(f[2][0],f[3][1]),u(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),g(p(g(p(u(f[2][1],f[3][2]),u(-f[2][2],f[3][1])),f[1][0]),p(g(p(u(f[2][0],f[3][2]),u(-f[2][2],f[3][0])),-f[1][1]),g(p(u(f[2][0],f[3][1]),u(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function i(p,g,u,x){return function(f){return x(p(p(g(p(p(g(p(g(p(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][2]),p(g(p(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),-f[2][3]),g(p(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),g(p(g(p(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][1]),p(g(p(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),-f[2][3]),g(p(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),p(g(p(g(p(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),f[2][1]),p(g(p(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),-f[2][2]),g(p(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),g(p(g(p(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][1]),p(g(p(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),-f[2][2]),g(p(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),g(p(p(g(p(g(p(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][2]),p(g(p(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),-f[2][3]),g(p(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),g(p(g(p(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][0]),p(g(p(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][3]),g(p(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),p(g(p(g(p(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),f[2][0]),p(g(p(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][2]),g(p(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),g(p(g(p(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][0]),p(g(p(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),-f[2][2]),g(p(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),p(g(p(p(g(p(g(p(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][1]),p(g(p(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),-f[2][3]),g(p(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),g(p(g(p(u(f[3][3],f[4][4]),u(-f[3][4],f[4][3])),f[2][0]),p(g(p(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][3]),g(p(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),p(g(p(g(p(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),f[2][0]),p(g(p(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][1]),g(p(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),g(p(g(p(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),f[2][0]),p(g(p(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),-f[2][1]),g(p(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),p(g(p(p(g(p(g(p(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),f[2][1]),p(g(p(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),-f[2][2]),g(p(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),g(p(g(p(u(f[3][2],f[4][4]),u(-f[3][4],f[4][2])),f[2][0]),p(g(p(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][2]),g(p(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),p(g(p(g(p(u(f[3][1],f[4][4]),u(-f[3][4],f[4][1])),f[2][0]),p(g(p(u(f[3][0],f[4][4]),u(-f[3][4],f[4][0])),-f[2][1]),g(p(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),g(p(g(p(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][0]),p(g(p(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),-f[2][1]),g(p(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),g(p(p(g(p(g(p(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][1]),p(g(p(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),-f[2][2]),g(p(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),g(p(g(p(u(f[3][2],f[4][3]),u(-f[3][3],f[4][2])),f[2][0]),p(g(p(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),-f[2][2]),g(p(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),p(g(p(g(p(u(f[3][1],f[4][3]),u(-f[3][3],f[4][1])),f[2][0]),p(g(p(u(f[3][0],f[4][3]),u(-f[3][3],f[4][0])),-f[2][1]),g(p(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),g(p(g(p(u(f[3][1],f[4][2]),u(-f[3][2],f[4][1])),f[2][0]),p(g(p(u(f[3][0],f[4][2]),u(-f[3][2],f[4][0])),-f[2][1]),g(p(u(f[3][0],f[4][1]),u(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function s(p){return(2===p?t:3===p?d:4===p?a:5===p?i:void 0)(n,r,e,o)}var c=[function(){return[0]},function(p){return[p[0][0]]}];function l(p,g,u,x,f,T,_,k){return function(w){switch(w.length){case 0:return p(w);case 1:return g(w);case 2:return u(w);case 3:return x(w);case 4:return f(w);case 5:return T(w)}var C=_[w.length];return C||(C=_[w.length]=k(w.length)),C(w)}}!function(){for(;c.length<6;)c.push(s(c.length));b.exports=l.apply(void 0,c.concat([c,s]));for(var p=0;p<c.length;++p)b.exports[p]=c[p]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(v,b,h){"use strict";var e=v("two-product"),n=v("robust-sum");b.exports=function(r,o){for(var t=e(r[0],o[0]),d=1;d<r.length;++d)t=n(t,e(r[d],o[d]));return t}},{"robust-sum":289,"two-product":306}],282:[function(v,b,h){"use strict";var e=v("two-product"),n=v("robust-sum"),r=v("robust-subtract"),o=v("robust-scale");function t(g){return(3===g?d:4===g?a:5===g?i:s)(n,r,e,o)}function d(g,u,x,f){return function(T,_,k){var w=x(T[0],T[0]),C=f(w,_[0]),A=f(w,k[0]),O=x(_[0],_[0]),P=f(O,T[0]),S=f(O,k[0]),E=x(k[0],k[0]),D=f(E,T[0]),z=f(E,_[0]),N=g(u(z,S),u(P,C)),V=u(D,A),X=u(N,V);return X[X.length-1]}}function a(g,u,x,f){return function(T,_,k,w){var C=g(x(T[0],T[0]),x(T[1],T[1])),A=f(C,_[0]),O=f(C,k[0]),P=f(C,w[0]),S=g(x(_[0],_[0]),x(_[1],_[1])),E=f(S,T[0]),D=f(S,k[0]),z=f(S,w[0]),N=g(x(k[0],k[0]),x(k[1],k[1])),V=f(N,T[0]),X=f(N,_[0]),J=f(N,w[0]),G=g(x(w[0],w[0]),x(w[1],w[1])),Z=f(G,T[0]),re=f(G,_[0]),j=f(G,k[0]),B=g(g(f(u(j,J),_[1]),g(f(u(re,z),-k[1]),f(u(X,D),w[1]))),g(f(u(re,z),T[1]),g(f(u(Z,P),-_[1]),f(u(E,A),w[1])))),H=g(g(f(u(j,J),T[1]),g(f(u(Z,P),-k[1]),f(u(V,O),w[1]))),g(f(u(X,D),T[1]),g(f(u(V,O),-_[1]),f(u(E,A),k[1])))),ee=u(B,H);return ee[ee.length-1]}}function i(g,u,x,f){return function(T,_,k,w,C){var A=g(x(T[0],T[0]),g(x(T[1],T[1]),x(T[2],T[2]))),O=f(A,_[0]),P=f(A,k[0]),S=f(A,w[0]),E=f(A,C[0]),D=g(x(_[0],_[0]),g(x(_[1],_[1]),x(_[2],_[2]))),z=f(D,T[0]),N=f(D,k[0]),V=f(D,w[0]),X=f(D,C[0]),J=g(x(k[0],k[0]),g(x(k[1],k[1]),x(k[2],k[2]))),G=f(J,T[0]),Z=f(J,_[0]),re=f(J,w[0]),j=f(J,C[0]),B=g(x(w[0],w[0]),g(x(w[1],w[1]),x(w[2],w[2]))),H=f(B,T[0]),ee=f(B,_[0]),U=f(B,k[0]),$=f(B,C[0]),q=g(x(C[0],C[0]),g(x(C[1],C[1]),x(C[2],C[2]))),te=f(q,T[0]),ne=f(q,_[0]),se=f(q,k[0]),ie=f(q,w[0]),ue=g(g(g(f(g(f(u(ie,$),k[1]),g(f(u(se,j),-w[1]),f(u(U,re),C[1]))),_[2]),g(f(g(f(u(ie,$),_[1]),g(f(u(ne,X),-w[1]),f(u(ee,V),C[1]))),-k[2]),f(g(f(u(se,j),_[1]),g(f(u(ne,X),-k[1]),f(u(Z,N),C[1]))),w[2]))),g(f(g(f(u(U,re),_[1]),g(f(u(ee,V),-k[1]),f(u(Z,N),w[1]))),-C[2]),g(f(g(f(u(ie,$),_[1]),g(f(u(ne,X),-w[1]),f(u(ee,V),C[1]))),T[2]),f(g(f(u(ie,$),T[1]),g(f(u(te,E),-w[1]),f(u(H,S),C[1]))),-_[2])))),g(g(f(g(f(u(ne,X),T[1]),g(f(u(te,E),-_[1]),f(u(z,O),C[1]))),w[2]),g(f(g(f(u(ee,V),T[1]),g(f(u(H,S),-_[1]),f(u(z,O),w[1]))),-C[2]),f(g(f(u(U,re),_[1]),g(f(u(ee,V),-k[1]),f(u(Z,N),w[1]))),T[2]))),g(f(g(f(u(U,re),T[1]),g(f(u(H,S),-k[1]),f(u(G,P),w[1]))),-_[2]),g(f(g(f(u(ee,V),T[1]),g(f(u(H,S),-_[1]),f(u(z,O),w[1]))),k[2]),f(g(f(u(Z,N),T[1]),g(f(u(G,P),-_[1]),f(u(z,O),k[1]))),-w[2]))))),le=g(g(g(f(g(f(u(ie,$),k[1]),g(f(u(se,j),-w[1]),f(u(U,re),C[1]))),T[2]),f(g(f(u(ie,$),T[1]),g(f(u(te,E),-w[1]),f(u(H,S),C[1]))),-k[2])),g(f(g(f(u(se,j),T[1]),g(f(u(te,E),-k[1]),f(u(G,P),C[1]))),w[2]),f(g(f(u(U,re),T[1]),g(f(u(H,S),-k[1]),f(u(G,P),w[1]))),-C[2]))),g(g(f(g(f(u(se,j),_[1]),g(f(u(ne,X),-k[1]),f(u(Z,N),C[1]))),T[2]),f(g(f(u(se,j),T[1]),g(f(u(te,E),-k[1]),f(u(G,P),C[1]))),-_[2])),g(f(g(f(u(ne,X),T[1]),g(f(u(te,E),-_[1]),f(u(z,O),C[1]))),k[2]),f(g(f(u(Z,N),T[1]),g(f(u(G,P),-_[1]),f(u(z,O),k[1]))),-C[2])))),de=u(ue,le);return de[de.length-1]}}function s(g,u,x,f){return function(T,_,k,w,C,A){var O=g(g(x(T[0],T[0]),x(T[1],T[1])),g(x(T[2],T[2]),x(T[3],T[3]))),P=f(O,_[0]),S=f(O,k[0]),E=f(O,w[0]),D=f(O,C[0]),z=f(O,A[0]),N=g(g(x(_[0],_[0]),x(_[1],_[1])),g(x(_[2],_[2]),x(_[3],_[3]))),V=f(N,T[0]),X=f(N,k[0]),J=f(N,w[0]),G=f(N,C[0]),Z=f(N,A[0]),re=g(g(x(k[0],k[0]),x(k[1],k[1])),g(x(k[2],k[2]),x(k[3],k[3]))),j=f(re,T[0]),B=f(re,_[0]),H=f(re,w[0]),ee=f(re,C[0]),U=f(re,A[0]),$=g(g(x(w[0],w[0]),x(w[1],w[1])),g(x(w[2],w[2]),x(w[3],w[3]))),q=f($,T[0]),te=f($,_[0]),ne=f($,k[0]),se=f($,C[0]),ie=f($,A[0]),ue=g(g(x(C[0],C[0]),x(C[1],C[1])),g(x(C[2],C[2]),x(C[3],C[3]))),le=f(ue,T[0]),de=f(ue,_[0]),be=f(ue,k[0]),_e=f(ue,w[0]),xe=f(ue,A[0]),Ee=g(g(x(A[0],A[0]),x(A[1],A[1])),g(x(A[2],A[2]),x(A[3],A[3]))),he=f(Ee,T[0]),me=f(Ee,_[0]),Se=f(Ee,k[0]),Me=f(Ee,w[0]),Ie=f(Ee,C[0]),Fe=g(g(g(f(g(g(f(g(f(u(Ie,xe),w[1]),g(f(u(Me,ie),-C[1]),f(u(_e,se),A[1]))),k[2]),f(g(f(u(Ie,xe),k[1]),g(f(u(Se,U),-C[1]),f(u(be,ee),A[1]))),-w[2])),g(f(g(f(u(Me,ie),k[1]),g(f(u(Se,U),-w[1]),f(u(ne,H),A[1]))),C[2]),f(g(f(u(_e,se),k[1]),g(f(u(be,ee),-w[1]),f(u(ne,H),C[1]))),-A[2]))),_[3]),g(f(g(g(f(g(f(u(Ie,xe),w[1]),g(f(u(Me,ie),-C[1]),f(u(_e,se),A[1]))),_[2]),f(g(f(u(Ie,xe),_[1]),g(f(u(me,Z),-C[1]),f(u(de,G),A[1]))),-w[2])),g(f(g(f(u(Me,ie),_[1]),g(f(u(me,Z),-w[1]),f(u(te,J),A[1]))),C[2]),f(g(f(u(_e,se),_[1]),g(f(u(de,G),-w[1]),f(u(te,J),C[1]))),-A[2]))),-k[3]),f(g(g(f(g(f(u(Ie,xe),k[1]),g(f(u(Se,U),-C[1]),f(u(be,ee),A[1]))),_[2]),f(g(f(u(Ie,xe),_[1]),g(f(u(me,Z),-C[1]),f(u(de,G),A[1]))),-k[2])),g(f(g(f(u(Se,U),_[1]),g(f(u(me,Z),-k[1]),f(u(B,X),A[1]))),C[2]),f(g(f(u(be,ee),_[1]),g(f(u(de,G),-k[1]),f(u(B,X),C[1]))),-A[2]))),w[3]))),g(g(f(g(g(f(g(f(u(Me,ie),k[1]),g(f(u(Se,U),-w[1]),f(u(ne,H),A[1]))),_[2]),f(g(f(u(Me,ie),_[1]),g(f(u(me,Z),-w[1]),f(u(te,J),A[1]))),-k[2])),g(f(g(f(u(Se,U),_[1]),g(f(u(me,Z),-k[1]),f(u(B,X),A[1]))),w[2]),f(g(f(u(ne,H),_[1]),g(f(u(te,J),-k[1]),f(u(B,X),w[1]))),-A[2]))),-C[3]),f(g(g(f(g(f(u(_e,se),k[1]),g(f(u(be,ee),-w[1]),f(u(ne,H),C[1]))),_[2]),f(g(f(u(_e,se),_[1]),g(f(u(de,G),-w[1]),f(u(te,J),C[1]))),-k[2])),g(f(g(f(u(be,ee),_[1]),g(f(u(de,G),-k[1]),f(u(B,X),C[1]))),w[2]),f(g(f(u(ne,H),_[1]),g(f(u(te,J),-k[1]),f(u(B,X),w[1]))),-C[2]))),A[3])),g(f(g(g(f(g(f(u(Ie,xe),w[1]),g(f(u(Me,ie),-C[1]),f(u(_e,se),A[1]))),_[2]),f(g(f(u(Ie,xe),_[1]),g(f(u(me,Z),-C[1]),f(u(de,G),A[1]))),-w[2])),g(f(g(f(u(Me,ie),_[1]),g(f(u(me,Z),-w[1]),f(u(te,J),A[1]))),C[2]),f(g(f(u(_e,se),_[1]),g(f(u(de,G),-w[1]),f(u(te,J),C[1]))),-A[2]))),T[3]),f(g(g(f(g(f(u(Ie,xe),w[1]),g(f(u(Me,ie),-C[1]),f(u(_e,se),A[1]))),T[2]),f(g(f(u(Ie,xe),T[1]),g(f(u(he,z),-C[1]),f(u(le,D),A[1]))),-w[2])),g(f(g(f(u(Me,ie),T[1]),g(f(u(he,z),-w[1]),f(u(q,E),A[1]))),C[2]),f(g(f(u(_e,se),T[1]),g(f(u(le,D),-w[1]),f(u(q,E),C[1]))),-A[2]))),-_[3])))),g(g(g(f(g(g(f(g(f(u(Ie,xe),_[1]),g(f(u(me,Z),-C[1]),f(u(de,G),A[1]))),T[2]),f(g(f(u(Ie,xe),T[1]),g(f(u(he,z),-C[1]),f(u(le,D),A[1]))),-_[2])),g(f(g(f(u(me,Z),T[1]),g(f(u(he,z),-_[1]),f(u(V,P),A[1]))),C[2]),f(g(f(u(de,G),T[1]),g(f(u(le,D),-_[1]),f(u(V,P),C[1]))),-A[2]))),w[3]),f(g(g(f(g(f(u(Me,ie),_[1]),g(f(u(me,Z),-w[1]),f(u(te,J),A[1]))),T[2]),f(g(f(u(Me,ie),T[1]),g(f(u(he,z),-w[1]),f(u(q,E),A[1]))),-_[2])),g(f(g(f(u(me,Z),T[1]),g(f(u(he,z),-_[1]),f(u(V,P),A[1]))),w[2]),f(g(f(u(te,J),T[1]),g(f(u(q,E),-_[1]),f(u(V,P),w[1]))),-A[2]))),-C[3])),g(f(g(g(f(g(f(u(_e,se),_[1]),g(f(u(de,G),-w[1]),f(u(te,J),C[1]))),T[2]),f(g(f(u(_e,se),T[1]),g(f(u(le,D),-w[1]),f(u(q,E),C[1]))),-_[2])),g(f(g(f(u(de,G),T[1]),g(f(u(le,D),-_[1]),f(u(V,P),C[1]))),w[2]),f(g(f(u(te,J),T[1]),g(f(u(q,E),-_[1]),f(u(V,P),w[1]))),-C[2]))),A[3]),f(g(g(f(g(f(u(Me,ie),k[1]),g(f(u(Se,U),-w[1]),f(u(ne,H),A[1]))),_[2]),f(g(f(u(Me,ie),_[1]),g(f(u(me,Z),-w[1]),f(u(te,J),A[1]))),-k[2])),g(f(g(f(u(Se,U),_[1]),g(f(u(me,Z),-k[1]),f(u(B,X),A[1]))),w[2]),f(g(f(u(ne,H),_[1]),g(f(u(te,J),-k[1]),f(u(B,X),w[1]))),-A[2]))),T[3]))),g(g(f(g(g(f(g(f(u(Me,ie),k[1]),g(f(u(Se,U),-w[1]),f(u(ne,H),A[1]))),T[2]),f(g(f(u(Me,ie),T[1]),g(f(u(he,z),-w[1]),f(u(q,E),A[1]))),-k[2])),g(f(g(f(u(Se,U),T[1]),g(f(u(he,z),-k[1]),f(u(j,S),A[1]))),w[2]),f(g(f(u(ne,H),T[1]),g(f(u(q,E),-k[1]),f(u(j,S),w[1]))),-A[2]))),-_[3]),f(g(g(f(g(f(u(Me,ie),_[1]),g(f(u(me,Z),-w[1]),f(u(te,J),A[1]))),T[2]),f(g(f(u(Me,ie),T[1]),g(f(u(he,z),-w[1]),f(u(q,E),A[1]))),-_[2])),g(f(g(f(u(me,Z),T[1]),g(f(u(he,z),-_[1]),f(u(V,P),A[1]))),w[2]),f(g(f(u(te,J),T[1]),g(f(u(q,E),-_[1]),f(u(V,P),w[1]))),-A[2]))),k[3])),g(f(g(g(f(g(f(u(Se,U),_[1]),g(f(u(me,Z),-k[1]),f(u(B,X),A[1]))),T[2]),f(g(f(u(Se,U),T[1]),g(f(u(he,z),-k[1]),f(u(j,S),A[1]))),-_[2])),g(f(g(f(u(me,Z),T[1]),g(f(u(he,z),-_[1]),f(u(V,P),A[1]))),k[2]),f(g(f(u(B,X),T[1]),g(f(u(j,S),-_[1]),f(u(V,P),k[1]))),-A[2]))),-w[3]),f(g(g(f(g(f(u(ne,H),_[1]),g(f(u(te,J),-k[1]),f(u(B,X),w[1]))),T[2]),f(g(f(u(ne,H),T[1]),g(f(u(q,E),-k[1]),f(u(j,S),w[1]))),-_[2])),g(f(g(f(u(te,J),T[1]),g(f(u(q,E),-_[1]),f(u(V,P),w[1]))),k[2]),f(g(f(u(B,X),T[1]),g(f(u(j,S),-_[1]),f(u(V,P),k[1]))),-w[2]))),A[3]))))),Ne=g(g(g(f(g(g(f(g(f(u(Ie,xe),w[1]),g(f(u(Me,ie),-C[1]),f(u(_e,se),A[1]))),k[2]),f(g(f(u(Ie,xe),k[1]),g(f(u(Se,U),-C[1]),f(u(be,ee),A[1]))),-w[2])),g(f(g(f(u(Me,ie),k[1]),g(f(u(Se,U),-w[1]),f(u(ne,H),A[1]))),C[2]),f(g(f(u(_e,se),k[1]),g(f(u(be,ee),-w[1]),f(u(ne,H),C[1]))),-A[2]))),T[3]),g(f(g(g(f(g(f(u(Ie,xe),w[1]),g(f(u(Me,ie),-C[1]),f(u(_e,se),A[1]))),T[2]),f(g(f(u(Ie,xe),T[1]),g(f(u(he,z),-C[1]),f(u(le,D),A[1]))),-w[2])),g(f(g(f(u(Me,ie),T[1]),g(f(u(he,z),-w[1]),f(u(q,E),A[1]))),C[2]),f(g(f(u(_e,se),T[1]),g(f(u(le,D),-w[1]),f(u(q,E),C[1]))),-A[2]))),-k[3]),f(g(g(f(g(f(u(Ie,xe),k[1]),g(f(u(Se,U),-C[1]),f(u(be,ee),A[1]))),T[2]),f(g(f(u(Ie,xe),T[1]),g(f(u(he,z),-C[1]),f(u(le,D),A[1]))),-k[2])),g(f(g(f(u(Se,U),T[1]),g(f(u(he,z),-k[1]),f(u(j,S),A[1]))),C[2]),f(g(f(u(be,ee),T[1]),g(f(u(le,D),-k[1]),f(u(j,S),C[1]))),-A[2]))),w[3]))),g(g(f(g(g(f(g(f(u(Me,ie),k[1]),g(f(u(Se,U),-w[1]),f(u(ne,H),A[1]))),T[2]),f(g(f(u(Me,ie),T[1]),g(f(u(he,z),-w[1]),f(u(q,E),A[1]))),-k[2])),g(f(g(f(u(Se,U),T[1]),g(f(u(he,z),-k[1]),f(u(j,S),A[1]))),w[2]),f(g(f(u(ne,H),T[1]),g(f(u(q,E),-k[1]),f(u(j,S),w[1]))),-A[2]))),-C[3]),f(g(g(f(g(f(u(_e,se),k[1]),g(f(u(be,ee),-w[1]),f(u(ne,H),C[1]))),T[2]),f(g(f(u(_e,se),T[1]),g(f(u(le,D),-w[1]),f(u(q,E),C[1]))),-k[2])),g(f(g(f(u(be,ee),T[1]),g(f(u(le,D),-k[1]),f(u(j,S),C[1]))),w[2]),f(g(f(u(ne,H),T[1]),g(f(u(q,E),-k[1]),f(u(j,S),w[1]))),-C[2]))),A[3])),g(f(g(g(f(g(f(u(Ie,xe),k[1]),g(f(u(Se,U),-C[1]),f(u(be,ee),A[1]))),_[2]),f(g(f(u(Ie,xe),_[1]),g(f(u(me,Z),-C[1]),f(u(de,G),A[1]))),-k[2])),g(f(g(f(u(Se,U),_[1]),g(f(u(me,Z),-k[1]),f(u(B,X),A[1]))),C[2]),f(g(f(u(be,ee),_[1]),g(f(u(de,G),-k[1]),f(u(B,X),C[1]))),-A[2]))),T[3]),f(g(g(f(g(f(u(Ie,xe),k[1]),g(f(u(Se,U),-C[1]),f(u(be,ee),A[1]))),T[2]),f(g(f(u(Ie,xe),T[1]),g(f(u(he,z),-C[1]),f(u(le,D),A[1]))),-k[2])),g(f(g(f(u(Se,U),T[1]),g(f(u(he,z),-k[1]),f(u(j,S),A[1]))),C[2]),f(g(f(u(be,ee),T[1]),g(f(u(le,D),-k[1]),f(u(j,S),C[1]))),-A[2]))),-_[3])))),g(g(g(f(g(g(f(g(f(u(Ie,xe),_[1]),g(f(u(me,Z),-C[1]),f(u(de,G),A[1]))),T[2]),f(g(f(u(Ie,xe),T[1]),g(f(u(he,z),-C[1]),f(u(le,D),A[1]))),-_[2])),g(f(g(f(u(me,Z),T[1]),g(f(u(he,z),-_[1]),f(u(V,P),A[1]))),C[2]),f(g(f(u(de,G),T[1]),g(f(u(le,D),-_[1]),f(u(V,P),C[1]))),-A[2]))),k[3]),f(g(g(f(g(f(u(Se,U),_[1]),g(f(u(me,Z),-k[1]),f(u(B,X),A[1]))),T[2]),f(g(f(u(Se,U),T[1]),g(f(u(he,z),-k[1]),f(u(j,S),A[1]))),-_[2])),g(f(g(f(u(me,Z),T[1]),g(f(u(he,z),-_[1]),f(u(V,P),A[1]))),k[2]),f(g(f(u(B,X),T[1]),g(f(u(j,S),-_[1]),f(u(V,P),k[1]))),-A[2]))),-C[3])),g(f(g(g(f(g(f(u(be,ee),_[1]),g(f(u(de,G),-k[1]),f(u(B,X),C[1]))),T[2]),f(g(f(u(be,ee),T[1]),g(f(u(le,D),-k[1]),f(u(j,S),C[1]))),-_[2])),g(f(g(f(u(de,G),T[1]),g(f(u(le,D),-_[1]),f(u(V,P),C[1]))),k[2]),f(g(f(u(B,X),T[1]),g(f(u(j,S),-_[1]),f(u(V,P),k[1]))),-C[2]))),A[3]),f(g(g(f(g(f(u(_e,se),k[1]),g(f(u(be,ee),-w[1]),f(u(ne,H),C[1]))),_[2]),f(g(f(u(_e,se),_[1]),g(f(u(de,G),-w[1]),f(u(te,J),C[1]))),-k[2])),g(f(g(f(u(be,ee),_[1]),g(f(u(de,G),-k[1]),f(u(B,X),C[1]))),w[2]),f(g(f(u(ne,H),_[1]),g(f(u(te,J),-k[1]),f(u(B,X),w[1]))),-C[2]))),T[3]))),g(g(f(g(g(f(g(f(u(_e,se),k[1]),g(f(u(be,ee),-w[1]),f(u(ne,H),C[1]))),T[2]),f(g(f(u(_e,se),T[1]),g(f(u(le,D),-w[1]),f(u(q,E),C[1]))),-k[2])),g(f(g(f(u(be,ee),T[1]),g(f(u(le,D),-k[1]),f(u(j,S),C[1]))),w[2]),f(g(f(u(ne,H),T[1]),g(f(u(q,E),-k[1]),f(u(j,S),w[1]))),-C[2]))),-_[3]),f(g(g(f(g(f(u(_e,se),_[1]),g(f(u(de,G),-w[1]),f(u(te,J),C[1]))),T[2]),f(g(f(u(_e,se),T[1]),g(f(u(le,D),-w[1]),f(u(q,E),C[1]))),-_[2])),g(f(g(f(u(de,G),T[1]),g(f(u(le,D),-_[1]),f(u(V,P),C[1]))),w[2]),f(g(f(u(te,J),T[1]),g(f(u(q,E),-_[1]),f(u(V,P),w[1]))),-C[2]))),k[3])),g(f(g(g(f(g(f(u(be,ee),_[1]),g(f(u(de,G),-k[1]),f(u(B,X),C[1]))),T[2]),f(g(f(u(be,ee),T[1]),g(f(u(le,D),-k[1]),f(u(j,S),C[1]))),-_[2])),g(f(g(f(u(de,G),T[1]),g(f(u(le,D),-_[1]),f(u(V,P),C[1]))),k[2]),f(g(f(u(B,X),T[1]),g(f(u(j,S),-_[1]),f(u(V,P),k[1]))),-C[2]))),-w[3]),f(g(g(f(g(f(u(ne,H),_[1]),g(f(u(te,J),-k[1]),f(u(B,X),w[1]))),T[2]),f(g(f(u(ne,H),T[1]),g(f(u(q,E),-k[1]),f(u(j,S),w[1]))),-_[2])),g(f(g(f(u(te,J),T[1]),g(f(u(q,E),-_[1]),f(u(V,P),w[1]))),k[2]),f(g(f(u(B,X),T[1]),g(f(u(j,S),-_[1]),f(u(V,P),k[1]))),-w[2]))),C[3]))))),De=u(Fe,Ne);return De[De.length-1]}}var c=[function(){return 0},function(){return 0},function(){return 0}];function l(g){var u=c[g.length];return u||(u=c[g.length]=t(g.length)),u.apply(void 0,g)}function p(g,u,x,f,T,_,k,w){return function(C,A,O,P,S,E){switch(arguments.length){case 0:case 1:return 0;case 2:return f(C,A);case 3:return T(C,A,O);case 4:return _(C,A,O,P);case 5:return k(C,A,O,P,S);case 6:return w(C,A,O,P,S,E)}for(var D=new Array(arguments.length),z=0;z<arguments.length;++z)D[z]=arguments[z];return g(D)}}!function(){for(;c.length<=6;)c.push(t(c.length));b.exports=p.apply(void 0,[l].concat(c));for(var g=0;g<=6;++g)b.exports[g]=c[g]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(v,b,h){"use strict";var e=v("robust-determinant");function n(c){return(2===c?r:3===c?o:4===c?t:5===c?d:a)(c<6?e[c]:e)}function r(c){return function(l,p){return[c([[+p[0],+l[0][1]],[+p[1],+l[1][1]]]),c([[+l[0][0],+p[0]],[+l[1][0],+p[1]]]),c(l)]}}function o(c){return function(l,p){return[c([[+p[0],+l[0][1],+l[0][2]],[+p[1],+l[1][1],+l[1][2]],[+p[2],+l[2][1],+l[2][2]]]),c([[+l[0][0],+p[0],+l[0][2]],[+l[1][0],+p[1],+l[1][2]],[+l[2][0],+p[2],+l[2][2]]]),c([[+l[0][0],+l[0][1],+p[0]],[+l[1][0],+l[1][1],+p[1]],[+l[2][0],+l[2][1],+p[2]]]),c(l)]}}function t(c){return function(l,p){return[c([[+p[0],+l[0][1],+l[0][2],+l[0][3]],[+p[1],+l[1][1],+l[1][2],+l[1][3]],[+p[2],+l[2][1],+l[2][2],+l[2][3]],[+p[3],+l[3][1],+l[3][2],+l[3][3]]]),c([[+l[0][0],+p[0],+l[0][2],+l[0][3]],[+l[1][0],+p[1],+l[1][2],+l[1][3]],[+l[2][0],+p[2],+l[2][2],+l[2][3]],[+l[3][0],+p[3],+l[3][2],+l[3][3]]]),c([[+l[0][0],+l[0][1],+p[0],+l[0][3]],[+l[1][0],+l[1][1],+p[1],+l[1][3]],[+l[2][0],+l[2][1],+p[2],+l[2][3]],[+l[3][0],+l[3][1],+p[3],+l[3][3]]]),c([[+l[0][0],+l[0][1],+l[0][2],+p[0]],[+l[1][0],+l[1][1],+l[1][2],+p[1]],[+l[2][0],+l[2][1],+l[2][2],+p[2]],[+l[3][0],+l[3][1],+l[3][2],+p[3]]]),c(l)]}}function d(c){return function(l,p){return[c([[+p[0],+l[0][1],+l[0][2],+l[0][3],+l[0][4]],[+p[1],+l[1][1],+l[1][2],+l[1][3],+l[1][4]],[+p[2],+l[2][1],+l[2][2],+l[2][3],+l[2][4]],[+p[3],+l[3][1],+l[3][2],+l[3][3],+l[3][4]],[+p[4],+l[4][1],+l[4][2],+l[4][3],+l[4][4]]]),c([[+l[0][0],+p[0],+l[0][2],+l[0][3],+l[0][4]],[+l[1][0],+p[1],+l[1][2],+l[1][3],+l[1][4]],[+l[2][0],+p[2],+l[2][2],+l[2][3],+l[2][4]],[+l[3][0],+p[3],+l[3][2],+l[3][3],+l[3][4]],[+l[4][0],+p[4],+l[4][2],+l[4][3],+l[4][4]]]),c([[+l[0][0],+l[0][1],+p[0],+l[0][3],+l[0][4]],[+l[1][0],+l[1][1],+p[1],+l[1][3],+l[1][4]],[+l[2][0],+l[2][1],+p[2],+l[2][3],+l[2][4]],[+l[3][0],+l[3][1],+p[3],+l[3][3],+l[3][4]],[+l[4][0],+l[4][1],+p[4],+l[4][3],+l[4][4]]]),c([[+l[0][0],+l[0][1],+l[0][2],+p[0],+l[0][4]],[+l[1][0],+l[1][1],+l[1][2],+p[1],+l[1][4]],[+l[2][0],+l[2][1],+l[2][2],+p[2],+l[2][4]],[+l[3][0],+l[3][1],+l[3][2],+p[3],+l[3][4]],[+l[4][0],+l[4][1],+l[4][2],+p[4],+l[4][4]]]),c([[+l[0][0],+l[0][1],+l[0][2],+l[0][3],+p[0]],[+l[1][0],+l[1][1],+l[1][2],+l[1][3],+p[1]],[+l[2][0],+l[2][1],+l[2][2],+l[2][3],+p[2]],[+l[3][0],+l[3][1],+l[3][2],+l[3][3],+p[3]],[+l[4][0],+l[4][1],+l[4][2],+l[4][3],+p[4]]]),c(l)]}}function a(c){return function(l,p){return[c([[+p[0],+l[0][1],+l[0][2],+l[0][3],+l[0][4],+l[0][5]],[+p[1],+l[1][1],+l[1][2],+l[1][3],+l[1][4],+l[1][5]],[+p[2],+l[2][1],+l[2][2],+l[2][3],+l[2][4],+l[2][5]],[+p[3],+l[3][1],+l[3][2],+l[3][3],+l[3][4],+l[3][5]],[+p[4],+l[4][1],+l[4][2],+l[4][3],+l[4][4],+l[4][5]],[+p[5],+l[5][1],+l[5][2],+l[5][3],+l[5][4],+l[5][5]]]),c([[+l[0][0],+p[0],+l[0][2],+l[0][3],+l[0][4],+l[0][5]],[+l[1][0],+p[1],+l[1][2],+l[1][3],+l[1][4],+l[1][5]],[+l[2][0],+p[2],+l[2][2],+l[2][3],+l[2][4],+l[2][5]],[+l[3][0],+p[3],+l[3][2],+l[3][3],+l[3][4],+l[3][5]],[+l[4][0],+p[4],+l[4][2],+l[4][3],+l[4][4],+l[4][5]],[+l[5][0],+p[5],+l[5][2],+l[5][3],+l[5][4],+l[5][5]]]),c([[+l[0][0],+l[0][1],+p[0],+l[0][3],+l[0][4],+l[0][5]],[+l[1][0],+l[1][1],+p[1],+l[1][3],+l[1][4],+l[1][5]],[+l[2][0],+l[2][1],+p[2],+l[2][3],+l[2][4],+l[2][5]],[+l[3][0],+l[3][1],+p[3],+l[3][3],+l[3][4],+l[3][5]],[+l[4][0],+l[4][1],+p[4],+l[4][3],+l[4][4],+l[4][5]],[+l[5][0],+l[5][1],+p[5],+l[5][3],+l[5][4],+l[5][5]]]),c([[+l[0][0],+l[0][1],+l[0][2],+p[0],+l[0][4],+l[0][5]],[+l[1][0],+l[1][1],+l[1][2],+p[1],+l[1][4],+l[1][5]],[+l[2][0],+l[2][1],+l[2][2],+p[2],+l[2][4],+l[2][5]],[+l[3][0],+l[3][1],+l[3][2],+p[3],+l[3][4],+l[3][5]],[+l[4][0],+l[4][1],+l[4][2],+p[4],+l[4][4],+l[4][5]],[+l[5][0],+l[5][1],+l[5][2],+p[5],+l[5][4],+l[5][5]]]),c([[+l[0][0],+l[0][1],+l[0][2],+l[0][3],+p[0],+l[0][5]],[+l[1][0],+l[1][1],+l[1][2],+l[1][3],+p[1],+l[1][5]],[+l[2][0],+l[2][1],+l[2][2],+l[2][3],+p[2],+l[2][5]],[+l[3][0],+l[3][1],+l[3][2],+l[3][3],+p[3],+l[3][5]],[+l[4][0],+l[4][1],+l[4][2],+l[4][3],+p[4],+l[4][5]],[+l[5][0],+l[5][1],+l[5][2],+l[5][3],+p[5],+l[5][5]]]),c([[+l[0][0],+l[0][1],+l[0][2],+l[0][3],+l[0][4],+p[0]],[+l[1][0],+l[1][1],+l[1][2],+l[1][3],+l[1][4],+p[1]],[+l[2][0],+l[2][1],+l[2][2],+l[2][3],+l[2][4],+p[2]],[+l[3][0],+l[3][1],+l[3][2],+l[3][3],+l[3][4],+p[3]],[+l[4][0],+l[4][1],+l[4][2],+l[4][3],+l[4][4],+p[4]],[+l[5][0],+l[5][1],+l[5][2],+l[5][3],+l[5][4],+p[5]]]),c(l)]}}var i=[function(){return[[0]]},function(c,l){return[[l[0]],[c[0][0]]]}];function s(c,l,p,g,u,x,f,T){return function(_,k){switch(_.length){case 0:return c(_,k);case 1:return l(_,k);case 2:return p(_,k);case 3:return g(_,k);case 4:return u(_,k);case 5:return x(_,k)}var w=f[_.length];return w||(w=f[_.length]=T(_.length)),w(_,k)}}!function(){for(;i.length<6;)i.push(n(i.length));b.exports=s.apply(void 0,i.concat([i,n]));for(var c=0;c<6;++c)b.exports[c]=i[c]}()},{"robust-determinant":280}],284:[function(v,b,h){"use strict";var e=v("two-product"),n=v("robust-sum"),r=v("robust-scale"),o=v("robust-subtract");function t(u,x,f,T){return function(_,k,w){var C=u(u(x(k[1],w[0]),x(-w[1],k[0])),u(x(_[1],k[0]),x(-k[1],_[0]))),A=u(x(_[1],w[0]),x(-w[1],_[0])),O=T(C,A);return O[O.length-1]}}function d(u,x,f,T){return function(_,k,w,C){var A=u(u(f(u(x(w[1],C[0]),x(-C[1],w[0])),k[2]),u(f(u(x(k[1],C[0]),x(-C[1],k[0])),-w[2]),f(u(x(k[1],w[0]),x(-w[1],k[0])),C[2]))),u(f(u(x(k[1],C[0]),x(-C[1],k[0])),_[2]),u(f(u(x(_[1],C[0]),x(-C[1],_[0])),-k[2]),f(u(x(_[1],k[0]),x(-k[1],_[0])),C[2])))),O=u(u(f(u(x(w[1],C[0]),x(-C[1],w[0])),_[2]),u(f(u(x(_[1],C[0]),x(-C[1],_[0])),-w[2]),f(u(x(_[1],w[0]),x(-w[1],_[0])),C[2]))),u(f(u(x(k[1],w[0]),x(-w[1],k[0])),_[2]),u(f(u(x(_[1],w[0]),x(-w[1],_[0])),-k[2]),f(u(x(_[1],k[0]),x(-k[1],_[0])),w[2])))),P=T(A,O);return P[P.length-1]}}function a(u,x,f,T){return function(_,k,w,C,A){var O=u(u(u(f(u(f(u(x(C[1],A[0]),x(-A[1],C[0])),w[2]),u(f(u(x(w[1],A[0]),x(-A[1],w[0])),-C[2]),f(u(x(w[1],C[0]),x(-C[1],w[0])),A[2]))),k[3]),u(f(u(f(u(x(C[1],A[0]),x(-A[1],C[0])),k[2]),u(f(u(x(k[1],A[0]),x(-A[1],k[0])),-C[2]),f(u(x(k[1],C[0]),x(-C[1],k[0])),A[2]))),-w[3]),f(u(f(u(x(w[1],A[0]),x(-A[1],w[0])),k[2]),u(f(u(x(k[1],A[0]),x(-A[1],k[0])),-w[2]),f(u(x(k[1],w[0]),x(-w[1],k[0])),A[2]))),C[3]))),u(f(u(f(u(x(w[1],C[0]),x(-C[1],w[0])),k[2]),u(f(u(x(k[1],C[0]),x(-C[1],k[0])),-w[2]),f(u(x(k[1],w[0]),x(-w[1],k[0])),C[2]))),-A[3]),u(f(u(f(u(x(C[1],A[0]),x(-A[1],C[0])),k[2]),u(f(u(x(k[1],A[0]),x(-A[1],k[0])),-C[2]),f(u(x(k[1],C[0]),x(-C[1],k[0])),A[2]))),_[3]),f(u(f(u(x(C[1],A[0]),x(-A[1],C[0])),_[2]),u(f(u(x(_[1],A[0]),x(-A[1],_[0])),-C[2]),f(u(x(_[1],C[0]),x(-C[1],_[0])),A[2]))),-k[3])))),u(u(f(u(f(u(x(k[1],A[0]),x(-A[1],k[0])),_[2]),u(f(u(x(_[1],A[0]),x(-A[1],_[0])),-k[2]),f(u(x(_[1],k[0]),x(-k[1],_[0])),A[2]))),C[3]),u(f(u(f(u(x(k[1],C[0]),x(-C[1],k[0])),_[2]),u(f(u(x(_[1],C[0]),x(-C[1],_[0])),-k[2]),f(u(x(_[1],k[0]),x(-k[1],_[0])),C[2]))),-A[3]),f(u(f(u(x(w[1],C[0]),x(-C[1],w[0])),k[2]),u(f(u(x(k[1],C[0]),x(-C[1],k[0])),-w[2]),f(u(x(k[1],w[0]),x(-w[1],k[0])),C[2]))),_[3]))),u(f(u(f(u(x(w[1],C[0]),x(-C[1],w[0])),_[2]),u(f(u(x(_[1],C[0]),x(-C[1],_[0])),-w[2]),f(u(x(_[1],w[0]),x(-w[1],_[0])),C[2]))),-k[3]),u(f(u(f(u(x(k[1],C[0]),x(-C[1],k[0])),_[2]),u(f(u(x(_[1],C[0]),x(-C[1],_[0])),-k[2]),f(u(x(_[1],k[0]),x(-k[1],_[0])),C[2]))),w[3]),f(u(f(u(x(k[1],w[0]),x(-w[1],k[0])),_[2]),u(f(u(x(_[1],w[0]),x(-w[1],_[0])),-k[2]),f(u(x(_[1],k[0]),x(-k[1],_[0])),w[2]))),-C[3]))))),P=u(u(u(f(u(f(u(x(C[1],A[0]),x(-A[1],C[0])),w[2]),u(f(u(x(w[1],A[0]),x(-A[1],w[0])),-C[2]),f(u(x(w[1],C[0]),x(-C[1],w[0])),A[2]))),_[3]),f(u(f(u(x(C[1],A[0]),x(-A[1],C[0])),_[2]),u(f(u(x(_[1],A[0]),x(-A[1],_[0])),-C[2]),f(u(x(_[1],C[0]),x(-C[1],_[0])),A[2]))),-w[3])),u(f(u(f(u(x(w[1],A[0]),x(-A[1],w[0])),_[2]),u(f(u(x(_[1],A[0]),x(-A[1],_[0])),-w[2]),f(u(x(_[1],w[0]),x(-w[1],_[0])),A[2]))),C[3]),f(u(f(u(x(w[1],C[0]),x(-C[1],w[0])),_[2]),u(f(u(x(_[1],C[0]),x(-C[1],_[0])),-w[2]),f(u(x(_[1],w[0]),x(-w[1],_[0])),C[2]))),-A[3]))),u(u(f(u(f(u(x(w[1],A[0]),x(-A[1],w[0])),k[2]),u(f(u(x(k[1],A[0]),x(-A[1],k[0])),-w[2]),f(u(x(k[1],w[0]),x(-w[1],k[0])),A[2]))),_[3]),f(u(f(u(x(w[1],A[0]),x(-A[1],w[0])),_[2]),u(f(u(x(_[1],A[0]),x(-A[1],_[0])),-w[2]),f(u(x(_[1],w[0]),x(-w[1],_[0])),A[2]))),-k[3])),u(f(u(f(u(x(k[1],A[0]),x(-A[1],k[0])),_[2]),u(f(u(x(_[1],A[0]),x(-A[1],_[0])),-k[2]),f(u(x(_[1],k[0]),x(-k[1],_[0])),A[2]))),w[3]),f(u(f(u(x(k[1],w[0]),x(-w[1],k[0])),_[2]),u(f(u(x(_[1],w[0]),x(-w[1],_[0])),-k[2]),f(u(x(_[1],k[0]),x(-k[1],_[0])),w[2]))),-A[3])))),S=T(O,P);return S[S.length-1]}}function i(u){return(3===u?t:4===u?d:a)(n,e,r,o)}var s=i(3),c=i(4),l=[function(){return 0},function(){return 0},function(u,x){return x[0]-u[0]},function(u,x,f){var T,_=(u[1]-f[1])*(x[0]-f[0]),k=(u[0]-f[0])*(x[1]-f[1]),w=_-k;if(_>0){if(k<=0)return w;T=_+k}else{if(!(_<0)||k>=0)return w;T=-(_+k)}var C=33306690738754716e-32*T;return w>=C||w<=-C?w:s(u,x,f)},function(u,x,f,T){var _=u[0]-T[0],k=x[0]-T[0],w=f[0]-T[0],C=u[1]-T[1],A=x[1]-T[1],O=f[1]-T[1],P=u[2]-T[2],S=x[2]-T[2],E=f[2]-T[2],D=k*O,z=w*A,N=w*C,V=_*O,X=_*A,J=k*C,G=P*(D-z)+S*(N-V)+E*(X-J),Z=7771561172376103e-31*((Math.abs(D)+Math.abs(z))*Math.abs(P)+(Math.abs(N)+Math.abs(V))*Math.abs(S)+(Math.abs(X)+Math.abs(J))*Math.abs(E));return G>Z||-G>Z?G:c(u,x,f,T)}];function p(u){var x=l[u.length];return x||(x=l[u.length]=i(u.length)),x.apply(void 0,u)}function g(u,x,f,T,_,k,w){return function(C,A,O,P,S){switch(arguments.length){case 0:case 1:return 0;case 2:return T(C,A);case 3:return _(C,A,O);case 4:return k(C,A,O,P);case 5:return w(C,A,O,P,S)}for(var E=new Array(arguments.length),D=0;D<arguments.length;++D)E[D]=arguments[D];return u(E)}}!function(){for(;l.length<=5;)l.push(i(l.length));b.exports=g.apply(void 0,[p].concat(l));for(var u=0;u<=5;++u)b.exports[u]=l[u]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(v,b,h){"use strict";var e=v("robust-sum"),n=v("robust-scale");b.exports=function(r,o){if(1===r.length)return n(o,r[0]);if(1===o.length)return n(r,o[0]);if(0===r.length||0===o.length)return[0];var t=[0];if(r.length<o.length)for(var d=0;d<r.length;++d)t=e(t,n(o,r[d]));else for(d=0;d<o.length;++d)t=e(t,n(r,o[d]));return t}},{"robust-scale":286,"robust-sum":289}],286:[function(v,b,h){"use strict";var e=v("two-product"),n=v("two-sum");b.exports=function(r,o){var t=r.length;if(1===t){var d=e(r[0],o);return d[0]?d:[d[1]]}var a=new Array(2*t),i=[.1,.1],s=[.1,.1],c=0;e(r[0],o,i),i[0]&&(a[c++]=i[0]);for(var l=1;l<t;++l){e(r[l],o,s),n(i[1],s[0],i),i[0]&&(a[c++]=i[0]);var g=s[1],u=i[1],x=g+u,f=u-(x-g);i[1]=x,f&&(a[c++]=f)}return i[1]&&(a[c++]=i[1]),0===c&&(a[c++]=0),a.length=c,a}},{"two-product":306,"two-sum":307}],287:[function(v,b,h){"use strict";b.exports=function(n,r,o,t){var d=e(n,o,t),a=e(r,o,t);if(d>0&&a>0||d<0&&a<0)return!1;var i=e(o,n,r),s=e(t,n,r);return!(i>0&&s>0||i<0&&s<0)&&(0!==d||0!==a||0!==i||0!==s||function(c,l,p,g){for(var u=0;u<2;++u){var x=c[u],f=l[u],T=Math.min(x,f),_=Math.max(x,f),k=p[u],w=g[u],C=Math.min(k,w);if(Math.max(k,w)<T||_<C)return!1}return!0}(n,r,o,t))};var e=v("robust-orientation")[3]},{"robust-orientation":284}],288:[function(v,b,h){"use strict";b.exports=function(e,n){var O,P,S,E,D,r=0|e.length,o=0|n.length;if(1===r&&1===o)return(D=(O=e[0])-((S=O+(P=-n[0]))-(E=S-O))+(P-E))?[D,S]:[S];var t,d,a=new Array(r+o),i=0,s=0,c=0,l=Math.abs,p=e[s],g=l(p),u=-n[c],x=l(u);g<x?(d=p,(s+=1)<r&&(g=l(p=e[s]))):(d=u,(c+=1)<o&&(x=l(u=-n[c]))),s<r&&g<x||c>=o?(t=p,(s+=1)<r&&(g=l(p=e[s]))):(t=u,(c+=1)<o&&(x=l(u=-n[c])));for(var f,T,_=t+d,k=_-t,w=d-k,C=w,A=_;s<r&&c<o;)g<x?(t=p,(s+=1)<r&&(g=l(p=e[s]))):(t=u,(c+=1)<o&&(x=l(u=-n[c]))),(w=(d=C)-(k=(_=t+d)-t))&&(a[i++]=w),C=A-((f=A+_)-(T=f-A))+(_-T),A=f;for(;s<r;)(w=(d=C)-(k=(_=(t=p)+d)-t))&&(a[i++]=w),C=A-((f=A+_)-(T=f-A))+(_-T),A=f,(s+=1)<r&&(p=e[s]);for(;c<o;)(w=(d=C)-(k=(_=(t=u)+d)-t))&&(a[i++]=w),C=A-((f=A+_)-(T=f-A))+(_-T),A=f,(c+=1)<o&&(u=-n[c]);return C&&(a[i++]=C),A&&(a[i++]=A),i||(a[i++]=0),a.length=i,a}},{}],289:[function(v,b,h){"use strict";b.exports=function(e,n){var O,P,S,E,D,r=0|e.length,o=0|n.length;if(1===r&&1===o)return(D=(O=e[0])-((S=O+(P=n[0]))-(E=S-O))+(P-E))?[D,S]:[S];var t,d,a=new Array(r+o),i=0,s=0,c=0,l=Math.abs,p=e[s],g=l(p),u=n[c],x=l(u);g<x?(d=p,(s+=1)<r&&(g=l(p=e[s]))):(d=u,(c+=1)<o&&(x=l(u=n[c]))),s<r&&g<x||c>=o?(t=p,(s+=1)<r&&(g=l(p=e[s]))):(t=u,(c+=1)<o&&(x=l(u=n[c])));for(var f,T,_=t+d,k=_-t,w=d-k,C=w,A=_;s<r&&c<o;)g<x?(t=p,(s+=1)<r&&(g=l(p=e[s]))):(t=u,(c+=1)<o&&(x=l(u=n[c]))),(w=(d=C)-(k=(_=t+d)-t))&&(a[i++]=w),C=A-((f=A+_)-(T=f-A))+(_-T),A=f;for(;s<r;)(w=(d=C)-(k=(_=(t=p)+d)-t))&&(a[i++]=w),C=A-((f=A+_)-(T=f-A))+(_-T),A=f,(s+=1)<r&&(p=e[s]);for(;c<o;)(w=(d=C)-(k=(_=(t=u)+d)-t))&&(a[i++]=w),C=A-((f=A+_)-(T=f-A))+(_-T),A=f,(c+=1)<o&&(u=n[c]);return C&&(a[i++]=C),A&&(a[i++]=A),i||(a[i++]=0),a.length=i,a}},{}],290:[function(v,b,h){"use strict";b.exports=function(r){return n(e(r))};var e=v("boundary-cells"),n=v("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(v,b,h){"use strict";b.exports=function(t,d,a,i){if(a=a||0,void 0===i&&(i=function(f){for(var T=f.length,_=0,k=0;k<T;++k)_=0|Math.max(_,f[k].length);return _-1}(t)),0===t.length||i<1)return{cells:[],vertexIds:[],vertexWeights:[]};var s=function(f,T){for(var _=f.length,k=n.mallocUint8(_),w=0;w<_;++w)k[w]=f[w]<T|0;return k}(d,+a),c=function(f,T){for(var _=f.length,w=n.mallocUint32(2*(T*(T+1)/2*_|0)),C=0,A=0;A<_;++A)for(var O=f[A],P=(T=O.length,0);P<T;++P)for(var S=0;S<P;++S){var E=O[S],D=O[P];w[C++]=0|Math.min(E,D),w[C++]=0|Math.max(E,D)}r(e(w,[C/2|0,2]));var z=2;for(A=2;A<C;A+=2)w[A-2]===w[A]&&w[A-1]===w[A+1]||(w[z++]=w[A],w[z++]=w[A+1]);return e(w,[z/2|0,2])}(t,i),l=function(f,T,_,k){for(var w=f.data,C=f.shape[0],A=n.mallocDouble(C),O=0,P=0;P<C;++P){var S=w[2*P],E=w[2*P+1];if(_[S]!==_[E]){var D=T[S],z=T[E];w[2*O]=S,w[2*O+1]=E,A[O++]=(z-k)/(z-D)}}return f.shape[0]=O,e(A,[O])}(c,d,s,+a),p=function(f,T){var _=n.mallocInt32(2*T),k=f.shape[0],w=f.data;_[0]=0;for(var C=0,A=0;A<k;++A){var O=w[2*A];if(O!==C){for(_[2*C+1]=A;++C<O;)_[2*C]=A,_[2*C+1]=A;_[2*C]=A}}for(_[2*C+1]=k;++C<T;)_[2*C]=_[2*C+1]=k;return _}(c,0|d.length),g=o(i)(t,c.data,p,s),u=function(f){for(var T=0|f.shape[0],_=f.data,k=new Array(T),w=0;w<T;++w)k[w]=[_[2*w],_[2*w+1]];return k}(c),x=[].slice.call(l.data,0,l.shape[0]);return n.free(s),n.free(c.data),n.free(l.data),n.free(p),{cells:g,vertexIds:u,vertexWeights:x}};var e=v("ndarray"),n=v("typedarray-pool"),r=v("ndarray-sort"),o=v("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(v,b,h){"use strict";b.exports=function(n){return e[n]()};var e=[function(){return function(n,r,o,t){for(var d=n.length,a=0;a<d;++a);return[]}},function(){function n(r,o,t,d){for(var a=0|Math.min(t,d),i=0|Math.max(t,d),s=r[2*a],c=r[2*a+1];s<c;){var l=s+c>>1,p=o[2*l+1];if(p===i)return l;i<p?c=l:s=l+1}return s}return function(r,o,t,d){for(var a=r.length,i=[],s=0;s<a;++s){var c=r[s];if(2===c.length){var l=(d[c[0]]<<0)+(d[c[1]]<<1);if(0===l||3===l)continue;switch(l){case 0:break;case 1:i.push([n(t,o,c[0],c[1])]);break;case 2:i.push([n(t,o,c[1],c[0])])}}}return i}},function(){function n(r,o,t,d){for(var a=0|Math.min(t,d),i=0|Math.max(t,d),s=r[2*a],c=r[2*a+1];s<c;){var l=s+c>>1,p=o[2*l+1];if(p===i)return l;i<p?c=l:s=l+1}return s}return function(r,o,t,d){for(var a=r.length,i=[],s=0;s<a;++s){var c=r[s],l=c.length;if(3===l){if(0==(p=(d[c[0]]<<0)+(d[c[1]]<<1)+(d[c[2]]<<2))||7===p)continue;switch(p){case 0:break;case 1:i.push([n(t,o,c[0],c[2]),n(t,o,c[0],c[1])]);break;case 2:i.push([n(t,o,c[1],c[0]),n(t,o,c[1],c[2])]);break;case 3:i.push([n(t,o,c[0],c[2]),n(t,o,c[1],c[2])]);break;case 4:i.push([n(t,o,c[2],c[1]),n(t,o,c[2],c[0])]);break;case 5:i.push([n(t,o,c[2],c[1]),n(t,o,c[0],c[1])]);break;case 6:i.push([n(t,o,c[1],c[0]),n(t,o,c[2],c[0])])}}else if(2===l){var p;if(0==(p=(d[c[0]]<<0)+(d[c[1]]<<1))||3===p)continue;switch(p){case 0:break;case 1:i.push([n(t,o,c[0],c[1])]);break;case 2:i.push([n(t,o,c[1],c[0])])}}}return i}},function(){function n(r,o,t,d){for(var a=0|Math.min(t,d),i=0|Math.max(t,d),s=r[2*a],c=r[2*a+1];s<c;){var l=s+c>>1,p=o[2*l+1];if(p===i)return l;i<p?c=l:s=l+1}return s}return function(r,o,t,d){for(var a=r.length,i=[],s=0;s<a;++s){var c=r[s],l=c.length;if(4===l){if(0==(p=(d[c[0]]<<0)+(d[c[1]]<<1)+(d[c[2]]<<2)+(d[c[3]]<<3))||15===p)continue;switch(p){case 0:break;case 1:i.push([n(t,o,c[0],c[1]),n(t,o,c[0],c[2]),n(t,o,c[0],c[3])]);break;case 2:i.push([n(t,o,c[1],c[2]),n(t,o,c[1],c[0]),n(t,o,c[1],c[3])]);break;case 3:i.push([n(t,o,c[1],c[2]),n(t,o,c[0],c[2]),n(t,o,c[0],c[3])],[n(t,o,c[1],c[3]),n(t,o,c[1],c[2]),n(t,o,c[0],c[3])]);break;case 4:i.push([n(t,o,c[2],c[0]),n(t,o,c[2],c[1]),n(t,o,c[2],c[3])]);break;case 5:i.push([n(t,o,c[0],c[1]),n(t,o,c[2],c[1]),n(t,o,c[0],c[3])],[n(t,o,c[2],c[1]),n(t,o,c[2],c[3]),n(t,o,c[0],c[3])]);break;case 6:i.push([n(t,o,c[2],c[0]),n(t,o,c[1],c[0]),n(t,o,c[1],c[3])],[n(t,o,c[2],c[3]),n(t,o,c[2],c[0]),n(t,o,c[1],c[3])]);break;case 7:i.push([n(t,o,c[0],c[3]),n(t,o,c[1],c[3]),n(t,o,c[2],c[3])]);break;case 8:i.push([n(t,o,c[3],c[1]),n(t,o,c[3],c[0]),n(t,o,c[3],c[2])]);break;case 9:i.push([n(t,o,c[3],c[1]),n(t,o,c[0],c[1]),n(t,o,c[0],c[2])],[n(t,o,c[3],c[2]),n(t,o,c[3],c[1]),n(t,o,c[0],c[2])]);break;case 10:i.push([n(t,o,c[1],c[0]),n(t,o,c[3],c[0]),n(t,o,c[1],c[2])],[n(t,o,c[3],c[0]),n(t,o,c[3],c[2]),n(t,o,c[1],c[2])]);break;case 11:i.push([n(t,o,c[1],c[2]),n(t,o,c[0],c[2]),n(t,o,c[3],c[2])]);break;case 12:i.push([n(t,o,c[3],c[0]),n(t,o,c[2],c[0]),n(t,o,c[2],c[1])],[n(t,o,c[3],c[1]),n(t,o,c[3],c[0]),n(t,o,c[2],c[1])]);break;case 13:i.push([n(t,o,c[0],c[1]),n(t,o,c[2],c[1]),n(t,o,c[3],c[1])]);break;case 14:i.push([n(t,o,c[2],c[0]),n(t,o,c[1],c[0]),n(t,o,c[3],c[0])])}}else if(3===l){if(0==(p=(d[c[0]]<<0)+(d[c[1]]<<1)+(d[c[2]]<<2))||7===p)continue;switch(p){case 0:break;case 1:i.push([n(t,o,c[0],c[2]),n(t,o,c[0],c[1])]);break;case 2:i.push([n(t,o,c[1],c[0]),n(t,o,c[1],c[2])]);break;case 3:i.push([n(t,o,c[0],c[2]),n(t,o,c[1],c[2])]);break;case 4:i.push([n(t,o,c[2],c[1]),n(t,o,c[2],c[0])]);break;case 5:i.push([n(t,o,c[2],c[1]),n(t,o,c[0],c[1])]);break;case 6:i.push([n(t,o,c[1],c[0]),n(t,o,c[2],c[0])])}}else if(2===l){var p;if(0==(p=(d[c[0]]<<0)+(d[c[1]]<<1))||3===p)continue;switch(p){case 0:break;case 1:i.push([n(t,o,c[0],c[1])]);break;case 2:i.push([n(t,o,c[1],c[0])])}}}return i}}]},{}],293:[function(v,b,h){"use strict";var e=v("bit-twiddle"),n=v("union-find");function r(c,l){var p=c.length,g=c.length-l.length,u=Math.min;if(g)return g;switch(p){case 0:return 0;case 1:return c[0]-l[0];case 2:return(T=c[0]+c[1]-l[0]-l[1])||u(c[0],c[1])-u(l[0],l[1]);case 3:var x=c[0]+c[1],f=l[0]+l[1];if(T=x+c[2]-(f+l[2]))return T;var T,_=u(c[0],c[1]),k=u(l[0],l[1]);return(T=u(_,c[2])-u(k,l[2]))||u(_+c[2],x)-u(k+l[2],f);default:var w=c.slice(0);w.sort();var C=l.slice(0);C.sort();for(var A=0;A<p;++A)if(g=w[A]-C[A])return g;return 0}}function o(c,l){return r(c[0],l[0])}function t(c,l){if(l){for(var p=c.length,g=new Array(p),u=0;u<p;++u)g[u]=[c[u],l[u]];for(g.sort(o),u=0;u<p;++u)c[u]=g[u][0],l[u]=g[u][1];return c}return c.sort(r),c}function d(c){if(0===c.length)return[];for(var l=1,p=c.length,g=1;g<p;++g){var u=c[g];if(r(u,c[g-1])){if(g===l){l++;continue}c[l++]=u}}return c.length=l,c}function a(c,l){for(var p=0,g=c.length-1,u=-1;p<=g;){var x=p+g>>1,f=r(c[x],l);f<=0?(0===f&&(u=x),p=x+1):f>0&&(g=x-1)}return u}function i(c,l){for(var p=new Array(c.length),g=0,u=p.length;g<u;++g)p[g]=[];for(var x=[],f=(g=0,l.length);g<f;++g)for(var T=l[g],_=T.length,k=1,w=1<<_;k<w;++k){x.length=e.popCount(k);for(var C=0,A=0;A<_;++A)k&1<<A&&(x[C++]=T[A]);var O=a(c,x);if(!(O<0))for(;p[O++].push(g),!(O>=c.length||0!==r(c[O],x)););}return p}function s(c,l){if(l<0)return[];for(var p=[],g=(1<<l+1)-1,u=0;u<c.length;++u)for(var x=c[u],f=g;f<1<<x.length;f=e.nextCombination(f)){for(var T=new Array(l+1),_=0,k=0;k<x.length;++k)f&1<<k&&(T[_++]=x[k]);p.push(T)}return t(p)}h.dimension=function(c){for(var l=0,p=Math.max,g=0,u=c.length;g<u;++g)l=p(l,c[g].length);return l-1},h.countVertices=function(c){for(var l=-1,p=Math.max,g=0,u=c.length;g<u;++g)for(var x=c[g],f=0,T=x.length;f<T;++f)l=p(l,x[f]);return l+1},h.cloneCells=function(c){for(var l=new Array(c.length),p=0,g=c.length;p<g;++p)l[p]=c[p].slice(0);return l},h.compareCells=r,h.normalize=t,h.unique=d,h.findCell=a,h.incidence=i,h.dual=function(c,l){if(!l)return i(d(s(c,0)),c);for(var p=new Array(l),g=0;g<l;++g)p[g]=[];g=0;for(var u=c.length;g<u;++g)for(var x=c[g],f=0,T=x.length;f<T;++f)p[x[f]].push(g);return p},h.explode=function(c){for(var l=[],p=0,g=c.length;p<g;++p)for(var u=c[p],x=0|u.length,f=1,T=1<<x;f<T;++f){for(var _=[],k=0;k<x;++k)f>>>k&1&&_.push(u[k]);l.push(_)}return t(l)},h.skeleton=s,h.boundary=function(c){for(var l=[],p=0,g=c.length;p<g;++p)for(var u=c[p],x=0,f=u.length;x<f;++x){for(var T=new Array(u.length-1),_=0,k=0;_<f;++_)_!==x&&(T[k++]=u[_]);l.push(T)}return t(l)},h.connectedComponents=function(c,l){return l?function(p,g){for(var u=new n(g),x=0;x<p.length;++x)for(var f=p[x],T=0;T<f.length;++T)for(var _=T+1;_<f.length;++_)u.link(f[T],f[_]);var k=[],w=u.ranks;for(x=0;x<w.length;++x)w[x]=-1;for(x=0;x<p.length;++x){var C=u.find(p[x][0]);w[C]<0?(w[C]=k.length,k.push([p[x].slice(0)])):k[w[C]].push(p[x].slice(0))}return k}(c,l):function(p){for(var g=d(t(s(p,0))),u=new n(g.length),x=0;x<p.length;++x)for(var f=p[x],T=0;T<f.length;++T)for(var _=a(g,[f[T]]),k=T+1;k<f.length;++k)u.link(_,a(g,[f[k]]));var w=[],C=u.ranks;for(x=0;x<C.length;++x)C[x]=-1;for(x=0;x<p.length;++x){var A=u.find(a(g,[p[x][0]]));C[A]<0?(C[A]=w.length,w.push([p[x].slice(0)])):w[C[A]].push(p[x].slice(0))}return w}(c)}},{"bit-twiddle":32,"union-find":309}],294:[function(v,b,h){arguments[4][32][0].apply(h,arguments)},{dup:32}],295:[function(v,b,h){arguments[4][293][0].apply(h,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(v,b,h){"use strict";function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var r=0;r<n;++r)this.roots[r]=r,this.ranks[r]=0}b.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},e.prototype.find=function(n){for(var r=this.roots;r[n]!==n;){var o=r[n];r[n]=r[o],n=o}return n},e.prototype.link=function(n,r){var o=this.find(n),t=this.find(r);if(o!==t){var d=this.ranks,a=this.roots,i=d[o],s=d[t];i<s?a[o]=t:s<i?a[t]=o:(a[t]=o,++d[o])}}},{}],297:[function(v,b,h){"use strict";b.exports=function(r,o,t){for(var d=o.length,a=r.length,i=new Array(d),s=new Array(d),c=new Array(d),l=new Array(d),p=0;p<d;++p)i[p]=s[p]=-1,c[p]=1/0,l[p]=!1;for(p=0;p<a;++p){var g=r[p];if(2!==g.length)throw new Error("Input must be a graph");var u=g[1],x=g[0];s[x]=-1!==s[x]?-2:u,i[u]=-1!==i[u]?-2:x}function f(J){if(l[J])return 1/0;var Z,re,H=i[J],ee=s[J];return H<0||ee<0?1/0:(Z=o[H],re=o[ee],Math.abs(e(o[J],Z,re))/Math.sqrt(Math.pow(Z[0]-re[0],2)+Math.pow(Z[1]-re[1],2)))}function T(J,G){var Z=S[J],re=S[G];S[J]=re,S[G]=Z,E[Z]=G,E[re]=J}function _(J){return c[S[J]]}function k(J){return 1&J?J-1>>1:(J>>1)-1}function w(J){for(var G=_(J);;){var Z=G,re=2*J+1,j=2*(J+1),B=J;if(re<D){var H=_(re);H<Z&&(B=re,Z=H)}if(j<D&&_(j)<Z&&(B=j),B===J)return J;T(J,B),J=B}}function C(J){for(var G=_(J);J>0;){var Z=k(J);if(!(Z>=0&&G<_(Z)))return J;T(J,Z),J=Z}}function A(){if(D>0){var J=S[0];return T(0,D-1),D-=1,w(0),J}return-1}function O(J,G){var Z=S[J];return c[Z]===G?J:(c[Z]=-1/0,C(J),A(),c[Z]=G,C((D+=1)-1))}function P(J){if(!l[J]){l[J]=!0;var G=i[J],Z=s[J];i[Z]>=0&&(i[Z]=G),s[G]>=0&&(s[G]=Z),E[G]>=0&&O(E[G],f(G)),E[Z]>=0&&O(E[Z],f(Z))}}var S=[],E=new Array(d);for(p=0;p<d;++p)(c[p]=f(p))<1/0?(E[p]=S.length,S.push(p)):E[p]=-1;var D=S.length;for(p=D>>1;p>=0;--p)w(p);for(;;){var z=A();if(z<0||c[z]>t)break;P(z)}var N=[];for(p=0;p<d;++p)l[p]||(E[p]=N.length,N.push(o[p].slice()));function V(J,G){if(J[G]<0)return G;var Z=G,re=G;do{var j=J[re];if(!l[re]||j<0||j===re||(j=J[re=j],!l[re]||j<0||j===re))break;re=j,Z=J[Z]}while(Z!==re);for(var B=G;B!==re;B=J[B])J[B]=re;return re}var X=[];return r.forEach(function(J){var G=V(i,J[0]),Z=V(s,J[1]);if(G>=0&&Z>=0&&G!==Z){var re=E[G],j=E[Z];re!==j&&X.push([re,j])}}),n.unique(n.normalize(X)),{positions:N,edges:X}};var e=v("robust-orientation"),n=v("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(v,b,h){"use strict";b.exports=function(r,o){var t,d,a,i;if(o[0][0]<o[1][0])t=o[0],d=o[1];else{if(!(o[0][0]>o[1][0]))return n(o,r);t=o[1],d=o[0]}if(r[0][0]<r[1][0])a=r[0],i=r[1];else{if(!(r[0][0]>r[1][0]))return-n(r,o);a=r[1],i=r[0]}var s=e(t,d,i),c=e(t,d,a);if(s<0){if(c<=0)return s}else if(s>0){if(c>=0)return s}else if(c)return c;if(s=e(i,a,d),c=e(i,a,t),s<0){if(c<=0)return s}else if(s>0){if(c>=0)return s}else if(c)return c;return d[0]-i[0]};var e=v("robust-orientation");function n(r,o){var t,d,a,i;if(o[0][0]<o[1][0])t=o[0],d=o[1];else{if(!(o[0][0]>o[1][0])){var s=Math.min(r[0][1],r[1][1]),c=Math.max(r[0][1],r[1][1]),l=Math.min(o[0][1],o[1][1]),p=Math.max(o[0][1],o[1][1]);return c<l?c-l:s>p?s-p:c-p}t=o[1],d=o[0]}r[0][1]<r[1][1]?(a=r[0],i=r[1]):(a=r[1],i=r[0]);var g=e(d,t,a);return g||(g=e(d,t,i))||i-d}},{"robust-orientation":284}],299:[function(v,b,h){"use strict";b.exports=function(c){for(var l=c.length,p=2*l,g=new Array(p),u=0;u<l;++u){var x=c[u],f=x[0][0]<x[1][0];g[2*u]=new s(x[0][0],x,f,u),g[2*u+1]=new s(x[1][0],x,!f,u)}g.sort(function(P,S){var E=P.x-S.x;return E||(E=P.create-S.create)||Math.min(P.segment[0][1],P.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});var T=n(o),_=[],k=[],w=[];for(u=0;u<p;){for(var C=g[u].x,A=[];u<p;){var O=g[u];if(O.x!==C)break;u+=1,O.segment[0][0]===O.x&&O.segment[1][0]===O.x?O.create&&(O.segment[0][1]<O.segment[1][1]?(A.push(new i(O.segment[0][1],O.index,!0,!0)),A.push(new i(O.segment[1][1],O.index,!1,!1))):(A.push(new i(O.segment[1][1],O.index,!0,!1)),A.push(new i(O.segment[0][1],O.index,!1,!0)))):T=O.create?T.insert(O.segment,O.index):T.remove(O.segment)}_.push(T.root),k.push(C),w.push(A)}return new t(_,k,w)};var e=v("binary-search-bounds"),n=v("functional-red-black-tree"),r=v("robust-orientation"),o=v("./lib/order-segments");function t(c,l,p){this.slabs=c,this.coordinates=l,this.horizontal=p}function d(c,l){return c.y-l}function a(c,l){for(var p=null;c;){var g,u,x=c.key;x[0][0]<x[1][0]?(g=x[0],u=x[1]):(g=x[1],u=x[0]);var f=r(g,u,l);if(f<0)c=c.left;else if(f>0)if(l[0]!==x[1][0])p=c,c=c.right;else{if(T=a(c.right,l))return T;c=c.left}else{if(l[0]!==x[1][0])return c;var T;if(T=a(c.right,l))return T;c=c.left}}return p}function i(c,l,p,g){this.y=c,this.index=l,this.start=p,this.closed=g}function s(c,l,p,g){this.x=c,this.segment=l,this.create=p,this.index=g}t.prototype.castUp=function(c){var l=e.le(this.coordinates,c[0]);if(l<0)return-1;var p=a(this.slabs[l],c),g=-1;if(p&&(g=p.value),this.coordinates[l]===c[0]){var u=null;if(p&&(u=p.key),l>0){var x=a(this.slabs[l-1],c);x&&(u?o(x.key,u)>0&&(u=x.key,g=x.value):(g=x.value,u=x.key))}var f=this.horizontal[l];if(f.length>0){var T=e.ge(f,c[1],d);if(T<f.length){var _=f[T];if(c[1]===_.y){if(_.closed)return _.index;for(;T<f.length-1&&f[T+1].y===c[1];)if((_=f[T+=1]).closed)return _.index;if(_.y===c[1]&&!_.start){if((T+=1)>=f.length)return g;_=f[T]}}if(_.start)if(u){var k=r(u[0],u[1],[c[0],_.y]);u[0][0]>u[1][0]&&(k=-k),k>0&&(g=_.index)}else g=_.index;else _.y!==c[1]&&(g=_.index)}}}return g}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(v,b,h){"use strict";var e=v("robust-dot-product"),n=v("robust-sum");function r(t,d){var a=n(e(t,d),[d[d.length-1]]);return a[a.length-1]}function o(t,d,a,i){var s=-d/(i-d);s<0?s=0:s>1&&(s=1);for(var c=1-s,l=t.length,p=new Array(l),g=0;g<l;++g)p[g]=s*t[g]+c*a[g];return p}b.exports=function(t,d){for(var a=[],i=[],s=r(t[t.length-1],d),c=t[t.length-1],l=t[0],p=0;p<t.length;++p,c=l){var g=r(l=t[p],d);if(s<0&&g>0||s>0&&g<0){var u=o(c,g,l,s);a.push(u),i.push(u.slice())}g<0?i.push(l.slice()):g>0?a.push(l.slice()):(a.push(l.slice()),i.push(l.slice())),s=g}return{positive:a,negative:i}},b.exports.positive=function(t,d){for(var a=[],i=r(t[t.length-1],d),s=t[t.length-1],c=t[0],l=0;l<t.length;++l,s=c){var p=r(c=t[l],d);(i<0&&p>0||i>0&&p<0)&&a.push(o(s,p,c,i)),p>=0&&a.push(c.slice()),i=p}return a},b.exports.negative=function(t,d){for(var a=[],i=r(t[t.length-1],d),s=t[t.length-1],c=t[0],l=0;l<t.length;++l,s=c){var p=r(c=t[l],d);(i<0&&p>0||i>0&&p<0)&&a.push(o(s,p,c,i)),p<=0&&a.push(c.slice()),i=p}return a}},{"robust-dot-product":281,"robust-sum":289}],301:[function(v,b,h){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(a){return o(d(a),arguments)}function r(a,i){return n.apply(null,[a].concat(i||[]))}function o(a,i){var s,c,l,p,g,u,x,f,T,_=1,k=a.length,w="";for(c=0;c<k;c++)if("string"==typeof a[c])w+=a[c];else if("object"==typeof a[c]){if((p=a[c]).keys)for(s=i[_],l=0;l<p.keys.length;l++){if(null==s)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[l],p.keys[l-1]));s=s[p.keys[l]]}else s=p.param_no?i[p.param_no]:i[_++];if(e.not_type.test(p.type)&&e.not_primitive.test(p.type)&&s instanceof Function&&(s=s()),e.numeric_arg.test(p.type)&&"number"!=typeof s&&isNaN(s))throw new TypeError(n("[sprintf] expecting number but found %T",s));switch(e.number.test(p.type)&&(f=s>=0),p.type){case"b":s=parseInt(s,10).toString(2);break;case"c":s=String.fromCharCode(parseInt(s,10));break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,p.width?parseInt(p.width):0);break;case"e":s=p.precision?parseFloat(s).toExponential(p.precision):parseFloat(s).toExponential();break;case"f":s=p.precision?parseFloat(s).toFixed(p.precision):parseFloat(s);break;case"g":s=p.precision?String(Number(s.toPrecision(p.precision))):parseFloat(s);break;case"o":s=(parseInt(s,10)>>>0).toString(8);break;case"s":s=String(s),s=p.precision?s.substring(0,p.precision):s;break;case"t":s=String(!!s),s=p.precision?s.substring(0,p.precision):s;break;case"T":s=Object.prototype.toString.call(s).slice(8,-1).toLowerCase(),s=p.precision?s.substring(0,p.precision):s;break;case"u":s=parseInt(s,10)>>>0;break;case"v":s=s.valueOf(),s=p.precision?s.substring(0,p.precision):s;break;case"x":s=(parseInt(s,10)>>>0).toString(16);break;case"X":s=(parseInt(s,10)>>>0).toString(16).toUpperCase()}e.json.test(p.type)?w+=s:(!e.number.test(p.type)||f&&!p.sign?T="":(T=f?"+":"-",s=s.toString().replace(e.sign,"")),u=p.pad_char?"0"===p.pad_char?"0":p.pad_char.charAt(1):" ",x=p.width-(T+s).length,g=p.width&&x>0?u.repeat(x):"",w+=p.align?T+s+g:"0"===u?T+g+s:g+T+s)}return w}var t=Object.create(null);function d(a){if(t[a])return t[a];for(var i,s=a,c=[],l=0;s;){if(null!==(i=e.text.exec(s)))c.push(i[0]);else if(null!==(i=e.modulo.exec(s)))c.push("%");else{if(null===(i=e.placeholder.exec(s)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){l|=1;var p=[],g=i[2],u=[];if(null===(u=e.key.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(p.push(u[1]);""!==(g=g.substring(u[0].length));)if(null!==(u=e.key_access.exec(g)))p.push(u[1]);else{if(null===(u=e.index_access.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");p.push(u[1])}i[2]=p}else l|=2;if(3===l)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}s=s.substring(i[0].length)}return t[a]=c}void 0!==h&&(h.sprintf=n,h.vsprintf=r),typeof window<"u"&&(window.sprintf=n,window.vsprintf=r)}()},{}],302:[function(v,b,h){"use strict";b.exports=function(t,d){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(s,c){for(var l=n(s,c),p=l.length,g=new Array(p),u=new Array(p),x=0;x<p;++x)g[x]=[l[x]],u[x]=[x];return{positions:g,cells:u}}(t,d);var a=t.order.join()+"-"+t.dtype,i=o[a];return d=+d||0,i||(i=o[a]=function(s,c){var p=r[s.length+"d"];if(p)return p(e,s,c)}(t.order,t.dtype)),i(t,d)};var e=v("ndarray-extract-contour"),n=v("zero-crossings"),r={"2d":function(t,d,a){var i=t({order:d,scalarArguments:3,getters:"generic"===a?[0]:void 0,phase:function(s,c,l,p){return s>p|0},vertex:function(s,c,l,p,g,u,x,f,T,_,k,w,C){var A=(x<<0)+(f<<1)+(T<<2)+(_<<3)|0;if(0!==A&&15!==A)switch(A){case 0:case 15:k.push([s-.5,c-.5]);break;case 1:k.push([s-.25-.25*(p+l-2*C)/(l-p),c-.25-.25*(g+l-2*C)/(l-g)]);break;case 2:k.push([s-.75-.25*(-p-l+2*C)/(p-l),c-.25-.25*(u+p-2*C)/(p-u)]);break;case 3:k.push([s-.5,c-.5-.5*(g+l+u+p-4*C)/(l-g+p-u)]);break;case 4:k.push([s-.25-.25*(u+g-2*C)/(g-u),c-.75-.25*(-g-l+2*C)/(g-l)]);break;case 5:k.push([s-.5-.5*(p+l+u+g-4*C)/(l-p+g-u),c-.5]);break;case 6:k.push([s-.5-.25*(-p-l+u+g)/(p-l+g-u),c-.5-.25*(-g-l+u+p)/(g-l+p-u)]);break;case 7:k.push([s-.75-.25*(u+g-2*C)/(g-u),c-.75-.25*(u+p-2*C)/(p-u)]);break;case 8:k.push([s-.75-.25*(-u-g+2*C)/(u-g),c-.75-.25*(-u-p+2*C)/(u-p)]);break;case 9:k.push([s-.5-.25*(p+l+-u-g)/(l-p+u-g),c-.5-.25*(g+l+-u-p)/(l-g+u-p)]);break;case 10:k.push([s-.5-.5*(-p-l-u-g+4*C)/(p-l+u-g),c-.5]);break;case 11:k.push([s-.25-.25*(-u-g+2*C)/(u-g),c-.75-.25*(g+l-2*C)/(l-g)]);break;case 12:k.push([s-.5,c-.5-.5*(-g-l-u-p+4*C)/(g-l+u-p)]);break;case 13:k.push([s-.75-.25*(p+l-2*C)/(l-p),c-.25-.25*(-u-p+2*C)/(u-p)]);break;case 14:k.push([s-.25-.25*(-p-l+2*C)/(p-l),c-.25-.25*(-g-l+2*C)/(g-l)])}},cell:function(s,c,l,p,g,u,x,f,T){f.push(g?[s,c]:[c,s])}});return function(s,c){var l=[],p=[];return i(s,l,p,c),{positions:l,cells:p}}}},o={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(v,b,h){(function(e){(function(){"use strict";b.exports=function t(d,a,i){i=i||{};var s=o[d];s||(s=o[d]={" ":{data:new Float32Array(0),shape:.2}});var c=s[a];if(!c)if(a.length<=1||!/\d/.test(a))c=s[a]=function(C){for(var A=C.cells,O=C.positions,P=new Float32Array(6*A.length),S=0,E=0,D=0;D<A.length;++D)for(var z=A[D],N=0;N<3;++N){var V=O[z[N]];P[S++]=V[0],P[S++]=V[1]+1.4,E=Math.max(V[0],E)}return{data:P,shape:E}}(n(a,{triangles:!0,font:d,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var l=a.split(/(\d|\s)/),p=new Array(l.length),g=0,u=0,x=0;x<l.length;++x)p[x]=t(d,l[x]),g+=p[x].data.length,u+=p[x].shape,x>0&&(u+=.02);var f=new Float32Array(g),T=0,_=-.5*u;for(x=0;x<p.length;++x){for(var k=p[x].data,w=0;w<k.length;w+=2)f[T++]=k[w]+_,f[T++]=k[w+1];_+=p[x].shape+.02}c=s[a]={data:f,shape:u}}return c};var n=v("vectorize-text"),r=window||e.global||{},o=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}}).call(this)}).call(this,v("_process"))},{_process:5,"vectorize-text":311}],304:[function(v,b,h){"use strict";var e=v("parse-unit");function n(o,t){var d=e(getComputedStyle(o).getPropertyValue(t));return d[0]*r(d[1],o)}function r(o,t){switch(t=t||document.body,o=(o||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),o){case"%":return t.clientHeight/100;case"ch":case"ex":return function(d,a){var i=document.createElement("div");i.style["font-size"]="128"+d,a.appendChild(i);var s=n(i,"font-size")/128;return a.removeChild(i),s}(o,t);case"em":return n(t,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}b.exports=r},{"parse-unit":265}],305:[function(v,b,h){"use strict";b.exports=function(g){var u=(g=g||{}).center||[0,0,0],x=g.up||[0,1,0],f=g.right||s(x),T=g.radius||1,_=g.theta||0,k=g.phi||0;if(u=[].slice.call(u,0,3),x=[].slice.call(x,0,3),t(x,x),f=[].slice.call(f,0,3),t(f,f),"eye"in g){var w=g.eye,C=[w[0]-u[0],w[1]-u[1],w[2]-u[2]];o(f,C,x),a(f[0],f[1],f[2])<1e-6?f=s(x):t(f,f),T=a(C[0],C[1],C[2]);var A=d(x,C)/T,O=d(f,C)/T;k=Math.acos(A),_=Math.acos(O)}return T=Math.log(T),new c(g.zoomMin,g.zoomMax,u,x,f,T,_,k)};var e=v("filtered-vector"),n=v("gl-mat4/invert"),r=v("gl-mat4/rotate"),o=v("gl-vec3/cross"),t=v("gl-vec3/normalize"),d=v("gl-vec3/dot");function a(g,u,x){return Math.sqrt(Math.pow(g,2)+Math.pow(u,2)+Math.pow(x,2))}function i(g){return Math.min(1,Math.max(-1,g))}function s(g){var u=Math.abs(g[0]),x=Math.abs(g[1]),f=Math.abs(g[2]),T=[0,0,0];u>Math.max(x,f)?T[2]=1:x>Math.max(u,f)?T[0]=1:T[1]=1;for(var _=0,k=0,w=0;w<3;++w)_+=g[w]*g[w],k+=T[w]*g[w];for(w=0;w<3;++w)T[w]-=k/_*g[w];return t(T,T),T}function c(g,u,x,f,T,_,k,w){this.center=e(x),this.up=e(f),this.right=e(T),this.radius=e([_]),this.angle=e([k,w]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(g,u),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var l=c.prototype;l.setDistanceLimits=function(g,u){g=g>0?Math.log(g):-1/0,u=u>0?Math.log(u):1/0,u=Math.max(u,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=u},l.getDistanceLimits=function(g){var u=this.radius.bounds[0];return g?(g[0]=Math.exp(u[0][0]),g[1]=Math.exp(u[1][0]),g):[Math.exp(u[0][0]),Math.exp(u[1][0])]},l.recalcMatrix=function(g){this.center.curve(g),this.up.curve(g),this.right.curve(g),this.radius.curve(g),this.angle.curve(g);for(var u=this.computedUp,x=this.computedRight,f=0,T=0,_=0;_<3;++_)T+=u[_]*x[_],f+=u[_]*u[_];var k=Math.sqrt(f),w=0;for(_=0;_<3;++_)x[_]-=u[_]*T/f,w+=x[_]*x[_],u[_]/=k;var C=Math.sqrt(w);for(_=0;_<3;++_)x[_]/=C;var A=this.computedToward;o(A,u,x),t(A,A);var O=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],S=this.computedAngle[1],E=Math.cos(P),D=Math.sin(P),z=Math.cos(S),N=Math.sin(S),V=this.computedCenter,X=E*z,J=D*z,G=N,Z=-E*N,re=-D*N,j=z,B=this.computedEye,H=this.computedMatrix;for(_=0;_<3;++_){var ee=X*x[_]+J*A[_]+G*u[_];H[4*_+1]=Z*x[_]+re*A[_]+j*u[_],H[4*_+2]=ee,H[4*_+3]=0}var U=H[1],$=H[5],q=H[9],te=H[2],ne=H[6],se=H[10],ie=$*se-q*ne,ue=q*te-U*se,le=U*ne-$*te,de=a(ie,ue,le);for(ue/=de,le/=de,H[0]=ie/=de,H[4]=ue,H[8]=le,_=0;_<3;++_)B[_]=V[_]+H[2+4*_]*O;for(_=0;_<3;++_){w=0;for(var be=0;be<3;++be)w+=H[_+4*be]*B[be];H[12+_]=-w}H[15]=1},l.getMatrix=function(g,u){this.recalcMatrix(g);var x=this.computedMatrix;if(u){for(var f=0;f<16;++f)u[f]=x[f];return u}return x};var p=[0,0,0];l.rotate=function(g,u,x,f){if(this.angle.move(g,u,x),f){this.recalcMatrix(g);var T=this.computedMatrix;p[0]=T[2],p[1]=T[6],p[2]=T[10];for(var _=this.computedUp,k=this.computedRight,w=this.computedToward,C=0;C<3;++C)T[4*C]=_[C],T[4*C+1]=k[C],T[4*C+2]=w[C];for(r(T,T,f,p),C=0;C<3;++C)_[C]=T[4*C],k[C]=T[4*C+1];this.up.set(g,_[0],_[1],_[2]),this.right.set(g,k[0],k[1],k[2])}},l.pan=function(g,u,x,f){u=u||0,x=x||0,f=f||0,this.recalcMatrix(g);var T=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),T[1]),k=T[5],w=T[9],C=a(_,k,w),A=T[0],O=T[4],P=T[8],S=A*(_/=C)+O*(k/=C)+P*(w/=C),E=a(A-=_*S,O-=k*S,P-=w*S),D=(A/=E)*u+_*x,z=(O/=E)*u+k*x,N=(P/=E)*u+w*x;this.center.move(g,D,z,N);var V=Math.exp(this.computedRadius[0]);V=Math.max(1e-4,V+f),this.radius.set(g,Math.log(V))},l.translate=function(g,u,x,f){this.center.move(g,u||0,x||0,f||0)},l.setMatrix=function(g,u,x,f){var T=1;"number"==typeof x&&(T=0|x),(T<0||T>3)&&(T=1);var _=(T+2)%3;u||(this.recalcMatrix(g),u=this.computedMatrix);var k=u[T],w=u[T+4],C=u[T+8];if(f){var A=Math.abs(k),O=Math.abs(w),P=Math.abs(C),S=Math.max(A,O,P);A===S?(k=k<0?-1:1,w=C=0):P===S?(C=C<0?-1:1,k=w=0):(w=w<0?-1:1,k=C=0)}else{var E=a(k,w,C);k/=E,w/=E,C/=E}var D,z,N=u[_],V=u[_+4],X=u[_+8],J=N*k+V*w+X*C,G=a(N-=k*J,V-=w*J,X-=C*J),Z=w*(X/=G)-C*(V/=G),re=C*(N/=G)-k*X,j=k*V-w*N,B=a(Z,re,j);if(Z/=B,re/=B,j/=B,this.center.jump(g,he,me,Se),this.radius.idle(g),this.up.jump(g,k,w,C),this.right.jump(g,N,V,X),2===T){var H=u[1],ee=u[5],U=u[9];D=ie<0?-Math.PI/2:Math.PI/2,z=Math.atan2(H*Z+ee*re+U*j,H*N+ee*V+U*X)}else{var te=u[2],ne=u[6],se=u[10],ie=te*k+ne*w+se*C,ue=te*N+ne*V+se*X,le=te*Z+ne*re+se*j;D=Math.asin(i(ie)),z=Math.atan2(le,ue)}this.angle.jump(g,z,D),this.recalcMatrix(g);var de=u[2],be=u[6],_e=u[10],xe=this.computedMatrix;n(xe,u);var Ee=xe[15],he=xe[12]/Ee,me=xe[13]/Ee,Se=xe[14]/Ee,Me=Math.exp(this.computedRadius[0]);this.center.jump(g,he-de*Me,me-be*Me,Se-_e*Me)},l.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},l.idle=function(g){this.center.idle(g),this.up.idle(g),this.right.idle(g),this.radius.idle(g),this.angle.idle(g)},l.flush=function(g){this.center.flush(g),this.up.flush(g),this.right.flush(g),this.radius.flush(g),this.angle.flush(g)},l.setDistance=function(g,u){u>0&&this.radius.set(g,Math.log(u))},l.lookAt=function(g,u,x,f){this.recalcMatrix(g),u=u||this.computedEye,x=x||this.computedCenter;var T=(f=f||this.computedUp)[0],_=f[1],k=f[2],w=a(T,_,k);if(!(w<1e-6)){T/=w,_/=w,k/=w;var C=u[0]-x[0],A=u[1]-x[1],O=u[2]-x[2],P=a(C,A,O);if(!(P<1e-6)){C/=P,A/=P,O/=P;var S=this.computedRight,E=S[0],D=S[1],z=S[2],N=T*E+_*D+k*z,V=a(E-=N*T,D-=N*_,z-=N*k);if(!(V<.01&&(V=a(E=_*O-k*A,D=k*C-T*O,z=T*A-_*C))<1e-6)){E/=V,D/=V,z/=V,this.up.set(g,T,_,k),this.right.set(g,E,D,z),this.center.set(g,x[0],x[1],x[2]),this.radius.set(g,Math.log(P));var X=_*z-k*D,J=k*E-T*z,G=T*D-_*E,Z=a(X,J,G),j=E*C+D*A+z*O,B=(X/=Z)*C+(J/=Z)*A+(G/=Z)*O,H=Math.asin(i(T*C+_*A+k*O)),ee=Math.atan2(B,j),U=this.angle._state,$=U[U.length-1],q=U[U.length-2];$%=2*Math.PI;var te=Math.abs($+2*Math.PI-ee),ne=Math.abs($-ee),se=Math.abs($-2*Math.PI-ee);te<ne&&($+=2*Math.PI),se<ne&&($-=2*Math.PI),this.angle.jump(this.angle.lastT(),$,q),this.angle.set(g,ee,H)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(v,b,h){"use strict";b.exports=function(n,r,o){var t=n*r,d=e*n,a=d-(d-n),i=n-a,s=e*r,c=s-(s-r),l=r-c,p=i*l-(t-a*c-i*c-a*l);return o?(o[0]=p,o[1]=t,o):[p,t]};var e=+(Math.pow(2,27)+1)},{}],307:[function(v,b,h){"use strict";b.exports=function(e,n,r){var o=e+n,t=o-e,d=n-t,a=e-(o-t);return r?(r[0]=a+d,r[1]=o,r):[a+d,o]}},{}],308:[function(v,b,h){(function(e){(function(){"use strict";var n=v("bit-twiddle"),r=v("dup"),o=v("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var t=typeof Uint8ClampedArray<"u",d=typeof BigUint64Array<"u",a=typeof BigInt64Array<"u",i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=r([32,0])),i.BIGUINT64||(i.BIGUINT64=r([32,0])),i.BIGINT64||(i.BIGINT64=r([32,0])),i.BUFFER||(i.BUFFER=r([32,0]));var s=i.DATA,c=i.BUFFER;function l(E){if(E){var z=n.log2(E.length||E.byteLength);s[z].push(E)}}function p(E){E=n.nextPow2(E);var D=n.log2(E),z=s[D];return z.length>0?z.pop():new ArrayBuffer(E)}function g(E){return new Uint8Array(p(E),0,E)}function u(E){return new Uint16Array(p(2*E),0,E)}function x(E){return new Uint32Array(p(4*E),0,E)}function f(E){return new Int8Array(p(E),0,E)}function T(E){return new Int16Array(p(2*E),0,E)}function _(E){return new Int32Array(p(4*E),0,E)}function k(E){return new Float32Array(p(4*E),0,E)}function w(E){return new Float64Array(p(8*E),0,E)}function C(E){return t?new Uint8ClampedArray(p(E),0,E):g(E)}function A(E){return d?new BigUint64Array(p(8*E),0,E):null}function O(E){return a?new BigInt64Array(p(8*E),0,E):null}function P(E){return new DataView(p(E),0,E)}function S(E){E=n.nextPow2(E);var D=n.log2(E),z=c[D];return z.length>0?z.pop():new o(E)}h.free=function(E){if(o.isBuffer(E))c[n.log2(E.length)].push(E);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(E)&&(E=E.buffer),!E)return;var z=0|n.log2(E.length||E.byteLength);s[z].push(E)}},h.freeUint8=h.freeUint16=h.freeUint32=h.freeBigUint64=h.freeInt8=h.freeInt16=h.freeInt32=h.freeBigInt64=h.freeFloat32=h.freeFloat=h.freeFloat64=h.freeDouble=h.freeUint8Clamped=h.freeDataView=function(E){l(E.buffer)},h.freeArrayBuffer=l,h.freeBuffer=function(E){c[n.log2(E.length)].push(E)},h.malloc=function(E,D){if(void 0===D||"arraybuffer"===D)return p(E);switch(D){case"uint8":return g(E);case"uint16":return u(E);case"uint32":return x(E);case"int8":return f(E);case"int16":return T(E);case"int32":return _(E);case"float":case"float32":return k(E);case"double":case"float64":return w(E);case"uint8_clamped":return C(E);case"bigint64":return O(E);case"biguint64":return A(E);case"buffer":return S(E);case"data":case"dataview":return P(E);default:return null}return null},h.mallocArrayBuffer=p,h.mallocUint8=g,h.mallocUint16=u,h.mallocUint32=x,h.mallocInt8=f,h.mallocInt16=T,h.mallocInt32=_,h.mallocFloat32=h.mallocFloat=k,h.mallocFloat64=h.mallocDouble=w,h.mallocUint8Clamped=C,h.mallocBigUint64=A,h.mallocBigInt64=O,h.mallocDataView=P,h.mallocBuffer=S,h.clearCache=function(){for(var E=0;E<32;++E)i.UINT8[E].length=0,i.UINT16[E].length=0,i.UINT32[E].length=0,i.INT8[E].length=0,i.INT16[E].length=0,i.INT32[E].length=0,i.FLOAT[E].length=0,i.DOUBLE[E].length=0,i.BIGUINT64[E].length=0,i.BIGINT64[E].length=0,i.UINT8C[E].length=0,s[E].length=0,c[E].length=0}}).call(this)}).call(this,void 0!==m?m:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(v,b,h){"use strict";function e(r){this.roots=new Array(r),this.ranks=new Array(r);for(var o=0;o<r;++o)this.roots[o]=o,this.ranks[o]=0}b.exports=e;var n=e.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},n.find=function(r){for(var o=r,t=this.roots;t[r]!==r;)r=t[r];for(;t[o]!==r;){var d=t[o];t[o]=r,o=d}return r},n.link=function(r,o){var t=this.find(r),d=this.find(o);if(t!==d){var a=this.ranks,i=this.roots,s=a[t],c=a[d];s<c?i[t]=d:c<s?i[d]=t:(i[d]=t,++a[t])}}},{}],310:[function(v,b,h){"use strict";b.exports=function(e,n,r){return 0===e.length?e:n?(r||e.sort(n),function(o,t){for(var d=1,a=o.length,i=o[0],s=o[0],c=1;c<a;++c)if(s=i,t(i=o[c],s)){if(c===d){d++;continue}o[d++]=i}return o.length=d,o}(e,n)):(r||e.sort(),function(o){for(var t=1,d=o.length,a=o[0],i=o[0],s=1;s<d;++s,i=a)if(i=a,(a=o[s])!==i){if(s===t){t++;continue}o[t++]=a}return o.length=t,o}(e))}},{}],311:[function(v,b,h){"use strict";b.exports=function(o,t){return"object"==typeof t&&null!==t||(t={}),e(o,t.canvas||n,t.context||r,t)};var e=v("./lib/vtext"),n=null,r=null;typeof document<"u"&&((n=document.createElement("canvas")).width=8192,n.height=1024,r=n.getContext("2d"))},{"./lib/vtext":312}],312:[function(v,b,h){b.exports=function(l,p,g,u){var x=64,f=1.25,T={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return u&&(u.size&&u.size>0&&(x=u.size),u.lineSpacing&&u.lineSpacing>0&&(f=u.lineSpacing),u.styletags&&u.styletags.breaklines&&(T.breaklines=!!u.styletags.breaklines),u.styletags&&u.styletags.bolds&&(T.bolds=!!u.styletags.bolds),u.styletags&&u.styletags.italics&&(T.italics=!!u.styletags.italics),u.styletags&&u.styletags.subscripts&&(T.subscripts=!!u.styletags.subscripts),u.styletags&&u.styletags.superscripts&&(T.superscripts=!!u.styletags.superscripts)),g.font=[u.fontStyle,u.fontVariant,u.fontWeight,x+"px",u.font].filter(function(_){return _}).join(" "),g.textAlign="start",g.textBaseline="alphabetic",g.direction="ltr",c(function(_,k,w,C,A,O){w=(w=w.replace(/\n/g,"")).replace(/\<br\>/g,!0===O.breaklines?"\n":" ");var P="",S=[];for(N=0;N<w.length;++N)S[N]=P;!0===O.bolds&&(S=a("b","b|",w,S)),!0===O.italics&&(S=a("i","i|",w,S)),!0===O.superscripts&&(S=a("sup","+1",w,S)),!0===O.subscripts&&(S=a("sub","-1",w,S));var E=[],D="";for(N=0;N<w.length;++N)null!==S[N]&&(D+=w[N],E.push(S[N]));var z,N,V,X,J,G=D.split("\n"),Z=G.length,re=Math.round(A*C),j=C,B=2*C,H=0,ee=Z*re+B;_.height<ee&&(_.height=ee),k.fillStyle="#000",k.fillRect(0,0,_.width,_.height),k.fillStyle="#fff";var U=0,$="";function q(){if(""!==$){var be=k.measureText($).width;k.fillText($,j+V,B+X),V+=be}}function te(){return Math.round(J)+"px "}function ne(be,_e){var xe=""+k.font;if(!0===O.subscripts){var Ee=be.indexOf("-"),he=_e.indexOf("-"),me=Ee>-1?parseInt(be[1+Ee]):0,Se=he>-1?parseInt(_e[1+he]):0;me!==Se&&(xe=xe.replace(te(),"?px "),J*=Math.pow(.75,Se-me),xe=xe.replace("?px ",te())),X+=.25*re*(Se-me)}if(!0===O.superscripts){var Me=be.indexOf("+"),Ie=_e.indexOf("+"),Fe=Me>-1?parseInt(be[1+Me]):0,Ne=Ie>-1?parseInt(_e[1+Ie]):0;Fe!==Ne&&(xe=xe.replace(te(),"?px "),J*=Math.pow(.75,Ne-Fe),xe=xe.replace("?px ",te())),X-=.25*re*(Ne-Fe)}if(!0===O.bolds){var De=be.indexOf("b|")>-1,$e=_e.indexOf("b|")>-1;!De&&$e&&(xe=Re?xe.replace("italic ","italic bold "):"bold "+xe),De&&!$e&&(xe=xe.replace("bold ",""))}if(!0===O.italics){var Re=be.indexOf("i|")>-1,ze=_e.indexOf("i|")>-1;!Re&&ze&&(xe="italic "+xe),Re&&!ze&&(xe=xe.replace("italic ",""))}k.font=xe}for(z=0;z<Z;++z){var se=G[z]+"\n";for(V=0,X=z*re,J=C,$="",N=0;N<se.length;++N){var ie=N+U<E.length?E[N+U]:E[E.length-1];P===ie?$+=se[N]:(q(),$=se[N],void 0!==ie&&(ne(P,ie),P=ie))}q(),U+=se.length;var ue=0|Math.round(V+2*j);H<ue&&(H=ue)}var le=H,de=B+re*Z;return n(k.getImageData(0,0,le,de).data,[de,le,4]).pick(-1,-1,0).transpose(1,0)}(p,g,l,x,f,T),u,x)},b.exports.processPixels=c;var e=v("surface-nets"),n=v("ndarray"),r=v("simplify-planar-graph"),o=v("clean-pslg"),t=v("cdt2d"),d=v("planar-graph-to-polyline");function a(l,p,g,u){for(var x="<"+l+">",f="</"+l+">",T=x.length,_=f.length,k="+"===p[0]||"-"===p[0],w=0,C=-_;w>-1&&-1!==(w=g.indexOf(x,w))&&-1!==(C=g.indexOf(f,w+T))&&!(C<=w);){for(var A=w;A<C+_;++A)if(A<w+T||A>=C)u[A]=null,g=g.substr(0,A)+" "+g.substr(A+1);else if(null!==u[A]){var O=u[A].indexOf(p[0]);-1===O?u[A]+=p:k&&(u[A]=u[A].substr(0,O+1)+(1+parseInt(u[A][O+1]))+u[A].substr(O+2))}var P=w+T,S=g.substr(P,C-P).indexOf(x);w=-1!==S?S:C+_}return u}function s(l,p,g,u){var x=function i(l,p){var g=e(l,128);return p?r(g.cells,g.positions,.25):{edges:g.cells,positions:g.positions}}(l,u),f=function(z,N,V){for(var X=N.textAlign||"start",J=N.textBaseline||"alphabetic",G=[1<<30,1<<30],Z=[0,0],re=z.length,j=0;j<re;++j)for(var B=z[j],H=0;H<2;++H)G[H]=0|Math.min(G[H],B[H]),Z[H]=0|Math.max(Z[H],B[H]);var ee=0;switch(X){case"center":ee=-.5*(G[0]+Z[0]);break;case"right":case"end":ee=-Z[0];break;case"left":case"start":ee=-G[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+X+"'")}var U=0;switch(J){case"hanging":case"top":U=-G[1];break;case"middle":U=-.5*(G[1]+Z[1]);break;case"alphabetic":case"ideographic":U=-3*V;break;case"bottom":U=-Z[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+J+"'")}var $=1/V;return"lineHeight"in N?$*=+N.lineHeight:"width"in N?$=N.width/(Z[0]-G[0]):"height"in N&&($=N.height/(Z[1]-G[1])),z.map(function(q){return[$*(q[0]+ee),$*(q[1]+U)]})}(x.positions,p,g),T=x.edges,_="ccw"===p.orientation;if(o(f,T),p.polygons||p.polygon||p.polyline){for(var k=d(T,f),w=new Array(k.length),C=0;C<k.length;++C){for(var A=k[C],O=new Array(A.length),P=0;P<A.length;++P){for(var S=A[P],E=new Array(S.length),D=0;D<S.length;++D)E[D]=f[S[D]].slice();_&&E.reverse(),O[P]=E}w[C]=O}return w}return p.triangles||p.triangulate||p.triangle?{cells:t(f,T,{delaunay:!1,exterior:!1,interior:!0}),positions:f}:{edges:T,positions:f}}function c(l,p,g){try{return s(l,p,g,!0)}catch{}try{return s(l,p,g,!1)}catch{}return p.polygons||p.polyline||p.polygon?[]:p.triangles||p.triangulate||p.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(v,b,h){!function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=x);var e=!1;if("function"==typeof WeakMap){var n=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var r=new n,o=Object.freeze({});if(r.set(o,1),1===r.get(o))return void(b.exports=WeakMap);e=!0}}var t=Object.getOwnPropertyNames,d=Object.defineProperty,a=Object.isExtensible,i="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var s=new ArrayBuffer(25),c=new Uint8Array(s);crypto.getRandomValues(c),i="weakmap:rand:"+Array.prototype.map.call(c,function(w){return(w%36).toString(36)}).join("")+"___"}if(d(Object,"getOwnPropertyNames",{value:function(w){return t(w).filter(f)}}),"getPropertyNames"in Object){var l=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(w){return l(w).filter(f)}})}!function(){var w=Object.freeze;d(Object,"freeze",{value:function(O){return T(O),w(O)}});var C=Object.seal;d(Object,"seal",{value:function(O){return T(O),C(O)}});var A=Object.preventExtensions;d(Object,"preventExtensions",{value:function(O){return T(O),A(O)}})}();var p=!1,g=0,u=function(){this instanceof u||k();var w=[],C=[],A=g++;return Object.create(u.prototype,{get___:{value:_(function(O,P){var S,E=T(O);return E?A in E?E[A]:P:(S=w.indexOf(O))>=0?C[S]:P})},has___:{value:_(function(O){var P=T(O);return P?A in P:w.indexOf(O)>=0})},set___:{value:_(function(O,P){var S,E=T(O);return E?E[A]=P:(S=w.indexOf(O))>=0?C[S]=P:(C[S=w.length]=P,w[S]=O),this})},delete___:{value:_(function(O){var P,S,E=T(O);return E?A in E&&delete E[A]:!((P=w.indexOf(O))<0||(S=w.length-1,w[P]=void 0,C[P]=C[S],w[P]=w[S],w.length=S,C.length=S,0))})}})};u.prototype=Object.create(Object.prototype,{get:{value:function(w,C){return this.get___(w,C)},writable:!0,configurable:!0},has:{value:function(w){return this.has___(w)},writable:!0,configurable:!0},set:{value:function(w,C){return this.set___(w,C)},writable:!0,configurable:!0},delete:{value:function(w){return this.delete___(w)},writable:!0,configurable:!0}}),"function"==typeof n?function(){function w(){this instanceof u||k();var C,A=new n,O=void 0,P=!1;return C=e?function(S,E){return A.set(S,E),A.has(S)||(O||(O=new u),O.set(S,E)),this}:function(S,E){if(P)try{A.set(S,E)}catch{O||(O=new u),O.set___(S,E)}else A.set(S,E);return this},Object.create(u.prototype,{get___:{value:_(function(S,E){return O?A.has(S)?A.get(S):O.get___(S,E):A.get(S,E)})},has___:{value:_(function(S){return A.has(S)||!!O&&O.has___(S)})},set___:{value:_(C)},delete___:{value:_(function(S){var E=!!A.delete(S);return O&&O.delete___(S)||E})},permitHostObjects___:{value:_(function(S){if(S!==x)throw new Error("bogus call to permitHostObjects___");P=!0})}})}e&&typeof Proxy<"u"&&(Proxy=void 0),w.prototype=u.prototype,b.exports=w,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),b.exports=u)}function x(w){w.permitHostObjects___&&w.permitHostObjects___(x)}function f(w){return!("weakmap:"==w.substr(0,8)&&"___"===w.substr(w.length-3))}function T(w){if(w!==Object(w))throw new TypeError("Not an object: "+w);var C=w[i];if(C&&C.key===w)return C;if(a(w)){C={key:w};try{return d(w,i,{value:C,writable:!1,enumerable:!1,configurable:!1}),C}catch{return}}}function _(w){return w.prototype=null,Object.freeze(w)}function k(){p||typeof console>"u"||(p=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(v,b,h){var e=v("./hidden-store.js");b.exports=function(){var n={};return function(r){if(("object"!=typeof r||null===r)&&"function"!=typeof r)throw new Error("Weakmap-shim: Key must be object");var o=r.valueOf(n);return o&&o.identity===n?o:e(r,n)}}},{"./hidden-store.js":315}],315:[function(v,b,h){b.exports=function(e,n){var r={identity:n},o=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(t){return t!==n?o.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(v,b,h){var e=v("./create-store.js");b.exports=function(){var n=e();return{get:function(r,o){var t=n(r);return t.hasOwnProperty("value")?t.value:o},set:function(r,o){return n(r).value=o,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},{"./create-store.js":314}],317:[function(v,b,h){"use strict";var r,o;b.exports=(r=function(){return function(r,o,t,d,a,i){var s=r[0],c=t[0],l=[0],p=c;d|=0;var g=0,u=c;for(g=0;g<s;++g){var x=o[d]-i,f=o[d+p]-i;x>=0!=f>=0&&a.push(l[0]+.5+.5*(x+f)/(x-f)),d+=u,++l[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),o={},function(t,d,a){var i=t.dtype,s=t.order,c=[i,s.join()].join(),l=o[c];return l||(o[c]=l=r([i,s])),l(t.shape.slice(0),t.data,t.stride,0|t.offset,d,a)})},{}],318:[function(v,b,h){"use strict";b.exports=function(n,r){var o=[];return r=+r||0,e(n.hi(n.shape[0]-1),o,r),o};var e=v("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)}}]);